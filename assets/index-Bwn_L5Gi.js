var Mje=Object.defineProperty;var Lje=(e,t,n)=>t in e?Mje(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Fje=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var fu=(e,t,n)=>(Lje(e,typeof t!="symbol"?t+"":t,n),n);var Ban=Fje((Xun,rie)=>{function jje(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var to=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Gl(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Bje(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var nye={exports:{}},WM={},rye={exports:{}},Mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qI=Symbol.for("react.element"),Uje=Symbol.for("react.portal"),zje=Symbol.for("react.fragment"),Vje=Symbol.for("react.strict_mode"),Hje=Symbol.for("react.profiler"),qje=Symbol.for("react.provider"),Wje=Symbol.for("react.context"),Gje=Symbol.for("react.forward_ref"),Yje=Symbol.for("react.suspense"),Kje=Symbol.for("react.memo"),Xje=Symbol.for("react.lazy"),Cie=Symbol.iterator;function Qje(e){return e===null||typeof e!="object"?null:(e=Cie&&e[Cie]||e["@@iterator"],typeof e=="function"?e:null)}var iye={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sye=Object.assign,oye={};function Fx(e,t,n){this.props=e,this.context=t,this.refs=oye,this.updater=n||iye}Fx.prototype.isReactComponent={};Fx.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Fx.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function aye(){}aye.prototype=Fx.prototype;function Sq(e,t,n){this.props=e,this.context=t,this.refs=oye,this.updater=n||iye}var Tq=Sq.prototype=new aye;Tq.constructor=Sq;sye(Tq,Fx.prototype);Tq.isPureReactComponent=!0;var Iie=Array.isArray,uye=Object.prototype.hasOwnProperty,Aq={current:null},lye={key:!0,ref:!0,__self:!0,__source:!0};function cye(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)uye.call(t,r)&&!lye.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:qI,type:e,key:s,ref:o,props:i,_owner:Aq.current}}function Jje(e,t){return{$$typeof:qI,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cq(e){return typeof e=="object"&&e!==null&&e.$$typeof===qI}function Zje(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var kie=/\/+/g;function H5(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Zje(""+e.key):t.toString(36)}function BP(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case qI:case Uje:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+H5(o,0):r,Iie(i)?(n="",e!=null&&(n=e.replace(kie,"$&/")+"/"),BP(i,t,n,"",function(l){return l})):i!=null&&(Cq(i)&&(i=Jje(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(kie,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Iie(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+H5(s,a);o+=BP(s,t,n,u,i)}else if(u=Qje(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+H5(s,a++),o+=BP(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function QR(e,t,n){if(e==null)return e;var r=[],i=0;return BP(e,r,"","",function(s){return t.call(n,s,i++)}),r}function e8e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var nu={current:null},UP={transition:null},t8e={ReactCurrentDispatcher:nu,ReactCurrentBatchConfig:UP,ReactCurrentOwner:Aq};function fye(){throw Error("act(...) is not supported in production builds of React.")}Mn.Children={map:QR,forEach:function(e,t,n){QR(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return QR(e,function(){t++}),t},toArray:function(e){return QR(e,function(t){return t})||[]},only:function(e){if(!Cq(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Mn.Component=Fx;Mn.Fragment=zje;Mn.Profiler=Hje;Mn.PureComponent=Sq;Mn.StrictMode=Vje;Mn.Suspense=Yje;Mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=t8e;Mn.act=fye;Mn.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=sye({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Aq.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)uye.call(t,u)&&!lye.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:qI,type:e.type,key:i,ref:s,props:r,_owner:o}};Mn.createContext=function(e){return e={$$typeof:Wje,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qje,_context:e},e.Consumer=e};Mn.createElement=cye;Mn.createFactory=function(e){var t=cye.bind(null,e);return t.type=e,t};Mn.createRef=function(){return{current:null}};Mn.forwardRef=function(e){return{$$typeof:Gje,render:e}};Mn.isValidElement=Cq;Mn.lazy=function(e){return{$$typeof:Xje,_payload:{_status:-1,_result:e},_init:e8e}};Mn.memo=function(e,t){return{$$typeof:Kje,type:e,compare:t===void 0?null:t}};Mn.startTransition=function(e){var t=UP.transition;UP.transition={};try{e()}finally{UP.transition=t}};Mn.unstable_act=fye;Mn.useCallback=function(e,t){return nu.current.useCallback(e,t)};Mn.useContext=function(e){return nu.current.useContext(e)};Mn.useDebugValue=function(){};Mn.useDeferredValue=function(e){return nu.current.useDeferredValue(e)};Mn.useEffect=function(e,t){return nu.current.useEffect(e,t)};Mn.useId=function(){return nu.current.useId()};Mn.useImperativeHandle=function(e,t,n){return nu.current.useImperativeHandle(e,t,n)};Mn.useInsertionEffect=function(e,t){return nu.current.useInsertionEffect(e,t)};Mn.useLayoutEffect=function(e,t){return nu.current.useLayoutEffect(e,t)};Mn.useMemo=function(e,t){return nu.current.useMemo(e,t)};Mn.useReducer=function(e,t,n){return nu.current.useReducer(e,t,n)};Mn.useRef=function(e){return nu.current.useRef(e)};Mn.useState=function(e){return nu.current.useState(e)};Mn.useSyncExternalStore=function(e,t,n){return nu.current.useSyncExternalStore(e,t,n)};Mn.useTransition=function(){return nu.current.useTransition()};Mn.version="18.3.1";rye.exports=Mn;var I=rye.exports;const _r=Gl(I),sO=jje({__proto__:null,default:_r},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n8e=I,r8e=Symbol.for("react.element"),i8e=Symbol.for("react.fragment"),s8e=Object.prototype.hasOwnProperty,o8e=n8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a8e={key:!0,ref:!0,__self:!0,__source:!0};function dye(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)s8e.call(t,r)&&!a8e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:r8e,type:e,key:s,ref:o,props:i,_owner:o8e.current}}WM.Fragment=i8e;WM.jsx=dye;WM.jsxs=dye;nye.exports=WM;var _=nye.exports,jB={},hye={exports:{}},Yl={},pye={exports:{}},mye={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var P=U.length;U.push(H);e:for(;0<P;){var z=P-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[P]=W,P=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],P=U.pop();if(P!==H){U[0]=P;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,P))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=P,z=ne):(U[z]=G,U[q]=P,z=q);else if(ne<W&&0>i(ce,P))U[z]=ce,U[ne]=P,z=ne;else break e}}return H}function i(U,H){var P=U.sortIndex-H.sortIndex;return P!==0?P:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,M(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var P=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!N());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=P,h=!1}}var T=!1,S=null,A=-1,C=5,k=-1;function N(){return!(e.unstable_now()-k<C)}function O(){if(S!==null){var U=e.unstable_now();k=U;var H=!0;try{H=S(!0,U)}finally{H?D():(T=!1,S=null)}}else T=!1}var D;if(typeof v=="function")D=function(){v(O)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=O,D=function(){F.postMessage(null)}}else D=function(){g(O,0)};function M(U){S=U,T||(T=!0,D())}function B(U,H){A=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var P=d;d=H;try{return U()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var P=d;d=U;try{return H()}finally{d=P}},e.unstable_scheduleCallback=function(U,H,P){var z=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?z+P:z):P=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,U={id:c++,callback:H,priorityLevel:U,startTime:P,expirationTime:W,sortIndex:-1},P>z?(U.sortIndex=P,t(l,U),n(u)===null&&U===n(l)&&(m?(y(A),A=-1):m=!0,B(w,P-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,M(E))),U},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(U){var H=d;return function(){var P=d;d=H;try{return U.apply(this,arguments)}finally{d=P}}}})(mye);pye.exports=mye;var u8e=pye.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var l8e=I,Dl=u8e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var gye=new Set,tC={};function Tb(e,t){bE(e,t),bE(e+"Capture",t)}function bE(e,t){for(tC[e]=t,e=0;e<t.length;e++)gye.add(t[e])}var cm=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),BB=Object.prototype.hasOwnProperty,c8e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Rie={},Nie={};function f8e(e){return BB.call(Nie,e)?!0:BB.call(Rie,e)?!1:c8e.test(e)?Nie[e]=!0:(Rie[e]=!0,!1)}function d8e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function h8e(e,t,n,r){if(t===null||typeof t>"u"||d8e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function ru(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Mo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Mo[e]=new ru(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Mo[t]=new ru(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Mo[e]=new ru(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Mo[e]=new ru(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Mo[e]=new ru(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Mo[e]=new ru(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Mo[e]=new ru(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Mo[e]=new ru(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Mo[e]=new ru(e,5,!1,e.toLowerCase(),null,!1,!1)});var Iq=/[\-:]([a-z])/g;function kq(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Iq,kq);Mo[t]=new ru(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Iq,kq);Mo[t]=new ru(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Iq,kq);Mo[t]=new ru(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Mo[e]=new ru(e,1,!1,e.toLowerCase(),null,!1,!1)});Mo.xlinkHref=new ru("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Mo[e]=new ru(e,1,!1,e.toLowerCase(),null,!0,!0)});function Rq(e,t,n,r){var i=Mo.hasOwnProperty(t)?Mo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(h8e(t,n,i,r)&&(n=null),r||i===null?f8e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var jm=l8e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,JR=Symbol.for("react.element"),aw=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),Nq=Symbol.for("react.strict_mode"),UB=Symbol.for("react.profiler"),yye=Symbol.for("react.provider"),vye=Symbol.for("react.context"),Pq=Symbol.for("react.forward_ref"),zB=Symbol.for("react.suspense"),VB=Symbol.for("react.suspense_list"),Dq=Symbol.for("react.memo"),Ag=Symbol.for("react.lazy"),bye=Symbol.for("react.offscreen"),Pie=Symbol.iterator;function uT(e){return e===null||typeof e!="object"?null:(e=Pie&&e[Pie]||e["@@iterator"],typeof e=="function"?e:null)}var Di=Object.assign,q5;function l2(e){if(q5===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);q5=t&&t[1]||""}return`
`+q5+e}var W5=!1;function G5(e,t){if(!e||W5)return"";W5=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{W5=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?l2(e):""}function p8e(e){switch(e.tag){case 5:return l2(e.type);case 16:return l2("Lazy");case 13:return l2("Suspense");case 19:return l2("SuspenseList");case 0:case 2:case 15:return e=G5(e.type,!1),e;case 11:return e=G5(e.type.render,!1),e;case 1:return e=G5(e.type,!0),e;default:return""}}function HB(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case uw:return"Fragment";case aw:return"Portal";case UB:return"Profiler";case Nq:return"StrictMode";case zB:return"Suspense";case VB:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case vye:return(e.displayName||"Context")+".Consumer";case yye:return(e._context.displayName||"Context")+".Provider";case Pq:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case Dq:return t=e.displayName||null,t!==null?t:HB(e.type)||"Memo";case Ag:t=e._payload,e=e._init;try{return HB(e(t))}catch{}}return null}function m8e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return HB(t);case 8:return t===Nq?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function $0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function _ye(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function g8e(e){var t=_ye(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function ZR(e){e._valueTracker||(e._valueTracker=g8e(e))}function wye(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=_ye(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function oO(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function qB(e,t){var n=t.checked;return Di({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Die(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=$0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Eye(e,t){t=t.checked,t!=null&&Rq(e,"checked",t,!1)}function WB(e,t){Eye(e,t);var n=$0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?GB(e,t.type,n):t.hasOwnProperty("defaultValue")&&GB(e,t.type,$0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Oie(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function GB(e,t,n){(t!=="number"||oO(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var c2=Array.isArray;function Dw(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+$0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function YB(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Di({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function $ie(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(c2(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:$0(n)}}function xye(e,t){var n=$0(t.value),r=$0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function Mie(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Sye(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function KB(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Sye(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var eN,Tye=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(eN=eN||document.createElement("div"),eN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=eN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function nC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var tA={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},y8e=["Webkit","ms","Moz","O"];Object.keys(tA).forEach(function(e){y8e.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),tA[t]=tA[e]})});function Aye(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||tA.hasOwnProperty(e)&&tA[e]?(""+t).trim():t+"px"}function Cye(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Aye(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var v8e=Di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function XB(e,t){if(t){if(v8e[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function QB(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var JB=null;function Oq(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ZB=null,Ow=null,$w=null;function Lie(e){if(e=YI(e)){if(typeof ZB!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=QM(t),ZB(e.stateNode,e.type,t))}}function Iye(e){Ow?$w?$w.push(e):$w=[e]:Ow=e}function kye(){if(Ow){var e=Ow,t=$w;if($w=Ow=null,Lie(e),t)for(e=0;e<t.length;e++)Lie(t[e])}}function Rye(e,t){return e(t)}function Nye(){}var Y5=!1;function Pye(e,t,n){if(Y5)return e(t,n);Y5=!0;try{return Rye(e,t,n)}finally{Y5=!1,(Ow!==null||$w!==null)&&(Nye(),kye())}}function rC(e,t){var n=e.stateNode;if(n===null)return null;var r=QM(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var eU=!1;if(cm)try{var lT={};Object.defineProperty(lT,"passive",{get:function(){eU=!0}}),window.addEventListener("test",lT,lT),window.removeEventListener("test",lT,lT)}catch{eU=!1}function b8e(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var nA=!1,aO=null,uO=!1,tU=null,_8e={onError:function(e){nA=!0,aO=e}};function w8e(e,t,n,r,i,s,o,a,u){nA=!1,aO=null,b8e.apply(_8e,arguments)}function E8e(e,t,n,r,i,s,o,a,u){if(w8e.apply(this,arguments),nA){if(nA){var l=aO;nA=!1,aO=null}else throw Error(tt(198));uO||(uO=!0,tU=l)}}function Ab(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function Dye(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function Fie(e){if(Ab(e)!==e)throw Error(tt(188))}function x8e(e){var t=e.alternate;if(!t){if(t=Ab(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Fie(i),e;if(s===r)return Fie(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function Oye(e){return e=x8e(e),e!==null?$ye(e):null}function $ye(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=$ye(e);if(t!==null)return t;e=e.sibling}return null}var Mye=Dl.unstable_scheduleCallback,jie=Dl.unstable_cancelCallback,S8e=Dl.unstable_shouldYield,T8e=Dl.unstable_requestPaint,ss=Dl.unstable_now,A8e=Dl.unstable_getCurrentPriorityLevel,$q=Dl.unstable_ImmediatePriority,Lye=Dl.unstable_UserBlockingPriority,lO=Dl.unstable_NormalPriority,C8e=Dl.unstable_LowPriority,Fye=Dl.unstable_IdlePriority,GM=null,rh=null;function I8e(e){if(rh&&typeof rh.onCommitFiberRoot=="function")try{rh.onCommitFiberRoot(GM,e,void 0,(e.current.flags&128)===128)}catch{}}var Df=Math.clz32?Math.clz32:N8e,k8e=Math.log,R8e=Math.LN2;function N8e(e){return e>>>=0,e===0?32:31-(k8e(e)/R8e|0)|0}var tN=64,nN=4194304;function f2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function cO(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=f2(a):(s&=o,s!==0&&(r=f2(s)))}else o=n&~i,o!==0?r=f2(o):s!==0&&(r=f2(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-Df(t),i=1<<n,r|=e[n],t&=~i;return r}function P8e(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function D8e(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Df(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=P8e(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function nU(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function jye(){var e=tN;return tN<<=1,!(tN&4194240)&&(tN=64),e}function K5(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function WI(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Df(t),e[t]=n}function O8e(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-Df(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function Mq(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-Df(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Or=0;function Bye(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var Uye,Lq,zye,Vye,Hye,rU=!1,rN=[],u0=null,l0=null,c0=null,iC=new Map,sC=new Map,Mg=[],$8e="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Bie(e,t){switch(e){case"focusin":case"focusout":u0=null;break;case"dragenter":case"dragleave":l0=null;break;case"mouseover":case"mouseout":c0=null;break;case"pointerover":case"pointerout":iC.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":sC.delete(t.pointerId)}}function cT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=YI(t),t!==null&&Lq(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function M8e(e,t,n,r,i){switch(t){case"focusin":return u0=cT(u0,e,t,n,r,i),!0;case"dragenter":return l0=cT(l0,e,t,n,r,i),!0;case"mouseover":return c0=cT(c0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return iC.set(s,cT(iC.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,sC.set(s,cT(sC.get(s)||null,e,t,n,r,i)),!0}return!1}function qye(e){var t=Xv(e.target);if(t!==null){var n=Ab(t);if(n!==null){if(t=n.tag,t===13){if(t=Dye(n),t!==null){e.blockedOn=t,Hye(e.priority,function(){zye(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function zP(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=iU(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);JB=r,n.target.dispatchEvent(r),JB=null}else return t=YI(n),t!==null&&Lq(t),e.blockedOn=n,!1;t.shift()}return!0}function Uie(e,t,n){zP(e)&&n.delete(t)}function L8e(){rU=!1,u0!==null&&zP(u0)&&(u0=null),l0!==null&&zP(l0)&&(l0=null),c0!==null&&zP(c0)&&(c0=null),iC.forEach(Uie),sC.forEach(Uie)}function fT(e,t){e.blockedOn===t&&(e.blockedOn=null,rU||(rU=!0,Dl.unstable_scheduleCallback(Dl.unstable_NormalPriority,L8e)))}function oC(e){function t(i){return fT(i,e)}if(0<rN.length){fT(rN[0],e);for(var n=1;n<rN.length;n++){var r=rN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(u0!==null&&fT(u0,e),l0!==null&&fT(l0,e),c0!==null&&fT(c0,e),iC.forEach(t),sC.forEach(t),n=0;n<Mg.length;n++)r=Mg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Mg.length&&(n=Mg[0],n.blockedOn===null);)qye(n),n.blockedOn===null&&Mg.shift()}var Mw=jm.ReactCurrentBatchConfig,fO=!0;function F8e(e,t,n,r){var i=Or,s=Mw.transition;Mw.transition=null;try{Or=1,Fq(e,t,n,r)}finally{Or=i,Mw.transition=s}}function j8e(e,t,n,r){var i=Or,s=Mw.transition;Mw.transition=null;try{Or=4,Fq(e,t,n,r)}finally{Or=i,Mw.transition=s}}function Fq(e,t,n,r){if(fO){var i=iU(e,t,n,r);if(i===null)sj(e,t,r,dO,n),Bie(e,r);else if(M8e(i,e,t,n,r))r.stopPropagation();else if(Bie(e,r),t&4&&-1<$8e.indexOf(e)){for(;i!==null;){var s=YI(i);if(s!==null&&Uye(s),s=iU(e,t,n,r),s===null&&sj(e,t,r,dO,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else sj(e,t,r,null,n)}}var dO=null;function iU(e,t,n,r){if(dO=null,e=Oq(r),e=Xv(e),e!==null)if(t=Ab(e),t===null)e=null;else if(n=t.tag,n===13){if(e=Dye(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return dO=e,null}function Wye(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(A8e()){case $q:return 1;case Lye:return 4;case lO:case C8e:return 16;case Fye:return 536870912;default:return 16}default:return 16}}var Wg=null,jq=null,VP=null;function Gye(){if(VP)return VP;var e,t=jq,n=t.length,r,i="value"in Wg?Wg.value:Wg.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return VP=i.slice(e,1<r?1-r:void 0)}function HP(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function iN(){return!0}function zie(){return!1}function Kl(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iN:zie,this.isPropagationStopped=zie,this}return Di(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=iN)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=iN)},persist:function(){},isPersistent:iN}),t}var jx={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bq=Kl(jx),GI=Di({},jx,{view:0,detail:0}),B8e=Kl(GI),X5,Q5,dT,YM=Di({},GI,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Uq,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==dT&&(dT&&e.type==="mousemove"?(X5=e.screenX-dT.screenX,Q5=e.screenY-dT.screenY):Q5=X5=0,dT=e),X5)},movementY:function(e){return"movementY"in e?e.movementY:Q5}}),Vie=Kl(YM),U8e=Di({},YM,{dataTransfer:0}),z8e=Kl(U8e),V8e=Di({},GI,{relatedTarget:0}),J5=Kl(V8e),H8e=Di({},jx,{animationName:0,elapsedTime:0,pseudoElement:0}),q8e=Kl(H8e),W8e=Di({},jx,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),G8e=Kl(W8e),Y8e=Di({},jx,{data:0}),Hie=Kl(Y8e),K8e={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},X8e={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Q8e={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function J8e(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=Q8e[e])?!!t[e]:!1}function Uq(){return J8e}var Z8e=Di({},GI,{key:function(e){if(e.key){var t=K8e[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=HP(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?X8e[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Uq,charCode:function(e){return e.type==="keypress"?HP(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?HP(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),e9e=Kl(Z8e),t9e=Di({},YM,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),qie=Kl(t9e),n9e=Di({},GI,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Uq}),r9e=Kl(n9e),i9e=Di({},jx,{propertyName:0,elapsedTime:0,pseudoElement:0}),s9e=Kl(i9e),o9e=Di({},YM,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),a9e=Kl(o9e),u9e=[9,13,27,32],zq=cm&&"CompositionEvent"in window,rA=null;cm&&"documentMode"in document&&(rA=document.documentMode);var l9e=cm&&"TextEvent"in window&&!rA,Yye=cm&&(!zq||rA&&8<rA&&11>=rA),Wie=" ",Gie=!1;function Kye(e,t){switch(e){case"keyup":return u9e.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xye(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lw=!1;function c9e(e,t){switch(e){case"compositionend":return Xye(t);case"keypress":return t.which!==32?null:(Gie=!0,Wie);case"textInput":return e=t.data,e===Wie&&Gie?null:e;default:return null}}function f9e(e,t){if(lw)return e==="compositionend"||!zq&&Kye(e,t)?(e=Gye(),VP=jq=Wg=null,lw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Yye&&t.locale!=="ko"?null:t.data;default:return null}}var d9e={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Yie(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!d9e[e.type]:t==="textarea"}function Qye(e,t,n,r){Iye(r),t=hO(t,"onChange"),0<t.length&&(n=new Bq("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var iA=null,aC=null;function h9e(e){uve(e,0)}function KM(e){var t=dw(e);if(wye(t))return e}function p9e(e,t){if(e==="change")return t}var Jye=!1;if(cm){var Z5;if(cm){var ej="oninput"in document;if(!ej){var Kie=document.createElement("div");Kie.setAttribute("oninput","return;"),ej=typeof Kie.oninput=="function"}Z5=ej}else Z5=!1;Jye=Z5&&(!document.documentMode||9<document.documentMode)}function Xie(){iA&&(iA.detachEvent("onpropertychange",Zye),aC=iA=null)}function Zye(e){if(e.propertyName==="value"&&KM(aC)){var t=[];Qye(t,aC,e,Oq(e)),Pye(h9e,t)}}function m9e(e,t,n){e==="focusin"?(Xie(),iA=t,aC=n,iA.attachEvent("onpropertychange",Zye)):e==="focusout"&&Xie()}function g9e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return KM(aC)}function y9e(e,t){if(e==="click")return KM(t)}function v9e(e,t){if(e==="input"||e==="change")return KM(t)}function b9e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var zf=typeof Object.is=="function"?Object.is:b9e;function uC(e,t){if(zf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!BB.call(t,i)||!zf(e[i],t[i]))return!1}return!0}function Qie(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Jie(e,t){var n=Qie(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Qie(n)}}function eve(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?eve(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function tve(){for(var e=window,t=oO();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=oO(e.document)}return t}function Vq(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _9e(e){var t=tve(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&eve(n.ownerDocument.documentElement,n)){if(r!==null&&Vq(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=Jie(n,s);var o=Jie(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var w9e=cm&&"documentMode"in document&&11>=document.documentMode,cw=null,sU=null,sA=null,oU=!1;function Zie(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;oU||cw==null||cw!==oO(r)||(r=cw,"selectionStart"in r&&Vq(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),sA&&uC(sA,r)||(sA=r,r=hO(sU,"onSelect"),0<r.length&&(t=new Bq("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=cw)))}function sN(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var fw={animationend:sN("Animation","AnimationEnd"),animationiteration:sN("Animation","AnimationIteration"),animationstart:sN("Animation","AnimationStart"),transitionend:sN("Transition","TransitionEnd")},tj={},nve={};cm&&(nve=document.createElement("div").style,"AnimationEvent"in window||(delete fw.animationend.animation,delete fw.animationiteration.animation,delete fw.animationstart.animation),"TransitionEvent"in window||delete fw.transitionend.transition);function XM(e){if(tj[e])return tj[e];if(!fw[e])return e;var t=fw[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in nve)return tj[e]=t[n];return e}var rve=XM("animationend"),ive=XM("animationiteration"),sve=XM("animationstart"),ove=XM("transitionend"),ave=new Map,ese="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ey(e,t){ave.set(e,t),Tb(t,[e])}for(var nj=0;nj<ese.length;nj++){var rj=ese[nj],E9e=rj.toLowerCase(),x9e=rj[0].toUpperCase()+rj.slice(1);Ey(E9e,"on"+x9e)}Ey(rve,"onAnimationEnd");Ey(ive,"onAnimationIteration");Ey(sve,"onAnimationStart");Ey("dblclick","onDoubleClick");Ey("focusin","onFocus");Ey("focusout","onBlur");Ey(ove,"onTransitionEnd");bE("onMouseEnter",["mouseout","mouseover"]);bE("onMouseLeave",["mouseout","mouseover"]);bE("onPointerEnter",["pointerout","pointerover"]);bE("onPointerLeave",["pointerout","pointerover"]);Tb("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Tb("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Tb("onBeforeInput",["compositionend","keypress","textInput","paste"]);Tb("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Tb("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Tb("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var d2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),S9e=new Set("cancel close invalid load scroll toggle".split(" ").concat(d2));function tse(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,E8e(r,t,void 0,e),e.currentTarget=null}function uve(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;tse(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;tse(i,a,l),s=u}}}if(uO)throw e=tU,uO=!1,tU=null,e}function oi(e,t){var n=t[fU];n===void 0&&(n=t[fU]=new Set);var r=e+"__bubble";n.has(r)||(lve(t,e,2,!1),n.add(r))}function ij(e,t,n){var r=0;t&&(r|=4),lve(n,e,r,t)}var oN="_reactListening"+Math.random().toString(36).slice(2);function lC(e){if(!e[oN]){e[oN]=!0,gye.forEach(function(n){n!=="selectionchange"&&(S9e.has(n)||ij(n,!1,e),ij(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[oN]||(t[oN]=!0,ij("selectionchange",!1,t))}}function lve(e,t,n,r){switch(Wye(t)){case 1:var i=F8e;break;case 4:i=j8e;break;default:i=Fq}n=i.bind(null,t,n,e),i=void 0,!eU||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function sj(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Xv(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}Pye(function(){var l=s,c=Oq(n),f=[];e:{var d=ave.get(e);if(d!==void 0){var h=Bq,p=e;switch(e){case"keypress":if(HP(n)===0)break e;case"keydown":case"keyup":h=e9e;break;case"focusin":p="focus",h=J5;break;case"focusout":p="blur",h=J5;break;case"beforeblur":case"afterblur":h=J5;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=Vie;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=z8e;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=r9e;break;case rve:case ive:case sve:h=q8e;break;case ove:h=s9e;break;case"scroll":h=B8e;break;case"wheel":h=a9e;break;case"copy":case"cut":case"paste":h=G8e;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=qie}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=rC(v,y),w!=null&&m.push(cC(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==JB&&(p=n.relatedTarget||n.fromElement)&&(Xv(p)||p[fm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?Xv(p):null,p!==null&&(g=Ab(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=Vie,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=qie,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:dw(h),b=p==null?d:dw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,Xv(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=v_(b))v++;for(b=0,w=y;w;w=v_(w))b++;for(;0<v-b;)m=v_(m),v--;for(;0<b-v;)y=v_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=v_(m),y=v_(y)}m=null}else m=null;h!==null&&nse(f,d,h,m,!1),p!==null&&g!==null&&nse(f,g,p,m,!0)}}e:{if(d=l?dw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=p9e;else if(Yie(d))if(Jye)E=v9e;else{E=g9e;var T=m9e}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=y9e);if(E&&(E=E(e,l))){Qye(f,E,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&GB(d,"number",d.value)}switch(T=l?dw(l):window,e){case"focusin":(Yie(T)||T.contentEditable==="true")&&(cw=T,sU=l,sA=null);break;case"focusout":sA=sU=cw=null;break;case"mousedown":oU=!0;break;case"contextmenu":case"mouseup":case"dragend":oU=!1,Zie(f,n,c);break;case"selectionchange":if(w9e)break;case"keydown":case"keyup":Zie(f,n,c)}var S;if(zq)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else lw?Kye(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(Yye&&n.locale!=="ko"&&(lw||A!=="onCompositionStart"?A==="onCompositionEnd"&&lw&&(S=Gye()):(Wg=c,jq="value"in Wg?Wg.value:Wg.textContent,lw=!0)),T=hO(l,A),0<T.length&&(A=new Hie(A,e,null,n,c),f.push({event:A,listeners:T}),S?A.data=S:(S=Xye(n),S!==null&&(A.data=S)))),(S=l9e?c9e(e,n):f9e(e,n))&&(l=hO(l,"onBeforeInput"),0<l.length&&(c=new Hie("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}uve(f,t)})}function cC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function hO(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=rC(e,n),s!=null&&r.unshift(cC(e,s,i)),s=rC(e,t),s!=null&&r.push(cC(e,s,i))),e=e.return}return r}function v_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function nse(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=rC(n,s),u!=null&&o.unshift(cC(n,u,a))):i||(u=rC(n,s),u!=null&&o.push(cC(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var T9e=/\r\n?/g,A9e=/\u0000|\uFFFD/g;function rse(e){return(typeof e=="string"?e:""+e).replace(T9e,`
`).replace(A9e,"")}function aN(e,t,n){if(t=rse(t),rse(e)!==t&&n)throw Error(tt(425))}function pO(){}var aU=null,uU=null;function lU(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var cU=typeof setTimeout=="function"?setTimeout:void 0,C9e=typeof clearTimeout=="function"?clearTimeout:void 0,ise=typeof Promise=="function"?Promise:void 0,I9e=typeof queueMicrotask=="function"?queueMicrotask:typeof ise<"u"?function(e){return ise.resolve(null).then(e).catch(k9e)}:cU;function k9e(e){setTimeout(function(){throw e})}function oj(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),oC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);oC(t)}function f0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function sse(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Bx=Math.random().toString(36).slice(2),$d="__reactFiber$"+Bx,fC="__reactProps$"+Bx,fm="__reactContainer$"+Bx,fU="__reactEvents$"+Bx,R9e="__reactListeners$"+Bx,N9e="__reactHandles$"+Bx;function Xv(e){var t=e[$d];if(t)return t;for(var n=e.parentNode;n;){if(t=n[fm]||n[$d]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=sse(e);e!==null;){if(n=e[$d])return n;e=sse(e)}return t}e=n,n=e.parentNode}return null}function YI(e){return e=e[$d]||e[fm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function dw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function QM(e){return e[fC]||null}var dU=[],hw=-1;function xy(e){return{current:e}}function fi(e){0>hw||(e.current=dU[hw],dU[hw]=null,hw--)}function ti(e,t){hw++,dU[hw]=e.current,e.current=t}var M0={},va=xy(M0),Lu=xy(!1),D1=M0;function _E(e,t){var n=e.type.contextTypes;if(!n)return M0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Fu(e){return e=e.childContextTypes,e!=null}function mO(){fi(Lu),fi(va)}function ose(e,t,n){if(va.current!==M0)throw Error(tt(168));ti(va,t),ti(Lu,n)}function cve(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,m8e(e)||"Unknown",i));return Di({},n,r)}function gO(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||M0,D1=va.current,ti(va,e),ti(Lu,Lu.current),!0}function ase(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=cve(e,t,D1),r.__reactInternalMemoizedMergedChildContext=e,fi(Lu),fi(va),ti(va,e)):fi(Lu),ti(Lu,n)}var Ip=null,JM=!1,aj=!1;function fve(e){Ip===null?Ip=[e]:Ip.push(e)}function P9e(e){JM=!0,fve(e)}function Sy(){if(!aj&&Ip!==null){aj=!0;var e=0,t=Or;try{var n=Ip;for(Or=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Ip=null,JM=!1}catch(i){throw Ip!==null&&(Ip=Ip.slice(e+1)),Mye($q,Sy),i}finally{Or=t,aj=!1}}return null}var pw=[],mw=0,yO=null,vO=0,fc=[],dc=0,O1=null,Bp=1,Up="";function _v(e,t){pw[mw++]=vO,pw[mw++]=yO,yO=e,vO=t}function dve(e,t,n){fc[dc++]=Bp,fc[dc++]=Up,fc[dc++]=O1,O1=e;var r=Bp;e=Up;var i=32-Df(r)-1;r&=~(1<<i),n+=1;var s=32-Df(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Bp=1<<32-Df(t)+i|n<<i|r,Up=s+e}else Bp=1<<s|n<<i|r,Up=e}function Hq(e){e.return!==null&&(_v(e,1),dve(e,1,0))}function qq(e){for(;e===yO;)yO=pw[--mw],pw[mw]=null,vO=pw[--mw],pw[mw]=null;for(;e===O1;)O1=fc[--dc],fc[dc]=null,Up=fc[--dc],fc[dc]=null,Bp=fc[--dc],fc[dc]=null}var Il=null,_l=null,wi=!1,mf=null;function hve(e,t){var n=bc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function use(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Il=e,_l=f0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Il=e,_l=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=O1!==null?{id:Bp,overflow:Up}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=bc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Il=e,_l=null,!0):!1;default:return!1}}function hU(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pU(e){if(wi){var t=_l;if(t){var n=t;if(!use(e,t)){if(hU(e))throw Error(tt(418));t=f0(n.nextSibling);var r=Il;t&&use(e,t)?hve(r,n):(e.flags=e.flags&-4097|2,wi=!1,Il=e)}}else{if(hU(e))throw Error(tt(418));e.flags=e.flags&-4097|2,wi=!1,Il=e}}}function lse(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Il=e}function uN(e){if(e!==Il)return!1;if(!wi)return lse(e),wi=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!lU(e.type,e.memoizedProps)),t&&(t=_l)){if(hU(e))throw pve(),Error(tt(418));for(;t;)hve(e,t),t=f0(t.nextSibling)}if(lse(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){_l=f0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}_l=null}}else _l=Il?f0(e.stateNode.nextSibling):null;return!0}function pve(){for(var e=_l;e;)e=f0(e.nextSibling)}function wE(){_l=Il=null,wi=!1}function Wq(e){mf===null?mf=[e]:mf.push(e)}var D9e=jm.ReactCurrentBatchConfig;function hT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function lN(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function cse(e){var t=e._init;return t(e._payload)}function mve(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=m0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=pj(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===uw?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ag&&cse(E)===v.type)?(w=i(v,b.props),w.ref=hT(y,v,b),w.return=y,w):(w=QP(b.type,b.key,b.props,null,y.mode,w),w.ref=hT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=mj(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=v1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=pj(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case JR:return b=QP(v.type,v.key,v.props,null,y.mode,b),b.ref=hT(y,null,v),b.return=y,b;case aw:return v=mj(v,y.mode,b),v.return=y,v;case Ag:var w=v._init;return f(y,w(v._payload),b)}if(c2(v)||uT(v))return v=v1(v,y.mode,b,null),v.return=y,v;lN(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case JR:return b.key===E?u(y,v,b,w):null;case aw:return b.key===E?l(y,v,b,w):null;case Ag:return E=b._init,d(y,v,E(b._payload),w)}if(c2(b)||uT(b))return E!==null?null:c(y,v,b,w,null);lN(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case JR:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case aw:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case Ag:var T=w._init;return h(y,v,b,T(w._payload),E)}if(c2(w)||uT(w))return y=y.get(b)||null,c(v,y,w,E,null);lN(v,w)}return null}function p(y,v,b,w){for(var E=null,T=null,S=v,A=v=0,C=null;S!==null&&A<b.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var k=d(y,S,b[A],w);if(k===null){S===null&&(S=C);break}e&&S&&k.alternate===null&&t(y,S),v=s(k,v,A),T===null?E=k:T.sibling=k,T=k,S=C}if(A===b.length)return n(y,S),wi&&_v(y,A),E;if(S===null){for(;A<b.length;A++)S=f(y,b[A],w),S!==null&&(v=s(S,v,A),T===null?E=S:T.sibling=S,T=S);return wi&&_v(y,A),E}for(S=r(y,S);A<b.length;A++)C=h(S,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?A:C.key),v=s(C,v,A),T===null?E=C:T.sibling=C,T=C);return e&&S.forEach(function(N){return t(y,N)}),wi&&_v(y,A),E}function m(y,v,b,w){var E=uT(b);if(typeof E!="function")throw Error(tt(150));if(b=E.call(b),b==null)throw Error(tt(151));for(var T=E=null,S=v,A=v=0,C=null,k=b.next();S!==null&&!k.done;A++,k=b.next()){S.index>A?(C=S,S=null):C=S.sibling;var N=d(y,S,k.value,w);if(N===null){S===null&&(S=C);break}e&&S&&N.alternate===null&&t(y,S),v=s(N,v,A),T===null?E=N:T.sibling=N,T=N,S=C}if(k.done)return n(y,S),wi&&_v(y,A),E;if(S===null){for(;!k.done;A++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,A),T===null?E=k:T.sibling=k,T=k);return wi&&_v(y,A),E}for(S=r(y,S);!k.done;A++,k=b.next())k=h(S,y,A,k.value,w),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?A:k.key),v=s(k,v,A),T===null?E=k:T.sibling=k,T=k);return e&&S.forEach(function(O){return t(y,O)}),wi&&_v(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===uw&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case JR:e:{for(var E=b.key,T=v;T!==null;){if(T.key===E){if(E=b.type,E===uw){if(T.tag===7){n(y,T.sibling),v=i(T,b.props.children),v.return=y,y=v;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ag&&cse(E)===T.type){n(y,T.sibling),v=i(T,b.props),v.ref=hT(y,T,b),v.return=y,y=v;break e}n(y,T);break}else t(y,T);T=T.sibling}b.type===uw?(v=v1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=QP(b.type,b.key,b.props,null,y.mode,w),w.ref=hT(y,v,b),w.return=y,y=w)}return o(y);case aw:e:{for(T=b.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=mj(b,y.mode,w),v.return=y,y=v}return o(y);case Ag:return T=b._init,g(y,v,T(b._payload),w)}if(c2(b))return p(y,v,b,w);if(uT(b))return m(y,v,b,w);lN(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=pj(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var EE=mve(!0),gve=mve(!1),bO=xy(null),_O=null,gw=null,Gq=null;function Yq(){Gq=gw=_O=null}function Kq(e){var t=bO.current;fi(bO),e._currentValue=t}function mU(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Lw(e,t){_O=e,Gq=gw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Nu=!0),e.firstContext=null)}function Cc(e){var t=e._currentValue;if(Gq!==e)if(e={context:e,memoizedValue:t,next:null},gw===null){if(_O===null)throw Error(tt(308));gw=e,_O.dependencies={lanes:0,firstContext:e}}else gw=gw.next=e;return t}var Qv=null;function Xq(e){Qv===null?Qv=[e]:Qv.push(e)}function yve(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,Xq(t)):(n.next=i.next,i.next=n),t.interleaved=n,dm(e,r)}function dm(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Cg=!1;function Qq(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vve(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Jp(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function d0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,ur&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,dm(e,n)}return i=r.interleaved,i===null?(t.next=t,Xq(r)):(t.next=i.next,i.next=t),r.interleaved=t,dm(e,n)}function qP(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mq(e,n)}}function fse(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function wO(e,t,n,r){var i=e.updateQueue;Cg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Di({},f,d);break e;case 2:Cg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);M1|=o,e.lanes=o,e.memoizedState=f}}function dse(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var KI={},ih=xy(KI),dC=xy(KI),hC=xy(KI);function Jv(e){if(e===KI)throw Error(tt(174));return e}function Jq(e,t){switch(ti(hC,t),ti(dC,e),ti(ih,KI),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:KB(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=KB(t,e)}fi(ih),ti(ih,t)}function xE(){fi(ih),fi(dC),fi(hC)}function bve(e){Jv(hC.current);var t=Jv(ih.current),n=KB(t,e.type);t!==n&&(ti(dC,e),ti(ih,n))}function Zq(e){dC.current===e&&(fi(ih),fi(dC))}var Ni=xy(0);function EO(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var uj=[];function eW(){for(var e=0;e<uj.length;e++)uj[e]._workInProgressVersionPrimary=null;uj.length=0}var WP=jm.ReactCurrentDispatcher,lj=jm.ReactCurrentBatchConfig,$1=0,Pi=null,Is=null,Xs=null,xO=!1,oA=!1,pC=0,O9e=0;function Go(){throw Error(tt(321))}function tW(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!zf(e[n],t[n]))return!1;return!0}function nW(e,t,n,r,i,s){if($1=s,Pi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,WP.current=e===null||e.memoizedState===null?F9e:j9e,e=n(r,i),oA){s=0;do{if(oA=!1,pC=0,25<=s)throw Error(tt(301));s+=1,Xs=Is=null,t.updateQueue=null,WP.current=B9e,e=n(r,i)}while(oA)}if(WP.current=SO,t=Is!==null&&Is.next!==null,$1=0,Xs=Is=Pi=null,xO=!1,t)throw Error(tt(300));return e}function rW(){var e=pC!==0;return pC=0,e}function Td(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Xs===null?Pi.memoizedState=Xs=e:Xs=Xs.next=e,Xs}function Ic(){if(Is===null){var e=Pi.alternate;e=e!==null?e.memoizedState:null}else e=Is.next;var t=Xs===null?Pi.memoizedState:Xs.next;if(t!==null)Xs=t,Is=e;else{if(e===null)throw Error(tt(310));Is=e,e={memoizedState:Is.memoizedState,baseState:Is.baseState,baseQueue:Is.baseQueue,queue:Is.queue,next:null},Xs===null?Pi.memoizedState=Xs=e:Xs=Xs.next=e}return Xs}function mC(e,t){return typeof t=="function"?t(e):t}function cj(e){var t=Ic(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Is,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if(($1&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Pi.lanes|=c,M1|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,zf(r,t.memoizedState)||(Nu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Pi.lanes|=s,M1|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function fj(e){var t=Ic(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);zf(s,t.memoizedState)||(Nu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function _ve(){}function wve(e,t){var n=Pi,r=Ic(),i=t(),s=!zf(r.memoizedState,i);if(s&&(r.memoizedState=i,Nu=!0),r=r.queue,iW(Sve.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||Xs!==null&&Xs.memoizedState.tag&1){if(n.flags|=2048,gC(9,xve.bind(null,n,r,i,t),void 0,null),ao===null)throw Error(tt(349));$1&30||Eve(n,t,i)}return i}function Eve(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Pi.updateQueue,t===null?(t={lastEffect:null,stores:null},Pi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function xve(e,t,n,r){t.value=n,t.getSnapshot=r,Tve(t)&&Ave(e)}function Sve(e,t,n){return n(function(){Tve(t)&&Ave(e)})}function Tve(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!zf(e,n)}catch{return!0}}function Ave(e){var t=dm(e,1);t!==null&&Of(t,e,1,-1)}function hse(e){var t=Td();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:mC,lastRenderedState:e},t.queue=e,e=e.dispatch=L9e.bind(null,Pi,e),[t.memoizedState,e]}function gC(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Pi.updateQueue,t===null?(t={lastEffect:null,stores:null},Pi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function Cve(){return Ic().memoizedState}function GP(e,t,n,r){var i=Td();Pi.flags|=e,i.memoizedState=gC(1|t,n,void 0,r===void 0?null:r)}function ZM(e,t,n,r){var i=Ic();r=r===void 0?null:r;var s=void 0;if(Is!==null){var o=Is.memoizedState;if(s=o.destroy,r!==null&&tW(r,o.deps)){i.memoizedState=gC(t,n,s,r);return}}Pi.flags|=e,i.memoizedState=gC(1|t,n,s,r)}function pse(e,t){return GP(8390656,8,e,t)}function iW(e,t){return ZM(2048,8,e,t)}function Ive(e,t){return ZM(4,2,e,t)}function kve(e,t){return ZM(4,4,e,t)}function Rve(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Nve(e,t,n){return n=n!=null?n.concat([e]):null,ZM(4,4,Rve.bind(null,t,e),n)}function sW(){}function Pve(e,t){var n=Ic();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tW(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Dve(e,t){var n=Ic();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&tW(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ove(e,t,n){return $1&21?(zf(n,t)||(n=jye(),Pi.lanes|=n,M1|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Nu=!0),e.memoizedState=n)}function $9e(e,t){var n=Or;Or=n!==0&&4>n?n:4,e(!0);var r=lj.transition;lj.transition={};try{e(!1),t()}finally{Or=n,lj.transition=r}}function $ve(){return Ic().memoizedState}function M9e(e,t,n){var r=p0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Mve(e))Lve(t,n);else if(n=yve(e,t,n,r),n!==null){var i=qa();Of(n,e,r,i),Fve(n,t,r)}}function L9e(e,t,n){var r=p0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Mve(e))Lve(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zf(a,o)){var u=t.interleaved;u===null?(i.next=i,Xq(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=yve(e,t,i,r),n!==null&&(i=qa(),Of(n,e,r,i),Fve(n,t,r))}}function Mve(e){var t=e.alternate;return e===Pi||t!==null&&t===Pi}function Lve(e,t){oA=xO=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Fve(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,Mq(e,n)}}var SO={readContext:Cc,useCallback:Go,useContext:Go,useEffect:Go,useImperativeHandle:Go,useInsertionEffect:Go,useLayoutEffect:Go,useMemo:Go,useReducer:Go,useRef:Go,useState:Go,useDebugValue:Go,useDeferredValue:Go,useTransition:Go,useMutableSource:Go,useSyncExternalStore:Go,useId:Go,unstable_isNewReconciler:!1},F9e={readContext:Cc,useCallback:function(e,t){return Td().memoizedState=[e,t===void 0?null:t],e},useContext:Cc,useEffect:pse,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,GP(4194308,4,Rve.bind(null,t,e),n)},useLayoutEffect:function(e,t){return GP(4194308,4,e,t)},useInsertionEffect:function(e,t){return GP(4,2,e,t)},useMemo:function(e,t){var n=Td();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Td();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=M9e.bind(null,Pi,e),[r.memoizedState,e]},useRef:function(e){var t=Td();return e={current:e},t.memoizedState=e},useState:hse,useDebugValue:sW,useDeferredValue:function(e){return Td().memoizedState=e},useTransition:function(){var e=hse(!1),t=e[0];return e=$9e.bind(null,e[1]),Td().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Pi,i=Td();if(wi){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),ao===null)throw Error(tt(349));$1&30||Eve(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,pse(Sve.bind(null,r,s,e),[e]),r.flags|=2048,gC(9,xve.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Td(),t=ao.identifierPrefix;if(wi){var n=Up,r=Bp;n=(r&~(1<<32-Df(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=pC++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=O9e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},j9e={readContext:Cc,useCallback:Pve,useContext:Cc,useEffect:iW,useImperativeHandle:Nve,useInsertionEffect:Ive,useLayoutEffect:kve,useMemo:Dve,useReducer:cj,useRef:Cve,useState:function(){return cj(mC)},useDebugValue:sW,useDeferredValue:function(e){var t=Ic();return Ove(t,Is.memoizedState,e)},useTransition:function(){var e=cj(mC)[0],t=Ic().memoizedState;return[e,t]},useMutableSource:_ve,useSyncExternalStore:wve,useId:$ve,unstable_isNewReconciler:!1},B9e={readContext:Cc,useCallback:Pve,useContext:Cc,useEffect:iW,useImperativeHandle:Nve,useInsertionEffect:Ive,useLayoutEffect:kve,useMemo:Dve,useReducer:fj,useRef:Cve,useState:function(){return fj(mC)},useDebugValue:sW,useDeferredValue:function(e){var t=Ic();return Is===null?t.memoizedState=e:Ove(t,Is.memoizedState,e)},useTransition:function(){var e=fj(mC)[0],t=Ic().memoizedState;return[e,t]},useMutableSource:_ve,useSyncExternalStore:wve,useId:$ve,unstable_isNewReconciler:!1};function lf(e,t){if(e&&e.defaultProps){t=Di({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function gU(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Di({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var eL={isMounted:function(e){return(e=e._reactInternals)?Ab(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=qa(),i=p0(e),s=Jp(r,i);s.payload=t,n!=null&&(s.callback=n),t=d0(e,s,i),t!==null&&(Of(t,e,i,r),qP(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=qa(),i=p0(e),s=Jp(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=d0(e,s,i),t!==null&&(Of(t,e,i,r),qP(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=qa(),r=p0(e),i=Jp(n,r);i.tag=2,t!=null&&(i.callback=t),t=d0(e,i,r),t!==null&&(Of(t,e,r,n),qP(t,e,r))}};function mse(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!uC(n,r)||!uC(i,s):!0}function jve(e,t,n){var r=!1,i=M0,s=t.contextType;return typeof s=="object"&&s!==null?s=Cc(s):(i=Fu(t)?D1:va.current,r=t.contextTypes,s=(r=r!=null)?_E(e,i):M0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=eL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function gse(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&eL.enqueueReplaceState(t,t.state,null)}function yU(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Qq(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=Cc(s):(s=Fu(t)?D1:va.current,i.context=_E(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(gU(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&eL.enqueueReplaceState(i,i.state,null),wO(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function SE(e,t){try{var n="",r=t;do n+=p8e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function dj(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function vU(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var U9e=typeof WeakMap=="function"?WeakMap:Map;function Bve(e,t,n){n=Jp(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){AO||(AO=!0,IU=r),vU(e,t)},n}function Uve(e,t,n){n=Jp(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){vU(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){vU(e,t),typeof r!="function"&&(h0===null?h0=new Set([this]):h0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function yse(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new U9e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=tBe.bind(null,e,t,n),t.then(e,e))}function vse(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function bse(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Jp(-1,1),t.tag=2,d0(n,t,1))),n.lanes|=1),e)}var z9e=jm.ReactCurrentOwner,Nu=!1;function Oa(e,t,n,r){t.child=e===null?gve(t,null,n,r):EE(t,e.child,n,r)}function _se(e,t,n,r,i){n=n.render;var s=t.ref;return Lw(t,i),r=nW(e,t,n,r,s,i),n=rW(),e!==null&&!Nu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hm(e,t,i)):(wi&&n&&Hq(t),t.flags|=1,Oa(e,t,r,i),t.child)}function wse(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!hW(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,zve(e,t,s,r,i)):(e=QP(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:uC,n(o,r)&&e.ref===t.ref)return hm(e,t,i)}return t.flags|=1,e=m0(s,r),e.ref=t.ref,e.return=t,t.child=e}function zve(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if(uC(s,r)&&e.ref===t.ref)if(Nu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Nu=!0);else return t.lanes=e.lanes,hm(e,t,i)}return bU(e,t,n,r,i)}function Vve(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ti(vw,hl),hl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ti(vw,hl),hl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ti(vw,hl),hl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ti(vw,hl),hl|=r;return Oa(e,t,i,n),t.child}function Hve(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function bU(e,t,n,r,i){var s=Fu(n)?D1:va.current;return s=_E(t,s),Lw(t,i),n=nW(e,t,n,r,s,i),r=rW(),e!==null&&!Nu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,hm(e,t,i)):(wi&&r&&Hq(t),t.flags|=1,Oa(e,t,n,i),t.child)}function Ese(e,t,n,r,i){if(Fu(n)){var s=!0;gO(t)}else s=!1;if(Lw(t,i),t.stateNode===null)YP(e,t),jve(t,n,r),yU(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=Cc(l):(l=Fu(n)?D1:va.current,l=_E(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&gse(t,o,r,l),Cg=!1;var d=t.memoizedState;o.state=d,wO(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Lu.current||Cg?(typeof c=="function"&&(gU(t,n,c,r),u=t.memoizedState),(a=Cg||mse(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,vve(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:lf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Cc(u):(u=Fu(n)?D1:va.current,u=_E(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&gse(t,o,r,u),Cg=!1,d=t.memoizedState,o.state=d,wO(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Lu.current||Cg?(typeof h=="function"&&(gU(t,n,h,r),p=t.memoizedState),(l=Cg||mse(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return _U(e,t,n,r,s,i)}function _U(e,t,n,r,i,s){Hve(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&ase(t,n,!1),hm(e,t,s);r=t.stateNode,z9e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=EE(t,e.child,null,s),t.child=EE(t,null,a,s)):Oa(e,t,a,s),t.memoizedState=r.state,i&&ase(t,n,!0),t.child}function qve(e){var t=e.stateNode;t.pendingContext?ose(e,t.pendingContext,t.pendingContext!==t.context):t.context&&ose(e,t.context,!1),Jq(e,t.containerInfo)}function xse(e,t,n,r,i){return wE(),Wq(i),t.flags|=256,Oa(e,t,n,r),t.child}var wU={dehydrated:null,treeContext:null,retryLane:0};function EU(e){return{baseLanes:e,cachePool:null,transitions:null}}function Wve(e,t,n){var r=t.pendingProps,i=Ni.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ti(Ni,i&1),e===null)return pU(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=rL(o,r,0,null),e=v1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=EU(n),t.memoizedState=wU,e):oW(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return V9e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=m0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=m0(a,s):(s=v1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?EU(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=wU,r}return s=e.child,e=s.sibling,r=m0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function oW(e,t){return t=rL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function cN(e,t,n,r){return r!==null&&Wq(r),EE(t,e.child,null,n),e=oW(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function V9e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=dj(Error(tt(422))),cN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=rL({mode:"visible",children:r.children},i,0,null),s=v1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&EE(t,e.child,null,o),t.child.memoizedState=EU(o),t.memoizedState=wU,s);if(!(t.mode&1))return cN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=dj(s,r,void 0),cN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Nu||a){if(r=ao,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,dm(e,i),Of(r,e,i,-1))}return dW(),r=dj(Error(tt(421))),cN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=nBe.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,_l=f0(i.nextSibling),Il=t,wi=!0,mf=null,e!==null&&(fc[dc++]=Bp,fc[dc++]=Up,fc[dc++]=O1,Bp=e.id,Up=e.overflow,O1=t),t=oW(t,r.children),t.flags|=4096,t)}function Sse(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),mU(e.return,t,n)}function hj(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Gve(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(Oa(e,t,r.children,n),r=Ni.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Sse(e,n,t);else if(e.tag===19)Sse(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ti(Ni,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&EO(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),hj(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&EO(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}hj(t,!0,n,null,s);break;case"together":hj(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function YP(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function hm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),M1|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=m0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=m0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function H9e(e,t,n){switch(t.tag){case 3:qve(t),wE();break;case 5:bve(t);break;case 1:Fu(t.type)&&gO(t);break;case 4:Jq(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ti(bO,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ti(Ni,Ni.current&1),t.flags|=128,null):n&t.child.childLanes?Wve(e,t,n):(ti(Ni,Ni.current&1),e=hm(e,t,n),e!==null?e.sibling:null);ti(Ni,Ni.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Gve(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ti(Ni,Ni.current),r)break;return null;case 22:case 23:return t.lanes=0,Vve(e,t,n)}return hm(e,t,n)}var Yve,xU,Kve,Xve;Yve=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};xU=function(){};Kve=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Jv(ih.current);var s=null;switch(n){case"input":i=qB(e,i),r=qB(e,r),s=[];break;case"select":i=Di({},i,{value:void 0}),r=Di({},r,{value:void 0}),s=[];break;case"textarea":i=YB(e,i),r=YB(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=pO)}XB(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(tC.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(tC.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&oi("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};Xve=function(e,t,n,r){n!==r&&(t.flags|=4)};function pT(e,t){if(!wi)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Yo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function q9e(e,t,n){var r=t.pendingProps;switch(qq(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Yo(t),null;case 1:return Fu(t.type)&&mO(),Yo(t),null;case 3:return r=t.stateNode,xE(),fi(Lu),fi(va),eW(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(uN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,mf!==null&&(NU(mf),mf=null))),xU(e,t),Yo(t),null;case 5:Zq(t);var i=Jv(hC.current);if(n=t.type,e!==null&&t.stateNode!=null)Kve(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Yo(t),null}if(e=Jv(ih.current),uN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[$d]=t,r[fC]=s,e=(t.mode&1)!==0,n){case"dialog":oi("cancel",r),oi("close",r);break;case"iframe":case"object":case"embed":oi("load",r);break;case"video":case"audio":for(i=0;i<d2.length;i++)oi(d2[i],r);break;case"source":oi("error",r);break;case"img":case"image":case"link":oi("error",r),oi("load",r);break;case"details":oi("toggle",r);break;case"input":Die(r,s),oi("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},oi("invalid",r);break;case"textarea":$ie(r,s),oi("invalid",r)}XB(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&aN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&aN(r.textContent,a,e),i=["children",""+a]):tC.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&oi("scroll",r)}switch(n){case"input":ZR(r),Oie(r,s,!0);break;case"textarea":ZR(r),Mie(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=pO)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Sye(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[$d]=t,e[fC]=r,Yve(e,t,!1,!1),t.stateNode=e;e:{switch(o=QB(n,r),n){case"dialog":oi("cancel",e),oi("close",e),i=r;break;case"iframe":case"object":case"embed":oi("load",e),i=r;break;case"video":case"audio":for(i=0;i<d2.length;i++)oi(d2[i],e);i=r;break;case"source":oi("error",e),i=r;break;case"img":case"image":case"link":oi("error",e),oi("load",e),i=r;break;case"details":oi("toggle",e),i=r;break;case"input":Die(e,r),i=qB(e,r),oi("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Di({},r,{value:void 0}),oi("invalid",e);break;case"textarea":$ie(e,r),i=YB(e,r),oi("invalid",e);break;default:i=r}XB(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?Cye(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Tye(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&nC(e,u):typeof u=="number"&&nC(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(tC.hasOwnProperty(s)?u!=null&&s==="onScroll"&&oi("scroll",e):u!=null&&Rq(e,s,u,o))}switch(n){case"input":ZR(e),Oie(e,r,!1);break;case"textarea":ZR(e),Mie(e);break;case"option":r.value!=null&&e.setAttribute("value",""+$0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?Dw(e,!!r.multiple,s,!1):r.defaultValue!=null&&Dw(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=pO)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Yo(t),null;case 6:if(e&&t.stateNode!=null)Xve(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=Jv(hC.current),Jv(ih.current),uN(t)){if(r=t.stateNode,n=t.memoizedProps,r[$d]=t,(s=r.nodeValue!==n)&&(e=Il,e!==null))switch(e.tag){case 3:aN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&aN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[$d]=t,t.stateNode=r}return Yo(t),null;case 13:if(fi(Ni),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(wi&&_l!==null&&t.mode&1&&!(t.flags&128))pve(),wE(),t.flags|=98560,s=!1;else if(s=uN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[$d]=t}else wE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Yo(t),s=!1}else mf!==null&&(NU(mf),mf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Ni.current&1?Os===0&&(Os=3):dW())),t.updateQueue!==null&&(t.flags|=4),Yo(t),null);case 4:return xE(),xU(e,t),e===null&&lC(t.stateNode.containerInfo),Yo(t),null;case 10:return Kq(t.type._context),Yo(t),null;case 17:return Fu(t.type)&&mO(),Yo(t),null;case 19:if(fi(Ni),s=t.memoizedState,s===null)return Yo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)pT(s,!1);else{if(Os!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=EO(e),o!==null){for(t.flags|=128,pT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ti(Ni,Ni.current&1|2),t.child}e=e.sibling}s.tail!==null&&ss()>TE&&(t.flags|=128,r=!0,pT(s,!1),t.lanes=4194304)}else{if(!r)if(e=EO(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),pT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!wi)return Yo(t),null}else 2*ss()-s.renderingStartTime>TE&&n!==1073741824&&(t.flags|=128,r=!0,pT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ss(),t.sibling=null,n=Ni.current,ti(Ni,r?n&1|2:n&1),t):(Yo(t),null);case 22:case 23:return fW(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?hl&1073741824&&(Yo(t),t.subtreeFlags&6&&(t.flags|=8192)):Yo(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function W9e(e,t){switch(qq(t),t.tag){case 1:return Fu(t.type)&&mO(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return xE(),fi(Lu),fi(va),eW(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Zq(t),null;case 13:if(fi(Ni),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));wE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return fi(Ni),null;case 4:return xE(),null;case 10:return Kq(t.type._context),null;case 22:case 23:return fW(),null;case 24:return null;default:return null}}var fN=!1,oa=!1,G9e=typeof WeakSet=="function"?WeakSet:Set,xt=null;function yw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){zi(e,t,r)}else n.current=null}function SU(e,t,n){try{n()}catch(r){zi(e,t,r)}}var Tse=!1;function Y9e(e,t){if(aU=fO,e=tve(),Vq(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(uU={focusedElem:e,selectionRange:n},fO=!1,xt=t;xt!==null;)if(t=xt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,xt=e;else for(;xt!==null;){t=xt;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:lf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){zi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,xt=e;break}xt=t.return}return p=Tse,Tse=!1,p}function aA(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&SU(t,n,s)}i=i.next}while(i!==r)}}function tL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function TU(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Qve(e){var t=e.alternate;t!==null&&(e.alternate=null,Qve(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[$d],delete t[fC],delete t[fU],delete t[R9e],delete t[N9e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Jve(e){return e.tag===5||e.tag===3||e.tag===4}function Ase(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Jve(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function AU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=pO));else if(r!==4&&(e=e.child,e!==null))for(AU(e,t,n),e=e.sibling;e!==null;)AU(e,t,n),e=e.sibling}function CU(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(CU(e,t,n),e=e.sibling;e!==null;)CU(e,t,n),e=e.sibling}var Eo=null,ff=!1;function hg(e,t,n){for(n=n.child;n!==null;)Zve(e,t,n),n=n.sibling}function Zve(e,t,n){if(rh&&typeof rh.onCommitFiberUnmount=="function")try{rh.onCommitFiberUnmount(GM,n)}catch{}switch(n.tag){case 5:oa||yw(n,t);case 6:var r=Eo,i=ff;Eo=null,hg(e,t,n),Eo=r,ff=i,Eo!==null&&(ff?(e=Eo,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Eo.removeChild(n.stateNode));break;case 18:Eo!==null&&(ff?(e=Eo,n=n.stateNode,e.nodeType===8?oj(e.parentNode,n):e.nodeType===1&&oj(e,n),oC(e)):oj(Eo,n.stateNode));break;case 4:r=Eo,i=ff,Eo=n.stateNode.containerInfo,ff=!0,hg(e,t,n),Eo=r,ff=i;break;case 0:case 11:case 14:case 15:if(!oa&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&SU(n,t,o),i=i.next}while(i!==r)}hg(e,t,n);break;case 1:if(!oa&&(yw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){zi(n,t,a)}hg(e,t,n);break;case 21:hg(e,t,n);break;case 22:n.mode&1?(oa=(r=oa)||n.memoizedState!==null,hg(e,t,n),oa=r):hg(e,t,n);break;default:hg(e,t,n)}}function Cse(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new G9e),t.forEach(function(r){var i=rBe.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Jc(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Eo=a.stateNode,ff=!1;break e;case 3:Eo=a.stateNode.containerInfo,ff=!0;break e;case 4:Eo=a.stateNode.containerInfo,ff=!0;break e}a=a.return}if(Eo===null)throw Error(tt(160));Zve(s,o,i),Eo=null,ff=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){zi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)e1e(t,e),t=t.sibling}function e1e(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Jc(t,e),yd(e),r&4){try{aA(3,e,e.return),tL(3,e)}catch(m){zi(e,e.return,m)}try{aA(5,e,e.return)}catch(m){zi(e,e.return,m)}}break;case 1:Jc(t,e),yd(e),r&512&&n!==null&&yw(n,n.return);break;case 5:if(Jc(t,e),yd(e),r&512&&n!==null&&yw(n,n.return),e.flags&32){var i=e.stateNode;try{nC(i,"")}catch(m){zi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Eye(i,s),QB(a,o);var l=QB(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?Cye(i,f):c==="dangerouslySetInnerHTML"?Tye(i,f):c==="children"?nC(i,f):Rq(i,c,f,l)}switch(a){case"input":WB(i,s);break;case"textarea":xye(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?Dw(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?Dw(i,!!s.multiple,s.defaultValue,!0):Dw(i,!!s.multiple,s.multiple?[]:"",!1))}i[fC]=s}catch(m){zi(e,e.return,m)}}break;case 6:if(Jc(t,e),yd(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){zi(e,e.return,m)}}break;case 3:if(Jc(t,e),yd(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{oC(t.containerInfo)}catch(m){zi(e,e.return,m)}break;case 4:Jc(t,e),yd(e);break;case 13:Jc(t,e),yd(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(lW=ss())),r&4&&Cse(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(oa=(l=oa)||c,Jc(t,e),oa=l):Jc(t,e),yd(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(xt=e,c=e.child;c!==null;){for(f=xt=c;xt!==null;){switch(d=xt,h=d.child,d.tag){case 0:case 11:case 14:case 15:aA(4,d,d.return);break;case 1:yw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){zi(r,n,m)}}break;case 5:yw(d,d.return);break;case 22:if(d.memoizedState!==null){kse(f);continue}}h!==null?(h.return=d,xt=h):kse(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=Aye("display",o))}catch(m){zi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){zi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Jc(t,e),yd(e),r&4&&Cse(e);break;case 21:break;default:Jc(t,e),yd(e)}}function yd(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Jve(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(nC(i,""),r.flags&=-33);var s=Ase(e);CU(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Ase(e);AU(e,a,o);break;default:throw Error(tt(161))}}catch(u){zi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function K9e(e,t,n){xt=e,t1e(e)}function t1e(e,t,n){for(var r=(e.mode&1)!==0;xt!==null;){var i=xt,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||fN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||oa;a=fN;var l=oa;if(fN=o,(oa=u)&&!l)for(xt=i;xt!==null;)o=xt,u=o.child,o.tag===22&&o.memoizedState!==null?Rse(i):u!==null?(u.return=o,xt=u):Rse(i);for(;s!==null;)xt=s,t1e(s),s=s.sibling;xt=i,fN=a,oa=l}Ise(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,xt=s):Ise(e)}}function Ise(e){for(;xt!==null;){var t=xt;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:oa||tL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!oa)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:lf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&dse(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}dse(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&oC(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}oa||t.flags&512&&TU(t)}catch(d){zi(t,t.return,d)}}if(t===e){xt=null;break}if(n=t.sibling,n!==null){n.return=t.return,xt=n;break}xt=t.return}}function kse(e){for(;xt!==null;){var t=xt;if(t===e){xt=null;break}var n=t.sibling;if(n!==null){n.return=t.return,xt=n;break}xt=t.return}}function Rse(e){for(;xt!==null;){var t=xt;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{tL(4,t)}catch(u){zi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){zi(t,i,u)}}var s=t.return;try{TU(t)}catch(u){zi(t,s,u)}break;case 5:var o=t.return;try{TU(t)}catch(u){zi(t,o,u)}}}catch(u){zi(t,t.return,u)}if(t===e){xt=null;break}var a=t.sibling;if(a!==null){a.return=t.return,xt=a;break}xt=t.return}}var X9e=Math.ceil,TO=jm.ReactCurrentDispatcher,aW=jm.ReactCurrentOwner,Sc=jm.ReactCurrentBatchConfig,ur=0,ao=null,_s=null,Ro=0,hl=0,vw=xy(0),Os=0,yC=null,M1=0,nL=0,uW=0,uA=null,xu=null,lW=0,TE=1/0,xp=null,AO=!1,IU=null,h0=null,dN=!1,Gg=null,CO=0,lA=0,kU=null,KP=-1,XP=0;function qa(){return ur&6?ss():KP!==-1?KP:KP=ss()}function p0(e){return e.mode&1?ur&2&&Ro!==0?Ro&-Ro:D9e.transition!==null?(XP===0&&(XP=jye()),XP):(e=Or,e!==0||(e=window.event,e=e===void 0?16:Wye(e.type)),e):1}function Of(e,t,n,r){if(50<lA)throw lA=0,kU=null,Error(tt(185));WI(e,n,r),(!(ur&2)||e!==ao)&&(e===ao&&(!(ur&2)&&(nL|=n),Os===4&&Lg(e,Ro)),ju(e,r),n===1&&ur===0&&!(t.mode&1)&&(TE=ss()+500,JM&&Sy()))}function ju(e,t){var n=e.callbackNode;D8e(e,t);var r=cO(e,e===ao?Ro:0);if(r===0)n!==null&&jie(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&jie(n),t===1)e.tag===0?P9e(Nse.bind(null,e)):fve(Nse.bind(null,e)),I9e(function(){!(ur&6)&&Sy()}),n=null;else{switch(Bye(r)){case 1:n=$q;break;case 4:n=Lye;break;case 16:n=lO;break;case 536870912:n=Fye;break;default:n=lO}n=l1e(n,n1e.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function n1e(e,t){if(KP=-1,XP=0,ur&6)throw Error(tt(327));var n=e.callbackNode;if(Fw()&&e.callbackNode!==n)return null;var r=cO(e,e===ao?Ro:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=IO(e,r);else{t=r;var i=ur;ur|=2;var s=i1e();(ao!==e||Ro!==t)&&(xp=null,TE=ss()+500,y1(e,t));do try{Z9e();break}catch(a){r1e(e,a)}while(!0);Yq(),TO.current=s,ur=i,_s!==null?t=0:(ao=null,Ro=0,t=Os)}if(t!==0){if(t===2&&(i=nU(e),i!==0&&(r=i,t=RU(e,i))),t===1)throw n=yC,y1(e,0),Lg(e,r),ju(e,ss()),n;if(t===6)Lg(e,r);else{if(i=e.current.alternate,!(r&30)&&!Q9e(i)&&(t=IO(e,r),t===2&&(s=nU(e),s!==0&&(r=s,t=RU(e,s))),t===1))throw n=yC,y1(e,0),Lg(e,r),ju(e,ss()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:wv(e,xu,xp);break;case 3:if(Lg(e,r),(r&130023424)===r&&(t=lW+500-ss(),10<t)){if(cO(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){qa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=cU(wv.bind(null,e,xu,xp),t);break}wv(e,xu,xp);break;case 4:if(Lg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-Df(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ss()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*X9e(r/1960))-r,10<r){e.timeoutHandle=cU(wv.bind(null,e,xu,xp),r);break}wv(e,xu,xp);break;case 5:wv(e,xu,xp);break;default:throw Error(tt(329))}}}return ju(e,ss()),e.callbackNode===n?n1e.bind(null,e):null}function RU(e,t){var n=uA;return e.current.memoizedState.isDehydrated&&(y1(e,t).flags|=256),e=IO(e,t),e!==2&&(t=xu,xu=n,t!==null&&NU(t)),e}function NU(e){xu===null?xu=e:xu.push.apply(xu,e)}function Q9e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Lg(e,t){for(t&=~uW,t&=~nL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-Df(t),r=1<<n;e[n]=-1,t&=~r}}function Nse(e){if(ur&6)throw Error(tt(327));Fw();var t=cO(e,0);if(!(t&1))return ju(e,ss()),null;var n=IO(e,t);if(e.tag!==0&&n===2){var r=nU(e);r!==0&&(t=r,n=RU(e,r))}if(n===1)throw n=yC,y1(e,0),Lg(e,t),ju(e,ss()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wv(e,xu,xp),ju(e,ss()),null}function cW(e,t){var n=ur;ur|=1;try{return e(t)}finally{ur=n,ur===0&&(TE=ss()+500,JM&&Sy())}}function L1(e){Gg!==null&&Gg.tag===0&&!(ur&6)&&Fw();var t=ur;ur|=1;var n=Sc.transition,r=Or;try{if(Sc.transition=null,Or=1,e)return e()}finally{Or=r,Sc.transition=n,ur=t,!(ur&6)&&Sy()}}function fW(){hl=vw.current,fi(vw)}function y1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,C9e(n)),_s!==null)for(n=_s.return;n!==null;){var r=n;switch(qq(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&mO();break;case 3:xE(),fi(Lu),fi(va),eW();break;case 5:Zq(r);break;case 4:xE();break;case 13:fi(Ni);break;case 19:fi(Ni);break;case 10:Kq(r.type._context);break;case 22:case 23:fW()}n=n.return}if(ao=e,_s=e=m0(e.current,null),Ro=hl=t,Os=0,yC=null,uW=nL=M1=0,xu=uA=null,Qv!==null){for(t=0;t<Qv.length;t++)if(n=Qv[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Qv=null}return e}function r1e(e,t){do{var n=_s;try{if(Yq(),WP.current=SO,xO){for(var r=Pi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}xO=!1}if($1=0,Xs=Is=Pi=null,oA=!1,pC=0,aW.current=null,n===null||n.return===null){Os=1,yC=t,_s=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=Ro,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=vse(o);if(h!==null){h.flags&=-257,bse(h,o,a,s,t),h.mode&1&&yse(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){yse(s,l,t),dW();break e}u=Error(tt(426))}}else if(wi&&a.mode&1){var g=vse(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),bse(g,o,a,s,t),Wq(SE(u,a));break e}}s=u=SE(u,a),Os!==4&&(Os=2),uA===null?uA=[s]:uA.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Bve(s,u,t);fse(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(h0===null||!h0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Uve(s,a,t);fse(s,w);break e}}s=s.return}while(s!==null)}o1e(n)}catch(E){t=E,_s===n&&n!==null&&(_s=n=n.return);continue}break}while(!0)}function i1e(){var e=TO.current;return TO.current=SO,e===null?SO:e}function dW(){(Os===0||Os===3||Os===2)&&(Os=4),ao===null||!(M1&268435455)&&!(nL&268435455)||Lg(ao,Ro)}function IO(e,t){var n=ur;ur|=2;var r=i1e();(ao!==e||Ro!==t)&&(xp=null,y1(e,t));do try{J9e();break}catch(i){r1e(e,i)}while(!0);if(Yq(),ur=n,TO.current=r,_s!==null)throw Error(tt(261));return ao=null,Ro=0,Os}function J9e(){for(;_s!==null;)s1e(_s)}function Z9e(){for(;_s!==null&&!S8e();)s1e(_s)}function s1e(e){var t=u1e(e.alternate,e,hl);e.memoizedProps=e.pendingProps,t===null?o1e(e):_s=t,aW.current=null}function o1e(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=W9e(n,t),n!==null){n.flags&=32767,_s=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Os=6,_s=null;return}}else if(n=q9e(n,t,hl),n!==null){_s=n;return}if(t=t.sibling,t!==null){_s=t;return}_s=t=e}while(t!==null);Os===0&&(Os=5)}function wv(e,t,n){var r=Or,i=Sc.transition;try{Sc.transition=null,Or=1,eBe(e,t,n,r)}finally{Sc.transition=i,Or=r}return null}function eBe(e,t,n,r){do Fw();while(Gg!==null);if(ur&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(O8e(e,s),e===ao&&(_s=ao=null,Ro=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||dN||(dN=!0,l1e(lO,function(){return Fw(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Sc.transition,Sc.transition=null;var o=Or;Or=1;var a=ur;ur|=4,aW.current=null,Y9e(e,n),e1e(n,e),_9e(uU),fO=!!aU,uU=aU=null,e.current=n,K9e(n),T8e(),ur=a,Or=o,Sc.transition=s}else e.current=n;if(dN&&(dN=!1,Gg=e,CO=i),s=e.pendingLanes,s===0&&(h0=null),I8e(n.stateNode),ju(e,ss()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(AO)throw AO=!1,e=IU,IU=null,e;return CO&1&&e.tag!==0&&Fw(),s=e.pendingLanes,s&1?e===kU?lA++:(lA=0,kU=e):lA=0,Sy(),null}function Fw(){if(Gg!==null){var e=Bye(CO),t=Sc.transition,n=Or;try{if(Sc.transition=null,Or=16>e?16:e,Gg===null)var r=!1;else{if(e=Gg,Gg=null,CO=0,ur&6)throw Error(tt(331));var i=ur;for(ur|=4,xt=e.current;xt!==null;){var s=xt,o=s.child;if(xt.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(xt=l;xt!==null;){var c=xt;switch(c.tag){case 0:case 11:case 15:aA(8,c,s)}var f=c.child;if(f!==null)f.return=c,xt=f;else for(;xt!==null;){c=xt;var d=c.sibling,h=c.return;if(Qve(c),c===l){xt=null;break}if(d!==null){d.return=h,xt=d;break}xt=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}xt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,xt=o;else e:for(;xt!==null;){if(s=xt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:aA(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,xt=y;break e}xt=s.return}}var v=e.current;for(xt=v;xt!==null;){o=xt;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,xt=b;else e:for(o=v;xt!==null;){if(a=xt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:tL(9,a)}}catch(E){zi(a,a.return,E)}if(a===o){xt=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,xt=w;break e}xt=a.return}}if(ur=i,Sy(),rh&&typeof rh.onPostCommitFiberRoot=="function")try{rh.onPostCommitFiberRoot(GM,e)}catch{}r=!0}return r}finally{Or=n,Sc.transition=t}}return!1}function Pse(e,t,n){t=SE(n,t),t=Bve(e,t,1),e=d0(e,t,1),t=qa(),e!==null&&(WI(e,1,t),ju(e,t))}function zi(e,t,n){if(e.tag===3)Pse(e,e,n);else for(;t!==null;){if(t.tag===3){Pse(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(h0===null||!h0.has(r))){e=SE(n,e),e=Uve(t,e,1),t=d0(t,e,1),e=qa(),t!==null&&(WI(t,1,e),ju(t,e));break}}t=t.return}}function tBe(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=qa(),e.pingedLanes|=e.suspendedLanes&n,ao===e&&(Ro&n)===n&&(Os===4||Os===3&&(Ro&130023424)===Ro&&500>ss()-lW?y1(e,0):uW|=n),ju(e,t)}function a1e(e,t){t===0&&(e.mode&1?(t=nN,nN<<=1,!(nN&130023424)&&(nN=4194304)):t=1);var n=qa();e=dm(e,t),e!==null&&(WI(e,t,n),ju(e,n))}function nBe(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),a1e(e,n)}function rBe(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),a1e(e,n)}var u1e;u1e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Lu.current)Nu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Nu=!1,H9e(e,t,n);Nu=!!(e.flags&131072)}else Nu=!1,wi&&t.flags&1048576&&dve(t,vO,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;YP(e,t),e=t.pendingProps;var i=_E(t,va.current);Lw(t,n),i=nW(null,t,r,e,i,n);var s=rW();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Fu(r)?(s=!0,gO(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Qq(t),i.updater=eL,t.stateNode=i,i._reactInternals=t,yU(t,r,e,n),t=_U(null,t,r,!0,s,n)):(t.tag=0,wi&&s&&Hq(t),Oa(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(YP(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=sBe(r),e=lf(r,e),i){case 0:t=bU(null,t,r,e,n);break e;case 1:t=Ese(null,t,r,e,n);break e;case 11:t=_se(null,t,r,e,n);break e;case 14:t=wse(null,t,r,lf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lf(r,i),bU(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lf(r,i),Ese(e,t,r,i,n);case 3:e:{if(qve(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,vve(e,t),wO(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=SE(Error(tt(423)),t),t=xse(e,t,r,n,i);break e}else if(r!==i){i=SE(Error(tt(424)),t),t=xse(e,t,r,n,i);break e}else for(_l=f0(t.stateNode.containerInfo.firstChild),Il=t,wi=!0,mf=null,n=gve(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(wE(),r===i){t=hm(e,t,n);break e}Oa(e,t,r,n)}t=t.child}return t;case 5:return bve(t),e===null&&pU(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,lU(r,i)?o=null:s!==null&&lU(r,s)&&(t.flags|=32),Hve(e,t),Oa(e,t,o,n),t.child;case 6:return e===null&&pU(t),null;case 13:return Wve(e,t,n);case 4:return Jq(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=EE(t,null,r,n):Oa(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lf(r,i),_se(e,t,r,i,n);case 7:return Oa(e,t,t.pendingProps,n),t.child;case 8:return Oa(e,t,t.pendingProps.children,n),t.child;case 12:return Oa(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ti(bO,r._currentValue),r._currentValue=o,s!==null)if(zf(s.value,o)){if(s.children===i.children&&!Lu.current){t=hm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Jp(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),mU(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),mU(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Oa(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,Lw(t,n),i=Cc(i),r=r(i),t.flags|=1,Oa(e,t,r,n),t.child;case 14:return r=t.type,i=lf(r,t.pendingProps),i=lf(r.type,i),wse(e,t,r,i,n);case 15:return zve(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:lf(r,i),YP(e,t),t.tag=1,Fu(r)?(e=!0,gO(t)):e=!1,Lw(t,n),jve(t,r,i),yU(t,r,i,n),_U(null,t,r,!0,e,n);case 19:return Gve(e,t,n);case 22:return Vve(e,t,n)}throw Error(tt(156,t.tag))};function l1e(e,t){return Mye(e,t)}function iBe(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bc(e,t,n,r){return new iBe(e,t,n,r)}function hW(e){return e=e.prototype,!(!e||!e.isReactComponent)}function sBe(e){if(typeof e=="function")return hW(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Pq)return 11;if(e===Dq)return 14}return 2}function m0(e,t){var n=e.alternate;return n===null?(n=bc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function QP(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")hW(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case uw:return v1(n.children,i,s,t);case Nq:o=8,i|=8;break;case UB:return e=bc(12,n,t,i|2),e.elementType=UB,e.lanes=s,e;case zB:return e=bc(13,n,t,i),e.elementType=zB,e.lanes=s,e;case VB:return e=bc(19,n,t,i),e.elementType=VB,e.lanes=s,e;case bye:return rL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case yye:o=10;break e;case vye:o=9;break e;case Pq:o=11;break e;case Dq:o=14;break e;case Ag:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=bc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function v1(e,t,n,r){return e=bc(7,e,r,t),e.lanes=n,e}function rL(e,t,n,r){return e=bc(22,e,r,t),e.elementType=bye,e.lanes=n,e.stateNode={isHidden:!1},e}function pj(e,t,n){return e=bc(6,e,null,t),e.lanes=n,e}function mj(e,t,n){return t=bc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function oBe(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=K5(0),this.expirationTimes=K5(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=K5(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function pW(e,t,n,r,i,s,o,a,u){return e=new oBe(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=bc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Qq(s),e}function aBe(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:aw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function c1e(e){if(!e)return M0;e=e._reactInternals;e:{if(Ab(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Fu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Fu(n))return cve(e,n,t)}return t}function f1e(e,t,n,r,i,s,o,a,u){return e=pW(n,r,!0,e,i,s,o,a,u),e.context=c1e(null),n=e.current,r=qa(),i=p0(n),s=Jp(r,i),s.callback=t??null,d0(n,s,i),e.current.lanes=i,WI(e,i,r),ju(e,r),e}function iL(e,t,n,r){var i=t.current,s=qa(),o=p0(i);return n=c1e(n),t.context===null?t.context=n:t.pendingContext=n,t=Jp(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=d0(i,t,o),e!==null&&(Of(e,i,o,s),qP(e,i,o)),o}function kO(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Dse(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function mW(e,t){Dse(e,t),(e=e.alternate)&&Dse(e,t)}function uBe(){return null}var d1e=typeof reportError=="function"?reportError:function(e){console.error(e)};function gW(e){this._internalRoot=e}sL.prototype.render=gW.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));iL(e,t,null,null)};sL.prototype.unmount=gW.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;L1(function(){iL(null,e,null,null)}),t[fm]=null}};function sL(e){this._internalRoot=e}sL.prototype.unstable_scheduleHydration=function(e){if(e){var t=Vye();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mg.length&&t!==0&&t<Mg[n].priority;n++);Mg.splice(n,0,e),n===0&&qye(e)}};function yW(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function oL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Ose(){}function lBe(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=kO(o);s.call(l)}}var o=f1e(t,r,e,0,null,!1,!1,"",Ose);return e._reactRootContainer=o,e[fm]=o.current,lC(e.nodeType===8?e.parentNode:e),L1(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=kO(u);a.call(l)}}var u=pW(e,0,!1,null,null,!1,!1,"",Ose);return e._reactRootContainer=u,e[fm]=u.current,lC(e.nodeType===8?e.parentNode:e),L1(function(){iL(t,u,n,r)}),u}function aL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=kO(o);a.call(u)}}iL(t,o,e,i)}else o=lBe(n,t,e,i,r);return kO(o)}Uye=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=f2(t.pendingLanes);n!==0&&(Mq(t,n|1),ju(t,ss()),!(ur&6)&&(TE=ss()+500,Sy()))}break;case 13:L1(function(){var r=dm(e,1);if(r!==null){var i=qa();Of(r,e,1,i)}}),mW(e,1)}};Lq=function(e){if(e.tag===13){var t=dm(e,134217728);if(t!==null){var n=qa();Of(t,e,134217728,n)}mW(e,134217728)}};zye=function(e){if(e.tag===13){var t=p0(e),n=dm(e,t);if(n!==null){var r=qa();Of(n,e,t,r)}mW(e,t)}};Vye=function(){return Or};Hye=function(e,t){var n=Or;try{return Or=e,t()}finally{Or=n}};ZB=function(e,t,n){switch(t){case"input":if(WB(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=QM(r);if(!i)throw Error(tt(90));wye(r),WB(r,i)}}}break;case"textarea":xye(e,n);break;case"select":t=n.value,t!=null&&Dw(e,!!n.multiple,t,!1)}};Rye=cW;Nye=L1;var cBe={usingClientEntryPoint:!1,Events:[YI,dw,QM,Iye,kye,cW]},mT={findFiberByHostInstance:Xv,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},fBe={bundleType:mT.bundleType,version:mT.version,rendererPackageName:mT.rendererPackageName,rendererConfig:mT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:jm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Oye(e),e===null?null:e.stateNode},findFiberByHostInstance:mT.findFiberByHostInstance||uBe,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var hN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!hN.isDisabled&&hN.supportsFiber)try{GM=hN.inject(fBe),rh=hN}catch{}}Yl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cBe;Yl.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yW(t))throw Error(tt(200));return aBe(e,t,null,n)};Yl.createRoot=function(e,t){if(!yW(e))throw Error(tt(299));var n=!1,r="",i=d1e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=pW(e,1,!1,null,null,n,!1,r,i),e[fm]=t.current,lC(e.nodeType===8?e.parentNode:e),new gW(t)};Yl.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=Oye(t),e=e===null?null:e.stateNode,e};Yl.flushSync=function(e){return L1(e)};Yl.hydrate=function(e,t,n){if(!oL(t))throw Error(tt(200));return aL(null,e,t,!0,n)};Yl.hydrateRoot=function(e,t,n){if(!yW(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=d1e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=f1e(t,null,e,1,n??null,i,!1,s,o),e[fm]=t.current,lC(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new sL(t)};Yl.render=function(e,t,n){if(!oL(t))throw Error(tt(200));return aL(null,e,t,!1,n)};Yl.unmountComponentAtNode=function(e){if(!oL(e))throw Error(tt(40));return e._reactRootContainer?(L1(function(){aL(null,null,e,!1,function(){e._reactRootContainer=null,e[fm]=null})}),!0):!1};Yl.unstable_batchedUpdates=cW;Yl.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!oL(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return aL(e,t,n,!1,r)};Yl.version="18.3.1-next-f1338f8080-20240426";function h1e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(h1e)}catch(e){console.error(e)}}h1e(),hye.exports=Yl;var XI=hye.exports;const h2=Gl(XI);var $se=XI;jB.createRoot=$se.createRoot,jB.hydrateRoot=$se.hydrateRoot;var Md=function(){return Md=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Md.apply(this,arguments)};function QI(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Dp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function Mse(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function dBe(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Yn(e){return this instanceof Yn?(this.v=e,this):new Yn(e)}function Zv(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Yn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function gj(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Yn(e[i](o)),done:!1}:s?s(o):o}:s}}function cA(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof Mse=="function"?Mse(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var JP="right-scroll-bar-position",ZP="width-before-scroll-bar",hBe="with-scroll-bars-hidden",pBe="--removed-body-scroll-bar-size";function yj(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function mBe(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var gBe=typeof window<"u"?I.useLayoutEffect:I.useEffect,Lse=new WeakMap;function yBe(e,t){var n=mBe(null,function(r){return e.forEach(function(i){return yj(i,r)})});return gBe(function(){var r=Lse.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||yj(a,null)}),s.forEach(function(a){i.has(a)||yj(a,o)})}Lse.set(n,e)},[e]),n}function vBe(e){return e}function bBe(e,t){t===void 0&&(t=vBe);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function _Be(e){e===void 0&&(e={});var t=bBe(null);return t.options=Md({async:!0,ssr:!1},e),t}var p1e=function(e){var t=e.sideCar,n=QI(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Md({},n))};p1e.isSideCarExport=!0;function wBe(e,t){return e.useMedium(t),p1e}var m1e=_Be(),vj=function(){},uL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:vj,onWheelCapture:vj,onTouchMoveCapture:vj}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=QI(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=yBe([n,t]),T=Md(Md({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:m1e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Md(Md({},T),{ref:E})):I.createElement(y,Md({},T,{className:u,ref:E}),a))});uL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};uL.classNames={fullWidth:ZP,zeroRight:JP};var EBe=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function xBe(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=EBe();return t&&e.setAttribute("nonce",t),e}function SBe(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function TBe(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var ABe=function(){var e=0,t=null;return{add:function(n){e==0&&(t=xBe())&&(SBe(t,n),TBe(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},CBe=function(){var e=ABe();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},g1e=function(){var e=CBe(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},IBe={left:0,top:0,right:0,gap:0},bj=function(e){return parseInt(e||"",10)||0},kBe=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[bj(n),bj(r),bj(i)]},RBe=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return IBe;var t=kBe(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},NBe=g1e(),jw="data-scroll-locked",PBe=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(hBe,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(jw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(JP,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(ZP,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(JP," .").concat(JP,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ZP," .").concat(ZP,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(jw,`] {
    `).concat(pBe,": ").concat(a,`px;
  }
`)},Fse=function(){var e=parseInt(document.body.getAttribute(jw)||"0",10);return isFinite(e)?e:0},DBe=function(){I.useEffect(function(){return document.body.setAttribute(jw,(Fse()+1).toString()),function(){var e=Fse()-1;e<=0?document.body.removeAttribute(jw):document.body.setAttribute(jw,e.toString())}},[])},OBe=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;DBe();var s=I.useMemo(function(){return RBe(i)},[i]);return I.createElement(NBe,{styles:PBe(s,!t,i,n?"":"!important")})},PU=!1;if(typeof window<"u")try{var pN=Object.defineProperty({},"passive",{get:function(){return PU=!0,!0}});window.addEventListener("test",pN,pN),window.removeEventListener("test",pN,pN)}catch{PU=!1}var b_=PU?{passive:!1}:!1,$Be=function(e){return e.tagName==="TEXTAREA"},y1e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!$Be(e)&&n[t]==="visible")},MBe=function(e){return y1e(e,"overflowY")},LBe=function(e){return y1e(e,"overflowX")},jse=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=v1e(e,r);if(i){var s=b1e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},FBe=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},jBe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},v1e=function(e,t){return e==="v"?MBe(t):LBe(t)},b1e=function(e,t){return e==="v"?FBe(t):jBe(t)},BBe=function(e,t){return e==="h"&&t==="rtl"?-1:1},UBe=function(e,t,n,r,i){var s=BBe(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=b1e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&v1e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},mN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Bse=function(e){return[e.deltaX,e.deltaY]},Use=function(e){return e&&"current"in e?e.current:e},zBe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},VBe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},HBe=0,__=[];function qBe(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(HBe++)[0],s=I.useState(g1e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=dBe([e.lockRef.current],(e.shards||[]).map(Use),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=mN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,T=m.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&T.type==="range")return!1;var A=jse(S,T);if(!A)return!0;if(A?E=S:(E=S==="v"?"h":"v",A=jse(S,T)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return UBe(C,g,m,C==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!__.length||__[__.length-1]!==s)){var y="deltaY"in g?Bse(g):mN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&zBe(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(Use).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:WBe(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=mN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,Bse(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,mN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return __.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,b_),document.addEventListener("touchmove",u,b_),document.addEventListener("touchstart",c,b_),function(){__=__.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,b_),document.removeEventListener("touchmove",u,b_),document.removeEventListener("touchstart",c,b_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:VBe(i)}):null,h?I.createElement(OBe,{gapMode:e.gapMode}):null)}function WBe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const GBe=wBe(m1e,qBe);var lL=I.forwardRef(function(e,t){return I.createElement(uL,Md({},e,{ref:t,sideCar:GBe}))});lL.classNames=uL.classNames;function Xr(e){return Object.keys(e)}function _j(e){return e&&typeof e=="object"&&!Array.isArray(e)}function vW(e,t){const n={...e},r=t;return _j(e)&&_j(t)&&Object.keys(t).forEach(i=>{_j(r[i])&&i in e?n[i]=vW(n[i],r[i]):n[i]=r[i]}),n}function YBe(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function KBe(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function vC(e){const t=KBe(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function wj(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function _1e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?wj(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?wj(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?wj(s):s}}return r}return n}const Te=_1e("rem",{shouldScale:!0}),RO=_1e("em");function Ty(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function w1e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function Ay(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function fo(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function Ux(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function NO(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function PO(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function XBe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function QBe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function JBe(e,t,n){return PO(e,n)===PO(t,n)}function bW({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=PO(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>JBe(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=QBe(l,u,r),f=XBe(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const ZBe={app:100,modal:200,popover:300,overlay:400,max:9999};function Xl(e){return ZBe[e]}const eUe=()=>{};function tUe(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||eUe:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function tn(e,t="size",n=!0){if(e!==void 0)return w1e(e)?n?Te(e):e:`var(--${t}-${e})`}function as(e){return tn(e,"mantine-spacing")}function Ur(e){return e===void 0?"var(--mantine-radius-default)":tn(e,"mantine-radius")}function uo(e){return tn(e,"mantine-font-size")}function E1e(e){return tn(e,"mantine-line-height",!1)}function _W(e){if(e)return tn(e,"mantine-shadow",!1)}function zp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function wW(e,t){return e in t.breakpoints?vC(t.breakpoints[e]):vC(e)}function bC(e,t){const n=e.map(r=>({value:r,px:wW(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Tf(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function nUe(e,t,n){var r;return n?Array.from(((r=PO(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function rUe(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function Kd(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function Bw(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function Mv(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function cL(e,t){const n=Mv(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const zse=["mousedown","touchstart"];function iUe(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||zse).forEach(s=>document.addEventListener(s,i)),()=>{(t||zse).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function sUe(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function oUe(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function aUe(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:oUe(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),sUe(s.current,o=>i(o.matches))},[e]),r}const Cb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function _h(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function x1e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return _h(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function uUe(e,t="body > :not(script)"){const n=Bw(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const lUe=/input|select|textarea|button|object/,S1e="a, input, select, textarea, button, object, [tabindex]";function cUe(e){return e.style.display==="none"}function fUe(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(cUe(n))return!1;n=n.parentNode}return!0}function T1e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function DU(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(T1e(e));return(lUe.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&fUe(e)}function A1e(e){const t=T1e(e);return(Number.isNaN(t)||t>=0)&&DU(e)}function dUe(e){return Array.from(e.querySelectorAll(S1e)).filter(A1e)}function hUe(e,t){const n=dUe(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function pUe(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(S1e));o=a.find(A1e)||a.find(DU)||null,!o&&DU(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=uUe(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&hUe(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const mUe=e=>(e+1)%1e6;function gUe(){const[,e]=I.useReducer(mUe,0);return e}const yUe=_r.useId||(()=>{});function vUe(){const e=yUe();return e?`mantine-${e.replace(/:/g,"")}`:""}function xa(e){const t=vUe(),[n,r]=I.useState(t);return Cb(()=>{r(Bw())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function C1e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function EW(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function I1e(...e){return t=>{e.forEach(n=>EW(n,t))}}function ds(...e){return I.useCallback(I1e(...e),e)}function k1e(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const S=Kd((w-T.left)/T.width,0,1);e({x:n==="ltr"?S:1-S,y:Kd((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function xs({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function fL(e,t){return aUe("(prefers-reduced-motion: reduce)",e,t)}const bUe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function b1(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(bUe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function _Ue(e){const[t,{width:n,height:r}]=b1(e);return{ref:t,width:n,height:r}}function wUe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function EUe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function xUe(e){return t=>EUe(wUe(e),t)}function SUe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{xUe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function dL(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function TUe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function AUe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function CUe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function IUe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function kUe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Cb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>IUe(`${e}:${String(r)}`,i[0])}return[t,n]}var RUe={};function R1e(){return typeof process<"u"&&RUe?"production":"development"}function N1e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=N1e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Qi(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=N1e(e))&&(r&&(r+=" "),r+=t);return r}const NUe={};function PUe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=Qi(t[r],i):t[r]=i})}),t}function hL({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||NUe);return PUe(s)}function DO({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const P1e=I.createContext(null);function Cy(){const e=I.useContext(P1e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function DUe(){return Cy().cssVariablesResolver}function OUe(){return Cy().classNamesPrefix}function xW(){return Cy().getStyleNonce}function $Ue(){return Cy().withStaticClasses}function MUe(){return Cy().headless}function LUe(){var e;return(e=Cy().stylesTransform)==null?void 0:e.sx}function FUe(){var e;return(e=Cy().stylesTransform)==null?void 0:e.styles}function jUe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function BUe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function UUe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function zUe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function SW(e){return jUe(e)?BUe(e):e.startsWith("rgb")?UUe(e):e.startsWith("hsl")?zUe(e):{r:0,g:0,b:0,a:1}}function gN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=SW(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function _C(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function Ej(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function VUe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function HUe(e){if(e.startsWith("oklch("))return(VUe(e)||0)/100;const{r:t,g:n,b:r}=SW(e),i=t/255,s=n/255,o=r/255,a=Ej(i),u=Ej(s),l=Ej(o);return .2126*a+.7152*u+.0722*l}function gT(e,t=.179){return e.startsWith("var(")?!1:HUe(e)>t}function jh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:gT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:gT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:gT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][_C(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:gT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:gT(e,t.luminanceThreshold),shade:s,variable:void 0}}function $r(e,t){const n=jh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function OU(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=$r(n.from,t),i=$r(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Ad(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=SW(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const w_=Ad,qUe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=jh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:gN(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Ad(a,.1),hover:Ad(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:Ad(e,.1),hover:Ad(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Ad(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Ad(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Ad(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:Ad(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:gN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:gN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:gN(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:OU(r,t),hover:OU(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},WUe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},Vse="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",TW={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:WUe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:qUe,autoContrast:!1,luminanceThreshold:.3,fontFamily:Vse,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:Vse,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function Hse(e){return e==="auto"||e==="dark"||e==="light"}function GUe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return Hse(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&Hse(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const YUe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",qse="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function xj(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function Wse(e){if(!(e.primaryColor in e.colors))throw new Error(YUe);if(typeof e.primaryShade=="object"&&(!xj(e.primaryShade.dark)||!xj(e.primaryShade.light)))throw new Error(qse);if(typeof e.primaryShade=="number"&&!xj(e.primaryShade))throw new Error(qse)}function KUe(e,t){var r;if(!t)return Wse(e),e;const n=vW(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),Wse(n),n}const AW=I.createContext(null),XUe=()=>I.useContext(AW)||TW;function hs(){const e=I.useContext(AW);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function D1e({theme:e,children:t,inherit:n=!0}){const r=XUe(),i=I.useMemo(()=>KUe(n?r:TW,e),[e,r,n]);return _.jsx(AW.Provider,{value:i,children:t})}D1e.displayName="@mantine/core/MantineThemeProvider";function QUe(){const e=hs(),t=xW(),n=Xr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=vC(e.breakpoints[i]),a=s?`${o-.1}px`:RO(o-.1),u=s?`${o}px`:RO(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function Sj(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function Tj(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function JUe(e,t){const n=Sj(e.variables),r=n?Tj(t,n):"",i=Sj(e.dark),s=i?Tj(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=Sj(e.light),a=o?Tj(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Iy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&jh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function Gse(e,t){return Iy({color:e.colors[e.primaryColor][_C(e,t)],theme:e,autoContrast:null})}function yN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=_C(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:w_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:w_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:w_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=_C(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:w_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:w_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:w_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function ZUe(e){return Array.isArray(e)?e:Array(10).fill(e)}function e7e(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function E_(e,t,n){Xr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const O1e=e=>{const t=_C(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":Gse(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":Gse(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};E_(r.variables,e.breakpoints,"breakpoint"),E_(r.variables,e.spacing,"spacing"),E_(r.variables,e.fontSizes,"font-size"),E_(r.variables,e.lineHeights,"line-height"),E_(r.variables,e.shadows,"shadow"),E_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Xr(e.colors).forEach(s=>{const o=e.colors[s];if(e7e(o)){Object.assign(r.light,yN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,yN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,yN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,yN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Xr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function t7e({theme:e,generator:t}){const n=O1e(e),r=t==null?void 0:t(e);return r?vW(n,r):n}const Aj=O1e(TW);function n7e(e){const t={variables:{},light:{},dark:{}};return Xr(e.variables).forEach(n=>{Aj.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Xr(e.light).forEach(n=>{Aj.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Xr(e.dark).forEach(n=>{Aj.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function r7e(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function $1e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=hs(),r=xW(),i=DUe(),s=t7e({theme:n,generator:i}),o=e===":root"&&t,a=o?n7e(s):s,u=JUe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":r7e(e)}`}}):null}$1e.displayName="@mantine/CssVariables";function i7e(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function x_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function s7e({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(x_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),x_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Cb(()=>{x_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return x_(r,n),()=>{};r===void 0&&x_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&x_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function o7e({respectReducedMotion:e,getRootElement:t}){Cb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}i7e();function M1e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=GUe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=s7e({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return o7e({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(P1e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(D1e,{theme:e,children:[o&&_.jsx($1e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx(QUe,{}),t]})})}M1e.displayName="@mantine/core/MantineProvider";function Bm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=hs();return{resolvedClassNames:hL({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:DO({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const a7e={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function u7e({theme:e,options:t,unstyled:n}){return Qi((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||a7e[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function l7e({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return hL({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function Yse({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return hL({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function c7e({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function f7e({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function d7e({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function h7e({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=hL({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function p7e({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function m7e({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return Qi(u7e({theme:e,options:t,unstyled:a||h}),h7e({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),p7e({options:t,classes:o,selector:r,unstyled:a}),Yse({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),Yse({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),l7e({selector:r,stylesCtx:f,options:t,props:c,theme:e}),c7e({rootSelector:l,selector:r,className:u}),f7e({selector:r,classes:o,unstyled:a||h}),d&&!h&&d7e({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function g7e({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return DO({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function $U({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...$U({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function y7e(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Ty(n[r])}}),t),{})}function v7e({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=y7e([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function b7e({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&g7e({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&DO({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&DO({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...v7e({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?$U({style:u,theme:e}):null,...$U({style:r==null?void 0:r.style,theme:e})}}function _7e({props:e,stylesCtx:t,themeName:n}){var o;const r=hs(),i=(o=FUe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function dt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=hs(),h=OUe(),p=$Ue(),m=MUe(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=_7e({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:m7e({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:b7e({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function zx(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=hs(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Ty(n)}}function Cj(e){return Xr(e).reduce((t,n)=>e[n]!==void 0?`${t}${YBe(n)}:${e[n]};`:t,"").trim()}function w7e({selector:e,styles:t,media:n,container:r}){const i=t?Cj(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${Cj(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${Cj(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Ib(e){const t=xW();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:w7e(e)}})}function kb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:k,ta:N,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke,...ze}=e;return{styleProps:Ty({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:k,ta:N,lh:O,fs:D,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Ke,hiddenFrom:Ue,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke}),rest:ze}}const E7e={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function CW(e,t){const n=jh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function x7e(e,t){const n=jh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:CW(e,t)}function S7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),ZUe.length>0&&(s+=` ${CW(i.join(" "),t)}`),s.trim()}return e}const Kse={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function T7e(e){return typeof e=="string"&&e in Kse?Kse[e]:e}const A7e=["h1","h2","h3","h4","h5","h6"];function C7e(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&A7e.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function I7e(e){return e}const k7e=["h1","h2","h3","h4","h5","h6"];function R7e(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&k7e.includes(e)?`var(--mantine-${e}-line-height)`:e}function N7e(e){return typeof e=="number"?Te(e):e}function P7e(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const Ij={color:CW,textColor:x7e,fontSize:C7e,spacing:P7e,identity:I7e,size:N7e,lineHeight:R7e,fontFamily:T7e,border:S7e};function Xse(e){return e.replace("(min-width: ","").replace("em)","")}function D7e({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(Xse(i))-Number(Xse(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function O7e(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function $7e(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function M7e(e){return typeof e=="object"&&e!==null?Xr(e).filter(t=>t!=="base"):[]}function L7e(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function L1e({styleProps:e,data:t,theme:n}){return D7e(Xr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=$7e(e[i]);if(!O7e(e[i]))return o.forEach(l=>{r.inlineStyles[l]=Ij[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=M7e(e[i]);return o.forEach(l=>{a&&(r.styles[l]=Ij[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:Ij[s.type](L7e(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function JI(){return`__m__-${I.useId().replace(/:/g,"")}`}function IW(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...IW(r,t)}),{}):typeof e=="function"?e(t):e??{}}function F1e(e){return e.startsWith("data-")?e:`data-${e}`}function F7e(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[F1e(n)]=e[n]),t},{})}function j1e(e){return e?typeof e=="string"?{[F1e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...j1e(n)}),{}):F7e(e):null}function MU(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...MU(r,t)}),{}):typeof e=="function"?e(t):e??{}}function j7e({theme:e,style:t,vars:n,styleProps:r}){const i=MU(t,e),s=MU(n,e);return{...i,...s,...r}}const B1e=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=hs(),g=e||"div",{styleProps:y,rest:v}=kb(h),b=LUe(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=JI(),T=L1e({styleProps:y,theme:m,data:E7e}),S={ref:p,style:j7e({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:Qi(r,w,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":w1e(o)?void 0:o||void 0,size:d,...j1e(s),...v};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(Ib,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(S):_.jsx(g,{...S})]})});B1e.displayName="@mantine/core/Box";const me=B1e;function U1e(e){return e}function Me(e){const t=I.forwardRef(e);return t.extend=U1e,t}function Us(e){const t=I.forwardRef(e);return t.extend=U1e,t}const B7e=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Bh(){return I.useContext(B7e)}function U7e(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function kj(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const yT=typeof window<"u"&&window.requestAnimationFrame;function z7e({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{XI.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||U7e(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}_h(()=>{typeof yT=="function"&&yT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),yT(()=>{const p=kj(i);c({...f(p),height:p})})}:()=>{const p=kj(i);c({...f(p),willChange:"height",height:p}),yT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=kj(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:I1e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const V7e={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},pL=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",V7e,e),c=hs(),f=fL(),h=(c.respectReducedMotion?f:!1)?0:i,p=z7e({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(me,{...l,children:n}):null:_.jsx(me,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...IW(o,c)},ref:t,...l}),children:n})});pL.displayName="@mantine/core/Collapse";const[H7e,jc]=fo("ScrollArea.Root component was not found in tree");function AE(e,t){const n=Mv(t);Cb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const q7e=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=jc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return AE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),AE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),W7e=I.forwardRef((e,t)=>{const n=jc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(q7e,{...e,ref:t}):null}),G7e={scrollHideDelay:1e3,type:"hover"},z1e=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",G7e,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[E,T]=I.useState(!1),[S,A]=I.useState(!1),C=ds(t,k=>u(k));return _.jsx(H7e,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(me,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});z1e.displayName="@mantine/core/ScrollAreaRoot";function V1e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function mL(e){const t=V1e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function H1e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function Y7e(e,[t,n]){return Math.min(n,Math.max(t,e))}function Qse(e,t,n="ltr"){const r=mL(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=Y7e(e,u);return H1e([0,o],[0,a])(l)}function K7e(e,t,n,r="ltr"){const i=mL(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return H1e([u,l],f)(e)}function q1e(e,t){return e>0&&e<t}function OO(e){return e?parseInt(e,10):0}function _1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[X7e,W1e]=fo("ScrollAreaScrollbar was not found in tree"),G1e=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=jc(),[h,p]=I.useState(null),m=ds(t,A=>p(A)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=Mv(l),E=Mv(a),T=cL(c,10),S=A=>{if(g.current){const C=A.clientX-g.current.left,k=A.clientY-g.current.top;u({x:C,y:k})}};return I.useEffect(()=>{const A=C=>{const k=C.target;(h==null?void 0:h.contains(k))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),I.useEffect(E,[n,E]),AE(h,T),AE(d.content,T),_.jsx(X7e,{value:{scrollbar:h,hasThumb:r,onThumbChange:Mv(i),onThumbPointerUp:Mv(s),onThumbPositionChange:E,onThumbPointerDown:Mv(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:_1(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(A))}),onPointerMove:_1(e.onPointerMove,S),onPointerUp:_1(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),Q7e=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=jc(),[a,u]=I.useState(),l=I.useRef(null),c=ds(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(G1e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${mL(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),q1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:OO(a.paddingLeft),paddingEnd:OO(a.paddingRight)}})}})}),J7e=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=jc(),[a,u]=I.useState(),l=I.useRef(null),c=ds(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(G1e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${mL(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),q1e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:OO(a.paddingTop),paddingEnd:OO(a.paddingBottom)}})}})}),kW=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Bh(),s=jc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=V1e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>K7e(h,a.current,u,p);return n==="horizontal"?_.jsx(Q7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=Qse(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(J7e,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=Qse(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),Y1e=I.forwardRef((e,t)=>{const n=jc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=cL(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return AE(n.viewport,u),AE(n.content,u),r||s?_.jsx(kW,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),Z7e=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=jc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(Y1e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),eze=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=jc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=cL(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(kW,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:_1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:_1(e.onPointerLeave,()=>a("idle"))}):null}),Jse=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=jc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(Z7e,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(eze,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(Y1e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(kW,{...r,ref:t}):null});function tze(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const nze=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=jc(),s=W1e(),{onThumbPositionChange:o}=s,a=ds(t,c=>s.onThumbChange(c)),u=I.useRef(),l=cL(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=tze(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:_1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:_1(e.onPointerUp,s.onThumbPointerUp)})}),Zse=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=W1e();return n||i.hasThumb?_.jsx(nze,{ref:t,...r}):null}),K1e=I.forwardRef(({children:e,style:t,...n},r)=>{const i=jc(),s=ds(r,i.onViewportChange);return _.jsx(me,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});K1e.displayName="@mantine/core/ScrollAreaViewport";var RW={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const X1e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},rze=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),pm=Me((e,t)=>{const n=xe("ScrollArea",X1e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),E=dt({name:"ScrollArea",props:n,classes:RW,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:rze});return _.jsxs(z1e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(K1e,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(Jse,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Zse,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(Jse,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(Zse,{...E("thumb")})}),_.jsx(W7e,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});pm.displayName="@mantine/core/ScrollArea";const NW=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",X1e,e);return _.jsx(me,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(me,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(pm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});pm.classes=RW;NW.displayName="@mantine/core/ScrollAreaAutosize";NW.classes=RW;pm.Autosize=NW;var Q1e={root:"m_87cf2631"};const ize={__staticSelector:"UnstyledButton"},Es=Us((e,t)=>{const n=xe("UnstyledButton",ize,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=dt({name:s,props:n,classes:Q1e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(me,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Es.classes=Q1e;Es.displayName="@mantine/core/UnstyledButton";var J1e={root:"m_515a97f8"};const sze={},PW=Me((e,t)=>{const n=xe("VisuallyHidden",sze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=dt({name:"VisuallyHidden",classes:J1e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(me,{component:"span",ref:t,...c("root"),...l})});PW.classes=J1e;PW.displayName="@mantine/core/VisuallyHidden";var Z1e={root:"m_1b7284a3"};const oze={},aze=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Ur(t),"--paper-shadow":_W(n)}}),Vx=Us((e,t)=>{const n=xe("Paper",oze,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=dt({name:"Paper",props:n,classes:Z1e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:aze});return _.jsx(me,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});Vx.classes=Z1e;Vx.displayName="@mantine/core/Paper";function Hx(e){return ebe(e)?(e.nodeName||"").toLowerCase():"#document"}function Bu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Um(e){var t;return(t=(ebe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function ebe(e){return e instanceof Node||e instanceof Bu(e).Node}function Ei(e){return e instanceof Element||e instanceof Bu(e).Element}function Ol(e){return e instanceof HTMLElement||e instanceof Bu(e).HTMLElement}function LU(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Bu(e).ShadowRoot}function ZI(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=kc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function uze(e){return["table","td","th"].includes(Hx(e))}function DW(e){const t=OW(),n=kc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function lze(e){let t=mm(e);for(;Ol(t)&&!L0(t);){if(DW(t))return t;t=mm(t)}return null}function OW(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function L0(e){return["html","body","#document"].includes(Hx(e))}function kc(e){return Bu(e).getComputedStyle(e)}function gL(e){return Ei(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function mm(e){if(Hx(e)==="html")return e;const t=e.assignedSlot||e.parentNode||LU(e)&&e.host||Um(e);return LU(t)?t.host:t}function tbe(e){const t=mm(e);return L0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ol(t)&&ZI(t)?t:tbe(t)}function Zp(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=tbe(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Bu(i);return s?t.concat(o,o.visualViewport||[],ZI(i)?i:[],o.frameElement&&n?Zp(o.frameElement):[]):t.concat(i,Zp(i,[],n))}function eoe(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function wC(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&LU(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function nbe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function rbe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function cze(e){return hze()?!1:!toe()&&e.width===0&&e.height===0||toe()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function fze(){return/apple/i.test(navigator.vendor)}function toe(){const e=/android/i;return e.test(nbe())||e.test(rbe())}function dze(){return nbe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function hze(){return rbe().includes("jsdom/")}function FU(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function pze(e){return"nativeEvent"in e}function mze(e){return e.matches("html,body")}function e1(e){return(e==null?void 0:e.ownerDocument)||document}function Rj(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function G_(e){return"composedPath"in e?e.composedPath()[0]:e.target}const gze="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function yze(e){return Ol(e)&&e.matches(gze)}const wl=Math.min,aa=Math.max,$O=Math.round,vN=Math.floor,F0=e=>({x:e,y:e}),vze={left:"right",right:"left",bottom:"top",top:"bottom"},bze={start:"end",end:"start"};function jU(e,t,n){return aa(e,wl(t,n))}function gm(e,t){return typeof e=="function"?e(t):e}function Vf(e){return e.split("-")[0]}function qx(e){return e.split("-")[1]}function $W(e){return e==="x"?"y":"x"}function MW(e){return e==="y"?"height":"width"}function Rb(e){return["top","bottom"].includes(Vf(e))?"y":"x"}function LW(e){return $W(Rb(e))}function _ze(e,t,n){n===void 0&&(n=!1);const r=qx(e),i=LW(e),s=MW(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=MO(o)),[o,MO(o)]}function wze(e){const t=MO(e);return[BU(e),t,BU(t)]}function BU(e){return e.replace(/start|end/g,t=>bze[t])}function Eze(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function xze(e,t,n,r){const i=qx(e);let s=Eze(Vf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(BU)))),s}function MO(e){return e.replace(/left|right|bottom|top/g,t=>vze[t])}function Sze(e){return{top:0,right:0,bottom:0,left:0,...e}}function FW(e){return typeof e!="number"?Sze(e):{top:e,right:e,bottom:e,left:e}}function CE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function noe(e,t,n){let{reference:r,floating:i}=e;const s=Rb(t),o=LW(t),a=MW(o),u=Vf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(qx(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const Tze=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=noe(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=noe(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function jW(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=gm(t,e),p=FW(h),g=a[d?f==="floating"?"reference":"floating":f],y=CE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=CE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const Aze=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=gm(e,t)||{};if(l==null)return{};const f=FW(c),d={x:n,y:r},h=LW(i),p=MW(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=T?T[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(T)))&&(S=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=S/2-m[p]/2-1,k=wl(f[y],C),N=wl(f[v],C),O=k,D=S-m[p]-N,$=S/2-m[p]/2+A,F=jU(O,$,D),M=!u.arrow&&qx(i)!=null&&$!==F&&s.reference[p]/2-($<O?k:N)-m[p]/2<0,B=M?$<O?$-O:$-D:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...M&&{alignmentOffset:B}},reset:M}}}),Cze=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=gm(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Vf(i),v=Vf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[MO(a)]:wze(a));!d&&p!=="none"&&w.push(...xze(a,m,p,b));const E=[a,...w],T=await jW(t,g),S=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(T[y]),f){const O=_ze(i,o,b);S.push(T[O[0]],T[O[1]])}if(A=[...A,{placement:i,overflows:S}],!S.every(O=>O<=0)){var C,k;const O=(((C=s.flip)==null?void 0:C.index)||0)+1,D=E[O];if(D)return{data:{index:O,overflows:A},reset:{placement:D}};let $=(k=A.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var N;const F=(N=A.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:N[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function ibe(e){const t=wl(...e.map(s=>s.left)),n=wl(...e.map(s=>s.top)),r=aa(...e.map(s=>s.right)),i=aa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function Ize(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>CE(ibe(i)))}const kze=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=gm(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=Ize(c),d=CE(ibe(c)),h=FW(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Rb(n)==="y"){const k=f[0],N=f[f.length-1],O=Vf(n)==="top",D=k.top,$=N.bottom,F=O?k.left:N.left,M=O?k.right:N.right,B=M-F,U=$-D;return{top:D,bottom:$,left:F,right:M,width:B,height:U,x:F,y:D}}const g=Vf(n)==="left",y=aa(...f.map(k=>k.right)),v=wl(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,E=b[b.length-1].bottom,T=v,S=y,A=S-T,C=E-w;return{top:w,bottom:E,left:T,right:S,width:A,height:C,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function Rze(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Vf(n),a=qx(n),u=Rb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=gm(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const Nze=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await Rze(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},Pze=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=gm(e,t),l={x:n,y:r},c=await jW(t,u),f=Rb(Vf(i)),d=$W(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=jU(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=jU(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},Dze=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=gm(e,t),c={x:n,y:r},f=Rb(i),d=$W(f);let h=c[d],p=c[f];const m=gm(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Vf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[d]:h,[f]:p}}}},Oze=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=gm(e,t),u=await jW(t,a),l=Vf(n),c=qx(n),f=Rb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=wl(h-u[p],g),b=wl(d-u[m],y),w=!t.middlewareData.shift;let E=v,T=b;if(f?T=c||w?wl(b,y):y:E=c||w?wl(v,g):g,w&&!c){const A=aa(u.left,0),C=aa(u.right,0),k=aa(u.top,0),N=aa(u.bottom,0);f?T=d-2*(A!==0||C!==0?A+C:aa(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:aa(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function sbe(e){const t=kc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ol(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=$O(n)!==s||$O(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function BW(e){return Ei(e)?e:e.contextElement}function Uw(e){const t=BW(e);if(!Ol(t))return F0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=sbe(t);let o=(s?$O(n.width):n.width)/r,a=(s?$O(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const $ze=F0(0);function obe(e){const t=Bu(e);return!OW()||!t.visualViewport?$ze:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function Mze(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Bu(e)?!1:t}function F1(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=BW(e);let o=F0(1);t&&(r?Ei(r)&&(o=Uw(r)):o=Uw(e));const a=Mze(s,n,r)?obe(s):F0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Bu(s),h=r&&Ei(r)?Bu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=Uw(m),y=m.getBoundingClientRect(),v=kc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Bu(m),m=p.frameElement}}return CE({width:c,height:f,x:u,y:l})}const Lze=[":popover-open",":modal"];function UW(e){return Lze.some(t=>{try{return e.matches(t)}catch{return!1}})}function Fze(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Um(r),a=t?UW(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=F0(1);const c=F0(0),f=Ol(r);if((f||!f&&!s)&&((Hx(r)!=="body"||ZI(o))&&(u=gL(r)),Ol(r))){const d=F1(r);l=Uw(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function jze(e){return Array.from(e.getClientRects())}function abe(e){return F1(Um(e)).left+gL(e).scrollLeft}function Bze(e){const t=Um(e),n=gL(e),r=e.ownerDocument.body,i=aa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=aa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+abe(e);const a=-n.scrollTop;return kc(r).direction==="rtl"&&(o+=aa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Uze(e,t){const n=Bu(e),r=Um(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=OW();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function zze(e,t){const n=F1(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ol(e)?Uw(e):F0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function roe(e,t,n){let r;if(t==="viewport")r=Uze(e,n);else if(t==="document")r=Bze(Um(e));else if(Ei(t))r=zze(t,n);else{const i=obe(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return CE(r)}function ube(e,t){const n=mm(e);return n===t||!Ei(n)||L0(n)?!1:kc(n).position==="fixed"||ube(n,t)}function Vze(e,t){const n=t.get(e);if(n)return n;let r=Zp(e,[],!1).filter(a=>Ei(a)&&Hx(a)!=="body"),i=null;const s=kc(e).position==="fixed";let o=s?mm(e):e;for(;Ei(o)&&!L0(o);){const a=kc(o),u=DW(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||ZI(o)&&!u&&ube(e,o))?r=r.filter(c=>c!==o):i=a,o=mm(o)}return t.set(e,r),r}function Hze(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?UW(t)?[]:Vze(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=roe(t,c,i);return l.top=aa(f.top,l.top),l.right=wl(f.right,l.right),l.bottom=wl(f.bottom,l.bottom),l.left=aa(f.left,l.left),l},roe(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function qze(e){const{width:t,height:n}=sbe(e);return{width:t,height:n}}function Wze(e,t,n){const r=Ol(t),i=Um(t),s=n==="fixed",o=F1(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=F0(0);if(r||!r&&!s)if((Hx(t)!=="body"||ZI(i))&&(a=gL(t)),r){const f=F1(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=abe(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function Nj(e){return kc(e).position==="static"}function ioe(e,t){return!Ol(e)||kc(e).position==="fixed"?null:t?t(e):e.offsetParent}function lbe(e,t){const n=Bu(e);if(UW(e))return n;if(!Ol(e)){let i=mm(e);for(;i&&!L0(i);){if(Ei(i)&&!Nj(i))return i;i=mm(i)}return n}let r=ioe(e,t);for(;r&&uze(r)&&Nj(r);)r=ioe(r,t);return r&&L0(r)&&Nj(r)&&!DW(r)?n:r||lze(e)||n}const Gze=async function(e){const t=this.getOffsetParent||lbe,n=this.getDimensions,r=await n(e.floating);return{reference:Wze(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Yze(e){return kc(e).direction==="rtl"}const Kze={convertOffsetParentRelativeRectToViewportRelativeRect:Fze,getDocumentElement:Um,getClippingRect:Hze,getOffsetParent:lbe,getElementRects:Gze,getClientRects:jze,getDimensions:qze,getScale:Uw,isElement:Ei,isRTL:Yze};function Xze(e,t){let n=null,r;const i=Um(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=vN(c),p=vN(i.clientWidth-(l+f)),m=vN(i.clientHeight-(c+d)),g=vN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:aa(0,wl(1,u))||1};let b=!0;function w(E){const T=E[0].intersectionRatio;if(T!==u){if(!b)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function Qze(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=BW(e),c=i||s?[...l?Zp(l):[],...Zp(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?Xze(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?F1(e):null;u&&g();function g(){const y=F1(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const Jze=Nze,Zze=Pze,eVe=Cze,tVe=Oze,soe=Aze,nVe=kze,rVe=Dze,iVe=(e,t,n)=>{const r=new Map,i={platform:Kze,...n},s={...i.platform,_c:r};return Tze(e,t,{...i,platform:s})};var eD=typeof document<"u"?I.useLayoutEffect:I.useEffect;function LO(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!LO(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!LO(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function cbe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ooe(e,t){const n=cbe(e);return Math.round(t*n)/n}function aoe(e){const t=I.useRef(e);return eD(()=>{t.current=e}),t}function sVe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);LO(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==T.current&&(T.current=B,m(B))},[]),b=I.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,T=I.useRef(null),S=I.useRef(null),A=I.useRef(c),C=u!=null,k=aoe(u),N=aoe(i),O=I.useCallback(()=>{if(!T.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),iVe(T.current,S.current,B).then(U=>{const H={...U,isPositioned:!0};D.current&&!LO(A.current,H)&&(A.current=H,XI.flushSync(()=>{f(H)}))})},[d,t,n,N]);eD(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const D=I.useRef(!1);eD(()=>(D.current=!0,()=>{D.current=!1}),[]),eD(()=>{if(w&&(T.current=w),E&&(S.current=E),w&&E){if(k.current)return k.current(w,E,O);O()}},[w,E,O,k,C]);const $=I.useMemo(()=>({reference:T,floating:S,setReference:v,setFloating:b}),[v,b]),F=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=ooe(F.floating,c.x),H=ooe(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...cbe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:O,refs:$,elements:F,floatingStyles:M}),[c,O,$,F,M])}const oVe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?soe({element:r.current,padding:i}).fn(n):{}:r?soe({element:r,padding:i}).fn(n):{}}}},fbe=(e,t)=>({...Jze(e),options:[e,t]}),zW=(e,t)=>({...Zze(e),options:[e,t]}),uoe=(e,t)=>({...rVe(e),options:[e,t]}),UU=(e,t)=>({...eVe(e),options:[e,t]}),aVe=(e,t)=>({...tVe(e),options:[e,t]}),zU=(e,t)=>({...nVe(e),options:[e,t]}),dbe=(e,t)=>({...oVe(e),options:[e,t]}),hbe={...sO},uVe=hbe.useInsertionEffect,lVe=uVe||(e=>e());function Fg(e){const t=I.useRef(()=>{});return lVe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var sh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let loe=!1,cVe=0;const coe=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+cVe++;function fVe(){const[e,t]=I.useState(()=>loe?coe():void 0);return sh(()=>{e==null&&t(coe())},[]),I.useEffect(()=>{loe=!0},[]),e}const dVe=hbe.useId,pbe=dVe||fVe;function hVe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const pVe=I.createContext(null),mVe=I.createContext(null),VW=()=>{var e;return((e=I.useContext(pVe))==null?void 0:e.id)||null},HW=()=>I.useContext(mVe);function qW(e){return"data-floating-ui-"+e}function foe(e){const t=I.useRef(e);return sh(()=>{t.current=e}),t}const doe=qW("safe-polygon");function tD(e,t,n){return n&&!FU(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function gVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=HW(),m=VW(),g=foe(c),y=foe(l),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),T=I.useRef(!0),S=I.useRef(!1),A=I.useRef(()=>{}),C=I.useCallback(()=>{var D;const $=(D=i.current.openEvent)==null?void 0:D.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function D($){let{open:F}=$;F||(clearTimeout(b.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",D),()=>{s.off("openchange",D)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function D(F){C()&&r(!1,F,"hover")}const $=e1(a).documentElement;return $.addEventListener("mouseleave",D),()=>{$.removeEventListener("mouseleave",D)}},[a,n,r,u,g,C]);const k=I.useCallback(function(D,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const M=tD(y.current,"close",v.current);M&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,D,F),M)):$&&(clearTimeout(b.current),r(!1,D,F))},[y,r]),N=Fg(()=>{A.current(),w.current=void 0}),O=Fg(()=>{if(S.current){const D=e1(a).body;D.style.pointerEvents="",D.removeAttribute(doe),S.current=!1}});return I.useEffect(()=>{if(!u)return;function D(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),T.current=!1,f&&!FU(v.current)||d>0&&!tD(y.current,"open"))return;const U=tD(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(D())return;A.current();const U=e1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B,!0,"safe-polygon")}});const P=w.current;U.addEventListener("mousemove",P),A.current=()=>{U.removeEventListener("mousemove",P)};return}(v.current==="touch"?!wC(a,B.relatedTarget):!0)&&k(B)}function M(B){D()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){O(),N(),k(B)}})(B))}if(Ei(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,k,N,O,r,n,p,y,g,i]),sh(()=>{var D;if(u&&n&&(D=g.current)!=null&&D.__options.blockPointerEvents&&C()){const F=e1(a).body;if(F.setAttribute(doe,""),F.style.pointerEvents="none",S.current=!0,Ei(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),sh(()=>{n||(v.current=void 0,N(),O())},[n,N,O]),I.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),O()},[u,o,N,O]),I.useMemo(()=>{if(!u)return{};function D($){v.current=$.pointerType}return{reference:{onPointerDown:D,onPointerEnter:D,onMouseMove($){function F(){T.current||r(!0,$.nativeEvent,"hover")}f&&!FU(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const VU=()=>{},mbe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:VU,setState:VU,isInstantPhase:!1}),gbe=()=>I.useContext(mbe);function yVe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return sh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(mbe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function vVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=gbe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return sh(()=>{u&&(f({delay:{open:1,close:tD(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),sh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),sh(()=>{l===VU||!n||l(o)},[n,l,o]),a}function Pj(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const bVe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},_Ve={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},hoe=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function wVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=HW(),v=Fg(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=I.useRef(!1),E=I.useRef(!1),{escapeKey:T,outsidePress:S}=hoe(m),{escapeKey:A,outsidePress:C}=hoe(g),k=Fg($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const M=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?Pj(y.nodesRef.current,M):[];if(!T&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var P;if((P=H.context)!=null&&P.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,pze($)?$.nativeEvent:$,"escape-key")}),N=Fg($=>{var F;const M=()=>{var B;k($),(B=G_($))==null||B.removeEventListener("keydown",M)};(F=G_($))==null||F.addEventListener("keydown",M)}),O=Fg($=>{var F;const M=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||M||typeof b=="function"&&!b($))return;const U=G_($),H="["+qW("inert")+"]",P=e1(o).querySelectorAll(H);let z=Ei(U)?U:null;for(;z&&!L0(z);){const G=mm(z);if(L0(G)||!Ei(G))break;z=G}if(P.length&&Ei(U)&&!mze(U)&&!wC(U,o)&&Array.from(P).every(G=>!wC(z,G)))return;if(Ol(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&$.offsetX>U.clientWidth;if(ne&&kc(U).direction==="rtl"&&(ce=$.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&$.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&Pj(y.nodesRef.current,W).some(G=>{var ne;return Rj($,(ne=G.context)==null?void 0:ne.elements.floating)});if(Rj($,o)||Rj($,s)||j)return;const q=y?Pj(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),D=Fg($=>{var F;const M=()=>{var B;O($),(B=G_($))==null||B.removeEventListener(f,M)};(F=G_($))==null||F.addEventListener(f,M)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const F=e1(o);l&&F.addEventListener("keydown",A?N:k,A),b&&F.addEventListener(f,C?D:O,C);let M=[];return p&&(Ei(s)&&(M=Zp(s)),Ei(o)&&(M=M.concat(Zp(o))),!Ei(i)&&i&&i.contextElement&&(M=M.concat(Zp(i.contextElement)))),M=M.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?N:k,A),b&&F.removeEventListener(f,C?D:O,C),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,T,S,k,A,N,O,C,D]),I.useEffect(()=>{w.current=!1},[b,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[bVe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[_Ve[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function EVe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=pbe(),s=I.useRef({}),[o]=I.useState(()=>hVe()),a=VW()!=null,[u,l]=I.useState(r.reference),c=Fg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function WW(e){e===void 0&&(e={});const{nodeId:t}=e,n=EVe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=HW();sh(()=>{c&&(f.current=c)},[c]);const h=sVe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=Ei(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(Ei(b)||b===null)&&(f.current=b,o(b)),(Ei(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ei(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return sh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function xVe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=Bu(o);function h(){!n&&Ol(o)&&o===eoe(e1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){cze(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=G_(d.nativeEvent);if(u&&Ei(h))try{if(fze()&&dze())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!yze(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ei(h)&&h.hasAttribute(qW("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=eoe(o?o.ownerDocument:document);!h&&g===o||wC((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||wC(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const poe="active",moe="selected";function Dj(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[poe]:o,[moe]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[poe,moe].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function SVe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>Dj(s,e,"reference"),t),r=I.useCallback(s=>Dj(s,e,"floating"),t),i=I.useCallback(s=>Dj(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const TVe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function AVe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=TVe.get(o))!=null?n:o,u=pbe(),c=VW()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function ybe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function goe(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function yoe(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const CVe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function IVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[CVe[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...goe(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...goe(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...yoe(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...yoe(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const GW=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Bh();return s?_.jsx("div",{...l,ref:c,style:{...u,...IVe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});GW.displayName="@mantine/core/FloatingArrow";const[kVe,vbe]=fo("Popover component was not found in the tree");function yL({children:e,active:t=!0,refProp:n="ref"}){const r=pUe(t),i=ds(r,e==null?void 0:e.ref);return Ay(e)?I.cloneElement(e,{[n]:i}):e}function bbe(e){return _.jsx(PW,{tabIndex:-1,"data-autofocus":!0,...e})}yL.displayName="@mantine/core/FocusTrap";bbe.displayName="@mantine/core/FocusTrapInitialFocus";yL.InitialFocus=bbe;function RVe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const NVe={},_be=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",NVe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Cb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:RVe(i),EW(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:XI.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});_be.displayName="@mantine/core/Portal";function Wx({withinPortal:e=!0,children:t,...n}){return e?_.jsx(_be,{...n,children:t}):_.jsx(_.Fragment,{children:t})}Wx.displayName="@mantine/core/OptionalPortal";const vT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),bN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...vT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...vT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...vT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...vT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...vT("top"),common:{transformOrigin:"top right"}}},voe={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function PVe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in bN?{transitionProperty:bN[e].transitionProperty,...i,...bN[e].common,...bN[e][voe[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[voe[t]]}}function DVe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=hs(),l=fL(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{h2.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return _h(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function zm({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=DVe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(PVe({transition:t,duration:f,state:d,timingFunction:h}))})}zm.displayName="@mantine/core/Transition";var wbe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const OVe={},YW=Me((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",OVe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=vbe(),h=x1e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=ds(t,d.floating);return d.disabled?null:_.jsx(Wx,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(zm,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(yL,{active:d.trapFocus,children:_.jsxs(me,{...p,...f,variant:u,ref:m,onKeyDownCapture:tUe(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(GW,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});YW.classes=wbe;YW.displayName="@mantine/core/PopoverDropdown";const $Ve={refProp:"ref",popupType:"dialog"},Ebe=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",$Ve,e);if(!Ay(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=vbe(),u=ds(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:Qi(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});Ebe.displayName="@mantine/core/PopoverTarget";function xbe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return Qze(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),_h(()=>{t.update()},r),_h(()=>{s(o=>o+1)},[e])}function MVe(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function LVe(e,t){const n=MVe(e.middlewares),r=[fbe(e.offset)];return n.shift&&r.push(zW(typeof n.shift=="boolean"?{limiter:uoe(),padding:5}:{limiter:uoe(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?UU():UU(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?zU():zU(n.inline)),r.push(dbe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(aVe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function FVe(e){const[t,n]=xs({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=WW({strategy:e.strategy,placement:e.position,middleware:LVe(e,()=>s)});return xbe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),_h(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),_h(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const jVe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:Xl("popover"),__staticSelector:"Popover",width:"max-content"},BVe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Ur(t),"--popover-shadow":_W(n)}});function No(e){var _e,ke,ze,ct,Ot,We;const t=xe("Popover",jVe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:T,clickOutsideEvents:S,trapFocus:A,onClose:C,onOpen:k,onChange:N,zIndex:O,radius:D,shadow:$,id:F,defaultOpened:M,__staticSelector:B,withRoles:U,disabled:H,returnFocus:P,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=dt({name:B,props:t,classes:wbe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:BVe}),ce=I.useRef(null),[de,he]=I.useState(null),[ve,Ie]=I.useState(null),{dir:be}=Bh(),Ke=xa(F),Ue=FVe({middlewares:c,width:l,position:ybe(be,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:N,onOpen:k,onClose:C,strategy:q});iUe(()=>b&&Ue.onClose(),S,[de,ve]);const yt=I.useCallback(ge=>{he(ge),Ue.floating.refs.setReference(ge)},[Ue.floating.refs.setReference]),it=I.useCallback(ge=>{Ie(ge),Ue.floating.refs.setFloating(ge)},[Ue.floating.refs.setFloating]);return _.jsx(kVe,{value:{returnFocus:P,disabled:H,controlled:Ue.controlled,reference:yt,floating:it,x:Ue.floating.x,y:Ue.floating.y,arrowX:(ze=(ke=(_e=Ue.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:ze.x,arrowY:(We=(Ot=(ct=Ue.floating)==null?void 0:ct.middlewareData)==null?void 0:Ot.arrow)==null?void 0:We.y,opened:Ue.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:Ue.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:O,radius:D,shadow:$,closeOnEscape:T,onClose:Ue.onClose,onToggle:Ue.onToggle,getTargetId:()=>`${Ke}-target`,getDropdownId:()=>`${Ke}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}No.Target=Ebe;No.Dropdown=YW;No.displayName="@mantine/core/Popover";No.extend=e=>e;var Af={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const UVe=I.forwardRef(({className:e,...t},n)=>_.jsxs(me,{component:"span",className:Qi(Af.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Af.bar}),_.jsx("span",{className:Af.bar}),_.jsx("span",{className:Af.bar})]})),zVe=I.forwardRef(({className:e,...t},n)=>_.jsxs(me,{component:"span",className:Qi(Af.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:Af.dot}),_.jsx("span",{className:Af.dot}),_.jsx("span",{className:Af.dot})]})),VVe=I.forwardRef(({className:e,...t},n)=>_.jsx(me,{component:"span",className:Qi(Af.ovalLoader,e),...t,ref:n})),Sbe={bars:UVe,oval:VVe,dots:zVe},HVe={loaders:Sbe,type:"oval"},qVe=(e,{size:t,color:n})=>({root:{"--loader-size":tn(t,"loader-size"),"--loader-color":n?$r(n,e):void 0}}),Bc=Me((e,t)=>{const n=xe("Loader",HVe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=dt({name:"Loader",props:n,classes:Af,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:qVe});return p?_.jsx(me,{...g("root"),ref:t,...m,children:p}):_.jsx(me,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Bc.defaultLoaders=Sbe;Bc.classes=Af;Bc.displayName="@mantine/core/Loader";var vL={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const boe={orientation:"horizontal"},WVe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),KW=Me((e,t)=>{const n=xe("ActionIconGroup",boe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",boe,e),p=dt({name:"ActionIconGroup",props:n,classes:vL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:WVe,rootSelector:"group"});return _.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});KW.classes=vL;KW.displayName="@mantine/core/ActionIconGroup";const GVe={},YVe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":tn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Ur(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Nb=Us((e,t)=>{const n=xe("ActionIcon",GVe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...T}=n,S=dt({name:["ActionIcon",p],props:n,className:r,style:u,classes:vL,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:YVe});return _.jsxs(Es,{...S("root",{active:!v&&!l&&!b}),...T,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(zm,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(me,{component:"span",...S("loader",{style:A}),"aria-hidden":!0,children:_.jsx(Bc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(me,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});Nb.classes=vL;Nb.displayName="@mantine/core/ActionIcon";Nb.Group=KW;const Tbe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));Tbe.displayName="@mantine/core/CloseIcon";var Abe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const KVe={variant:"subtle"},XVe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":tn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Ur(n),"--cb-icon-size":Te(r)}}),Vm=Us((e,t)=>{const n=xe("CloseButton",KVe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=dt({name:"CloseButton",props:n,className:a,style:l,classes:Abe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:XVe});return _.jsxs(Es,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(Tbe,{}),i]})});Vm.classes=Abe;Vm.displayName="@mantine/core/CloseButton";function QVe(e){return I.Children.toArray(e).filter(Boolean)}var Cbe={root:"m_4081bf90"};const JVe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},ZVe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":as(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Ss=Me((e,t)=>{const n=xe("Group",JVe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=QVe(u),E=w.length,T=as(l??"md"),A={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},C=dt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:Cbe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:ZVe});return _.jsx(me,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Ss.classes=Cbe;Ss.displayName="@mantine/core/Group";var Ibe={root:"m_9814e45f"};const eHe={zIndex:Xl("modal")},tHe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Ad(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Ur(s),"--overlay-z-index":o==null?void 0:o.toString()}}),EC=Us((e,t)=>{const n=xe("Overlay",eHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=dt({name:"Overlay",props:n,classes:Ibe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tHe});return _.jsx(me,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});EC.classes=Ibe;EC.displayName="@mantine/core/Overlay";const[nHe,Hm]=fo("ModalBase component was not found in tree");function rHe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=fL()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function iHe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=xa(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=rHe({opened:n,transitionDuration:d});return C1e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),x1e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const kbe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:T,bodyMounted:S,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:k}=iHe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(Wx,{...c,withinPortal:l,children:_.jsx(nHe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:S,setTitleMounted:C,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(lL,{enabled:A&&f,...v,children:_.jsx(me,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||Xl("modal")).toString(),"--mb-shadow":_W(p),"--mb-padding":as(m)},children:d})})})})});function sHe(){const e=Hm();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var IE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const XW=I.forwardRef(({className:e,...t},n)=>{const r=sHe(),i=Hm();return _.jsx(me,{ref:n,...t,id:r,className:Qi({[IE.body]:!i.unstyled},e)})});XW.displayName="@mantine/core/ModalBaseBody";const QW=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=Hm();return _.jsx(Vm,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:Qi({[IE.close]:!i.unstyled},e),unstyled:i.unstyled})});QW.displayName="@mantine/core/ModalBaseCloseButton";const Rbe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=Hm();return _.jsx(zm,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:Qi({[IE.inner]:!a.unstyled},n.className),children:_.jsx(yL,{active:a.opened&&a.trapFocus,children:_.jsx(Vx,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:Qi({[IE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),JW=I.forwardRef(({className:e,...t},n)=>{const r=Hm();return _.jsx(me,{component:"header",ref:n,className:Qi({[IE.header]:!r.unstyled},e),...t})});JW.displayName="@mantine/core/ModalBaseHeader";const oHe={duration:200,timingFunction:"ease",transition:"fade"};function aHe(e){const t=Hm();return{...oHe,...t.transitionProps,...e}}const ZW=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=Hm(),o=aHe(t);return _.jsx(zm,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(EC,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});ZW.displayName="@mantine/core/ModalBaseOverlay";function uHe(){const e=Hm();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const eG=I.forwardRef(({className:e,...t},n)=>{const r=uHe(),i=Hm();return _.jsx(me,{component:"h2",ref:n,className:Qi({[IE.title]:!i.unstyled},e),...t,id:r})});eG.displayName="@mantine/core/ModalBaseTitle";function Nbe({children:e}){return _.jsx(_.Fragment,{children:e})}const[lHe,Gx]=Ux({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Uc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const _oe={},cHe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),bL=Me((e,t)=>{const n=xe("InputDescription",_oe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",_oe,n),p=Gx(),m=dt({name:["InputWrapper",c],props:n,classes:Uc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:cHe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});bL.classes=Uc;bL.displayName="@mantine/core/InputDescription";const fHe={},dHe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),_L=Me((e,t)=>{const n=xe("InputError",fHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=dt({name:["InputWrapper",c],props:n,classes:Uc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:dHe}),m=Gx(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});_L.classes=Uc;_L.displayName="@mantine/core/InputError";const woe={labelElement:"label"},hHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0}}),wL=Me((e,t)=>{const n=xe("InputLabel",woe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",woe,n),b=dt({name:["InputWrapper",m],props:n,classes:Uc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:hHe}),w=Gx(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(me,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});wL.classes=Uc;wL.displayName="@mantine/core/InputLabel";const Eoe={},tG=Me((e,t)=>{const n=xe("InputPlaceholder",Eoe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Eoe,n),p=dt({name:["InputPlaceholder",l],props:n,classes:Uc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(me,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});tG.classes=Uc;tG.displayName="@mantine/core/InputPlaceholder";function pHe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const mHe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},gHe=(e,{size:t})=>({label:{"--input-label-size":uo(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${uo(t)} - ${Te(2)})`}}),nG=Me((e,t)=>{const n=xe("InputWrapper",mHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:T,id:S,required:A,__stylesApiProps:C,mod:k,...N}=n,O=dt({name:["InputWrapper",f],props:C||n,classes:Uc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gHe}),D={size:l,variant:c,__staticSelector:f},$=xa(S),F=typeof T=="boolean"?T:A,M=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,H=!!m&&typeof m!="boolean",P=!!g,z=`${H?M:""} ${P?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&_.jsx(wL,{labelElement:w,id:j,htmlFor:U,required:F,...D,...y,children:p},"label"),G=P&&_.jsx(bL,{...v,...D,size:(v==null?void 0:v.size)||D.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(I.Fragment,{children:d(E)},"input"),ce=H&&I.createElement(_L,{...b,...D,size:(b==null?void 0:b.size)||D.size,key:"error",id:(b==null?void 0:b.id)||M},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(lHe,{value:{getStyles:O,describedBy:W,inputId:U,labelId:j,...pHe(h,{hasDescription:P,hasError:H})},children:_.jsx(me,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...O("root"),...N,children:de})})});nG.classes=Uc;nG.displayName="@mantine/core/InputWrapper";const yHe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},vHe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":tn(t.size,"input-height"),"--input-fz":uo(t.size),"--input-radius":t.radius===void 0?void 0:Ur(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?tn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),hi=Us((e,t)=>{const n=xe("Input",yHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:S,vars:A,pointer:C,multiline:k,radius:N,id:O,withAria:D,withErrorStyles:$,mod:F,inputSize:M,...B}=n,{styleProps:U,rest:H}=kb(B),P=Gx(),z={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=dt({name:["Input",l],props:c||n,classes:Uc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:A,varsResolver:vHe}),j=D?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||O}:{};return _.jsxs(me,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:C,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(me,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:M,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});hi.classes=Uc;hi.Wrapper=nG;hi.Label=wL;hi.Error=_L;hi.Description=bL;hi.Placeholder=tG;hi.displayName="@mantine/core/Input";function Pbe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,vars:C,mod:k,...N}=r,{styleProps:O,rest:D}=kb(N),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,id:v,mod:k,...y};return{...D,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...O},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const bHe={__staticSelector:"InputBase",withAria:!0},zc=Us((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Pbe("InputBase",bHe,e);return _.jsx(hi.Wrapper,{...r,children:_.jsx(hi,{...n,...i,ref:t})})});zc.classes={...hi.classes,...hi.Wrapper.classes};zc.displayName="@mantine/core/InputBase";const _He={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Dbe={root:"m_8bffd616"};const wHe={},Nt=Us((e,t)=>{const n=xe("Flex",wHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=dt({name:"Flex",classes:Dbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=hs(),b=JI(),w=L1e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:_He});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(Ib,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(me,{ref:t,...y("root",{className:b,style:Ty(w.inlineStyles)}),...g})]})});Nt.classes=Dbe;Nt.displayName="@mantine/core/Flex";function EHe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function xHe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{EHe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),TUe(()=>{R1e()!=="test"&&o(!0)},20,{autoInvoke:!0}),AUe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Obe={root:"m_96b553a6"};const SHe={},THe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),rG=Me((e,t)=>{const n=xe("FloatingIndicator",SHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=dt({name:"FloatingIndicator",classes:Obe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:THe}),g=I.useRef(null),{initialized:y,hidden:v}=xHe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=ds(t,g);return!l||!c?null:_.jsx(me,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});rG.displayName="@mantine/core/FloatingIndicator";rG.classes=Obe;const[AHe,iG]=fo("Accordion component was not found in the tree");function kE({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}kE.displayName="@mantine/core/AccordionChevron";const[CHe,$be]=fo("Accordion.Item component was not found in the tree");var ek={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const IHe={},sG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",IHe,e),{value:m}=$be(),g=iG(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(Es,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:bW({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(me,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(me,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});sG.displayName="@mantine/core/AccordionControl";sG.classes=ek;const kHe={},oG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",kHe,e),c=iG();return _.jsx(CHe,{value:{value:a},children:_.jsx(me,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});oG.displayName="@mantine/core/AccordionItem";oG.classes=ek;const RHe={},aG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",RHe,e),{value:l}=$be(),c=iG();return _.jsx(pL,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});aG.displayName="@mantine/core/AccordionPanel";aG.classes=ek;const NHe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(kE,{})},PHe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Te(n),"--accordion-radius":r===void 0?void 0:Ur(r)}});function bu(e){const t=xe("Accordion",NHe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:T,...S}=t,A=xa(h),[C,k]=xs({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=$=>Array.isArray(C)?C.includes($):$===C,O=$=>{const F=Array.isArray(C)?C.includes($)?C.filter(M=>M!==$):[...C,$]:$===C?null:$;k(F)},D=dt({name:"Accordion",classes:ek,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:PHe});return _.jsx(AHe,{value:{isItemActive:N,onChange:O,getControlId:NO(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:NO(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:D,variant:E,unstyled:o},children:_.jsx(me,{...D("root"),id:A,...S,variant:E,"data-accordion":!0,children:u})})}const DHe=e=>e;bu.extend=DHe;bu.classes=ek;bu.displayName="@mantine/core/Accordion";bu.Item=oG;bu.Panel=aG;bu.Control=sG;bu.Chevron=kE;var Mbe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const OHe={},$He=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Ur(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},Yx=Me((e,t)=>{const n=xe("Alert",OHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=dt({name:"Alert",classes:Mbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:$He}),T=xa(h),S=f&&`${T}-title`||void 0,A=`${T}-body`;return _.jsx(me,{id:T,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":S,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:S,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(Vm,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});Yx.classes=Mbe;Yx.displayName="@mantine/core/Alert";var Lbe={root:"m_b6d8b162"};function MHe(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const LHe={inherit:!1},FHe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":uo(i),"--text-lh":E1e(i),"--text-gradient":t==="gradient"?OU(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?$r(s,e):void 0}}),et=Us((e,t)=>{const n=xe("Text",LHe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=dt({name:["Text",l],props:n,classes:Lbe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:FHe});return _.jsx(me,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":MHe(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});et.classes=Lbe;et.displayName="@mantine/core/Text";var Fbe={root:"m_849cf0da"};const jHe={underline:"hover"},Pb=Us((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",jHe,e);return _.jsx(et,{component:"a",ref:t,className:Qi({[Fbe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Pb.classes=Fbe;Pb.displayName="@mantine/core/Anchor";const[BHe,Kx]=fo("AppShell was not found in tree");var ky={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const UHe={},uG=Me((e,t)=>{const n=xe("AppShellAside",UHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Kx();return h.disabled?null:_.jsx(me,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});uG.classes=ky;uG.displayName="@mantine/core/AppShellAside";const zHe={},lG=Me((e,t)=>{var p;const n=xe("AppShellFooter",zHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Kx();return h.disabled?null:_.jsx(me,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:Qi({[lL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});lG.classes=ky;lG.displayName="@mantine/core/AppShellFooter";const VHe={},cG=Me((e,t)=>{var p;const n=xe("AppShellHeader",VHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Kx();return h.disabled?null:_.jsx(me,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:Qi({[lL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});cG.classes=ky;cG.displayName="@mantine/core/AppShellHeader";const HHe={},fG=Me((e,t)=>{const n=xe("AppShellMain",HHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Kx();return _.jsx(me,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});fG.classes=ky;fG.displayName="@mantine/core/AppShellMain";function tk(e){return typeof e=="object"?e.base:e}function nk(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function rk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function qHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),nk(s)){const f=Te(tk(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(rk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=wW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function WHe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(nk(r)){const o=Te(tk(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}rk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function GHe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(nk(r)){const o=Te(tk(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}rk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Xr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function YHe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),nk(s)){const f=Te(tk(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(rk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Xr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=wW(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function Oj(e){return Number(e)===0?"0px":as(e)}function KHe({padding:e,baseStyles:t,minMediaStyles:n}){nk(e)&&(t["--app-shell-padding"]=Oj(tk(e))),rk(e)&&(e.base&&(t["--app-shell-padding"]=Oj(e.base)),Xr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=Oj(e[r]))}))}function XHe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};YHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),qHe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),GHe({baseStyles:u,minMediaStyles:o,header:t}),WHe({baseStyles:u,minMediaStyles:o,footer:n}),KHe({baseStyles:u,minMediaStyles:o,padding:i});const l=bC(Xr(o),s).map(d=>({query:`(min-width: ${RO(d.px)})`,styles:o[d.value]})),c=bC(Xr(a),s).map(d=>({query:`(max-width: ${RO(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function QHe({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=hs(),o=Cy(),{media:a,baseStyles:u}=XHe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(Ib,{media:a,styles:u,selector:o.cssVariablesSelector})}const JHe={},dG=Me((e,t)=>{const n=xe("AppShellNavbar",JHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=Kx();return h.disabled?null:_.jsx(me,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});dG.classes=ky;dG.displayName="@mantine/core/AppShellNavbar";const ZHe={},hG=Us((e,t)=>{const n=xe("AppShellSection",ZHe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=Kx();return _.jsx(me,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});hG.classes=ky;hG.displayName="@mantine/core/AppShellSection";function eqe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return C1e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Cb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const tqe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:Xl("app")},nqe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),di=Me((e,t)=>{const n=xe("AppShell",tqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...T}=n,S=dt({name:"AppShell",classes:ky,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nqe}),A=eqe({disabled:y,transitionDuration:d});return _.jsxs(BHe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx(QHe,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(me,{ref:t,...S("root"),mod:[{resizing:A,layout:g,disabled:y},E],...T})]})});di.classes=ky;di.displayName="@mantine/core/AppShell";di.Navbar=dG;di.Header=cG;di.Main=fG;di.Aside=uG;di.Footer=lG;di.Section=hG;function jbe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>jbe(t))}:e}function Bbe(e){return e?e.map(t=>jbe(t)):[]}function pG(e){return e.reduce((t,n)=>"group"in n?{...t,...pG(n.items)}:(t[n.value]=n,t),{})}var Yu={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const rqe={error:null},iqe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":tn(t,"combobox-chevron-size")}}),mG=Me((e,t)=>{const n=xe("ComboboxChevron",rqe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=dt({name:"ComboboxChevron",classes:Yu,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:iqe,rootSelector:"chevron"});return _.jsx(me,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});mG.classes=Yu;mG.displayName="@mantine/core/ComboboxChevron";const[sqe,Vc]=fo("Combobox component was not found in tree"),Ube=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(Vm,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Ube.displayName="@mantine/core/ComboboxClearButton";const oqe={},gG=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",oqe,e),u=Vc();return _.jsx(No.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});gG.classes=Yu;gG.displayName="@mantine/core/ComboboxDropdown";const aqe={refProp:"ref"},zbe=Me((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",aqe,e);if(Vc(),!Ay(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(No.Target,{ref:t,refProp:r,children:n})});zbe.displayName="@mantine/core/ComboboxDropdownTarget";const uqe={},yG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",uqe,e),u=Vc();return _.jsx(me,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});yG.classes=Yu;yG.displayName="@mantine/core/ComboboxEmpty";function vG({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Vc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const lqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Vbe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",lqe,e);if(!Ay(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Vc(),f=vG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:ds(t,c.store.targetRef,n==null?void 0:n.ref)})});Vbe.displayName="@mantine/core/ComboboxEventsTarget";const cqe={},bG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",cqe,e),u=Vc();return _.jsx(me,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});bG.classes=Yu;bG.displayName="@mantine/core/ComboboxFooter";const fqe={},_G=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",fqe,e),c=Vc();return _.jsxs(me,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});_G.classes=Yu;_G.displayName="@mantine/core/ComboboxGroup";const dqe={},wG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",dqe,e),u=Vc();return _.jsx(me,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});wG.classes=Yu;wG.displayName="@mantine/core/ComboboxHeader";function Hbe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Hbe.displayName="@mantine/core/ComboboxHiddenInput";const hqe={},EG=Me((e,t)=>{const n=xe("ComboboxOption",hqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Vc(),v=I.useId(),b=l||v;return _.jsx(me,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});EG.classes=Yu;EG.displayName="@mantine/core/ComboboxOption";const pqe={},xG=Me((e,t)=>{const n=xe("ComboboxOptions",pqe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Vc(),d=xa(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(me,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});xG.classes=Yu;xG.displayName="@mantine/core/ComboboxOptions";const mqe={withAriaAttributes:!0,withKeyboardNavigation:!0},SG=Me((e,t)=>{const n=xe("ComboboxSearch",mqe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Vc(),h=d.getStyles("search"),p=vG({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(hi,{ref:ds(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});SG.classes=Yu;SG.displayName="@mantine/core/ComboboxSearch";const gqe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},qbe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",gqe,e);if(!Ay(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Vc(),f=vG({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(No.Target,{ref:ds(t,c.store.targetRef),children:d})});qbe.displayName="@mantine/core/ComboboxTarget";function yqe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function vqe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function bqe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function TG({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=xs({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=I.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),b=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=M>=U.length?0:M<0?U.length-1:M;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),E=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===M);return w(U)}return w(0)},[w]),T=I.useCallback(()=>w(vqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=I.useCallback(()=>w(yqe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=I.useCallback(()=>w(bqe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=I.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var P;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=H,B!=null&&B.scrollIntoView&&((P=U[H])==null||P.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,b()},[b]),N=I.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),O=I.useCallback(M=>{l.current=M},[]),D=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:T,selectPreviousOption:S,resetSelectedOption:k,updateSelectedOptionIndex:C,listId:l.current,setListId:O,clickSelectedOption:N,searchRef:f,focusSearchInput:D,targetRef:d,focusTarget:$}}const _qe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},wqe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":uo(t),"--combobox-option-padding":tn(t,"combobox-option-padding")}});function Kn(e){const t=xe("Combobox",_qe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=TG(),y=o||g,v=dt({name:h||"Combobox",classes:Yu,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:wqe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(sqe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(No,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const Eqe=e=>e;Kn.extend=Eqe;Kn.classes=Yu;Kn.displayName="@mantine/core/Combobox";Kn.Target=qbe;Kn.Dropdown=gG;Kn.Options=xG;Kn.Option=EG;Kn.Search=SG;Kn.Empty=yG;Kn.Chevron=mG;Kn.Footer=bG;Kn.Header=wG;Kn.EventsTarget=Vbe;Kn.DropdownTarget=zbe;Kn.Group=_G;Kn.ClearButton=Ube;Kn.HiddenInput=Hbe;var Wbe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const Gbe=Wbe,EL=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const T=dt({name:e,props:t,className:n,style:y,classes:Wbe,classNames:r,styles:i,unstyled:s});return _.jsx(me,{...T("root"),ref:E,__vars:{"--label-fz":uo(d),"--label-lh":tn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(me,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(me,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(hi.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(hi.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});EL.displayName="@mantine/core/InlineInput";const Ybe=I.createContext(null),xqe=Ybe.Provider,Kbe=()=>I.useContext(Ybe),[Sqe,Tqe]=Ux();var Xbe={card:"m_26775b0a"};const Aqe={withBorder:!0},Cqe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),AG=Me((e,t)=>{const n=xe("CheckboxCard",Aqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=dt({name:"CheckboxCard",classes:Xbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Cqe,rootSelector:"card"}),g=Kbe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(Sqe,{value:{checked:y},children:_.jsx(Es,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});AG.displayName="@mantine/core/CheckboxCard";AG.classes=Xbe;function CG({children:e,role:t}){const n=Gx();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const Iqe={},IG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",Iqe,e),[c,f]=xs({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(xqe,{value:{value:c,onChange:d,size:s},children:_.jsx(hi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(CG,{role:"group",children:a})})})});IG.classes=hi.Wrapper.classes;IG.displayName="@mantine/core/CheckboxGroup";function Qbe({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Jbe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(Qbe,{...t})}var Zbe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const kqe={icon:Jbe},Rqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=jh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):zx(o,e)?Iy({color:n,theme:e,autoContrast:o}):void 0}}},kG=Me((e,t)=>{const n=xe("CheckboxIndicator",kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=dt({name:"CheckboxIndicator",classes:Zbe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Rqe,rootSelector:"indicator"}),T=Tqe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(me,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});kG.displayName="@mantine/core/CheckboxIndicator";kG.classes=Zbe;var e_e={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const Nqe={labelPosition:"right",icon:Jbe},Pqe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=jh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Ur(t),"--checkbox-color":s==="outline"?u:$r(n,e),"--checkbox-icon-color":i?$r(i,e):zx(o,e)?Iy({color:n,theme:e,autoContrast:o}):void 0}}},El=Me((e,t)=>{const n=xe("Checkbox",Nqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:S,rootRef:A,iconColor:C,onChange:k,autoContrast:N,mod:O,...D}=n,$=Kbe(),F=d||($==null?void 0:$.size),M=S,B=dt({name:"Checkbox",props:n,classes:e_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Pqe}),{styleProps:U,rest:H}=kb(D),P=xa(f),z=$?{checked:$.value.includes(H.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return _.jsx(EL,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:A,mod:O,...U,...p,children:_.jsxs(me,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(me,{component:"input",id:P,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:T},...B("input",{focusable:!0,variant:E}),onChange:k,...H,...z,type:"checkbox"}),_.jsx(M,{indeterminate:T,...B("icon")})]})})});El.classes={...e_e,...Gbe};El.displayName="@mantine/core/Checkbox";El.Group=IG;El.Indicator=kG;El.Card=AG;function RE(e){return"group"in e}function t_e({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;RE(o)&&i.push({group:o.group,items:t_e({options:o.items,search:t,limit:n-i.length})}),RE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function Dqe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function n_e(e,t=new Set){if(Array.isArray(e))for(const n of e)if(RE(n))n_e(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function Oqe(e,t){return Array.isArray(e)?e.includes(t):e===t}function r_e({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!RE(e)){const a=Oqe(n,e.value),u=t&&a&&_.jsx(Qbe,{className:Yu.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Kn.Option,{value:e.value,disabled:e.disabled,className:Qi({[Yu.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(r_e,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Kn.Group,{label:e.group,children:o})}function i_e({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){n_e(e);const b=typeof i=="string"?(r||t_e)({options:e,search:u?i:"",limit:s??1/0}):e,w=Dqe(b),E=b.map(T=>_.jsx(r_e,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},RE(T)?T.group:T.value));return _.jsx(Kn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Kn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(pm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Kn.Empty,{children:d})]})})}var s_e={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const $qe={},Mqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":tn(s,"badge-height"),"--badge-padding-x":tn(s,"badge-padding-x"),"--badge-fz":tn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Ur(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?$r(n,e):void 0}}},g0=Us((e,t)=>{const n=xe("Badge",$qe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=dt({name:"Badge",props:n,classes:s_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Mqe});return _.jsxs(me,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});g0.classes=s_e;g0.displayName="@mantine/core/Badge";var o_e={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const Lqe={},Fqe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?$r(t,e):void 0,"--burger-size":tn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),RG=Me((e,t)=>{const n=xe("Burger",Lqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=dt({name:"Burger",classes:o_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Fqe});return _.jsxs(Es,{...p("root"),ref:t,...h,children:[_.jsx(me,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});RG.classes=o_e;RG.displayName="@mantine/core/Burger";var xL={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const xoe={orientation:"horizontal"},jqe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),NG=Me((e,t)=>{const n=xe("ButtonGroup",xoe,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",xoe,e),p=dt({name:"ButtonGroup",props:n,classes:xL,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:jqe,rootSelector:"group"});return _.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});NG.classes=xL;NG.displayName="@mantine/core/ButtonGroup";const Bqe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},Uqe={},zqe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":tn(s,"button-height"),"--button-padding-x":tn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?uo(s.replace("compact-","")):uo(s),"--button-radius":t===void 0?void 0:Ur(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},on=Us((e,t)=>{const n=xe("Button",Uqe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:T,...S}=n,A=dt({name:"Button",props:n,classes:xL,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:zqe}),C=!!l,k=!!c;return _.jsxs(Es,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":k},T],...S,children:[_.jsx(zm,{mounted:!!p,transition:Bqe,duration:150,children:N=>_.jsx(me,{component:"span",...A("loader",{style:N}),"aria-hidden":!0,children:_.jsx(Bc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(me,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(me,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(me,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});on.classes=xL;on.displayName="@mantine/core/Button";on.Group=NG;const[Vqe,Hqe]=fo("Card component was not found in tree");var PG={root:"m_e615b15f",section:"m_599a2148"};const qqe={},SL=Us((e,t)=>{const n=xe("CardSection",qqe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=Hqe();return _.jsx(me,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});SL.classes=PG;SL.displayName="@mantine/core/CardSection";const Wqe={},Gqe=(e,{padding:t})=>({root:{"--card-padding":as(t)}}),Db=Us((e,t)=>{const n=xe("Card",Wqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=dt({name:"Card",props:n,classes:PG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Gqe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===SL?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(Vqe,{value:{getStyles:d},children:_.jsx(Vx,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Db.classes=PG;Db.displayName="@mantine/core/Card";Db.Section=SL;var a_e={root:"m_4451eb3a"};const Yqe={},ym=Us((e,t)=>{const n=xe("Center",Yqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=dt({name:"Center",props:n,classes:a_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(me,{ref:t,mod:[{inline:l},c],...d("root"),...f})});ym.classes=a_e;ym.displayName="@mantine/core/Center";var u_e={root:"m_b183c0a2"};const Kqe={},Xqe=(e,{color:t})=>({root:{"--code-bg":t?$r(t,e):void 0}}),fA=Me((e,t)=>{const n=xe("Code",Kqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=dt({name:"Code",props:n,classes:u_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Xqe});return _.jsx(me,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});fA.classes=u_e;fA.displayName="@mantine/core/Code";var l_e={root:"m_7485cace"};const Qqe={},Jqe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:tn(t,"container-size")}}),Rc=Me((e,t)=>{const n=xe("Container",Qqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=dt({name:"Container",classes:l_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jqe});return _.jsx(me,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Rc.classes=l_e;Rc.displayName="@mantine/core/Container";var c_e={root:"m_3eebeb36",label:"m_9e365f20"};const Zqe={orientation:"horizontal"},eWe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?$r(t,e):void 0,"--divider-border-style":n,"--divider-size":tn(r,"divider-size")}}),NE=Me((e,t)=>{const n=xe("Divider",Zqe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=dt({name:"Divider",classes:c_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eWe});return _.jsx(me,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(me,{component:"span",mod:{position:d},...m("label"),children:f})})});NE.classes=c_e;NE.displayName="@mantine/core/Divider";const[tWe,Xx]=fo("Drawer component was not found in tree");var qm={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const nWe={},TL=Me((e,t)=>{const n=xe("DrawerBody",nWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return _.jsx(XW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});TL.classes=qm;TL.displayName="@mantine/core/DrawerBody";const rWe={},AL=Me((e,t)=>{const n=xe("DrawerCloseButton",rWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return _.jsx(QW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});AL.classes=qm;AL.displayName="@mantine/core/DrawerCloseButton";const iWe={},CL=Me((e,t)=>{const n=xe("DrawerContent",iWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=Xx(),d=f.scrollAreaComponent||Nbe;return _.jsx(Rbe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});CL.classes=qm;CL.displayName="@mantine/core/DrawerContent";const sWe={},IL=Me((e,t)=>{const n=xe("DrawerHeader",sWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return _.jsx(JW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});IL.classes=qm;IL.displayName="@mantine/core/DrawerHeader";const oWe={},kL=Me((e,t)=>{const n=xe("DrawerOverlay",oWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return _.jsx(ZW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});kL.classes=qm;kL.displayName="@mantine/core/DrawerOverlay";function aWe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function uWe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const lWe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},cWe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},fWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xl("modal"),position:"left"},dWe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":tn(n,"drawer-size"),"--drawer-flex":uWe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":aWe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),RL=Me((e,t)=>{const n=xe("DrawerRoot",fWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Bh(),m=dt({name:"Drawer",classes:qm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:dWe}),g=(p==="rtl"?cWe:lWe)[c];return _.jsx(tWe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(kbe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});RL.classes=qm;RL.displayName="@mantine/core/DrawerRoot";const hWe={},NL=Me((e,t)=>{const n=xe("DrawerTitle",hWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Xx();return _.jsx(eG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});NL.classes=qm;NL.displayName="@mantine/core/DrawerTitle";const pWe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xl("modal"),withOverlay:!0,withCloseButton:!0},Uh=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",pWe,e),l=!!n||s;return _.jsxs(RL,{ref:t,...u,children:[r&&_.jsx(kL,{...i}),_.jsxs(CL,{children:[l&&_.jsxs(IL,{children:[n&&_.jsx(NL,{children:n}),s&&_.jsx(AL,{...o})]}),_.jsx(TL,{children:a})]})]})});Uh.classes=qm;Uh.displayName="@mantine/core/Drawer";Uh.Root=RL;Uh.Overlay=kL;Uh.Content=CL;Uh.Body=TL;Uh.Header=IL;Uh.Title=NL;Uh.CloseButton=AL;function mWe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[gWe,f_e]=fo("Grid component was not found in tree"),HU=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,Soe=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":HU(e,t),Toe=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Aoe=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function yWe({span:e,order:t,offset:n,selector:r}){var d;const i=hs(),s=f_e(),a=Tf(e)===void 0?12:Tf(e),u=Ty({"--col-order":(d=Tf(t))==null?void 0:d.toString(),"--col-flex-grow":Toe(a,s.grow),"--col-flex-basis":HU(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":Soe(a,s.columns,s.grow),"--col-offset":Aoe(Tf(n),s.columns)}),l=Xr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Toe(e[p],s.grow),h[p]["--col-flex-basis"]=HU(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=Soe(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Aoe(n[p],s.columns)),h},{}),f=bC(Xr(l),i).filter(h=>Xr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(Ib,{styles:u,media:f,selector:r})}var DG={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const vWe={span:12},OG=Me((e,t)=>{const n=xe("GridCol",vWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=f_e(),h=JI();return _.jsxs(_.Fragment,{children:[_.jsx(yWe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(me,{ref:t,...d.getStyles("col",{className:Qi(i,h),style:s,classNames:r,styles:o}),...f})]})});OG.classes=DG;OG.displayName="@mantine/core/GridCol";function bWe({gutter:e,selector:t}){const n=hs(),r=Ty({"--grid-gutter":as(Tf(e))}),i=Xr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=as(e[u])),a),{}),o=bC(Xr(i),n).filter(a=>Xr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(Ib,{styles:r,media:o,selector:t})}const _We={gutter:"md",grow:!1,columns:12},wWe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),za=Me((e,t)=>{const n=xe("Grid",_We,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=dt({name:"Grid",classes:DG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:wWe}),y=JI();return _.jsxs(gWe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(bWe,{selector:`.${y}`,...n}),_.jsx(me,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});za.classes=DG;za.displayName="@mantine/core/Grid";za.Col=OG;var d_e={root:"m_9e117634"};const EWe={},xWe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Ur(t),"--image-object-fit":n}}),Ry=Us((e,t)=>{const n=xe("Image",EWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=dt({name:"Image",classes:d_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:xWe});return g&&h?_.jsx(me,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(me,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Ry.classes=d_e;Ry.displayName="@mantine/core/Image";function qU(){return qU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},qU.apply(null,arguments)}function SWe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var TWe=I.useLayoutEffect,AWe=function(t){var n=I.useRef(t);return TWe(function(){n.current=t}),n},Coe=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},CWe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&Coe(r.current,null),r.current=n,n&&Coe(n,i)},[n])},Ioe={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},IWe=function(t){Object.keys(Ioe).forEach(function(n){t.style.setProperty(n,Ioe[n],"important")})},koe=IWe,ka=null,Roe=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function kWe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),ka||(ka=document.createElement("textarea"),ka.setAttribute("tabindex","-1"),ka.setAttribute("aria-hidden","true"),koe(ka)),ka.parentNode===null&&document.body.appendChild(ka);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;ka.style[h]=o[h]}),koe(ka),ka.value=t;var u=Roe(ka,e);ka.value=t,u=Roe(ka,e),ka.value="x";var l=ka.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Noe=function(){},RWe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},NWe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],PWe=!!document.documentElement.currentStyle,DWe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=RWe(NWe,n),i=r.boxSizing;if(i==="")return null;PWe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},OWe=DWe;function h_e(e,t,n){var r=AWe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var $We=function(t){h_e(window,"resize",t)},MWe=function(t){h_e(document.fonts,"loadingdone",t)},LWe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],FWe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Noe:o,u=t.onHeightChange,l=u===void 0?Noe:u,c=SWe(t,LWe),f=c.value!==void 0,d=I.useRef(null),h=CWe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:OWe(b);if(w){m.current=w;var E=kWe(w,b.value||b.placeholder||"x",s,i),T=E[0],S=E[1];p.current!==T&&(p.current=T,b.style.setProperty("height",T+"px","important"),l(T,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),$We(g),MWe(g),I.createElement("textarea",qU({},c,{onChange:y,ref:h}))},jWe=I.forwardRef(FWe);const BWe={},$G=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",BWe,e),u=n&&R1e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(zc,{component:u?jWe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});$G.classes=zc.classes;$G.displayName="@mantine/core/Textarea";const[UWe,zWe]=fo("List component was not found in tree");var MG={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const VWe={},LG=Me((e,t)=>{const n=xe("ListItem",VWe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=zWe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(me,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});LG.classes=MG;LG.displayName="@mantine/core/ListItem";const HWe={type:"unordered"},qWe=(e,{size:t,spacing:n})=>({root:{"--list-fz":uo(t),"--list-lh":E1e(t),"--list-spacing":as(n)}}),$f=Me((e,t)=>{const n=xe("List",HWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=dt({name:"List",classes:MG,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qWe});return _.jsx(UWe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(me,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});$f.classes=MG;$f.displayName="@mantine/core/List";$f.Item=LG;var p_e={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Poe={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:Xl("overlay")},WWe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),$l=Me((e,t)=>{const n=xe("LoadingOverlay",Poe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=hs(),g=dt({name:"LoadingOverlay",classes:p_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:WWe}),y={...Poe.overlayProps,...f};return _.jsx(zm,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(me,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Bc,{...g("loader"),unstyled:a,...c}),_.jsx(EC,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(EC,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});$l.classes=p_e;$l.displayName="@mantine/core/LoadingOverlay";const[GWe,ik]=fo("Menu component was not found in the tree");var Qx={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const YWe={},FG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",YWe,e),u=ik();return _.jsx(me,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});FG.classes=Qx;FG.displayName="@mantine/core/MenuDivider";const KWe={},jG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",KWe,e),f=I.useRef(null),d=ik(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=zp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=zp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(No.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:ds(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});jG.classes=Qx;jG.displayName="@mantine/core/MenuDropdown";const XWe={},BG=Us((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",XWe,e),p=ik(),m=hs(),{dir:g}=Bh(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=zp(b.onMouseLeave,()=>p.setHovered(-1)),E=zp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=zp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=zp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?jh({color:a,theme:m}):null;return _.jsxs(Es,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:ds(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:T,onKeyDown:bW({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});BG.classes=Qx;BG.displayName="@mantine/core/MenuItem";const QWe={},UG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",QWe,e),u=ik();return _.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});UG.classes=Qx;UG.displayName="@mantine/core/MenuLabel";const JWe={refProp:"ref"},m_e=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",JWe,e);if(!Ay(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=ik(),o=zp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=zp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=zp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(No.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});m_e.displayName="@mantine/core/MenuTarget";const ZWe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Su(e){const t=xe("Menu",ZWe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...T}=t,S=dt({name:"Menu",classes:Qx,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:k}]=rUe(),[N,O]=xs({value:s,defaultValue:o,finalValue:!1,onChange:u}),[D,$]=I.useState(!1),F=()=>{O(!1),$(!1),N&&(i==null||i())},M=()=>{O(!0),!N&&(r==null||r())},B=()=>{N?F():M()},{openDropdown:U,closeDropdown:H}=mWe({open:M,close:F,closeDelay:p,openDelay:h}),P=j=>nUe("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Bm({classNames:m,styles:g,props:t});return _h(()=>{k()},[N]),_.jsx(GWe,{value:{getStyles:S,opened:N,toggleDropdown:B,getItemIndex:P,hovered:A,setHovered:C,openedViaClick:D,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?M:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(No,{...T,opened:N,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Su.extend=e=>e;Su.classes=Qx;Su.displayName="@mantine/core/Menu";Su.Item=BG;Su.Label=UG;Su.Dropdown=jG;Su.Target=m_e;Su.Divider=FG;const[eGe,Jx]=fo("Modal component was not found in tree");var Wm={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const tGe={},PL=Me((e,t)=>{const n=xe("ModalBody",tGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Jx();return _.jsx(XW,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});PL.classes=Wm;PL.displayName="@mantine/core/ModalBody";const nGe={},DL=Me((e,t)=>{const n=xe("ModalCloseButton",nGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Jx();return _.jsx(QW,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});DL.classes=Wm;DL.displayName="@mantine/core/ModalCloseButton";const rGe={},OL=Me((e,t)=>{const n=xe("ModalContent",rGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=Jx(),f=c.scrollAreaComponent||Nbe;return _.jsx(Rbe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});OL.classes=Wm;OL.displayName="@mantine/core/ModalContent";const iGe={},$L=Me((e,t)=>{const n=xe("ModalHeader",iGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Jx();return _.jsx(JW,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});$L.classes=Wm;$L.displayName="@mantine/core/ModalHeader";const sGe={},ML=Me((e,t)=>{const n=xe("ModalOverlay",sGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Jx();return _.jsx(ZW,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});ML.classes=Wm;ML.displayName="@mantine/core/ModalOverlay";const oGe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xl("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},aGe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Ur(t),"--modal-size":tn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),LL=Me((e,t)=>{const n=xe("ModalRoot",oGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=dt({name:m,classes:Wm,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aGe});return _.jsx(eGe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(kbe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});LL.classes=Wm;LL.displayName="@mantine/core/ModalRoot";const uGe={},FL=Me((e,t)=>{const n=xe("ModalTitle",uGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=Jx();return _.jsx(eG,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});FL.classes=Wm;FL.displayName="@mantine/core/ModalTitle";const lGe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:Xl("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ki=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",lGe,e),c=!!n||s;return _.jsxs(LL,{ref:t,radius:u,...l,children:[r&&_.jsx(ML,{...i}),_.jsxs(OL,{radius:u,children:[c&&_.jsxs($L,{children:[n&&_.jsx(FL,{children:n}),s&&_.jsx(DL,{...o})]}),_.jsx(PL,{children:a})]})]})});Ki.classes=Wm;Ki.displayName="@mantine/core/Modal";Ki.Root=LL;Ki.Overlay=ML;Ki.Content=OL;Ki.Body=PL;Ki.Header=$L;Ki.Title=FL;Ki.CloseButton=DL;const[cGe,zG]=Ux(),[fGe,dGe]=Ux();var jL={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const hGe={},pGe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?tn(t):tn(n,"pg-gap")}}),VG=Me((e,t)=>{const n=xe("PillGroup",hGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=zG(),h=(d==null?void 0:d.size)||l||void 0,p=dt({name:"PillGroup",classes:jL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pGe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(fGe,{value:{size:h,disabled:c},children:_.jsx(me,{ref:t,size:h,...p("group"),...f})})});VG.classes=jL;VG.displayName="@mantine/core/PillGroup";const mGe={variant:"default"},gGe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":tn(n,"pill-fz"),"--pill-height":tn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Ur(t)}}),xC=Me((e,t)=>{const n=xe("Pill",mGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=dGe(),w=zG(),E=m||(b==null?void 0:b.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=dt({name:"Pill",classes:jL,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gGe,stylesCtx:{size:E}});return _.jsxs(me,{component:"span",ref:t,variant:T,size:E,...S("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...S("label"),children:c}),f&&_.jsx(Vm,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});xC.classes=jL;xC.displayName="@mantine/core/Pill";xC.Group=VG;var g_e={field:"m_45c4369d"};const yGe={type:"visible"},HG=Me((e,t)=>{const n=xe("PillsInputField",yGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=zG(),g=Gx(),y=dt({name:"PillsInputField",classes:g_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(me,{component:"input",ref:ds(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});HG.classes=g_e;HG.displayName="@mantine/core/PillsInputField";const vGe={},FO=Me((e,t)=>{const n=xe("PillsInput",vGe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(cGe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(zc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});FO.displayName="@mantine/core/PillsInput";FO.Field=HG;function bGe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(RE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const _Ge={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},qG=Me((e,t)=>{const n=xe("MultiSelect",_Ge,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:k,searchValue:N,defaultSearchValue:O,onSearchChange:D,readOnly:$,disabled:F,onFocus:M,onBlur:B,onPaste:U,radius:H,rightSection:P,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,maxValues:ke,searchable:ze,nothingFoundMessage:ct,withCheckIcon:Ot,checkIconPosition:We,hidePickedOptions:ge,withErrorStyles:ht,name:vt,form:pe,id:Ce,clearable:He,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Ln,hiddenInputValuesDivider:Ar,required:Fn,mod:cr,renderOption:gn,onRemove:Cn,onClear:nr,scrollAreaProps:rr,...Uo}=n,$i=xa(Ce),In=Bbe(m),Mi=pG(In),Cr=TG({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),Cr.resetSelectedOption()}}),{styleProps:ms,rest:{type:lp,autoComplete:ul,...pd}}=kb(Uo),[xr,Ii]=xs({value:c,defaultValue:f,finalValue:[],onChange:d}),[Qr,uu]=xs({value:N,defaultValue:O,finalValue:"",onChange:D}),Aa=dt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Ca,resolvedStyles:oe}=Bm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!ze&&(ot.preventDefault(),Cr.toggleDropdown()),ot.key==="Backspace"&&Qr.length===0&&xr.length>0&&(Cn==null||Cn(xr[xr.length-1]),Ii(xr.slice(0,xr.length-1)))},ae=xr.map((ot,St)=>{var Ht,On;return _.jsx(xC,{withRemoveButton:!$&&!((Ht=Mi[ot])!=null&&Ht.disabled),onRemove:()=>{Ii(xr.filter(jn=>ot!==jn)),Cn==null||Cn(ot)},unstyled:a,disabled:F,...Aa("pill"),children:((On=Mi[ot])==null?void 0:On.label)||ot},`${ot}-${St}`)});I.useEffect(()=>{w&&Cr.selectFirstOption()},[w,xr]);const Ae=He&&xr.length>0&&!F&&!$&&_.jsx(Kn.ClearButton,{size:l,...ut,onClear:()=>{nr==null||nr(),Ii([]),uu("")}}),Se=bGe({data:In,value:xr});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:Cr,classNames:Ca,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),uu(""),Cr.updateSelectedOptionIndex("selected"),xr.includes(Mi[ot].value)?(Ii(xr.filter(St=>St!==Mi[ot].value)),Cn==null||Cn(Mi[ot].value)):xr.length<ke&&Ii([...xr,Mi[ot].value])},...T,children:[_.jsx(Kn.DropdownTarget,{children:_.jsx(FO,{...ms,__staticSelector:"MultiSelect",classNames:Ca,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:P||Ae||_.jsx(Kn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Ae?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Ke,wrapperProps:Ue,description:yt,label:it,error:_e,multiline:!0,withErrorStyles:ht,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ae?"all":"none"),multiline:!0},pointer:!ze,onClick:()=>ze?Cr.openDropdown():Cr.toggleDropdown(),"data-expanded":Cr.dropdownOpened||void 0,id:$i,required:Fn,mod:cr,children:_.jsxs(xC.Group,{disabled:F,unstyled:a,...Aa("pillsList"),children:[ae,_.jsx(Kn.EventsTarget,{autoComplete:ul,children:_.jsx(FO.Field,{...pd,ref:t,id:$i,placeholder:Ln,type:!ze&&!Ln?"hidden":"visible",...Aa("inputField"),unstyled:a,onFocus:ot=>{M==null||M(ot),ze&&Cr.openDropdown()},onBlur:ot=>{B==null||B(ot),Cr.closeDropdown(),uu("")},onKeyDown:ee,value:Qr,onChange:ot=>{uu(ot.currentTarget.value),ze&&Cr.openDropdown(),w&&Cr.selectFirstOption()},disabled:F,readOnly:$||!ze,pointer:!ze})})]})})}),_.jsx(i_e,{data:ge?Se:In,hidden:$||F,filter:S,search:Qr,limit:A,hiddenWhenEmpty:!ze||!ct||ge&&Se.length===0&&Qr.trim().length===0,withScrollArea:C,maxDropdownHeight:k,filterOptions:ze,value:xr,checkIconPosition:We,withCheckIcon:Ot,nothingFoundMessage:ct,unstyled:a,labelId:it?`${$i}-label`:void 0,"aria-label":it?void 0:Uo["aria-label"],renderOption:gn,scrollAreaProps:rr})]}),_.jsx(Kn.HiddenInput,{name:vt,valuesDivider:Ar,value:xr,form:pe,disabled:F,..._t})]})});qG.classes={...zc.classes,...Kn.classes};qG.displayName="@mantine/core/MultiSelect";var y_e={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const wGe={},EGe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":as(r)}}},BL=Us((e,t)=>{const n=xe("NavLink",wGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:T,onKeyDown:S,autoContrast:A,mod:C,...k}=n,N=dt({name:"NavLink",props:n,classes:y_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EGe}),[O,D]=xs({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=M=>{h==null||h(M),$&&(M.preventDefault(),D(!O))};return _.jsxs(_.Fragment,{children:[_.jsxs(Es,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:M=>{S==null||S(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),D(!O))},unstyled:a,mod:[{disabled:m,active:p,expanded:O},C],...k,children:[g&&_.jsx(me,{component:"span",...N("section"),mod:{position:"left"},children:g}),_.jsxs(me,{...N("body"),mod:{"no-wrap":E},children:[_.jsx(me,{component:"span",...N("label"),children:v}),_.jsx(me,{component:"span",mod:{active:p},...N("description"),children:b})]}),($||y)&&_.jsx(me,{...N("section"),component:"span",mod:{rotate:O&&!w,position:"right"},children:$?y||_.jsx(kE,{...N("chevron")}):y})]}),_.jsx(pL,{in:O,...N("collapse"),children:_.jsx("div",{...N("children"),children:d})})]})});BL.classes=y_e;BL.displayName="@mantine/core/NavLink";var v_e={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const xGe={withCloseButton:!0},SGe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Ur(t),"--notification-color":n?$r(n,e):void 0}}),WG=Me((e,t)=>{const n=xe("Notification",xGe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:w,...E}=n,T=dt({name:"Notification",classes:v_e,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:SGe});return _.jsxs(me,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(Bc,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(me,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(Vm,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});WG.classes=v_e;WG.displayName="@mantine/core/Notification";function b_e(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var SC;(function(e){e.event="event",e.props="prop"})(SC||(SC={}));function jg(){}function TGe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function TC(e){return!!(e||"").match(/\d/)}function zw(e){return e==null}function AGe(e){return typeof e=="number"&&isNaN(e)}function __e(e){return zw(e)||AGe(e)||typeof e=="number"&&!isFinite(e)}function w_e(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function CGe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function IGe(e,t,n){var r=CGe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function kGe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function GG(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function RGe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function E_e(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Doe(e,t){return Array(t+1).join(e)}function x_e(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Doe("0",Math.abs(o))+i:o>=a?i=i+Doe("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Ooe(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=GG(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=E_e(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function Lv(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var S_e=TGe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),NGe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function PGe(e,t,n){return Math.min(Math.max(e,t),n)}function $j(e){return Math.max(e.selectionStart,e.selectionEnd)}function DGe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function OGe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function $Ge(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function MGe(e,t,n,r,i,s,o){o===void 0&&(o=$Ge);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function $oe(e,t,n,r){var i=e.length;if(t=PGe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function LGe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(TC(e[n])||TC(e[n-1]));return t}function T_e(e,t,n,r,i,s){s===void 0&&(s=jg);var o=kGe(function(p,m){var g,y;return __e(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?x_e(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(zw(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;zw(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function FGe(e){return e.replace(/[^0-9]/g,"")}function jGe(e){return e}function BGe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=jGe);var a=e.removeFormatting;a===void 0&&(a=FGe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=jg);var h=e.onKeyDown;h===void 0&&(h=jg);var p=e.onMouseUp;p===void 0&&(p=jg);var m=e.onFocus;m===void 0&&(m=jg);var g=e.onBlur;g===void 0&&(g=jg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=LGe);var b=e.isValidInputCharacter;b===void 0&&(b=TC);var w=e.isCharacterSame,E=b_e(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=T_e(y,u,!!l,o,a,c),S=T[0],A=S.formattedValue,C=S.numAsString,k=T[1],N=I.useRef(),O=I.useRef({formattedValue:A,numAsString:C}),D=function(_e,ke){O.current={formattedValue:_e.formattedValue,numAsString:_e.value},k(_e,ke)},$=I.useState(!1),F=$[0],M=$[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,P=function(_e,ke){var ze=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(ze)?void 0:ze}},z=function(_e,ke,ze){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(Lv(_e,ke),U.current.setCaretTimeout=setTimeout(function(){_e.value===ze&&_e.selectionStart!==ke&&Lv(_e,ke)},0))},W=function(_e,ke,ze){return $oe(_e,ke,v(_e),ze)},j=function(_e,ke,ze){var ct=v(ke),Ot=MGe(ke,A,_e,ze,ct,b,w);return Ot=$oe(ke,Ot,ct),Ot},q=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var ze=_e.input,ct=_e.source,Ot=_e.event,We=_e.numAsString,ge;if(ze){var ht=_e.inputValue||ze.value,vt=$j(ze);ze.value=ke,ge=j(ht,ke,vt),ge!==void 0&&z(ze,ge,ke)}ke!==A&&D(P(ke,We),{event:Ot,source:ct})};I.useEffect(function(){var _e=O.current,ke=_e.formattedValue,ze=_e.numAsString;(A!==ke||C!==ze)&&D(P(A,C),{event:void 0,source:SC.props})},[A,C]);var G=B.current?$j(B.current):void 0,ne=typeof window<"u"?I.useLayoutEffect:I.useEffect;ne(function(){var _e=B.current;if(A!==O.current.formattedValue&&_e){var ke=j(O.current.formattedValue,A,G);_e.value=A,z(_e,ke,A)}},[A]);var ce=function(_e,ke,ze){var ct=ke.target,Ot=N.current?NGe(N.current,ct.selectionEnd):S_e(A,_e),We=Object.assign(Object.assign({},Ot),{lastValue:A}),ge=a(_e,We),ht=H(ge);if(ge=a(ht,void 0),f&&!f(P(ht,ge))){var vt=ke.target,pe=$j(vt),Ce=j(_e,A,pe);return vt.value=A,z(vt,Ce,A),!1}return q({formattedValue:ht,numAsString:ge,inputValue:_e,event:ke,source:ze,input:ke.target}),!0},de=function(_e,ke){ke===void 0&&(ke=0);var ze=_e.selectionStart,ct=_e.selectionEnd;N.current={selectionStart:ze,selectionEnd:ct+ke}},he=function(_e){var ke=_e.target,ze=ke.value,ct=ce(ze,_e,SC.event);ct&&d(_e),N.current=void 0},ve=function(_e){var ke=_e.target,ze=_e.key,ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge;ze==="ArrowLeft"||ze==="Backspace"?ge=Math.max(ct-1,0):ze==="ArrowRight"?ge=Math.min(ct+1,We.length):ze==="Delete"&&(ge=ct);var ht=0;ze==="Delete"&&ct===Ot&&(ht=1);var vt=ze==="ArrowLeft"||ze==="ArrowRight";if(ge===void 0||ct!==Ot&&!vt){h(_e),de(ke,ht);return}var pe=ge;if(vt){var Ce=ze==="ArrowLeft"?"left":"right";pe=W(We,ge,Ce),pe!==ge&&_e.preventDefault()}else ze==="Delete"&&!b(We[ge])?pe=W(We,ge,"right"):ze==="Backspace"&&!b(We[ge])&&(pe=W(We,ge,"left"));pe!==ge&&z(ke,pe,We),h(_e),de(ke,ht)},Ie=function(_e){var ke=_e.target,ze=function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;if(We===void 0&&(We=""),ct===Ot){var ge=W(We,ct);ge!==ct&&z(ke,ge,We)}};ze(),requestAnimationFrame(function(){ze()}),p(_e),de(ke)},be=function(_e){_e.persist&&_e.persist();var ke=_e.target,ze=_e.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Ot=ke.selectionEnd,We=ke.value;We===void 0&&(We="");var ge=W(We,ct);ge!==ct&&!(ct===0&&Ot===We.length)&&z(ke,ge,We),m(Object.assign(Object.assign({},_e),{currentTarget:ze}))},0)},Ke=function(_e){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(_e)},Ue=F&&DGe()?"numeric":void 0,yt=Object.assign({inputMode:Ue},E,{type:t,value:A,onChange:he,onKeyDown:ve,onMouseUp:Ie,onFocus:be,onBlur:Ke});if(n==="text")return i?_r.createElement(_r.Fragment,null,i(A,E)||null):_r.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var it=r;return _r.createElement(it,Object.assign({},yt,{ref:s}))}return _r.createElement("input",Object.assign({},yt,{ref:s}))}function Moe(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=UL(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=GG(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=E_e(p,n,!!r)),l&&(h=IGe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function UL(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function UGe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function zGe(e,t){return new RegExp("(^-)|[0-9]|"+w_e(e),"g")}function VGe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function HGe(e,t,n){var r;t===void 0&&(t=OGe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=UL(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(TC(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var P=!1,z=!1;s.startsWith("-")?P=!1:B.startsWith("--")?(P=!1,z=!0):o.startsWith("-")&&B.length===o.length?P=!1:B[0]==="-"&&(P=!0);var W=P?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:P}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,T=w.end,S=w.value,A=e.substring(c,f);e.length&&S.length&&(E>S.length-o.length||T<s.length)&&!(A&&o.startsWith(A))&&(e=S);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=UGe(b?"-"+e:e,i),e=(e.match(zGe(p))||[]).join("");var O=e.indexOf(p);e=e.replace(new RegExp(w_e(p),"g"),function(B,U){return U===O?".":""});var D=GG(e,i),$=D.beforeDecimal,F=D.afterDecimal,M=D.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=M?"-":""),e}function qGe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function WGe(e){var t=UL(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function GGe(e){e=WGe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=jg);var s=e.onBlur;s===void 0&&(s=jg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=b_e(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=UL(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return Moe(M,e)},b=function(M,B){return HGe(M,B,e)},w=zw(f)?c:f,E=d??VGe(w,l,t);zw(f)?zw(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var T=function(M){return __e(M)?M:(typeof M=="number"&&(M=x_e(M)),E&&typeof a=="number"?Ooe(M,a,!!u):M)},S=T_e(T(f),T(c),!!E,v,b,h),A=S[0],C=A.numAsString,k=A.formattedValue,N=S[1],O=function(M){var B=M.target,U=M.key,H=B.selectionStart,P=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&P<l.length){M.preventDefault();return}if(H!==P){i(M);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&Lv(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(Lv(B,H-1),M.preventDefault()):U==="Delete"&&z[H]===g&&M.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&Lv(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&Lv(B,H-1),U==="Delete"&&z[H]===W&&Lv(B,H+1),i(M)},D=function(M){var B=C;if(B.match(/\d/g)||(B=""),r||(B=RGe(B)),u&&a&&(B=Ooe(B,a,u)),B!==C){var U=Moe(B,e);N({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:M,source:SC.event})}s(M)},$=function(M){return M===g?!0:TC(M)},F=function(M){var B=M.currentValue,U=M.lastValue,H=M.formattedValue,P=M.currentValueIndex,z=M.formattedValueIndex,W=B[P],j=H[z],q=S_e(U,B),G=q.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:b,getCaretBoundary:function(M){return qGe(M,e)},onKeyDown:O,onBlur:D})}function YGe(e){var t=GGe(e);return _r.createElement(BGe,Object.assign({},t))}function Loe({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var WU={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const KGe=/^(0\.0*|-0(\.0*)?)$/,XGe=/^-?0\d+(\.\d+)?\.?$/;function QGe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function Foe(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const JGe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},ZGe=(e,{size:t})=>({controls:{"--ni-chevron-size":tn(t,"ni-chevron-size")}}),YG=Me((e,t)=>{const n=xe("NumberInput",JGe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:T,onKeyDownCapture:S,handlersRef:A,startValue:C,disabled:k,rightSectionPointerEvents:N,allowNegative:O,readOnly:D,size:$,rightSectionWidth:F,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:P,...z}=n,W=dt({name:"NumberInput",classes:WU,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:ZGe}),{resolvedClassNames:j,resolvedStyles:q}=Bm({classNames:i,styles:s,props:n}),[G,ne]=xs({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&M!==void 0,de=I.useRef(null),he=I.useRef(null),ve=I.useRef(0),Ie=(ge,ht)=>{ht.source==="event"&&ne(QGe(ge.floatValue)&&!KGe.test(ge.value)&&!(U&&XGe.test(ge.value))?ge.floatValue:ge.value),l==null||l(ge,ht)},be=ge=>{const ht=String(ge).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ht?Math.max(0,(ht[1]?ht[1].length:0)-(ht[2]?+ht[2]:0)):0},Ke=ge=>{de.current&&typeof ge<"u"&&de.current.setSelectionRange(ge,ge)},Ue=I.useRef();Ue.current=()=>{let ge;const ht=be(G),vt=be(p),pe=Math.max(ht,vt),Ce=10**pe;if(typeof G!="number"||Number.isNaN(G))ge=Kd(C,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;ge=ut<=d?ut:d}else ge=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const He=ge.toFixed(pe);ne(parseFloat(He)),l==null||l({floatValue:parseFloat(He),formattedValue:He,value:He},{source:"increment"}),setTimeout(()=>{var ut;return Ke((ut=de.current)==null?void 0:ut.value.length)},0)};const yt=I.useRef();yt.current=()=>{let ge;const ht=h!==void 0?h:O?Number.MIN_SAFE_INTEGER:0,vt=be(G),pe=be(p),Ce=Math.max(vt,pe),He=10**Ce;if(typeof G!="number"||Number.isNaN(G))ge=Kd(C,ht,d);else{const _t=(Math.round(G*He)-Math.round(p*He))/He;ge=ht!==void 0&&_t<ht?ht:_t}const ut=ge.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Ke((_t=de.current)==null?void 0:_t.value.length)},0)};const it=ge=>{T==null||T(ge),!(D||!H)&&(ge.key==="ArrowUp"&&(ge.preventDefault(),Ue.current()),ge.key==="ArrowDown"&&(ge.preventDefault(),yt.current()))},_e=ge=>{if(S==null||S(ge),ge.key==="Backspace"){const ht=de.current;ht.selectionStart===0&&ht.selectionStart===ht.selectionEnd&&(ge.preventDefault(),window.setTimeout(()=>Ke(0),0))}};EW(A,{increment:Ue.current,decrement:yt.current});const ke=ge=>{ge?Ue.current():yt.current(),ve.current+=1},ze=ge=>{if(ke(ge),ce){const ht=typeof M=="number"?M:M(ve.current);he.current=window.setTimeout(()=>ze(ge),ht)}},ct=(ge,ht)=>{var vt;ge.preventDefault(),(vt=de.current)==null||vt.focus(),ke(ht),ce&&(he.current=window.setTimeout(()=>ze(ht),B))},Ot=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ve.current=0},We=_.jsxs("div",{...W("controls"),children:[_.jsx(Es,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!0)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(Loe,{direction:"up"})}),_.jsx(Es,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!1)},onPointerUp:Ot,onPointerLeave:Ot,children:_.jsx(Loe,{direction:"down"})})]});return _.jsx(zc,{component:YGe,allowNegative:O,className:Qi(WU.root,r),size:$,...z,readOnly:D,disabled:k,value:G,getInputRef:ds(t,de),onValueChange:Ie,rightSection:m||D?g:g||We,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:ge=>{if(b==null||b(ge),v==="blur"&&typeof G=="number"&&Kd(G,h,d)!==G&&ne(Kd(G,h,d)),P&&typeof G=="string"){const ht=G.replace(/^0+/,""),vt=parseFloat(ht);ne(Number.isNaN(vt)?ht:vt)}},isAllowed:ge=>v==="strict"?y?y(ge)&&Foe(ge.floatValue,h,d):Foe(ge.floatValue,h,d):y?y(ge):!0})});YG.classes={...zc.classes,...WU};YG.displayName="@mantine/core/NumberInput";const[eYe,A_e]=fo("Progress.Root component was not found in tree");var sk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const tYe={},KG=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",tYe,e),u=A_e();return _.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});KG.classes=sk;KG.displayName="@mantine/core/ProgressLabel";const nYe={},rYe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":tn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Ur(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),zL=Me((e,t)=>{const n=xe("ProgressRoot",nYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=dt({name:"Progress",classes:sk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:rYe});return _.jsx(eYe,{value:{getStyles:d,autoContrast:l},children:_.jsx(me,{ref:t,...d("root"),...f})})});zL.classes=sk;zL.displayName="@mantine/core/ProgressRoot";const iYe={withAria:!0},VL=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",iYe,e),p=A_e(),m=hs(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(me,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":$r(l,m),"--progress-label-color":zx(p.autoContrast,m)?Iy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});VL.classes=sk;VL.displayName="@mantine/core/ProgressSection";const sYe={},Zx=Me((e,t)=>{const n=xe("Progress",sYe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Bm({classNames:i,styles:s,props:n});return _.jsx(zL,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(VL,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});Zx.classes=sk;Zx.displayName="@mantine/core/Progress";Zx.Section=VL;Zx.Root=zL;Zx.Label=KG;const[oYe,C_e]=Ux(),[aYe,uYe]=Ux();var I_e={card:"m_9dc8ae12"};const lYe={withBorder:!0},cYe=(e,{radius:t})=>({card:{"--card-radius":Ur(t)}}),XG=Me((e,t)=>{const n=xe("RadioCard",lYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=dt({name:"RadioCard",classes:I_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:cYe,rootSelector:"card"}),{dir:v}=Bh(),b=C_e(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),T=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(O=>O===S.target),k=C+1>=A.length?0:C+1,N=C-1<0?A.length-1:C-1;S.nativeEvent.code==="ArrowDown"&&(A[k].focus(),A[k].click()),S.nativeEvent.code==="ArrowUp"&&(A[N].focus(),A[N].click()),S.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?N:k].focus(),A[v==="ltr"?N:k].click()),S.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?k:N].focus(),A[v==="ltr"?k:N].click())}};return _.jsx(aYe,{value:{checked:w},children:_.jsx(Es,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:T})})});XG.displayName="@mantine/core/RadioCard";XG.classes=I_e;const fYe={},QG=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",fYe,e),f=xa(u),[d,h]=xs({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(oYe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(hi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(CG,{role:"radiogroup",children:a})})})});QG.classes=hi.Wrapper.classes;QG.displayName="@mantine/core/RadioGroup";function k_e({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var R_e={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const dYe={icon:k_e},hYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=jh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":tn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Ur(t),"--radio-color":s==="outline"?u:$r(n,e),"--radio-icon-size":tn(r,"radio-icon-size"),"--radio-icon-color":i?$r(i,e):zx(o,e)?Iy({color:n,theme:e,autoContrast:o}):void 0}}},JG=Me((e,t)=>{const n=xe("RadioIndicator",dYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=dt({name:"RadioIndicator",classes:R_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:hYe,rootSelector:"indicator"}),E=uYe(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(me,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});JG.displayName="@mantine/core/RadioIndicator";JG.classes=R_e;var N_e={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const pYe={labelPosition:"right"},mYe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=jh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":tn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Ur(n),"--radio-color":s==="outline"?u:$r(r,e),"--radio-icon-color":i?$r(i,e):zx(o,e)?Iy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":tn(t,"radio-icon-size")}}},j1=Me((e,t)=>{const n=xe("Radio",pYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=k_e,rootRef:E,iconColor:T,onChange:S,mod:A,...C}=n,k=dt({name:"Radio",classes:N_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:mYe}),N=C_e(),O=(N==null?void 0:N.size)??c,D=n.size?c:O,{styleProps:$,rest:F}=kb(C),M=xa(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:U=>{N.onChange(U),S==null||S(U)}}:{};return _.jsx(EL,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:D,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...$,...b,children:_.jsxs(me,{...k("inner"),mod:{"label-position":d},children:[_.jsx(me,{...k("radio",{focusable:!0,variant:y}),onChange:S,...F,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});j1.classes=N_e;j1.displayName="@mantine/core/Radio";j1.Group=QG;j1.Card=XG;j1.Indicator=JG;const gYe={duration:100,transition:"fade"};function yYe(e,t){return{...gYe,...t,...e}}function vYe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=WW({placement:t,middleware:[zW({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=Zp(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var HL={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const bYe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:Xl("popover")},_Ye=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),ZG=Me((e,t)=>{const n=xe("TooltipFloating",bYe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...T}=n,S=hs(),A=dt({name:"TooltipFloating",props:n,classes:HL,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:_Ye}),{handleMouseMove:C,x:k,y:N,opened:O,boundaryRef:D,floating:$,setOpened:F}=vYe({offset:p,position:m});if(!Ay(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=ds(D,r.ref,t),B=H=>{var P,z;(z=(P=r.props).onMouseEnter)==null||z.call(P,H),C(H),F(!0)},U=H=>{var P,z;(z=(P=r.props).onMouseLeave)==null||z.call(P,H),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(Wx,{...E,withinPortal:s,children:_.jsx(me,{...T,...A("tooltip",{style:{...IW(o,S),zIndex:y,display:!v&&O?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:U})]})});ZG.classes=HL;ZG.displayName="@mantine/core/TooltipFloating";const P_e=I.createContext(!1),wYe=P_e.Provider,EYe=()=>I.useContext(P_e),xYe={openDelay:0,closeDelay:0};function D_e(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",xYe,e);return _.jsx(wYe,{value:!0,children:_.jsx(yVe,{delay:{open:t,close:n},children:r})})}D_e.displayName="@mantine/core/TooltipGroup";function SYe(e){var T,S,A;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=EYe(),o=xa(),{delay:a,currentId:u,setCurrentId:l}=gbe(),c=I.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=WW({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[fbe(e.offset),zW({padding:8}),UU(),dbe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[zU()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=SVe([gVe(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),xVe(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),AVe(h,{role:"tooltip"}),wVe(h,{enabled:typeof e.opened>"u"}),vVe(h,{id:o})]);xbe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),_h(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const joe={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:Xl("popover"),positionDependencies:[]},TYe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Ur(t),"--tooltip-bg":n?$r(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),xi=Me((e,t)=>{const n=xe("Tooltip",joe,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,offset:A,transitionProps:C,multiline:k,events:N,zIndex:O,disabled:D,positionDependencies:$,onClick:F,onMouseEnter:M,onMouseLeave:B,inline:U,variant:H,keepMounted:P,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=xe("Tooltip",joe,n),{dir:ne}=Bh(),ce=I.useRef(null),de=SYe({position:ybe(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:ce,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...$,r],inline:U,strategy:q}),he=dt({name:"Tooltip",props:n,classes:HL,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:TYe});if(!Ay(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ve=ds(de.reference,r.ref,t),Ie=yYe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(Wx,{...W,withinPortal:f,children:_.jsx(zm,{...Ie,keepMounted:P,mounted:!D&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:be=>_.jsxs(me,{...G,variant:H,mod:[{multiline:k},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...be,zIndex:O,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(GW,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,...he("arrow")})]})})}),I.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ve,className:Qi(v,r.props.className),...r.props}))]})});xi.classes=HL;xi.displayName="@mantine/core/Tooltip";xi.Floating=ZG;xi.Group=D_e;var O_e={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const AYe={withItemsBorders:!0},CYe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Ur(t),"--sc-color":n?$r(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":tn(i,"sc-padding"),"--sc-font-size":uo(i)}}),eY=Me((e,t)=>{var ne,ce;const n=xe("SegmentedControl",AYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:T,variant:S,autoContrast:A,withItemsBorders:C,mod:k,...N}=n,O=dt({name:"SegmentedControl",props:n,classes:O_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:CYe}),D=hs(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=CUe(),[M,B]=I.useState(null),[U,H]=I.useState({}),P=(de,he)=>{U[he]=de,H(U)},[z,W]=xs({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=xa(p),q=$.map(de=>I.createElement(me,{...O("control"),mod:{active:z===de.value,orientation:v},key:de.value},I.createElement("input",{...O("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":D.focusRing,key:`${de.value}-input`}),I.createElement(me,{component:"label",...O("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>P(he,de.value),__vars:{"--sc-label-color":w!==void 0?Iy({color:w,theme:D,autoContrast:A}):void 0},key:`${de.value}-label`},_.jsx("span",{...O("innerLabel"),children:de.label})))),G=ds(t,de=>B(de));return l.length===0?null:_.jsxs(me,{...O("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},k],...N,role:"radiogroup",children:[typeof z=="string"&&_.jsx(rG,{target:U[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...O("indicator")}),q]})});eY.classes=O_e;eY.displayName="@mantine/core/SegmentedControl";const IYe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},ok=Me((e,t)=>{const n=xe("Select",IYe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:k,size:N,searchable:O,rightSection:D,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,name:B,form:U,searchValue:H,defaultSearchValue:P,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ve,autoComplete:Ie,scrollAreaProps:be,...Ke}=n,Ue=I.useMemo(()=>Bbe(m),[m]),yt=I.useMemo(()=>pG(Ue),[Ue]),it=xa(G),[_e,ke,ze]=xs({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?yt[_e]:void 0,[Ot,We]=xs({value:H,defaultValue:P,finalValue:ct?ct.label:"",onChange:z}),ge=TG({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ge.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ge.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:vt}=Bm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ge.selectFirstOption()},[v,_e]),I.useEffect(()=>{g===null&&We(""),typeof g=="string"&&ct&&We(ct.label)},[g,ct]);const pe=ne&&!!_e&&!T&&!E&&_.jsx(Kn.ClearButton,{size:N,...ce,onClear:()=>{ke(null,null),We(""),ve==null||ve()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Kn,{store:ge,__staticSelector:"Select",classNames:ht,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ce=>{b==null||b(Ce);const He=W&&yt[Ce].value===_e?null:yt[Ce],ut=He?He.value:null;ke(ut,He),!ze&&We(typeof ut=="string"&&(He==null?void 0:He.label)||""),ge.closeDropdown()},size:N,...w,children:[_.jsx(Kn.Target,{targetType:O?"input":"button",autoComplete:Ie,children:_.jsx(zc,{id:it,ref:t,rightSection:D||pe||_.jsx(Kn.Chevron,{size:N,error:j,unstyled:s}),rightSectionPointerEvents:q||(pe?"all":"none"),...Ke,size:N,__staticSelector:"Select",disabled:T,readOnly:E||!O,value:Ot,onChange:Ce=>{We(Ce.currentTarget.value),ge.openDropdown(),v&&ge.selectFirstOption()},onFocus:Ce=>{O&&ge.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var He;O&&ge.closeDropdown(),We(_e!=null&&((He=yt[_e])==null?void 0:He.label)||""),d==null||d(Ce)},onClick:Ce=>{O?ge.openDropdown():ge.toggleDropdown(),h==null||h(Ce)},classNames:ht,styles:vt,unstyled:s,pointer:!O,error:j})}),_.jsx(i_e,{data:Ue,hidden:E||T,filter:S,search:Ot,limit:A,hiddenWhenEmpty:!O||!M,withScrollArea:C,maxDropdownHeight:k,filterOptions:O&&(ct==null?void 0:ct.label)!==Ot,value:_e,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,unstyled:s,labelId:Ke.label?`${it}-label`:void 0,"aria-label":Ke.label?void 0:Ke["aria-label"],renderOption:he,scrollAreaProps:be})]}),_.jsx(Kn.HiddenInput,{value:_e,name:B,form:U,disabled:T,...de})]})});ok.classes={...zc.classes,...Kn.classes};ok.displayName="@mantine/core/Select";function kYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=hs(),s=t===void 0?e:t,o=Ty({"--sg-spacing-x":as(Tf(e)),"--sg-spacing-y":as(Tf(s)),"--sg-cols":(c=Tf(n))==null?void 0:c.toString()}),a=Xr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=as(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=as(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=bC(Xr(a),i).filter(f=>Xr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(Ib,{styles:o,media:l,selector:r})}function Mj(e){return typeof e=="object"&&e!==null?Xr(e):[]}function RYe(e){return e.sort((t,n)=>vC(t)-vC(n))}function NYe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...Mj(e),...Mj(t),...Mj(n)]));return RYe(r)}function PYe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Ty({"--sg-spacing-x":as(Tf(e)),"--sg-spacing-y":as(Tf(i)),"--sg-cols":(l=Tf(n))==null?void 0:l.toString()}),o=NYe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=as(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=as(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(Ib,{styles:s,container:u,selector:r})}var $_e={container:"m_925c2d2c",root:"m_2415a157"};const DYe={cols:1,spacing:"md",type:"media"},tY=Me((e,t)=>{const n=xe("SimpleGrid",DYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=dt({name:"SimpleGrid",classes:$_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=JI();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(PYe,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(me,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(kYe,{...n,selector:`.${m}`}),_.jsx(me,{ref:t,...p("root",{className:m}),...h})]})});tY.classes=$_e;tY.displayName="@mantine/core/SimpleGrid";const[M_e,qL]=fo("SliderProvider was not found in tree"),nY=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=qL();return _.jsx(me,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});nY.displayName="@mantine/core/SliderRoot";const jO=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=qL(),[b,w]=I.useState(!1),E=l||s||b||h&&p;return _.jsxs(me,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(zm,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...v("label",{style:T}),children:i})})]})});jO.displayName="@mantine/core/SliderThumb";function BO({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function OYe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function L_e({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=qL();if(!e)return null;const u=e.map((l,c)=>I.createElement(me,{...a("markWrapper"),__vars:{"--mark-offset":`${BO({value:l.value,min:t,max:n})}%`},key:c},_.jsx(me,{...a("mark"),mod:{filled:OYe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}L_e.displayName="@mantine/core/SliderMarks";function rY({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=qL();return _.jsx(_.Fragment,{children:_.jsx(me,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(me,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(me,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(L_e,{...a,offset:i,disabled:r,inverted:s})]})})})}rY.displayName="@mantine/core/SliderTrack";function GU({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function lc(e,t){return parseFloat(e.toFixed(t))}function F_e(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var WL={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const $Ye={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},MYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),GL=Me((e,t)=>{const n=xe("Slider",$Ye,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:T,unstyled:S,scale:A,inverted:C,className:k,style:N,vars:O,hiddenInputProps:D,...$}=n,F=dt({name:"Slider",props:n,classes:WL,classNames:r,className:k,styles:i,style:N,vars:O,varsResolver:MYe,unstyled:S}),{dir:M}=Bh(),[B,U]=I.useState(!1),[H,P]=xs({value:typeof s=="number"?Kd(s,l,c):s,defaultValue:typeof h=="number"?Kd(h,l,c):h,finalValue:Kd(0,l,c),onChange:o}),z=I.useRef(H),W=I.useRef(),j=I.useRef(),q=BO({value:H,min:l,max:c}),G=A(H),ne=typeof g=="function"?g(G):g,ce=d??F_e(f),de=I.useCallback(({x:be})=>{if(!T){const Ke=GU({value:be,min:l,max:c,step:f,precision:ce});P(Ke),z.current=Ke}},[T,l,c,f,ce,P]),{ref:he,active:ve}=k1e(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Ie=be=>{var Ke,Ue,yt,it,_e,ke;if(!T)switch(be.key){case"ArrowUp":{be.preventDefault(),(Ke=j.current)==null||Ke.focus();const ze=lc(Math.min(Math.max(H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowRight":{be.preventDefault(),(Ue=j.current)==null||Ue.focus();const ze=lc(Math.min(Math.max(M==="rtl"?H-f:H+f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowDown":{be.preventDefault(),(yt=j.current)==null||yt.focus();const ze=lc(Math.min(Math.max(H-f,l),c),ce);P(ze),a==null||a(ze);break}case"ArrowLeft":{be.preventDefault(),(it=j.current)==null||it.focus();const ze=lc(Math.min(Math.max(M==="rtl"?H+f:H-f,l),c),ce);P(ze),a==null||a(ze);break}case"Home":{be.preventDefault(),(_e=j.current)==null||_e.focus(),P(l),a==null||a(l);break}case"End":{be.preventDefault(),(ke=j.current)==null||ke.focus(),P(c),a==null||a(c);break}}};return _.jsx(M_e,{value:{getStyles:F},children:_.jsxs(nY,{...$,ref:ds(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var be;return(be=W.current)==null?void 0:be.focus()},size:u,disabled:T,children:[_.jsx(rY,{inverted:C,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:T,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(jO,{max:c,min:l,value:G,position:q,dragging:ve,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...D})]})})});GL.classes=WL;GL.displayName="@mantine/core/Slider";function LYe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const FYe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?$r(n,e):void 0,"--slider-radius":i===void 0?void 0:Ur(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),jYe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},UO=Me((e,t)=>{const n=xe("RangeSlider",jYe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:S,thumbChildren:A,disabled:C,unstyled:k,scale:N,inverted:O,className:D,style:$,vars:F,hiddenInputProps:M,...B}=n,U=dt({name:"Slider",props:n,classes:WL,classNames:r,className:D,styles:i,style:$,vars:F,varsResolver:FYe,unstyled:k}),{dir:H}=Bh(),[P,z]=I.useState(-1),[W,j]=I.useState(!1),[q,G]=xs({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=I.useRef(q),ce=I.useRef([]),de=I.useRef(void 0),he=[BO({value:q[0],min:l,max:c}),BO({value:q[1],min:l,max:c})],ve=p??F_e(h),Ie=We=>{G(We),ne.current=We};I.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const be=(We,ge,ht)=>{const vt=[...ne.current];vt[ge]=We,ge===0&&(We>vt[1]-(f-1e-9)&&(vt[1]=Math.min(We+f,c)),We>(c-(f-1e-9)||l)&&(vt[ge]=ne.current[ge]),vt[1]-We>d&&(vt[1]=We+d)),ge===1&&(We<vt[0]+f&&(vt[0]=Math.max(We-f,l)),We<vt[0]+f&&(vt[ge]=ne.current[ge]),We-vt[0]>d&&(vt[0]=We-d)),vt[0]=lc(vt[0],ve),vt[1]=lc(vt[1],ve),Ie(vt),ht&&(a==null||a(ne.current))},Ke=We=>{if(!C){const ge=GU({value:We,min:l,max:c,step:h,precision:ve});be(ge,de.current,!1)}},{ref:Ue,active:yt}=k1e(({x:We})=>Ke(We),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function it(We){de.current=We}const _e=We=>{Ue.current.focus();const ge=Ue.current.getBoundingClientRect(),ht=LYe(We.nativeEvent),vt=GU({value:ht-ge.left,max:c,min:l,step:h,containerWidth:ge.width}),pe=Math.abs(q[0]-vt)>Math.abs(q[1]-vt)?1:0,Ce=H==="ltr"?pe:pe===1?0:1;de.current=Ce},ke=()=>P!==1&&P!==0?(z(0),0):P,ze=We=>{if(!C)switch(We.key){case"ArrowUp":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(lc(Math.min(Math.max(ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowRight":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(lc(Math.min(Math.max(H==="rtl"?ne.current[ge]-h:ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowDown":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(lc(Math.min(Math.max(ne.current[ge]-h,l),c),ve),ge,!0);break}case"ArrowLeft":{We.preventDefault();const ge=ke();ce.current[ge].focus(),be(lc(Math.min(Math.max(H==="rtl"?ne.current[ge]+h:ne.current[ge]-h,l),c),ve),ge,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Ot=Array.isArray(A);return _.jsx(M_e,{value:{getStyles:U},children:_.jsxs(nY,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(rY,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:O,min:l,max:c,value:q[1],disabled:C,containerProps:{ref:Ue,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:ze},children:[_.jsx(jO,{...ct,value:N(q[0]),position:he[0],dragging:yt,label:typeof v=="function"?v(lc(N(q[0]),ve)):v,ref:We=>{ce.current[0]=We},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:S,isHovered:W,disabled:C,children:Ot?A[0]:A}),_.jsx(jO,{...ct,thumbLabel:T,value:N(q[1]),position:he[1],dragging:yt,label:typeof v=="function"?v(lc(N(q[1]),ve)):v,ref:We=>{ce.current[1]=We},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:S,isHovered:W,disabled:C,children:Ot?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});UO.classes=WL;UO.displayName="@mantine/core/RangeSlider";const BYe={},kl=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",BYe,e);return _.jsx(me,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});kl.displayName="@mantine/core/Space";var j_e={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const UYe={maxHeight:100,initialState:!1},zYe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),iY=Me((e,t)=>{const n=xe("Spoiler",UYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=dt({name:"Spoiler",classes:j_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zYe}),b=xa(g),w=`${b}-region`,[E,T]=I.useState(l),{ref:S,height:A}=_Ue(),C=E?f:d,k=C!==null&&c<A;return _.jsxs(me,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(Pb,{component:"button",type:"button",ref:p,onClick:()=>T(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Te(A):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:S,children:h})})]})});iY.classes=j_e;iY.displayName="@mantine/core/Spoiler";var B_e={root:"m_6d731127"};const VYe={gap:"md",align:"stretch",justify:"flex-start"},HYe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":as(t),"--stack-align":n,"--stack-justify":r}}),Xd=Me((e,t)=>{const n=xe("Stack",VYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=dt({name:"Stack",props:n,classes:B_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:HYe});return _.jsx(me,{ref:t,...p("root"),variant:d,...h})});Xd.classes=B_e;Xd.displayName="@mantine/core/Stack";const U_e=I.createContext(null),qYe=U_e.Provider,WYe=()=>I.useContext(U_e),GYe={},sY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",GYe,e),[c,f]=xs({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(qYe,{value:{value:c,onChange:d,size:s},children:_.jsx(hi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(CG,{role:"group",children:a})})})});sY.classes=hi.Wrapper.classes;sY.displayName="@mantine/core/SwitchGroup";var z_e={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const YYe={labelPosition:"right"},KYe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Ur(t),"--switch-height":tn(r,"switch-height"),"--switch-width":tn(r,"switch-width"),"--switch-thumb-size":tn(r,"switch-thumb-size"),"--switch-label-font-size":tn(r,"switch-label-font-size"),"--switch-track-label-padding":tn(r,"switch-track-label-padding"),"--switch-color":n?$r(n,e):void 0}}),Vw=Me((e,t)=>{const n=xe("Switch",YYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:S,error:A,disabled:C,variant:k,rootRef:N,mod:O,...D}=n,$=WYe(),F=p||($==null?void 0:$.size),M=dt({name:"Switch",props:n,classes:z_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:KYe}),{styleProps:B,rest:U}=kb(D),H=xa(h),P=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,W]=xs({value:P.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(EL,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:T,label:c,description:S,error:A,disabled:C,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":P.checked||void 0,variant:k,ref:N,mod:O,...B,...g,children:[_.jsx("input",{...U,disabled:C,checked:z,onChange:j=>{var q;$?(q=P.onChange)==null||q.call(P,j):E==null||E(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...M("input")}),_.jsxs(me,{"aria-hidden":"true",mod:{error:A,"label-position":T},...M("track"),children:[_.jsx(me,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),_.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});Vw.classes={...z_e,...Gbe};Vw.displayName="@mantine/core/Switch";Vw.Group=sY;const[XYe,QYe]=fo("Table component was not found in the tree");var ak={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function JYe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Ob(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=QYe();return _.jsx(me,{component:e,ref:s,...JYe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=ak,r}const YU=Ob("th",{columnBorder:!0}),V_e=Ob("td",{columnBorder:!0}),nD=Ob("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),H_e=Ob("thead",{stickyHeader:!0}),q_e=Ob("tbody"),W_e=Ob("tfoot"),G_e=Ob("caption",{captionSide:!0});function oY({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(G_e,{children:e.caption}),e.head&&_.jsx(H_e,{children:_.jsx(nD,{children:e.head.map((t,n)=>_.jsx(YU,{children:t},n))})}),e.body&&_.jsx(q_e,{children:e.body.map((t,n)=>_.jsx(nD,{children:t.map((r,i)=>_.jsx(V_e,{children:r},i))},n))}),e.foot&&_.jsx(W_e,{children:_.jsx(nD,{children:e.foot.map((t,n)=>_.jsx(YU,{children:t},n))})})]})}oY.displayName="@mantine/core/TableDataRenderer";const ZYe={type:"scrollarea"},eKe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),aY=Me((e,t)=>{const n=xe("TableScrollContainer",ZYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=dt({name:"TableScrollContainer",classes:ak,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eKe,rootSelector:"scrollContainer"});return _.jsx(me,{component:f==="scrollarea"?pm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});aY.classes=ak;aY.displayName="@mantine/core/TableScrollContainer";const tKe={withRowBorders:!0,verticalSpacing:7},nKe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":as(r),"--table-vertical-spacing":as(i),"--table-border-color":s?$r(s,e):void 0,"--table-striped-color":u&&o?$r(o,e):void 0,"--table-highlight-on-hover-color":l&&a?$r(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),qt=Me((e,t)=>{const n=xe("Table",tKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:T,children:S,stickyHeader:A,stickyHeaderOffset:C,mod:k,...N}=n,O=dt({name:"Table",props:n,className:i,style:s,classes:ak,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:nKe});return _.jsx(XYe,{value:{getStyles:O,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(me,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...O("table"),...N,children:S||!!T&&_.jsx(oY,{data:T})})})});qt.classes=ak;qt.displayName="@mantine/core/Table";qt.Td=V_e;qt.Th=YU;qt.Tr=nD;qt.Thead=H_e;qt.Tbody=q_e;qt.Tfoot=W_e;qt.Caption=G_e;qt.ScrollContainer=aY;qt.DataRenderer=oY;const[rKe,uY]=fo("Tabs component was not found in the tree");var uk={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const iKe={},lY=Me((e,t)=>{const n=xe("TabsList",iKe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=uY();return _.jsx(me,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});lY.classes=uk;lY.displayName="@mantine/core/TabsList";const sKe={},cY=Me((e,t)=>{const n=xe("TabsPanel",sKe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=uY(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(me,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});cY.classes=uk;cY.displayName="@mantine/core/TabsPanel";const oKe={},fY=Me((e,t)=>{const n=xe("TabsTab",oKe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=hs(),{dir:b}=Bh(),w=uY(),E=a===w.value,T=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},S={classNames:h,styles:p,props:n};return _.jsxs(Es,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?$r(f,v):void 0},onKeyDown:bW({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});fY.classes=uk;fY.displayName="@mantine/core/TabsTab";const Boe="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",aKe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},uKe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Ur(t),"--tabs-color":$r(n,e),"--tabs-text-color":zx(r,e)?Iy({color:n,theme:e,autoContrast:r}):void 0}}),rs=Me((e,t)=>{const n=xe("Tabs",aKe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:T,vars:S,autoContrast:A,mod:C,...k}=n,N=xa(l),[O,D]=xs({value:i,defaultValue:r,finalValue:null,onChange:s}),$=dt({name:"Tabs",props:n,classes:uk,className:E,style:T,classNames:v,styles:b,unstyled:w,vars:S,varsResolver:uKe});return _.jsx(rKe,{value:{placement:g,value:O,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:NO(`${N}-tab`,Boe),getPanelId:NO(`${N}-panel`,Boe),onChange:D,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(me,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...$("root"),...k,children:a})})});rs.classes=uk;rs.displayName="@mantine/core/Tabs";rs.Tab=fY;rs.Panel=cY;rs.List=lY;const lKe={},Yg=Me((e,t)=>{const n=xe("TextInput",lKe,e);return _.jsx(zc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});Yg.classes=zc.classes;Yg.displayName="@mantine/core/TextInput";const cKe=["h1","h2","h3","h4","h5","h6"];function fKe(e,t){const n=t!==void 0?t:`h${e}`;return cKe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var Y_e={root:"m_8a5d1357"};const dKe={order:1},hKe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=fKe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Si=Me((e,t)=>{const n=xe("Title",dKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=dt({name:"Title",props:n,classes:Y_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:hKe});return[1,2,3,4,5,6].includes(u)?_.jsx(me,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Si.classes=Y_e;Si.displayName="@mantine/core/Title";function pKe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function mKe(e){return I.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function gKe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const yKe=()=>pKe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),$b=yKe(),vKe=(e=$b)=>mKe(e);function eS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=gKe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function bKe(e,t=$b){const n=e.id||Bw();return eS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function K_e(e,t=$b){return eS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function _Ke(e,t=$b){return eS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function wKe(e=$b){eS(e,()=>[])}function EKe(e=$b){eS(e,t=>t.slice(0,e.getState().limit))}const Mb={show:bKe,hide:K_e,update:_Ke,clean:wKe,cleanQueue:EKe,updateState:eS};function KU(){return KU=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},KU.apply(null,arguments)}function X_e(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function XU(e,t){return XU=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},XU(e,t)}function Q_e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,XU(e,t)}var J_e={exports:{}},xKe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",SKe=xKe,TKe=SKe;function Z_e(){}function ewe(){}ewe.resetWarningCache=Z_e;var AKe=function(){function e(r,i,s,o,a,u){if(u!==TKe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:ewe,resetWarningCache:Z_e};return n.PropTypes=n,n};J_e.exports=AKe();var CKe=J_e.exports;const Uoe=Gl(CKe),zoe={disabled:!1},zO=_r.createContext(null);var IKe=function(t){return t.scrollTop},p2="unmounted",Ev="exited",xv="entering",Y_="entered",QU="exiting",Gm=function(e){Q_e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Ev,s.appearStatus=xv):u=Y_:r.unmountOnExit||r.mountOnEnter?u=p2:u=Ev,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===p2?{status:Ev}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==xv&&o!==Y_&&(s=xv):(o===xv||o===Y_)&&(s=QU)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===xv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:h2.findDOMNode(this);o&&IKe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Ev&&this.setState({status:p2})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[h2.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||zoe.disabled){this.safeSetState({status:Y_},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:xv},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:Y_},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:h2.findDOMNode(this);if(!s||zoe.disabled){this.safeSetState({status:Ev},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:QU},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Ev},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:h2.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===p2)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=X_e(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return _r.createElement(zO.Provider,{value:null},typeof o=="function"?o(i,a):_r.cloneElement(_r.Children.only(o),a))},t}(_r.Component);Gm.contextType=zO;Gm.propTypes={};function S_(){}Gm.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:S_,onEntering:S_,onEntered:S_,onExit:S_,onExiting:S_,onExited:S_};Gm.UNMOUNTED=p2;Gm.EXITED=Ev;Gm.ENTERING=xv;Gm.ENTERED=Y_;Gm.EXITING=QU;function kKe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function dY(e,t){var n=function(s){return t&&I.isValidElement(s)?t(s):s},r=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function RKe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function t1(e,t,n){return n[t]!=null?n[t]:e.props[t]}function NKe(e,t){return dY(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:t1(n,"appear",e),enter:t1(n,"enter",e),exit:t1(n,"exit",e)})})}function PKe(e,t,n){var r=dY(e.children),i=RKe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(I.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=I.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:t1(o,"exit",e),enter:t1(o,"enter",e)}):!u&&a&&!c?i[s]=I.cloneElement(o,{in:!1}):u&&a&&I.isValidElement(l)&&(i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:t1(o,"exit",e),enter:t1(o,"enter",e)}))}}),i}var DKe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},OKe={component:"div",childFactory:function(t){return t}},Ig=function(e){Q_e(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(kKe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?NKe(i,a):PKe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=dY(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=KU({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=X_e(i,["component","childFactory"]),u=this.state.contextValue,l=DKe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?_r.createElement(zO.Provider,{value:u},l):_r.createElement(zO.Provider,{value:u},_r.createElement(s,a,l))},t}(_r.Component);Ig.propTypes={};Ig.defaultProps=OKe;const twe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function $Ke(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),twe.reduce((n,r)=>(n[r]=[],n),{}))}const Voe={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},MKe={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function LKe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:Voe[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:MKe[o]},l={opacity:0,maxHeight:0,transform:Voe[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function FKe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const nwe=I.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=FKe(n,e.autoClose),l=I.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return I.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),I.useEffect(()=>(d(),c),[u]),_.jsx(WG,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});nwe.displayName="@mantine/notifications/NotificationContainer";var rwe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const jKe=Gm,BKe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:Xl("overlay"),store:$b,withinPortal:!0},UKe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Te(n)}}),Ym=Me((e,t)=>{const n=xe("Notifications",BKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,w=hs(),E=vKe(g),T=gUe(),S=fL(),A=I.useRef({}),C=I.useRef(0),N=(w.respectReducedMotion?S:!1)?1:f,O=dt({name:"Notifications",classes:rwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UKe});I.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),_h(()=>{E.notifications.length>C.current&&setTimeout(()=>T(),0),C.current=E.notifications.length},[E.notifications]);const D=$Ke(E.notifications,l),$=twe.reduce((F,M)=>(F[M]=D[M].map(({style:B,...U})=>_.jsx(jKe,{timeout:N,onEnter:()=>A.current[U.id].offsetHeight,nodeRef:{current:A.current[U.id]},children:H=>_.jsx(nwe,{ref:P=>{A.current[U.id]=P},data:U,onHide:P=>K_e(P,g),autoClose:c,...O("notification",{style:{...LKe({state:H,position:M,transitionDuration:N,maxHeight:h}),...B}})})},U.id)),F),{});return _.jsxs(Wx,{withinPortal:v,...y,children:[_.jsx(me,{...O("root"),"data-position":"top-center",ref:t,...b,children:_.jsx(Ig,{children:$["top-center"]})}),_.jsx(me,{...O("root"),"data-position":"top-left",...b,children:_.jsx(Ig,{children:$["top-left"]})}),_.jsx(me,{...O("root"),"data-position":"top-right",...b,children:_.jsx(Ig,{children:$["top-right"]})}),_.jsx(me,{...O("root"),"data-position":"bottom-right",...b,children:_.jsx(Ig,{children:$["bottom-right"]})}),_.jsx(me,{...O("root"),"data-position":"bottom-left",...b,children:_.jsx(Ig,{children:$["bottom-left"]})}),_.jsx(me,{...O("root"),"data-position":"bottom-center",...b,children:_.jsx(Ig,{children:$["bottom-center"]})})]})});Ym.classes=rwe;Ym.displayName="@mantine/notifications/Notifications";Ym.show=Mb.show;Ym.hide=Mb.hide;Ym.update=Mb.update;Ym.clean=Mb.clean;Ym.cleanQueue=Mb.cleanQueue;Ym.updateState=Mb.updateState;const iwe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),As=()=>I.useContext(iwe);function zKe({children:e}){const[t,n]=_r.useState(void 0),r=_r.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(iwe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function AC(){return AC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AC.apply(this,arguments)}var Kg;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Kg||(Kg={}));const Hoe="popstate";function VKe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return JU("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:owe(i)}return qKe(t,n,null,e)}function us(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function swe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function HKe(){return Math.random().toString(36).substr(2,8)}function qoe(e,t){return{usr:e.state,key:e.key,idx:t}}function JU(e,t,n,r){return n===void 0&&(n=null),AC({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?tS(t):t,{state:n,key:t&&t.key||r||HKe()})}function owe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function tS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function qKe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=Kg.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(AC({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=Kg.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=Kg.Push;let v=JU(m.location,g,y);l=c()+1;let b=qoe(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=Kg.Replace;let v=JU(m.location,g,y);l=c();let b=qoe(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:owe(g);return v=v.replace(/ $/,"%20"),us(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(Hoe,f),u=g,()=>{i.removeEventListener(Hoe,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var Woe;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(Woe||(Woe={}));function WKe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?tS(t):t,i=lwe(r.pathname||"/",n);if(i==null)return null;let s=awe(e);GKe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=sXe(i);o=nXe(s[a],u)}return o}function awe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(us(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=y0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(us(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),awe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:eXe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of uwe(s.path))i(s,o,u)}),t}function uwe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=uwe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function GKe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:tXe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const YKe=/^:[\w-]+$/,KKe=3,XKe=2,QKe=1,JKe=10,ZKe=-2,Goe=e=>e==="*";function eXe(e,t){let n=e.split("/"),r=n.length;return n.some(Goe)&&(r+=ZKe),t&&(r+=XKe),n.filter(i=>!Goe(i)).reduce((i,s)=>i+(YKe.test(s)?KKe:s===""?QKe:JKe),r)}function tXe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function nXe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=rXe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:y0([i,c.pathname]),pathnameBase:lXe(y0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=y0([i,c.pathnameBase]))}return s}function rXe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=iXe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function iXe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),swe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function sXe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return swe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function lwe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function oXe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?tS(e):e;return{pathname:n?n.startsWith("/")?n:aXe(n,t):t,search:cXe(r),hash:fXe(i)}}function aXe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Lj(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uXe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function hY(e,t){let n=uXe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function pY(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=tS(e):(i=AC({},e),us(!i.pathname||!i.pathname.includes("?"),Lj("?","pathname","search",i)),us(!i.pathname||!i.pathname.includes("#"),Lj("#","pathname","hash",i)),us(!i.search||!i.search.includes("#"),Lj("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=oXe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const y0=e=>e.join("/").replace(/\/\/+/g,"/"),lXe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),cXe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,fXe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function dXe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const cwe=["post","put","patch","delete"];new Set(cwe);const hXe=["get",...cwe];new Set(hXe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function CC(){return CC=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CC.apply(this,arguments)}const mY=I.createContext(null),pXe=I.createContext(null),Lb=I.createContext(null),YL=I.createContext(null),zh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),fwe=I.createContext(null);function dwe(e,t){let{relative:n}={};nS()||us(!1);let{basename:r,navigator:i}=I.useContext(Lb),{hash:s,pathname:o,search:a}=vXe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:y0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function nS(){return I.useContext(YL)!=null}function Ny(){return nS()||us(!1),I.useContext(YL).location}function hwe(e){I.useContext(Lb).static||I.useLayoutEffect(e)}function Vh(){let{isDataRoute:e}=I.useContext(zh);return e?kXe():mXe()}function mXe(){nS()||us(!1);let e=I.useContext(mY),{basename:t,future:n,navigator:r}=I.useContext(Lb),{matches:i}=I.useContext(zh),{pathname:s}=Ny(),o=JSON.stringify(hY(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return hwe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=pY(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:y0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const gXe=I.createContext(null);function yXe(e){let t=I.useContext(zh).outlet;return t&&I.createElement(gXe.Provider,{value:e},t)}function vm(){let{matches:e}=I.useContext(zh),t=e[e.length-1];return t?t.params:{}}function vXe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Lb),{matches:i}=I.useContext(zh),{pathname:s}=Ny(),o=JSON.stringify(hY(i,r.v7_relativeSplatPath));return I.useMemo(()=>pY(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function pwe(e,t){return bXe(e,t)}function bXe(e,t,n,r){nS()||us(!1);let{navigator:i}=I.useContext(Lb),{matches:s}=I.useContext(zh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Ny(),c;if(t){var f;let g=typeof t=="string"?tS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||us(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=WKe(e,{pathname:h}),m=SXe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:y0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:y0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(YL.Provider,{value:{location:CC({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Kg.Pop}},m):m}function _Xe(){let e=IXe(),t=dXe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const wXe=I.createElement(_Xe,null);class EXe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(zh.Provider,{value:this.props.routeContext},I.createElement(fwe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function xXe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(mY);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(zh.Provider,{value:t},r)}function SXe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||us(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||wXe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(xXe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(EXe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var mwe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(mwe||{}),VO=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(VO||{});function TXe(e){let t=I.useContext(mY);return t||us(!1),t}function AXe(e){let t=I.useContext(pXe);return t||us(!1),t}function CXe(e){let t=I.useContext(zh);return t||us(!1),t}function gwe(e){let t=CXe(),n=t.matches[t.matches.length-1];return n.route.id||us(!1),n.route.id}function IXe(){var e;let t=I.useContext(fwe),n=AXe(VO.UseRouteError),r=gwe(VO.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function kXe(){let{router:e}=TXe(mwe.UseNavigateStable),t=gwe(VO.UseNavigateStable),n=I.useRef(!1);return hwe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,CC({fromRouteId:t},s)))},[e,t])}function gY(e){let{to:t,replace:n,state:r,relative:i}=e;nS()||us(!1);let{future:s,static:o}=I.useContext(Lb),{matches:a}=I.useContext(zh),{pathname:u}=Ny(),l=Vh(),c=pY(t,hY(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function RXe(e){return yXe(e.context)}function wp(e){us(!1)}function NXe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Kg.Pop,navigator:s,static:o=!1,future:a}=e;nS()&&us(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:CC({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=tS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=lwe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Lb.Provider,{value:l},I.createElement(YL.Provider,{children:n,value:m}))}function PXe(e){let{children:t,location:n}=e;return pwe(ZU(t),n)}new Promise(()=>{});function ZU(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,ZU(r.props.children,s));return}r.type!==wp&&us(!1),!r.props.index||!r.props.children||us(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ZU(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function e7(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function DXe(e,t){let n=e7(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const OXe="6";try{window.__reactRouterVersion=OXe}catch{}const $Xe="startTransition",Yoe=sO[$Xe];function MXe(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=VKe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&Yoe?Yoe(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(NXe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var Koe;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Koe||(Koe={}));var Xoe;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Xoe||(Xoe={}));function yY(e){let t=I.useRef(e7(e)),n=I.useRef(!1),r=Ny(),i=I.useMemo(()=>DXe(r.search,n.current?null:t.current),[r.search]),s=Vh(),o=I.useCallback((a,u)=>{const l=e7(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const vY=I.createContext(null);vY.displayName="@mantine/modals/ModalsContext";function LXe(){const e=I.useContext(vY);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function FXe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=LXe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(me,{mb:"md",children:l}),_.jsxs(Ss,{justify:"flex-end",...o,children:[_.jsx(on,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(on,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[jXe,KL]=kUe("mantine-modals");KL("openModal");KL("closeModal");KL("closeAllModals");const t7=KL("openConfirmModal");function Qoe(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function BXe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;Qoe(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{Qoe(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function UXe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function zXe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(BXe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||Bw();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||Bw();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||Bw();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);jXe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=UXe(g.props);return{modalProps:y,content:_.jsx(FXe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(vY.Provider,{value:d,children:[_.jsx(Ki,{zIndex:Xl("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VXe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const Tn=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>I.createElement("svg",{ref:f,...VXe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>I.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HXe=Tn("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qXe=Tn("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Joe=Tn("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WXe=Tn("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GXe=Tn("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YXe=Tn("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KXe=Tn("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XXe=Tn("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QXe=Tn("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JXe=Tn("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ywe=Tn("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZXe=Tn("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Zoe=Tn("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eQe=Tn("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tQe=Tn("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var nQe=Tn("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var rQe=Tn("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var iQe=Tn("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var sQe=Tn("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var oQe=Tn("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vwe=Tn("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var aQe=Tn("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var uQe=Tn("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lQe=Tn("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cQe=Tn("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fQe=Tn("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bwe=Tn("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dQe=Tn("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hQe=Tn("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pQe=Tn("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var mQe=Tn("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gQe=Tn("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _we=Tn("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yQe=Tn("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var wwe=Tn("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var vQe=Tn("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var Ewe=Tn("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bY=Tn("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var _Y=Tn("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var bQe=Tn("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function xwe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Uu="/mqp2024/";function eae(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function Swe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const _Qe=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,wQe=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,EQe={};function tae(e,t){return(EQe.jsx?wQe:_Qe).test(e)}const xQe=/[ \t\n\f\r]/g;function SQe(e){return typeof e=="object"?e.type==="text"?nae(e.value):!1:nae(e)}function nae(e){return e.replace(xQe,"")===""}let lk=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};lk.prototype.property={};lk.prototype.normal={};lk.prototype.space=null;function Twe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new lk(n,r,t)}function IC(e){return e.toLowerCase()}let Hc=class{constructor(t,n){this.property=t,this.attribute=n}};Hc.prototype.space=null;Hc.prototype.boolean=!1;Hc.prototype.booleanish=!1;Hc.prototype.overloadedBoolean=!1;Hc.prototype.number=!1;Hc.prototype.commaSeparated=!1;Hc.prototype.spaceSeparated=!1;Hc.prototype.commaOrSpaceSeparated=!1;Hc.prototype.mustUseProperty=!1;Hc.prototype.defined=!1;let TQe=0;const yn=Fb(),vs=Fb(),Awe=Fb(),nt=Fb(),ei=Fb(),Hw=Fb(),cl=Fb();function Fb(){return 2**++TQe}const n7=Object.freeze(Object.defineProperty({__proto__:null,boolean:yn,booleanish:vs,commaOrSpaceSeparated:cl,commaSeparated:Hw,number:nt,overloadedBoolean:Awe,spaceSeparated:ei},Symbol.toStringTag,{value:"Module"})),Fj=Object.keys(n7);class wY extends Hc{constructor(t,n,r,i){let s=-1;if(super(t,n),rae(this,"space",i),typeof r=="number")for(;++s<Fj.length;){const o=Fj[s];rae(this,Fj[s],(r&n7[o])===n7[o])}}}wY.prototype.defined=!0;function rae(e,t,n){n&&(e[t]=n)}const AQe={}.hasOwnProperty;function rS(e){const t={},n={};let r;for(r in e.properties)if(AQe.call(e.properties,r)){const i=e.properties[r],s=new wY(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[IC(r)]=r,n[IC(s.attribute)]=r}return new lk(t,n,e.space)}const Cwe=rS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Iwe=rS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function kwe(e,t){return t in e?e[t]:t}function Rwe(e,t){return kwe(e,t.toLowerCase())}const Nwe=rS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Rwe,properties:{xmlns:null,xmlnsXLink:null}}),Pwe=rS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:vs,ariaAutoComplete:null,ariaBusy:vs,ariaChecked:vs,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ei,ariaCurrent:null,ariaDescribedBy:ei,ariaDetails:null,ariaDisabled:vs,ariaDropEffect:ei,ariaErrorMessage:null,ariaExpanded:vs,ariaFlowTo:ei,ariaGrabbed:vs,ariaHasPopup:null,ariaHidden:vs,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ei,ariaLevel:nt,ariaLive:null,ariaModal:vs,ariaMultiLine:vs,ariaMultiSelectable:vs,ariaOrientation:null,ariaOwns:ei,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:vs,ariaReadOnly:vs,ariaRelevant:null,ariaRequired:vs,ariaRoleDescription:ei,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:vs,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),CQe=rS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Rwe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:Hw,acceptCharset:ei,accessKey:ei,action:null,allow:null,allowFullScreen:yn,allowPaymentRequest:yn,allowUserMedia:yn,alt:null,as:null,async:yn,autoCapitalize:null,autoComplete:ei,autoFocus:yn,autoPlay:yn,blocking:ei,capture:null,charSet:null,checked:yn,cite:null,className:ei,cols:nt,colSpan:null,content:null,contentEditable:vs,controls:yn,controlsList:ei,coords:nt|Hw,crossOrigin:null,data:null,dateTime:null,decoding:null,default:yn,defer:yn,dir:null,dirName:null,disabled:yn,download:Awe,draggable:vs,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:yn,formTarget:null,headers:ei,height:nt,hidden:yn,high:nt,href:null,hrefLang:null,htmlFor:ei,httpEquiv:ei,id:null,imageSizes:null,imageSrcSet:null,inert:yn,inputMode:null,integrity:null,is:null,isMap:yn,itemId:null,itemProp:ei,itemRef:ei,itemScope:yn,itemType:ei,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:yn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:yn,muted:yn,name:null,nonce:null,noModule:yn,noValidate:yn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:yn,optimum:nt,pattern:null,ping:ei,placeholder:null,playsInline:yn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:yn,referrerPolicy:null,rel:ei,required:yn,reversed:yn,rows:nt,rowSpan:nt,sandbox:ei,scope:null,scoped:yn,seamless:yn,selected:yn,shadowRootClonable:yn,shadowRootDelegatesFocus:yn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:vs,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:yn,useMap:null,value:vs,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ei,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:yn,declare:yn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:yn,noHref:yn,noShade:yn,noWrap:yn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:vs,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:yn,disableRemotePlayback:yn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),IQe=rS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:kwe,properties:{about:cl,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ei,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:yn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:Hw,g2:Hw,glyphName:Hw,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:cl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ei,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:cl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:cl,rev:cl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:cl,requiredFeatures:cl,requiredFonts:cl,requiredFormats:cl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:cl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:cl,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:cl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),kQe=/^data[-\w.:]+$/i,iae=/-[a-z]/g,RQe=/[A-Z]/g;function XL(e,t){const n=IC(t);let r=t,i=Hc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&kQe.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(iae,PQe);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!iae.test(s)){let o=s.replace(RQe,NQe);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=wY}return new i(r,t)}function NQe(e){return"-"+e.toLowerCase()}function PQe(e){return e.charAt(1).toUpperCase()}const DQe={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},ck=Twe([Iwe,Cwe,Nwe,Pwe,CQe],"html"),Py=Twe([Iwe,Cwe,Nwe,Pwe,IQe],"svg");function sae(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Dwe(e){return e.join(" ").trim()}var Owe={},oae=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,OQe=/\n/g,$Qe=/^\s*/,MQe=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,LQe=/^:\s*/,FQe=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,jQe=/^[;\s]*/,BQe=/^\s+|\s+$/g,UQe=`
`,aae="/",uae="*",Fv="",zQe="comment",VQe="declaration",HQe=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(OQe);m&&(n+=m.length);var g=p.lastIndexOf(UQe);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u($Qe)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(aae!=e.charAt(0)||uae!=e.charAt(1))){for(var m=2;Fv!=e.charAt(m)&&(uae!=e.charAt(m)||aae!=e.charAt(m+1));)++m;if(m+=2,Fv===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:zQe,comment:g})}}function d(){var p=s(),m=u(MQe);if(m){if(f(),!u(LQe))return a("property missing ':'");var g=u(FQe),y=p({type:VQe,property:lae(m[0].replace(oae,Fv)),value:g?lae(g[0].replace(oae,Fv)):Fv});return u(jQe),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function lae(e){return e?e.replace(BQe,Fv):Fv}var qQe=to&&to.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Owe,"__esModule",{value:!0});var WQe=qQe(HQe);function GQe(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,WQe.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var cae=Owe.default=GQe;const YQe=cae.default||cae,QL=$we("end"),Hh=$we("start");function $we(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function KQe(e){const t=Hh(e),n=QL(e);if(t&&n)return{start:t,end:n}}function dA(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?fae(e.position):"start"in e||"end"in e?fae(e):"line"in e||"column"in e?r7(e):""}function r7(e){return dae(e&&e.line)+":"+dae(e&&e.column)}function fae(e){return r7(e&&e.start)+"-"+r7(e&&e.end)}function dae(e){return e&&typeof e=="number"?e:1}class Sa extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=dA(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}Sa.prototype.file="";Sa.prototype.name="";Sa.prototype.reason="";Sa.prototype.message="";Sa.prototype.stack="";Sa.prototype.column=void 0;Sa.prototype.line=void 0;Sa.prototype.ancestors=void 0;Sa.prototype.cause=void 0;Sa.prototype.fatal=void 0;Sa.prototype.place=void 0;Sa.prototype.ruleId=void 0;Sa.prototype.source=void 0;const EY={}.hasOwnProperty,XQe=new Map,QQe=/[A-Z]/g,JQe=/-([a-z])/g,ZQe=new Set(["table","tbody","thead","tfoot","tr"]),eJe=new Set(["td","th"]),Mwe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function tJe(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=lJe(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=uJe(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Py:ck,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=Lwe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function Lwe(e,t,n){if(t.type==="element")return nJe(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return rJe(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return sJe(e,t,n);if(t.type==="mdxjsEsm")return iJe(e,t);if(t.type==="root")return oJe(e,t,n);if(t.type==="text")return aJe(e,t)}function nJe(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Py,e.schema=i),e.ancestors.push(t);const s=jwe(e,t.tagName,!1),o=cJe(e,t);let a=SY(e,t);return ZQe.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!SQe(u):!0})),Fwe(e,o,s,t),xY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function rJe(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}kC(e,t.position)}function iJe(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);kC(e,t.position)}function sJe(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Py,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:jwe(e,t.name,!0),o=fJe(e,t),a=SY(e,t);return Fwe(e,o,s,t),xY(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function oJe(e,t,n){const r={};return xY(r,SY(e,t)),e.create(t,e.Fragment,r,n)}function aJe(e,t){return t.value}function Fwe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function xY(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function uJe(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function lJe(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Hh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function cJe(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&EY.call(t.properties,i)){const s=dJe(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&eJe.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function fJe(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else kC(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else kC(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function SY(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:XQe;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=Lwe(e,s,o);a!==void 0&&n.push(a)}return n}function dJe(e,t,n){const r=XL(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?Swe(n):Dwe(n)),r.property==="style"){let i=typeof n=="object"?n:hJe(e,String(n));return e.stylePropertyNameCase==="css"&&(i=pJe(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?DQe[r.property]||r.property:r.attribute,n]}}function hJe(e,t){const n={};try{YQe(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new Sa("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Mwe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(JQe,gJe)),n[o]=s}}function jwe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=tae(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=tae(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return EY.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);kC(e)}function kC(e,t){const n=new Sa("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Mwe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function pJe(e){const t={};let n;for(n in e)EY.call(e,n)&&(t[mJe(n)]=e[n]);return t}function mJe(e){let t=e.replace(QQe,yJe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function gJe(e,t){return t.toUpperCase()}function yJe(e){return"-"+e.toLowerCase()}const jj={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},vJe={};function bJe(e,t){const n=vJe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Bwe(e,r,i)}function Bwe(e,t,n){if(_Je(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return hae(e.children,t,n)}return Array.isArray(e)?hae(e,t,n):""}function hae(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Bwe(e[i],t,n);return r.join("")}function _Je(e){return!!(e&&typeof e=="object")}const pae=document.createElement("i");function TY(e){const t="&"+e+";";pae.innerHTML=t;const n=pae.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function bm(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function hc(e,t){return e.length>0?(bm(e,e.length,0,t),e):t}const mae={}.hasOwnProperty;function wJe(e){const t={};let n=-1;for(;++n<e.length;)EJe(t,e[n]);return t}function EJe(e,t){let n;for(n in t){const i=(mae.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){mae.call(i,o)||(i[o]=[]);const a=s[o];xJe(i[o],Array.isArray(a)?a:a?[a]:[])}}}function xJe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);bm(e,0,0,r)}function Uwe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function qw(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const Ld=Dy(/[A-Za-z]/),xl=Dy(/[\dA-Za-z]/),SJe=Dy(/[#-'*+\--9=?A-Z^-~]/);function i7(e){return e!==null&&(e<32||e===127)}const s7=Dy(/\d/),TJe=Dy(/[\dA-Fa-f]/),AJe=Dy(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function zu(e){return e!==null&&(e<0||e===32)}function br(e){return e===-2||e===-1||e===32}const CJe=Dy(new RegExp("\\p{P}|\\p{S}","u")),IJe=Dy(/\s/);function Dy(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function iS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&xl(e.charCodeAt(n+1))&&xl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function ni(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return br(u)?(e.enter(n),a(u)):t(u)}function a(u){return br(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const kJe={tokenize:RJe};function RJe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),ni(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const NJe={tokenize:PJe},gae={tokenize:DJe};function PJe(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},T),S++;return bm(t.events,E+1,0,t.events.slice(w)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(gae,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(gae,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return en(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const S=t.events.length;let A=S,C,k;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){k=t.events[A][1].end;break}C=!0}for(y(r),T=S;T<t.events.length;)t.events[T][1].end=Object.assign({},k),T++;bm(t.events,A+1,0,t.events.slice(S)),t.events.length=T}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function DJe(e,t,n){return ni(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function yae(e){if(e===null||zu(e)||IJe(e))return 1;if(CJe(e))return 2}function AY(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const o7={name:"attention",tokenize:$Je,resolveAll:OJe};function OJe(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);vae(f,-u),vae(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=hc(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=hc(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=hc(l,AY(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=hc(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=hc(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,bm(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function $Je(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=yae(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=yae(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function vae(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const MJe={name:"autolink",tokenize:LJe};function LJe(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return Ld(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||xl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||xl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||i7(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):SJe(h)?(e.consume(h),l):n(h)}function c(h){return xl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||xl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const JL={tokenize:FJe,partial:!0};function FJe(e,t,n){return r;function r(s){return br(s)?ni(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const zwe={name:"blockQuote",tokenize:jJe,continuation:{tokenize:BJe},exit:UJe};function jJe(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return br(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function BJe(e,t,n){const r=this;return i;function i(o){return br(o)?ni(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(zwe,t,n)(o)}}function UJe(e){e.exit("blockQuote")}const Vwe={name:"characterEscape",tokenize:zJe};function zJe(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return AJe(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Hwe={name:"characterReference",tokenize:VJe};function VJe(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=xl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=TJe,c):(e.enter("characterReferenceValue"),s=7,o=s7,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===xl&&!TY(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const bae={tokenize:qJe,partial:!0},_ae={name:"codeFenced",tokenize:HJe,concrete:!0};function HJe(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),br(T)?ni(e,f,"whitespace")(T):f(T))}function f(T){return T===null||en(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(bae,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||en(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):br(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),ni(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||en(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||en(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&br(T)?ni(e,v,"linePrefix",s+1)(T):v(T)}function v(T){return T===null||en(T)?e.check(bae,m,w)(T):(e.enter("codeFlowValue"),b(T))}function b(T){return T===null||en(T)?(e.exit("codeFlowValue"),v(T)):(e.consume(T),b)}function w(T){return e.exit("codeFenced"),t(T)}function E(T,S,A){let C=0;return k;function k(F){return T.enter("lineEnding"),T.consume(F),T.exit("lineEnding"),N}function N(F){return T.enter("codeFencedFence"),br(F)?ni(T,O,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):O(F)}function O(F){return F===a?(T.enter("codeFencedFenceSequence"),D(F)):A(F)}function D(F){return F===a?(C++,T.consume(F),D):C>=o?(T.exit("codeFencedFenceSequence"),br(F)?ni(T,$,"whitespace")(F):$(F)):A(F)}function $(F){return F===null||en(F)?(T.exit("codeFencedFence"),S(F)):A(F)}}}function qJe(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const Bj={name:"codeIndented",tokenize:GJe},WJe={tokenize:YJe,partial:!0};function GJe(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),ni(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(WJe,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function YJe(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):ni(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const KJe={name:"codeText",tokenize:JJe,resolve:XJe,previous:QJe};function XJe(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function QJe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function JJe(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class ZJe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&bT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),bT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),bT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);bT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);bT(this.left,n.reverse())}}}function bT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function qwe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new ZJe(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,eZe(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return bm(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function eZe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const tZe={tokenize:iZe,resolve:rZe},nZe={tokenize:sZe,partial:!0};function rZe(e){return qwe(e),e}function iZe(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(nZe,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function sZe(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),ni(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Wwe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||i7(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||zu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||i7(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function Gwe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!br(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Ywe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),ni(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function hA(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):br(i)?ni(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const oZe={name:"definition",tokenize:uZe},aZe={tokenize:lZe,partial:!0};function uZe(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return Gwe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=qw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return zu(h)?hA(e,l)(h):l(h)}function l(h){return Wwe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(aZe,f,f)(h)}function f(h){return br(h)?ni(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function lZe(e,t,n){return r;function r(a){return zu(a)?hA(e,i)(a):n(a)}function i(a){return Ywe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return br(a)?ni(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const cZe={name:"hardBreakEscape",tokenize:fZe};function fZe(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const dZe={name:"headingAtx",tokenize:pZe,resolve:hZe};function hZe(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},bm(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function pZe(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||zu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):br(c)?ni(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||zu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const mZe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],wae=["pre","script","style","textarea"],gZe={name:"htmlFlow",tokenize:_Ze,resolveTo:bZe,concrete:!0},yZe={tokenize:EZe,partial:!0},vZe={tokenize:wZe,partial:!0};function bZe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function _Ze(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:P):Ld(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):Ld(j)?(e.consume(j),i=4,r.interrupt?t:P):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:P):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:O:p):n(j)}function m(j){return Ld(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||zu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&wae.includes(G)?(i=1,r.interrupt?t(j):O(j)):mZe.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):O(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||xl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:O):n(j)}function v(j){return br(j)?(e.consume(j),v):k(j)}function b(j){return j===47?(e.consume(j),k):j===58||j===95||Ld(j)?(e.consume(j),w):br(j)?(e.consume(j),b):k(j)}function w(j){return j===45||j===46||j===58||j===95||xl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),T):br(j)?(e.consume(j),E):b(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):br(j)?(e.consume(j),T):A(j)}function S(j){return j===u?(e.consume(j),u=null,C):j===null||en(j)?n(j):(e.consume(j),S)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||zu(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||br(j)?b(j):n(j)}function k(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||en(j)?O(j):br(j)?(e.consume(j),N):n(j)}function O(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),P):j===93&&i===5?(e.consume(j),H):en(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(yZe,W,D)(j)):j===null||en(j)?(e.exit("htmlFlowData"),D(j)):(e.consume(j),O)}function D(j){return e.check(vZe,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||en(j)?D(j):(e.enter("htmlFlowData"),O(j))}function M(j){return j===45?(e.consume(j),P):O(j)}function B(j){return j===47?(e.consume(j),o="",U):O(j)}function U(j){if(j===62){const q=o.toLowerCase();return wae.includes(q)?(e.consume(j),z):O(j)}return Ld(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):O(j)}function H(j){return j===93?(e.consume(j),P):O(j)}function P(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),P):O(j)}function z(j){return j===null||en(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function wZe(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function EZe(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(JL,t,n)}}const xZe={name:"htmlText",tokenize:SZe};function SZe(e,t,n){const r=this;let i,s,o;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),E):P===63?(e.consume(P),b):Ld(P)?(e.consume(P),A):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),s=0,p):Ld(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):en(P)?(o=f,B(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?M(P):P===45?d(P):f(P)}function p(P){const z="CDATA[";return P===z.charCodeAt(s++)?(e.consume(P),s===z.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):en(P)?(o=m,B(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?M(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?M(P):en(P)?(o=v,B(P)):(e.consume(P),v)}function b(P){return P===null?n(P):P===63?(e.consume(P),w):en(P)?(o=b,B(P)):(e.consume(P),b)}function w(P){return P===62?M(P):b(P)}function E(P){return Ld(P)?(e.consume(P),T):n(P)}function T(P){return P===45||xl(P)?(e.consume(P),T):S(P)}function S(P){return en(P)?(o=S,B(P)):br(P)?(e.consume(P),S):M(P)}function A(P){return P===45||xl(P)?(e.consume(P),A):P===47||P===62||zu(P)?C(P):n(P)}function C(P){return P===47?(e.consume(P),M):P===58||P===95||Ld(P)?(e.consume(P),k):en(P)?(o=C,B(P)):br(P)?(e.consume(P),C):M(P)}function k(P){return P===45||P===46||P===58||P===95||xl(P)?(e.consume(P),k):N(P)}function N(P){return P===61?(e.consume(P),O):en(P)?(o=N,B(P)):br(P)?(e.consume(P),N):C(P)}function O(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,D):en(P)?(o=O,B(P)):br(P)?(e.consume(P),O):(e.consume(P),$)}function D(P){return P===i?(e.consume(P),i=void 0,F):P===null?n(P):en(P)?(o=D,B(P)):(e.consume(P),D)}function $(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||zu(P)?C(P):(e.consume(P),$)}function F(P){return P===47||P===62||zu(P)?C(P):n(P)}function M(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function B(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),U}function U(P){return br(P)?ni(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):H(P)}function H(P){return e.enter("htmlTextData"),o(P)}}const CY={name:"labelEnd",tokenize:RZe,resolveTo:kZe,resolveAll:IZe},TZe={tokenize:NZe},AZe={tokenize:PZe},CZe={tokenize:DZe};function IZe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function kZe(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=hc(a,e.slice(s+1,s+r+3)),a=hc(a,[["enter",c,t]]),a=hc(a,AY(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=hc(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=hc(a,e.slice(o+1)),a=hc(a,[["exit",u,t]]),bm(e,s,e.length,a),e}function RZe(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(qw(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(TZe,c,o?c:f)(d):d===91?e.attempt(AZe,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(CZe,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function NZe(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return zu(f)?hA(e,s)(f):s(f)}function s(f){return f===41?c(f):Wwe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return zu(f)?hA(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Ywe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return zu(f)?hA(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function PZe(e,t,n){const r=this;return i;function i(a){return Gwe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(qw(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function DZe(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const OZe={name:"labelStartImage",tokenize:$Ze,resolveAll:CY.resolveAll};function $Ze(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const MZe={name:"labelStartLink",tokenize:LZe,resolveAll:CY.resolveAll};function LZe(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const Uj={name:"lineEnding",tokenize:FZe};function FZe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),ni(e,t,"linePrefix")}}const rD={name:"thematicBreak",tokenize:jZe};function jZe(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),br(l)?ni(e,a,"whitespace")(l):a(l))}}const mu={name:"list",tokenize:zZe,continuation:{tokenize:VZe},exit:qZe},BZe={tokenize:WZe,partial:!0},UZe={tokenize:HZe,partial:!0};function zZe(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:s7(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(rD,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return s7(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(JL,r.interrupt?n:c,e.attempt(BZe,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return br(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function VZe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(JL,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,ni(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!br(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(UZe,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,ni(e,e.attempt(mu,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function HZe(e,t,n){const r=this;return ni(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function qZe(e){e.exit(this.containerState.type)}function WZe(e,t,n){const r=this;return ni(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!br(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Eae={name:"setextUnderline",tokenize:YZe,resolveTo:GZe};function GZe(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function YZe(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),br(l)?ni(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const KZe={tokenize:XZe};function XZe(e){const t=this,n=e.attempt(JL,r,e.attempt(this.parser.constructs.flowInitial,i,ni(e,e.attempt(this.parser.constructs.flow,i,e.attempt(tZe,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const QZe={resolveAll:Xwe()},JZe=Kwe("string"),ZZe=Kwe("text");function Kwe(e){return{tokenize:t,resolveAll:Xwe(e==="text"?eet:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function Xwe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function eet(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function tet(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:S(E),check:S(T),interrupt:S(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=hc(o,N),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=AY(s,l.events,l),l.events)}function d(N,O){return ret(h(N),O)}function h(N){return net(o,N)}function p(){const{line:N,column:O,offset:D,_index:$,_bufferIndex:F}=r;return{line:N,column:O,offset:D,_index:$,_bufferIndex:F}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const O=o[r._index];if(typeof O=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<O.length;)y(O.charCodeAt(r._bufferIndex));else y(O)}}function y(N){c=c(N)}function v(N){en(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function b(N,O){const D=O||{};return D.type=N,D.start=p(),l.events.push(["enter",D,l]),a.push(D),D}function w(N){const O=a.pop();return O.end=p(),l.events.push(["exit",O,l]),O}function E(N,O){A(N,O.from)}function T(N,O){O.restore()}function S(N,O){return D;function D($,F,M){let B,U,H,P;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ve=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?M:j(ne[U])}function j(ne){return ce;function ce(de){return P=C(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(O?Object.assign(Object.create(l),O):l,u,q,G)(de)}}function q(ne){return N(H,P),F}function G(ne){return P.restore(),++U<B.length?j(B[U]):M}}}function A(N,O){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&bm(l.events,O,l.events.length-O,N.resolve(l.events.slice(O),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function C(){const N=p(),O=l.previous,D=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:M,from:$};function M(){r=N,l.previous=O,l.currentConstruct=D,l.events.length=$,a=F,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function net(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function ret(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const iet={42:mu,43:mu,45:mu,48:mu,49:mu,50:mu,51:mu,52:mu,53:mu,54:mu,55:mu,56:mu,57:mu,62:zwe},set={91:oZe},oet={[-2]:Bj,[-1]:Bj,32:Bj},aet={35:dZe,42:rD,45:[Eae,rD],60:gZe,61:Eae,95:rD,96:_ae,126:_ae},uet={38:Hwe,92:Vwe},cet={[-5]:Uj,[-4]:Uj,[-3]:Uj,33:OZe,38:Hwe,42:o7,60:[MJe,xZe],91:MZe,92:[cZe,Vwe],93:CY,95:o7,96:KJe},fet={null:[o7,QZe]},det={null:[42,95]},het={null:[]},pet=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:det,contentInitial:set,disable:het,document:iet,flow:aet,flowInitial:oet,insideSpan:fet,string:uet,text:cet},Symbol.toStringTag,{value:"Module"}));function met(e){const n=wJe([pet,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(kJe),document:i(NJe),flow:i(KZe),string:i(JZe),text:i(ZZe)};return r;function i(s){return o;function o(a){return tet(r,s,a)}}}function get(e){for(;!qwe(e););return e}const xae=/[\0\t\n\r]/g;function yet(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(xae.lastIndex=f,l=xae.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const vet=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function bet(e){return e.replace(vet,_et)}function _et(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Uwe(n.slice(s?2:1),s?16:10)}return TY(n)||e}const Qwe={}.hasOwnProperty;function wet(e,t,n){return typeof t!="string"&&(n=t,t=void 0),Eet(n)(get(met(n).document().write(yet()(e,t,!0))))}function Eet(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(ze),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(yt),blockQuote:s(ve),characterEscape:C,characterReference:C,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(be,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Ke),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(Ue),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:C,htmlText:s(_e,o),htmlTextData:C,image:s(ke),label:o,link:s(ze),listItem:s(Ot),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(We),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(ge),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(F),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(O),hardBreakTrailing:u(O),htmlFlow:u(D),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(B),label:H,labelText:U,lineEnding:N,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:P,resourceTitleString:z,resource:W,setextHeading:u(A),setextHeadingLineSequence:S,setextHeadingText:T,strong:u(),thematicBreak:u()}};Jwe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ce={type:"root",children:[]};const He={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Ln=ut.pop();_t=i(pe,Ln,_t)}for(_t=-1;++_t<pe.length;){const Ln=t[pe[_t][0]];Qwe.call(Ln,pe[_t][1].type)&&Ln[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},He),pe[_t][1])}if(He.tokenStack.length>0){const Ln=He.tokenStack[He.tokenStack.length-1];(Ln[1]||Sae).call(He,void 0,Ln[0])}for(Ce.position={start:pg(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:pg(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(pe,Ce,He){let ut=Ce-1,_t=-1,Ln=!1,Ar,Fn,cr,gn;for(;++ut<=He;){const Cn=pe[ut];switch(Cn[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Cn[0]==="enter"?_t++:_t--,gn=void 0;break}case"lineEndingBlank":{Cn[0]==="enter"&&(Ar&&!gn&&!_t&&!cr&&(cr=ut),gn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:gn=void 0}if(!_t&&Cn[0]==="enter"&&Cn[1].type==="listItemPrefix"||_t===-1&&Cn[0]==="exit"&&(Cn[1].type==="listUnordered"||Cn[1].type==="listOrdered")){if(Ar){let nr=ut;for(Fn=void 0;nr--;){const rr=pe[nr];if(rr[1].type==="lineEnding"||rr[1].type==="lineEndingBlank"){if(rr[0]==="exit")continue;Fn&&(pe[Fn][1].type="lineEndingBlank",Ln=!0),rr[1].type="lineEnding",Fn=nr}else if(!(rr[1].type==="linePrefix"||rr[1].type==="blockQuotePrefix"||rr[1].type==="blockQuotePrefixWhitespace"||rr[1].type==="blockQuoteMarker"||rr[1].type==="listItemIndent"))break}cr&&(!Fn||cr<Fn)&&(Ar._spread=!0),Ar.end=Object.assign({},Fn?pe[Fn][1].start:Cn[1].end),pe.splice(Fn||ut,0,["exit",Ar,Cn[2]]),ut++,He++}if(Cn[1].type==="listItemPrefix"){const nr={type:"listItem",_spread:!1,start:Object.assign({},Cn[1].start),end:void 0};Ar=nr,pe.splice(ut,0,["enter",nr,Cn[2]]),ut++,He++,cr=void 0,gn=!0}}}return pe[Ce][1]._spread=Ln,He}function s(pe,Ce){return He;function He(ut){a.call(this,pe(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ce,He){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ce,He]),pe.position={start:pg(Ce.start),end:void 0}}function u(pe){return Ce;function Ce(He){pe&&pe.call(this,He),l.call(this,He)}}function l(pe,Ce){const He=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ce?Ce.call(this,pe,ut[0]):(ut[1]||Sae).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+dA({start:pe.start,end:pe.end})+"): its not open");He.position.end=pg(pe.end)}function c(){return bJe(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=pe}function p(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=qw(this.sliceSerialize(pe)).toLowerCase()}function b(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function w(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function E(pe){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const He=this.sliceSerialize(pe).length;Ce.depth=He}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function S(pe){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(pe){const He=this.stack[this.stack.length-1].children;let ut=He[He.length-1];(!ut||ut.type!=="text")&&(ut=ht(),ut.position={start:pg(pe.start),end:void 0},He.push(ut)),this.stack.push(ut)}function k(pe){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(pe),Ce.position.end=pg(pe.end)}function N(pe){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const He=Ce.children[Ce.children.length-1];He.position.end=pg(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(C.call(this,pe),k.call(this,pe))}function O(){this.data.atHardBreak=!0}function D(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function $(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function F(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function M(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function U(pe){const Ce=this.sliceSerialize(pe),He=this.stack[this.stack.length-2];He.label=bet(Ce),He.identifier=qw(Ce).toLowerCase()}function H(){const pe=this.stack[this.stack.length-1],Ce=this.resume(),He=this.stack[this.stack.length-1];if(this.data.inReference=!0,He.type==="link"){const ut=pe.children;He.children=ut}else He.alt=Ce}function P(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function z(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(pe){const Ce=this.resume(),He=this.stack[this.stack.length-1];He.label=Ce,He.identifier=qw(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ce=this.sliceSerialize(pe),He=this.data.characterReferenceType;let ut;He?(ut=Uwe(Ce,He==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=TY(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ce=this.stack.pop();Ce.position.end=pg(pe.end)}function de(pe){k.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(pe)}function he(pe){k.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(pe)}function ve(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Ke(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Ue(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function ze(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Ot(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function We(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function pg(e){return{line:e.line,column:e.column,offset:e.offset}}function Jwe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Jwe(e,r):xet(e,r)}}function xet(e,t){let n;for(n in t)if(Qwe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function Sae(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+dA({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+dA({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+dA({start:t.start,end:t.end})+") is still open")}function Tet(e){const t=this;t.parser=n;function n(r){return wet(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function Aet(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function Cet(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function Iet(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function ket(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Ret(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Net(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=iS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function Pet(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Det(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Zwe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function Oet(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zwe(e,t);const i={src:iS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function $et(e,t){const n={src:iS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function Met(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function Let(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zwe(e,t);const i={href:iS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Fet(e,t){const n={href:iS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function jet(e,t,n){const r=e.all(t),i=n?Bet(n):eEe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Bet(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=eEe(n[r])}return t}function eEe(e){const t=e.spread;return t??e.children.length>1}function Uet(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function zet(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Vet(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Het(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function qet(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Hh(t.children[1]),u=QL(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Wet(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Get(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Tae=9,Aae=32;function Yet(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(Cae(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(Cae(t.slice(i),i>0,!1)),s.join("")}function Cae(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Tae||s===Aae;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Tae||s===Aae;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Ket(e,t){const n={type:"text",value:Yet(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Xet(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const Qet={blockquote:Aet,break:Cet,code:Iet,delete:ket,emphasis:Ret,footnoteReference:Net,heading:Pet,html:Det,imageReference:Oet,image:$et,inlineCode:Met,linkReference:Let,link:Fet,listItem:jet,list:Uet,paragraph:zet,root:Vet,strong:Het,table:qet,tableCell:Get,tableRow:Wet,text:Ket,thematicBreak:Xet,toml:_N,yaml:_N,definition:_N,footnoteDefinition:_N};function _N(){}const tEe=-1,ZL=0,HO=1,qO=2,IY=3,kY=4,RY=5,NY=6,nEe=7,rEe=8,Iae=typeof self=="object"?self:globalThis,Jet=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case ZL:case tEe:return n(o,i);case HO:{const a=n([],i);for(const u of o)a.push(r(u));return a}case qO:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case IY:return n(new Date(o),i);case kY:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case RY:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case NY:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case nEe:{const{name:a,message:u}=o;return n(new Iae[a](u),i)}case rEe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Iae[s](o),i)};return r},kae=e=>Jet(new Map,e)(0),T_="",{toString:Zet}={},{keys:ett}=Object,_T=e=>{const t=typeof e;if(t!=="object"||!e)return[ZL,t];const n=Zet.call(e).slice(8,-1);switch(n){case"Array":return[HO,T_];case"Object":return[qO,T_];case"Date":return[IY,T_];case"RegExp":return[kY,T_];case"Map":return[RY,T_];case"Set":return[NY,T_]}return n.includes("Array")?[HO,n]:n.includes("Error")?[nEe,n]:[qO,n]},wN=([e,t])=>e===ZL&&(t==="function"||t==="symbol"),ttt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=_T(o);switch(a){case ZL:{let c=o;switch(u){case"bigint":a=rEe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([tEe],o)}return i([a,c],o)}case HO:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case qO:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of ett(o))(e||!wN(_T(o[d])))&&c.push([s(d),s(o[d])]);return f}case IY:return i([a,o.toISOString()],o);case kY:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case RY:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(wN(_T(d))||wN(_T(h))))&&c.push([s(d),s(h)]);return f}case NY:{const c=[],f=i([a,c],o);for(const d of o)(e||!wN(_T(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Rae=(e,{json:t,lossy:n}={})=>{const r=[];return ttt(!(t||n),!!t,new Map,r)(e),r},PE=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?kae(Rae(e,t)):structuredClone(e):(e,t)=>kae(Rae(e,t));function ntt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function rtt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function itt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||ntt,r=e.options.footnoteBackLabel||rtt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=iS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...PE(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const iEe=function(e){if(e==null)return utt;if(typeof e=="function")return e6(e);if(typeof e=="object")return Array.isArray(e)?stt(e):ott(e);if(typeof e=="string")return att(e);throw new Error("Expected function, string, or object as test")};function stt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=iEe(e[n]);return e6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function ott(e){const t=e;return e6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function att(e){return e6(t);function t(n){return n&&n.type===e}}function e6(e){return t;function t(n,r,i){return!!(ltt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function utt(){return!0}function ltt(e){return e!==null&&typeof e=="object"&&"type"in e}const sEe=[],ctt=!0,Nae=!1,ftt="skip";function dtt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=iEe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=sEe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=htt(n(u,c)),h[0]===Nae))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==ftt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Nae)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function htt(e){return Array.isArray(e)?e:typeof e=="number"?[ctt,e]:e==null?sEe:[e]}function PY(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),dtt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const a7={}.hasOwnProperty,ptt={};function mtt(e,t){const n=t||ptt,r=new Map,i=new Map,s=new Map,o={...Qet,...n.handlers},a={all:l,applyData:ytt,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:gtt,wrap:btt};return PY(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(a7.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=PE(g);return y.children=a.all(c),y}return PE(c)}return(a.options.unknownHandler||vtt)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Pae(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Pae(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function gtt(e,t){e.position&&(t.position=KQe(e))}function ytt(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,PE(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function vtt(e,t){const n=t.data||{},r="value"in t&&!(a7.call(n,"hProperties")||a7.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function btt(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Pae(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Dae(e,t){const n=mtt(e,t),r=n.one(e,void 0),i=itt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function _tt(e,t){return e&&"run"in e?async function(n,r){const i=Dae(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Dae(n,{file:r,...t||e})}}function Oae(e){if(e)throw e}var iD=Object.prototype.hasOwnProperty,oEe=Object.prototype.toString,$ae=Object.defineProperty,Mae=Object.getOwnPropertyDescriptor,Lae=function(t){return typeof Array.isArray=="function"?Array.isArray(t):oEe.call(t)==="[object Array]"},Fae=function(t){if(!t||oEe.call(t)!=="[object Object]")return!1;var n=iD.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&iD.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||iD.call(t,i)},jae=function(t,n){$ae&&n.name==="__proto__"?$ae(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},Bae=function(t,n){if(n==="__proto__")if(iD.call(t,n)){if(Mae)return Mae(t,n).value}else return;return t[n]},wtt=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=Bae(a,n),i=Bae(t,n),a!==i&&(c&&i&&(Fae(i)||(s=Lae(i)))?(s?(s=!1,o=r&&Lae(r)?r:[]):o=r&&Fae(r)?r:{},jae(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&jae(a,{name:n,newValue:i}));return a};const zj=Gl(wtt);function u7(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function Ett(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?xtt(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function xtt(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const Cd={basename:Stt,dirname:Ttt,extname:Att,join:Ctt,sep:"/"};function Stt(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');fk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function Ttt(e){if(fk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function Att(e){fk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function Ctt(...e){let t=-1,n;for(;++t<e.length;)fk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":Itt(n)}function Itt(e){fk(e);const t=e.codePointAt(0)===47;let n=ktt(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function ktt(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function fk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const Rtt={cwd:Ntt};function Ntt(){return"/"}function l7(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function Ptt(e){if(typeof e=="string")e=new URL(e);else if(!l7(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return Dtt(e)}function Dtt(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const Vj=["history","path","basename","stem","extname","dirname"];class aEe{constructor(t){let n;t?l7(t)?n={path:t}:typeof t=="string"||Ott(t)?n={value:t}:n=t:n={},this.cwd=Rtt.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<Vj.length;){const s=Vj[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)Vj.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Cd.basename(this.path):void 0}set basename(t){qj(t,"basename"),Hj(t,"basename"),this.path=Cd.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Cd.dirname(this.path):void 0}set dirname(t){Uae(this.basename,"dirname"),this.path=Cd.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Cd.extname(this.path):void 0}set extname(t){if(Hj(t,"extname"),Uae(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Cd.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){l7(t)&&(t=Ptt(t)),qj(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Cd.basename(this.path,this.extname):void 0}set stem(t){qj(t,"stem"),Hj(t,"stem"),this.path=Cd.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new Sa(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function Hj(e,t){if(e&&e.includes(Cd.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Cd.sep+"`")}function qj(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function Uae(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function Ott(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const $tt=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},Mtt={}.hasOwnProperty;class DY extends $tt{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=Ett()}copy(){const t=new DY;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(zj(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(Yj("data",this.frozen),this.namespace[t]=n,this):Mtt.call(this.namespace,t)&&this.namespace[t]||void 0:t?(Yj("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=EN(t),r=this.parser||this.Parser;return Wj("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),Wj("process",this.parser||this.Parser),Gj("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=EN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);jtt(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),Wj("processSync",this.parser||this.Parser),Gj("processSync",this.compiler||this.Compiler),this.process(t,i),Vae("processSync","process",n),r;function i(s,o){n=!0,Oae(s),r=o}}run(t,n,r){zae(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=EN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),Vae("runSync","run",r),i;function s(o,a){Oae(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=EN(n),i=this.compiler||this.Compiler;return Gj("stringify",i),zae(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(Yj("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=zj(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];u7(m)&&u7(h)&&(h=zj(!0,m,h)),r[d]=[l,h,...p]}}}}const Ltt=new DY().freeze();function Wj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function Gj(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function Yj(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function zae(e){if(!u7(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function Vae(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function EN(e){return Ftt(e)?e:new aEe(e)}function Ftt(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function jtt(e){return typeof e=="string"||Btt(e)}function Btt(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Utt="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",Hae=[],qae={allowDangerousHtml:!0},ztt=/^(https?|ircs?|mailto|xmpp)$/i,Vtt=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Htt(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||Hae,u=e.remarkPlugins||Hae,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...qae}:qae,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||qtt,h=Ltt().use(Tet).use(u).use(_tt,l).use(a),p=new aEe;typeof r=="string"&&(p.value=r);for(const v of Vtt)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Utt+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),PY(g,y),tJe(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in jj)if(Object.hasOwn(jj,E)&&Object.hasOwn(v.properties,E)){const T=v.properties[E],S=jj[E];(S===null||S.includes(v.tagName))&&(v.properties[E]=d(String(T||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function qtt(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||ztt.test(e.slice(0,t))?e:""}const Wae=/[#.]/g;function Wtt(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){Wae.lastIndex=i;const a=Wae.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Gtt=new Set(["button","menu","reset","submit"]),c7={}.hasOwnProperty;function uEe(e,t,n){const r=n&&Qtt(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Wtt(s,t),l.tagName=l.tagName.toLowerCase(),r&&c7.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Ytt(o,l.tagName)){let c;for(c in o)c7.call(o,c)&&Ktt(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)f7(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Ytt(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Gtt.has(e.type.toLowerCase()):!("value"in e)}function Ktt(e,t,n,r){const i=XL(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=sae(r):i.commaSeparated?o=eae(r):i.commaOrSpaceSeparated?o=sae(eae(r).join(" ")):o=Gae(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Xtt(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=Gae(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function f7(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)f7(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?f7(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function Gae(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||IC(n)===IC(t)))return!0}return n}function Xtt(e){const t=[];let n;for(n in e)c7.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function Qtt(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Jtt=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Ztt=uEe(ck,"div"),ent=uEe(Py,"g",Jtt),Kj=/\r?\n|\r/g;function tnt(e){const t=String(e),n=[];for(Kj.lastIndex=0;Kj.test(t);)n.push(Kj.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const n1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},lEe={}.hasOwnProperty,nnt=Object.prototype;function rnt(e,t){const n=t||{};return OY({file:n.file||void 0,location:!1,schema:n.space==="svg"?Py:ck,verbose:n.verbose||!1},e)}function OY(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},sD(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:cEe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=tnt(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},sD(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},sD(e,r,n),n}default:return n=int(e,t),n}}function cEe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=OY(e,t[n]);r.push(i)}return r}function int(e,t){const n=e.schema;e.schema=t.namespaceURI===n1.svg?Py:ck;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;lEe.call(nnt,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?ent:Ztt)(t.tagName,i,cEe(e,t.childNodes));if(sD(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&bw(u.startTag),c=u&&u.endTag&&bw(u.endTag),f=OY(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function sD(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=snt(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function snt(e,t,n){const r=bw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)lEe.call(n.attrs,o)&&(s[XL(e.schema,o).property]=bw(n.attrs[o]));n.startTag;const a=bw(n.startTag),u=n.endTag?bw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function bw(e){const t=Yae({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=Yae({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function Yae(e){return e.line&&e.column?e:void 0}const Kae={}.hasOwnProperty;function fEe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&Kae.call(i,e)){const u=String(i[e]);o=Kae.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const ont={},ant={}.hasOwnProperty,dEe=fEe("type",{handlers:{root:lnt,element:pnt,text:dnt,comment:hnt,doctype:fnt}});function unt(e,t){const r=(t||ont).space;return dEe(e,r==="svg"?Py:ck)}function lnt(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=$Y(e.children,n,t),sS(e,n),n}function cnt(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=$Y(e.children,n,t),sS(e,n),n}function fnt(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return sS(e,t),t}function dnt(e){const t={nodeName:"#text",value:e.value,parentNode:null};return sS(e,t),t}function hnt(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return sS(e,t),t}function pnt(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Py);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&ant.call(e.properties,s)){const u=mnt(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:n1[o],childNodes:[],parentNode:null};return a.childNodes=$Y(e.children,a,r),sS(e,a),e.tagName==="template"&&e.content&&(a.content=cnt(e.content,r)),a}function mnt(e,t,n){const r=XL(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?Swe(n):Dwe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=n1[r.space]}return i}function $Y(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=dEe(e[r],n);s.parentNode=t,i.push(s)}return i}function sS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const gnt=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],ynt=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),gi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const du={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function hEe(e){return e>=55296&&e<=57343}function vnt(e){return e>=56320&&e<=57343}function bnt(e,t){return(e-55296)*1024+9216+t}function pEe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function mEe(e){return e>=64976&&e<=65007||ynt.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const _nt=65536;class wnt{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=_nt,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(vnt(n))return this.pos++,this._addGap(),bnt(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,hEe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){pEe(t)?this._err(Ne.controlCharacterInInputStream):mEe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var kn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(kn=kn||(kn={}));function gEe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const _g=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),Ent=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var Xj;const xnt=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),Snt=(Xj=String.fromCodePoint)!==null&&Xj!==void 0?Xj:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function Tnt(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=xnt.get(e))!==null&&t!==void 0?t:e}var Zs;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(Zs||(Zs={}));const Ant=32;var Qd;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(Qd||(Qd={}));function d7(e){return e>=Zs.ZERO&&e<=Zs.NINE}function Cnt(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_F||e>=Zs.LOWER_A&&e<=Zs.LOWER_F}function Int(e){return e>=Zs.UPPER_A&&e<=Zs.UPPER_Z||e>=Zs.LOWER_A&&e<=Zs.LOWER_Z||d7(e)}function knt(e){return e===Zs.EQUALS||Int(e)}var Ws;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Ws||(Ws={}));var jv;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(jv||(jv={}));class Rnt{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Ws.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=jv.Strict}startEntity(t){this.decodeMode=t,this.state=Ws.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Ws.EntityStart:return t.charCodeAt(n)===Zs.NUM?(this.state=Ws.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Ws.NamedEntity,this.stateNamedEntity(t,n));case Ws.NumericStart:return this.stateNumericStart(t,n);case Ws.NumericDecimal:return this.stateNumericDecimal(t,n);case Ws.NumericHex:return this.stateNumericHex(t,n);case Ws.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|Ant)===Zs.LOWER_X?(this.state=Ws.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Ws.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(d7(i)||Cnt(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(d7(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===Zs.SEMI)this.consumed+=1;else if(this.decodeMode===jv.Strict)return 0;return this.emitCodePoint(Tnt(this.result),this.consumed),this.errors&&(t!==Zs.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&Qd.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=vEe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===jv.Attribute&&(s===0||knt(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&Qd.VALUE_LENGTH)>>14,s!==0){if(o===Zs.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==jv.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&Qd.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~Qd.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Ws.NamedEntity:return this.result!==0&&(this.decodeMode!==jv.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Ws.NumericDecimal:return this.emitNumericEntity(0,2);case Ws.NumericHex:return this.emitNumericEntity(0,3);case Ws.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Ws.EntityStart:return 0}}}function yEe(e){let t="";const n=new Rnt(e,r=>t+=Snt(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function vEe(e,t,n,r){const i=(t&Qd.BRANCH_LENGTH)>>7,s=t&Qd.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}yEe(_g);yEe(Ent);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var v0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(v0=v0||(v0={}));var ml;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(ml=ml||(ml={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var R;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(R=R||(R={}));const Nnt=new Map([[Ee.A,R.A],[Ee.ADDRESS,R.ADDRESS],[Ee.ANNOTATION_XML,R.ANNOTATION_XML],[Ee.APPLET,R.APPLET],[Ee.AREA,R.AREA],[Ee.ARTICLE,R.ARTICLE],[Ee.ASIDE,R.ASIDE],[Ee.B,R.B],[Ee.BASE,R.BASE],[Ee.BASEFONT,R.BASEFONT],[Ee.BGSOUND,R.BGSOUND],[Ee.BIG,R.BIG],[Ee.BLOCKQUOTE,R.BLOCKQUOTE],[Ee.BODY,R.BODY],[Ee.BR,R.BR],[Ee.BUTTON,R.BUTTON],[Ee.CAPTION,R.CAPTION],[Ee.CENTER,R.CENTER],[Ee.CODE,R.CODE],[Ee.COL,R.COL],[Ee.COLGROUP,R.COLGROUP],[Ee.DD,R.DD],[Ee.DESC,R.DESC],[Ee.DETAILS,R.DETAILS],[Ee.DIALOG,R.DIALOG],[Ee.DIR,R.DIR],[Ee.DIV,R.DIV],[Ee.DL,R.DL],[Ee.DT,R.DT],[Ee.EM,R.EM],[Ee.EMBED,R.EMBED],[Ee.FIELDSET,R.FIELDSET],[Ee.FIGCAPTION,R.FIGCAPTION],[Ee.FIGURE,R.FIGURE],[Ee.FONT,R.FONT],[Ee.FOOTER,R.FOOTER],[Ee.FOREIGN_OBJECT,R.FOREIGN_OBJECT],[Ee.FORM,R.FORM],[Ee.FRAME,R.FRAME],[Ee.FRAMESET,R.FRAMESET],[Ee.H1,R.H1],[Ee.H2,R.H2],[Ee.H3,R.H3],[Ee.H4,R.H4],[Ee.H5,R.H5],[Ee.H6,R.H6],[Ee.HEAD,R.HEAD],[Ee.HEADER,R.HEADER],[Ee.HGROUP,R.HGROUP],[Ee.HR,R.HR],[Ee.HTML,R.HTML],[Ee.I,R.I],[Ee.IMG,R.IMG],[Ee.IMAGE,R.IMAGE],[Ee.INPUT,R.INPUT],[Ee.IFRAME,R.IFRAME],[Ee.KEYGEN,R.KEYGEN],[Ee.LABEL,R.LABEL],[Ee.LI,R.LI],[Ee.LINK,R.LINK],[Ee.LISTING,R.LISTING],[Ee.MAIN,R.MAIN],[Ee.MALIGNMARK,R.MALIGNMARK],[Ee.MARQUEE,R.MARQUEE],[Ee.MATH,R.MATH],[Ee.MENU,R.MENU],[Ee.META,R.META],[Ee.MGLYPH,R.MGLYPH],[Ee.MI,R.MI],[Ee.MO,R.MO],[Ee.MN,R.MN],[Ee.MS,R.MS],[Ee.MTEXT,R.MTEXT],[Ee.NAV,R.NAV],[Ee.NOBR,R.NOBR],[Ee.NOFRAMES,R.NOFRAMES],[Ee.NOEMBED,R.NOEMBED],[Ee.NOSCRIPT,R.NOSCRIPT],[Ee.OBJECT,R.OBJECT],[Ee.OL,R.OL],[Ee.OPTGROUP,R.OPTGROUP],[Ee.OPTION,R.OPTION],[Ee.P,R.P],[Ee.PARAM,R.PARAM],[Ee.PLAINTEXT,R.PLAINTEXT],[Ee.PRE,R.PRE],[Ee.RB,R.RB],[Ee.RP,R.RP],[Ee.RT,R.RT],[Ee.RTC,R.RTC],[Ee.RUBY,R.RUBY],[Ee.S,R.S],[Ee.SCRIPT,R.SCRIPT],[Ee.SECTION,R.SECTION],[Ee.SELECT,R.SELECT],[Ee.SOURCE,R.SOURCE],[Ee.SMALL,R.SMALL],[Ee.SPAN,R.SPAN],[Ee.STRIKE,R.STRIKE],[Ee.STRONG,R.STRONG],[Ee.STYLE,R.STYLE],[Ee.SUB,R.SUB],[Ee.SUMMARY,R.SUMMARY],[Ee.SUP,R.SUP],[Ee.TABLE,R.TABLE],[Ee.TBODY,R.TBODY],[Ee.TEMPLATE,R.TEMPLATE],[Ee.TEXTAREA,R.TEXTAREA],[Ee.TFOOT,R.TFOOT],[Ee.TD,R.TD],[Ee.TH,R.TH],[Ee.THEAD,R.THEAD],[Ee.TITLE,R.TITLE],[Ee.TR,R.TR],[Ee.TRACK,R.TRACK],[Ee.TT,R.TT],[Ee.U,R.U],[Ee.UL,R.UL],[Ee.SVG,R.SVG],[Ee.VAR,R.VAR],[Ee.WBR,R.WBR],[Ee.XMP,R.XMP]]);function oS(e){var t;return(t=Nnt.get(e))!==null&&t!==void 0?t:R.UNKNOWN}const Qe=R,Pnt={[Fe.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Fe.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Fe.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function bEe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const Dnt=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const os={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function pA(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function m2(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function Ont(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function wg(e){return Ont(e)||m2(e)}function h7(e){return wg(e)||pA(e)}function _Ee(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function wEe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function $nt(e){return pA(e)||_Ee(e)||wEe(e)}function xN(e){return e+32}function EEe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function Mnt(e){return e===X.EQUALS_SIGN||h7(e)}function Xae(e){return EEe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class Lnt{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new wnt(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:kn.START_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:kn.END_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:kn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:kn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(gEe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=oS(t.tagName),t.type===kn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case kn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case kn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case kn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:kn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=EEe(t)?kn.WHITESPACE_CHARACTER:t===X.NULL?kn.NULL_CHARACTER:kn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(kn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=_g[0];s>=0&&(s=vEe(_g,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=_g[s];const a=o&Qd.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&Mnt(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[_g[s]&~Qd.VALUE_LENGTH]:u===1?[_g[++s]]:[_g[++s],_g[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(wg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(wg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(m2(t)?xN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){wg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){wg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){wg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:wg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){wg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(du.SCRIPT,!1)&&Xae(this.preprocessor.peek(du.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<du.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(gi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(du.SCRIPT,!1)&&Xae(this.preprocessor.peek(du.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<du.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=gi;break}default:this.currentAttr.name+=String.fromCodePoint(m2(t)?xN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=gi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=gi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(du.DASH_DASH,!0)?(this._createCommentToken(du.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(du.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(du.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(du.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(du.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=gi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(m2(t))this._createDoctypeToken(String.fromCharCode(xN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(gi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=gi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(m2(t)?xN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(du.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(du.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=gi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:h7(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){h7(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:pA(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){$nt(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){_Ee(t)?this.charRefCode=this.charRefCode*16+t-55:wEe(t)?this.charRefCode=this.charRefCode*16+t-87:pA(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){pA(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(hEe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(mEe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(pEe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=Dnt.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const xEe=new Set([R.DD,R.DT,R.LI,R.OPTGROUP,R.OPTION,R.P,R.RB,R.RP,R.RT,R.RTC]),Qae=new Set([...xEe,R.CAPTION,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]),SN=new Map([[R.APPLET,Fe.HTML],[R.CAPTION,Fe.HTML],[R.HTML,Fe.HTML],[R.MARQUEE,Fe.HTML],[R.OBJECT,Fe.HTML],[R.TABLE,Fe.HTML],[R.TD,Fe.HTML],[R.TEMPLATE,Fe.HTML],[R.TH,Fe.HTML],[R.ANNOTATION_XML,Fe.MATHML],[R.MI,Fe.MATHML],[R.MN,Fe.MATHML],[R.MO,Fe.MATHML],[R.MS,Fe.MATHML],[R.MTEXT,Fe.MATHML],[R.DESC,Fe.SVG],[R.FOREIGN_OBJECT,Fe.SVG],[R.TITLE,Fe.SVG]]),Fnt=[R.H1,R.H2,R.H3,R.H4,R.H5,R.H6],jnt=[R.TR,R.TEMPLATE,R.HTML],Bnt=[R.TBODY,R.TFOOT,R.THEAD,R.TEMPLATE,R.HTML],Unt=[R.TABLE,R.TEMPLATE,R.HTML],znt=[R.TD,R.TH];class Vnt{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=R.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===R.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Fnt,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(znt,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Unt,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Bnt,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(jnt,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===R.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===R.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(SN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(bEe(n)&&r===Fe.HTML)return!0;if(SN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===R.UL||r===R.OL)&&i===Fe.HTML||SN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===R.BUTTON&&i===Fe.HTML||SN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===R.TABLE||r===R.TEMPLATE||r===R.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===R.TBODY||n===R.THEAD||n===R.TFOOT)return!0;if(n===R.TABLE||n===R.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==R.OPTION&&r!==R.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;xEe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;Qae.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&Qae.has(this.currentTagId);)this.pop()}}const Qj=3;var gf;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(gf=gf||(gf={}));const Jae={type:gf.Marker};class Hnt{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===gf.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<Qj)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<Qj)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=Qj&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(Jae)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:gf.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:gf.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(Jae);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===gf.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===gf.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===gf.Element&&n.element===t)}}function Zae(e){return{nodeName:"#text",value:e,parentNode:null}}const K_={createDocument(){return{nodeName:"#document",mode:ml.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};K_.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(K_.isTextNode(n)){n.value+=t;return}}K_.appendChild(e,Zae(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&K_.isTextNode(r)?r.value+=t:K_.insertBefore(e,Zae(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},SEe="html",qnt="about:legacy-compat",Wnt="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",TEe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Gnt=[...TEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Ynt=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),AEe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Knt=[...AEe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function eue(e,t){return t.some(n=>e.startsWith(n))}function Xnt(e){return e.name===SEe&&e.publicId===null&&(e.systemId===null||e.systemId===qnt)}function Qnt(e){if(e.name!==SEe)return ml.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Wnt)return ml.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Ynt.has(n))return ml.QUIRKS;let r=t===null?Gnt:TEe;if(eue(n,r))return ml.QUIRKS;if(r=t===null?AEe:Knt,eue(n,r))return ml.LIMITED_QUIRKS}return ml.NO_QUIRKS}const tue={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Jnt="definitionurl",Znt="definitionURL",ert=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),trt=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),nrt=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),rrt=new Set([R.B,R.BIG,R.BLOCKQUOTE,R.BODY,R.BR,R.CENTER,R.CODE,R.DD,R.DIV,R.DL,R.DT,R.EM,R.EMBED,R.H1,R.H2,R.H3,R.H4,R.H5,R.H6,R.HEAD,R.HR,R.I,R.IMG,R.LI,R.LISTING,R.MENU,R.META,R.NOBR,R.OL,R.P,R.PRE,R.RUBY,R.S,R.SMALL,R.SPAN,R.STRONG,R.STRIKE,R.SUB,R.SUP,R.TABLE,R.TT,R.U,R.UL,R.VAR]);function irt(e){const t=e.tagID;return t===R.FONT&&e.attrs.some(({name:r})=>r===v0.COLOR||r===v0.SIZE||r===v0.FACE)||rrt.has(t)}function CEe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Jnt){e.attrs[t].name=Znt;break}}function IEe(e){for(let t=0;t<e.attrs.length;t++){const n=ert.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function MY(e){for(let t=0;t<e.attrs.length;t++){const n=trt.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function srt(e){const t=nrt.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=oS(e.tagName))}function ort(e,t){return t===Fe.MATHML&&(e===R.MI||e===R.MO||e===R.MN||e===R.MS||e===R.MTEXT)}function art(e,t,n){if(t===Fe.MATHML&&e===R.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===v0.ENCODING){const i=n[r].value.toLowerCase();return i===tue.TEXT_HTML||i===tue.APPLICATION_XML}}return t===Fe.SVG&&(e===R.FOREIGN_OBJECT||e===R.DESC||e===R.TITLE)}function urt(e,t,n,r){return(!r||r===Fe.HTML)&&art(e,t,n)||(!r||r===Fe.MATHML)&&ort(e,t)}const lrt="hidden",crt=8,frt=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const drt={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},kEe=new Set([R.TABLE,R.TBODY,R.TFOOT,R.THEAD,R.TR]),nue={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:K_,onParseError:null};let rue=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={...nue,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new Lnt(this.options,this),this.activeFormattingElements=new Hnt(this.treeAdapter),this.fragmentContextID=r?oS(this.treeAdapter.getTagName(r)):R.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Vnt(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={...nue,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===R.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:drt,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=os.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case R.TITLE:case R.TEXTAREA:{this.tokenizer.state=os.RCDATA;break}case R.STYLE:case R.XMP:case R.IFRAME:case R.NOEMBED:case R.NOFRAMES:case R.NOSCRIPT:{this.tokenizer.state=os.RAWTEXT;break}case R.SCRIPT:{this.tokenizer.state=os.SCRIPT_DATA;break}case R.PLAINTEXT:{this.tokenizer.state=os.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,R.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===kn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===R.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===R.MGLYPH||t.tagID===R.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case kn.CHARACTER:{this.onCharacter(t);break}case kn.NULL_CHARACTER:{this.onNullCharacter(t);break}case kn.COMMENT:{this.onComment(t);break}case kn.DOCTYPE:{this.onDoctype(t);break}case kn.START_TAG:{this._processStartTag(t);break}case kn.END_TAG:{this.onEndTag(t);break}case kn.EOF:{this.onEof(t);break}case kn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return urt(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===gf.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(R.P),this.openElements.popUntilTagNamePopped(R.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case R.TR:{this.insertionMode=ie.IN_ROW;return}case R.TBODY:case R.THEAD:case R.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case R.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case R.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case R.TABLE:{this.insertionMode=ie.IN_TABLE;return}case R.BODY:{this.insertionMode=ie.IN_BODY;return}case R.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case R.SELECT:{this._resetInsertionModeForSelect(t);return}case R.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case R.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case R.TD:case R.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case R.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===R.TEMPLATE)break;if(r===R.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return kEe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case R.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case R.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return Pnt[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){zit(this,t);return}switch(this.insertionMode){case ie.INITIAL:{wT(this,t);break}case ie.BEFORE_HTML:{mA(this,t);break}case ie.BEFORE_HEAD:{gA(this,t);break}case ie.IN_HEAD:{yA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{vA(this,t);break}case ie.AFTER_HEAD:{bA(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{NEe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{Jj(this,t);break}case ie.IN_TABLE_TEXT:{LEe(this,t);break}case ie.IN_COLUMN_GROUP:{WO(this,t);break}case ie.AFTER_BODY:{GO(this,t);break}case ie.AFTER_AFTER_BODY:{oD(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Uit(this,t);return}switch(this.insertionMode){case ie.INITIAL:{wT(this,t);break}case ie.BEFORE_HTML:{mA(this,t);break}case ie.BEFORE_HEAD:{gA(this,t);break}case ie.IN_HEAD:{yA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{vA(this,t);break}case ie.AFTER_HEAD:{bA(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{Jj(this,t);break}case ie.IN_COLUMN_GROUP:{WO(this,t);break}case ie.AFTER_BODY:{GO(this,t);break}case ie.AFTER_AFTER_BODY:{oD(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){p7(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{p7(this,t);break}case ie.IN_TABLE_TEXT:{ET(this,t);break}case ie.AFTER_BODY:{brt(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{_rt(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{wrt(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{ET(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Vit(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{wT(this,t);break}case ie.BEFORE_HTML:{Ert(this,t);break}case ie.BEFORE_HEAD:{Srt(this,t);break}case ie.IN_HEAD:{td(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Crt(this,t);break}case ie.AFTER_HEAD:{krt(this,t);break}case ie.IN_BODY:{Ta(this,t);break}case ie.IN_TABLE:{DE(this,t);break}case ie.IN_TABLE_TEXT:{ET(this,t);break}case ie.IN_CAPTION:{Tit(this,t);break}case ie.IN_COLUMN_GROUP:{jY(this,t);break}case ie.IN_TABLE_BODY:{r6(this,t);break}case ie.IN_ROW:{i6(this,t);break}case ie.IN_CELL:{Iit(this,t);break}case ie.IN_SELECT:{BEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Rit(this,t);break}case ie.IN_TEMPLATE:{Pit(this,t);break}case ie.AFTER_BODY:{Oit(this,t);break}case ie.IN_FRAMESET:{$it(this,t);break}case ie.AFTER_FRAMESET:{Lit(this,t);break}case ie.AFTER_AFTER_BODY:{jit(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Bit(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Hit(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{wT(this,t);break}case ie.BEFORE_HTML:{xrt(this,t);break}case ie.BEFORE_HEAD:{Trt(this,t);break}case ie.IN_HEAD:{Art(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{Irt(this,t);break}case ie.AFTER_HEAD:{Rrt(this,t);break}case ie.IN_BODY:{n6(this,t);break}case ie.TEXT:{mit(this,t);break}case ie.IN_TABLE:{RC(this,t);break}case ie.IN_TABLE_TEXT:{ET(this,t);break}case ie.IN_CAPTION:{Ait(this,t);break}case ie.IN_COLUMN_GROUP:{Cit(this,t);break}case ie.IN_TABLE_BODY:{m7(this,t);break}case ie.IN_ROW:{jEe(this,t);break}case ie.IN_CELL:{kit(this,t);break}case ie.IN_SELECT:{UEe(this,t);break}case ie.IN_SELECT_IN_TABLE:{Nit(this,t);break}case ie.IN_TEMPLATE:{Dit(this,t);break}case ie.AFTER_BODY:{VEe(this,t);break}case ie.IN_FRAMESET:{Mit(this,t);break}case ie.AFTER_FRAMESET:{Fit(this,t);break}case ie.AFTER_AFTER_BODY:{oD(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{wT(this,t);break}case ie.BEFORE_HTML:{mA(this,t);break}case ie.BEFORE_HEAD:{gA(this,t);break}case ie.IN_HEAD:{yA(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{vA(this,t);break}case ie.AFTER_HEAD:{bA(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{$Ee(this,t);break}case ie.TEXT:{git(this,t);break}case ie.IN_TABLE_TEXT:{ET(this,t);break}case ie.IN_TEMPLATE:{zEe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{FY(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{REe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{Jj(this,t);break}case ie.IN_TABLE_TEXT:{MEe(this,t);break}}}};function hrt(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):OEe(e,t),n}function prt(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function mrt(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=frt;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=grt(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function grt(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function yrt(e,t,n){const r=e.treeAdapter.getTagName(t),i=oS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===R.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function vrt(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function LY(e,t){for(let n=0;n<crt;n++){const r=hrt(e,t);if(!r)break;const i=prt(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=mrt(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&yrt(e,o,s),vrt(e,i,r)}}function p7(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function brt(e,t){e._appendCommentNode(t,e.openElements.items[0])}function _rt(e,t){e._appendCommentNode(t,e.document)}function FY(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function wrt(e,t){e._setDocumentType(t);const n=t.forceQuirks?ml.QUIRKS:Qnt(t);Xnt(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function wT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,ml.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function Ert(e,t){t.tagID===R.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):mA(e,t)}function xrt(e,t){const n=t.tagID;(n===R.HTML||n===R.HEAD||n===R.BODY||n===R.BR)&&mA(e,t)}function mA(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function Srt(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:gA(e,t)}}function Trt(e,t){const n=t.tagID;n===R.HEAD||n===R.BODY||n===R.HTML||n===R.BR?gA(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function gA(e,t){e._insertFakeElement(Ee.HEAD,R.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function td(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TITLE:{e._switchToTextParsing(t,os.RCDATA);break}case R.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,os.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case R.NOFRAMES:case R.STYLE:{e._switchToTextParsing(t,os.RAWTEXT);break}case R.SCRIPT:{e._switchToTextParsing(t,os.SCRIPT_DATA);break}case R.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:yA(e,t)}}function Art(e,t){switch(t.tagID){case R.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case R.BODY:case R.BR:case R.HTML:{yA(e,t);break}case R.TEMPLATE:{jb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function jb(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==R.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function yA(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function Crt(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.BASEFONT:case R.BGSOUND:case R.HEAD:case R.LINK:case R.META:case R.NOFRAMES:case R.STYLE:{td(e,t);break}case R.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:vA(e,t)}}function Irt(e,t){switch(t.tagID){case R.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case R.BR:{vA(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function vA(e,t){const n=t.type===kn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function krt(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case R.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,R.HEAD),td(e,t),e.openElements.remove(e.headElement);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:bA(e,t)}}function Rrt(e,t){switch(t.tagID){case R.BODY:case R.HTML:case R.BR:{bA(e,t);break}case R.TEMPLATE:{jb(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function bA(e,t){e._insertFakeElement(Ee.BODY,R.BODY),e.insertionMode=ie.IN_BODY,t6(e,t)}function t6(e,t){switch(t.type){case kn.CHARACTER:{NEe(e,t);break}case kn.WHITESPACE_CHARACTER:{REe(e,t);break}case kn.COMMENT:{p7(e,t);break}case kn.START_TAG:{Ta(e,t);break}case kn.END_TAG:{n6(e,t);break}case kn.EOF:{$Ee(e,t);break}}}function REe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function NEe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function Nrt(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function Prt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function Drt(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function Ort(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function $rt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),bEe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function Mrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function Lrt(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function Frt(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===R.LI&&i===R.LI||(n===R.DD||n===R.DT)&&(i===R.DD||i===R.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==R.ADDRESS&&i!==R.DIV&&i!==R.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function jrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=os.PLAINTEXT}function Brt(e,t){e.openElements.hasInScope(R.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function Urt(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(LY(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function zrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Vrt(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(R.NOBR)&&(LY(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Hrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function qrt(e,t){e.treeAdapter.getDocumentMode(e.document)!==ml.QUIRKS&&e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function PEe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function DEe(e){const t=gEe(e,v0.TYPE);return t!=null&&t.toLowerCase()===lrt}function Wrt(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),DEe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Grt(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function Yrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Krt(e,t){t.tagName=Ee.IMG,t.tagID=R.IMG,PEe(e,t)}function Xrt(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=os.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function Qrt(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function Jrt(e,t){e.framesetOk=!1,e._switchToTextParsing(t,os.RAWTEXT)}function iue(e,t){e._switchToTextParsing(t,os.RAWTEXT)}function Zrt(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function eit(e,t){e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function tit(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function nit(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(R.RTC),e._insertElement(t,Fe.HTML)}function rit(e,t){e._reconstructActiveFormattingElements(),CEe(t),MY(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function iit(e,t){e._reconstructActiveFormattingElements(),IEe(t),MY(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function sue(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Ta(e,t){switch(t.tagID){case R.I:case R.S:case R.B:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.SMALL:case R.STRIKE:case R.STRONG:{zrt(e,t);break}case R.A:{Urt(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{$rt(e,t);break}case R.P:case R.DL:case R.OL:case R.UL:case R.DIV:case R.DIR:case R.NAV:case R.MAIN:case R.MENU:case R.ASIDE:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.DETAILS:case R.ADDRESS:case R.ARTICLE:case R.SECTION:case R.SUMMARY:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{Ort(e,t);break}case R.LI:case R.DD:case R.DT:{Frt(e,t);break}case R.BR:case R.IMG:case R.WBR:case R.AREA:case R.EMBED:case R.KEYGEN:{PEe(e,t);break}case R.HR:{Yrt(e,t);break}case R.RB:case R.RTC:{tit(e,t);break}case R.RT:case R.RP:{nit(e,t);break}case R.PRE:case R.LISTING:{Mrt(e,t);break}case R.XMP:{Qrt(e,t);break}case R.SVG:{iit(e,t);break}case R.HTML:{Nrt(e,t);break}case R.BASE:case R.LINK:case R.META:case R.STYLE:case R.TITLE:case R.SCRIPT:case R.BGSOUND:case R.BASEFONT:case R.TEMPLATE:{td(e,t);break}case R.BODY:{Prt(e,t);break}case R.FORM:{Lrt(e,t);break}case R.NOBR:{Vrt(e,t);break}case R.MATH:{rit(e,t);break}case R.TABLE:{qrt(e,t);break}case R.INPUT:{Wrt(e,t);break}case R.PARAM:case R.TRACK:case R.SOURCE:{Grt(e,t);break}case R.IMAGE:{Krt(e,t);break}case R.BUTTON:{Brt(e,t);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{Hrt(e,t);break}case R.IFRAME:{Jrt(e,t);break}case R.SELECT:{Zrt(e,t);break}case R.OPTION:case R.OPTGROUP:{eit(e,t);break}case R.NOEMBED:{iue(e,t);break}case R.FRAMESET:{Drt(e,t);break}case R.TEXTAREA:{Xrt(e,t);break}case R.NOSCRIPT:{e.options.scriptingEnabled?iue(e,t):sue(e,t);break}case R.PLAINTEXT:{jrt(e,t);break}case R.COL:case R.TH:case R.TD:case R.TR:case R.HEAD:case R.FRAME:case R.TBODY:case R.TFOOT:case R.THEAD:case R.CAPTION:case R.COLGROUP:break;default:sue(e,t)}}function sit(e,t){if(e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function oit(e,t){e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,VEe(e,t))}function ait(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function uit(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(R.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(R.FORM):n&&e.openElements.remove(n))}function lit(e){e.openElements.hasInButtonScope(R.P)||e._insertFakeElement(Ee.P,R.P),e._closePElement()}function cit(e){e.openElements.hasInListItemScope(R.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(R.LI),e.openElements.popUntilTagNamePopped(R.LI))}function fit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function dit(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function hit(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function pit(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,R.BR),e.openElements.pop(),e.framesetOk=!1}function OEe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==R.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function n6(e,t){switch(t.tagID){case R.A:case R.B:case R.I:case R.S:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.NOBR:case R.SMALL:case R.STRIKE:case R.STRONG:{LY(e,t);break}case R.P:{lit(e);break}case R.DL:case R.UL:case R.OL:case R.DIR:case R.DIV:case R.NAV:case R.PRE:case R.MAIN:case R.MENU:case R.ASIDE:case R.BUTTON:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.ADDRESS:case R.ARTICLE:case R.DETAILS:case R.SECTION:case R.SUMMARY:case R.LISTING:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{ait(e,t);break}case R.LI:{cit(e);break}case R.DD:case R.DT:{fit(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{dit(e);break}case R.BR:{pit(e);break}case R.BODY:{sit(e,t);break}case R.HTML:{oit(e,t);break}case R.FORM:{uit(e);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{hit(e,t);break}case R.TEMPLATE:{jb(e,t);break}default:OEe(e,t)}}function $Ee(e,t){e.tmplInsertionModeStack.length>0?zEe(e,t):FY(e,t)}function mit(e,t){var n;t.tagID===R.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function git(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function Jj(e,t){if(kEe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case kn.CHARACTER:{LEe(e,t);break}case kn.WHITESPACE_CHARACTER:{MEe(e,t);break}}else dk(e,t)}function yit(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function vit(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function bit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,R.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,jY(e,t)}function _it(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function wit(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,R.TBODY),e.insertionMode=ie.IN_TABLE_BODY,r6(e,t)}function Eit(e,t){e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function xit(e,t){DEe(t)?e._appendElement(t,Fe.HTML):dk(e,t),t.ackSelfClosing=!0}function Sit(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function DE(e,t){switch(t.tagID){case R.TD:case R.TH:case R.TR:{wit(e,t);break}case R.STYLE:case R.SCRIPT:case R.TEMPLATE:{td(e,t);break}case R.COL:{bit(e,t);break}case R.FORM:{Sit(e,t);break}case R.TABLE:{Eit(e,t);break}case R.TBODY:case R.TFOOT:case R.THEAD:{_it(e,t);break}case R.INPUT:{xit(e,t);break}case R.CAPTION:{yit(e,t);break}case R.COLGROUP:{vit(e,t);break}default:dk(e,t)}}function RC(e,t){switch(t.tagID){case R.TABLE:{e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode());break}case R.TEMPLATE:{jb(e,t);break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:dk(e,t)}}function dk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,t6(e,t),e.fosterParentingEnabled=n}function MEe(e,t){e.pendingCharacterTokens.push(t)}function LEe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function ET(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)dk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const FEe=new Set([R.CAPTION,R.COL,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]);function Tit(e,t){const n=t.tagID;FEe.has(n)?e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,DE(e,t)):Ta(e,t)}function Ait(e,t){const n=t.tagID;switch(n){case R.CAPTION:case R.TABLE:{e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===R.TABLE&&RC(e,t));break}case R.BODY:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:n6(e,t)}}function jY(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TEMPLATE:{td(e,t);break}default:WO(e,t)}}function Cit(e,t){switch(t.tagID){case R.COLGROUP:{e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TEMPLATE:{jb(e,t);break}case R.COL:break;default:WO(e,t)}}function WO(e,t){e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function r6(e,t){switch(t.tagID){case R.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case R.TH:case R.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,R.TR),e.insertionMode=ie.IN_ROW,i6(e,t);break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,DE(e,t));break}default:DE(e,t)}}function m7(e,t){const n=t.tagID;switch(t.tagID){case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,RC(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:case R.TR:break;default:RC(e,t)}}function i6(e,t){switch(t.tagID){case R.TH:case R.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,r6(e,t));break}default:DE(e,t)}}function jEe(e,t){switch(t.tagID){case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case R.TABLE:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,m7(e,t));break}case R.TBODY:case R.TFOOT:case R.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(R.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,m7(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:break;default:RC(e,t)}}function Iit(e,t){const n=t.tagID;FEe.has(n)?(e.openElements.hasInTableScope(R.TD)||e.openElements.hasInTableScope(R.TH))&&(e._closeTableCell(),i6(e,t)):Ta(e,t)}function kit(e,t){const n=t.tagID;switch(n){case R.TD:case R.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case R.TABLE:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),jEe(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:break;default:n6(e,t)}}function BEe(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.OPTGROUP:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.INPUT:case R.KEYGEN:case R.TEXTAREA:case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),t.tagID!==R.SELECT&&e._processStartTag(t));break}case R.SCRIPT:case R.TEMPLATE:{td(e,t);break}}}function UEe(e,t){switch(t.tagID){case R.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===R.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===R.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop();break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop();break}case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode());break}case R.TEMPLATE:{jb(e,t);break}}}function Rit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e._processStartTag(t)):BEe(e,t)}function Nit(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e.onEndTag(t)):UEe(e,t)}function Pit(e,t){switch(t.tagID){case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{td(e,t);break}case R.CAPTION:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,DE(e,t);break}case R.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,jY(e,t);break}case R.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,r6(e,t);break}case R.TD:case R.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,i6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Ta(e,t)}}function Dit(e,t){t.tagID===R.TEMPLATE&&jb(e,t)}function zEe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):FY(e,t)}function Oit(e,t){t.tagID===R.HTML?Ta(e,t):GO(e,t)}function VEe(e,t){var n;if(t.tagID===R.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===R.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else GO(e,t)}function GO(e,t){e.insertionMode=ie.IN_BODY,t6(e,t)}function $it(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.FRAMESET:{e._insertElement(t,Fe.HTML);break}case R.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.NOFRAMES:{td(e,t);break}}}function Mit(e,t){t.tagID===R.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==R.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function Lit(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.NOFRAMES:{td(e,t);break}}}function Fit(e,t){t.tagID===R.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function jit(e,t){t.tagID===R.HTML?Ta(e,t):oD(e,t)}function oD(e,t){e.insertionMode=ie.IN_BODY,t6(e,t)}function Bit(e,t){switch(t.tagID){case R.HTML:{Ta(e,t);break}case R.NOFRAMES:{td(e,t);break}}}function Uit(e,t){t.chars=gi,e._insertCharacters(t)}function zit(e,t){e._insertCharacters(t),e.framesetOk=!1}function HEe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Vit(e,t){if(irt(t))HEe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?CEe(t):r===Fe.SVG&&(srt(t),IEe(t)),MY(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Hit(e,t){if(t.tagID===R.P||t.tagID===R.BR){HEe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const qit=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),oue={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function qEe(e,t){const n=tst(e),r=fEe("type",{handlers:{root:Wit,element:Git,text:Yit,comment:GEe,doctype:Kit,raw:Qit},unknown:Jit}),i={parser:n?new rue(oue):rue.getFragmentParser(void 0,oue),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),aS(i,Hh());const s=n?i.parser.document:i.parser.getFragment(),o=rnt(s,{file:i.options.file});return i.stitches&&PY(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function WEe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Wit(e,t){WEe(e.children,t)}function Git(e,t){Zit(e,t),WEe(e.children,t),est(e,t)}function Yit(e,t){const n={type:kn.CHARACTER,chars:e.value,location:hk(e)};aS(t,Hh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Kit(e,t){const n={type:kn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:hk(e)};aS(t,Hh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Xit(e,t){t.stitches=!0;const n=nst(e);if("children"in e&&"children"in n){const r=qEe({type:"root",children:e.children},t.options);n.children=r.children}GEe({type:"comment",value:{stitch:n}},t)}function GEe(e,t){const n=e.value,r={type:kn.COMMENT,data:n,location:hk(e)};aS(t,Hh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function Qit(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,YEe(t,Hh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Jit(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Xit(n,t);else{let r="";throw qit.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function aS(e,t){YEe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=os.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function YEe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Zit(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===os.PLAINTEXT)return;aS(t,Hh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:n1.html;i===n1.html&&n==="svg"&&(i=n1.svg);const s=unt({...e,children:[]},{space:i===n1.svg?"svg":"html"}),o={type:kn.START_TAG,tagName:n,tagID:oS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:hk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function est(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&gnt.includes(n)||t.parser.tokenizer.state===os.PLAINTEXT)return;aS(t,QL(e));const r={type:kn.END_TAG,tagName:n,tagID:oS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:hk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===os.RCDATA||t.parser.tokenizer.state===os.RAWTEXT||t.parser.tokenizer.state===os.SCRIPT_DATA)&&(t.parser.tokenizer.state=os.DATA)}function tst(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function hk(e){const t=Hh(e)||{line:void 0,column:void 0,offset:void 0},n=QL(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function nst(e){return"children"in e?PE({...e,children:[]}):PE(e)}function rst(e){return function(t,n){return qEe(t,{...e,file:n})}}function Ka({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Ry,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(et,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(Si,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(Si,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(Si,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(Si,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(Si,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(Si,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Pb,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx($f,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx($f,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(Htt,{components:n,rehypePlugins:[rst],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function g7({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(Ka,{text:n})}const ist="https://github.com/revisit-studies/study/tree/main/public/";function sst({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Vh();return _.jsx(di.Main,{children:_.jsxs(Rc,{size:"xs",px:"xs",children:[_.jsx(Ry,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(et,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=xwe(i);return _.jsx(Es,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Db,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:i}),_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(Joe,{color:"red"}),_.jsx(et,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(g7,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{direction:"row",justify:"space-between",children:[_.jsx(et,{fw:"bold",children:s.studyMetadata.title}),_.jsx(Nb,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Uu}${o}`,children:_.jsx(iQe,{style:{paddingTop:4}})})]}),_.jsxs(et,{c:"dimmed",children:[_.jsx(et,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(et,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(et,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Pb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${ist}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(Joe,{color:"orange"}),_.jsx(et,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(g7,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var KEe={exports:{}},XEe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pk=I;function ost(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var ast=typeof Object.is=="function"?Object.is:ost,ust=pk.useSyncExternalStore,lst=pk.useRef,cst=pk.useEffect,fst=pk.useMemo,dst=pk.useDebugValue;XEe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=lst(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=fst(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,ast(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=ust(e,s[0],s[1]);return cst(function(){o.hasValue=!0,o.value=a},[a]),dst(a),a};KEe.exports=XEe;var hst=KEe.exports,Sl="default"in sO?_r:sO,aue=Symbol.for("react-redux-context"),uue=typeof globalThis<"u"?globalThis:{};function pst(){if(!Sl.createContext)return{};const e=uue[aue]??(uue[aue]=new Map);let t=e.get(Sl.createContext);return t||(t=Sl.createContext(null),e.set(Sl.createContext,t)),t}var j0=pst(),mst=()=>{throw new Error("uSES not initialized!")};function BY(e=j0){return function(){return Sl.useContext(e)}}var QEe=BY(),JEe=mst,gst=e=>{JEe=e},yst=(e,t)=>e===t;function vst(e=j0){const t=e===j0?QEe:BY(e),n=(r,i={})=>{const{equalityFn:s=yst,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Sl.useRef(!0);const d=Sl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=JEe(u.addNestedSub,a.getState,l||a.getState,d,s);return Sl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var bst=vst();function _st(e){e()}function wst(){let e=null,t=null;return{clear(){e=null,t=null},notify(){_st(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var lue={notify(){},get:()=>[]};function Est(e,t){let n,r=lue,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=wst())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=lue)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var xst=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Sst=typeof navigator<"u"&&navigator.product==="ReactNative",Tst=xst||Sst?Sl.useLayoutEffect:Sl.useEffect;function Ast({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Sl.useMemo(()=>{const l=Est(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Sl.useMemo(()=>e.getState(),[e]);Tst(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||j0;return Sl.createElement(u.Provider,{value:o},n)}var Cst=Ast;function ZEe(e=j0){const t=e===j0?QEe:BY(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var Ist=ZEe();function kst(e=j0){const t=e===j0?Ist:ZEe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var exe=kst();gst(hst.useSyncExternalStoreWithSelector);function wo(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Rst=typeof Symbol=="function"&&Symbol.observable||"@@observable",cue=Rst,Zj=()=>Math.random().toString(36).substring(7).split("").join("."),Nst={INIT:`@@redux/INIT${Zj()}`,REPLACE:`@@redux/REPLACE${Zj()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Zj()}`},YO=Nst;function UY(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function txe(e,t,n){if(typeof e!="function")throw new Error(wo(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(wo(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(wo(1));return n(txe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(wo(3));return i}function f(g){if(typeof g!="function")throw new Error(wo(4));if(u)throw new Error(wo(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(wo(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!UY(g))throw new Error(wo(7));if(typeof g.type>"u")throw new Error(wo(8));if(typeof g.type!="string")throw new Error(wo(17));if(u)throw new Error(wo(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(wo(10));r=g,d({type:YO.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(wo(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[cue](){return this}}}return d({type:YO.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[cue]:p}}function Pst(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:YO.INIT})>"u")throw new Error(wo(12));if(typeof n(void 0,{type:YO.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(wo(13))})}function Dst(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{Pst(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(wo(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function KO(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function Ost(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(wo(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=KO(...a)(i.dispatch),{...i,dispatch:s}}}function $st(e){return UY(e)&&"type"in e&&typeof e.type=="string"}var nxe=Symbol.for("immer-nothing"),fue=Symbol.for("immer-draftable"),Ml=Symbol.for("immer-state");function bf(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var OE=Object.getPrototypeOf;function B0(e){return!!e&&!!e[Ml]}function _m(e){var t;return e?rxe(e)||Array.isArray(e)||!!e[fue]||!!((t=e.constructor)!=null&&t[fue])||o6(e)||a6(e):!1}var Mst=Object.prototype.constructor.toString();function rxe(e){if(!e||typeof e!="object")return!1;const t=OE(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Mst}function XO(e,t){s6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function s6(e){const t=e[Ml];return t?t.type_:Array.isArray(e)?1:o6(e)?2:a6(e)?3:0}function y7(e,t){return s6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function ixe(e,t,n){const r=s6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Lst(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function o6(e){return e instanceof Map}function a6(e){return e instanceof Set}function Sv(e){return e.copy_||e.base_}function v7(e,t){if(o6(e))return new Map(e);if(a6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=rxe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Ml];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(OE(e),r)}else{const r=OE(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function zY(e,t=!1){return u6(e)||B0(e)||!_m(e)||(s6(e)>1&&(e.set=e.add=e.clear=e.delete=Fst),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>zY(r,!0))),e}function Fst(){bf(2)}function u6(e){return Object.isFrozen(e)}var jst={};function B1(e){const t=jst[e];return t||bf(0,e),t}var NC;function sxe(){return NC}function Bst(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function due(e,t){t&&(B1("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function b7(e){_7(e),e.drafts_.forEach(Ust),e.drafts_=null}function _7(e){e===NC&&(NC=e.parent_)}function hue(e){return NC=Bst(NC,e)}function Ust(e){const t=e[Ml];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function pue(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Ml].modified_&&(b7(t),bf(4)),_m(e)&&(e=QO(t,e),t.parent_||JO(t,e)),t.patches_&&B1("Patches").generateReplacementPatches_(n[Ml].base_,e,t.patches_,t.inversePatches_)):e=QO(t,n,[]),b7(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==nxe?e:void 0}function QO(e,t,n){if(u6(t))return t;const r=t[Ml];if(!r)return XO(t,(i,s)=>mue(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return JO(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),XO(s,(a,u)=>mue(e,r,i,a,u,n,o)),JO(e,i,!1),n&&e.patches_&&B1("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function mue(e,t,n,r,i,s,o){if(B0(i)){const a=s&&t&&t.type_!==3&&!y7(t.assigned_,r)?s.concat(r):void 0,u=QO(e,i,a);if(ixe(n,r,u),B0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(_m(i)&&!u6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;QO(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&JO(e,i)}}function JO(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&zY(t,n)}function zst(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:sxe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=VY;n&&(i=[r],s=PC);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var VY={get(e,t){if(t===Ml)return e;const n=Sv(e);if(!y7(n,t))return Vst(e,n,t);const r=n[t];return e.finalized_||!_m(r)?r:r===e8(e.base_,t)?(t8(e),e.copy_[t]=E7(r,e)):r},has(e,t){return t in Sv(e)},ownKeys(e){return Reflect.ownKeys(Sv(e))},set(e,t,n){const r=oxe(Sv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=e8(Sv(e),t),s=i==null?void 0:i[Ml];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Lst(n,i)&&(n!==void 0||y7(e.base_,t)))return!0;t8(e),w7(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return e8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,t8(e),w7(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Sv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){bf(11)},getPrototypeOf(e){return OE(e.base_)},setPrototypeOf(){bf(12)}},PC={};XO(VY,(e,t)=>{PC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});PC.deleteProperty=function(e,t){return PC.set.call(this,e,t,void 0)};PC.set=function(e,t,n){return VY.set.call(this,e[0],t,n,e[0])};function e8(e,t){const n=e[Ml];return(n?Sv(n):e)[t]}function Vst(e,t,n){var i;const r=oxe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function oxe(e,t){if(!(t in e))return;let n=OE(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=OE(n)}}function w7(e){e.modified_||(e.modified_=!0,e.parent_&&w7(e.parent_))}function t8(e){e.copy_||(e.copy_=v7(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Hst=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&bf(6),r!==void 0&&typeof r!="function"&&bf(7);let i;if(_m(t)){const s=hue(this),o=E7(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?b7(s):_7(s)}return due(s,r),pue(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===nxe&&(i=void 0),this.autoFreeze_&&zY(i,!0),r){const s=[],o=[];B1("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else bf(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){_m(e)||bf(8),B0(e)&&(e=axe(e));const t=hue(this),n=E7(e,void 0);return n[Ml].isManual_=!0,_7(t),n}finishDraft(e,t){const n=e&&e[Ml];(!n||!n.isManual_)&&bf(9);const{scope_:r}=n;return due(r,t),pue(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=B1("Patches").applyPatches_;return B0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function E7(e,t){const n=o6(e)?B1("MapSet").proxyMap_(e,t):a6(e)?B1("MapSet").proxySet_(e,t):zst(e,t);return(t?t.scope_:sxe()).drafts_.push(n),n}function axe(e){return B0(e)||bf(10,e),uxe(e)}function uxe(e){if(!_m(e)||u6(e))return e;const t=e[Ml];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=v7(e,t.scope_.immer_.useStrictShallowCopy_)}else n=v7(e,!0);return XO(n,(r,i)=>{ixe(n,r,uxe(i))}),t&&(t.finalized_=!1),n}var Ll=new Hst,lxe=Ll.produce;Ll.produceWithPatches.bind(Ll);Ll.setAutoFreeze.bind(Ll);Ll.setUseStrictShallowCopy.bind(Ll);Ll.applyPatches.bind(Ll);Ll.createDraft.bind(Ll);Ll.finishDraft.bind(Ll);function qst(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Wst(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Gst(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var gue=e=>Array.isArray(e)?e:[e];function Yst(e){const t=Array.isArray(e[0])?e[0]:e;return Gst(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Kst(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Xst=class{constructor(e){this.value=e}deref(){return this.value}},Qst=typeof WeakRef<"u"?WeakRef:Xst,Jst=0,yue=1;function TN(){return{s:Jst,v:void 0,o:null,p:null}}function HY(e,t={}){let n=TN();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=TN(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=TN(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===yue)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new Qst(c):c}return l.s=yue,l.v=c,c}return o.clearCache=()=>{n=TN(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function cxe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),qst(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=HY,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=gue(d),y=gue(p),v=Yst(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=Kst(v,arguments);return a=b.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Zst=cxe(HY),eot=Object.assign((e,t=Zst)=>{Wst(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>eot});function fxe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var tot=fxe(),not=fxe,rot=(...e)=>{const t=cxe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(B0(o)?axe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};rot(HY);var iot=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?KO:KO.apply(null,arguments)};function $E(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Vu(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>$st(r)&&r.type===e,n}var dxe=class g2 extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,g2.prototype)}static get[Symbol.species](){return g2}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new g2(...t[0].concat(this)):new g2(...t.concat(this))}};function vue(e){return _m(e)?lxe(e,()=>{}):e}function bue(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Vu(10));const r=n.insert(t,e);return e.set(t,r),r}function sot(e){return typeof e=="boolean"}var oot=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new dxe;return n&&(sot(n)?o.push(tot):o.push(not(n.extraArgument))),o},aot="RTK_autoBatch",hxe=e=>t=>{setTimeout(t,e)},uot=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:hxe(10),lot=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?uot:e.type==="callback"?e.queueNotification:hxe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[aot]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},cot=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new dxe(e);return r&&i.push(lot(typeof r=="object"?r:void 0)),i},fot=!0;function dot(e){const t=oot(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(UY(n))a=Dst(n);else throw new Error(Vu(1));let u;typeof r=="function"?u=r(t):u=t();let l=KO;i&&(l=iot({trace:!fot,...typeof i=="object"&&i}));const c=Ost(...u),f=cot(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return txe(a,s,h)}function pxe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Vu(28));if(a in t)throw new Error(Vu(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function hot(e){return typeof e=="function"}function pot(e,t){let[n,r,i]=pxe(t),s;if(hot(e))s=()=>vue(e());else{const a=vue(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(B0(c)){const h=f(c,u);return h===void 0?c:h}else{if(_m(c))return lxe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Vu(9))}return d}}return c},a)}return o.getInitialState=s,o}var mot="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",got=(e=21)=>{let t="",n=e;for(;n--;)t+=mot[Math.random()*64|0];return t},yot=Symbol.for("rtk-slice-createasyncthunk");function vot(e,t){return`${e}/${t}`}function bot({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[yot];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Vu(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(Eot()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Vu(12));if(E in l.sliceCaseReducersByType)throw new Error(Vu(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:vot(s,b),createNotation:typeof i.reducers=="function"};Sot(w)?Aot(E,w,c,t):xot(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?pxe(i.extraReducers):[i.extraReducers],T={...b,...l.sliceCaseReducersByType};return pot(i.initialState,S=>{for(let A in T)S.addCase(A,T[A]);for(let A of l.sliceMatchers)S.addMatcher(A.matcher,A.reducer);for(let A of w)S.addMatcher(A.matcher,A.reducer);E&&S.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(S){let A=S[b];return typeof A>"u"&&w&&(A=g()),A}function T(S=d){const A=bue(h,w,{insert:()=>new WeakMap});return bue(A,S,{insert:()=>{const C={};for(const[k,N]of Object.entries(i.selectors??{}))C[k]=_ot(N,S,g,w);return C}})}return{reducerPath:b,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const T=w??o;return b.inject({reducerPath:T,reducer:m},E),{...v,...y(T,!0)}}};return v}}function _ot(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var wot=bot();function Eot(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function xot({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!Tot(r))throw new Error(Vu(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?$E(e,o):$E(e))}function Sot(e){return e._reducerDefinitionType==="asyncThunk"}function Tot(e){return e._reducerDefinitionType==="reducerWithPrepare"}function Aot({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Vu(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||AN,pending:a||AN,rejected:u||AN,settled:l||AN})}function AN(){}var Cot=(e,t)=>{if(typeof e!="function")throw new Error(Vu(32))},qY="listenerMiddleware",Iot=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=$E(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Vu(21));return Cot(s),{predicate:i,type:t,effect:s}},kot=Object.assign(e=>{const{type:t,predicate:n,effect:r}=Iot(e);return{id:got(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Vu(22))}}},{withTypes:()=>kot}),Rot=Object.assign($E(`${qY}/add`),{withTypes:()=>Rot});$E(`${qY}/removeAll`);var Not=Object.assign($E(`${qY}/remove`),{withTypes:()=>Not});function Vu(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function wm(e){return e.components.flatMap(t=>typeof t=="string"?t:wm(t))}function mxe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:mxe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function gxe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+wm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+wm(e).length-1}];r+=1}else{const o=gxe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function yxe(e,t){const n=gxe(e,t,0);return typeof n=="number"?null:n}function vxe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=vxe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function Pot(e,t){const n=vxe(e,t,0);return n.found?n.distance:-1}function bxe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...bxe(i,`${t}-${s}`))}),n}function WY(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>WY(n,`${t}-${r}`))}}async function Dot(e,t,n,r,i){const s=wm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=wot({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:dot({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const _xe=I.createContext(null);function qh(){return I.useContext(_xe).actions}const Wh=exe,qc=bst;function Oot(e){return qc(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function GY(){return qc(e=>wm(e.sequence))}function Bb(){const{studyId:e}=vm();return`${e}`}function Km(){const{index:e}=vm(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Oy(){const e=Km(),t=GY();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var ZO={exports:{}};ZO.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",T="[object String]",S="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",O="[object Float64Array]",D="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[O]=j[D]=j[$]=j[F]=j[M]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[C]=j[c]=j[k]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[T]=j[A]=!1;var q=typeof to=="object"&&to&&to.Object===Object&&to,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ve=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ve&&ve.binding&&ve.binding("util")}catch{}}(),be=Ie&&Ie.isTypedArray;function Ke(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function Ue(te,ue){for(var Re=-1,Ct=Array(te);++Re<te;)Ct[Re]=ue(Re);return Ct}function yt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function _e(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,ze=Function.prototype,ct=Object.prototype,Ot=ne["__core-js_shared__"],We=ze.toString,ge=ct.hasOwnProperty,ht=function(){var te=/[^.]+$/.exec(Ot&&Ot.keys&&Ot.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,pe=We.call(Object),Ce=RegExp("^"+We.call(ge).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),He=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;He&&He.allocUnsafe;var Ln=_e(Object.getPrototypeOf,Object),Ar=Object.create,Fn=ct.propertyIsEnumerable,cr=ke.splice,gn=ut?ut.toStringTag:void 0,Cn=function(){try{var te=qe(Object,"defineProperty");return te({},"",{}),te}catch{}}(),nr=He?He.isBuffer:void 0,rr=Math.max,Uo=Date.now,$i=qe(ne,"Map"),In=qe(Object,"create"),Mi=function(){function te(){}return function(ue){if(!hp(ue))return{};if(Ar)return Ar(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function Cr(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ms(){this.__data__=In?In(null):{},this.size=0}function lp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function ul(te){var ue=this.__data__;if(In){var Re=ue[te];return Re===r?void 0:Re}return ge.call(ue,te)?ue[te]:void 0}function pd(te){var ue=this.__data__;return In?ue[te]!==void 0:ge.call(ue,te)}function xr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=In&&ue===void 0?r:ue,this}Cr.prototype.clear=ms,Cr.prototype.delete=lp,Cr.prototype.get=ul,Cr.prototype.has=pd,Cr.prototype.set=xr;function Ii(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function Qr(){this.__data__=[],this.size=0}function uu(te){var ue=this.__data__,Re=Jn(ue,te);if(Re<0)return!1;var Ct=ue.length-1;return Re==Ct?ue.pop():cr.call(ue,Re,1),--this.size,!0}function Aa(te){var ue=this.__data__,Re=Jn(ue,te);return Re<0?void 0:ue[Re][1]}function Ca(te){return Jn(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,Ct=Jn(Re,te);return Ct<0?(++this.size,Re.push([te,ue])):Re[Ct][1]=ue,this}Ii.prototype.clear=Qr,Ii.prototype.delete=uu,Ii.prototype.get=Aa,Ii.prototype.has=Ca,Ii.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var Ct=te[ue];this.set(Ct[0],Ct[1])}}function ae(){this.size=0,this.__data__={hash:new Cr,map:new($i||Ii),string:new Cr}}function Ae(te){var ue=Ve(this,te).delete(te);return this.size-=ue?1:0,ue}function Se(te){return Ve(this,te).get(te)}function ot(te){return Ve(this,te).has(te)}function St(te,ue){var Re=Ve(this,te),Ct=Re.size;return Re.set(te,ue),this.size+=Re.size==Ct?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ae,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=St;function Ht(te){var ue=this.__data__=new Ii(te);this.size=ue.size}function On(){this.__data__=new Ii,this.size=0}function jn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function pn(te){return this.__data__.get(te)}function ir(te){return this.__data__.has(te)}function Ir(te,ue){var Re=this.__data__;if(Re instanceof Ii){var Ct=Re.__data__;if(!$i||Ct.length<n-1)return Ct.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(Ct)}return Re.set(te,ue),this.size=Re.size,this}Ht.prototype.clear=On,Ht.prototype.delete=jn,Ht.prototype.get=pn,Ht.prototype.has=ir,Ht.prototype.set=Ir;function Vt(te,ue){var Re=fp(te),Ct=!Re&&lu(te),$n=!Re&&!Ct&&dp(te),Sr=!Re&&!Ct&&!$n&&VR(te),qr=Re||Ct||$n||Sr,Un=qr?Ue(te.length,String):[],Wr=Un.length;for(var es in te)qr&&(es=="length"||$n&&(es=="offset"||es=="parent")||Sr&&(es=="buffer"||es=="byteLength"||es=="byteOffset")||Et(es,Wr))||Un.push(es);return Un}function sr(te,ue,Re){(Re!==void 0&&!ec(te[ue],Re)||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Hr(te,ue,Re){var Ct=te[ue];(!(ge.call(te,ue)&&ec(Ct,Re))||Re===void 0&&!(ue in te))&&ki(te,ue,Re)}function Jn(te,ue){for(var Re=te.length;Re--;)if(ec(te[Re][0],ue))return Re;return-1}function ki(te,ue,Re){ue=="__proto__"&&Cn?Cn(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Hs=Oe();function Jr(te){return te==null?te===void 0?S:y:gn&&gn in Object(te)?Ge(te):Vo(te)}function mo(te){return cu(te)&&Jr(te)==a}function Li(te){if(!hp(te)||Bn(te))return!1;var ue=oT(te)?Ce:z;return ue.test(BR(te))}function Fi(te){return cu(te)&&zR(te.length)&&!!j[Jr(te)]}function zo(te){if(!hp(te))return Rr(te);var ue=kr(te),Re=[];for(var Ct in te)Ct=="constructor"&&(ue||!ge.call(te,Ct))||Re.push(Ct);return Re}function Ia(te,ue,Re,Ct,$n){te!==ue&&Hs(ue,function(Sr,qr){if($n||($n=new Ht),hp(Sr))qs(te,ue,qr,Re,Ia,Ct,$n);else{var Un=Ct?Ct(cp(te,qr),Sr,qr+"",te,ue,$n):void 0;Un===void 0&&(Un=Sr),sr(te,qr,Un)}},iv)}function qs(te,ue,Re,Ct,$n,Sr,qr){var Un=cp(te,Re),Wr=cp(ue,Re),es=qr.get(Wr);if(es){sr(te,Re,es);return}var Ho=Sr?Sr(Un,Wr,Re+"",te,ue,qr):void 0,ov=Ho===void 0;if(ov){var pp=fp(Wr),p_=!pp&&dp(Wr),m_=!pp&&!p_&&VR(Wr);Ho=Wr,pp||p_||m_?fp(Un)?Ho=Un:UR(Un)?Ho=fe(Un):p_?(ov=!1,Ho=Y(Wr)):m_?(ov=!1,Ho=Z(Wr)):Ho=[]:B5(Wr)||lu(Wr)?(Ho=Un,lu(Un)?Ho=rv(Un):(!hp(Un)||oT(Un))&&(Ho=st(Wr))):ov=!1}ov&&(qr.set(Wr,Ho),$n(Ho,Wr,Ct,Sr,qr),qr.delete(Wr)),sr(te,Re,Ho)}function Zl(te,ue){return sT(gd(te,ue,dg),te+"")}var md=Cn?function(te,ue){return Cn(te,"toString",{configurable:!0,enumerable:!1,value:sv(ue),writable:!0})}:dg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,Ct=te.length;for(ue||(ue=Array(Ct));++Re<Ct;)ue[Re]=te[Re];return ue}function ye(te,ue,Re,Ct){var $n=!Re;Re||(Re={});for(var Sr=-1,qr=ue.length;++Sr<qr;){var Un=ue[Sr],Wr=void 0;Wr===void 0&&(Wr=te[Un]),$n?ki(Re,Un,Wr):Hr(Re,Un,Wr)}return Re}function le(te){return Zl(function(ue,Re){var Ct=-1,$n=Re.length,Sr=$n>1?Re[$n-1]:void 0,qr=$n>2?Re[2]:void 0;for(Sr=te.length>3&&typeof Sr=="function"?($n--,Sr):void 0,qr&&mn(Re[0],Re[1],qr)&&(Sr=$n<3?void 0:Sr,$n=1),ue=Object(ue);++Ct<$n;){var Un=Re[Ct];Un&&te(ue,Un,Ct,Sr)}return ue})}function Oe(te){return function(ue,Re,Ct){for(var $n=-1,Sr=Object(ue),qr=Ct(ue),Un=qr.length;Un--;){var Wr=qr[++$n];if(Re(Sr[Wr],Wr,Sr)===!1)break}return ue}}function Ve(te,ue){var Re=te.__data__;return Pt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function qe(te,ue){var Re=it(te,ue);return Li(Re)?Re:void 0}function Ge(te){var ue=ge.call(te,gn),Re=te[gn];try{te[gn]=void 0;var Ct=!0}catch{}var $n=vt.call(te);return Ct&&(ue?te[gn]=Re:delete te[gn]),$n}function st(te){return typeof te.constructor=="function"&&!kr(te)?Mi(Ln(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function mn(te,ue,Re){if(!hp(Re))return!1;var Ct=typeof ue;return(Ct=="number"?h_(Re)&&Et(ue,Re.length):Ct=="string"&&ue in Re)?ec(Re[ue],te):!1}function Pt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Bn(te){return!!ht&&ht in te}function kr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Rr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Vo(te){return vt.call(te)}function gd(te,ue,Re){return ue=rr(ue===void 0?te.length-1:ue,0),function(){for(var Ct=arguments,$n=-1,Sr=rr(Ct.length-ue,0),qr=Array(Sr);++$n<Sr;)qr[$n]=Ct[ue+$n];$n=-1;for(var Un=Array(ue+1);++$n<ue;)Un[$n]=Ct[$n];return Un[ue]=Re(qr),Ke(te,this,Un)}}function cp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var sT=nv(md);function nv(te){var ue=0,Re=0;return function(){var Ct=Uo(),$n=s-(Ct-Re);if(Re=Ct,$n>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function BR(te){if(te!=null){try{return We.call(te)}catch{}try{return te+""}catch{}}return""}function ec(te,ue){return te===ue||te!==te&&ue!==ue}var lu=mo(function(){return arguments}())?mo:function(te){return cu(te)&&ge.call(te,"callee")&&!Fn.call(te,"callee")},fp=Array.isArray;function h_(te){return te!=null&&zR(te.length)&&!oT(te)}function UR(te){return cu(te)&&h_(te)}var dp=nr||qR;function oT(te){if(!hp(te))return!1;var ue=Jr(te);return ue==h||ue==p||ue==l||ue==b}function zR(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function hp(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function cu(te){return te!=null&&typeof te=="object"}function B5(te){if(!cu(te)||Jr(te)!=v)return!1;var ue=Ln(te);if(ue===null)return!0;var Re=ge.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&We.call(Re)==pe}var VR=be?yt(be):Fi;function rv(te){return ye(te,iv(te))}function iv(te){return h_(te)?Vt(te):zo(te)}var HR=le(function(te,ue,Re){Ia(te,ue,Re)});function sv(te){return function(){return te}}function dg(te){return te}function qR(){return!1}e.exports=HR})(ZO,ZO.exports);var $ot=ZO.exports;const YY=Gl($ot);function b0(e){return structuredClone(e)}function KY(){const{answers:e}=qc(i=>i),t=Km(),r=`${Oy()}_${t}`;return e[r]}const wxe=I.createContext(null);function Mot(){const e=I.useContext(wxe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function U0(){return qc(e=>e.config)}function _ue(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function Exe(){const e=Km(),t=GY(),r=`${Oy()}_${e}`,{trialValidation:i,sequence:s,answers:o}=qc(T=>T),a=Wh(),{saveTrialAnswer:u,setIframeAnswers:l}=qh(),{storageEngine:c}=As(),f=Bb(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=Oot(r),m=typeof e!="number"||!p,g=KY(),y=Vh(),v=U0(),b=I.useMemo(()=>Date.now(),[]),w=Mot(),E=I.useCallback(()=>{if(typeof e!="number")return;const T=b0(i[r]),S=Object.values(T).reduce((F,M)=>Object.hasOwn(M,"values")?{...F,...M.values}:F,{}),{provenanceGraph:A}=T,C=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k}}),a(l({})));let N=e+1;const O=yxe(s,e),D=O!==null&&O.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k}};D&&[...O.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const U=Object.fromEntries(Object.entries($).filter(([P])=>{const z=parseInt(P.slice(P.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),H=M.check!=="block"?Object.entries(U).filter(([P])=>P.slice(0,P.lastIndexOf("_"))===M.name):Object.entries(U);if(H.length===0)return!1;if(H.some(([P,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[P,z]=H[0];M.check==="response"?B=M.comparison==="equal"?M.value===z.answer[M.responseId]:M.value!==z.answer[M.responseId]:B=!_ue(z.answer,P,v.components[P.slice(0,P.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(H.length<M.value)return!1;const P=H.map(([j,q])=>_ue(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=P.filter(j=>j).length,W=P.length-z;B=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const P=t.indexOf(M.to),z=P===-1?Pot(s,M.to):-1;return N=P===-1?z:P,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function Lot({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=Exe(),s=I.useCallback(()=>{n&&n(),i()},[i,n]);return _.jsx(on,{type:"submit",disabled:t||r,onClick:s,children:e})}function Fot(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const jot=typeof window<"u"?I.useLayoutEffect:I.useEffect;function yo(e,t){jot(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Bot(e,t){e&&Fot(e),yo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),yo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),yo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),yo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),yo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),yo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),yo(`mantine-form:${e}:clear-errors`,t.clearErrors),yo(`mantine-form:${e}:reset`,t.reset),yo(`mantine-form:${e}:validate`,t.validate),yo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),yo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),yo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),yo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),yo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),yo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),yo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),yo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Uot(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function x7(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function zot(e){const[t,n]=I.useState(x7(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=x7(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function xxe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function wue(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Eue(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=xxe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=wue(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=wue(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Vot(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function xue(e,t,n){typeof n.value=="object"&&(n.value=_w(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function _w(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(_w(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(_w(a),_w(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(_w(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)xue(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||xue(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function Sxe(e){return typeof e!="string"?[]:e.split(".")}function Pu(e,t){const n=Sxe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function l6(e,t,n){const r=Sxe(e);if(r.length===0)return n;const i=_w(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Hot(e,{from:t,to:n},r){const i=Pu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),l6(e,s,r)}function qot(e,t,n,r){const i=Pu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),l6(e,s,r)}function Wot(e,t,n){const r=Pu(e,n);return Array.isArray(r)?l6(e,r.filter((i,s)=>s!==t),n):n}function Got({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Vot(o,a,u)),e.setValues({values:Hot(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Eue(o,a,u,-1)),e.setValues({values:Wot(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Eue(o,u,l,1)),e.setValues({values:qot(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var XY=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const aD=Gl(XY);function CN(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Yot({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),f=I.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=I.useCallback((E,T)=>{c(S=>CN(S,E)===T?S:{...S,[E]:T})},[]),m=I.useCallback((E,T)=>{f(S=>CN(S,E)===T?S:{...S,[E]:T})},[]),g=I.useCallback(E=>CN(u.current,E),[]),y=I.useCallback(E=>f(T=>{if(typeof E!="string")return T;const S=xxe(E,T);return delete S[E],aD(S,T)?T:S}),[]),v=I.useCallback(E=>{if(E){const S=Pu(E,l.current);if(typeof S=="boolean")return S;const A=Pu(E,r.refValues.current),C=Pu(E,r.valuesSnapshot.current);return!aD(A,C)}return Object.keys(l.current).length>0?CN(l.current):!aD(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Kot({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=Pu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=l6(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Xot({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Pu(i,o.previousValues),value:Pu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function Sue(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Tue(e){const t=x7(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function S7(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Pu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>S7(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||S7(o,t,a,i)),i},r)}function T7(e,t){return Tue(typeof e=="function"?e(t):S7(e,t))}function IN(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=T7(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const Qot="__MANTINE_FORM_INDEX__";function Aue(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${Qot}`)):!1:!1}function Txe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=zot(r),p=Kot({initialValues:n,onValuesChange:l,mode:t}),m=Yot({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Got({$values:p,$errors:h,$status:m}),y=Xot({$status:m}),[v,b]=I.useState(0),[w,E]=I.useState({}),T=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(P=>P+1)},[]),S=I.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&b(z=>z+1))},[]),A=I.useCallback((P,z,W)=>{const j=Aue(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!j&&o&&h.clearFieldError(P),p.setFieldValue({path:P,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),j?q=>{const G=IN(P,d,q.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[P]:(q[P]||0)+1})):null]})},[l,d]),C=I.useCallback(P=>{const z=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Pu(W,p.refValues.current),q=Pu(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const P=T7(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),N=I.useCallback(P=>{const z=IN(P,d,p.refValues.current);return z.hasError?h.setFieldError(P,z.error):h.clearFieldError(P),z},[d]),O=(P,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:Uot(ce=>A(P,ce,{forceUpdate:!1})),"data-path":Sue(e,P)};return W&&(ne.error=h.errorsState[P]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Pu(P,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Pu(P,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(P,!0),ne.onBlur=()=>{if(Aue(P,u)){const ce=IN(P,d,p.refValues.current);ce.hasError?h.setFieldError(P,ce.error):h.clearFieldError(P)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:P,options:{type:z,withError:W,withFocus:j,...q},form:H}))},D=(P,z)=>W=>{W==null||W.preventDefault();const j=k();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},$=P=>c(P||p.refValues.current),F=I.useCallback(P=>{P.preventDefault(),T()},[]),M=I.useCallback(P=>P?!IN(P,d,p.refValues.current).hasError:!T7(d,p.refValues.current).hasErrors,[d]),B=P=>`${v}-${P}-${w[P]||0}`,U=I.useCallback(P=>document.querySelector(`[data-path="${Sue(e,P)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:k,validateField:N,getInputProps:O,onSubmit:D,onReset:F,isValid:M,getTransformedValues:$,key:B,getInputNode:U};return Bot(e,H),H}function Jot(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Zot(e){return Jot(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function Axe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const eat=new URLSearchParams(window.location.search),tat=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?eat.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},nat=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?Axe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function rat(e,t,n){const[r,i]=I.useState(null),s=Txe({initialValues:tat(e,n),validate:nat(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function Ub(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=Axe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function iat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return _.jsx(El.Group,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:u,...n,error:Ub(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Ss,{mt:"xs",children:l.map(c=>_.jsx(El,{disabled:t,value:c.value,label:c.label},c.value))})})}function sat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(ok,{disabled:t,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:Ub(e,n,c)})}function oat({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(hi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx($f,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx($f.Item,{children:a},a)):_.jsx($f.Item,{children:t.value})})})}function Cxe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return _.jsx(j1.Group,{name:`radioInput${e.id}`,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:c,...n,error:Ub(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Ss,{mt:"xs",children:[u?_.jsx(et,{style:{textAlign:"center"},children:u}):null,f.map(d=>_.jsx(j1,{disabled:t,value:d.value,label:d.label},d.label)),_.jsx(et,{children:l})]})},e.id)}function aat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(Cxe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function uat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(YG,{disabled:t,placeholder:l,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:Ub(e,n)})}function lat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=Ub(e,n);return _.jsx(hi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(GL,{disabled:t,marks:a,...n,h:40})})}function cat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(Yg,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Ub(e,n)})}function fat({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx($G,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(Ka,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:Ub(e,n)})}function dat({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=yY(),u=U0().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(me,{mb:"md",children:[e.type==="numerical"&&_.jsx(uat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(cat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(fat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(aat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(sat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(lat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(Cxe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(iat,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(oat,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function e3({config:e,location:t,status:n,style:r}){var $;const i=Wh(),{updateResponseBlockValidation:s,toggleShowHelpText:o}=qh(),a=Km(),u=Oy(),l=n==null?void 0:n.answer,c=Vh(),f=e,d=I.useMemo(()=>{var F;return((F=f==null?void 0:f.response)==null?void 0:F.filter(M=>M.location?M.location===t:t==="belowStimulus"))||[]},[f==null?void 0:f.response,t]),h=rat(d,a,l||{}),[p,m]=I.useState(void 0),{iframeAnswers:g,iframeProvenance:y}=qc(F=>F),v=(f==null?void 0:f.provideFeedback)&&((($=f==null?void 0:f.correctAnswer)==null?void 0:$.length)||0)>0,b=(f==null?void 0:f.allowFailedTraining)===void 0?!0:f.allowFailedTraining,[w,E]=I.useState(0),T=(f==null?void 0:f.trainingAttempts)||2,[S,A]=I.useState(!1),C=t===((f==null?void 0:f.nextButtonLocation)||"belowStimulus");I.useEffect(()=>{const F=d.find(M=>M.type==="iframe");if(g&&F){const M=F.id;h.setValues({...h.values,[M]:g[M]})}},[g]),I.useEffect(()=>{y&&m(y)},[y]),I.useEffect(()=>{i(s({location:t,identifier:`${u}_${a}`,status:h.isValid(),values:b0(h.values),provenanceGraph:p}))},[h.values,u,a,t,i,s,p]);const[k,N]=I.useState(Object.fromEntries(d.map(F=>[F.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),O=(F,M,B,U,H)=>{N(P=>({...P,[F]:{visible:M,title:B,message:U,color:H}}))},D=()=>{const F=w+1;E(F);const M=Object.fromEntries(d.map(B=>{var P,z;const U=(z=(P=f.correctAnswer)==null?void 0:P.find(W=>W.id===B.id))==null?void 0:z.answer,H=h.values[B.id];return[B.id,Array.isArray(H)?typeof U=="string"?H.length===1&&U===H[0]:H.length===U.length&&H.every(W=>U.includes(W)):U===H]}));v&&(d.forEach(B=>{var U;if(M[B.id]&&!((U=k[B.id])!=null&&U.message.includes("You've failed to answer this question correctly")))O(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let H="";F>=T?(H=`You didn't answer this question correctly after ${T} attempts. ${b?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,b||setTimeout(()=>{c("./__trainingFailed")},5e3)):T-F===1?H="Please try again. You have 1 attempt left.":H=`Please try again. You have ${T-F} attempts left.`,O(B.id,!0,"Incorrect Answer",H,"red")}}),A(b&&F>=T||Object.values(M).every(B=>B)&&F<=T))};return _.jsxs("div",{style:r,children:[d.map((F,M)=>{var U,H;const B=(H=(U=f.correctAnswer)==null?void 0:U.find(P=>P.id===F.id))==null?void 0:H.answer;return _.jsx(_r.Fragment,{children:F.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(dat,{storedAnswer:l?l[F.id]:void 0,answer:{...h.getInputProps(F.id,{type:F.type==="checkbox"?"checkbox":"input"})},response:F,index:M+1}),k[F.id].visible&&_.jsxs(Yx,{mb:"md",title:k[F.id].title,color:k[F.id].color,children:[k[F.id].message," ",k[F.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:["Please"," ",_.jsx(Pb,{style:{fontSize:14},onClick:()=>i(o()),children:"click here"})," ","and read the help text carefully."]}),_.jsx("br",{}),_.jsx("br",{}),w>=T&&B&&` The correct answer was: ${B}.`]})]})},`${F.id}-${a}`)}),_.jsxs(Ss,{justify:"right",gap:"xs",children:[v&&C&&_.jsx(on,{onClick:()=>D(),disabled:!h.isValid(),children:"Check Answer"}),C&&_.jsx(Lot,{disabled:v&&!S||!h.isValid(),label:f.nextButtonText||"Next"})]})]})}const xT="@REVISIT_COMMS",hat={minHeight:"500px",width:"100%",border:0};function pat({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=qh(),r=Wh(),i=exe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Oy(),u=Vh(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${xT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${xT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${xT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${xT}/ANSWERS`:r(t(d.message));break;case`${xT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Uu}${e.path}?trialid=${a}&id=${o}`,style:hat})}async function QY(e){const n=await(await fetch(`${Uu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function U1({email:e,path:t}){const n=Ny();return _.jsxs(Rc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(Si,{order:2,children:_.jsx(et,{span:!0,c:"orange",children:"404"})}),_.jsxs(et,{children:[_.jsx(et,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx(kl,{h:"lg"}),_.jsxs($f,{children:[_.jsx($f.Item,{children:_.jsx(et,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx($f.Item,{children:_.jsxs(et,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Pb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const mat={maxWidth:"100%"};function gat({currentConfig:e}){const t={...mat,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await QY(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Ry,{mx:"auto",src:`${Uu}${e.path}`,style:t}):_.jsx(U1,{path:e.path})}function em(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yat(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function uS(e){let t,n,r;e.length!==2?(t=em,n=(a,u)=>em(e(a),u),r=(a,u)=>e(a)-u):(t=e===em||e===yat?e:vat,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function vat(){return 0}function Ixe(e){return e===null?NaN:+e}function*bat(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const kxe=uS(em),z0=kxe.right,_at=kxe.left;uS(Ixe).center;function wat(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function Eat(e,t){const n=wat(e,t);return n&&Math.sqrt(n)}function Cue(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Wa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Iue extends Map{constructor(t,n=Pxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(A7(this,t))}has(t){return super.has(A7(this,t))}set(t,n){return super.set(Rxe(this,t),n)}delete(t){return super.delete(Nxe(this,t))}}class t3 extends Set{constructor(t,n=Pxe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(A7(this,t))}add(t){return super.add(Rxe(this,t))}delete(t){return super.delete(Nxe(this,t))}}function A7({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function Rxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Nxe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Pxe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function xat(e,t){return Array.from(t,n=>e[n])}function Sat(e=em){if(e===em)return Dxe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function Dxe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Tat=Math.sqrt(50),Aat=Math.sqrt(10),Cat=Math.sqrt(2);function n3(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=Tat?10:s>=Aat?5:s>=Cat?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?n3(e,t,n*2):[a,u,l]}function C7(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?n3(t,e,n):n3(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function I7(e,t,n){return t=+t,e=+e,n=+n,n3(e,t,n)[2]}function V0(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?I7(t,e,n):I7(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function _0(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function k7(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Oxe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?Dxe:Sat(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));Oxe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(ST(e,n,t),i(e[r],s)>0&&ST(e,n,r);o<a;){for(ST(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?ST(e,n,a):(++a,ST(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function ST(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function R7(e,t,n){if(e=Float64Array.from(bat(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return k7(e);if(t>=1)return _0(e);var r,i=(r-1)*t,s=Math.floor(i),o=_0(Oxe(e,s).subarray(0,s+1)),a=k7(e.subarray(s+1));return o+(a-o)*(i-s)}}function $xe(e,t,n=Ixe){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function Iat(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function Mxe(e,t){return R7(e,.5,t)}function*kat(e){for(const t of e)yield*t}function Lxe(e){return Array.from(kat(e))}function Du(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function Fxe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function Rat(e,...t){e=new t3(e),t=t.map(Nat);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function Nat(e){return e instanceof t3?e:new t3(e)}function Pat(...e){const t=new t3;for(const n of e)for(const r of n)t.add(r);return t}var Dat={value:()=>{}};function c6(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new uD(n)}function uD(e){this._=e}function Oat(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}uD.prototype=c6.prototype={constructor:uD,on:function(e,t){var n=this._,r=Oat(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=$at(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=kue(n[i],e.name,t);else if(t==null)for(i in n)n[i]=kue(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new uD(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function $at(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function kue(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Dat,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var N7="http://www.w3.org/1999/xhtml";const Rue={svg:"http://www.w3.org/2000/svg",xhtml:N7,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function f6(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Rue.hasOwnProperty(t)?{space:Rue[t],local:e}:e}function Mat(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===N7&&t.documentElement.namespaceURI===N7?t.createElement(e):t.createElementNS(n,e)}}function Lat(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function jxe(e){var t=f6(e);return(t.local?Lat:Mat)(t)}function Fat(){}function JY(e){return e==null?Fat:function(){return this.querySelector(e)}}function jat(e){typeof e!="function"&&(e=JY(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new Xa(r,this._parents)}function Bxe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Bat(){return[]}function Uxe(e){return e==null?Bat:function(){return this.querySelectorAll(e)}}function Uat(e){return function(){return Bxe(e.apply(this,arguments))}}function zat(e){typeof e=="function"?e=Uat(e):e=Uxe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new Xa(r,i)}function zxe(e){return function(){return this.matches(e)}}function Vxe(e){return function(t){return t.matches(e)}}var Vat=Array.prototype.find;function Hat(e){return function(){return Vat.call(this.children,e)}}function qat(){return this.firstElementChild}function Wat(e){return this.select(e==null?qat:Hat(typeof e=="function"?e:Vxe(e)))}var Gat=Array.prototype.filter;function Yat(){return Array.from(this.children)}function Kat(e){return function(){return Gat.call(this.children,e)}}function Xat(e){return this.selectAll(e==null?Yat:Kat(typeof e=="function"?e:Vxe(e)))}function Qat(e){typeof e!="function"&&(e=zxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Xa(r,this._parents)}function Hxe(e){return new Array(e.length)}function Jat(){return new Xa(this._enter||this._groups.map(Hxe),this._parents)}function r3(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}r3.prototype={constructor:r3,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Zat(e){return function(){return e}}function eut(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new r3(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function tut(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new r3(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function nut(e){return e.__data__}function rut(e,t){if(!arguments.length)return Array.from(this,nut);var n=t?tut:eut,r=this._parents,i=this._groups;typeof e!="function"&&(e=Zat(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=iut(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new Xa(o,r),o._enter=a,o._exit=u,o}function iut(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sut(){return new Xa(this._exit||this._groups.map(Hxe),this._parents)}function out(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function aut(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new Xa(a,this._parents)}function uut(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function lut(e){e||(e=cut);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new Xa(i,this._parents).order()}function cut(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function fut(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function dut(){return Array.from(this)}function hut(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function put(){let e=0;for(const t of this)++e;return e}function mut(){return!this.node()}function gut(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function yut(e){return function(){this.removeAttribute(e)}}function vut(e){return function(){this.removeAttributeNS(e.space,e.local)}}function but(e,t){return function(){this.setAttribute(e,t)}}function _ut(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function wut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Eut(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function xut(e,t){var n=f6(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?vut:yut:typeof t=="function"?n.local?Eut:wut:n.local?_ut:but)(n,t))}function qxe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Sut(e){return function(){this.style.removeProperty(e)}}function Tut(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Aut(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Cut(e,t,n){return arguments.length>1?this.each((t==null?Sut:typeof t=="function"?Aut:Tut)(e,t,n??"")):ME(this.node(),e)}function ME(e,t){return e.style.getPropertyValue(t)||qxe(e).getComputedStyle(e,null).getPropertyValue(t)}function Iut(e){return function(){delete this[e]}}function kut(e,t){return function(){this[e]=t}}function Rut(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Nut(e,t){return arguments.length>1?this.each((t==null?Iut:typeof t=="function"?Rut:kut)(e,t)):this.node()[e]}function Wxe(e){return e.trim().split(/^|\s+/)}function ZY(e){return e.classList||new Gxe(e)}function Gxe(e){this._node=e,this._names=Wxe(e.getAttribute("class")||"")}Gxe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Yxe(e,t){for(var n=ZY(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Kxe(e,t){for(var n=ZY(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Put(e){return function(){Yxe(this,e)}}function Dut(e){return function(){Kxe(this,e)}}function Out(e,t){return function(){(t.apply(this,arguments)?Yxe:Kxe)(this,e)}}function $ut(e,t){var n=Wxe(e+"");if(arguments.length<2){for(var r=ZY(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Out:t?Put:Dut)(n,t))}function Mut(){this.textContent=""}function Lut(e){return function(){this.textContent=e}}function Fut(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function jut(e){return arguments.length?this.each(e==null?Mut:(typeof e=="function"?Fut:Lut)(e)):this.node().textContent}function But(){this.innerHTML=""}function Uut(e){return function(){this.innerHTML=e}}function zut(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function Vut(e){return arguments.length?this.each(e==null?But:(typeof e=="function"?zut:Uut)(e)):this.node().innerHTML}function Hut(){this.nextSibling&&this.parentNode.appendChild(this)}function qut(){return this.each(Hut)}function Wut(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Gut(){return this.each(Wut)}function Yut(e){var t=typeof e=="function"?e:jxe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Kut(){return null}function Xut(e,t){var n=typeof e=="function"?e:jxe(e),r=t==null?Kut:typeof t=="function"?t:JY(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Qut(){var e=this.parentNode;e&&e.removeChild(this)}function Jut(){return this.each(Qut)}function Zut(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function elt(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function tlt(e){return this.select(e?elt:Zut)}function nlt(e){return arguments.length?this.property("__data__",e):this.node().__data__}function rlt(e){return function(t){e.call(this,t,this.__data__)}}function ilt(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function slt(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function olt(e,t,n){return function(){var r=this.__on,i,s=rlt(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function alt(e,t,n){var r=ilt(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?olt:slt,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function Xxe(e,t,n){var r=qxe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function ult(e,t){return function(){return Xxe(this,e,t)}}function llt(e,t){return function(){return Xxe(this,e,t.apply(this,arguments))}}function clt(e,t){return this.each((typeof t=="function"?llt:ult)(e,t))}function*flt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var eK=[null];function Xa(e,t){this._groups=e,this._parents=t}function mk(){return new Xa([[document.documentElement]],eK)}function dlt(){return this}Xa.prototype=mk.prototype={constructor:Xa,select:jat,selectAll:zat,selectChild:Wat,selectChildren:Xat,filter:Qat,data:rut,enter:Jat,exit:sut,join:out,merge:aut,selection:dlt,order:uut,sort:lut,call:fut,nodes:dut,node:hut,size:put,empty:mut,each:gut,attr:xut,style:Cut,property:Nut,classed:$ut,text:jut,html:Vut,raise:qut,lower:Gut,append:Yut,insert:Xut,remove:Jut,clone:tlt,datum:nlt,on:alt,dispatch:clt,[Symbol.iterator]:flt};function Vi(e){return typeof e=="string"?new Xa([[document.querySelector(e)]],[document.documentElement]):new Xa([[e]],eK)}function hlt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function P7(e,t){if(e=hlt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function plt(e){return typeof e=="string"?new Xa([document.querySelectorAll(e)],[document.documentElement]):new Xa([Bxe(e)],eK)}const D7={capture:!0,passive:!1};function O7(e){e.preventDefault(),e.stopImmediatePropagation()}function mlt(e){var t=e.document.documentElement,n=Vi(e).on("dragstart.drag",O7,D7);"onselectstart"in t?n.on("selectstart.drag",O7,D7):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function glt(e,t){var n=e.document.documentElement,r=Vi(e).on("dragstart.drag",null);t&&(r.on("click.drag",O7,D7),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function lS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function gk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function $y(){}var z1=.7,LE=1/z1,Ww="\\s*([+-]?\\d+)\\s*",DC="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",oh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ylt=/^#([0-9a-f]{3,8})$/,vlt=new RegExp(`^rgb\\(${Ww},${Ww},${Ww}\\)$`),blt=new RegExp(`^rgb\\(${oh},${oh},${oh}\\)$`),_lt=new RegExp(`^rgba\\(${Ww},${Ww},${Ww},${DC}\\)$`),wlt=new RegExp(`^rgba\\(${oh},${oh},${oh},${DC}\\)$`),Elt=new RegExp(`^hsl\\(${DC},${oh},${oh}\\)$`),xlt=new RegExp(`^hsla\\(${DC},${oh},${oh},${DC}\\)$`),Nue={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};lS($y,V1,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Pue,formatHex:Pue,formatHex8:Slt,formatHsl:Tlt,formatRgb:Due,toString:Due});function Pue(){return this.rgb().formatHex()}function Slt(){return this.rgb().formatHex8()}function Tlt(){return Qxe(this).formatHsl()}function Due(){return this.rgb().formatRgb()}function V1(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ylt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Oue(t):n===3?new no(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?kN(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?kN(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vlt.exec(e))?new no(t[1],t[2],t[3],1):(t=blt.exec(e))?new no(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_lt.exec(e))?kN(t[1],t[2],t[3],t[4]):(t=wlt.exec(e))?kN(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Elt.exec(e))?Lue(t[1],t[2]/100,t[3]/100,1):(t=xlt.exec(e))?Lue(t[1],t[2]/100,t[3]/100,t[4]):Nue.hasOwnProperty(e)?Oue(Nue[e]):e==="transparent"?new no(NaN,NaN,NaN,0):null}function Oue(e){return new no(e>>16&255,e>>8&255,e&255,1)}function kN(e,t,n,r){return r<=0&&(e=t=n=NaN),new no(e,t,n,r)}function tK(e){return e instanceof $y||(e=V1(e)),e?(e=e.rgb(),new no(e.r,e.g,e.b,e.opacity)):new no}function H0(e,t,n,r){return arguments.length===1?tK(e):new no(e,t,n,r??1)}function no(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}lS(no,H0,gk($y,{brighter(e){return e=e==null?LE:Math.pow(LE,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?z1:Math.pow(z1,e),new no(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new no(w1(this.r),w1(this.g),w1(this.b),i3(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:$ue,formatHex:$ue,formatHex8:Alt,formatRgb:Mue,toString:Mue}));function $ue(){return`#${r1(this.r)}${r1(this.g)}${r1(this.b)}`}function Alt(){return`#${r1(this.r)}${r1(this.g)}${r1(this.b)}${r1((isNaN(this.opacity)?1:this.opacity)*255)}`}function Mue(){const e=i3(this.opacity);return`${e===1?"rgb(":"rgba("}${w1(this.r)}, ${w1(this.g)}, ${w1(this.b)}${e===1?")":`, ${e})`}`}function i3(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function w1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function r1(e){return e=w1(e),(e<16?"0":"")+e.toString(16)}function Lue(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new _f(e,t,n,r)}function Qxe(e){if(e instanceof _f)return new _f(e.h,e.s,e.l,e.opacity);if(e instanceof $y||(e=V1(e)),!e)return new _f;if(e instanceof _f)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new _f(o,a,u,e.opacity)}function s3(e,t,n,r){return arguments.length===1?Qxe(e):new _f(e,t,n,r??1)}function _f(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}lS(_f,s3,gk($y,{brighter(e){return e=e==null?LE:Math.pow(LE,e),new _f(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?z1:Math.pow(z1,e),new _f(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new no(n8(e>=240?e-240:e+120,i,r),n8(e,i,r),n8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new _f(Fue(this.h),RN(this.s),RN(this.l),i3(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=i3(this.opacity);return`${e===1?"hsl(":"hsla("}${Fue(this.h)}, ${RN(this.s)*100}%, ${RN(this.l)*100}%${e===1?")":`, ${e})`}`}}));function Fue(e){return e=(e||0)%360,e<0?e+360:e}function RN(e){return Math.max(0,Math.min(1,e||0))}function n8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Jxe=Math.PI/180,Zxe=180/Math.PI,o3=18,eSe=.96422,tSe=1,nSe=.82521,rSe=4/29,Gw=6/29,iSe=3*Gw*Gw,Clt=Gw*Gw*Gw;function sSe(e){if(e instanceof ah)return new ah(e.l,e.a,e.b,e.opacity);if(e instanceof Vp)return oSe(e);e instanceof no||(e=tK(e));var t=o8(e.r),n=o8(e.g),r=o8(e.b),i=r8((.2225045*t+.7168786*n+.0606169*r)/tSe),s,o;return t===n&&n===r?s=o=i:(s=r8((.4360747*t+.3850649*n+.1430804*r)/eSe),o=r8((.0139322*t+.0971045*n+.7141733*r)/nSe)),new ah(116*i-16,500*(s-i),200*(i-o),e.opacity)}function a3(e,t,n,r){return arguments.length===1?sSe(e):new ah(e,t,n,r??1)}function ah(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}lS(ah,a3,gk($y,{brighter(e){return new ah(this.l+o3*(e??1),this.a,this.b,this.opacity)},darker(e){return new ah(this.l-o3*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=eSe*i8(t),e=tSe*i8(e),n=nSe*i8(n),new no(s8(3.1338561*t-1.6168667*e-.4906146*n),s8(-.9787684*t+1.9161415*e+.033454*n),s8(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function r8(e){return e>Clt?Math.pow(e,1/3):e/iSe+rSe}function i8(e){return e>Gw?e*e*e:iSe*(e-rSe)}function s8(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function o8(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Ilt(e){if(e instanceof Vp)return new Vp(e.h,e.c,e.l,e.opacity);if(e instanceof ah||(e=sSe(e)),e.a===0&&e.b===0)return new Vp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*Zxe;return new Vp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function u3(e,t,n,r){return arguments.length===1?Ilt(e):new Vp(e,t,n,r??1)}function Vp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function oSe(e){if(isNaN(e.h))return new ah(e.l,0,0,e.opacity);var t=e.h*Jxe;return new ah(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}lS(Vp,u3,gk($y,{brighter(e){return new Vp(this.h,this.c,this.l+o3*(e??1),this.opacity)},darker(e){return new Vp(this.h,this.c,this.l-o3*(e??1),this.opacity)},rgb(){return oSe(this).rgb()}}));var aSe=-.14861,nK=1.78277,rK=-.29227,d6=-.90649,OC=1.97294,jue=OC*d6,Bue=OC*nK,Uue=nK*rK-d6*aSe;function klt(e){if(e instanceof E1)return new E1(e.h,e.s,e.l,e.opacity);e instanceof no||(e=tK(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(Uue*r+jue*t-Bue*n)/(Uue+jue-Bue),s=r-i,o=(OC*(n-i)-rK*s)/d6,a=Math.sqrt(o*o+s*s)/(OC*i*(1-i)),u=a?Math.atan2(o,s)*Zxe-120:NaN;return new E1(u<0?u+360:u,a,i,e.opacity)}function $7(e,t,n,r){return arguments.length===1?klt(e):new E1(e,t,n,r??1)}function E1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}lS(E1,$7,gk($y,{brighter(e){return e=e==null?LE:Math.pow(LE,e),new E1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?z1:Math.pow(z1,e),new E1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*Jxe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new no(255*(t+n*(aSe*r+nK*i)),255*(t+n*(rK*r+d6*i)),255*(t+n*(OC*r)),this.opacity)}}));function uSe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function lSe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return uSe((n-r/t)*t,o,i,s,a)}}function cSe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return uSe((n-r/t)*t,i,s,o,a)}}const h6=e=>()=>e;function fSe(e,t){return function(n){return e+n*t}}function Rlt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function p6(e,t){var n=t-e;return n?fSe(e,n>180||n<-180?n-360*Math.round(n/360):n):h6(isNaN(e)?t:e)}function Nlt(e){return(e=+e)==1?ro:function(t,n){return n-t?Rlt(t,n,e):h6(isNaN(t)?n:t)}}function ro(e,t){var n=t-e;return n?fSe(e,n):h6(isNaN(e)?t:e)}const $C=function e(t){var n=Nlt(t);function r(i,s){var o=n((i=H0(i)).r,(s=H0(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ro(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function dSe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=H0(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Plt=dSe(lSe),Dlt=dSe(cSe);function iK(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function hSe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Olt(e,t){return(hSe(t)?iK:pSe)(e,t)}function pSe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Xm(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function mSe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function pc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function gSe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Xm(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var M7=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,a8=new RegExp(M7.source,"g");function $lt(e){return function(){return e}}function Mlt(e){return function(t){return e(t)+""}}function sK(e,t){var n=M7.lastIndex=a8.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=M7.exec(e))&&(i=a8.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:pc(r,i)})),n=a8.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Mlt(u[0].x):$lt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function Xm(e,t){var n=typeof t,r;return t==null||n==="boolean"?h6(t):(n==="number"?pc:n==="string"?(r=V1(t))?(t=r,$C):sK:t instanceof V1?$C:t instanceof Date?mSe:hSe(t)?iK:Array.isArray(t)?pSe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?gSe:pc)(e,t)}function Llt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Flt(e,t){var n=p6(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function yk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var zue=180/Math.PI,L7={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function ySe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*zue,skewX:Math.atan(u)*zue,scaleX:o,scaleY:a}}var NN;function jlt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?L7:ySe(t.a,t.b,t.c,t.d,t.e,t.f)}function Blt(e){return e==null||(NN||(NN=document.createElementNS("http://www.w3.org/2000/svg","g")),NN.setAttribute("transform",e),!(e=NN.transform.baseVal.consolidate()))?L7:(e=e.matrix,ySe(e.a,e.b,e.c,e.d,e.e,e.f))}function vSe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:pc(l,f)},{i:m-2,x:pc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:pc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:pc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:pc(l,f)},{i:m-2,x:pc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var bSe=vSe(jlt,"px, ","px)","deg)"),_Se=vSe(Blt,", ",")",")"),Ult=1e-12;function Vue(e){return((e=Math.exp(e))+1/e)/2}function zlt(e){return((e=Math.exp(e))-1/e)/2}function Vlt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Hlt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Ult)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-E)/t,g=function(S){var A=S*y,C=Vue(E),k=l/(n*v)*(C*Vlt(t*A+E)-zlt(E));return[a+k*h,u+k*p,l*C/Vue(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function wSe(e){return function(t,n){var r=e((t=s3(t)).h,(n=s3(n)).h),i=ro(t.s,n.s),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const qlt=wSe(p6);var Wlt=wSe(ro);function Glt(e,t){var n=ro((e=a3(e)).l,(t=a3(t)).l),r=ro(e.a,t.a),i=ro(e.b,t.b),s=ro(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function ESe(e){return function(t,n){var r=e((t=u3(t)).h,(n=u3(n)).h),i=ro(t.c,n.c),s=ro(t.l,n.l),o=ro(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Ylt=ESe(p6);var Klt=ESe(ro);function xSe(e){return function t(n){n=+n;function r(i,s){var o=e((i=$7(i)).h,(s=$7(s)).h),a=ro(i.s,s.s),u=ro(i.l,s.l),l=ro(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const Xlt=xSe(p6);var Qlt=xSe(ro);function oK(e,t){t===void 0&&(t=e,e=Xm);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Jlt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const Zlt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:Xm,interpolateArray:Olt,interpolateBasis:lSe,interpolateBasisClosed:cSe,interpolateCubehelix:Xlt,interpolateCubehelixLong:Qlt,interpolateDate:mSe,interpolateDiscrete:Llt,interpolateHcl:Ylt,interpolateHclLong:Klt,interpolateHsl:qlt,interpolateHslLong:Wlt,interpolateHue:Flt,interpolateLab:Glt,interpolateNumber:pc,interpolateNumberArray:iK,interpolateObject:gSe,interpolateRgb:$C,interpolateRgbBasis:Plt,interpolateRgbBasisClosed:Dlt,interpolateRound:yk,interpolateString:sK,interpolateTransformCss:bSe,interpolateTransformSvg:_Se,interpolateZoom:Hlt,piecewise:oK,quantize:Jlt},Symbol.toStringTag,{value:"Module"}));var FE=0,y2=0,TT=0,SSe=1e3,l3,v2,c3=0,H1=0,m6=0,MC=typeof performance=="object"&&performance.now?performance:Date,TSe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function g6(){return H1||(TSe(ect),H1=MC.now()+m6)}function ect(){H1=0}function LC(){this._call=this._time=this._next=null}LC.prototype=aK.prototype={constructor:LC,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?g6():+n)+(t==null?0:+t),!this._next&&v2!==this&&(v2?v2._next=this:l3=this,v2=this),this._call=e,this._time=n,F7()},stop:function(){this._call&&(this._call=null,this._time=1/0,F7())}};function aK(e,t,n){var r=new LC;return r.restart(e,t,n),r}function tct(){g6(),++FE;for(var e=l3,t;e;)(t=H1-e._time)>=0&&e._call.call(void 0,t),e=e._next;--FE}function Hue(){H1=(c3=MC.now())+m6,FE=y2=0;try{tct()}finally{FE=0,rct(),H1=0}}function nct(){var e=MC.now(),t=e-c3;t>SSe&&(m6-=t,c3=e)}function rct(){for(var e,t=l3,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:l3=n);v2=e,F7(r)}function F7(e){if(!FE){y2&&(y2=clearTimeout(y2));var t=e-H1;t>24?(e<1/0&&(y2=setTimeout(Hue,e-MC.now()-m6)),TT&&(TT=clearInterval(TT))):(TT||(c3=MC.now(),TT=setInterval(nct,SSe)),FE=1,TSe(Hue))}}function que(e,t,n){var r=new LC;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function ict(e,t,n){var r=new LC,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?g6():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var sct=c6("start","end","cancel","interrupt"),oct=[],ASe=0,Wue=1,j7=2,lD=3,Gue=4,B7=5,cD=6;function y6(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;act(e,n,{name:t,index:r,group:i,on:sct,tween:oct,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:ASe})}function uK(e,t){var n=nd(e,t);if(n.state>ASe)throw new Error("too late; already scheduled");return n}function Gh(e,t){var n=nd(e,t);if(n.state>lD)throw new Error("too late; already running");return n}function nd(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function act(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=aK(s,0,n.time);function s(l){n.state=Wue,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==Wue)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===lD)return que(o);h.state===Gue?(h.state=cD,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=cD,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(que(function(){n.state===lD&&(n.state=Gue,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=j7,n.on.call("start",e,e.__data__,n.index,n.group),n.state===j7){for(n.state=lD,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=B7,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===B7&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=cD,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function U7(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>j7&&r.state<B7,r.state=cD,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function uct(e){return this.each(function(){U7(this,e)})}function lct(e,t){var n,r;return function(){var i=Gh(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function cct(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Gh(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function fct(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=nd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?lct:cct)(n,e,t))}function lK(e,t,n){var r=e._id;return e.each(function(){var i=Gh(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return nd(i,r).value[t]}}function CSe(e,t){var n;return(typeof t=="number"?pc:t instanceof V1?$C:(n=V1(t))?(t=n,$C):sK)(e,t)}function dct(e){return function(){this.removeAttribute(e)}}function hct(e){return function(){this.removeAttributeNS(e.space,e.local)}}function pct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function mct(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function gct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function yct(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function vct(e,t){var n=f6(e),r=n==="transform"?_Se:CSe;return this.attrTween(e,typeof t=="function"?(n.local?yct:gct)(n,r,lK(this,"attr."+e,t)):t==null?(n.local?hct:dct)(n):(n.local?mct:pct)(n,r,t))}function bct(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function _ct(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function wct(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&_ct(e,s)),n}return i._value=t,i}function Ect(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&bct(e,s)),n}return i._value=t,i}function xct(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=f6(e);return this.tween(n,(r.local?wct:Ect)(r,t))}function Sct(e,t){return function(){uK(this,e).delay=+t.apply(this,arguments)}}function Tct(e,t){return t=+t,function(){uK(this,e).delay=t}}function Act(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Sct:Tct)(t,e)):nd(this.node(),t).delay}function Cct(e,t){return function(){Gh(this,e).duration=+t.apply(this,arguments)}}function Ict(e,t){return t=+t,function(){Gh(this,e).duration=t}}function kct(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Cct:Ict)(t,e)):nd(this.node(),t).duration}function Rct(e,t){if(typeof t!="function")throw new Error;return function(){Gh(this,e).ease=t}}function Nct(e){var t=this._id;return arguments.length?this.each(Rct(t,e)):nd(this.node(),t).ease}function Pct(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;Gh(this,e).ease=n}}function Dct(e){if(typeof e!="function")throw new Error;return this.each(Pct(this._id,e))}function Oct(e){typeof e!="function"&&(e=zxe(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Em(r,this._parents,this._name,this._id)}function $ct(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Em(o,this._parents,this._name,this._id)}function Mct(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Lct(e,t,n){var r,i,s=Mct(t)?uK:Gh;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Fct(e,t){var n=this._id;return arguments.length<2?nd(this.node(),n).on.on(e):this.each(Lct(n,e,t))}function jct(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Bct(){return this.on("end.remove",jct(this._id))}function Uct(e){var t=this._name,n=this._id;typeof e!="function"&&(e=JY(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,y6(l[d],t,n,d,l,nd(c,n)));return new Em(s,this._parents,t,n)}function zct(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Uxe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=nd(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&y6(h,t,n,m,d,p);s.push(d),o.push(c)}return new Em(s,o,t,n)}var Vct=mk.prototype.constructor;function Hct(){return new Vct(this._groups,this._parents)}function qct(e,t){var n,r,i;return function(){var s=ME(this,e),o=(this.style.removeProperty(e),ME(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function ISe(e){return function(){this.style.removeProperty(e)}}function Wct(e,t,n){var r,i=n+"",s;return function(){var o=ME(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Gct(e,t,n){var r,i,s;return function(){var o=ME(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),ME(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Yct(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=Gh(this,e),l=u.on,c=u.value[s]==null?a||(a=ISe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Kct(e,t,n){var r=(e+="")=="transform"?bSe:CSe;return t==null?this.styleTween(e,qct(e,r)).on("end.style."+e,ISe(e)):typeof t=="function"?this.styleTween(e,Gct(e,r,lK(this,"style."+e,t))).each(Yct(this._id,e)):this.styleTween(e,Wct(e,r,t),n).on("end.style."+e,null)}function Xct(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Qct(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Xct(e,o,n)),r}return s._value=t,s}function Jct(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Qct(e,t,n??""))}function Zct(e){return function(){this.textContent=e}}function eft(e){return function(){var t=e(this);this.textContent=t??""}}function tft(e){return this.tween("text",typeof e=="function"?eft(lK(this,"text",e)):Zct(e==null?"":e+""))}function nft(e){return function(t){this.textContent=e.call(this,t)}}function rft(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&nft(i)),t}return r._value=e,r}function ift(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,rft(e))}function sft(){for(var e=this._name,t=this._id,n=kSe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=nd(u,t);y6(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Em(r,this._parents,e,n)}function oft(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=Gh(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var aft=0;function Em(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function kSe(){return++aft}var mp=mk.prototype;Em.prototype={constructor:Em,select:Uct,selectAll:zct,selectChild:mp.selectChild,selectChildren:mp.selectChildren,filter:Oct,merge:$ct,selection:Hct,transition:sft,call:mp.call,nodes:mp.nodes,node:mp.node,size:mp.size,empty:mp.empty,each:mp.each,on:Fct,attr:vct,attrTween:xct,style:Kct,styleTween:Jct,text:tft,textTween:ift,remove:Bct,tween:fct,delay:Act,duration:kct,ease:Nct,easeVarying:Dct,end:oft,[Symbol.iterator]:mp[Symbol.iterator]};const uft=e=>+e;function lft(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var cft={time:null,delay:0,duration:250,ease:lft};function fft(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function dft(e){var t,n;e instanceof Em?(t=e._id,e=e._name):(t=kSe(),(n=cft).time=g6(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&y6(u,e,t,l,o,n||fft(u,t));return new Em(r,this._parents,e,t)}mk.prototype.interrupt=uct;mk.prototype.transition=dft;const u8=e=>()=>e;function hft(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function pft(e){e.stopImmediatePropagation()}function l8(e){e.preventDefault(),e.stopImmediatePropagation()}var Yue={name:"drag"},c8={name:"space"},A_={name:"handle"},C_={name:"center"};const{abs:Kue,max:Ko,min:Xo}=Math;function Xue(e){return[+e[0],+e[1]]}function z7(e){return[Xue(e[0]),Xue(e[1])]}var fD={name:"x",handles:["w","e"].map(FC),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},dD={name:"y",handles:["n","s"].map(FC),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},mft={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(FC),input:function(e){return e==null?null:z7(e)},output:function(e){return e}},gp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Que={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},Jue={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},gft={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},yft={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function FC(e){return{type:e}}function vft(e){return!e.ctrlKey&&!e.button}function bft(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function _ft(){return navigator.maxTouchPoints||"ontouchstart"in this}function f8(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function wft(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function Eft(){return cK(fD)}function xft(){return cK(dD)}function Sft(){return cK(mft)}function cK(e){var t=bft,n=vft,r=_ft,i=!0,s=c6("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([FC("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",gp.overlay).merge(y).each(function(){var b=f8(this).extent;Vi(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([FC("selection")]).enter().append("rect").attr("class","selection").attr("cursor",gp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return gp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),T=w.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=Xm(T,S);function C(k){w.selection=k===1&&S===null?null:A(k),l.call(b),E.brush()}return T!==null&&S!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,T=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),S=c(b,w).beforestart();U7(b),E.selection=T===null?null:T,l.call(b),S.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=Vi(this),y=f8(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=Vi(this.that).datum();s.call(g,this.that,new hft(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?Yue:i&&g.altKey?C_:A_,w=e===dD?null:gft[v],E=e===fD?null:yft[v],T=f8(y),S=T.extent,A=T.selection,C=S[0][0],k,N,O=S[0][1],D,$,F=S[1][0],M,B,U=S[1][1],H,P,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=P7(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});U7(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const _e=[ce[0],ce[1]||ce[0]];T.selection=A=[[k=e===dD?C:Xo(_e[0][0],_e[1][0]),D=e===fD?O:Xo(_e[0][1],_e[1][1])],[M=e===dD?F:Ko(_e[0][0],_e[1][0]),H=e===fD?U:Ko(_e[0][1],_e[1][1])]],ce.length>1&&Ke(g)}else k=A[0][0],D=A[0][1],M=A[1][0],H=A[1][1];N=k,$=D,B=M,P=H;var he=Vi(y).attr("pointer-events","none"),ve=he.selectAll(".overlay").attr("cursor",gp[v]);if(g.touches)de.moved=be,de.ended=Ue;else{var Ie=Vi(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",Ue,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),mlt(g.view)}l.call(y),de.start(g,b.name);function be(_e){for(const ke of _e.changedTouches||[_e])for(const ze of ce)ze.identifier===ke.identifier&&(ze.cur=P7(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];Kue(ke.cur[0]-ke[0])>Kue(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,l8(_e),Ke(_e)}function Ke(_e){const ke=ce[0],ze=ke.point0;var ct;switch(z=ke[0]-ze[0],W=ke[1]-ze[1],b){case c8:case Yue:{w&&(z=Ko(C-k,Xo(F-M,z)),N=k+z,B=M+z),E&&(W=Ko(O-D,Xo(U-H,W)),$=D+W,P=H+W);break}case A_:{ce[1]?(w&&(N=Ko(C,Xo(F,ce[0][0])),B=Ko(C,Xo(F,ce[1][0])),w=1),E&&($=Ko(O,Xo(U,ce[0][1])),P=Ko(O,Xo(U,ce[1][1])),E=1)):(w<0?(z=Ko(C-k,Xo(F-k,z)),N=k+z,B=M):w>0&&(z=Ko(C-M,Xo(F-M,z)),N=k,B=M+z),E<0?(W=Ko(O-D,Xo(U-D,W)),$=D+W,P=H):E>0&&(W=Ko(O-H,Xo(U-H,W)),$=D,P=H+W));break}case C_:{w&&(N=Ko(C,Xo(F,k-z*w)),B=Ko(C,Xo(F,M+z*w))),E&&($=Ko(O,Xo(U,D-W*E)),P=Ko(O,Xo(U,H+W*E)));break}}B<N&&(w*=-1,ct=k,k=M,M=ct,ct=N,N=B,B=ct,v in Que&&ve.attr("cursor",gp[v=Que[v]])),P<$&&(E*=-1,ct=D,D=H,H=ct,ct=$,$=P,P=ct,v in Jue&&ve.attr("cursor",gp[v=Jue[v]])),T.selection&&(A=T.selection),G&&(N=A[0][0],B=A[1][0]),ne&&($=A[0][1],P=A[1][1]),(A[0][0]!==N||A[0][1]!==$||A[1][0]!==B||A[1][1]!==P)&&(T.selection=[[N,$],[B,P]],l.call(y),de.brush(_e,b.name))}function Ue(_e){if(pft(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else glt(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ve.attr("cursor",gp.overlay),T.selection&&(A=T.selection),wft(A)&&(T.selection=null,l.call(y)),de.end(_e,b.name)}function yt(_e){switch(_e.keyCode){case 16:{q=w&&E;break}case 18:{b===A_&&(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,D=$+W*E),b=C_,Ke(_e));break}case 32:{(b===A_||b===C_)&&(w<0?M=B-z:w>0&&(k=N-z),E<0?H=P-W:E>0&&(D=$-W),b=c8,ve.attr("cursor",gp.selection),Ke(_e));break}default:return}l8(_e)}function it(_e){switch(_e.keyCode){case 16:{q&&(G=ne=q=!1,Ke(_e));break}case 18:{b===C_&&(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(D=$),b=A_,Ke(_e));break}case 32:{b===c8&&(_e.altKey?(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,D=$+W*E),b=C_):(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(D=$),b=A_),ve.attr("cursor",gp[v]),Ke(_e));break}default:return}l8(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=z7(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:u8(z7(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:u8(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:u8(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const V7=Math.PI,H7=2*V7,Tv=1e-6,Tft=H7-Tv;function RSe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Aft(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return RSe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let fK=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?RSe:Aft(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Tv)if(!(Math.abs(f*u-l*c)>Tv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((V7-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>Tv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Tv||Math.abs(this._y1-c)>Tv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%H7+H7),d>Tft?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Tv&&this._append`A${r},${r},0,${+(d>=V7)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function v6(){return new fK}v6.prototype=fK.prototype;const tm=11102230246251565e-32,Qo=134217729,Cft=(3+8*tm)*tm;function d8(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function Ift(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function vk(e){return new Float64Array(e)}const kft=(3+16*tm)*tm,Rft=(2+12*tm)*tm,Nft=(9+64*tm)*tm*tm,I_=vk(4),Zue=vk(8),ele=vk(12),tle=vk(16),Ra=vk(4);function Pft(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,T,S,A;const C=e-i,k=n-i,N=t-s,O=r-s;w=C*O,d=Qo*C,h=d-(d-C),p=C-h,d=Qo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=N*k,d=Qo*N,h=d-(d-N),p=N-h,d=Qo*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,I_[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,I_[1]=b-(y+f)+(f-T),A=v+y,f=A-v,I_[2]=v-(A-f)+(y-f),I_[3]=A;let D=Ift(4,I_),$=Rft*o;if(D>=$||-D>=$||(f=e-C,a=e-(C+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-O,c=r-(O+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=Nft*o+Cft*Math.abs(D),D+=C*c+O*a-(N*l+k*u),D>=$||-D>=$))return D;w=a*O,d=Qo*a,h=d-(d-a),p=a-h,d=Qo*O,m=d-(d-O),g=O-m,E=p*g-(w-h*m-p*m-h*g),T=u*k,d=Qo*u,h=d-(d-u),p=u-h,d=Qo*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ra[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ra[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ra[2]=v-(A-f)+(y-f),Ra[3]=A;const F=d8(4,I_,4,Ra,Zue);w=C*c,d=Qo*C,h=d-(d-C),p=C-h,d=Qo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=N*l,d=Qo*N,h=d-(d-N),p=N-h,d=Qo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ra[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ra[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ra[2]=v-(A-f)+(y-f),Ra[3]=A;const M=d8(F,Zue,4,Ra,ele);w=a*c,d=Qo*a,h=d-(d-a),p=a-h,d=Qo*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=u*l,d=Qo*u,h=d-(d-u),p=u-h,d=Qo*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,Ra[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,Ra[1]=b-(y+f)+(f-T),A=v+y,f=A-v,Ra[2]=v-(A-f)+(y-f),Ra[3]=A;const B=d8(M,ele,4,Ra,tle);return tle[B-1]}function PN(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=kft*l?u:-Pft(e,t,n,r,i,s,l)}const nle=Math.pow(2,-52),DN=new Uint32Array(512);class f3{static from(t,n=Lft,r=Fft){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new f3(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const k=t[2*C],N=t[2*C+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,k=1/0;C<o;C++){const N=h8(f,d,t[2*C],t[2*C+1]);N<k&&(h=C,k=N)}const g=t[2*h],y=t[2*h+1];for(let C=0,k=1/0;C<o;C++){if(C===h)continue;const N=h8(g,y,t[2*C],t[2*C+1]);N<k&&N>0&&(p=C,k=N)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const k=$ft(g,y,v,b,t[2*C],t[2*C+1]);k<w&&(m=C,w=k)}let E=t[2*m],T=t[2*m+1];if(w===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];ww(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let k=0;for(let N=0,O=-1/0;N<o;N++){const D=this._ids[N],$=this._dists[D];$>O&&(C[k++]=D,O=$)}this.hull=C.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(PN(g,y,v,b,E,T)<0){const C=p,k=v,N=b;p=m,v=E,b=T,m=C,E=k,T=N}const S=Mft(g,y,v,b,E,T);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=h8(t[2*C],t[2*C+1],S.x,S.y);ww(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,k,N;C<this._ids.length;C++){const O=this._ids[C],D=t[2*O],$=t[2*O+1];if(C>0&&Math.abs(D-k)<=nle&&Math.abs($-N)<=nle||(k=D,N=$,O===h||O===p||O===m))continue;let F=0;for(let P=0,z=this._hashKey(D,$);P<this._hashSize&&(F=s[(z+P)%this._hashSize],!(F!==-1&&F!==r[F]));P++);F=n[F];let M=F,B;for(;B=r[M],PN(D,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===F){M=-1;break}if(M===-1)continue;let U=this._addTriangle(M,O,r[M],-1,-1,i[M]);i[O]=this._legalize(U+2),i[M]=U,A++;let H=r[M];for(;B=r[H],PN(D,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,O,B,i[O],-1,i[H]),i[O]=this._legalize(U+2),r[H]=H,A--,H=B;if(M===F)for(;B=n[M],PN(D,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)U=this._addTriangle(B,O,M,-1,i[M],i[B]),this._legalize(U+2),i[B]=U,r[M]=M,A--,M=B;this._hullStart=n[O]=M,r[M]=n[H]=O,r[O]=H,s[this._hashKey(D,$)]=O,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(A);for(let C=0,k=this._hullStart;C<A;C++)this.hull[C]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Dft(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=DN[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Oft(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<DN.length&&(DN[s++]=v)}else{if(s===0)break;t=DN[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Dft(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function h8(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Oft(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function $ft(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Mft(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function ww(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;AT(e,i,s),t[e[n]]>t[e[r]]&&AT(e,n,r),t[e[s]]>t[e[r]]&&AT(e,s,r),t[e[n]]>t[e[s]]&&AT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;AT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(ww(e,t,s,r),ww(e,t,n,o-1)):(ww(e,t,n,o-1),ww(e,t,s,r))}}function AT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Lft(e){return e[0]}function Fft(e){return e[1]}const rle=1e-6;class i1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>rle||Math.abs(this._y1-s)>rle)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class q7{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let jft=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,S=t[w],A=t[w+1],C=t[E],k=t[E+1],N=t[T],O=t[T+1],D=C-S,$=k-A,F=N-S,M=O-A,B=(D*M-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-S)*M-(o-A)*F);v=(S+N)/2-U*M,b=(A+O)/2+U*F}else{const U=1/B,H=D*D+$*$,P=F*F+M*M;v=S+(M*H-$*P)*U,b=A+(D*P-F*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new i1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new i1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new i1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new q7;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Bft=2*Math.PI,k_=Math.pow;function Uft(e){return e[0]}function zft(e){return e[1]}function Vft(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Hft(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class dK{static from(t,n=Uft,r=zft,i){return new dK("length"in t?qft(t,n,r,i):Float64Array.from(Wft(t,n,r,i)))}constructor(t){this._delaunator=new f3(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&Vft(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Hft(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new f3(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new jft(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=k_(n-l[t*2],2)+k_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=k_(n-l[p*2],2)+k_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&k_(n-l[h*2],2)+k_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new i1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new i1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Bft)}return r&&r.value()}renderHull(t){const n=t==null?t=new i1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new q7;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new i1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new q7;return this.renderTriangle(t,n),n.value()}}function qft(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Wft(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var ile={},p8={},m8=34,CT=10,g8=13;function NSe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function Gft(e,t){var n=NSe(e);return function(r,i){return t(n(r),i,e)}}function sle(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function gu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Yft(e){return e<0?"-"+gu(-e,6):e>9999?"+"+gu(e,6):gu(e,4)}function Kft(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Yft(e.getUTCFullYear())+"-"+gu(e.getUTCMonth()+1,2)+"-"+gu(e.getUTCDate(),2)+(i?"T"+gu(t,2)+":"+gu(n,2)+":"+gu(r,2)+"."+gu(i,3)+"Z":r?"T"+gu(t,2)+":"+gu(n,2)+":"+gu(r,2)+"Z":n||t?"T"+gu(t,2)+":"+gu(n,2)+"Z":"")}function PSe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?Gft(g,d):NSe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===CT&&--p,f.charCodeAt(p-1)===g8&&--p;function w(){if(v)return p8;if(b)return b=!1,ile;var T,S=m,A;if(f.charCodeAt(S)===m8){for(;m++<p&&f.charCodeAt(m)!==m8||f.charCodeAt(++m)===m8;);return(T=m)>=p?v=!0:(A=f.charCodeAt(m++))===CT?b=!0:A===g8&&(b=!0,f.charCodeAt(m)===CT&&++m),f.slice(S+1,T-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(T=m++))===CT)b=!0;else if(A===g8)b=!0,f.charCodeAt(m)===CT&&++m;else if(A!==n)continue;return f.slice(S,T)}return v=!0,f.slice(S,p)}for(;(y=w())!==p8;){for(var E=[];y!==ile&&y!==p8;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=sle(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=sle(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Kft(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var Xft=PSe(","),Qft=Xft.parse;function Jft(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function Zft(e,t){return fetch(e,t).then(Jft)}function edt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),Zft(t,n).then(function(i){return e(i,r)})}}var hK=edt(Qft);function tdt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function ndt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return DSe(this.cover(t,n),t,n,e)}function DSe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function rdt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)DSe(this,o[n],a[n],e[n]);return this}function idt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function sdt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function odt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ba(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function adt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new Ba(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new Ba(h[3],g,y,u,l),new Ba(h[2],o,y,g,l),new Ba(h[1],g,a,u,y),new Ba(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function udt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function ldt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function cdt(){return this._root}function fdt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function ddt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new Ba(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new Ba(i,l,c,a,u)),(i=r[2])&&t.push(new Ba(i,s,c,l,u)),(i=r[1])&&t.push(new Ba(i,l,o,a,c)),(i=r[0])&&t.push(new Ba(i,s,o,l,c))}return this}function hdt(e){var t=[],n=[],r;for(this._root&&t.push(new Ba(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new Ba(s,o,a,c,f)),(s=i[1])&&t.push(new Ba(s,c,a,u,f)),(s=i[2])&&t.push(new Ba(s,o,f,c,l)),(s=i[3])&&t.push(new Ba(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function pdt(e){return e[0]}function mdt(e){return arguments.length?(this._x=e,this):this._x}function gdt(e){return e[1]}function ydt(e){return arguments.length?(this._y=e,this):this._y}function pK(e,t,n){var r=new mK(t??pdt,n??gdt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function mK(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ole(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var iu=pK.prototype=mK.prototype;iu.copy=function(){var e=new mK(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=ole(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=ole(r));return e};iu.add=ndt;iu.addAll=rdt;iu.cover=idt;iu.data=sdt;iu.extent=odt;iu.find=adt;iu.remove=udt;iu.removeAll=ldt;iu.root=cdt;iu.size=fdt;iu.visit=ddt;iu.visitAfter=hdt;iu.x=mdt;iu.y=ydt;function Va(e){return function(){return e}}function Xg(e){return(e()-.5)*1e-6}function vdt(e){return e.x+e.vx}function bdt(e){return e.y+e.vy}function _dt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Va(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=pK(t,vdt,bdt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,T,S){var A=b.data,C=b.r,k=m+C;if(A){if(A.index>d.index){var N=h-A.x-A.vx,O=p-A.y-A.vy,D=N*N+O*O;D<k*k&&(N===0&&(N=Xg(r),D+=N*N),O===0&&(O=Xg(r),D+=O*O),D=(k-(D=Math.sqrt(D)))/D*i,d.vx+=(N*=D)*(k=(C*=C)/(g+C)),d.vy+=(O*=D)*k,A.vx-=N*(k=1-k),A.vy-=O*k)}return}return w>h+k||T<h-k||E>p+k||S<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Va(+l),u(),o):e},o}function wdt(e){return e.index}function ale(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function Edt(e){var t=wdt,n=f,r,i=Va(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,T,S,A,C,k;b<v;++b)w=e[b],E=w.source,T=w.target,S=T.x+T.vx-E.x-E.vx||Xg(l),A=T.y+T.vy-E.y-E.vy||Xg(l),C=Math.sqrt(S*S+A*A),C=(C-s[b])/C*g*r[b],S*=C,A*=C,T.vx-=S*(k=u[b]),T.vy-=A*k,E.vx+=S*(k=1-k),E.vy+=A*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,T)=>[t(E,T,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=ale(b,w.source)),typeof w.target!="object"&&(w.target=ale(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Va(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Va(+g),m(),d):i},d}const xdt=1664525,Sdt=1013904223,ule=4294967296;function Tdt(){let e=1;return()=>(e=(xdt*e+Sdt)%ule)/ule}function Adt(e){return e.x}function Cdt(e){return e.y}var Idt=10,kdt=Math.PI*(3-Math.sqrt(5));function Rdt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=aK(f),l=c6("tick","end"),c=Tdt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=Idt*Math.sqrt(.5+m),b=m*kdt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,T,S,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],w=m-S.x,E=g-S.y,T=w*w+E*E,T<y&&(A=S,y=T);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function Ndt(){var e,t,n,r,i=Va(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=pK(e,Adt,Cdt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=Xg(n),w+=y*y),v===0&&(v=Xg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=Xg(n),w+=y*y),v===0&&(v=Xg(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Va(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Pdt(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function Ddt(e){var t=Va(.1),n,r,i;typeof e!="function"&&(e=Va(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Va(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Va(+a),o(),s):e},s}function Odt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function d3(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function jE(e){return e=d3(Math.abs(e)),e?e[1]:NaN}function $dt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Mdt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Ldt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function q1(e){if(!(t=Ldt.exec(e)))throw new Error("invalid format: "+e);var t;return new gK({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}q1.prototype=gK.prototype;function gK(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}gK.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fdt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var OSe;function jdt(e,t){var n=d3(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(OSe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+d3(e,Math.max(0,t+s-1))[0]}function lle(e,t){var n=d3(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const cle={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Odt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>lle(e*100,t),r:lle,s:jdt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function fle(e){return e}var dle=Array.prototype.map,hle=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function $Se(e){var t=e.grouping===void 0||e.thousands===void 0?fle:$dt(dle.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?fle:Mdt(dle.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=q1(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):cle[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",A=cle[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(N){var O=T,D=S,$,F,M;if(E==="c")D=A(N)+D,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:A(Math.abs(N),b),w&&(N=Fdt(N)),B&&+N==0&&p!=="+"&&(B=!1),O=(B?p==="("?p:a:p==="-"||p==="("?"":p)+O,D=(E==="s"?hle[8+OSe/3]:"")+D+(B&&p==="("?")":""),C){for($=-1,F=N.length;++$<F;)if(M=N.charCodeAt($),48>M||M>57){D=(M===46?i+N.slice($+1):N.slice($))+D,N=N.slice(0,$);break}}}v&&!g&&(N=t(N,1/0));var U=O.length+N.length+D.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(N=t(H+N,H.length?y-D.length:1/0),H=""),h){case"<":N=O+N+D+H;break;case"=":N=O+H+N+D;break;case"^":N=H.slice(0,U=H.length>>1)+O+N+D+H.slice(U);break;default:N=H+O+N+D;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=q1(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(jE(d)/3)))*3,m=Math.pow(10,-p),g=hle[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var ON,cS,yK;Bdt({thousands:",",grouping:[3],currency:["$",""]});function Bdt(e){return ON=$Se(e),cS=ON.format,yK=ON.formatPrefix,ON}function MSe(e){return Math.max(0,-jE(Math.abs(e)))}function LSe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jE(t)/3)))*3-jE(Math.abs(e)))}function FSe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,jE(t)-jE(e))+1}var Bt=1e-6,h3=1e-12,Pn=Math.PI,Yi=Pn/2,p3=Pn/4,Qa=Pn*2,is=180/Pn,Rn=Pn/180,Xn=Math.abs,fS=Math.atan,Nc=Math.atan2,zt=Math.cos,$N=Math.ceil,jSe=Math.exp,W7=Math.hypot,m3=Math.log,y8=Math.pow,Ft=Math.sin,_c=Math.sign||function(e){return e>0?1:e<0?-1:0},Ja=Math.sqrt,vK=Math.tan;function BSe(e){return e>1?0:e<-1?Pn:Math.acos(e)}function Ku(e){return e>1?Yi:e<-1?-Yi:Math.asin(e)}function Io(){}function g3(e,t){e&&mle.hasOwnProperty(e.type)&&mle[e.type](e,t)}var ple={Feature:function(e,t){g3(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)g3(n[r].geometry,t)}},mle={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){G7(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)G7(n[r],t,0)},Polygon:function(e,t){gle(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)gle(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)g3(n[r],t)}};function G7(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function gle(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)G7(e[n],t,1);t.polygonEnd()}function Op(e,t){e&&ple.hasOwnProperty(e.type)?ple[e.type](e,t):g3(e,t)}var y3=new Wa,v3=new Wa,USe,zSe,Y7,K7,X7,wh={point:Io,lineStart:Io,lineEnd:Io,polygonStart:function(){y3=new Wa,wh.lineStart=Udt,wh.lineEnd=zdt},polygonEnd:function(){var e=+y3;v3.add(e<0?Qa+e:e),this.lineStart=this.lineEnd=this.point=Io},sphere:function(){v3.add(Qa)}};function Udt(){wh.point=Vdt}function zdt(){VSe(USe,zSe)}function Vdt(e,t){wh.point=VSe,USe=e,zSe=t,e*=Rn,t*=Rn,Y7=e,K7=zt(t=t/2+p3),X7=Ft(t)}function VSe(e,t){e*=Rn,t*=Rn,t=t/2+p3;var n=e-Y7,r=n>=0?1:-1,i=r*n,s=zt(t),o=Ft(t),a=X7*o,u=K7*s+a*zt(i),l=a*r*Ft(i);y3.add(Nc(l,u)),Y7=e,K7=s,X7=o}function Hdt(e){return v3=new Wa,Op(e,wh),v3*2}function b3(e){return[Nc(e[1],e[0]),Ku(e[2])]}function W1(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Ft(t),Ft(n)]}function MN(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function BE(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function v8(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function LN(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function _3(e){var t=Ja(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Ri,Tu,ji,gl,Av,HSe,qSe,Yw,_A,kg,xm,kp={point:Q7,lineStart:yle,lineEnd:vle,polygonStart:function(){kp.point=GSe,kp.lineStart=qdt,kp.lineEnd=Wdt,_A=new Wa,wh.polygonStart()},polygonEnd:function(){wh.polygonEnd(),kp.point=Q7,kp.lineStart=yle,kp.lineEnd=vle,y3<0?(Ri=-(ji=180),Tu=-(gl=90)):_A>Bt?gl=90:_A<-Bt&&(Tu=-90),xm[0]=Ri,xm[1]=ji},sphere:function(){Ri=-(ji=180),Tu=-(gl=90)}};function Q7(e,t){kg.push(xm=[Ri=e,ji=e]),t<Tu&&(Tu=t),t>gl&&(gl=t)}function WSe(e,t){var n=W1([e*Rn,t*Rn]);if(Yw){var r=BE(Yw,n),i=[r[1],-r[0],0],s=BE(i,r);_3(s),s=b3(s);var o=e-Av,a=o>0?1:-1,u=s[0]*is*a,l,c=Xn(o)>180;c^(a*Av<u&&u<a*e)?(l=s[1]*is,l>gl&&(gl=l)):(u=(u+360)%360-180,c^(a*Av<u&&u<a*e)?(l=-s[1]*is,l<Tu&&(Tu=l)):(t<Tu&&(Tu=t),t>gl&&(gl=t))),c?e<Av?pl(Ri,e)>pl(Ri,ji)&&(ji=e):pl(e,ji)>pl(Ri,ji)&&(Ri=e):ji>=Ri?(e<Ri&&(Ri=e),e>ji&&(ji=e)):e>Av?pl(Ri,e)>pl(Ri,ji)&&(ji=e):pl(e,ji)>pl(Ri,ji)&&(Ri=e)}else kg.push(xm=[Ri=e,ji=e]);t<Tu&&(Tu=t),t>gl&&(gl=t),Yw=n,Av=e}function yle(){kp.point=WSe}function vle(){xm[0]=Ri,xm[1]=ji,kp.point=Q7,Yw=null}function GSe(e,t){if(Yw){var n=e-Av;_A.add(Xn(n)>180?n+(n>0?360:-360):n)}else HSe=e,qSe=t;wh.point(e,t),WSe(e,t)}function qdt(){wh.lineStart()}function Wdt(){GSe(HSe,qSe),wh.lineEnd(),Xn(_A)>Bt&&(Ri=-(ji=180)),xm[0]=Ri,xm[1]=ji,Yw=null}function pl(e,t){return(t-=e)<0?t+360:t}function Gdt(e,t){return e[0]-t[0]}function ble(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Ydt(e){var t,n,r,i,s,o,a;if(gl=ji=-(Ri=Tu=1/0),kg=[],Op(e,kp),n=kg.length){for(kg.sort(Gdt),t=1,r=kg[0],s=[r];t<n;++t)i=kg[t],ble(r,i[0])||ble(r,i[1])?(pl(r[0],i[1])>pl(r[0],r[1])&&(r[1]=i[1]),pl(i[0],r[1])>pl(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=pl(r[1],i[0]))>o&&(o=a,Ri=i[0],ji=r[1])}return kg=xm=null,Ri===1/0||Tu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Ri,Tu],[ji,gl]]}var b2,w3,E3,x3,S3,T3,A3,C3,J7,Z7,ez,YSe,KSe,La,Fa,ja,Cf={sphere:Io,point:bK,lineStart:_le,lineEnd:wle,polygonStart:function(){Cf.lineStart=Qdt,Cf.lineEnd=Jdt},polygonEnd:function(){Cf.lineStart=_le,Cf.lineEnd=wle}};function bK(e,t){e*=Rn,t*=Rn;var n=zt(t);bk(n*zt(e),n*Ft(e),Ft(t))}function bk(e,t,n){++b2,E3+=(e-E3)/b2,x3+=(t-x3)/b2,S3+=(n-S3)/b2}function _le(){Cf.point=Kdt}function Kdt(e,t){e*=Rn,t*=Rn;var n=zt(t);La=n*zt(e),Fa=n*Ft(e),ja=Ft(t),Cf.point=Xdt,bk(La,Fa,ja)}function Xdt(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Nc(Ja((o=Fa*s-ja*i)*o+(o=ja*r-La*s)*o+(o=La*i-Fa*r)*o),La*r+Fa*i+ja*s);w3+=o,T3+=o*(La+(La=r)),A3+=o*(Fa+(Fa=i)),C3+=o*(ja+(ja=s)),bk(La,Fa,ja)}function wle(){Cf.point=bK}function Qdt(){Cf.point=Zdt}function Jdt(){XSe(YSe,KSe),Cf.point=bK}function Zdt(e,t){YSe=e,KSe=t,e*=Rn,t*=Rn,Cf.point=XSe;var n=zt(t);La=n*zt(e),Fa=n*Ft(e),ja=Ft(t),bk(La,Fa,ja)}function XSe(e,t){e*=Rn,t*=Rn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Fa*s-ja*i,a=ja*r-La*s,u=La*i-Fa*r,l=W7(o,a,u),c=Ku(l),f=l&&-c/l;J7.add(f*o),Z7.add(f*a),ez.add(f*u),w3+=c,T3+=c*(La+(La=r)),A3+=c*(Fa+(Fa=i)),C3+=c*(ja+(ja=s)),bk(La,Fa,ja)}function eht(e){b2=w3=E3=x3=S3=T3=A3=C3=0,J7=new Wa,Z7=new Wa,ez=new Wa,Op(e,Cf);var t=+J7,n=+Z7,r=+ez,i=W7(t,n,r);return i<h3&&(t=T3,n=A3,r=C3,w3<Bt&&(t=E3,n=x3,r=S3),i=W7(t,n,r),i<h3)?[NaN,NaN]:[Nc(n,t)*is,Ku(r/i)*is]}function tz(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function nz(e,t){return Xn(e)>Pn&&(e-=Math.round(e/Qa)*Qa),[e,t]}nz.invert=nz;function QSe(e,t,n){return(e%=Qa)?t||n?tz(xle(e),Sle(t,n)):xle(e):t||n?Sle(t,n):nz}function Ele(e){return function(t,n){return t+=e,Xn(t)>Pn&&(t-=Math.round(t/Qa)*Qa),[t,n]}}function xle(e){var t=Ele(e);return t.invert=Ele(-e),t}function Sle(e,t){var n=zt(e),r=Ft(e),i=zt(t),s=Ft(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*n+c*r;return[Nc(f*i-h*s,c*n-d*r),Ku(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*i-f*s;return[Nc(f*i+d*s,c*n+h*r),Ku(h*n-c*r)]},o}function tht(e){e=QSe(e[0]*Rn,e[1]*Rn,e.length>2?e[2]*Rn:0);function t(n){return n=e(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n}return t.invert=function(n){return n=e.invert(n[0]*Rn,n[1]*Rn),n[0]*=is,n[1]*=is,n},t}function nht(e,t,n,r,i,s){if(n){var o=zt(t),a=Ft(t),u=r*n;i==null?(i=t+r*Qa,s=t-u/2):(i=Tle(o,i),s=Tle(o,s),(r>0?i<s:i>s)&&(i+=r*Qa));for(var l,c=i;r>0?c>s:c<s;c-=u)l=b3([o,-a*zt(c),-a*Ft(c)]),e.point(l[0],l[1])}}function Tle(e,t){t=W1(t),t[0]-=e,_3(t);var n=BSe(-t[1]);return((-t[2]<0?-n:n)+Qa-Bt)%Qa}function JSe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Io,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function hD(e,t){return Xn(e[0]-t[0])<Bt&&Xn(e[1]-t[1])<Bt}function FN(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function ZSe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(hD(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new FN(g,p,null,!0)),o.push(v.o=new FN(g,null,v,!1)),s.push(v=new FN(y,p,null,!1)),o.push(v.o=new FN(y,null,v,!0))}}),!!s.length){for(o.sort(t),Ale(s),Ale(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function Ale(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function b8(e){return Xn(e[0])<=Pn?e[0]:_c(e[0])*((Xn(e[0])+Pn)%Qa-Pn)}function rht(e,t){var n=b8(t),r=t[1],i=Ft(r),s=[Ft(n),-zt(n),0],o=0,a=0,u=new Wa;i===1?r=Yi+Bt:i===-1&&(r=-Yi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=b8(h),m=h[1]/2+p3,g=Ft(m),y=zt(m),v=0;v<d;++v,p=w,g=T,y=S,h=b){var b=f[v],w=b8(b),E=b[1]/2+p3,T=Ft(E),S=zt(E),A=w-p,C=A>=0?1:-1,k=C*A,N=k>Pn,O=g*T;if(u.add(Nc(O*C*Ft(k),y*S+O*zt(k))),o+=N?A+C*Qa:A,N^p>=n^w>=n){var D=BE(W1(h),W1(b));_3(D);var $=BE(s,D);_3($);var F=(N^A>=0?-1:1)*Ku($[2]);(r>F||r===F&&(D[0]||D[1]))&&(a+=N^A>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-h3)^a&1}function eTe(e,t,n,r){return function(i){var s=t(i),o=JSe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=Lxe(c);var w=rht(l,r);c.length?(u||(i.polygonStart(),u=!0),ZSe(c,sht,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),T,S=E.length,A,C,k;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<A;++T)i.point((k=C[T])[0],k[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(iht))}}return d}}function iht(e){return e.length>1}function sht(e,t){return((e=e.x)[0]<0?e[1]-Yi-Bt:Yi-e[1])-((t=t.x)[0]<0?t[1]-Yi-Bt:Yi-t[1])}const Cle=eTe(function(){return!0},oht,uht,[-Pn,-Yi]);function oht(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?Pn:-Pn,u=Xn(s-t);Xn(u-Pn)<Bt?(e.point(t,n=(n+o)/2>0?Yi:-Yi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=Pn&&(Xn(t-r)<Bt&&(t-=r*Bt),Xn(s-a)<Bt&&(s-=a*Bt),n=aht(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function aht(e,t,n,r){var i,s,o=Ft(e-n);return Xn(o)>Bt?fS((Ft(t)*(s=zt(r))*Ft(n)-Ft(r)*(i=zt(t))*Ft(e))/(i*s*o)):(t+r)/2}function uht(e,t,n,r){var i;if(e==null)i=n*Yi,r.point(-Pn,i),r.point(0,i),r.point(Pn,i),r.point(Pn,0),r.point(Pn,-i),r.point(0,-i),r.point(-Pn,-i),r.point(-Pn,0),r.point(-Pn,i);else if(Xn(e[0]-t[0])>Bt){var s=e[0]<t[0]?Pn:-Pn;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function lht(e){var t=zt(e),n=2*Rn,r=t>0,i=Xn(t)>Bt;function s(c,f,d,h){nht(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?Pn:-Pn),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||hD(f,b)||hD(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var T;!(E&d)&&(T=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!hD(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=W1(c),p=W1(f),m=[1,0,0],g=BE(h,p),y=MN(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,T=BE(m,g),S=LN(m,w),A=LN(g,E);v8(S,A);var C=T,k=MN(S,C),N=MN(C,C),O=k*k-N*(MN(S,S)-1);if(!(O<0)){var D=Ja(O),$=LN(C,(-k-D)/N);if(v8($,S),$=b3($),!d)return $;var F=c[0],M=f[0],B=c[1],U=f[1],H;M<F&&(H=F,F=M,M=H);var P=M-F,z=Xn(P-Pn)<Bt,W=z||P<Bt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^$[1]<(Xn($[0]-F)<Bt?B:U):B<=$[1]&&$[1]<=U:P>Pn^(F<=$[0]&&$[0]<=M)){var j=LN(C,(-k+D)/N);return v8(j,S),[$,b3(j)]}}}function l(c,f){var d=r?e:Pn-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return eTe(o,a,s,r?[0,-e]:[-Pn,e-Pn])}function cht(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var _2=1e9,jN=-_2;function tTe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Xn(l[0]-e)<Bt?c>0?0:3:Xn(l[0]-n)<Bt?c>0?2:1:Xn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=JSe(),d,h,p,m,g,y,v,b,w,E,T,S={point:A,lineStart:O,lineEnd:D,polygonStart:k,polygonEnd:N};function A(F,M){i(F,M)&&c.point(F,M)}function C(){for(var F=0,M=0,B=h.length;M<B;++M)for(var U=h[M],H=1,P=U.length,z=U[0],W,j,q=z[0],G=z[1];H<P;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function k(){c=f,d=[],h=[],T=!0}function N(){var F=C(),M=T&&F,B=(d=Lxe(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&ZSe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function O(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function D(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=A,w&&c.lineEnd()}function $(F,M){var B=i(F,M);if(h&&p.push([F,M]),E)m=F,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(F,M));else if(B&&w)c.point(F,M);else{var U=[v=Math.max(jN,Math.min(_2,v)),b=Math.max(jN,Math.min(_2,b))],H=[F=Math.max(jN,Math.min(_2,F)),M=Math.max(jN,Math.min(_2,M))];cht(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),T=!1):B&&(c.lineStart(),c.point(F,M),T=!1)}v=F,b=M,w=B}return S}}function Ile(e,t,n){var r=Du(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function kle(e,t,n){var r=Du(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function fht(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return Du($N(r/c)*c,n,c).map(p).concat(Du($N(a/f)*f,o,f).map(m)).concat(Du($N(t/u)*u,e,u).filter(function(b){return Xn(b%c)>Bt}).map(d)).concat(Du($N(s/l)*l,i,l).filter(function(b){return Xn(b%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Ile(s,i,90),h=kle(t,e,g),p=Ile(a,o,90),m=kle(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const jC=e=>e;var _8=new Wa,rz=new Wa,nTe,rTe,iz,sz,$p={point:Io,lineStart:Io,lineEnd:Io,polygonStart:function(){$p.lineStart=dht,$p.lineEnd=pht},polygonEnd:function(){$p.lineStart=$p.lineEnd=$p.point=Io,_8.add(Xn(rz)),rz=new Wa},result:function(){var e=_8/2;return _8=new Wa,e}};function dht(){$p.point=hht}function hht(e,t){$p.point=iTe,nTe=iz=e,rTe=sz=t}function iTe(e,t){rz.add(sz*e-iz*t),iz=e,sz=t}function pht(){iTe(nTe,rTe)}var UE=1/0,I3=UE,BC=-UE,k3=BC,R3={point:mht,lineStart:Io,lineEnd:Io,polygonStart:Io,polygonEnd:Io,result:function(){var e=[[UE,I3],[BC,k3]];return BC=k3=-(I3=UE=1/0),e}};function mht(e,t){e<UE&&(UE=e),e>BC&&(BC=e),t<I3&&(I3=t),t>k3&&(k3=t)}var oz=0,az=0,w2=0,N3=0,P3=0,Ew=0,uz=0,lz=0,E2=0,sTe,oTe,Fd,jd,yc={point:G1,lineStart:Rle,lineEnd:Nle,polygonStart:function(){yc.lineStart=vht,yc.lineEnd=bht},polygonEnd:function(){yc.point=G1,yc.lineStart=Rle,yc.lineEnd=Nle},result:function(){var e=E2?[uz/E2,lz/E2]:Ew?[N3/Ew,P3/Ew]:w2?[oz/w2,az/w2]:[NaN,NaN];return oz=az=w2=N3=P3=Ew=uz=lz=E2=0,e}};function G1(e,t){oz+=e,az+=t,++w2}function Rle(){yc.point=ght}function ght(e,t){yc.point=yht,G1(Fd=e,jd=t)}function yht(e,t){var n=e-Fd,r=t-jd,i=Ja(n*n+r*r);N3+=i*(Fd+e)/2,P3+=i*(jd+t)/2,Ew+=i,G1(Fd=e,jd=t)}function Nle(){yc.point=G1}function vht(){yc.point=_ht}function bht(){aTe(sTe,oTe)}function _ht(e,t){yc.point=aTe,G1(sTe=Fd=e,oTe=jd=t)}function aTe(e,t){var n=e-Fd,r=t-jd,i=Ja(n*n+r*r);N3+=i*(Fd+e)/2,P3+=i*(jd+t)/2,Ew+=i,i=jd*e-Fd*t,uz+=i*(Fd+e),lz+=i*(jd+t),E2+=i*3,G1(Fd=e,jd=t)}function uTe(e){this._context=e}uTe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,Qa);break}}},result:Io};var cz=new Wa,w8,lTe,cTe,x2,S2,UC={point:Io,lineStart:function(){UC.point=wht},lineEnd:function(){w8&&fTe(lTe,cTe),UC.point=Io},polygonStart:function(){w8=!0},polygonEnd:function(){w8=null},result:function(){var e=+cz;return cz=new Wa,e}};function wht(e,t){UC.point=fTe,lTe=x2=e,cTe=S2=t}function fTe(e,t){x2-=e,S2-=t,cz.add(Ja(x2*x2+S2*S2)),x2=e,S2=t}let Ple,D3,Dle,Ole;class $le{constructor(t){this._append=t==null?dTe:Eht(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Dle||this._append!==D3){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Dle=r,D3=this._append,Ole=this._,this._=i}this._+=Ole;break}}}result(){const t=this._;return this._="",t.length?t:null}}function dTe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function Eht(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return dTe;if(t!==Ple){const n=10**t;Ple=t,D3=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return D3}function hTe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Op(a,i(s))),s.result()}return o.area=function(a){return Op(a,i($p)),$p.result()},o.measure=function(a){return Op(a,i(UC)),UC.result()},o.bounds=function(a){return Op(a,i(R3)),R3.result()},o.centroid=function(a){return Op(a,i(yc)),yc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,jC):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new $le(n)):new uTe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new $le(n)),o},o.projection(e).digits(n).context(t)}function b6(e){return function(t){var n=new fz;for(var r in e)n[r]=e[r];return n.stream=t,n}}function fz(){}fz.prototype={constructor:fz,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function _K(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Op(n,e.stream(R3)),t(R3.result()),r!=null&&e.clipExtent(r),e}function _6(e,t,n){return _K(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function wK(e,t,n){return _6(e,[[0,0],t],n)}function EK(e,t,n){return _K(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function xK(e,t,n){return _K(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var Mle=16,xht=zt(30*Rn);function Lle(e,t){return+t?Tht(e,t):Sht(e)}function Sht(e){return b6({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function Tht(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,T=u+p,S=Ja(w*w+E*E+T*T),A=Ku(T/=S),C=Xn(Xn(T)-1)<Bt||Xn(s-f)<Bt?(s+f)/2:Nc(E,w),k=e(C,A),N=k[0],O=k[1],D=N-r,$=O-i,F=v*D-y*$;(F*F/b>t||Xn((y*D+v*$)/b-.5)>.3||o*d+a*h+u*p<xht)&&(n(r,i,s,o,a,u,N,O,C,w/=S,E/=S,T,m,g),g.point(N,O),n(N,O,C,w,E,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var k=W1([A,C]),N=e(A,C);n(f,d,c,h,p,m,f=N[0],d=N[1],c=A,h=k[0],p=k[1],m=k[2],Mle,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=T,g.lineEnd=S}function T(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,Mle,r),g.lineEnd=w,w()}return g}}var Aht=b6({point:function(e,t){this.stream.point(e*Rn,t*Rn)}});function Cht(e){return b6({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function Iht(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function Fle(e,t,n,r,i,s){if(!s)return Iht(e,t,n,r,i);var o=zt(s),a=Ft(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function Yh(e){return pTe(function(){return e})()}function pTe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Cle,g=null,y,v,b,w=jC,E=.5,T,S,A,C,k;function N(F){return A(F[0]*Rn,F[1]*Rn)}function O(F){return F=A.invert(F[0],F[1]),F&&[F[0]*is,F[1]*is]}N.stream=function(F){return C&&k===F?C:C=Aht(Cht(c)(m(T(w(k=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,$()):w},N.clipAngle=function(F){return arguments.length?(m=+F?lht(p=F*Rn):(p=null,Cle),$()):p*is},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,jC):tTe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),$()):g==null?null:[[g,y],[v,b]]},N.scale=function(F){return arguments.length?(n=+F,D()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],D()):[r,i]},N.center=function(F){return arguments.length?(s=F[0]%360*Rn,o=F[1]%360*Rn,D()):[s*is,o*is]},N.rotate=function(F){return arguments.length?(a=F[0]%360*Rn,u=F[1]%360*Rn,l=F.length>2?F[2]%360*Rn:0,D()):[a*is,u*is,l*is]},N.angle=function(F){return arguments.length?(f=F%360*Rn,D()):f*is},N.reflectX=function(F){return arguments.length?(d=F?-1:1,D()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,D()):h<0},N.precision=function(F){return arguments.length?(T=Lle(S,E=F*F),$()):Ja(E)},N.fitExtent=function(F,M){return _6(N,F,M)},N.fitSize=function(F,M){return wK(N,F,M)},N.fitWidth=function(F,M){return EK(N,F,M)},N.fitHeight=function(F,M){return xK(N,F,M)};function D(){var F=Fle(n,0,0,d,h,f).apply(null,t(s,o)),M=Fle(n,r-F[0],i-F[1],d,h,f);return c=QSe(a,u,l),S=tz(t,M),A=tz(c,S),T=Lle(S,E),$()}function $(){return C=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&O,D()}}function SK(e){var t=0,n=Pn/3,r=pTe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Rn,n=s[1]*Rn):[t*is,n*is]},i}function kht(e){var t=zt(e);function n(r,i){return[r*t,Ft(i)/t]}return n.invert=function(r,i){return[r/t,Ku(i*t)]},n}function Rht(e,t){var n=Ft(e),r=(n+Ft(t))/2;if(Xn(r)<Bt)return kht(e);var i=1+n*(2*r-n),s=Ja(i)/r;function o(a,u){var l=Ja(i-2*r*Ft(u))/r;return[l*Ft(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=Nc(a,Xn(l))*_c(l);return l*r<0&&(c-=Pn*_c(a)*_c(l)),[c/r,Ku((i-(a*a+l*l)*r*r)/(2*r))]},o}function O3(){return SK(Rht).scale(155.424).center([0,33.6442])}function mTe(){return O3().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function Nht(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Pht(){var e,t,n=mTe(),r,i=O3().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=O3().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=Nht([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return _6(c,d,h)},c.fitSize=function(d,h){return wK(c,d,h)},c.fitWidth=function(d,h){return EK(c,d,h)},c.fitHeight=function(d,h){return xK(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function gTe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ft(t),s*Ft(n)]}}function _k(e){return function(t,n){var r=Ja(t*t+n*n),i=e(r),s=Ft(i),o=zt(i);return[Nc(t*s,r*o),Ku(r&&n*s/r)]}}var yTe=gTe(function(e){return Ja(2/(1+e))});yTe.invert=_k(function(e){return 2*Ku(e/2)});function Dht(){return Yh(yTe).scale(124.75).clipAngle(180-.001)}var vTe=gTe(function(e){return(e=BSe(e))&&e/Ft(e)});vTe.invert=_k(function(e){return e});function Oht(){return Yh(vTe).scale(79.4188).clipAngle(180-.001)}function w6(e,t){return[e,m3(vK((Yi+t)/2))]}w6.invert=function(e,t){return[e,2*fS(jSe(t))-Yi]};function $ht(){return bTe(w6).scale(961/Qa)}function bTe(e){var t=Yh(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=Pn*r(),d=t(tht(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===w6?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function BN(e){return vK((Yi+e)/2)}function Mht(e,t){var n=zt(e),r=e===t?Ft(e):m3(n/zt(t))/m3(BN(t)/BN(e)),i=n*y8(BN(e),r)/r;if(!r)return w6;function s(o,a){i>0?a<-Yi+Bt&&(a=-Yi+Bt):a>Yi-Bt&&(a=Yi-Bt);var u=i/y8(BN(a),r);return[u*Ft(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=_c(r)*Ja(o*o+u*u),c=Nc(o,Xn(u))*_c(u);return u*r<0&&(c-=Pn*_c(o)*_c(u)),[c/r,2*fS(y8(i/l,1/r))-Yi]},s}function Lht(){return SK(Mht).scale(109.5).parallels([30,30])}function $3(e,t){return[e,t]}$3.invert=$3;function Fht(){return Yh($3).scale(152.63)}function jht(e,t){var n=zt(e),r=e===t?Ft(e):(n-zt(t))/(t-e),i=n/r+e;if(Xn(r)<Bt)return $3;function s(o,a){var u=i-a,l=r*o;return[u*Ft(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=Nc(o,Xn(u))*_c(u);return u*r<0&&(l-=Pn*_c(o)*_c(u)),[l/r,i-_c(r)*Ja(o*o+u*u)]},s}function Bht(){return SK(jht).scale(131.154).center([0,13.9389])}var wA=1.340264,EA=-.081106,xA=893e-6,SA=.003796,M3=Ja(3)/2,Uht=12;function _Te(e,t){var n=Ku(M3*Ft(t)),r=n*n,i=r*r*r;return[e*zt(n)/(M3*(wA+3*EA*r+i*(7*xA+9*SA*r))),n*(wA+EA*r+i*(xA+SA*r))]}_Te.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Uht&&(a=n*(wA+EA*r+i*(xA+SA*r))-t,u=wA+3*EA*r+i*(7*xA+9*SA*r),n-=o=a/u,r=n*n,i=r*r*r,!(Xn(o)<h3));++s);return[M3*e*(wA+3*EA*r+i*(7*xA+9*SA*r))/zt(n),Ku(Ft(n)/M3)]};function zht(){return Yh(_Te).scale(177.158)}function wTe(e,t){var n=zt(t),r=zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}wTe.invert=_k(fS);function Vht(){return Yh(wTe).scale(144.049).clipAngle(60)}function Hht(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=b6({point:function(w,E){var T=b([w,E]);this.stream.point(T[0],T[1])}}),m=jC,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,T=w[1]*h;if(s){var S=T*o-E*a;E=E*o+T*a,T=S}return[E+t,T+n]}return b.invert=function(w){var E=w[0]-t,T=w[1]-n;if(s){var S=T*o+E*a;E=E*o-T*a,T=S}return[E/d,T/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,jC):tTe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*Rn,a=Ft(s),o=zt(s),v()):s*is},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return _6(b,w,E)},b.fitSize=function(w,E){return wK(b,w,E)},b.fitWidth=function(w,E){return EK(b,w,E)},b.fitHeight=function(w,E){return xK(b,w,E)},b}function ETe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}ETe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Xn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function qht(){return Yh(ETe).scale(175.295)}function xTe(e,t){return[zt(t)*Ft(e),Ft(t)]}xTe.invert=_k(Ku);function Wht(){return Yh(xTe).scale(249.5).clipAngle(90+Bt)}function STe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}STe.invert=_k(function(e){return 2*fS(e)});function Ght(){return Yh(STe).scale(250).clipAngle(142)}function TTe(e,t){return[m3(vK((Yi+t)/2)),-e]}TTe.invert=function(e,t){return[-t,2*fS(jSe(e))-Yi]};function Yht(){var e=bTe(TTe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Kht(e,t){return e.parent===t.parent?1:2}function Xht(e){return e.reduce(Qht,0)/e.length}function Qht(e,t){return e+t.x}function Jht(e){return 1+e.reduce(Zht,0)}function Zht(e,t){return Math.max(e,t.y)}function ept(e){for(var t;t=e.children;)e=t[0];return e}function tpt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function npt(){var e=Kht,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=Xht(h),d.y=Jht(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=ept(s),l=tpt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function rpt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function ipt(){return this.eachAfter(rpt)}function spt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function opt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function apt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function upt(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function lpt(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function cpt(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function fpt(e){for(var t=this,n=dpt(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function dpt(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function hpt(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function ppt(){return Array.from(this)}function mpt(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function gpt(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*ypt(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function E6(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=_pt)):t===void 0&&(t=bpt);for(var n=new zE(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new zE(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(ATe)}function vpt(){return E6(this).eachBefore(wpt)}function bpt(e){return e.children}function _pt(e){return Array.isArray(e)?e[1]:null}function wpt(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function ATe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function zE(e){this.data=e,this.depth=this.height=0,this.parent=null}zE.prototype=E6.prototype={constructor:zE,count:ipt,each:spt,eachAfter:apt,eachBefore:opt,find:upt,sum:lpt,sort:cpt,path:fpt,ancestors:hpt,descendants:ppt,leaves:mpt,links:gpt,copy:vpt,[Symbol.iterator]:ypt};function pD(e){return e==null?null:CTe(e)}function CTe(e){if(typeof e!="function")throw new Error;return e}function Bv(){return 0}function X_(e){return function(){return e}}const Ept=1664525,xpt=1013904223,jle=4294967296;function Spt(){let e=1;return()=>(e=(Ept*e+xpt)%jle)/jle}function Tpt(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Apt(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function Cpt(e,t){for(var n=0,r=(e=Apt(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&ITe(o,s)?++n:(o=kpt(i=Ipt(i,s)),n=0);return o}function Ipt(e,t){var n,r;if(E8(t,e))return[t];for(n=0;n<e.length;++n)if(UN(t,e[n])&&E8(T2(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(UN(T2(e[n],e[r]),t)&&UN(T2(e[n],t),e[r])&&UN(T2(e[r],t),e[n])&&E8(kTe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function UN(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function ITe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function E8(e,t){for(var n=0;n<t.length;++n)if(!ITe(e,t[n]))return!1;return!0}function kpt(e){switch(e.length){case 1:return Rpt(e[0]);case 2:return T2(e[0],e[1]);case 3:return kTe(e[0],e[1],e[2])}}function Rpt(e){return{x:e.x,y:e.y,r:e.r}}function T2(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function kTe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,T=(p*w-m*b)/(E*2)-r,S=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,k=S*S+C*C-1,N=2*(s+T*S+A*C),O=T*T+A*A-s*s,D=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*O))/(2*k):O/N);return{x:r+T+S*D,y:i+A+C*D,r:D}}function Ble(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function Ule(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function zle(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function zN(e){this._=e,this.next=null,this.previous=null}function Npt(e,t){if(!(s=(e=Tpt(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;Ble(r,n,i=e[2]),n=new zN(n),r=new zN(r),i=new zN(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){Ble(n._,r._,i=e[u]),i=new zN(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(Ule(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(Ule(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=zle(n);(i=i.next)!==r;)(a=zle(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Cpt(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function Ppt(e){return Math.sqrt(e.value)}function RTe(){var e=null,t=1,n=1,r=Bv;function i(s){const o=Spt();return s.x=t/2,s.y=n/2,e?s.eachBefore(Vle(e)).eachAfter(x8(r,.5,o)).eachBefore(Hle(1)):s.eachBefore(Vle(Ppt)).eachAfter(x8(Bv,1,o)).eachAfter(x8(r,s.r/Math.min(t,n),o)).eachBefore(Hle(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=pD(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:X_(+s),i):r},i}function Vle(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function x8(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=Npt(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function Hle(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function NTe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function wk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function Dpt(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(NTe),o}function s(o,a){return function(u){u.children&&wk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var Opt={depth:-1},qle={},S8={};function $pt(e){return e.id}function Mpt(e){return e.parentId}function Wle(){var e=$pt,t=Mpt,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>Lpt(n(w,E,i))),v=y.map(Gle),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(Gle(w)),s.push(S8));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new zE(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?qle:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===qle)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===S8&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===S8);--y)h.data=null}if(f.parent=Opt,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(ATe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=pD(i),r):e},r.parentId=function(i){return arguments.length?(t=pD(i),r):t},r.path=function(i){return arguments.length?(n=pD(i),r):n},r}function Lpt(e){e=`${e}`;let t=e.length;return dz(e,t-1)&&!dz(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function Gle(e){let t=e.length;if(t<2)return"";for(;--t>1&&!dz(e,t););return e.slice(0,t)}function dz(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function Fpt(e,t){return e.parent===t.parent?1:2}function T8(e){var t=e.children;return t?t[0]:e.t}function A8(e){var t=e.children;return t?t[t.length-1]:e.t}function jpt(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Bpt(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function Upt(e,t,n){return e.a.parent===t.parent?e.a:n}function mD(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}mD.prototype=Object.create(zE.prototype);function zpt(e){for(var t=new mD(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new mD(s[o],o)),i.parent=n;return(t.parent=new mD(null,0)).children=[t],t}function Vpt(){var e=Fpt,t=1,n=1,r=null;function i(l){var c=zpt(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){Bpt(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=A8(p),d=T8(d),p&&d;)m=T8(m),h=A8(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(jpt(Upt(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!A8(h)&&(h.t=p,h.m+=v-y),d&&!T8(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function x6(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var PTe=(1+Math.sqrt(5))/2;function DTe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),T=g*g*E,w=Math.max(v/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),T=g*g*E,b=Math.max(v/T,T/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?wk(u,n,r,i,m?r+=p*g/m:s):x6(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const OTe=function e(t){function n(r,i,s,o,a){DTe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PTe);function Hpt(){var e=OTe,t=!1,n=1,r=1,i=[0],s=Bv,o=Bv,a=Bv,u=Bv,l=Bv;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(NTe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=CTe(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:X_(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:X_(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:X_(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:X_(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:X_(+d),c):l},c}function qpt(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,T=d-1;E<T;){var S=E+T>>>1;l[S]<w?E=S+1:T=S}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var k=h?(p*C+g*A)/h:g;c(f,E,A,p,m,k,y),c(E,d,C,k,m,g,y)}else{var N=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,N),c(E,d,C,p,N,g,y)}}}function Wpt(e,t,n,r,i){(e.depth&1?x6:wk)(e,t,n,r,i)}const Gpt=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?wk(l,i,s,o,m?s+=(a-s)*l.value/m:a):x6(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=DTe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(PTe);function rd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function My(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const hz=Symbol("implicit");function zb(){var e=new Iue,t=[],n=[],r=hz;function i(s){let o=e.get(s);if(o===void 0){if(r!==hz)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Iue;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return zb(t,n).unknown(r)},rd.apply(i,arguments),i}function dS(){var e=zb().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=Du(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return dS(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},rd.apply(f(),arguments)}function Ypt(e){return function(){return e}}function pz(e){return+e}var Yle=[0,1];function Ou(e){return e}function mz(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Ypt(isNaN(t)?NaN:.5)}function Kpt(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Xpt(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=mz(i,r),s=n(o,s)):(r=mz(r,i),s=n(s,o)),function(a){return s(r(a))}}function Qpt(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=mz(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=z0(e,a,1,r)-1;return s[u](i[u](a))}}function Ek(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function S6(){var e=Yle,t=Yle,n=Xm,r,i,s,o=Ou,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Ou&&(o=Kpt(e[0],e[d-1])),a=d>2?Qpt:Xpt,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),pc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,pz),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=yk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Ou,c()):o!==Ou},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function $Te(){return S6()(Ou,Ou)}function MTe(e,t,n,r){var i=V0(e,t,n),s;switch(r=q1(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=LSe(i,o))&&(r.precision=s),yK(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=FSe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=MSe(i))&&(r.precision=s-(r.type==="%")*2);break}}return cS(r)}function Vb(e){var t=e.domain;return e.ticks=function(n){var r=t();return C7(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return MTe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=I7(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Hf(){var e=$Te();return e.copy=function(){return Ek(e,Hf())},rd.apply(e,arguments),Vb(e)}function LTe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,pz),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return LTe(e).unknown(t)},e=arguments.length?Array.from(e,pz):[0,1],Vb(n)}function FTe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function Kle(e){return Math.log(e)}function Xle(e){return Math.exp(e)}function Jpt(e){return-Math.log(-e)}function Zpt(e){return-Math.exp(-e)}function emt(e){return isFinite(e)?+("1e"+e):e<0?0:e}function tmt(e){return e===10?emt:e===Math.E?Math.exp:t=>Math.pow(e,t)}function nmt(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Qle(e){return(t,n)=>-e(-t,n)}function TK(e){const t=e(Kle,Xle),n=t.domain;let r=10,i,s;function o(){return i=nmt(r),s=tmt(r),n()[0]<0?(i=Qle(i),s=Qle(s),e(Jpt,Zpt)):e(Kle,Xle),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=C7(l,c,g))}else y=C7(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=q1(u)).precision==null&&(u.trim=!0),u=cS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(FTe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function jTe(){const e=TK(S6()).domain([1,10]);return e.copy=()=>Ek(e,jTe()).base(e.base()),rd.apply(e,arguments),e}function Jle(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function Zle(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function AK(e){var t=1,n=e(Jle(t),Zle(t));return n.constant=function(r){return arguments.length?e(Jle(t=+r),Zle(t)):t},Vb(n)}function BTe(){var e=AK(S6());return e.copy=function(){return Ek(e,BTe()).constant(e.constant())},rd.apply(e,arguments)}function ece(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function rmt(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function imt(e){return e<0?-e*e:e*e}function CK(e){var t=e(Ou,Ou),n=1;function r(){return n===1?e(Ou,Ou):n===.5?e(rmt,imt):e(ece(n),ece(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Vb(t)}function IK(){var e=CK(S6());return e.copy=function(){return Ek(e,IK()).exponent(e.exponent())},rd.apply(e,arguments),e}function smt(){return IK.apply(null,arguments).exponent(.5)}function UTe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=$xe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[z0(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(em),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return UTe().domain(e).range(t).unknown(r)},rd.apply(s,arguments)}function zTe(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[z0(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return zTe().domain([e,t]).range(i).unknown(s)},rd.apply(Vb(o),arguments)}function VTe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[z0(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return VTe().domain(e).range(t).unknown(n)},rd.apply(i,arguments)}const C8=new Date,I8=new Date;function zs(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>zs(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(C8.setTime(+s),I8.setTime(+o),e(C8),e(I8),Math.floor(n(C8,I8))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const VE=zs(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);VE.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?zs(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):VE);VE.range;const Hp=1e3,wc=Hp*60,qp=wc*60,Sm=qp*24,kK=Sm*7,tce=Sm*30,k8=Sm*365,Wp=zs(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Hp)},(e,t)=>(t-e)/Hp,e=>e.getUTCSeconds());Wp.range;const T6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hp)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getMinutes());T6.range;const A6=zs(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*wc)},(e,t)=>(t-e)/wc,e=>e.getUTCMinutes());A6.range;const C6=zs(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Hp-e.getMinutes()*wc)},(e,t)=>{e.setTime(+e+t*qp)},(e,t)=>(t-e)/qp,e=>e.getHours());C6.range;const I6=zs(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*qp)},(e,t)=>(t-e)/qp,e=>e.getUTCHours());I6.range;const nm=zs(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*wc)/Sm,e=>e.getDate()-1);nm.range;const w0=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sm,e=>e.getUTCDate()-1);w0.range;const HTe=zs(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Sm,e=>Math.floor(e/Sm));HTe.range;function Hb(e){return zs(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*wc)/kK)}const hS=Hb(0),L3=Hb(1),omt=Hb(2),amt=Hb(3),HE=Hb(4),umt=Hb(5),lmt=Hb(6);hS.range;L3.range;omt.range;amt.range;HE.range;umt.range;lmt.range;function qb(e){return zs(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/kK)}const pS=qb(0),F3=qb(1),cmt=qb(2),fmt=qb(3),qE=qb(4),dmt=qb(5),hmt=qb(6);pS.range;F3.range;cmt.range;fmt.range;qE.range;dmt.range;hmt.range;const zC=zs(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());zC.range;const VC=zs(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());VC.range;const Eh=zs(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Eh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Eh.range;const xh=zs(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());xh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:zs(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});xh.range;function qTe(e,t,n,r,i,s){const o=[[Wp,1,Hp],[Wp,5,5*Hp],[Wp,15,15*Hp],[Wp,30,30*Hp],[s,1,wc],[s,5,5*wc],[s,15,15*wc],[s,30,30*wc],[i,1,qp],[i,3,3*qp],[i,6,6*qp],[i,12,12*qp],[r,1,Sm],[r,2,2*Sm],[n,1,kK],[t,1,tce],[t,3,3*tce],[e,1,k8]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=uS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(V0(l/k8,c/k8,f));if(h===0)return VE.every(Math.max(V0(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[pmt,mmt]=qTe(xh,VC,pS,HTe,I6,A6),[gmt,ymt]=qTe(Eh,zC,hS,nm,C6,T6);function R8(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function N8(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function IT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function WTe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=kT(i),c=RT(i),f=kT(s),d=RT(s),h=kT(o),p=RT(o),m=kT(a),g=RT(a),y=kT(u),v=RT(u),b={a:B,A:U,b:H,B:P,c:null,d:ace,e:ace,f:Bmt,g:Xmt,G:Jmt,H:Lmt,I:Fmt,j:jmt,L:GTe,m:Umt,M:zmt,p:z,q:W,Q:cce,s:fce,S:Vmt,u:Hmt,U:qmt,V:Wmt,w:Gmt,W:Ymt,x:null,X:null,y:Kmt,Y:Qmt,Z:Zmt,"%":lce},w={a:j,A:q,b:G,B:ne,c:null,d:uce,e:uce,f:rgt,g:hgt,G:mgt,H:egt,I:tgt,j:ngt,L:KTe,m:igt,M:sgt,p:ce,q:de,Q:cce,s:fce,S:ogt,u:agt,U:ugt,V:lgt,w:cgt,W:fgt,x:null,X:null,y:dgt,Y:pgt,Z:ggt,"%":lce},E={a:k,A:N,b:O,B:D,c:$,d:sce,e:sce,f:Dmt,g:ice,G:rce,H:oce,I:oce,j:kmt,L:Pmt,m:Imt,M:Rmt,p:C,q:Cmt,Q:$mt,s:Mmt,S:Nmt,u:Emt,U:xmt,V:Smt,w:wmt,W:Tmt,x:F,X:M,y:ice,Y:rce,Z:Amt,"%":Omt};b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(he,ve){return function(Ie){var be=[],Ke=-1,Ue=0,yt=he.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Ke<yt;)he.charCodeAt(Ke)===37&&(be.push(he.slice(Ue,Ke)),(_e=nce[it=he.charAt(++Ke)])!=null?it=he.charAt(++Ke):_e=it==="e"?" ":"0",(ke=ve[it])&&(it=ke(Ie,_e)),be.push(it),Ue=Ke+1);return be.push(he.slice(Ue,Ke)),be.join("")}}function S(he,ve){return function(Ie){var be=IT(1900,void 0,1),Ke=A(be,he,Ie+="",0),Ue,yt;if(Ke!=Ie.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ve&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(Ue=N8(IT(be.y,0,1)),yt=Ue.getUTCDay(),Ue=yt>4||yt===0?F3.ceil(Ue):F3(Ue),Ue=w0.offset(Ue,(be.V-1)*7),be.y=Ue.getUTCFullYear(),be.m=Ue.getUTCMonth(),be.d=Ue.getUTCDate()+(be.w+6)%7):(Ue=R8(IT(be.y,0,1)),yt=Ue.getDay(),Ue=yt>4||yt===0?L3.ceil(Ue):L3(Ue),Ue=nm.offset(Ue,(be.V-1)*7),be.y=Ue.getFullYear(),be.m=Ue.getMonth(),be.d=Ue.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),yt="Z"in be?N8(IT(be.y,0,1)).getUTCDay():R8(IT(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(yt+5)%7:be.w+be.U*7-(yt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,N8(be)):R8(be)}}function A(he,ve,Ie,be){for(var Ke=0,Ue=ve.length,yt=Ie.length,it,_e;Ke<Ue;){if(be>=yt)return-1;if(it=ve.charCodeAt(Ke++),it===37){if(it=ve.charAt(Ke++),_e=E[it in nce?ve.charAt(Ke++):it],!_e||(be=_e(he,Ie,be))<0)return-1}else if(it!=Ie.charCodeAt(be++))return-1}return be}function C(he,ve,Ie){var be=l.exec(ve.slice(Ie));return be?(he.p=c.get(be[0].toLowerCase()),Ie+be[0].length):-1}function k(he,ve,Ie){var be=h.exec(ve.slice(Ie));return be?(he.w=p.get(be[0].toLowerCase()),Ie+be[0].length):-1}function N(he,ve,Ie){var be=f.exec(ve.slice(Ie));return be?(he.w=d.get(be[0].toLowerCase()),Ie+be[0].length):-1}function O(he,ve,Ie){var be=y.exec(ve.slice(Ie));return be?(he.m=v.get(be[0].toLowerCase()),Ie+be[0].length):-1}function D(he,ve,Ie){var be=m.exec(ve.slice(Ie));return be?(he.m=g.get(be[0].toLowerCase()),Ie+be[0].length):-1}function $(he,ve,Ie){return A(he,t,ve,Ie)}function F(he,ve,Ie){return A(he,n,ve,Ie)}function M(he,ve,Ie){return A(he,r,ve,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function P(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ve=T(he+="",b);return ve.toString=function(){return he},ve},parse:function(he){var ve=S(he+="",!1);return ve.toString=function(){return he},ve},utcFormat:function(he){var ve=T(he+="",w);return ve.toString=function(){return he},ve},utcParse:function(he){var ve=S(he+="",!0);return ve.toString=function(){return he},ve}}}var nce={"-":"",_:" ",0:"0"},ho=/^\s*\d+/,vmt=/^%/,bmt=/[\\^$*+?|[\]().{}]/g;function mr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function _mt(e){return e.replace(bmt,"\\$&")}function kT(e){return new RegExp("^(?:"+e.map(_mt).join("|")+")","i")}function RT(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function wmt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Emt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function xmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Smt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Tmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function rce(e,t,n){var r=ho.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function ice(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Amt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Cmt(e,t,n){var r=ho.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Imt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function sce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function kmt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function oce(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Rmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Nmt(e,t,n){var r=ho.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Pmt(e,t,n){var r=ho.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Dmt(e,t,n){var r=ho.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Omt(e,t,n){var r=vmt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $mt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Mmt(e,t,n){var r=ho.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function ace(e,t){return mr(e.getDate(),t,2)}function Lmt(e,t){return mr(e.getHours(),t,2)}function Fmt(e,t){return mr(e.getHours()%12||12,t,2)}function jmt(e,t){return mr(1+nm.count(Eh(e),e),t,3)}function GTe(e,t){return mr(e.getMilliseconds(),t,3)}function Bmt(e,t){return GTe(e,t)+"000"}function Umt(e,t){return mr(e.getMonth()+1,t,2)}function zmt(e,t){return mr(e.getMinutes(),t,2)}function Vmt(e,t){return mr(e.getSeconds(),t,2)}function Hmt(e){var t=e.getDay();return t===0?7:t}function qmt(e,t){return mr(hS.count(Eh(e)-1,e),t,2)}function YTe(e){var t=e.getDay();return t>=4||t===0?HE(e):HE.ceil(e)}function Wmt(e,t){return e=YTe(e),mr(HE.count(Eh(e),e)+(Eh(e).getDay()===4),t,2)}function Gmt(e){return e.getDay()}function Ymt(e,t){return mr(L3.count(Eh(e)-1,e),t,2)}function Kmt(e,t){return mr(e.getFullYear()%100,t,2)}function Xmt(e,t){return e=YTe(e),mr(e.getFullYear()%100,t,2)}function Qmt(e,t){return mr(e.getFullYear()%1e4,t,4)}function Jmt(e,t){var n=e.getDay();return e=n>=4||n===0?HE(e):HE.ceil(e),mr(e.getFullYear()%1e4,t,4)}function Zmt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+mr(t/60|0,"0",2)+mr(t%60,"0",2)}function uce(e,t){return mr(e.getUTCDate(),t,2)}function egt(e,t){return mr(e.getUTCHours(),t,2)}function tgt(e,t){return mr(e.getUTCHours()%12||12,t,2)}function ngt(e,t){return mr(1+w0.count(xh(e),e),t,3)}function KTe(e,t){return mr(e.getUTCMilliseconds(),t,3)}function rgt(e,t){return KTe(e,t)+"000"}function igt(e,t){return mr(e.getUTCMonth()+1,t,2)}function sgt(e,t){return mr(e.getUTCMinutes(),t,2)}function ogt(e,t){return mr(e.getUTCSeconds(),t,2)}function agt(e){var t=e.getUTCDay();return t===0?7:t}function ugt(e,t){return mr(pS.count(xh(e)-1,e),t,2)}function XTe(e){var t=e.getUTCDay();return t>=4||t===0?qE(e):qE.ceil(e)}function lgt(e,t){return e=XTe(e),mr(qE.count(xh(e),e)+(xh(e).getUTCDay()===4),t,2)}function cgt(e){return e.getUTCDay()}function fgt(e,t){return mr(F3.count(xh(e)-1,e),t,2)}function dgt(e,t){return mr(e.getUTCFullYear()%100,t,2)}function hgt(e,t){return e=XTe(e),mr(e.getUTCFullYear()%100,t,2)}function pgt(e,t){return mr(e.getUTCFullYear()%1e4,t,4)}function mgt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?qE(e):qE.ceil(e),mr(e.getUTCFullYear()%1e4,t,4)}function ggt(){return"+0000"}function lce(){return"%"}function cce(e){return+e}function fce(e){return Math.floor(+e/1e3)}var R_,RK,QTe,k6,JTe;ygt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function ygt(e){return R_=WTe(e),RK=R_.format,QTe=R_.parse,k6=R_.utcFormat,JTe=R_.utcParse,R_}function vgt(e){return new Date(e)}function bgt(e){return e instanceof Date?+e:+new Date(+e)}function NK(e,t,n,r,i,s,o,a,u,l){var c=$Te(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:v:n(T)<T?b:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,bgt)):d().map(vgt)},c.ticks=function(T){var S=d();return e(S[0],S[S.length-1],T??10)},c.tickFormat=function(T,S){return S==null?E:l(S)},c.nice=function(T){var S=d();return(!T||typeof T.range!="function")&&(T=t(S[0],S[S.length-1],T??10)),T?d(FTe(S,T)):c},c.copy=function(){return Ek(c,NK(e,t,n,r,i,s,o,a,u,l))},c}function ZTe(){return rd.apply(NK(gmt,ymt,Eh,zC,hS,nm,C6,T6,Wp,RK).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function _gt(){return rd.apply(NK(pmt,mmt,xh,VC,pS,w0,I6,A6,Wp,k6).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function R6(){var e=0,t=1,n,r,i,s,o=Ou,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(Xm),l.rangeRound=c(yk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Ly(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function PK(){var e=Vb(R6()(Ou));return e.copy=function(){return Ly(e,PK())},My.apply(e,arguments)}function e2e(){var e=TK(R6()).domain([1,10]);return e.copy=function(){return Ly(e,e2e()).base(e.base())},My.apply(e,arguments)}function t2e(){var e=AK(R6());return e.copy=function(){return Ly(e,t2e()).constant(e.constant())},My.apply(e,arguments)}function DK(){var e=CK(R6());return e.copy=function(){return Ly(e,DK()).exponent(e.exponent())},My.apply(e,arguments)}function wgt(){return DK.apply(null,arguments).exponent(.5)}function N6(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Ou,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=oK(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(Xm),h.rangeRound=p(yk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function n2e(){var e=Vb(N6()(Ou));return e.copy=function(){return Ly(e,n2e())},My.apply(e,arguments)}function r2e(){var e=TK(N6()).domain([.1,1,10]);return e.copy=function(){return Ly(e,r2e()).base(e.base())},My.apply(e,arguments)}function i2e(){var e=AK(N6());return e.copy=function(){return Ly(e,i2e()).constant(e.constant())},My.apply(e,arguments)}function OK(){var e=CK(N6());return e.copy=function(){return Ly(e,OK()).exponent(e.exponent())},My.apply(e,arguments)}function Egt(){return OK.apply(null,arguments).exponent(.5)}function id(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const s2e=id("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),xgt=id("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),Sgt=id("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),Tgt=id("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),Agt=id("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),Cgt=id("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),Igt=id("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),kgt=id("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Rgt=id("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),Ngt=id("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),o2e=id("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function En(e){return function(){return e}}const dce=Math.abs,Jo=Math.atan2,uv=Math.cos,Pgt=Math.max,P8=Math.min,vd=Math.sin,s1=Math.sqrt,ta=1e-12,WE=Math.PI,j3=WE/2,TA=2*WE;function Dgt(e){return e>1?0:e<-1?WE:Math.acos(e)}function hce(e){return e>=1?j3:e<=-1?-j3:Math.asin(e)}function P6(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new fK(t)}function Ogt(e){return e.innerRadius}function $gt(e){return e.outerRadius}function Mgt(e){return e.startAngle}function Lgt(e){return e.endAngle}function Fgt(e){return e&&e.padAngle}function jgt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<ta))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function VN(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/s1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,T=d*m-p*h,S=(b<0?-1:1)*s1(Pgt(0,E*E*w-T*T)),A=(T*b-v*S)/w,C=(-T*v-b*S)/w,k=(T*b+v*S)/w,N=(-T*v+b*S)/w,O=A-g,D=C-y,$=k-g,F=N-y;return O*O+D*D>$*$+F*F&&(A=k,C=N),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function B3(){var e=Ogt,t=$gt,n=En(0),r=null,i=Mgt,s=Lgt,o=Fgt,a=null,u=P6(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-j3,m=s.apply(this,arguments)-j3,g=dce(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>ta))a.moveTo(0,0);else if(g>TA-ta)a.moveTo(h*uv(p),h*vd(p)),a.arc(0,0,h,p,m,!y),d>ta&&(a.moveTo(d*uv(m),d*vd(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,T=g,S=g,A=o.apply(this,arguments)/2,C=A>ta&&(r?+r.apply(this,arguments):s1(d*d+h*h)),k=P8(dce(h-d)/2,+n.apply(this,arguments)),N=k,O=k,D,$;if(C>ta){var F=hce(C/d*vd(A)),M=hce(C/h*vd(A));(T-=F*2)>ta?(F*=y?1:-1,w+=F,E-=F):(T=0,w=E=(p+m)/2),(S-=M*2)>ta?(M*=y?1:-1,v+=M,b-=M):(S=0,v=b=(p+m)/2)}var B=h*uv(v),U=h*vd(v),H=d*uv(E),P=d*vd(E);if(k>ta){var z=h*uv(b),W=h*vd(b),j=d*uv(w),q=d*vd(w),G;if(g<WE)if(G=jgt(B,U,j,q,z,W,H,P)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ve=1/vd(Dgt((ne*de+ce*he)/(s1(ne*ne+ce*ce)*s1(de*de+he*he)))/2),Ie=s1(G[0]*G[0]+G[1]*G[1]);N=P8(k,(d-Ie)/(ve-1)),O=P8(k,(h-Ie)/(ve+1))}else N=O=0}S>ta?O>ta?(D=VN(j,q,B,U,h,O,y),$=VN(z,W,H,P,h,O,y),a.moveTo(D.cx+D.x01,D.cy+D.y01),O<k?a.arc(D.cx,D.cy,O,Jo(D.y01,D.x01),Jo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,O,Jo(D.y01,D.x01),Jo(D.y11,D.x11),!y),a.arc(0,0,h,Jo(D.cy+D.y11,D.cx+D.x11),Jo($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,O,Jo($.y11,$.x11),Jo($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>ta)||!(T>ta)?a.lineTo(H,P):N>ta?(D=VN(H,P,z,W,d,-N,y),$=VN(B,U,j,q,d,-N,y),a.lineTo(D.cx+D.x01,D.cy+D.y01),N<k?a.arc(D.cx,D.cy,N,Jo(D.y01,D.x01),Jo($.y01,$.x01),!y):(a.arc(D.cx,D.cy,N,Jo(D.y01,D.x01),Jo(D.y11,D.x11),!y),a.arc(0,0,d,Jo(D.cy+D.y11,D.cx+D.x11),Jo($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,N,Jo($.y11,$.x11),Jo($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-WE/2;return[uv(f)*c,vd(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:En(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:En(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:En(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:En(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:En(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:En(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:En(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function D6(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function a2e(e){this._context=e}a2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $K(e){return new a2e(e)}function u2e(e){return e[0]}function l2e(e){return e[1]}function c2e(e,t){var n=En(!0),r=null,i=$K,s=null,o=P6(a);e=typeof e=="function"?e:e===void 0?u2e:En(e),t=typeof t=="function"?t:t===void 0?l2e:En(t);function a(u){var l,c=(u=D6(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:En(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:En(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:En(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function f2e(e,t,n){var r=null,i=En(!0),s=null,o=$K,a=null,u=P6(l);e=typeof e=="function"?e:e===void 0?u2e:En(+e),t=typeof t=="function"?t:En(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?l2e:En(+n);function l(f){var d,h,p,m=(f=D6(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return c2e().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:En(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:En(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:En(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:En(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:En(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Bgt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Ugt(e){return e}function d2e(){var e=Ugt,t=Bgt,n=null,r=En(0),i=En(TA),s=En(0);function o(a){var u,l=(a=D6(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(TA,Math.max(-TA,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,T){return t(p[E],p[T])}):n!=null&&h.sort(function(E,T){return n(a[E],a[T])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:En(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:En(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:En(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:En(+a),o):s},o}const zgt={draw(e,t){const n=s1(t/WE);e.moveTo(n,0),e.arc(0,0,n,0,TA)}};function Vgt(e,t){let n=null,r=P6(i);e=typeof e=="function"?e:En(e||zgt),t=typeof t=="function"?t:En(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:En(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:En(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function q0(){}function U3(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function O6(e){this._context=e}O6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:U3(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:U3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Hgt(e){return new O6(e)}function h2e(e){this._context=e}h2e.prototype={areaStart:q0,areaEnd:q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:U3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qgt(e){return new h2e(e)}function p2e(e){this._context=e}p2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:U3(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Wgt(e){return new p2e(e)}function m2e(e,t){this._basis=new O6(e),this._beta=t}m2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const Ggt=function e(t){function n(r){return t===1?new O6(r):new m2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function z3(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function MK(e,t){this._context=e,this._k=(1-t)/6}MK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:z3(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Ygt=function e(t){function n(r){return new MK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function LK(e,t){this._context=e,this._k=(1-t)/6}LK.prototype={areaStart:q0,areaEnd:q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Kgt=function e(t){function n(r){return new LK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function FK(e,t){this._context=e,this._k=(1-t)/6}FK.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:z3(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Xgt=function e(t){function n(r){return new FK(r,t)}return n.tension=function(r){return e(+r)},n}(0);function jK(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>ta){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>ta){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function g2e(e,t){this._context=e,this._alpha=t}g2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:jK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Qgt=function e(t){function n(r){return t?new g2e(r,t):new MK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function y2e(e,t){this._context=e,this._alpha=t}y2e.prototype={areaStart:q0,areaEnd:q0,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:jK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Jgt=function e(t){function n(r){return t?new y2e(r,t):new LK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function v2e(e,t){this._context=e,this._alpha=t}v2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:jK(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Zgt=function e(t){function n(r){return t?new v2e(r,t):new FK(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function b2e(e){this._context=e}b2e.prototype={areaStart:q0,areaEnd:q0,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function e0t(e){return new b2e(e)}function pce(e){return e<0?-1:1}function mce(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(pce(s)+pce(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function gce(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function D8(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function V3(e){this._context=e}V3.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:D8(this,this._t0,gce(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,D8(this,gce(this,n=mce(this,e,t)),n);break;default:D8(this,this._t0,n=mce(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function _2e(e){this._context=new w2e(e)}(_2e.prototype=Object.create(V3.prototype)).point=function(e,t){V3.prototype.point.call(this,t,e)};function w2e(e){this._context=e}w2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function t0t(e){return new V3(e)}function n0t(e){return new _2e(e)}function E2e(e){this._context=e}E2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=yce(e),i=yce(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function yce(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function r0t(e){return new E2e(e)}function $6(e,t){this._context=e,this._t=t}$6.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function i0t(e){return new $6(e,.5)}function s0t(e){return new $6(e,0)}function o0t(e){return new $6(e,1)}function vce(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function bce(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function a0t(e,t){return e[t]}function u0t(e){const t=[];return t.key=e,t}function l0t(){var e=En([]),t=bce,n=vce,r=a0t;function i(s){var o=Array.from(e.apply(this,arguments),u0t),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=D6(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:En(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:En(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?bce:typeof s=="function"?s:En(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??vce,i):n},i}function A2(e,t,n){this.k=e,this.x=t,this.y=n}A2.prototype={constructor:A2,scale:function(e){return e===1?this:new A2(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new A2(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};A2.prototype;function _ce({parameters:e,setAnswer:t}){const[n,r]=I.useState(null);I.useEffect(()=>{hK(e.data,s=>({userID:+s["User ID"],salary:+s["Salary Value"]})).then(s=>{r(s)})},[e]),I.useEffect(()=>{},[n]);const i=()=>{n&&t({status:!0,answers:{salaryData:n}})};return n?_.jsxs("div",{children:[_.jsx("div",{id:"bar-chart",style:{height:400,width:800}}),_.jsx(on,{onClick:i,children:"Submit Data"})]}):_.jsx(Bc,{})}const c0t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:_ce,default:_ce},Symbol.toStringTag,{value:"Module"}));function wce({parameters:e,setAnswer:t}){const[n,r]=I.useState(null);I.useEffect(()=>{hK(e.data,s=>({userID:+s["User ID"],salary:+s["Salary Value"]})).then(s=>{r(s)})},[e]),I.useEffect(()=>{if(n){const a=Math.min(800,400)/2,u=zb(s2e);Vi("#pie-chart").select("svg").remove();const l=Vi("#pie-chart").append("svg").attr("width",800).attr("height",400).append("g").attr("transform",`translate(${800/2},${400/2})`),c=d2e().value(h=>h.salary),f=B3().outerRadius(a).innerRadius(0),d=l.selectAll("arc").data(c(n)).enter().append("g").attr("class","arc");d.append("path").attr("d",f).attr("fill",(h,p)=>u(p.toString())),d.append("text").attr("transform",h=>`translate(${f.centroid(h)})`).attr("text-anchor","middle").text(h=>`ID ${h.data.userID}`)}},[n]);const i=()=>{n&&t({status:!0,answers:{salaryData:n}})};return _.jsx("div",{children:n?_.jsxs(_.Fragment,{children:[_.jsx("div",{id:"pie-chart",style:{height:400,width:800}}),_.jsx(on,{onClick:i,children:"Submit Data"})]}):_.jsx(Bc,{})})}const f0t=Object.freeze(Object.defineProperty({__proto__:null,PieChart:wce,default:wce},Symbol.toStringTag,{value:"Module"}));function d0t({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const h0t=Object.freeze(Object.defineProperty({__proto__:null,Bars:d0t},Symbol.toStringTag,{value:"Module"}));function p0t({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const m0t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:p0t},Symbol.toStringTag,{value:"Module"}));function g0t({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const y0t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:g0t},Symbol.toStringTag,{value:"Module"}));function v0t({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Hf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const b0t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:v0t},Symbol.toStringTag,{value:"Module"}));function _0t({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Hf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const w0t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:_0t},Symbol.toStringTag,{value:"Module"}));function E0t({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=dS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const x0t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:E0t},Symbol.toStringTag,{value:"Module"}));function S0t({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const T0t=Object.freeze(Object.defineProperty({__proto__:null,Slices:S0t},Symbol.toStringTag,{value:"Module"}));function A0t({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const C0t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:A0t},Symbol.toStringTag,{value:"Module"}));function I0t({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const k0t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:I0t},Symbol.toStringTag,{value:"Module"}));function BK({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?k6("%B"):cS(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(ym,{children:_.jsx(Ss,{gap:3,children:_.jsx(et,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(ym,{children:_.jsx(xi,{withinPortal:!0,label:c,children:_.jsx(et,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const R0t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:BK},Symbol.toStringTag,{value:"Module"}));function x2e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(ym,{children:_.jsx(Ss,{gap:3,children:_.jsx(et,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Ss,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(et,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const N0t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:x2e},Symbol.toStringTag,{value:"Module"})),tc={top:15,left:100,right:50,bottom:50};function gz({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=b1(),o=I.useMemo(()=>s-tc.left-tc.right,[s]),a=I.useMemo(()=>i-tc.top-tc.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return zb(o2e).domain(d)},[n,t.category]),l=I.useMemo(()=>e?Hf([tc.left,o+tc.left]).domain([0,_0(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?dS([tc.top,a+tc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:tc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-tc.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(BK,{xScale:l,yRange:c.range(),vertPosition:a+tc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(x2e,{yScale:c,horizontalPosition:tc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Bc,{})}const P0t=Object.freeze(Object.defineProperty({__proto__:null,Bar:gz,default:gz},Symbol.toStringTag,{value:"Module"})),dr=Array.isArray;function Xu(e){return e!=null?dr(e)?e:[e]:[]}function D0t(e=0,t=1/0){return`${Ece(e)} < row_number() && row_number() <= ${Ece(t)}`}function Ece(e){return e<0?`count() + ${e}`:e}class S2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(D0t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,Xu(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function xn(e){throw Error(e)}function Za(e){return typeof e=="number"}function pi(e){return typeof e=="function"}function M6(e,t){const n=Array(e);if(pi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let O0t=class extends S2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){xn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){xn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){xn("Not implemented")}getter(t){xn("Not implemented")}objects(t){xn("Not implemented")}object(t){xn("Not implemented")}[Symbol.iterator](){xn("Not implemented")}print(t={}){Za(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=M6(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},$0t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},M0t=function(e){return e&&pi(e.get)?e:new $0t(e)};function Tm(e){return e instanceof Date}function ba(e){return e===Object(e)}function H3(e){return e instanceof RegExp}function jo(e){return typeof e=="string"}function L0t(e,t){const n=r=>xn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?xce(e.entries(),t):Tm(e)?n("Date"):H3(e)?n("RegExp"):jo(e)?n():dr(e)?F0t(e,t):pi(e[Symbol.iterator])?j0t(e,t):ba(e)?xce(Object.entries(e),t):n()}function xce(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function F0t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function j0t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:B0t}=Object.prototype;function qf(e,t){return B0t.call(e,t)}function Ql(e){return e?new Sce({...e.data()},e.columnNames()):new Sce}class Sce{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return qf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const ar=void 0,U0t=Object.getPrototypeOf(Int8Array);function xk(e){return e instanceof U0t}function o1(e){return dr(e)||xk(e)}function If(e){return e!=null&&e===e}const NT=e=>o1(e)||jo(e),z0t={compact:e=>o1(e)?e.filter(t=>If(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>NT(e)?e.includes(t,n):!1,indexof:(e,t)=>NT(e)?e.indexOf(t):-1,join:(e,t)=>o1(e)?e.join(t):ar,lastindexof:(e,t)=>NT(e)?e.lastIndexOf(t):-1,length:e=>NT(e)?e.length:0,pluck:(e,t)=>o1(e)?e.map(n=>If(n)?n[t]:ar):ar,reverse:e=>o1(e)?e.slice().reverse():jo(e)?e.split("").reverse().join(""):ar,slice:(e,t,n)=>NT(e)?e.slice(t,n):ar};function V0t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function gD(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const bd=e=>(e<10?"0":"")+e,H0t=e=>e<0?"-"+gD(-e,6):e>9999?"+"+gD(e,6):gD(e,4);function T2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return H0t(e)+"-"+bd(t+1)+"-"+bd(n)+(!u||o?"T"+bd(r)+":"+bd(i)+":"+bd(s)+"."+gD(o,3)+l:s?"T"+bd(r)+":"+bd(i)+":"+bd(s)+l:i||r||!a?"T"+bd(r)+":"+bd(i)+l:"")}function A2e(e,t){return isNaN(e)?"Invalid Date":T2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function L6(e,t){return isNaN(e)?"Invalid Date":T2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const q0t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function W0t(e){return e.match(q0t)&&!isNaN(Date.parse(e))}function G0t(e,t=Date.parse){return W0t(e)?t(e):e}const C2e=6e4,I2e=864e5,k2e=6048e5,Hi=new Date,qi=new Date,ts=e=>(Hi.setTime(typeof e=="string"?G0t(e):e),Hi);function Y0t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function K0t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function X0t(e){qi.setTime(+e),qi.setHours(0,0,0,0),Hi.setTime(+qi),Hi.setMonth(0),Hi.setDate(1);const t=(qi.getTimezoneOffset()-Hi.getTimezoneOffset())*C2e;return Math.floor(1+(qi-Hi-t)/I2e)}function Q0t(e){qi.setTime(+e),qi.setUTCHours(0,0,0,0);const t=Date.UTC(qi.getUTCFullYear(),0,1);return Math.floor(1+(qi-t)/I2e)}function J0t(e,t){const n=t||0;qi.setTime(+e),qi.setDate(qi.getDate()-(qi.getDay()+7-n)%7),qi.setHours(0,0,0,0),Hi.setTime(+e),Hi.setMonth(0),Hi.setDate(1),Hi.setDate(1-(Hi.getDay()+7-n)%7),Hi.setHours(0,0,0,0);const r=(qi.getTimezoneOffset()-Hi.getTimezoneOffset())*C2e;return Math.floor((1+(qi-Hi)-r)/k2e)}function Z0t(e,t){const n=t||0;return qi.setTime(+e),qi.setUTCDate(qi.getUTCDate()-(qi.getUTCDay()+7-n)%7),qi.setUTCHours(0,0,0,0),Hi.setTime(+e),Hi.setUTCMonth(0),Hi.setUTCDate(1),Hi.setUTCDate(1-(Hi.getUTCDay()+7-n)%7),Hi.setUTCHours(0,0,0,0),Math.floor((1+(qi-Hi))/k2e)}const eyt={format_date:(e,t)=>A2e(ts(e),!t),format_utcdate:(e,t)=>L6(ts(e),!t),timestamp:e=>+ts(e),year:e=>ts(e).getFullYear(),quarter:e=>Math.floor(ts(e).getMonth()/3),month:e=>ts(e).getMonth(),date:e=>ts(e).getDate(),dayofweek:e=>ts(e).getDay(),hours:e=>ts(e).getHours(),minutes:e=>ts(e).getMinutes(),seconds:e=>ts(e).getSeconds(),milliseconds:e=>ts(e).getMilliseconds(),utcyear:e=>ts(e).getUTCFullYear(),utcquarter:e=>Math.floor(ts(e).getUTCMonth()/3),utcmonth:e=>ts(e).getUTCMonth(),utcdate:e=>ts(e).getUTCDate(),utcdayofweek:e=>ts(e).getUTCDay(),utchours:e=>ts(e).getUTCHours(),utcminutes:e=>ts(e).getUTCMinutes(),utcseconds:e=>ts(e).getUTCSeconds(),utcmilliseconds:e=>ts(e).getUTCMilliseconds(),datetime:Y0t,dayofyear:X0t,week:J0t,utcdatetime:K0t,utcdayofyear:Q0t,utcweek:Z0t,now:Date.now};function UK(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:Tm(e)||Tm(t)?+e==+t:H3(e)&&H3(t)?e+""==t+"":ba(e)&&ba(t)?tyt(e,t):!1}function tyt(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Tce(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Tce(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!UK(e[o],t[o]))return!1}return!0}function Tce(e,t,n=UK){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const nyt={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let ryt=Math.random;function mS(){return ryt()}const iyt={random:mS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function zK(e){return e instanceof Map}function syt(e){return e instanceof Set}function yD(e){return zK(e)||syt(e)}function O8(e){return Array.from(e)}const oyt={has:(e,t)=>yD(e)?e.has(t):e!=null?qf(e,t):!1,keys:e=>zK(e)?O8(e.keys()):e!=null?Object.keys(e):[],values:e=>yD(e)?O8(e.values()):e!=null?Object.values(e):[],entries:e=>yD(e)?O8(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):ar};function ayt(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(qf(t,e))return t[e];return n!==void 0?n:e}function uyt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const lyt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},xw={bin:V0t,equal:UK,recode:ayt,sequence:uyt,...z0t,...eyt,...nyt,...iyt,...oyt,...lyt};function HC(e){return typeof e=="bigint"}function Sh(e){return e===void 0?e+"":HC(e)?e+"n":JSON.stringify(e)}function vn(e,t=[],n=[]){return new cyt(e,Xu(t),Xu(n))}let cyt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Sh(n)}]`),...this.params.map(Sh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const R2e=e=>vn("any",e),N2e=()=>vn("count"),P2e=e=>vn("array_agg",e),D2e=e=>vn("array_agg_distinct",e),O2e=(e,t)=>vn("map_agg",[e,t]),$2e=(e,t)=>vn("object_agg",[e,t]),M2e=(e,t)=>vn("entries_agg",[e,t]);({...xw});function fyt(e,t){e=yD(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function dyt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function hyt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function pyt(e,t,n,r){const i=r==="map"||r===!0?O2e:r==="entries"?M2e:r==="object"?$2e:xn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=fyt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:P2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const myt="ArrayPattern",gyt="ArrowFunctionExpression",yyt="FunctionExpression",E0="Identifier",gS="Literal",L2e="MemberExpression",vyt="ObjectExpression",F2e="ObjectPattern",j2e="Property",Sk="Column",byt="Constant",_yt="Dictionary",wyt="Function",Eyt="Parameter",B2e="Op",Zr=(e,t)=>{const n=xyt[e.type];return n?n(e,t):xn(`Unsupported expression construct: ${e.type}`)},$8=(e,t)=>"("+Zr(e.left,t)+" "+e.operator+" "+Zr(e.right,t)+")",M8=(e,t)=>"("+Id(e.params,t)+")=>"+Zr(e.body,t),Ace=(e,t)=>Zr(e.callee,t)+"("+Id(e.arguments,t)+")",Id=(e,t,n=",")=>e.map(r=>Zr(r,t)).join(n),U2e=e=>e.computed?`[${Sh(e.name)}]`:`.${e.name}`,Cce=(e,t,n)=>{const r=e.table||"";return`data${r}${U2e(e)}.${n}(${t.index}${r})`},xyt={Constant:e=>e.raw,Column:(e,t)=>Cce(e,t,"get"),Dictionary:(e,t)=>Cce(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${U2e(e)}`,Op:(e,t)=>`op(${Sh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+Zr(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=Zr(e.object,t),i=Zr(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:Ace,NewExpression:(e,t)=>"new "+Ace(e,t),ArrayExpression:(e,t)=>"["+Id(e.elements,t)+"]",AssignmentExpression:$8,BinaryExpression:$8,LogicalExpression:$8,UnaryExpression:(e,t)=>"("+e.operator+Zr(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+Zr(e.test,t)+"?"+Zr(e.consequent,t)+":"+Zr(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Id(e.properties,t)+"})",Property:(e,t)=>{const n=Zr(e.key,t);return(e.computed?`[${n}]`:n)+":"+Zr(e.value,t)},ArrowFunctionExpression:M8,FunctionExpression:M8,FunctionDeclaration:M8,ArrayPattern:(e,t)=>"["+Id(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Id(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Id(e.declarations,t,","),VariableDeclarator:(e,t)=>Zr(e.id,t)+"="+Zr(e.init,t),SpreadElement:(e,t)=>"..."+Zr(e.argument,t),BlockStatement:(e,t)=>"{"+Id(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>Zr(e.expression,t),IfStatement:(e,t)=>"if ("+Zr(e.test,t)+")"+Zr(e.consequent,t)+(e.alternate?" else "+Zr(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+Zr(e.discriminant,t)+") {"+Id(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+Zr(e.test,t):"default")+": "+Id(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+Zr(e.argument,t),Program:(e,t)=>Zr(e.body[0],t)};function q3(e,t={index:"row"}){return Zr(e,t)}function Syt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function GE(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:Tm(e)?+e:dr(e)||xk(e)?`[${e.map(GE)}]`:H3(e)?e+"":Tyt(e)}function Tyt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${GE(e[r])}`;return t+="}",t}function W3(e,t){const n=e.length;return n===1?(r,i)=>GE(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=GE(a)}return s}}function Ayt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=GE(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=GE(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Rp(){}function Cyt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Cs(e){return e.init=e.init||Rp,e.add=e.add||Rp,e.rem=e.rem||Rp,e}function Ice(e,t){return e.product_v=!1,e.product=t}const z2e={count:{create:()=>Cs({value:e=>e.count}),param:[]},array_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Cs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Cs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:ar}),param:[1]},valid:{create:()=>Cs({value:e=>e.valid}),param:[1]},invalid:{create:()=>Cs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=Ayt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Cs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Cs({value:e=>{let t=ar,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:ar,add:(e,t)=>HC(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Ice(e,1),value:e=>e.valid?e.product_v?Ice(e,Cyt(e.list.values())):e.product:void 0,add:(e,t)=>HC(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:ar,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Cs({value:e=>e.valid?e.mean:ar}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):ar,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Cs({value:e=>e.valid>1?e.dev/e.valid:ar}),param:[1],req:["variance"]},stdev:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):ar}),param:[1],req:["variance"]},stdevp:{create:()=>Cs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):ar}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=ar,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===ar)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=ar,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===ar)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Cs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Cs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):ar,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Cs({value:e=>e.valid>1?e.cov/e.valid:ar}),param:[2],req:["covariance"]},corr:{create:()=>Cs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):ar}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Cs({value:i=>Syt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},kce={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Rce={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},V2e={row_number:{create(){return{init:Rp,value:e=>e.index+1}},param:[]},rank:kce,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=kce.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Rce,ntile:{create(e){e=+e,e>0||xn("ntile num must be greater than zero.");const{init:t,value:n}=Rce.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=ar){return e=+e||1,{init:Rp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=ar){return e=+e||1,{init:Rp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Rp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Rp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||xn("nth_value nth must be greater than zero."),{init:Rp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):ar}}},param:[1,1]},fill_down:{create(e=ar){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return If(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=ar){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=Iyt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function Iyt(e,t,n){for(const r=e.size;n<r;++n)if(If(e.value(n,t)))return n;return-1}function VK(e){return qf(z2e,e)}function HK(e){return qf(V2e,e)}function H2e(e){return qf(xw,e)||e==="row_object"}function q2e(e){return VK(e)&&z2e[e]}function W2e(e){return HK(e)&&V2e[e]}function PT(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const qK={escape:(e,t,n)=>PT(e,t,n),expr:(e,t)=>PT(`(row,data,op)=>${e}`,xw,t),expr2:(e,t)=>PT(`(row0,data0,row,data)=>${e}`,xw,t),join:(e,t)=>PT(`(row1,data1,row2,data2)=>${e}`,xw,t),param:(e,t)=>PT(e,xw,t)},kyt={"==":1,"!=":1,"===":1,"!==":1};function G2e(e,t,n=0,r,i){if(e.type=Sk,e.name=t,e.table=n,i&&r&&pi(r.keyFor)){const s=kyt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===gS&&Ryt(i,e,s,r.keyFor(s.value))}return e}function Ryt(e,t,n,r){return r<0?(e.type=gS,e.value=!1,e.raw="false"):(t.type=_yt,n.value=r,n.raw=r+""),!0}function F6(e){return dr(e)?e:zK(e)?e.entries():e?Object.entries(e):[]}const Y2e="row_object";function K2e(e,t){e.type=vyt;const n=e.properties=[];for(const r of F6(t)){const[i,s]=dr(r)?r:[r,r];n.push({type:j2e,key:{type:gS,raw:Sh(s)},value:G2e({computed:!0},i)})}return e}function X2e(e){return q3(K2e({},e))}function Q2e(e){return qK.expr(X2e(e))}const Nyt=new TextDecoder("utf-8"),yz=e=>Nyt.decode(e),Pyt=new TextEncoder,WK=e=>Pyt.encode(e),Dyt=e=>typeof e=="boolean",_u=e=>typeof e=="function",Fy=e=>e!=null&&Object(e)===e,j6=e=>Fy(e)&&_u(e.then),GK=e=>Fy(e)&&_u(e[Symbol.iterator]),B6=e=>Fy(e)&&_u(e[Symbol.asyncIterator]),Oyt=e=>Fy(e)&&"done"in e&&"value"in e,J2e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,$yt=e=>Fy(e)&&_u(e.abort)&&_u(e.getWriter)&&!J2e(e),Myt=e=>Fy(e)&&_u(e.end)&&_u(e.write)&&Dyt(e.writable)&&!J2e(e),Lyt=e=>Fy(e)&&_u(e.clear)&&_u(e.bytes)&&_u(e.position)&&_u(e.setPosition)&&_u(e.capacity)&&_u(e.getBufferIdentifier)&&_u(e.createLong),YK=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Fyt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function G3(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Th(e,t){const n=Fyt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?G3(o,s,a):o=s;break}G3(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Ys(e,t){let n=Oyt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=WK(n)),n instanceof ArrayBuffer?new e(n):n instanceof YK?new e(n):Lyt(n)?Ys(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const DT=e=>Ys(Int32Array,e),Pr=e=>Ys(Uint8Array,e),vz=e=>(e.next(),e);function*jyt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof YK?n(t):GK(t)?t:n(t);return yield*vz(function*(i){let s=null;do s=i.next(yield Ys(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Byt=e=>jyt(Uint8Array,e);function Z2e(e,t){return Zv(this,arguments,function*(){if(j6(t))return yield Yn(yield Yn(yield*gj(cA(Z2e(e,yield Yn(t))))));const r=function(o){return Zv(this,arguments,function*(){yield yield Yn(yield Yn(o))})},i=function(o){return Zv(this,arguments,function*(){yield Yn(yield*gj(cA(vz(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof YK?r(t):GK(t)?i(t):B6(t)?t:r(t);return yield Yn(yield*gj(cA(vz(function(o){return Zv(this,arguments,function*(){let a=null;do a=yield Yn(o.next(yield yield Yn(Ys(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Yn(new e)})}const Uyt=e=>Z2e(Uint8Array,e);function eAe(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function zyt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Nce={fromIterable(e){return HN(Vyt(e))},fromAsyncIterable(e){return HN(Hyt(e))},fromDOMStream(e){return HN(qyt(e))},fromNodeStream(e){return HN(Gyt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},HN=e=>(e.next(),e);function*Vyt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Th(r,o)[0]:([i,r,a]=Th(r,o),i)}({cmd:s,size:o}=yield null);const l=Byt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Hyt(e){return Zv(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Th(i,a)[0]:([s,i,u]=Th(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=Uyt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.next()):yield Yn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Yn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Yn(c.return(new Uint8Array(0))))}return yield Yn(null)})}function qyt(e){return Zv(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Th(i,a)[0]:([s,i,u]=Th(i,a),s)}({cmd:o,size:a}=yield yield Yn(null));const c=new Wyt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Yn(c.read()):yield Yn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Pr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Yn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Yn(c.cancel(f)))}finally{r===!1?yield Yn(c.cancel()):e.locked&&c.releaseLock()}return yield Yn(null)})}class Wyt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Dp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Dp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Pr(n)),n})}}const L8=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function Gyt(e){return Zv(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Th(l,a)[0]:([c,l,u]=Th(l,a),c)}if({cmd:o,size:a}=yield yield Yn(null),e.isTTY)return yield yield Yn(new Uint8Array(0)),yield Yn(null);try{n[0]=L8(e,"end"),n[1]=L8(e,"error");do{if(n[2]=L8(e,"readable"),[r,s]=yield Yn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Pr(e.read(a-u)),c.byteLength<a-u&&(c=Pr(e.read()))):c=Pr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Yn(f()));while(a<u)}while(!i)}finally{yield Yn(d(n,r==="error"?s:null))}return yield Yn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Ua;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ua||(Ua={}));var Qu;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(Qu||(Qu={}));var Po;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Po||(Po={}));var Ah;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(Ah||(Ah={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Ch;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Ch||(Ch={}));var Qs;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(Qs||(Qs={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Sp;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Sp||(Sp={}));const Yyt=void 0;function Y1(e){if(e===null)return"null";if(e===Yyt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>Y1(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Kyt=Symbol.for("isArrowBigNum");function sd(e,...t){return t.length===0?Object.setPrototypeOf(Ys(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}sd.prototype[Kyt]=!0;sd.prototype.toJSON=function(){return`"${WC(this)}"`};sd.prototype.valueOf=function(){return tAe(this)};sd.prototype.toString=function(){return WC(this)};sd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return tAe(this);case"string":return WC(this);case"default":return Xyt(this)}return WC(this)};function Kw(...e){return sd.apply(this,e)}function Xw(...e){return sd.apply(this,e)}function qC(...e){return sd.apply(this,e)}Object.setPrototypeOf(Kw.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(Xw.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(qC.prototype,Object.create(Uint32Array.prototype));Object.assign(Kw.prototype,sd.prototype,{constructor:Kw,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(Xw.prototype,sd.prototype,{constructor:Xw,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(qC.prototype,sd.prototype,{constructor:qC,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function tAe(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const WC=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return F8(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return F8(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${F8(t)}`},Xyt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:WC(e);function F8(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class KK{static new(t,n){switch(n){case!0:return new Kw(t);case!1:return new Xw(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new Kw(t)}return t.byteLength===16?new qC(t):new Xw(t)}static signed(t){return new Kw(t)}static unsigned(t){return new Xw(t)}static decimal(t){return new qC(t)}constructor(t,n){return KK.new(t,n)}}function Wf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var nAe,rAe,iAe,sAe,oAe,aAe,uAe,lAe,cAe,fAe,dAe,hAe,pAe,mAe,gAe,yAe,vAe,bAe,_Ae,wAe;let Sn=class bz{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return bz.isUnion(t)&&t.mode===Qu.Dense}static isSparseUnion(t){return bz.isUnion(t)&&t.mode===Qu.Sparse}get typeId(){return re.NONE}};nAe=Symbol.toStringTag;Sn[nAe]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Sn.prototype);let Am=class extends Sn{toString(){return"Null"}get typeId(){return re.Null}};rAe=Symbol.toStringTag;Am[rAe]=(e=>e[Symbol.toStringTag]="Null")(Am.prototype);class eu extends Sn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}iAe=Symbol.toStringTag;eu[iAe]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(eu.prototype);class XK extends eu{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class QK extends eu{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class W0 extends eu{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class JK extends eu{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class ZK extends eu{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class eX extends eu{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class tX extends eu{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class nX extends eu{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(XK.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(QK.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(W0.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(JK.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(ZK.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(eX.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(tX.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(nX.prototype,"ArrayType",{value:BigUint64Array});class G0 extends Sn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Po.HALF:return Uint16Array;case Po.SINGLE:return Float32Array;case Po.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}sAe=Symbol.toStringTag;G0[sAe]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(G0.prototype);class EAe extends G0{constructor(){super(Po.HALF)}}class rX extends G0{constructor(){super(Po.SINGLE)}}class iX extends G0{constructor(){super(Po.DOUBLE)}}Object.defineProperty(EAe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(rX.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(iX.prototype,"ArrayType",{value:Float64Array});let GC=class extends Sn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};oAe=Symbol.toStringTag;GC[oAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(GC.prototype);let YE=class extends Sn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};aAe=Symbol.toStringTag;YE[aAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(YE.prototype);let YC=class extends Sn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};uAe=Symbol.toStringTag;YC[uAe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(YC.prototype);let Y3=class extends Sn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};lAe=Symbol.toStringTag;Y3[lAe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(Y3.prototype);class KE extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${Ah[this.unit]}>`}}cAe=Symbol.toStringTag;KE[cAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(KE.prototype);class Qyt extends KE{constructor(){super(Ah.DAY)}}class Jyt extends KE{constructor(){super(Ah.MILLISECOND)}}class Cm extends Sn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}fAe=Symbol.toStringTag;Cm[fAe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Cm.prototype);class Zyt extends Cm{constructor(){super(Wt.SECOND,32)}}class evt extends Cm{constructor(){super(Wt.MILLISECOND,32)}}class tvt extends Cm{constructor(){super(Wt.MICROSECOND,64)}}class nvt extends Cm{constructor(){super(Wt.NANOSECOND,64)}}class K3 extends Sn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}dAe=Symbol.toStringTag;K3[dAe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(K3.prototype);class XE extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Ch[this.unit]}>`}}hAe=Symbol.toStringTag;XE[hAe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(XE.prototype);class rvt extends XE{constructor(){super(Ch.DAY_TIME)}}class ivt extends XE{constructor(){super(Ch.YEAR_MONTH)}}let X3=class extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};pAe=Symbol.toStringTag;X3[pAe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(X3.prototype);let QE=class extends Sn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};mAe=Symbol.toStringTag;QE[mAe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(QE.prototype);class la extends Sn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}gAe=Symbol.toStringTag;la[gAe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(la.prototype);class KC extends Sn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}yAe=Symbol.toStringTag;KC[yAe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(KC.prototype);let Q3=class extends Sn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};vAe=Symbol.toStringTag;Q3[vAe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(Q3.prototype);let JE=class extends Sn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};bAe=Symbol.toStringTag;JE[bAe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(JE.prototype);class XC extends Sn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}_Ae=Symbol.toStringTag;XC[_Ae]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(XC.prototype);const svt=(e=>()=>++e)(-1);class Y0 extends Sn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?svt():Wf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}wAe=Symbol.toStringTag;Y0[wAe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(Y0.prototype);function Nd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class An{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return ovt(this,t,n)}getVisitFnByTypeId(t,n=!0){return Q_(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function ovt(e,t,n=!0){return typeof t=="number"?Q_(e,t,n):typeof t=="string"&&t in re?Q_(e,re[t],n):t&&t instanceof Sn?Q_(e,Pce(t),n):t!=null&&t.type&&t.type instanceof Sn?Q_(e,Pce(t.type),n):Q_(e,re.NONE,n)}function Q_(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Pce(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Po.HALF:return re.Float16;case Po.SINGLE:return re.Float32;case Po.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case Ah.DAY:return re.DateDay;case Ah.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Ch.DAY_TIME:return re.IntervalDayTime;case Ch.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case Qu.Dense:return re.DenseUnion;case Qu.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}An.prototype.visitInt8=null;An.prototype.visitInt16=null;An.prototype.visitInt32=null;An.prototype.visitInt64=null;An.prototype.visitUint8=null;An.prototype.visitUint16=null;An.prototype.visitUint32=null;An.prototype.visitUint64=null;An.prototype.visitFloat16=null;An.prototype.visitFloat32=null;An.prototype.visitFloat64=null;An.prototype.visitDateDay=null;An.prototype.visitDateMillisecond=null;An.prototype.visitTimestampSecond=null;An.prototype.visitTimestampMillisecond=null;An.prototype.visitTimestampMicrosecond=null;An.prototype.visitTimestampNanosecond=null;An.prototype.visitTimeSecond=null;An.prototype.visitTimeMillisecond=null;An.prototype.visitTimeMicrosecond=null;An.prototype.visitTimeNanosecond=null;An.prototype.visitDenseUnion=null;An.prototype.visitSparseUnion=null;An.prototype.visitIntervalDayTime=null;An.prototype.visitIntervalYearMonth=null;An.prototype.visitDuration=null;An.prototype.visitDurationSecond=null;An.prototype.visitDurationMillisecond=null;An.prototype.visitDurationMicrosecond=null;An.prototype.visitDurationNanosecond=null;const xAe=new Float64Array(1),N_=new Uint32Array(xAe.buffer);function SAe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function TAe(e){if(e!==e)return 32256;xAe[0]=e;const t=(N_[1]&2147483648)>>16&65535;let n=N_[1]&2146435072,r=0;return n>=1089470464?N_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(N_[1]&1048575)>>10):n<=1056964608?(r=1048576+(N_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(N_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends An{}function rn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const avt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},sX=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},uvt=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},lvt=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},AAe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},cvt=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},Qm=({values:e},t,n)=>{e[t]=n},oX=({values:e},t,n)=>{e[t]=n},CAe=({values:e},t,n)=>{e[t]=TAe(n)},fvt=(e,t,n)=>{switch(e.type.precision){case Po.HALF:return CAe(e,t,n);case Po.SINGLE:case Po.DOUBLE:return oX(e,t,n)}},aX=({values:e},t,n)=>{avt(e,t,n.valueOf())},uX=({values:e},t,n)=>{sX(e,t*2,n.valueOf())},IAe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},dvt=({values:e,valueOffsets:t},n,r)=>AAe(e,t,n,r),hvt=({values:e,valueOffsets:t},n,r)=>{AAe(e,t,n,WK(r))},kAe=(e,t,n)=>{e.type.unit===Ah.DAY?aX(e,t,n):uX(e,t,n)},lX=({values:e},t,n)=>sX(e,t*2,n/1e3),cX=({values:e},t,n)=>sX(e,t*2,n),fX=({values:e},t,n)=>uvt(e,t*2,n),dX=({values:e},t,n)=>lvt(e,t*2,n),RAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return lX(e,t,n);case Wt.MILLISECOND:return cX(e,t,n);case Wt.MICROSECOND:return fX(e,t,n);case Wt.NANOSECOND:return dX(e,t,n)}},hX=({values:e},t,n)=>{e[t]=n},pX=({values:e},t,n)=>{e[t]=n},mX=({values:e},t,n)=>{e[t]=n},gX=({values:e},t,n)=>{e[t]=n},NAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return hX(e,t,n);case Wt.MILLISECOND:return pX(e,t,n);case Wt.MICROSECOND:return mX(e,t,n);case Wt.NANOSECOND:return gX(e,t,n)}},PAe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},pvt=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Pc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},mvt=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Pc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},gvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),yvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),vvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),bvt=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),_vt=(e,t,n)=>{const r=e.type.children.map(s=>Pc.getVisitFn(s.type)),i=n instanceof Map?vvt(t,n):n instanceof hr?yvt(t,n):Array.isArray(n)?gvt(t,n):bvt(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},wvt=(e,t,n)=>{e.type.mode===Qu.Dense?DAe(e,t,n):OAe(e,t,n)},DAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Pc.visit(i,e.valueOffsets[t],n)},OAe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Pc.visit(i,t,n)},Evt=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},$Ae=(e,t,n)=>{e.type.unit===Ch.DAY_TIME?yX(e,t,n):vX(e,t,n)},yX=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},vX=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},bX=({values:e},t,n)=>{e[t]=n},_X=({values:e},t,n)=>{e[t]=n},wX=({values:e},t,n)=>{e[t]=n},EX=({values:e},t,n)=>{e[t]=n},MAe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return bX(e,t,n);case Wt.MILLISECOND:return _X(e,t,n);case Wt.MICROSECOND:return wX(e,t,n);case Wt.NANOSECOND:return EX(e,t,n)}},xvt=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Pc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=rn(cvt);Qt.prototype.visitInt=rn(Qm);Qt.prototype.visitInt8=rn(Qm);Qt.prototype.visitInt16=rn(Qm);Qt.prototype.visitInt32=rn(Qm);Qt.prototype.visitInt64=rn(Qm);Qt.prototype.visitUint8=rn(Qm);Qt.prototype.visitUint16=rn(Qm);Qt.prototype.visitUint32=rn(Qm);Qt.prototype.visitUint64=rn(Qm);Qt.prototype.visitFloat=rn(fvt);Qt.prototype.visitFloat16=rn(CAe);Qt.prototype.visitFloat32=rn(oX);Qt.prototype.visitFloat64=rn(oX);Qt.prototype.visitUtf8=rn(hvt);Qt.prototype.visitBinary=rn(dvt);Qt.prototype.visitFixedSizeBinary=rn(IAe);Qt.prototype.visitDate=rn(kAe);Qt.prototype.visitDateDay=rn(aX);Qt.prototype.visitDateMillisecond=rn(uX);Qt.prototype.visitTimestamp=rn(RAe);Qt.prototype.visitTimestampSecond=rn(lX);Qt.prototype.visitTimestampMillisecond=rn(cX);Qt.prototype.visitTimestampMicrosecond=rn(fX);Qt.prototype.visitTimestampNanosecond=rn(dX);Qt.prototype.visitTime=rn(NAe);Qt.prototype.visitTimeSecond=rn(hX);Qt.prototype.visitTimeMillisecond=rn(pX);Qt.prototype.visitTimeMicrosecond=rn(mX);Qt.prototype.visitTimeNanosecond=rn(gX);Qt.prototype.visitDecimal=rn(PAe);Qt.prototype.visitList=rn(pvt);Qt.prototype.visitStruct=rn(_vt);Qt.prototype.visitUnion=rn(wvt);Qt.prototype.visitDenseUnion=rn(DAe);Qt.prototype.visitSparseUnion=rn(OAe);Qt.prototype.visitDictionary=rn(Evt);Qt.prototype.visitInterval=rn($Ae);Qt.prototype.visitIntervalDayTime=rn(yX);Qt.prototype.visitIntervalYearMonth=rn(vX);Qt.prototype.visitDuration=rn(MAe);Qt.prototype.visitDurationSecond=rn(bX);Qt.prototype.visitDurationMillisecond=rn(_X);Qt.prototype.visitDurationMicrosecond=rn(wX);Qt.prototype.visitDurationNanosecond=rn(EX);Qt.prototype.visitFixedSizeList=rn(xvt);Qt.prototype.visitMap=rn(mvt);const Pc=new Qt,df=Symbol.for("parent"),Qw=Symbol.for("rowIndex");class xX{constructor(t,n){return this[df]=t,this[Qw]=n,new Proxy(this,new Tvt)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Qw],n=this[df],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=Ju.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${Y1(t)}: ${Y1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Svt(this[df],this[Qw])}}class Svt{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,Ju.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(xX.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[df]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Qw]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Tvt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[df].type.children.map(n=>n.name)}has(t,n){return t[df].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[df].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[df].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=Ju.visit(t[df].children[r],t[Qw]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[df].type.children.findIndex(s=>s.name===n);return i!==-1?(Pc.visit(t[df].children[i],t[Qw],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends An{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const Avt=(e,t)=>864e5*e[t],SX=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),Cvt=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,Ivt=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,LAe=e=>new Date(e),kvt=(e,t)=>LAe(Avt(e,t)),Rvt=(e,t)=>LAe(SX(e,t)),Nvt=(e,t)=>null,FAe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},Pvt=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},jAe=({values:e},t)=>kvt(e,t),BAe=({values:e},t)=>Rvt(e,t*2),jy=({stride:e,values:t},n)=>t[e*n],Dvt=({stride:e,values:t},n)=>SAe(t[e*n]),UAe=({values:e},t)=>e[t],Ovt=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),$vt=({values:e,valueOffsets:t},n)=>FAe(e,t,n),Mvt=({values:e,valueOffsets:t},n)=>{const r=FAe(e,t,n);return r!==null?yz(r):null},Lvt=({values:e},t)=>e[t],Fvt=({type:e,values:t},n)=>e.precision!==Po.HALF?t[n]:SAe(t[n]),jvt=(e,t)=>e.type.unit===Ah.DAY?jAe(e,t):BAe(e,t),zAe=({values:e},t)=>1e3*SX(e,t*2),VAe=({values:e},t)=>SX(e,t*2),HAe=({values:e},t)=>Cvt(e,t*2),qAe=({values:e},t)=>Ivt(e,t*2),Bvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return zAe(e,t);case Wt.MILLISECOND:return VAe(e,t);case Wt.MICROSECOND:return HAe(e,t);case Wt.NANOSECOND:return qAe(e,t)}},WAe=({values:e},t)=>e[t],GAe=({values:e},t)=>e[t],YAe=({values:e},t)=>e[t],KAe=({values:e},t)=>e[t],Uvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return WAe(e,t);case Wt.MILLISECOND:return GAe(e,t);case Wt.MICROSECOND:return YAe(e,t);case Wt.NANOSECOND:return KAe(e,t)}},zvt=({values:e,stride:t},n)=>KK.decimal(e.subarray(t*n,t*(n+1))),Vvt=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new hr([u])},Hvt=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new U6(o.slice(i,s-i))},qvt=(e,t)=>new xX(e,t),Wvt=(e,t)=>e.type.mode===Qu.Dense?XAe(e,t):QAe(e,t),XAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ju.visit(r,e.valueOffsets[t])},QAe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return Ju.visit(r,t)},Gvt=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},Yvt=(e,t)=>e.type.unit===Ch.DAY_TIME?JAe(e,t):ZAe(e,t),JAe=({values:e},t)=>e.subarray(2*t,2*(t+1)),ZAe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},eCe=({values:e},t)=>e[t],tCe=({values:e},t)=>e[t],nCe=({values:e},t)=>e[t],rCe=({values:e},t)=>e[t],Kvt=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return eCe(e,t);case Wt.MILLISECOND:return tCe(e,t);case Wt.MICROSECOND:return nCe(e,t);case Wt.NANOSECOND:return rCe(e,t)}},Xvt=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new hr([s])};Gt.prototype.visitNull=Jt(Nvt);Gt.prototype.visitBool=Jt(Pvt);Gt.prototype.visitInt=Jt(Lvt);Gt.prototype.visitInt8=Jt(jy);Gt.prototype.visitInt16=Jt(jy);Gt.prototype.visitInt32=Jt(jy);Gt.prototype.visitInt64=Jt(UAe);Gt.prototype.visitUint8=Jt(jy);Gt.prototype.visitUint16=Jt(jy);Gt.prototype.visitUint32=Jt(jy);Gt.prototype.visitUint64=Jt(UAe);Gt.prototype.visitFloat=Jt(Fvt);Gt.prototype.visitFloat16=Jt(Dvt);Gt.prototype.visitFloat32=Jt(jy);Gt.prototype.visitFloat64=Jt(jy);Gt.prototype.visitUtf8=Jt(Mvt);Gt.prototype.visitBinary=Jt($vt);Gt.prototype.visitFixedSizeBinary=Jt(Ovt);Gt.prototype.visitDate=Jt(jvt);Gt.prototype.visitDateDay=Jt(jAe);Gt.prototype.visitDateMillisecond=Jt(BAe);Gt.prototype.visitTimestamp=Jt(Bvt);Gt.prototype.visitTimestampSecond=Jt(zAe);Gt.prototype.visitTimestampMillisecond=Jt(VAe);Gt.prototype.visitTimestampMicrosecond=Jt(HAe);Gt.prototype.visitTimestampNanosecond=Jt(qAe);Gt.prototype.visitTime=Jt(Uvt);Gt.prototype.visitTimeSecond=Jt(WAe);Gt.prototype.visitTimeMillisecond=Jt(GAe);Gt.prototype.visitTimeMicrosecond=Jt(YAe);Gt.prototype.visitTimeNanosecond=Jt(KAe);Gt.prototype.visitDecimal=Jt(zvt);Gt.prototype.visitList=Jt(Vvt);Gt.prototype.visitStruct=Jt(qvt);Gt.prototype.visitUnion=Jt(Wvt);Gt.prototype.visitDenseUnion=Jt(XAe);Gt.prototype.visitSparseUnion=Jt(QAe);Gt.prototype.visitDictionary=Jt(Gvt);Gt.prototype.visitInterval=Jt(Yvt);Gt.prototype.visitIntervalDayTime=Jt(JAe);Gt.prototype.visitIntervalYearMonth=Jt(ZAe);Gt.prototype.visitDuration=Jt(Kvt);Gt.prototype.visitDurationSecond=Jt(eCe);Gt.prototype.visitDurationMillisecond=Jt(tCe);Gt.prototype.visitDurationMicrosecond=Jt(nCe);Gt.prototype.visitDurationNanosecond=Jt(rCe);Gt.prototype.visitFixedSizeList=Jt(Xvt);Gt.prototype.visitMap=Jt(Hvt);const Ju=new Gt,wf=Symbol.for("keys"),Jw=Symbol.for("vals");class U6{constructor(t){return this[wf]=new hr([t.children[0]]).memoize(),this[Jw]=t.children[1],new Proxy(this,new Jvt)}[Symbol.iterator](){return new Qvt(this[wf],this[Jw])}get size(){return this[wf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[wf],n=this[Jw],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=Ju.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${Y1(t)}: ${Y1(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class Qvt{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),Ju.visit(this.vals,t)]})}}class Jvt{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[wf].toArray().map(String)}has(t,n){return t[wf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[wf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[wf].indexOf(n);if(r!==-1){const i=Ju.visit(Reflect.get(t,Jw),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[wf].indexOf(n);return i!==-1?(Pc.visit(Reflect.get(t,Jw),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(U6.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[wf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[Jw]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Dce;function iCe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Dce=s,s=o,o=Dce),o>i&&(o=i),r?r(e,s,o):[s,o]}const Oce=e=>e!==e;function yS(e){if(typeof e!=="object"||e===null)return Oce(e)?Oce:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?zyt(e,n):!1:e instanceof Map?e1t(e):Array.isArray(e)?Zvt(e):e instanceof hr?t1t(e):n1t(e,!0)}function Zvt(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=yS(e[n]);return z6(t)}function e1t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=yS(r);return z6(n)}function t1t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=yS(e.get(n));return z6(t)}function n1t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=yS(e[n[i]]);return z6(r,n)}function z6(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return r1t(e,n);case Map:return $ce(e,n,n.keys());case U6:case xX:case Object:case void 0:return $ce(e,n,t||Object.keys(n))}return n instanceof hr?i1t(e,n):!1}}function r1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function i1t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function $ce(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function sCe(e,t,n,r){return(n&1<<r)!==0}function s1t(e,t,n,r){return(n&1<<r)>>r}function J3(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):oCe(new TX(n,e,t,null,sCe)).subarray(0,r)),i}return n}function oCe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class TX{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function _z(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new TX(e,t,n-t,e,s1t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return _z(e,t,i)+_z(e,r,n)+o1t(e,i>>3,r-i>>3)}function o1t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=j8(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=j8(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=j8(s.getUint8(i)),i+=1;return r}function j8(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const a1t=-1;class Nr{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Sn.isSparseUnion(t)?this.children.some(n=>n.nullable):Sn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Sn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=a1t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-_z(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Nr?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=Nd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Sn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===Qu.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Sn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===Qu.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set(J3(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Nr(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set(J3(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Sp.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Sp.TYPE])&&(o[Sp.TYPE]=s.subarray(t,t+n)),(s=o[Sp.OFFSET])&&(o[Sp.OFFSET]=s.subarray(t,t+n+1))||(s=o[Sp.DATA])&&(o[Sp.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Nr.prototype.children=Object.freeze([]);class AA extends An{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Nr(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.data),s=Pr(t.nullBitmap),o=DT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.data),s=Pr(t.nullBitmap),o=DT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Nd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Nd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Nd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Nd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Nd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Pr(t.nullBitmap),o=DT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Pr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Ys(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Sn.isSparseUnion(n))return new Nr(n,r,o,a,[void 0,void 0,void 0,s],i);const u=DT(t.valueOffsets);return new Nr(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.indices.ArrayType,t.data),{["dictionary"]:o=new hr([new AA().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length/Nd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Pr(t.nullBitmap),s=Ys(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new AA().visit({type:n.valueType})}=t,s=Pr(t.nullBitmap),{["length"]:o=i.length/Nd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Nr(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new AA().visit({type:n.childType})}=t,s=Pr(t.nullBitmap),o=DT(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Nr(n,r,a,u,[o,void 0,s],[i])}}const u1t=new AA;function sa(e){return u1t.visit(e)}class Mce{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function aCe(e){return e.reduce((t,n)=>t+n.nullCount,0)}function uCe(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function lCe(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function AX(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function CX(e,t){return e.getValid(t)}function Zw(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return AX(r,this._offsets,n,t)}}function cCe(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=AX(s,this._offsets,r,n);return t=void 0,o}}function fCe(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):AX(s,this._offsets,i,n);return t=void 0,o}}class Yt extends An{}function l1t(e,t){return t===null&&e.length>0?0:-1}function c1t(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new TX(n,e.offset+(t||0),e.length,n,sCe)){if(!i)return r;++r}return-1}function fn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return c1t(e,n)}const r=Ju.getVisitFn(e),i=yS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function dCe(e,t,n){const r=Ju.getVisitFn(e),i=yS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=l1t;Yt.prototype.visitBool=fn;Yt.prototype.visitInt=fn;Yt.prototype.visitInt8=fn;Yt.prototype.visitInt16=fn;Yt.prototype.visitInt32=fn;Yt.prototype.visitInt64=fn;Yt.prototype.visitUint8=fn;Yt.prototype.visitUint16=fn;Yt.prototype.visitUint32=fn;Yt.prototype.visitUint64=fn;Yt.prototype.visitFloat=fn;Yt.prototype.visitFloat16=fn;Yt.prototype.visitFloat32=fn;Yt.prototype.visitFloat64=fn;Yt.prototype.visitUtf8=fn;Yt.prototype.visitBinary=fn;Yt.prototype.visitFixedSizeBinary=fn;Yt.prototype.visitDate=fn;Yt.prototype.visitDateDay=fn;Yt.prototype.visitDateMillisecond=fn;Yt.prototype.visitTimestamp=fn;Yt.prototype.visitTimestampSecond=fn;Yt.prototype.visitTimestampMillisecond=fn;Yt.prototype.visitTimestampMicrosecond=fn;Yt.prototype.visitTimestampNanosecond=fn;Yt.prototype.visitTime=fn;Yt.prototype.visitTimeSecond=fn;Yt.prototype.visitTimeMillisecond=fn;Yt.prototype.visitTimeMicrosecond=fn;Yt.prototype.visitTimeNanosecond=fn;Yt.prototype.visitDecimal=fn;Yt.prototype.visitList=fn;Yt.prototype.visitStruct=fn;Yt.prototype.visitUnion=fn;Yt.prototype.visitDenseUnion=dCe;Yt.prototype.visitSparseUnion=dCe;Yt.prototype.visitDictionary=fn;Yt.prototype.visitInterval=fn;Yt.prototype.visitIntervalDayTime=fn;Yt.prototype.visitIntervalYearMonth=fn;Yt.prototype.visitDuration=fn;Yt.prototype.visitDurationSecond=fn;Yt.prototype.visitDurationMillisecond=fn;Yt.prototype.visitDurationMicrosecond=fn;Yt.prototype.visitDurationNanosecond=fn;Yt.prototype.visitFixedSizeList=fn;Yt.prototype.visitMap=fn;const Z3=new Yt;class Kt extends An{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof eu&&t.bitWidth!==64||t instanceof Cm&&t.bitWidth!==64||t instanceof G0&&t.precision!==Po.HALF))return new Mce(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new Mce(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new f1t(o)})}class f1t{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=Zt;Kt.prototype.visitBool=Zt;Kt.prototype.visitInt=Zt;Kt.prototype.visitInt8=Zt;Kt.prototype.visitInt16=Zt;Kt.prototype.visitInt32=Zt;Kt.prototype.visitInt64=Zt;Kt.prototype.visitUint8=Zt;Kt.prototype.visitUint16=Zt;Kt.prototype.visitUint32=Zt;Kt.prototype.visitUint64=Zt;Kt.prototype.visitFloat=Zt;Kt.prototype.visitFloat16=Zt;Kt.prototype.visitFloat32=Zt;Kt.prototype.visitFloat64=Zt;Kt.prototype.visitUtf8=Zt;Kt.prototype.visitBinary=Zt;Kt.prototype.visitFixedSizeBinary=Zt;Kt.prototype.visitDate=Zt;Kt.prototype.visitDateDay=Zt;Kt.prototype.visitDateMillisecond=Zt;Kt.prototype.visitTimestamp=Zt;Kt.prototype.visitTimestampSecond=Zt;Kt.prototype.visitTimestampMillisecond=Zt;Kt.prototype.visitTimestampMicrosecond=Zt;Kt.prototype.visitTimestampNanosecond=Zt;Kt.prototype.visitTime=Zt;Kt.prototype.visitTimeSecond=Zt;Kt.prototype.visitTimeMillisecond=Zt;Kt.prototype.visitTimeMicrosecond=Zt;Kt.prototype.visitTimeNanosecond=Zt;Kt.prototype.visitDecimal=Zt;Kt.prototype.visitList=Zt;Kt.prototype.visitStruct=Zt;Kt.prototype.visitUnion=Zt;Kt.prototype.visitDenseUnion=Zt;Kt.prototype.visitSparseUnion=Zt;Kt.prototype.visitDictionary=Zt;Kt.prototype.visitInterval=Zt;Kt.prototype.visitIntervalDayTime=Zt;Kt.prototype.visitIntervalYearMonth=Zt;Kt.prototype.visitDuration=Zt;Kt.prototype.visitDurationSecond=Zt;Kt.prototype.visitDurationMillisecond=Zt;Kt.prototype.visitDurationMicrosecond=Zt;Kt.prototype.visitDurationNanosecond=Zt;Kt.prototype.visitFixedSizeList=Zt;Kt.prototype.visitMap=Zt;const IX=new Kt,d1t=(e,t)=>e+t;class By extends An{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Ih.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Ih.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const h1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),p1t=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),m1t=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Ih.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},g1t=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Ih.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},y1t=(e,t)=>e.type.mode===Qu.Dense?hCe(e,t):pCe(e,t),hCe=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Ih.visit(t[s],r[i])},pCe=({children:e},t)=>4+Ih.visitMany(e,e.map(()=>t)).reduce(d1t,0);By.prototype.visitUtf8=h1t;By.prototype.visitBinary=p1t;By.prototype.visitList=m1t;By.prototype.visitFixedSizeList=g1t;By.prototype.visitUnion=y1t;By.prototype.visitDenseUnion=hCe;By.prototype.visitSparseUnion=pCe;const Ih=new By;var mCe;const gCe={},yCe={};class hr{constructor(t){var n,r,i;const s=t[0]instanceof hr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Nr)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=gCe[o.typeId],f=s[0];this.isValid=d=>CX(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,yCe[o.typeId]),this._offsets=uCe(s);break}this.data=s,this.type=o,this.stride=Nd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return aCe(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return IX.visit(this)}concat(...t){return new hr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new hr(iCe(this,t,n,({data:r,_offsets:i},s,o)=>lCe(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new hr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Sn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Sn.isDictionary(this.type)){const t=new e$(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return new e$(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new hr(n)}return this}}mCe=Symbol.toStringTag;hr[mCe]=(e=>{e.type=Sn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=Ju.getVisitFnByTypeId(n),i=Pc.getVisitFnByTypeId(n),s=Z3.getVisitFnByTypeId(n),o=Ih.getVisitFnByTypeId(n);gCe[n]={get:r,set:i,indexOf:s,byteLength:o},yCe[n]=Object.create(e,{isValid:{value:Zw(CX)},get:{value:Zw(Ju.getVisitFnByTypeId(n))},set:{value:cCe(Pc.getVisitFnByTypeId(n))},indexOf:{value:fCe(Z3.getVisitFnByTypeId(n))},getByteLength:{value:Zw(Ih.getVisitFnByTypeId(n))}})}return"Vector"})(hr.prototype);class e$ extends hr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new e$(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new hr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function v1t(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${b1t(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function b1t(e){return typeof e!="bigint"?Y1(e):`${Y1(e)}n`}const B8=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,_1t=(e,t=0)=>e.length>=t?e.subarray(0,t):G3(new e.constructor(t),e,0);class V6{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?B8(r*1,this.BYTES_PER_ELEMENT):B8(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=B8(t*this.stride,this.BYTES_PER_ELEMENT);const n=_1t(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=G3(new this.ArrayType(t),this.buffer)}}V6.prototype.offset=0;class Tk extends V6{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class vCe extends Tk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class bCe extends Tk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let sl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=Nd(t),this._nulls=new vCe,n&&n.length>0&&(this._isValid=v1t(n))}toVector(){return new hr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),sa({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};sl.prototype.length=1;sl.prototype.stride=1;sl.prototype.children=null;sl.prototype.finished=!1;sl.prototype.nullValues=null;sl.prototype._isValid=()=>!0;class Jm extends sl{constructor(t){super(t),this._values=new Tk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class H6 extends sl{constructor(t){super(t),this._pendingLength=0,this._offsets=new bCe}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof U6?n[wf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class wz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const U8=2,Bd=4,Mp=4,zr=4,Rg=new Int32Array(2),Lce=new Float32Array(Rg.buffer),Fce=new Float64Array(Rg.buffer),qN=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var Ez;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(Ez||(Ez={}));let t$=class _Ce{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new _Ce(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Rg[0]=this.readInt32(t),Lce[0]}readFloat64(t){return Rg[qN?0:1]=this.readInt32(t),Rg[qN?1:0]=this.readInt32(t+4),Fce[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){Lce[0]=n,this.writeInt32(t,Rg[0])}writeFloat64(t,n){Fce[0]=n,this.writeInt32(t,Rg[qN?0:1]),this.writeInt32(t+4,Rg[qN?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Bd+Mp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Mp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Bd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Bd;const i=this.bytes_.subarray(t,t+r);return n===Ez.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Bd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Mp)throw new Error("FlatBuffers: file identifier must be length "+Mp);for(let n=0;n<Mp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Bd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},wCe=class ECe{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=t$.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=ECe.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=t$.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Bd,0),this.writeInt32(this.offset()-t+Bd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*U8;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=U8;l<s;l+=U8)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?zr:0;if(n){const s=n;if(this.prep(this.minalign,Bd+Mp+i),s.length!=Mp)throw new TypeError("FlatBuffers: file identifier must be length "+Mp);for(let o=Mp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Bd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Bd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Rs{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+zr),(n||new Rs).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Rs.startKeyValue(t),Rs.addKey(t,n),Rs.addValue(t,r),Rs.endKeyValue(t)}}var ZE;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(ZE||(ZE={}));var ex;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(ex||(ex={}));var n$;(function(e){e[e.DenseArray=0]="DenseArray"})(n$||(n$={}));class yl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new yl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+zr),(n||new yl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return yl.startInt(t),yl.addBitWidth(t,n),yl.addIsSigned(t,r),yl.endInt(t)}}class Lp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Lp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+zr),(n||new Lp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new yl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):n$.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,n$.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class a1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+zr),(n||new a1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return a1.startBinary(t),a1.endBinary(t)}}class u1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+zr),(n||new u1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return u1.startBool(t),u1.endBool(t)}}var r$;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(r$||(r$={}));let vD=class J_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+zr),(n||new J_).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):r$.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,r$.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return J_.startDate(t),J_.addUnit(t,n),J_.endDate(t)}};class wu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new wu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+zr),(n||new wu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return wu.startDecimal(t),wu.addPrecision(t,n),wu.addScale(t,r),wu.addBitWidth(t,i),wu.endDecimal(t)}}var K0;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(K0||(K0={}));class Ud{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Ud).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+zr),(n||new Ud).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):K0.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,K0.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Ud.startDuration(t),Ud.addUnit(t,n),Ud.endDuration(t)}}class zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+zr),(n||new zd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return zd.startFixedSizeBinary(t),zd.addByteWidth(t,n),zd.endFixedSizeBinary(t)}}class Vd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Vd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+zr),(n||new Vd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Vd.startFixedSizeList(t),Vd.addListSize(t,n),Vd.endFixedSizeList(t)}}var i$;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(i$||(i$={}));class Hd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Hd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+zr),(n||new Hd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):i$.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,i$.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Hd.startFloatingPoint(t),Hd.addPrecision(t,n),Hd.endFloatingPoint(t)}}var s$;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(s$||(s$={}));class qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+zr),(n||new qd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):s$.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,s$.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return qd.startInterval(t),qd.addUnit(t,n),qd.endInterval(t)}}class l1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+zr),(n||new l1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return l1.startList(t),l1.endList(t)}}let bD=class Z_{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new Z_).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+zr),(n||new Z_).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return Z_.startMap(t),Z_.addKeysSorted(t,n),Z_.endMap(t)}};class c1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+zr),(n||new c1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return c1.startNull(t),c1.endNull(t)}}class f1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+zr),(n||new f1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return f1.startStruct_(t),f1.endStruct_(t)}}let C2=class Cv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new Cv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+zr),(n||new Cv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):K0.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,K0.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return Cv.startTime(t),Cv.addUnit(t,n),Cv.addBitWidth(t,r),Cv.endTime(t)}},I2=class Iv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Iv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+zr),(n||new Iv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):K0.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,K0.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Iv.startTimestamp(t),Iv.addUnit(t,n),Iv.addTimezone(t,r),Iv.endTimestamp(t)}};var o$;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(o$||(o$={}));let kv=class Rv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+zr),(n||new Rv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):o$.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,o$.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Rv.startUnion(t),Rv.addMode(t,n),Rv.addTypeIds(t,r),Rv.endUnion(t)}};class d1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+zr),(n||new d1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return d1.startUtf8(t),d1.endUtf8(t)}}var yi;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(yi||(yi={}));let ac=class _D{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new _D).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+zr),(n||new _D).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):yi.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Lp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new _D).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,yi.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},kd=class Ep{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new Ep).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+zr),(n||new Ep).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ex.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new ac).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,ex.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return Ep.startSchema(t),Ep.addEndianness(t,n),Ep.addFields(t,r),Ep.addCustomMetadata(t,i),Ep.addFeatures(t,s),Ep.endSchema(t)}};class dl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new dl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+zr),(n||new dl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ZE.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new kd).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new wz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new wz).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ZE.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Tr{constructor(t=[],n,r,i=Ua.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=Sz(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Tr(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Tr(n,this.metadata)}assign(...t){const n=t[0]instanceof Tr?t[0]:Array.isArray(t[0])?new Tr(t[0]):new Tr(t),r=[...this.fields],i=WN(WN(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:WN(WN(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=Sz(s,new Map);return new Tr([...r,...s],i,new Map([...this.dictionaries,...o]))}}Tr.prototype.fields=null;Tr.prototype.metadata=null;Tr.prototype.dictionaries=null;let Fr=class xz{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new xz(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],xz.new(n,r,i,s)}};Fr.prototype.type=null;Fr.prototype.name=null;Fr.prototype.nullable=null;Fr.prototype.metadata=null;function WN(e,t){return new Map([...e||new Map,...t||new Map])}function Sz(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Sn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&Sz(s.children,t)}return t}var w1t=wCe,E1t=t$;class Tz{static decode(t){t=new E1t(Pr(t));const n=dl.getRootAsFooter(t),r=Tr.decode(n.schema(),new Map,n.version());return new x1t(r,n)}static encode(t){const n=new w1t,r=Tr.encode(n,t.schema);dl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())X0.encode(n,o);const i=n.endVector();dl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())X0.encode(n,o);const s=n.endVector();return dl.startFooter(n),dl.addSchema(n,r),dl.addVersion(n,Ua.V5),dl.addRecordBatches(n,i),dl.addDictionaries(n,s),dl.finishFooterBuffer(n,dl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Ua.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class x1t extends Tz{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return X0.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return X0.decode(n)}return null}}class X0{static decode(t){return new X0(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return wz.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Wf(r),this.bodyLength=Wf(n)}}const GN=Object.freeze({done:!0,value:void 0});class xCe{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class S1t extends xCe{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Dp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(GN);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Nce.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Nce.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Dp(this,void 0,void 0,function*(){return yield this.abort(t),GN})}return(t){return Dp(this,void 0,void 0,function*(){return yield this.close(),GN})}read(t){return Dp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Dp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(GN)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class z8 extends S1t{write(t){if((t=Pr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?yz(this.toUint8Array(!0)):this.toUint8Array(!1).then(yz)}toUint8Array(t=!1){return t?Th(this._values)[0]:Dp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=cA(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Th(o,a)[0]})}}class SCe extends H6{constructor(t){super(t),this._values=new V6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Pr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class T1t extends sl{constructor(t){super(t),this._values=new vCe}setValue(t,n){this._values.set(t,+n)}}class q6 extends Jm{}q6.prototype._setValue=kAe;class TCe extends q6{}TCe.prototype._setValue=aX;class ACe extends q6{}ACe.prototype._setValue=uX;class CCe extends Jm{}CCe.prototype._setValue=PAe;class A1t extends sl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new Y0(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=a$({type:this.type.indices,nullValues:n}),this.dictionary=a$({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class ICe extends Jm{}ICe.prototype._setValue=IAe;class C1t extends sl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new JE(this.type.listSize,new Fr(n,t.type,!0)),r}}class W6 extends Jm{setValue(t,n){this._values.set(t,n)}}class I1t extends W6{setValue(t,n){super.setValue(t,TAe(n))}}class k1t extends W6{}class R1t extends W6{}class G6 extends Jm{}G6.prototype._setValue=$Ae;class kCe extends G6{}kCe.prototype._setValue=yX;class RCe extends G6{}RCe.prototype._setValue=vX;class vS extends Jm{}vS.prototype._setValue=MAe;class NCe extends vS{}NCe.prototype._setValue=bX;class PCe extends vS{}PCe.prototype._setValue=_X;class DCe extends vS{}DCe.prototype._setValue=wX;class OCe extends vS{}OCe.prototype._setValue=EX;class Zm extends Jm{setValue(t,n){this._values.set(t,n)}}class N1t extends Zm{}class P1t extends Zm{}class D1t extends Zm{}class O1t extends Zm{}class $1t extends Zm{}class M1t extends Zm{}class L1t extends Zm{}class F1t extends Zm{}class j1t extends H6{constructor(t){super(t),this._offsets=new bCe}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new QE(new Fr(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class B1t extends H6{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new XC(new Fr(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class U1t extends sl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class z1t extends sl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new la([...this.type.children,new Fr(n,t.type,!0)]),r}}class bS extends Jm{}bS.prototype._setValue=RAe;class $Ce extends bS{}$Ce.prototype._setValue=lX;class MCe extends bS{}MCe.prototype._setValue=cX;class LCe extends bS{}LCe.prototype._setValue=fX;class FCe extends bS{}FCe.prototype._setValue=dX;class _S extends Jm{}_S.prototype._setValue=NAe;class jCe extends _S{}jCe.prototype._setValue=hX;class BCe extends _S{}BCe.prototype._setValue=pX;class UCe extends _S{}UCe.prototype._setValue=mX;class zCe extends _S{}zCe.prototype._setValue=gX;class kX extends sl{constructor(t){super(t),this._typeIds=new Tk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Fr(n,t.type)];return this.type=new KC(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class V1t extends kX{}class H1t extends kX{constructor(t){super(t),this._offsets=new Tk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class VCe extends H6{constructor(t){super(t),this._values=new V6(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,WK(n))}_flushPending(t,n){}}VCe.prototype._flushPending=SCe.prototype._flushPending;class q1t extends An{visitNull(){return U1t}visitBool(){return T1t}visitInt(){return Zm}visitInt8(){return N1t}visitInt16(){return P1t}visitInt32(){return D1t}visitInt64(){return O1t}visitUint8(){return $1t}visitUint16(){return M1t}visitUint32(){return L1t}visitUint64(){return F1t}visitFloat(){return W6}visitFloat16(){return I1t}visitFloat32(){return k1t}visitFloat64(){return R1t}visitUtf8(){return VCe}visitBinary(){return SCe}visitFixedSizeBinary(){return ICe}visitDate(){return q6}visitDateDay(){return TCe}visitDateMillisecond(){return ACe}visitTimestamp(){return bS}visitTimestampSecond(){return $Ce}visitTimestampMillisecond(){return MCe}visitTimestampMicrosecond(){return LCe}visitTimestampNanosecond(){return FCe}visitTime(){return _S}visitTimeSecond(){return jCe}visitTimeMillisecond(){return BCe}visitTimeMicrosecond(){return UCe}visitTimeNanosecond(){return zCe}visitDecimal(){return CCe}visitList(){return j1t}visitStruct(){return z1t}visitUnion(){return kX}visitDenseUnion(){return H1t}visitSparseUnion(){return V1t}visitDictionary(){return A1t}visitInterval(){return G6}visitIntervalDayTime(){return kCe}visitIntervalYearMonth(){return RCe}visitDuration(){return vS}visitDurationSecond(){return NCe}visitDurationMillisecond(){return PCe}visitDurationMicrosecond(){return DCe}visistDurationNanosecond(){return OCe}visitFixedSizeList(){return C1t}visitMap(){return B1t}}const W1t=new q1t;class Xt extends An{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function su(e,t){return t instanceof e.constructor}function Ak(e,t){return e===t||su(e,t)}function eg(e,t){return e===t||su(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function Y6(e,t){return e===t||su(e,t)&&e.precision===t.precision}function G1t(e,t){return e===t||su(e,t)&&e.byteWidth===t.byteWidth}function RX(e,t){return e===t||su(e,t)&&e.unit===t.unit}function Ck(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function Ik(e,t){return e===t||su(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Y1t(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&Q0.compareManyFields(e.children,t.children)}function K1t(e,t){return e===t||su(e,t)&&e.children.length===t.children.length&&Q0.compareManyFields(e.children,t.children)}function NX(e,t){return e===t||su(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&Q0.compareManyFields(e.children,t.children)}function X1t(e,t){return e===t||su(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&Q0.visit(e.indices,t.indices)&&Q0.visit(e.dictionary,t.dictionary)}function PX(e,t){return e===t||su(e,t)&&e.unit===t.unit}function kk(e,t){return e===t||su(e,t)&&e.unit===t.unit}function Q1t(e,t){return e===t||su(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&Q0.compareManyFields(e.children,t.children)}function J1t(e,t){return e===t||su(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&Q0.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=Ak;Xt.prototype.visitBool=Ak;Xt.prototype.visitInt=eg;Xt.prototype.visitInt8=eg;Xt.prototype.visitInt16=eg;Xt.prototype.visitInt32=eg;Xt.prototype.visitInt64=eg;Xt.prototype.visitUint8=eg;Xt.prototype.visitUint16=eg;Xt.prototype.visitUint32=eg;Xt.prototype.visitUint64=eg;Xt.prototype.visitFloat=Y6;Xt.prototype.visitFloat16=Y6;Xt.prototype.visitFloat32=Y6;Xt.prototype.visitFloat64=Y6;Xt.prototype.visitUtf8=Ak;Xt.prototype.visitBinary=Ak;Xt.prototype.visitFixedSizeBinary=G1t;Xt.prototype.visitDate=RX;Xt.prototype.visitDateDay=RX;Xt.prototype.visitDateMillisecond=RX;Xt.prototype.visitTimestamp=Ck;Xt.prototype.visitTimestampSecond=Ck;Xt.prototype.visitTimestampMillisecond=Ck;Xt.prototype.visitTimestampMicrosecond=Ck;Xt.prototype.visitTimestampNanosecond=Ck;Xt.prototype.visitTime=Ik;Xt.prototype.visitTimeSecond=Ik;Xt.prototype.visitTimeMillisecond=Ik;Xt.prototype.visitTimeMicrosecond=Ik;Xt.prototype.visitTimeNanosecond=Ik;Xt.prototype.visitDecimal=Ak;Xt.prototype.visitList=Y1t;Xt.prototype.visitStruct=K1t;Xt.prototype.visitUnion=NX;Xt.prototype.visitDenseUnion=NX;Xt.prototype.visitSparseUnion=NX;Xt.prototype.visitDictionary=X1t;Xt.prototype.visitInterval=PX;Xt.prototype.visitIntervalDayTime=PX;Xt.prototype.visitIntervalYearMonth=PX;Xt.prototype.visitDuration=kk;Xt.prototype.visitDurationSecond=kk;Xt.prototype.visitDurationMillisecond=kk;Xt.prototype.visitDurationMicrosecond=kk;Xt.prototype.visitDurationNanosecond=kk;Xt.prototype.visitFixedSizeList=Q1t;Xt.prototype.visitMap=J1t;const Q0=new Xt;function Az(e,t){return Q0.compareSchemas(e,t)}function a$(e){const t=e.type,n=new(W1t.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(a$(Object.assign(Object.assign({},l),{type:u})))}}return n}function V8(e,t){return Z1t(e,t.map(n=>n.data.concat()))}function Z1t(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=ebt(n,o,c,t,i),o>0&&(r[s++]=sa({type:new la(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new vl(e,f))]}function ebt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:sa({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var HCe;class Au{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Tr([]),this._offsets=[0],this;let i,s;t[0]instanceof Tr&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof vl)return[u];if(u instanceof Au)return u.batches;if(u instanceof Nr){if(u.type instanceof la)return[new vl(new Tr(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new hr([u[h]])),f=new Tr(l.map((h,p)=>new Fr(String(h),c[p].type))),[,d]=V8(f,c);return d.length===0?[new vl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Tr([]),!(i instanceof Tr))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof vl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!Az(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??uCe(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=aCe(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?IX.visit(new hr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Au(n,r.map(i=>new vl(n,i)))}slice(t,n){const r=this.schema;[t,n]=iCe({length:this.numRows},t,n);const i=lCe(this.data,this._offsets,t,n);return new Au(r,i.map(s=>new vl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=sa({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new hr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new hr([sa({type:new Am,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=V8(r,a)}return new Au(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Au(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Au(...V8(s,o))}}HCe=Symbol.toStringTag;Au[HCe]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=Zw(CX),e.get=Zw(Ju.getVisitFn(re.Struct)),e.set=cCe(Pc.getVisitFn(re.Struct)),e.indexOf=fCe(Z3.getVisitFn(re.Struct)),e.getByteLength=Zw(Ih.getVisitFn(re.Struct)),"Table"))(Au.prototype);var qCe;let vl=class k2{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Tr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=sa({nullCount:0,type:new la(this.schema.fields),children:this.schema.fields.map(n=>sa({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Nr))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=jce(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Fr.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Tr(r),a=sa({type:new la(r),length:s,children:i,nullCount:0});[this.schema,this.data]=jce(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=WCe(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return Ju.visit(this.data,t)}set(t,n){return Pc.visit(this.data,t,n)}indexOf(t,n){return Z3.visit(this.data,t,n)}getByteLength(t){return Ih.visit(this.data,t)}[Symbol.iterator](){return IX.visit(new hr([this.data]))}toArray(){return[...this]}concat(...t){return new Au(this.schema,[this,...t])}slice(t,n){const[r]=new hr([this.data]).slice(t,n).data;return new k2(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new hr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new hr([sa({type:new Am,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Tr(s,new Map(this.schema.metadata)),i=sa({type:new la(s),children:o})}return new k2(r,i)}select(t){const n=this.schema.select(t),r=new la(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new k2(n,sa({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=sa({type:new la(n.fields),length:this.numRows,children:r});return new k2(n,i)}};qCe=Symbol.toStringTag;vl[qCe]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(vl.prototype);function jce(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:sa({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),sa({type:new la(i),length:n,children:s})]}function WCe(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])WCe(a.children,l==null?void 0:l.children,n);if(Sn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class tbt extends vl{constructor(t){const n=t.fields.map(i=>sa({type:i.type})),r=sa({type:new la(t.fields),nullCount:0,children:n});super(t,r)}}var u$;(function(e){e[e.BUFFER=0]="BUFFER"})(u$||(u$={}));var l$;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(l$||(l$={}));class Ng{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Ng).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+zr),(n||new Ng).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):l$.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):u$.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,l$.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,u$.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Ng.startBodyCompression(t),Ng.addCodec(t,n),Ng.addMethod(t,r),Ng.endBodyCompression(t)}}let GCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},YCe=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Tp=class Cz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new Cz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+zr),(n||new Cz).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new YCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new GCe).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Ng).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},ew=class Iz{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new Iz).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+zr),(n||new Iz).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Tp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var c$;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(c$||(c$={}));let mg=class wd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new wd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+zr),(n||new wd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ZE.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):c$.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Rs).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,ZE.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,c$.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return wd.startMessage(t),wd.addVersion(t,n),wd.addHeaderType(t,r),wd.addHeader(t,i),wd.addBodyLength(t,s),wd.addCustomMetadata(t,o),wd.endMessage(t)}};class nbt extends An{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return c1.startNull(n),c1.endNull(n)}visitInt(t,n){return yl.startInt(n),yl.addBitWidth(n,t.bitWidth),yl.addIsSigned(n,t.isSigned),yl.endInt(n)}visitFloat(t,n){return Hd.startFloatingPoint(n),Hd.addPrecision(n,t.precision),Hd.endFloatingPoint(n)}visitBinary(t,n){return a1.startBinary(n),a1.endBinary(n)}visitBool(t,n){return u1.startBool(n),u1.endBool(n)}visitUtf8(t,n){return d1.startUtf8(n),d1.endUtf8(n)}visitDecimal(t,n){return wu.startDecimal(n),wu.addScale(n,t.scale),wu.addPrecision(n,t.precision),wu.addBitWidth(n,t.bitWidth),wu.endDecimal(n)}visitDate(t,n){return vD.startDate(n),vD.addUnit(n,t.unit),vD.endDate(n)}visitTime(t,n){return C2.startTime(n),C2.addUnit(n,t.unit),C2.addBitWidth(n,t.bitWidth),C2.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return I2.startTimestamp(n),I2.addUnit(n,t.unit),r!==void 0&&I2.addTimezone(n,r),I2.endTimestamp(n)}visitInterval(t,n){return qd.startInterval(n),qd.addUnit(n,t.unit),qd.endInterval(n)}visitDuration(t,n){return Ud.startDuration(n),Ud.addUnit(n,t.unit),Ud.endDuration(n)}visitList(t,n){return l1.startList(n),l1.endList(n)}visitStruct(t,n){return f1.startStruct_(n),f1.endStruct_(n)}visitUnion(t,n){kv.startTypeIdsVector(n,t.typeIds.length);const r=kv.createTypeIdsVector(n,t.typeIds);return kv.startUnion(n),kv.addMode(n,t.mode),kv.addTypeIds(n,r),kv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Lp.startDictionaryEncoding(n),Lp.addId(n,BigInt(t.id)),Lp.addIsOrdered(n,t.isOrdered),r!==void 0&&Lp.addIndexType(n,r),Lp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return zd.startFixedSizeBinary(n),zd.addByteWidth(n,t.byteWidth),zd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Vd.startFixedSizeList(n),Vd.addListSize(n,t.listSize),Vd.endFixedSizeList(n)}visitMap(t,n){return bD.startMap(n),bD.addKeysSorted(n,t.keysSorted),bD.endMap(n)}}const H8=new nbt;function rbt(e,t=new Map){return new Tr(sbt(e,t),wD(e.metadata),t)}function KCe(e){return new Fl(e.count,XCe(e.columns),QCe(e.columns))}function ibt(e){return new kh(KCe(e.data),e.id,e.isDelta)}function sbt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function Bce(e,t){return(e.children||[]).filter(Boolean).map(n=>Fr.fromJSON(n,t))}function XCe(e){return(e||[]).reduce((t,n)=>[...t,new J0(n.count,obt(n.VALIDITY)),...XCe(n.children)],[])}function QCe(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new Jd(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new Jd(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new Jd(t.length,i.OFFSET.length)),i.DATA&&t.push(new Jd(t.length,i.DATA.length)),t=QCe(i.children,t)}return t}function obt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function abt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=zce(e,Bce(e,t)),i=new Fr(e.name,o,e.nullable,wD(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?Uce(r):new W0,a=new Y0(t.get(n),r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,wD(e.metadata))):(r=(r=s.indexType)?Uce(r):new W0,t.set(n,o=zce(e,Bce(e,t))),a=new Y0(o,r,n,s.isOrdered),i=new Fr(e.name,a,e.nullable,wD(e.metadata))),i||null}function wD(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function Uce(e){return new eu(e.isSigned,e.bitWidth)}function zce(e,t){const n=e.type.name;switch(n){case"NONE":return new Am;case"null":return new Am;case"binary":return new GC;case"utf8":return new YE;case"bool":return new YC;case"list":return new QE((t||[])[0]);case"struct":return new la(t||[]);case"struct_":return new la(t||[])}switch(n){case"int":{const r=e.type;return new eu(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new G0(Po[r.precision])}case"decimal":{const r=e.type;return new Y3(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new KE(Ah[r.unit])}case"time":{const r=e.type;return new Cm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new K3(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new XE(Ch[r.unit])}case"duration":{const r=e.type;return new X3(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new KC(Qu[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new Q3(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new JE(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new XC((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var ubt=wCe,lbt=t$;class Wd{static fromJSON(t,n){const r=new Wd(0,Ua.V5,n);return r._createHeader=cbt(t,n),r}static decode(t){t=new lbt(Pr(t));const n=mg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new Wd(r,i,s);return o._createHeader=fbt(n,s),o}static encode(t){const n=new ubt;let r=-1;return t.isSchema()?r=Tr.encode(n,t.header()):t.isRecordBatch()?r=Fl.encode(n,t.header()):t.isDictionaryBatch()&&(r=kh.encode(n,t.header())),mg.startMessage(n),mg.addVersion(n,Ua.V5),mg.addHeader(n,r),mg.addHeaderType(n,t.headerType),mg.addBodyLength(n,BigInt(t.bodyLength)),mg.finishMessageBuffer(n,mg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Tr)return new Wd(0,Ua.V5,Qs.Schema,t);if(t instanceof Fl)return new Wd(n,Ua.V5,Qs.RecordBatch,t);if(t instanceof kh)return new Wd(n,Ua.V5,Qs.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===Qs.Schema}isRecordBatch(){return this.headerType===Qs.RecordBatch}isDictionaryBatch(){return this.headerType===Qs.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Wf(t)}}class Fl{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Wf(t)}}class kh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Wf(n)}}class Jd{constructor(t,n){this.offset=Wf(t),this.length=Wf(n)}}class J0{constructor(t,n){this.length=Wf(t),this.nullCount=Wf(n)}}function cbt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.fromJSON(e);case Qs.RecordBatch:return Fl.fromJSON(e);case Qs.DictionaryBatch:return kh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}function fbt(e,t){return()=>{switch(t){case Qs.Schema:return Tr.decode(e.header(new kd),new Map,e.version());case Qs.RecordBatch:return Fl.decode(e.header(new Tp),e.version());case Qs.DictionaryBatch:return kh.decode(e.header(new ew),e.version())}throw new Error(`Unrecognized Message type: { name: ${Qs[t]}, type: ${t} }`)}}Fr.encode=Ebt;Fr.decode=_bt;Fr.fromJSON=abt;Tr.encode=wbt;Tr.decode=dbt;Tr.fromJSON=rbt;Fl.encode=xbt;Fl.decode=hbt;Fl.fromJSON=KCe;kh.encode=Sbt;kh.decode=pbt;kh.fromJSON=ibt;J0.encode=Tbt;J0.decode=gbt;Jd.encode=Abt;Jd.decode=mbt;function dbt(e,t=new Map,n=Ua.V5){const r=bbt(e,t);return new Tr(r,ED(e),t,n)}function hbt(e,t=Ua.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new Fl(e.length(),ybt(e),vbt(e,t))}function pbt(e,t=Ua.V5){return new kh(Fl.decode(e.data(),t),e.id(),e.isDelta())}function mbt(e){return new Jd(e.offset(),e.length())}function gbt(e){return new J0(e.length(),e.nullCount())}function ybt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=J0.decode(n));return t}function vbt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Ua.V4&&(r.bb_pos+=8*(i+1)),n[++s]=Jd.decode(r));return n}function bbt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Fr.decode(r,t));return n}function Vce(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Fr.decode(r,t));return n}function _bt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=qce(e,Vce(e,t)),r=new Fr(e.name(),i,e.nullable(),ED(e))):t.has(n=Wf(a.id()))?(s=(s=a.indexType())?Hce(s):new W0,o=new Y0(t.get(n),s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),ED(e))):(s=(s=a.indexType())?Hce(s):new W0,t.set(n,i=qce(e,Vce(e,t))),o=new Y0(i,s,n,a.isOrdered()),r=new Fr(e.name(),o,e.nullable(),ED(e))),r||null}function ED(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function Hce(e){return new eu(e.isSigned(),e.bitWidth())}function qce(e,t){const n=e.typeType();switch(n){case yi.NONE:return new Am;case yi.Null:return new Am;case yi.Binary:return new GC;case yi.Utf8:return new YE;case yi.Bool:return new YC;case yi.List:return new QE((t||[])[0]);case yi.Struct_:return new la(t||[])}switch(n){case yi.Int:{const r=e.type(new yl);return new eu(r.isSigned(),r.bitWidth())}case yi.FloatingPoint:{const r=e.type(new Hd);return new G0(r.precision())}case yi.Decimal:{const r=e.type(new wu);return new Y3(r.scale(),r.precision(),r.bitWidth())}case yi.Date:{const r=e.type(new vD);return new KE(r.unit())}case yi.Time:{const r=e.type(new C2);return new Cm(r.unit(),r.bitWidth())}case yi.Timestamp:{const r=e.type(new I2);return new K3(r.unit(),r.timezone())}case yi.Interval:{const r=e.type(new qd);return new XE(r.unit())}case yi.Duration:{const r=e.type(new Ud);return new X3(r.unit())}case yi.Union:{const r=e.type(new kv);return new KC(r.mode(),r.typeIdsArray()||[],t||[])}case yi.FixedSizeBinary:{const r=e.type(new zd);return new Q3(r.byteWidth())}case yi.FixedSizeList:{const r=e.type(new Vd);return new JE(r.listSize(),(t||[])[0])}case yi.Map:{const r=e.type(new bD);return new XC((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${yi[n]}" (${n})`)}function wbt(e,t){const n=t.fields.map(s=>Fr.encode(e,s));kd.startFieldsVector(e,n.length);const r=kd.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?kd.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Rs.startKeyValue(e),Rs.addKey(e,a),Rs.addValue(e,u),Rs.endKeyValue(e)})):-1;return kd.startSchema(e),kd.addFields(e,r),kd.addEndianness(e,Cbt?ex.Little:ex.Big),i!==-1&&kd.addCustomMetadata(e,i),kd.endSchema(e)}function Ebt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Sn.isDictionary(s)?(o=s.dictionary.typeId,i=H8.visit(s,e),r=H8.visit(s.dictionary,e)):r=H8.visit(s,e);const a=(s.children||[]).map(c=>Fr.encode(e,c)),u=ac.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?ac.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Rs.startKeyValue(e),Rs.addKey(e,d),Rs.addValue(e,h),Rs.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),ac.startField(e),ac.addType(e,r),ac.addTypeType(e,o),ac.addChildren(e,u),ac.addNullable(e,!!t.nullable),n!==-1&&ac.addName(e,n),i!==-1&&ac.addDictionary(e,i),l!==-1&&ac.addCustomMetadata(e,l),ac.endField(e)}function xbt(e,t){const n=t.nodes||[],r=t.buffers||[];Tp.startNodesVector(e,n.length);for(const o of n.slice().reverse())J0.encode(e,o);const i=e.endVector();Tp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())Jd.encode(e,o);const s=e.endVector();return Tp.startRecordBatch(e),Tp.addLength(e,BigInt(t.length)),Tp.addNodes(e,i),Tp.addBuffers(e,s),Tp.endRecordBatch(e)}function Sbt(e,t){const n=Fl.encode(e,t.data);return ew.startDictionaryBatch(e),ew.addId(e,BigInt(t.id)),ew.addIsDelta(e,t.isDelta),ew.addData(e,n),ew.endDictionaryBatch(e)}function Tbt(e,t){return YCe.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function Abt(e,t){return GCe.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const Cbt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),kz="ARROW1",DX=new Uint8Array(kz.length);for(let e=0;e<kz.length;e+=1)DX[e]=kz.codePointAt(e);DX.length;class ls extends An{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof vl?s.data.children:s.data),r=new ls;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof hr)return this.visitMany(t.data),this;const{type:n}=t;if(!Sn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Sn.isUnion(n))this.nodes.push(new J0(r,0));else{const{nullCount:i}=t;Sn.isNull(n)||Mf.call(this,i<=0?new Uint8Array(0):J3(t.offset,r,t.nullBitmap)),this.nodes.push(new J0(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Mf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new Jd(this._byteLength,t)),this._byteLength+=t,this}function Ibt(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(Mf.call(this,i),n.mode===Qu.Sparse)return Rz.call(this,e);if(n.mode===Qu.Dense){if(e.offset<=0)return Mf.call(this,s),Rz.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);Mf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function kbt(e){let t;return e.nullCount>=e.length?Mf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?Mf.call(this,J3(e.offset,e.length,t)):Mf.call(this,oCe(e.values))}function tg(e){return Mf.call(this,e.values.subarray(0,e.length*e.stride))}function JCe(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return Mf.call(this,eAe(-i,t+1,r)),Mf.call(this,n.subarray(i,i+o)),this}function OX(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return Mf.call(this,eAe(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function Rz(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}ls.prototype.visitBool=kbt;ls.prototype.visitInt=tg;ls.prototype.visitFloat=tg;ls.prototype.visitUtf8=JCe;ls.prototype.visitBinary=JCe;ls.prototype.visitFixedSizeBinary=tg;ls.prototype.visitDate=tg;ls.prototype.visitTimestamp=tg;ls.prototype.visitTime=tg;ls.prototype.visitDecimal=tg;ls.prototype.visitList=OX;ls.prototype.visitStruct=Rz;ls.prototype.visitUnion=Ibt;ls.prototype.visitInterval=tg;ls.prototype.visitDuration=tg;ls.prototype.visitFixedSizeList=OX;ls.prototype.visitMap=OX;class ZCe extends xCe{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new z8,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Fy(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return j6(t)?t.then(n=>this.writeAll(n)):B6(t)?FX(this,t):LX(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof z8?this._sink=t:(this._sink=new z8,t&&$yt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Myt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!Az(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Au&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof vl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!Az(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof vl?t instanceof tbt||this._writeRecordBatch(t):t instanceof Au?this.writeAll(t.batches):GK(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=Wd.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===Qs.RecordBatch?this._recordBatchBlocks.push(new X0(a,t.bodyLength,this._position)):t.headerType===Qs.DictionaryBatch&&this._dictionaryBlocks.push(new X0(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Pr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(Wd.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(DX)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=ls.assemble(t),o=new Fl(t.numRows,r,i),a=Wd.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=ls.assemble(new hr([t])),u=new Fl(t.length,s,o),l=new kh(u,n,r),c=Wd.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class $X extends ZCe{static writeAll(t,n){const r=new $X(n);return j6(t)?t.then(i=>r.writeAll(i)):B6(t)?FX(r,t):LX(r,t)}}class MX extends ZCe{static writeAll(t){const n=new MX;return j6(t)?t.then(r=>n.writeAll(r)):B6(t)?FX(n,t):LX(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=Tz.encode(new Tz(t,Ua.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function LX(e,t){let n=t;t instanceof Au&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function FX(e,t){var n,r,i,s,o,a,u;return Dp(this,void 0,void 0,function*(){try{for(n=!0,r=cA(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function Rbt(e,t="stream"){return(t==="stream"?$X:MX).writeAll(e).toUint8Array(!0)}function jX(e,t=1){return(e*t+63&-64||64)/t}function Z0(e,t,n=e.BYTES_PER_ELEMENT){return new e(jX(t,n))}function BX(e){return e instanceof Nr?e:new Nr(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function Nbt(e){return new hr([BX(e)])}const UX=new TextEncoder;function Pbt(e,t,n){const r=UX.encode(n);return e.set(r,t),r.length}function Dbt(e,t,n){return UX.encodeInto(n,e.subarray(t)).written}const Obt=UX.encodeInto?Dbt:Pbt;function Wce(e,t){const n=Z0(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function $bt(e,t){const n=Z0(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function Mbt(e,t){const n=Z0(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Lbt(e,t){const n=Z0(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function Fbt(e){const t=a$({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function jbt(e,t,n){const r=Z0(Int32Array,t+1),i=Z0(Uint8Array,3*n);let s=0;return{set(o,a){s+=Obt(i,s,o),r[a+1]=s},data:()=>{const o=jX(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function Bbt(e,t){const n=[],r=Z0(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:Ubt(e.dictionary,n,o)})}}function Ubt(e,t,n){const r=jbt(e,t.length,n);return t.forEach(r.set),Nbt(r.data())}function zbt(e,t){const n=Z0(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function Vbt(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?Wce:null;break;case re.Float:r=e.precision>0?Wce:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?Bbt:null;break;case re.Bool:r=$bt;break;case re.Date:r=e.unit?Lbt:Mbt;break}return r==null?Fbt(e):n?zbt(r(e,t),t):r(e,t)}function Hbt(e,t){const n=e.length,r=jX(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),BX({type:t,length:n,buffers:[null,i]})}function eIe(e,t,n,r,i=!0){const s=Vbt(r,e,i);return t(n,s.set),BX(s.data())}function zX(e){if(e instanceof Sn||e==null)return e;switch(e){case re.Binary:return new GC;case re.Bool:return new YC;case re.DateDay:return new Qyt;case re.DateMillisecond:case re.Date:return new Jyt;case re.Dictionary:return new Y0(new YE,new W0);case re.Float16:return new EAe;case re.Float32:return new rX;case re.Float64:case re.Float:return new iX;case re.Int8:return new XK;case re.Int16:return new QK;case re.Int32:case re.Int:return new W0;case re.Int64:return new JK;case re.IntervalDayTime:return new rvt;case re.Interval:case re.IntervalYearMonth:return new ivt;case re.Null:return new Am;case re.TimeMicrosecond:return new tvt;case re.TimeMillisecond:case re.Time:return new evt;case re.TimeNanosecond:return new nvt;case re.TimeSecond:return new Zyt;case re.Uint8:return new ZK;case re.Uint16:return new eX;case re.Uint32:return new tX;case re.Uint64:return new nX;case re.Utf8:return new YE;default:xn(`Unsupported type code: ${Sh(e)}. Use a data type constructor instead?`)}}function qbt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function tIe(e,t){const n=Nz();return e(t,n.add),n}function Nz(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if(Tm(t))++e.dates,qbt(t)&&++e.utcdays;else if(o1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=Nz());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=Nz())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return zX(Wbt(e))}};return e}function Wbt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:xn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:xn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Fr.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new JE(e.minlen,n):new QE(n)}else if(e.structs===t){const n=e.struct_prof;return new la(Object.keys(n).map(r=>Fr.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;xn("Type inference failure")}}}}function Gbt(e,t,n,r,i,s=!0){if(i=zX(i),!i){const o=tIe(r,t);s=o.nulls>0,i=o.type()}return eIe(n,r,t,i,s)}function Ybt(e,t,n,r,i,s=!0){i=zX(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=Kbt(o);if(u&&a&&Gce(u.type,i))return u;const l=o.data;if(xk(l)){const c=Xbt(l);if(a&&c&&Gce(c,i))return Hbt(l,c);i=i||c,s=!1}if(!i){const c=tIe(r,o);s=c.nulls>0,i=c.type()}return eIe(n,r,o,i,s)}function Kbt(e){return e instanceof hr?e:e.vector instanceof hr?e.vector:null}function Xbt(e){const n={Float32Array:rX,Float64Array:iX,Int8Array:XK,Int16Array:QK,Int32Array:W0,Uint8Array:ZK,Uint16Array:eX,Uint32Array:tX,BigInt64Array:JK,BigUint64Array:nX}[e.constructor.name];return n?new n:null}function Gce(e,t){return!e||!t?!0:e.compareTo(t)}function Qbt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function Jbt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&o1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const Zbt=()=>xn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function e_t(){try{return Au}catch{Zbt()}}function nIe(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=t_t(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&xn("Column length mismatch"),a[l]=c});const u=e_t();return new u(a)}function t_t(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=pi(n)?n(e):dr(n)?n:null;if(dr(e))return{dataFrom:Gbt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:Qbt(e,r,i)};if(n_t(e))return{dataFrom:Ybt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:Jbt(e,r,i)};xn("Unsupported input data type")}function n_t(e){return e&&pi(e.reify)}function r_t(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return Rbt(nIe(e,r),n)}function i_t(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function s_t(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&Tm(u))++i,i_t(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function K6(e,t){return pi(t)?t(e):t||e.columnNames()}function rIe(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=s_t(o_t(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function o_t(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function VX(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function a_t(e,t={}){const n=K6(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":Tm(l)?L6(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return VX(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function iIe(e,t={}){if(pi(t))return t(e)+"";const n=typeof e;if(n==="object"){if(Tm(e))return t.utc?L6(e):A2e(e);{const r=JSON.stringify(e,(s,o)=>xk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function X6(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function u_t(e,t={}){const n=K6(e,t.columns),{align:r,format:i}=rIe(e,n,t),s=l_t(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(iIe(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return VX(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function l_t(e){return X6(e.style,t=>pi(t)?t:()=>t)}function c_t(e,t=!0,n=!1){return e===void 0||e?t:n}const f_t=e=>Tm(e)?L6(e,!0):e;function d_t(e,t={}){const n=c_t(t.schema),r=t.format||{},i=K6(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||f_t;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function h_t(e,t={}){const n=K6(e,t.columns),{align:r,format:i}=rIe(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return VX(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(iIe(u,i[l]))+"|"}}),a+`
`}function sIe(e,t){for(const[n,r]of F6(t))e.set(n,r);return e}function p_t(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Im(e,t,n=new Map){return t=Za(t)?e.columnName(t):t,jo(t)?n.set(t,t):dr(t)?t.forEach(r=>Im(e,r,n)):pi(t)?Im(e,t(e),n):ba(t)?sIe(n,t):xn(`Invalid column selection: ${Sh(t)}`),n}function Q6(e,t){return e.toObject=t,e}function oIe(e){return dr(e)?e.map(oIe):e&&e.toObject?e.toObject():e}function tx(){return Q6(e=>e.columnNames(),()=>({all:[]}))}function aIe(...e){return e=e.flat(),Q6(t=>{const n=Im(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:oIe(e)}))}function m_t(e,t){return Q6(n=>{let r=Za(e)?e:n.columnIndex(e),i=Za(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function g_t(e){return jo(e)&&(e=RegExp(p_t(e))),Q6(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function y_t(e){return xk(e.data)?e.data.constructor:Array}class Fp extends O0t{static from(t,n){return new Fp(L0t(t,n),n)}static new(t,n){if(t instanceof Fp)return t;const r={},i=[];for(const[s,o]of F6(t))r[s]=o,i.push(s);return new Fp(r,n||i)}constructor(t,n,r,i,s,o){X6(t,M0t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new Fp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:dyt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=Ql(r).groupby(r.groups());return t.forEach(s=>{s=Fp.new(s),s.numRows()!==n&&xn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):xn(`Unrecognized column: ${t}`)}object(t=0){return Yce(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Im(this,t.columns||tx()),o=Q2e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),pyt(this,u,a,n)}return a}*[Symbol.iterator](){const t=Yce(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(y_t(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=hyt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return nIe(this,t)}toArrowBuffer(t){return r_t(this,t)}toCSV(t){return a_t(this,t)}toHTML(t){return u_t(this,t)}toJSON(t){return d_t(this,t)}toMarkdown(t){return h_t(this,t)}}function Yce(e){let t=e._builder;if(!t){const n=Q2e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class v_t{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function er(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=b_t[e.type];s&&s(e,t,n)}const YN=(e,t,n)=>{er(e.argument,t,n,e)},q8=(e,t,n)=>{er(e.left,t,n,e),er(e.right,t,n,e)},Kce=(e,t,n)=>{er(e.test,t,n,e),er(e.consequent,t,n,e),e.alternate&&er(e.alternate,t,n,e)},W8=(e,t,n)=>{Rd(e.params,t,n,e),er(e.body,t,n,e)},Xce=(e,t,n)=>{er(e.callee,t,n,e),Rd(e.arguments,t,n,e)},Rd=(e,t,n,r)=>{e.forEach(i=>er(i,t,n,r))},b_t={TemplateLiteral:(e,t,n)=>{Rd(e.expressions,t,n,e),Rd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{er(e.object,t,n,e),er(e.property,t,n,e)},CallExpression:Xce,NewExpression:Xce,ArrayExpression:(e,t,n)=>{Rd(e.elements,t,n,e)},AssignmentExpression:q8,AwaitExpression:YN,BinaryExpression:q8,LogicalExpression:q8,UnaryExpression:YN,UpdateExpression:YN,ConditionalExpression:Kce,ObjectExpression:(e,t,n)=>{Rd(e.properties,t,n,e)},Property:(e,t,n)=>{er(e.key,t,n,e),er(e.value,t,n,e)},ArrowFunctionExpression:W8,FunctionExpression:W8,FunctionDeclaration:W8,VariableDeclaration:(e,t,n)=>{Rd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{er(e.id,t,n,e),er(e.init,t,n,e)},SpreadElement:(e,t,n)=>{er(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Rd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{er(e.expression,t,n,e)},IfStatement:Kce,ForStatement:(e,t,n)=>{er(e.init,t,n,e),er(e.test,t,n,e),er(e.update,t,n,e),er(e.body,t,n,e)},WhileStatement:(e,t,n)=>{er(e.test,t,n,e),er(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{er(e.body,t,n,e),er(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{er(e.discriminant,t,n,e),Rd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&er(e.test,t,n,e),Rd(e.consequent,t,n,e)},ReturnStatement:YN,Program:(e,t,n)=>{er(e.body[0],t,n,e)}};function uIe(e){delete e.start,delete e.end,delete e.optional}function Qce(e){uIe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function __t(e){return er(e,null,{Column:Qce,Constant:Qce,Default:uIe}),e}function Ps(e,t){return t&&t.type===e}function w_t(e){return Ps(yyt,e)||Ps(gyt,e)}function E_t(e){return pi(e)?e:()=>e}const x_t="Escaped functions are not valid as rollup or pivot values.";function S_t(e,t,n){e.aggronly&&xn(x_t);const r="(row,data)=>fn("+X2e(e.table.columnNames())+",$)";return{escape:qK.escape(r,E_t(t.expr),n)}}var T_t=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],lIe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],A_t="-----------------------------------------------------------------------------------------------------------------------------------------------------",cIe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",G8={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},Y8="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",C_t={5:Y8,"5module":Y8+" export import",6:Y8+" const class extends export import super"},I_t=/^in(stanceof)?$/,k_t=new RegExp("["+cIe+"]"),R_t=new RegExp("["+cIe+A_t+"]");function Pz(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function km(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&k_t.test(String.fromCharCode(e)):t===!1?!1:Pz(e,lIe)}function nx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&R_t.test(String.fromCharCode(e)):t===!1?!1:Pz(e,lIe)||Pz(e,T_t)}var or=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function nc(e,t){return new or(e,{beforeExpr:!0,binop:t})}var rc={beforeExpr:!0},hu={startsExpr:!0},HX={};function Wn(e,t){return t===void 0&&(t={}),t.keyword=e,HX[e]=new or(e,t)}var K={num:new or("num",hu),regexp:new or("regexp",hu),string:new or("string",hu),name:new or("name",hu),privateId:new or("privateId",hu),eof:new or("eof"),bracketL:new or("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new or("]"),braceL:new or("{",{beforeExpr:!0,startsExpr:!0}),braceR:new or("}"),parenL:new or("(",{beforeExpr:!0,startsExpr:!0}),parenR:new or(")"),comma:new or(",",rc),semi:new or(";",rc),colon:new or(":",rc),dot:new or("."),question:new or("?",rc),questionDot:new or("?."),arrow:new or("=>",rc),template:new or("template"),invalidTemplate:new or("invalidTemplate"),ellipsis:new or("...",rc),backQuote:new or("`",hu),dollarBraceL:new or("${",{beforeExpr:!0,startsExpr:!0}),eq:new or("=",{beforeExpr:!0,isAssign:!0}),assign:new or("_=",{beforeExpr:!0,isAssign:!0}),incDec:new or("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new or("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:nc("||",1),logicalAND:nc("&&",2),bitwiseOR:nc("|",3),bitwiseXOR:nc("^",4),bitwiseAND:nc("&",5),equality:nc("==/!=/===/!==",6),relational:nc("</>/<=/>=",7),bitShift:nc("<</>>/>>>",8),plusMin:new or("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:nc("%",10),star:nc("*",10),slash:nc("/",10),starstar:new or("**",{beforeExpr:!0}),coalesce:nc("??",1),_break:Wn("break"),_case:Wn("case",rc),_catch:Wn("catch"),_continue:Wn("continue"),_debugger:Wn("debugger"),_default:Wn("default",rc),_do:Wn("do",{isLoop:!0,beforeExpr:!0}),_else:Wn("else",rc),_finally:Wn("finally"),_for:Wn("for",{isLoop:!0}),_function:Wn("function",hu),_if:Wn("if"),_return:Wn("return",rc),_switch:Wn("switch"),_throw:Wn("throw",rc),_try:Wn("try"),_var:Wn("var"),_const:Wn("const"),_while:Wn("while",{isLoop:!0}),_with:Wn("with"),_new:Wn("new",{beforeExpr:!0,startsExpr:!0}),_this:Wn("this",hu),_super:Wn("super",hu),_class:Wn("class",hu),_extends:Wn("extends",rc),_export:Wn("export"),_import:Wn("import",hu),_null:Wn("null",hu),_true:Wn("true",hu),_false:Wn("false",hu),_in:Wn("in",{beforeExpr:!0,binop:7}),_instanceof:Wn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Wn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Wn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Wn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Wc=/\r\n?|\n|\u2028|\u2029/,N_t=new RegExp(Wc.source,"g");function wS(e){return e===10||e===13||e===8232||e===8233}function fIe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(wS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var dIe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,mc=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,hIe=Object.prototype,P_t=hIe.hasOwnProperty,D_t=hIe.toString,Rk=Object.hasOwn||function(e,t){return P_t.call(e,t)},Jce=Array.isArray||function(e){return D_t.call(e)==="[object Array]"},Zce=Object.create(null);function Qg(e){return Zce[e]||(Zce[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function ey(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var O_t=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,QC=function(t,n){this.line=t,this.column=n};QC.prototype.offset=function(t){return new QC(this.line,this.column+t)};var J6=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function pIe(e,t){for(var n=1,r=0;;){var i=fIe(e,r,t);if(i<0)return new QC(n,t-r);++n,r=i}}var Dz={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},efe=!1;function $_t(e){var t={};for(var n in Dz)t[n]=e&&Rk(e,n)?e[n]:Dz[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!efe&&typeof console=="object"&&console.warn&&(efe=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),Jce(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return Jce(t.onComment)&&(t.onComment=M_t(t,t.onComment)),t}function M_t(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new J6(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var JC=1,ES=2,qX=4,mIe=8,gIe=16,yIe=32,WX=64,vIe=128,Nk=256,GX=JC|ES|Nk;function YX(e,t){return ES|(e?qX:0)|(t?mIe:0)}var f$=0,KX=1,ng=2,bIe=3,_Ie=4,wIe=5,Bs=function(t,n,r){this.options=t=$_t(t),this.sourceFile=t.sourceFile,this.keywords=Qg(C_t[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=G8[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=Qg(i);var s=(i?i+" ":"")+G8.strict;this.reservedWordsStrict=Qg(s),this.reservedWordsStrictBind=Qg(s+" "+G8.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Wc).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(JC),this.regexpState=null,this.privateNameStack=[]},Kh={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Bs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};Kh.inFunction.get=function(){return(this.currentVarScope().flags&ES)>0};Kh.inGenerator.get=function(){return(this.currentVarScope().flags&mIe)>0&&!this.currentVarScope().inClassFieldInit};Kh.inAsync.get=function(){return(this.currentVarScope().flags&qX)>0&&!this.currentVarScope().inClassFieldInit};Kh.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&Nk)return!1;if(t.flags&ES)return(t.flags&qX)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};Kh.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&WX)>0||n||this.options.allowSuperOutsideMethod};Kh.allowDirectSuper.get=function(){return(this.currentThisScope().flags&vIe)>0};Kh.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};Kh.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(ES|Nk))>0||n};Kh.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&Nk)>0};Bs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Bs.parse=function(t,n){return new this(n,t).parse()};Bs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Bs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Bs.prototype,Kh);var ou=Bs.prototype,L_t=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;ou.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){mc.lastIndex=e,e+=mc.exec(this.input)[0].length;var t=L_t.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){mc.lastIndex=e+t[0].length;var n=mc.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||Wc.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,mc.lastIndex=e,e+=mc.exec(this.input)[0].length,this.input[e]===";"&&e++}};ou.eat=function(e){return this.type===e?(this.next(),!0):!1};ou.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};ou.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};ou.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};ou.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||Wc.test(this.input.slice(this.lastTokEnd,this.start))};ou.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};ou.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};ou.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};ou.expect=function(e){this.eat(e)||this.unexpected()};ou.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var Z6=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};ou.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};ou.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};ou.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};ou.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var $t=Bs.prototype;$t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var XX={kind:"loop"},F_t={kind:"switch"};$t.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;mc.lastIndex=this.pos;var t=mc.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(km(r,!0)){for(var i=n+1;nx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!I_t.test(s))return!0}return!1};$t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;mc.lastIndex=this.pos;var e=mc.exec(this.input),t=this.pos+e[0].length,n;return!Wc.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(nx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};$t.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){mc.lastIndex=this.pos;var o=mc.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};$t.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};$t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};$t.parseDoStatement=function(e){return this.next(),this.labels.push(XX),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};$t.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(XX),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new Z6,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};$t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,CA|(n?0:Oz),!1,t)};$t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};$t.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};$t.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(F_t),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};$t.parseThrowStatement=function(e){return this.next(),Wc.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var j_t=[];$t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?yIe:0),this.checkLValPattern(e,t?_Ie:ng),this.expect(K.parenR),e};$t.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};$t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};$t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(XX),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};$t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};$t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};$t.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};$t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};$t.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};$t.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};$t.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};$t.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};$t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?KX:ng,!1)};var CA=1,Oz=2,EIe=4;$t.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&Oz&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&CA&&(e.id=t&EIe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&Oz)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?KX:ng:bIe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(YX(e.async,e.generator)),t&CA||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&CA?"FunctionDeclaration":"FunctionExpression")};$t.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};$t.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&B_t(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};$t.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&d$(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};$t.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};$t.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};$t.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&d$(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};$t.parseClassField=function(e){if(d$(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&d$(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};$t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(Nk|WX);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};$t.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,ng,!1)):(t===!0&&this.unexpected(),e.id=null)};$t.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};$t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};$t.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];Rk(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function B_t(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function d$(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}$t.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};$t.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};$t.parseExportDeclaration=function(e){return this.parseStatement(null)};$t.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,CA|EIe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};$t.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),Rk(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};$t.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};$t.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};$t.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};$t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};$t.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};$t.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=j_t,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};$t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,ng),this.finishNode(e,"ImportSpecifier")};$t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,ng),this.finishNode(e,"ImportDefaultSpecifier")};$t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,ng),this.finishNode(e,"ImportNamespaceSpecifier")};$t.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};$t.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return O_t.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};$t.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};$t.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var Gc=Bs.prototype;Gc.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};Gc.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};Gc.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};Gc.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};Gc.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};Gc.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};Gc.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};Gc.parseBindingListItem=function(e){return e};Gc.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};Gc.checkLValSimple=function(e,t,n){t===void 0&&(t=f$);var r=t!==f$;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===ng&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(Rk(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==wIe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};Gc.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=f$),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};Gc.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=f$),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var nf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},Ti={b_stat:new nf("{",!1),b_expr:new nf("{",!0),b_tmpl:new nf("${",!1),p_stat:new nf("(",!1),p_expr:new nf("(",!0),q_tmpl:new nf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new nf("function",!1),f_expr:new nf("function",!0),f_expr_gen:new nf("function",!0,!1,null,!0),f_gen:new nf("function",!1,!1,null,!0)},xS=Bs.prototype;xS.initialContext=function(){return[Ti.b_stat]};xS.curContext=function(){return this.context[this.context.length-1]};xS.braceIsBlock=function(e){var t=this.curContext();return t===Ti.f_expr||t===Ti.f_stat?!0:e===K.colon&&(t===Ti.b_stat||t===Ti.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?Wc.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===Ti.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};xS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};xS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};xS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===Ti.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?Ti.b_stat:Ti.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(Ti.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?Ti.p_stat:Ti.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==Ti.p_stat)&&!(e===K._return&&Wc.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===Ti.b_stat)?this.context.push(Ti.f_expr):this.context.push(Ti.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===Ti.q_tmpl?this.context.pop():this.context.push(Ti.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===Ti.f_expr?this.context[t]=Ti.f_expr_gen:this.context[t]=Ti.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ln=Bs.prototype;ln.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};ln.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};ln.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new Z6,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};ln.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};ln.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};ln.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};ln.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};ln.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&xIe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function xIe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&xIe(e.expression)}ln.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};ln.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};ln.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};ln.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};ln.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new Z6,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};ln.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(Ti.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(Ti.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};ln.parseExprAtomDefault=function(){this.unexpected()};ln.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};ln.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};ln.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};ln.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};ln.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};ln.shouldParseArrow=function(e){return!this.canInsertSemicolon()};ln.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new Z6,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};ln.parseParenItem=function(e){return e};ln.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var U_t=[];ln.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=U_t,this.finishNode(e,"NewExpression")};ln.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};ln.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};ln.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!Wc.test(this.input.slice(this.lastTokEnd,this.start))};ln.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};ln.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};ln.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};ln.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};ln.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ln.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};ln.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(YX(t,r.generator)|WX|(n?vIe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};ln.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(YX(n,!1)|gIe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};ln.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,wIe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};ln.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};ln.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,KX,t?null:n)}};ln.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};ln.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};ln.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};ln.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};ln.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};ln.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};ln.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var h$=Bs.prototype;h$.raise=function(e,t){var n=pIe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};h$.raiseRecoverable=h$.raise;h$.curPosition=function(){if(this.options.locations)return new QC(this.curLine,this.pos-this.lineStart)};var Uy=Bs.prototype,z_t=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Uy.enterScope=function(e){this.scopeStack.push(new z_t(e))};Uy.exitScope=function(){this.scopeStack.pop()};Uy.treatFunctionsAsVarInScope=function(e){return e.flags&ES||!this.inModule&&e.flags&JC};Uy.declareName=function(e,t,n){var r=!1;if(t===ng){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&JC&&delete this.undefinedExports[e]}else if(t===_Ie){var s=this.currentScope();s.lexical.push(e)}else if(t===bIe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&yIe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&JC&&delete this.undefinedExports[e],u.flags&GX)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};Uy.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};Uy.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};Uy.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&GX)return t}};Uy.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&GX&&!(t.flags&gIe))return t}};var e4=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new J6(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},Pk=Bs.prototype;Pk.startNode=function(){return new e4(this,this.start,this.startLoc)};Pk.startNodeAt=function(e,t){return new e4(this,e,t)};function SIe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}Pk.finishNode=function(e,t){return SIe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};Pk.finishNodeAt=function(e,t,n,r){return SIe.call(this,e,t,n,r)};Pk.copyNode=function(e){var t=new e4(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var TIe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",AIe=TIe+" Extended_Pictographic",CIe=AIe,IIe=CIe+" EBase EComp EMod EPres ExtPict",kIe=IIe,V_t=kIe,H_t={9:TIe,10:AIe,11:CIe,12:IIe,13:kIe,14:V_t},q_t="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",W_t={9:"",10:"",11:"",12:"",13:"",14:q_t},tfe="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",RIe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",NIe=RIe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",PIe=NIe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",DIe=PIe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",OIe=DIe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",G_t=OIe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Y_t={9:RIe,10:NIe,11:PIe,12:DIe,13:OIe,14:G_t},$Ie={};function K_t(e){var t=$Ie[e]={binary:Qg(H_t[e]+" "+tfe),binaryOfStrings:Qg(W_t[e]),nonBinary:{General_Category:Qg(tfe),Script:Qg(Y_t[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var K8=0,nfe=[9,10,11,12,13,14];K8<nfe.length;K8+=1){var X_t=nfe[K8];K_t(X_t)}var At=Bs.prototype,Xh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=$Ie[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};Xh.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};Xh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};Xh.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};Xh.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};Xh.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};Xh.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};Xh.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};Xh.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};Xh.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};At.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};At.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};At.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};At.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};At.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};At.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};At.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};At.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};At.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};At.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};At.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};At.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};At.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};At.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};At.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};At.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};At.regexp_eatSyntaxCharacter=function(e){var t=e.current();return MIe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function MIe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}At.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!MIe(n);)e.advance();return e.pos!==t};At.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};At.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};At.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};At.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=ey(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=ey(e.lastIntValue);return!0}return!1};At.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Q_t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Q_t(e){return km(e,!0)||e===36||e===95}At.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),J_t(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function J_t(e){return nx(e,!0)||e===36||e===95||e===8204||e===8205}At.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};At.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};At.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};At.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};At.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};At.regexp_eatZero=function(e){return e.current()===48&&!t4(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};At.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};At.regexp_eatControlLetter=function(e){var t=e.current();return LIe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function LIe(e){return e>=65&&e<=90||e>=97&&e<=122}At.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&Z_t(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function Z_t(e){return e>=0&&e<=1114111}At.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};At.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var FIe=0,Rm=1,vc=2;At.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(ewt(t))return e.lastIntValue=-1,e.advance(),Rm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===vc&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return FIe};function ewt(e){return e===100||e===68||e===115||e===83||e===119||e===87}At.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Rm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return FIe};At.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){Rk(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};At.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Rm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return vc;e.raise("Invalid property name")};At.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";jIe(t=e.current());)e.lastStringValue+=ey(t),e.advance();return e.lastStringValue!==""};function jIe(e){return LIe(e)||e===95}At.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";twt(t=e.current());)e.lastStringValue+=ey(t),e.advance();return e.lastStringValue!==""};function twt(e){return jIe(e)||t4(e)}At.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};At.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===vc&&e.raise("Negated character class may contain strings"),!0}return!1};At.regexp_classContents=function(e){return e.current()===93?Rm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Rm)};At.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};At.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||zIe(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};At.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};At.regexp_classSetExpression=function(e){var t=Rm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===vc&&(t=vc);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==vc&&(t=Rm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===vc&&(t=vc)}};At.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};At.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Rm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};At.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===vc&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};At.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};At.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===vc&&(t=vc);return t};At.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Rm:vc};At.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&nwt(n)||rwt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function nwt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function rwt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}At.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return iwt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function iwt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}At.regexp_eatClassControlLetter=function(e){var t=e.current();return t4(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};At.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};At.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;t4(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function t4(e){return e>=48&&e<=57}At.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;BIe(n=e.current());)e.lastIntValue=16*e.lastIntValue+UIe(n),e.advance();return e.pos!==t};function BIe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function UIe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}At.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};At.regexp_eatOctalDigit=function(e){var t=e.current();return zIe(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function zIe(e){return e>=48&&e<=55}At.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!BIe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+UIe(i),e.advance()}return!0};var QX=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new J6(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},qn=Bs.prototype;qn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new QX(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};qn.getToken=function(){return this.next(),new QX(this)};typeof Symbol<"u"&&(qn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});qn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};qn.readToken=function(e){return km(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};qn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};qn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=fIe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};qn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!wS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};qn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&dIe.test(String.fromCharCode(e)))++this.pos;else break e}}};qn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};qn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};qn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};qn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};qn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};qn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};qn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||Wc.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};qn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};qn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};qn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};qn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),km(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+ey(t)+"'")};qn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+ey(e)+"'")};qn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};qn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(Wc.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new Xh(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};qn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function swt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function VIe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}qn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=VIe(this.input.slice(t,this.pos)),++this.pos):km(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};qn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=VIe(this.input.slice(t,this.pos));return++this.pos,km(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),km(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=swt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};qn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};qn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(wS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var HIe={};qn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===HIe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};qn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw HIe;this.raise(e,t)};qn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(wS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};qn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};qn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return ey(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return wS(t)?"":String.fromCharCode(t)}};qn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};qn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(nx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?km:nx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=ey(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};qn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=HX[e]),this.finishToken(t,e)};var owt="8.11.3";Bs.acorn={Parser:Bs,version:owt,defaultOptions:Dz,Position:QC,SourceLocation:J6,getLineInfo:pIe,Node:e4,TokenType:or,tokTypes:K,keywordTypes:HX,TokContext:nf,tokContexts:Ti,isIdentifierChar:nx,isIdentifierStart:km,Token:QX,isNewLine:wS,lineBreak:Wc,lineBreakG:N_t,nonASCIIwhitespace:dIe};function awt(e,t){return Bs.parse(e,t)}const JX={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},uwt={ecmaVersion:11},rfe="$",lwt="d",cwt="d1",fwt="d2",xo=e=>(t,n)=>n.error(t,e+" not allowed"),dwt=xo("Aggregate function"),hwt=xo("Window function"),pwt="Invalid argument",ZX="Invalid column reference",mwt=ZX+" (must be input to an aggregate function)",qIe="Invalid function call",gwt="Invalid member expression",ywt="Invalid operator parameter",vwt="Invalid param reference",bwt="Invalid variable reference",_wt="Variable not accessible in operator call",wwt="Unsupported variable declaration",Ewt="Unsupported destructuring pattern",WIe="Table expressions do not support closures",GIe="Use aq.escape(fn) to use a function as-is (including closures)",xwt="use table.params({ name: value }) to define dynamic parameters",Swt="use aq.addFunction(name, fn) to add new op functions",Twt=`
Note: ${WIe}. ${GIe}, or ${xwt}.`,YIe=`
Note: ${WIe}. ${GIe}, or ${Swt}.`,Awt=`The ${Y2e} method is not valid in multi-table expressions.`;function Cwt(e,t){const n=Iwt(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,w_t(r)?(Rwt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=cwt),e.scope.add(e.tuple2=fwt),e.scope.add(e.$param=rfe)):(e.scope.add(e.tuple=lwt),e.scope.add(e.$param=rfe)),er(r,e,eQ),e.root}function Iwt(e){try{const t=e.field?kwt(e):dr(e)?Sh(e):e;return awt(`expr=(${t})`,uwt).body[0].expression.right}catch{xn(`Expression parse error: ${e+""}`)}}function kwt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const eQ={FunctionDeclaration:xo("Function definitions"),ForStatement:xo("For loops"),ForOfStatement:xo("For-of loops"),ForInStatement:xo("For-in loops"),WhileStatement:xo("While loops"),DoWhileStatement:xo("Do-while loops"),AwaitExpression:xo("Await expressions"),ArrowFunctionExpression:xo("Function definitions"),AssignmentExpression:xo("Assignments"),FunctionExpression:xo("Function definitions"),NewExpression:xo('Use of "new"'),UpdateExpression:xo("Update expressions"),VariableDeclarator(e,t){Lz(e.id,t)},Identifier(e,t,n){QIe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,bwt,Twt)},CallExpression(e,t){const n=KIe(e.callee),r=q2e(n)||W2e(n);if(r){if((t.join||t.aggregate===!1)&&VK(n)&&dwt(e,t),(t.join||t.window===!1)&&HK(n)&&hwt(e,t),t.$op=1,t.ast)Mz(e,n,t),e.arguments.forEach(i=>er(i,t,$z));else{const i=t.op(Nwt(t,r,n,e.arguments));Object.assign(e,{type:B2e,name:i.id})}return t.$op=0,!1}else H2e(n)?Mz(e,n,t):t.error(e,qIe,YIe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!Ps(E0,r))return;const{name:s}=r;if(XIe(e)&&Ps(E0,i)&&qf(JX,i.name)){eke(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return ife(e,o,t,JIe,n);if(s===t.$param)return ife(e,o,t,Dwt);t.paramsRef.has(s)?ZC(e,t.paramsRef.get(s)):t.columnRef.has(s)?ZIe(r,s,t,e):qf(t.params,s)&&ZC(r,s)}};function ife(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if(Ps(gS,s))a=s.value;else try{er(s,n,eQ,e),a=n.param(s)}catch{n.error(e,gwt)}return r(e,a,t,n,i),!1}const $z={...eQ,VariableDeclarator:xo("Variable declaration in operator call"),Identifier(e,t,n){QIe(e,t,n)&&t.error(e,_wt)},CallExpression(e,t){const n=KIe(e.callee);H2e(n)?Mz(e,n,t):t.error(e,qIe,YIe)}};function Rwt(e,t){e.generator&&xo("Generator functions")(e,t),e.async&&xo("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(OT(t,n[0],"tuple1",i(1)),r>1&&OT(t,n[1],"tuple2",i(2)),r>2&&OT(t,n[2],"$param",s)):(OT(t,n[0],"tuple",i(0)),r>1&&OT(t,n[1],"$param",s))),t.root=e.body}function OT(e,t,n,r){Ps(E0,t)?(e.scope.add(t.name),e[n]=t.name):Ps(F2e,t)&&t.properties.forEach(i=>{const s=Ps(E0,i.key)?i.key.name:Ps(gS,i.key)?i.key.value:e.error(i,pwt);Ps(E0,i.value)||e.error(i.value,Ewt),r(i.value.name,s)})}function Nwt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(er(u,e,$z),i.push(e.field(u))):l<a?(er(u,e,$z),s.push(e.param(u))):e.error(u,ywt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function KIe(e){return Ps(E0,e)?e.name:Ps(L2e,e)?XIe(e)?Pwt(e.property.name):e.property.name:null}function XIe(e){return Ps(E0,e.object)&&e.object.name==="Math"}function Pwt(e){return e==="max"?"greatest":e==="min"?"least":e}function QIe(e,t,n){const{name:r}=e;if(!(Ps(L2e,n)&&n.property===e)){if(!(Ps(j2e,n)&&n.key===e))if(t.paramsRef.has(r))ZC(e,t.paramsRef.get(r));else if(t.columnRef.has(r))ZIe(e,r,t,n);else if(qf(t.params,r))ZC(e,r);else if(qf(JX,r))eke(e,r);else return!0}}function JIe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,ZX),r.aggronly&&!r.$op&&r.error(e,mwt),G2e(e,t,n,o,i)}function ZIe(e,t,n,r){const[i,s]=n.columnRef.get(t);JIe(e,i,s,n,r)}function Dwt(e,t,n,r){r.params&&!qf(r.params,t)&&r.error(e,vwt),ZC(e,t)}function ZC(e,t){e.type=Eyt,e.name=t}function eke(e,t){e.type=byt,e.name=t,e.raw=JX[t]}function Mz(e,t,n){if(t===Y2e){const r=n.table;r||n.error(e,Awt),K2e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=Za(s)?r.columnName(s):s;return r.column(o)||n.error(i,ZX),o}):r.columnNames())}else e.callee={type:wyt,name:t}}function Lz(e,t){Ps(E0,e)?t.scope.add(e.name):Ps(myt,e)?e.elements.forEach(n=>Lz(n,t)):Ps(F2e,e)?e.properties.forEach(n=>Lz(n.value,t)):t.error(e.id,wwt)}const Owt={[Sk]:1,[B2e]:1};function Zu(e,t={}){const n=t.generate||q3,r=t.compiler||qK,i=Mwt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=$wt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return Ps(gS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?__t(g):f(n(g),i));u.push(y),Owt[g.type]&&y!==g&&ba(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);xn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of F6(e))d.value(m+"",g.escape?S_t(d,g,i):Cwt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function $wt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function Mwt(e){return(e.table?X8(e.table):e.join?{...X8(e.join[1]),...X8(e.join[0])}:{})||{}}function X8(e){return e&&pi(e.params)?e.params():{}}const tke="Expr",rf="ExprList",nke="ExprNumber",R2="ExprObject",Sw="JoinKeys",p$="JoinValues",uc="Options",tQ="OrderKeys",Eg="SelectionList",Uv="TableRef",Tw="TableRefList",Lwt="Descending",Fwt="Query",jwt="Selection",Bwt="Verb",Uwt="Window";function n4(e,t){return e&&e.expr?new sfe({...e,...t}):new sfe(t,e)}class sfe{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...pi(this.expr)?{func:!0}:{}}}}function zwt(e){return n4(e,{desc:!0})}function K1(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return n4(e,t?{expr:t,...r}:r)}function Vwt(e,t,n){return n4(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function Hwt(e){const t=n=>n;return t.toString=()=>e,t}function ofe(e,t){return t=t&&pi(t.query)?t.query():t,t&&pi(t.evaluate)?t.evaluate(null,e):e(t)}function rke(e){return ba(e)&&(dr(e.all)||dr(e.matches)||dr(e.not)||dr(e.range))}function eI(e){return e&&pi(e.toObject)?e.toObject():pi(e)?{expr:String(e),func:!0}:dr(e)?e.map(eI):ba(e)?X6(e,t=>eI(t)):e}function nQ(e){return dr(e)?e.map(nQ):ba(e)?dr(e.verbs)?iQ.from(e):dr(e.all)?tx():dr(e.range)?m_t(...e.range):dr(e.match)?g_t(RegExp(...e.match)):dr(e.not)?aIe(e.not.map(eI)):qwt(e):e}function qwt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=K1(n):e.func===!0&&(t=n=Hwt(n)),ba(e.window)){const{frame:r,peers:i}=e.window;t=n=Vwt(n,r,i)}e.desc===!0&&(t=zwt(n))}return e===t?X6(e,r=>nQ(r)):t}function Wwt(e){return dr(e)?e.map(Gwt):e}function Gwt(e){const t=[];return Xu(e).forEach(n=>{Za(n)?t.push(n):jo(n)?t.push(K1(n,null)):ba(n)&&n.expr||pi(n)?t.push(n):xn(`Invalid key value: ${n+""}`)}),t}function Ywt(e){return dr(e)?e.map(Kwt):e}function Kwt(e,t){return t<2?Xu(e):e}function Xwt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(ba(r)&&!pi(r))for(const i in r)t.push(r[i]);else n=Za(r)?r:jo(r)?K1(n):pi(r)?n:xn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const Qwt={[tke]:ake,[rf]:rx,[nke]:rEt,[R2]:ty,[Sw]:iEt,[p$]:sEt,[tQ]:rx,[Eg]:tEt};function Jwt(e,t,n){return t===Uv?afe(e):t===Tw?e.map(afe):ike(eI(e),t,n)}function ike(e,t,n){return t===uc?e&&Zwt(e,n):Qwt[t](e)}function Zwt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?ike(i,t[r]):i}return n}function eEt(e,t){return Zu({expr:e},{...t,ast:!0}).exprs[0]}function rQ(e){return{type:Sk,name:e}}function ske(e){return{type:Sk,index:e}}function ty(e,t){if(jo(e))return eEt(e,t);if(e.expr){let n;if(e.field===!0?n=rQ(e.expr):e.func===!0&&(n=ty(e.expr,t)),n)return e.desc&&(n={type:Lwt,expr:n}),e.window&&(n={type:Uwt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...ty(e[n],t),as:n}))}function oke(e){const t=jwt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:rx(e.not)}:e.range?{type:t,operator:"range",arguments:rx(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:xn("Invalid input")}function tEt(e){return Xu(e).map(nEt).flat()}function nEt(e){return rke(e)?oke(e):Za(e)?ske(e):jo(e)?rQ(e):ba(e)?Object.keys(e).map(t=>({type:Sk,name:t,as:e[t]})):xn("Invalid input")}function ake(e){return rke(e)?oke(e):Za(e)?ske(e):jo(e)?rQ(e):ba(e)?ty(e):xn("Invalid input")}function rx(e){return Xu(e).map(ake).flat()}function rEt(e){return Za(e)?e:ty(e)}function iEt(e){return dr(e)?e.map(rx):ty(e,{join:!0})}function sEt(e){return dr(e)?e.map((t,n)=>n<2?rx(t):ty(t,{join:!0})):ty(e,{join:!0})}function afe(e){return e&&pi(e.toAST)?e.toAST():e}class uke{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Sw?Wwt(a):o===p$?Ywt(a):o===tQ?Xwt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=Fz[t.verb],r=(n.schema||[]).map(({name:i})=>nQ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===Uv?ofe(n,o):s===Tw?o.map(a=>ofe(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=eI(this[n])}),t}toAST(){const t={type:Bwt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=Jwt(this[n],r,i)}),t}}function Lr(e,t){return Object.assign((...n)=>new uke(e,t,n),{schema:t})}const Fz={count:Lr("count",[{name:"options",type:uc}]),derive:Lr("derive",[{name:"values",type:R2},{name:"options",type:uc,props:{before:Eg,after:Eg}}]),filter:Lr("filter",[{name:"criteria",type:R2}]),groupby:Lr("groupby",[{name:"keys",type:rf}]),orderby:Lr("orderby",[{name:"keys",type:tQ}]),relocate:Lr("relocate",[{name:"columns",type:Eg},{name:"options",type:uc,props:{before:Eg,after:Eg}}]),rename:Lr("rename",[{name:"columns",type:Eg}]),rollup:Lr("rollup",[{name:"values",type:R2}]),sample:Lr("sample",[{name:"size",type:nke},{name:"options",type:uc,props:{weight:tke}}]),select:Lr("select",[{name:"columns",type:Eg}]),ungroup:Lr("ungroup"),unorder:Lr("unorder"),reify:Lr("reify"),dedupe:Lr("dedupe",[{name:"keys",type:rf,default:[]}]),impute:Lr("impute",[{name:"values",type:R2},{name:"options",type:uc,props:{expand:rf}}]),fold:Lr("fold",[{name:"values",type:rf},{name:"options",type:uc}]),pivot:Lr("pivot",[{name:"keys",type:rf},{name:"values",type:rf},{name:"options",type:uc}]),spread:Lr("spread",[{name:"values",type:rf},{name:"options",type:uc}]),unroll:Lr("unroll",[{name:"values",type:rf},{name:"options",type:uc,props:{drop:rf}}]),lookup:Lr("lookup",[{name:"table",type:Uv},{name:"on",type:Sw},{name:"values",type:rf}]),join:Lr("join",[{name:"table",type:Uv},{name:"on",type:Sw},{name:"values",type:p$},{name:"options",type:uc}]),cross:Lr("cross",[{name:"table",type:Uv},{name:"values",type:p$},{name:"options",type:uc}]),semijoin:Lr("semijoin",[{name:"table",type:Uv},{name:"on",type:Sw}]),antijoin:Lr("antijoin",[{name:"table",type:Uv},{name:"on",type:Sw}]),concat:Lr("concat",[{name:"tables",type:Tw}]),union:Lr("union",[{name:"tables",type:Tw}]),intersect:Lr("intersect",[{name:"tables",type:Tw}]),except:Lr("except",[{name:"tables",type:Tw}])};let iQ=class lke extends S2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new lke(t.map(uke.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return ufe(this,"toObject")}toJSON(){return this.toObject()}toAST(){return ufe(this,"toAST",{type:Fwt})}};function ufe(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function oEt(e,t){return new iQ(e._verbs.concat(t),e._params,e._table)}for(const e in Fz){const t=Fz[e];iQ.prototype["__"+e]=function(n,...r){return oEt(n,t(...r))}}function SS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function aEt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function sQ(e,t){const n=Ql();return t.forEach((r,i)=>{const s=jo(r)?r:i;if(s){const o=e.column(i)||xn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function cke(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||xn("relocate requires a before or after option."),i&&s&&xn("relocate accepts only one of the before or after options."),t=Im(e,t);const o=[...Im(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),sQ(e,u)}function Dk(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function oQ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function uEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function lEt(e,t=0,n=e.length){let r=n?e[t++]:ar;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function KN(e){return HC(e)?e:+e}function cEt(e,t){const n=e.length;if(!n)return ar;if((t=+t)<=0||n<2)return KN(e[0]);if(t>=1)return KN(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=KN(e[i]);return HC(s)?s:s+(KN(e[i+1])-s)*(r-i)}class fEt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:uEt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:lEt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(oQ)),cEt(this._sorted,t)}}const m$=(e,t,n)=>SS(t,"{"+Dk(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function dEt(e,t){const{ops:n,output:r}=hEt(e,t),i=e[0].fields,s=i.length,o=s===0?aQ:s===1?pEt:s===2?mEt:xn("Unsupported field count: "+s);return new o(i,n,r,t)}function hEt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=q2e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class aQ extends v_t{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new fEt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class pEt extends aQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=m$(n,s,"add"),this._rem=m$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,If(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,If(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class mEt extends aQ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=m$(n,s,"add"),this._rem=m$(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,If(i)&&If(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,If(i)&&If(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function Wb(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=TS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function TS(e,t,n){if(!t.length)return n;const r=fke(t),i=e.groups(),s=i?i.size:1;return n=n||M6(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=hke(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=dke(e,o);o.write(a,n,0)}),n}function fke(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(dEt(r[i],t));return n}function dke(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function hke(e,t,n){const{keys:r,size:i}=n,s=M6(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function pke(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function mke(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const lfe=mke(oQ);function gEt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?SS(["w","r","k"],"{"+Dk(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=lfe.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=lfe.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const T=i[E],S=a[E];for(let A=b;A<p.i0;++A)T.rem(S,s[A],e);for(let A=w;A<p.i1;++A)T.add(S,s[A],e);T.write(S,u,l)}return h(p,u,l),u}};return p}const yEt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),vEt=e=>!!e.peers;function bEt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=W2e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function _Et(e,t,n,r={},i){const s=e.data(),o=wEt(i,s),a=o.length,u=SS(["r","d","op"],"{"+Dk(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=EEt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function wEt(e,t){const n={};return e.forEach(r=>{const i=yEt(r),s=vEt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});VK(r.name)?a.push(r):u.push(bEt(r))}),Object.values(n).map(r=>gEt(t,r.frame,r.peers,r.winOps,fke(r.aggOps,r.frame[0]!=null?-1:1)))}function EEt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function xEt(e){return HK(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function uQ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=Ql(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=SEt(r),c=e.isGrouped()?e.groups().size:1,f=TS(e,u,M6(r.length,()=>Array(c)));return l.length?_Et(e,a,n,f,l):TEt(e,a,n,f),e.create(o)}function SEt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(xEt(s)?n:t).push(s)}return[t,n]}function TEt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function AEt(e,t,n={}){const r=uQ(e,Zu(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:cke(r,Object.keys(t).filter(i=>!e.column(i)),n)}function CEt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const XN=2147483648,IEt=4294967295;class gke{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&XN>>>t}set(t){this._bits[t>>5]|=XN>>>t}clear(t){this._bits[t>>5]&=~(XN>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&IEt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=XN>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function kEt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new gke(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function REt(e,t){const n=Zu({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=uQ(e,n,{drop:!0}).column("p");r=s=>i[s]}return kEt(e,r)}function yke(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=Wb(e,r,n),l=Ql(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let T=0;T<g;++T)d[T].length=m+E,d[T].fill(f[T].get(w),m,m+E)},b=p?(w,E)=>{for(let T=0;T<E;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((T,S)=>{const A=Xu(w(T,S)),C=Math.min(A.length,s);v(T,C);for(let k=0;k<C;++k)E[m+k]=A[k];b(m,C),m+=C})}else e.scan((w,E)=>{let T=0;const S=u.map(A=>{const C=Xu(A(w,E));return T=Math.min(Math.max(T,C.length),s),C});v(w,T);for(let A=0;A<y;++A){const C=h[A],k=S[A];for(let N=0;N<T;++N)C[m+N]=k[N]}b(m,T),m+=T});return e.create(l.new())}function NEt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=Wb(e,r,n);return yke(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function Gf(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=Za(o)?t.columnName(o):o,jo(o)?i.set(o,K1(o)):pi(o)?Im(t,o).forEach(s):ba(o)?sIe(i,o):xn(`Invalid ${e} value: ${o+""}`)};return Xu(n).forEach(s),r.preparse&&r.preparse(i),Zu(i,{table:t,...r})}function PEt(e,t,n){return NEt(e,Gf("fold",e,t),n)}function cfe(e,t,n,r){const i=n&&n.length;return DEt(i?OEt(e,n,r):e,t,i)}function DEt(e,{names:t,exprs:n,ops:r},i){const s=Wb(e,r,n),o=i?null:Ql(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=If(p)?p:d(h)})}),i?e:e.create(o)}function OEt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=W3(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=Ql(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=W3(o.map((p,m)=>g=>g[m])),h=SS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),ffe(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else ffe(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function ffe(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function lQ(e,{names:t,exprs:n,ops:r}){const i=Ql(),s=e.groups();return s&&pke(i,s),$Et(t,n,s,TS(e,r),i),e.create(i.new())}function $Et(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function MEt(e,t,n={}){if(t=Zu(t,{table:e}),t.names.forEach(r=>e.column(r)?0:xn(`Invalid impute column ${Sh(r)}`)),n.expand){const r={preparse:LEt,aggronly:!0},i=Gf("impute",e,n.expand,r),s=lQ(e.ungroup(),i);return cfe(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return cfe(e,t)}function LEt(e){e.forEach((t,n)=>t.field?e.set(n,D2e(t+"")):0)}function FEt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function vke(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function jEt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function BEt(e,t){const n=["i","a","j","b"];return SS(n,"{"+Dk(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function UEt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=Ql(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=BEt(g,y);if((dr(n)?VEt:zEt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function zEt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function VEt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(T,S,A,C)=>e(A,C,T,S));const w=jEt(v,m,g),E=p.length;for(let T=0;T<E;++T){const S=p[T],A=w.get(d(S,f));if(A){const C=A.length;for(let k=0;k<C;++k){const N=A[k];b(S,f,v[N],m),y[N]=1}h[T]=1}}}function g$(e,t,n){const r=new Map;Xu(n).forEach((s,o)=>{s=Za(s)?t.columnName(s):s,jo(s)?r.set(o,K1(s)):pi(s)||ba(s)&&s.expr?r.set(o,s):xn(`Invalid ${e} key value: ${s+""}`)});const i=Zu(r,{table:t,aggregate:!1,window:!1});return W3(i.exprs,!0)}function HEt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function cQ(e,t,n){if(n)jo(n)?n=[n,n]:dr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=HEt(e.columnNames(),t.columnNames());r.length||xn("Natural join requires shared column names."),n=[r,r]}return n}function bke(e,t,n,r){return n.length!==r.length&&xn("Mismatched number of join keys"),[g$("join",e,n),g$("join",t,r)]}const qEt={aggregate:!1,window:!1},WEt={...qEt,index:1};function dfe(e,t,n,r,i={}){n=cQ(e,t,n);const s={join:[e,t]};let o;if(dr(n)){const[a,u]=n.map(Xu);o=bke(e,t,a,u),r||(r=GEt(e,a,u,i))}else o=Zu({on:n},s).exprs[0],r||(r=[tx(),tx()]);return UEt(e,t,o,YEt(e,t,r,s,i&&i.suffix),i)}function GEt(e,t,n,r){const i=[];t.forEach((o,a)=>jo(o)&&o===n[a]?i.push(o):0);const s=aIe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Sh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,tx()]:[tx(),s]}function YEt(e,t,n,r,i=[]){if(dr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=Gf("join",e,n[0],r)),u--&&(o=Gf("join",t,n[1],WEt)),u--&&(a=Zu(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&hfe(s.names,l,i[0]||"_1"),i[1]!==""&&hfe(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return Zu(n,r)}function hfe(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function KEt(e,t,n,r={}){const i=new gke(e.totalRows());return(dr(n)?XEt:QEt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function XEt(e,t,n,[r,i]){const s=vke(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function QEt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function pfe(e,t,n,r){n=cQ(e,t,n);const i=dr(n)?bke(e,t,...n.map(Xu)):Zu({on:n},{join:[e,t]}).exprs[0];return KEt(e,t,i,r)}function JEt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=Ql(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(ar)));const l=vke(t,r),c=SS(["lr","rr","data"],"{"+Dk(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),Wb(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function ZEt(e,t,n,r){return n=cQ(e,t,n),JEt(e,t,[g$("lookup",e,n[0]),g$("lookup",t,n[1])],Gf("lookup",t,r))}const jz=(e,t)=>e??t;function ext(e,t,n,r={}){const{keys:i,keyColumn:s}=txt(e,t,r),o=jz(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>TS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(nxt(n,a,e.groups(),u))}function txt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=jz(n.sort,!0),s=jz(n.keySeparator,"_"),o=Wb(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=TS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function nxt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=Ql(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&pke(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function rxt(e,t,n,r){return ext(e,Gf("fold",e,t),Gf("fold",e,n,{preparse:ixt,aggronly:!0}),r)}function ixt(e){e.forEach((t,n)=>t.field?e.set(n,R2e(t+"")):0)}function sxt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),sQ(e,Im(e,t,n))}function mfe(e,t){return lQ(e,Zu(t,{table:e,aggronly:!0,window:!1}))}function oxt(e,t,n,r){return(t?r?uxt:axt:r?cxt:lxt)(e.length,e,n,r)}function axt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*mS()|0];return t}function uxt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=mke(oQ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*mS())];return t}function lxt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*mS();s<e&&(t[s|0]=n[i])}return t}function cxt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(mS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function fxt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=mS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function dxt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):oxt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&fxt(u),e.reify(u)}function hxt(e,t,n={}){return dxt(e,pxt(e,t),mxt(e,n.weight),n)}const _ke=e=>t=>e.get(t)||0;function pxt(e,t){return Za(t)?()=>t:_ke(lQ(e,Zu({size:t},{table:e,window:!1})).column("size"))}function mxt(e,t){return t==null?null:(t=Za(t)?e.columnName(t):t,_ke(jo(t)?e.column(t):uQ(e,Zu({w:t},{table:e}),{drop:!0}).column("w")))}function gxt(e,t){return sQ(e,Im(e,t))}function yxt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=Wb(e,r,n),l=Ql(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=vxt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function vxt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=Xu(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(ar));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function bxt(e,t,n){return yxt(e,Gf("spread",e,t),n)}function _xt(e,t){return e.concat(t).dedupe()}function wxt(e,t,n){return yke(e,Gf("unroll",e,t),n&&n.drop?{...n,drop:Gf("unroll",e,n.drop).names}:n)}function Ext(e,t){return e.create({groups:xxt(e,t)})}function xxt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=Wb(e,r,n);const o=W3(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function Sxt(e,t){return Ext(e,Gf("groupby",e,t))}function Txt(e,t){return e.create({order:t})}const Axt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function Cxt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=Zu(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([q3(p,{index:"a",op:o}),q3(p,{index:"b",op:a})])},window:!1}),l=TS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=Axt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function Ixt(e,t){return Txt(e,kxt(e,t))}function kxt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(ba(o)&&!pi(o))for(const a in o)i(o[a]);else i(Za(o)?K1(s,e.columnName(o)):jo(o)?K1(s):pi(o)?s:xn(`Invalid orderby field: ${s+""}`))}),Cxt(e,r)}function Rxt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=Ql();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>ar};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function Nxt(e,t){const n=Ql(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?hke(e,t,r):[dke(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function Pxt(e){return e.isGrouped()?e.create({groups:null}):e}function Dxt(e){return e.isOrdered()?e.create({order:null}):e}const Oxt={__antijoin:(e,t,n)=>pfe(e,t,n,{anti:!0}),__count:(e,t={})=>mfe(e,{[t.as||"count"]:N2e()}),__cross:(e,t,n,r)=>dfe(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:Rxt,__dedupe:aEt,__derive:AEt,__except:CEt,__filter:REt,__fold:PEt,__impute:MEt,__intersect:FEt,__join:dfe,__lookup:ZEt,__pivot:rxt,__relocate:cke,__rename:sxt,__rollup:mfe,__sample:hxt,__select:gxt,__semijoin:pfe,__spread:bxt,__union:_xt,__unroll:wxt,__groupby:Sxt,__orderby:Ixt,__ungroup:Pxt,__unorder:Dxt,__reduce:Nxt};Object.assign(Fp.prototype,Oxt);function $xt(e,t){return Fp.from(e,t)}function Q8(e){return n4(e,{escape:!0,toString(){xn("Escaped values can not be serialized.")}})}Fp.prototype;function Ef(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function ny(e){return!!e&&!!e[bi]}function Nm(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===Hxt}(e)||Array.isArray(e)||!!e[Efe]||!!(!((t=e.constructor)===null||t===void 0)&&t[Efe])||fQ(e)||dQ(e))}function X1(e,t,n){n===void 0&&(n=!1),AS(e)===0?(n?Object.keys:tE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function AS(e){var t=e[bi];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:fQ(e)?2:dQ(e)?3:0}function eE(e,t){return AS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Mxt(e,t){return AS(e)===2?e.get(t):e[t]}function wke(e,t,n){var r=AS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function Eke(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function fQ(e){return zxt&&e instanceof Map}function dQ(e){return Vxt&&e instanceof Set}function Nv(e){return e.o||e.t}function hQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=Ske(e);delete t[bi];for(var n=tE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function pQ(e,t){return t===void 0&&(t=!1),mQ(e)||ny(e)||!Nm(e)||(AS(e)>1&&(e.set=e.add=e.clear=e.delete=Lxt),Object.freeze(e),t&&X1(e,function(n,r){return pQ(r,!0)},!0)),e}function Lxt(){Ef(2)}function mQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function uh(e){var t=Vz[e];return t||Ef(18,e),t}function Fxt(e,t){Vz[e]||(Vz[e]=t)}function Bz(){return tI}function J8(e,t){t&&(uh("Patches"),e.u=[],e.s=[],e.v=t)}function y$(e){Uz(e),e.p.forEach(jxt),e.p=null}function Uz(e){e===tI&&(tI=e.l)}function gfe(e){return tI={p:[],l:tI,h:e,m:!0,_:0}}function jxt(e){var t=e[bi];t.i===0||t.i===1?t.j():t.g=!0}function Z8(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||uh("ES5").S(t,e,r),r?(n[bi].P&&(y$(t),Ef(4)),Nm(e)&&(e=v$(t,e),t.l||b$(t,e)),t.u&&uh("Patches").M(n[bi].t,e,t.u,t.s)):e=v$(t,n,[]),y$(t),t.u&&t.v(t.u,t.s),e!==xke?e:void 0}function v$(e,t,n){if(mQ(t))return t;var r=t[bi];if(!r)return X1(t,function(a,u){return yfe(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return b$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=hQ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),X1(s,function(a,u){return yfe(e,r,i,a,u,n,o)}),b$(e,i,!1),n&&e.u&&uh("Patches").N(r,n,e.u,e.s)}return r.o}function yfe(e,t,n,r,i,s,o){if(ny(i)){var a=v$(e,i,s&&t&&t.i!==3&&!eE(t.R,r)?s.concat(r):void 0);if(wke(n,r,a),!ny(a))return;e.m=!1}else o&&n.add(i);if(Nm(i)&&!mQ(i)){if(!e.h.D&&e._<1)return;v$(e,i),t&&t.A.l||b$(e,i)}}function b$(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&pQ(t,n)}function e9(e,t){var n=e[bi];return(n?Nv(n):e)[t]}function vfe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Bg(e){e.P||(e.P=!0,e.l&&Bg(e.l))}function t9(e){e.o||(e.o=hQ(e.t))}function zz(e,t,n){var r=fQ(t)?uh("MapSet").F(t,n):dQ(t)?uh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:Bz(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=nI;o&&(u=[a],l=N2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):uh("ES5").J(t,n);return(n?n.A:Bz()).p.push(r),r}function Bxt(e){return ny(e)||Ef(22,e),function t(n){if(!Nm(n))return n;var r,i=n[bi],s=AS(n);if(i){if(!i.P&&(i.i<4||!uh("ES5").K(i)))return i.t;i.I=!0,r=bfe(n,s),i.I=!1}else r=bfe(n,s);return X1(r,function(o,a){i&&Mxt(i.t,o)===a||wke(r,o,t(a))}),s===3?new Set(r):r}(e)}function bfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return hQ(e)}function Uxt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[bi];return nI.get(u,s)},set:function(u){var l=this[bi];nI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][bi];if(!a.P)switch(a.i){case 5:r(a)&&Bg(a);break;case 4:n(a)&&Bg(a)}}}function n(s){for(var o=s.t,a=s.k,u=tE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==bi){var f=o[c];if(f===void 0&&!eE(o,c))return!0;var d=a[c],h=d&&d[bi];if(h?h.t!==f:!Eke(d,f))return!0}}var p=!!o[bi];return u.length!==tE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};Fxt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=Ske(f);delete p[bi];for(var m=tE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:Bz(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,bi,{value:l,writable:!0}),u},S:function(s,o,a){a?ny(o)&&o[bi].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[bi];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)X1(d,function(b){b!==bi&&(f[b]!==void 0||eE(f,b)?h[b]||u(d[b]):(h[b]=!0,Bg(c)))}),X1(f,function(b){d[b]!==void 0||eE(d,b)||(h[b]=!1,Bg(c))});else if(p===5){if(r(c)&&(Bg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var _fe,tI,gQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",zxt=typeof Map<"u",Vxt=typeof Set<"u",wfe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",xke=gQ?Symbol.for("immer-nothing"):((_fe={})["immer-nothing"]=!0,_fe),Efe=gQ?Symbol.for("immer-draftable"):"__$immer_draftable",bi=gQ?Symbol.for("immer-state"):"__$immer_state",Hxt=""+Object.prototype.constructor,tE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,Ske=Object.getOwnPropertyDescriptors||function(e){var t={};return tE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Vz={},nI={get:function(e,t){if(t===bi)return e;var n=Nv(e);if(!eE(n,t))return function(i,s,o){var a,u=vfe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Nm(r)?r:r===e9(e.t,t)?(t9(e),e.o[t]=zz(e.A.h,r,e)):r},has:function(e,t){return t in Nv(e)},ownKeys:function(e){return Reflect.ownKeys(Nv(e))},set:function(e,t,n){var r=vfe(Nv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=e9(Nv(e),t),s=i==null?void 0:i[bi];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(Eke(n,i)&&(n!==void 0||eE(e.t,t)))return!0;t9(e),Bg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return e9(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,t9(e),Bg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Nv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ef(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ef(12)}},N2={};X1(nI,function(e,t){N2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),N2.deleteProperty=function(e,t){return N2.set.call(this,e,t,void 0)},N2.set=function(e,t,n){return nI.set.call(this,e[0],t,n,e[0])};var qxt=function(){function e(n){var r=this;this.O=wfe,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Ef(6),o!==void 0&&typeof o!="function"&&Ef(7),Nm(i)){var c=gfe(r),f=zz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?y$(c):Uz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return J8(c,o),Z8(m,c)},function(m){throw y$(c),m}):(J8(c,o),Z8(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===xke&&(l=void 0),r.D&&pQ(l,!0),o){var h=[],p=[];uh("Patches").M(i,l,h,p),o(h,p)}return l}Ef(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Nm(n)||Ef(8),ny(n)&&(n=Bxt(n));var r=gfe(this),i=zz(this,n,void 0);return i[bi].C=!0,Uz(r),i},t.finishDraft=function(n,r){var i=n&&n[bi],s=i.A;return J8(s,r),Z8(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!wfe&&Ef(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=uh("Patches").$;return ny(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),jl=new qxt,Wxt=jl.produce;jl.produceWithPatches.bind(jl);jl.setAutoFreeze.bind(jl);jl.setUseProxies.bind(jl);jl.applyPatches.bind(jl);jl.createDraft.bind(jl);jl.finishDraft.bind(jl);const Tke=Wxt;function rI(e){"@babel/helpers - typeof";return rI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rI(e)}function Gxt(e,t){if(rI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(rI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Yxt(e){var t=Gxt(e,"string");return rI(t)=="symbol"?t:t+""}function Kxt(e,t,n){return(t=Yxt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xfe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Sfe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xfe(Object(n),!0).forEach(function(r){Kxt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xfe(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ra(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Tfe=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),n9=function(){return Math.random().toString(36).substring(7).split("").join(".")},_$={INIT:"@@redux/INIT"+n9(),REPLACE:"@@redux/REPLACE"+n9(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+n9()}};function Xxt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function Ake(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ra(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(ra(1));return n(Ake)(e,t)}if(typeof e!="function")throw new Error(ra(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(ra(3));return s}function f(m){if(typeof m!="function")throw new Error(ra(4));if(u)throw new Error(ra(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(ra(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!Xxt(m))throw new Error(ra(7));if(typeof m.type>"u")throw new Error(ra(8));if(u)throw new Error(ra(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(ra(10));i=m,d({type:_$.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(ra(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Tfe]=function(){return this},m}return d({type:_$.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Tfe]=p,r}function Qxt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:_$.INIT});if(typeof r>"u")throw new Error(ra(12));if(typeof n(void 0,{type:_$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(ra(13))})}function Jxt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{Qxt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(ra(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function w$(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function Zxt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(ra(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=w$.apply(void 0,a)(i.dispatch),Sfe(Sfe({},i),{},{dispatch:s})}}}function Cke(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var Hz=Cke();Hz.withExtraArgument=Cke;var Ike=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Ok=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},Q1=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},eSt=Object.defineProperty,tSt=Object.defineProperties,nSt=Object.getOwnPropertyDescriptors,Afe=Object.getOwnPropertySymbols,rSt=Object.prototype.hasOwnProperty,iSt=Object.prototype.propertyIsEnumerable,Cfe=function(e,t,n){return t in e?eSt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},x0=function(e,t){for(var n in t||(t={}))rSt.call(t,n)&&Cfe(e,n,t[n]);if(Afe)for(var r=0,i=Afe(t);r<i.length;r++){var n=i[r];iSt.call(t,n)&&Cfe(e,n,t[n])}return e},r9=function(e,t){return tSt(e,nSt(t))},$k=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},sSt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?w$:w$.apply(null,arguments)};function kke(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var oSt=function(e){return e&&typeof e.match=="function"};function lh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return x0(x0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function aSt(e){return kke(e)&&"type"in e}var uSt=function(e){Ike(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Q1([void 0],n[0].concat(this)))):new(t.bind.apply(t,Q1([void 0],n.concat(this))))},t}(Array),lSt=function(e){Ike(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,Q1([void 0],n[0].concat(this)))):new(t.bind.apply(t,Q1([void 0],n.concat(this))))},t}(Array);function qz(e){return Nm(e)?Tke(e,function(){}):e}function cSt(e){return typeof e=="boolean"}function fSt(){return function(t){return dSt(t)}}function dSt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new uSt;return n&&(cSt(n)?r.push(Hz):r.push(Hz.withExtraArgument(n.extraArgument))),r}var hSt=!0;function pSt(e){var t=fSt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(kke(i))h=Jxt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=Zxt.apply(void 0,p),g=w$;u&&(g=sSt(x0({trace:!hSt},typeof u=="object"&&u)));var y=new lSt(m),v=y;Array.isArray(d)?v=Q1([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return Ake(h,c,b)}function Rke(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function mSt(e){return typeof e=="function"}function gSt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?Rke(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(mSt(e))u=function(){return qz(e())};else{var l=qz(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=Q1([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(ny(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Nm(p))return Tke(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function ySt(e,t){return e+"/"+t}function vSt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:qz(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=ySt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?lh(d,p):lh(d)});function u(){var c=typeof e.extraReducers=="function"?Rke(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=x0(x0({},d),o);return gSt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var T=E[w];v.addMatcher(T.matcher,T.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var bSt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Nke=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=bSt[Math.random()*64|0];return t},_St=["name","message","stack","code"],i9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Ife=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),wSt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=_St;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=lh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:r9(x0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=lh(t+"/pending",function(l,c,f){return{payload:void 0,meta:r9(x0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=lh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||wSt)(l||"Rejected"),meta:r9(x0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):Nke(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return $k(this,null,function(){var v,b,w,E,T,S,A;return Ok(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),xSt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new i9(k,N)},fulfillWithValue:function(k,N){return new Ife(k,N)}})).then(function(k){if(k instanceof i9)throw k;return k instanceof Ife?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return S=C.sent(),w=S instanceof i9?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(ESt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function ESt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function xSt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var SSt=function(e,t){return oSt(e)?e.match(t):e(t)};function kfe(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return SSt(r,n)})}}var yQ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},Wz=function(){},Pke=function(e,t){return t===void 0&&(t=Wz),e.catch(t),e},Dke=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},nE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},TSt="task",Oke="listener",$ke="completed",vQ="cancelled",ASt="task-"+vQ,CSt="task-"+$ke,Mke=Oke+"-"+vQ,ISt=Oke+"-"+$ke,r4=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=TSt+" "+vQ+" (reason: "+t+")"}return e}(),rE=function(e){if(e.aborted)throw new r4(e.reason)};function Lke(e,t){var n=Wz;return new Promise(function(r,i){var s=function(){return i(new r4(e.reason))};if(e.aborted){s();return}n=Dke(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=Wz})}var kSt=function(e,t){return $k(void 0,null,function(){var n,r;return Ok(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof r4?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},E$=function(e){return function(t){return Pke(Lke(e,t).then(function(n){return rE(e),n}))}},Fke=function(e){var t=E$(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},RSt=Object.assign,Rfe={},Mk="listenerMiddleware",NSt=function(e,t){var n=function(r){return Dke(e,function(){return nE(r,e.reason)})};return function(r,i){yQ(r,"taskExecutor");var s=new AbortController;n(s);var o=kSt(function(){return $k(void 0,null,function(){var a;return Ok(this,function(u){switch(u.label){case 0:return rE(e),rE(s.signal),[4,r({pause:E$(s.signal),delay:Fke(s.signal),signal:s.signal})];case 1:return a=u.sent(),rE(s.signal),[2,a]}})})},function(){return nE(s,CSt)});return i!=null&&i.autoJoin&&t.push(o),{result:E$(e)(o),cancel:function(){nE(s,ASt)}}}},PSt=function(e,t){var n=function(r,i){return $k(void 0,null,function(){var s,o,a,u;return Ok(this,function(l){switch(l.label){case 0:rE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,Lke(t,Promise.race(a))];case 2:return u=l.sent(),rE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return Pke(n(r,i))}},jke=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=lh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return yQ(s,"options.listener"),{predicate:i,type:t,effect:s}},DSt=function(e){var t=jke(e),n=t.type,r=t.predicate,i=t.effect,s=Nke(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},Gz=function(e){e.pending.forEach(function(t){nE(t,Mke)})},OSt=function(e){return function(){e.forEach(Gz),e.clear()}},Nfe=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},$St=lh(Mk+"/add"),MSt=lh(Mk+"/removeAll"),LSt=lh(Mk+"/remove"),FSt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,Q1([Mk+"/error"],e))};function jSt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?FSt:i;yQ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&Gz(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=DSt(h)),o(p)},l=function(h){var p=jke(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&Gz(v)),!!v},c=function(h,p,m,g){return $k(t,null,function(){var y,v,b,w;return Ok(this,function(E){switch(E.label){case 0:y=new AbortController,v=PSt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,RSt({},m,{getOriginalState:g,condition:function(T,S){return v(T,S).then(Boolean)},take:v,delay:Fke(y.signal),pause:E$(y.signal),extra:r,signal:y.signal,fork:NSt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,S,A){T!==y&&(nE(T,Mke),A.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof r4||Nfe(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),nE(y,ISt),h.pending.delete(y),[7];case 6:return[2]}})})},f=OSt(n),d=function(h){return function(p){return function(m){if(!aSt(m))return p(m);if($St.match(m))return u(m.payload);if(MSt.match(m)){f();return}if(LSt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Rfe)throw new Error(Mk+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,T=w;E<T.length;E++){var S=T[E],A=!1;try{A=S.predicate(m,b,g)}catch(C){A=!1,Nfe(s,C,{raisedBy:"predicate"})}A&&c(S,m,h,y)}}finally{g=Rfe}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Pfe;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);Uxt();function BSt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let QN;const USt=new Uint8Array(16);function zSt(){if(!QN&&(QN=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!QN))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return QN(USt)}const vo=[];for(let e=0;e<256;++e)vo.push((e+256).toString(16).slice(1));function VSt(e,t=0){return(vo[e[t+0]]+vo[e[t+1]]+vo[e[t+2]]+vo[e[t+3]]+"-"+vo[e[t+4]]+vo[e[t+5]]+"-"+vo[e[t+6]]+vo[e[t+7]]+"-"+vo[e[t+8]]+vo[e[t+9]]+"-"+vo[e[t+10]]+vo[e[t+11]]+vo[e[t+12]]+vo[e[t+13]]+vo[e[t+14]]+vo[e[t+15]]).toLowerCase()}const HSt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Dfe={randomUUID:HSt};function Ofe(e,t,n){if(Dfe.randomUUID&&!t&&!e)return Dfe.randomUUID();e=e||{};const r=e.random||(e.rng||zSt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,VSt(r)}class ch{static get(){let t=Ofe();for(;this.ids.has(t);)t=Ofe();return this.ids.set(t,!0),t}}ch.ids=new Map;function fh(e){return"parent"in e}function qSt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:ch.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:ch.get(),createdOn:Date.now(),val:r}]:[];return{id:ch.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function WSt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:ch.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:ch.get(),createdOn:Date.now(),val:s}]:[];return{id:ch.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Wi(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=tTt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function J1(e){return!!e&&!!e[Bl]}function ry(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===nTt}(e)||Array.isArray(e)||!!e[IA]||!!(!((t=e.constructor)===null||t===void 0)&&t[IA])||i4(e)||s4(e))}function ix(e,t,n){n===void 0&&(n=!1),iy(e)===0?(n?Object.keys:SQ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function iy(e){var t=e[Bl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:i4(e)?2:s4(e)?3:0}function iI(e,t){return iy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function xD(e,t){return iy(e)===2?e.get(t):e[t]}function Bke(e,t,n){var r=iy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function GSt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function i4(e){return ZSt&&e instanceof Map}function s4(e){return eTt&&e instanceof Set}function Pv(e){return e.o||e.t}function bQ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=rTt(e);delete t[Bl];for(var n=SQ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function _Q(e,t){return t===void 0&&(t=!1),wQ(e)||J1(e)||!ry(e)||(iy(e)>1&&(e.set=e.add=e.clear=e.delete=YSt),Object.freeze(e),t&&ix(e,function(n,r){return _Q(r,!0)},!0)),e}function YSt(){Wi(2)}function wQ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function dh(e){var t=Qz[e];return t||Wi(18,e),t}function KSt(e,t){Qz[e]||(Qz[e]=t)}function $fe(){return{}.NODE_ENV==="production"||sx||Wi(0),sx}function s9(e,t){t&&(dh("Patches"),e.u=[],e.s=[],e.v=t)}function x$(e){Yz(e),e.p.forEach(XSt),e.p=null}function Yz(e){e===sx&&(sx=e.l)}function Mfe(e){return sx={p:[],l:sx,h:e,m:!0,_:0}}function XSt(e){var t=e[Bl];t.i===0||t.i===1?t.j():t.O=!0}function o9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||dh("ES5").S(t,e,r),r?(n[Bl].P&&(x$(t),Wi(4)),ry(e)&&(e=S$(t,e),t.l||T$(t,e)),t.u&&dh("Patches").M(n[Bl].t,e,t.u,t.s)):e=S$(t,n,[]),x$(t),t.u&&t.v(t.u,t.s),e!==xQ?e:void 0}function S$(e,t,n){if(wQ(t))return t;var r=t[Bl];if(!r)return ix(t,function(s,o){return Lfe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return T$(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=bQ(r.k):r.o;ix(r.i===3?new Set(i):i,function(s,o){return Lfe(e,r,i,s,o,n)}),T$(e,i,!1),n&&e.u&&dh("Patches").R(r,n,e.u,e.s)}return r.o}function Lfe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Wi(5),J1(i)){var o=S$(e,i,s&&t&&t.i!==3&&!iI(t.D,r)?s.concat(r):void 0);if(Bke(n,r,o),!J1(o))return;e.m=!1}if(ry(i)&&!wQ(i)){if(!e.h.F&&e._<1)return;S$(e,i),t&&t.A.l||T$(e,i)}}function T$(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&_Q(t,n)}function a9(e,t){var n=e[Bl];return(n?Pv(n):e)[t]}function Ffe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Kz(e){e.P||(e.P=!0,e.l&&Kz(e.l))}function u9(e){e.o||(e.o=bQ(e.t))}function Xz(e,t,n){var r=i4(t)?dh("MapSet").N(t,n):s4(t)?dh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:$fe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=Jz;o&&(u=[a],l=P2);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):dh("ES5").J(t,n);return(n?n.A:$fe()).p.push(r),r}function QSt(e){return J1(e)||Wi(22,e),function t(n){if(!ry(n))return n;var r,i=n[Bl],s=iy(n);if(i){if(!i.P&&(i.i<4||!dh("ES5").K(i)))return i.t;i.I=!0,r=jfe(n,s),i.I=!1}else r=jfe(n,s);return ix(r,function(o,a){i&&xD(i.t,o)===a||Bke(r,o,t(a))}),s===3?new Set(r):r}(e)}function jfe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return bQ(e)}function JSt(){function e(r){if(!ry(r))return r;if(Array.isArray(r))return r.map(e);if(i4(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(s4(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return iI(r,IA)&&(i[IA]=r[IA]),i}function t(r){return J1(r)?e(r):r}var n="add";KSt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=iy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Wi(24),typeof u=="function"&&f==="prototype"&&Wi(24),typeof(u=xD(u,f))!="object"&&Wi(15,o.join("/"))}var d=iy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Wi(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Wi(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;ix(a.D,function(h,p){var m=xD(f,h),g=xD(d,h),y=p?iI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===xQ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var Bfe,sx,EQ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",ZSt=typeof Map<"u",eTt=typeof Set<"u",Ufe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",xQ=EQ?Symbol.for("immer-nothing"):((Bfe={})["immer-nothing"]=!0,Bfe),IA=EQ?Symbol.for("immer-draftable"):"__$immer_draftable",Bl=EQ?Symbol.for("immer-state"):"__$immer_state",tTt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},nTt=""+Object.prototype.constructor,SQ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,rTt=Object.getOwnPropertyDescriptors||function(e){var t={};return SQ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},Qz={},Jz={get:function(e,t){if(t===Bl)return e;var n=Pv(e);if(!iI(n,t))return function(i,s,o){var a,u=Ffe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!ry(r)?r:r===a9(e.t,t)?(u9(e),e.o[t]=Xz(e.A.h,r,e)):r},has:function(e,t){return t in Pv(e)},ownKeys:function(e){return Reflect.ownKeys(Pv(e))},set:function(e,t,n){var r=Ffe(Pv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=a9(Pv(e),t),s=i==null?void 0:i[Bl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(GSt(n,i)&&(n!==void 0||iI(e.t,t)))return!0;u9(e),Kz(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return a9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,u9(e),Kz(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Pv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Wi(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Wi(12)}},P2={};ix(Jz,function(e,t){P2[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),P2.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Wi(13),P2.set.call(this,e,t,void 0)},P2.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Wi(14),Jz.set.call(this,e[0],t,n,e[0])};var iTt=function(){function e(n){var r=this;this.g=Ufe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Wi(6),o!==void 0&&typeof o!="function"&&Wi(7),ry(i)){var c=Mfe(r),f=Xz(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?x$(c):Yz(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return s9(c,o),o9(m,c)},function(m){throw x$(c),m}):(s9(c,o),o9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===xQ&&(l=void 0),r.F&&_Q(l,!0),o){var h=[],p=[];dh("Patches").M(i,l,h,p),o(h,p)}return l}Wi(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){ry(n)||Wi(8),J1(n)&&(n=QSt(n));var r=Mfe(this),i=Xz(this,n,void 0);return i[Bl].C=!0,Yz(r),i},t.finishDraft=function(n,r){var i=n&&n[Bl];({}).NODE_ENV!=="production"&&(i&&i.C||Wi(9),i.I&&Wi(10));var s=i.A;return s9(s,r),o9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!Ufe&&Wi(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=dh("Patches").$;return J1(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Ul=new iTt,sTt=Ul.produce;Ul.produceWithPatches.bind(Ul);Ul.setAutoFreeze.bind(Ul);Ul.setUseProxies.bind(Ul);Ul.applyPatches.bind(Ul);Ul.createDraft.bind(Ul);Ul.finishDraft.bind(Ul);function oTt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=qSt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return vSt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:ch.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:ch.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function aTt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=oTt(e),s=jSt();s.startListening({matcher:kfe(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=kfe(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=pSt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:ch.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var uTt=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lTt=Object.prototype.hasOwnProperty;function Zz(e,t){return lTt.call(e,t)}function eV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)Zz(e,i)&&r.push(i);return r}function $u(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function tV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Dv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function Uke(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function nV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(nV(e[t]))return!0}else if(typeof e=="object"){for(var r=eV(e),i=r.length,s=0;s<i;s++)if(nV(e[r[s]]))return!0}}return!1}function zfe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var zke=function(e){uTt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,zfe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=zfe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Bi=zke,cTt=$u,Aw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=A$(n,this.path);r&&(r=$u(r));var i=x1(n,{op:"remove",path:this.from}).removed;return x1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=A$(n,this.from);return x1(n,{op:"add",path:this.path,value:$u(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:sI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},fTt={add:function(e,t,n){return tV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Aw.move,copy:Aw.copy,test:Aw.test,_get:Aw._get};function A$(e,t){if(t=="")return e;var n={op:"_get",path:t};return x1(e,n),n.value}function x1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):C$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=A$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=sI(e,t.value),o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=$u(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=C$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=Uke(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!tV(h))throw new Bi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);tV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Bi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=fTt[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Aw[t.op].call(t,l,h,e);if(o.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Bi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function o4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=$u(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=x1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function dTt(e,t,n){var r=x1(e,t);if(r.test===!1)throw new Bi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function C$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Bi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Aw[e.op]){if(typeof e.path!="string")throw new Bi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Bi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Bi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&nV(e.value))throw new Bi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Bi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Bi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=Vke([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Bi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Bi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function Vke(e,t,n){try{if(!Array.isArray(e))throw new Bi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)o4($u(t),$u(e),n||!0);else{n=n||C$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Bi)return i;throw i}}function sI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!sI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!sI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const hTt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Bi,_areEquals:sI,applyOperation:x1,applyPatch:o4,applyReducer:dTt,deepClone:cTt,getValueByPointer:A$,validate:Vke,validator:C$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var TQ=new WeakMap,pTt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),mTt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function gTt(e){return TQ.get(e)}function yTt(e,t){return e.observers.get(t)}function vTt(e,t){e.observers.delete(t.callback)}function bTt(e,t){t.unobserve()}function _Tt(e,t){var n=[],r,i=gTt(e);if(!i)i=new pTt(e),TQ.set(e,i);else{var s=yTt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=$u(e),t){r.callback=t,r.next=null;var o=function(){rV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){rV(r),clearTimeout(r.next),vTt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new mTt(t,r)),r}function rV(e,t){t===void 0&&(t=!1);var n=TQ.get(e.object);AQ(n.value,e.object,e.patches,"",t),e.patches.length&&o4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function AQ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=eV(t),o=eV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(Zz(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?AQ(c,f,n,r+"/"+Dv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Dv(l),value:$u(c)}),n.push({op:"replace",path:r+"/"+Dv(l),value:$u(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Dv(l),value:$u(c)}),n.push({op:"remove",path:r+"/"+Dv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!Zz(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Dv(l),value:$u(t[l])})}}}function Hke(e,t,n){n===void 0&&(n=!1);var r=[];return AQ(e,t,r,"",n),r}const wTt=Object.freeze(Object.defineProperty({__proto__:null,compare:Hke,generate:rV,observe:_Tt,unobserve:bTt},Symbol.toStringTag,{value:"Module"}));Object.assign({},hTt,wTt,{JsonPatchError:zke,deepClone:$u,escapePathComponent:Dv,unescapePathComponent:Uke});var D2=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(D2||{});function SD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=Wke(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=SD(i,t);return o4(a,$u(o),!0,!1).newDocument}function ETt(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function qke({registry:e,initialState:t}){let n=!1;const r=BSt(),i=aTt(t);function s(c){return i.backend.nodes[c]}r.listen(D2.TRAVERSAL_START,()=>{n=!0}),r.listen(D2.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return SD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=SD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=Hke(y,f);if(ETt(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=WSt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=SD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(D2.TRAVERSAL_START);const f=Wke(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);STt(p,m)?fh(p)&&d.push(...p.sideEffects.undo):fh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(D2.TRAVERSAL_END)},undo(){const{current:c}=i;return fh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return Gke(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function xTt(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;fh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)fh(r)&&(r=n[r.parent]),fh(i)&&(i=n[i.parent]);return r.id}function Wke(e,t,n){const r=xTt(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),fh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),fh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function STt(e,t){if(fh(e)&&e.parent===t.id)return!0;if(fh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function Gke(e,t){return{...e,children:e.children.map(n=>Gke(t[n],t)),name:`${e.label}`}}JSt();function TTt(e){return e.length===2?sTt(e):e}class a4{static create(){return new a4}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:TTt(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),lh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var ATt="Expected a function",Vfe=NaN,CTt="[object Symbol]",ITt=/^\s+|\s+$/g,kTt=/^[-+]0x[0-9a-f]+$/i,RTt=/^0b[01]+$/i,NTt=/^0o[0-7]+$/i,PTt=parseInt,DTt=typeof to=="object"&&to&&to.Object===Object&&to,OTt=typeof self=="object"&&self&&self.Object===Object&&self,$Tt=DTt||OTt||Function("return this")(),MTt=Object.prototype,LTt=MTt.toString,FTt=Math.max,jTt=Math.min,l9=function(){return $Tt.Date.now()};function BTt(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(ATt);t=Hfe(t)||0,iV(n)&&(c=!!n.leading,f="maxWait"in n,s=f?FTt(Hfe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var S=r,A=i;return r=i=void 0,l=T,o=e.apply(A,S),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var S=T-u,A=T-l,C=t-S;return f?jTt(C,s-A):C}function g(T){var S=T-u,A=T-l;return u===void 0||S>=t||S<0||f&&A>=s}function y(){var T=l9();if(g(T))return v(T);a=setTimeout(y,m(T))}function v(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(l9())}function E(){var T=l9(),S=g(T);if(r=arguments,i=this,u=T,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function iV(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function UTt(e){return!!e&&typeof e=="object"}function zTt(e){return typeof e=="symbol"||UTt(e)&&LTt.call(e)==CTt}function Hfe(e){if(typeof e=="number")return e;if(zTt(e))return Vfe;if(iV(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=iV(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(ITt,"");var n=RTt.test(e);return n||NTt.test(e)?PTt(e.slice(2),n?2:8):kTt.test(e)?Vfe:+e}var VTt=BTt;const Ed=Gl(VTt);function Yke({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>cS(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(ym,{children:_.jsx(Ss,{gap:3,children:_.jsx(et,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const HTt=Object.freeze(Object.defineProperty({__proto__:null,YAxis:Yke},Symbol.toStringTag,{value:"Module"})),c9=15;function Kke({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=Vi("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<c9&&Math.abs(t(g[r.y])-p[1])<c9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:c9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const qTt=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:Kke},Symbol.toStringTag,{value:"Module"})),mi={top:15,left:100,right:15,bottom:70};function sV({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=b1(),[c]=b1(),[f]=b1(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-mi.left-mi.right,[l]),m=I.useMemo(()=>u-mi.top-mi.bottom,[u]),g=I.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return zb(o2e).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=I.useMemo(()=>{const k=s.map(M=>+M[i.x]).filter(M=>M!==null),[N,O]=Cue(k),D=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=Cue(D);return{xMin:N,xMax:O,yMin:$,yMax:F}},[s,i.x,i.y]),E=I.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?ZTe([mi.left,p+mi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Hf([mi.left,p+mi.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),T=I.useMemo(()=>{const k=w-v;return m<=0?null:Hf([m+mi.top,mi.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),S=I.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=Eft().extent([[mi.left,mi.top+m-5],[mi.left+p,mi.top+m+5]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[O.selection[0],null],[O.selection[1],null]],E,T,O.mode)}),N=xft().extent([[mi.left-5,mi.top],[mi.left+5,mi.top+m]]).on("brush end",O=>{O.sourceEvent!==void 0&&n([[null,O.selection[0]],[null,O.selection[1]]],E,T,O.mode)});return c.current&&f.current&&(Vi(f.current).call(N),Vi(c.current).call(k),t.hasBrush||(Vi(f.current).call(N.move,[T(w),T(v)]),Vi(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"drag"))),()=>{Vi(f.current).call(N.move,[T(w),T(v)]),Vi(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=Sft().extent([[mi.left,mi.top],[mi.left+p,mi.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,T,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(Vi(a.current).call(k.move,null),e(null))});return Vi(a.current).call(k),()=>{Vi(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(w)],[E(b),T(v)]],E,T,null),()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,T]),A=I.useMemo(()=>o.length===0?null:new Set(o),[o]),C=I.useMemo(()=>!E||!T?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const O=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:A&&!A.has(k[i.ids])?.3:1,r:3,fill:A&&!A.has(k[i.ids])?"lightgray":g(k[i.category]),cx:O,cy:T(k[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return I.useEffect(()=>{r==="Axis Selection"&&plt(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(Xd,{children:[_.jsxs(Ss,{children:[_.jsx(on,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),S==null||S()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(eY,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Ss,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(Yke,{yScale:T,label:i.y,horizontalPosition:mi.left,xRange:E.range()}),_.jsx(BK,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+mi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(Kke,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(Xd,{style:{flexGrow:1},gap:50,children:[_.jsxs(Xd,{gap:0,children:[_.jsx(et,{children:i.x}),_.jsx(UO,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(Xd,{gap:0,children:[_.jsx(et,{children:i.y}),_.jsx(UO,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const WTt=Object.freeze(Object.defineProperty({__proto__:null,Scatter:sV,default:sV},Symbol.toStringTag,{value:"Module"}));function qfe({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{hK(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?$xt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=a4.create(),y=g.register("brush",(T,S)=>(T.all={brush:S},T)),v=g.register("brushMove",(T,S)=>(T.all={brush:S},T)),b=g.register("brushResize",(T,S)=>(T.all={brush:S},T)),w=g.register("brushClear",(T,S)=>(T.all={brush:S},T)),E=qke({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>Ed(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),S=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const N=new Set(w);C=u.filter(Q8(O=>N.has(O[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(Q8(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(T)&&N[e.y]>=S&&N[e.y]<=A)):C=u.filter(Q8(N=>N[e.x]>=E&&N[e.x]<=T&&N[e.y]>=S&&N[e.y]<=A));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?_.jsxs(Xd,{gap:"xs",children:[_.jsx(sV,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(gz,{data:o,parameters:e,barsTable:p})]}):_.jsx(Bc,{})}const GTt=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:qfe,default:qfe},Symbol.toStringTag,{value:"Module"})),YTt=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),Wfe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},CS=e=>{const t=I.useRef(null),n=Wfe(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=Wfe({...n,width:n.width||r,height:n.height||s});return[t,a]},KTt=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:CS},Symbol.toStringTag,{value:"Module"}));function Xke({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const XTt=Object.freeze(Object.defineProperty({__proto__:null,Bars:Xke},Symbol.toStringTag,{value:"Module"}));function CQ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Hf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const QTt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:CQ},Symbol.toStringTag,{value:"Module"}));function Qke({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=dS().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const JTt=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:Qke},Symbol.toStringTag,{value:"Module"})),ZTt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function e2t({parameters:e}){const[n,r]=CS(ZTt),i=dS().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Hf().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(Qke,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(CQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(Xke,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const t2t=Object.freeze(Object.defineProperty({__proto__:null,default:e2t},Symbol.toStringTag,{value:"Module"}));function Jke({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const n2t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:Jke},Symbol.toStringTag,{value:"Module"}));function IQ({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const r2t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:IQ},Symbol.toStringTag,{value:"Module"})),i2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},s2t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=RTe().size([t-10,n-10]).padding(1.5),o=E6(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},o2t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function a2t({parameters:e}){const[t,n]=CS(i2t),r=s2t(e,n.width,n.height),i=o2t(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(Jke,{data:r}),_.jsx(IQ,{positions:i})]})})})}const u2t=Object.freeze(Object.defineProperty({__proto__:null,default:a2t},Symbol.toStringTag,{value:"Module"}));function Zke({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const l2t=Object.freeze(Object.defineProperty({__proto__:null,Slices:Zke},Symbol.toStringTag,{value:"Module"}));function eRe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const c2t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:eRe},Symbol.toStringTag,{value:"Module"})),f2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},d2t=d2e().value(e=>e.value),$T=150;function h2t({parameters:e}){const[t,n]=CS(f2t),r=d2t(e.data),i=r.map(o=>B3().innerRadius(0).outerRadius($T).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>B3().outerRadius($T+10).innerRadius($T+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+$T,n.marginTop+$T].join(",")})`,children:[_.jsx(Zke,{arcs:i}),_.jsx(eRe,{positions:s})]})})})}const p2t=Object.freeze(Object.defineProperty({__proto__:null,default:h2t},Symbol.toStringTag,{value:"Module"}));function tRe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Hf().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const m2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:tRe},Symbol.toStringTag,{value:"Module"}));function nRe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const g2t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:nRe},Symbol.toStringTag,{value:"Module"})),y2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function v2t({parameters:e}){const[n,r]=CS(y2t),i=dS().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Hf().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return l0t().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(tRe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(CQ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(nRe,{data:c,barWidth:f,yScale:s}),_.jsx(IQ,{positions:d})]})]})})})}const b2t=Object.freeze(Object.defineProperty({__proto__:null,default:v2t},Symbol.toStringTag,{value:"Module"})),_2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function w2t({parameters:e,setAnswer:t}){const[n,r]=CS(_2t),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=a4.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=qke({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=Vi("#movingCircle"),g=Vi("#clickAccuracySvg"),y=P7(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;Vi(n.current).select("circle").transition().duration(y).ease(uft).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(me,{children:["Adjust speed (px/s):",_.jsx(GL,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const E2t=Object.freeze(Object.defineProperty({__proto__:null,default:w2t},Symbol.toStringTag,{value:"Module"}));function Gfe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function x2t({parameters:e,setAnswer:t}){const n=Oy(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=Exe(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=SUe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(za,{children:[_.jsxs(za.Col,{span:2,children:[_.jsx(Gfe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(on,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(Zoe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(za.Col,{span:2,children:[_.jsx(Gfe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(on,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(Zoe,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const S2t=Object.freeze(Object.defineProperty({__proto__:null,default:x2t},Symbol.toStringTag,{value:"Module"})),Yfe=Object.assign({"../public/basic-questionnaire-study/SalaryDataChart.tsx":c0t,"../public/basic-questionnaire-study/SalaryDataChartPie.tsx":f0t,"../public/basic-questionnaire-study/chartcomponents/Bars.tsx":h0t,"../public/basic-questionnaire-study/chartcomponents/Bubbles.tsx":m0t,"../public/basic-questionnaire-study/chartcomponents/DotMarks.tsx":y0t,"../public/basic-questionnaire-study/chartcomponents/NumericAxisH.tsx":b0t,"../public/basic-questionnaire-study/chartcomponents/NumericAxisV.tsx":w0t,"../public/basic-questionnaire-study/chartcomponents/OrdinalAxisHWithDotMarks.tsx":x0t,"../public/basic-questionnaire-study/chartcomponents/Slices.tsx":T0t,"../public/basic-questionnaire-study/chartcomponents/SlicesDotMarks.tsx":C0t,"../public/basic-questionnaire-study/chartcomponents/StackedBars.tsx":k0t,"../public/demo-brush-interactions/assets/Bar.tsx":P0t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":GTt,"../public/demo-brush-interactions/assets/Paintbrush.tsx":qTt,"../public/demo-brush-interactions/assets/Scatter.tsx":WTt,"../public/demo-brush-interactions/assets/XAxisBar.tsx":R0t,"../public/demo-brush-interactions/assets/YAxis.tsx":HTt,"../public/demo-brush-interactions/assets/YAxisBar.tsx":N0t,"../public/demo-brush-interactions/assets/types.ts":YTt,"../public/demo-cleveland/assets/BarChart.tsx":t2t,"../public/demo-cleveland/assets/BubbleChart.tsx":u2t,"../public/demo-cleveland/assets/PieChart.tsx":p2t,"../public/demo-cleveland/assets/StackedBarChart.tsx":b2t,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":XTt,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":n2t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":r2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":m2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":QTt,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":JTt,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":l2t,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":c2t,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":g2t,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":KTt,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":E2t,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":S2t});function T2t({currentConfig:e}){const t=Km(),n=Oy(),r=`../public/${e.path}`,i=r in Yfe?Yfe[r].default:null,s=Wh(),{updateResponseBlockValidation:o,setIframeAnswers:a}=qh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(U1,{path:e.path})})}function A2t({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await QY(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(Ka,{text:t}):_.jsx(U1,{path:e.path})}const C2t={},I2t=Object.freeze(Object.defineProperty({__proto__:null,default:C2t},Symbol.toStringTag,{value:"Module"})),k2t=Bje(I2t);var R2t=k2t;function N2t(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function P2t(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function D2t(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function O2t(e){return e.__COMMENTS__}function $2t(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var u4={EOL:R2t.EOL||`
`,tryParseNumber:N2t,createComment:P2t,removeComment:D2t,getComment:O2t,forceComment:$2t},M2t="3.2.1";function L2t(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return Kfe}else if(e.length===0)return Kfe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return j2t(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),F2t.bind(null,n)}function F2t(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function Kfe(){}function j2t(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function rRe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}rRe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function iRe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}iRe.description="parse hexadecimal numbers prefixed with 0x";function sRe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}sRe.description="support ISO dates";var kQ={loadDsf:L2t,std:{math:rRe,hex:iRe,date:sRe}},B2t=function(e,t){var n=u4,r=kQ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,M=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,M++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),P;o>="0"&&o<="9"?P=H-48:o>="a"&&o<="f"?P=H-97+10:o>="A"&&o<="F"?P=H-65+10:d("Bad \\u char "+o),B=B*16+P}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function U(){for(var H=M;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=F+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,F){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E($){function F(B,U){var H,P,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(P in B)Object.prototype.hasOwnProperty.call(B,P)&&(W=F(B[P],U)||W)}return W}function M(B){var U=F($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function T(){var $=[],F,M,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),M=s,v(),F&&(B=w(M,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(A()),M=s,v(),o===","&&(h(),M=s,v()),F){var U=w(M);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E($),H}}function S($){var F="",M={},B,U,H;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[H]),h(),M;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[F]=A(),U=s,v(),o===","&&(h(),U=s,v()),B){var P=w(U);B.c[F]=[H||"",P[0]||""],H=P[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=H||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function A(){switch(v(),o){case"{":return S();case"[":return T();case"'":case'"':return m(!0);default:return b()}}function C($,F){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(M).join(`
`);if(U||B){var H=n.createComment($,n.getComment($));H.r=[B,U]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$);default:return C(A(),$)}}function N(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$)}try{return C(S(!0),$)}catch(F){c();try{return C(A(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var O=null,D=!0;return t&&typeof t=="object"&&(u=t.keepWsc,O=t.dsf,D=t.legacyRoot!==!1),l=r.loadDsf(O,"parse"),i=e,c(),D?N():k()},U2t=function(e,t){var n=u4,r=kQ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,O="",D=0;function $(W,j){return D+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(T,function(j){var q=k[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(S.lastIndex=0,C.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(T.lastIndex=0,A.lastIndex=0,T.test(W)?!A.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||N.test(W)?(T.lastIndex=0,$(g.qkey,T.test(W)?F(W):W)):$(g.key,W):'""'}function H(W,j,q,G){function ne(gn){return gn&&gn[gn[0]==="\r"?1:0]===`
`}function ce(gn){return gn&&!ne(gn)}function de(gn,Cn,nr){if(!gn)return"";gn=n.forceComment(gn);var rr,Uo=gn.length;for(rr=0;rr<Uo&&gn[rr]<=" ";rr++);return nr&&rr>0&&(gn=gn.substr(rr)),rr<Uo?Cn+$(g.rem,gn):gn}var he=w(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return M(W,O,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ve;a&&(ve=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",be=O;O+=o;var Ke=s+be,Ue=s+O,yt=q||u?"":Ke,it=[],_e,ke=f?[]:null,ze=c,ct=d,Ot=h?"":g.com[0],We=0,ge,ht,vt,pe,Ce,He,ut,_t,Ln;if(Ie){for(ge=0,ht=W.length;ge<ht;ge++){if(_e=ge<ht-1,ve?(He=ve.a[ge]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,pe=W[ge],it.push(H(pe,ve?ut:!1,!0)+(_e?h:"")),ke){switch(typeof pe){case"string":D=0,c=!0,d=0,ke.push(H(pe,!1,!0)+(_e?g.com[0]:"")),c=ze,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}_e&&(D+=g.com[0].length-g.com[2]),We+=D}ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut))}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.arr,Ln))))}else{var Ar=ve?ve.o.slice():[],Fn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Ar.indexOf(vt)<0&&Fn.push(vt);m&&Fn.sort();var cr=Ar.concat(Fn);for(ge=0,ht=cr.length;ge<ht;ge++)if(_e=ge<ht-1,vt=cr[ge],ve?(He=ve.c[vt]||[],ut=ce(He[1]),it.push(de(He[0],`
`)+Ue),ke&&(He[0]||He[1]||ut)&&(ke=null)):it.push(Ue),D=0,pe=W[vt],Ce=H(pe,ve&&ut),it.push(U(vt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(_e?h:"")),ve&&He[1]&&it.push(de(He[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":D=0,c=!0,d=0,Ce=H(pe,!1),c=ze,d=ct,ke.push(U(vt)+g.col[0]+" "+Ce+(_e?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Ot:""));break}D+=g.col[0].length-g.col[2],_e&&(D+=g.com[0].length-g.com[2]),We+=D}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Ke):it.push(Ke),it.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,it.join("")),ke&&(Ln=ke.join(" "),Ln.length-We<=f&&(_t=$(g.obj,Ln))))}return O=be,_t}}w=r.loadDsf(p,"stringify");var P="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(P=z[0]+`
`),P+=H(e,null,!0,!0),z&&(P+=z[1]||""),P},iE=u4;function kA(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function oV(e,t){if(!(e===null||typeof e!="object")){var n=iE.getComment(e);n&&iE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)Xfe(o.a,r,n.a[r],oV(e[r]))&&(s=!0);!s&&n.e&&(o.e=kA(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];Xfe(o.s,l,n.c[l],oV(e[l]))&&(s=!0)}!s&&n.e&&(o.e=kA(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=kA(n.r[0],n.r[1])),s?o:void 0}}function z2t(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function V2t(e,t){var n=[];if(aV(e,t,n,[]),n.length>0){var r=I$(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+z2t(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),I$(t,r,1)}}function Xfe(e,t,n,r){var i=kA(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function RA(e,t){var n=kA(t.b,t.a);return n.path=e,n}function NA(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(RA(s,o)),NA(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(RA(u,l)),NA(l.x,t,u))});e.e&&t.push(RA(n,e.e))}}function aV(e,t,n,r){if(e){if(t===null||typeof t!="object"){NA(e,n,r);return}var i,s=iE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],aV(u.x,t[i],n,l)):(n.push(RA(l,u)),NA(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],aV(d.x,t[c],n,f))):d&&(n.push(RA(f,d)),NA(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function I$(e,t,n){var r=iE.createComment(e,iE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=iE.forceComment(t)),r.r[n]||""}var H2t={extract:function(e){return oV(e,!0)},merge:V2t,header:function(e,t){return I$(e,t,0)},footer:function(e,t){return I$(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var Qfe=u4,q2t=M2t,Jfe=B2t,Zfe=U2t,W2t=H2t,G2t=kQ,RQ={parse:Jfe,stringify:Zfe,endOfLine:function(){return Qfe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(Qfe.EOL=e)},version:q2t,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,Jfe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,Zfe(e,t)}},comments:W2t,dsf:G2t.std},uV={exports:{}},oRe={},Lf={},ox={},Lk={},Dn={},oI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(oI);var lV={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=oI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(lV);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=oI,n=lV;var r=oI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=lV;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return D(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>O(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return D(q,this.condition),this.else&&O(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return O(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=D(super.names,this.from);return D(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return O(super.names,this.iterable.names)}}class T extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}T.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class A extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&O(q,this.catch.names),this.finally&&O(q,this.finally.names),q}}class C extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}C.kind="catch";class k extends p{render(q){return"finally"+super.render(q)}}k.kind="finally";class N{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ve=>{this.var(de,(0,t._)`${he}[${ve}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new S;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new A;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new C(de),G(de)}return ne&&(this._currNode=ce.finally=new k,this.code(ne)),this._endBlockNode(C,k)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new T(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=N;function O(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function D(j,q){return q instanceof t._CodeOrName?O(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function P(...j){return j.reduce(H)}e.or=P;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Dn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Yr=Dn,Y2t=oI;function K2t(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=K2t;function X2t(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(aRe(e,t),!uRe(t,e.self.RULES.all))}wt.alwaysValidSchema=X2t;function aRe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||fRe(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=aRe;function uRe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=uRe;function Q2t(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=Q2t;function J2t({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Yr._)`${n}`}return(0,Yr._)`${e}${t}${(0,Yr.getProperty)(r)}`}wt.schemaRefOrVal=J2t;function Z2t(e){return lRe(decodeURIComponent(e))}wt.unescapeFragment=Z2t;function eAt(e){return encodeURIComponent(NQ(e))}wt.escapeFragment=eAt;function NQ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=NQ;function lRe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=lRe;function tAt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=tAt;function ede({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Yr.Name?(s instanceof Yr.Name?e(i,s,o):t(i,s,o),o):s instanceof Yr.Name?(t(i,o,s),s):n(s,o);return a===Yr.Name&&!(u instanceof Yr.Name)?r(i,u):u}}wt.mergeEvaluated={props:ede({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Yr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Yr._)`${n} || {}`).code((0,Yr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Yr._)`${n} || {}`),PQ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:cRe}),items:ede({mergeNames:(e,t,n)=>e.if((0,Yr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Yr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Yr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Yr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function cRe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Yr._)`{}`);return t!==void 0&&PQ(e,n,t),n}wt.evaluatedPropsToName=cRe;function PQ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Yr._)`${t}${(0,Yr.getProperty)(r)}`,!0))}wt.setEvaluated=PQ;const tde={};function nAt(e,t){return e.scopeValue("func",{ref:t,code:tde[t.code]||(tde[t.code]=new Y2t._Code(t.code))})}wt.useFunc=nAt;var cV;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(cV||(wt.Type=cV={}));function rAt(e,t,n){if(e instanceof Yr.Name){const r=t===cV.Num;return n?r?(0,Yr._)`"[" + ${e} + "]"`:(0,Yr._)`"['" + ${e} + "']"`:r?(0,Yr._)`"/" + ${e}`:(0,Yr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Yr.getProperty)(e).toString():"/"+NQ(e)}wt.getErrorPath=rAt;function fRe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=fRe;var Qh={};Object.defineProperty(Qh,"__esModule",{value:!0});const Zo=Dn,iAt={data:new Zo.Name("data"),valCxt:new Zo.Name("valCxt"),instancePath:new Zo.Name("instancePath"),parentData:new Zo.Name("parentData"),parentDataProperty:new Zo.Name("parentDataProperty"),rootData:new Zo.Name("rootData"),dynamicAnchors:new Zo.Name("dynamicAnchors"),vErrors:new Zo.Name("vErrors"),errors:new Zo.Name("errors"),this:new Zo.Name("this"),self:new Zo.Name("self"),scope:new Zo.Name("scope"),json:new Zo.Name("json"),jsonPos:new Zo.Name("jsonPos"),jsonLen:new Zo.Name("jsonLen"),jsonPart:new Zo.Name("jsonPart")};Qh.default=iAt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Dn,n=wt,r=Qh;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:S}=w,A=f(g,y,v);b??(T||S)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:T}=b,S=f(g,y,v);u(w,S),E||T||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(T,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${T}.schema`,v),g.assign((0,t._)`${T}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:T,it:S}=g,{opts:A,propertyName:C,topSchemaRef:k,schemaPath:N}=S;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,T],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(Lk);Object.defineProperty(ox,"__esModule",{value:!0});ox.boolOrEmptySchema=ox.topBoolOrEmptySchema=void 0;const sAt=Lk,oAt=Dn,aAt=Qh,uAt={message:"boolean schema is false"};function lAt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?dRe(e,!1):typeof n=="object"&&n.$async===!0?t.return(aAt.default.data):(t.assign((0,oAt._)`${r}.errors`,null),t.return(!0))}ox.topBoolOrEmptySchema=lAt;function cAt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),dRe(e)):n.var(t,!0)}ox.boolOrEmptySchema=cAt;function dRe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,sAt.reportError)(i,uAt,void 0,t)}var ks={},Z1={};Object.defineProperty(Z1,"__esModule",{value:!0});Z1.getRules=Z1.isJSONType=void 0;const fAt=["string","number","integer","boolean","null","object","array"],dAt=new Set(fAt);function hAt(e){return typeof e=="string"&&dAt.has(e)}Z1.isJSONType=hAt;function pAt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}Z1.getRules=pAt;var rm={};Object.defineProperty(rm,"__esModule",{value:!0});rm.shouldUseRule=rm.shouldUseGroup=rm.schemaHasRulesForType=void 0;function mAt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&hRe(e,r)}rm.schemaHasRulesForType=mAt;function hRe(e,t){return t.rules.some(n=>pRe(e,n))}rm.shouldUseGroup=hRe;function pRe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}rm.shouldUseRule=pRe;Object.defineProperty(ks,"__esModule",{value:!0});ks.reportTypeError=ks.checkDataTypes=ks.checkDataType=ks.coerceAndCheckDataType=ks.getJSONTypes=ks.getSchemaTypes=ks.DataType=void 0;const gAt=Z1,yAt=rm,vAt=Lk,wn=Dn,mRe=wt;var sE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(sE||(ks.DataType=sE={}));function bAt(e){const t=gRe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}ks.getSchemaTypes=bAt;function gRe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(gAt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}ks.getJSONTypes=gRe;function _At(e,t){const{gen:n,data:r,opts:i}=e,s=wAt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,yAt.schemaHasRulesForType)(e,t[0]));if(o){const a=DQ(t,r,i.strictNumbers,sE.Wrong);n.if(a,()=>{s.length?EAt(e,t,s):OQ(e)})}return o}ks.coerceAndCheckDataType=_At;const yRe=new Set(["string","number","integer","boolean","null"]);function wAt(e,t){return t?e.filter(n=>yRe.has(n)||t==="array"&&n==="array"):[]}function EAt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,wn._)`typeof ${i}`),a=r.let("coerced",(0,wn._)`undefined`);s.coerceTypes==="array"&&r.if((0,wn._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,wn._)`${i}[0]`).assign(o,(0,wn._)`typeof ${i}`).if(DQ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,wn._)`${a} !== undefined`);for(const l of n)(yRe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),OQ(e),r.endIf(),r.if((0,wn._)`${a} !== undefined`,()=>{r.assign(i,a),xAt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,wn._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,wn._)`"" + ${i}`).elseIf((0,wn._)`${i} === null`).assign(a,(0,wn._)`""`);return;case"number":r.elseIf((0,wn._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,wn._)`+${i}`);return;case"integer":r.elseIf((0,wn._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,wn._)`+${i}`);return;case"boolean":r.elseIf((0,wn._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,wn._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,wn._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,wn._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,wn._)`[${i}]`)}}}function xAt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,wn._)`${t} !== undefined`,()=>e.assign((0,wn._)`${t}[${n}]`,r))}function fV(e,t,n,r=sE.Correct){const i=r===sE.Correct?wn.operators.EQ:wn.operators.NEQ;let s;switch(e){case"null":return(0,wn._)`${t} ${i} null`;case"array":s=(0,wn._)`Array.isArray(${t})`;break;case"object":s=(0,wn._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,wn._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,wn._)`typeof ${t} ${i} ${e}`}return r===sE.Correct?s:(0,wn.not)(s);function o(a=wn.nil){return(0,wn.and)((0,wn._)`typeof ${t} == "number"`,a,n?(0,wn._)`isFinite(${t})`:wn.nil)}}ks.checkDataType=fV;function DQ(e,t,n,r){if(e.length===1)return fV(e[0],t,n,r);let i;const s=(0,mRe.toHash)(e);if(s.array&&s.object){const o=(0,wn._)`typeof ${t} != "object"`;i=s.null?o:(0,wn._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=wn.nil;s.number&&delete s.integer;for(const o in s)i=(0,wn.and)(i,fV(o,t,n,r));return i}ks.checkDataTypes=DQ;const SAt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,wn._)`{type: ${e}}`:(0,wn._)`{type: ${t}}`};function OQ(e){const t=TAt(e);(0,vAt.reportError)(t,SAt)}ks.reportTypeError=OQ;function TAt(e){const{gen:t,data:n,schema:r}=e,i=(0,mRe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var l4={};Object.defineProperty(l4,"__esModule",{value:!0});l4.assignDefaults=void 0;const P_=Dn,AAt=wt;function CAt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)nde(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>nde(e,s,i.default))}l4.assignDefaults=CAt;function nde(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,P_._)`${s}${(0,P_.getProperty)(t)}`;if(i){(0,AAt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,P_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,P_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,P_._)`${a} = ${(0,P_.stringify)(n)}`)}var Zd={},Nn={};Object.defineProperty(Nn,"__esModule",{value:!0});Nn.validateUnion=Nn.validateArray=Nn.usePattern=Nn.callValidateCode=Nn.schemaProperties=Nn.allSchemaProperties=Nn.noPropertyInData=Nn.propertyInData=Nn.isOwnProperty=Nn.hasPropFunc=Nn.reportMissingProp=Nn.checkMissingProp=Nn.checkReportMissingProp=void 0;const ai=Dn,$Q=wt,gg=Qh,IAt=wt;function kAt(e,t){const{gen:n,data:r,it:i}=e;n.if(LQ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,ai._)`${t}`},!0),e.error()})}Nn.checkReportMissingProp=kAt;function RAt({gen:e,data:t,it:{opts:n}},r,i){return(0,ai.or)(...r.map(s=>(0,ai.and)(LQ(e,t,s,n.ownProperties),(0,ai._)`${i} = ${s}`)))}Nn.checkMissingProp=RAt;function NAt(e,t){e.setParams({missingProperty:t},!0),e.error()}Nn.reportMissingProp=NAt;function vRe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,ai._)`Object.prototype.hasOwnProperty`})}Nn.hasPropFunc=vRe;function MQ(e,t,n){return(0,ai._)`${vRe(e)}.call(${t}, ${n})`}Nn.isOwnProperty=MQ;function PAt(e,t,n,r){const i=(0,ai._)`${t}${(0,ai.getProperty)(n)} !== undefined`;return r?(0,ai._)`${i} && ${MQ(e,t,n)}`:i}Nn.propertyInData=PAt;function LQ(e,t,n,r){const i=(0,ai._)`${t}${(0,ai.getProperty)(n)} === undefined`;return r?(0,ai.or)(i,(0,ai.not)(MQ(e,t,n))):i}Nn.noPropertyInData=LQ;function bRe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Nn.allSchemaProperties=bRe;function DAt(e,t){return bRe(t).filter(n=>!(0,$Q.alwaysValidSchema)(e,t[n]))}Nn.schemaProperties=DAt;function OAt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,ai._)`${e}, ${t}, ${r}${i}`:t,f=[[gg.default.instancePath,(0,ai.strConcat)(gg.default.instancePath,s)],[gg.default.parentData,o.parentData],[gg.default.parentDataProperty,o.parentDataProperty],[gg.default.rootData,gg.default.rootData]];o.opts.dynamicRef&&f.push([gg.default.dynamicAnchors,gg.default.dynamicAnchors]);const d=(0,ai._)`${c}, ${n.object(...f)}`;return u!==ai.nil?(0,ai._)`${a}.call(${u}, ${d})`:(0,ai._)`${a}(${d})`}Nn.callValidateCode=OAt;const $At=(0,ai._)`new RegExp`;function MAt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,ai._)`${i.code==="new RegExp"?$At:(0,IAt.useFunc)(e,i)}(${n}, ${r})`})}Nn.usePattern=MAt;function LAt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,ai._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:$Q.Type.Num},s),t.if((0,ai.not)(s),a)})}}Nn.validateArray=LAt;function FAt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,$Q.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,ai._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,ai.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Nn.validateUnion=FAt;Object.defineProperty(Zd,"__esModule",{value:!0});Zd.validateKeywordUsage=Zd.validSchemaType=Zd.funcKeywordCode=Zd.macroKeywordCode=void 0;const $a=Dn,zv=Qh,jAt=Nn,BAt=Lk;function UAt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=_Re(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:$a.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}Zd.macroKeywordCode=UAt;function zAt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;HAt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=_Re(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&rde(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&rde(e),g(()=>VAt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,$a._)`await `),v=>r.assign(f,!1).if((0,$a._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,$a._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,$a._)`${c}.errors`;return r.assign(y,null),m($a.nil),y}function m(y=t.async?(0,$a._)`await `:$a.nil){const v=u.opts.passContext?zv.default.this:zv.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,$a._)`${y}${(0,jAt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,$a.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}Zd.funcKeywordCode=zAt;function rde(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,$a._)`${r.parentData}[${r.parentDataProperty}]`))}function VAt(e,t){const{gen:n}=e;n.if((0,$a._)`Array.isArray(${t})`,()=>{n.assign(zv.default.vErrors,(0,$a._)`${zv.default.vErrors} === null ? ${t} : ${zv.default.vErrors}.concat(${t})`).assign(zv.default.errors,(0,$a._)`${zv.default.vErrors}.length`),(0,BAt.extendErrors)(e)},()=>e.error())}function HAt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function _Re(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,$a.stringify)(n)})}function qAt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}Zd.validSchemaType=qAt;function WAt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}Zd.validateKeywordUsage=WAt;var S0={};Object.defineProperty(S0,"__esModule",{value:!0});S0.extendSubschemaMode=S0.extendSubschemaData=S0.getSubschema=void 0;const Gd=Dn,wRe=wt;function GAt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,Gd._)`${e.schemaPath}${(0,Gd.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,Gd._)`${e.schemaPath}${(0,Gd.getProperty)(t)}${(0,Gd.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,wRe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}S0.getSubschema=GAt;function YAt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,Gd._)`${t.data}${(0,Gd.getProperty)(n)}`,!0);u(d),e.errorPath=(0,Gd.str)`${l}${(0,wRe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,Gd._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof Gd.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}S0.extendSubschemaData=YAt;function KAt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}S0.extendSubschemaMode=KAt;var Ao={},ERe={exports:{}},Jg=ERe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};TD(t,r,i,e,"",e)};Jg.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};Jg.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};Jg.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};Jg.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function TD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in Jg.arrayKeywords)for(var d=0;d<f.length;d++)TD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in Jg.propsKeywords){if(f&&typeof f=="object")for(var h in f)TD(e,t,n,f[h],i+"/"+c+"/"+XAt(h),s,i,c,r,h)}else(c in Jg.keywords||e.allKeys&&!(c in Jg.skipKeywords))&&TD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function XAt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var QAt=ERe.exports;Object.defineProperty(Ao,"__esModule",{value:!0});Ao.getSchemaRefs=Ao.resolveUrl=Ao.normalizeId=Ao._getFullPath=Ao.getFullPath=Ao.inlineRef=void 0;const JAt=wt,ZAt=XY,eCt=QAt,tCt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function nCt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!dV(e):t?xRe(e)<=t:!1}Ao.inlineRef=nCt;const rCt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function dV(e){for(const t in e){if(rCt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(dV)||typeof n=="object"&&dV(n))return!0}return!1}function xRe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!tCt.has(n)&&(typeof e[n]=="object"&&(0,JAt.eachItem)(e[n],r=>t+=xRe(r)),t===1/0))return 1/0}return t}function SRe(e,t="",n){n!==!1&&(t=oE(t));const r=e.parse(t);return TRe(e,r)}Ao.getFullPath=SRe;function TRe(e,t){return e.serialize(t).split("#")[0]+"#"}Ao._getFullPath=TRe;const iCt=/#\/?$/;function oE(e){return e?e.replace(iCt,""):""}Ao.normalizeId=oE;function sCt(e,t,n){return n=oE(n),e.resolve(t,n)}Ao.resolveUrl=sCt;const oCt=/^[a-z_][-a-z0-9._]*$/i;function aCt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=oE(e[n]||t),s={"":i},o=SRe(r,i,!1),a={},u=new Set;return eCt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=oE(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==oE(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!oCt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!ZAt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}Ao.getSchemaRefs=aCt;Object.defineProperty(Lf,"__esModule",{value:!0});Lf.getData=Lf.KeywordCxt=Lf.validateFunctionCode=void 0;const ARe=ox,ide=ks,FQ=rm,k$=ks,uCt=l4,PA=Zd,f9=S0,Dt=Dn,sn=Qh,lCt=Ao,im=wt,MT=Lk;function cCt(e){if(kRe(e)&&(RRe(e),IRe(e))){hCt(e);return}CRe(e,()=>(0,ARe.topBoolOrEmptySchema)(e))}Lf.validateFunctionCode=cCt;function CRe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Dt._)`${sn.default.data}, ${sn.default.valCxt}`,r.$async,()=>{e.code((0,Dt._)`"use strict"; ${sde(n,i)}`),dCt(e,i),e.code(s)}):e.func(t,(0,Dt._)`${sn.default.data}, ${fCt(i)}`,r.$async,()=>e.code(sde(n,i)).code(s))}function fCt(e){return(0,Dt._)`{${sn.default.instancePath}="", ${sn.default.parentData}, ${sn.default.parentDataProperty}, ${sn.default.rootData}=${sn.default.data}${e.dynamicRef?(0,Dt._)`, ${sn.default.dynamicAnchors}={}`:Dt.nil}}={}`}function dCt(e,t){e.if(sn.default.valCxt,()=>{e.var(sn.default.instancePath,(0,Dt._)`${sn.default.valCxt}.${sn.default.instancePath}`),e.var(sn.default.parentData,(0,Dt._)`${sn.default.valCxt}.${sn.default.parentData}`),e.var(sn.default.parentDataProperty,(0,Dt._)`${sn.default.valCxt}.${sn.default.parentDataProperty}`),e.var(sn.default.rootData,(0,Dt._)`${sn.default.valCxt}.${sn.default.rootData}`),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Dt._)`${sn.default.valCxt}.${sn.default.dynamicAnchors}`)},()=>{e.var(sn.default.instancePath,(0,Dt._)`""`),e.var(sn.default.parentData,(0,Dt._)`undefined`),e.var(sn.default.parentDataProperty,(0,Dt._)`undefined`),e.var(sn.default.rootData,sn.default.data),t.dynamicRef&&e.var(sn.default.dynamicAnchors,(0,Dt._)`{}`)})}function hCt(e){const{schema:t,opts:n,gen:r}=e;CRe(e,()=>{n.$comment&&t.$comment&&PRe(e),vCt(e),r.let(sn.default.vErrors,null),r.let(sn.default.errors,0),n.unevaluated&&pCt(e),NRe(e),wCt(e)})}function pCt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Dt._)`${n}.evaluated`),t.if((0,Dt._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Dt._)`${e.evaluated}.props`,(0,Dt._)`undefined`)),t.if((0,Dt._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Dt._)`${e.evaluated}.items`,(0,Dt._)`undefined`))}function sde(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Dt._)`/*# sourceURL=${n} */`:Dt.nil}function mCt(e,t){if(kRe(e)&&(RRe(e),IRe(e))){gCt(e,t);return}(0,ARe.boolOrEmptySchema)(e,t)}function IRe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function kRe(e){return typeof e.schema!="boolean"}function gCt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&PRe(e),bCt(e),_Ct(e);const s=r.const("_errs",sn.default.errors);NRe(e,s),r.var(t,(0,Dt._)`${s} === ${sn.default.errors}`)}function RRe(e){(0,im.checkUnknownRules)(e),yCt(e)}function NRe(e,t){if(e.opts.jtd)return ode(e,[],!1,t);const n=(0,ide.getSchemaTypes)(e.schema),r=(0,ide.coerceAndCheckDataType)(e,n);ode(e,n,!r,t)}function yCt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,im.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function vCt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,im.checkStrictMode)(e,"default is ignored in the schema root")}function bCt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,lCt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function _Ct(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function PRe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Dt._)`${sn.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Dt.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Dt._)`${sn.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function wCt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Dt._)`${sn.default.errors} === 0`,()=>t.return(sn.default.data),()=>t.throw((0,Dt._)`new ${i}(${sn.default.vErrors})`)):(t.assign((0,Dt._)`${r}.errors`,sn.default.vErrors),s.unevaluated&&ECt(e),t.return((0,Dt._)`${sn.default.errors} === 0`))}function ECt({gen:e,evaluated:t,props:n,items:r}){n instanceof Dt.Name&&e.assign((0,Dt._)`${t}.props`,n),r instanceof Dt.Name&&e.assign((0,Dt._)`${t}.items`,r)}function ode(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,im.schemaHasRulesButRef)(s,c))){i.block(()=>$Re(e,"$ref",c.all.$ref.definition));return}u.jtd||xCt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,FQ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,k$.checkDataType)(d.type,o,u.strictNumbers)),ade(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,k$.reportTypeError)(e)),i.endIf()):ade(e,d),a||i.if((0,Dt._)`${sn.default.errors} === ${r||0}`))}}function ade(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,uCt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,FQ.shouldUseRule)(r,s)&&$Re(e,s.keyword,s.definition,t.type)})}function xCt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(SCt(e,t),e.opts.allowUnionTypes||TCt(e,t),ACt(e,e.dataTypes))}function SCt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{DRe(e.dataTypes,n)||jQ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),ICt(e,t)}}function TCt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&jQ(e,"use allowUnionTypes to allow union type keyword")}function ACt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,FQ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>CCt(t,o))&&jQ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function CCt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function DRe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function ICt(e,t){const n=[];for(const r of e.dataTypes)DRe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function jQ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,im.checkStrictMode)(e,t,e.opts.strictTypes)}class ORe{constructor(t,n,r){if((0,PA.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,im.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",MRe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,PA.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",sn.default.errors))}result(t,n,r){this.failResult((0,Dt.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Dt.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Dt._)`${n} !== undefined && (${(0,Dt.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?MT.reportExtraError:MT.reportError)(this,this.def.error,n)}$dataError(){(0,MT.reportError)(this,this.def.$dataError||MT.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,MT.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Dt.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Dt.nil,n=Dt.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Dt.or)((0,Dt._)`${i} === undefined`,n)),t!==Dt.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Dt.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Dt.or)(o(),a());function o(){if(r.length){if(!(n instanceof Dt.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Dt._)`${(0,k$.checkDataTypes)(u,n,s.opts.strictNumbers,k$.DataType.Wrong)}`}return Dt.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Dt._)`!${u}(${n})`}return Dt.nil}}subschema(t,n){const r=(0,f9.getSubschema)(this.it,t);(0,f9.extendSubschemaData)(r,this.it,t),(0,f9.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return mCt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=im.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=im.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Dt.Name)),!0}}Lf.KeywordCxt=ORe;function $Re(e,t,n,r){const i=new ORe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,PA.funcKeywordCode)(i,n):"macro"in n?(0,PA.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,PA.funcKeywordCode)(i,n)}const kCt=/^\/(?:[^~]|~0|~1)*$/,RCt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function MRe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return sn.default.rootData;if(e[0]==="/"){if(!kCt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=sn.default.rootData}else{const l=RCt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Dt._)`${s}${(0,Dt.getProperty)((0,im.unescapeJsonPointer)(l))}`,o=(0,Dt._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Lf.getData=MRe;var Fk={};Object.defineProperty(Fk,"__esModule",{value:!0});class NCt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}Fk.default=NCt;var IS={};Object.defineProperty(IS,"__esModule",{value:!0});const d9=Ao;class PCt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,d9.resolveUrl)(t,n,r),this.missingSchema=(0,d9.normalizeId)((0,d9.getFullPath)(t,this.missingRef))}}IS.default=PCt;var Iu={};Object.defineProperty(Iu,"__esModule",{value:!0});Iu.resolveSchema=Iu.getCompilingSchema=Iu.resolveRef=Iu.compileSchema=Iu.SchemaEnv=void 0;const Zc=Dn,DCt=Fk,lv=Qh,xf=Ao,ude=wt,OCt=Lf;class c4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,xf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Iu.SchemaEnv=c4;function BQ(e){const t=LRe.call(this,e);if(t)return t;const n=(0,xf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new Zc.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:DCt.default,code:(0,Zc._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:lv.default.data,parentData:lv.default.parentData,parentDataProperty:lv.default.parentDataProperty,dataNames:[lv.default.data],dataPathArr:[Zc.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,Zc.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:Zc.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,Zc._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,OCt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(lv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${lv.default.self}`,`${lv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof Zc.Name?void 0:p,items:m instanceof Zc.Name?void 0:m,dynamicProps:p instanceof Zc.Name,dynamicItems:m instanceof Zc.Name},h.source&&(h.source.evaluated=(0,Zc.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Iu.compileSchema=BQ;function $Ct(e,t,n){var r;n=(0,xf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=FCt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new c4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=MCt.call(this,s)}Iu.resolveRef=$Ct;function MCt(e){return(0,xf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:BQ.call(this,e)}function LRe(e){for(const t of this._compilations)if(LCt(t,e))return t}Iu.getCompilingSchema=LRe;function LCt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function FCt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||f4.call(this,e,t)}function f4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,xf._getFullPath)(this.opts.uriResolver,n);let i=(0,xf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return h9.call(this,n,e);const s=(0,xf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=f4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:h9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||BQ.call(this,o),s===(0,xf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,xf.resolveUrl)(this.opts.uriResolver,i,l)),new c4({schema:a,schemaId:u,root:e,baseId:i})}return h9.call(this,n,o)}}Iu.resolveSchema=f4;const jCt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function h9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,ude.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!jCt.has(a)&&l&&(t=(0,xf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,ude.schemaHasRulesButRef)(n,this.RULES)){const a=(0,xf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=f4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new c4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const BCt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",UCt="Meta-schema for $data reference (JSON AnySchema extension proposal)",zCt="object",VCt=["$data"],HCt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},qCt=!1,WCt={$id:BCt,description:UCt,type:zCt,required:VCt,properties:HCt,additionalProperties:qCt};var UQ={},hV={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(to,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ae=ee.length-1,Se=1;Se<Ae;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Ae]=ee[Ae].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ae in ee)ae[Ae]=ee[Ae];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ae=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ae+"%"+Ae+Ae+"%"+Ae+Ae)+"|"+i("%[89A-Fa-f]"+Ae+"%"+Ae+Ae)+"|"+i("%"+Ae+Ae)),ot="[\\:\\/\\?\\#\\[\\]\\@]",St="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ht=r(ot,St),On=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",jn=oe?"[\\uE000-\\uF8FF]":"[]",pn=r(ee,ae,"[\\-\\.\\_\\~]",On);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(pn,St,"[\\:]"))+"*");var ir=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Ir=i(ir+"\\."+ir+"\\."+ir+"\\."+ir),Vt=i(Ae+"{1,4}"),sr=i(i(Vt+"\\:"+Vt)+"|"+Ir),Hr=i(i(Vt+"\\:")+"{6}"+sr),Jn=i("\\:\\:"+i(Vt+"\\:")+"{5}"+sr),ki=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+sr),Hs=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+sr),Jr=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+sr),mo=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+sr),Li=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+sr),Fi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),zo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Ia=i([Hr,Jn,ki,Hs,Jr,mo,Li,Fi,zo].join("|")),qs=i(i(pn+"|"+Se)+"+");i("[vV]"+Ae+"+\\."+r(pn,St,"[\\:]")+"+"),i(i(Se+"|"+r(pn,St))+"*");var Zl=i(Se+"|"+r(pn,St,"[\\:\\@]"));return i(i(Se+"|"+r(pn,St,"[\\@]"))+"+"),i(i(Zl+"|"+r("[\\/\\?]",jn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",pn,St),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",pn,St),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",pn,St),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",pn,St),"g"),NOT_QUERY:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]",jn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",pn,St,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",pn,St),"g"),UNRESERVED:new RegExp(pn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",pn,Ht),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Ir+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Ia+")"+i(i("\\%25|\\%(?!"+Ae+"{2})")+"("+qs+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ae=[],Se=!0,ot=!1,St=void 0;try{for(var Ht=ee[Symbol.iterator](),On;!(Se=(On=Ht.next()).done)&&(Ae.push(On.value),!(ae&&Ae.length===ae));Se=!0);}catch(jn){ot=!0,St=jn}finally{try{!Se&&Ht.return&&Ht.return()}finally{if(ot)throw St}}return Ae}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,T="-",S=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,O=Math.floor,D=String.fromCharCode;function $(oe){throw new RangeError(k[oe])}function F(oe,ee){for(var ae=[],Ae=oe.length;Ae--;)ae[Ae]=ee(oe[Ae]);return ae}function M(oe,ee){var ae=oe.split("@"),Ae="";ae.length>1&&(Ae=ae[0]+"@",oe=ae[1]),oe=oe.replace(C,".");var Se=oe.split("."),ot=F(Se,ee).join(".");return Ae+ot}function B(oe){for(var ee=[],ae=0,Ae=oe.length;ae<Ae;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Ae){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},P=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Ae){var Se=0;for(ee=Ae?O(ee/b):ee>>1,ee+=O(ee/ae);ee>N*y>>1;Se+=m)ee=O(ee/N);return O(Se+(N+1)*ee/(ee+v))},W=function(ee){var ae=[],Ae=ee.length,Se=0,ot=E,St=w,Ht=ee.lastIndexOf(T);Ht<0&&(Ht=0);for(var On=0;On<Ht;++On)ee.charCodeAt(On)>=128&&$("not-basic"),ae.push(ee.charCodeAt(On));for(var jn=Ht>0?Ht+1:0;jn<Ae;){for(var pn=Se,ir=1,Ir=m;;Ir+=m){jn>=Ae&&$("invalid-input");var Vt=H(ee.charCodeAt(jn++));(Vt>=m||Vt>O((p-Se)/ir))&&$("overflow"),Se+=Vt*ir;var sr=Ir<=St?g:Ir>=St+y?y:Ir-St;if(Vt<sr)break;var Hr=m-sr;ir>O(p/Hr)&&$("overflow"),ir*=Hr}var Jn=ae.length+1;St=z(Se-pn,Jn,pn==0),O(Se/Jn)>p-ot&&$("overflow"),ot+=O(Se/Jn),Se%=Jn,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ae=ee.length,Se=E,ot=0,St=w,Ht=!0,On=!1,jn=void 0;try{for(var pn=ee[Symbol.iterator](),ir;!(Ht=(ir=pn.next()).done);Ht=!0){var Ir=ir.value;Ir<128&&ae.push(D(Ir))}}catch(Oe){On=!0,jn=Oe}finally{try{!Ht&&pn.return&&pn.return()}finally{if(On)throw jn}}var Vt=ae.length,sr=Vt;for(Vt&&ae.push(T);sr<Ae;){var Hr=p,Jn=!0,ki=!1,Hs=void 0;try{for(var Jr=ee[Symbol.iterator](),mo;!(Jn=(mo=Jr.next()).done);Jn=!0){var Li=mo.value;Li>=Se&&Li<Hr&&(Hr=Li)}}catch(Oe){ki=!0,Hs=Oe}finally{try{!Jn&&Jr.return&&Jr.return()}finally{if(ki)throw Hs}}var Fi=sr+1;Hr-Se>O((p-ot)/Fi)&&$("overflow"),ot+=(Hr-Se)*Fi,Se=Hr;var zo=!0,Ia=!1,qs=void 0;try{for(var Zl=ee[Symbol.iterator](),md;!(zo=(md=Zl.next()).done);zo=!0){var Y=md.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var fe=Z<=St?g:Z>=St+y?y:Z-St;if(se<fe)break;var ye=se-fe,le=m-fe;ae.push(D(P(fe+ye%le,0))),se=O(ye/le)}ae.push(D(P(se,0))),St=z(ot,Fi,sr==Vt),ot=0,++sr}}}catch(Oe){Ia=!0,qs=Oe}finally{try{!zo&&Zl.return&&Zl.return()}finally{if(Ia)throw qs}}++ot,++Se}return ae.join("")},q=function(ee){return M(ee,function(ae){return S.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return A.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Ae=oe.length;ae<Ae;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Ae-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Ae-ae>=9){var St=parseInt(oe.substr(ae+4,2),16),Ht=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(St&63)<<6|Ht&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ve(oe,ee){function ae(Ae){var Se=he(Ae);return Se.match(ee.UNRESERVED)?Se:Ae}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function be(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ae=d(ae,2),Se=Ae[1];return Se?Se.split(".").map(Ie).join("."):oe}function Ke(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ae=d(ae,3),Se=Ae[1],ot=Ae[2];if(Se){for(var St=Se.toLowerCase().split("::").reverse(),Ht=d(St,2),On=Ht[0],jn=Ht[1],pn=jn?jn.split(":").map(Ie):[],ir=On.split(":").map(Ie),Ir=ee.IPV4ADDRESS.test(ir[ir.length-1]),Vt=Ir?7:8,sr=ir.length-Vt,Hr=Array(Vt),Jn=0;Jn<Vt;++Jn)Hr[Jn]=pn[Jn]||ir[sr+Jn]||"";Ir&&(Hr[Vt-1]=be(Hr[Vt-1],ee));var ki=Hr.reduce(function(Fi,zo,Ia){if(!zo||zo==="0"){var qs=Fi[Fi.length-1];qs&&qs.index+qs.length===Ia?qs.length++:Fi.push({index:Ia,length:1})}return Fi},[]),Hs=ki.sort(function(Fi,zo){return zo.length-Fi.length})[0],Jr=void 0;if(Hs&&Hs.length>1){var mo=Hr.slice(0,Hs.index),Li=Hr.slice(Hs.index+Hs.length);Jr=mo.join(":")+"::"+Li.join(":")}else Jr=Hr.join(":");return ot&&(Jr+="%"+ot),Jr}else return oe}var Ue=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ae=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(Ue);if(Se){yt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Ke(be(ae.host,Ae),Ae)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Ae.PCT_ENCODED,he).toLowerCase())}catch(St){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+St}ve(ae,c)}else ve(ae,Ae);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Ae=[];return oe.userinfo!==void 0&&(Ae.push(oe.userinfo),Ae.push("@")),oe.host!==void 0&&Ae.push(Ke(be(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,St){return"["+ot+(St?"%25"+St:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ae.push(":"),Ae.push(String(oe.port))),Ae.length?Ae.join(""):void 0}var ke=/^\.\.?\//,ze=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Ot=/^\/?(?:.|\n)*?(?=\/|$)/;function We(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(ze))oe=oe.replace(ze,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Ot);if(ae){var Ae=ae[0];oe=oe.slice(Ae.length),ee.push(Ae)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ge(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ae=[],Se=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Ht){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Ht}}ve(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ae.push(oe.scheme),Ae.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Ae.push("//"),Ae.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Ae.push("/")),oe.path!==void 0){var St=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(St=We(St)),ot===void 0&&(St=St.replace(/^\/\//,"/%2F")),Ae.push(St)}return oe.query!==void 0&&(Ae.push("?"),Ae.push(oe.query)),oe.fragment!==void 0&&(Ae.push("#"),Ae.push(oe.fragment)),Ae.join("")}function ht(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=arguments[3],Se={};return Ae||(oe=it(ge(oe,ae),ae),ee=it(ge(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=We(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=We(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=We(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function vt(oe,ee,ae){var Ae=u({scheme:"null"},ae);return ge(ht(it(oe,Ae),it(ee,Ae),Ae,!0),Ae)}function pe(oe,ee){return typeof oe=="string"?oe=ge(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ge(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=ge(it(oe,ae),ae):s(oe)==="object"&&(oe=ge(oe,ae)),typeof ee=="string"?ee=ge(it(ee,ae),ae):s(ee)==="object"&&(ee=ge(ee,ae)),oe===ee}function He(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ae=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ae?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Ln={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Ar(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var Fn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ae=ee;return Ae.secure=Ar(Ae),Ae.resourceName=(Ae.path||"/")+(Ae.query?"?"+Ae.query:""),Ae.path=void 0,Ae.query=void 0,Ae},serialize:function(ee,ae){if((ee.port===(Ar(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ae=ee.resourceName.split("?"),Se=d(Ae,2),ot=Se[0],St=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=St,ee.resourceName=void 0}return ee.fragment=void 0,ee}},cr={scheme:"wss",domainHost:Fn.domainHost,parse:Fn.parse,serialize:Fn.serialize},gn={},Cn="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",nr="[0-9A-Fa-f]",rr=i(i("%[EFef]"+nr+"%"+nr+nr+"%"+nr+nr)+"|"+i("%[89A-Fa-f]"+nr+"%"+nr+nr)+"|"+i("%"+nr+nr)),Uo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",$i="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",In=r($i,'[\\"\\\\]'),Mi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",Cr=new RegExp(Cn,"g"),ms=new RegExp(rr,"g"),lp=new RegExp(r("[^]",Uo,"[\\.]",'[\\"]',In),"g"),ul=new RegExp(r("[^]",Cn,Mi),"g"),pd=ul;function xr(oe){var ee=he(oe);return ee.match(Cr)?ee:oe}var Ii={scheme:"mailto",parse:function(ee,ae){var Ae=ee,Se=Ae.to=Ae.path?Ae.path.split(","):[];if(Ae.path=void 0,Ae.query){for(var ot=!1,St={},Ht=Ae.query.split("&"),On=0,jn=Ht.length;On<jn;++On){var pn=Ht[On].split("=");switch(pn[0]){case"to":for(var ir=pn[1].split(","),Ir=0,Vt=ir.length;Ir<Vt;++Ir)Se.push(ir[Ir]);break;case"subject":Ae.subject=ut(pn[1],ae);break;case"body":Ae.body=ut(pn[1],ae);break;default:ot=!0,St[ut(pn[0],ae)]=ut(pn[1],ae);break}}ot&&(Ae.headers=St)}Ae.query=void 0;for(var sr=0,Hr=Se.length;sr<Hr;++sr){var Jn=Se[sr].split("@");if(Jn[0]=ut(Jn[0]),ae.unicodeSupport)Jn[1]=ut(Jn[1],ae).toLowerCase();else try{Jn[1]=ne.toASCII(ut(Jn[1],ae).toLowerCase())}catch(ki){Ae.error=Ae.error||"Email address's domain name can not be converted to ASCII via punycode: "+ki}Se[sr]=Jn.join("@")}return Ae},serialize:function(ee,ae){var Ae=ee,Se=a(ee.to);if(Se){for(var ot=0,St=Se.length;ot<St;++ot){var Ht=String(Se[ot]),On=Ht.lastIndexOf("@"),jn=Ht.slice(0,On).replace(ms,xr).replace(ms,o).replace(lp,de),pn=Ht.slice(On+1);try{pn=ae.iri?ne.toUnicode(pn):ne.toASCII(ut(pn,ae).toLowerCase())}catch(sr){Ae.error=Ae.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+sr}Se[ot]=jn+"@"+pn}Ae.path=Se.join(",")}var ir=ee.headers=ee.headers||{};ee.subject&&(ir.subject=ee.subject),ee.body&&(ir.body=ee.body);var Ir=[];for(var Vt in ir)ir[Vt]!==gn[Vt]&&Ir.push(Vt.replace(ms,xr).replace(ms,o).replace(ul,de)+"="+ir[Vt].replace(ms,xr).replace(ms,o).replace(pd,de));return Ir.length&&(Ae.query=Ir.join("&")),Ae}},Qr=/^([^\:]+)\:(.*)/,uu={scheme:"urn",parse:function(ee,ae){var Ae=ee.path&&ee.path.match(Qr),Se=ee;if(Ae){var ot=ae.scheme||Se.scheme||"urn",St=Ae[1].toLowerCase(),Ht=Ae[2],On=ot+":"+(ae.nid||St),jn=ce[On];Se.nid=St,Se.nss=Ht,Se.path=void 0,jn&&(Se=jn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Ae=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Ae+":"+(ae.nid||Se),St=ce[ot];St&&(ee=St.serialize(ee,ae));var Ht=ee,On=ee.nss;return Ht.path=(Se||ae.nid)+":"+On,Ht}},Aa=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Ca={scheme:"urn:uuid",parse:function(ee,ae){var Ae=ee;return Ae.uuid=Ae.nss,Ae.nss=void 0,!ae.tolerant&&(!Ae.uuid||!Ae.uuid.match(Aa))&&(Ae.error=Ae.error||"UUID is not valid."),Ae},serialize:function(ee,ae){var Ae=ee;return Ae.nss=(ee.uuid||"").toLowerCase(),Ae}};ce[_t.scheme]=_t,ce[Ln.scheme]=Ln,ce[Fn.scheme]=Fn,ce[cr.scheme]=cr,ce[Ii.scheme]=Ii,ce[uu.scheme]=uu,ce[Ca.scheme]=Ca,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=We,n.serialize=ge,n.resolveComponents=ht,n.resolve=vt,n.normalize=pe,n.equal=Ce,n.escapeComponent=He,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(hV,hV.exports);var GCt=hV.exports;Object.defineProperty(UQ,"__esModule",{value:!0});const FRe=GCt;FRe.code='require("ajv/dist/runtime/uri").default';UQ.default=FRe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Lf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Dn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=Fk,i=IS,s=Z1,o=Iu,a=Dn,u=Ao,l=ks,c=wt,f=WCt,d=UQ,h=(P,z)=>new RegExp(P,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(P){var z,W,j,q,G,ne,ce,de,he,ve,Ie,be,Ke,Ue,yt,it,_e,ke,ze,ct,Ot,We,ge,ht,vt;const pe=P.strict,Ce=(z=P.code)===null||z===void 0?void 0:z.optimize,He=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=P.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=P.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=P.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ve=(he=P.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ve!==void 0?ve:"log",strictTuples:(be=(Ie=P.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&be!==void 0?be:"log",strictRequired:(Ue=(Ke=P.strictRequired)!==null&&Ke!==void 0?Ke:pe)!==null&&Ue!==void 0?Ue:!1,code:P.code?{...P.code,optimize:He,regExp:ut}:{optimize:He,regExp:ut},loopRequired:(yt=P.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=P.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=P.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=P.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(ze=P.inlineRefs)!==null&&ze!==void 0?ze:!0,schemaId:(ct=P.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Ot=P.addUsedSchema)!==null&&Ot!==void 0?Ot:!0,validateSchema:(We=P.validateSchema)!==null&&We!==void 0?We:!0,validateFormats:(ge=P.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(ht=P.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(vt=P.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=O(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&C.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),S.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ve,Ie){await G.call(this,ve.$schema);const be=this._addSchema(ve,Ie);return be.validate||ne.call(this,be)}async function G(ve){ve&&!this.getSchema(ve)&&await q.call(this,{$ref:ve},!0)}async function ne(ve){try{return this._compileSchemaEnv(ve)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ve)}}function ce({missingSchema:ve,missingRef:Ie}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Ie} cannot be resolved`)}async function de(ve){const Ie=await he.call(this,ve);this.refs[ve]||await G.call(this,Ie.$schema),this.refs[ve]||this.addSchema(Ie,ve,W)}async function he(ve){const Ie=this._loading[ve];if(Ie)return Ie;try{return await(this._loading[ve]=j(ve))}finally{delete this._loading[ve]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=T.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ve=ne[ce];he&&ve&&(ne[ce]=H(ve))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(P,z,W,j="error"){for(const q in P){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${P[G]}`)}}function T(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function S(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const z in P)this.addSchema(P[z],z)}function A(){for(const P in this.opts.formats){const z=this.opts.formats[P];z&&this.addFormat(P,z)}}function C(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in P){const W=P[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const P={...this.opts};for(const z of p)delete P[z];return P}const N={log(){},warn(){},error(){}};function O(P){if(P===!1)return N;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const D=/^[a-z_$][a-z0-9_$:-]*$/i;function $(P,z){const{RULES:W}=this;if((0,c.eachItem)(P,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!D.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(P,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[P]=!0,!z)return;const ce={keyword:P,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[P]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function M(P,z,W){const j=P.rules.findIndex(q=>q.keyword===W);j>=0?P.rules.splice(j,0,z):(P.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(P){let{metaSchema:z}=P;z!==void 0&&(P.$data&&this.opts.$data&&(z=H(z)),P.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(P){return{anyOf:[P,U]}}})(oRe);var zQ={},VQ={},HQ={};Object.defineProperty(HQ,"__esModule",{value:!0});const YCt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};HQ.default=YCt;var eb={};Object.defineProperty(eb,"__esModule",{value:!0});eb.callRef=eb.getValidate=void 0;const KCt=IS,lde=Nn,yu=Dn,D_=Qh,cde=Iu,JN=wt,XCt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=cde.resolveRef.call(u,l,i,n);if(c===void 0)throw new KCt.default(r.opts.uriResolver,i,n);if(c instanceof cde.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return AD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return AD(e,(0,yu._)`${p}.validate`,l,l.$async)}function d(p){const m=jRe(e,p);AD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,yu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:yu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function jRe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,yu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}eb.getValidate=jRe;function AD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?D_.default.this:yu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,yu._)`await ${(0,lde.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,yu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,lde.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,yu._)`${p}.errors`;i.assign(D_.default.vErrors,(0,yu._)`${D_.default.vErrors} === null ? ${m} : ${D_.default.vErrors}.concat(${m})`),i.assign(D_.default.errors,(0,yu._)`${D_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=JN.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,yu._)`${p}.evaluated.props`);s.props=JN.mergeEvaluated.props(i,y,s.props,yu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=JN.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,yu._)`${p}.evaluated.items`);s.items=JN.mergeEvaluated.items(i,y,s.items,yu.Name)}}}eb.callRef=AD;eb.default=XCt;Object.defineProperty(VQ,"__esModule",{value:!0});const QCt=HQ,JCt=eb,ZCt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",QCt.default,JCt.default];VQ.default=ZCt;var qQ={},WQ={};Object.defineProperty(WQ,"__esModule",{value:!0});const R$=Dn,yg=R$.operators,N$={maximum:{okStr:"<=",ok:yg.LTE,fail:yg.GT},minimum:{okStr:">=",ok:yg.GTE,fail:yg.LT},exclusiveMaximum:{okStr:"<",ok:yg.LT,fail:yg.GTE},exclusiveMinimum:{okStr:">",ok:yg.GT,fail:yg.LTE}},eIt={message:({keyword:e,schemaCode:t})=>(0,R$.str)`must be ${N$[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,R$._)`{comparison: ${N$[e].okStr}, limit: ${t}}`},tIt={keyword:Object.keys(N$),type:"number",schemaType:"number",$data:!0,error:eIt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,R$._)`${n} ${N$[t].fail} ${r} || isNaN(${n})`)}};WQ.default=tIt;var GQ={};Object.defineProperty(GQ,"__esModule",{value:!0});const DA=Dn,nIt={message:({schemaCode:e})=>(0,DA.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,DA._)`{multipleOf: ${e}}`},rIt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:nIt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,DA._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,DA._)`${o} !== parseInt(${o})`;e.fail$data((0,DA._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};GQ.default=rIt;var YQ={},KQ={};Object.defineProperty(KQ,"__esModule",{value:!0});function BRe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}KQ.default=BRe;BRe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(YQ,"__esModule",{value:!0});const Vv=Dn,iIt=wt,sIt=KQ,oIt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,Vv.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,Vv._)`{limit: ${e}}`},aIt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:oIt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?Vv.operators.GT:Vv.operators.LT,o=i.opts.unicode===!1?(0,Vv._)`${n}.length`:(0,Vv._)`${(0,iIt.useFunc)(e.gen,sIt.default)}(${n})`;e.fail$data((0,Vv._)`${o} ${s} ${r}`)}};YQ.default=aIt;var XQ={};Object.defineProperty(XQ,"__esModule",{value:!0});const uIt=Nn,P$=Dn,lIt={message:({schemaCode:e})=>(0,P$.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,P$._)`{pattern: ${e}}`},cIt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:lIt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,P$._)`(new RegExp(${i}, ${o}))`:(0,uIt.usePattern)(e,r);e.fail$data((0,P$._)`!${a}.test(${t})`)}};XQ.default=cIt;var QQ={};Object.defineProperty(QQ,"__esModule",{value:!0});const OA=Dn,fIt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,OA.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,OA._)`{limit: ${e}}`},dIt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:fIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?OA.operators.GT:OA.operators.LT;e.fail$data((0,OA._)`Object.keys(${n}).length ${i} ${r}`)}};QQ.default=dIt;var JQ={};Object.defineProperty(JQ,"__esModule",{value:!0});const LT=Nn,$A=Dn,hIt=wt,pIt={message:({params:{missingProperty:e}})=>(0,$A.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,$A._)`{missingProperty: ${e}}`},mIt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:pIt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,hIt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data($A.nil,f);else for(const h of n)(0,LT.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,LT.checkMissingProp)(e,n,h)),(0,LT.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,LT.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,LT.propertyInData)(t,i,h,a.ownProperties)),t.if((0,$A.not)(p),()=>{e.error(),t.break()})},$A.nil)}}};JQ.default=mIt;var ZQ={};Object.defineProperty(ZQ,"__esModule",{value:!0});const MA=Dn,gIt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,MA.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,MA._)`{limit: ${e}}`},yIt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:gIt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?MA.operators.GT:MA.operators.LT;e.fail$data((0,MA._)`${n}.length ${i} ${r}`)}};ZQ.default=yIt;var eJ={},jk={};Object.defineProperty(jk,"__esModule",{value:!0});const URe=XY;URe.code='require("ajv/dist/runtime/equal").default';jk.default=URe;Object.defineProperty(eJ,"__esModule",{value:!0});const p9=ks,_o=Dn,vIt=wt,bIt=jk,_It={message:({params:{i:e,j:t}})=>(0,_o.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,_o._)`{i: ${e}, j: ${t}}`},wIt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:_It,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,p9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,_o._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,_o._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,_o._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,p9.checkDataTypes)(l,g,a.opts.strictNumbers,p9.DataType.Wrong),v=t.const("indices",(0,_o._)`{}`);t.for((0,_o._)`;${p}--;`,()=>{t.let(g,(0,_o._)`${n}[${p}]`),t.if(y,(0,_o._)`continue`),l.length>1&&t.if((0,_o._)`typeof ${g} == "string"`,(0,_o._)`${g} += "_"`),t.if((0,_o._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,_o._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,_o._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,vIt.useFunc)(t,bIt.default),y=t.name("outer");t.label(y).for((0,_o._)`;${p}--;`,()=>t.for((0,_o._)`${m} = ${p}; ${m}--;`,()=>t.if((0,_o._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};eJ.default=wIt;var tJ={};Object.defineProperty(tJ,"__esModule",{value:!0});const pV=Dn,EIt=wt,xIt=jk,SIt={message:"must be equal to constant",params:({schemaCode:e})=>(0,pV._)`{allowedValue: ${e}}`},TIt={keyword:"const",$data:!0,error:SIt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,pV._)`!${(0,EIt.useFunc)(t,xIt.default)}(${n}, ${i})`):e.fail((0,pV._)`${s} !== ${n}`)}};tJ.default=TIt;var nJ={};Object.defineProperty(nJ,"__esModule",{value:!0});const O2=Dn,AIt=wt,CIt=jk,IIt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,O2._)`{allowedValues: ${e}}`},kIt={keyword:"enum",schemaType:"array",$data:!0,error:IIt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,AIt.useFunc)(t,CIt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,O2.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,O2._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,O2._)`${l()}(${n}, ${h}[${p}])`:(0,O2._)`${n} === ${m}`}}};nJ.default=kIt;Object.defineProperty(qQ,"__esModule",{value:!0});const RIt=WQ,NIt=GQ,PIt=YQ,DIt=XQ,OIt=QQ,$It=JQ,MIt=ZQ,LIt=eJ,FIt=tJ,jIt=nJ,BIt=[RIt.default,NIt.default,PIt.default,DIt.default,OIt.default,$It.default,MIt.default,LIt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},FIt.default,jIt.default];qQ.default=BIt;var rJ={},kS={};Object.defineProperty(kS,"__esModule",{value:!0});kS.validateAdditionalItems=void 0;const Hv=Dn,mV=wt,UIt={message:({params:{len:e}})=>(0,Hv.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Hv._)`{limit: ${e}}`},zIt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:UIt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,mV.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}zRe(e,r)}};function zRe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,Hv._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,Hv._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,mV.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,Hv._)`${a} <= ${t.length}`);n.if((0,Hv.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:mV.Type.Num},l),o.allErrors||n.if((0,Hv.not)(l),()=>n.break())})}}kS.validateAdditionalItems=zRe;kS.default=zIt;var iJ={},RS={};Object.defineProperty(RS,"__esModule",{value:!0});RS.validateTuple=void 0;const fde=Dn,CD=wt,VIt=Nn,HIt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return VRe(e,"additionalItems",t);n.items=!0,!(0,CD.alwaysValidSchema)(n,t)&&e.ok((0,VIt.validateArray)(e))}};function VRe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=CD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,fde._)`${s}.length`);n.forEach((f,d)=>{(0,CD.alwaysValidSchema)(a,f)||(r.if((0,fde._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,CD.checkStrictMode)(a,g,d.strictTuples)}}}RS.validateTuple=VRe;RS.default=HIt;Object.defineProperty(iJ,"__esModule",{value:!0});const qIt=RS,WIt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,qIt.validateTuple)(e,"items")};iJ.default=WIt;var sJ={};Object.defineProperty(sJ,"__esModule",{value:!0});const dde=Dn,GIt=wt,YIt=Nn,KIt=kS,XIt={message:({params:{len:e}})=>(0,dde.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,dde._)`{limit: ${e}}`},QIt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:XIt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,GIt.alwaysValidSchema)(r,t)&&(i?(0,KIt.validateAdditionalItems)(e,i):e.ok((0,YIt.validateArray)(e)))}};sJ.default=QIt;var oJ={};Object.defineProperty(oJ,"__esModule",{value:!0});const cc=Dn,ZN=wt,JIt={message:({params:{min:e,max:t}})=>t===void 0?(0,cc.str)`must contain at least ${e} valid item(s)`:(0,cc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,cc._)`{minContains: ${e}}`:(0,cc._)`{minContains: ${e}, maxContains: ${t}}`},ZIt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:JIt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,cc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,ZN.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,ZN.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,ZN.alwaysValidSchema)(s,n)){let m=(0,cc._)`${c} >= ${o}`;a!==void 0&&(m=(0,cc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,cc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:ZN.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,cc._)`${m}++`),a===void 0?t.if((0,cc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,cc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,cc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};oJ.default=ZIt;var HRe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Dn,n=wt,r=Nn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(HRe);var aJ={};Object.defineProperty(aJ,"__esModule",{value:!0});const qRe=Dn,ekt=wt,tkt={message:"property name must be valid",params:({params:e})=>(0,qRe._)`{propertyName: ${e.propertyName}}`},nkt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:tkt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,ekt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,qRe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};aJ.default=nkt;var d4={};Object.defineProperty(d4,"__esModule",{value:!0});const eP=Nn,sf=Dn,rkt=Qh,tP=wt,ikt={message:"must NOT have additional properties",params:({params:e})=>(0,sf._)`{additionalProperty: ${e.additionalProperty}}`},skt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:ikt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,tP.alwaysValidSchema)(o,n))return;const l=(0,eP.allSchemaProperties)(r.properties),c=(0,eP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,sf._)`${s} === ${rkt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,tP.schemaRefOrVal)(o,r.properties,"properties");y=(0,eP.isOwnProperty)(t,v,g)}else l.length?y=(0,sf.or)(...l.map(v=>(0,sf._)`${g} === ${v}`)):y=sf.nil;return c.length&&(y=(0,sf.or)(y,...c.map(v=>(0,sf._)`${(0,eP.usePattern)(e,v)}.test(${g})`))),(0,sf.not)(y)}function h(g){t.code((0,sf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,tP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,sf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,sf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:tP.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};d4.default=skt;var uJ={};Object.defineProperty(uJ,"__esModule",{value:!0});const okt=Lf,hde=Nn,m9=wt,pde=d4,akt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&pde.default.code(new okt.KeywordCxt(s,pde.default,"additionalProperties"));const o=(0,hde.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=m9.mergeEvaluated.props(t,(0,m9.toHash)(o),s.props));const a=o.filter(f=>!(0,m9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,hde.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};uJ.default=akt;var lJ={};Object.defineProperty(lJ,"__esModule",{value:!0});const mde=Nn,nP=Dn,gde=wt,yde=wt,ukt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,mde.allSchemaProperties)(n),u=a.filter(m=>(0,gde.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof nP.Name)&&(s.props=(0,yde.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,gde.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,nP._)`${(0,mde.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:yde.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,nP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,nP.not)(c),()=>t.break())})})}}};lJ.default=ukt;var cJ={};Object.defineProperty(cJ,"__esModule",{value:!0});const lkt=wt,ckt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,lkt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};cJ.default=ckt;var fJ={};Object.defineProperty(fJ,"__esModule",{value:!0});const fkt=Nn,dkt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:fkt.validateUnion,error:{message:"must match a schema in anyOf"}};fJ.default=dkt;var dJ={};Object.defineProperty(dJ,"__esModule",{value:!0});const ID=Dn,hkt=wt,pkt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,ID._)`{passingSchemas: ${e.passing}}`},mkt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:pkt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,hkt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,ID._)`${u} && ${o}`).assign(o,!1).assign(a,(0,ID._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,ID.Name)})})}}};dJ.default=mkt;var hJ={};Object.defineProperty(hJ,"__esModule",{value:!0});const gkt=wt,ykt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,gkt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};hJ.default=ykt;var pJ={};Object.defineProperty(pJ,"__esModule",{value:!0});const D$=Dn,WRe=wt,vkt={message:({params:e})=>(0,D$.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,D$._)`{failingKeyword: ${e.ifClause}}`},bkt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:vkt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,WRe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=vde(r,"then"),s=vde(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,D$.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,D$._)`${c}`):e.setParams({ifClause:c})}}}};function vde(e,t){const n=e.schema[t];return n!==void 0&&!(0,WRe.alwaysValidSchema)(e,n)}pJ.default=bkt;var mJ={};Object.defineProperty(mJ,"__esModule",{value:!0});const _kt=wt,wkt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,_kt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};mJ.default=wkt;Object.defineProperty(rJ,"__esModule",{value:!0});const Ekt=kS,xkt=iJ,Skt=RS,Tkt=sJ,Akt=oJ,Ckt=HRe,Ikt=aJ,kkt=d4,Rkt=uJ,Nkt=lJ,Pkt=cJ,Dkt=fJ,Okt=dJ,$kt=hJ,Mkt=pJ,Lkt=mJ;function Fkt(e=!1){const t=[Pkt.default,Dkt.default,Okt.default,$kt.default,Mkt.default,Lkt.default,Ikt.default,kkt.default,Ckt.default,Rkt.default,Nkt.default];return e?t.push(xkt.default,Tkt.default):t.push(Ekt.default,Skt.default),t.push(Akt.default),t}rJ.default=Fkt;var gJ={},yJ={};Object.defineProperty(yJ,"__esModule",{value:!0});const ns=Dn,jkt={message:({schemaCode:e})=>(0,ns.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ns._)`{format: ${e}}`},Bkt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:jkt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ns._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ns._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ns._)`${m}.type || "string"`).assign(y,(0,ns._)`${m}.validate`),()=>n.assign(g,(0,ns._)`"string"`).assign(y,m)),e.fail$data((0,ns.or)(v(),b()));function v(){return u.strictSchema===!1?ns.nil:(0,ns._)`${o} && !${y}`}function b(){const w=c.$async?(0,ns._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ns._)`${y}(${r})`,E=(0,ns._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ns._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const T=E instanceof RegExp?(0,ns.regexpCode)(E):u.code.formats?(0,ns._)`${u.code.formats}${(0,ns.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:T});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ns._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ns._)`await ${y}(${r})`}return typeof g=="function"?(0,ns._)`${y}(${r})`:(0,ns._)`${y}.test(${r})`}}}};yJ.default=Bkt;Object.defineProperty(gJ,"__esModule",{value:!0});const Ukt=yJ,zkt=[Ukt.default];gJ.default=zkt;var ax={};Object.defineProperty(ax,"__esModule",{value:!0});ax.contentVocabulary=ax.metadataVocabulary=void 0;ax.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];ax.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(zQ,"__esModule",{value:!0});const Vkt=VQ,Hkt=qQ,qkt=rJ,Wkt=gJ,bde=ax,Gkt=[Vkt.default,Hkt.default,(0,qkt.default)(),Wkt.default,bde.metadataVocabulary,bde.contentVocabulary];zQ.default=Gkt;var vJ={},h4={};Object.defineProperty(h4,"__esModule",{value:!0});h4.DiscrError=void 0;var _de;(function(e){e.Tag="tag",e.Mapping="mapping"})(_de||(h4.DiscrError=_de={}));Object.defineProperty(vJ,"__esModule",{value:!0});const tw=Dn,gV=h4,wde=Iu,Ykt=IS,Kkt=wt,Xkt={message:({params:{discrError:e,tagName:t}})=>e===gV.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,tw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},Qkt={keyword:"discriminator",type:"object",schemaType:"object",error:Xkt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,tw._)`${n}${(0,tw.getProperty)(a)}`);t.if((0,tw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:gV.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,tw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:gV.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,tw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,Kkt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=wde.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof wde.SchemaEnv&&(E=E.schema),E===void 0)throw new Ykt.default(s.opts.uriResolver,s.baseId,S)}const T=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const T of w.enum)b(T,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};vJ.default=Qkt;const Jkt="http://json-schema.org/draft-07/schema#",Zkt="http://json-schema.org/draft-07/schema#",eRt="Core schema meta-schema",tRt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},nRt=["object","boolean"],rRt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},iRt={$schema:Jkt,$id:Zkt,title:eRt,definitions:tRt,type:nRt,properties:rRt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=oRe,r=zQ,i=vJ,s=iRt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Lf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Dn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=Fk;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=IS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(uV,uV.exports);var sRt=uV.exports;const GRe=Gl(sRt),oRt="#/definitions/StudyConfig",aRt="http://json-schema.org/draft-07/schema#",uRt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},lRt={$ref:oRt,$schema:aRt,definitions:uRt},cRt="#/definitions/GlobalConfig",fRt="http://json-schema.org/draft-07/schema#",dRt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},hRt={$ref:cRt,$schema:fRt,definitions:dRt},YRe=new GRe;YRe.addSchema(hRt);const Ede=YRe.getSchema("#/definitions/GlobalConfig"),KRe=new GRe;KRe.addSchema(lRt);const g9=KRe.getSchema("#/definitions/StudyConfig");function pRt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function p4(e){return e.baseComponent!==void 0}function mRt(e){const t=RQ.parse(e),n=Ede(t),r=pRt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Ede.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function XRe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):XRe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function gRt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;p4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=mxe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return XRe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function yRt(e){let t=!1,n;try{n=RQ.parse(e),t=g9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=gRt(n);r=[...g9.errors||[],...s],i=o}else r=g9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function QRe(){const e=Km(),{setAlertModal:t}=qh(),n=Wh();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var xde=Object.prototype.hasOwnProperty;function Sde(e,t,n){for(n of e.keys())if(LA(n,t))return n}function LA(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&LA(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Sde(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Sde(t,i),!i)||!LA(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(xde.call(e,n)&&++r&&!xde.call(t,n)||!(n in t)||!LA(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function vRt(e){var t=I.useRef(e),n=I.useRef(0);return LA(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function bRt(e,t){return I.useEffect(e,vRt(t))}const _Rt=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return bRt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Tde=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],JRe=["participantId","trialId","trialOrder","responseId"];function bJ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function wRt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(wm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=p4(u)&&u.baseComponent&&n.baseComponents?YY({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function ERt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...JRe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await wRt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function xRt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...Tde].filter(h=>h!=="meta")),a=As(),{value:u,status:l,error:c}=_Rt(ERt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);bJ(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(Ki,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(qG,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Tde],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(aQe,{}),variant:"filled"}),_.jsx(kl,{h:"md"}),_.jsxs(me,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(qt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(qt.Thead,{children:_.jsx(qt.Tr,{children:u.header.map(h=>_.jsx(qt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Nt,{direction:"row",justify:"space-between",align:"center",children:[h,!JRe.includes(h)&&_.jsx(Nb,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(_Y,{size:16})})]})},h))})}),_.jsx(qt.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(qt.Tr,{children:u.header.map(m=>_.jsx(qt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(Yx,{variant:"light",children:c.message}):null,_.jsx($l,{visible:l==="pending"||l==="idle"})]}),_.jsx(kl,{h:"sm"}),_.jsx(Nt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(et,{children:d})}),_.jsx(kl,{h:"md"}),_.jsxs(Ss,{justify:"right",children:[_.jsx(on,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(on,{leftSection:_.jsx(wwe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function SRt(){const e=U0(),{storageEngine:t}=As(),{answers:n}=qc(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),QRe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=I.useCallback(async()=>{bJ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=Bb(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(ym,{style:{height:"100%"},children:_.jsx(Nt,{direction:"column",children:r||!g?_.jsx(et,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(Ka,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(et,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx(kl,{h:"lg"}),_.jsx(ym,{children:_.jsx(Bc,{color:"blue"})})]})})})}function TRt(){return _.jsx(et,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function ARt(){var d;const e=U0(),t=Km(),n=Oy()||"Notfound",r=e.components[n],i=KY();QRe();const{storageEngine:s}=As(),o=Wh(),{setAlertModal:a}=qh();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="localStorage"&&o(a({show:!0,message:"There was an issue connecting to the localStorage database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(SRt,{});if(n==="__trainingFailed")return _.jsx(TRt,{});if(n==="Notfound")return _.jsx(U1,{email:e.uiConfig.contactEmail});const u=p4(r)&&e.baseComponents?YY({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(Ka,{text:l}),_.jsx(e3,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(A2t,{currentConfig:u}),u.type==="website"&&_.jsx(pat,{currentConfig:u}),u.type==="image"&&_.jsx(gat,{currentConfig:u}),u.type==="react-component"&&_.jsx(T2t,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(Ka,{text:l}),_.jsx(e3,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function yV(e){const[t]=yY();return _.jsx(gY,{...e,to:{pathname:e.to,search:t.toString()}})}function ZRe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=ZRe(o,t,n,r),r.includes(o.orderPath))break}return i}function eNe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=eNe(s,r)}}),n}function CRt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function IRt({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=Bb(),c=Vh(),f=Km(),[d,{close:h,open:p}]=dL(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?ZRe(n,e,r,a.orderPath):-1,{trialId:y}=vm(),v=y===e,b=s?f===g:f===`reviewer-${e}`,w=u?v:b,E=I.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),S=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return _.jsxs(No,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(No.Target,{children:_.jsx(me,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(BL,{active:w,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(me,{children:[i&&_.jsx(YXe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?_.jsx(et,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(et,{size:"sm",display:"inline",children:e})]}),onClick:S,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(No.Dropdown,{onMouseLeave:h,children:_.jsx(et,{size:"sm",children:_.jsxs(me,{children:[m.description&&_.jsxs(me,{children:[_.jsx(et,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(et,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(et,{children:[_.jsx(et,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(et,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function O$({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=b0(e.components);return n&&r&&(o=CRt(b0(e.components),b0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(IRt,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?wm(c).length-eNe(u,c):0,d=wm(u);return _.jsx(BL,{label:_.jsxs(me,{style:{opacity:f>0?1:.5},children:[_.jsx(et,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(WXe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(g0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(g0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(me,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(O$,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function tNe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function Ade({text:e}){return _.jsx(xi,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(vwe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function kRt(){const{sequence:e,metadata:t}=qc(f=>f),{toggleStudyBrowser:n}=qh(),r=U0(),i=Wh(),s=Bb(),o=dwe(`/${s}`),{storageEngine:a}=As(),u=I.useMemo(()=>{let f=b0(r.sequence);return f=WY(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return _.jsxs(di.Aside,{p:"0",children:[_.jsx(di.Section,{children:_.jsxs(Nt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(et,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(on,{variant:"light",leftSection:_.jsx(bY,{size:14}),onClick:()=>tNe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(Vm,{onClick:()=>i(n()),mt:1})]})}),_.jsx(di.Section,{grow:!0,component:pm,p:"xs",pt:0,children:_.jsxs(rs,{value:l,onChange:c,children:[_.jsx(me,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(rs.List,{grow:!0,children:[_.jsxs(rs.Tab,{value:"participant",children:["Participant View",_.jsx(Ade,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(rs.Tab,{value:"allTrials",children:["All Trials View",_.jsx(Ade,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(rs.Panel,{value:"participant",children:_.jsx(O$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(rs.Panel,{value:"allTrials",children:_.jsx(O$,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function RRt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=qc(E=>E),i=GY(),s=Wh(),{toggleShowHelpText:o,toggleStudyBrowser:a}=qh(),{storageEngine:u}=As(),l=Km(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=I.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=Bb(),y=dwe(`/${g}`),v=I.useRef(null),[b,w]=I.useState(!1);return I.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(di.Header,{p:"md",children:_.jsxs(za,{mt:-7,align:"center",children:[_.jsx(za.Col,{span:4,children:_.jsxs(Nt,{align:"center",children:[_.jsx(Ry,{w:40,src:`${Uu}${p}`,alt:"Study Logo"}),_.jsx(kl,{w:"md"}),_.jsx(Si,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(za.Col,{span:4,children:m&&_.jsx(Zx,{radius:"md",size:"lg",value:f})}),_.jsx(za.Col,{span:4,children:_.jsxs(Ss,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(xi,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(g0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(on,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Su,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Su.Target,{children:_.jsx(Nb,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(nQe,{})})}),_.jsxs(Su.Dropdown,{children:[e&&_.jsx(Su.Item,{leftSection:_.jsx(pQe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Su.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(uQe,{size:14}),children:"Contact"}),e&&_.jsx(Su.Item,{leftSection:_.jsx(bY,{size:14}),onClick:()=>tNe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function nNe(e,t){var n;return p4(e)&&t.baseComponents?YY({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function NRt(){var u;const e=(u=U0())==null?void 0:u.uiConfig.sidebar,t=U0(),n=Oy(),r=t.components[n],i=I.useMemo(()=>r?nNe(r,t):null,[r,t]),s=KY(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(di.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(di.Section,{bg:"gray.3",p:"md",children:_.jsxs(et,{c:"gray.9",children:[_.jsx(et,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(Ka,{text:o})]})}),_.jsx(di.Section,{p:"md",children:_.jsx(e3,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(di.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(e3,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function PRt(){const{showHelpText:e,config:t}=qc(u=>u),n=Wh(),{toggleShowHelpText:r}=qh(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await QY(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Ki,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(Ka,{text:i}):_.jsx(U1,{path:t.uiConfig.helpTextPath})})}function DRt(){const{alertModal:e}=qc(o=>o),{setAlertModal:t}=qh(),n=Wh(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(Ki,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(Yx,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(qXe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(et,{my:"md",children:e.message}),_.jsx(Ss,{w:"100%",justify:"end",children:_.jsx(on,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function ORt(){const e=I.useRef([]),t=U0(),n=t.uiConfig.windowEventDebounceTime??100,r=qc(d=>d.showStudyBrowser);I.useEffect(()=>{const d=Ed(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Ed(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Ed(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Ed(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Ed(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Ed(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Ed(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=Ed(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Ed(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=As(),o=Bb(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return _.jsx(wxe.Provider,{value:e,children:_.jsxs(di,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(NRt,{}),_.jsx(kRt,{}),_.jsx(RRt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(PRt,{}),_.jsx(DRt,{}),_.jsx(di.Main,{children:_.jsx(RXe,{})})]})})}function $Rt(e,t=!1){return typeof e=="number"?Cde(e,t):Cde(e.length,t).map(r=>r.map(i=>e[i]))}function Cde(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function rNe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=rNe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function MRt(e,t){const n=b0(e);return rNe(n,t,"root")}function iNe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&iNe(s,t,i,o)})}function LRt(e){const t=[];return iNe(e,t,"",0),t}function Ide(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return $Rt(i.sort(()=>.5-Math.random()),!0)}function FRt(e){const n=LRt(e.sequence).map(s=>({[s]:Ide(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=MRt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Ide(e,o))})}),i}var jRt={VITE_BASE_PATH:"/mqp2024/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`,VITE_STORAGE_ENGINE:"localStorage",VITE_RECAPTCHAV3TOKEN:"6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth",BASE_URL:"/mqp2024/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function BRt(e){const t=await(await fetch(`${Uu}${e}`)).text();return yRt(t)}async function m4(e,t){const n=t.configsList.find(r=>xwe(r)===e);if(n){const r=t.configs[n];return await BRt(`${r.path}`)}return null}async function URt(e){const t={},n=e.configsList.filter(i=>jRt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>m4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function zRt({globalConfig:e}){const t=Bb(),[n,r]=I.useState(null),i=e.configsList.includes(t);I.useEffect(()=>{m4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=I.useState([]),[a,u]=I.useState(null),{storageEngine:l}=As(),[c]=yY();I.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await FRt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(T=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,b,m),E=await Dot(t,n,w.sequence,b,w.answers);u(E),o([{element:_.jsx(ORt,{}),children:[{path:"/",element:_.jsx(yV,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Si,{order:2,mb:8,children:"Error loading config"}),_.jsx(g7,{issues:n.errors,type:"error"})]}):_.jsx(ARt,{})}]}])}h()},[l,n,t,c]);const f=pwe(s);let d=null;return i?s.length===0?d=_.jsx($l,{visible:!0}):d=f&&a?_.jsx(_xe.Provider,{value:a,children:_.jsx(Cst,{store:a.store,children:f})}):_.jsx(U1,{}):d=_.jsx(U1,{}),d}var kde={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sNe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},VRt=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},_J={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(sNe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):VRt(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new HRt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class HRt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const qRt=function(e){const t=sNe(e);return _J.encodeByteArray(t,!0)},$$=function(e){return qRt(e).replace(/\./g,"")},oNe=function(e){try{return _J.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aNe(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WRt=()=>aNe().__FIREBASE_DEFAULTS__,GRt=()=>{if(typeof process>"u"||typeof kde>"u")return;const e=kde.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},YRt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&oNe(e[1]);return t&&JSON.parse(t)},g4=()=>{try{return WRt()||GRt()||YRt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},uNe=e=>{var t,n;return(n=(t=g4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},KRt=e=>{const t=uNe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},lNe=()=>{var e;return(e=g4())===null||e===void 0?void 0:e.config},cNe=e=>{var t;return(t=g4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aI{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XRt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[$$(JSON.stringify(n)),$$(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function QRt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Lo())}function JRt(){var e;const t=(e=g4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function ZRt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function eNt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function tNt(){const e=Lo();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function nNt(){return!JRt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function wJ(){try{return typeof indexedDB=="object"}catch{return!1}}function rNt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iNt="FirebaseError";class Jh extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=iNt,Object.setPrototypeOf(this,Jh.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,NS.prototype.create)}}class NS{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?sNt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new Jh(i,a,r)}}function sNt(e,t){return e.replace(oNt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const oNt=/\{\$([^}]+)}/g;function aNt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function uI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Rde(s)&&Rde(o)){if(!uI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Rde(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function uNt(e,t){const n=new lNt(e,t);return n.subscribe.bind(n)}class lNt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");cNt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=y9),i.error===void 0&&(i.error=y9),i.complete===void 0&&(i.complete=y9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function cNt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function y9(){}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fNt=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dNt=1e3,hNt=2,pNt=4*60*60*1e3,mNt=.5;function gNt(e,t=dNt,n=hNt){const r=t*Math.pow(n,e),i=Math.round(mNt*r*(Math.random()-.5)*2);return Math.min(pNt,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ii(e){return e&&e._delegate?e._delegate:e}class Rh{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ov="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yNt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new aI;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(bNt(t))try{this.getOrInitializeService({instanceIdentifier:Ov})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Ov){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Ov){return this.instances.has(t)}getOptions(t=Ov){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:vNt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Ov){return this.component?this.component.multipleInstances?t:Ov:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function vNt(e){return e===Ov?void 0:e}function bNt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Nt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new yNt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Gn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Gn||(Gn={}));const wNt={debug:Gn.DEBUG,verbose:Gn.VERBOSE,info:Gn.INFO,warn:Gn.WARN,error:Gn.ERROR,silent:Gn.SILENT},ENt=Gn.INFO,xNt={[Gn.DEBUG]:"log",[Gn.VERBOSE]:"log",[Gn.INFO]:"info",[Gn.WARN]:"warn",[Gn.ERROR]:"error"},SNt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=xNt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class y4{constructor(t){this.name=t,this._logLevel=ENt,this._logHandler=SNt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Gn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?wNt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Gn.DEBUG,...t),this._logHandler(this,Gn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Gn.VERBOSE,...t),this._logHandler(this,Gn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Gn.INFO,...t),this._logHandler(this,Gn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Gn.WARN,...t),this._logHandler(this,Gn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Gn.ERROR,...t),this._logHandler(this,Gn.ERROR,...t)}}const TNt=(e,t)=>t.some(n=>e instanceof n);let Nde,Pde;function ANt(){return Nde||(Nde=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function CNt(){return Pde||(Pde=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const fNe=new WeakMap,vV=new WeakMap,dNe=new WeakMap,v9=new WeakMap,EJ=new WeakMap;function INt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(T0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&fNe.set(n,e)}).catch(()=>{}),EJ.set(t,e),t}function kNt(e){if(vV.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});vV.set(e,t)}let bV={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return vV.get(e);if(t==="objectStoreNames")return e.objectStoreNames||dNe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return T0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function RNt(e){bV=e(bV)}function NNt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(b9(this),t,...n);return dNe.set(r,t.sort?t.sort():[t]),T0(r)}:CNt().includes(e)?function(...t){return e.apply(b9(this),t),T0(fNe.get(this))}:function(...t){return T0(e.apply(b9(this),t))}}function PNt(e){return typeof e=="function"?NNt(e):(e instanceof IDBTransaction&&kNt(e),TNt(e,ANt())?new Proxy(e,bV):e)}function T0(e){if(e instanceof IDBRequest)return INt(e);if(v9.has(e))return v9.get(e);const t=PNt(e);return t!==e&&(v9.set(e,t),EJ.set(t,e)),t}const b9=e=>EJ.get(e);function DNt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=T0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(T0(o.result),u.oldVersion,u.newVersion,T0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const ONt=["get","getKey","getAll","getAllKeys","count"],$Nt=["put","add","delete","clear"],_9=new Map;function Dde(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(_9.get(t))return _9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=$Nt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||ONt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return _9.set(t,s),s}RNt(e=>({...e,get:(t,n,r)=>Dde(t,n)||e.get(t,n,r),has:(t,n)=>!!Dde(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MNt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(LNt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function LNt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const _V="@firebase/app",Ode="0.10.5";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tb=new y4("@firebase/app"),FNt="@firebase/app-compat",jNt="@firebase/analytics-compat",BNt="@firebase/analytics",UNt="@firebase/app-check-compat",zNt="@firebase/app-check",VNt="@firebase/auth",HNt="@firebase/auth-compat",qNt="@firebase/database",WNt="@firebase/database-compat",GNt="@firebase/functions",YNt="@firebase/functions-compat",KNt="@firebase/installations",XNt="@firebase/installations-compat",QNt="@firebase/messaging",JNt="@firebase/messaging-compat",ZNt="@firebase/performance",ePt="@firebase/performance-compat",tPt="@firebase/remote-config",nPt="@firebase/remote-config-compat",rPt="@firebase/storage",iPt="@firebase/storage-compat",sPt="@firebase/firestore",oPt="@firebase/vertexai-preview",aPt="@firebase/firestore-compat",uPt="firebase",lPt="10.12.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wV="[DEFAULT]",cPt={[_V]:"fire-core",[FNt]:"fire-core-compat",[BNt]:"fire-analytics",[jNt]:"fire-analytics-compat",[zNt]:"fire-app-check",[UNt]:"fire-app-check-compat",[VNt]:"fire-auth",[HNt]:"fire-auth-compat",[qNt]:"fire-rtdb",[WNt]:"fire-rtdb-compat",[GNt]:"fire-fn",[YNt]:"fire-fn-compat",[KNt]:"fire-iid",[XNt]:"fire-iid-compat",[QNt]:"fire-fcm",[JNt]:"fire-fcm-compat",[ZNt]:"fire-perf",[ePt]:"fire-perf-compat",[tPt]:"fire-rc",[nPt]:"fire-rc-compat",[rPt]:"fire-gcs",[iPt]:"fire-gcs-compat",[sPt]:"fire-fst",[aPt]:"fire-fst-compat",[oPt]:"fire-vertex","fire-js":"fire-js",[uPt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M$=new Map,fPt=new Map,EV=new Map;function $de(e,t){try{e.container.addComponent(t)}catch(n){tb.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function Pm(e){const t=e.name;if(EV.has(t))return tb.debug(`There were multiple attempts to register component ${t}.`),!1;EV.set(t,e);for(const n of M$.values())$de(n,e);for(const n of fPt.values())$de(n,e);return!0}function PS(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function eh(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dPt={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},A0=new NS("app","Firebase",dPt);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hPt{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Rh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw A0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gb=lPt;function hNe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:wV,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw A0.create("bad-app-name",{appName:String(i)});if(n||(n=lNe()),!n)throw A0.create("no-options");const s=M$.get(i);if(s){if(uI(n,s.options)&&uI(r,s.config))return s;throw A0.create("duplicate-app",{appName:i})}const o=new _Nt(i);for(const u of EV.values())o.addComponent(u);const a=new hPt(n,r,o);return M$.set(i,a),a}function xJ(e=wV){const t=M$.get(e);if(!t&&e===wV&&lNe())return hNe();if(!t)throw A0.create("no-app",{appName:e});return t}function Ff(e,t,n){var r;let i=(r=cPt[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),tb.warn(a.join(" "));return}Pm(new Rh(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pPt="firebase-heartbeat-database",mPt=1,lI="firebase-heartbeat-store";let w9=null;function pNe(){return w9||(w9=DNt(pPt,mPt,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(lI)}catch(n){console.warn(n)}}}}).catch(e=>{throw A0.create("idb-open",{originalErrorMessage:e.message})})),w9}async function gPt(e){try{const n=(await pNe()).transaction(lI),r=await n.objectStore(lI).get(mNe(e));return await n.done,r}catch(t){if(t instanceof Jh)tb.warn(t.message);else{const n=A0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});tb.warn(n.message)}}}async function Mde(e,t){try{const r=(await pNe()).transaction(lI,"readwrite");await r.objectStore(lI).put(t,mNe(e)),await r.done}catch(n){if(n instanceof Jh)tb.warn(n.message);else{const r=A0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tb.warn(r.message)}}}function mNe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yPt=1024,vPt=30*24*60*60*1e3;class bPt{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new wPt(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Lde();if(!(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null))&&!(this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)))return this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=vPt}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){var t;if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Lde(),{heartbeatsToSend:r,unsentEntries:i}=_Pt(this._heartbeatsCache.heartbeats),s=$$(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}}function Lde(){return new Date().toISOString().substring(0,10)}function _Pt(e,t=yPt){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Fde(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Fde(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class wPt{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return wJ()?rNt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await gPt(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Mde(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function Fde(e){return $$(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EPt(e){Pm(new Rh("platform-logger",t=>new MNt(t),"PRIVATE")),Pm(new Rh("heartbeat",t=>new bPt(t),"PRIVATE")),Ff(_V,Ode,e),Ff(_V,Ode,"esm2017"),Ff("fire-js","")}EPt("");function gNe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xPt=gNe,yNe=new NS("auth","Firebase",gNe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L$=new y4("@firebase/auth");function SPt(e,...t){L$.logLevel<=Gn.WARN&&L$.warn(`Auth (${Gb}): ${e}`,...t)}function kD(e,...t){L$.logLevel<=Gn.ERROR&&L$.error(`Auth (${Gb}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nh(e,...t){throw TJ(e,...t)}function jf(e,...t){return TJ(e,...t)}function SJ(e,t,n){const r=Object.assign(Object.assign({},xPt()),{[t]:n});return new NS("auth","Firebase",r).create(t,{appName:e.name})}function C0(e){return SJ(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function TPt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Nh(e,"argument-error"),SJ(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function TJ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return yNe.create(e,...t)}function an(e,t,...n){if(!e)throw TJ(t,...n)}function Gp(e){const t="INTERNAL ASSERTION FAILED: "+e;throw kD(t),new Error(t)}function Dm(e,t){e||Gp(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xV(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function APt(){return jde()==="http:"||jde()==="https:"}function jde(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CPt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(APt()||ZRt()||"connection"in navigator)?navigator.onLine:!0}function IPt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(t,n){this.shortDelay=t,this.longDelay=n,Dm(n>t,"Short delay should be less than long delay!"),this.isMobile=QRt()||eNt()}get(){return CPt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AJ(e,t){Dm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vNe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Gp("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Gp("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Gp("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kPt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RPt=new Uk(3e4,6e4);function v4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function DS(e,t,n,r,i={}){return bNe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=Bk(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),vNe.fetch()(wNe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function bNe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},kPt),t);try{const i=new NPt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw rP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw rP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw rP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw rP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw SJ(e,c,l);Nh(e,c)}}catch(i){if(i instanceof Jh)throw i;Nh(e,"network-request-failed",{message:String(i)})}}async function _Ne(e,t,n,r,i={}){const s=await DS(e,t,n,r,i);return"mfaPendingCredential"in s&&Nh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function wNe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?AJ(e.config,i):`${e.config.apiScheme}://${i}`}class NPt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(jf(this.auth,"network-request-failed")),RPt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function rP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=jf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function PPt(e,t){return DS(e,"POST","/v1/accounts:delete",t)}async function ENe(e,t){return DS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FA(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function DPt(e,t=!1){const n=ii(e),r=await n.getIdToken(t),i=CJ(r);an(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:FA(E9(i.auth_time)),issuedAtTime:FA(E9(i.iat)),expirationTime:FA(E9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function E9(e){return Number(e)*1e3}function CJ(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return kD("JWT malformed, contained fewer than 3 sections"),null;try{const i=oNe(n);return i?JSON.parse(i):(kD("Failed to decode base64 JWT payload"),null)}catch(i){return kD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Bde(e){const t=CJ(e);return an(t,"internal-error"),an(typeof t.exp<"u","internal-error"),an(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof Jh&&OPt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function OPt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Pt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SV{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=FA(this.lastLoginAt),this.creationTime=FA(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F$(e){var t;const n=e.auth,r=await e.getIdToken(),i=await cI(e,ENe(n,{idToken:r}));an(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?xNe(s.providerUserInfo):[],a=LPt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new SV(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function MPt(e){const t=ii(e);await F$(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function LPt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function xNe(e){return e.map(t=>{var{providerId:n}=t,r=QI(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function FPt(e,t){const n=await bNe(e,{},async()=>{const r=Bk({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=wNe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",vNe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jPt(e,t){return DS(e,"POST","/v2/accounts:revokeToken",v4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){an(t.idToken,"internal-error"),an(typeof t.idToken<"u","internal-error"),an(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Bde(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){an(t.length!==0,"internal-error");const n=Bde(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await FPt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new aE;return r&&(an(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(an(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(an(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new aE,this.toJSON())}_performRefresh(){return Gp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vg(e,t){an(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class Yp{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=QI(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $Pt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new SV(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await cI(this,this.stsTokenManager.getToken(this.auth,t));return an(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return DPt(this,t)}reload(){return MPt(this)}_assign(t){this!==t&&(an(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new Yp(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await F$(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(eh(this.auth.app))return Promise.reject(C0(this.auth));const t=await this.getIdToken();return await cI(this,PPt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:S}=n;an(b&&S,t,"internal-error");const A=aE.fromJSON(this.name,S);an(typeof b=="string",t,"internal-error"),vg(f,t.name),vg(d,t.name),an(typeof w=="boolean",t,"internal-error"),an(typeof E=="boolean",t,"internal-error"),vg(h,t.name),vg(p,t.name),vg(m,t.name),vg(g,t.name),vg(y,t.name),vg(v,t.name);const C=new Yp({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(C.providerData=T.map(k=>Object.assign({},k))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new aE;i.updateFromServerResponse(n);const s=new Yp({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await F$(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];an(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?xNe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new aE;a.updateFromIdToken(r);const u=new Yp({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new SV(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ude=new Map;function Kp(e){Dm(e instanceof Function,"Expected a class definition");let t=Ude.get(e);return t?(Dm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Ude.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SNe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}SNe.type="NONE";const zde=SNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RD(e,t,n){return`firebase:${e}:${t}:${n}`}class uE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=RD(this.userKey,i.apiKey,s),this.fullPersistenceKey=RD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?Yp._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new uE(Kp(zde),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||Kp(zde);const o=RD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=Yp._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new uE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new uE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vde(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(CNe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(TNe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(kNe(t))return"Blackberry";if(RNe(t))return"Webos";if(IJ(t))return"Safari";if((t.includes("chrome/")||ANe(t))&&!t.includes("edge/"))return"Chrome";if(INe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function TNe(e=Lo()){return/firefox\//i.test(e)}function IJ(e=Lo()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function ANe(e=Lo()){return/crios\//i.test(e)}function CNe(e=Lo()){return/iemobile/i.test(e)}function INe(e=Lo()){return/android/i.test(e)}function kNe(e=Lo()){return/blackberry/i.test(e)}function RNe(e=Lo()){return/webos/i.test(e)}function b4(e=Lo()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function BPt(e=Lo()){var t;return b4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function UPt(){return tNt()&&document.documentMode===10}function NNe(e=Lo()){return b4(e)||INe(e)||RNe(e)||kNe(e)||/windows phone/i.test(e)||CNe(e)}function zPt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PNe(e,t=[]){let n;switch(e){case"Browser":n=Vde(Lo());break;case"Worker":n=`${Vde(Lo())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${Gb}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VPt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HPt(e,t={}){return DS(e,"GET","/v2/passwordPolicy",v4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qPt=6;class WPt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:qPt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GPt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Hde(this),this.idTokenSubscription=new Hde(this),this.beforeStateQueue=new VPt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=yNe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=Kp(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await uE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await ENe(this,{idToken:t}),r=await Yp._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(eh(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await F$(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=IPt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(eh(this.app))return Promise.reject(C0(this));const n=t?ii(t):null;return n&&an(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return eh(this.app)?Promise.reject(C0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return eh(this.app)?Promise.reject(C0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Kp(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await HPt(this),n=new WPt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new NS("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jPt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&Kp(t)||this._popupRedirectResolver;an(n,this,"argument-error"),this.redirectPersistenceManager=await uE.create(this,[Kp(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=PNe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&SPt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function zk(e){return ii(e)}class Hde{constructor(t){this.auth=t,this.observer=null,this.addObserver=uNt(n=>this.observer=n)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kJ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function YPt(e){kJ=e}function KPt(e){return kJ.loadJS(e)}function XPt(){return kJ.gapiScript}function QPt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JPt(e,t){const n=PS(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(uI(s,t??{}))return i;Nh(i,"already-initialized")}return n.initialize({options:t})}function ZPt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Kp);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function eDt(e,t,n){const r=zk(e);an(r._canInitEmulator,r,"emulator-config-failed"),an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=DNe(t),{host:o,port:a}=tDt(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),nDt()}function DNe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function tDt(e){const t=DNe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:qde(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:qde(o)}}}function qde(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function nDt(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ONe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return Gp("not implemented")}_getIdTokenResponse(t){return Gp("not implemented")}_linkToIdToken(t,n){return Gp("not implemented")}_getReauthenticationResolver(t){return Gp("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lE(e,t){return _Ne(e,"POST","/v1/accounts:signInWithIdp",v4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rDt="http://localhost";class nb extends ONe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new nb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Nh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=QI(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new nb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return lE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,lE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,lE(t,n)}buildRequest(){const t={requestUri:rDt,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=Bk(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RJ{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vk extends RJ{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ug extends Vk{constructor(){super("facebook.com")}static credential(t){return nb._fromParams({providerId:Ug.PROVIDER_ID,signInMethod:Ug.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return Ug.credentialFromTaggedObject(t)}static credentialFromError(t){return Ug.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return Ug.credential(t.oauthAccessToken)}catch{return null}}}Ug.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ug.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jp extends Vk{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return nb._fromParams({providerId:jp.PROVIDER_ID,signInMethod:jp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return jp.credentialFromTaggedObject(t)}static credentialFromError(t){return jp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return jp.credential(n,r)}catch{return null}}}jp.GOOGLE_SIGN_IN_METHOD="google.com";jp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zg extends Vk{constructor(){super("github.com")}static credential(t){return nb._fromParams({providerId:zg.PROVIDER_ID,signInMethod:zg.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return zg.credentialFromTaggedObject(t)}static credentialFromError(t){return zg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return zg.credential(t.oauthAccessToken)}catch{return null}}}zg.GITHUB_SIGN_IN_METHOD="github.com";zg.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vg extends Vk{constructor(){super("twitter.com")}static credential(t,n){return nb._fromParams({providerId:Vg.PROVIDER_ID,signInMethod:Vg.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Vg.credentialFromTaggedObject(t)}static credentialFromError(t){return Vg.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Vg.credential(n,r)}catch{return null}}}Vg.TWITTER_SIGN_IN_METHOD="twitter.com";Vg.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function iDt(e,t){return _Ne(e,"POST","/v1/accounts:signUp",v4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await Yp._fromIdTokenResponse(t,r,i),o=Wde(r);return new sy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Wde(r);return new sy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Wde(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sDt(e){var t;if(eh(e.app))return Promise.reject(C0(e));const n=zk(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new sy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await iDt(n,{returnSecureToken:!0}),i=await sy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j$ extends Jh{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,j$.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new j$(t,n,r,i)}}function $Ne(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?j$._fromErrorAndOperation(e,s,t,r):s})}async function oDt(e,t,n=!1){const r=await cI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return sy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function aDt(e,t,n=!1){const{auth:r}=e;if(eh(r.app))return Promise.reject(C0(r));const i="reauthenticate";try{const s=await cI(e,$Ne(r,i,t,e),n);an(s.idToken,r,"internal-error");const o=CJ(s.idToken);an(o,r,"internal-error");const{sub:a}=o;return an(e.uid===a,r,"user-mismatch"),sy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Nh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uDt(e,t,n=!1){if(eh(e.app))return Promise.reject(C0(e));const r="signIn",i=await $Ne(e,r,t),s=await sy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function lDt(e,t,n,r){return ii(e).onIdTokenChanged(t,n,r)}function cDt(e,t,n){return ii(e).beforeAuthStateChanged(t,n)}function fDt(e,t,n,r){return ii(e).onAuthStateChanged(t,n,r)}function dDt(e){return ii(e).signOut()}const B$="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MNe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(B$,"1"),this.storage.removeItem(B$),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hDt(){const e=Lo();return IJ(e)||b4(e)}const pDt=1e3,mDt=10;class LNe extends MNe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=hDt()&&zPt(),this.fallbackToPolling=NNe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);UPt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,mDt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},pDt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}LNe.type="LOCAL";const gDt=LNe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FNe extends MNe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}FNe.type="SESSION";const jNe=FNe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yDt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new _4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await yDt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}_4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NJ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vDt{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=NJ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hh(){return window}function bDt(e){hh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BNe(){return typeof hh().WorkerGlobalScope<"u"&&typeof hh().importScripts=="function"}async function _Dt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function wDt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function EDt(){return BNe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UNe="firebaseLocalStorageDb",xDt=1,U$="firebaseLocalStorage",zNe="fbase_key";class Hk{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function w4(e,t){return e.transaction([U$],t?"readwrite":"readonly").objectStore(U$)}function SDt(){const e=indexedDB.deleteDatabase(UNe);return new Hk(e).toPromise()}function TV(){const e=indexedDB.open(UNe,xDt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(U$,{keyPath:zNe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(U$)?t(r):(r.close(),await SDt(),t(await TV()))})})}async function Gde(e,t,n){const r=w4(e,!0).put({[zNe]:t,value:n});return new Hk(r).toPromise()}async function TDt(e,t){const n=w4(e,!1).get(t),r=await new Hk(n).toPromise();return r===void 0?null:r.value}function Yde(e,t){const n=w4(e,!0).delete(t);return new Hk(n).toPromise()}const ADt=800,CDt=3;class VNe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await TV(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>CDt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return BNe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=_4._getInstance(EDt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await _Dt(),!this.activeServiceWorker)return;this.sender=new vDt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||wDt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await TV();return await Gde(t,B$,"1"),await Yde(t,B$),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Gde(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>TDt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>Yde(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=w4(i,!1).getAll();return new Hk(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),ADt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VNe.type="LOCAL";const IDt=VNe;new Uk(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HNe(e,t){return t?Kp(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PJ extends ONe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return lE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return lE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return lE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function kDt(e){return uDt(e.auth,new PJ(e),e.bypassAuthState)}function RDt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),aDt(n,new PJ(e),e.bypassAuthState)}async function NDt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),oDt(n,new PJ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qNe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return kDt;case"linkViaPopup":case"linkViaRedirect":return NDt;case"reauthViaPopup":case"reauthViaRedirect":return RDt;default:Nh(this.auth,"internal-error")}}resolve(t){Dm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Dm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PDt=new Uk(2e3,1e4);async function DDt(e,t,n){if(eh(e.app))return Promise.reject(jf(e,"operation-not-supported-in-this-environment"));const r=zk(e);TPt(e,t,RJ);const i=HNe(r,n);return new h1(r,"signInViaPopup",t,i).executeNotNull()}class h1 extends qNe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,h1.currentPopupAction&&h1.currentPopupAction.cancel(),h1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return an(t,this.auth,"internal-error"),t}async onExecution(){Dm(this.filter.length===1,"Popup operations only handle one event");const t=NJ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(jf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(jf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,h1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,PDt.get())};t()}}h1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ODt="pendingRedirect",ND=new Map;class $Dt extends qNe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=ND.get(this.auth._key());if(!t){try{const r=await MDt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}ND.set(this.auth._key(),t)}return this.bypassAuthState||ND.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function MDt(e,t){const n=jDt(t),r=FDt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function LDt(e,t){ND.set(e._key(),t)}function FDt(e){return Kp(e._redirectPersistence)}function jDt(e){return RD(ODt,e.config.apiKey,e.name)}async function BDt(e,t,n=!1){if(eh(e.app))return Promise.reject(C0(e));const r=zk(e),i=HNe(r,t),o=await new $Dt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UDt=10*60*1e3;class zDt{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!VDt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!WNe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(jf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=UDt&&this.cachedEventUids.clear(),this.cachedEventUids.has(Kde(t))}saveEventToCache(t){this.cachedEventUids.add(Kde(t)),this.lastProcessedEventTime=Date.now()}}function Kde(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function WNe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function VDt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return WNe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function HDt(e,t={}){return DS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qDt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,WDt=/^https?/;async function GDt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await HDt(e);for(const n of t)try{if(YDt(n))return}catch{}Nh(e,"unauthorized-domain")}function YDt(e){const t=xV(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!WDt.test(n))return!1;if(qDt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KDt=new Uk(3e4,6e4);function Xde(){const e=hh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function XDt(e){return new Promise((t,n)=>{var r,i,s;function o(){Xde(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Xde(),n(jf(e,"network-request-failed"))},timeout:KDt.get()})}if(!((i=(r=hh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=hh().gapi)===null||s===void 0)&&s.load)o();else{const a=QPt("iframefcb");return hh()[a]=()=>{gapi.load?o():n(jf(e,"network-request-failed"))},KPt(`${XPt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw PD=null,t})}let PD=null;function QDt(e){return PD=PD||XDt(e),PD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JDt=new Uk(5e3,15e3),ZDt="__/auth/iframe",eOt="emulator/auth/iframe",tOt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},nOt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function rOt(e){const t=e.config;an(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?AJ(t,eOt):`https://${e.config.authDomain}/${ZDt}`,r={apiKey:t.apiKey,appName:e.name,v:Gb},i=nOt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Bk(r).slice(1)}`}async function iOt(e){const t=await QDt(e),n=hh().gapi;return an(n,e,"internal-error"),t.open({where:document.body,url:rOt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:tOt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=jf(e,"network-request-failed"),a=hh().setTimeout(()=>{s(o)},JDt.get());function u(){hh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sOt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},oOt=500,aOt=600,uOt="_blank",lOt="http://localhost";class Qde{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function cOt(e,t,n,r=oOt,i=aOt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},sOt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Lo().toLowerCase();n&&(a=ANe(l)?uOt:n),TNe(l)&&(t=t||lOt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(BPt(l)&&a!=="_self")return fOt(t||"",a),new Qde(null);const f=window.open(t||"",a,c);an(f,e,"popup-blocked");try{f.focus()}catch{}return new Qde(f)}function fOt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dOt="__/auth/handler",hOt="emulator/auth/handler",pOt=encodeURIComponent("fac");async function Jde(e,t,n,r,i,s){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Gb,eventId:i};if(t instanceof RJ){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",aNt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof Vk){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${pOt}=${encodeURIComponent(u)}`:"";return`${mOt(e)}?${Bk(a).slice(1)}${l}`}function mOt({config:e}){return e.emulator?AJ(e,hOt):`https://${e.authDomain}/${dOt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x9="webStorageSupport";class gOt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jNe,this._completeRedirectFn=BDt,this._overrideRedirectResult=LDt}async _openPopup(t,n,r,i){var s;Dm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Jde(t,n,r,xV(),i);return cOt(t,o,NJ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Jde(t,n,r,xV(),i);return bDt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Dm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await iOt(t),r=new zDt(t);return n.register("authEvent",i=>(an(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(x9,{type:x9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[x9];o!==void 0&&n(!!o),Nh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=GDt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return NNe()||IJ()||b4()}}const GNe=gOt;var Zde="@firebase/auth",ehe="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yOt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vOt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function bOt(e){Pm(new Rh("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;an(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PNe(e)},l=new GPt(r,i,s,u);return ZPt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),Pm(new Rh("auth-internal",t=>{const n=zk(t.getProvider("auth").getImmediate());return(r=>new yOt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ff(Zde,ehe,vOt(e)),Ff(Zde,ehe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _Ot=5*60,wOt=cNe("authIdTokenMaxAge")||_Ot;let the=null;const EOt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>wOt)return;const i=n==null?void 0:n.token;the!==i&&(the=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function z$(e=xJ()){const t=PS(e,"auth");if(t.isInitialized())return t.getImmediate();const n=JPt(e,{popupRedirectResolver:GNe,persistence:[IDt,gDt,jNe]}),r=cNe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=EOt(s.toString());cDt(n,o,()=>o(n.currentUser)),lDt(n,a=>o(a))}}const i=uNe("auth");return i&&eDt(n,`http://${i}`),n}function xOt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}YPt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=jf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",xOt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});bOt("Browser");var SOt="firebase",TOt="10.12.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ff(SOt,TOt,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YNe="firebasestorage.googleapis.com",KNe="storageBucket",AOt=2*60*1e3,COt=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zi extends Jh{constructor(t,n,r=0){super(S9(t),`Firebase Storage: ${n} (${S9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Zi.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return S9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ji;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ji||(Ji={}));function S9(e){return"storage/"+e}function DJ(){const e="An unknown error occurred, please check the error payload for server response.";return new Zi(Ji.UNKNOWN,e)}function IOt(e){return new Zi(Ji.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function kOt(e){return new Zi(Ji.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function ROt(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Zi(Ji.UNAUTHENTICATED,e)}function NOt(){return new Zi(Ji.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function POt(e){return new Zi(Ji.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function DOt(){return new Zi(Ji.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function OOt(){return new Zi(Ji.CANCELED,"User canceled the upload/download.")}function $Ot(e){return new Zi(Ji.INVALID_URL,"Invalid URL '"+e+"'.")}function MOt(e){return new Zi(Ji.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function LOt(){return new Zi(Ji.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KNe+"' property when initializing the app?")}function FOt(){return new Zi(Ji.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function jOt(){return new Zi(Ji.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function BOt(e){return new Zi(Ji.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function AV(e){return new Zi(Ji.INVALID_ARGUMENT,e)}function XNe(){return new Zi(Ji.APP_DELETED,"The Firebase app was deleted.")}function UOt(e){return new Zi(Ji.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function jA(e,t){return new Zi(Ji.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function FT(e){throw new Zi(Ji.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ha.makeFromUrl(t,n)}catch{return new Ha(t,"")}if(r.path==="")return r;throw MOt(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===YNe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],T=E.regex.exec(t);if(T){const S=T[E.indices.bucket];let A=T[E.indices.path];A||(A=""),r=new Ha(S,A),E.postModify(r);break}}if(r==null)throw $Ot(t);return r}}class zOt{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VOt(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function HOt(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qOt(e){return e!==void 0}function WOt(e){return typeof e=="object"&&!Array.isArray(e)}function OJ(e){return typeof e=="string"||e instanceof String}function nhe(e){return $J()&&e instanceof Blob}function $J(){return typeof Blob<"u"}function CV(e,t,n,r){if(r<t)throw AV(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw AV(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qk(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function QNe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var S1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(S1||(S1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GOt(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YOt{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new iP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===S1.NO_ERROR,u=s.getStatus();if(!a||GOt(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===S1.ABORT;r(!1,new iP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new iP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());qOt(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=DJ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?XNe():OOt();o(u)}else{const u=DOt();o(u)}};this.canceled_?n(!1,new iP(!1,null,!0)):this.backoffId_=VOt(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&HOt(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class iP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function KOt(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function XOt(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function QOt(e,t){t&&(e["X-Firebase-GMPID"]=t)}function JOt(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function ZOt(e,t,n,r,i,s,o=!0){const a=QNe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return QOt(l,t),KOt(l,n),XOt(l,s),JOt(l,r),new YOt(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function e3t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function t3t(...e){const t=e3t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if($J())return new Blob(e);throw new Zi(Ji.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function n3t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3t(e){if(typeof atob>"u")throw BOt("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const th={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class T9{constructor(t,n){this.data=t,this.contentType=n||null}}function i3t(e,t){switch(e){case th.RAW:return new T9(JNe(t));case th.BASE64:case th.BASE64URL:return new T9(ZNe(e,t));case th.DATA_URL:return new T9(o3t(t),a3t(t))}throw DJ()}function JNe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function s3t(e){let t;try{t=decodeURIComponent(e)}catch{throw jA(th.DATA_URL,"Malformed data URL.")}return JNe(t)}function ZNe(e,t){switch(e){case th.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw jA(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case th.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw jA(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=r3t(t)}catch(i){throw i.message.includes("polyfill")?i:jA(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class ePe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw jA(th.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=u3t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function o3t(e){const t=new ePe(e);return t.base64?ZNe(th.BASE64,t.rest):s3t(t.rest)}function a3t(e){return new ePe(e).contentType}function u3t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,n){let r=0,i="";nhe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(nhe(this.data_)){const r=this.data_,i=n3t(r,t,n);return i===null?null:new Hg(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new Hg(r,!0)}}static getBlob(...t){if($J()){const n=t.map(r=>r instanceof Hg?r.data_:r);return new Hg(t3t.apply(null,n))}else{const n=t.map(o=>OJ(o)?i3t(th.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new Hg(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MJ(e){let t;try{t=JSON.parse(e)}catch{return null}return WOt(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l3t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function c3t(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function tPe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f3t(e,t){return t}class Na{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||f3t}}let sP=null;function d3t(e){return!OJ(e)||e.length<2?e:tPe(e)}function nPe(){if(sP)return sP;const e=[];e.push(new Na("bucket")),e.push(new Na("generation")),e.push(new Na("metageneration")),e.push(new Na("name","fullPath",!0));function t(s,o){return d3t(o)}const n=new Na("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Na("size");return i.xform=r,e.push(i),e.push(new Na("timeCreated")),e.push(new Na("updated")),e.push(new Na("md5Hash",null,!0)),e.push(new Na("cacheControl",null,!0)),e.push(new Na("contentDisposition",null,!0)),e.push(new Na("contentEncoding",null,!0)),e.push(new Na("contentLanguage",null,!0)),e.push(new Na("contentType",null,!0)),e.push(new Na("metadata","customMetadata",!0)),sP=e,sP}function h3t(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ha(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function p3t(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return h3t(r,e),r}function rPe(e,t,n){const r=MJ(t);return r===null?null:p3t(e,r,n)}function m3t(e,t,n,r){const i=MJ(t);if(i===null||!OJ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=qk(d,n,r),p=QNe({alt:"media",token:l});return h+p})[0]}function g3t(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rhe="prefixes",ihe="items";function y3t(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[rhe])for(const i of n[rhe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ha(t,s));r.prefixes.push(o)}if(n[ihe])for(const i of n[ihe]){const s=e._makeStorageReference(new Ha(t,i.name));r.items.push(s)}return r}function v3t(e,t,n){const r=MJ(n);return r===null?null:y3t(e,t,r)}class E4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function LJ(e){if(!e)throw DJ()}function b3t(e,t){function n(r,i){const s=rPe(e,i,t);return LJ(s!==null),s}return n}function _3t(e,t){function n(r,i){const s=v3t(e,t,i);return LJ(s!==null),s}return n}function w3t(e,t){function n(r,i){const s=rPe(e,i,t);return LJ(s!==null),m3t(s,i,e.host,e._protocol)}return n}function FJ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=NOt():i=ROt():n.getStatus()===402?i=kOt(e.bucket):n.getStatus()===403?i=POt(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function iPe(e){const t=FJ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=IOt(e.path)),s.serverResponse=i.serverResponse,s}return n}function E3t(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=qk(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new E4(a,u,_3t(e,t.bucket),l);return c.urlParams=s,c.errorHandler=FJ(t),c}function x3t(e,t,n){const r=t.fullServerUrl(),i=qk(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new E4(i,s,w3t(e,n),o);return a.errorHandler=iPe(t),a}function S3t(e,t){const n=t.fullServerUrl(),r=qk(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new E4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=iPe(t),a}function T3t(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function A3t(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=T3t(null,t)),r}function C3t(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=A3t(t,r,i),c=g3t(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=Hg.getBlob(f,r,d);if(h===null)throw FOt();const p={name:l.fullPath},m=qk(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new E4(m,g,b3t(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=FJ(t),v}class I3t{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=S1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=S1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=S1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw FT("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw FT("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw FT("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw FT("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw FT("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class k3t extends I3t{initXhr(){this.xhr_.responseType="text"}}function x4(){return new k3t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rb{constructor(t,n){this._service=t,n instanceof Ha?this._location=n:this._location=Ha.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new rb(t,n)}get root(){const t=new Ha(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tPe(this._location.path)}get storage(){return this._service}get parent(){const t=l3t(this._location.path);if(t===null)return null;const n=new Ha(this._location.bucket,t);return new rb(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw UOt(t)}}function R3t(e,t,n){e._throwIfRoot("uploadBytes");const r=C3t(e.storage,e._location,nPe(),new Hg(t,!0),n);return e.storage.makeRequestWithTokens(r,x4).then(i=>({metadata:i,ref:e}))}function N3t(e){const t={prefixes:[],items:[]};return sPe(e,t).then(()=>t)}async function sPe(e,t,n){const i=await P3t(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await sPe(e,t,i.nextPageToken)}function P3t(e,t){t!=null&&typeof t.maxResults=="number"&&CV("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=E3t(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,x4)}function D3t(e){e._throwIfRoot("getDownloadURL");const t=x3t(e.storage,e._location,nPe());return e.storage.makeRequestWithTokens(t,x4).then(n=>{if(n===null)throw jOt();return n})}function O3t(e){e._throwIfRoot("deleteObject");const t=S3t(e.storage,e._location);return e.storage.makeRequestWithTokens(t,x4)}function $3t(e,t){const n=c3t(e._location.path,t),r=new Ha(e._location.bucket,n);return new rb(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function M3t(e){return/^[A-Za-z]+:\/\//.test(e)}function L3t(e,t){return new rb(e,t)}function oPe(e,t){if(e instanceof jJ){const n=e;if(n._bucket==null)throw LOt();const r=new rb(n,n._bucket);return t!=null?oPe(r,t):r}else return t!==void 0?$3t(e,t):e}function F3t(e,t){if(t&&M3t(t)){if(e instanceof jJ)return L3t(e,t);throw AV("To use ref(service, url), the first argument must be a Storage instance.")}else return oPe(e,t)}function she(e,t){const n=t==null?void 0:t[KNe];return n==null?null:Ha.makeFromBucketSpec(n,e)}function j3t(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:XRt(i,e.app.options.projectId))}class jJ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=YNe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=AOt,this._maxUploadRetryTime=COt,this._requests=new Set,i!=null?this._bucket=Ha.makeFromBucketSpec(i,this._host):this._bucket=she(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ha.makeFromBucketSpec(this._url,t):this._bucket=she(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){CV("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){CV("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new rb(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new zOt(XNe());{const o=ZOt(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const ohe="@firebase/storage",ahe="0.12.5";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aPe="storage";function A9(e,t,n){return e=ii(e),R3t(e,t,n)}function jT(e){return e=ii(e),N3t(e)}function C9(e){return e=ii(e),D3t(e)}function uhe(e){return e=ii(e),O3t(e)}function ic(e,t){return e=ii(e),F3t(e,t)}function B3t(e=xJ(),t){e=ii(e);const r=PS(e,aPe).getImmediate({identifier:t}),i=KRt("storage");return i&&U3t(r,...i),r}function U3t(e,t,n,r={}){j3t(e,t,n,r)}function z3t(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new jJ(n,r,i,t,Gb)}function V3t(){Pm(new Rh(aPe,z3t,"PUBLIC").setMultipleInstances(!0)),Ff(ohe,ahe,""),Ff(ohe,ahe,"esm2017")}V3t();var lhe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var T1,uPe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,A){function C(){}C.prototype=A.prototype,S.D=A.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(k,N,O){for(var D=Array(arguments.length-2),$=2;$<arguments.length;$++)D[$-2]=arguments[$];return A.prototype[N].apply(k,D)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,A,C){C||(C=0);var k=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)k[N]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(N=0;16>N;++N)k[N]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=S.g[0],C=S.g[1],N=S.g[2];var O=S.g[3],D=A+(O^C&(N^O))+k[0]+3614090360&4294967295;A=C+(D<<7&4294967295|D>>>25),D=O+(N^A&(C^N))+k[1]+3905402710&4294967295,O=A+(D<<12&4294967295|D>>>20),D=N+(C^O&(A^C))+k[2]+606105819&4294967295,N=O+(D<<17&4294967295|D>>>15),D=C+(A^N&(O^A))+k[3]+3250441966&4294967295,C=N+(D<<22&4294967295|D>>>10),D=A+(O^C&(N^O))+k[4]+4118548399&4294967295,A=C+(D<<7&4294967295|D>>>25),D=O+(N^A&(C^N))+k[5]+1200080426&4294967295,O=A+(D<<12&4294967295|D>>>20),D=N+(C^O&(A^C))+k[6]+2821735955&4294967295,N=O+(D<<17&4294967295|D>>>15),D=C+(A^N&(O^A))+k[7]+4249261313&4294967295,C=N+(D<<22&4294967295|D>>>10),D=A+(O^C&(N^O))+k[8]+1770035416&4294967295,A=C+(D<<7&4294967295|D>>>25),D=O+(N^A&(C^N))+k[9]+2336552879&4294967295,O=A+(D<<12&4294967295|D>>>20),D=N+(C^O&(A^C))+k[10]+4294925233&4294967295,N=O+(D<<17&4294967295|D>>>15),D=C+(A^N&(O^A))+k[11]+2304563134&4294967295,C=N+(D<<22&4294967295|D>>>10),D=A+(O^C&(N^O))+k[12]+1804603682&4294967295,A=C+(D<<7&4294967295|D>>>25),D=O+(N^A&(C^N))+k[13]+4254626195&4294967295,O=A+(D<<12&4294967295|D>>>20),D=N+(C^O&(A^C))+k[14]+2792965006&4294967295,N=O+(D<<17&4294967295|D>>>15),D=C+(A^N&(O^A))+k[15]+1236535329&4294967295,C=N+(D<<22&4294967295|D>>>10),D=A+(N^O&(C^N))+k[1]+4129170786&4294967295,A=C+(D<<5&4294967295|D>>>27),D=O+(C^N&(A^C))+k[6]+3225465664&4294967295,O=A+(D<<9&4294967295|D>>>23),D=N+(A^C&(O^A))+k[11]+643717713&4294967295,N=O+(D<<14&4294967295|D>>>18),D=C+(O^A&(N^O))+k[0]+3921069994&4294967295,C=N+(D<<20&4294967295|D>>>12),D=A+(N^O&(C^N))+k[5]+3593408605&4294967295,A=C+(D<<5&4294967295|D>>>27),D=O+(C^N&(A^C))+k[10]+38016083&4294967295,O=A+(D<<9&4294967295|D>>>23),D=N+(A^C&(O^A))+k[15]+3634488961&4294967295,N=O+(D<<14&4294967295|D>>>18),D=C+(O^A&(N^O))+k[4]+3889429448&4294967295,C=N+(D<<20&4294967295|D>>>12),D=A+(N^O&(C^N))+k[9]+568446438&4294967295,A=C+(D<<5&4294967295|D>>>27),D=O+(C^N&(A^C))+k[14]+3275163606&4294967295,O=A+(D<<9&4294967295|D>>>23),D=N+(A^C&(O^A))+k[3]+4107603335&4294967295,N=O+(D<<14&4294967295|D>>>18),D=C+(O^A&(N^O))+k[8]+1163531501&4294967295,C=N+(D<<20&4294967295|D>>>12),D=A+(N^O&(C^N))+k[13]+2850285829&4294967295,A=C+(D<<5&4294967295|D>>>27),D=O+(C^N&(A^C))+k[2]+4243563512&4294967295,O=A+(D<<9&4294967295|D>>>23),D=N+(A^C&(O^A))+k[7]+1735328473&4294967295,N=O+(D<<14&4294967295|D>>>18),D=C+(O^A&(N^O))+k[12]+2368359562&4294967295,C=N+(D<<20&4294967295|D>>>12),D=A+(C^N^O)+k[5]+4294588738&4294967295,A=C+(D<<4&4294967295|D>>>28),D=O+(A^C^N)+k[8]+2272392833&4294967295,O=A+(D<<11&4294967295|D>>>21),D=N+(O^A^C)+k[11]+1839030562&4294967295,N=O+(D<<16&4294967295|D>>>16),D=C+(N^O^A)+k[14]+4259657740&4294967295,C=N+(D<<23&4294967295|D>>>9),D=A+(C^N^O)+k[1]+2763975236&4294967295,A=C+(D<<4&4294967295|D>>>28),D=O+(A^C^N)+k[4]+1272893353&4294967295,O=A+(D<<11&4294967295|D>>>21),D=N+(O^A^C)+k[7]+4139469664&4294967295,N=O+(D<<16&4294967295|D>>>16),D=C+(N^O^A)+k[10]+3200236656&4294967295,C=N+(D<<23&4294967295|D>>>9),D=A+(C^N^O)+k[13]+681279174&4294967295,A=C+(D<<4&4294967295|D>>>28),D=O+(A^C^N)+k[0]+3936430074&4294967295,O=A+(D<<11&4294967295|D>>>21),D=N+(O^A^C)+k[3]+3572445317&4294967295,N=O+(D<<16&4294967295|D>>>16),D=C+(N^O^A)+k[6]+76029189&4294967295,C=N+(D<<23&4294967295|D>>>9),D=A+(C^N^O)+k[9]+3654602809&4294967295,A=C+(D<<4&4294967295|D>>>28),D=O+(A^C^N)+k[12]+3873151461&4294967295,O=A+(D<<11&4294967295|D>>>21),D=N+(O^A^C)+k[15]+530742520&4294967295,N=O+(D<<16&4294967295|D>>>16),D=C+(N^O^A)+k[2]+3299628645&4294967295,C=N+(D<<23&4294967295|D>>>9),D=A+(N^(C|~O))+k[0]+4096336452&4294967295,A=C+(D<<6&4294967295|D>>>26),D=O+(C^(A|~N))+k[7]+1126891415&4294967295,O=A+(D<<10&4294967295|D>>>22),D=N+(A^(O|~C))+k[14]+2878612391&4294967295,N=O+(D<<15&4294967295|D>>>17),D=C+(O^(N|~A))+k[5]+4237533241&4294967295,C=N+(D<<21&4294967295|D>>>11),D=A+(N^(C|~O))+k[12]+1700485571&4294967295,A=C+(D<<6&4294967295|D>>>26),D=O+(C^(A|~N))+k[3]+2399980690&4294967295,O=A+(D<<10&4294967295|D>>>22),D=N+(A^(O|~C))+k[10]+4293915773&4294967295,N=O+(D<<15&4294967295|D>>>17),D=C+(O^(N|~A))+k[1]+2240044497&4294967295,C=N+(D<<21&4294967295|D>>>11),D=A+(N^(C|~O))+k[8]+1873313359&4294967295,A=C+(D<<6&4294967295|D>>>26),D=O+(C^(A|~N))+k[15]+4264355552&4294967295,O=A+(D<<10&4294967295|D>>>22),D=N+(A^(O|~C))+k[6]+2734768916&4294967295,N=O+(D<<15&4294967295|D>>>17),D=C+(O^(N|~A))+k[13]+1309151649&4294967295,C=N+(D<<21&4294967295|D>>>11),D=A+(N^(C|~O))+k[4]+4149444226&4294967295,A=C+(D<<6&4294967295|D>>>26),D=O+(C^(A|~N))+k[11]+3174756917&4294967295,O=A+(D<<10&4294967295|D>>>22),D=N+(A^(O|~C))+k[2]+718787259&4294967295,N=O+(D<<15&4294967295|D>>>17),D=C+(O^(N|~A))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(N+(D<<21&4294967295|D>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+O&4294967295}r.prototype.u=function(S,A){A===void 0&&(A=S.length);for(var C=A-this.blockSize,k=this.B,N=this.h,O=0;O<A;){if(N==0)for(;O<=C;)i(this,S,O),O+=this.blockSize;if(typeof S=="string"){for(;O<A;)if(k[N++]=S.charCodeAt(O++),N==this.blockSize){i(this,k),N=0;break}}else for(;O<A;)if(k[N++]=S[O++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;var C=8*this.o;for(A=S.length-8;A<S.length;++A)S[A]=C&255,C/=256;for(this.u(S),S=Array(16),A=C=0;4>A;++A)for(var k=0;32>k;k+=8)S[C++]=this.g[A]>>>k&255;return S};function s(S,A){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=A(S)}function o(S,A){this.h=A;for(var C=[],k=!0,N=S.length-1;0<=N;N--){var O=S[N]|0;k&&O==A||(C[N]=O,k=!1)}this.g=C}var a={};function u(S){return-128<=S&&128>S?s(S,function(A){return new o([A|0],0>A?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var A=[],C=1,k=0;S>=C;k++)A[k]=S/C|0,C*=4294967296;return new o(A,0)}function c(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return g(c(S.substring(1),A));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),k=f,N=0;N<S.length;N+=8){var O=Math.min(8,S.length-N),D=parseInt(S.substring(N,N+O),A);8>O?(O=l(Math.pow(A,O)),k=k.j(O).add(l(D))):(k=k.j(C),k=k.add(l(D)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,A=1,C=0;C<this.g.length;C++){var k=this.i(C);S+=(0<=k?k:4294967296+k)*A,A*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var A=l(Math.pow(S,6)),C=this,k="";;){var N=w(C,A).g;C=y(C,N.j(A));var O=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=N,p(C))return O+k;for(;6>O.length;)O="0"+O;k=O+k}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var A=S.g.length,C=[],k=0;k<A;k++)C[k]=~S.g[k];return new o(C,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0,N=0;N<=A;N++){var O=k+(this.i(N)&65535)+(S.i(N)&65535),D=(O>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=D>>>16,O&=65535,D&=65535,C[N]=D<<16|O}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(S,A){return S.add(g(A))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var A=this.g.length+S.g.length,C=[],k=0;k<2*A;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<S.g.length;N++){var O=this.i(k)>>>16,D=this.i(k)&65535,$=S.i(N)>>>16,F=S.i(N)&65535;C[2*k+2*N]+=D*F,v(C,2*k+2*N),C[2*k+2*N+1]+=O*F,v(C,2*k+2*N+1),C[2*k+2*N+1]+=D*$,v(C,2*k+2*N+1),C[2*k+2*N+2]+=O*$,v(C,2*k+2*N+2)}for(k=0;k<A;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=A;k<2*A;k++)C[k]=0;return new o(C,0)};function v(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function b(S,A){this.g=S,this.h=A}function w(S,A){if(p(A))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return A=w(g(S),A),new b(g(A.g),g(A.h));if(m(A))return A=w(S,g(A)),new b(g(A.g),A.h);if(30<S.g.length){if(m(S)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,k=A;0>=k.l(S);)C=E(C),k=E(k);var N=T(C,1),O=T(k,1);for(k=T(k,2),C=T(C,2);!p(k);){var D=O.add(k);0>=D.l(S)&&(N=N.add(C),O=D),k=T(k,1),C=T(C,1)}return A=y(S,N.j(A)),new b(N,A)}for(N=f;0<=S.l(A);){for(C=Math.max(1,Math.floor(S.m()/A.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),O=l(C),D=O.j(A);m(D)||0<D.l(S);)C-=k,O=l(C),D=O.j(A);p(O)&&(O=d),N=N.add(O),S=y(S,D)}return new b(N,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)&S.i(k);return new o(C,this.h&S.h)},e.or=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)|S.i(k);return new o(C,this.h|S.h)},e.xor=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)^S.i(k);return new o(C,this.h^S.h)};function E(S){for(var A=S.g.length+1,C=[],k=0;k<A;k++)C[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(C,S.h)}function T(S,A){var C=A>>5;A%=32;for(var k=S.g.length-C,N=[],O=0;O<k;O++)N[O]=0<A?S.i(O+C)>>>A|S.i(O+C+1)<<32-A:S.i(O+C);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uPe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,T1=o}).apply(typeof lhe<"u"?lhe:typeof self<"u"?self:typeof window<"u"?window:{});var oP=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lPe,cPe,$2,fPe,DD,IV,dPe,hPe,pPe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,L,V){return x==Array.prototype||x==Object.prototype||(x[L]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof oP=="object"&&oP];for(var L=0;L<x.length;++L){var V=x[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,L){if(L)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var we=x[Q];if(!(we in V))break e;V=V[we]}x=x[x.length-1],Q=V[x],L=L(Q),L!=Q&&L!=null&&t(V,x,{configurable:!0,writable:!0,value:L})}}function s(x,L){x instanceof String&&(x+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<x.length){var De=V++;return{value:L(De,x[De]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(x){return x||function(){return s(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var L=typeof x;return L=L!="object"?L:x?Array.isArray(x)?"array":L:"null",L=="array"||L=="object"&&typeof x.length=="number"}function l(x){var L=typeof x;return L=="object"&&x!=null||L=="function"}function c(x,L,V){return x.call.apply(x.bind,arguments)}function f(x,L,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),x.apply(L,we)}}return function(){return x.apply(L,arguments)}}function d(x,L,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,L){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,L){function V(){}V.prototype=L.prototype,x.aa=L.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,we,De){for(var ft=Array(arguments.length-2),Gr=2;Gr<arguments.length;Gr++)ft[Gr-2]=arguments[Gr];return L.prototype[we].apply(Q,ft)}}function m(x){const L=x.length;if(0<L){const V=Array(L);for(let Q=0;Q<L;Q++)V[Q]=x[Q];return V}return[]}function g(x,L){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=x.length||0,De=Q.length||0;x.length=we+De;for(let ft=0;ft<De;ft++)x[we+ft]=Q[ft]}else x.push(Q)}}class y{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(x,L,V){for(const Q in x)L.call(V,x[Q],Q,x)}function S(x,L){for(const V in x)L.call(void 0,x[V],V,x)}function A(x){const L={};for(const V in x)L[V]=x[V];return L}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(x,L){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)x[V]=Q[V];for(let De=0;De<C.length;De++)V=C[De],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function N(x){var L=1;x=x.split(":");const V=[];for(;0<L&&x.length;)V.push(x.shift()),L--;return x.length&&V.push(x.join(":")),V}function O(x){a.setTimeout(()=>{throw x},0)}function D(){var x=H;let L=null;return x.g&&(L=x.g,x.g=x.g.next,x.g||(x.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const Q=F.get();Q.set(L,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new M,x=>x.reset());class M{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new $,P=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=D();){try{x.h.call(x.g)}catch(V){O(V)}var L=F;L.j(x),100>L.h&&(L.h++,x.next=L.g,L.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,L){this.type=x,this.g=this.target=L,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,L=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,L),a.removeEventListener("test",V,L)}catch{}return x}();function G(x,L){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=L,L=x.relatedTarget){if(E){e:{try{w(L.nodeName);var we=!0;break e}catch{}we=!1}we||(L=null)}}else V=="mouseover"?L=x.fromElement:V=="mouseout"&&(L=x.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,L,V,Q,we){this.listener=x,this.proxy=null,this.src=L,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ve(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,L,V,Q,we){var De=x.toString();x=this.g[De],x||(x=this.g[De]=[],this.h++);var ft=Ke(x,L,Q,we);return-1<ft?(L=x[ft],V||(L.fa=!1)):(L=new he(L,this.src,De,!!Q,we),L.fa=V,x.push(L)),L};function be(x,L){var V=L.type;if(V in x.g){var Q=x.g[V],we=Array.prototype.indexOf.call(Q,L,void 0),De;(De=0<=we)&&Array.prototype.splice.call(Q,we,1),De&&(ve(L),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Ke(x,L,V,Q){for(var we=0;we<x.length;++we){var De=x[we];if(!De.da&&De.listener==L&&De.capture==!!V&&De.ha==Q)return we}return-1}var Ue="closure_lm_"+(1e6*Math.random()|0),yt={};function it(x,L,V,Q,we){if(Array.isArray(L)){for(var De=0;De<L.length;De++)it(x,L[De],V,Q,we);return null}return V=vt(V),x&&x[ce]?x.K(L,V,l(Q)?!!Q.capture:!!Q,we):_e(x,L,V,!1,Q,we)}function _e(x,L,V,Q,we,De){if(!L)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,Gr=ge(x);if(Gr||(x[Ue]=Gr=new Ie(x)),V=Gr.add(L,V,Q,ft,De),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)q||(we=ft),we===void 0&&(we=!1),x.addEventListener(L.toString(),Q,we);else if(x.attachEvent)x.attachEvent(Ot(L.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return L.call(x.src,x.listener,V)}const L=We;return x}function ze(x,L,V,Q,we){if(Array.isArray(L))for(var De=0;De<L.length;De++)ze(x,L[De],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),x&&x[ce]?(x=x.i,L=String(L).toString(),L in x.g&&(De=x.g[L],V=Ke(De,V,Q,we),-1<V&&(ve(De[V]),Array.prototype.splice.call(De,V,1),De.length==0&&(delete x.g[L],x.h--)))):x&&(x=ge(x))&&(L=x.g[L.toString()],x=-1,L&&(x=Ke(L,V,Q,we)),(V=-1<x?L[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var L=x.src;if(L&&L[ce])be(L.i,x);else{var V=x.type,Q=x.proxy;L.removeEventListener?L.removeEventListener(V,Q,x.capture):L.detachEvent?L.detachEvent(Ot(V),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(V=ge(L))?(be(V,x),V.h==0&&(V.src=null,L[Ue]=null)):ve(x)}}}function Ot(x){return x in yt?yt[x]:yt[x]="on"+x}function We(x,L){if(x.da)x=!0;else{L=new G(L,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,L)}return x}function ge(x){return x=x[Ue],x instanceof Ie?x:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(x){return typeof x=="function"?x:(x[ht]||(x[ht]=function(L){return x.handleEvent(L)}),x[ht])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(x,L,V,Q){ze(this,x,L,V,Q)};function Ce(x,L){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=L.type||L,typeof L=="string")L=new j(L,x);else if(L instanceof j)L.target=L.target||x;else{var we=L;L=new j(Q,x),k(L,we)}if(we=!0,V)for(var De=V.length-1;0<=De;De--){var ft=L.g=V[De];we=He(ft,Q,!0,L)&&we}if(ft=L.g=x,we=He(ft,Q,!0,L)&&we,we=He(ft,Q,!1,L)&&we,V)for(De=0;De<V.length;De++)ft=L.g=V[De],we=He(ft,Q,!1,L)&&we}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,L;for(L in x.g){for(var V=x.g[L],Q=0;Q<V.length;Q++)ve(V[Q]);delete x.g[L],x.h--}}this.F=null},pe.prototype.K=function(x,L,V,Q){return this.i.add(String(x),L,!1,V,Q)},pe.prototype.L=function(x,L,V,Q){return this.i.add(String(x),L,!0,V,Q)};function He(x,L,V,Q){if(L=x.i.g[String(L)],!L)return!0;L=L.concat();for(var we=!0,De=0;De<L.length;++De){var ft=L[De];if(ft&&!ft.da&&ft.capture==V){var Gr=ft.listener,go=ft.ha||ft.src;ft.fa&&be(x.i,ft),we=Gr.call(go,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(x,L,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(x,L||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const L=x.h;x.h=null,x.m.apply(null,L)}class Ln extends W{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ar(x){W.call(this),this.h=x,this.g={}}p(Ar,W);var Fn=[];function cr(x){T(x.g,function(L,V){this.g.hasOwnProperty(V)&&ct(L)},x),x.g={}}Ar.prototype.N=function(){Ar.aa.N.call(this),cr(this)},Ar.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var gn=a.JSON.stringify,Cn=a.JSON.parse,nr=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function rr(){}rr.prototype.h=null;function Uo(x){return x.h||(x.h=x.i())}function $i(){}var In={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Mi(){j.call(this,"d")}p(Mi,j);function Cr(){j.call(this,"c")}p(Cr,j);var ms={},lp=null;function ul(){return lp=lp||new pe}ms.La="serverreachability";function pd(x){j.call(this,ms.La,x)}p(pd,j);function xr(x){const L=ul();Ce(L,new pd(L))}ms.STAT_EVENT="statevent";function Ii(x,L){j.call(this,ms.STAT_EVENT,x),this.stat=L}p(Ii,j);function Qr(x){const L=ul();Ce(L,new Ii(L,x))}ms.Ma="timingevent";function uu(x,L){j.call(this,ms.Ma,x),this.size=L}p(uu,j);function Aa(x,L){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},L)}function Ca(){this.g=!0}Ca.prototype.xa=function(){this.g=!1};function oe(x,L,V,Q,we,De){x.info(function(){if(x.g)if(De)for(var ft="",Gr=De.split("&"),go=0;go<Gr.length;go++){var fr=Gr[go].split("=");if(1<fr.length){var qo=fr[0];fr=fr[1];var Wo=qo.split("_");ft=2<=Wo.length&&Wo[1]=="type"?ft+(qo+"="+fr+"&"):ft+(qo+"=redacted&")}}else ft=null;else ft=De;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+L+`
`+V+`
`+ft})}function ee(x,L,V,Q,we,De,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+L+`
`+V+`
`+De+" "+ft})}function ae(x,L,V,Q){x.info(function(){return"XMLHTTP TEXT ("+L+"): "+Se(x,V)+(Q?" "+Q:"")})}function Ae(x,L){x.info(function(){return"TIMEOUT: "+L})}Ca.prototype.info=function(){};function Se(x,L){if(!x.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var De=we[0];if(De!="noop"&&De!="stop"&&De!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return gn(V)}catch{return L}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ht;function On(){}p(On,rr),On.prototype.g=function(){return new XMLHttpRequest},On.prototype.i=function(){return{}},Ht=new On;function jn(x,L,V,Q){this.j=x,this.i=L,this.l=V,this.R=Q||1,this.U=new Ar(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new pn}function pn(){this.i=null,this.g="",this.h=!1}var ir={},Ir={};function Vt(x,L,V){x.L=1,x.v=Bn(Ge(L)),x.m=V,x.P=!0,sr(x,null)}function sr(x,L){x.F=Date.now(),ki(x),x.A=Ge(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),UR(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new pn,x.g=xie(x.j,V?L:null,!x.m),0<x.O&&(x.M=new Ln(d(x.Y,x,x.g),x.O)),L=x.U,V=x.g,Q=x.ca;var we="readystatechange";Array.isArray(we)||(we&&(Fn[0]=we.toString()),we=Fn);for(var De=0;De<we.length;De++){var ft=it(V,we[De],Q||L.handleEvent,!1,L.h||L);if(!ft)break;L.g[ft.key]=ft}L=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,L)):(x.u="GET",x.g.ea(x.A,x.u,null,L)),xr(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}jn.prototype.ca=function(x){x=x.target;const L=this.M;L&&es(x)==3?L.j():this.Y(x)},jn.prototype.Y=function(x){try{if(x==this.g)e:{const Wo=es(this.g);var L=this.g.Ba();const y_=this.g.Z();if(!(3>Wo)&&(Wo!=3||this.g&&(this.h.h||this.g.oa()||Ho(this.g)))){this.J||Wo!=4||L==7||(L==8||0>=y_?xr(3):xr(2)),Jr(this);var V=this.g.Z();this.X=V;t:if(Hr(this)){var Q=Ho(this.g);x="";var we=Q.length,De=es(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Li(this),mo(this);var ft="";break t}this.h.i=new a.TextDecoder}for(L=0;L<we;L++)this.h.h=!0,x+=this.h.i.decode(Q[L],{stream:!(De&&L==we-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Wo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Gr,go=this.g;if((Gr=go.g?go.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Gr)){var fr=Gr;break t}}fr=null}if(V=fr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fi(this,V);else{this.o=!1,this.s=3,Qr(12),Li(this),mo(this);break e}}if(this.P){V=!0;let Qc;for(;!this.J&&this.C<ft.length;)if(Qc=Jn(this,ft),Qc==Ir){Wo==4&&(this.s=4,Qr(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(Qc==ir){this.s=4,Qr(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,Qc,null),Fi(this,Qc);if(Hr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Wo!=4||ft.length!=0||this.h.h||(this.s=1,Qr(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Li(this),mo(this);else if(0<ft.length&&!this.W){this.W=!0;var qo=this.j;qo.g==this&&qo.ba&&!qo.M&&(qo.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),z5(qo),qo.M=!0,Qr(11))}}else ae(this.i,this.l,ft,null),Fi(this,ft);Wo==4&&Li(this),this.o&&!this.J&&(Wo==4?bie(this.j,this):(this.o=!1,ki(this)))}else ov(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,Qr(12)):(this.s=0,Qr(13)),Li(this),mo(this)}}}catch{}finally{}};function Hr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function Jn(x,L){var V=x.C,Q=L.indexOf(`
`,V);return Q==-1?Ir:(V=Number(L.substring(V,Q)),isNaN(V)?ir:(Q+=1,Q+V>L.length?Ir:(L=L.slice(Q,Q+V),x.C=Q+V,L)))}jn.prototype.cancel=function(){this.J=!0,Li(this)};function ki(x){x.S=Date.now()+x.I,Hs(x,x.I)}function Hs(x,L){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Aa(d(x.ba,x),L)}function Jr(x){x.B&&(a.clearTimeout(x.B),x.B=null)}jn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ae(this.i,this.A),this.L!=2&&(xr(),Qr(17)),Li(this),this.s=2,mo(this)):Hs(this,this.S-x)};function mo(x){x.j.G==0||x.J||bie(x.j,x)}function Li(x){Jr(x);var L=x.M;L&&typeof L.ma=="function"&&L.ma(),x.M=null,cr(x.U),x.g&&(L=x.g,x.g=null,L.abort(),L.ma())}function Fi(x,L){try{var V=x.j;if(V.G!=0&&(V.g==x||md(V.h,x))){if(!x.K&&md(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)YR(V),WR(V);else break e;U5(V),Qr(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Aa(d(V.Za,V),6e3));if(1>=Zl(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else av(V,11)}else if((x.K||V.g==x)&&YR(V),!v(L))for(we=V.Da.g.parse(L),L=0;L<we.length;L++){let fr=we[L];if(V.T=fr[0],fr=fr[1],V.G==2)if(fr[0]=="c"){V.K=fr[1],V.ia=fr[2];const qo=fr[3];qo!=null&&(V.la=qo,V.j.info("VER="+V.la));const Wo=fr[4];Wo!=null&&(V.Aa=Wo,V.j.info("SVER="+V.Aa));const y_=fr[5];y_!=null&&typeof y_=="number"&&0<y_&&(Q=1.5*y_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const Qc=x.g;if(Qc){const XR=Qc.g?Qc.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(XR){var De=Q.h;De.g||XR.indexOf("spdy")==-1&&XR.indexOf("quic")==-1&&XR.indexOf("h2")==-1||(De.j=De.l,De.g=new Set,De.h&&(Y(De,De.h),De.h=null))}if(Q.D){const V5=Qc.g?Qc.g.getResponseHeader("X-HTTP-Session-Id"):null;V5&&(Q.ya=V5,Pt(Q.I,Q.D,V5))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Eie(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Gr=ft,go=Q.L;go&&(Gr.I=go),Gr.B&&(Jr(Gr),ki(Gr)),Q.g=ft}else yie(Q);0<V.i.length&&GR(V)}else fr[0]!="stop"&&fr[0]!="close"||av(V,7);else V.G==3&&(fr[0]=="stop"||fr[0]=="close"?fr[0]=="stop"?av(V,7):m_(V):fr[0]!="noop"&&V.l&&V.l.ta(fr),V.v=0)}}xr(4)}catch{}}var zo=class{constructor(x,L){this.g=x,this.map=L}};function Ia(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function qs(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function Zl(x){return x.h?1:x.g?x.g.size:0}function md(x,L){return x.h?x.h==L:x.g?x.g.has(L):!1}function Y(x,L){x.g?x.g.add(L):x.h=L}function se(x,L){x.h&&x.h==L?x.h=null:x.g&&x.g.has(L)&&x.g.delete(L)}Ia.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let L=x.i;for(const V of x.g.values())L=L.concat(V.D);return L}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var L=[],V=x.length,Q=0;Q<V;Q++)L.push(x[Q]);return L}L=[],V=0;for(Q in x)L[V++]=x[Q];return L}function ye(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var L=[];x=x.length;for(var V=0;V<x;V++)L.push(V);return L}L=[],V=0;for(const Q in x)L[V++]=Q;return L}}}function le(x,L){if(x.forEach&&typeof x.forEach=="function")x.forEach(L,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,L,void 0);else for(var V=ye(x),Q=fe(x),we=Q.length,De=0;De<we;De++)L.call(void 0,Q[De],V&&V[De],x)}var Oe=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Ve(x,L){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),we=null;if(0<=Q){var De=x[V].substring(0,Q);we=x[V].substring(Q+1)}else De=x[V];L(De,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function qe(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof qe){this.h=x.h,st(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var L=x.i,V=new ec;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),mn(this,V),this.m=x.m}else x&&(L=String(x).match(Oe))?(this.h=!1,st(this,L[1]||"",!0),this.o=kr(L[2]||""),this.g=kr(L[3]||"",!0),Et(this,L[4]),this.l=kr(L[5]||"",!0),mn(this,L[6]||"",!0),this.m=kr(L[7]||"")):(this.h=!1,this.i=new ec(null,this.h))}qe.prototype.toString=function(){var x=[],L=this.j;L&&x.push(Rr(L,gd,!0),":");var V=this.g;return(V||L=="file")&&(x.push("//"),(L=this.o)&&x.push(Rr(L,gd,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Rr(V,V.charAt(0)=="/"?sT:cp,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Rr(V,BR)),x.join("")};function Ge(x){return new qe(x)}function st(x,L,V){x.j=V?kr(L,!0):L,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);x.s=L}else x.s=null}function mn(x,L,V){L instanceof ec?(x.i=L,oT(x.i,x.h)):(V||(L=Rr(L,nv)),x.i=new ec(L,x.h))}function Pt(x,L,V){x.i.set(L,V)}function Bn(x){return Pt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function kr(x,L){return x?L?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Rr(x,L,V){return typeof x=="string"?(x=encodeURI(x).replace(L,Vo),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Vo(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var gd=/[#\/\?@]/g,cp=/[#\?:]/g,sT=/[#\?]/g,nv=/[#\?@]/g,BR=/#/g;function ec(x,L){this.h=this.g=null,this.i=x||null,this.j=!!L}function lu(x){x.g||(x.g=new Map,x.h=0,x.i&&Ve(x.i,function(L,V){x.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}e=ec.prototype,e.add=function(x,L){lu(this),this.i=null,x=dp(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(L),this.h+=1,this};function fp(x,L){lu(x),L=dp(x,L),x.g.has(L)&&(x.i=null,x.h-=x.g.get(L).length,x.g.delete(L))}function h_(x,L){return lu(x),L=dp(x,L),x.g.has(L)}e.forEach=function(x,L){lu(this),this.g.forEach(function(V,Q){V.forEach(function(we){x.call(L,we,Q,this)},this)},this)},e.na=function(){lu(this);const x=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let Q=0;Q<L.length;Q++){const we=x[Q];for(let De=0;De<we.length;De++)V.push(L[Q])}return V},e.V=function(x){lu(this);let L=[];if(typeof x=="string")h_(this,x)&&(L=L.concat(this.g.get(dp(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)L=L.concat(x[V])}return L},e.set=function(x,L){return lu(this),this.i=null,x=dp(this,x),h_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[L]),this.h+=1,this},e.get=function(x,L){return x?(x=this.V(x),0<x.length?String(x[0]):L):L};function UR(x,L,V){fp(x,L),0<V.length&&(x.i=null,x.g.set(dp(x,L),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var Q=L[V];const De=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=De;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),x.push(we)}}return this.i=x.join("&")};function dp(x,L){return L=String(L),x.j&&(L=L.toLowerCase()),L}function oT(x,L){L&&!x.j&&(lu(x),x.i=null,x.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(fp(this,Q),UR(this,we,V))},x)),x.j=L}function zR(x,L){const V=new Ca;if(a.Image){const Q=new Image;Q.onload=h(cu,V,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(cu,V,"TestLoadImage: error",!1,L,Q),Q.onabort=h(cu,V,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(cu,V,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else L(!1)}function hp(x,L){const V=new Ca,Q=new AbortController,we=setTimeout(()=>{Q.abort(),cu(V,"TestPingServer: timeout",!1,L)},1e4);fetch(x,{signal:Q.signal}).then(De=>{clearTimeout(we),De.ok?cu(V,"TestPingServer: ok",!0,L):cu(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(we),cu(V,"TestPingServer: error",!1,L)})}function cu(x,L,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function B5(){this.g=new nr}function VR(x,L,V){const Q=V||"";try{le(x,function(we,De){let ft=we;l(we)&&(ft=gn(we)),L.push(Q+De+"="+encodeURIComponent(ft))})}catch(we){throw L.push(Q+"type="+encodeURIComponent("_badmap")),we}}function rv(x){this.l=x.Ub||null,this.j=x.eb||!1}p(rv,rr),rv.prototype.g=function(){return new iv(this.l,this.j)},rv.prototype.i=function(x){return function(){return x}}({});function iv(x,L){pe.call(this),this.D=x,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(iv,pe),e=iv.prototype,e.open=function(x,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=L,this.readyState=1,dg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(L.body=x),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,sv(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,dg(this)),this.g&&(this.readyState=3,dg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;HR(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function HR(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var L=x.value?x.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!x.done}))&&(this.response=this.responseText+=L)}x.done?sv(this):dg(this),this.readyState==3&&HR(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,sv(this))},e.Qa=function(x){this.g&&(this.response=x,sv(this))},e.ga=function(){this.g&&sv(this)};function sv(x){x.readyState=4,x.l=null,x.j=null,x.v=null,dg(x)}e.setRequestHeader=function(x,L){this.u.append(x,L)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=L.next();return x.join(`\r
`)};function dg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(iv.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function qR(x){let L="";return T(x,function(V,Q){L+=Q,L+=":",L+=V,L+=`\r
`}),L}function te(x,L,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=qR(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Pt(x,L,V))}function ue(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,Ct=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,L,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);L=L?L.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ht.g(),this.v=this.o?Uo(this.o):Uo(Ht),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(x),!0),this.B=!1}catch(De){$n(this,De);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const De of Q.keys())V.set(De,Q.get(De));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(De=>De.toLowerCase()=="content-type"),we=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(Ct,L,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[De,ft]of V)this.g.setRequestHeader(De,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Wr(this),this.u=!0,this.g.send(x),this.u=!1}catch(De){$n(this,De)}};function $n(x,L){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=L,x.m=5,Sr(x),Un(x)}function Sr(x){x.A||(x.A=!0,Ce(x,"complete"),Ce(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ce(this,"complete"),Ce(this,"abort"),Un(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Un(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?qr(this):this.bb())},e.bb=function(){qr(this)};function qr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||es(x)!=4||x.Z()!=2)){if(x.u&&es(x)==4)ut(x.Ea,0,x);else if(Ce(x,"readystatechange"),es(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var Q;if(Q=ft===0){var we=String(x.D).match(Oe)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ce(x,"complete"),Ce(x,"success");else{x.m=6;try{var De=2<es(x)?x.g.statusText:""}catch{De=""}x.l=De+" ["+x.Z()+"]",Sr(x)}}finally{Un(x)}}}}function Un(x,L){if(x.g){Wr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,L||Ce(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Wr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function es(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<es(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var L=this.g.responseText;return x&&L.indexOf(x)==0&&(L=L.substring(x.length)),Cn(L)}};function Ho(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function ov(x){const L={};x=(x.g&&2<=es(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=N(x[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const De=L[we]||[];L[we]=De,De.push(V)}S(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function pp(x,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||L}function p_(x){this.Aa=0,this.i=[],this.j=new Ca,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=pp("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=pp("baseRetryDelayMs",5e3,x),this.cb=pp("retryDelaySeedMs",1e4,x),this.Wa=pp("forwardChannelMaxRetries",2,x),this.wa=pp("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Ia(x&&x.concurrentRequestLimit),this.Da=new B5,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=p_.prototype,e.la=8,e.G=1,e.connect=function(x,L,V,Q){Qr(0),this.W=x,this.H=L||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Eie(this,null,this.W),GR(this)};function m_(x){if(pie(x),x.G==3){var L=x.U++,V=Ge(x.I);if(Pt(V,"SID",x.K),Pt(V,"RID",L),Pt(V,"TYPE","terminate"),aT(x,V),L=new jn(x,x.j,L),L.L=2,L.v=Bn(Ge(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=L.v,V=!0),V||(L.g=xie(L.j,null),L.g.ea(L.v)),L.F=Date.now(),ki(L)}wie(x)}function WR(x){x.g&&(z5(x),x.g.cancel(),x.g=null)}function pie(x){WR(x),x.u&&(a.clearTimeout(x.u),x.u=null),YR(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function GR(x){if(!qs(x.h)&&!x.s){x.s=!0;var L=x.Ga;B||P(),U||(B(),U=!0),H.add(L,x),x.B=0}}function $je(x,L){return Zl(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=L.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Aa(d(x.Ga,x,L),_ie(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const we=new jn(this,this.j,x);let De=this.o;if(this.S&&(De?(De=A(De),k(De,this.S)):De=this.S),this.m!==null||this.O||(we.H=De,De=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=gie(this,we,L),V=Ge(this.I),Pt(V,"RID",x),Pt(V,"CVER",22),this.D&&Pt(V,"X-HTTP-Session-Id",this.D),aT(this,V),De&&(this.O?L="headers="+encodeURIComponent(String(qR(De)))+"&"+L:this.m&&te(V,this.m,De)),Y(this.h,we),this.Ua&&Pt(V,"TYPE","init"),this.P?(Pt(V,"$req",L),Pt(V,"SID","null"),we.T=!0,Vt(we,V,null)):Vt(we,V,L),this.G=2}}else this.G==3&&(x?mie(this,x):this.i.length==0||qs(this.h)||mie(this))};function mie(x,L){var V;L?V=L.l:V=x.U++;const Q=Ge(x.I);Pt(Q,"SID",x.K),Pt(Q,"RID",V),Pt(Q,"AID",x.T),aT(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new jn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),L&&(x.i=L.D.concat(x.i)),L=gie(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),Vt(V,Q,L)}function aT(x,L){x.H&&T(x.H,function(V,Q){Pt(L,Q,V)}),x.l&&le({},function(V,Q){Pt(L,Q,V)})}function gie(x,L,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var we=x.i;let De=-1;for(;;){const ft=["count="+V];De==-1?0<V?(De=we[0].g,ft.push("ofs="+De)):De=0:ft.push("ofs="+De);let Gr=!0;for(let go=0;go<V;go++){let fr=we[go].g;const qo=we[go].map;if(fr-=De,0>fr)De=Math.max(0,we[go].g-100),Gr=!1;else try{VR(qo,ft,"req"+fr+"_")}catch{Q&&Q(qo)}}if(Gr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),L.D=x,Q}function yie(x){if(!x.g&&!x.u){x.Y=1;var L=x.Fa;B||P(),U||(B(),U=!0),H.add(L,x),x.v=0}}function U5(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Aa(d(x.Fa,x),_ie(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,vie(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Aa(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Qr(10),WR(this),vie(this))};function z5(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function vie(x){x.g=new jn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var L=Ge(x.qa);Pt(L,"RID","rpc"),Pt(L,"SID",x.K),Pt(L,"AID",x.T),Pt(L,"CI",x.F?"0":"1"),!x.F&&x.ja&&Pt(L,"TO",x.ja),Pt(L,"TYPE","xmlhttp"),aT(x,L),x.m&&x.o&&te(L,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Bn(Ge(L)),V.m=null,V.P=!0,sr(V,x)}e.Za=function(){this.C!=null&&(this.C=null,WR(this),U5(this),Qr(19))};function YR(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function bie(x,L){var V=null;if(x.g==L){YR(x),z5(x),x.g=null;var Q=2}else if(md(x.h,L))V=L.D,se(x.h,L),Q=1;else return;if(x.G!=0){if(L.o)if(Q==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var we=x.B;Q=ul(),Ce(Q,new uu(Q,V)),GR(x)}else yie(x);else if(we=L.s,we==3||we==0&&0<L.X||!(Q==1&&$je(x,L)||Q==2&&U5(x)))switch(V&&0<V.length&&(L=x.h,L.i=L.i.concat(V)),we){case 1:av(x,5);break;case 4:av(x,10);break;case 3:av(x,6);break;default:av(x,2)}}}function _ie(x,L){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*L}function av(x,L){if(x.j.info("Error code "+L),L==2){var V=d(x.fb,x),Q=x.Xa;const we=!Q;Q=new qe(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Bn(Q),we?zR(Q.toString(),V):hp(Q.toString(),V)}else Qr(2);x.G=0,x.l&&x.l.sa(L),wie(x),pie(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),Qr(2)):(this.j.info("Failed to ping google.com"),Qr(1))};function wie(x){if(x.G=0,x.ka=[],x.l){const L=Z(x.h);(L.length!=0||x.i.length!=0)&&(g(x.ka,L),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Eie(x,L,V){var Q=V instanceof qe?Ge(V):new qe(V);if(Q.g!="")L&&(Q.g=L+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,L=L?L+"."+we.hostname:we.hostname,we=+we.port;var De=new qe(null);Q&&st(De,Q),L&&(De.g=L),we&&Et(De,we),V&&(De.l=V),Q=De}return V=x.D,L=x.ya,V&&L&&Pt(Q,V,L),Pt(Q,"VER",x.la),aT(x,Q),Q}function xie(x,L,V){if(L&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=x.Ca&&!x.pa?new ue(new rv({eb:V})):new ue(x.pa),L.Ha(x.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Sie(){}e=Sie.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function KR(){}KR.prototype.g=function(x,L){return new ll(x,L)};function ll(x,L){pe.call(this),this.g=new p_(L),this.l=x,this.h=L&&L.messageUrlParams||null,x=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(x?x["X-WebChannel-Content-Type"]=L.messageContentType:x={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(x?x["X-WebChannel-Client-Profile"]=L.va:x={"X-WebChannel-Client-Profile":L.va}),this.g.S=x,(x=L&&L.Sb)&&!v(x)&&(this.g.m=x),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,x=this.h,x!==null&&L in x&&(x=this.h,L in x&&delete x[L])),this.j=new g_(this)}p(ll,pe),ll.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ll.prototype.close=function(){m_(this.g)},ll.prototype.o=function(x){var L=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=gn(x),x=V);L.i.push(new zo(L.Ya++,x)),L.G==3&&GR(L)},ll.prototype.N=function(){this.g.l=null,delete this.j,m_(this.g),delete this.g,ll.aa.N.call(this)};function Tie(x){Mi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var L=x.__sm__;if(L){e:{for(const V in L){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,L=L!==null&&x in L?L[x]:void 0),this.data=L}else this.data=x}p(Tie,Mi);function Aie(){Cr.call(this),this.status=1}p(Aie,Cr);function g_(x){this.g=x}p(g_,Sie),g_.prototype.ua=function(){Ce(this.g,"a")},g_.prototype.ta=function(x){Ce(this.g,new Tie(x))},g_.prototype.sa=function(x){Ce(this.g,new Aie)},g_.prototype.ra=function(){Ce(this.g,"b")},KR.prototype.createWebChannel=KR.prototype.g,ll.prototype.send=ll.prototype.o,ll.prototype.open=ll.prototype.m,ll.prototype.close=ll.prototype.close,pPe=function(){return new KR},hPe=function(){return ul()},dPe=ms,IV={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,DD=ot,St.COMPLETE="complete",fPe=St,$i.EventType=In,In.OPEN="a",In.CLOSE="b",In.ERROR="c",In.MESSAGE="d",pe.prototype.listen=pe.prototype.K,$2=$i,cPe=rv,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,lPe=ue}).apply(typeof oP<"u"?oP:typeof self<"u"?self:typeof window<"u"?window:{});const che="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}vu.UNAUTHENTICATED=new vu(null),vu.GOOGLE_CREDENTIALS=new vu("google-credentials-uid"),vu.FIRST_PARTY=new vu("first-party-uid"),vu.MOCK_USER=new vu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OS="10.12.1";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ib=new y4("@firebase/firestore");function BT(){return ib.logLevel}function It(e,...t){if(ib.logLevel<=Gn.DEBUG){const n=t.map(BJ);ib.debug(`Firestore (${OS}): ${e}`,...n)}}function Om(e,...t){if(ib.logLevel<=Gn.ERROR){const n=t.map(BJ);ib.error(`Firestore (${OS}): ${e}`,...n)}}function fI(e,...t){if(ib.logLevel<=Gn.WARN){const n=t.map(BJ);ib.warn(`Firestore (${OS}): ${e}`,...n)}}function BJ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(e="Unexpected state"){const t=`FIRESTORE (${OS}) INTERNAL ASSERTION FAILED: `+e;throw Om(t),new Error(t)}function ri(e,t){e||un()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends Jh{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H3t{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class q3t{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(vu.UNAUTHENTICATED))}shutdown(){}}class W3t{constructor(t){this.t=t,this.currentUser=vu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new sm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{It("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(It("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(It("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(ri(typeof r.accessToken=="string"),new H3t(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const t=this.auth&&this.auth.getUid();return ri(t===null||typeof t=="string"),new vu(t)}}class G3t{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=vu.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const t=this.T();return t&&this.I.set("Authorization",t),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class Y3t{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new G3t(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(vu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class K3t{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class X3t{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){const r=s=>{s.error!=null&&It("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,It("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{It("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):It("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(ri(typeof n.token=="string"),this.R=n.token,new K3t(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Q3t(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mPe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=Q3t(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function vr(e,t){return e<t?-1:e>t?1:0}function ux(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls{constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return Ls.fromMillis(Date.now())}static fromDate(t){return Ls.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Ls(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?vr(this.nanoseconds,t.nanoseconds):vr(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(t){this.timestamp=t}static fromTimestamp(t){return new dn(t)}static min(){return new dn(new Ls(0,0))}static max(){return new dn(new Ls(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dI{constructor(t,n,r){n===void 0?n=0:n>t.length&&un(),r===void 0?r=t.length-n:r>t.length-n&&un(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return dI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof dI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ui extends dI{construct(t,n,r){return new ui(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ui(n)}static emptyPath(){return new ui([])}}const J3t=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Co extends dI{construct(t,n,r){return new Co(t,n,r)}static isValidIdentifier(t){return J3t.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Co.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Co(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Co(n)}static emptyPath(){return new Co([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(ui.fromString(t))}static fromName(t){return new Ut(ui.fromString(t).popFirst(5))}static empty(){return new Ut(ui.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ui.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ui.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new ui(t.slice()))}}function Z3t(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new Ls(n+1,0):new Ls(n,r));return new oy(i,Ut.empty(),t)}function e$t(e){return new oy(e.readTime,e.key,-1)}class oy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new oy(dn.min(),Ut.empty(),-1)}static max(){return new oy(dn.max(),Ut.empty(),-1)}}function t$t(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:vr(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n$t="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class r$t{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wk(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==n$t)throw e;It("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&un(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Xe((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Xe?n:Xe.resolve(n)}catch(n){return Xe.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Xe.reject(n)}static resolve(t){return new Xe((n,r)=>{n(t)})}static reject(t){return new Xe((n,r)=>{r(t)})}static waitFor(t){return new Xe((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Xe.resolve(!1);for(const r of t)n=n.next(i=>i?Xe.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Xe((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Xe((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function i$t(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Gk(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UJ{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}UJ.oe=-1;function S4(e){return e==null}function V$(e){return e===0&&1/e==-1/0}function s$t(e){return typeof e=="number"&&Number.isInteger(e)&&!V$(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fhe(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Yb(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gPe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(t,n){this.comparator=t,this.root=n||So.EMPTY}insert(t,n){return new Oi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,So.BLACK,null,null))}remove(t){return new Oi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,So.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new aP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new aP(this.root,t,this.comparator,!1)}getReverseIterator(){return new aP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new aP(this.root,t,this.comparator,!0)}}class aP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class So{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??So.RED,this.left=i??So.EMPTY,this.right=s??So.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new So(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return So.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return So.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,So.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,So.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw un();const t=this.left.check();if(t!==this.right.check())throw un();return t+(this.isRed()?0:1)}}So.EMPTY=null,So.RED=!0,So.BLACK=!1;So.EMPTY=new class{constructor(){this.size=0}get key(){throw un()}get value(){throw un()}get color(){throw un()}get left(){throw un()}get right(){throw un()}copy(t,n,r,i,s){return this}insert(t,n,r){return new So(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Do{constructor(t){this.comparator=t,this.data=new Oi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new dhe(this.data.getIterator())}getIteratorFrom(t){return new dhe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Do)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Do(this.comparator);return n.data=t,n}}class dhe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(t){this.fields=t,t.sort(Co.comparator)}static empty(){return new Tl([])}unionWith(t){let n=new Do(Co.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Tl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return ux(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yPe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _a{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new yPe("Invalid base64 string: "+s):s}}(t);return new _a(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new _a(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return vr(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}_a.EMPTY_BYTE_STRING=new _a("");const o$t=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ay(e){if(ri(!!e),typeof e=="string"){let t=0;const n=o$t.exec(e);if(ri(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:bs(e.seconds),nanos:bs(e.nanos)}}function bs(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function sb(e){return typeof e=="string"?_a.fromBase64String(e):_a.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zJ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function VJ(e){const t=e.mapValue.fields.__previous_value__;return zJ(t)?VJ(t):t}function hI(e){const t=ay(e.mapValue.fields.__local_write_time__.timestampValue);return new Ls(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a$t{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class pI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new pI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof pI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function ob(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?zJ(e)?4:u$t(e)?9007199254740991:10:un()}function Ph(e,t){if(e===t)return!0;const n=ob(e);if(n!==ob(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return hI(e).isEqual(hI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ay(i.timestampValue),a=ay(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return sb(i.bytesValue).isEqual(sb(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return bs(i.geoPointValue.latitude)===bs(s.geoPointValue.latitude)&&bs(i.geoPointValue.longitude)===bs(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return bs(i.integerValue)===bs(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=bs(i.doubleValue),a=bs(s.doubleValue);return o===a?V$(o)===V$(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return ux(e.arrayValue.values||[],t.arrayValue.values||[],Ph);case 10:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(fhe(o)!==fhe(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!Ph(o[u],a[u])))return!1;return!0}(e,t);default:return un()}}function mI(e,t){return(e.values||[]).find(n=>Ph(n,t))!==void 0}function lx(e,t){if(e===t)return 0;const n=ob(e),r=ob(t);if(n!==r)return vr(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return vr(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=bs(s.integerValue||s.doubleValue),u=bs(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return hhe(e.timestampValue,t.timestampValue);case 4:return hhe(hI(e),hI(t));case 5:return vr(e.stringValue,t.stringValue);case 6:return function(s,o){const a=sb(s),u=sb(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=vr(a[l],u[l]);if(c!==0)return c}return vr(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=vr(bs(s.latitude),bs(o.latitude));return a!==0?a:vr(bs(s.longitude),bs(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return function(s,o){const a=s.values||[],u=o.values||[];for(let l=0;l<a.length&&l<u.length;++l){const c=lx(a[l],u[l]);if(c)return c}return vr(a.length,u.length)}(e.arrayValue,t.arrayValue);case 10:return function(s,o){if(s===uP.mapValue&&o===uP.mapValue)return 0;if(s===uP.mapValue)return 1;if(o===uP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=vr(u[f],c[f]);if(d!==0)return d;const h=lx(a[u[f]],l[c[f]]);if(h!==0)return h}return vr(u.length,c.length)}(e.mapValue,t.mapValue);default:throw un()}}function hhe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return vr(e,t);const n=ay(e),r=ay(t),i=vr(n.seconds,r.seconds);return i!==0?i:vr(n.nanos,r.nanos)}function cx(e){return kV(e)}function kV(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=ay(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return sb(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=kV(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${kV(n.fields[o])}`;return i+"}"}(e.mapValue):un()}function phe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function RV(e){return!!e&&"integerValue"in e}function HJ(e){return!!e&&"arrayValue"in e}function mhe(e){return!!e&&"nullValue"in e}function ghe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function OD(e){return!!e&&"mapValue"in e}function BA(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Yb(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=BA(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=BA(e.arrayValue.values[n]);return t}return Object.assign({},e)}function u$t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ku{constructor(t){this.value=t}static empty(){return new ku({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!OD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=BA(n)}setAll(t){let n=Co.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=BA(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());OD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ph(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];OD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){Yb(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new ku(BA(this.value))}}function vPe(e){const t=[];return Yb(e.fields,(n,r)=>{const i=new Co([n]);if(OD(r)){const s=vPe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Tl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ua{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new ua(t,0,dn.min(),dn.min(),dn.min(),ku.empty(),0)}static newFoundDocument(t,n,r,i){return new ua(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new ua(t,2,n,dn.min(),dn.min(),ku.empty(),0)}static newUnknownDocument(t,n){return new ua(t,3,n,dn.min(),dn.min(),ku.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=ku.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=ku.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof ua&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new ua(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let H$=class{constructor(t,n){this.position=t,this.inclusive=n}};function yhe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=lx(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vhe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ph(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(t,n="asc"){this.field=t,this.dir=n}}function l$t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bPe=class{};class ws extends bPe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new f$t(t,n,r):n==="array-contains"?new p$t(t,r):n==="in"?new m$t(t,r):n==="not-in"?new g$t(t,r):n==="array-contains-any"?new y$t(t,r):new ws(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new d$t(t,r):new h$t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(lx(n,this.value)):n!==null&&ob(this.value)===ob(n)&&this.matchesComparison(lx(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return un()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Yf extends bPe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new Yf(t,n)}matches(t){return _Pe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function _Pe(e){return e.op==="and"}function wPe(e){return c$t(e)&&_Pe(e)}function c$t(e){for(const t of e.filters)if(t instanceof Yf)return!1;return!0}function NV(e){if(e instanceof ws)return e.field.canonicalString()+e.op.toString()+cx(e.value);if(wPe(e))return e.filters.map(t=>NV(t)).join(",");{const t=e.filters.map(n=>NV(n)).join(",");return`${e.op}(${t})`}}function EPe(e,t){return e instanceof ws?function(r,i){return i instanceof ws&&r.op===i.op&&r.field.isEqual(i.field)&&Ph(r.value,i.value)}(e,t):e instanceof Yf?function(r,i){return i instanceof Yf&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&EPe(o,i.filters[a]),!0):!1}(e,t):void un()}function xPe(e){return e instanceof ws?function(n){return`${n.field.canonicalString()} ${n.op} ${cx(n.value)}`}(e):e instanceof Yf?function(n){return n.op.toString()+" {"+n.getFilters().map(xPe).join(" ,")+"}"}(e):"Filter"}class f$t extends ws{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class d$t extends ws{constructor(t,n){super(t,"in",n),this.keys=SPe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class h$t extends ws{constructor(t,n){super(t,"not-in",n),this.keys=SPe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function SPe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class p$t extends ws{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return HJ(n)&&mI(n.arrayValue,this.value)}}class m$t extends ws{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&mI(this.value.arrayValue,n)}}class g$t extends ws{constructor(t,n){super(t,"not-in",n)}matches(t){if(mI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!mI(this.value.arrayValue,n)}}class y$t extends ws{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!HJ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>mI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v$t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function bhe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new v$t(e,t,n,r,i,s,o)}function qJ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>NV(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),S4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>cx(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>cx(r)).join(",")),t.ue=n}return t.ue}function WJ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!l$t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!EPe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!vhe(e.startAt,t.startAt)&&vhe(e.endAt,t.endAt)}function PV(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $S{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function b$t(e,t,n,r,i,s,o,a){return new $S(e,t,n,r,i,s,o,a)}function GJ(e){return new $S(e)}function _he(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function TPe(e){return e.collectionGroup!==null}function UA(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Do(Co.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new gI(s,r))}),n.has(Co.keyField().canonicalString())||t.ce.push(new gI(Co.keyField(),r))}return t.ce}function ph(e){const t=hn(e);return t.le||(t.le=_$t(t,UA(e))),t.le}function _$t(e,t){if(e.limitType==="F")return bhe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new gI(i.field,s)});const n=e.endAt?new H$(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new H$(e.startAt.position,e.startAt.inclusive):null;return bhe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function DV(e,t){const n=e.filters.concat([t]);return new $S(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function OV(e,t,n){return new $S(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function T4(e,t){return WJ(ph(e),ph(t))&&e.limitType===t.limitType}function APe(e){return`${qJ(ph(e))}|lt:${e.limitType}`}function nw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>xPe(i)).join(", ")}]`),S4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>cx(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>cx(i)).join(",")),`Target(${r})`}(ph(e))}; limitType=${e.limitType})`}function A4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of UA(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=yhe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,UA(r),i)||r.endAt&&!function(o,a,u){const l=yhe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,UA(r),i))}(e,t)}function w$t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function CPe(e){return(t,n)=>{let r=!1;for(const i of UA(e)){const s=E$t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function E$t(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?lx(u,l):un()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return un()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MS{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){Yb(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return gPe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x$t=new Oi(Ut.comparator);function $m(){return x$t}const IPe=new Oi(Ut.comparator);function M2(...e){let t=IPe;for(const n of e)t=t.insert(n.key,n);return t}function kPe(e){let t=IPe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function p1(){return zA()}function RPe(){return zA()}function zA(){return new MS(e=>e.toString(),(e,t)=>e.isEqual(t))}const S$t=new Oi(Ut.comparator),T$t=new Do(Ut.comparator);function zn(...e){let t=T$t;for(const n of e)t=t.add(n);return t}const A$t=new Do(vr);function C$t(){return A$t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NPe(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:V$(t)?"-0":t}}function PPe(e){return{integerValue:""+e}}function I$t(e,t){return s$t(t)?PPe(t):NPe(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class C4{constructor(){this._=void 0}}function k$t(e,t,n){return e instanceof yI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&zJ(s)&&(s=VJ(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof vI?OPe(e,t):e instanceof bI?$Pe(e,t):function(i,s){const o=DPe(i,s),a=whe(o)+whe(i.Pe);return RV(o)&&RV(i.Pe)?PPe(a):NPe(i.serializer,a)}(e,t)}function R$t(e,t,n){return e instanceof vI?OPe(e,t):e instanceof bI?$Pe(e,t):n}function DPe(e,t){return e instanceof q$?function(r){return RV(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class yI extends C4{}class vI extends C4{constructor(t){super(),this.elements=t}}function OPe(e,t){const n=MPe(t);for(const r of e.elements)n.some(i=>Ph(i,r))||n.push(r);return{arrayValue:{values:n}}}class bI extends C4{constructor(t){super(),this.elements=t}}function $Pe(e,t){let n=MPe(t);for(const r of e.elements)n=n.filter(i=>!Ph(i,r));return{arrayValue:{values:n}}}class q$ extends C4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function whe(e){return bs(e.integerValue||e.doubleValue)}function MPe(e){return HJ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N$t{constructor(t,n){this.field=t,this.transform=n}}function P$t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof vI&&i instanceof vI||r instanceof bI&&i instanceof bI?ux(r.elements,i.elements,Ph):r instanceof q$&&i instanceof q$?Ph(r.Pe,i.Pe):r instanceof yI&&i instanceof yI}(e.transform,t.transform)}class D$t{constructor(t,n){this.version=t,this.transformResults=n}}class Hu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Hu}static exists(t){return new Hu(void 0,t)}static updateTime(t){return new Hu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function $D(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class I4{}function LPe(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new k4(e.key,Hu.none()):new Yk(e.key,e.data,Hu.none());{const n=e.data,r=ku.empty();let i=new Do(Co.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new zy(e.key,r,new Tl(i.toArray()),Hu.none())}}function O$t(e,t,n){e instanceof Yk?function(i,s,o){const a=i.value.clone(),u=xhe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof zy?function(i,s,o){if(!$D(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=xhe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(FPe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function VA(e,t,n,r){return e instanceof Yk?function(s,o,a,u){if(!$D(s.precondition,o))return a;const l=s.value.clone(),c=She(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof zy?function(s,o,a,u){if(!$D(s.precondition,o))return a;const l=She(s.fieldTransforms,u,o),c=o.data;return c.setAll(FPe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return $D(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function $$t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=DPe(r.transform,i||null);s!=null&&(n===null&&(n=ku.empty()),n.set(r.field,s))}return n||null}function Ehe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ux(r,i,(s,o)=>P$t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Yk extends I4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class zy extends I4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function FPe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function xhe(e,t,n){const r=new Map;ri(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,R$t(o,a,n[i]))}return r}function She(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,k$t(s,o,t))}return r}class k4 extends I4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class M$t extends I4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L$t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&O$t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=VA(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=VA(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=RPe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=LPe(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),zn())}isEqual(t){return this.batchId===t.batchId&&ux(this.mutations,t.mutations,(n,r)=>Ehe(n,r))&&ux(this.baseMutations,t.baseMutations,(n,r)=>Ehe(n,r))}}class YJ{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){ri(t.mutations.length===r.length);let i=function(){return S$t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new YJ(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F$t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j$t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ys,Zn;function B$t(e){switch(e){default:return un();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function jPe(e){if(e===void 0)return Om("GRPC error has no .code"),Be.UNKNOWN;switch(e){case ys.OK:return Be.OK;case ys.CANCELLED:return Be.CANCELLED;case ys.UNKNOWN:return Be.UNKNOWN;case ys.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case ys.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case ys.INTERNAL:return Be.INTERNAL;case ys.UNAVAILABLE:return Be.UNAVAILABLE;case ys.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case ys.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case ys.NOT_FOUND:return Be.NOT_FOUND;case ys.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case ys.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case ys.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case ys.ABORTED:return Be.ABORTED;case ys.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case ys.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case ys.DATA_LOSS:return Be.DATA_LOSS;default:return un()}}(Zn=ys||(ys={}))[Zn.OK=0]="OK",Zn[Zn.CANCELLED=1]="CANCELLED",Zn[Zn.UNKNOWN=2]="UNKNOWN",Zn[Zn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Zn[Zn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Zn[Zn.NOT_FOUND=5]="NOT_FOUND",Zn[Zn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Zn[Zn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Zn[Zn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Zn[Zn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Zn[Zn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Zn[Zn.ABORTED=10]="ABORTED",Zn[Zn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Zn[Zn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Zn[Zn.INTERNAL=13]="INTERNAL",Zn[Zn.UNAVAILABLE=14]="UNAVAILABLE",Zn[Zn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function U$t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z$t=new T1([4294967295,4294967295],0);function The(e){const t=U$t().encode(e),n=new uPe;return n.update(t),new Uint8Array(n.digest())}function Ahe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new T1([n,r],0),new T1([i,s],0)]}class KJ{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new L2(`Invalid padding: ${n}`);if(r<0)throw new L2(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new L2(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new L2(`Invalid padding when bitmap length is 0: ${n}`);this.Ie=8*t.length-n,this.Te=T1.fromNumber(this.Ie)}Ee(t,n,r){let i=t.add(n.multiply(T1.fromNumber(r)));return i.compare(z$t)===1&&(i=new T1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Te).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Ie===0)return!1;const n=The(t),[r,i]=Ahe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new KJ(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Ie===0)return;const n=The(t),[r,i]=Ahe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class L2 extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,Kk.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new R4(dn.min(),i,new Oi(vr),$m(),zn())}}class Kk{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Kk(r,n,zn(),zn(),zn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class BPe{constructor(t,n){this.targetId=t,this.me=n}}class UPe{constructor(t,n,r=_a.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Che{constructor(){this.fe=0,this.ge=khe(),this.pe=_a.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}Ce(){let t=zn(),n=zn(),r=zn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:un()}}),new Kk(this.pe,this.ye,t,n,r)}ve(){this.we=!1,this.ge=khe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,ri(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class V$t{constructor(t){this.Le=t,this.Be=new Map,this.ke=$m(),this.qe=Ihe(),this.Qe=new Oi(vr)}Ke(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.$e(n,t.Ve):this.Ue(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.Ue(n,t.key,t.Ve)}We(t){this.forEachTarget(t,n=>{const r=this.Ge(n);switch(t.state){case 0:this.ze(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.ve(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.ze(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.ze(n)&&(this.je(n),r.De(t.resumeToken));break;default:un()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.ze(i)&&n(i)})}He(t){const n=t.targetId,r=t.me.count,i=this.Je(n);if(i){const s=i.target;if(PV(s))if(r===0){const o=new Ut(s.path);this.Ue(n,o,ua.newNoDocument(o,dn.min()))}else ri(r===1);else{const o=this.Ye(n);if(o!==r){const a=this.Ze(t),u=a?this.Xe(a,t,o):1;if(u!==0){this.je(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Qe=this.Qe.insert(n,l)}}}}}Ze(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=sb(r).toUint8Array()}catch(u){if(u instanceof yPe)return fI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new KJ(o,i,s)}catch(u){return fI(u instanceof L2?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Ie===0?null:a}Xe(t,n,r){return n.me.count===r-this.nt(t,n.targetId)?0:2}nt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.tt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.Ue(n,s,null),i++)}),i}rt(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Je(o);if(a){if(s.current&&PV(a.target)){const u=new Ut(a.target.path);this.ke.get(u)!==null||this.it(o,u)||this.Ue(o,u,ua.newNoDocument(u,t))}s.be&&(n.set(o,s.Ce()),s.ve())}});let r=zn();this.qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Je(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new R4(t,n,this.Qe,this.ke,r);return this.ke=$m(),this.qe=Ihe(),this.Qe=new Oi(vr),i}$e(t,n){if(!this.ze(t))return;const r=this.it(t,n.key)?2:0;this.Ge(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t))}Ue(t,n,r){if(!this.ze(t))return;const i=this.Ge(t);this.it(t,n)?i.Fe(n,1):i.Me(n),this.qe=this.qe.insert(n,this.st(n).delete(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ye(t){const n=this.Ge(t).Ce();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.Ge(t).xe()}Ge(t){let n=this.Be.get(t);return n||(n=new Che,this.Be.set(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Do(vr),this.qe=this.qe.insert(t,n)),n}ze(t){const n=this.Je(t)!==null;return n||It("WatchChangeAggregator","Detected inactive target",t),n}Je(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ot(t)}je(t){this.Be.set(t,new Che),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.Ue(t,n,null)})}it(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function Ihe(){return new Oi(Ut.comparator)}function khe(){return new Oi(Ut.comparator)}const H$t={asc:"ASCENDING",desc:"DESCENDING"},q$t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},W$t={and:"AND",or:"OR"};class G$t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function $V(e,t){return e.useProto3Json||S4(t)?t:{value:t}}function W$(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function zPe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Y$t(e,t){return W$(e,t.toTimestamp())}function mh(e){return ri(!!e),dn.fromTimestamp(function(n){const r=ay(n);return new Ls(r.seconds,r.nanos)}(e))}function XJ(e,t){return MV(e,t).canonicalString()}function MV(e,t){const n=function(i){return new ui(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function VPe(e){const t=ui.fromString(e);return ri(YPe(t)),t}function LV(e,t){return XJ(e.databaseId,t.path)}function I9(e,t){const n=VPe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(qPe(n))}function HPe(e,t){return XJ(e.databaseId,t)}function K$t(e){const t=VPe(e);return t.length===4?ui.emptyPath():qPe(t)}function FV(e){return new ui(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function qPe(e){return ri(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Rhe(e,t,n){return{name:LV(e,t),fields:n.value.mapValue.fields}}function X$t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:un()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(ri(c===void 0||typeof c=="string"),_a.fromBase64String(c||"")):(ri(c===void 0||c instanceof Buffer||c instanceof Uint8Array),_a.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:jPe(l.code);return new bt(c,l.message||"")}(o);n=new UPe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=I9(e,r.document.name),s=mh(r.document.updateTime),o=r.document.createTime?mh(r.document.createTime):dn.min(),a=new ku({mapValue:{fields:r.document.fields}}),u=ua.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new MD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=I9(e,r.document),s=r.readTime?mh(r.readTime):dn.min(),o=ua.newNoDocument(i,s),a=r.removedTargetIds||[];n=new MD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=I9(e,r.document),s=r.removedTargetIds||[];n=new MD([],s,i,null)}else{if(!("filter"in t))return un();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new j$t(i,s),a=r.targetId;n=new BPe(a,o)}}return n}function Q$t(e,t){let n;if(t instanceof Yk)n={update:Rhe(e,t.key,t.value)};else if(t instanceof k4)n={delete:LV(e,t.key)};else if(t instanceof zy)n={update:Rhe(e,t.key,t.data),updateMask:oMt(t.fieldMask)};else{if(!(t instanceof M$t))return un();n={verify:LV(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof yI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof vI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof bI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof q$)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw un()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:Y$t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:un()}(e,t.precondition)),n}function J$t(e,t){return e&&e.length>0?(ri(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?mh(i.updateTime):mh(s);return o.isEqual(dn.min())&&(o=mh(s)),new D$t(o,i.transformResults||[])}(n,t))):[]}function Z$t(e,t){return{documents:[HPe(e,t.path)]}}function eMt(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=HPe(e,i);const s=function(l){if(l.length!==0)return GPe(Yf.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:rw(d.field),direction:rMt(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=$V(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{_t:n,parent:i}}function tMt(e){let t=K$t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){ri(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=WPe(f);return d instanceof Yf&&wPe(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new gI(iw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,S4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new H$(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new H$(h,d)}(n.endAt)),b$t(t,i,o,s,a,"F",u,l)}function nMt(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return un()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function WPe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=iw(n.unaryFilter.field);return ws.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=iw(n.unaryFilter.field);return ws.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=iw(n.unaryFilter.field);return ws.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=iw(n.unaryFilter.field);return ws.create(o,"!=",{nullValue:"NULL_VALUE"});default:return un()}}(e):e.fieldFilter!==void 0?function(n){return ws.create(iw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return un()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Yf.create(n.compositeFilter.filters.map(r=>WPe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return un()}}(n.compositeFilter.op))}(e):un()}function rMt(e){return H$t[e]}function iMt(e){return q$t[e]}function sMt(e){return W$t[e]}function rw(e){return{fieldPath:e.canonicalString()}}function iw(e){return Co.fromServerFormat(e.fieldPath)}function GPe(e){return e instanceof ws?function(n){if(n.op==="=="){if(ghe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NAN"}};if(mhe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(ghe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NOT_NAN"}};if(mhe(n.value))return{unaryFilter:{field:rw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:rw(n.field),op:iMt(n.op),value:n.value}}}(e):e instanceof Yf?function(n){const r=n.getFilters().map(i=>GPe(i));return r.length===1?r[0]:{compositeFilter:{op:sMt(n.op),filters:r}}}(e):un()}function oMt(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function YPe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zg{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=_a.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new Zg(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new Zg(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new Zg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new Zg(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMt{constructor(t){this.ct=t}}function uMt(e){const t=tMt({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?OV(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lMt{constructor(){this._n=new cMt}addToCollectionParentIndex(t,n){return this._n.add(n),Xe.resolve()}getCollectionParents(t,n){return Xe.resolve(this._n.getEntries(n))}addFieldIndex(t,n){return Xe.resolve()}deleteFieldIndex(t,n){return Xe.resolve()}deleteAllFieldIndexes(t){return Xe.resolve()}createTargetIndexes(t,n){return Xe.resolve()}getDocumentsMatchingTarget(t,n){return Xe.resolve(null)}getIndexType(t,n){return Xe.resolve(0)}getFieldIndexes(t,n){return Xe.resolve([])}getNextCollectionGroupToUpdate(t){return Xe.resolve(null)}getMinOffset(t,n){return Xe.resolve(oy.min())}getMinOffsetFromCollectionGroup(t,n){return Xe.resolve(oy.min())}updateCollectionGroup(t,n,r){return Xe.resolve()}updateIndexEntries(t,n){return Xe.resolve()}}class cMt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Do(ui.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Do(ui.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t){this.On=t}next(){return this.On+=2,this.On}static Nn(){return new fx(0)}static Ln(){return new fx(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fMt{constructor(){this.changes=new MS(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,ua.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Xe.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dMt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hMt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&VA(r.mutation,i,Tl.empty(),Ls.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,zn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=zn()){const i=p1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=M2();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=p1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,zn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=$m();const o=zA(),a=function(){return zA()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof zy)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),VA(c.mutation,l,c.mutation.getFieldMask(),Ls.now())):o.set(l.key,Tl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new dMt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=zA();let i=new Oi((o,a)=>o-a),s=zn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Tl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||zn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=RPe();c.forEach(d=>{if(!s.has(d)){const h=LPe(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Xe.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):TPe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Xe.resolve(p1());let a=-1,u=s;return o.next(l=>Xe.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Xe.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,zn())).next(c=>({batchId:a,changes:kPe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=M2();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=M2();return this.indexManager.getCollectionParents(t,s).next(a=>Xe.forEach(a,u=>{const l=function(f,d){return new $S(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,ua.newInvalidDocument(c)))});let a=M2();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&VA(c.mutation,l,Tl.empty(),Ls.now()),A4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pMt{constructor(t){this.serializer=t,this.cr=new Map,this.lr=new Map}getBundleMetadata(t,n){return Xe.resolve(this.cr.get(n))}saveBundleMetadata(t,n){return this.cr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:mh(i.createTime)}}(n)),Xe.resolve()}getNamedQuery(t,n){return Xe.resolve(this.lr.get(n))}saveNamedQuery(t,n){return this.lr.set(n.name,function(i){return{name:i.name,query:uMt(i.bundledQuery),readTime:mh(i.readTime)}}(n)),Xe.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mMt{constructor(){this.overlays=new Oi(Ut.comparator),this.hr=new Map}getOverlay(t,n){return Xe.resolve(this.overlays.get(n))}getOverlays(t,n){const r=p1();return Xe.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.ht(t,n,s)}),Xe.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.hr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.hr.delete(r)),Xe.resolve()}getOverlaysForCollection(t,n,r){const i=p1(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Xe.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Oi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=p1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=p1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Xe.resolve(a)}ht(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.hr.get(i.largestBatchId).delete(r.key);this.hr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new F$t(n,r));let s=this.hr.get(n);s===void 0&&(s=zn(),this.hr.set(n,s)),this.hr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QJ{constructor(){this.Pr=new Do(Ks.Ir),this.Tr=new Do(Ks.Er)}isEmpty(){return this.Pr.isEmpty()}addReference(t,n){const r=new Ks(t,n);this.Pr=this.Pr.add(r),this.Tr=this.Tr.add(r)}dr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Ar(new Ks(t,n))}Rr(t,n){t.forEach(r=>this.removeReference(r,n))}Vr(t){const n=new Ut(new ui([])),r=new Ks(n,t),i=new Ks(n,t+1),s=[];return this.Tr.forEachInRange([r,i],o=>{this.Ar(o),s.push(o.key)}),s}mr(){this.Pr.forEach(t=>this.Ar(t))}Ar(t){this.Pr=this.Pr.delete(t),this.Tr=this.Tr.delete(t)}gr(t){const n=new Ut(new ui([])),r=new Ks(n,t),i=new Ks(n,t+1);let s=zn();return this.Tr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Ks(t,0),r=this.Pr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ks{constructor(t,n){this.key=t,this.pr=n}static Ir(t,n){return Ut.comparator(t.key,n.key)||vr(t.pr,n.pr)}static Er(t,n){return vr(t.pr,n.pr)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gMt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.yr=1,this.wr=new Do(Ks.Ir)}checkEmpty(t){return Xe.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.yr;this.yr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new L$t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.wr=this.wr.add(new Ks(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Xe.resolve(o)}lookupMutationBatch(t,n){return Xe.resolve(this.Sr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.br(r),s=i<0?0:i;return Xe.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Xe.resolve(this.mutationQueue.length===0?-1:this.yr-1)}getAllMutationBatches(t){return Xe.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ks(n,0),i=new Ks(n,Number.POSITIVE_INFINITY),s=[];return this.wr.forEachInRange([r,i],o=>{const a=this.Sr(o.pr);s.push(a)}),Xe.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Do(vr);return n.forEach(i=>{const s=new Ks(i,0),o=new Ks(i,Number.POSITIVE_INFINITY);this.wr.forEachInRange([s,o],a=>{r=r.add(a.pr)})}),Xe.resolve(this.Dr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Ks(new Ut(s),0);let a=new Do(vr);return this.wr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.pr)),!0)},o),Xe.resolve(this.Dr(a))}Dr(t){const n=[];return t.forEach(r=>{const i=this.Sr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){ri(this.Cr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.wr;return Xe.forEach(n.mutations,i=>{const s=new Ks(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.wr=r})}Mn(t){}containsKey(t,n){const r=new Ks(n,0),i=this.wr.firstAfterOrEqual(r);return Xe.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Xe.resolve()}Cr(t,n){return this.br(t)}br(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Sr(t){const n=this.br(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yMt{constructor(t){this.vr=t,this.docs=function(){return new Oi(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Xe.resolve(r?r.document.mutableCopy():ua.newInvalidDocument(n))}getEntries(t,n){let r=$m();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():ua.newInvalidDocument(i))}),Xe.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=$m();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||t$t(e$t(c),r)<=0||(i.has(c.key)||A4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Xe.resolve(s)}getAllFromCollectionGroup(t,n,r,i){un()}Fr(t,n){return Xe.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new vMt(this)}getSize(t){return Xe.resolve(this.size)}}class vMt extends fMt{constructor(t){super(),this.ar=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.ar.addEntry(t,i)):this.ar.removeEntry(r)}),Xe.waitFor(n)}getFromCache(t,n){return this.ar.getEntry(t,n)}getAllFromCache(t,n){return this.ar.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bMt{constructor(t){this.persistence=t,this.Mr=new MS(n=>qJ(n),WJ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.Or=0,this.Nr=new QJ,this.targetCount=0,this.Lr=fx.Nn()}forEachTarget(t,n){return this.Mr.forEach((r,i)=>n(i)),Xe.resolve()}getLastRemoteSnapshotVersion(t){return Xe.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Xe.resolve(this.Or)}allocateTargetId(t){return this.highestTargetId=this.Lr.next(),Xe.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Or&&(this.Or=n),Xe.resolve()}qn(t){this.Mr.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Lr=new fx(n),this.highestTargetId=n),t.sequenceNumber>this.Or&&(this.Or=t.sequenceNumber)}addTargetData(t,n){return this.qn(n),this.targetCount+=1,Xe.resolve()}updateTargetData(t,n){return this.qn(n),Xe.resolve()}removeTargetData(t,n){return this.Mr.delete(n.target),this.Nr.Vr(n.targetId),this.targetCount-=1,Xe.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Mr.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Mr.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Xe.waitFor(s).next(()=>i)}getTargetCount(t){return Xe.resolve(this.targetCount)}getTargetData(t,n){const r=this.Mr.get(n)||null;return Xe.resolve(r)}addMatchingKeys(t,n,r){return this.Nr.dr(n,r),Xe.resolve()}removeMatchingKeys(t,n,r){this.Nr.Rr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Xe.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.Nr.Vr(n),Xe.resolve()}getMatchingKeysForTargetId(t,n){const r=this.Nr.gr(n);return Xe.resolve(r)}containsKey(t,n){return Xe.resolve(this.Nr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Mt{constructor(t,n){this.Br={},this.overlays={},this.kr=new UJ(0),this.qr=!1,this.qr=!0,this.referenceDelegate=t(this),this.Qr=new bMt(this),this.indexManager=new lMt,this.remoteDocumentCache=function(i){return new yMt(i)}(r=>this.referenceDelegate.Kr(r)),this.serializer=new aMt(n),this.$r=new pMt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.qr=!1,Promise.resolve()}get started(){return this.qr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new mMt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Br[t.toKey()];return r||(r=new gMt(n,this.referenceDelegate),this.Br[t.toKey()]=r),r}getTargetCache(){return this.Qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.$r}runTransaction(t,n,r){It("MemoryPersistence","Starting transaction:",t);const i=new wMt(this.kr.next());return this.referenceDelegate.Ur(),r(i).next(s=>this.referenceDelegate.Wr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gr(t,n){return Xe.or(Object.values(this.Br).map(r=>()=>r.containsKey(t,n)))}}class wMt extends r$t{constructor(t){super(),this.currentSequenceNumber=t}}class JJ{constructor(t){this.persistence=t,this.zr=new QJ,this.jr=null}static Hr(t){return new JJ(t)}get Jr(){if(this.jr)return this.jr;throw un()}addReference(t,n,r){return this.zr.addReference(r,n),this.Jr.delete(r.toString()),Xe.resolve()}removeReference(t,n,r){return this.zr.removeReference(r,n),this.Jr.add(r.toString()),Xe.resolve()}markPotentiallyOrphaned(t,n){return this.Jr.add(n.toString()),Xe.resolve()}removeTarget(t,n){this.zr.Vr(n.targetId).forEach(i=>this.Jr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.Jr.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Ur(){this.jr=new Set}Wr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Xe.forEach(this.Jr,r=>{const i=Ut.fromPath(r);return this.Yr(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.jr=null,n.apply(t)))}updateLimboDocument(t,n){return this.Yr(t,n).next(r=>{r?this.Jr.delete(n.toString()):this.Jr.add(n.toString())})}Kr(t){return 0}Yr(t,n){return Xe.or([()=>Xe.resolve(this.zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Gr(t,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZJ{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.qi=r,this.Qi=i}static Ki(t,n){let r=zn(),i=zn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new ZJ(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EMt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xMt{constructor(){this.$i=!1,this.Ui=!1,this.Wi=100,this.Gi=function(){return nNt()?8:i$t(Lo())>0?6:4}()}initialize(t,n){this.zi=t,this.indexManager=n,this.$i=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.ji(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.Hi(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new EMt;return this.Ji(t,n,o).next(a=>{if(s.result=a,this.Ui)return this.Yi(t,n,o,a.size)})}).next(()=>s.result)}Yi(t,n,r,i){return r.documentReadCount<this.Wi?(BT()<=Gn.DEBUG&&It("QueryEngine","SDK will not create cache indexes for query:",nw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Wi,"documents"),Xe.resolve()):(BT()<=Gn.DEBUG&&It("QueryEngine","Query:",nw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Gi*i?(BT()<=Gn.DEBUG&&It("QueryEngine","The SDK decides to create cache indexes for query:",nw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ph(n))):Xe.resolve())}ji(t,n){if(_he(n))return Xe.resolve(null);let r=ph(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=OV(n,null,"F"),r=ph(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=zn(...s);return this.zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.Zi(n,a);return this.Xi(n,l,o,u.readTime)?this.ji(t,OV(n,null,"F")):this.es(t,l,n,u)}))})))}Hi(t,n,r,i){return _he(n)||i.isEqual(dn.min())?Xe.resolve(null):this.zi.getDocuments(t,r).next(s=>{const o=this.Zi(n,s);return this.Xi(n,o,r,i)?Xe.resolve(null):(BT()<=Gn.DEBUG&&It("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),nw(n)),this.es(t,o,n,Z3t(i,-1)).next(a=>a))})}Zi(t,n){let r=new Do(CPe(t));return n.forEach((i,s)=>{A4(t,s)&&(r=r.add(s))}),r}Xi(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ji(t,n,r){return BT()<=Gn.DEBUG&&It("QueryEngine","Using full collection scan to execute query:",nw(n)),this.zi.getDocumentsMatchingQuery(t,n,oy.min(),r)}es(t,n,r,i){return this.zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SMt{constructor(t,n,r,i){this.persistence=t,this.ts=n,this.serializer=i,this.ns=new Oi(vr),this.rs=new MS(s=>qJ(s),WJ),this.ss=new Map,this.os=t.getRemoteDocumentCache(),this.Qr=t.getTargetCache(),this.$r=t.getBundleCache(),this._s(r)}_s(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new hMt(this.os,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.os.setIndexManager(this.indexManager),this.ts.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.ns))}}function TMt(e,t,n,r){return new SMt(e,t,n,r)}async function KPe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n._s(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=zn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({us:l,removedBatchIds:o,addedBatchIds:a}))})})}function AMt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.os.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Xe.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);ri(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=zn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function XPe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Qr.getLastRemoteSnapshotVersion(n))}function CMt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.ns;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.os.newChangeBuffer({trackRemovals:!0});i=n.ns;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Qr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Qr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(_a.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Qr.updateTargetData(s,h))});let u=$m(),l=zn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(IMt(s,o,t.documentUpdates).next(c=>{u=c.cs,l=c.ls})),!r.isEqual(dn.min())){const c=n.Qr.getLastRemoteSnapshotVersion(s).next(f=>n.Qr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Xe.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.ns=i,s))}function IMt(e,t,n){let r=zn(),i=zn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=$m();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):It("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{cs:o,ls:i}})}function kMt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function RMt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Qr.getTargetData(r,t).next(s=>s?(i=s,Xe.resolve(i)):n.Qr.allocateTargetId(r).next(o=>(i=new Zg(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.ns.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.ns=n.ns.insert(r.targetId,r),n.rs.set(t,r.targetId)),r})}async function jV(e,t,n){const r=hn(e),i=r.ns.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Gk(o))throw o;It("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.ns=r.ns.remove(t),r.rs.delete(i.target)}function Nhe(e,t,n){const r=hn(e);let i=dn.min(),s=zn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.rs.get(c);return d!==void 0?Xe.resolve(f.ns.get(d)):f.Qr.getTargetData(l,c)}(r,o,ph(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Qr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.ts.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:zn())).next(a=>(NMt(r,w$t(t),a),{documents:a,hs:s})))}function NMt(e,t,n){let r=e.ss.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ss.set(t,r)}class Phe{constructor(){this.activeTargetIds=C$t()}As(t){this.activeTargetIds=this.activeTargetIds.add(t)}Rs(t){this.activeTargetIds=this.activeTargetIds.delete(t)}ds(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class PMt{constructor(){this.no=new Phe,this.ro={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t){return this.no.As(t),this.ro[t]||"not-current"}updateQueryState(t,n,r){this.ro[t]=n}removeLocalQueryTarget(t){this.no.Rs(t)}isLocalQueryTarget(t){return this.no.activeTargetIds.has(t)}clearQueryState(t){delete this.ro[t]}getAllActiveQueryTargets(){return this.no.activeTargetIds}isActiveQueryTarget(t){return this.no.activeTargetIds.has(t)}start(){return this.no=new Phe,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DMt{io(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dhe{constructor(){this.so=()=>this.oo(),this._o=()=>this.ao(),this.uo=[],this.co()}io(t){this.uo.push(t)}shutdown(){window.removeEventListener("online",this.so),window.removeEventListener("offline",this._o)}co(){window.addEventListener("online",this.so),window.addEventListener("offline",this._o)}oo(){It("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.uo)t(0)}ao(){It("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.uo)t(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lP=null;function k9(){return lP===null?lP=function(){return 268435456+Math.round(2147483648*Math.random())}():lP++,"0x"+lP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OMt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $Mt{constructor(t){this.lo=t.lo,this.ho=t.ho}Po(t){this.Io=t}To(t){this.Eo=t}Ao(t){this.Ro=t}onMessage(t){this.Vo=t}close(){this.ho()}send(t){this.lo(t)}mo(){this.Io()}fo(){this.Eo()}po(t){this.Ro(t)}yo(t){this.Vo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ea="WebChannelConnection";class MMt extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.wo=r+"://"+n.host,this.So=`projects/${i}/databases/${s}`,this.bo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Do(){return!1}Co(n,r,i,s,o){const a=k9(),u=this.vo(n,r.toUriEncodedString());It("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.So,"x-goog-request-params":this.bo};return this.Fo(l,s,o),this.Mo(n,u,l,i).then(c=>(It("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw fI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}xo(n,r,i,s,o,a){return this.Co(n,r,i,s,o)}Fo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+OS}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}vo(n,r){const i=OMt[n];return`${this.wo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Mo(t,n,r,i){const s=k9();return new Promise((o,a)=>{const u=new lPe;u.setWithCredentials(!0),u.listenOnce(fPe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case DD.NO_ERROR:const c=u.getResponseJson();It(ea,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case DD.TIMEOUT:It(ea,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case DD.HTTP_ERROR:const f=u.getStatus();if(It(ea,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:un()}}finally{It(ea,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);It(ea,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}Oo(t,n,r){const i=k9(),s=[this.wo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=pPe(),a=hPe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.xmlHttpFactory=new cPe({})),this.Fo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");It(ea,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new $Mt({lo:g=>{h?It(ea,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(It(ea,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),It(ea,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},ho:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,$2.EventType.OPEN,()=>{h||(It(ea,`RPC '${t}' stream ${i} transport opened.`),p.mo())}),m(f,$2.EventType.CLOSE,()=>{h||(h=!0,It(ea,`RPC '${t}' stream ${i} transport closed`),p.po())}),m(f,$2.EventType.ERROR,g=>{h||(h=!0,fI(ea,`RPC '${t}' stream ${i} transport errored:`,g),p.po(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,$2.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];ri(!!v);const b=v,w=b.error||((y=b[0])===null||y===void 0?void 0:y.error);if(w){It(ea,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let T=function(C){const k=ys[C];if(k!==void 0)return jPe(k)}(E),S=w.message;T===void 0&&(T=Be.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.po(new bt(T,S)),f.close()}else It(ea,`RPC '${t}' stream ${i} received:`,v),p.yo(v)}}),m(a,dPe.STAT_EVENT,g=>{g.stat===IV.PROXY?It(ea,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===IV.NOPROXY&&It(ea,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.fo()},0),p}}function R9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N4(e){return new G$t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QPe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.oi=t,this.timerId=n,this.No=r,this.Lo=i,this.Bo=s,this.ko=0,this.qo=null,this.Qo=Date.now(),this.reset()}reset(){this.ko=0}Ko(){this.ko=this.Bo}$o(t){this.cancel();const n=Math.floor(this.ko+this.Uo()),r=Math.max(0,Date.now()-this.Qo),i=Math.max(0,n-r);i>0&&It("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.ko} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.qo=this.oi.enqueueAfterDelay(this.timerId,i,()=>(this.Qo=Date.now(),t())),this.ko*=this.Lo,this.ko<this.No&&(this.ko=this.No),this.ko>this.Bo&&(this.ko=this.Bo)}Wo(){this.qo!==null&&(this.qo.skipDelay(),this.qo=null)}cancel(){this.qo!==null&&(this.qo.cancel(),this.qo=null)}Uo(){return(Math.random()-.5)*this.ko}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JPe{constructor(t,n,r,i,s,o,a,u){this.oi=t,this.Go=r,this.zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.jo=0,this.Ho=null,this.Jo=null,this.stream=null,this.Yo=new QPe(t,n)}Zo(){return this.state===1||this.state===5||this.Xo()}Xo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.e_()}async stop(){this.Zo()&&await this.close(0)}t_(){this.state=0,this.Yo.reset()}n_(){this.Xo()&&this.Ho===null&&(this.Ho=this.oi.enqueueAfterDelay(this.Go,6e4,()=>this.r_()))}i_(t){this.s_(),this.stream.send(t)}async r_(){if(this.Xo())return this.close(0)}s_(){this.Ho&&(this.Ho.cancel(),this.Ho=null)}o_(){this.Jo&&(this.Jo.cancel(),this.Jo=null)}async close(t,n){this.s_(),this.o_(),this.Yo.cancel(),this.jo++,t!==4?this.Yo.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(Om(n.toString()),Om("Using maximum backoff delay to prevent overloading the backend."),this.Yo.Ko()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.__(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Ao(n)}__(){}auth(){this.state=1;const t=this.a_(this.jo),n=this.jo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.jo===n&&this.u_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.c_(i)})})}u_(t,n){const r=this.a_(this.jo);this.stream=this.l_(t,n),this.stream.Po(()=>{r(()=>this.listener.Po())}),this.stream.To(()=>{r(()=>(this.state=2,this.Jo=this.oi.enqueueAfterDelay(this.zo,1e4,()=>(this.Xo()&&(this.state=3),Promise.resolve())),this.listener.To()))}),this.stream.Ao(i=>{r(()=>this.c_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}e_(){this.state=5,this.Yo.$o(async()=>{this.state=0,this.start()})}c_(t){return It("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}a_(t){return n=>{this.oi.enqueueAndForget(()=>this.jo===t?n():(It("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class LMt extends JPe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}l_(t,n){return this.connection.Oo("Listen",t,n)}onMessage(t){this.Yo.reset();const n=X$t(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?mh(o.readTime):dn.min()}(t);return this.listener.h_(n,r)}P_(t){const n={};n.database=FV(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=PV(u)?{documents:Z$t(s,u)}:{query:eMt(s,u)._t},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=zPe(s,o.resumeToken);const l=$V(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=W$(s,o.snapshotVersion.toTimestamp());const l=$V(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=nMt(this.serializer,t);r&&(n.labels=r),this.i_(n)}I_(t){const n={};n.database=FV(this.serializer),n.removeTarget=t,this.i_(n)}}class FMt extends JPe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.T_=!1}get E_(){return this.T_}start(){this.T_=!1,this.lastStreamToken=void 0,super.start()}__(){this.T_&&this.d_([])}l_(t,n){return this.connection.Oo("Write",t,n)}onMessage(t){if(ri(!!t.streamToken),this.lastStreamToken=t.streamToken,this.T_){this.Yo.reset();const n=J$t(t.writeResults,t.commitTime),r=mh(t.commitTime);return this.listener.A_(r,n)}return ri(!t.writeResults||t.writeResults.length===0),this.T_=!0,this.listener.R_()}V_(){const t={};t.database=FV(this.serializer),this.i_(t)}d_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>Q$t(this.serializer,r))};this.i_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jMt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.m_=!1}f_(){if(this.m_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Co(t,n,r,i){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Co(t,MV(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}xo(t,n,r,i,s){return this.f_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.xo(t,MV(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.m_=!0,this.connection.terminate()}}class BMt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.g_=0,this.p_=null,this.y_=!0}w_(){this.g_===0&&(this.S_("Unknown"),this.p_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.p_=null,this.b_("Backend didn't respond within 10 seconds."),this.S_("Offline"),Promise.resolve())))}D_(t){this.state==="Online"?this.S_("Unknown"):(this.g_++,this.g_>=1&&(this.C_(),this.b_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.S_("Offline")))}set(t){this.C_(),this.g_=0,t==="Online"&&(this.y_=!1),this.S_(t)}S_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}b_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.y_?(Om(n),this.y_=!1):It("OnlineStateTracker",n)}C_(){this.p_!==null&&(this.p_.cancel(),this.p_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UMt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.v_=[],this.F_=new Map,this.M_=new Set,this.x_=[],this.O_=s,this.O_.io(o=>{r.enqueueAndForget(async()=>{Kb(this)&&(It("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.M_.add(4),await Qk(l),l.N_.set("Unknown"),l.M_.delete(4),await Xk(l)}(this))})}),this.N_=new BMt(r,i)}}async function Xk(e){if(Kb(e))for(const t of e.x_)await t(!0)}async function Qk(e){for(const t of e.x_)await t(!1)}function ZPe(e,t){const n=hn(e);n.F_.has(t.targetId)||(n.F_.set(t.targetId,t),rZ(n)?nZ(n):LS(n).Xo()&&tZ(n,t))}function eZ(e,t){const n=hn(e),r=LS(n);n.F_.delete(t),r.Xo()&&eDe(n,t),n.F_.size===0&&(r.Xo()?r.n_():Kb(n)&&n.N_.set("Unknown"))}function tZ(e,t){if(e.L_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}LS(e).P_(t)}function eDe(e,t){e.L_.xe(t),LS(e).I_(t)}function nZ(e){e.L_=new V$t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ot:t=>e.F_.get(t)||null,tt:()=>e.datastore.serializer.databaseId}),LS(e).start(),e.N_.w_()}function rZ(e){return Kb(e)&&!LS(e).Zo()&&e.F_.size>0}function Kb(e){return hn(e).M_.size===0}function tDe(e){e.L_=void 0}async function zMt(e){e.N_.set("Online")}async function VMt(e){e.F_.forEach((t,n)=>{tZ(e,t)})}async function HMt(e,t){tDe(e),rZ(e)?(e.N_.D_(t),nZ(e)):e.N_.set("Unknown")}async function qMt(e,t,n){if(e.N_.set("Online"),t instanceof UPe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.F_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.F_.delete(a),i.L_.removeTarget(a))}(e,t)}catch(r){It("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await G$(e,r)}else if(t instanceof MD?e.L_.Ke(t):t instanceof BPe?e.L_.He(t):e.L_.We(t),!n.isEqual(dn.min()))try{const r=await XPe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.L_.rt(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.F_.get(l);c&&s.F_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.F_.get(u);if(!c)return;s.F_.set(u,c.withResumeToken(_a.EMPTY_BYTE_STRING,c.snapshotVersion)),eDe(s,u);const f=new Zg(c.target,u,l,c.sequenceNumber);tZ(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){It("RemoteStore","Failed to raise snapshot:",r),await G$(e,r)}}async function G$(e,t,n){if(!Gk(t))throw t;e.M_.add(1),await Qk(e),e.N_.set("Offline"),n||(n=()=>XPe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{It("RemoteStore","Retrying IndexedDB access"),await n(),e.M_.delete(1),await Xk(e)})}function nDe(e,t){return t().catch(n=>G$(e,n,t))}async function P4(e){const t=hn(e),n=uy(t);let r=t.v_.length>0?t.v_[t.v_.length-1].batchId:-1;for(;WMt(t);)try{const i=await kMt(t.localStore,r);if(i===null){t.v_.length===0&&n.n_();break}r=i.batchId,GMt(t,i)}catch(i){await G$(t,i)}rDe(t)&&iDe(t)}function WMt(e){return Kb(e)&&e.v_.length<10}function GMt(e,t){e.v_.push(t);const n=uy(e);n.Xo()&&n.E_&&n.d_(t.mutations)}function rDe(e){return Kb(e)&&!uy(e).Zo()&&e.v_.length>0}function iDe(e){uy(e).start()}async function YMt(e){uy(e).V_()}async function KMt(e){const t=uy(e);for(const n of e.v_)t.d_(n.mutations)}async function XMt(e,t,n){const r=e.v_.shift(),i=YJ.from(r,t,n);await nDe(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await P4(e)}async function QMt(e,t){t&&uy(e).E_&&await async function(r,i){if(function(o){return B$t(o)&&o!==Be.ABORTED}(i.code)){const s=r.v_.shift();uy(r).t_(),await nDe(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await P4(r)}}(e,t),rDe(e)&&iDe(e)}async function Ohe(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),It("RemoteStore","RemoteStore received new credentials");const r=Kb(n);n.M_.add(3),await Qk(n),r&&n.N_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.M_.delete(3),await Xk(n)}async function JMt(e,t){const n=hn(e);t?(n.M_.delete(2),await Xk(n)):t||(n.M_.add(2),await Qk(n),n.N_.set("Unknown"))}function LS(e){return e.B_||(e.B_=function(n,r,i){const s=hn(n);return s.f_(),new LMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:zMt.bind(null,e),To:VMt.bind(null,e),Ao:HMt.bind(null,e),h_:qMt.bind(null,e)}),e.x_.push(async t=>{t?(e.B_.t_(),rZ(e)?nZ(e):e.N_.set("Unknown")):(await e.B_.stop(),tDe(e))})),e.B_}function uy(e){return e.k_||(e.k_=function(n,r,i){const s=hn(n);return s.f_(),new FMt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Po:()=>Promise.resolve(),To:YMt.bind(null,e),Ao:QMt.bind(null,e),R_:KMt.bind(null,e),A_:XMt.bind(null,e)}),e.x_.push(async t=>{t?(e.k_.t_(),await P4(e)):(await e.k_.stop(),e.v_.length>0&&(It("RemoteStore",`Stopping write stream with ${e.v_.length} pending writes`),e.v_=[]))})),e.k_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iZ{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new iZ(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function sZ(e,t){if(Om("AsyncQueue",`${t}: ${e}`),Gk(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cE{constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=M2(),this.sortedSet=new Oi(this.comparator)}static emptySet(t){return new cE(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof cE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new cE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $he{constructor(){this.q_=new Oi(Ut.comparator)}track(t){const n=t.doc.key,r=this.q_.get(n);r?t.type!==0&&r.type===3?this.q_=this.q_.insert(n,t):t.type===3&&r.type!==1?this.q_=this.q_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.q_=this.q_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.q_=this.q_.remove(n):t.type===1&&r.type===2?this.q_=this.q_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.q_=this.q_.insert(n,{type:2,doc:t.doc}):un():this.q_=this.q_.insert(n,t)}Q_(){const t=[];return this.q_.inorderTraversal((n,r)=>{t.push(r)}),t}}class dx{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new dx(t,n,cE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&T4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZMt{constructor(){this.K_=void 0,this.U_=[]}W_(){return this.U_.some(t=>t.G_())}}class eLt{constructor(){this.queries=new MS(t=>APe(t),T4),this.onlineState="Unknown",this.z_=new Set}}async function sDe(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.W_()&&t.G_()&&(r=2):(s=new ZMt,r=t.G_()?0:1);try{switch(r){case 0:s.K_=await n.onListen(i,!0);break;case 1:s.K_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=sZ(o,`Initialization of query '${nw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.U_.push(t),t.j_(n.onlineState),s.K_&&t.H_(s.K_)&&oZ(n)}async function oDe(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.U_.indexOf(t);o>=0&&(s.U_.splice(o,1),s.U_.length===0?i=t.G_()?0:1:!s.W_()&&t.G_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function tLt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.U_)a.H_(i)&&(r=!0);o.K_=i}}r&&oZ(n)}function nLt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.U_)s.onError(n);r.queries.delete(t)}function oZ(e){e.z_.forEach(t=>{t.next()})}var BV,Mhe;(Mhe=BV||(BV={})).J_="default",Mhe.Cache="cache";class aDe{constructor(t,n,r){this.query=t,this.Y_=n,this.Z_=!1,this.X_=null,this.onlineState="Unknown",this.options=r||{}}H_(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new dx(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Z_?this.ea(t)&&(this.Y_.next(t),n=!0):this.ta(t,this.onlineState)&&(this.na(t),n=!0),this.X_=t,n}onError(t){this.Y_.error(t)}j_(t){this.onlineState=t;let n=!1;return this.X_&&!this.Z_&&this.ta(this.X_,t)&&(this.na(this.X_),n=!0),n}ta(t,n){if(!t.fromCache||!this.G_())return!0;const r=n!=="Offline";return(!this.options.ra||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}ea(t){if(t.docChanges.length>0)return!0;const n=this.X_&&this.X_.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}na(t){t=dx.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Z_=!0,this.Y_.next(t)}G_(){return this.options.source!==BV.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uDe{constructor(t){this.key=t}}class lDe{constructor(t){this.key=t}}class rLt{constructor(t,n){this.query=t,this.la=n,this.ha=null,this.hasCachedResults=!1,this.current=!1,this.Pa=zn(),this.mutatedKeys=zn(),this.Ia=CPe(t),this.Ta=new cE(this.Ia)}get Ea(){return this.la}da(t,n){const r=n?n.Aa:new $he,i=n?n.Ta:this.Ta;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=A4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.Ra(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Ia(h,u)>0||l&&this.Ia(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{Ta:o,Aa:r,Xi:a,mutatedKeys:s}}Ra(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.Ta;this.Ta=t.Ta,this.mutatedKeys=t.mutatedKeys;const o=t.Aa.Q_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return un()}};return m(h)-m(p)}(c.type,f.type)||this.Ia(c.doc,f.doc)),this.Va(r),i=i!=null&&i;const a=n&&!i?this.ma():[],u=this.Pa.size===0&&this.current&&!i?1:0,l=u!==this.ha;return this.ha=u,o.length!==0||l?{snapshot:new dx(this.query,t.Ta,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),fa:a}:{fa:a}}j_(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ta:this.Ta,Aa:new $he,mutatedKeys:this.mutatedKeys,Xi:!1},!1)):{fa:[]}}ga(t){return!this.la.has(t)&&!!this.Ta.has(t)&&!this.Ta.get(t).hasLocalMutations}Va(t){t&&(t.addedDocuments.forEach(n=>this.la=this.la.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.la=this.la.delete(n)),this.current=t.current)}ma(){if(!this.current)return[];const t=this.Pa;this.Pa=zn(),this.Ta.forEach(r=>{this.ga(r.key)&&(this.Pa=this.Pa.add(r.key))});const n=[];return t.forEach(r=>{this.Pa.has(r)||n.push(new lDe(r))}),this.Pa.forEach(r=>{t.has(r)||n.push(new uDe(r))}),n}pa(t){this.la=t.hs,this.Pa=zn();const n=this.da(t.documents);return this.applyChanges(n,!0)}ya(){return dx.fromInitialDocuments(this.query,this.Ta,this.mutatedKeys,this.ha===0,this.hasCachedResults)}}class iLt{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class sLt{constructor(t){this.key=t,this.wa=!1}}class oLt{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Sa={},this.ba=new MS(a=>APe(a),T4),this.Da=new Map,this.Ca=new Set,this.va=new Oi(Ut.comparator),this.Fa=new Map,this.Ma=new QJ,this.xa={},this.Oa=new Map,this.Na=fx.Ln(),this.onlineState="Unknown",this.La=void 0}get isPrimaryClient(){return this.La===!0}}async function aLt(e,t,n=!0){const r=mDe(e);let i;const s=r.ba.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.ya()):i=await cDe(r,t,n,!0),i}async function uLt(e,t){const n=mDe(e);await cDe(n,t,!0,!1)}async function cDe(e,t,n,r){const i=await RMt(e.localStore,ph(t)),s=i.targetId,o=n?e.sharedClientState.addLocalQueryTarget(s):"not-current";let a;return r&&(a=await lLt(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&ZPe(e.remoteStore,i),a}async function lLt(e,t,n,r,i){e.Ba=(f,d,h)=>async function(m,g,y,v){let b=g.view.da(y);b.Xi&&(b=await Nhe(m.localStore,g.query,!1).then(({documents:S})=>g.view.da(S,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,m.isPrimaryClient,w,E);return Fhe(m,g.targetId,T.fa),T.snapshot}(e,f,d,h);const s=await Nhe(e.localStore,t,!0),o=new rLt(t,s.hs),a=o.da(s.documents),u=Kk.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);Fhe(e,n,l.fa);const c=new iLt(t,n,o);return e.ba.set(t,c),e.Da.has(n)?e.Da.get(n).push(t):e.Da.set(n,[t]),l.snapshot}async function cLt(e,t,n){const r=hn(e),i=r.ba.get(t),s=r.Da.get(i.targetId);if(s.length>1)return r.Da.set(i.targetId,s.filter(o=>!T4(o,t))),void r.ba.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await jV(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&eZ(r.remoteStore,i.targetId),UV(r,i.targetId)}).catch(Wk)):(UV(r,i.targetId),await jV(r.localStore,i.targetId,!0))}async function fLt(e,t){const n=hn(e),r=n.ba.get(t),i=n.Da.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),eZ(n.remoteStore,r.targetId))}async function dLt(e,t,n){const r=bLt(e);try{const i=await function(o,a){const u=hn(o),l=Ls.now(),c=a.reduce((h,p)=>h.add(p.key),zn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=$m(),m=zn();return u.os.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=$$t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new zy(v.key,b,vPe(b.value.mapValue),Hu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:kPe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.xa[o.currentUser.toKey()];l||(l=new Oi(vr)),l=l.insert(a,u),o.xa[o.currentUser.toKey()]=l}(r,i.batchId,n),await Jk(r,i.changes),await P4(r.remoteStore)}catch(i){const s=sZ(i,"Failed to persist write");n.reject(s)}}async function fDe(e,t){const n=hn(e);try{const r=await CMt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Fa.get(s);o&&(ri(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.wa=!0:i.modifiedDocuments.size>0?ri(o.wa):i.removedDocuments.size>0&&(ri(o.wa),o.wa=!1))}),await Jk(n,r,t)}catch(r){await Wk(r)}}function Lhe(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.ba.forEach((s,o)=>{const a=o.view.j_(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.U_)d.j_(a)&&(l=!0)}),l&&oZ(u)}(r.eventManager,t),i.length&&r.Sa.h_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function hLt(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Fa.get(t),s=i&&i.key;if(s){let o=new Oi(Ut.comparator);o=o.insert(s,ua.newNoDocument(s,dn.min()));const a=zn().add(s),u=new R4(dn.min(),new Map,new Oi(vr),o,a);await fDe(r,u),r.va=r.va.remove(s),r.Fa.delete(t),aZ(r)}else await jV(r.localStore,t,!1).then(()=>UV(r,t,n)).catch(Wk)}async function pLt(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await AMt(n.localStore,t);hDe(n,r,null),dDe(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Jk(n,i)}catch(i){await Wk(i)}}async function mLt(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(ri(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);hDe(r,t,n),dDe(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Jk(r,i)}catch(i){await Wk(i)}}function dDe(e,t){(e.Oa.get(t)||[]).forEach(n=>{n.resolve()}),e.Oa.delete(t)}function hDe(e,t,n){const r=hn(e);let i=r.xa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.xa[r.currentUser.toKey()]=i}}function UV(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Da.get(t))e.ba.delete(r),n&&e.Sa.ka(r,n);e.Da.delete(t),e.isPrimaryClient&&e.Ma.Vr(t).forEach(r=>{e.Ma.containsKey(r)||pDe(e,r)})}function pDe(e,t){e.Ca.delete(t.path.canonicalString());const n=e.va.get(t);n!==null&&(eZ(e.remoteStore,n),e.va=e.va.remove(t),e.Fa.delete(n),aZ(e))}function Fhe(e,t,n){for(const r of n)r instanceof uDe?(e.Ma.addReference(r.key,t),gLt(e,r)):r instanceof lDe?(It("SyncEngine","Document no longer in limbo: "+r.key),e.Ma.removeReference(r.key,t),e.Ma.containsKey(r.key)||pDe(e,r.key)):un()}function gLt(e,t){const n=t.key,r=n.path.canonicalString();e.va.get(n)||e.Ca.has(r)||(It("SyncEngine","New document in limbo: "+n),e.Ca.add(r),aZ(e))}function aZ(e){for(;e.Ca.size>0&&e.va.size<e.maxConcurrentLimboResolutions;){const t=e.Ca.values().next().value;e.Ca.delete(t);const n=new Ut(ui.fromString(t)),r=e.Na.next();e.Fa.set(r,new sLt(n)),e.va=e.va.insert(n,r),ZPe(e.remoteStore,new Zg(ph(GJ(n.path)),r,"TargetPurposeLimboResolution",UJ.oe))}}async function Jk(e,t,n){const r=hn(e),i=[],s=[],o=[];r.ba.isEmpty()||(r.ba.forEach((a,u)=>{o.push(r.Ba(u,t,n).then(l=>{if((l||n)&&r.isPrimaryClient){const c=l&&!l.fromCache;r.sharedClientState.updateQueryState(u.targetId,c?"current":"not-current")}if(l){i.push(l);const c=ZJ.Ki(u.targetId,l);s.push(c)}}))}),await Promise.all(o),r.Sa.h_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Xe.forEach(l,d=>Xe.forEach(d.qi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Xe.forEach(d.Qi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!Gk(f))throw f;It("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.ns.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.ns=c.ns.insert(d,m)}}}(r.localStore,s))}async function yLt(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){It("SyncEngine","User change. New user:",t.toKey());const r=await KPe(n.localStore,t);n.currentUser=t,function(s,o){s.Oa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Oa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Jk(n,r.us)}}function vLt(e,t){const n=hn(e),r=n.Fa.get(t);if(r&&r.wa)return zn().add(r.key);{let i=zn();const s=n.Da.get(t);if(!s)return i;for(const o of s){const a=n.ba.get(o);i=i.unionWith(a.view.Ea)}return i}}function mDe(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=fDe.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=vLt.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=hLt.bind(null,t),t.Sa.h_=tLt.bind(null,t.eventManager),t.Sa.ka=nLt.bind(null,t.eventManager),t}function bLt(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=pLt.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=mLt.bind(null,t),t}class jhe{constructor(){this.synchronizeTabs=!1}async initialize(t){this.serializer=N4(t.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(t),this.persistence=this.createPersistence(t),await this.persistence.start(),this.localStore=this.createLocalStore(t),this.gcScheduler=this.createGarbageCollectionScheduler(t,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(t,this.localStore)}createGarbageCollectionScheduler(t,n){return null}createIndexBackfillerScheduler(t,n){return null}createLocalStore(t){return TMt(this.persistence,new xMt,t.initialUser,this.serializer)}createPersistence(t){return new _Mt(JJ.Hr,this.serializer)}createSharedClientState(t){return new PMt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class _Lt{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Lhe(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=yLt.bind(null,this.syncEngine),await JMt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new eLt}()}createDatastore(t){const n=N4(t.databaseInfo.databaseId),r=function(s){return new MMt(s)}(t.databaseInfo);return function(s,o,a,u){return new jMt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new UMt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>Lhe(this.syncEngine,n,0),function(){return Dhe.D()?new Dhe:new DMt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new oLt(i,s,o,a,u,l);return c&&(f.La=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t;await async function(r){const i=hn(r);It("RemoteStore","RemoteStore shutting down."),i.M_.add(5),await Qk(i),i.O_.shutdown(),i.N_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gDe{constructor(t){this.observer=t,this.muted=!1}next(t){this.observer.next&&this.Ka(this.observer.next,t)}error(t){this.observer.error?this.Ka(this.observer.error,t):Om("Uncaught Error in snapshot listener:",t.toString())}$a(){this.muted=!0}Ka(t,n){this.muted||setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wLt{constructor(t,n,r,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=vu.UNAUTHENTICATED,this.clientId=mPe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{It("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(It("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const t=new sm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=sZ(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function N9(e,t){e.asyncQueue.verifyOperationInProgress(),It("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await KPe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Bhe(e,t){e.asyncQueue.verifyOperationInProgress();const n=await yDe(e);It("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>Ohe(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>Ohe(t.remoteStore,i)),e._onlineComponents=t}function ELt(e){return e.name==="FirebaseError"?e.code===Be.FAILED_PRECONDITION||e.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&e instanceof DOMException)||e.code===22||e.code===20||e.code===11}async function yDe(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){It("FirestoreClient","Using user provided OfflineComponentProvider");try{await N9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!ELt(n))throw n;fI("Error using user provided cache. Falling back to memory cache: "+n),await N9(e,new jhe)}}else It("FirestoreClient","Using default OfflineComponentProvider"),await N9(e,new jhe);return e._offlineComponents}async function uZ(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(It("FirestoreClient","Using user provided OnlineComponentProvider"),await Bhe(e,e._uninitializedComponentsProvider._online)):(It("FirestoreClient","Using default OnlineComponentProvider"),await Bhe(e,new _Lt))),e._onlineComponents}function xLt(e){return yDe(e).then(t=>t.persistence)}function SLt(e){return uZ(e).then(t=>t.remoteStore)}function TLt(e){return uZ(e).then(t=>t.syncEngine)}async function vDe(e){const t=await uZ(e),n=t.eventManager;return n.onListen=aLt.bind(null,t.syncEngine),n.onUnlisten=cLt.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=uLt.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=fLt.bind(null,t.syncEngine),n}function ALt(e){return e.asyncQueue.enqueue(async()=>{const t=await xLt(e),n=await SLt(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.M_.delete(0),Xk(s)}(n)})}function CLt(e,t,n={}){const r=new sm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new gDe({next:d=>{o.enqueueAndForget(()=>oDe(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new aDe(GJ(a.path),c,{includeMetadataChanges:!0,ra:!0});return sDe(s,f)}(await vDe(e),e.asyncQueue,t,n,r)),r.promise}function ILt(e,t,n={}){const r=new sm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new gDe({next:d=>{o.enqueueAndForget(()=>oDe(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new aDe(a,c,{includeMetadataChanges:!0,ra:!0});return sDe(s,f)}(await vDe(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bDe(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Uhe=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _De(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function kLt(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function zhe(e){if(!Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function Vhe(e){if(Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function D4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":un()}function Kf(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=D4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hhe{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}kLt("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=bDe((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class lZ{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Hhe({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Hhe(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new q3t;switch(r.type){case"firstParty":return new Y3t(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Uhe.get(n);r&&(It("ComponentProvider","Removing Datastore"),Uhe.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xb{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Xb(this.firestore,t,this._query)}}class Ga{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new I0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ga(this.firestore,t,this._key)}}class I0 extends Xb{constructor(t,n,r){super(t,n,GJ(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ga(this.firestore,null,new Ut(t))}withConverter(t){return new I0(this.firestore,t,this._path)}}function ef(e,t,...n){if(e=ii(e),_De("collection","path",t),e instanceof lZ){const r=ui.fromString(t,...n);return Vhe(r),new I0(e,null,r)}{if(!(e instanceof Ga||e instanceof I0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return Vhe(r),new I0(e.firestore,null,r)}}function gs(e,t,...n){if(e=ii(e),arguments.length===1&&(t=mPe.newId()),_De("doc","path",t),e instanceof lZ){const r=ui.fromString(t,...n);return zhe(r),new Ga(e,null,new Ut(r))}{if(!(e instanceof Ga||e instanceof I0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ui.fromString(t,...n));return zhe(r),new Ga(e.firestore,e instanceof I0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RLt{constructor(){this.iu=Promise.resolve(),this.su=[],this.ou=!1,this._u=[],this.au=null,this.uu=!1,this.cu=!1,this.lu=[],this.Yo=new QPe(this,"async_queue_retry"),this.hu=()=>{const n=R9();n&&It("AsyncQueue","Visibility state changed to "+n.visibilityState),this.Yo.Wo()};const t=R9();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.hu)}get isShuttingDown(){return this.ou}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Pu(),this.Iu(t)}enterRestrictedMode(t){if(!this.ou){this.ou=!0,this.cu=t||!1;const n=R9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.hu)}}enqueue(t){if(this.Pu(),this.ou)return new Promise(()=>{});const n=new sm;return this.Iu(()=>this.ou&&this.cu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.su.push(t),this.Tu()))}async Tu(){if(this.su.length!==0){try{await this.su[0](),this.su.shift(),this.Yo.reset()}catch(t){if(!Gk(t))throw t;It("AsyncQueue","Operation failed with retryable error: "+t)}this.su.length>0&&this.Yo.$o(()=>this.Tu())}}Iu(t){const n=this.iu.then(()=>(this.uu=!0,t().catch(r=>{this.au=r,this.uu=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw Om("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.uu=!1,r))));return this.iu=n,n}enqueueAfterDelay(t,n,r){this.Pu(),this.lu.indexOf(t)>-1&&(n=0);const i=iZ.createAndSchedule(this,t,n,r,s=>this.Eu(s));return this._u.push(i),i}Pu(){this.au&&un()}verifyOperationInProgress(){}async du(){let t;do t=this.iu,await t;while(t!==this.iu)}Au(t){for(const n of this._u)if(n.timerId===t)return!0;return!1}Ru(t){return this.du().then(()=>{this._u.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this._u)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.du()})}Vu(t){this.lu.push(t)}Eu(t){const n=this._u.indexOf(t);this._u.splice(n,1)}}class Vy extends lZ{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=function(){return new RLt}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||wDe(this),this._firestoreClient.terminate()}}function NLt(e,t,n){n||(n="(default)");const r=PS(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(uI(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function Zk(e){return e._firestoreClient||wDe(e),e._firestoreClient.verifyNotTerminated(),e._firestoreClient}function wDe(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new a$t(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,bDe(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._firestoreClient=new wLt(e._authCredentials,e._appCheckCredentials,e._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}function PLt(e){return ALt(Zk(e=Kf(e,Vy)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new hx(_a.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new hx(_a.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Co(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let cZ=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return vr(this._lat,t._lat)||vr(this._long,t._long)}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DLt=/^__.*__$/;class OLt{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new zy(t,this.data,this.fieldMask,n,this.fieldTransforms):new Yk(t,this.data,n,this.fieldTransforms)}}class EDe{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new zy(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function xDe(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw un()}}class fZ{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.mu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get fu(){return this.settings.fu}gu(t){return new fZ(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}pu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.wu(t),i}Su(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.gu({path:r,yu:!1});return i.mu(),i}bu(t){return this.gu({path:void 0,yu:!0})}Du(t){return Y$(t,this.settings.methodName,this.settings.Cu||!1,this.path,this.settings.vu)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}mu(){if(this.path)for(let t=0;t<this.path.length;t++)this.wu(this.path.get(t))}wu(t){if(t.length===0)throw this.Du("Document fields must not be empty");if(xDe(this.fu)&&DLt.test(t))throw this.Du('Document fields cannot begin and end with "__"')}}class $Lt{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||N4(t)}Fu(t,n,r,i=!1){return new fZ({fu:t,methodName:n,vu:r,path:Co.emptyPath(),yu:!1,Cu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function $4(e){const t=e._freezeSettings(),n=N4(e._databaseId);return new $Lt(e._databaseId,!!t.ignoreUndefinedProperties,n)}function SDe(e,t,n,r,i,s={}){const o=e.Fu(s.merge||s.mergeFields?2:0,t,n,i);hZ("Data must be an object, but it was:",o,r);const a=CDe(r,o);let u,l;if(s.merge)u=new Tl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=zV(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);kDe(c,d)||c.push(d)}u=new Tl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new OLt(new ku(a),u,l)}class M4 extends O4{_toFieldTransform(t){if(t.fu!==2)throw t.fu===1?t.Du(`${this._methodName}() can only appear at the top level of your update data`):t.Du(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof M4}}class dZ extends O4{_toFieldTransform(t){return new N$t(t.path,new yI)}isEqual(t){return t instanceof dZ}}function TDe(e,t,n,r){const i=e.Fu(1,t,n);hZ("Data must be an object, but it was:",i,r);const s=[],o=ku.empty();Yb(r,(u,l)=>{const c=pZ(t,u,n);l=ii(l);const f=i.Su(c);if(l instanceof M4)s.push(c);else{const d=tR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Tl(s);return new EDe(o,a,i.fieldTransforms)}function ADe(e,t,n,r,i,s){const o=e.Fu(1,t,n),a=[zV(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(zV(t,s[d])),u.push(s[d+1]);const l=[],c=ku.empty();for(let d=a.length-1;d>=0;--d)if(!kDe(l,a[d])){const h=a[d];let p=u[d];p=ii(p);const m=o.Su(h);if(p instanceof M4)l.push(h);else{const g=tR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Tl(l);return new EDe(c,f,o.fieldTransforms)}function MLt(e,t,n,r=!1){return tR(n,e.Fu(r?4:3,t))}function tR(e,t){if(IDe(e=ii(e)))return hZ("Unsupported field value:",t,e),CDe(e,t);if(e instanceof O4)return function(r,i){if(!xDe(i.fu))throw i.Du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.yu&&t.fu!==4)throw t.Du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=tR(a,i.bu(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=ii(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return I$t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Ls.fromDate(r);return{timestampValue:W$(i.serializer,s)}}if(r instanceof Ls){const s=new Ls(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:W$(i.serializer,s)}}if(r instanceof cZ)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof hx)return{bytesValue:zPe(i.serializer,r._byteString)};if(r instanceof Ga){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:XJ(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.Du(`Unsupported field value: ${D4(r)}`)}(e,t)}function CDe(e,t){const n={};return gPe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Yb(e,(r,i)=>{const s=tR(i,t.pu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function IDe(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ls||e instanceof cZ||e instanceof hx||e instanceof Ga||e instanceof O4)}function hZ(e,t,n){if(!IDe(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=D4(n);throw r==="an object"?t.Du(e+" a custom object"):t.Du(e+" "+r)}}function zV(e,t,n){if((t=ii(t))instanceof eR)return t._internalPath;if(typeof t=="string")return pZ(e,t);throw Y$("Field path arguments must be of type string or ",e,!1,void 0,n)}const LLt=new RegExp("[~\\*/\\[\\]]");function pZ(e,t,n){if(t.search(LLt)>=0)throw Y$(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new eR(...t.split("."))._internalPath}catch{throw Y$(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Y$(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function kDe(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RDe{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ga(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new FLt(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(L4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class FLt extends RDe{data(){return super.data()}}function L4(e,t){return typeof t=="string"?pZ(e,t):t instanceof eR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jLt(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class mZ{}class NDe extends mZ{}function qhe(e,t,...n){let r=[];t instanceof mZ&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof gZ).length,a=s.filter(u=>u instanceof F4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class F4 extends NDe{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new F4(t,n,r)}_apply(t){const n=this._parse(t);return PDe(t._query,n),new Xb(t.firestore,t.converter,DV(t._query,n))}_parse(t){const n=$4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){Ghe(f,c);const h=[];for(const p of f)h.push(Whe(u,s,p));d={arrayValue:{values:h}}}else d=Whe(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||Ghe(f,c),d=MLt(a,o,f,c==="in"||c==="not-in");return ws.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function BLt(e,t,n){const r=t,i=L4("where",e);return F4._create(i,r,n)}class gZ extends mZ{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new gZ(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Yf.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)PDe(o,u),o=DV(o,u)}(t._query,n),new Xb(t.firestore,t.converter,DV(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class yZ extends NDe{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new yZ(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new gI(s,o)}(t._query,this._field,this._direction);return new Xb(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new $S(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function ULt(e,t="asc"){const n=t,r=L4("orderBy",e);return yZ._create(r,n)}function Whe(e,t,n){if(typeof(n=ii(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!TPe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ui.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return phe(e,new Ut(r))}if(n instanceof Ga)return phe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${D4(n)}.`)}function Ghe(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function PDe(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class zLt{convertValue(t,n="none"){switch(ob(t)){case 0:return null;case 1:return t.booleanValue;case 2:return bs(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(sb(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 10:return this.convertObject(t.mapValue,n);default:throw un()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Yb(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(t){return new cZ(bs(t.latitude),bs(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=VJ(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(hI(t));default:return null}}convertTimestamp(t){const n=ay(t);return new Ls(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ui.fromString(t);ri(YPe(r));const i=new pI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||Om(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DDe(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F2{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class ODe extends RDe{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new LD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(L4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class LD extends ODe{data(t={}){return super.data(t)}}class VLt{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new F2(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new LD(this._firestore,this._userDataWriter,r.key,r,new F2(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new LD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new F2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new LD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new F2(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:HLt(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function HLt(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return un()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function P9(e){e=Kf(e,Ga);const t=Kf(e.firestore,Vy);return CLt(Zk(t),e._key).then(n=>GLt(t,e,n))}class $De extends zLt{constructor(t){super(),this.firestore=t}convertBytes(t){return new hx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ga(this.firestore,null,n)}}function UT(e){e=Kf(e,Xb);const t=Kf(e.firestore,Vy),n=Zk(t),r=new $De(t);return jLt(e._query),ILt(n,e._query).then(i=>new VLt(t,r,e,i))}function pu(e,t,n){e=Kf(e,Ga);const r=Kf(e.firestore,Vy),i=DDe(e.converter,t,n);return j4(r,[SDe($4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Hu.none())])}function qLt(e,t,n,...r){e=Kf(e,Ga);const i=Kf(e.firestore,Vy),s=$4(i);let o;return o=typeof(t=ii(t))=="string"||t instanceof eR?ADe(s,"updateDoc",e._key,t,n,r):TDe(s,"updateDoc",e._key,t),j4(i,[o.toMutation(e._key,Hu.exists(!0))])}function WLt(e){return j4(Kf(e.firestore,Vy),[new k4(e._key,Hu.none())])}function j4(e,t){return function(r,i){const s=new sm;return r.asyncQueue.enqueueAndForget(async()=>dLt(await TLt(r),i,s)),s.promise}(Zk(e),t)}function GLt(e,t,n){const r=n.docs.get(t._key),i=new $De(e);return new ODe(e,i,t._key,r,new F2(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YLt{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=$4(t)}set(t,n,r){this._verifyNotCommitted();const i=D9(t,this._firestore),s=DDe(i.converter,n,r),o=SDe(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Hu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=D9(t,this._firestore);let o;return o=typeof(n=ii(n))=="string"||n instanceof eR?ADe(this._dataReader,"WriteBatch.update",s._key,n,r,i):TDe(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Hu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=D9(t,this._firestore);return this._mutations=this._mutations.concat(new k4(n._key,Hu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function D9(e,t){if((e=ii(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function KLt(){return new dZ("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yhe(e){return Zk(e=Kf(e,Vy)),new YLt(e,t=>j4(e,t))}(function(t,n=!0){(function(i){OS=i})(Gb),Pm(new Rh("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new Vy(new W3t(r.getProvider("auth-internal")),new X3t(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new pI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ff(che,"4.6.3",t),Ff(che,"4.6.3","esm2017")})();/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VV=new Map,MDe={activated:!1,tokenObservers:[]},XLt={initialized:!1,enabled:!1};function Fs(e){return VV.get(e)||Object.assign({},MDe)}function QLt(e,t){return VV.set(e,t),VV.get(e)}function B4(){return XLt}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LDe="https://content-firebaseappcheck.googleapis.com/v1",JLt="exchangeRecaptchaV3Token",ZLt="exchangeDebugToken",Khe={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},e6t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t6t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new aI,this.pending.promise.catch(n=>{}),await n6t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new aI,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function n6t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r6t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},Mu=new NS("appCheck","AppCheck",r6t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xhe(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function vZ(e){if(!Fs(e).activated)throw Mu.create("use-before-activation",{appName:e.name})}function FDe(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=cP(n)+"d:"),r&&(o+=cP(r)+"h:"),o+=cP(i)+"m:"+cP(s)+"s",o}function cP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bZ({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw Mu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw Mu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw Mu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw Mu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function i6t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${LDe}/projects/${n}/apps/${r}:${JLt}?key=${i}`,body:{recaptcha_v3_token:t}}}function jDe(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${LDe}/projects/${n}/apps/${r}:${ZLt}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s6t="firebase-app-check-database",o6t=1,_I="firebase-app-check-store",BDe="debug-token";let fP=null;function UDe(){return fP||(fP=new Promise((e,t)=>{try{const n=indexedDB.open(s6t,o6t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(Mu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(_I,{keyPath:"compositeKey"})}}}catch(n){t(Mu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),fP)}function a6t(e){return VDe(HDe(e))}function u6t(e,t){return zDe(HDe(e),t)}function l6t(e){return zDe(BDe,e)}function c6t(){return VDe(BDe)}async function zDe(e,t){const r=(await UDe()).transaction(_I,"readwrite"),s=r.objectStore(_I).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(Mu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function VDe(e){const n=(await UDe()).transaction(_I,"readonly"),i=n.objectStore(_I).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(Mu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function HDe(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wI=new y4("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f6t(e){if(wJ()){let t;try{t=await a6t(e)}catch(n){wI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function O9(e,t){return wJ()?u6t(e,t).catch(n=>{wI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function d6t(){let e;try{e=await c6t()}catch{}if(e)return e;{const t=fNt();return l6t(t).catch(n=>wI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _Z(){return B4().enabled}async function wZ(){const e=B4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function h6t(){const e=aNe(),t=B4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new aI;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(d6t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p6t={error:"UNKNOWN_ERROR"};function m6t(e){return _J.encodeString(JSON.stringify(e),!1)}async function HV(e,t=!1){const n=e.app;vZ(n);const r=Fs(n);let i=r.token,s;if(i&&!Cw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Cw(u)?i=u:await O9(n,void 0))}if(!t&&i&&Cw(i))return{token:i.token};let o=!1;if(_Z()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bZ(jDe(n,await wZ()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await O9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await Fs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?wI.warn(u.message):wI.error(u),s=u}let a;return i?s?Cw(i)?a={token:i.token,internalError:s}:a=Jhe(s):(a={token:i.token},r.token=i,await O9(n,i)):a=Jhe(s),o&&GDe(n,a),a}async function g6t(e){const t=e.app;vZ(t);const{provider:n}=Fs(t);if(_Z()){const r=await wZ(),{token:i}=await bZ(jDe(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function qDe(e,t,n,r){const{app:i}=e,s=Fs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Cw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),Qhe(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>Qhe(e))}function WDe(e,t){const n=Fs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function Qhe(e){const{app:t}=e,n=Fs(t);let r=n.tokenRefresher;r||(r=y6t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function y6t(e){const{app:t}=e;return new t6t(async()=>{const n=Fs(t);let r;if(n.token?r=await HV(e,!0):r=await HV(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=Fs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},Khe.RETRIAL_MIN_WAIT,Khe.RETRIAL_MAX_WAIT)}function GDe(e,t){const n=Fs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Cw(e){return e.expireTimeMillis-Date.now()>0}function Jhe(e){return{token:m6t(p6t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v6t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=Fs(this.app);for(const n of t)WDe(this.app,n.next);return Promise.resolve()}}function b6t(e,t){return new v6t(e,t)}function _6t(e){return{getToken:t=>HV(e,t),getLimitedUseToken:()=>g6t(e),addTokenListener:t=>qDe(e,"INTERNAL",t),removeTokenListener:t=>WDe(e.app,t)}}const w6t="@firebase/app-check",E6t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x6t="https://www.google.com/recaptcha/api.js";function S6t(e,t){const n=new aI,r=Fs(e);r.reCAPTCHAState={initialized:n};const i=T6t(e),s=Xhe(!1);return s?Zhe(e,t,s,i,n):I6t(()=>{const o=Xhe(!1);if(!o)throw new Error("no recaptcha");Zhe(e,t,o,i,n)}),n.promise}function Zhe(e,t,n,r,i){n.ready(()=>{C6t(e,t,n,r),i.resolve(n)})}function T6t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function A6t(e){vZ(e);const n=await Fs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=Fs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function C6t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{Fs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{Fs(e).reCAPTCHAState.succeeded=!1}}),s=Fs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function I6t(e){const t=document.createElement("script");t.src=x6t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EZ{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;R6t(this._throttleData);const i=await A6t(this._app).catch(o=>{throw Mu.create("recaptcha-error")});if(!(!((t=Fs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw Mu.create("recaptcha-error");let s;try{s=await bZ(i6t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=k6t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),Mu.create("throttled",{time:FDe(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=PS(t,"heartbeat"),S6t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof EZ?this._siteKey===t._siteKey:!1}}function k6t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+e6t,httpStatus:e};{const n=t?t.backoffCount:0,r=gNt(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function R6t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw Mu.create("throttled",{time:FDe(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N6t(e=xJ(),t){e=ii(e);const n=PS(e,"app-check");if(B4().initialized||h6t(),_Z()&&wZ().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw Mu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return P6t(e,t.provider,t.isTokenAutoRefreshEnabled),Fs(e).isTokenAutoRefreshEnabled&&qDe(r,"INTERNAL",()=>{}),r}function P6t(e,t,n){const r=QLt(e,Object.assign({},MDe));r.activated=!0,r.provider=t,r.cachedTokenPromise=f6t(e).then(i=>(i&&Cw(i)&&(r.token=i,GDe(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const D6t="app-check",epe="app-check-internal";function O6t(){Pm(new Rh(D6t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return b6t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(epe).initialize()})),Pm(new Rh(epe,e=>{const t=e.getProvider("app-check").getImmediate();return _6t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ff(w6t,E6t)}O6t();function dP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var YDe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof dP=="function"&&dP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof dP=="function"&&dP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:T;h(S,A,this.outcome)}else this.queue.push(new d(S,E,T));return S};function d(E,T,S){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,S){s(function(){var A;try{A=T(S)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,T){var S=g(p,T);if(S.status==="error")return a.reject(E,S.value);var A=S.value;if(A)m(E,A);else{E.state=l,E.outcome=T;for(var C=-1,k=E.queue.length;++C<k;)E.queue[C].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var S=-1,A=E.queue.length;++S<A;)E.queue[S].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var S=!1;function A(O){S||(S=!0,a.reject(E,O))}function C(O){S||(S=!0,a.resolve(E,O))}function k(){T(C,A)}var N=g(k);N.status==="error"&&A(N.value)}function g(E,T){var S={};try{S.value=E(T),S.status="success"}catch(A){S.status="error",S.value=A}return S}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var T=new this(o);return a.reject(T,E)}f.all=b;function b(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=new Array(S),k=0,N=-1,O=new this(o);++N<S;)D(E[N],N);return O;function D($,F){T.resolve($).then(M,function(B){A||(A=!0,a.reject(O,B))});function M(B){C[F]=B,++k===S&&!A&&(A=!0,a.resolve(O,C))}}}f.race=w;function w(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=-1,k=new this(o);++C<S;)N(E[C]);return k;function N(O){T.resolve(O).then(function(D){A||(A=!0,a.resolve(k,D))},function(D){A||(A=!0,a.reject(k,D))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof to<"u"?to:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ye=0;ye<Y.length;ye+=1)fe.append(Y[ye]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function T(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ye=0;ye<se;ye++)fe[ye]=Y.charCodeAt(ye);return Z}function S(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),se(!1)},Z.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(se){return y=se,y})}function C(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ye){Z.resolve=fe,Z.reject=ye}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function N(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function O(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)C(Y),Y.db.close();else return Z(Y.db);var ye=[Y.name];se&&ye.push(Y.version);var le=u.open.apply(u,ye);se&&(le.onupgradeneeded=function(Oe){var Ve=le.result;try{Ve.createObjectStore(Y.storeName),Oe.oldVersion<=1&&Ve.createObjectStore(g)}catch(qe){if(qe.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+Oe.oldVersion+" to version "+Oe.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw qe}}),le.onerror=function(Oe){Oe.preventDefault(),fe(le.error)},le.onsuccess=function(){var Oe=le.result;Oe.onversionchange=function(Ve){Ve.target.close()},Z(Oe),k(Y)}})}function D(Y){return O(Y,!1)}function $(Y){return O(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ye=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ye||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function M(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ye){var le=btoa(ye.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=T(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function P(Y){C(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ye=Z[fe];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Y.db=null,D(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var Oe=0;Oe<Z.length;Oe++)Z[Oe]._dbInfo.db=le}).catch(function(le){throw N(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ye=Y.db.transaction(Y.storeName,se);Z(null,ye)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return P(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ye=v[Z.name];ye||(ye=W(),v[Z.name]=ye),ye.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function Oe(){return f.resolve()}for(var Ve=0;Ve<ye.forages.length;Ve++){var qe=ye.forages[Ve];qe!==se&&le.push(qe._initReady().catch(Oe))}var Ge=ye.forages.slice(0);return f.all(le).then(function(){return Z.db=ye.db,D(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ye.db=st,se._dbInfo=Z;for(var Et=0;Et<Ge.length;Et++){var mn=Ge[Et];mn!==se&&(mn._dbInfo.db=Z.db,mn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.get(Y);Ge.onsuccess=function(){var st=Ge.result;st===void 0&&(st=null),U(st)&&(st=B(st)),ye(st)},Ge.onerror=function(){le(Ge.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.openCursor(),st=1;Ge.onsuccess=function(){var Et=Ge.result;if(Et){var mn=Et.value;U(mn)&&(mn=B(mn));var Pt=Y(mn,Et.key,st++);Pt!==void 0?ye(Pt):Et.continue()}else ye()},Ge.onerror=function(){le(Ge.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ye=new f(function(le,Oe){var Ve;fe.ready().then(function(){return Ve=fe._dbInfo,b.call(se)==="[object Blob]"?A(Ve.db).then(function(qe){return qe?se:M(se)}):se}).then(function(qe){z(fe._dbInfo,E,function(Ge,st){if(Ge)return Oe(Ge);try{var Et=st.objectStore(fe._dbInfo.storeName);qe===null&&(qe=void 0);var mn=Et.put(qe,Y);st.oncomplete=function(){qe===void 0&&(qe=null),le(qe)},st.onabort=st.onerror=function(){var Pt=mn.error?mn.error:mn.transaction.error;Oe(Pt)}}catch(Pt){Oe(Pt)}})}).catch(Oe)});return d(ye,Z),ye}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,E,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=qe.delete(Y);Ve.oncomplete=function(){ye()},Ve.onerror=function(){le(Ge.error)},Ve.onabort=function(){var st=Ge.error?Ge.error:Ge.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,E,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.clear();Oe.oncomplete=function(){fe()},Oe.onabort=Oe.onerror=function(){var Ge=qe.error?qe.error:qe.transaction.error;ye(Ge)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.count();qe.onsuccess=function(){fe(qe.result)},qe.onerror=function(){ye(qe.error)}}catch(Ge){ye(Ge)}})}).catch(ye)});return d(Z,Y),Z}function ve(Y,se){var Z=this,fe=new f(function(ye,le){if(Y<0){ye(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(Oe,Ve){if(Oe)return le(Oe);try{var qe=Ve.objectStore(Z._dbInfo.storeName),Ge=!1,st=qe.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ye(null);return}Y===0||Ge?ye(Et.key):(Ge=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,Oe){if(le)return ye(le);try{var Ve=Oe.objectStore(se._dbInfo.storeName),qe=Ve.openKeyCursor(),Ge=[];qe.onsuccess=function(){var st=qe.result;if(!st){fe(Ge);return}Ge.push(st.key),st.continue()},qe.onerror=function(){ye(qe.error)}}catch(st){ye(st)}})}).catch(ye)});return d(Z,Y),Z}function be(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;if(!Y.name)ye=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,Oe=le?f.resolve(fe._dbInfo.db):D(Y).then(function(Ve){var qe=v[Y.name],Ge=qe.forages;qe.db=Ve;for(var st=0;st<Ge.length;st++)Ge[st]._dbInfo.db=Ve;return Ve});Y.storeName?ye=Oe.then(function(Ve){if(Ve.objectStoreNames.contains(Y.storeName)){var qe=Ve.version+1;C(Y);var Ge=v[Y.name],st=Ge.forages;Ve.close();for(var Et=0;Et<st.length;Et++){var mn=st[Et];mn._dbInfo.db=null,mn._dbInfo.version=qe}var Pt=new f(function(Bn,kr){var Rr=u.open(Y.name,qe);Rr.onerror=function(Vo){var gd=Rr.result;gd.close(),kr(Vo)},Rr.onupgradeneeded=function(){var Vo=Rr.result;Vo.deleteObjectStore(Y.storeName)},Rr.onsuccess=function(){var Vo=Rr.result;Vo.close(),Bn(Vo)}});return Pt.then(function(Bn){Ge.db=Bn;for(var kr=0;kr<st.length;kr++){var Rr=st[kr];Rr._dbInfo.db=Bn,k(Rr._dbInfo)}}).catch(function(Bn){throw(N(Y,Bn)||f.resolve()).catch(function(){}),Bn})}}):ye=Oe.then(function(Ve){C(Y);var qe=v[Y.name],Ge=qe.forages;Ve.close();for(var st=0;st<Ge.length;st++){var Et=Ge[st];Et._dbInfo.db=null}var mn=new f(function(Pt,Bn){var kr=u.deleteDatabase(Y.name);kr.onerror=function(){var Rr=kr.result;Rr&&Rr.close(),Bn(kr.error)},kr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},kr.onsuccess=function(){var Rr=kr.result;Rr&&Rr.close(),Pt(Rr)}});return mn.then(function(Pt){qe.db=Pt;for(var Bn=0;Bn<Ge.length;Bn++){var kr=Ge[Bn];k(kr._dbInfo)}}).catch(function(Pt){throw(N(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ye,se),ye}var Ke={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ve,keys:Ie,dropInstance:be};function Ue(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",ze=ke.length,ct="arbf",Ot="blob",We="si08",ge="ui08",ht="uic8",vt="si16",pe="si32",Ce="ur16",He="ui32",ut="fl32",_t="fl64",Ln=ze+ct.length,Ar=Object.prototype.toString;function Fn(Y){var se=Y.length*.75,Z=Y.length,fe,ye=0,le,Oe,Ve,qe;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ge=new ArrayBuffer(se),st=new Uint8Array(Ge);for(fe=0;fe<Z;fe+=4)le=yt.indexOf(Y[fe]),Oe=yt.indexOf(Y[fe+1]),Ve=yt.indexOf(Y[fe+2]),qe=yt.indexOf(Y[fe+3]),st[ye++]=le<<2|Oe>>4,st[ye++]=(Oe&15)<<4|Ve>>2,st[ye++]=(Ve&3)<<6|qe&63;return Ge}function cr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=yt[se[fe]>>2],Z+=yt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=yt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=yt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function gn(Y,se){var Z="";if(Y&&(Z=Ar.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Ar.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ye=ke;Y instanceof ArrayBuffer?(fe=Y,ye+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ye+=We:Z==="[object Uint8Array]"?ye+=ge:Z==="[object Uint8ClampedArray]"?ye+=ht:Z==="[object Int16Array]"?ye+=vt:Z==="[object Uint16Array]"?ye+=Ce:Z==="[object Int32Array]"?ye+=pe:Z==="[object Uint32Array]"?ye+=He:Z==="[object Float32Array]"?ye+=ut:Z==="[object Float64Array]"?ye+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ye+cr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var Oe=it+Y.type+"~"+cr(this.result);se(ke+Ot+Oe)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(Oe){console.error("Couldn't convert value into a JSON string: ",Y),se(null,Oe)}}function Cn(Y){if(Y.substring(0,ze)!==ke)return JSON.parse(Y);var se=Y.substring(Ln),Z=Y.substring(ze,Ln),fe;if(Z===Ot&&_e.test(se)){var ye=se.match(_e);fe=ye[1],se=se.substring(ye[0].length)}var le=Fn(se);switch(Z){case ct:return le;case Ot:return c([le],{type:fe});case We:return new Int8Array(le);case ge:return new Uint8Array(le);case ht:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ce:return new Uint16Array(le);case pe:return new Int32Array(le);case He:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var nr={serialize:gn,deserialize:Cn,stringToBuffer:Fn,bufferToString:cr};function rr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function Uo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ye=new f(function(le,Oe){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(Ve){return Oe(Ve)}Z.db.transaction(function(Ve){rr(Ve,Z,function(){se._dbInfo=Z,le()},function(qe,Ge){Oe(Ge)})},Oe)});return Z.serializer=nr,ye}function $i(Y,se,Z,fe,ye,le){Y.executeSql(Z,fe,ye,function(Oe,Ve){Ve.code===Ve.SYNTAX_ERR?Oe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(qe,Ge){Ge.rows.length?le(qe,Ve):rr(qe,se,function(){qe.executeSql(Z,fe,ye,le)},le)},le):le(Oe,Ve)},le)}function In(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName+" WHERE key = ? LIMIT 1",[Y],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).value:null;st&&(st=Oe.serializer.deserialize(st)),ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Mi(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT * FROM "+Oe.storeName,[],function(qe,Ge){for(var st=Ge.rows,Et=st.length,mn=0;mn<Et;mn++){var Pt=st.item(mn),Bn=Pt.value;if(Bn&&(Bn=Oe.serializer.deserialize(Bn)),Bn=Y(Bn,Pt.key,mn+1),Bn!==void 0){ye(Bn);return}}ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Cr(Y,se,Z,fe){var ye=this;Y=p(Y);var le=new f(function(Oe,Ve){ye.ready().then(function(){se===void 0&&(se=null);var qe=se,Ge=ye._dbInfo;Ge.serializer.serialize(se,function(st,Et){Et?Ve(Et):Ge.db.transaction(function(mn){$i(mn,Ge,"INSERT OR REPLACE INTO "+Ge.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){Oe(qe)},function(Pt,Bn){Ve(Bn)})},function(mn){if(mn.code===mn.QUOTA_ERR){if(fe>0){Oe(Cr.apply(ye,[Y,qe,Z,fe-1]));return}Ve(mn)}})})}).catch(Ve)});return d(le,Z),le}function ms(Y,se,Z){return Cr.apply(this,[Y,se,Z,1])}function lp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"DELETE FROM "+Oe.storeName+" WHERE key = ?",[Y],function(){ye()},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function ul(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function pd(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(Ve,qe){var Ge=qe.rows.item(0).c;fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function xr(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var Oe=Z._dbInfo;Oe.db.transaction(function(Ve){$i(Ve,Oe,"SELECT key FROM "+Oe.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(qe,Ge){var st=Ge.rows.length?Ge.rows.item(0).key:null;ye(st)},function(qe,Ge){le(Ge)})})}).catch(le)});return d(fe,se),fe}function Ii(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(Oe){$i(Oe,le,"SELECT key FROM "+le.storeName,[],function(Ve,qe){for(var Ge=[],st=0;st<qe.rows.length;st++)Ge.push(qe.rows.item(st).key);fe(Ge)},function(Ve,qe){ye(qe)})})}).catch(ye)});return d(Z,Y),Z}function Qr(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,le){for(var Oe=[],Ve=0;Ve<le.rows.length;Ve++)Oe.push(le.rows.item(Ve).name);se({db:Y,storeNames:Oe})},function(ye,le){Z(le)})},function(fe){Z(fe)})})}function uu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;return Y.name?ye=new f(function(le){var Oe;Y.name===Z.name?Oe=fe._dbInfo.db:Oe=openDatabase(Y.name,"","",0),Y.storeName?le({db:Oe,storeNames:[Y.storeName]}):le(Qr(Oe))}).then(function(le){return new f(function(Oe,Ve){le.db.transaction(function(qe){function Ge(Pt){return new f(function(Bn,kr){qe.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){Bn()},function(Rr,Vo){kr(Vo)})})}for(var st=[],Et=0,mn=le.storeNames.length;Et<mn;Et++)st.push(Ge(le.storeNames[Et]));f.all(st).then(function(){Oe()}).catch(function(Pt){Ve(Pt)})},function(qe){Ve(qe)})})}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Aa={_driver:"webSQLStorage",_initStorage:Uo,_support:Ue(),iterate:Mi,getItem:In,setItem:ms,removeItem:lp,clear:ul,length:pd,key:xr,keys:Ii,dropInstance:uu};function Ca(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ae(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=nr,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var le=localStorage.key(ye);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo,le=localStorage.getItem(ye.keyPrefix+Y);return le&&(le=ye.serializer.deserialize(le)),le});return d(fe,se),fe}function St(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ye=Z._dbInfo,le=ye.keyPrefix,Oe=le.length,Ve=localStorage.length,qe=1,Ge=0;Ge<Ve;Ge++){var st=localStorage.key(Ge);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ye.serializer.deserialize(Et)),Et=Y(Et,st.substring(Oe),qe++),Et!==void 0)return Et}}});return d(fe,se),fe}function Ht(Y,se){var Z=this,fe=Z.ready().then(function(){var ye=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ye.keyPrefix.length)),le});return d(fe,se),fe}function On(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ye=localStorage.length,le=[],Oe=0;Oe<ye;Oe++){var Ve=localStorage.key(Oe);Ve.indexOf(fe.keyPrefix)===0&&le.push(Ve.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function jn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function pn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo;localStorage.removeItem(ye.keyPrefix+Y)});return d(fe,se),fe}function ir(Y,se,Z){var fe=this;Y=p(Y);var ye=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(Oe,Ve){var qe=fe._dbInfo;qe.serializer.serialize(se,function(Ge,st){if(st)Ve(st);else try{localStorage.setItem(qe.keyPrefix+Y,Ge),Oe(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(Et),Ve(Et)}})})});return d(ye,Z),ye}function Ir(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ye;return Y.name?ye=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var Oe=localStorage.length-1;Oe>=0;Oe--){var Ve=localStorage.key(Oe);Ve.indexOf(le)===0&&localStorage.removeItem(Ve)}}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Vt={_driver:"localStorageWrapper",_initStorage:Ae,_support:Ca(),iterate:St,getItem:ot,setItem:ir,removeItem:pn,clear:Se,length:jn,key:Ht,keys:On,dropInstance:Ir},sr=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Hr=function(se,Z){for(var fe=se.length,ye=0;ye<fe;){if(sr(se[ye],Z))return!0;ye++}return!1},Jn=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},ki={},Hs={},Jr={INDEXEDDB:Ke,WEBSQL:Aa,LOCALSTORAGE:Vt},mo=[Jr.INDEXEDDB._driver,Jr.WEBSQL._driver,Jr.LOCALSTORAGE._driver],Li=["dropInstance"],Fi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Li),zo={description:"",driver:mo.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Ia(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function qs(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(Jn(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var Zl=function(){function Y(se){o(this,Y);for(var Z in Jr)if(Jr.hasOwnProperty(Z)){var fe=Jr[Z],ye=fe._driver;this[Z]=ye,ki[ye]||this.defineDriver(fe)}this._defaultConfig=qs({},zo),this._config=qs({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ye){var le=new f(function(Oe,Ve){try{var qe=Z._driver,Ge=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){Ve(Ge);return}for(var st=Fi.concat("_initStorage"),Et=0,mn=st.length;Et<mn;Et++){var Pt=st[Et],Bn=!Hr(Li,Pt);if((Bn||Z[Pt])&&typeof Z[Pt]!="function"){Ve(Ge);return}}var kr=function(){for(var gd=function(ec){return function(){var lu=new Error("Method "+ec+" is not implemented by the current driver"),fp=f.reject(lu);return d(fp,arguments[arguments.length-1]),fp}},cp=0,sT=Li.length;cp<sT;cp++){var nv=Li[cp];Z[nv]||(Z[nv]=gd(nv))}};kr();var Rr=function(gd){ki[qe]&&console.info("Redefining LocalForage driver: "+qe),ki[qe]=Z,Hs[qe]=gd,Oe()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Rr,Ve):Rr(!!Z._support):Rr(!0)}catch(Vo){Ve(Vo)}});return h(le,fe,ye),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ye){var le=ki[Z]?f.resolve(ki[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ye),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(nr);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ye=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ye,Z,Z),ye},Y.prototype.setDriver=function(Z,fe,ye){var le=this;Jn(Z)||(Z=[Z]);var Oe=this._getSupportedDrivers(Z);function Ve(){le._config.driver=le.driver()}function qe(Et){return le._extend(Et),Ve(),le._ready=le._initStorage(le._config),le._ready}function Ge(Et){return function(){var mn=0;function Pt(){for(;mn<Et.length;){var Bn=Et[mn];return mn++,le._dbInfo=null,le._ready=null,le.getDriver(Bn).then(qe).catch(Pt)}Ve();var kr=new Error("No available storage method found.");return le._driverSet=f.reject(kr),le._driverSet}return Pt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=Oe[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(mn){le._driver=mn._driver,Ve(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ge(Oe)})}).catch(function(){Ve();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ye),this._driverSet},Y.prototype.supports=function(Z){return!!Hs[Z]},Y.prototype._extend=function(Z){qs(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ye=0,le=Z.length;ye<le;ye++){var Oe=Z[ye];this.supports(Oe)&&fe.push(Oe)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=Fi.length;Z<fe;Z++)Ia(this,Fi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),md=new Zl;r.exports=md},{3:3}]},{},[4])(4)})})(YDe);var $6t=YDe.exports;const sw=Gl($6t);var bo=[];for(var $9=0;$9<256;++$9)bo.push(($9+256).toString(16).slice(1));function M6t(e,t=0){return(bo[e[t+0]]+bo[e[t+1]]+bo[e[t+2]]+bo[e[t+3]]+"-"+bo[e[t+4]]+bo[e[t+5]]+"-"+bo[e[t+6]]+bo[e[t+7]]+"-"+bo[e[t+8]]+bo[e[t+9]]+"-"+bo[e[t+10]]+bo[e[t+11]]+bo[e[t+12]]+bo[e[t+13]]+bo[e[t+14]]+bo[e[t+15]]).toLowerCase()}var hP,L6t=new Uint8Array(16);function F6t(){if(!hP&&(hP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!hP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return hP(L6t)}var j6t=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const tpe={randomUUID:j6t};function K$(e,t,n){if(tpe.randomUUID&&!t&&!e)return tpe.randomUUID();e=e||{};var r=e.random||(e.rng||F6t)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,M6t(r)}class KDe{constructor(t){fu(this,"engine");fu(this,"connected",!1);fu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function X$(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function zT(e){return e.participantId!==void 0}class yf extends KDe{constructor(){super("firebase");fu(this,"RECAPTCHAV3TOKEN","6LdjOd0lAAAAAASvFfDZFWgtbzFSS9Y3so8rHJth");fu(this,"firestore");fu(this,"collectionPrefix","prod-");fu(this,"studyCollection");fu(this,"storage");fu(this,"studyId","");fu(this,"localForage",sw.createInstance({name:"currentParticipantId"}));fu(this,"participantData",null);const n=RQ.parse(`
{
  apiKey: "AIzaSyAm9QtUgx1lYPDeE0vKLN-lK17WfUGVkLo",
  authDomain: "revisit-utah.firebaseapp.com",
  projectId: "revisit-utah",
  storageBucket: "revisit-utah.appspot.com",
  messagingSenderId: "811568460432",
  appId: "1:811568460432:web:995f6b4f1fc8042b5dde15"
}
`),r=hNe(n);this.firestore=NLt(r,{}),this.storage=B3t();try{N6t(r,{provider:new EZ(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await PLt(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=z$();if(!i.currentUser&&(await sDt(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await X$(JSON.stringify(r));if(this.studyCollection=ef(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(zT(a))return this.participantData=a,a;const l=await X$(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=ic(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=K$(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=gs(this.studyCollection,"sequenceAssignment");await pu(i,{});const s=ef(i,"sequenceAssignment"),o=gs(s,this.currentParticipantId),a=qhe(s,BLt("participantId","==","")),u=await UT(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await WLt(m.ref),await pu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await pu(o,{participantId:this.currentParticipantId,timestamp:KLt()});const l=qhe(s,ULt("timestamp","asc")),d=(await UT(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=ic(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await jT(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");zT(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return zT(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=K$();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=ef(this.firestore,"user-management"),i=await UT(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await pu(gs(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await pu(gs(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await pu(gs(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await pu(gs(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await pu(gs(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=ic(this.storage,`${this.collectionPrefix}${n}/participants`),i=await jT(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");zT(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=ef(this.firestore,`${this.collectionPrefix}${n}`),s=ic(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!zT(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=gs(i,"sequenceAssignment"),u=ef(a,"sequenceAssignment"),l=gs(u,r);await qLt(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await pu(s,{[r]:i},{merge:!0})}async getModes(n){const r=gs(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await P9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await pu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=gs(this.firestore,"metadata","collections"),i=await P9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=gs(this.firestore,"metadata","collections");await pu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=gs(this.firestore,"metadata","collections");return await pu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=gs(this.firestore,"metadata","collections"),i=await P9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await pu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=ic(this.storage,n),s=(await jT(r)).items.map(o=>uhe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=ic(this.storage,n),o=(await jT(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=ic(this.storage,n),s=ic(this.storage,r),o=await C9(i),u=await(await fetch(o)).blob();await A9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=ef(this.firestore,n),s=gs(i,"sequenceAssignment"),o=ef(s,"sequenceAssignment"),a=ef(this.firestore,r),u=gs(a,"sequenceAssignment");await pu(u,{});const l=ef(u,"sequenceAssignment"),c=await UT(o),f=Yhe(this.firestore);c.docs.forEach(d=>{const h=gs(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=ef(this.firestore,n),i=gs(r,"sequenceAssignment"),s=ef(i,"sequenceAssignment"),o=await UT(s),a=Yhe(this.firestore);o.forEach(u=>{const l=gs(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=ic(this.storage,n);return(await jT(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=ic(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await C9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await C9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=ic(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await A9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await A9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=ic(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await uhe(i)}}const XDe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),Qb=()=>I.useContext(XDe);function B6t({children:e}){const t=I.useMemo(()=>({user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1}),[]),n=I.useMemo(()=>({user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1}),[]),r=I.useMemo(()=>({user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0}),[]),[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=As(),l=I.useCallback(async()=>{const h=z$();try{await dDt(h)}catch(p){p instanceof Error?console.error(`There was an issue signing-out the user: ${p.message}`):console.error("An unknown error occurred during sign-out.")}finally{s(n)}},[n]),c=()=>{a(!0)},f=I.useCallback(async h=>u?await u.validateUser(h):!1,[u]);I.useEffect(()=>{s(t);let h;if(u instanceof yf)try{h=z$()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof yf){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=fDt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[t,l,r,f,u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i,l,f]);return _.jsx(XDe.Provider,{value:d,children:i.determiningStatus?_.jsx($l,{visible:!0}):e})}function HA({studyIds:e}){const t=Vh(),{studyId:n}=vm(),r=Ny(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=As(),{user:o,logout:a}=Qb(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(sQe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(XXe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(_we,{}),href:"settings",needAdmin:!0}];return _.jsx(di.Header,{p:"md",children:_.jsxs(za,{mt:-7,align:"center",children:[_.jsx(za.Col,{span:6,children:_.jsxs(Nt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Ry,{w:40,src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx(kl,{w:"md"}),_.jsx(Si,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(za.Col,{span:6,children:_.jsxs(Nt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(ok,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(RG,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Uh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Nt,{direction:"column",mt:20,children:[_.jsx(et,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(on,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Uu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:_.jsx(on,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Uu}${d.href}`,children:d.name},`menu-item-${d.name}`)),_.jsxs(me,{ml:10,children:[_.jsx(NE,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function xZ({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=dL(!1),[a,u]=I.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;bJ(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(Ss,{style:{gap:n},children:[_.jsx(xi,{label:"Download all participants data as JSON",children:_.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(tQe,{})})}),_.jsx(xi,{label:"Download all participants data as a tidy CSV",children:_.jsx(on,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(wwe,{})})})]}),i&&a.length>0&&_.jsx(xRt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function U6t({cellData:e}){return _.jsx(qt.Td,{children:_.jsx(Xd,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(me,{children:[_.jsxs(et,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(et,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function npe({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(qt.Td,{children:[t.toFixed(1)," ","s"]})}function z6t(e){const{metaData:t}=e;return _.jsx(qt.Td,{children:_.jsx(iY,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(Xd,{gap:"xs",children:[_.jsxs(me,{children:["IP:"," ",t.ip]}),_.jsxs(me,{children:["Language:"," ",t.language]}),_.jsxs(me,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(me,{children:["User Agent:"," ",t.userAgent]})]})})})}function V6t({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=As(),{studyId:o}=vm(),{user:a}=Qb(),u=async b=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,b),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=I.useState([]),[f,d]=I.useState(!1),h=()=>t7({title:"Confirm rejecting participants",children:_.jsxs(et,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(et,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const b=l.map(async w=>await u(w));await Promise.all(b),c([]),await i(),d(!1)}}),p=I.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(b){b==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(b)?c(l.filter(w=>w!==b)):c([...l,b])}const g=bxe(r.sequence),y=[_.jsx(qt.Th,{children:_.jsx(Nt,{justify:"center",children:_.jsx(El,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),_.jsx(qt.Th,{children:"ID"},"ID"),_.jsx(qt.Th,{children:"Status"},"status"),_.jsx(qt.Th,{children:"Meta"},"meta"),...g.flatMap(b=>[_.jsx(qt.Th,{children:b.componentName},`header-${b.componentName}-${b.timesSeenInBlock}`),_.jsxs(qt.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:b.componentName})," ","Duration"]},`header-${b.componentName}-${b.timesSeenInBlock}-duration`)]),_.jsx(qt.Th,{children:"Total Duration"},"total-duration")],v=p.map(b=>_.jsxs(qt.Tr,{children:[_.jsx(qt.Td,{children:_.jsx(Nt,{justify:"center",children:_.jsx(El,{mb:-4,checked:l.includes(b.participantId),onChange:()=>m(b.participantId)})})}),_.jsx(qt.Td,{style:{whiteSpace:"nowrap"},children:b.participantId}),_.jsx(qt.Td,{children:_.jsxs(Nt,{direction:"row",align:"center",children:[b.rejected?_.jsx(xi,{label:"Rejected",children:_.jsx(_Y,{size:16,color:"red",style:{marginBottom:-3}})}):b.completed?_.jsx(xi,{label:"Completed",children:_.jsx(ywe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(xi,{label:"In Progress",children:_.jsx(bwe,{size:16,color:"orange",style:{marginBottom:-3}})}),!b.completed&&_.jsxs(et,{size:"sm",mb:-1,ml:4,children:[(Object.entries(b.answers).filter(([w,E])=>E.endTime!==void 0).length/(wm(b.sequence).length-1)*100).toFixed(2),"%"]})]})}),b.metadata?_.jsx(z6t,{metaData:b.metadata}):_.jsx(qt.Td,{children:"N/A"}),g.map(w=>{const E=yxe(b.sequence,w.orderPath),T=E&&Object.entries(b.answers).sort((S,A)=>{const C=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),k=parseInt(A[0].slice(A[0].lastIndexOf("_")+1),10);return C-k}).filter(([S])=>{const A=S.slice(0,S.lastIndexOf("_")),C=parseInt(S.slice(S.lastIndexOf("_")+1),10);return A===w.componentName&&C<=E[0].lastIndex&&C>=E[0].firstIndex});return T!==null&&T.length>=w.timesSeenInBlock+1?_.jsxs(_r.Fragment,{children:[_.jsx(U6t,{cellData:T[w.timesSeenInBlock][1]}),_.jsx(npe,{cellData:T[w.timesSeenInBlock][1]})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`):_.jsxs(_r.Fragment,{children:[_.jsx(qt.Td,{children:"N/A"}),_.jsx(qt.Td,{children:"N/A"})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),_.jsx(npe,{cellData:{startTime:Math.min(...Object.values(b.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(b.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${b.participantId}-total-duration`)]},b.participantId));return p.length>0?_.jsxs(_.Fragment,{children:[_.jsx($l,{visible:f,overlayProps:{blur:2}}),_.jsxs(Nt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Ss,{children:_.jsx(ok,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(b=>({value:b.participantId,label:b.participantId})),searchable:!0,value:null,leftSection:_.jsx(mQe,{size:14}),onChange:b=>b&&m(b)})}),_.jsxs(Ss,{children:[_.jsx(xZ,{allParticipants:[...e,...t],studyId:o||""}),_.jsx(on,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),_.jsx(Nt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(qt,{striped:!0,withTableBorder:!0,children:[_.jsx(qt.Thead,{children:_.jsx(qt.Tr,{children:y})}),_.jsx(qt.Tbody,{children:v})]})})]}):_.jsxs(_.Fragment,{children:[_.jsx(kl,{h:"xl"}),_.jsx(Nt,{justify:"center",align:"center",children:_.jsx(et,{children:"No data available"})})]})}const H6t="_root_1spq0_1",q6t="_description_1spq0_9",W6t="_title_1spq0_10",G6t="_closeButton_1spq0_14",Y6t={root:H6t,description:q6t,title:W6t,closeButton:G6t},Q$=e=>{const{title:t,message:n,color:r}=e;Mb.show({title:t,message:n,position:"top-center",classNames:Y6t,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function K6t({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1),[c,f]=I.useState(""),[d,h]=I.useState([]),[p,m]=I.useState(""),[g,y]=I.useState(""),[v,b]=I.useState(!1),[w,E]=I.useState(!1),{storageEngine:T}=As(),S=T,A=I.useCallback(async()=>{E(!0);const P=await S.getSnapshots(e);h(P),E(!1)},[S,e]);I.useEffect(()=>{A()},[A]);const C=async(P,...z)=>{b(!0);const W=await P(...z);W.status==="SUCCESS"?(A(),b(!1),await t(),W.notifications&&W.notifications.forEach(j=>{Q$(j)})):(b(!1),Q$({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await C(S.createSnapshot.bind(S),e,!1)},N=async()=>{m(""),r(!1),await C(S.createSnapshot.bind(S),e,!0)},O=async()=>{a(!1),await C(S.renameSnapshot.bind(S),c,g)},D=async P=>{await C(S.restoreSnapshot.bind(S),e,P)},$=async()=>{m(""),s(!1),await C(S.removeSnapshotOrLive.bind(S),c,!0)},F=async()=>{m(""),l(!1),await C(S.removeSnapshotOrLive.bind(S),e,!0)},M=()=>t7({title:"Create a Snapshot",children:_.jsx(et,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),B=P=>t7({title:"Restore Snapshot",children:_.jsx(et,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>D(P)}),U=P=>{const z=/-snapshot-(.+)$/,W=P.match(z);return W&&W[1]?W[1].replace("T"," "):null},H=async P=>{const z=P.slice(P.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(z)};return _.jsxs(_.Fragment,{children:[_.jsx($l,{visible:v}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(Si,{order:5,children:"Create a Snapshot"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(et,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(xi,{label:"Create a snapshot",children:_.jsx(on,{onClick:M,children:"Snapshot"})})]}),_.jsx(kl,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(Si,{order:5,children:"Archive Data"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(xi,{label:"Snapshot and Delete Data",children:_.jsx(on,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx(kl,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(Si,{order:5,children:"Delete Data"}),_.jsxs(et,{children:["This will delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(xi,{label:"Delete Data",children:_.jsx(on,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx(kl,{h:"xl"}),_.jsxs(Nt,{direction:"column",children:[_.jsx(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(Si,{order:5,children:"Snapshots"})}),_.jsxs(me,{style:{position:"relative"},children:[_.jsx($l,{visible:w}),d.length>0?_.jsxs(qt,{children:[_.jsx(qt.Thead,{children:_.jsxs(qt.Tr,{children:[_.jsx(qt.Th,{children:"Snapshot Name"}),_.jsx(qt.Th,{children:"Date Created"}),_.jsx(qt.Th,{children:"Actions"})]})}),_.jsx(qt.Tbody,{children:d.map(P=>_.jsxs(qt.Tr,{children:[_.jsx(qt.Td,{children:P.alternateName}),_.jsx(qt.Td,{children:U(P.originalName)}),_.jsx(qt.Td,{children:_.jsxs(Nt,{children:[_.jsx(xi,{label:"Rename",children:_.jsx(on,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(P.originalName)},children:_.jsx(cQe,{})})}),_.jsx(xi,{label:"Restore Snapshot",children:_.jsx(on,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(P.originalName)},children:_.jsx(hQe,{})})}),_.jsx(xi,{label:"Delete Snapshot",children:_.jsx(on,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(P.originalName)},children:_.jsx(Ewe,{})})}),_.jsx(xZ,{allParticipants:()=>H(P.originalName),studyId:e,gap:"10px",fileName:P.alternateName})]})})]},P.originalName))})]}):_.jsx(et,{children:"No snapshots."})]})]}),_.jsxs(Ki,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(et,{children:"Archive Data"}),children:[_.jsx(et,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(Yg,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(on,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(Ki,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(et,{children:"Delete Snapshot"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(Yg,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(on,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(Ki,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(et,{children:"Rename Snapshot"}),children:[_.jsx(Yg,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:P=>y(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(on,{color:"green",onClick:O,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(Ki,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(et,{children:"Delete Live Data"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(Yg,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(on,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(on,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function X6t({studyId:e}){const{storageEngine:t}=As(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(Xd,{children:[_.jsx(Vw,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(Vw,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(Vw,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function Q6t({studyId:e,refresh:t}){const{storageEngine:n}=As();return _.jsx(Rc,{children:_.jsxs(bu,{multiple:!0,variant:"contained",children:[_.jsxs(bu.Item,{value:"ReVISit Modes",children:[_.jsx(bu.Control,{children:_.jsx(Si,{order:5,children:"ReVISit Modes"})}),_.jsx(bu.Panel,{children:_.jsx(X6t,{studyId:e})})]},"modes"),_.jsxs(bu.Item,{value:"Data Management",children:[_.jsx(bu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(Si,{order:5,children:"Data Management"})}),_.jsx(bu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(K6t,{studyId:e,refresh:t})})]},"dataManagement")]})})}const O_=14;function QDe({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Nt,{ml:4,gap:4,children:[_.jsx(xi,{label:"Completed",children:_.jsx(g0,{variant:"light",color:"green",leftSection:_.jsx(ywe,{width:O_,height:O_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(xi,{label:"In Progress",children:_.jsx(g0,{variant:"light",color:"orange",leftSection:_.jsx(bwe,{width:O_,height:O_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(xi,{label:"Rejected",children:_.jsx(g0,{variant:"light",color:"red",leftSection:_.jsx(_Y,{width:O_,height:O_,style:{paddingTop:1}}),pb:1,children:n})})]})}const rpe={};function qV(e,t){e===void 0&&(e=rpe),t===void 0&&(t=rpe);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var J6t=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Z6t=Object.prototype.hasOwnProperty;function WV(e,t){return Z6t.call(e,t)}function GV(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)WV(e,i)&&r.push(i);return r}function Al(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function YV(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function $v(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function JDe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function KV(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(KV(e[t]))return!0}else if(typeof e=="object"){for(var r=GV(e),i=r.length,s=0;s<i;s++)if(KV(e[r[s]]))return!0}}return!1}function ipe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var ZDe=function(e){J6t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,ipe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=ipe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Ui=ZDe,e4t=Al,Iw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=J$(n,this.path);r&&(r=Al(r));var i=A1(n,{op:"remove",path:this.from}).removed;return A1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=J$(n,this.from);return A1(n,{op:"add",path:this.path,value:Al(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:EI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},t4t={add:function(e,t,n){return YV(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Iw.move,copy:Iw.copy,test:Iw.test,_get:Iw._get};function J$(e,t){if(t=="")return e;var n={op:"_get",path:t};return A1(e,n),n.value}function A1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):Z$(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=J$(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=EI(e,t.value),o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Al(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=Z$;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=JDe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!YV(h))throw new Ui("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);YV(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Ui("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=t4t[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Iw[t.op].call(t,l,h,e);if(o.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Ui("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function U4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Al(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=A1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function n4t(e,t,n){var r=A1(e,t);if(r.test===!1)throw new Ui("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function Z$(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Ui("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Iw[e.op]){if(typeof e.path!="string")throw new Ui("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Ui('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Ui("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&KV(e.value))throw new Ui("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Ui("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Ui("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=eOe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Ui("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Ui("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function eOe(e,t,n){try{if(!Array.isArray(e))throw new Ui("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)U4(Al(t),Al(e),n||!0);else{n=n||Z$;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Ui)return i;throw i}}function EI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!EI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!EI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const r4t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Ui,_areEquals:EI,applyOperation:A1,applyPatch:U4,applyReducer:n4t,deepClone:e4t,getValueByPointer:J$,validate:eOe,validator:Z$},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var SZ=new WeakMap,i4t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),s4t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function o4t(e){return SZ.get(e)}function a4t(e,t){return e.observers.get(t)}function u4t(e,t){e.observers.delete(t.callback)}function l4t(e,t){t.unobserve()}function c4t(e,t){var n=[],r,i=o4t(e);if(!i)i=new i4t(e),SZ.set(e,i);else{var s=a4t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Al(e),t){r.callback=t,r.next=null;var o=function(){XV(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){XV(r),clearTimeout(r.next),u4t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new s4t(t,r)),r}function XV(e,t){t===void 0&&(t=!1);var n=SZ.get(e.object);TZ(n.value,e.object,e.patches,"",t),e.patches.length&&U4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function TZ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=GV(t),o=GV(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(WV(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?TZ(c,f,n,r+"/"+$v(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+$v(l),value:Al(c)}),n.push({op:"replace",path:r+"/"+$v(l),value:Al(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+$v(l),value:Al(c)}),n.push({op:"remove",path:r+"/"+$v(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!WV(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+$v(l),value:Al(t[l])})}}}function f4t(e,t,n){n===void 0&&(n=!1);var r=[];return TZ(e,t,r,"",n),r}const d4t=Object.freeze(Object.defineProperty({__proto__:null,compare:f4t,generate:XV,observe:c4t,unobserve:l4t},Symbol.toStringTag,{value:"Module"}));Object.assign({},r4t,d4t,{JsonPatchError:ZDe,deepClone:Al,escapePathComponent:$v,unescapePathComponent:JDe});var h4t=/("(?:[^\\"]|\\.)*")|[:,]/g,p4t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(h4t,function(T,S){return S||T+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const M9=Gl(p4t);function ol(e,t,n){return e.fields=t||[],e.fname=n,e}function Xi(e){return e==null?null:e.fname}function pa(e){return e==null?null:e.fields}function tOe(e){return e.length===1?m4t(e[0]):g4t(e)}const m4t=e=>function(t){return t[e]},g4t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function Zh(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function Dc(e,t,n){const r=Zh(e);return e=r.length===1?r[0]:e,ol((n&&n.get||tOe)(r),[e],t||e)}const nR=Dc("id"),wa=ol(e=>e,[],"identity"),qg=ol(()=>0,[],"zero"),FS=ol(()=>1,[],"one"),Oc=ol(()=>!0,[],"true"),xg=ol(()=>!1,[],"false");function y4t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const nOe=0,AZ=1,CZ=2,rOe=3,iOe=4;function IZ(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y4t,r=e||nOe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=AZ&&n(t||"error","ERROR",arguments),this},warn(){return r>=CZ&&n(t||"warn","WARN",arguments),this},info(){return r>=rOe&&n(t||"log","INFO",arguments),this},debug(){return r>=iOe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function gt(e){return e===Object(e)}const spe=e=>e!=="__proto__";function jS(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=v4t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;BS(r,s,i[s],o)}return r},{})}function BS(e,t,n,r){if(!spe(t))return;let i,s;if(gt(n)&&!je(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?BS(s,i,n[i]):spe(i)&&(s[i]=n[i])}else e[t]=n}function v4t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Qn(e){return e[e.length-1]}function fa(e){return e==null||e===""?null:+e}const sOe=e=>t=>e*Math.exp(t),oOe=e=>t=>Math.log(e*t),aOe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),uOe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,eM=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function z4(e,t,n,r){const i=n(e[0]),s=n(Qn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function lOe(e,t){return z4(e,t,fa,wa)}function cOe(e,t){var n=Math.sign(e[0]);return z4(e,t,oOe(n),sOe(n))}function fOe(e,t,n){return z4(e,t,eM(n),eM(1/n))}function dOe(e,t,n){return z4(e,t,aOe(n),uOe(n))}function V4(e,t,n,r,i){const s=r(e[0]),o=r(Qn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function kZ(e,t,n){return V4(e,t,n,fa,wa)}function RZ(e,t,n){const r=Math.sign(e[0]);return V4(e,t,n,oOe(r),sOe(r))}function tM(e,t,n,r){return V4(e,t,n,eM(r),eM(1/r))}function NZ(e,t,n,r){return V4(e,t,n,aOe(r),uOe(r))}function hOe(e){return 1+~~(new Date(e).getMonth()/3)}function pOe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pt(e){return e!=null?je(e)?e:[e]:[]}function mOe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function _n(e){return typeof e=="function"}const b4t="descending";function PZ(e,t,n){n=n||{},t=pt(t)||[];const r=[],i=[],s={},o=n.comparator||_4t;return pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===b4t?-1:1),i.push(a=_n(a)?a:Dc(a,null,n)),(pa(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:ol(o(i,r),Object.keys(s))}const H4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),_4t=(e,t)=>e.length===1?w4t(e[0],t[0]):E4t(e,t,e.length),w4t=(e,t)=>function(n,r){return H4(e(n),e(r))*t},E4t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=H4(s(r),s(i));return o*t[a]});function Ea(e){return _n(e)?e:()=>e}function DZ(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function bn(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Dh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function gOe(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const x4t=Object.prototype.hasOwnProperty;function jt(e,t){return x4t.call(e,t)}const pP={};function US(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==pP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===pP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=pP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==pP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function yOe(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Qn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),bn(r,n)}function kw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function Hy(e){return typeof e=="boolean"}function k0(e){return Object.prototype.toString.call(e)==="[object Date]"}function vOe(e){return e&&_n(e[Symbol.iterator])}function lr(e){return typeof e=="number"}function bOe(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mt(e){return typeof e=="string"}function OZ(e,t,n){e&&(e=t?pt(e).map(a=>a.replace(/\\(.)/g,"$1")):pt(e));const r=e&&e.length,i=n&&n.get||tOe,s=a=>i(t?[a]:Zh(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return ol(o,e,"key")}function _Oe(e,t){const n=e[0],r=Qn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const S4t=1e4;function wOe(e){e=+e||S4t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function EOe(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function j2(e,t){let n="";for(;--t>=0;)n+=e;return n}function xOe(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?j2(i,o)+s:r==="center"?j2(i,~~(o/2))+s+j2(i,Math.ceil(o/2)):s+j2(i,o)}function rR(e){return e&&Qn(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":gt(e)||mt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function $Z(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const T4t=e=>lr(e)||k0(e)?e:Date.parse(e);function MZ(e,t){return t=t||T4t,e==null||e===""?null:t(e)}function LZ(e){return e==null||e===""?null:e+""}function Xf(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function SOe(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function Pg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function A4t(e){return e}function C4t(e){if(e==null)return A4t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function I4t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function k4t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return ope(e,n)})}:ope(e,t)}function ope(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=TOe(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function TOe(e,t){var n=C4t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&I4t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function R4t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function N4t(e){return TOe(e,P4t.apply(this,arguments))}function P4t(e,t,n){var r,i,s;if(arguments.length>1)r=D4t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:R4t(e,r)}}function D4t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Oo="year",el="quarter",ma="month",$s="week",tl="date",ca="day",Oh="dayofyear",zl="hours",Vl="minutes",$c="seconds",Qf="milliseconds",FZ=[Oo,el,ma,$s,tl,ca,Oh,zl,Vl,$c,Qf],L9=FZ.reduce((e,t,n)=>(e[t]=1+n,e),{});function jZ(e){const t=pt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{jt(L9,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[$s]||n[ca]?1:0)+(n[el]||n[ma]||n[tl]?1:0)+(n[Oh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>L9[i]-L9[s]),t}const O4t={[Oo]:"%Y ",[el]:"Q%q ",[ma]:"%b ",[tl]:"%d ",[$s]:"W%U ",[ca]:"%a ",[Oh]:"%j ",[zl]:"%H:00",[Vl]:"00:%M",[$c]:":%S",[Qf]:".%L",[`${Oo}-${ma}`]:"%Y-%m ",[`${Oo}-${ma}-${tl}`]:"%Y-%m-%d ",[`${zl}-${Vl}`]:"%H:%M"};function AOe(e,t){const n=bn({},O4t,t),r=jZ(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const qv=new Date;function BZ(e){return qv.setFullYear(e),qv.setMonth(0),qv.setDate(1),qv.setHours(0,0,0,0),qv}function COe(e){return kOe(new Date(e))}function IOe(e){return QV(new Date(e))}function kOe(e){return nm.count(BZ(e.getFullYear())-1,e)}function QV(e){return hS.count(BZ(e.getFullYear())-1,e)}function JV(e){return BZ(e).getDay()}function $4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function ROe(e){return POe(new Date(e))}function NOe(e){return ZV(new Date(e))}function POe(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return w0.count(t-1,e)}function ZV(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return pS.count(t-1,e)}function eH(e){return qv.setTime(Date.UTC(e,0,1)),qv.getUTCDay()}function M4t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function DOe(e,t,n,r,i){const s=t||1,o=Qn(e),a=(y,v,b)=>(b=b||y,L4t(n[b],r[b],y===o&&s,v)),u=new Date,l=Xf(e),c=l[Oo]?a(Oo):Ea(2012),f=l[ma]?a(ma):l[el]?a(el):qg,d=l[$s]&&l[ca]?a(ca,1,$s+ca):l[$s]?a($s,1):l[ca]?a(ca,1):l[tl]?a(tl,1):l[Oh]?a(Oh,1):FS,h=l[zl]?a(zl):qg,p=l[Vl]?a(Vl):qg,m=l[$c]?a($c):qg,g=l[Qf]?a(Qf):qg;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function L4t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function px(e,t,n){return t+e*7-(n+6)%7}const F4t={[Oo]:e=>e.getFullYear(),[el]:e=>Math.floor(e.getMonth()/3),[ma]:e=>e.getMonth(),[tl]:e=>e.getDate(),[zl]:e=>e.getHours(),[Vl]:e=>e.getMinutes(),[$c]:e=>e.getSeconds(),[Qf]:e=>e.getMilliseconds(),[Oh]:e=>kOe(e),[$s]:e=>QV(e),[$s+ca]:(e,t)=>px(QV(e),e.getDay(),JV(t)),[ca]:(e,t)=>px(1,e.getDay(),JV(t))},j4t={[el]:e=>3*e,[$s]:(e,t)=>px(e,0,JV(t))};function OOe(e,t){return DOe(e,t||1,F4t,j4t,$4t)}const B4t={[Oo]:e=>e.getUTCFullYear(),[el]:e=>Math.floor(e.getUTCMonth()/3),[ma]:e=>e.getUTCMonth(),[tl]:e=>e.getUTCDate(),[zl]:e=>e.getUTCHours(),[Vl]:e=>e.getUTCMinutes(),[$c]:e=>e.getUTCSeconds(),[Qf]:e=>e.getUTCMilliseconds(),[Oh]:e=>POe(e),[$s]:e=>ZV(e),[ca]:(e,t)=>px(1,e.getUTCDay(),eH(t)),[$s+ca]:(e,t)=>px(ZV(e),e.getUTCDay(),eH(t))},U4t={[el]:e=>3*e,[$s]:(e,t)=>px(e,0,eH(t))};function $Oe(e,t){return DOe(e,t||1,B4t,U4t,M4t)}const z4t={[Oo]:Eh,[el]:zC.every(3),[ma]:zC,[$s]:hS,[tl]:nm,[ca]:nm,[Oh]:nm,[zl]:C6,[Vl]:T6,[$c]:Wp,[Qf]:VE},V4t={[Oo]:xh,[el]:VC.every(3),[ma]:VC,[$s]:pS,[tl]:w0,[ca]:w0,[Oh]:w0,[zl]:I6,[Vl]:A6,[$c]:Wp,[Qf]:VE};function zS(e){return z4t[e]}function VS(e){return V4t[e]}function MOe(e,t,n){return e?e.offset(t,n):void 0}function LOe(e,t,n){return MOe(zS(e),t,n)}function FOe(e,t,n){return MOe(VS(e),t,n)}function jOe(e,t,n,r){return e?e.range(t,n,r):void 0}function BOe(e,t,n,r){return jOe(zS(e),t,n,r)}function UOe(e,t,n,r){return jOe(VS(e),t,n,r)}const B2=1e3,U2=B2*60,z2=U2*60,q4=z2*24,H4t=q4*7,ape=q4*30,tH=q4*365,zOe=[Oo,ma,tl,zl,Vl,$c,Qf],V2=zOe.slice(0,-1),H2=V2.slice(0,-1),q2=H2.slice(0,-1),q4t=q2.slice(0,-1),W4t=[Oo,$s],upe=[Oo,ma],VOe=[Oo],VT=[[V2,1,B2],[V2,5,5*B2],[V2,15,15*B2],[V2,30,30*B2],[H2,1,U2],[H2,5,5*U2],[H2,15,15*U2],[H2,30,30*U2],[q2,1,z2],[q2,3,3*z2],[q2,6,6*z2],[q2,12,12*z2],[q4t,1,q4],[W4t,1,H4t],[upe,1,ape],[upe,3,3*ape],[VOe,1,tH]];function HOe(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(rR(t))/n;let i=uS(a=>a[2]).right(VT,r),s,o;return i===VT.length?(s=VOe,o=V0(t[0]/tH,t[1]/tH,n)):i?(i=VT[r/VT[i-1][2]<VT[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=zOe,o=Math.max(V0(t[0],t[1],n),1)),{units:s,step:o}}function W2(e){const t={};return n=>t[n]||(t[n]=e(n))}function G4t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=Y4t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function Y4t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function qOe(e){const t=W2(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=q1(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return G4t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=q1(o??",f");const a=V0(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=LSe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=FSe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=MSe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let nH;WOe();function WOe(){return nH=qOe({format:cS,formatPrefix:yK})}function GOe(e){return qOe($Se(e))}function nM(e){return arguments.length?nH=GOe(e):nH}function lpe(e,t,n){n=n||{},gt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t($c),i=t(Vl),s=t(zl),o=t(tl),a=t($s),u=t(ma),l=t(el),c=t(Oo),f=e(n[Qf]||".%L"),d=e(n[$c]||":%S"),h=e(n[Vl]||"%I:%M"),p=e(n[zl]||"%I %p"),m=e(n[tl]||n[ca]||"%a %d"),g=e(n[$s]||"%b %d"),y=e(n[ma]||"%B"),v=e(n[el]||"%B"),b=e(n[Oo]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function YOe(e){const t=W2(e.format),n=W2(e.utcFormat);return{timeFormat:r=>mt(r)?t(r):lpe(t,zS,r),utcFormat:r=>mt(r)?n(r):lpe(n,VS,r),timeParse:W2(e.parse),utcParse:W2(e.utcParse)}}let rH;KOe();function KOe(){return rH=YOe({format:RK,parse:QTe,utcFormat:k6,utcParse:JTe})}function XOe(e){return YOe(WTe(e))}function xI(e){return arguments.length?rH=XOe(e):rH}const iH=(e,t)=>bn({},e,t);function QOe(e,t){const n=e?GOe(e):nM(),r=t?XOe(t):xI();return iH(n,r)}function UZ(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?iH(nM(e),xI(t)):iH(nM(),xI())}function K4t(){return WOe(),KOe(),UZ()}const X4t=/^(data:|([A-Za-z]+:)?\/\/)/,Q4t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,J4t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,cpe="file://";function Z4t(e,t){return n=>({options:n||{},sanitize:tFt,load:eFt,fileAccess:!!t,file:nFt(t),http:iFt(e)})}async function eFt(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function tFt(e,t){t=bn({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=Q4t.test(e.replace(J4t,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+rt(e));const u=X4t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(cpe))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(cpe.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function nFt(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):rFt}async function rFt(){Le("No file system access.")}function iFt(e){return e?async function(t,n){const r=bn({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?_n(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:sFt}async function sFt(){Le("No HTTP fetch method available.")}const oFt=e=>e!=null&&e===e,aFt=e=>e==="true"||e==="false"||e===!0||e===!1,uFt=e=>!Number.isNaN(Date.parse(e)),JOe=e=>!Number.isNaN(+e)&&!(e instanceof Date),lFt=e=>JOe(e)&&Number.isInteger(+e),sH={boolean:$Z,integer:fa,number:fa,date:MZ,string:LZ,unknown:wa},mP=[aFt,lFt,JOe,uFt],cFt=["boolean","integer","number","date"];function ZOe(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=mP.length,i=mP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&oFt(u)&&!mP[a](u)&&(i[a]=0,++o,o===mP.length))return"string";return cFt[i.reduce((s,o)=>s===0?o:s,0)-1]}function e3e(e,t){return t.reduce((n,r)=>(n[r]=ZOe(e,r),n),{})}function fpe(e){const t=function(n,r){const i={delimiter:e};return zZ(n,r?bn(r,i):i)};return t.responseType="text",t}function zZ(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),PSe(t.delimiter).parse(e+"")}zZ.responseType="text";function fFt(e){return typeof Buffer=="function"&&_n(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function VZ(e,t){const n=t&&t.property?Dc(t.property):wa;return gt(e)&&!fFt(e)?dFt(n(e),t):n(JSON.parse(e))}VZ.responseType="json";function dFt(e,t){return!je(e)&&vOe(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const hFt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function t3e(e,t){let n,r,i,s;return e=VZ(e,t),t&&t.feature?(n=k4t,i=t.feature):t&&t.mesh?(n=N4t,i=t.mesh,s=hFt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}t3e.responseType="json";const FD={dsv:zZ,csv:fpe(","),tsv:fpe("	"),json:VZ,topojson:t3e};function HZ(e,t){return arguments.length>1?(FD[e]=t,this):jt(FD,e)?FD[e]:null}function n3e(e){const t=HZ(e);return t&&t.responseType||"text"}function r3e(e,t,n,r){t=t||{};const i=HZ(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&pFt(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function pFt(e,t,n,r){if(!e.length)return;const i=xI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=e3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!sH[p])throw Error("Illegal format pattern: "+h+":"+p);return sH[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const W4=Z4t(typeof fetch<"u"&&fetch,null);function G4(e){const t=e||wa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function jD(e,t){try{await t(e)}catch(n){e.error(n)}}const i3e=Symbol("vega_id");let mFt=1;function Y4(e){return!!(e&&Lt(e))}function Lt(e){return e[i3e]}function s3e(e,t){return e[i3e]=t,e}function Er(e){const t=e===Object(e)?e:{data:e};return Lt(t)?t:s3e(t,mFt++)}function qZ(e){return K4(e,Er({}))}function K4(e,t){for(const n in e)t[n]=e[n];return t}function o3e(e,t){return s3e(t,Lt(e))}function Jb(e,t){return e?t?(n,r)=>e(n,r)||Lt(t(n))-Lt(t(r)):(n,r)=>e(n,r)||Lt(n)-Lt(r):null}function a3e(e){return e&&e.constructor===Zb}function Zb(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:Zb,insert(a){const u=pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=_n(a)?r:t,l=pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Ea(l)};return _n(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return _n(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Lt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Lt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Lt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Lt(m),l[g]?l[g]=1:a.add.push(Er(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Lt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Lt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Lt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Lt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Lt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const BD="_:mod:_";function X4(){Object.defineProperty(this,BD,{writable:!0,value:{}})}X4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[BD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[BD];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[BD]={},this}};let gFt=0;const yFt="pulse",vFt=new X4,bFt=1,_Ft=2;function Kr(e,t,n,r){this.id=++gFt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function dpe(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Kr.prototype={targets(){return this._targets||(this._targets=G4(nR))},set(e){return this.value!==e?(this.value=e,1):0},skip:dpe(bFt),modified:dpe(_Ft),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new X4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Kr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===yFt)pt(a).forEach(f=>{f instanceof Kr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||vFt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function wFt(e,t,n,r){let i=1,s;return e instanceof Kr?s=e:e&&e.prototype instanceof Kr?s=new e:_n(e)?s=new Kr(null,e):(i=0,s=new Kr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function EFt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let xFt=0;function Q4(e,t,n){this.id=++xFt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Sg(e,t,n){return new Q4(e,t,n)}Q4.prototype={_filter:Oc,_apply:wa,targets(){return this._targets||(this._targets=G4(nR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Sg(e);return this.targets().add(t),t},apply(e){const t=Sg(null,e);return this.targets().add(t),t},merge(){const e=Sg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Sg();return this.targets().add(Sg(null,null,DZ(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Sg(null,null,()=>n=!0)),t.targets().add(Sg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Oc,this._targets=null}};function SFt(e,t,n,r){const i=this,s=Sg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function TFt(e,t){const n=this.locale();return r3e(e,t,n.timeParse,n.utcParse)}function AFt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function CFt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:n3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function IFt(e,t,n){const r=this,i=r._pending||kFt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Oc).insert(s.data||[])),i.done(),s}function kFt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const RFt={skip:!0};function NFt(e,t,n,r,i){return(e instanceof Kr?DFt:PFt)(this,e,t,n,r,i),this}function PFt(e,t,n,r,i,s){const o=bn({},s,RFt);let a,u;_n(n)||(n=Ea(n)),r===void 0?a=l=>e.touch(n(l)):_n(r)?(u=new Kr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;a3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function DFt(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Kr(null,OFt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function OFt(e,t){return t=_n(t)?t:Ea(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function $Ft(e){e.rank=++this._rank}function MFt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const rM={},Pd=1,Dg=2,Ap=4,LFt=Pd|Dg,hpe=Pd|Ap,$_=Pd|Dg|Ap,ppe=8,HT=16,mpe=32,gpe=64;function R0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function F9(e,t){const n=[];return Pg(e,t,r=>n.push(r)),n}function ype(e,t){const n={};return e.visit(t,r=>{n[Lt(r)]=1}),r=>n[Lt(r)]?null:r}function gP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}R0.prototype={StopPropagation:rM,ADD:Pd,REM:Dg,MOD:Ap,ADD_REM:LFt,ADD_MOD:hpe,ALL:$_,REFLOW:ppe,SOURCE:HT,NO_SOURCE:mpe,NO_FIELDS:gpe,fork(e){return new R0(this.dataflow).init(this,e)},clone(){const e=this.fork($_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize($_|HT)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new R0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&gpe)&&(n.fields=e.fields),t&Pd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Dg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Ap?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&mpe?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||$_;return t&Pd&&this.add.length||t&Dg&&this.rem.length||t&Ap&&this.mod.length},reflow(e){if(e)return this.fork($_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Ap,ype(this,Pd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Pd&&(n.addF=gP(n.addF,t)),e&Dg&&(n.remF=gP(n.remF,t)),e&Ap&&(n.modF=gP(n.modF,t)),e&HT&&(n.srcF=gP(n.srcF,t)),n},materialize(e){e=e||$_;const t=this;return e&Pd&&t.addF&&(t.add=F9(t.add,t.addF),t.addF=null),e&Dg&&t.remF&&(t.rem=F9(t.rem,t.remF),t.remF=null),e&Ap&&t.modF&&(t.mod=F9(t.mod,t.modF),t.modF=null),e&HT&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&HT)return Pg(n.source,n.srcF,r),n;e&Pd&&Pg(n.add,n.addF,r),e&Dg&&Pg(n.rem,n.remF,r),e&Ap&&Pg(n.mod,n.modF,r);const i=n.source;if(e&ppe&&i){const s=n.add.length+n.mod.length;s===i.length||(s?Pg(i,ype(n,hpe),r):Pg(i,n.srcF,r))}return n}};function WZ(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(WZ,R0,{fork(e){const t=new R0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function FFt(e,t,n){const r=this,i=[];if(r._pulse)return u3e(r);if(r._pending&&await r._pending,t&&await jD(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new R0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=G4(nR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=rM),u!==rM&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await jD(r,c[f].callback)}return n&&await jD(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function jFt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function BFt(e,t,n){return this._pulse?u3e(this):(this.evaluate(e,t,n),this)}function UFt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function u3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function zFt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function VFt(e,t){const n=e.source,r=this._clock;return n&&je(n)?new WZ(this,r,n.map(i=>i.pulse),t):this._input[e.id]||HFt(this._pulse,n&&n.pulse)}function HFt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==rM&&(e.source=t.source),e)}const GZ={skip:!1,force:!1};function qFt(e,t){const n=t||GZ;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function WFt(e,t,n){const r=n||GZ;return(e.set(t)||r.force)&&this.touch(e,r),this}function GFt(e,t,n){this.touch(e,n||GZ);const r=new R0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function YFt(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),l3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,KFt(t,0,e)):r=n,r}}}function l3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function KFt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,l3e(e,r,t,n)}function fE(){this.logger(IZ()),this.logLevel(AZ),this._clock=0,this._rank=0,this._locale=UZ();try{this._loader=W4()}catch{}this._touched=G4(nR),this._input={},this._pulse=null,this._heap=YFt((e,t)=>e.qrank-t.qrank),this._postrun=[]}function qT(e){return function(){return this._log[e].apply(this,arguments)}}fE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:qT("error"),warn:qT("warn"),info:qT("info"),debug:qT("debug"),logLevel:qT("level"),cleanThreshold:1e4,add:wFt,connect:EFt,rank:$Ft,rerank:MFt,pulse:GFt,touch:qFt,update:WFt,changeset:Zb,ingest:AFt,parse:TFt,preload:IFt,request:CFt,events:SFt,on:NFt,evaluate:FFt,run:BFt,runAsync:jFt,runAfter:UFt,_enqueue:zFt,_getPulse:VFt};function Pe(e,t){Kr.call(this,e,null,t)}lt(Pe,Kr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const mx={};function c3e(e){const t=f3e(e);return t&&t.Definition||null}function f3e(e){return e=e&&e.toLowerCase(),jt(mx,e)?mx[e]:null}function*d3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function YZ(e,t,n){const r=Float64Array.from(d3e(e,n));return r.sort(em),t.map(i=>$xe(r,i))}function KZ(e,t){return YZ(e,[.25,.5,.75],t)}function XZ(e,t){const n=e.length,r=Eat(e,t),i=KZ(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function h3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var Mc=Math.random;function XFt(e){Mc=e}function p3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(d3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(Mc()*s)];c[l]=a/s}return c.sort(em),[R7(c,n/2),R7(c,1-n/2)]}function m3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?QFt(s,t+t/4):s}function QFt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function JFt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function ZFt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*Mc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const g3e=Math.sqrt(2*Math.PI),e5t=Math.SQRT2;let WT=NaN;function J4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(WT===WT)n=WT,WT=NaN;else{do n=Mc()*2-1,r=Mc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,WT=r*s}return e+n*t}function QZ(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*g3e)}function Z4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function eF(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*e5t*t5t(2*e-1)}function t5t(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function JZ(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>J4(n,r),pdf:s=>QZ(s,n,r),cdf:s=>Z4(s,n,r),icdf:s=>eF(s,n,r)};return i.mean(e).stdev(t)}function ZZ(e,t){const n=JZ();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=XZ(e)),i):t},sample(){return e[~~(Mc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function eee(e,t){return e=e||0,t=t??1,Math.exp(e+J4()*t)}function tee(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*g3e*e)}function nee(e,t,n){return Z4(Math.log(e),t,n)}function ree(e,t,n){return Math.exp(eF(e,t,n))}function y3e(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>eee(n,r),pdf:s=>tee(s,n,r),cdf:s=>nee(s,n,r),icdf:s=>ree(s,n,r)};return i.mean(e).stdev(t)}function v3e(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=Mc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function iee(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*Mc()}function see(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function oee(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function aee(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function b3e(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>iee(n,r),pdf:s=>see(s,n,r),cdf:s=>oee(s,n,r),icdf:s=>aee(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function uee(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function iR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function tF(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function sR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function HS(e,t,n,r,i){let s=0,o=0;return sR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function lee(e,t,n){let r=0,i=0,s=0,o=0,a=0;sR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=iR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:HS(e,t,n,i,l)}}function _3e(e,t,n){let r=0,i=0,s=0,o=0,a=0;sR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=iR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:HS(e,t,n,i,l)}}function w3e(e,t,n){const[r,i,s,o]=tF(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;sR(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=iR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:HS(e,t,n,o,y)}}function E3e(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;sR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=iR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:HS(e,t,n,a,c)}}function cee(e,t,n){const[r,i,s,o]=tF(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,T=S=>(S=S-s,b*S*S+w*S+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:T,rSquared:HS(e,t,n,o,T)}}function x3e(e,t,n,r){if(r===0)return uee(e,t,n);if(r===1)return lee(e,t,n);if(r===2)return cee(e,t,n);const[i,s,o,a]=tF(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=r5t(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:n5t(f,y,-o,a),predict:v,rSquared:HS(e,t,n,a,v)}}function n5t(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function r5t(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const vpe=2,bpe=1e-12;function S3e(e,t,n,r){const[i,s,o,a]=tF(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=vpe;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,T=0,S=0,A=0,C=0;const k=1/Math.abs(i[w]-y||1);for(let D=v;D<=b;++D){const $=i[D],F=s[D],M=i5t(Math.abs(y-$)*k)*d[D],B=$*M;E+=M,T+=B,S+=F*M,A+=F*B,C+=$*B}const[N,O]=iR(T/E,S/E,A/E,C/E);c[g]=N+O*y,f[g]=Math.abs(s[g]-c[g]),s5t(i,g+1,p)}if(h===vpe)break;const m=Mxe(f);if(Math.abs(m)<bpe)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?bpe:(v=1-y*y)*v}return o5t(i,c,o,a)}function i5t(e){return(e=1-e*e*e)*e*e}function s5t(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function o5t(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const a5t=.5*Math.PI/180;function nF(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=u5t(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&l5t(f,m,d,h,p)>a5t?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function u5t(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function l5t(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function c5t(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function oH(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:c5t(e)}function T3e(e,t,n){return n||e+(t?"_"+t:"")}const j9=()=>{},f5t={init:j9,add:j9,rem:j9,idx:0},SI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},oR=Object.keys(SI).filter(e=>e!=="__count__");function d5t(e,t){return(n,r)=>bn({name:e,aggregate_param:r,out:n||e},f5t,t)}[...oR,"__count__"].forEach(e=>{SI[e]=d5t(e,SI[e])});function A3e(e,t,n){return SI[e](n,t)}function C3e(e,t){return e.idx-t.idx}function h5t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=SI[i]())})};return e.forEach(n),Object.values(t).sort(C3e)}function p5t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function m5t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function g5t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function y5t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function I3e(e,t){const n=t||wa,r=h5t(e),i=e.slice().sort(C3e);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=p5t,s.prototype.add=m5t,s.prototype.rem=g5t,s.prototype.set=y5t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function fee(e){this._key=e?Dc(e):Lt,this.reset()}const Bo=fee.prototype;Bo.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Bo.add=function(e){this._add.push(e)};Bo.rem=function(e){this._rem.push(e)};Bo.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Bo.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};Bo.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=gOe(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Bo.argmin=function(e){return this.extent(e)[0]||{}};Bo.argmax=function(e){return this.extent(e)[1]||{}};Bo.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Bo.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Bo.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=KZ(this.values(),e),this._get=e),this._q};Bo.q1=function(e){return this.quartile(e)[0]};Bo.q2=function(e){return this.quartile(e)[1]};Bo.q3=function(e){return this.quartile(e)[2]};Bo.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=p3e(this.values(),1e3,.05,e),this._get=e),this._ci};Bo.ci0=function(e){return this.ci(e)[0]};Bo.ci1=function(e){return this.ci(e)[1]};function ly(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}ly.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:oR},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(ly,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=pt(pa(v)),w=b.length;let E=0,T;for(;E<w;++E)r[T=b[E]]||(r[T]=1,t.push(T))}this._dims=pt(e.groupby),this._dnames=this._dims.map(v=>{const b=Xi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:oH(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Xi(f),g=T3e(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(A3e(d,h,g))}return this._measures=this._measures.map(v=>I3e(v,v.field)),Object.create(null)},cellkey:oH(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new fee),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?o3e(t.tuple,s):Er(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const v5t=1e-14;function dee(e){Pe.call(this,null,e)}dee.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(dee,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(pa(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=h3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=fa(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(v5t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=ol(u,pa(t),e.name||"bin_"+Xi(t))}});function k3e(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?EOe(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function hee(e){Pe.call(this,[],e)}hee.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(hee,Pe,{transform(e,t){const n=t.fork(t.ALL),r=k3e(Lt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(Jb(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function R3e(e){Kr.call(this,null,b5t,e)}lt(R3e,Kr);function b5t(e){return this.value&&!e.modified()?this.value:PZ(e.fields,e.orders)}function pee(e){Pe.call(this,null,e)}pee.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function _5t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(pee,Pe,{transform(e,t){const n=f=>d=>{for(var h=_5t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=Er({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function mee(e){Pe.call(this,null,e)}mee.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(mee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=w5t(a,i,s,e.filter||Oc)):n.mod=a,n.source=this.value,n.modifies(r)}});function w5t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(Er(s)),s={},s[t]=l);return i}const _pe={kde:ZZ,mixture:v3e,normal:JZ,lognormal:y3e,uniform:b3e},E5t="distributions",wpe="function",x5t="field";function N3e(e,t){const n=e[wpe];jt(_pe,n)||Le("Unknown distribution function: "+n);const r=_pe[n]();for(const i in e)i===x5t?r.data((e.from||t()).map(e[i])):i===E5t?r[i](e[i].map(s=>N3e(s,t))):typeof r[i]===wpe&&r[i](e[i]);return r}function gee(e){Pe.call(this,null,e)}const P3e=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],S5t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:P3e},{name:"weights",type:"number",array:!0}]};gee.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:P3e.concat(S5t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(gee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=N3e(e.distribution,T5t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Dh(r.data()),l=nF(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],Er(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function T5t(e){return()=>e.materialize(e.SOURCE).source}function D3e(e,t){return e?e.map((n,r)=>t[r]||Xi(n)):null}function yee(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const O3e="bin";function vee(e){Pe.call(this,null,e)}vee.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:O3e}]};const A5t=(e,t)=>rR(Dh(e,t))/30;lt(vee,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=yee(t.source,e.groupby,wa),i=e.smooth||!1,s=e.field,o=e.step||A5t(n,s),a=Jb((p,m)=>s(p)-s(m)),u=e.as||O3e,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of m3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function $3e(e){Kr.call(this,null,C5t,e),this.modified(!0)}lt($3e,Kr);function C5t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:ol(n=>t(n,e),pa(t),Xi(t))}function bee(e){Pe.call(this,[void 0,void 0],e)}bee.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(bee,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=fa(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Xi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function _ee(e,t){Kr.call(this,e),this.parent=t,this.count=0}lt(_ee,Kr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function rF(e){Pe.call(this,{},e),this._keys=US();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(rF,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new _ee(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Lt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Lt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Lt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Lt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Lt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function M3e(e){Kr.call(this,null,I5t,e)}lt(M3e,Kr);function I5t(e){return this.value&&!e.modified()?this.value:je(e.name)?pt(e.name).map(t=>Dc(t)):Dc(e.name,e.as)}function wee(e){Pe.call(this,US(),e)}wee.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(wee,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Lt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Lt(f),1)});function c(f){const d=Lt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Eee(e){Pe.call(this,[],e)}Eee.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(Eee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=D3e(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=qZ(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function xee(e){Pe.call(this,[],e)}xee.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(xee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Xi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=qZ(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function See(e){Pe.call(this,null,e)}See.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(See,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function L3e(e){Pe.call(this,[],e)}lt(L3e,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=Er(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const yP={value:"value",median:Mxe,mean:Iat,min:k7,max:_0},k5t=[];function Tee(e){Pe.call(this,[],e)}Tee.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function R5t(e){var t=e.method||yP.value,n;if(yP[t]==null)Le("Unrecognized imputation method: "+t);else return t===yP.value?(n=e.value!==void 0?e.value:0,()=>n):yP[t]}function N5t(e){const t=e.field;return n=>n?t(n):NaN}lt(Tee,Pe,{transform(e,t){var n=t.fork(t.ALL),r=R5t(e),i=N5t(e),s=Xi(e.field),o=Xi(e.key),a=(e.groupby||[]).map(Xi),u=P5t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(Er(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function P5t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):k5t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Aee(e){ly.call(this,e)}Aee.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:oR},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(Aee,ly,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{bn(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function Cee(e){Pe.call(this,null,e)}Cee.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Cee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=yee(r,e.groupby,e.field),s=(e.groupby||[]).map(Xi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Dh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=ZZ(h,o)[a],m=e.counts?h.length:1,g=c||Dh(h);nF(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(Er(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function F3e(e){Kr.call(this,null,D5t,e)}lt(F3e,Kr);function D5t(e){return this.value&&!e.modified()?this.value:OZ(e.fields,e.flat)}function j3e(e){Pe.call(this,[],e),this._pending=null}lt(j3e,Pe,{transform(e,t){const n=t.dataflow;return this._pending?B9(this,t,this._pending):O5t(e)?t.StopPropagation:e.values?B9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>B9(this,t,pt(r.data)))}});function O5t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function B9(e,t,n){n.forEach(Er);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Iee(e){Pe.call(this,{},e)}Iee.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(Iee,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Xi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function B3e(e){Kr.call(this,null,$5t,e)}lt(B3e,Kr);function $5t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function U3e(e){Kr.call(this,null,M5t,e)}lt(U3e,Kr);function M5t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function z3e(e){Pe.call(this,null,e)}lt(z3e,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kee(e){ly.call(this,e)}kee.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:oR,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(kee,ly,{_transform:ly.prototype.transform,transform(e,t){return this._transform(L5t(e,t),t)}});function L5t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=pa(n).concat(pa(r)),o=j5t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>F5t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function F5t(e,t,n,r){return ol(i=>t(i)===e?n(i):NaN,r,e+"")}function j5t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(H4),t?i.slice(0,t):i}function V3e(e){rF.call(this,e)}lt(V3e,rF,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Lt(s),n,t,s);return(e.modified("field")||r&&t.modified(pa(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(Er(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Ree(e){Pe.call(this,null,e)}Ree.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(Ree,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=D3e(e.fields,e.as||[]),s=r?(a,u)=>B5t(a,u,r,i):K4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Lt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,Er({}));o[Lt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Lt(a)]))}),n}});function B5t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function H3e(e){Pe.call(this,null,e)}lt(H3e,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Nee(e){Pe.call(this,null,e)}Nee.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const U5t=1e-14;lt(Nee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=yee(i,e.groupby,e.field),o=(e.groupby||[]).map(Xi),a=[],u=e.step||.01,l=e.probs||Du(u/2,1-U5t,u),c=l.length;return s.forEach(f=>{const d=YZ(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(Er(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function q3e(e){Pe.call(this,null,e)}lt(q3e,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Lt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=qZ(i);r[Lt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Lt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Pee(e){Pe.call(this,[],e),this.count=0}Pee.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(Pee,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Lt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*Mc()),d<o.length&&d>=u&&(f=o[d],s[Lt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Lt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Lt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Lt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Lt(c)])),this.count=a,this.value=n.source=o,n}});function Dee(e){Pe.call(this,null,e)}Dee.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(Dee,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=Du(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,Er(s)}),n.add=t.add.concat(this.value),n}});function W3e(e){Pe.call(this,null,e),this.modified(!0)}lt(W3e,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Oee(e){Pe.call(this,null,e)}const G3e=["unit0","unit1"];Oee.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:FZ,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:G3e}]};lt(Oee,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?VS:zS)(s.unit).offset,a=e.as||G3e,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(pa(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:HOe({extent:e.extent||Dh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=jZ(r),o=this.value||{},a=(n?$Oe:OOe)(s,i);return a.unit=Qn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function Y3e(e){Pe.call(this,US(),e)}lt(Y3e,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function K3e(e){Pe.call(this,null,e)}lt(K3e,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(Jb(e.sort)):t.source).map(e.field))}});function z5t(e,t,n,r){const i=TI[e](t,n);return{init:i.init||qg,update:function(s,o){o[r]=i.next(s)}}}const TI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=TI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=TI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=V5t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function V5t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const H5t=Object.keys(TI);function X3e(e){const t=pt(e.ops),n=pt(e.fields),r=pt(e.params),i=pt(e.aggregate_params),s=pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){pt(pa(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Xi(g),w=T3e(p,b,s[m]);if(h(g),o.push(w),jt(TI,p))a.push(z5t(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(A3e(p,v,w))}}),(c.length||f.length)&&(this.cell=q5t(f,c,d)),this.inputs=Object.keys(u)}const Q3e=X3e.prototype;Q3e.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};Q3e.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function q5t(e,t,n){e=e.map(u=>I3e(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new fee;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function $ee(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}$ee.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:H5t.concat(oR)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt($ee,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=Jb(e.sort),i=oH(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new X3e(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)W5t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=k3e(Lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function W5t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?uS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ea(-1)};t.init();for(let f=0;f<u;++f)G5t(c,o,f,u),s&&Y5t(c,l),t.update(c,a[f])}function G5t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function Y5t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const K5t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:ly,bin:dee,collect:hee,compare:R3e,countpattern:pee,cross:mee,density:gee,dotbin:vee,expression:$3e,extent:bee,facet:rF,field:M3e,filter:wee,flatten:Eee,fold:xee,formula:See,generate:L3e,impute:Tee,joinaggregate:Aee,kde:Cee,key:F3e,load:j3e,lookup:Iee,multiextent:B3e,multivalues:U3e,params:z3e,pivot:kee,prefacet:V3e,project:Ree,proxy:H3e,quantile:Nee,relay:q3e,sample:Pee,sequence:Dee,sieve:W3e,subflow:_ee,timeunit:Oee,tupleindex:Y3e,values:K3e,window:$ee},Symbol.toStringTag,{value:"Module"}));function N0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const X5t=()=>typeof Image<"u"?Image:null;function Mee(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const Q5t="identity",gx="linear",Mm="log",aR="pow",uR="sqrt",iF="symlog",ab="time",ub="utc",gh="sequential",qS="diverging",yx="quantile",sF="quantize",oF="threshold",Lee="ordinal",aH="point",J3e="band",Fee="bin-ordinal",Vs="continuous",lR="discrete",cR="discretizing",Yc="interpolating",jee="temporal";function J5t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function Z5t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function Bee(){const e=zb().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=Mee(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=Du(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,z0(h,m)-1),v=m===g?y:z0(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return Bee().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function Z3e(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return Z3e(t())},e}function ejt(){return Z3e(Bee().paddingInner(1))}var tjt=Array.prototype.map;function njt(e){return tjt.call(e,fa)}const rjt=Array.prototype.slice;function e$e(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(z0(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=njt(r),n):e.slice()},n.range=function(r){return arguments.length?(t=rjt.call(r),n):t.slice()},n.tickFormat=function(r,i){return MTe(e[0],Qn(e),r??10,i)},n.copy=function(){return e$e().domain(n.domain()).range(n.range())},n}const iM=new Map,t$e=Symbol("vega_scale");function n$e(e){return e[t$e]=!0,e}function ijt(e){return e&&e[t$e]===!0}function sjt(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?J5t(s):s.invertExtent?Z5t(s):void 0),s.type=e,n$e(s)};return r.metadata=Xf(pt(n)),r}function gr(e,t,n){return arguments.length>1?(iM.set(e,sjt(e,t,n)),this):r$e(e)?iM.get(e):void 0}gr(Q5t,LTe);gr(gx,Hf,Vs);gr(Mm,jTe,[Vs,Mm]);gr(aR,IK,Vs);gr(uR,smt,Vs);gr(iF,BTe,Vs);gr(ab,ZTe,[Vs,jee]);gr(ub,_gt,[Vs,jee]);gr(gh,PK,[Vs,Yc]);gr(`${gh}-${gx}`,PK,[Vs,Yc]);gr(`${gh}-${Mm}`,e2e,[Vs,Yc,Mm]);gr(`${gh}-${aR}`,DK,[Vs,Yc]);gr(`${gh}-${uR}`,wgt,[Vs,Yc]);gr(`${gh}-${iF}`,t2e,[Vs,Yc]);gr(`${qS}-${gx}`,n2e,[Vs,Yc]);gr(`${qS}-${Mm}`,r2e,[Vs,Yc,Mm]);gr(`${qS}-${aR}`,OK,[Vs,Yc]);gr(`${qS}-${uR}`,Egt,[Vs,Yc]);gr(`${qS}-${iF}`,i2e,[Vs,Yc]);gr(yx,UTe,[cR,yx]);gr(sF,zTe,cR);gr(oF,VTe,cR);gr(Fee,e$e,[lR,cR]);gr(Lee,zb,lR);gr(J3e,Bee,lR);gr(aH,ejt,lR);function r$e(e){return iM.has(e)}function e_(e,t){const n=iM.get(e);return n&&n.metadata[t]}function Uee(e){return e_(e,Vs)}function vx(e){return e_(e,lR)}function uH(e){return e_(e,cR)}function i$e(e){return e_(e,Mm)}function ojt(e){return e_(e,jee)}function s$e(e){return e_(e,Yc)}function o$e(e){return e_(e,yx)}const ajt=["clamp","base","constant","exponent"];function a$e(e,t){const n=t[0],r=Qn(t)-n;return function(i){return e(n+i*r)}}function aF(e,t,n){return oK(zee(t||"rgb",n),e)}function u$e(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function l$e(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ea(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=gr(s)().domain([t,n]).range([0,1]),ajt.forEach(a=>e[a]?o[a](e[a]()):0),o)}function zee(e,t){const n=Zlt[ujt(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function ujt(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const ljt={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},cjt={accent:xgt,category10:s2e,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:Sgt,observable10:Tgt,paired:Agt,pastel1:Cgt,pastel2:Igt,set1:kgt,set2:Rgt,set3:Ngt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function c$e(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function f$e(e,t){for(const n in e)Vee(n,t(e[n]))}const Epe={};f$e(cjt,c$e);f$e(ljt,e=>aF(c$e(e)));function Vee(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(Epe[e]=t,this):Epe[e]}const UD="symbol",fjt="discrete",djt="gradient",hjt=e=>je(e)?e.map(t=>String(t)):String(e),pjt=(e,t)=>e[1]-t[1],mjt=(e,t)=>t[1]-e[1];function Hee(e,t,n){let r;return lr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(rR(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),mt(t)&&(t=e.type===ab?zS(t):e.type==ub?VS(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function d$e(e,t,n){let r=e.range(),i=r[0],s=Qn(r),o=pjt;if(i>s&&(r=s,s=i,i=r,o=mjt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Qn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function qee(e,t){return e.bins?d$e(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function h$e(e,t,n,r,i,s){const o=t.type;let a=hjt;if(o===ab||i===ab)a=e.timeFormat(r);else if(o===ub||i===ub)a=e.utcFormat(r);else if(i$e(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=p$e(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function p$e(e,t,n){const r=qee(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const lH={[yx]:"quantiles",[sF]:"thresholds",[oF]:"domain"},m$e={[yx]:"quantiles",[sF]:"domain"};function g$e(e,t){return e.bins?vjt(e.bins):e.type===Mm?p$e(e,t,!0):lH[e.type]?yjt(e[lH[e.type]]()):qee(e,t)}function gjt(e,t,n){const r=t[m$e[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function yjt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function vjt(e){const t=e.slice(0,-1);return t.max=Qn(e),t}const bjt=e=>lH[e.type]||e.bins;function y$e(e,t,n,r,i,s,o){const a=m$e[t.type]&&s!==ab&&s!==ub?gjt(e,t,i):h$e(e,t,n,i,s,o);return r===UD&&bjt(t)?_jt(a):r===fjt?wjt(a):Ejt(a)}const _jt=e=>(t,n,r)=>{const i=xpe(r[n+1],xpe(r.max,1/0)),s=Spe(t,e),o=Spe(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},xpe=(e,t)=>e??t,wjt=e=>(t,n)=>n?e(t):null,Ejt=e=>t=>e(t),Spe=(e,t)=>Number.isFinite(e)?t(e):null;function xjt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Qn(t),s=i-r;if(e.type===oF){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function Sjt(e,t,n,r){const i=r||t.type;return mt(n)&&ojt(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===ab?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===ub?e.utcFormat("%A, %d %B %Y, %X UTC"):y$e(e,t,5,null,n,r,!0)}function v$e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=Sjt(e,t,n.format,n.formatType);if(uH(t.type)){const s=g$e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(vx(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Qn(s))}`}}let b$e=0;function Tjt(){b$e=0}const sM="p_";function Wee(e){return e&&e.gradient}function _$e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?sM:"";return i||(i=e.id="gradient_"+b$e++,r==="radial"?(e.x1=_d(e.x1,.5),e.y1=_d(e.y1,.5),e.r1=_d(e.r1,0),e.x2=_d(e.x2,.5),e.y2=_d(e.y2,.5),e.r2=_d(e.r2,.5),s=sM):(e.x1=_d(e.x1,0),e.y1=_d(e.y1,0),e.x2=_d(e.x2,1),e.y2=_d(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function _d(e,t){return e??t}function w$e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const Tpe={basis:{curve:Hgt},"basis-closed":{curve:qgt},"basis-open":{curve:Wgt},bundle:{curve:Ggt,tension:"beta",value:.85},cardinal:{curve:Ygt,tension:"tension",value:0},"cardinal-open":{curve:Xgt,tension:"tension",value:0},"cardinal-closed":{curve:Kgt,tension:"tension",value:0},"catmull-rom":{curve:Qgt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Jgt,tension:"alpha",value:.5},"catmull-rom-open":{curve:Zgt,tension:"alpha",value:.5},linear:{curve:$K},"linear-closed":{curve:e0t},monotone:{horizontal:n0t,vertical:t0t},natural:{curve:r0t},step:{curve:i0t},"step-after":{curve:o0t},"step-before":{curve:s0t}};function Gee(e,t,n){var r=jt(Tpe,e)&&Tpe[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const Ajt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},Cjt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,Ijt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,kjt=/^((\s+,?\s*)|(,\s*))/,Rjt=/^[01]/;function bx(e){const t=[];return(e.match(Cjt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=Ajt[s],a=Njt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function Njt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?Rjt:Ijt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(kjt);u!==null&&(i+=u[0].length)}return r}const cy=Math.PI/180,Pjt=1e-14,Wv=Math.PI/2,Yd=Math.PI*2,M_=Math.sqrt(3)/2;var U9={},z9={},E$e=[].join;function Djt(e,t,n,r,i,s,o,a,u){const l=E$e.call(arguments);if(U9[l])return U9[l];const c=o*cy,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,T=g*e+y*t,S=v*e+b*t;let C=1/((T-w)*(T-w)+(S-E)*(S-E))-.25;C<0&&(C=0);let k=Math.sqrt(C);s==i&&(k=-k);const N=.5*(w+T)-k*(S-E),O=.5*(E+S)+k*(T-w),D=Math.atan2(E-O,w-N);let F=Math.atan2(S-O,T-N)-D;F<0&&s===1?F+=Yd:F>0&&s===0&&(F-=Yd);const M=Math.ceil(Math.abs(F/(Wv+.001))),B=[];for(let U=0;U<M;++U){const H=D+U*F/M,P=D+(U+1)*F/M;B[U]=[N,O,H,P,n,r,f,d]}return U9[l]=B}function Ojt(e){const t=E$e.call(e);if(z9[t])return z9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,T=r+m+w*p,S=n+g,A=r+y,C=S+w*y,k=A-w*g;return z9[t]=[c*E+f*T,d*E+h*T,c*C+f*k,d*C+h*k,c*S+f*A,d*S+h*A]}const sc=["l",0,0,0,0,0,0,0];function $jt(e,t,n){const r=sc[0]=e[0];if(r==="a"||r==="A")sc[1]=t*e[1],sc[2]=n*e[2],sc[3]=e[3],sc[4]=e[4],sc[5]=e[5],sc[6]=t*e[6],sc[7]=n*e[7];else if(r==="h"||r==="H")sc[1]=t*e[1];else if(r==="v"||r==="V")sc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)sc[i]=(i%2==1?t:n)*e[i];return sc}function AI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=$jt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":Ape(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":Ape(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function Ape(e,t,n,r){const i=Djt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=Ojt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const Cpe=.5773502691896257,Ipe={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,Yd)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n,i=r-n*Cpe,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n,i=r-n*Cpe;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=M_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function x$e(e){return jt(Ipe,e)?Ipe[e]:Mjt(e)}var V9={};function Mjt(e){if(!jt(V9,e)){const t=bx(e);V9[e]={draw:function(n,r){AI(n,t,0,0,Math.sqrt(r)/2)}}}return V9[e]}const bg=.448084975506;function Ljt(e){return e.x}function Fjt(e){return e.y}function jjt(e){return e.width}function Bjt(e){return e.height}function yp(e){return typeof e=="function"?e:()=>+e}function vP(e,t,n){return Math.max(t,Math.min(e,n))}function S$e(){var e=Ljt,t=Fjt,n=jjt,r=Bjt,i=yp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=vP(+i.call(this,c),0,v),w=vP(+s.call(this,c),0,v),E=vP(+o.call(this,c),0,v),T=vP(+a.call(this,c),0,v);if(u||(u=h=v6()),b<=0&&w<=0&&E<=0&&T<=0)u.rect(p,m,g,y);else{var S=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(S-w,m),u.bezierCurveTo(S-bg*w,m,S,m+bg*w,S,m+w),u.lineTo(S,A-T),u.bezierCurveTo(S,A-bg*T,S-bg*T,A,S-T,A),u.lineTo(p+E,A),u.bezierCurveTo(p+bg*E,A,p,A-bg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+bg*b,p+bg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=yp(c),l):e},l.y=function(c){return arguments.length?(t=yp(c),l):t},l.width=function(c){return arguments.length?(n=yp(c),l):n},l.height=function(c){return arguments.length?(r=yp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=yp(c),s=f!=null?yp(f):i,a=d!=null?yp(d):i,o=h!=null?yp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function T$e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,Yd);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=v6()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function fR(e,t){return e??t}const dR=e=>e.x||0,hR=e=>e.y||0,Ujt=e=>e.width||0,zjt=e=>e.height||0,Vjt=e=>(e.x||0)+(e.width||0),Hjt=e=>(e.y||0)+(e.height||0),qjt=e=>e.startAngle||0,Wjt=e=>e.endAngle||0,Gjt=e=>e.padAngle||0,Yjt=e=>e.innerRadius||0,Kjt=e=>e.outerRadius||0,Xjt=e=>e.cornerRadius||0,Qjt=e=>fR(e.cornerRadiusTopLeft,e.cornerRadius)||0,Jjt=e=>fR(e.cornerRadiusTopRight,e.cornerRadius)||0,Zjt=e=>fR(e.cornerRadiusBottomRight,e.cornerRadius)||0,e8t=e=>fR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,t8t=e=>fR(e.size,64),n8t=e=>e.size||1,uF=e=>e.defined!==!1,r8t=e=>x$e(e.shape||"circle"),i8t=B3().startAngle(qjt).endAngle(Wjt).padAngle(Gjt).innerRadius(Yjt).outerRadius(Kjt).cornerRadius(Xjt),s8t=f2e().x(dR).y1(hR).y0(Hjt).defined(uF),o8t=f2e().y(hR).x1(dR).x0(Vjt).defined(uF),a8t=c2e().x(dR).y(hR).defined(uF),u8t=S$e().x(dR).y(hR).width(Ujt).height(zjt).cornerRadius(Qjt,Jjt,Zjt,e8t),l8t=Vgt().type(r8t).size(t8t),c8t=T$e().x(dR).y(hR).defined(uF).size(n8t);function Yee(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function f8t(e,t){return i8t.context(e)(t)}function d8t(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?o8t:s8t).curve(Gee(r,n.orient,n.tension)).context(e)(t)}function h8t(e,t){const n=t[0],r=n.interpolate||"linear";return a8t.curve(Gee(r,n.orient,n.tension)).context(e)(t)}function WS(e,t,n,r){return u8t.context(e)(t,n,r)}function p8t(e,t){return(t.mark.shape||t.shape).context(e)(t)}function m8t(e,t){return l8t.context(e)(t)}function g8t(e,t){return c8t.context(e)(t)}var A$e=1;function C$e(){A$e=1}function Kee(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+A$e++),o=i.clipping[s]||(i.clipping[s]={id:s});return _n(r)?o.path=r(null):Yee(n)?o.path=WS(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Ts(e){this.clear(),e&&this.union(e)}Ts.prototype={clone(){return new Ts(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function lF(e){this.mark=e,this.bounds=this.bounds||new Ts}function cF(e){lF.call(this,e),this.items=this.items||[]}lt(cF,lF);class I$e{constructor(t){this._pending=0,this._loader=t||W4()}pending(){return this._pending}sanitizeURL(t){const n=this;return kpe(n),n._loader.sanitize(t,{context:"href"}).then(r=>(GT(n),r)).catch(()=>(GT(n),null))}loadImage(t){const n=this,r=X5t();return kpe(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>GT(n),o.onerror=()=>GT(n),o.src=s,o}).catch(i=>(GT(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function kpe(e){e._pending+=1}function GT(e){e._pending-=1}function rg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?y8t(t,r):0))}return e}function y8t(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const v8t=Yd-1e-8;let fF,zD,VD,m1,cH,HD,fH,dH;const e0=(e,t)=>fF.add(e,t),qD=(e,t)=>e0(zD=e,VD=t),Rpe=e=>e0(e,fF.y1),Npe=e=>e0(fF.x1,e),Gv=(e,t)=>cH*e+fH*t,Yv=(e,t)=>HD*e+dH*t,H9=(e,t)=>e0(Gv(e,t),Yv(e,t)),q9=(e,t)=>qD(Gv(e,t),Yv(e,t));function pR(e,t){return fF=e,t?(m1=t*cy,cH=dH=Math.cos(m1),HD=Math.sin(m1),fH=-HD):(cH=dH=1,m1=HD=fH=0),b8t}const b8t={beginPath(){},closePath(){},moveTo:q9,lineTo:q9,rect(e,t,n,r){m1?(H9(e+n,t),H9(e+n,t+r),H9(e,t+r),q9(e,t)):(e0(e+n,t+r),qD(e,t))},quadraticCurveTo(e,t,n,r){const i=Gv(e,t),s=Yv(e,t),o=Gv(n,r),a=Yv(n,r);Ppe(zD,i,o,Rpe),Ppe(VD,s,a,Npe),qD(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=Gv(e,t),a=Yv(e,t),u=Gv(n,r),l=Yv(n,r),c=Gv(i,s),f=Yv(i,s);Dpe(zD,o,u,c,Rpe),Dpe(VD,a,l,f,Npe),qD(c,f)},arc(e,t,n,r,i,s){if(r+=m1,i+=m1,zD=n*Math.cos(i)+e,VD=n*Math.sin(i)+t,Math.abs(i-r)>v8t)e0(e-n,t-n),e0(e+n,t+n);else{const o=l=>e0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%Yd,r<0&&(r+=Yd),i=i%Yd,i<0&&(i+=Yd),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=Yd,a=r-r%Wv,u=0;u<4&&a>i;++u,a-=Wv)o(a);else for(a=r-r%Wv+Wv,u=0;u<4&&a<i;++u,a=a+Wv)o(a)}}};function Ppe(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Dpe(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>Pjt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Ope(u,e,t,n,r)),0<l&&l<1&&i(Ope(l,e,t,n,r))}function Ope(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var P0=(P0=N0(1,1))?P0.getContext("2d"):null;const hH=new Ts;function Xee(e){return function(t,n){if(!P0)return!0;e(P0,t),hH.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=hH;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(P0.isPointInPath(u,a))return!0;return!1}}function Qee(e,t){return t.contains(e.x||0,e.y||0)}function k$e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(hH.set(n,r,n+i,r+s))}function R$e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Rw(t,n,r,i,s)}function Rw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function _x(e,t){e.globalCompositeOperation=t.blend||"source-over"}function of(e,t){return e??t}function $pe(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function _8t(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+of(t.x1,.5)*r,n.y1+of(t.y1,.5)*i,Math.max(r,i)*of(t.r1,0),n.x1+of(t.x2,.5)*r,n.y1+of(t.y2,.5)*i,Math.max(r,i)*of(t.r2,.5));else{const o=of(t.x1,0),a=of(t.y1,0),u=of(t.x2,1),l=of(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=N0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=$pe(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return $pe(s,t.stops)}function N$e(e,t,n){return Wee(n)?_8t(e,n,t.bounds):n}function oM(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=N$e(e,t,t.fill),!0):!1}var w8t=[];function wx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=N$e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||w8t),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function E8t(e,t){return e.zindex-t.zindex||e.index-t.index}function Jee(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(E8t)}function Jf(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=Jee(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function aM(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=Jee(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function Zee(e){return function(t,n,r){Jf(n,i=>{(!r||r.intersects(i.bounds))&&P$e(e,t,i,i)})}}function x8t(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&P$e(e,t,n.items[0],n.items)}}function P$e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(_x(t,n),n.fill&&oM(t,n,i)&&t.fill(),n.stroke&&wx(t,n,i)&&t.stroke()))}function dF(e){return e=e||Oc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,aM(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function mR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function ete(e){return dF(mR(e))}function C1(e,t){return"translate("+e+","+t+")"}function tte(e){return"rotate("+e+")"}function S8t(e,t){return"scale("+e+","+t+")"}function D$e(e){return C1(e.x||0,e.y||0)}function T8t(e){return C1(e.x||0,e.y||0)+(e.angle?" "+tte(e.angle):"")}function A8t(e){return C1(e.x||0,e.y||0)+(e.angle?" "+tte(e.angle):"")+(e.scaleX||e.scaleY?" "+S8t(e.scaleX||1,e.scaleY||1):"")}function nte(e,t,n){function r(o,a){o("transform",T8t(a)),o("d",t(null,a))}function i(o,a){return t(pR(o,a.angle),a),rg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=cy),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:Zee(s),pick:ete(s),isect:n||Xee(s)}}var C8t=nte("arc",f8t);function I8t(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function k8t(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function R8t(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function rte(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(pR(u),c),rg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=mR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:x8t(s),pick:a,isect:Qee,tip:n}}var N8t=rte("area",d8t,I8t);function P8t(e,t){var n=t.clip;e.save(),_n(n)?(e.beginPath(),n(e),e.clip()):O$e(e,t.group)}function O$e(e,t){e.beginPath(),Yee(t)?WS(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function $$e(e){const t=of(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function D8t(e,t){e("transform",D$e(t))}function M$e(e,t){const n=$$e(t);e("d",WS(null,t,n,n))}function O8t(e,t){e("class","background"),e("aria-hidden",!0),M$e(e,t)}function $8t(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?M$e(e,t):e("d","")}function M8t(e,t,n){const r=t.clip?Kee(n,t,t):null;e("clip-path",r)}function L8t(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),rg(e,t),e.translate(t.x||0,t.y||0)}function CI(e,t,n,r){const i=$$e(t);e.beginPath(),WS(e,t,(n||0)+i,(r||0)+i)}const F8t=mR(CI),j8t=mR(CI,!1),B8t=mR(CI,!0);function U8t(e,t,n,r){Jf(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(CI(e,i,s,o),_x(e,i),i.fill&&oM(e,i,u)&&e.fill(),i.stroke&&!a&&wx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&O$e(e,i),n&&n.translate(-s,-o),Jf(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(CI(e,i,s,o),_x(e,i),wx(e,i,u)&&e.stroke())})}function z8t(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return aM(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&Yee(u)&&!B8t(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&j8t(e,u,o,a)?(e.restore(),u):(l=aM(u,v=>V8t(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&F8t(e,u,o,a)&&(l=u),e.restore(),l||null)})}function V8t(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var H8t={type:"group",tag:"g",nested:!1,attr:D8t,bound:L8t,draw:U8t,pick:z8t,isect:k$e,content:M8t,background:O8t,foreground:$8t},II={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function ite(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function ste(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function ote(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function hF(e,t){return e==="center"?t/2:e==="right"?t:0}function pF(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function q8t(e,t,n){const r=ite(t,n),i=ste(t,r),s=ote(t,r),o=(t.x||0)-hF(t.align,i),a=(t.y||0)-pF(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,II["xmlns:xlink"],"xlink:href"),e("transform",C1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function W8t(e,t){const n=t.image,r=ste(t,n),i=ote(t,n),s=(t.x||0)-hF(t.align,r),o=(t.y||0)-pF(t.baseline,i);return e.set(s,o,s+r,o+i)}function G8t(e,t,n){Jf(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=ite(r,this);let s=ste(r,i),o=ote(r,i);if(s===0||o===0)return;let a=(r.x||0)-hF(r.align,s),u=(r.y||0)-pF(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(_x(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var Y8t={type:"image",tag:"image",nested:!1,attr:q8t,bound:W8t,draw:G8t,pick:dF(),isect:Oc,get:ite,xOffset:hF,yOffset:pF},K8t=rte("line",h8t,k8t);function X8t(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",A8t(t)),e("d",t.path)}function WD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*cy,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=bx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),AI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):AI(e,u,r,i,s,o)}function Q8t(e,t){return WD(pR(e,t.angle),t)?e.set(0,0,0,0):rg(e,t,!0)}var J8t={type:"path",tag:"path",nested:!1,attr:X8t,bound:Q8t,draw:Zee(WD),pick:ete(WD),isect:Xee(WD)};function Z8t(e,t){e("d",WS(null,t))}function e9t(e,t){var n,r;return rg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Mpe(e,t){e.beginPath(),WS(e,t)}var t9t={type:"rect",tag:"path",nested:!1,attr:Z8t,bound:e9t,draw:Zee(Mpe),pick:ete(Mpe),isect:k$e};function n9t(e,t){e("transform",D$e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function r9t(e,t){var n,r;return rg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function L$e(e,t,n){var r,i,s,o;return t.stroke&&wx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function i9t(e,t,n){Jf(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&L$e(e,r,i)&&(_x(e,r),e.stroke())}})}function s9t(e,t,n,r){return e.isPointInStroke?L$e(e,t,1)&&e.isPointInStroke(n,r):!1}var o9t={type:"rule",tag:"line",nested:!1,attr:n9t,bound:r9t,draw:i9t,pick:dF(s9t),isect:R$e},a9t=nte("shape",p8t),u9t=nte("symbol",m8t,Qee);const Lpe=wOe();var Rl={height:ep,measureWidth:ate,estimateWidth:uM,width:uM,canvas:F$e};F$e(!0);function F$e(e){Rl.width=e&&P0?ate:uM}function uM(e,t){return j$e(dy(e,t),ep(e))}function j$e(e,t){return~~(.8*e.length*t)}function ate(e,t){return ep(e)<=0||!(t=dy(e,t))?0:B$e(t,mF(e))}function B$e(e,t){const n=`(${t}) ${e}`;let r=Lpe.get(n);return r===void 0&&(P0.font=t,r=P0.measureText(e).width,Lpe.set(n,r)),r}function ep(e){return e.fontSize!=null?+e.fontSize||0:11}function fy(e){return e.lineHeight!=null?e.lineHeight:ep(e)+2}function l9t(e){return je(e)?e.length>1?e:e[0]:e}function gR(e){return l9t(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function ute(e){const t=gR(e);return(je(t)?t.length-1:0)*fy(e)}function dy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?f9t(e,n):n}function c9t(e){if(Rl.width===ate){const t=mF(e);return n=>B$e(n,t)}else if(Rl.width===uM){const t=ep(e);return n=>j$e(n,t)}else return t=>Rl.width(e,t)}function f9t(e,t){var n=+e.limit,r=c9t(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function yR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function mF(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ep(e)+"px "+yR(e,t)}function lte(e){var t=e.baseline,n=ep(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*fy(e):t==="line-bottom"?.29*n-.5*fy(e):0)}const d9t={left:"start",center:"middle",right:"end"},qA=new Ts;function gF(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-Wv,t+=r*Math.cos(i),n+=r*Math.sin(i)),qA.x1=t,qA.y1=n,qA}function h9t(e,t){var n=t.dx||0,r=(t.dy||0)+lte(t),i=gF(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",d9t[t.align]||"start"),a?(u=C1(s,o)+" "+tte(a),(n||r)&&(u+=" "+C1(n,r))):u=C1(s+n,o+r),e("transform",u)}function cte(e,t,n){var r=Rl.height(t),i=t.align,s=gF(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+lte(t)-Math.round(.8*r),c=gR(t),f;if(je(c)?(r+=fy(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Rl.width(t,h)),0)):f=Rl.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*cy,o,a);else if(n===2)return e.rotatedPoints(t.angle*cy,o,a);return e}function p9t(e,t,n){Jf(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=mF(r),e.textAlign=r.align||"left",s=gF(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*cy),o=a=0),o+=r.dx||0,a+=(r.dy||0)+lte(r),c=gR(r),_x(e,r),je(c))for(l=fy(r),u=0;u<c.length;++u)f=dy(r,c[u]),r.fill&&oM(e,r,i)&&e.fillText(f,o,a),r.stroke&&wx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=dy(r,c),r.fill&&oM(e,r,i)&&e.fillText(f,o,a),r.stroke&&wx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function m9t(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=gF(t),a=o.x1,u=o.y1,l=cte(qA,t,1),c=-t.angle*cy,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function g9t(e,t){const n=cte(qA,e,2);return Rw(t,n[0],n[1],n[2],n[3])||Rw(t,n[0],n[1],n[4],n[5])||Rw(t,n[4],n[5],n[6],n[7])||Rw(t,n[2],n[3],n[6],n[7])}var y9t={type:"text",tag:"text",nested:!1,attr:h9t,bound:cte,draw:p9t,pick:dF(m9t),isect:g9t},v9t=rte("trail",g8t,R8t),Hl={arc:C8t,area:N8t,group:H8t,image:Y8t,line:K8t,path:J8t,rect:t9t,rule:o9t,shape:a9t,symbol:u9t,text:y9t,trail:v9t};function pH(e,t,n){var r=Hl[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Ts),e,n)}var Fpe={mark:null};function U$e(e,t,n){var r=Hl[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Fpe.mark=e,l=Fpe),c=pH(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Ts,o)for(a=0,u=s.length;a<u;++a)t.union(pH(s[a],i,n));return e.bounds=t}const b9t=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function z$e(e,t){return JSON.stringify(e,b9t,t)}function V$e(e){const t=typeof e=="string"?JSON.parse(e):e;return H$e(t)}function H$e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&H$e(n[i]);return t&&U$e(e),e}class q$e{constructor(t){arguments.length?this.root=V$e(t):(this.root=jpe({marktype:"group",name:"root",role:"frame"}),this.root.items=[new cF(this.root)])}toJSON(t){return z$e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=jpe(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function jpe(e,t){const n={bounds:new Ts,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function t0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function fte(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ds(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=t0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function gc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function W$e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function yF(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function _9t(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Hl[i.marktype]).tip){for(o=yF(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let dte=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||W4(),this._tooltip=n||w9t}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=t0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=_9t(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function w9t(e,t,n,r){e.element().setAttribute("title",r||"")}class vR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new I$e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const E9t="keydown",x9t="keypress",S9t="keyup",G$e="dragenter",GD="dragleave",Y$e="dragover",mH="pointerdown",T9t="pointerup",lM="pointermove",YD="pointerout",K$e="pointerover",gH="mousedown",A9t="mouseup",X$e="mousemove",cM="mouseout",Q$e="mouseover",fM="click",C9t="dblclick",I9t="wheel",J$e="mousewheel",dM="touchstart",hM="touchmove",pM="touchend",k9t=[E9t,x9t,S9t,G$e,GD,Y$e,mH,T9t,lM,YD,K$e,gH,A9t,X$e,cM,Q$e,fM,C9t,I9t,J$e,dM,hM,pM],yH=lM,WA=cM,vH=fM;class bR extends dte{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=k9t,this.pointermove=Upe([lM,X$e],[K$e,Q$e],[YD,cM]),this.dragover=Upe([Y$e],[G$e],[GD]),this.pointerout=zpe([YD,cM]),this.dragleave=zpe([GD])}initialize(t,n,r){return this._canvas=t&&fte(t,"canvas"),[fM,gH,mH,lM,YD,GD].forEach(i=>Bpe(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(J$e,t)}pointerdown(t){this._down=this._active,this.fire(mH,t)}mousedown(t){this._down=this._active,this.fire(gH,t)}click(t){this._down===this._active&&(this.fire(fM,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(dM,t,!0)}touchmove(t){this.fire(hM,t,!0)}touchend(t){this.fire(pM,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===vH&&i&&i.href?this.handleHref(n,i,i.href):(t===yH||t===WA)&&this.handleTooltip(n,i,t!==WA),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Bpe(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=yF(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Hl[t.marktype].pick.call(this,o,t,n,r,i,s)}}const R9t=e=>e===dM||e===hM||e===pM?[dM,hM,pM]:[e];function Bpe(e,t){R9t(t).forEach(n=>N9t(e,n))}function N9t(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function G2(e,t,n){t.forEach(r=>e.fire(r,n))}function Upe(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?G2(this,e,r):((!i||!i.exit)&&G2(this,n,r),this._active=s,G2(this,t,r),G2(this,e,r))}}function zpe(e){return function(t){G2(this,e,t),this._active=null}}function P9t(){return typeof window<"u"&&window.devicePixelRatio||1}function D9t(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?P9t():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class mM extends vR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Ts,this._tempb=new Ts}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:N0(1,1,this._options.type),t&&this._canvas&&(gc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)D9t(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=O9t(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):$9t(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Hl[n.marktype];n.clip&&P8t(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const O9t=(e,t,n)=>new Ts().set(0,0,t,n).translate(-e[0],-e[1]);function $9t(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class Z$e extends dte{constructor(t,n){super(t,n);const r=this;r._hrefHandler=W9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=W9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==WA)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(vH,this._hrefHandler),i.removeEventListener(yH,this._tooltipHandler),i.removeEventListener(WA,this._tooltipHandler)),this._svg=i=t&&fte(t,"svg"),i&&(i.addEventListener(vH,this._hrefHandler),i.addEventListener(yH,this._tooltipHandler),i.addEventListener(WA,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:W9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const W9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},eMe="aria-hidden",hte="aria-label",pte="role",mte="aria-roledescription",tMe="graphics-object",gte="graphics-symbol",nMe=(e,t,n)=>({[pte]:e,[mte]:t,[hte]:n||void 0}),M9t=Xf(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),Vpe={axis:{desc:"axis",caption:j9t},legend:{desc:"legend",caption:B9t},"title-text":{desc:"title",caption:e=>`Title text '${qpe(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${qpe(e)}'`}},Hpe={ariaRole:pte,ariaRoleDescription:mte,description:hte};function rMe(e,t){const n=t.aria===!1;if(e(eMe,n||void 0),n||t.description==null)for(const r in Hpe)e(Hpe[r],void 0);else{const r=t.mark.marktype;e(hte,t.description),e(pte,t.ariaRole||(r==="group"?tMe:gte)),e(mte,t.ariaRoleDescription||`${r} mark`)}}function iMe(e){return e.aria===!1?{[eMe]:!0}:M9t[e.role]?null:Vpe[e.role]?F9t(e,Vpe[e.role]):L9t(e)}function L9t(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return nMe(n?tMe:gte,`${t} mark container`,e.description)}function F9t(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return nMe(t.role||gte,t.desc,n.description||r(n))}catch{return null}}function qpe(e){return pt(e.text).join(" ")}function j9t(e){const t=e.datum,n=e.orient,r=t.title?sMe(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${vx(a)?"discrete":a} scale with ${v$e(o,s,e)}`}function B9t(e){const t=e.datum,n=t.title?sMe(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return z9t(r)+(n?` titled '${n}'`:"")+` for ${U9t(s)} with ${v$e(u,a,e)}`}function sMe(e){try{return pt(Qn(e.items).items[0].text).join(" ")}catch{return null}}function U9t(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Qn(e)}function z9t(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const oMe=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),V9t=e=>oMe(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function yte(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${V9t(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=oMe(u),a),toString:()=>e};return a}const aMe=e=>uMe(yte(),e)+"";function uMe(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):uMe(e,r)}return e.close()}const gM={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},yM={blend:"mix-blend-mode"},lMe={fill:"none","stroke-miterlimit":10},YT=0,Wpe="http://www.w3.org/2000/xmlns/",Ns=II.xmlns;class vte extends vR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ds(t,0,"svg",Ns),this._svg.setAttributeNS(Wpe,"xmlns",Ns),this._svg.setAttributeNS(Wpe,"xmlns:xlink",II["xmlns:xlink"]),this._svg.setAttribute("version",II.version),this._svg.setAttribute("class","marks"),gc(t,1),this._root=Ds(this._svg,YT,"g",Ns),n0(this._root,lMe),gc(this._svg,YT+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(n0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ds(t,YT,"rect",Ns),n0(r,{width:this._width,height:this._height,fill:n}));const i=aMe(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),gc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Hl[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,Gpe(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,Gpe(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Hl[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Ype(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return gc(c,0),n._svg;c.setAttribute("class",W$e(n));const f=iMe(n);for(const m in f)Da(c,m,f[m]);l||Da(c,"pointer-events",u),Da(c,"clip-path",n.clip?Kee(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Ype(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&W9t(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):Jf(n,p),gc(c,h),c}_update(t,n,r){Xp=n,ia=n.__values__,rMe(GA,r),t.attr(GA,r,this);const i=Y9t[t.type];i&&i.call(this,t,n,r),Xp&&this.style(Xp,r)}style(t,n){if(n!=null){for(const r in gM){let i=r==="font"?yR(n):n[r];if(i===ia[r])continue;const s=gM[r];i==null?t.removeAttribute(s):(Wee(i)&&(i=_$e(i,this._defs.gradient,cMe())),t.setAttribute(s,i+"")),ia[r]=i}for(const r in yM)KD(t,yM[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ds(t,YT+1,"defs",Ns)),i=H9t(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ds(t,YT+1,"defs",Ns)),i=q9t(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):gc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function Gpe(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function H9t(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ds(e,n++,"pattern",Ns);n0(o,{id:sM+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ds(o,0,"rect",Ns),n0(o,{width:1,height:1,fill:`url(${cMe()}#${t.id})`}),e=Ds(e,n++,"radialGradient",Ns),n0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ds(e,n++,"linearGradient",Ns),n0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ds(e,r,"stop",Ns),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return gc(e,r),n}function q9t(e,t,n){let r;return e=Ds(e,n,"clipPath",Ns),e.setAttribute("id",t.id),t.path?(r=Ds(e,0,"path",Ns),r.setAttribute("d",t.path)):(r=Ds(e,0,"rect",Ns),n0(r,{x:0,y:0,width:t.width,height:t.height})),gc(e,1),n+1}function W9t(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;Jf(n,o=>{i=e.mark(t,o,i,r),++s}),gc(t,1+s)}function Ype(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=t0(o,r,Ns),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=t0(o,"path",Ns);s.appendChild(a),a.__data__=e;const u=t0(o,"g",Ns);s.appendChild(u),u.__data__=e;const l=t0(o,"path",Ns);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||G9t(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function G9t(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let Xp=null,ia=null;const Y9t={group(e,t,n){const r=Xp=t.childNodes[2];ia=r.__values__,e.foreground(GA,n,this),ia=t.__values__,Xp=t.childNodes[1],e.content(GA,n,this);const i=Xp=t.childNodes[0];e.background(GA,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ia.events&&(Da(r,"pointer-events",s),Da(i,"pointer-events",s),ia.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Da(r,"display",null),this.style(i,n),Da(i,"stroke",null),o&&(n.fill=null),ia=r.__values__,this.style(r,n),o&&(n.fill=o),Xp=null}else Da(r,"display","none")},image(e,t,n){n.smooth===!1?(KD(t,"image-rendering","optimizeSpeed"),KD(t,"image-rendering","pixelated")):KD(t,"image-rendering",null)},text(e,t,n){const r=gR(n);let i,s,o,a;je(r)?(s=r.map(u=>dy(n,u)),i=s.join(`
`),i!==ia.text&&(gc(t,0),o=t.ownerDocument,a=fy(n),s.forEach((u,l)=>{const c=t0(o,"tspan",Ns);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ia.text=i)):(s=dy(n,r),s!==ia.text&&(t.textContent=s,ia.text=s)),Da(t,"font-family",yR(n)),Da(t,"font-size",ep(n)+"px"),Da(t,"font-style",n.fontStyle),Da(t,"font-variant",n.fontVariant),Da(t,"font-weight",n.fontWeight)}};function GA(e,t,n){t!==ia[e]&&(n?K9t(Xp,e,t,n):Da(Xp,e,t),ia[e]=t)}function KD(e,t,n){n!==ia[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ia[t]=n)}function n0(e,t){for(const n in t)Da(e,n,t[n])}function Da(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function K9t(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function cMe(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class fMe extends vR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=yte();n.open("svg",bn({},II,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",lMe,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Hl[n.marktype],i=r.tag,s=[rMe,r.attr];t.open("g",{class:W$e(n),"clip-path":n.clip?Kee(this,n,n.group):null},iMe(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=gR(a);if(je(l)){const c={x:0,dy:fy(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(dy(a,l[f])).close()}else t.text(dy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),Jf(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):Jf(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&X9t(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:sM+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function X9t(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=yR(t),e["font-size"]=ep(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in gM){let a=t[o];const u=gM[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(Wee(a)&&(a=_$e(a,i.gradient,"")),e[u]=a)}for(const o in yM){const a=t[o];a!=null&&(s=s||[],s.push(`${yM[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const hf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function Q9t(e){hf.svgMarkTypes=e.svgMarkTypes??["text"],hf.svgOnTop=e.svgOnTop??!0,hf.debug=e.debug??!1}class bH extends vR{constructor(t){super(t),this._svgRenderer=new vte(t),this._canvasRenderer=new mM(t)}initialize(t,n,r,i,s){this._root_el=Ds(t,0,"div");const o=Ds(this._root_el,0,"div"),a=Ds(this._root_el,1,"div");return this._root_el.style.position="relative",hf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=hf.svgOnTop?a:o,this._canvasEl=hf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return hf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!hf.svgMarkTypes.includes(s));this._svgRenderer.render(t,hf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return hf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class dMe extends bR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ds(Ds(t,0,"div"),hf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const hMe="canvas",pMe="hybrid",mMe="png",gMe="svg",yMe="none",r0={Canvas:hMe,PNG:mMe,SVG:gMe,Hybrid:pMe,None:yMe},lb={};lb[hMe]=lb[mMe]={renderer:mM,headless:mM,handler:bR};lb[gMe]={renderer:vte,headless:fMe,handler:Z$e};lb[pMe]={renderer:bH,headless:bH,handler:dMe};lb[yMe]={};function vF(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(lb[e]=t,this):lb[e]}function vMe(e,t,n){const r=[],i=new Ts().union(t),s=e.marktype;return s?bMe(e,i,n,r):s==="group"?_Me(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function bMe(e,t,n,r){if(J9t(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)_Me(i[a],t,n,r);else for(const u=Hl[s].isect;a<o;++a){const l=i[a];wMe(l,t,u)&&r.push(l)}}return r}function J9t(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function _Me(e,t,n,r){n&&n(e.mark)&&wMe(e,t,Hl.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)bMe(i[u],t,n,r);t.translate(o,a)}return r}function wMe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const G9=new Ts;function EMe(e){const t=e.clip;if(_n(t))t(pR(G9.clear()));else if(t)G9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(G9)}const Z9t=1e-9;function bte(e,t,n){return e===t?!0:n==="path"?xMe(e,t):e instanceof Date&&t instanceof Date?+e==+t:lr(e)&&lr(t)?Math.abs(e-t)<=Z9t:!e||!t||!gt(e)&&!gt(t)?e==t:eBt(e,t)}function xMe(e,t){return bte(bx(e),bx(t))}function eBt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!bte(e[i],t[i],i))return!1;return typeof e==typeof t}function tBt(){C$e(),Tjt()}const Ex="top",Sf="left",kf="right",hy="bottom",nBt="top-left",rBt="top-right",iBt="bottom-left",sBt="bottom-right",_te="start",_H="middle",Ma="end",oBt="x",aBt="y",bF="group",wte="axis",Ete="title",uBt="frame",lBt="scope",xte="legend",SMe="row-header",TMe="row-footer",AMe="row-title",CMe="column-header",IMe="column-footer",kMe="column-title",cBt="padding",fBt="symbol",RMe="fit",NMe="fit-x",PMe="fit-y",dBt="pad",Ste="none",bP="all",wH="each",Tte="flush",i0="column",s0="row";function DMe(e){Pe.call(this,null,e)}lt(DMe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Hl[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=_P(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===bF||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(_P(l,o))),r.role){case wte:case xte:case Ete:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(_P(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(_P(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return EMe(r),t.modifies("bounds")}});function _P(e,t,n){return t(e.bounds.clear(),e,n)}const Kpe=":vega_identifier:";function Ate(e){Pe.call(this,0,e)}Ate.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Ate,Pe,{transform(e,t){const n=hBt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function hBt(e){return e._signals[Kpe]||(e._signals[Kpe]=e.add(0))}function OMe(e){Pe.call(this,null,e)}lt(OMe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,pBt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===bF?cF:lF;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function pBt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function $Me(e){Pe.call(this,null,e)}const Xpe={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!MMe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},MMe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Qpe=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(MMe(i,s=e[n].bounds,t))return!0},mBt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},gBt=(e,t,n)=>{var r=e.range(),i=new Ts;return t===Ex||t===hy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Jpe=e=>(e.forEach(t=>t.opacity=1),e),Zpe=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt($Me,Pe,{transform(e,t){const n=Xpe[e.method]||Xpe.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Jpe(i),t=Zpe(t,e)),t;if(i=i.filter(mBt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Jpe(i),t=Zpe(t,e),s.length>=3&&Qpe(s,r)){do s=n(s,r);while(s.length>=3&&Qpe(s,r));s.length<3&&!Qn(i).opacity&&(s.length>1&&(Qn(s).opacity=0),Qn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=gBt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function LMe(e){Pe.call(this,null,e)}lt(LMe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const na=new Ts;function Nw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function yBt(e){var t=e.items[0].orient;return t===Sf||t===kf}function vBt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function bBt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=vBt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&ute(p),v=0,b=0,w,E;switch(na.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case Ex:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&wP(e,p,E,m,y,0,-1,g);break;case Sf:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&wP(e,p,E,m,y,1,-1,g);break;case kf:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&wP(e,p,E,m,y,1,1,g);break;case hy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&wP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return rg(g.translate(v,b),i),Nw(i,"x",v+o)|Nw(i,"y",b+o)&&(i.bounds=na,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function wP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const eme=(e,t)=>Math.floor(Math.min(e,t)),tme=(e,t)=>Math.ceil(Math.max(e,t));function _Bt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===bF)switch(i.role){case wte:case xte:case Ete:break;case SMe:o.rowheaders.push(...s);break;case TMe:o.rowfooters.push(...s);break;case CMe:o.colheaders.push(...s);break;case IMe:o.colfooters.push(...s);break;case AMe:o.rowtitle=s[0];break;case kMe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function wBt(e){return new Ts().set(0,0,e.width||0,e.height||0)}function EBt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function vi(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function nme(e){return e<0?Math.ceil(-e):0}function FMe(e,t,n){var r=!n.nodirty,i=n.bounds===Tte?wBt:EBt,s=na.set(0,0,0,0),o=vi(n.align,i0),a=vi(n.align,s0),u=vi(n.padding,i0),l=vi(n.padding,s0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),T,S,A,C,k,N,O,D,$,F,M;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)N=t[S],k=E[S]=i(N),N.x=N.x||0,b[S]=0,N.y=N.y||0,w[S]=0,A=S%c,C=~~(S/c),m=Math.max(m,O=Math.ceil(k.x2)),v=Math.max(v,D=Math.ceil(k.y2)),p[A]=Math.max(p[A],O),y[C]=Math.max(y[C],D),h[S]=u+nme(k.x1),g[S]=l+nme(k.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===wH)for(A=1;A<c;++A){for(M=0,S=A;S<d;S+=c)M<h[S]&&(M=h[S]);for(S=A;S<d;S+=c)h[S]=M+p[A-1]}else if(o===bP){for(M=0,S=0;S<d;++S)S%c&&M<h[S]&&(M=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=M+m)}else for(o=!1,A=1;A<c;++A)for(S=A;S<d;S+=c)h[S]+=p[A-1];if(a===wH)for(C=1;C<f;++C){for(M=0,S=C*c,T=S+c;S<T;++S)M<g[S]&&(M=g[S]);for(S=C*c;S<T;++S)g[S]=M+y[C-1]}else if(a===bP){for(M=0,S=c;S<d;++S)M<g[S]&&(M=g[S]);for(S=c;S<d;++S)g[S]=M+v}else for(a=!1,C=1;C<f;++C)for(S=C*c,T=S+c;S<T;++S)g[S]+=y[C-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),b[S]+=$-t[S].x;for(A=0;A<c;++A)for(F=0,S=A;S<d;S+=c)F+=g[S],w[S]+=F-t[S].y;if(o&&vi(n.center,i0)&&f>1)for(S=0;S<d;++S)k=o===bP?m:p[S%c],$=k-E[S].x2-t[S].x-b[S],$>0&&(b[S]+=$/2);if(a&&vi(n.center,s0)&&c!==1)for(S=0;S<d;++S)k=a===bP?v:y[~~(S/c)],F=k-E[S].y2-t[S].y-w[S],F>0&&(w[S]+=F/2);for(S=0;S<d;++S)s.union(E[S].translate(b[S],w[S]));switch($=vi(n.anchor,oBt),F=vi(n.anchor,aBt),vi(n.anchor,i0)){case Ma:$-=s.width();break;case _H:$-=s.width()/2}switch(vi(n.anchor,s0)){case Ma:F-=s.height();break;case _H:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)N=t[S],N.x+=b[S]+=$,N.y+=w[S]+=F,s.union(N.mark.bounds.union(N.bounds.translate(b[S],w[S]))),r&&e.dirty(N);return s}function xBt(e,t,n){var r=_Bt(t),i=r.marks,s=n.bounds===Tte?SBt:TBt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=FMe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=vi(n.headerBand,s0,null),c=EP(e,r.rowheaders,i,a,u,-vi(o,"rowHeader"),eme,0,s,"x1",0,a,1,m)),r.colheaders&&(m=vi(n.headerBand,i0,null),f=EP(e,r.colheaders,i,a,a,-vi(o,"columnHeader"),eme,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=vi(n.footerBand,s0,null),d=EP(e,r.rowfooters,i,a,u,vi(o,"rowFooter"),tme,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=vi(n.footerBand,i0,null),h=EP(e,r.colfooters,i,a,a,vi(o,"columnFooter"),tme,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=vi(n.titleAnchor,s0),g=vi(o,"rowTitle"),g=p===Ma?d+g:c-g,m=vi(n.titleBand,s0,.5),rme(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=vi(n.titleAnchor,i0),g=vi(o,"columnTitle"),g=p===Ma?h+g:f-g,m=vi(n.titleBand,i0,.5),rme(e,r.coltitle,g,1,y,m))}function SBt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function TBt(e,t){return e.bounds[t]}function EP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,T,S,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(T=t[v],E=T.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(A=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),C=m):(A=m,C=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(T.bounds.translate(A-(T.x||0),C-(T.y||0))),T.x=A,T.y=C,e.dirty(T),g=o(g,E[l])}return g}function rme(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function ABt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function CBt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function IBt(e,t,n,r,i,s,o){const a=ABt(n,t),u=CBt(e,a("offset",0)),l=a("anchor",_te),c=l===Ma?1:l===_H?.5:0,f={align:wH,bounds:a("bounds",Tte),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Sf:f.anchor={x:Math.floor(r.x1)-u,column:Ma,y:c*(o||r.height()+2*r.y1),row:l};break;case kf:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case Ex:f.anchor={y:Math.floor(i.y1)-u,row:Ma,x:c*(s||i.width()+2*i.x1),column:l};break;case hy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case nBt:f.anchor={x:u,y:u};break;case rBt:f.anchor={x:s-u,y:u,column:Ma};break;case iBt:f.anchor={x:u,y:o-u,row:Ma};break;case sBt:f.anchor={x:s-u,y:o-u,column:Ma,row:Ma};break}return f}function kBt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),NBt(e,n,n.items[0].items[0]),s=RBt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===fBt&&PBt(n.items[0].items[0].items[0].items),i!==Ste&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,rg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function RBt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function NBt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&KT(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Sf:i+=Math.ceil(o.bounds.width())+u;break;case kf:case hy:break;default:s+=o.bounds.height()+u}switch((i||s)&&KT(e,n,i,s),o.orient){case Sf:c+=L_(t,n,o,a,1,1);break;case kf:l+=L_(t,n,o,Ma,0,0)+u,c+=L_(t,n,o,a,1,1);break;case hy:l+=L_(t,n,o,a,0,0),c+=L_(t,n,o,Ma,-1,0,1)+u;break;default:l+=L_(t,n,o,a,0,0)}(l||c)&&KT(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(KT(e,n,-l,0),KT(e,o,-l,0))}}function L_(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:ute(n);return Math.round(r===_te?f:r===Ma?d-h:.5*(c-h))}function KT(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function PBt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function DBt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Sf||a===kf?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==bF?a===Sf?(p=i.y2,h=i.y1):a===kf?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Sf&&(p=r,h=0),b=u===_te?p:u===Ma?h:(p+h)/2,d&&d.text){switch(a){case Ex:case hy:v=f.bounds.height()+c;break;case Sf:y=f.bounds.width()+c;break;case kf:y=-f.bounds.width()-c;break}na.clear().union(d.bounds),na.translate(y-(d.x||0),v-(d.y||0)),Nw(d,"x",y)|Nw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(na),d.mark.bounds.clear().union(na),e.dirty(d)),na.clear().union(d.bounds)}else na.clear();switch(na.union(f.bounds),a){case Ex:m=b,g=i.y1-na.height()-l;break;case Sf:m=i.x1-na.width()-l,g=b;break;case kf:m=i.x2+na.width()+l,g=b;break;case hy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return Nw(s,"x",m)|Nw(s,"y",g)&&(na.translate(m,g),e.dirty(s),s.bounds.clear().union(na),t.bounds.clear().union(na),e.dirty(s)),s.bounds}function jMe(e){Pe.call(this,null,e)}lt(jMe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&xBt(n,r,e.layout),$Bt(n,r,e)}),OBt(e.mark.group)?t.reflow():t}});function OBt(e){return e&&e.mark.role!=="legend-entry"}function $Bt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Ts().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case wte:h=yBt(f)?a:u,h.union(bBt(e,f,i,s));break;case Ete:c=f;break;case xte:l.push(kBt(e,f));break;case uBt:case lBt:case SMe:case TMe:case AMe:case CMe:case IMe:case kMe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||kf,d!==Ste&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];FMe(e,v,IBt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===RMe||n.autosize.type===NMe||n.autosize.type===PMe))switch(y.orient){case Sf:case kf:o.add(v.x1,0).add(v.x2,0);break;case Ex:case hy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(DBt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),MBt(e,t,o,n)}function MBt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===cBt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===Ste?(l=0,f=0,u=o,c=a):s===RMe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===NMe?(u=Math.max(0,o-l-d),a=c+f+h):s===PMe?(o=u+l+d,c=Math.max(0,a-f-h)):s===dBt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const LBt=Object.freeze(Object.defineProperty({__proto__:null,bound:DMe,identifier:Ate,mark:OMe,overlap:$Me,render:LMe,viewlayout:jMe},Symbol.toStringTag,{value:"Module"}));function BMe(e){Pe.call(this,null,e)}lt(BMe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=Hee(s,o,e.minstep),u=e.format||h$e(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?d$e(s,e.values,a):qee(s,a);return i&&(r.rem=i),i=l.map((c,f)=>Er({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(Er({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function UMe(e){Pe.call(this,null,e)}function FBt(){return Er({})}function jBt(e){const t=US().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(UMe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||FBt,s=e.key||Lt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=jBt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function zMe(e){Pe.call(this,null,e)}lt(zMe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||xg,u=i.enter||xg,l=i.exit||xg,c=(s&&!o?i[s]:a)||xg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==xg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==xg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==xg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function VMe(e){Pe.call(this,[],e)}lt(VMe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||UD,o=e.scale,a=+e.limit,u=Hee(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===UD,c=e.format||y$e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||g$e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===UD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,_n(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Ea(m=p||8),i=i.map((y,v)=>Er({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(Er({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===djt?(d=o.domain(),h=l$e(o,d[0],Qn(d)),f.length<3&&!e.values&&d[0]!==Qn(d)&&(f=[d[0],Qn(d)]),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=xjt(o),i=f.map((y,v)=>Er({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const BBt=e=>e.source.x,UBt=e=>e.source.y,zBt=e=>e.target.x,VBt=e=>e.target.y;function Cte(e){Pe.call(this,{},e)}Cte.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(Cte,Pe,{transform(e,t){var n=e.sourceX||BBt,r=e.sourceY||UBt,i=e.targetX||zBt,s=e.targetY||VBt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=ime.get(u+"-"+a)||ime.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const HMe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,HBt=(e,t,n,r)=>HMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),qMe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},qBt=(e,t,n,r)=>qMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),WMe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},WBt=(e,t,n,r)=>WMe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),GBt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,YBt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,KBt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},XBt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},QBt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},JBt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},ime=US({line:HMe,"line-radial":HBt,arc:qMe,"arc-radial":qBt,curve:WMe,"curve-radial":WBt,"orthogonal-horizontal":GBt,"orthogonal-vertical":YBt,"orthogonal-radial":KBt,"diagonal-horizontal":XBt,"diagonal-vertical":QBt,"diagonal-radial":JBt});function Ite(e){Pe.call(this,null,e)}Ite.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Ite,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||FS,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/Fxe(l),h=Du(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const ZBt=5;function eUt(e){const t=e.type;return!e.bins&&(t===gx||t===aR||t===uR)}function GMe(e){return Uee(e)&&e!==gh}const tUt=Xf(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function YMe(e){Pe.call(this,null,e),this.modified(!0)}lt(YMe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=nUt(e);(!r||i!==r.type)&&(this.value=r=gr(i)());for(i in e)if(!tUt[i]){if(i==="padding"&&GMe(r.type))continue;_n(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return uUt(r,e,aUt(r,e,iUt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function nUt(e){var t=e.type,n="",r;return t===gh?gh+"-"+gx:(rUt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?gh+"-":r===3?qS+"-":""),(n+t||gx).toLowerCase())}function rUt(e){const t=e.type;return Uee(t)&&t!==ab&&t!==ub&&(e.scheme||e.range&&e.range.length&&e.range.every(mt))}function iUt(e,t,n){const r=sUt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&eUt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return GMe(s)&&t.padding&&i[0]!==Qn(i)&&(i=oUt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(KMe(s,i,n)),s===Lee&&e.unknown(t.domainImplicit?hz:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&Hee(e,t.nice)||null),i.length}function sUt(e,t,n){return t?(e.domain(KMe(e.type,t,n)),t.length):-1}function oUt(e,t,n,r,i,s){var o=Math.abs(Qn(n)-n[0]),a=o/(o-2*r),u=e===Mm?RZ(t,null,a):e===uR?tM(t,null,a,.5):e===aR?tM(t,null,a,i||1):e===iF?NZ(t,null,a,s||1):kZ(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function KMe(e,t,n){if(i$e(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function aUt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Qn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=Du(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===Fee&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function uUt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=lUt(r,t,n);else if(t.scheme&&(s=cUt(r,t,n),_n(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&s$e(r))return e.interpolator(aF(EH(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(zee(t.interpolate,t.interpolateGamma)):_n(e.round)?e.round(i):_n(e.rangeRound)&&e.interpolate(i?yk:Xm),s&&e.range(EH(s,t.reverse))}function lUt(e,t,n){e!==J3e&&e!==aH&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===aH?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*Mee(n,i,r)]}function cUt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=aF(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=Vee(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===oF?n+1:e===Fee?n-1:e===yx||e===sF?+t.schemeCount||ZBt:n,s$e(e)?sme(s,r,t.reverse):_n(s)?u$e(sme(s,r),n):e===Lee?s:s.slice(0,n)}function sme(e,t,n){return _n(e)&&(t||n)?a$e(e,EH(t||[0,1],n)):e}function EH(e,t){return t?e.slice().reverse():e}function XMe(e){Pe.call(this,null,e)}lt(XMe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(Jb(e.sort)),this.modified(n),t}});const ome="zero",QMe="center",JMe="normalize",ZMe=["y0","y1"];function kte(e){Pe.call(this,null,e)}kte.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:ome,values:[ome,QMe,JMe]},{name:"as",type:"string",array:!0,length:2,default:ZMe}]};lt(kte,Pe,{transform(e,t){var n=e.as||ZMe,r=n[0],i=n[1],s=Jb(e.sort),o=e.field||FS,a=e.offset===QMe?fUt:e.offset===JMe?dUt:hUt,u,l,c,f;for(u=pUt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function fUt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function dUt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function hUt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function pUt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const mUt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:BMe,datajoin:UMe,encode:zMe,legendentries:VMe,linkpath:Cte,pie:Ite,scale:YMe,sortitems:XMe,stack:kte},Symbol.toStringTag,{value:"Module"}));var gUt=Math.abs,xH=Math.cos,vM=Math.sin,yUt=1e-6,eLe=Math.PI,SH=eLe/2,ame=vUt(2);function ume(e){return e>1?SH:e<-1?-SH:Math.asin(e)}function vUt(e){return e>0?Math.sqrt(e):0}function bUt(e,t){var n=e*vM(t),r=30,i;do t-=i=(t+vM(t)-n)/(1+xH(t));while(gUt(i)>yUt&&--r>0);return t/2}function _Ut(e,t,n){function r(i,s){return[e*i*xH(s=bUt(n,s)),t*vM(s)]}return r.invert=function(i,s){return s=ume(s/t),[i/(e*xH(s)),ume((2*s+vM(2*s))/n)]},r}var wUt=_Ut(ame/SH,ame,eLe);function EUt(){return Yh(wUt).scale(169.529)}const xUt=hTe(),TH=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function SUt(e,t){return function n(){const r=t();return r.type=e,r.path=hTe().projection(r),r.copy=r.copy||function(){const i=n();return TH.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},n$e(r)}}function Rte(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(bM[e]=SUt(e,t),this):bM[e]||null}function tLe(e){return e&&e.path||xUt}const bM={albers:mTe,albersusa:Pht,azimuthalequalarea:Dht,azimuthalequidistant:Oht,conicconformal:Lht,conicequalarea:O3,conicequidistant:Bht,equalEarth:zht,equirectangular:Fht,gnomonic:Vht,identity:Hht,mercator:$ht,mollweide:EUt,naturalEarth1:qht,orthographic:Wht,stereographic:Ght,transversemercator:Yht};for(const e in bM)Rte(e,bM[e]);function TUt(){}const vp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function nLe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),AUt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(CUt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,vp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,vp[m|g<<1].forEach(b);for(vp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,vp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,vp[m|g<<1|y<<2|v<<3].forEach(b);vp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,vp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,vp[y<<2|v<<3].forEach(b);vp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],S=o(E),A=o(T),C,k;(C=d[S])?(k=f[A])?(delete d[C.end],delete f[k.start],C===k?(C.ring.push(T),c(C.ring)):f[C.start]=d[k.end]={start:C.start,end:k.end,ring:C.ring.concat(k.ring)}):(delete d[C.end],C.ring.push(T),d[C.end=A]=C):(C=f[A])?(k=d[S])?(delete f[C.start],delete d[k.end],C===k?(C.ring.push(T),c(C.ring)):f[k.start]=d[C.end]={start:k.start,end:C.end,ring:k.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=S]=C):f[S]=d[A]={start:S,end:A,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:TUt,r):n===a},r}function AUt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function CUt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=IUt(e,t[n]))return i;return 0}function IUt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(kUt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function kUt(e,t,n){var r;return RUt(e,t,n)&&NUt(e[r=+(e[0]===t[0])],n[r],t[r])}function RUt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function NUt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function rLe(e,t,n){return function(r){var i=Dh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?V0(s,o,e):a/(e+1);return Du(s+u,o,u)}}function Nte(e){Pe.call(this,null,e)}Nte.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Nte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||wa,s=nLe().smooth(e.smooth!==!1),o=e.thresholds||PUt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));DUt(f,c,l,e),f.forEach(d=>{u.push(K4(l,Er(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function PUt(e,t,n){const r=rLe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>_0(t(i).values)))}function DUt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(_n(i)&&(i=i(n,r)),_n(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(lr(i)?i:i[0])||1,a=(lr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(iLe(t,o,a,u,l))}function iLe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function lme(e,t,n){const r=e>=0?e:XZ(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function Y9(e){return _n(e)?e:Ea(+e)}function sLe(){var e=u=>u[0],t=u=>u[1],n=FS,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=lme(r[0],u,e)>>o,f=lme(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),T=h+(+t(w)>>o);E>=0&&E<p&&T>=0&&T<m&&(g[E+T*p]+=+n(w))}),c>0&&f>0?(F_(p,m,g,y,c),j_(p,m,y,g,f),F_(p,m,g,y,c),j_(p,m,y,g,f),F_(p,m,g,y,c),j_(p,m,y,g,f)):c>0?(F_(p,m,g,y,c),F_(p,m,y,g,c),F_(p,m,g,y,c),v=y):f>0&&(j_(p,m,g,y,f),j_(p,m,y,g,f),j_(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/Fxe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=Y9(u),a):e},a.y=function(u){return arguments.length?(t=Y9(u),a):t},a.weight=function(u){return arguments.length?(n=Y9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function F_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function j_(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Pte(e){Pe.call(this,null,e)}Pte.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const OUt=["x","y","weight","size","cellSize","bandwidth"];function oLe(e,t){return OUt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Pte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=$Ut(r,e.groupby),s=(e.groupby||[]).map(Xi),o=oLe(sLe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>Er(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function $Ut(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Dte(e){Pe.call(this,null,e)}Dte.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Dte,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=nLe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||rLe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=oLe(sLe(),e)(i,!0),u=iLe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(Er),n}});const AH="Feature",Ote="FeatureCollection",MUt="MultiPoint";function $te(e){Pe.call(this,null,e)}$te.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt($te,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&wa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(pa(a))||s&&t.modified(pa(s))||o&&t.modified(pa(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:AH,geometry:{type:MUt,coordinates:r}})),this.value={type:Ote,features:n}}});function Mte(e){Pe.call(this,null,e)}Mte.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(Mte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||wa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=tLe(e.projection),n.materialize().reflow()):o=i===wa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=LUt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function LUt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function Lte(e){Pe.call(this,null,e)}Lte.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(Lte,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function Fte(e){Pe.call(this,null,e)}Fte.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(Fte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=FUt(tLe(e.projection),e.field||Dc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function FUt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function jte(e){Pe.call(this,[],e),this.generator=fht()}jte.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(jte,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)_n(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(o3e(n[0],i)):t.add.push(Er(i)),n[0]=i,t}});function Bte(e){Pe.call(this,null,e)}Bte.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(Bte,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||wa,s=BUt(e.opacity,e),o=jUt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?_0(n.map(l=>_0(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=bn({},l,u);r||(f.$max=_0(c.values||[])),l[a]=UUt(c,f,o.dep?o:Ea(o(f)),s.dep?s:Ea(s(f)))}),t.reflow(!0).modifies(a)}});function jUt(e,t){let n;return _n(e)?(n=r=>H0(e(r,t)),n.dep=aLe(e)):n=Ea(H0(e||"#888")),n}function BUt(e,t){let n;return _n(e)?(n=r=>e(r,t),n.dep=aLe(e)):e?n=Ea(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function aLe(e){if(!_n(e))return!1;const t=Xf(pa(e));return t.$x||t.$y||t.$value||t.$max}function UUt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:qg,d=N0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function uLe(e){Pe.call(this,null,e),this.modified(!0)}lt(uLe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=VUt(e.type),TH.forEach(r=>{e[r]!=null&&cme(n,r,e[r])})):TH.forEach(r=>{e.modified(r)&&cme(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&zUt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function zUt(e,t){const n=HUt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function VUt(e){const t=Rte((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function cme(e,t,n){_n(e[t])&&e[t](n)}function HUt(e){return e=pt(e),e.length===1?e[0]:{type:Ote,features:e.reduce((t,n)=>t.concat(qUt(n)),[])}}function qUt(e){return e.type===Ote?e.features:pt(e).filter(t=>t!=null).map(t=>t.type===AH?t:{type:AH,geometry:t})}const WUt=Object.freeze(Object.defineProperty({__proto__:null,contour:Dte,geojson:$te,geopath:Mte,geopoint:Lte,geoshape:Fte,graticule:jte,heatmap:Bte,isocontour:Nte,kde2d:Pte,projection:uLe},Symbol.toStringTag,{value:"Module"})),fme={center:tdt,collide:_dt,nbody:Ndt,link:Edt,x:Pdt,y:Ddt},Y2="forces",CH=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],GUt=["static","iterations"],lLe=["x","y","vx","vy"];function Ute(e){Pe.call(this,null,e)}Ute.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:lLe}]};lt(Ute,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(CH),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&cLe(n,e,0,t)):(this.value=n=KUt(t.source,e),n.on("tick",YUt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(GUt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==Y2||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(lLe)}});function YUt(e,t){return()=>e.touch(t).run()}function KUt(e,t){const n=Rdt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),cLe(n,t,!0).on("end",()=>s=!0)}function cLe(e,t,n,r){var i=pt(t.forces),s,o,a,u;for(s=0,o=CH.length;s<o;++s)a=CH[s],a!==Y2&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=Y2+s,a=n||t.modified(Y2,s)?QUt(i[s]):r&&XUt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(Y2+s,null);return e.numForces=i.length,e}function XUt(e,t){var n,r;for(n in e)if(_n(r=e[n])&&t.modified(pa(r)))return 1;return 0}function QUt(e){var t,n;jt(fme,e.force)||Le("Unrecognized force: "+e.force),t=fme[e.force]();for(n in e)_n(t[n])&&JUt(t[n],e[n],e);return t}function JUt(e,t,n){e(_n(t)?r=>t(r,n):t)}const ZUt=Object.freeze(Object.defineProperty({__proto__:null,force:Ute},Symbol.toStringTag,{value:"Module"}));function IH(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function zte(e){Pe.call(this,null,e)}zte.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const e7t=e=>e.values;lt(zte,Pe,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&Y4(o.data)&&i.rem.push(o.data)}),this.value=s=E6({values:pt(e.keys).reduce((o,a)=>(o.key(a),o),t7t()).entries(i.source)},e7t),n&&s.each(o=>{o.children&&(o=Er(o.data),i.add.push(o),i.source.push(o))}),IH(s,Lt,Lt)),i.source.root=s,i}});function t7t(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function ig(e){Pe.call(this,null,e)}const n7t=(e,t)=>e.parent===t.parent?1:2;lt(ig,Pe,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(Jb(e.sort,o=>o.data)),r7t(n,this.params,e),n.separation&&n.separation(e.separation!==!1?n7t:FS);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>i7t(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function r7t(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function i7t(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const kH=["x","y","r","depth","children"];function Vte(e){ig.call(this,e)}Vte.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:kH.length,default:kH}]};lt(Vte,ig,{layout:RTe,params:["radius","size","padding"],fields:kH});const RH=["x0","y0","x1","y1","depth","children"];function Hte(e){ig.call(this,e)}Hte.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:RH.length,default:RH}]};lt(Hte,ig,{layout:Dpt,params:["size","round","padding"],fields:RH});function qte(e){Pe.call(this,null,e)}qte.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(qte,Pe,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?IH(Wle().id(e.key).parentId(e.parentKey)(i.source),e.key,Oc):IH(Wle()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const dme={tidy:Vpt,cluster:npt},NH=["x","y","depth","children"];function Wte(e){ig.call(this,e)}Wte.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:NH.length,default:NH}]};lt(Wte,ig,{layout(e){const t=e||"tidy";if(jt(dme,t))return dme[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:NH});function Gte(e){Pe.call(this,[],e)}Gte.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(Gte,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Lt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Lt(a)]&&s[Lt(u)]&&i.add.push(Er({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Lt(o)]=1),n.forEach(o=>{(s[Lt(o.source)]||s[Lt(o.target)])&&i.mod.push(o)})),i}});const hme={binary:qpt,dice:wk,slice:x6,slicedice:Wpt,squarify:OTe,resquarify:Gpt},PH=["x0","y0","x1","y1","depth","children"];function Yte(e){ig.call(this,e)}Yte.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:PH.length,default:PH}]};lt(Yte,ig,{layout(){const e=Hpt();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(hme,t)?e.tile(hme[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:PH});const s7t=Object.freeze(Object.defineProperty({__proto__:null,nest:zte,pack:Vte,partition:Hte,stratify:qte,tree:Wte,treelinks:Gte,treemap:Yte},Symbol.toStringTag,{value:"Module"})),K9=4278190080;function o7t(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function a7t(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=N0(s,o).getContext("2d"),l=N0(s,o).getContext("2d"),c=a&&N0(s,o).getContext("2d");n.forEach(A=>XD(u,A,!1)),XD(l,t,!1),a&&XD(c,t,!0);const f=X9(u,s,o),d=X9(l,s,o),h=a&&X9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,T,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&K9,S=d[w]&K9,T=a&&h[w]&K9,(E||T||S)&&(v=e(g),b=e(y),!i&&(E||S)&&p.set(v,b),a&&(E||T)&&m.set(v,b));return[p,m]}function X9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function XD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>XD(e,s.items,n))}):Hl[r].draw(e,{items:n?t.map(u7t):t})}function u7t(e){const t=K4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const bp=5,Pa=31,kI=32,Og=new Uint32Array(kI+1),vf=new Uint32Array(kI+1);vf[0]=0;Og[0]=~vf[0];for(let e=1;e<=kI;++e)vf[e]=vf[e-1]<<1|1,Og[e]=~vf[e];function l7t(e,t){const n=new Uint32Array(~~((e*t+kI)/kI));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>bp]&1<<(a&Pa)},set:(s,o)=>{const a=o*e+s;r(a>>>bp,1<<(a&Pa))},clear:(s,o)=>{const a=o*e+s;i(a>>>bp,~(1<<(a&Pa)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>bp,h=f>>>bp,d===h){if(n[d]&Og[c&Pa]&vf[(f&Pa)+1])return!0}else{if(n[d]&Og[c&Pa]||n[h]&vf[(f&Pa)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>bp,d=c>>>bp,f===d)r(f,Og[l&Pa]&vf[(c&Pa)+1]);else for(r(f,Og[l&Pa]),r(d,vf[(c&Pa)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>bp,d=c>>>bp,f===d)i(f,vf[l&Pa]|Og[(c&Pa)+1]);else for(i(f,vf[l&Pa]),i(d,Og[(c&Pa)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function c7t(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>l7t(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function f7t(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Rl.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function _M(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function o0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function d7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!_M(p,m,d,h,i,s)&&!o0(e,p,m,h,d,g,o,a)&&!o0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,o0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rl.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,T,S,A,C,k,N,O,D,$,F,M,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),k=e(v),O=e(b),N=~~((k+O)/2),D=e(w),F=e(E),$=~~((D+F)/2),A=N;A>=k;--A)for(C=$;C>=D;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=N;A<=O;++A)for(C=$;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(b-v+E-w),T=(v+b)/2,S=(w+E)/2,M>=y&&!_M(T,S,h,d,i,s)&&!o0(e,T,S,d,h,d,o,null)&&(y=M,l.x=T,l.y=S,g=!0))}return m||g?(T=h/2,S=d/2,o.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const h7t=[-1,-1,1,1],p7t=[-1,1,-1,1];function m7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Rl.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,T,S,A,C,k,N,O,D,$;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,T=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+T)/2)]);p.length;)if([C,k]=p.pop(),!(o.get(C,k)||a.get(C,k)||u.get(C,k))){u.set(C,k);for(let M=0;M<4;++M)S=C+h7t[M],A=k+p7t[M],u.outOfBounds(S,A,S,A)||p.push([S,A]);if(S=e.invert(C),A=e.invert(k),N=m,O=s,!_M(S,A,h,d,i,s)&&!o0(e,S,A,d,h,N,o,a)&&!o0(e,S,A,d,h,d,o,null)){for(;O-N>=1;)D=(N+O)/2,o0(e,S,A,d,h,D,o,a)?O=D:N=D;N>m&&(l.x=S,l.y=A,m=N,g=!0)}}!g&&!n&&($=Math.abs(w-b+T-E),S=(b+w)/2,A=(E+T)/2,$>=v&&!_M(S,A,h,d,i,s)&&!o0(e,S,A,d,h,d,o,null)&&(v=$,l.x=S,l.y=A,y=!0))}return g||y?(S=h/2,A=d/2,o.setRange(e(l.x-S),e(l.y-A),e(l.x+S),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const g7t=["right","center","left"],y7t=["bottom","middle","top"];function v7t(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,T,S,A,C,k,N;for(let O=0;O<u;++O){if(h=(n[O]&3)-1,p=(n[O]>>>2&3)-1,m=h===0&&p===0||r[O]<0,g=h&&p?Math.SQRT1_2:1,y=r[O]<0?-1:1,v=c[1+h]+r[O]*h*g,S=c[4+p]+y*f*p/2+r[O]*p*g,w=S-f/2,E=S+f/2,A=e(v),k=e(w),N=e(E),!d)if(pme(A,A,k,N,o,a,v,v,w,E,c,m))d=Rl.width(l.datum,l.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,b=T+d/2,A=e(v),C=e(b),pme(A,C,k,N,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:T,l.y=p?p*y<0?E:w:S,l.align=g7t[h*y+1],l.baseline=y7t[p*y+1],o.setRange(A,k,C,N),!0}return!1}}function pme(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const Q9=0,J9=4,Z9=8,eB=0,tB=1,nB=2,b7t={"top-left":Q9+eB,top:Q9+tB,"top-right":Q9+nB,left:J9+eB,middle:J9+tB,right:J9+nB,"bottom-left":Z9+eB,bottom:Z9+tB,"bottom-right":Z9+nB},_7t={naive:f7t,"reduced-search":d7t,floodfill:m7t};function w7t(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=E7t(r,f),h=x7t(i,f),p=S7t(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=T7t(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const T=e.map(k=>{const N=v?Rl.width(k,k.text):void 0;return w=Math.max(w,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const S=c7t(t[0],t[1],l);let A;if(!b){n&&T.sort((O,D)=>n(O.datum,D.datum));let k=!1;for(let O=0;O<h.length&&!k;++O)k=h[O]===5||d[O]<0;const N=(p&&o||g)&&e.map(O=>O.datum);A=s.length||N?a7t(S,N||[],s,k,g):o7t(S,o&&T)}const C=g?_7t[c](S,A,o,u):v7t(S,A,h,d);return T.forEach(k=>k.opacity=+C(k)),T}function E7t(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function x7t(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=b7t[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function S7t(e){return e&&e.mark&&e.mark.marktype}function T7t(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const DH=["x","y","opacity","align","baseline"],fLe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function Kte(e){Pe.call(this,null,e)}Kte.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:fLe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:DH.length,default:DH}]};lt(Kte,Pe,{transform(e,t){function n(s){const o=e[s];return _n(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||DH;return w7t(t.materialize(t.SOURCE).source||[],e.size,e.sort,pt(e.offset==null?1:e.offset),pt(e.anchor||fLe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const A7t=Object.freeze(Object.defineProperty({__proto__:null,label:Kte},Symbol.toStringTag,{value:"Module"}));function dLe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Xte(e){Pe.call(this,null,e)}Xte.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(Xte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=dLe(r,e.groupby),s=(e.groupby||[]).map(Xi),o=s.length,a=e.as||[Xi(e.x),Xi(e.y)],u=[];i.forEach(l=>{S3e(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(Er(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const OH={constant:uee,linear:lee,log:_3e,exp:w3e,pow:E3e,quad:cee,poly:x3e},C7t=(e,t)=>e==="poly"?t:e==="quad"?2:1;function Qte(e){Pe.call(this,null,e)}Qte.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(OH)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(Qte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=dLe(r,e.groupby),s=(e.groupby||[]).map(Xi),o=e.method||"linear",a=e.order==null?3:e.order,u=C7t(o,a),l=e.as||[Xi(e.x),Xi(e.y)],c=OH[o],f=[];let d=e.extent;jt(OH,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(Er({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Dh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(Er(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):nF(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const I7t=Object.freeze(Object.defineProperty({__proto__:null,loess:Xte,regression:Qte},Symbol.toStringTag,{value:"Module"}));function Jte(e){Pe.call(this,null,e)}Jte.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const k7t=[-1e5,-1e5,1e5,1e5];lt(Jte,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:k7t;const s=this.value=dK.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!N7t(u)?R7t(u):null}return t.reflow(e.modified()).modifies(n)}});function R7t(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function N7t(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const P7t=Object.freeze(Object.defineProperty({__proto__:null,voronoi:Jte},Symbol.toStringTag,{value:"Module"}));var rB=Math.PI/180,K2=64,QD=2048;function D7t(){var e=[256,256],t,n,r,i,s,o,a,u=hLe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(N0()),m=j7t((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,S)=>S.size-T.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,O7t(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?M7t(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(K2<<5)/m,p.height=QD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,T=-E,S,A,C;(S=w(T+=E))&&(A=~~S[0],C=~~S[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!$7t(m,p,e[0]))&&(!g||L7t(m,g))){for(var k=m.sprite,N=m.width>>5,O=e[0]>>5,D=m.x-(N<<4),$=D&127,F=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*O+(D>>5),U,H=0;H<M;H++){U=0;for(var P=0;P<=N;P++)p[B+P]|=U<<F|(P<N?(U=k[H*N+P])>>>$:0);B+=O}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=cv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=cv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=cv(p),f):s},f.rotate=function(p){return arguments.length?(o=cv(p),f):o},f.text=function(p){return arguments.length?(t=cv(p),f):t},f.spiral=function(p){return arguments.length?(u=B7t[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=cv(p),f):r},f.padding=function(p){return arguments.length?(a=cv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function O7t(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(K2<<5)/s,QD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*rB),g=Math.cos(t.rotate*rB),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=K2<<5&&(o=0,a+=u,u=0),a+d>=QD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*rB),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(K2<<5)/s,QD/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),k=E[(a+p)*(K2<<5)+(o+h)<<2]?1<<31-h%32:0;T[C]|=k,S|=k}S?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function $7t(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function M7t(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function L7t(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function hLe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function F7t(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function j7t(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function cv(e){return typeof e=="function"?e:function(){return e}}var B7t={archimedean:hLe,rectangular:F7t};const pLe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],U7t=["text","font","rotate","fontSize","fontStyle","fontWeight"];function Zte(e){Pe.call(this,D7t(),e)}Zte.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:pLe}]};lt(Zte,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return _n(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||U7t.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||pLe;let a=e.fontSize||14,u;if(_n(a)?u=e.fontSizeRange:a=Ea(a),u){const p=a,m=gr("sqrt")().domain(Dh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(Mc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const z7t=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:Zte},Symbol.toStringTag,{value:"Module"})),V7t=e=>new Uint8Array(e),H7t=e=>new Uint16Array(e),YA=e=>new Uint32Array(e);function q7t(){let e=8,t=[],n=YA(0),r=xP(0,e),i=xP(0,e);return{data:()=>t,seen:()=>n=W7t(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=xP(s,e,r),i=xP(s,e))}}}function W7t(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function xP(e,t,n){const r=(t<257?V7t:t<65537?H7t:YA)(e);return n&&r.set(n),r}function mme(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function gme(){let e=YA(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=YA(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=G7t(h,d),c)p=t,m=e,t=Array(c+f),e=YA(c+f),Y7t(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[_at(u,a[0],0,l),z0(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function G7t(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),xat(e,t)}function Y7t(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function ene(e){Pe.call(this,q7t(),e),this._indices=null,this._dims=null}ene.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(ene,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=gme()),s.push(mme(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,T,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,T=v.length;E<T;++E)w[v[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=gme(),p[y]=m=g.insert(S,t.source,0)),o[E]=mme(g,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function tne(e){Pe.call(this,null,e)}tne.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(tne,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const K7t=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:ene,resolvefilter:tne},Symbol.toStringTag,{value:"Module"})),X7t="RawCode",cb="Literal",Q7t="Property",J7t="Identifier",Z7t="ArrayExpression",ezt="BinaryExpression",mLe="CallExpression",tzt="ConditionalExpression",nzt="LogicalExpression",rzt="MemberExpression",izt="ObjectExpression",szt="UnaryExpression";function od(e){this.type=e}od.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=ozt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function ozt(e){switch(e.type){case Z7t:return e.elements;case ezt:case nzt:return[e.left,e.right];case mLe:return[e.callee].concat(e.arguments);case tzt:return[e.test,e.consequent,e.alternate];case rzt:return[e.object,e.property];case izt:return e.properties;case Q7t:return[e.key,e.value];case szt:return[e.argument];case J7t:case cb:case X7t:default:return[]}}var tp,kt,$e,ga,Dr,_F=1,_R=2,fb=3,qy=4,wF=5,t_=6,Eu=7,wR=8,azt=9;tp={};tp[_F]="Boolean";tp[_R]="<end>";tp[fb]="Identifier";tp[qy]="Keyword";tp[wF]="Null";tp[t_]="Numeric";tp[Eu]="Punctuator";tp[wR]="String";tp[azt]="RegularExpression";var uzt="ArrayExpression",lzt="BinaryExpression",czt="CallExpression",fzt="ConditionalExpression",gLe="Identifier",dzt="Literal",hzt="LogicalExpression",pzt="MemberExpression",mzt="ObjectExpression",gzt="Property",yzt="UnaryExpression",io="Unexpected token %0",vzt="Unexpected number",bzt="Unexpected string",_zt="Unexpected identifier",wzt="Unexpected reserved word",Ezt="Unexpected end of input",$H="Invalid regular expression",iB="Invalid regular expression: missing /",yLe="Octal literals are not allowed in strict mode.",xzt="Duplicate data property in object literal not allowed in strict mode",ko="ILLEGAL",RI="Disabled.",Szt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),Tzt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function EF(e,t){if(!e)throw new Error("ASSERT: "+t)}function Np(e){return e>=48&&e<=57}function nne(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function KA(e){return"01234567".indexOf(e)>=0}function Azt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function NI(e){return e===10||e===13||e===8232||e===8233}function ER(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&Szt.test(String.fromCharCode(e))}function wM(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&Tzt.test(String.fromCharCode(e))}const Czt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function vLe(){for(;$e<ga;){const e=kt.charCodeAt($e);if(Azt(e)||NI(e))++$e;else break}}function MH(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<ga&&nne(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):pr({},io,ko);return String.fromCharCode(i)}function Izt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&pr({},io,ko);$e<ga&&(e=kt[$e++],!!nne(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&pr({},io,ko),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function bLe(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&pr({},io,ko),++$e,e=MH("u"),(!e||e==="\\"||!ER(e.charCodeAt(0)))&&pr({},io,ko),t=e);$e<ga&&(e=kt.charCodeAt($e),!!wM(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&pr({},io,ko),++$e,e=MH("u"),(!e||e==="\\"||!wM(e.charCodeAt(0)))&&pr({},io,ko),t+=e);return t}function kzt(){var e,t;for(e=$e++;$e<ga;){if(t=kt.charCodeAt($e),t===92)return $e=e,bLe();if(wM(t))++$e;else break}return kt.slice(e,$e)}function Rzt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?bLe():kzt(),t.length===1?n=fb:Czt.hasOwnProperty(t)?n=qy:t==="null"?n=wF:t==="true"||t==="false"?n=_F:n=fb,{type:n,value:t,start:e,end:$e}}function sB(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Eu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Eu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Eu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Eu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Eu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Eu,value:i,start:e,end:$e};if(i==="//"&&pr({},io,ko),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Eu,value:r,start:e,end:$e};pr({},io,ko)}function Nzt(e){let t="";for(;$e<ga&&nne(kt[$e]);)t+=kt[$e++];return t.length===0&&pr({},io,ko),ER(kt.charCodeAt($e))&&pr({},io,ko),{type:t_,value:parseInt("0x"+t,16),start:e,end:$e}}function Pzt(e){let t="0"+kt[$e++];for(;$e<ga&&KA(kt[$e]);)t+=kt[$e++];return(ER(kt.charCodeAt($e))||Np(kt.charCodeAt($e)))&&pr({},io,ko),{type:t_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function yme(){var e,t,n;if(n=kt[$e],EF(Np(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,Nzt(t);if(KA(n))return Pzt(t);n&&Np(n.charCodeAt(0))&&pr({},io,ko)}for(;Np(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Np(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Np(kt.charCodeAt($e)))for(;Np(kt.charCodeAt($e));)e+=kt[$e++];else pr({},io,ko);return ER(kt.charCodeAt($e))&&pr({},io,ko),{type:t_,value:parseFloat(e),start:t,end:$e}}function Dzt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],EF(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<ga;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!NI(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=Izt()):e+=MH(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:KA(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<ga&&KA(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<ga&&KA(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(NI(r.charCodeAt(0)))break;e+=r}return t!==""&&pr({},io,ko),{type:wR,value:e,octal:s,start:n,end:$e}}function Ozt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";pr({},$H)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{pr({},$H)}try{return new RegExp(e,t)}catch{return null}}function $zt(){var e,t,n,r,i;for(e=kt[$e],EF(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<ga;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],NI(e.charCodeAt(0))&&pr({},iB),t+=e;else if(NI(e.charCodeAt(0)))pr({},iB);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||pr({},iB),i=t.substr(1,t.length-2),{value:i,literal:t}}function Mzt(){var e,t,n;for(t="",n="";$e<ga&&(e=kt[$e],!!wM(e.charCodeAt(0)));)++$e,e==="\\"&&$e<ga?pr({},io,ko):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&pr({},$H,n),{value:n,literal:t}}function Lzt(){var e,t,n,r;return Dr=null,vLe(),e=$e,t=$zt(),n=Mzt(),r=Ozt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function Fzt(e){return e.type===fb||e.type===qy||e.type===_F||e.type===wF}function _Le(){if(vLe(),$e>=ga)return{type:_R,start:$e,end:$e};const e=kt.charCodeAt($e);return ER(e)?Rzt():e===40||e===41||e===59?sB():e===39||e===34?Dzt():e===46?Np(kt.charCodeAt($e+1))?yme():sB():Np(e)?yme():sB()}function Ru(){const e=Dr;return $e=e.end,Dr=_Le(),$e=e.end,e}function wLe(){const e=$e;Dr=_Le(),$e=e}function jzt(e){const t=new od(uzt);return t.elements=e,t}function vme(e,t,n){const r=new od(e==="||"||e==="&&"?hzt:lzt);return r.operator=e,r.left=t,r.right=n,r}function Bzt(e,t){const n=new od(czt);return n.callee=e,n.arguments=t,n}function Uzt(e,t,n){const r=new od(fzt);return r.test=e,r.consequent=t,r.alternate=n,r}function rne(e){const t=new od(gLe);return t.name=e,t}function X2(e){const t=new od(dzt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function bme(e,t,n){const r=new od(pzt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function zzt(e){const t=new od(mzt);return t.properties=e,t}function _me(e,t,n){const r=new od(gzt);return r.key=t,r.value=n,r.kind=e,r}function Vzt(e,t){const n=new od(yzt);return n.operator=e,n.argument=t,n.prefix=!0,n}function pr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(EF(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function xF(e){e.type===_R&&pr(e,Ezt),e.type===t_&&pr(e,vzt),e.type===wR&&pr(e,bzt),e.type===fb&&pr(e,_zt),e.type===qy&&pr(e,wzt),pr(e,io,e.value)}function ya(e){const t=Ru();(t.type!==Eu||t.value!==e)&&xF(t)}function li(e){return Dr.type===Eu&&Dr.value===e}function oB(e){return Dr.type===qy&&Dr.value===e}function Hzt(){const e=[];for($e=Dr.start,ya("[");!li("]");)li(",")?(Ru(),e.push(null)):(e.push(db()),li("]")||ya(","));return Ru(),jzt(e)}function wme(){$e=Dr.start;const e=Ru();return e.type===wR||e.type===t_?(e.octal&&pr(e,yLe),X2(e)):rne(e.value)}function qzt(){var e,t,n,r;if($e=Dr.start,e=Dr,e.type===fb)return n=wme(),ya(":"),r=db(),_me("init",n,r);if(e.type===_R||e.type===Eu)xF(e);else return t=wme(),ya(":"),r=db(),_me("init",t,r)}function Wzt(){var e=[],t,n,r,i={},s=String;for($e=Dr.start,ya("{");!li("}");)t=qzt(),t.key.type===gLe?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?pr({},xzt):i[r]=!0,e.push(t),li("}")||ya(",");return ya("}"),zzt(e)}function Gzt(){ya("(");const e=ine();return ya(")"),e}const Yzt={if:1};function Kzt(){var e,t,n;if(li("("))return Gzt();if(li("["))return Hzt();if(li("{"))return Wzt();if(e=Dr.type,$e=Dr.start,e===fb||Yzt[Dr.value])n=rne(Ru().value);else if(e===wR||e===t_)Dr.octal&&pr(Dr,yLe),n=X2(Ru());else{if(e===qy)throw new Error(RI);e===_F?(t=Ru(),t.value=t.value==="true",n=X2(t)):e===wF?(t=Ru(),t.value=null,n=X2(t)):li("/")||li("/=")?(n=X2(Lzt()),wLe()):xF(Ru())}return n}function Xzt(){const e=[];if(ya("("),!li(")"))for(;$e<ga&&(e.push(db()),!li(")"));)ya(",");return ya(")"),e}function Qzt(){$e=Dr.start;const e=Ru();return Fzt(e)||xF(e),rne(e.value)}function Jzt(){return ya("."),Qzt()}function Zzt(){ya("[");const e=ine();return ya("]"),e}function eVt(){var e,t,n;for(e=Kzt();;)if(li("."))n=Jzt(),e=bme(".",e,n);else if(li("("))t=Xzt(),e=Bzt(e,t);else if(li("["))n=Zzt(),e=bme("[",e,n);else break;return e}function Eme(){const e=eVt();if(Dr.type===Eu&&(li("++")||li("--")))throw new Error(RI);return e}function JD(){var e,t;if(Dr.type!==Eu&&Dr.type!==qy)t=Eme();else{if(li("++")||li("--"))throw new Error(RI);if(li("+")||li("-")||li("~")||li("!"))e=Ru(),t=JD(),t=Vzt(e.value,t);else{if(oB("delete")||oB("void")||oB("typeof"))throw new Error(RI);t=Eme()}}return t}function xme(e){let t=0;if(e.type!==Eu&&e.type!==qy)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function tVt(){var e,t,n,r,i,s,o,a,u,l;if(e=Dr,u=JD(),r=Dr,i=xme(r),i===0)return u;for(r.prec=i,Ru(),t=[e,Dr],o=JD(),s=[u,r,o];(i=xme(Dr))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=vme(a,u,o),s.push(n);r=Ru(),r.prec=i,s.push(r),t.push(Dr),n=JD(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=vme(s[l-1].value,s[l-2],n),l-=2;return n}function db(){var e,t,n;return e=tVt(),li("?")&&(Ru(),t=db(),ya(":"),n=db(),e=Uzt(e,t,n)),e}function ine(){const e=db();if(li(","))throw new Error(RI);return e}function sne(e){kt=e,$e=0,ga=kt.length,Dr=null,wLe();const t=ine();if(Dr.type!==_R)throw new Error("Unexpect token after expression.");return t}var ELe={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function xLe(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function nVt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function SLe(e){e=e||{};const t=e.allowed?Xf(e.allowed):{},n=e.forbidden?Xf(e.forbidden):{},r=e.constants||ELe,i=(e.functions||xLe)(f),s=e.globalvar,o=e.fieldvar,a=_n(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(mt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Le("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[nVt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),_n(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const Sme=Symbol("vega_selection_getter");function TLe(e){return(!e.getter||!e.getter[Sme])&&(e.getter=Dc(e.field),e.getter[Sme]=!0),e.getter}const one="intersect",Tme="union",rVt="vlMulti",iVt="vlPoint",Ame="or",sVt="and",Od="_vgsid_",PI=Dc(Od),oVt="E",aVt="R",uVt="R-E",lVt="R-LE",cVt="R-RE",EM="index:unit";function Cme(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=TLe(a)(e),k0(o)&&(o=fa(o)),k0(r[s])&&(r[s]=fa(r[s])),je(r[s])&&k0(r[s][0])&&(r[s]=r[s].map(fa)),a.type===oVt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===aVt){if(!kw(o,r[s]))return!1}else if(a.type===cVt){if(!kw(o,r[s],!0,!1))return!1}else if(a.type===uVt){if(!kw(o,r[s],!1,!1))return!1}else if(a.type===lVt&&!kw(o,r[s],!1,!0))return!1;return!0}function fVt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[EM]&&r[EM].value:void 0,o=n===one,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=Cme(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=Cme(t,l),o^h)return h;return a&&o}const ALe=uS(PI),dVt=ALe.left,hVt=ALe.right;function pVt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[EM]&&r[EM].value:void 0,o=n===one,a=PI(t),u=dVt(i,a);if(u===i.length||PI(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(hVt(i,a)-u<s.size)return!1}return!0}function mVt(e,t){return e.map(n=>bn(t.fields?{values:t.fields.map(r=>TLe(r)(n.datum))}:{[Od]:PI(n.datum)},t))}function gVt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,T;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=aB[`${y}_union`],m[d]=v(g,pt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(pt(f).reduce((S,A,C)=>(S[c[C].field]=A,S),{})))}else h=Od,p=PI(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[Od]:p}));if(t=t||Tme,o[Od]?o[Od]=aB[`${Od}_${t}`](...Object.values(o[Od])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(A=>o[S][A]).reduce((A,C)=>A===void 0?C:aB[`${u[S]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const S=r?iVt:rVt;o[S]=t===Tme?{[Ame]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[sVt]:s.map(A=>({[Ame]:a[A]}))}}return o}var aB={[`${Od}_union`]:Pat,[`${Od}_intersect`]:Rat,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=fa(t[0]),r=fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=fa(t[0]),r=fa(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const yVt=":",vVt="@";function ane(e,t,n,r){t[0].type!==cb&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Qn(t).value,o="unit",a=vVt+o,u=yVt+i;s===one&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function CLe(e){const t=this.context.data[e];return t?t.values.value:[]}function bVt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function _Vt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Oc).insert(t)),1}function wVt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const xR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},EVt=xR("format"),ILe=xR("timeFormat"),xVt=xR("utcFormat"),SVt=xR("timeParse"),TVt=xR("utcParse"),SP=new Date(2e3,0,1);function SF(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(SP.setYear(2e3),SP.setMonth(e),SP.setDate(t),ILe.call(this,SP,n))}function AVt(e){return SF.call(this,e,1,"%B")}function CVt(e){return SF.call(this,e,1,"%b")}function IVt(e){return SF.call(this,0,2+e,"%A")}function kVt(e){return SF.call(this,0,2+e,"%a")}const RVt=":",NVt="@",LH="%",kLe="$";function une(e,t,n,r){t[0].type!==cb&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=RVt+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function PVt(e,t,n,r){t[0].type!==cb&&Le("First argument to indata must be a string literal."),t[1].type!==cb&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=NVt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Ya(e,t,n,r){if(t[0].type===cb)Ime(n,r,t[0].value);else for(e in n.scales)Ime(n,r,e)}function Ime(e,t,n){const r=LH+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function np(e,t){if(_n(e))return e;if(mt(e)){const n=t.scales[e];return n&&ijt(n.value)?n.value:void 0}}function DVt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Ya,n._range=Ya,n._scale=Ya;const r=i=>"_["+(i.type===cb?rt(LH+i.value):rt(LH)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function lne(e,t){return function(n,r,i){if(n){const s=np(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const OVt=lne("area",Hdt),$Vt=lne("bounds",Ydt),MVt=lne("centroid",eht);function LVt(e,t){const n=np(e,(t||this).context);return n&&n.scale()}function FVt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function cne(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function jVt(){return cne(this.context.dataflow,"warn",arguments)}function BVt(){return cne(this.context.dataflow,"info",arguments)}function UVt(){return cne(this.context.dataflow,"debug",arguments)}function uB(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function FH(e){const t=H0(e),n=uB(t.r),r=uB(t.g),i=uB(t.b);return .2126*n+.7152*r+.0722*i}function zVt(e,t){const n=FH(e),r=FH(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function VVt(){const e=[].slice.call(arguments);return e.unshift({}),bn(...e)}function RLe(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?HVt(e,t):!1:gt(e)&&gt(t)?NLe(e,t):!1}function HVt(e,t){for(let n=0,r=e.length;n<r;++n)if(!RLe(e[n],t[n]))return!1;return!0}function NLe(e,t){for(const n in e)if(!RLe(e[n],t[n]))return!1;return!0}function kme(e){return t=>NLe(e,t)}function qVt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Oc:je(n)||Y4(n)?n:kme(n),c.remove(f)),t&&c.insert(t),r&&(f=kme(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function WVt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function GVt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const Rme={};function YVt(e,t){const n=Rme[t]||(Rme[t]=Dc(t));return je(e)?e.map(n):n(e)}function fne(e){return je(e)||ArrayBuffer.isView(e)?e:null}function dne(e){return fne(e)||(mt(e)?e:null)}function KVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return fne(e).join(...n)}function XVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dne(e).indexOf(...n)}function QVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dne(e).lastIndexOf(...n)}function JVt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return dne(e).slice(...n)}function ZVt(e,t,n){return _n(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function eHt(e){return fne(e).slice().reverse()}function tHt(e,t,n){return Mee(e||0,t||0,n||0)}function nHt(e,t){const n=np(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function rHt(e,t){const n=np(e,(t||this).context);return n?n.copy():void 0}function iHt(e,t){const n=np(e,(t||this).context);return n?n.domain():[]}function sHt(e,t,n){const r=np(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function oHt(e,t){const n=np(e,(t||this).context);return n&&n.range?n.range():[]}function aHt(e,t,n){const r=np(e,(n||this).context);return r?r(t):void 0}function uHt(e,t,n,r,i){e=np(e,(i||this).context);const s=w$e(t,n);let o=e.domain(),a=o[0],u=Qn(o),l=wa;return u-a?l=l$e(e,a,u):e=(e.interpolator?gr("sequential")().interpolator(e.interpolator()):gr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Qn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function lHt(e,t,n){const r=np(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function cHt(e){let t=null;return function(n){return n?AI(n,t=t||bx(e)):e}}const PLe=e=>e.data;function DLe(e,t){const n=CLe.call(t,e);return n.root&&n.root.lookup||{}}function fHt(e,t,n){const r=DLe(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(PLe):void 0}function dHt(e,t){const n=DLe(e,this)[t];return n?n.ancestors().map(PLe):void 0}const OLe=()=>typeof window<"u"&&window||null;function hHt(){const e=OLe();return e?e.screen:{}}function pHt(){const e=OLe();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function mHt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function $Le(e,t,n){if(!e)return[];const[r,i]=e,s=new Ts().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return vMe(o,s,gHt(t))}function gHt(e){let t=null;if(e){const n=pt(e.marktype),r=pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function yHt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function vHt(e){return pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function bHt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Ts().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),$Le([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>_Ht(u.x,u.y,t))}function _Ht(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const DI={random(){return Mc()},cumulativeNormal:Z4,cumulativeLogNormal:nee,cumulativeUniform:oee,densityNormal:QZ,densityLogNormal:tee,densityUniform:see,quantileNormal:eF,quantileLogNormal:ree,quantileUniform:aee,sampleNormal:J4,sampleLogNormal:eee,sampleUniform:iee,isArray:je,isBoolean:Hy,isDate:k0,isDefined(e){return e!==void 0},isNumber:lr,isObject:gt,isRegExp:bOe,isString:mt,isTuple:Y4,isValid(e){return e!=null&&e===e},toBoolean:$Z,toDate(e){return MZ(e)},toNumber:fa,toString:LZ,indexof:XVt,join:KVt,lastindexof:QVt,replace:ZVt,reverse:eHt,slice:JVt,flush:yOe,lerp:_Oe,merge:VVt,pad:xOe,peek:Qn,pluck:YVt,span:rR,inrange:kw,truncate:SOe,rgb:H0,lab:a3,hcl:u3,hsl:s3,luminance:FH,contrast:zVt,sequence:Du,format:EVt,utcFormat:xVt,utcParse:TVt,utcOffset:FOe,utcSequence:UOe,timeFormat:ILe,timeParse:SVt,timeOffset:LOe,timeSequence:BOe,timeUnitSpecifier:AOe,monthFormat:AVt,monthAbbrevFormat:CVt,dayFormat:IVt,dayAbbrevFormat:kVt,quarter:hOe,utcquarter:pOe,week:IOe,utcweek:NOe,dayofyear:COe,utcdayofyear:ROe,warn:jVt,info:BVt,debug:UVt,extent(e){return Dh(e)},inScope:FVt,intersect:$Le,clampRange:mOe,pinchDistance:WVt,pinchAngle:GVt,screen:hHt,containerSize:mHt,windowSize:pHt,bandspace:tHt,setdata:_Vt,pathShape:cHt,panLinear:lOe,panLog:cOe,panPow:fOe,panSymlog:dOe,zoomLinear:kZ,zoomLog:RZ,zoomPow:tM,zoomSymlog:NZ,encode:wVt,modify:qVt,lassoAppend:yHt,lassoPath:vHt,intersectLasso:bHt},wHt=["view","item","group","xy","x","y"],EHt="event.vega.",MLe="this.",hne={},LLe={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(kLe+e)}]`,functions:xHt,constants:ELe,visitors:hne},jH=SLe(LLe);function xHt(e){const t=xLe(e);wHt.forEach(n=>t[n]=EHt+n);for(const n in DI)t[n]=MLe+n;return bn(t,DVt(e,DI,hne)),t}function ps(e,t,n){return arguments.length===1?DI[e]:(DI[e]=t,n&&(hne[e]=n),jH&&(jH.functions[e]=MLe+e),this)}ps("bandwidth",nHt,Ya);ps("copy",rHt,Ya);ps("domain",iHt,Ya);ps("range",oHt,Ya);ps("invert",sHt,Ya);ps("scale",aHt,Ya);ps("gradient",uHt,Ya);ps("geoArea",OVt,Ya);ps("geoBounds",$Vt,Ya);ps("geoCentroid",MVt,Ya);ps("geoShape",lHt,Ya);ps("geoScale",LVt,Ya);ps("indata",bVt,PVt);ps("data",CLe,une);ps("treePath",fHt,une);ps("treeAncestors",dHt,une);ps("vlSelectionTest",fVt,ane);ps("vlSelectionIdTest",pVt,ane);ps("vlSelectionResolve",gVt,ane);ps("vlSelectionTuples",mVt);function $h(e,t){const n={};let r;try{e=mt(e)?e:rt(e)+"",r=sne(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==mLe)return;const o=s.callee.name,a=LLe.visitors[o];a&&a(o,s.arguments,t,n)});const i=jH(r);return i.globals.forEach(s=>{const o=kLe+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:bn({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function SHt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const THt=Xf(["rule"]),Nme=Xf(["group","image","rect"]);function AHt(e,t){let n="";return THt[t]||(e.x2&&(e.x?(Nme[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(Nme[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function pne(e){return(e+"").toLowerCase()}function CHt(e){return pne(e)==="operator"}function IHt(e){return pne(e)==="collect"}function XT(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function kHt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var RHt={operator:(e,t)=>XT(e,["_"],t.code),parameter:(e,t)=>XT(e,["datum","_"],t.code),event:(e,t)=>XT(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return XT(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=AHt(r,n),i+="return m;",XT(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),kHt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function NHt(e){const t=this;CHt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function PHt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function DHt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>Pme(s,n,t)):Pme(i,n,t)}return t}function Pme(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=Dme.length,s;r<i;++r)if(s=Dme[r],jt(e,s.key))return s.parse(e,t,n);return e}var Dme=[{key:"$ref",parse:OHt},{key:"$key",parse:MHt},{key:"$expr",parse:$Ht},{key:"$field",parse:LHt},{key:"$encode",parse:jHt},{key:"$compare",parse:FHt},{key:"$context",parse:BHt},{key:"$subflow",parse:UHt},{key:"$tupleid",parse:zHt}];function OHt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function $Ht(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=ol(t.parameterExpression(e.$expr),e.$fields))}function MHt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=OZ(e.$key,e.$flat,t.expr.codegen))}function LHt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=Dc(e.$field,e.$name,t.expr.codegen))}function FHt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pt(e.$compare).map(i=>i&&i.$tupleid?Lt:i);return t.fn[n]||(t.fn[n]=PZ(r,e.$order,t.expr.codegen))}function jHt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=ol(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function BHt(e,t){return t}function UHt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function zHt(){return Lt}function VHt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function HHt(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const qHt={skip:!0};function WHt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function GHt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],qHt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Oc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function FLe(e,t,n,r){return new jLe(e,t,n,r)}function jLe(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||RHt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function Ome(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}jLe.prototype=Ome.prototype={fork(){const e=new Ome(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),IHt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[pne(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:SHt,parseOperator:NHt,parseOperatorParameters:PHt,parseParameters:DHt,parseStream:VHt,parseUpdate:HHt,getState:WHt,setState:GHt};function YHt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),BLe(t,e.description()))}function BLe(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function KHt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const lB="default";function XHt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:lB,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?mt(i)?i:i.user:lB,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return mt(r)||(i=r.item,r=r.user),BH(e,r&&r!==lB?r:i||r),i},{cursor:t})}function BH(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function xM(e,t){var n=e._runtime.data;return jt(n,t)||Le("Unrecognized data set: "+t),n[t]}function QHt(e,t){return arguments.length<2?xM(this,e).values.value:TF.call(this,e,Zb().remove(Oc).insert(t))}function TF(e,t){a3e(t)||Le("Second argument to changes must be a changeset.");const n=xM(this,e);return n.modified=!0,this.pulse(n.input,t)}function JHt(e,t){return TF.call(this,e,Zb().insert(t))}function ZHt(e,t){return TF.call(this,e,Zb().remove(t))}function ULe(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function zLe(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function AF(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function eqt(e){var t=AF(e),n=ULe(e),r=zLe(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function tqt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=AF(e),o=t.changedTouches?t.changedTouches[0]:t,s=yF(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=nqt(e,n,s),t}function nqt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;mt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ea(e),item:Ea(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const $me="view",rqt="timer",iqt="window",sqt={trap:!1};function oqt(e){const t=bn({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=Xf(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function VLe(e,t,n,r){e._eventListeners.push({type:n,sources:pt(t),handler:r})}function aqt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function TP(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function uqt(e,t,n){var r=this,i=new Q4(n),s=function(l,c){r.runAsync(null,()=>{e===$me&&aqt(r,t)&&l.preventDefault(),i.receive(tqt(r,l,c))})},o;if(e===rqt)TP(r,"timer",t)&&r.timer(s,t);else if(e===$me)TP(r,"view",t)&&r.addEventListener(t,s,sqt);else if(e===iqt?TP(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&TP(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);VLe(r,o,t,s)}return i}function Mme(e){return e.item}function Lme(e){return e.item.mark.source}function Fme(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function lqt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",Mme),Lme,Fme(e)),this.on(this.events("view","pointerout",Mme),Lme,Fme(t)),this}function cqt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Nl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const fqt="vega-bind",dqt="vega-bind-name",hqt="vega-bind-radio";function pqt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=DZ(r.debounce,i.update))),(r.input==null&&r.element?mqt:yqt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function mqt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),VLe(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(gqt(i))}}function gqt(e){return typeof Event<"u"?new Event(e):{type:e}}function yqt(e,t,n,r){const i=r.signal(n.signal),s=Nl("div",{class:fqt}),o=n.input==="radio"?s:s.appendChild(Nl("label"));o.appendChild(Nl("span",{class:dqt},n.name||n.signal)),t.appendChild(s);let a=vqt;switch(n.input){case"checkbox":a=bqt;break;case"select":a=_qt;break;case"radio":a=wqt;break;case"range":a=Eqt;break}a(e,o,n,i)}function vqt(e,t,n,r){const i=Nl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function bqt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Nl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function _qt(e,t,n,r){const i=Nl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};SM(o,r)&&(u.selected=!0),i.appendChild(Nl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(SM(n.options[a],o)){i.selectedIndex=a;return}}}function wqt(e,t,n,r){const i=Nl("span",{class:hqt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};SM(o,r)&&(u.checked=!0);const l=Nl("input",u);l.addEventListener("change",()=>e.update(o));const c=Nl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)SM(a[l].value,o)&&(a[l].checked=!0)}}function Eqt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||V0(s,i,100),a=Nl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Nl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function SM(e,t){return e===t||e+""==t+""}function HLe(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,ULe(e),zLe(e),AF(e),i,s).background(e.background())}function mne(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function xqt(e,t,n,r){const i=new r(e.loader(),mne(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,AF(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function Sqt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=vF(r);e=n._el=e?cB(n,e,!0):null,YHt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||bR,a=e?s.renderer:s.headless;return n._renderer=a?HLe(n,n._renderer,e,a):null,n._handler=xqt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=cB(n,t,!0):e.appendChild(Nl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=cB(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{pqt(n,u.element||t,u)})),n}function cB(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const QT=e=>+e||0,Tqt=e=>({top:e,bottom:e,left:e,right:e});function jme(e){return gt(e)?{top:QT(e.top),bottom:QT(e.bottom),left:QT(e.left),right:QT(e.right)}:Tqt(QT(e))}async function gne(e,t,n,r){const i=vF(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),HLe(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function Aqt(e,t){e!==r0.Canvas&&e!==r0.SVG&&e!==r0.PNG&&Le("Unrecognized image type: "+e);const n=await gne(this,e,t);return e===r0.SVG?Cqt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function Cqt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function Iqt(e,t){return(await gne(this,r0.Canvas,e,t)).canvas()}async function kqt(e){return(await gne(this,r0.SVG,e)).svg()}function Rqt(e,t,n){return FLe(e,mx,DI,n).parse(t)}function Nqt(e){var t=this._runtime.scales;return jt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var qLe="width",WLe="height",yne="padding",Bme={skip:!0};function GLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yne?r.left+r.right:0)}function YLe(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===yne?r.top+r.bottom:0)}function Pqt(e){var t=e._signals,n=t[qLe],r=t[WLe],i=t[yne];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=GLe(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=YLe(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function Dqt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(qLe,n,Bme),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(WLe,r,Bme),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function Oqt(e){return this._runtime.getState(e||{data:$qt,signals:Mqt,recurse:!0})}function $qt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function Mqt(e,t){return!(e==="parent"||t instanceof mx.proxy)}function Lqt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function Fqt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(ict(n,t))}function jqt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",Bqt(r))}function Bqt(e){return e==null?"":je(e)?KLe(e):gt(e)&&!k0(e)?Uqt(e):e+""}function Uqt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?KLe(n):XLe(n))}).join(`
`)}function KLe(e){return"["+e.map(XLe).join(", ")+"]"}function XLe(e){return je(e)?"[]":gt(e)&&!k0(e)?"{}":e}function zqt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function QLe(e,t){const n=this;if(t=t||{},fE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=bn({},e.locale,t.locale);n.locale(QOe(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||r0.Canvas,n._scenegraph=new q$e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||jqt,n._redraw=!0,n._handler=new bR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=oqt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=Rqt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:bn({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=GLe(n,n._width),n._viewHeight=YLe(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,Pqt(n),KHt(n),XHt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function AP(e,t){return jt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+rt(t))}function JLe(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function Ume(e,t,n,r){let i=JLe(n,r);return i||(i=mne(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function zme(e,t,n){const r=JLe(t,n);return r&&t._targets.remove(r),e}lt(QLe,fE,{async evaluate(e,t,n){if(await fE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,eqt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&jD(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&BLe(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=AP(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",jme(e)):jme(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(vF(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(fE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(AP(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:Dqt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=mne(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return Ume(this,e,AP(this,e),t)},removeSignalListener(e,t){return zme(this,AP(this,e),t)},addDataListener(e,t){return Ume(this,e,xM(this,e).values,t)},removeDataListener(e,t){return zme(this,xM(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=BH(this,null);this._globalCursor=!!e,t&&BH(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:Fqt,events:uqt,finalize:cqt,hover:lqt,data:QHt,change:TF,insert:JHt,remove:ZHt,scale:Nqt,initialize:Sqt,toImageURL:Aqt,toCanvas:Iqt,toSVG:kqt,getState:Oqt,setState:Lqt,_watchPixelRatio:zqt});const Vqt="view",TM="[",AM="]",ZLe="{",e6e="}",Hqt=":",t6e=",",qqt="@",Wqt=">",Gqt=/[[\]{}]/,Yqt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let n6e,r6e;function Wy(e,t,n){return n6e=t||Vqt,r6e=n||Yqt,i6e(e.trim()).map(UH)}function Kqt(e){return r6e[e]}function XA(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function i6e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=XA(e,i,t6e,TM+ZLe,AM+e6e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function UH(e){return e[0]==="["?Xqt(e):Qqt(e)}function Xqt(e){const t=e.length;let n=1,r;if(n=XA(e,n,AM,TM,AM),n===t)throw"Empty between selector: "+e;if(r=i6e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==Wqt)throw"Expected '>' after between selector: "+e;r=r.map(UH);const i=UH(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function Qqt(e){const t={source:n6e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===e6e){if(a=e.lastIndexOf(ZLe),a>=0){try{r=Jqt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===qqt&&(i=++a),u=XA(e,a,Hqt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=XA(e,a,TM),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=XA(e,a,AM),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==TM)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||Gqt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):Kqt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function Jqt(e){const t=e.split(t6e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function Zqt(e){return gt(e)?e:{type:e||"pad"}}const JT=e=>+e||0,eWt=e=>({top:e,bottom:e,left:e,right:e});function tWt(e){return gt(e)?e.signal?e:{top:JT(e.top),bottom:JT(e.bottom),left:JT(e.left),right:JT(e.right)}:eWt(JT(e))}const so=e=>gt(e)&&!je(e)?bn({},e):{value:e};function Vme(e,t,n,r){return n!=null?(gt(n)&&!je(n)||je(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function Fo(e,t,n){for(const r in t)Vme(e,r,t[r]);for(const r in n)Vme(e,r,n[r],"update")}function GS(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=bn(e[r]||{},t[r]));return e}function ow(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const vne="mark",bne="frame",_ne="scope",nWt="axis",rWt="axis-domain",iWt="axis-grid",sWt="axis-label",oWt="axis-tick",aWt="axis-title",uWt="legend",lWt="legend-band",cWt="legend-entry",fWt="legend-gradient",s6e="legend-label",dWt="legend-symbol",hWt="legend-title",pWt="title",mWt="title-text",gWt="title-subtitle";function yWt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!ow(u,e)&&fB(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===bne?i.group:n===vne?bn({},i.mark,i[t]):null;for(u in c)l=ow(u,e)||(u==="fill"||u==="stroke")&&(ow("fill",e)||ow("stroke",e)),l||fB(s,u,c[u]);pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)ow(h,e)||fB(s,h,d[h])}),e=bn({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=bn(o,e.enter),a&&(e.update=bn(a,e.update)),e}function fB(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const o6e=e=>mt(e)?rt(e):e.signal?`(${e.signal})`:a6e(e);function CF(e){if(e.gradient!=null)return bWt(e);let t=e.signal?`(${e.signal})`:e.color?vWt(e.color):e.field!=null?a6e(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=_Wt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${ZD(e.exponent)})`),e.mult!=null&&(t+=`*${ZD(e.mult)}`),e.offset!=null&&(t+=`+${ZD(e.offset)}`),e.round&&(t=`round(${t})`),t}const CP=(e,t,n,r)=>`(${e}(${[t,n,r].map(CF).join(",")})+'')`;function vWt(e){return e.c?CP("hcl",e.h,e.c,e.l):e.h||e.s?CP("hsl",e.h,e.s,e.l):e.l||e.a?CP("lab",e.l,e.a,e.b):e.r||e.g||e.b?CP("rgb",e.r,e.g,e.b):null}function bWt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Qn(t)==null;)t.pop();return t.unshift(o6e(e.gradient)),`gradient(${t.join(",")})`}function ZD(e){return gt(e)?"("+CF(e)+")":e}function a6e(e){return u6e(gt(e)?e:{datum:e})}function u6e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+rt(e));return e.signal||(r=mt(r)?Zh(r).map(rt).join("]["):u6e(r)),t+"["+r+"]"}function _Wt(e,t){const n=o6e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+ZD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function wWt(e){let t="";return e.forEach(n=>{const r=CF(n);t+=n.test?`(${n.test})?${r}:`:r}),Qn(t)===":"&&(t+="null"),t}function l6e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=yWt(e,t,n,r,i.config);for(const a in e)o[a]=EWt(e[a],t,s,i);return s}function EWt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=SWt(xWt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function xWt(e){return je(e)?wWt(e):CF(e)}function SWt(e,t,n,r){const i=$h(e,t);return i.$fields.forEach(s=>r[s]=1),bn(n,i.$params),i.$expr}const TWt="outer",AWt=["value","update","init","react","bind"];function Hme(e,t){Le(e+' for "outer" push: '+rt(t))}function c6e(e,t){const n=e.name;if(e.push===TWt)t.signals[n]||Hme("No prior signal definition",n),AWt.forEach(r=>{e[r]!==void 0&&Hme("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function zH(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function IF(e,t,n,r){return new zH(e,t,n,r)}function CM(e,t){return IF("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function OI(e,t){return t?{$field:e,$name:t}:{$field:e}}const VH=OI("key");function qme(e,t){return{$compare:e,$order:t}}function CWt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const IWt="ascending",kWt="descending";function RWt(e){return gt(e)?(e.order===kWt?"-":"+")+kF(e.op,e.field):""}function kF(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const wne="scope",HH="view";function js(e){return e&&e.signal}function NWt(e){return e&&e.expr}function eO(e){if(js(e))return!0;if(gt(e)){for(const t in e)if(eO(e[t]))return!0}return!1}function pf(e,t){return e??t}function I1(e){return e&&e.signal||e}const Wme="timer";function $I(e,t){return(e.merge?DWt:e.stream?OWt:e.type?$Wt:Le("Invalid stream specification: "+rt(e)))(e,t)}function PWt(e){return e===wne?HH:e||HH}function DWt(e,t){const n=e.merge.map(i=>$I(i,t)),r=Ene({merge:n},e,t);return t.addStream(r).id}function OWt(e,t){const n=$I(e.stream,t),r=Ene({stream:n},e,t);return t.addStream(r).id}function $Wt(e,t){let n;e.type===Wme?(n=t.event(Wme,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(PWt(e.source),e.type);const r=Ene({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Ene(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[$I(r[0],n),$I(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(MWt(t.marktype,t.markname,t.markrole)),t.source===wne&&r.push("inScope(event.item)"),r.length&&(e.filter=$h("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function MWt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const LWt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function FWt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),mt(s)&&(s=Wy(s,t.isSubscope()?wne:HH)),s=pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[BWt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=mt(o)?$h(o,t):o.expr!=null?$h(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:LWt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(bn(jWt(u,t),i)))}function jWt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):$I(e,t)}}function BWt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function UWt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=$h(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>FWt(i,t,n.id))}const Vr=e=>(t,n,r)=>IF(e,n,t||void 0,r),f6e=Vr("aggregate"),zWt=Vr("axisticks"),d6e=Vr("bound"),ad=Vr("collect"),Gme=Vr("compare"),VWt=Vr("datajoin"),h6e=Vr("encode"),HWt=Vr("expression"),qWt=Vr("facet"),WWt=Vr("field"),GWt=Vr("key"),YWt=Vr("legendentries"),KWt=Vr("load"),XWt=Vr("mark"),QWt=Vr("multiextent"),JWt=Vr("multivalues"),ZWt=Vr("overlap"),eGt=Vr("params"),p6e=Vr("prefacet"),tGt=Vr("projection"),nGt=Vr("proxy"),rGt=Vr("relay"),m6e=Vr("render"),iGt=Vr("scale"),n_=Vr("sieve"),sGt=Vr("sortitems"),g6e=Vr("viewlayout"),oGt=Vr("values");let aGt=0;const y6e={min:"min",max:"max",count:"sum"};function uGt(e,t){const n=e.type||"linear";r$e(n)||Le("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function lGt(e,t){const n=t.getScale(e.name).params;let r;n.domain=v6e(e.domain,e,t),e.range!=null&&(n.range=_6e(e,t,n)),e.interpolate!=null&&bGt(e.interpolate,n),e.nice!=null&&(n.nice=vGt(e.nice,t)),e.bins!=null&&(n.bins=yGt(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=Ec(e[r],t))}function Ec(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+rt(e)):e}function tO(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Ec(n,t))}function RF(e){Le("Can not find data set: "+rt(e))}function v6e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?cGt:e.fields?dGt:fGt)(e,t,n)}function cGt(e,t,n){return e.map(r=>Ec(r,n))}function fGt(e,t,n){const r=n.getData(e.data);return r||RF(e.data),vx(t.type)?r.valuesRef(n,e.field,b6e(e.sort,!1)):o$e(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function dGt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=mt(o)?{data:r,field:o}:je(o)||o.signal?hGt(o,n):o,s.push(o),s),[]);return(vx(t.type)?pGt:o$e(t.type)?mGt:gGt)(e,n,i)}function hGt(e,t){const n="_:vega:_"+aGt++,r=ad({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,n_({})]),{data:n,field:"data"}}function pGt(e,t,n){const r=b6e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||RF(l.data),c.countsRef(t,l.field,r)}),a={groupby:VH,pulse:o};r&&(i=r.op||"count",s=r.field?kF(i,r.field):"count",a.ops=[y6e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(f6e(a));const u=t.add(ad({pulse:Mt(i)}));return s=t.add(oGt({field:VH,sort:t.sortRef(r),pulse:Mt(u)})),Mt(s)}function b6e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!y6e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function mGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||RF(i.data),s.domainRef(t,i.field)});return Mt(t.add(JWt({values:r})))}function gGt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||RF(i.data),s.extentRef(t,i.field)});return Mt(t.add(QWt({extents:r})))}function yGt(e,t){return e.signal||je(e)?tO(e,t):t.objectProperty(e)}function vGt(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Ec(e.interval),step:Ec(e.step)}:Ec(e)}function bGt(e,t){t.interpolate=Ec(e.type||e),e.gamma!=null&&(t.interpolateGamma=Ec(e.gamma))}function _6e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(mt(i)){if(r&&jt(r,i))return e=bn({},e,{range:r[i]}),_6e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=vx(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?tO(i.scheme,t):Ec(i.scheme,t),i.extent&&(n.schemeExtent=tO(i.extent,t)),i.count&&(n.schemeCount=Ec(i.count,t));return}else if(i.step){n.rangeStep=Ec(i.step,t);return}else{if(vx(e.type)&&!je(i))return v6e(i,e,t);je(i)||Le("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?tO:Ec)(s,t))}function _Gt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=qH(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=qH(n[i],i,t));t.addProjection(e.name,r)}function qH(e,t,n){return je(e)?e.map(r=>qH(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+rt(e)):e}const ud="top",YS="left",KS="right",py="bottom",w6e="center",wGt="vertical",EGt="start",xGt="middle",SGt="end",WH="index",xne="label",TGt="offset",xx="perc",AGt="perc2",Tc="value",SR="guide-label",Sne="guide-title",CGt="group-title",IGt="group-subtitle",Yme="symbol",nO="gradient",GH="discrete",YH="size",kGt="shape",RGt="fill",NGt="stroke",PGt="strokeWidth",DGt="strokeDash",OGt="opacity",Tne=[YH,kGt,RGt,NGt,PGt,DGt,OGt],TR={name:1,style:1,interactive:1},tr={value:0},Ac={value:1},NF="group",E6e="rect",Ane="rule",$Gt="symbol",r_="text";function MI(e){return e.type=NF,e.interactive=e.interactive||!1,e}function al(e,t){const n=(r,i)=>pf(e[r],pf(t[r],i));return n.isVertical=r=>wGt===pf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>pf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>pf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>pf(e.columns,pf(t.columns,+n.isVertical(!0))),n}function x6e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function MGt(e,t,n){const r=t.config.style[n];return r&&r[e]}function PF(e,t,n){return`item.anchor === '${EGt}' ? ${e} : item.anchor === '${SGt}' ? ${t} : ${n}`}const Cne=PF(rt(YS),rt(KS),rt(w6e));function LGt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function S6e(e,t){return t?e?gt(e)?Object.assign({},e,{offset:S6e(e.offset,t)}):{value:e,offset:t}:t:e}function ql(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=GS(e.encode,t,TR)):e.interactive=!1,e}function FGt(e,t,n,r){const i=al(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:tr,x:tr,y:tr,width:so(f),height:so(d)},update:bn({},u,{opacity:Ac,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:tr}};return Fo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),ql({type:E6e,role:fWt,encode:h},r)}function jGt(e,t,n,r,i){const s=al(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:tr,fill:{scale:t,field:Tc}};p[l]={signal:h+"datum."+xx,mult:u},p[c]=tr,p[f]={signal:h+"datum."+AGt,mult:u},p[d]=so(a);const m={enter:p,update:bn({},p,{opacity:Ac}),exit:{opacity:tr}};return Fo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),ql({type:E6e,role:lWt,key:Tc,from:i,encode:m},r)}const BGt=`datum.${xx}<=0?"${YS}":datum.${xx}>=1?"${KS}":"${w6e}"`,UGt=`datum.${xx}<=0?"${py}":datum.${xx}>=1?"${ud}":"${xGt}"`;function Kme(e,t,n,r){const i=al(e,t),s=i.isVertical(),o=so(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:tr},update:c={opacity:Ac,text:{field:xne}},exit:{opacity:tr}};return Fo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:pf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:UGt},f="y",d="x",h="1-"):(l.align=c.align={signal:BGt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+xx,mult:a},l[d]=c[d]=o,o.offset=pf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+WH}:void 0,ql({type:r_,role:s6e,style:SR,key:Tc,from:r,encode:p,overlap:u},n)}function zGt(e,t,n,r,i){const s=al(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${TGt} : datum.${YH}`,h=l?so(l):{field:YH},p=`datum.${WH}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:tr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Ac,x:y.x,y:y.y},exit:{opacity:tr}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),Fo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Tne.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Tc})});const S=ql({type:$Gt,role:dWt,key:Tc,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=so(c);A.offset=s("labelOffset"),g={enter:y={opacity:tr,x:{signal:d,offset:A},y:h},update:v={opacity:Ac,text:{field:xne},x:y.x,y:y.y},exit:{opacity:tr}},Fo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=ql({type:r_,role:s6e,style:SR,key:Tc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:tr,height:l?so(l):tr,opacity:tr},exit:{opacity:tr},update:v={opacity:Ac,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:WH}},MI({role:_ne,from:r,encode:GS(g,o,TR),marks:[S,C],name:u,interactive:a,sort:w})}function VGt(e,t){const n=al(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Ine='item.orient === "left"',kne='item.orient === "right"',DF=`(${Ine} || ${kne})`,HGt=`datum.vgrad && ${DF}`,qGt=PF('"top"','"bottom"','"middle"'),WGt=PF('"right"','"left"','"center"'),GGt=`datum.vgrad && ${kne} ? (${WGt}) : (${DF} && !(datum.vgrad && ${Ine})) ? "left" : ${Cne}`,YGt=`item._anchor || (${DF} ? "middle" : "start")`,KGt=`${HGt} ? (${Ine} ? -90 : 90) : 0`,XGt=`${DF} ? (datum.vgrad ? (${kne} ? "bottom" : "top") : ${qGt}) : "top"`;function QGt(e,t,n,r){const i=al(e,t),s={enter:{opacity:tr},update:{opacity:Ac,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:tr}};return Fo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:YGt},angle:{signal:KGt},align:{signal:GGt},baseline:{signal:XGt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),ql({type:r_,role:hWt,style:Sne,from:r,encode:s},n)}function JGt(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+Xme(e.path)+")":e.sphere&&(n="geoShape("+Xme(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function Xme(e){return gt(e)&&e.signal?e.signal:rt(e)}function T6e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===NF?_ne:t||vne}function ZGt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||T6e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function eYt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Rne(e,t){const n=c3e(e.type);n||Le("Unrecognized transform type: "+rt(e.type));const r=IF(n.type.toLowerCase(),null,A6e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function A6e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=tYt(o,t,n)}return r}function tYt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return nYt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return rYt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!js(i)?i.map(s=>Qme(e,s,n)):Qme(e,i,n)}function Qme(e,t,n){const r=e.type;if(js(t))return Zme(r)?Le("Expression references can not be signals."):dB(r)?n.fieldRef(t):ege(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||dB(r);return i&&iYt(t)?n.exprRef(t.expr,t.as):i&&sYt(t)?OI(t.field,t.as):Zme(r)?$h(t,n):oYt(r)?Mt(n.getData(t).values):dB(r)?OI(t):ege(r)?n.compareRef(t):t}}function nYt(e,t,n){return mt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function rYt(e,t,n){const r=t[e.name];return e.array?(je(r)||Le("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>Jme(e,i,n))):Jme(e,r,n)}function Jme(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+rt(t));const s=bn(A6e(i,t,n),i.key);return Mt(n.add(eGt(s)))}const iYt=e=>e&&e.expr,sYt=e=>e&&e.field,oYt=e=>e==="data",Zme=e=>e==="expr",dB=e=>e==="field",ege=e=>e==="compare";function aYt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=rO(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=Rne(bn({type:"aggregate",groupby:pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=rO(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(ad(null,[{}]))),o||(o=rO(e,n)),{key:i,pulse:o,parent:a}}function rO(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function hb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}hb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new hb(e,s,i,r,o)};function C6e(e){return mt(e)?e:null}function tge(e,t,n){const r=kF(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function ZT(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=RWt(s);let l=C6e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:VH,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(IF(r,void 0,d)),o&&(t.index[i]=f),c=Mt(f),l!=null&&(a[l]=c)}return c}hb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=C6e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&tge(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&tge(e,u,n),a=e.add(f6e(u)),o=e.add(ad({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return ZT(e,this,"extent","extent",t,!1)},domainRef(e,t){return ZT(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return ZT(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return ZT(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return ZT(e,this,"indata","tupleindex",t,!0,!0)}};function uYt(e,t,n){const r=e.from.facet,i=r.name,s=rO(r,t);let o;r.name||Le("Facet must have a name: "+rt(r)),r.data||Le("Facet must reference a data set: "+rt(r)),r.field?o=t.add(p6e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(qWt({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(ad()),l=a.add(n_({pulse:Mt(u)}));a.addData(i,new hb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function lYt(e,t,n){const r=t.add(p6e({pulse:n.pulse})),i=t.fork();i.add(n_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function I6e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(CM()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=$h(l,t);u.update=c.$expr,u.params=c.$params}function OF(e,t){const n=T6e(e),r=e.type===NF,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===_ne||n===bne,a,u,l,c,f,d,h;const p=n===vne||o||i,m=aYt(e.from,r,t);u=t.add(VWt({key:m.key||(e.key?OI(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(u);u=l=t.add(ad({pulse:g})),u=t.add(XWt({markdef:ZGt(e),interactive:eYt(e.interactive,t),clip:JGt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(u)}));const y=Mt(u);u=c=t.add(h6e(l6e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const S=Rne(T,t),A=S.metadata;(A.generates||A.changes)&&Le("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),S.params.pulse=Mt(u),t.add(u=S)}),e.sort&&(u=t.add(sGt({sort:t.compareRef(e.sort),pulse:Mt(u)})));const v=Mt(u);(i||o)&&(o=t.add(g6e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Mt(o));const b=t.add(d6e({mark:y,pulse:d||v}));h=Mt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?uYt(e,t,m):p?lYt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=cYt(s,h,t));const w=t.add(m6e({pulse:h})),E=t.add(n_({pulse:Mt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new hb(t,l,w,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Le("Marks only support modify triggers."),I6e(T,t,f)}))}function cYt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:js(s)?n.signalRef(s.signal):s,method:js(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=js(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(ZWt(o)))}function fYt(e,t){const n=t.config.legend,r=e.encode||{},i=al(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Tne.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Le("Missing valid scale for legend.");const p=dYt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(ad(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add(YWt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===nO?(h=[FGt(e,c,n,r.gradient),Kme(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${I1(i.gradientLength())})/100))`)):p===GH?h=[jGt(e,c,n,r.gradient,v),Kme(e,n,r.labels,v)]:(f=VGt(e,n),h=[zGt(e,n,r,v,I1(f.columns))],d.size=mYt(e,t,h[0].marks)),h=[MI({role:cWt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(QGt(e,n,r.title,g)),OF(MI({role:uWt,from:g,encode:GS(pYt(i,e,n),s,TR),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function dYt(e,t){let n=e.type||Yme;return!e.type&&hYt(e)===1&&(e.fill||e.stroke)&&(n=Uee(t)?nO:uH(t)?GH:Yme),n!==nO?n:uH(t)?GH:nO}function hYt(e){return Tne.reduce((t,n)=>t+(e[n]?1:0),0)}function pYt(e,t,n){const r={enter:{},update:{}};return Fo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function mYt(e,t,n){const r=I1(nge("size",e,n)),i=I1(nge("strokeWidth",e,n)),s=I1(gYt(n[1].encode,t,SR));return $h(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function nge(e,t,n){return t[e]?`scale("${t[e]}",datum)`:x6e(e,n[0].encode)}function gYt(e,t,n){return x6e("fontSize",e)||MGt("fontSize",t,n)}const yYt=`item.orient==="${YS}"?-90:item.orient==="${KS}"?90:0`;function vYt(e,t){e=mt(e)?{text:e}:e;const n=al(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mt(t.add(ad(null,[l])));return u.push(wYt(e,n,bYt(e),c)),e.subtitle&&u.push(EYt(e,n,r.subtitle,c)),OF(MI({role:pWt,from:c,encode:_Yt(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function bYt(e){const t=e.encode;return t&&t.title||bn({name:e.name,interactive:e.interactive,style:e.style},t)}function _Yt(e,t){const n={enter:{},update:{}};return Fo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:Cne},angle:{signal:yYt},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),GS(n,t,TR)}function wYt(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Fo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ql({type:r_,role:mWt,style:CGt,from:r,encode:o},n)}function EYt(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return Fo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),ql({type:r_,role:gWt,style:IGt,from:r,encode:o},n)}function xYt(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Rne(r,t))}),e.on&&e.on.forEach(r=>{I6e(r,t,e.name)}),t.addDataPipeline(e.name,SYt(e,t,n))}function SYt(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?js(e.values)||eO(e.format)?(r.push(rge(t,e)),r.push(i=fv())):r.push(i=fv({$ingest:e.values,$format:e.format})):e.url?eO(e.url)||eO(e.format)?(r.push(rge(t,e)),r.push(i=fv())):r.push(i=fv({$request:e.url,$format:e.format})):e.source&&(i=a=pt(e.source).map(d=>Mt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=fv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=rGt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,fv())),i||r.push(fv()),r.push(n_({})),r}function fv(e){const t=ad({},e);return t.metadata={source:!0},t}function rge(e,t){return KWt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const k6e=e=>e===py||e===ud,$F=(e,t,n)=>js(e)?IYt(e.signal,t,n):e===YS||e===ud?t:n,oo=(e,t,n)=>js(e)?AYt(e.signal,t,n):k6e(e)?t:n,Bf=(e,t,n)=>js(e)?CYt(e.signal,t,n):k6e(e)?n:t,R6e=(e,t,n)=>js(e)?kYt(e.signal,t,n):e===ud?{value:t}:{value:n},TYt=(e,t,n)=>js(e)?RYt(e.signal,t,n):e===KS?{value:t}:{value:n},AYt=(e,t,n)=>N6e(`${e} === '${ud}' || ${e} === '${py}'`,t,n),CYt=(e,t,n)=>N6e(`${e} !== '${ud}' && ${e} !== '${py}'`,t,n),IYt=(e,t,n)=>Nne(`${e} === '${YS}' || ${e} === '${ud}'`,t,n),kYt=(e,t,n)=>Nne(`${e} === '${ud}'`,t,n),RYt=(e,t,n)=>Nne(`${e} === '${KS}'`,t,n),N6e=(e,t,n)=>(t=t!=null?so(t):t,n=n!=null?so(n):n,ige(t)&&ige(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[bn({test:e},t)].concat(n||[])),ige=e=>e==null||Object.keys(e).length===1,Nne=(e,t,n)=>({signal:`${e} ? (${Pw(t)}) : (${Pw(n)})`}),NYt=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${YS}' ? (${Pw(r)}) : `:"")+(n!=null?`${e} === '${py}' ? (${Pw(n)}) : `:"")+(i!=null?`${e} === '${KS}' ? (${Pw(i)}) : `:"")+(t!=null?`${e} === '${ud}' ? (${Pw(t)}) : `:"")+"(null)"}),Pw=e=>js(e)?e.signal:e==null?null:rt(e),PYt=(e,t)=>t===0?0:js(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},dE=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function B_(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[Sne][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[SR][i]}return null}function sge(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function DYt(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(js(o)){const f=sge([n.axisX,n.axisY]),d=sge([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=oo(o,B_(l,n.axisX,i,r),B_(l,n.axisY,i,r));u={};for(l of d)u[l]=NYt(o.signal,B_(l,n.axisTop,i,r),B_(l,n.axisBottom,i,r),B_(l,n.axisLeft,i,r),B_(l,n.axisRight,i,r))}else a=o===ud||o===py?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?bn({},i,a,u,s):i}function OYt(e,t,n,r){const i=al(e,t),s=e.orient;let o,a;const u={enter:o={opacity:tr},update:a={opacity:Ac},exit:{opacity:tr}};Fo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=oge(e,0),c=oge(e,1);return o.x=a.x=oo(s,l,tr),o.x2=a.x2=oo(s,c),o.y=a.y=Bf(s,l,tr),o.y2=a.y2=Bf(s,c),ql({type:Ane,role:rWt,from:r,encode:u},n)}function oge(e,t){return{scale:e.scale,range:t}}function $Yt(e,t,n,r,i){const s=al(e,t),o=e.orient,a=e.gridScale,u=$F(o,1,-1),l=MYt(e.offset,u);let c,f,d;const h={enter:c={opacity:tr},update:d={opacity:Ac},exit:f={opacity:tr}};Fo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Tc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=oo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:bn(m,{mult:u,offset:l});return c.x=d.x=oo(o,p,g),c.y=d.y=Bf(o,p,g),c.x2=d.x2=Bf(o,y),c.y2=d.y2=oo(o,y),f.x=oo(o,p),f.y=Bf(o,p),ql({type:Ane,role:iWt,key:Tc,from:r,encode:h},n)}function MYt(e,t){if(t!==1)if(!gt(e))e=js(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=bn({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=bn({},n.mult);else return n.mult=js(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function LYt(e,t,n,r,i,s){const o=al(e,t),a=e.orient,u=$F(a,-1,1);let l,c,f;const d={enter:l={opacity:tr},update:f={opacity:Ac},exit:c={opacity:tr}};Fo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=so(i);h.mult=u;const p={scale:e.scale,field:Tc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=oo(a,tr,p),f.y2=l.y2=oo(a,h),c.x=oo(a,p),f.x=l.x=Bf(a,tr,p),f.x2=l.x2=Bf(a,h),c.y=Bf(a,p),ql({type:Ane,role:oWt,key:Tc,from:r,encode:d},n)}function hB(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function FYt(e,t,n,r,i,s){const o=al(e,t),a=e.orient,u=e.scale,l=$F(a,-1,1),c=I1(o("labelFlush")),f=I1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=so(i);g.mult=l,g.offset=so(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Tc,band:.5,offset:S6e(s.offset,o("labelOffset"))},v=oo(a,p?hB(u,c,'"left"','"right"','"center"'):{value:"center"},TYt(a,"left","right")),b=oo(a,R6e(a,"bottom","top"),p?hB(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=hB(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:tr,x:oo(a,y,g),y:Bf(a,y,g)},T={enter:E,update:m={opacity:Ac,text:{field:xne},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:tr,x:E.x,y:E.y}};Fo(T,{dx:!d&&p?oo(a,w):null,dy:!h&&p?Bf(a,w):null}),Fo(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let A=o("labelOverlap");return A=A||S?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=dE(m.align,v)),m.baseline!==b&&(m.baseline=dE(m.baseline,b)),ql({type:r_,role:sWt,style:SR,key:Tc,from:r,encode:T,overlap:A},n)}function jYt(e,t,n,r){const i=al(e,t),s=e.orient,o=$F(s,-1,1);let a,u;const l={enter:a={opacity:tr,anchor:so(i("titleAnchor",null)),align:{signal:Cne}},update:u=bn({},a,{opacity:Ac,text:so(e.title)}),exit:{opacity:tr}},c={signal:`lerp(range("${e.scale}"), ${PF(0,1,.5)})`};return u.x=oo(s,c),u.y=Bf(s,c),a.angle=oo(s,tr,PYt(o,90)),a.baseline=oo(s,R6e(s,py,ud),{value:py}),u.angle=a.angle,u.baseline=a.baseline,Fo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),BYt(i,s,l,n),l.update.align=dE(l.update.align,a.align),l.update.angle=dE(l.update.angle,a.angle),l.update.baseline=dE(l.update.baseline,a.baseline),ql({type:r_,role:aWt,style:Sne,from:r,encode:l},n)}function BYt(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=dE(so(a),n.update[u]),!1):!ow(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?so(o):oo(t,so(o),so(s))}function UYt(e,t){const n=DYt(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=al(e,n),l=LGt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mt(t.add(ad({},[c]))),d=Mt(t.add(zWt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push($Yt(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(LYt(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(FYt(e,n,r.labels,d,p,l))),c.domain&&h.push(OYt(e,n,r.domain,f)),c.title&&h.push(jYt(e,n,r.title,f)),OF(MI({role:nWt,from:f,encode:GS(zYt(u,e),i,TR),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function zYt(e,t){const n={enter:{},update:{}};return Fo(n,{orient:e("orient"),offset:e("offset")||0,position:pf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function P6e(e,t,n){const r=pt(e.signals),i=pt(e.scales);return n||r.forEach(s=>c6e(s,t)),pt(e.projections).forEach(s=>_Gt(s,t)),i.forEach(s=>uGt(s,t)),pt(e.data).forEach(s=>xYt(s,t)),i.forEach(s=>lGt(s,t)),(n||r).forEach(s=>UWt(s,t)),pt(e.axes).forEach(s=>UYt(s,t)),pt(e.marks).forEach(s=>OF(s,t)),pt(e.legends).forEach(s=>fYt(s,t)),e.title&&vYt(e.title,t),t.parseLambdas(),t}const VYt=e=>GS({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function HYt(e,t){const n=t.config,r=Mt(t.root=t.add(CM())),i=qYt(e,n);i.forEach(l=>c6e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(ad()),o=t.add(h6e(l6e(VYt(e.encode),NF,bne,e.style,t,{pulse:Mt(s)}))),a=t.add(g6e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),P6e(e,t,i),t.operators.push(a);let u=t.add(d6e({mark:r,pulse:Mt(a)}));return u=t.add(m6e({pulse:Mt(u)})),u=t.add(n_({pulse:Mt(u)})),t.addData("root",new hb(t,s,s,u)),t}function e2(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function qYt(e,t){const n=o=>pf(e[o],t[o]),r=[e2("background",n("background")),e2("autosize",Zqt(n("autosize"))),e2("padding",tWt(n("padding"))),e2("width",n("width")||0),e2("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(e.signals).forEach(o=>{jt(i,o.name)?o=bn(i[o.name],o):r.push(o),s[o.name]=o}),pt(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function D6e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function age(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}D6e.prototype=age.prototype={parse(e){return P6e(e,this)},fork(){return new age(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof zH?Mt(e):e;return this.add(nGt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(n_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Qn(this._parent)},encode(){return Qn(this._encode)},lookup(){return Qn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(mt(e))return OI(e,t);e.signal||Le("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(WWt(i)))}return r},compareRef(e){let t=!1;const n=s=>js(s)?(t=!0,this.signalRef(s.signal)):NWt(s)?(t=!0,this.exprRef(s.expr)):s,r=pt(e.field).map(n),i=pt(e.order).map(n);return t?Mt(this.add(Gme({fields:r,orders:i}))):qme(r,i)},keyRef(e,t){let n=!1;const r=s=>js(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=pt(e).map(r),n?Mt(this.add(GWt({fields:e,flat:t}))):CWt(e,t)},sortRef(e){if(!e)return e;const t=kF(e.op,e.field),n=e.order||IWt;return n.signal?Mt(this.add(Gme({fields:t,orders:this.signalRef(n.signal)}))):qme(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+rt(e));const n=t instanceof zH?t:this.add(CM(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(CM(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=$h(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||Pne(e))},exprRef(e,t){const n={expr:$h(e,this)};return t&&(n.expr.$name=t),Mt(this.add(HWt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+rt(e)),this.bindings.push(bn({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Le("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,iGt(t))},addProjection(e,t){this.addScaleProj(e,tGt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.addData(e,hb.fromEntries(this,t))}};function Pne(e){return(je(e)?WYt:GYt)(e)}function WYt(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||Pne(i):rt(i))}return n+"]"}function GYt(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(gt(i)?i.signal||Pne(i):rt(i));return t+"}"}function YYt(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function KYt(e,t,n){return gt(e)||Le("Input Vega specification must be an object."),t=jS(YYt(),t,e.config),HYt(e,new D6e(t,n)).toRuntime()}var XYt="5.29.0";bn(mx,K5t,LBt,mUt,WUt,ZUt,A7t,s7t,I7t,P7t,z7t,K7t);const QYt=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Ts,CanvasHandler:bR,CanvasRenderer:mM,DATE:tl,DAY:ca,DAYOFYEAR:Oh,Dataflow:fE,Debug:iOe,Error:AZ,EventStream:Q4,Gradient:w$e,GroupItem:cF,HOURS:zl,Handler:dte,HybridHandler:dMe,HybridRenderer:bH,Info:rOe,Item:lF,MILLISECONDS:Qf,MINUTES:Vl,MONTH:ma,Marks:Hl,MultiPulse:WZ,None:nOe,Operator:Kr,Parameters:X4,Pulse:R0,QUARTER:el,RenderType:r0,Renderer:vR,ResourceLoader:I$e,SECONDS:$c,SVGHandler:Z$e,SVGRenderer:vte,SVGStringRenderer:fMe,Scenegraph:q$e,TIME_UNITS:FZ,Transform:Pe,View:QLe,WEEK:$s,Warn:CZ,YEAR:Oo,accessor:ol,accessorFields:pa,accessorName:Xi,array:pt,ascending:H4,bandwidthNRD:XZ,bin:h3e,bootstrapCI:p3e,boundClip:EMe,boundContext:pR,boundItem:pH,boundMark:U$e,boundStroke:rg,changeset:Zb,clampRange:mOe,codegenExpression:SLe,compare:PZ,constant:Ea,cumulativeLogNormal:nee,cumulativeNormal:Z4,cumulativeUniform:oee,dayofyear:COe,debounce:DZ,defaultLocale:UZ,definition:c3e,densityLogNormal:tee,densityNormal:QZ,densityUniform:see,domChild:Ds,domClear:gc,domCreate:t0,domFind:fte,dotbin:m3e,error:Le,expressionFunction:ps,extend:bn,extent:Dh,extentIndex:gOe,falsy:xg,fastmap:US,field:Dc,flush:yOe,font:mF,fontFamily:yR,fontSize:ep,format:FD,formatLocale:nM,formats:HZ,hasOwnProperty:jt,id:nR,identity:wa,inferType:ZOe,inferTypes:e3e,ingest:Er,inherits:lt,inrange:kw,interpolate:zee,interpolateColors:aF,interpolateRange:a$e,intersect:vMe,intersectBoxLine:Rw,intersectPath:Xee,intersectPoint:Qee,intersectRule:R$e,isArray:je,isBoolean:Hy,isDate:k0,isFunction:_n,isIterable:vOe,isNumber:lr,isObject:gt,isRegExp:bOe,isString:mt,isTuple:Y4,key:OZ,lerp:_Oe,lineHeight:fy,loader:W4,locale:QOe,logger:IZ,lruCache:wOe,markup:yte,merge:EOe,mergeConfig:jS,multiLineOffset:ute,one:FS,pad:xOe,panLinear:lOe,panLog:cOe,panPow:fOe,panSymlog:dOe,parse:KYt,parseExpression:sne,parseSelector:Wy,path:v6,pathCurves:Gee,pathEqual:xMe,pathParse:bx,pathRectangle:S$e,pathRender:AI,pathSymbols:x$e,pathTrail:T$e,peek:Qn,point:yF,projection:Rte,quantileLogNormal:ree,quantileNormal:eF,quantileUniform:aee,quantiles:YZ,quantizeInterpolator:u$e,quarter:hOe,quartiles:KZ,get random(){return Mc},randomInteger:ZFt,randomKDE:ZZ,randomLCG:JFt,randomLogNormal:y3e,randomMixture:v3e,randomNormal:JZ,randomUniform:b3e,read:r3e,regressionConstant:uee,regressionExp:w3e,regressionLinear:lee,regressionLoess:S3e,regressionLog:_3e,regressionPoly:x3e,regressionPow:E3e,regressionQuad:cee,renderModule:vF,repeat:j2,resetDefaultLocale:K4t,resetSVGClipId:C$e,resetSVGDefIds:tBt,responseType:n3e,runtimeContext:FLe,sampleCurve:nF,sampleLogNormal:eee,sampleNormal:J4,sampleUniform:iee,scale:gr,sceneEqual:bte,sceneFromJSON:V$e,scenePickVisit:aM,sceneToJSON:z$e,sceneVisit:Jf,sceneZOrder:Jee,scheme:Vee,serializeXML:aMe,setHybridRendererOptions:Q9t,setRandom:XFt,span:rR,splitAccessPath:Zh,stringValue:rt,textMetrics:Rl,timeBin:HOe,timeFloor:OOe,timeFormatLocale:xI,timeInterval:zS,timeOffset:LOe,timeSequence:BOe,timeUnitSpecifier:AOe,timeUnits:jZ,toBoolean:$Z,toDate:MZ,toNumber:fa,toSet:Xf,toString:LZ,transform:f3e,transforms:mx,truncate:SOe,truthy:Oc,tupleid:Lt,typeParsers:sH,utcFloor:$Oe,utcInterval:VS,utcOffset:FOe,utcSequence:UOe,utcdayofyear:ROe,utcquarter:pOe,utcweek:NOe,version:XYt,visitArray:Pg,week:IOe,writeConfig:BS,zero:qg,zoomLinear:kZ,zoomLog:RZ,zoomPow:tM,zoomSymlog:NZ},Symbol.toStringTag,{value:"Module"}));function JYt(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var ZYt={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},eKt={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},tKt={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const nKt=Array.prototype.slice,dv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,nKt.call(t,1))},rKt=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var iKt={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:rKt,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return dv("join",arguments)},indexof:function(){return dv("indexOf",arguments)},lastindexof:function(){return dv("lastIndexOf",arguments)},slice:function(){return dv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return dv("substring",arguments,String)},split:function(){return dv("split",arguments,String)},replace:function(){return dv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const sKt=["view","item","group","xy","x","y"],KH=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&KH.add(setImmediate);const oKt={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:ZYt[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),KH.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||iKt[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>eKt[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>tKt[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,KH.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function t2(e,t,n,r,i,s){const o=a=>oKt[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,sKt.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var aKt={operator(e,t){const n=t.ast,r=e.functions;return i=>t2(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>t2(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>t2(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return t2(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=t2(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&JYt(o,r,s),l}}};const uKt="vega-lite",lKt='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',cKt="5.18.1",fKt=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],dKt="https://vega.github.io/vega-lite/",hKt="Vega-Lite is a concise high-level language for interactive visualization.",pKt=["vega","chart","visualization"],mKt="build/vega-lite.js",gKt="build/vega-lite.min.js",yKt="build/vega-lite.min.js",vKt="build/src/index",bKt="build/src/index.d.ts",_Kt={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},wKt=["bin","build","src","vega-lite*","tsconfig.json"],EKt={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},xKt={type:"git",url:"https://github.com/vega/vega-lite.git"},SKt="BSD-3-Clause",TKt={url:"https://github.com/vega/vega-lite/issues"},AKt={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},CKt={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},IKt={vega:"^5.24.0"},kKt={node:">=18"},RKt="yarn@1.22.19",NKt={name:uKt,author:lKt,version:cKt,collaborators:fKt,homepage:dKt,description:hKt,keywords:pKt,main:mKt,unpkg:gKt,jsdelivr:yKt,module:vKt,types:bKt,bin:_Kt,files:wKt,scripts:EKt,repository:xKt,license:SKt,bugs:TKt,devDependencies:AKt,dependencies:CKt,peerDependencies:IKt,engines:kKt,packageManager:RKt};function Dne(e){return!!e.or}function One(e){return!!e.and}function $ne(e){return!!e.not}function iO(e,t){if($ne(e))iO(e.not,t);else if(One(e))for(const n of e.and)iO(n,t);else if(Dne(e))for(const n of e.or)iO(n,t);else t(e)}function hE(e,t){return $ne(e)?{not:hE(e.not,t)}:One(e)?{and:e.and.map(n=>hE(n,t))}:Dne(e)?{or:e.or.map(n=>hE(n,t))}:t(e)}const nn=structuredClone;function O6e(e){throw new Error(e)}function Sx(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function qu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>Br(e)).join(",")})`};function Vn(e){if(lr(e))return e;const t=mt(e)?e:Br(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function XH(e){return e===!1||e===null}function Hn(e,t){return e.includes(t)}function pb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function Mne(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function $6e(e,...t){for(const n of t)PKt(e,n??{});return e}function PKt(e,t){for(const n of Ye(t))BS(e,n,t[n],!0)}function nh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function DKt(e,t){const n=Ye(e),r=Ye(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function M6e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Lne(e,t){for(const n of e)if(t.has(n))return!0;return!1}function QH(e){const t=new Set;for(const n of e){const i=Zh(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function Fne(e,t){return e===void 0||t===void 0?!0:Lne(QH(e),QH(t))}function jr(e){return Ye(e).length===0}const Ye=Object.keys,$o=Object.values,my=Object.entries;function LI(e){return e===!0||e===!1}function Ai(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function QA(e,t){return $ne(e)?`!(${QA(e.not,t)})`:One(e)?`(${e.and.map(n=>QA(n,t)).join(") && (")})`:Dne(e)?`(${e.or.map(n=>QA(n,t)).join(") || (")})`:t(e)}function IM(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&IM(e[n],t)&&delete e[n],jr(e)}function AR(e){return e.charAt(0).toUpperCase()+e.substr(1)}function jne(e,t="datum"){const n=Zh(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function L6e(e,t="datum"){return`${t}[${rt(Zh(e).join("."))}]`}function OKt(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Lc(e){return`${Zh(e).map(OKt).join("\\.")}`}function mb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function XS(e){return`${Zh(e).join(".")}`}function Tx(e){return e?Zh(e).length:0}function cs(...e){for(const t of e)if(t!==void 0)return t}let F6e=42;function j6e(e){const t=++F6e;return e?String(e)+t:t}function $Kt(){F6e=42}function B6e(e){return U6e(e)?e:`__${e}`}function U6e(e){return e.startsWith("__")}function FI(e){if(e!==void 0)return(e%360+360)%360}function MF(e){return lr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const uge=Object.getPrototypeOf(structuredClone({}));function Cl(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Cl(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Cl(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==uge.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==uge.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Cl(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function Br(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const om="row",am="column",LF="facet",Ci="x",po="y",ld="x2",rp="y2",Gy="xOffset",QS="yOffset",cd="radius",sg="radius2",Kc="theta",og="theta2",fd="latitude",dd="longitude",hd="latitude2",Fc="longitude2",nl="color",ip="fill",sp="stroke",rl="shape",ag="size",i_="angle",ug="opacity",Yy="fillOpacity",Ky="strokeOpacity",Xy="strokeWidth",Qy="strokeDash",CR="text",Ax="order",IR="detail",FF="key",gb="tooltip",jF="href",BF="url",UF="description",MKt={x:1,y:1,x2:1,y2:1},z6e={theta:1,theta2:1,radius:1,radius2:1};function V6e(e){return e in z6e}const Bne={longitude:1,longitude2:1,latitude:1,latitude2:1};function H6e(e){switch(e){case fd:return"y";case hd:return"y2";case dd:return"x";case Fc:return"x2"}}function q6e(e){return e in Bne}const LKt=Ye(Bne),Une={...MKt,...z6e,...Bne,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function pE(e){return e===nl||e===ip||e===sp}const W6e={row:1,column:1,facet:1},xc=Ye(W6e),zne={...Une,...W6e},FKt=Ye(zne),{order:mun,detail:gun,tooltip:yun,...jKt}=zne,{row:vun,column:bun,facet:_un,...BKt}=jKt;function UKt(e){return!!BKt[e]}function G6e(e){return!!zne[e]}const zKt=[ld,rp,hd,Fc,og,sg];function Y6e(e){return s_(e)!==e}function s_(e){switch(e){case ld:return Ci;case rp:return po;case hd:return fd;case Fc:return dd;case og:return Kc;case sg:return cd}return e}function gy(e){if(V6e(e))switch(e){case Kc:return"startAngle";case og:return"endAngle";case cd:return"outerRadius";case sg:return"innerRadius"}return e}function op(e){switch(e){case Ci:return ld;case po:return rp;case fd:return hd;case dd:return Fc;case Kc:return og;case cd:return sg}}function il(e){switch(e){case Ci:case ld:return"width";case po:case rp:return"height"}}function K6e(e){switch(e){case Ci:return"xOffset";case po:return"yOffset";case ld:return"x2Offset";case rp:return"y2Offset";case Kc:return"thetaOffset";case cd:return"radiusOffset";case og:return"theta2Offset";case sg:return"radius2Offset"}}function Vne(e){switch(e){case Ci:return"xOffset";case po:return"yOffset"}}function VKt(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const HKt=Ye(Une),{x:wun,y:Eun,x2:xun,y2:Sun,xOffset:Tun,yOffset:Aun,latitude:Cun,longitude:Iun,latitude2:kun,longitude2:Run,theta:Nun,theta2:Pun,radius:Dun,radius2:Oun,...Hne}=Une,qKt=Ye(Hne),qne={x:1,y:1},ap=Ye(qne);function fs(e){return e in qne}const Wne={theta:1,radius:1},WKt=Ye(Wne);function zF(e){return e==="width"?Ci:po}const X6e={xOffset:1,yOffset:1};function kR(e){return e in X6e}const{text:$un,tooltip:Mun,href:Lun,url:Fun,description:jun,detail:Bun,key:Uun,order:zun,...Q6e}=Hne,GKt=Ye(Q6e);function YKt(e){return!!Hne[e]}function KKt(e){switch(e){case nl:case ip:case sp:case ag:case rl:case ug:case Xy:case Qy:return!0;case Yy:case Ky:case i_:return!1}}const J6e={...qne,...Wne,...X6e,...Q6e},VF=Ye(J6e);function lg(e){return!!J6e[e]}function XKt(e,t){return JKt(e)[t]}const Z6e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:Vun,...QKt}=Z6e;function JKt(e){switch(e){case nl:case ip:case sp:case UF:case IR:case FF:case gb:case jF:case Ax:case ug:case Yy:case Ky:case Xy:case LF:case om:case am:return Z6e;case Ci:case po:case Gy:case QS:case fd:case dd:return QKt;case ld:case rp:case hd:case Fc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case ag:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case Qy:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case rl:return{point:"always",geoshape:"always"};case CR:return{text:"always"};case i_:return{point:"always",square:"always",text:"always"};case BF:return{image:"always"};case Kc:return{text:"always",arc:"always"};case cd:return{text:"always",arc:"always"};case og:case sg:return{arc:"always"}}}function pB(e){switch(e){case Ci:case po:case Kc:case cd:case Gy:case QS:case ag:case i_:case Xy:case ug:case Yy:case Ky:case ld:case rp:case og:case sg:return;case LF:case om:case am:case rl:case Qy:case CR:case gb:case jF:case BF:case UF:return"discrete";case nl:case ip:case sp:return"flexible";case fd:case dd:case hd:case Fc:case IR:case FF:case Ax:return}}const ZKt={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},eXt={count:1,min:1,max:1};function Lm(e){return!!e&&!!e.argmin}function Jy(e){return!!e&&!!e.argmax}function Gne(e){return mt(e)&&!!ZKt[e]}const tXt=new Set(["count","valid","missing","distinct"]);function e4e(e){return mt(e)&&tXt.has(e)}function nXt(e){return mt(e)&&Hn(["min","max"],e)}const rXt=new Set(["count","sum","distinct","valid","missing"]),iXt=new Set(["mean","average","median","q1","q3","min","max"]);function t4e(e){return Hy(e)&&(e=t5(e,void 0)),"bin"+Ye(e).map(t=>HF(e[t])?Ai(`_${t}_${my(e[t])}`):Ai(`_${t}_${e[t]}`)).join("")}function si(e){return e===!0||o_(e)&&!e.binned}function To(e){return e==="binned"||o_(e)&&e.binned===!0}function o_(e){return gt(e)}function HF(e){return e==null?void 0:e.param}function lge(e){switch(e){case om:case am:case ag:case nl:case ip:case sp:case Xy:case ug:case Yy:case Ky:case rl:return 6;case Qy:return 4;default:return 10}}function RR(e){return!!(e!=null&&e.expr)}function Cu(e){const t=Ye(e||{}),n={};for(const r of t)n[r]=bl(e[r]);return n}function n4e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=Sx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function $g(e){return mt(e)||je(e)&&mt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function Zy(e){return!!e.step}function sXt(e){return je(e)?!1:"fields"in e&&!("data"in e)}function oXt(e){return je(e)?!1:"fields"in e&&"data"in e}function Qp(e){return je(e)?!1:"field"in e&&"data"in e}const aXt={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},uXt=Ye(aXt),lXt={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},JH=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function r4e(e){const t=je(e.condition)?e.condition.map(cge):cge(e.condition);return{...bl(e),condition:t}}function bl(e){if(RR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function cge(e){if(RR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function ci(e){if(RR(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function cXt(e){return Rt(e)?e.signal:rt(e)}function fge(e){return Rt(e)?e.signal:rt(e.value)}function Rf(e){return Rt(e)?e.signal:e==null?null:rt(e)}function fXt(e,t,n){for(const r of n){const i=Fm(r,t.markDef,t.config);i!==void 0&&(e[r]=ci(i))}return e}function i4e(e){return[].concat(e.type,e.style??[])}function wr(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Fm(e,t,n,r)}function Fm(e,t,n,{vgChannel:r}={}){return cs(r?kM(e,t,n.style):void 0,kM(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function kM(e,t,n){return s4e(e,i4e(t),n)}function s4e(e,t,n){t=pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function o4e(e,t){return pt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function a4e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Cl(i,r))return;n.push(r)}),n}function u4e(e,t){return Cl(e,t)||!t?e:e?[...pt(e),...pt(t)].join(", "):t}function l4e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if(($g(n)||Rt(n))&&($g(r)||Rt(r)))return{explicit:e.explicit,value:u4e(n,r)};if($g(n)||Rt(n))return{explicit:e.explicit,value:n};if($g(r)||Rt(r))return{explicit:e.explicit,value:r};if(!$g(n)&&!Rt(n)&&!$g(r)&&!Rt(r))return{explicit:e.explicit,value:a4e(n,r)};throw new Error("It should never reach here")}function Yne(e){return`Invalid specification ${Br(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const dXt='Autosize "fit" only works for single views and layered views.';function dge(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function hge(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function pge(e){return e?`Dropping "fit-${e}" because spec has discrete ${il(e)}.`:'Dropping "fit" because spec has discrete size.'}function Kne(e){return`Unknown field for ${e}. Cannot calculate view size.`}function mge(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function hXt(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function pXt(e){return`The "nearest" transform is not supported for ${e} marks.`}function c4e(e){return`Selection not supported for ${e} yet.`}function mXt(e){return`Cannot find a selection named "${e}".`}const gXt="Scale bindings are currently only supported for scales with unbinned, continuous domains.",yXt="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",vXt="Legend bindings are only supported for selections over an individual field or encoding channel.";function bXt(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function _Xt(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const wXt="The same selection must be used to override scale domains in a layered view.",EXt='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function xXt(e){return`Unknown repeated value "${e}".`}function gge(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const SXt="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function TXt(e){return`Unrecognized parse "${e}".`}function yge(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const AXt="Attempt to add the same child twice.";function CXt(e){return`Ignoring an invalid transform: ${Br(e)}.`}const IXt='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function vge(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function kXt(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${Br(t)} is overridden by a child projection ${Br(n)}.`}const RXt="Arc marks uses theta channel rather than angle, replacing angle with theta.";function NXt(e){return`${e}Offset dropped because ${e} is continuous`}function PXt(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${Br(n)}}.`}function f4e(e){return`Invalid field type "${e}".`}function DXt(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function OXt(e){return`Invalid aggregation operator "${e}".`}function d4e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function $Xt(e){return`Position range does not support relative band size for ${e}.`}function ZH(e,t){return`Dropping ${Br(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const MXt="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function qF(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function LXt(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function FXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function jXt(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function BXt(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function mB(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function UXt(e){return`The ${e} for range marks cannot be an expression`}function zXt(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function VXt(e,t){return`Specified orient "${e}" overridden with "${t}".`}function HXt(e){return`Cannot use the scale property "${e}" with non-color channel.`}function qXt(e){return`Cannot use the relative band size with ${e} scale.`}function WXt(e){return`Using unaggregated domain with raw field has no effect (${Br(e)}).`}function GXt(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function YXt(e){return`Unaggregated domain is currently unsupported for log scale (${Br(e)}).`}function KXt(e){return`Cannot apply size to non-oriented mark "${e}".`}function XXt(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function QXt(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function h4e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function p4e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function JXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using ${Br(n)}.`}function ZXt(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${Br(n)} and ${Br(r)}). Using the union of the two domains.`}function eQt(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function tQt(e){return`Dropping sort property ${Br(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const bge="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",nQt="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",rQt="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",iQt="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function sQt(e){return`Cannot stack "${e}" if there is already "${e}2".`}function oQt(e){return`Stack is applied to a non-linear scale (${e}).`}function aQt(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function RM(e,t){return`Invalid ${e}: ${Br(t)}.`}function uQt(e){return`Dropping day from datetime ${Br(e)} as day cannot be combined with other units.`}function lQt(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function cQt(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function fQt(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function _ge(e){return`1D error band does not support ${e}.`}function m4e(e){return`Channel ${e} is required for "binned" bin.`}function dQt(e){return`Channel ${e} should not be used with "binned" bin.`}function hQt(e){return`Domain for ${e} is required for threshold scale.`}const g4e=IZ(CZ);let Cx=g4e;function pQt(e){return Cx=e,Cx}function mQt(){return Cx=g4e,Cx}function Je(...e){Cx.warn(...e)}function gQt(...e){Cx.debug(...e)}function a_(e){if(e&&gt(e)){for(const t of Qne)if(t in e)return!0}return!1}const y4e=["january","february","march","april","may","june","july","august","september","october","november","december"],yQt=y4e.map(e=>e.substr(0,3)),v4e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],vQt=v4e.map(e=>e.substr(0,3));function bQt(e){if(MF(e)&&(e=+e),lr(e))return e>4&&Je(RM("quarter",e)),e-1;throw new Error(RM("quarter",e))}function _Qt(e){if(MF(e)&&(e=+e),lr(e))return e-1;{const t=e.toLowerCase(),n=y4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=yQt.indexOf(r);if(i!==-1)return i;throw new Error(RM("month",e))}}function wQt(e){if(MF(e)&&(e=+e),lr(e))return e%7;{const t=e.toLowerCase(),n=v4e.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=vQt.indexOf(r);if(i!==-1)return i;throw new Error(RM("day",e))}}function Xne(e,t){const n=[];if(t&&e.day!==void 0&&Ye(e).length>1&&(Je(uQt(e)),e=nn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?_Qt(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?bQt(e.quarter):e.quarter;n.push(lr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?wQt(e.day):e.day;n.push(lr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function yb(e){const n=Xne(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function EQt(e){const n=Xne(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function xQt(e){const t=Xne(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const b4e={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},Qne=Ye(b4e);function SQt(e){return!!b4e[e]}function u_(e){return gt(e)?e.binned:_4e(e)}function _4e(e){return e&&e.startsWith("binned")}function Jne(e){return e.startsWith("utc")}function TQt(e){return e.substring(3)}const AQt={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function WF(e){return Qne.filter(t=>E4e(e,t))}function w4e(e){const t=WF(e);return t[t.length-1]}function E4e(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function CQt(e,t,{end:n}={end:!1}){const r=jne(t),i=Jne(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of Qne)E4e(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),EQt(a)}function x4e(e){if(!e)return;const t=WF(e);return`timeUnitSpecifier(${Br(t)}, ${Br(AQt)})`}function IQt(e,t,n){if(!e)return;const r=x4e(e);return`${n||Jne(e)?"utc":"time"}Format(${t}, ${r})`}function lo(e){if(!e)return;let t;return mt(e)?_4e(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),Jne(t.unit)&&(t.utc=!0,t.unit=TQt(t.unit)),t}function kQt(e){const{utc:t,...n}=lo(e);return n.unit?(t?"utc":"")+Ye(n).map(r=>Ai(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ye(n).map(r=>Ai(`_${r}_${n[r]}`)).join("")}function S4e(e,t=n=>n){const n=lo(e),r=w4e(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=T4e(r,n.step),a={...i,[o]:+i[o]+s};return`${t(yb(a))} - ${t(yb(i))}`}}const RQt={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function NQt(e){return!!RQt[e]}function T4e(e,t=1){if(NQt(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function PQt(e){return e==null?void 0:e.param}function Zne(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function ere(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function tre(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function nre(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function rre(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function ire(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function sre(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function DQt(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function A4e(e){return sre(e)||Zne(e)||ire(e)||ere(e)||nre(e)||tre(e)||rre(e)}function xd(e,t){return n5(e,{timeUnit:t,wrapTime:!0})}function OQt(e,t){return e.map(n=>xd(n,t))}function C4e(e,t=!0){const{field:n}=e,r=lo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:CQt(i,n)})`:o;if(Zne(e))return`${a}===${xd(e.equal,i)}`;if(ere(e)){const u=e.lt;return`${a}<${xd(u,i)}`}else if(nre(e)){const u=e.gt;return`${a}>${xd(u,i)}`}else if(tre(e)){const u=e.lte;return`${a}<=${xd(u,i)}`}else if(rre(e)){const u=e.gte;return`${a}>=${xd(u,i)}`}else{if(sre(e))return`indexof([${OQt(e.oneOf,i).join(",")}], ${a}) !== -1`;if(DQt(e))return ore(a,e.valid);if(ire(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+xd(l,i)+", "+xd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${xd(l,i)}`),c!==null&&f.push(`${a} <= ${xd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${Br(e)}`)}function ore(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function $Qt(e){return A4e(e)&&e.timeUnit?{...e,timeUnit:lo(e.timeUnit)}:e}const NR={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function MQt(e){return e==="quantitative"||e==="temporal"}function I4e(e){return e==="ordinal"||e==="nominal"}const vb=NR.quantitative,are=NR.ordinal,Ix=NR.temporal,ure=NR.nominal,JS=NR.geojson;function LQt(e){if(e)switch(e=e.toLowerCase(),e){case"q":case vb:return"quantitative";case"t":case Ix:return"temporal";case"o":case are:return"ordinal";case"n":case ure:return"nominal";case JS:return"geojson"}}const Wu={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},eq={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function FQt(e,t){const n=eq[e],r=eq[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const jQt={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function wge(e){return jQt[e]}const k4e=new Set(["linear","log","pow","sqrt","symlog"]),R4e=new Set([...k4e,"time","utc"]);function N4e(e){return k4e.has(e)}const P4e=new Set(["quantile","quantize","threshold"]),BQt=new Set([...R4e,...P4e,"sequential","identity"]),UQt=new Set(["ordinal","bin-ordinal","point","band"]);function co(e){return UQt.has(e)}function Wl(e){return BQt.has(e)}function Nf(e){return R4e.has(e)}function kx(e){return P4e.has(e)}const zQt={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function VQt(e){return!mt(e)&&!!e.name}function D4e(e){return e==null?void 0:e.param}function HQt(e){return e==null?void 0:e.unionWith}function qQt(e){return gt(e)&&"field"in e}const WQt={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:Hun,domain:qun,range:Wun,rangeMax:Gun,rangeMin:Yun,scheme:Kun,...GQt}=WQt,YQt=Ye(GQt);function tq(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Nf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Nf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Nf(e);case"nice":return Nf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Wl(e)&&!Hn(["log","time","utc","threshold","quantile"],e)}}function O4e(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return pE(e)?void 0:HXt(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function KQt(e,t){return Hn([are,ure],t)?e===void 0||co(e):t===Ix?Hn([Wu.TIME,Wu.UTC,void 0],e):t===vb?N4e(e)||kx(e)||e===void 0:!0}function XQt(e,t,n=!1){if(!lg(e))return!1;switch(e){case Ci:case po:case Gy:case QS:case Kc:case cd:return Nf(t)||t==="band"?!0:t==="point"?!n:!1;case ag:case Xy:case ug:case Yy:case Ky:case i_:return Nf(t)||kx(t)||Hn(["band","point","ordinal"],t);case nl:case ip:case sp:return t!=="band";case Qy:case rl:return t==="ordinal"||kx(t)}}function lre(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=fre(e);return Ze(n)&&!e4e(n.aggregate)&&i&&Nf(i.get("type"))?QQt({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function QQt({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return wr("invalid",n,i)===null?[JQt(e,t),r]:r}function JQt(e,t){const n=cre(e,!0),i=s_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function cre(e,t=!0){return ore(mt(e)?e:at(e,{expr:"datum"}),!t)}function ZQt(e){const{datum:t}=e;return a_(t)?yb(t):`${Br(t)}`}function k1(e,t,n,r){const i={};if(t&&(i.scale=t),up(e)){const{datum:s}=e;a_(s)?i.signal=yb(s):Rt(s)?i.signal=s.signal:RR(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function NM({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function eJt({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function fre({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(cn(t)){const f=o==null?void 0:o.get("type");if(tu(t)){c??(c=yy({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(si(d)||c&&h&&p===Ix)return a!=null&&a.impute?k1(t,s,{binSuffix:"mid"},{offset:u}):c&&!co(f)?NM({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):k1(t,s,$R(t,e)?{binSuffix:"range"}:{},{offset:u});if(To(d)){if(Ze(n))return NM({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je(m4e(e===Ci?ld:rp))}}return k1(t,s,co(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(Zf(t)){const f=t.value,d=u?{offset:u}:{};return{...JA(e,f),...d}}}return _n(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function JA(e,t){return Hn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Hn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:ci(t)}function bb(e){return e&&e!=="number"&&e!=="time"}function $4e(e,t,n){return`${e}(${t}${n?`, ${Br(n)}`:""})`}const tJt="  ";function dre({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if(bb(n))return Pf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=M4e(e,r,i),a=Rx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Pf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Pf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Pf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(Px(e)){const c=rJt({field:o,timeUnit:Ze(e)?(u=lo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:c_(e)&&((l=e.scale)==null?void 0:l.type)===Wu.UTC});return c?{signal:c}:void 0}if(t=nq({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&si(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:PR(o,c,t,n,s)}}else return t||Rx(e)==="quantitative"?{signal:`${j4e(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function M4e(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):ZQt(e)}function Pf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=M4e(e,r,i)),o!=="datum.value"&&Ze(e)&&si(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:PR(o,a,t,n,s)}}return{signal:$4e(n,o,t)}}function L4e(e,t,n,r,i,s){var o;if(!(mt(r)&&bb(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Rx(e)==="quantitative"&&(i.normalizedNumberFormatType&&Nx(e)&&e.stack==="normalize"||i.numberFormatType))){if(Nx(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return nq({type:"quantitative",config:i,normalizeStack:!0});if(Px(e)){const a=Ze(e)?(o=lo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:nJt({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return nq({type:t,specifiedFormat:n,config:i})}}function F4e(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(Px(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=lo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function nq({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(mt(t))return t;if(e===vb)return r?n.normalizedNumberFormat:n.numberFormat}function nJt({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:x4e(t)}:r?void 0:n.timeFormat)}function j4e(e,t){return`format(${e}, "${t||""}")`}function Ege(e,t,n,r){return bb(n)?$4e(n,e,t):j4e(e,(mt(t)?t:void 0)??r.numberFormat)}function PR(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return PR(e,t,i.numberFormat,i.numberFormatType,i);const s=Ege(e,n,r,i),o=Ege(t,n,r,i);return`${ore(e,!1)} ? "null" : ${s} + "${tJt}" + ${o}`}function rJt({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=mt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):IQt(t,e,s)}const au={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},B4e=au.arc,GF=au.area,YF=au.bar,iJt=au.image,KF=au.line,XF=au.point,sJt=au.rect,PM=au.rule,U4e=au.text,hre=au.tick,oJt=au.trail,pre=au.circle,mre=au.square,z4e=au.geoshape;function l_(e){return["line","area","trail"].includes(e)}function jI(e){return["rect","bar","image","arc"].includes(e)}const aJt=new Set(Ye(au));function Mh(e){return e.type}const uJt=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],lJt=["fill","fillOpacity"],cJt=[...uJt,...lJt],fJt={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},xge=Ye(fJt),dJt={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},hJt={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},pJt={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},V4e=Ye(pJt);function _b(e){return e&&e.band!=null}const mJt={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},H4e=5,gJt={binSpacing:1,continuousBandSize:H4e,minBandSize:.25,timeUnitBandPosition:.5},yJt={binSpacing:0,continuousBandSize:H4e,minBandSize:.25,timeUnitBandPosition:.5},vJt={thickness:1};function bJt(e){return Mh(e)?e.type:e}const QF="min",_Jt={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function Sge(e){return e in _Jt}function q4e(e){return!!(e!=null&&e.encoding)}function yh(e){return e&&(e.op==="count"||!!e.field)}function W4e(e){return e&&je(e)}function DR(e){return"row"in e||"column"in e}function gre(e){return!!e&&"header"in e}function JF(e){return"facet"in e}function wJt(e){return e.param}function EJt(e){return e&&!mt(e)&&"repeat"in e}function Tge(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function yre(e){return"sort"in e}function yy({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(cn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Fm("timeUnitBandPosition",n,r);if(si(s))return .5}}function G4e({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=il(e),u=wr(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Fm("timeUnitBandSize",r,i)};if(si(h)&&!co(s))return{band:1}}if(jI(r.type))return s?co(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Y4e(e,t,n,r){return si(e.bin)||e.timeUnit&&tu(e)&&e.type==="temporal"?yy({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function K4e(e){return e&&!!e.sort&&!e.field}function ZF(e){return e&&"condition"in e}function e5(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&Ze(t)}function OR(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&cn(t)}function xJt(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||Zf(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function Rx(e){return e==null?void 0:e.type}function up(e){return e&&"datum"in e}function a0(e){return tu(e)&&!OM(e)||DM(e)}function Age(e){return tu(e)&&e.type==="quantitative"&&!e.bin||DM(e)}function DM(e){return up(e)&&lr(e.datum)}function cn(e){return Ze(e)||up(e)}function tu(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function Zf(e){return e&&"value"in e&&"value"in e}function c_(e){return e&&("scale"in e||"sort"in e)}function Nx(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function X4e(e){return e&&"legend"in e}function Q4e(e){return e&&("format"in e||"formatType"in e)}function SJt(e){return qu(e,["legend","axis","header","scale"])}function TJt(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(CJt(e))n=B6e("count");else{let o;if(!t.nofn)if(TJt(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;si(a)?(o=t4e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?Jy(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Lm(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!u_(l)&&(o=kQt(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?XS(n):t.expr?L6e(n,t.expr)+s:Lc(n)+s}function OM(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(f4e(e.type))}function AJt(e){var t;return c_(e)&&kx((t=e.scale)==null?void 0:t.type)}function CJt(e){return e.aggregate==="count"}function IJt(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(si(r))return`${n} (binned)`;if(i&&!u_(i)){const a=(o=lo(i))==null?void 0:o.unit;if(a)return`${n} (${WF(a).join("-")})`}else if(s)return Jy(s)?`${n} for max ${s.argmax}`:Lm(s)?`${n} for min ${s.argmin}`:`${AR(s)} of ${n}`;return n}function kJt(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(Jy(t))return`${i} for argmax(${t.argmax})`;if(Lm(t))return`${i} for argmin(${t.argmin})`;const s=r&&!u_(r)?lo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||si(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const J4e=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return kJt(e);default:return IJt(e,t)}};let Z4e=J4e;function eFe(e){Z4e=e}function RJt(){eFe(J4e)}function mE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=vre(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?bre(s,t):void 0;return n?cs(i,s.title,o):i??s.title??o}function vre(e){if(Nx(e)&&e.axis)return e.axis;if(X4e(e)&&e.legend)return e.legend;if(gre(e)&&e.header)return e.header}function bre(e,t){return Z4e(e,t)}function $M(e){if(Q4e(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=vre(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function NJt(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if(yre(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!Jy(n)&&!Lm(n))return"quantitative";if(c_(e)&&((s=e.scale)!=null&&s.type))switch(eq[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function Lh(e){if(Ze(e))return e;if(e5(e))return e.condition}function Ms(e){if(cn(e))return e;if(OR(e))return e.condition}function tFe(e,t,n,r={}){if(mt(e)||lr(e)||Hy(e)){const i=mt(e)?"string":lr(e)?"number":"boolean";return Je(PXt(t,i,e)),{value:e}}return cn(e)?MM(e,t,n,r):OR(e)?{...e,condition:MM(e.condition,t,n,r)}:e}function MM(e,t,n,r){if(Q4e(e)){const{format:i,formatType:s,...o}=e;if(bb(s)&&!n.customFormatTypes)return Je(vge(t)),MM(o,t,n,r)}else{const i=Nx(e)?"axis":X4e(e)?"legend":gre(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if(bb(o)&&!n.customFormatTypes)return Je(vge(t)),MM({...e,[i]:a},t,n,r)}}return Ze(e)?_re(e,t,r):PJt(e)}function PJt(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=lr(n)?"quantitative":mt(n)?"nominal":a_(n)?"temporal":void 0,{...e,type:t}}function _re(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!Gne(r)&&!Jy(r)&&!Lm(r)&&(Je(OXt(r)),delete a.aggregate),i&&(a.timeUnit=lo(i)),o&&(a.field=`${o}`),si(s)&&(a.bin=t5(s,t)),To(s)&&!fs(t)&&Je(dQt(t)),tu(a)){const{type:u}=a,l=LQt(u);u!==l&&(a.type=l),u!=="quantitative"&&e4e(r)&&(Je(DXt(u,r)),a.type="quantitative")}else if(!Y6e(t)){const u=NJt(a,t);a.type=u}if(tu(a)){const{compatible:u,warning:l}=DJt(a,t)||{};u===!1&&Je(l)}if(yre(a)&&mt(a.sort)){const{sort:u}=a;if(Sge(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&Sge(l))return{...a,sort:{encoding:l,order:"descending"}}}if(gre(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function t5(e,t){return Hy(e)?{maxbins:lge(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:lge(t)}:e}const U_={compatible:!0};function DJt(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case om:case am:case LF:return OM(e)?U_:{compatible:!1,warning:FXt(t)};case Ci:case po:case Gy:case QS:case nl:case ip:case sp:case CR:case IR:case FF:case gb:case jF:case BF:case i_:case Kc:case cd:case UF:return U_;case dd:case Fc:case fd:case hd:return n!==vb?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:U_;case ug:case Yy:case Ky:case Xy:case ag:case og:case sg:case ld:case rp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:U_;case rl:case Qy:return!OM(e)&&!AJt(e)?{compatible:!1,warning:jXt(t)}:U_;case Ax:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:U_}}function Px(e){const{formatType:t}=$M(e);return t==="time"||!t&&OJt(e)}function OJt(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function n5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=lo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return RR(e)?a=e.expr:Rt(e)?a=e.signal:a_(e)?(o=!0,a=yb(e)):(mt(e)||lr(e))&&o&&(a=`datetime(${Br(e)})`,SQt(s)&&(lr(e)&&e<1e4||mt(e)&&isNaN(Date.parse(e)))&&(a=yb({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:Br(e)}function nFe(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!u_(e.timeUnit)?e.timeUnit:void 0,s=n5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function $R(e,t){return si(e.bin)?lg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const Cge={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function MR(e){return e==null?void 0:e.condition}const rFe=["domain","grid","labels","ticks","title"],$Jt={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},iFe={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},MJt={...iFe,style:1,labelExpr:1,encoding:1};function Ige(e){return!!MJt[e]}const LJt={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},sFe=Ye(LJt);function cg(e){return"mark"in e}class r5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return cg(t)?bJt(t.mark)===this.name:!1}}function R1(e,t){const n=e&&e[t];return n?je(n)?pb(n,r=>!!r.field):Ze(n)||e5(n):!1}function oFe(e,t){const n=e&&e[t];return n?je(n)?pb(n,r=>!!r.field):Ze(n)||up(n)||OR(n):!1}function aFe(e,t){if(fs(t)){const n=e[t];if((Ze(n)||up(n))&&(I4e(n.type)||Ze(n)&&n.timeUnit)){const r=Vne(t);return oFe(e,r)}}return!1}function wre(e){return pb(FKt,t=>{if(R1(e,t)){const n=e[t];if(je(n))return pb(n,r=>!!r.aggregate);{const r=Lh(n);return r&&!!r.aggregate}}return!1})}function uFe(e,t){const n=[],r=[],i=[],s=[],o={};return Ere(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=vre(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:mE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(Jy(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Lm(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),tu(a)&&si(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),$R(a,u)&&n.push(at(a,{binSuffix:"range"})),fs(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",Y6e(u)||(y.type=vb)}else if(d&&!u_(d)){i.push({timeUnit:d,field:l,as:g});const v=tu(a)&&a.type!==Ix&&"time";v&&(u===CR||u===gb?y.formatType=v:YKt(u)?y.legend={formatType:v,...y.legend}:fs(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function FJt(e,t,n){const r=XKt(t,n);if(r){if(r==="binned"){const i=e[t===ld?Ci:po];return!!(Ze(i)&&Ze(e[t])&&To(i.bin))}}else return!1;return!0}function jJt(e,t,n,r){const i={};for(const s of Ye(e))G6e(s)||Je(LXt(s));for(let s of HKt){if(!e[s])continue;const o=e[s];if(kR(s)){const a=VKt(s),u=i[a];if(Ze(u)&&MQt(u.type)&&Ze(o)&&!u.timeUnit){Je(NXt(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(RXt),s=Kc),!FJt(e,s,t)){Je(qF(s,t));continue}if(s===ag&&t==="line"){const a=Lh(e[s]);if(a!=null&&a.aggregate){Je(MXt);continue}}if(s===nl&&(n?"fill"in e:"stroke"in e)){Je(d4e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===IR||s===Ax&&!je(o)&&!Zf(o)||s===gb&&je(o)){if(o){if(s===Ax){const a=e[s];if(K4e(a)){i[s]=a;continue}}i[s]=pt(o).reduce((a,u)=>(Ze(u)?a.push(_re(u,s)):Je(ZH(u,s)),a),[])}}else{if(s===gb&&o===null)i[s]=null;else if(!Ze(o)&&!up(o)&&!Zf(o)&&!ZF(o)&&!Rt(o)){Je(ZH(o,s));continue}i[s]=tFe(o,s,r)}}return i}function i5(e,t){const n={};for(const r of Ye(e)){const i=tFe(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function BJt(e){const t=[];for(const n of Ye(e))if(R1(e,n)){const r=e[n],i=pt(r);for(const s of i)Ze(s)?t.push(s):e5(s)&&t.push(s.condition)}return t}function Ere(e,t,n){if(e)for(const r of Ye(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function UJt(e,t,n,r){return e?Ye(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function lFe(e,t){return Ye(t).reduce((n,r)=>{switch(r){case Ci:case po:case jF:case UF:case BF:case ld:case rp:case Gy:case QS:case Kc:case og:case cd:case sg:case fd:case dd:case hd:case Fc:case CR:case rl:case i_:case gb:return n;case Ax:if(e==="line"||e==="trail")return n;case IR:case FF:{const i=t[r];if(je(i)||Ze(i))for(const s of pt(i))s.aggregate||n.push(at(s,{}));return n}case ag:if(e==="trail")return n;case nl:case ip:case sp:case ug:case Yy:case Ky:case Qy:case Xy:{const i=Lh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function zJt(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function rq(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${xre(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=BJt(n).map(SJt);return{tooltip:[...i,...nh(s,Vn)]}}function xre(e){const{title:t,field:n}=e;return cs(t,n)}function Sre(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=xre(n);return cFe(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...mt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function cFe(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Mh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...Hy(e[t])?{}:e[t]}}]:[]}function fFe(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:IP(s,n),continuousAxisChannelDef2:IP(o,n),continuousAxisChannelDefError:IP(a,n),continuousAxisChannelDefError2:IP(u,n),continuousAxis:i}}function IP(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(fQt(n,t)),r}else return e}function dFe(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Mh(n)&&n.orient)return n.orient;if(a0(i)){if(a0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return Px(s)&&!Px(i)?"horizontal":"vertical"}return"horizontal"}else{if(a0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const LM="boxplot",VJt=["box","median","outliers","rule","ticks"],HJt=new r5(LM,pFe);function hFe(e){return lr(e)?"tukey":e}function pFe(e,{config:t}){e={...e,encoding:i5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Mh(n)?n:{type:n};i&&Je(c4e("boxplot"));const u=a.extent??t.boxplot.extent,l=wr("size",a,t),c=a.invalid,f=hFe(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:T}=qJt(e,u,t),S=XS(m.field),{color:A,size:C,...k}=b,N=ke=>Sre(a,g,m,ke,t.boxplot),O=N(k),D=N(b),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...k,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:$}}}}),M=rq([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?M:rq([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...O({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...O({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],P=[...f!=="tukey"?H:[],...D({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...F({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:P};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:mFe(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:H},{tooltip:he,...ve}=k,{scale:Ie,axis:be}=m,Ke=xre(m),Ue=qu(be,["title"]),yt=cFe(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Ke!==void 0?{title:Ke}:{},...Ie!==void 0?{scale:Ie}:{},...jr(Ue)?{}:{axis:Ue}},...ve,...A?{color:A}:{},...T?{tooltip:T}:{}}})[0];let it;const _e=[...d,...h,ce];return yt?it={transform:_e,layer:[yt,de]}:(it=de,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:P}]}}function mFe(e){const t=XS(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function qJt(e,t,n){const r=dFe(e,LM),{continuousAxisChannelDef:i,continuousAxis:s}=fFe(e,r,LM),o=i.field,a=XS(o),u=hFe(t),l=[...mFe(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=zJt(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=uFe(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Tre="errorbar",WJt=["ticks","rule"],GJt=new r5(Tre,gFe);function gFe(e,{config:t}){e={...e,encoding:i5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=yFe(e,Tre,t);delete s.size;const c=Sre(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function YJt(e,t){const{encoding:n}=e;if(KJt(n))return{orient:dFe(e,t),inputType:"raw"};const r=XJt(n),i=QJt(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(cn(a)&&cn(u))throw new Error(`${t} cannot have both x2 and y2`);if(cn(a)){if(a0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(cn(u)){if(a0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(cn(u)&&!cn(a))throw new Error(`${t} cannot have xError2 without xError`);if(cn(c)&&!cn(l))throw new Error(`${t} cannot have yError2 without yError`);if(cn(a)&&cn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(cn(a)){if(a0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(cn(l)){if(a0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function KJt(e){return(cn(e.x)||cn(e.y))&&!cn(e.x2)&&!cn(e.y2)&&!cn(e.xError)&&!cn(e.xError2)&&!cn(e.yError)&&!cn(e.yError2)}function XJt(e){return cn(e.x2)||cn(e.y2)}function QJt(e){return cn(e.xError)||cn(e.xError2)||cn(e.yError)||cn(e.yError2)}function yFe(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Mh(r)?r:{type:r};s&&Je(c4e(t));const{orient:l,inputType:c}=YJt(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=fFe(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=JJt(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:S,...A}=i,{bins:C,timeUnits:k,aggregate:N,groupby:O,encoding:D}=uFe(A,n),$=[...N,...g],F=c!=="raw"?[]:O,M=rq(v,f,D,b);return{transform:[...a.transform??[],...C,...k,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:D,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function JJt(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(cQt(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:AR(h)},{fieldPrefix:"upper_",titlePrefix:kge(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:kge(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:mE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:mE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:mE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(lQt(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:mb(mb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function kge(e,t,n){return`${AR(e)} ${n} ${t}`}const Are="errorband",ZJt=["band","borders"],eZt=new r5(Are,vFe);function vFe(e,{config:t}){e={...e,encoding:i5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=yFe(e,Are,t),l=o,c=Sre(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(_ge("interpolate")):l.tension&&Je(_ge("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const bFe={};function Cre(e,t,n){const r=new r5(e,t);bFe[e]={normalizer:r,parts:n}}function tZt(){return Ye(bFe)}Cre(LM,pFe,VJt);Cre(Tre,gFe,WJt);Cre(Are,vFe,ZJt);const nZt=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],_Fe={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},wFe={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},rZt=Ye(_Fe),iZt=Ye(wFe),sZt={header:1,headerRow:1,headerColumn:1,headerFacet:1},EFe=Ye(sZt),xFe=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],oZt={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},aZt={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ed="_vgsid_",uZt={point:{on:"click",fields:[ed],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Ire(e){return e==="legend"||!!(e!=null&&e.legend)}function gB(e){return Ire(e)&&gt(e)}function kre(e){return!!(e!=null&&e.select)}function SFe(e){const t=[];for(const n of e||[]){if(kre(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function lZt(e){return s5(e)||Nre(e)||Rre(e)}function Rre(e){return"concat"in e}function s5(e){return"vconcat"in e}function Nre(e){return"hconcat"in e}function TFe({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Fh(e){return gt(e)&&e.step!==void 0}function Rge(e){return e.view||e.width||e.height}const Nge=20,cZt={align:1,bounds:1,center:1,columns:1,spacing:1},fZt=Ye(cZt);function dZt(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(JF(e)&&!DR(e.facet)||Rre(e))&&(i.columns=o),s5(e)&&(i.columns=1);for(const a of fZt)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=lr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function iq(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function FM(e,t){const n=jM(e,t);return Fh(n)?n.step:AFe}function jM(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return cs(n,{step:e.step})}const AFe=20,hZt={continuousWidth:200,continuousHeight:200,step:AFe},pZt={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:hZt,mark:hJt,arc:{},area:{},bar:gJt,circle:{},geoshape:{},image:{},line:{},point:{},rect:yJt,rule:{color:"black"},square:{},text:{color:"black"},tick:vJt,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:zQt,projection:{},legend:oZt,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:uZt,style:{},title:{},facet:{spacing:Nge},concat:{spacing:Nge},normalizedNumberFormat:".0%"},_p=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Pge={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Dge={blue:_p[0],orange:_p[1],red:_p[2],teal:_p[3],green:_p[4],yellow:_p[5],purple:_p[6],pink:_p[7],brown:_p[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function mZt(e={}){return{signals:[{name:"color",value:gt(e)?{...Dge,...e}:Dge}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function gZt(e){return{signals:[{name:"fontSize",value:gt(e)?{...Pge,...e}:Pge}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function yZt(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function CFe(e){const t=Ye(e||{}),n={};for(const r of t){const i=e[r];n[r]=MR(i)?r4e(i):bl(i)}return n}function vZt(e){const t=Ye(e),n={};for(const r of t)n[r]=CFe(e[r]);return n}const bZt=[...V4e,...sFe,...EFe,"background","padding","legend","lineBreak","scale","style","title","view"];function IFe(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=jS({},nn(pZt),n?yZt(n):{},t?mZt(t):{},r?gZt(r):{},s||{});i&&BS(o,"selection",i,!0);const a=qu(o,bZt);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=bl(o[u]));for(const u of V4e)o[u]&&(a[u]=Cu(o[u]));for(const u of sFe)o[u]&&(a[u]=CFe(o[u]));for(const u of EFe)o[u]&&(a[u]=Cu(o[u]));return o.legend&&(a.legend=Cu(o.legend)),o.scale&&(a.scale=Cu(o.scale)),o.style&&(a.style=vZt(o.style)),o.title&&(a.title=Cu(o.title)),o.view&&(a.view=Cu(o.view)),a}const _Zt=new Set(["view",...aJt]),wZt=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],EZt={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...dJt};function xZt(e){e=nn(e);for(const t of wZt)delete e[t];if(e.axis)for(const t in e.axis)MR(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of nZt)delete e.legend[t];if(e.mark){for(const t of xge)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(SFe(e.params)),delete e.params);for(const t of _Zt){for(const r of xge)delete e[t][r];const n=EZt[t];if(n)for(const r of n)delete e[t][r];TZt(e,t)}for(const t of tZt())delete e[t];SZt(e);for(const t in e)gt(e[t])&&jr(e[t])&&delete e[t];return jr(e)?void 0:e}function SZt(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=n4e(e.title);jr(t)||(e.style["group-title"]={...e.style["group-title"],...t}),jr(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),jr(r)?delete e.title:e.title=r}function TZt(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};jr(s)||(e.style[n??t]=s),delete e[t]}function o5(e){return"layer"in e}function AZt(e){return"repeat"in e}function CZt(e){return!je(e.repeat)&&e.repeat.layer}class Pre{map(t,n){return JF(t)?this.mapFacet(t,n):AZt(t)?this.mapRepeat(t,n):Nre(t)?this.mapHConcat(t,n):s5(t)?this.mapVConcat(t,n):Rre(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(o5(t))return this.mapLayer(t,n);if(cg(t))return this.mapUnit(t,n);throw new Error(Yne(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const IZt={zero:1,center:1,normalize:1};function kZt(e){return e in IZt}const RZt=new Set([B4e,YF,GF,PM,XF,pre,mre,KF,U4e,hre]),NZt=new Set([YF,GF,B4e]);function z_(e){return Ze(e)&&Rx(e)==="quantitative"&&!e.bin}function Oge(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(z_(o)&&z_(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(z_(o))return t;if(z_(a))return i}else{if(z_(o))return s&&n==="vertical"?void 0:t;if(z_(a))return s&&n==="horizontal"?void 0:i}}function PZt(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function kFe(e,t){var m,g;const n=Mh(e)?e:{type:e},r=n.type;if(!RZt.has(r))return null;const i=Oge(t,"x",n)||Oge(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=PZt(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=qKt.reduce((y,v)=>{if(v!=="tooltip"&&R1(t,v)){const b=t[v];for(const w of pt(b)){const E=Lh(w);if(E.aggregate)continue;const T=at(E,{});(!T||!l.has(T))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?Hy(s.stack)?p=s.stack?"zero":null:p=s.stack:NZt.has(r)&&(p="zero"),!p||!kZt(p)||wre(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Wu.LINEAR&&s!=null&&s.stack&&Je(oQt(s.scale.type)),cn(t[op(i)])?(s.stack!==void 0&&Je(sQt(i)),null):(Ze(s)&&s.aggregate&&!rXt.has(s.aggregate)&&Je(aQt(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:l_(r),stackBy:h,offset:p}))}function RFe(e,t,n){const r=Cu(e),i=wr("orient",r,n);if(r.orient=MZt(r.type,t,i),i!==void 0&&i!==r.orient&&Je(VXt(r.orient,i)),r.type==="bar"&&r.orient){const u=wr("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:mJt[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=wr("opacity",r,n),o=wr("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=OZt(r.type,t)),wr("cursor",r,n)===void 0&&(r.cursor=DZt(r,t,n)),r}function DZt(e,t,n){return t.href||e.href||wr("href",e,n)?"pointer":e.cursor}function OZt(e,t){if(Hn([XF,hre,pre,mre],e)&&!wre(t))return .7}function $Zt(e,t,{graticule:n}){if(n)return!1;const r=Fm("filled",e,t),i=e.type;return cs(r,i!==XF&&i!==KF&&i!==PM)}function MZt(e,t,n){switch(e){case XF:case pre:case mre:case U4e:case sJt:case iJt:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case YF:if(Ze(r)&&(To(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(To(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===vb&&!si(r.bin)||DM(r))&&Ze(i)&&To(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===vb&&!si(i.bin)||DM(i))&&Ze(r)&&To(r.bin)?"vertical":"horizontal"}case PM:if(s&&!(Ze(r)&&To(r.bin))&&o&&!(Ze(i)&&To(i.bin)))return;case GF:if(o)return Ze(i)&&To(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&To(r.bin)?"vertical":"horizontal";if(e===PM){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case KF:case hre:{const a=Age(r),u=Age(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=tu(r)&&r.type===Ix,c=tu(i)&&i.type===Ix;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function LZt(e){const{point:t,line:n,...r}=e;return Ye(r).length>1?r:r.type}function FZt(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:qu(e[t],["point","line"])});return e}function yB(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function $ge(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class jZt{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(cg(t)){const{mark:r,encoding:i}=t,s=Mh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!yB(s,n[s.type],i);case"area":return!!yB(s,n[s.type],i)||!!$ge(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=i5(l,i),d=Mh(a)?a:{type:a},h=yB(d,i[d.type],f),p=d.type==="area"&&$ge(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:LZt({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:qu(f,["shape"])}],g=kFe(RFe(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=qu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Sx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Sx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:FZt(i)})}}function BZt(e,t){return t?DR(e)?PFe(e,t):NFe(e,t):e}function vB(e,t){return t?PFe(e,t):e}function sq(e,t,n){const r=t[e];if(EJt(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(xXt(r.repeat));return}return t}function NFe(e,t){if(e=sq("field",e,t),e!==void 0){if(e===null)return null;if(yre(e)&&yh(e.sort)){const n=sq("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Mge(e,t){if(Ze(e))return NFe(e,t);{const n=sq("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function Lge(e,t){if(cn(e)){const n=Mge(e,t);if(n)return n;if(ZF(e))return{condition:e.condition}}else{if(OR(e)){const n=Mge(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function PFe(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>Lge(s,t)).filter(s=>s);else{const s=Lge(i,t);s!==void 0&&(n[r]=s)}}return n}class UZt{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(cg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Mh(r)&&r.type==="line")for(const i of zKt){const s=s_(i),o=n[s];if(n[i]&&(Ze(o)&&!To(o.bin)||up(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(zXt(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class zZt extends Pre{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[HJt,GJt,eZt,new jZt,new UZt]}map(t,n){if(cg(t)){const r=R1(t.encoding,om),i=R1(t.encoding,am),s=R1(t.encoding,LF);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=vB(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return CZt(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ai(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=qu(t,["columns"]),Je(gge("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${Ai(p)}`:(r.row?`row_${Ai(m)}`:"")+(r.column?`column_${Ai(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(qu(b,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return DR(r)&&t.columns&&(t=qu(t,["columns"]),Je(gge("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=jge({parentProjection:o,projection:i}),l=Fge({parentEncoding:s,encoding:vB(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=vB(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(BXt([...r?[om]:[],...i?[am]:[]]));const o={},a={};for(const u of[om,am]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:BZt(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Fge({parentEncoding:n,encoding:s,layer:!0}),parentProjection:jge({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Fge({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ye(e),...Ye(t)]);for(const s of i){const o=t[s],a=e[s];if(cn(o)){const u={...a,...o};r[s]=u}else OR(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||Zf(a)||Rt(a)||cn(a)||je(a))&&(r[s]=a)}}else r=t;return!r||jr(r)?void 0:r}function jge(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(kXt({parentProjection:t,projection:n})),n??t}function Dre(e){return"filter"in e}function VZt(e){return(e==null?void 0:e.stop)!==void 0}function DFe(e){return"lookup"in e}function HZt(e){return"data"in e}function qZt(e){return"param"in e}function WZt(e){return"pivot"in e}function GZt(e){return"density"in e}function YZt(e){return"quantile"in e}function KZt(e){return"regression"in e}function XZt(e){return"loess"in e}function QZt(e){return"sample"in e}function JZt(e){return"window"in e}function ZZt(e){return"joinaggregate"in e}function een(e){return"flatten"in e}function ten(e){return"calculate"in e}function OFe(e){return"bin"in e}function nen(e){return"impute"in e}function ren(e){return"timeUnit"in e}function ien(e){return"aggregate"in e}function sen(e){return"stack"in e}function oen(e){return"fold"in e}function aen(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function uen(e){return e.map(t=>Dre(t)?{filter:hE(t.filter,$Qt)}:t)}class len extends Pre{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Bge(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Bge(t,n),t.encoding){const r={};for(const[i,s]of my(t.encoding))r[i]=$Fe(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:my(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of $o(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Bge(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Dre(s))return{filter:oq(s,t)};if(OFe(s)&&o_(s.bin))return{...s,bin:MFe(s.bin)};if(DFe(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function $Fe(e,t){var r,i;const n=nn(e);if(Ze(n)&&o_(n.bin)&&(n.bin=MFe(n.bin)),c_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(ZF(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:oq(s,t)}});else{const{selection:s,param:o,test:a,...u}=$Fe(n.condition,t);n.condition=o?n.condition:{...u,test:oq(n.condition,t)}}return n}function MFe(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function oq(e,t){const n=r=>hE(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):hE(e.test||e.filter,r=>r.selection?n(r.selection):r)}class aq extends Pre{map(t,n){const r=n.selections??[];if(t.params&&!cg(t)){const i=[];for(const s of t.params)kre(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(mt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=aq.prototype[e];aq.prototype[e]=function(n,r){return t.call(this,n,cen(n,r))}}function cen(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function LFe(e,t){t===void 0&&(t=IFe(e.config));const n=pen(e,t),{width:r,height:i}=e,s=men(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const fen=new zZt,den=new len,hen=new aq;function pen(e,t={}){const n={config:t};return hen.map(fen.map(den.map(e,n),n),n)}function Uge(e){return mt(e)?{type:e}:e??{}}function men(e,t,n){let{width:r,height:i}=t;const s=cg(e)||o5(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(dge("width")),r=void 0),i=="container"&&(Je(dge("height")),i=void 0));const a={type:"pad",...o,...n?Uge(n.autosize):{},...Uge(e.autosize)};if(a.type==="fit"&&!s&&(Je(dXt),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(hge("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(hge("height")),!Cl(a,{type:"pad"}))return a}function gen(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function yen(e){return e?`fit-${zF(e)}`:"fit"}const ven=["background","padding"];function zge(e,t){const n={};for(const r of ven)e&&e[r]!==void 0&&(n[r]=bl(e[r]));return t&&(n.params=e.params),n}class fg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new fg(nn(this.explicit),nn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return cs(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ye(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Dd(e){return{explicit:!0,value:e}}function fl(e){return{explicit:!1,value:e}}function FFe(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:a5(t,n,r,i)}}function a5(e,t,n,r){return e.explicit&&t.explicit&&Je(JXt(n,r,e.value,t.value)),e}function vy(e,t,n,r,i=a5){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Cl(e.value,t.value)?e:i(e,t,n,r)}class ben extends fg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function Dx(e){return"url"in e}function BI(e){return"values"in e}function jFe(e){return"name"in e&&!Dx(e)&&!BI(e)&&!D0(e)}function D0(e){return e&&(BFe(e)||UFe(e)||Ore(e))}function BFe(e){return"sequence"in e}function UFe(e){return"sphere"in e}function Ore(e){return"graticule"in e}var _i;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(_i||(_i={}));function zFe(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Lc(i.field),i}function wb(e,t=!0,n=wa){if(je(e)){const r=e.map(i=>wb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(a_(e))return n(t?yb(e):xQt(e));return t?n(Br(e)):e}function _en(e,t){for(const n of $o(e.component.selection??{})){const r=n.name;let i=`${r}${_y}, ${n.resolve==="global"?"true":`{unit: ${N1(e)}}`}`;for(const s of f5)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+Jen,on:[{events:{signal:n.name+_y},update:`modify(${rt(n.name+Eb)}, ${i})`}]})}return $re(t)}function wen(e,t){if(e.component.selection&&Ye(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:Wy("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return $re(t)}function Een(e,t){let n=!1;for(const r of $o(e.component.selection??{})){const i=r.name,s=rt(i+Eb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${o5e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of f5)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),$re(t)}function xen(e,t){const n=[...t],r=N1(e,{escape:!1});for(const i of $o(e.component.selection??{})){const s={name:i.name+Eb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ed}}]),i.init){const a=i.project.items.map(zFe);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[ed]:wb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:wb(u,!1)}))}n.filter(a=>a.name===i.name+Eb).length||n.push(s)}return n}function VFe(e,t){for(const n of $o(e.component.selection??{}))for(const r of f5)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function Sen(e,t){for(const n of e.children)Gi(n)&&(t=VFe(n,t));return t}function Ten(e,t,n,r){const i=f5e(e,t.param,t);return{signal:Wl(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function $re(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Mr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(AXt);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Gu extends Mr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${j6e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function bB(e){return e.as!==void 0}function Vge(e){return`${e}_end`}class vh extends Mr{clone(){return new vh(null,nn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(u_(u)){if(Gi(n)){const{mark:c,markDef:f,config:d}=n,h=yy({fieldDef:s,markDef:f,config:d});(jI(c)||h)&&(l={timeUnit:lo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Gi(n)){const{mark:c,markDef:f,config:d}=n,h=yy({fieldDef:s,markDef:f,config:d});jI(c)&&fs(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[Vn(l)]=l)}return i},{});return jr(r)?null:new vh(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=lo(r),o={...i,timeUnit:s};return new vh(t,{[Vn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of my(this.timeUnits)){const s=bB(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set($o(this.timeUnits).map(t=>bB(t)?t.as:Vge(t.field)))}dependentFields(){return new Set($o(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${Vn(this.timeUnits)}`}assemble(){const t=[];for(const n of $o(this.timeUnits)){const{rectBandPosition:r}=n,i=lo(n.timeUnit);if(bB(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Lc(s),type:"timeunit",...a?{units:WF(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Hge(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=HFe({timeUnit:i,field:o}),u=Vge(o);t.push({type:"formula",expr:a,as:u}),t.push(...Hge([o,u],r,i))}}return t}}const u5="offsetted_rect_start",l5="offsetted_rect_end";function HFe({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=w4e(r),{part:o,step:a}=T4e(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Hge([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:qge([HFe({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${u5}`},{type:"formula",expr:qge([i,s],n+.5),as:`${e}_${l5}`}]}return[]}function qge([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const LR="_tuple_fields";class Aen{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const Cen={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new Aen),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ai(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ai(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?pt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ye(p))UKt(m)?(h||(h=[])).push(m):l==="interval"?(Je(EXt),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(hXt(p,m.aggregate));continue}else if(!g){Je(mge(p));continue}if(m.timeUnit&&!u_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[Vn(y)]=y}if(!s[g]){const y=l==="interval"&&lg(p)&&Wl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===ed,q6e(p)?(v.geoChannel=p,v.channel=H6e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(mge(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===ed}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),jr(o)||(i.timeUnit=new vh(null,o))},signals:(e,t,n)=>{const r=t.name+LR;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(zFe)})}},um={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!lg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(yXt),!s||!Wl(o)){Je(gXt);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Wge(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(o5e)>=0)i.update=`{${r.map(o=>`${rt(Lc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Lc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Wge(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function uq(e,t){return`domain(${rt(e.scaleName(t))})`}function Wge(e){return e.parent&&rT(e.parent)&&!e.parent.parent}const gE="_brush",qFe="_scale_trigger",n2="geo_interval_init_tick",WFe="_init",Ien="_center",ken={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[ed],i.encodings||(i.encodings=n.value?Ye(n.value):[dd,fd]),n.select={type:"interval",...i}}if(t.translate&&!um.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+gE)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+_y,s=$o(t.project.hasChannel).filter(a=>a.channel===Ci||a.channel===po),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(Ren(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+Ien,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+WFe,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${N1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:n2}]:[]],update:b}]})}else{if(!um.defined(t)){const l=r+qFe,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Wl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${N1(e)}, fields: ${r+LR}, values`;return n.concat({name:i,...o?{init:`{${u}: ${wb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Gi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===n2).length||n.unshift({name:n2,value:null,on:[{events:"timer{1}",update:`${n2} === null ? {} : ${n2}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Eb)})`;if(um.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ye(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${N1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ye(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+gE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+gE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function Ren(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ci?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=um.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:wb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+qFe},update:Wl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:wb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ci?0:1,h=t.name+WFe,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const Nen={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+LR,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=$o(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+gE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${N1(e)}, `;if(t.project.hasSelectionId)l+=`${ed}: ${o}[${rt(ed)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+_y,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function ZS(e,t,n,r){const i=ZF(t)&&t.condition,s=r(t);if(i){const a=pt(i).map(u=>{const l=r(u);if(wJt(u)){const{param:c,empty:f}=u;return{test:c5e(e,{param:c,empty:f}),...l}}else return{test:zM(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function Mre(e,t="text"){const n=e.encoding[t];return ZS(e,n,t,r=>c5(r,e.config))}function c5(e,t,n="datum"){if(e){if(Zf(e))return ci(e.value);if(cn(e)){const{format:r,formatType:i}=$M(e);return dre({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function GFe(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:Gge({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return ZS(e,o,"tooltip",u=>{const l=c5(u,i,a);if(l)return l;if(u===null)return;let c=wr("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),mt(c))return{value:c};if(gt(c))return Rt(c)?c:c.content==="encoding"?Gge(n,s,i,t):{signal:a}})}}function YFe(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=s_(f),h=tu(c)?c:{...c,type:e[d].type},p=h.title||bre(h,i),m=pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(fs(f)){const y=f==="x"?"x2":"y2",v=Lh(e[y]);if(To(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:T}=$M(h);g=PR(b,w,E,T,i),s[y]=!0}}if((fs(f)||f===Kc||f===cd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=$M(h);g=dre({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=c5(h,i,o).signal),a.push({channel:f,key:m,value:g})}Ere(e,(c,f)=>{Ze(c)?u(c,f):e5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function Gge(e,t,n,{reactiveGeom:r}={}){const i=YFe(e,t,n,{reactiveGeom:r}),s=my(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function Pen(e){const{markDef:t,config:n}=e,r=wr("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},...Den(e),...Oen(e)}}function Den(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=wr("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in lXt?{}:{ariaRoleDescription:{value:t}}}function Oen(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return ZS(e,s,"description",u=>c5(u,e.config));const o=wr("description",n,r);if(o!=null)return{description:ci(o)};if(r.aria===!1)return{};const a=YFe(t,i,r);if(!jr(a))return{description:{signal:my(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function eo(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=wr(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=ci(u)));const l=i[e];return ZS(t,l,o??e,c=>fre({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function KFe(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??wr("filled",n,i),a=Hn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=wr(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=wr(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:ci(u)}:{},...l?{stroke:ci(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(d4e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...eo("color",e,{vgChannel:c,defaultValue:o?u:l}),...eo("fill",e,{defaultValue:r.fill?u:void 0}),...eo("stroke",e,{defaultValue:r.stroke?l:void 0})}}function $en(e){const{encoding:t,mark:n}=e,r=t.order;return!l_(n)&&Zf(r)?ZS(e,r,"zindex",i=>ci(i.value)):{}}function Ox({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:fre({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:ci(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function da(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[op(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=Ox({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=Lre({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&fs(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:Men({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function Men(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(cn(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return NM({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return k1(n,r,{suffix:"end"},{offset:s})}return lre(e)}function Lre({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=s_(n),u=gy(n),l=wr(n,s,o,{vgChannel:u});if(l!==void 0)return JA(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Hn([Wu.LOG,Wu.TIME,Wu.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[il(n)],mult:.5}}}}const Len={left:"x",center:"xc",right:"x2"},Fen={top:"y",middle:"yc",bottom:"y2"};function XFe(e,t,n,r="middle"){if(e==="radius"||e==="theta")return gy(e);const i=e==="x"?"align":"baseline",s=wr(i,t,n);let o;return Rt(s)?(Je(UXt(i)),o=void 0):o=s,e==="x"?Len[o||(r==="top"?"left":"center")]:Fen[o||r]}function BM(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?QFe(e,t,{defaultPos:n,defaultPos2:r}):da(e,t,{defaultPos:n})}function QFe(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=op(e),a=il(e),u=jen(t,r,o),l=u[a]?XFe(e,i,s):gy(e);return{...da(e,t,{defaultPos:n,vgChannel:l}),...u}}function jen(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=s_(n),l=il(n),c=gy(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?Ox({channel:n,markDef:s,encoding:r,model:e}):Ox({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=il(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Ben({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:kP(n,s)||kP(n,{[n]:kM(n,s,a.style),[l]:kM(l,s,a.style)})||kP(n,a[i])||kP(n,a.mark)||{[c]:Lre({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Ben({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return cn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?k1(t,s,{suffix:"start"},{offset:u}):lre({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function kP(e,t){const n=il(e),r=gy(e);if(t[r]!==void 0)return{[r]:JA(e,t[r])};if(t[e]!==void 0)return{[r]:JA(e,t[e])};if(t[n]){const i=t[n];if(_b(i))Je($Xt(n));else return{[n]:JA(e,i)}}}function by(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=op(t),a=il(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??wr("size",i,n,{vgChannel:a}),p=K6e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(si(u.bin)||To(u.bin)||u.timeUnit&&!l)&&!(h&&!_b(h))&&!r[p]&&!co(f)?Ven({fieldDef:u,fieldDef2:l,channel:t,model:e}):(cn(u)&&co(f)||m)&&!l?zen(u,t,e):QFe(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Uen(e,t,n,r,i,s,o){if(_b(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Fm("minBandSize",{type:o},r);return{signal:c?`max(${Rf(c)}, ${l})`:l}}else i.band!==1&&(Je(qXt(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(Zy(u)&&lr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=cs(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(lr(f))return{signal:`${1-f} * ${e}`}}return{value:FM(r.view,e)-2}}function zen(e,t,n){var C,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=il(t),f=op(t),d=K6e(t),h=n.scaleName(d),p=n.getScaleComponent(Vne(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=eo("size",n,{vgChannel:c,defaultRef:ci(r.size)}):Je(KXt(r.type)));const y=!!g,v=G4e({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:Uen(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&_b(v)&&!y?"top":"middle",w=XFe(t,r,s,b),E=w==="xc"||w==="yc",{offset:T,offsetType:S}=Ox({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=lre({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:Lre({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:_b(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const N=gy(f),O=g[c],D=T?{...O,offset:T}:O;return{[w]:A,[N]:je(A)?[A[0],{...A[1],offset:D}]:{...A,offset:D}}}}function Yge(e,t,n,r,i,s,o){if(V6e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=Rf(n),c=Rf(i),f=Rf(r),d=Rf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Ven({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=G4e({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=fs(n)?wr("binSpacing",s,i)??0:0,m=op(n),g=gy(n),y=gy(m),v=Fm("minBandSize",s,i),{offset:b}=Ox({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=Ox({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=eJt({fieldDef:e,scaleName:u}),T=Yge(n,p,c,h,b,v,E),S=Yge(m,p,c,h,w??b,v,E),A=Rt(f)?{signal:`(1-${f.signal})/2`}:_b(f)?(1-f.band)/2:.5,C=yy({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(si(e.bin)||e.timeUnit){const N=e.timeUnit&&C!==.5;return{[y]:Kge({fieldDef:e,scaleName:u,bandPosition:A,offset:S,useRectOffsetField:N}),[g]:Kge({fieldDef:e,scaleName:u,bandPosition:Rt(A)?{signal:`1-${A.signal}`}:1-A,offset:T,useRectOffsetField:N})}}else if(To(e.bin)){const N=k1(e,u,{},{offset:S});if(Ze(t))return{[y]:N,[g]:k1(t,u,{},{offset:T})};if(o_(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Je(m4e(m))}function Kge({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return NM({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:u5,endSuffix:l5}:{}})}const Hen=new Set(["aria","width","height"]);function Xc(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?KFe(e):{};return{...qen(e.markDef,t),...Xge(e,"fill",n),...Xge(e,"stroke",r),...eo("opacity",e),...eo("fillOpacity",e),...eo("strokeOpacity",e),...eo("strokeWidth",e),...eo("strokeDash",e),...$en(e),...GFe(e),...Mre(e,"href"),...Pen(e)}}function Xge(e,t,n){const{config:r,mark:i,markDef:s}=e;if(wr("invalid",s,r)==="hide"&&n&&!l_(i)){const a=Wen(e,{invalid:!0,channels:VF});if(a)return{[t]:[{test:a,value:null},...pt(n)]}}return n?{[t]:n}:{}}function qen(e,t){return uXt.reduce((n,r)=>(!Hen.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=ci(e[r])),n),{})}function Wen(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Wl(u)&&(s[l]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>cre(o,t)).join(` ${s} `)}}function Fre(e){const{config:t,markDef:n}=e;if(wr("invalid",n,t)){const i=Gen(e,{channels:ap});if(i)return{defined:{signal:i}}}return{}}function Gen(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Wl(l)&&(s[c]=!0)}return s},{}),i=Ye(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>cre(o,t)).join(` ${s} `)}}function Qge(e,t){if(t!==void 0)return{[e]:ci(t)}}const _B="voronoi",JFe={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(_B)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(l_(s))return Je(pXt(s)),n;const o={name:e.getName(_B),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...GFe(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(_B)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},ZFe={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Ire(e.bind),parse:(e,t,n)=>a5e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=JFe.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ai(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:wb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+_y)[0],o=r+LR,a=i.items.map(l=>Ai(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},UM="_toggle",e5e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+UM,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+_y,r=t.name+UM;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${N1(e)}}, `)+`${r} ? ${n} : null`}},Yen={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=mt(t.clear)?Wy(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(ZFe.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ai(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+_y);r(i,"null"),e5e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+UM),r(i,"false"))}return n}},t5e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Ire(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ed;return t&&!n&&Je(vXt),t&&n},parse:(e,t,n)=>{const r=nn(n);if(r.select=mt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},a5e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=gB(t.bind)?t.bind.legend:"click",s=mt(i)?Wy(i,"view"):pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=gB(t.bind)&&t.bind.legend,s=o=>a=>{const u=nn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ai(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+_y),o=r+LR,a=i.items.filter(d=>d.hasLegend).map(d=>Ai(`${r}_${Ai(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+UM),f=gB(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Ken(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of $o(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&t5e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const n5e="_translate_anchor",r5e="_translate_delta",Xen={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=um.defined(t),s=r+n5e,{x:o,y:a}=t.project.hasChannel;let u=Wy(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+gE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?uq(e,Ci):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?uq(e,po):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+r5e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Jge(e,t,o,"width",n),a!==void 0&&Jge(e,t,a,"height",n),n}};function Jge(e,t,n,r,i){const s=t.name,o=s+n5e,a=s+r5e,u=n.channel,l=um.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ci?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const i5e="_zoom_anchor",s5e="_zoom_delta",Qen={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=um.defined(t),s=r+s5e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ci)),l=rt(e.scaleName(po));let c=Wy(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+gE,f))),n.push({name:r+i5e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&Zge(e,t,o,"width",n),a!==void 0&&Zge(e,t,a,"height",n),n}};function Zge(e,t,n,r,i){const s=t.name,o=n.channel,a=um.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?uq(e,o):u.name,h=s+s5e,p=`${s}${i5e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Eb="_store",_y="_tuple",Jen="_modify",o5e="vlSelectionResolve",f5=[Nen,ken,Cen,e5e,ZFe,um,t5e,Yen,Xen,Qen,JFe];function Zen(e){let t=e.parent;for(;t&&!Pl(t);)t=t.parent;return t}function N1(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=Zen(e);if(r){const{facet:i}=r;for(const s of xc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function jre(e){return $o(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function a5e(e,t){(mt(t.select)||!t.select.on)&&delete e.events,(mt(t.select)||!t.select.clear)&&delete e.clear,(mt(t.select)||!t.select.toggle)&&delete e.toggle}function lq(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...lq(e.object)),t.push(...lq(e.property))),t)}function u5e(e){return e.object.type==="MemberExpression"?u5e(e.object):e.object.name==="datum"}function l5e(e){const t=sne(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&u5e(r)&&n.add(lq(r).slice(1).join("."))}),n}class eT extends Mr{clone(){return new eT(null,this.model,nn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=zM(this.model,this.filter,this),this._dependentFields=l5e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function etn(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ai(i.name),o=i.select,a=mt(o)?o:o.type,u=gt(o)?nn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=nn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:mt(u.on)?Wy(u.on,"scope"):pt(nn(u.on))},f=nn(i);for(const d of f5)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function c5e(e,t,n,r="datum"){const i=mt(t)?t:t.param,s=Ai(i),o=rt(s+Eb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function f5e(e,t,n){const r=Ai(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Lc(s))}]`}function ttn(e,t){for(const[n,r]of my(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Gu(new eT(t,e,{param:n}),i,_i.Lookup,e.component.data.outputNodeRefCounts)}}function zM(e,t,n){return QA(t,r=>mt(r)?r:PQt(r)?c5e(e,r,n):C4e(r))}function ntn(e,t){if(e)return je(e)&&!$g(e)?e.map(n=>bre(n,t)).join(", "):e}function wB(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function Q2(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=$Jt[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(MR(m)){const{condition:g,...y}=m,v=pt(g),b=Cge[h];if(b){const{vgProp:w,part:E}=b,T=[...v.map(S=>{const{test:A,...C}=S;return{test:zM(null,A),...C}}),y];wB(c,E,w,T),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:T,...S}=E;return`${zM(null,T)} ? ${fge(S)} : `}).join("")+fge(y)};c[h]=w}}else if(Rt(m)){const g=Cge[h];if(g){const{vgProp:y,part:v}=g;wB(c,v,y,m),delete c[h]}}Hn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},jr(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:cs(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=mb(a,"datum.label",c.encode.labels.update.text.signal)),wB(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of rFe)e.hasAxisPart(p)||delete c.encode[p];jr(c.encode)&&delete c.encode}const h=ntn(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:cs(l,0)}}}}function d5e(e){const{axes:t}=e.component,n=[];for(const r of ap)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function rtn(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>Q2(i,"grid",t)),...r.map(i=>Q2(i,"grid",t)),...n.map(i=>Q2(i,"main",t)),...r.map(i=>Q2(i,"main",t))].filter(i=>i)}function e0e(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ye(o),...Ye(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${Rf(o[c])} : ${Rf(a[c])}`};return l}return t[i]})])}function itn(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:N4e(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${AR(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:e0e(a,r,e,n),vgAxisConfig:e0e(u,r,e,n),axisConfigStyle:stn([...u,...a],r)}}function stn(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function cq(e,t,n,r={}){var s;const i=s4e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const t0e={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??otn(n,e),gridScale:({model:e,channel:t})=>atn(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||p5e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||h5e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??ltn(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??ctn(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??dtn({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:htn,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=m5e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return a4e(i?[Tge(i)]:[],Ze(o)?[Tge(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>ptn(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??mtn(n,t)};function otn(e,t){return!co(e)&&Ze(t)&&!si(t==null?void 0:t.bin)&&!To(t==null?void 0:t.bin)}function atn(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function utn(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:FI(s);{const{configValue:o}=cq("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?FI(o):n===Ci&&Hn([ure,are],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function fq(e){return`(((${e.signal} % 360) + 360) % 360)`}function h5e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=fq(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=fq(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function p5e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=fq(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function ltn(e,t){if(t==="x"&&Hn(["quantitative","temporal"],e))return!0}function ctn(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function ftn(e){return e==="x"?"bottom":"left"}function dtn({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!co(t)&&t!=="log"){if(Ze(e)){if(si(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Hn(["month","hours","day","quarter"],(i=lo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function htn({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=S4e(n);if(r)return{signal:r}}}}function m5e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return u4e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function ptn(e,t){const n=e.values;if(je(n))return nFe(t,n);if(Rt(n))return n}function mtn(e,t){return e==="rect"&&OM(t)?1:0}class $x extends Mr{clone(){return new $x(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=l5e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(c_(r)&&W4e(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${C4e({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new $x(t,{calculate:u,as:Mx(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${Vn(this.transform)}`}}function Mx(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function d5(e,t){return Hn(["top","bottom"],t)?"column":Hn(["left","right"],t)||e==="row"?"row":"column"}function Lx(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return cs((t||{})[e],i[e],n.header[e])}function h5(e,t,n,r){const i={};for(const s of e){const o=Lx(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const Bre=["row","column"],Ure=["header","footer"];function gtn(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=h5(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=d5(t,a),l=FI(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...y5e(l,u),...g5e(u,l,s),...v5e(r,i,t,rZt,_Fe)}}}function g5e(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=p5e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function y5e(e,t){const n=h5e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ytn(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of Ure)if(n[i])for(const s of n[i]){const o=btn(e,t,i,n,s);o!=null&&r.push(o)}return r}function vtn(e,t){const{sort:n}=e;return yh(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:Mx(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function dq(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=h5(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=dre({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=d5(t,a);return{text:{signal:u?mb(mb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...y5e(s,c),...g5e(c,s,o),...v5e(n,e,t,iZt,wFe)}}function btn(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=h5(["labelOrient"],o.header,a,t);(t==="row"&&!Hn(["top","bottom"],f)||t==="column"&&!Hn(["left","right"],f))&&(s=dq(o,t,a))}const u=Pl(e)&&!DR(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:vtn(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const _tn={column:{start:0,end:1},row:{start:1,end:0}};function wtn(e,t){return _tn[t][e]}function Etn(e,t){const n={};for(const r of xc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=h5(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=d5(r,o),u=wtn(s,a);u!==void 0&&(n[a]=u)}}return jr(n)?void 0:n}function v5e(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=Lx(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function zre(e){return[...RP(e,"width"),...RP(e,"height"),...RP(e,"childWidth"),...RP(e,"childHeight")]}function RP(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(co(o)&&Zy(a)){const u=e.scaleName(n);return Pl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[n0e(u,a)]:[n0e(u,a),{name:i,update:b5e(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=iq(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function n0e(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function b5e(e,t,n){const r=t.get("type"),i=t.get("padding"),s=cs(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${Rf(o)}, ${Rf(s)}) * ${e}_step`}function _5e(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function w5e(e,t){return Ye(e).reduce((n,r)=>{const i=e[r];return{...n,...ZS(t,i,r,s=>ci(s.value))}},{})}function E5e(e,t){if(Pl(t))return e==="theta"?"independent":"shared";if(rT(t))return"shared";if(Kre(t))return fs(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function Vre(e,t){const n=e.scale[t],r=fs(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(eQt(t)),"independent"):e[r][t]||"shared"}const xtn={...aZt,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},x5e=Ye(xtn);class Stn extends fg{}const r0e={symbols:Ttn,gradient:Atn,labels:Ctn,entries:Itn};function Ttn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...fXt({},n,cJt),...KFe(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?S5e(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===nl)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=ci(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=ci(m??1));else if(je(f.fill)){const g=hq(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=ci(g))}}if(f.stroke){if(r==="stroke"||!c&&r===nl)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=cs(hq(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==ug){const g=Ze(t)&&A5e(n,i,t);g?f.opacity=[{test:g,...ci(m??1)},ci(u.legend.unselectedOpacity)]:m&&(f.opacity=ci(m))}return f={...f,...e},jr(f)?void 0:f}function Atn(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?S5e(o.opacity)||s.opacity:void 0;return l&&(a.opacity=ci(l)),a={...a,...e},jr(a)?void 0:a}function Ctn(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?A5e(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;bb(c)?f=Pf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Pf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Pf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return jr(d)?void 0:d}function Itn(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function S5e(e){return T5e(e,(t,n)=>Math.max(t,n.value))}function hq(e){return T5e(e,(t,n)=>cs(t,n.value))}function T5e(e,t){if(xJt(e))return pt(e.condition).reduce(t,e.value);if(Zf(e))return e.value}function A5e(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ai(s)+Eb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const i0e={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return L4e(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return F4e(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??$tn(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??Mtn(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??Rtn(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>mE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(pE(n)&&Nf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>ktn(t,e)};function ktn(e,t){const n=e.values;if(je(n))return nFe(t,n);if(Rt(n))return n}function Rtn(e,t,n,r){if(t!=="shape"){const i=hq(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function Ntn(e){const{legend:t}=e;return cs(t.type,Ptn(e))}function Ptn({channel:e,timeUnit:t,scaleType:n}){if(pE(e)){if(Hn(["quarter","month","day"],t))return"symbol";if(Nf(n))return"gradient"}return"symbol"}function Dtn({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??Otn(n,t)}function Otn(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function $tn({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Nf(i))return n==="horizontal"?r==="top"||r==="bottom"?s0e(t,"width",o,s):o:s0e(t,"height",u,a)}function s0e(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function Mtn(e){if(Hn(["quantile","threshold","log","symlog"],e))return"greedy"}function C5e(e){const t=Gi(e)?Ltn(e):Utn(e);return e.component.legends=t,t}function Ltn(e){const{encoding:t}=e,n={};for(const r of[nl,...xFe]){const i=Ms(t[r]);!i||!e.getScaleComponent(r)||r===rl&&Ze(i)&&i.type===JS||(n[r]=Btn(e,r))}return n}function Ftn(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function jtn(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Btn(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new Stn({},Ftn(e,t));Ken(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=Ms(i[t]),f=Ze(c)?(w=lo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=Ntn({legend:n,channel:t,timeUnit:f,scaleType:l}),p=Dtn({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of x5e){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in i0e?i0e[E](m):n[E];if(T!==void 0){const S=jtn(T,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,T,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=w5e(g[E]??{},e),S=E in r0e?r0e[E](T,b):T;S!==void 0&&!jr(S)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${Ai(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return jr(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Utn(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){C5e(r);for(const i of Ye(r.component.legends))n.legend[i]=Vre(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=I5e(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ye(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function I5e(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of x5e){const c=vy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return ztn(f,d);case"title":return l4e(f,d);case"type":return i=!0,fl("symbol")}return a5(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&IM(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&IM(e.explicit,["encode","gradient"])),e}function ztn(e,t){return t.value==="circle"?t:e}function Vtn(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function k5e(e){const t=e.component.legends,n={};for(const i of Ye(t)){const s=e.getScaleComponent(i),o=Br(s.get("domains"));if(n[o])for(const a of n[o])I5e(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return $o(n).flat().map(i=>Htn(i,e.config)).filter(i=>i!==void 0)}function Htn(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of xFe)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=mb(r,"datum.label",s.encode.labels.update.text.signal)),Vtn(s,"labels","text",{signal:l})}return s}}function qtn(e){return rT(e)||Kre(e)?Wtn(e):R5e(e)}function Wtn(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),R5e(e))}function R5e(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Hn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Gtn=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class N5e extends fg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function P5e(e){e.component.projection=Gi(e)?Ytn(e):Qtn(e)}function Ytn(e){if(e.hasProjection){const t=Cu(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Ktn(e):void 0,s=new N5e(e.projectionName(!0),{...Cu(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Ktn(e){const t=[],{encoding:n}=e;for(const r of[[dd,fd],[Fc,hd]])(Ms(n[r[0]])||Ms(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(rl)&&e.typedFieldDef(rl).type===JS&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(_i.Main)),t}function Xtn(e,t){const n=Mne(Gtn,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&Cl(e.get(i),t.get(i))));if(Cl(e.size,t.size)){if(n)return e;if(Cl(e.explicit,{}))return t;if(Cl(t.explicit,{}))return e}return null}function Qtn(e){if(e.children.length===0)return;let t;for(const r of e.children)P5e(r);const n=Mne(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Xtn(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new N5e(r,t.specifiedProjection,t.size,nn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function Jtn(e,t,n,r){if($R(t,n)){const i=Gi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:PR(s,o,i.format,i.formatType,r)}}return{}}function D5e(e,t){return`${t4e(e)}_${t}`}function Ztn(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function Hre(e,t,n){const r=t5(n,void 0)??{},i=D5e(r,t);return e.getName(`${i}_bins`)}function enn(e){return"as"in e}function o0e(e,t,n){let r,i;enn(e)?r=mt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...t5(t,void 0)},o=D5e(s,e.field),{signal:a,extentSignal:u}=Ztn(n,o);if(HF(s.extent)){const c=s.extent;i=f5e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class bh extends Mr{clone(){return new bh(null,nn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(tu(s)&&si(s.bin)){const{key:a,binComponent:u}=o0e(s,s.bin,n);i[a]={...u,...i[a],...Jtn(n,s,o,n.config)}}return i},{});return jr(r)?null:new bh(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=o0e(n,n.bin,r);return new bh(t,{[i]:s})}merge(t,n){for(const r of Ye(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=nh([...this.bins[r].as,...t.bins[r].as],Vn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set($o(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set($o(this.bins).map(t=>t.field))}hash(){return`Bin ${Vn(this.bins)}`}assemble(){return $o(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Lc(t.field),as:r,signal:t.signal,...HF(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Lc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function tnn(e,t,n,r){var s;const i=Gi(r)?r.encoding[op(t)]:void 0;if(tu(n)&&Gi(r)&&Y4e(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=yy({fieldDef:n,markDef:a,config:u});jI(o)&&l!==.5&&fs(t)&&(e.add(at(n,{suffix:u5})),e.add(at(n,{suffix:l5}))),n.bin&&$R(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(q6e(t)){const o=H6e(t);e.add(r.getName(o))}else e.add(at(n));return c_(n)&&qQt((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function nnn(e,t){for(const n of Ye(t)){const r=t[n];for(const i of Ye(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Uf extends Mr{clone(){return new Uf(null,new Set(this.dimensions),nn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Lm(u)||Jy(u)){const c=Lm(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);lg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else tnn(s,a,o,n)}),s.size+Ye(i).length===0)?null:new Uf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ye(i).length===0?null:new Uf(t,r,i)}merge(t){return M6e(this.dimensions,t.dimensions)?(nnn(this.measures,t.measures),!0):(gQt("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ye(this.measures)])}producedFields(){const t=new Set;for(const n of Ye(this.measures))for(const r of Ye(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${Vn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ye(this.measures))for(const o of Ye(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Lc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Lc),ops:t,fields:n,as:r}}}class tT extends Mr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of xc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...si(a)?[at(o,{binSuffix:"end"})]:[]],...yh(u)?{sortField:u}:je(u)?{sortIndexField:Mx(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of xc)this[n]&&(t+=` ${n.charAt(0)}:${Vn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of xc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of xc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of ap){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(co(i)&&Zy(s)){const o=p5(this.childModel,n),a=Yre(o);a?t[n]=a:Je(Kne(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=QF,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of Bre){for(const c of Ure){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[am,om])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function a0e(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function rnn(e,t){const n=jne(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=a0e(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=a0e(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(TXt(t)),null}function inn(e){const t={};return iO(e.filter,n=>{if(A4e(n)){let r=null;Zne(n)?r=bl(n.equal):tre(n)?r=bl(n.lte):ere(n)?r=bl(n.lt):nre(n)?r=bl(n.gt):rre(n)?r=bl(n.gte):ire(n)?r=n.range[0]:sre(n)&&(r=(n.oneOf??n.in)[0]),r&&(a_(r)?t[n.field]="date":lr(r)?t[n.field]="number":mt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function snn(e){const t={};function n(r){Px(r)?t[r.field]="date":r.type==="quantitative"&&nXt(r.aggregate)?t[r.field]="number":Tx(r.field)>1?r.field in t||(t[r.field]="flatten"):c_(r)&&yh(r.sort)&&Tx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Gi(e)||Pl(e))&&e.forEachFieldDef((r,i)=>{if(tu(r))n(r);else{const s=s_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Gi(e)){const{mark:r,markDef:i,encoding:s}=e;if(l_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function onn(e){const t={};if(Gi(e)&&e.component.selection)for(const n of Ye(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Tx(i.field)>1&&(t[i.field]="flatten")}return t}class ha extends Mr{clone(){return new ha(null,nn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${Vn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!D0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ye(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(yge(a,r[a],u.value)))}for(const a of Ye(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(yge(a,n[a],u)))}const s=new fg(n,r);i.copyAll(s);const o={};for(const a of Ye(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ye(o).length===0||i.parseNothing?null:new ha(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ye(this._parse)){const r=this._parse[n];Tx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ye(this._parse))}dependentFields(){return new Set(Ye(this._parse))}assembleTransforms(t=!1){return Ye(this._parse).filter(n=>t?Tx(n)>1:!0).map(n=>{const r=rnn(n,this._parse[n]);return r?{type:"formula",expr:r,as:XS(n)}:null}).filter(n=>n!==null)}}class wy extends Mr{clone(){return new wy(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ed])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ed}}}class FR extends Mr{clone(){return new FR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${Vn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class jR extends Mr{clone(){return new jR(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${Vn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class xb extends Mr{constructor(t){super(null),t??(t={name:"source"});let n;if(D0(t)||(n=t.format?{...qu(t.format,["parse"])}:{}),BI(t))this._data={values:t.values};else if(Dx(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Hn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else UFe(t)?this._data={values:[{type:"Sphere"}]}:(jFe(t)||D0(t))&&(this._data={});this._generator=D0(t),t.name&&(this._name=t.name),n&&!jr(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var u0e=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},ann=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},J2;function qre(e){return e instanceof xb||e instanceof FR||e instanceof jR}class Wre{constructor(){J2.set(this,void 0),u0e(this,J2,!1,"f")}setModified(){u0e(this,J2,!0,"f")}get modifiedFlag(){return ann(this,J2,"f")}}J2=new WeakMap;class f_ extends Wre{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class Gre extends Wre{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class unn extends Gre{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ye(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class lnn extends Gre{constructor(t){super(),this.requiresSelectionId=t&&jre(t)}run(t){t instanceof wy&&(this.requiresSelectionId&&(qre(t.parent)||t.parent instanceof Uf||t.parent instanceof ha)||(this.setModified(),t.remove()))}}class cnn extends Wre{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof vh&&(r=t.producedFields(),Lne(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class fnn extends Gre{constructor(){super()}run(t){t instanceof Gu&&!t.isRequired()&&(this.setModified(),t.remove())}}class dnn extends f_{run(t){if(!qre(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ha)if(t instanceof ha)this.setModified(),t.merge(n);else{if(Fne(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class hnn extends f_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ha);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ye(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!jr(i)){this.setModified();const o=new ha(t,i);for(const a of n){if(a instanceof ha)for(const u of Ye(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ha&&Ye(a.parse).length===0&&a.remove()}}}}}class pnn extends f_{run(t){t instanceof Gu||t.numChildren()>0||t instanceof tT||t instanceof xb||(this.setModified(),t.remove())}}class mnn extends f_{run(t){const n=t.children.filter(i=>i instanceof vh),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class gnn extends f_{run(t){const n=t.children.filter(i=>i instanceof Uf),r={};for(const i of n){const s=Vn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ye(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class ynn extends f_{constructor(t){super(),this.model=t}run(t){const n=!(qre(t)||t instanceof eT||t instanceof ha||t instanceof wy),r=[],i=[];for(const s of t.children)s instanceof bh&&(n&&!Fne(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof bh?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class vnn extends f_{run(t){const n=[...t.children];if(!pb(n,o=>o instanceof Gu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Gu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Gu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class d_ extends Mr{clone(){return new d_(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=nh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function bnn(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function _nn(e){return je(e)&&e.every(t=>mt(t))&&e.length>1}class lm extends Mr{clone(){return new lm(null,nn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(cs(f.order,"ascending"));const l={field:a,order:u};let c;return _nn(s)?c=s:mt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new lm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return Lh(p)}).filter(h=>!!h),c=bnn(n),f=n.encoding.order;let d;if(je(f)||Ze(f))d=o4e(f);else{const h=K4e(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new lm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${Vn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class nT extends Mr{clone(){return new nT(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=nh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${Vn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>Gne(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function wnn(e){function t(n){if(!(n instanceof tT)){const r=n.clone();if(r instanceof Gu){const i=mq+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Uf||r instanceof lm||r instanceof nT||r instanceof d_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function pq(e){if(e instanceof tT)if(e.numChildren()===1&&!(e.children[0]instanceof Gu)){const t=e.children[0];(t instanceof Uf||t instanceof lm||t instanceof nT||t instanceof d_)&&t.addDimensions(e.fields),t.swapWithParent(),pq(e)}else{const t=e.model.component.data.main;O5e(t);const n=wnn(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(pq)}function O5e(e){if(e instanceof Gu&&e.type===_i.Main&&e.numChildren()===1){const t=e.children[0];t instanceof tT||(t.swapWithParent(),O5e(e))}}const mq="scale_",NP=5;function gq(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!gq(t.children))return!1}return!0}function tf(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function l0e(e,t,n){let r=e.sources,i=!1;return i=tf(new fnn,r)||i,i=tf(new lnn(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=tf(new pnn,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=tf(new dnn,r)||i,i=tf(new ynn(t),r)||i,i=tf(new cnn,r)||i,i=tf(new hnn,r)||i,i=tf(new gnn,r)||i,i=tf(new mnn,r)||i,i=tf(new unn,r)||i,i=tf(new vnn,r)||i),e.sources=r,i}function Enn(e,t){gq(e.sources);let n=0,r=0;for(let i=0;i<NP&&l0e(e,t,!0);i++)n++;e.sources.map(pq);for(let i=0;i<NP&&l0e(e,t,!1);i++)r++;gq(e.sources),Math.max(n,r)===NP&&Je(`Maximum optimization runs(${NP}) reached.`)}class Js{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new Js(()=>t(n))}}function $5e(e){Gi(e)?xnn(e):Snn(e)}function xnn(e){const t=e.component.scales;for(const n of Ye(t)){const r=Ann(e,n);if(t[n].setWithExplicit("domains",r),Inn(e,n),e.component.data.isFaceted){let s=e;for(;!Pl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)Qp(a)&&(a.data=mq+a.data.replace(mq,""))}}}function Snn(e){for(const n of e.children)$5e(n);const t=e.component.scales;for(const n of Ye(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=vy(r,o.getWithExplicit("domains"),"domains","scale",yq);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(wXt),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function Tnn(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=c0e(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=c0e(t,n);if(i)return"unaggregated"}return e}function Ann(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=Tnn(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&Ms(r.x2)?Ms(r.x)?vy(Tg(n,i,e,"x"),Tg(n,i,e,"x2"),"domain","scale",yq):Tg(n,i,e,"x2"):t==="y"&&Ms(r.y2)?Ms(r.y)?vy(Tg(n,i,e,"y"),Tg(n,i,e,"y2"),"domain","scale",yq):Tg(n,i,e,"y2"):Tg(n,i,e,t)}function Cnn(e,t,n){return e.map(r=>({signal:`{data: ${n5(r,{timeUnit:n,type:t})}}`}))}function EB(e,t,n){var i;const r=(i=lo(n))==null?void 0:i.unit;return t==="temporal"||r?Cnn(e,t,r):[e]}function Tg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=Ms(i[r]),{type:c}=l,f=l.timeUnit;if(HQt(t)){const p=Tg(e,void 0,n,r),m=EB(t.unionWith,c,f);return Dd([...m,...p.value])}else{if(Rt(t))return Dd([t]);if(t&&t!=="unaggregated"&&!D4e(t))return Dd(EB(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return fl([[0,1]]);const p=n.requestDataName(_i.Main);return fl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=lg(r)&&Ze(l)?knn(n,r,e):void 0;if(up(l)){const p=EB([l.datum],c,f);return fl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(_i.Main),{field:m}=l;return fl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(si(h.bin)){if(co(e))return fl(e==="bin-ordinal"?[]:[{data:LI(d)?n.requestDataName(_i.Main):n.requestDataName(_i.Raw),field:n.vgField(r,$R(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(si(p)){const m=Hre(n,h.field,p);return fl([new Js(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return fl([{data:n.requestDataName(_i.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Hn(["time","utc"],e)){const p=i[op(r)];if(Y4e(h,p,s,a)){const m=n.requestDataName(_i.Main),g=yy({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=jI(o)&&g!==.5&&fs(r);return fl([{data:m,field:n.vgField(r,y?{suffix:u5}:{})},{data:m,field:n.vgField(r,{suffix:y?l5:"end"})}])}}return fl(d?[{data:LI(d)?n.requestDataName(_i.Main):n.requestDataName(_i.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(_i.Main),field:n.vgField(r)}])}function xB(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":QF),...r?{field:Lc(r)}:{},...i?{order:i}:{}}}function Inn(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=D4e(r)&&r,o=o_(i)&&HF(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function knn(e,t,n){if(!co(n))return;const r=e.fieldDef(t),i=r.sort;if(W4e(i))return{op:"min",field:Mx(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(yh(i)){const a=s&&!o.has(i.field);return xB(i,a)}else if(q4e(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Lm(c)||Jy(c))return xB({field:at(l),order:u},d);if(Gne(c)||!c)return xB({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Hn(["ascending",void 0],i))return!0}}function c0e(e,t){const{aggregate:n,type:r}=e;return n?mt(n)&&!iXt.has(n)?{valid:!1,reason:GXt(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:YXt(e)}:{valid:!0}:{valid:!1,reason:WXt(e)}}function yq(e,t,n,r){return e.explicit&&t.explicit&&Je(ZXt(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function Rnn(e){const t=nh(e.map(o=>{if(Qp(o)){const{sort:a,...u}=o;return u}return o}),Vn),n=nh(e.map(o=>{if(Qp(o)){const a=o.sort;return a!==void 0&&!LI(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),Vn);if(t.length===0)return;if(t.length===1){const o=e[0];if(Qp(o)&&n.length>0){let a=n[0];if(n.length>1){Je(bge);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=nh(n.map(o=>LI(o)||!("op"in o)||mt(o.op)&&o.op in eXt?o:(Je(tQt(o)),!0)),Vn);let i;r.length===1?i=r[0]:r.length>1&&(Je(bge),i=!0);const s=nh(e.map(o=>Qp(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function Yre(e){if(Qp(e)&&mt(e.field))return e.field;if(sXt(e)){let t;for(const n of e.fields)if(Qp(n)&&mt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(nQt),t}return Je(rQt),t}else if(oXt(e)){Je(iQt);const t=e.fields[0];return mt(t)?t:void 0}}function p5(e,t){const r=e.component.scales[t].get("domains").map(i=>(Qp(i)&&(i.data=e.lookupDataSource(i.data)),i));return Rnn(r)}function M5e(e){return rT(e)||Kre(e)?e.children.reduce((t,n)=>t.concat(M5e(n)),f0e(e)):f0e(e)}function f0e(e){return Ye(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=Nnn(i.range,s,n,e),h=p5(e,n),p=a?Ten(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function Nnn(e,t,n,r){if(fs(n)){if(Zy(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&Qp(e))return{...e,data:r.lookupDataSource(e.data)};return e}class L5e extends fg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:pb(this.get("domains"),t=>je(t)&&t.length===2&&lr(t[0])&&t[0]<=0&&lr(t[1])&&t[1]>=0)}}const Pnn=["range","scheme"];function Dnn(e){const t=e.component.scales;for(const n of VF){const r=t[n];if(!r)continue;const i=Onn(n,e);r.setWithExplicit("range",i)}}function d0e(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=il(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new Js(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(si(r)){const a=Hre(e,i,r);return new Js(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function Onn(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of Pnn)if(n[f]!==void 0){const d=tq(s,f),h=O4e(e,f);if(!d)Je(h4e(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(fs(e))return Dd(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return Js.fromName(y,g)}return m}))}else if(gt(p))return Dd({data:t.requestDataName(_i.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Dd(p)}case"scheme":return Dd($nn(n[f]))}}const o=e===Ci||e==="xOffset"?"width":"height",a=r[o];if(Fh(a)){if(fs(e))if(co(s)){const f=j5e(a,t,e);if(f)return Dd({step:f})}else Je(p4e(o));else if(kR(e)){const f=e===Gy?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=B5e(a,s);if(p)return Dd(p)}}}const{rangeMin:u,rangeMax:l}=n,c=Mnn(e,t);return(u!==void 0||l!==void 0)&&tq(s,"rangeMin")&&je(c)&&c.length===2?Dd([u??c[0],l??c[1]]):fl(c)}function $nn(e){return VQt(e)?{scheme:e.name,...qu(e,["name"])}:{scheme:e}}function F5e(e,t,n,{center:r}={}){const i=il(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===po&&Wl(n)?r?[Js.fromName(a=>`${o(a)}/2`,s),Js.fromName(a=>`-${o(a)}/2`,s)]:[Js.fromName(o,s),0]:r?[Js.fromName(a=>`-${o(a)}/2`,s),Js.fromName(a=>`${o(a)}/2`,s)]:[0,Js.fromName(o,s)]}function Mnn(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=Ms(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ci:case po:{if(Hn(["point","band"],u)){const f=U5e(e,n,r.view);if(Fh(f))return{step:j5e(f,t,e)}}return F5e(e,t,u)}case Gy:case QS:return Lnn(e,t,u);case ag:{const f=t.component.scales[e].get("zero"),d=z5e(i,f,r),h=Bnn(i,n,t,r);return kx(u)?jnn(d,h,Fnn(u,r,l,e)):[d,h]}case Kc:return[0,Math.PI*2];case i_:return[0,360];case cd:return[0,new Js(()=>{const f=t.getSignalName(Pl(t.parent)?"child_width":"width"),d=t.getSignalName(Pl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case Xy:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case Qy:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case rl:return"symbol";case nl:case ip:case sp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case ug:case Yy:case Ky:return[r.scale.minOpacity,r.scale.maxOpacity]}}function j5e(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=Vne(n),o=r[s];if(TFe({step:e,offsetIsDiscrete:cn(o)&&I4e(o.type)})==="offset"&&oFe(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${cXt(f)})`}}else return e.step}function B5e(e,t){if(TFe({step:e,offsetIsDiscrete:co(t)})==="offset")return{step:e.step}}function Lnn(e,t,n){const r=e===Gy?"x":"y",i=t.getScaleComponent(r);if(!i)return F5e(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=U5e(r,t.size,t.config.view);if(Fh(l)){const c=B5e(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=S4e(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=yy({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return O6e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function U5e(e,t,n){const r=e===Ci?"width":"height",i=t[r];return i||jM(n,r)}function Fnn(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Je(hQt(r)),3)}}function jnn(e,t,n){const r=()=>{const i=Rf(t),s=Rf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new Js(r):{signal:r()}}function z5e(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${z5e(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(qF("size",e))}const h0e=.95;function Bnn(e,t,n,r){const i={x:d0e(n,"x"),y:d0e(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=p0e(t,i,r.view);return lr(s)?s-1:new Js(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=p0e(t,i,r.view);return lr(s)?Math.pow(h0e*s,2):new Js(()=>`pow(${h0e} * ${s.signal}, 2)`)}}throw new Error(qF("size",e))}function p0e(e,t,n){const r=Fh(e.width)?e.width.step:FM(n,"width"),i=Fh(e.height)?e.height.step:FM(n,"height");return t.x||t.y?new Js(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function V5e(e,t){Gi(e)?Unn(e,t):q5e(e,t)}function Unn(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ye(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=Ms(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=tq(h,t),y=O4e(a,t);if(d!==void 0&&(g?y&&Je(y):Je(h4e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":a_(u[t])||b==="temporal"||v?l.set(t,{signal:n5(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in m0e?m0e[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:aFe(i,a),hasSecondaryRangeChannel:!!i[op(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const m0e={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?znn(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Vnn(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Hnn(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>qnn(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Wnn(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Gnn(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return Ynn(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Knn(e,t,n,r,i,s.scale,o)};function H5e(e){Gi(e)?Dnn(e):q5e(e,"range")}function q5e(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?H5e(r):V5e(r,t);for(const r of Ye(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=vy(i,a,t,"scale",FFe((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function znn(e,t){const n=t.bin;if(si(n)){const r=Hre(e,t.field,n);return new Js(()=>e.getSignalName(r))}else if(To(n)&&o_(n)&&n.step!==void 0)return{step:n.step}}function Vnn(e,t){if(Hn([nl,ip,sp],e)&&t!=="nominal")return"hcl"}function Hnn(e,t,n,r,i,s){var o;if(!((o=Lh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Hn([Wu.TIME,Wu.UTC],e)))return fs(t)?!0:void 0}function qnn(e,t,n,r,i,s){if(fs(e)){if(Nf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Wu.POINT)return n.pointPadding}}function Wnn(e,t,n,r,i,s=!1){if(e===void 0){if(fs(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:cs(o,n==="bar"?a:u)}else if(kR(t)&&r===Wu.BAND)return i.offsetBandPaddingInner}}function Gnn(e,t,n,r,i,s=!1){if(e===void 0){if(fs(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Wu.BAND)return cs(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(kR(t)){if(n===Wu.POINT)return .5;if(n===Wu.BAND)return i.offsetBandPaddingOuter}}}function Ynn(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Wl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Wl(e)&&t==="descending")return!0}function Knn(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Wl(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(lr(u)&&u<=0&&lr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!kx(i))return!0;if(!(Ze(t)&&t.bin)&&Hn([...ap,...WKt],e)){const{orient:u,type:l}=r;return Hn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Hn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Xnn(e,t,n,r,i=!1){const s=Qnn(t,n,r,i),{type:o}=e;return lg(t)?o!==void 0?XQt(t,o)?Ze(n)&&!KQt(o,n.type)?(Je(QXt(o,s)),s):o:(Je(XXt(t,o,s)),s):s:null}function Qnn(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(pE(e)||pB(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(mB(e,"ordinal")),"ordinal";if(fs(e)||kR(e)){if(Hn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in Wne)return"band";const s=n[il(e)];return _b(s)||Nx(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return pE(e)?"time":pB(e)==="discrete"?(Je(mB(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&lo(t.timeUnit).utc?"utc":"time";case"quantitative":return pE(e)?Ze(t)&&si(t.bin)?"bin-ordinal":"linear":pB(e)==="discrete"?(Je(mB(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(f4e(t.type))}function Jnn(e,{ignoreRange:t}={}){W5e(e),$5e(e);for(const n of YQt)V5e(e,n);t||H5e(e)}function W5e(e){Gi(e)?e.component.scales=Znn(e):e.component.scales=trn(e)}function Znn(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of VF){const o=Ms(t[s]);if(o&&n===z4e&&s===rl&&o.type===JS)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=aFe(t,s),l=Xnn(a,s,o,r,u);i[s]=new L5e(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const ern=FFe((e,t)=>wge(e)-wge(t));function trn(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){W5e(s);for(const o of Ye(s.component.scales))if((t=i.scale)[o]??(t[o]=E5e(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?FQt(a.value,u.value)?r[o]=vy(a,u,"type","scale",ern):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ye(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new L5e(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class SB{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Gi(e){return(e==null?void 0:e.type)==="unit"}function Pl(e){return(e==null?void 0:e.type)==="facet"}function Kre(e){return(e==null?void 0:e.type)==="concat"}function rT(e){return(e==null?void 0:e.type)==="layer"}class Xre{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Cu(a),this.name=t.name??i,this.title=$g(t.title)?{text:t.title}:t.title?Cu(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new SB,this.projectionNameMap=r?r.projectionNameMap:new SB,this.signalNameMap=r?r.signalNameMap:new SB,this.data=t.data,this.description=t.description,this.transforms=uen(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:dZt(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:JF(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new fg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?nn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){Jnn(this)}parseProjection(){P5e(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){C5e(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ye(r)){const o=r[s];o!==void 0&&(i[s]=ci(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=ci(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:jr(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=Etn(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of xc)t[r].title&&n.push(gtn(this,r));for(const r of Bre)n=n.concat(ytn(this,r));return n}assembleAxes(){return rtn(this.component.axes,this.config)}assembleLegends(){return k5e(this)}assembleProjections(){return qtn(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...n4e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Hn(["unit","layer"],this.type)?Hn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),jr(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||Pl(this.parent)?M5e(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ai((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(_i[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(Pl(this.parent)){const n=_5e(t),r=zF(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(co(s)&&Zy(o)){const a=i.get("name"),u=p5(this,r),l=Yre(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:b5e(a,i,c)}}else return Je(Kne(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(G6e(t)&&lg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(mXt(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class G5e extends Xre{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return UJt(this.getMapping(),(r,i,s)=>{const o=Lh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Ere(this.getMapping(),(r,i)=>{const s=Lh(r);s&&t(s,i)},n)}}class m5 extends Mr{clone(){return new m5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${Vn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class g5 extends Mr{clone(){return new g5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${Vn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class UI extends Mr{clone(){return new UI(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(wr("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=lg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Wl(d)&&l.aggregate!=="count"&&!l_(i)&&(u[l.field]=l)}return u},{});return Ye(a).length?new UI(t,a):null}dependentFields(){return new Set(Ye(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${Vn(this.filter)}`}assemble(){const t=Ye(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class y5 extends Mr{clone(){return new y5(this.parent,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${Vn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class v5 extends Mr{clone(){return new v5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${Vn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class yE extends Mr{clone(){return new yE(null,nn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[dd,fd],[Fc,hd]]){const s=i.map(o=>{const a=Ms(n.encoding[o]);return Ze(a)?a.field:up(a)?{expr:`${a.datum}`}:Zf(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new yE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(rl)){const i=n.typedFieldDef(rl);i.type===JS&&(t=new yE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(mt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${Vn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class zI extends Mr{clone(){return new zI(null,this.projection,nn(this.fields),nn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[dd,fd],[Fc,hd]]){const i=r.map(o=>{const a=Ms(n.encoding[o]);return Ze(a)?a.field:up(a)?{expr:`${a.datum}`}:Zf(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Fc?"2":"";(i[0]||i[1])&&(t=new zI(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(mt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${Vn(this.fields)} ${Vn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class P1 extends Mr{clone(){return new P1(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new P1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=lFe(n.mark,r);return new P1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${Vn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:VZt(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class b5 extends Mr{clone(){return new b5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${Vn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class VI extends Mr{clone(){return new VI(null,nn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(HZt(o)){let u=X5e(o.data,s);u||(u=new xb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Gu(u,l,_i.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(qZt(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ai(u),u)}catch{throw new Error(bXt(u))}if(a=l.materialized,!a)throw new Error(_Xt(u))}return new VI(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${Vn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:pt(this.transform.as)}:{}};else{let n=this.transform.as;mt(n)||(Je(IXt),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class _5 extends Mr{clone(){return new _5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${Vn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class w5 extends Mr{clone(){return new w5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=nn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${Vn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class E5 extends Mr{clone(){return new E5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=nh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${Vn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class x5 extends Mr{clone(){return new x5(null,nn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${Vn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function Y5e(e){let t=0;function n(r,i){if(r instanceof xb&&!r.isGenerator&&!Dx(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ha&&(r.parent instanceof xb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof tT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof FR||r instanceof jR||r instanceof UI||r instanceof eT||r instanceof $x||r instanceof zI||r instanceof Uf||r instanceof VI||r instanceof nT||r instanceof d_||r instanceof v5||r instanceof y5||r instanceof m5||r instanceof b5||r instanceof _5||r instanceof w5||r instanceof wy||r instanceof x5||r instanceof E5||r instanceof g5)&&i.transform.push(r.assemble()),(r instanceof bh||r instanceof vh||r instanceof P1||r instanceof lm||r instanceof yE)&&i.transform.push(...r.assemble()),r instanceof Gu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Gu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Gu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function nrn(e){const t=[],n=Y5e(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function rrn(e,t){const n=[],r=Y5e(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function irn(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function srn(e){for(const t of xc)orn(e,t);g0e(e,"x"),g0e(e,"y")}function orn(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=Lx("title",null,r,t);let l=mE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=Lx("labelOrient",a.header,r,t),f=a.header!==null?cs((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Hn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[K5e(e,t,f)]}}}function K5e(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function g0e(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=Vre(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=irn(a.get("orient"));o[u]??(o[u]=[K5e(e,s,!1)]);const l=Q2(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function arn(e){Qre(e),VM(e,"width"),VM(e,"height")}function urn(e){Qre(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";VM(e,t),VM(e,n)}function Qre(e){for(const t of e.children)t.parseLayoutSize()}function VM(e,t){const n=_5e(t),r=zF(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??E5e(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=vy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function lrn(e){const{size:t,component:n}=e;for(const r of ap){const i=il(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Fh(s)?"step":s,!0)}else{const s=crn(e,i);n.layoutSize.set(i,s,!1)}}}function crn(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(co(s)){const a=jM(r.view,t);return Zy(o)||Fh(a)?"step":a}else return iq(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return iq(r.view,t);{const s=jM(r.view,t);return Fh(s)?s.step:s}}}function vq(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class ZA extends G5e{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=nie(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!DR(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ye(t),r={};for(const i of n){if(![om,am].includes(i)){Je(qF(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(ZH(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=_re(t,n);return r.header?r.header=Cu(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=S5(this),this.child.parseData()}parseLayoutSize(){Qre(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),srn(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of xc)for(const r of Ure){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=Lx("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=d5(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof ZA))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof ZA?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof ZA){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of ap){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(co(o)&&Zy(a)){const u=p5(this.child,i),l=Yre(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(Kne(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of xc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(si(d)&&u.push(at(f,{binSuffix:"end"})),yh(h)){const{field:p,op:m=QF}=h,g=vq(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=Mx(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?yh(r.sort)?[vq(r,r.sort,{expr:"datum"})]:je(r.sort)?[Mx(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(yh(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return dq(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of Bre)if(t[s]){const o=Lx("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return dq(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=nrn(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:xc.map(u=>this.facetSortFields(u)).flat(),order:xc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(wen(this,[]))}]}getMapping(){return this.facet}}function frn(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(yh(s.sort)){const{field:o,op:a=QF}=s.sort;e=i=new d_(e,{joinaggregate:[{op:a,field:o,as:vq(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function X5e(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(BI(e)&&BI(a)){if(Cl(e.values,a.values))return o}else if(Dx(e)&&Dx(a)){if(e.url===a.url)return o}else if(jFe(e)&&e.name===o.dataName)return o}}return null}function drn(e,t){if(e.data||!e.parent){if(e.data===null){const r=new xb({values:[]});return t.push(r),r}const n=X5e(e.data,t);if(n)return D0(e.data)||(n.data.format=$6e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new xb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function hrn(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(ten(i))o=e=new $x(e,i),s="derived";else if(Dre(i)){const a=inn(i);o=e=ha.makeWithAncestors(e,{},a,n)??e,e=new eT(e,t,i.filter)}else if(OFe(i))o=e=bh.makeFromTransform(e,i,t),s="number";else if(ren(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ha(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=vh.makeFromTransform(e,i);else if(ien(i))o=e=Uf.makeFromTransform(e,i),s="number",jre(t)&&(e=new wy(e));else if(DFe(i))o=e=VI.make(e,t,i,r++),s="derived";else if(JZt(i))o=e=new nT(e,i),s="number";else if(ZZt(i))o=e=new d_(e,i),s="number";else if(sen(i))o=e=lm.makeFromTransform(e,i),s="derived";else if(oen(i))o=e=new v5(e,i),s="derived";else if(aen(i))o=e=new g5(e,i),s="derived";else if(een(i))o=e=new y5(e,i),s="derived";else if(WZt(i))o=e=new E5(e,i),s="derived";else if(QZt(i))e=new x5(e,i);else if(nen(i))o=e=P1.makeFromTransform(e,i),s="derived";else if(GZt(i))o=e=new m5(e,i),s="derived";else if(YZt(i))o=e=new _5(e,i),s="derived";else if(KZt(i))o=e=new w5(e,i),s="derived";else if(XZt(i))o=e=new b5(e,i),s="derived";else{Je(CXt(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function S5(e){var h;let t=drn(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(D0(i)||Dx(i)||BI(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new ben;D0(i)?(BFe(i)?t=new jR(t,i.sequence):Ore(i)&&(t=new FR(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ha.makeExplicit(t,e,o)??t,t=new wy(t);const a=e.parent&&rT(e.parent);(Gi(e)||Pl(e))&&a&&(t=bh.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=hrn(t,e,o));const u=onn(e),l=snn(e);t=ha.makeWithAncestors(t,{},{...u,...l},o)??t,Gi(e)&&(t=yE.parseAll(t,e),t=zI.parseAll(t,e)),(Gi(e)||Pl(e))&&(a||(t=bh.makeFromEncoding(t,e)??t),t=vh.makeFromEncoding(t,e)??t,t=$x.parseAllForSortIndex(t,e));const c=t=y0e(_i.Raw,e,t);if(Gi(e)){const p=Uf.makeFromEncoding(t,e);p&&(t=p,jre(e)&&(t=new wy(t))),t=P1.makeFromEncoding(t,e)??t,t=lm.makeFromEncoding(t,e)??t}Gi(e)&&(t=UI.make(t,e)??t);const f=t=y0e(_i.Main,e,t);Gi(e)&&ttn(e,f);let d=null;if(Pl(e)){const p=e.getName("facet");t=frn(t,e.facet)??t,d=new tT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function y0e(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Gu(n,s,e,i);return r[s]=o,o}class prn extends Xre{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(SXt),this.children=this.getChildren(t).map((l,c)=>nie(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=S5(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return s5(t)?t.vconcat:Nre(t)?t.hconcat:t.concat}parseLayoutSize(){urn(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=zre(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function mrn(e){return e===!1||e===null}const grn={disable:1,gridScale:1,scale:1,...iFe,labelExpr:1,encode:1},Q5e=Ye(grn);class Jre extends fg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new Jre(nn(this.explicit),nn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!mrn(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function yrn(e,t,n){const{encoding:r,config:i}=e,s=Ms(r[t])??Ms(r[op(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if(bb(u))return{text:Pf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Rx(s)==="quantitative"){if(Nx(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Pf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Pf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Rx(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Pf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function vrn(e){return ap.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[Trn(n,e)]),t),{})}const brn={bottom:"top",top:"bottom",left:"right",right:"left"};function _rn(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ye(i.component.axes))n.axis[s]=Vre(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=wrn(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of ap){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=brn[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function wrn(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=Ern(i,s)}}}else return t.map(n=>n.clone());return e}function Ern(e,t){for(const n of Q5e){const r=vy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return l4e(i,s);case"gridScale":return{explicit:i.explicit,value:cs(i.value,s.value)}}return a5(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function xrn(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:FI(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===m5e(r,i))return!0}return e===n[t]}const Srn=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function Trn(e,t){var y,v;let n=t.axis(e);const r=new Jre,i=Ms(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||ftn(e),u=t.getScaleComponent(e).get("type"),l=itn(e,u,a,t.config),c=n!==void 0?!n:cq("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=utn(i,n,e,o.style,l),d=F4e(n.formatType,i,u),h=L4e(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of Q5e){const w=b in t0e?t0e[b](p):Ige(b)?n[b]:void 0,E=w!==void 0,T=xrn(w,b,n,t,e);if(E&&T)r.set(b,w,T);else{const{configValue:S=void 0,configFrom:A=void 0}=Ige(b)&&b!=="values"?cq(b,o.style,n.style,l):{},C=S!==void 0;E&&!C?r.set(b,w,T):(A!=="vgAxisConfig"||Srn.has(b)&&C||MR(S)||Rt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=rFe.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=w5e(m[w]??{},t),T=w==="labels"?yrn(t,e,E):E;return T!==void 0&&!jr(T)&&(b[w]={update:T}),b},{});return jr(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function Arn({encoding:e,size:t}){for(const n of ap){const r=il(n);Fh(t[r])&&a0(e[n])&&(delete t[r],Je(p4e(r)))}return t}const Crn={vgMark:"arc",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...by(e,"radius"),...by(e,"theta")})},Irn={vgMark:"area",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...BM("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...BM("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...Fre(e)})},krn={vgMark:"rect",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...by(e,"x"),...by(e,"y")})},Rrn={vgMark:"shape",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===JS?{field:at(n,{expr:"datum"})}:{}}]}},Nrn={vgMark:"image",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...by(e,"x"),...by(e,"y"),...Mre(e,"url")})},Prn={vgMark:"line",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...eo("size",e,{vgChannel:"strokeWidth"}),...Fre(e)})},Drn={vgMark:"trail",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...eo("size",e),...Fre(e)})};function Zre(e,t){const{config:n}=e;return{...Xc(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...eo("size",e),...eo("angle",e),...Orn(e,n,t)}}function Orn(e,t,n){return n?{shape:{value:n}}:eo("shape",e)}const $rn={vgMark:"symbol",encodeEntry:e=>Zre(e)},Mrn={vgMark:"symbol",encodeEntry:e=>Zre(e,"circle")},Lrn={vgMark:"symbol",encodeEntry:e=>Zre(e,"square")},Frn={vgMark:"rect",encodeEntry:e=>({...Xc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...by(e,"x"),...by(e,"y")})},jrn={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...Xc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...BM("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...BM("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...eo("size",e,{vgChannel:"strokeWidth"})}}},Brn={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...Xc(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...da("x",e,{defaultPos:"mid"}),...da("y",e,{defaultPos:"mid"}),...Mre(e),...eo("size",e,{vgChannel:"fontSize"}),...eo("angle",e),...Qge("align",Urn(e.markDef,n,t)),...Qge("baseline",zrn(e.markDef,n,t)),...da("radius",e,{defaultPos:null}),...da("theta",e,{defaultPos:null})}}};function Urn(e,t,n){if(wr("align",e,n)===void 0)return"center"}function zrn(e,t,n){if(wr("baseline",e,n)===void 0)return"middle"}const Vrn={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...Xc(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...da("x",e,{defaultPos:"mid",vgChannel:"xc"}),...da("y",e,{defaultPos:"mid",vgChannel:"yc"}),...eo("size",e,{defaultValue:Hrn(e),vgChannel:i}),[s]:ci(wr("thickness",n,t))}}};function Hrn(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=wr("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&Zy(a)&&lr(a.step)?a.step*3/4:FM(t.view,i)*3/4}}const PP={arc:Crn,area:Irn,bar:krn,circle:Mrn,geoshape:Rrn,image:Nrn,line:Prn,point:$rn,rect:Frn,rule:jrn,square:Lrn,text:Brn,tick:Vrn,trail:Drn};function qrn(e){if(Hn([KF,GF,oJt],e.mark)){const t=lFe(e.mark,e.encoding);if(t.length>0)return Wrn(e,t)}else if(e.mark===YF){const t=JH.some(n=>wr(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Grn(e)}return eie(e)}const v0e="faceted_path_";function Wrn(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:v0e+e.requestDataName(_i.Main),data:e.requestDataName(_i.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:eie(e,{fromPrefix:v0e})}]}const b0e="stack_group_";function Grn(e){var l;const[t]=eie(e,{fromPrefix:b0e}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Sx(t.encode.update,["y","yc","y2","height",...JH]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...qu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Sx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...qu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of JH){const f=Fm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=ci(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Fm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:ci(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(_i.Main),name:b0e+e.requestDataName(_i.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function Yrn(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&Zf(o)&&XH(o.value)||!o&&XH(wr("order",i,s)))){if((je(o)||Ze(o))&&!n)return o4e(o,{expr:"datum"});if(l_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(yh(c))return{field:at({aggregate:wre(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(q4e(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function eie(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=cs(r.clip,Krn(e),Xrn(e)),a=i4e(r),u=i.key,l=Yrn(e),c=Qrn(e),f=wr("aria",r,s),d=PP[n].postEncodingTransform?PP[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:PP[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(_i.Main)},encode:{update:PP[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Krn(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Xrn(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Qrn(e){if(!e.component.selection)return null;const t=Ye(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ye(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class J5e extends G5e{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Rge(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Mh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=$Zt(o,s,{graticule:t.data&&Ore(t.data)}));const u=this.encoding=jJt(t.encoding||{},a,o.filled,s);this.markDef=RFe(o,u,s),this.size=Arn({encoding:u,size:Rge(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=kFe(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>kre(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===z4e,r=t&&LKt.some(i=>cn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return VF.reduce((r,i)=>{const s=Ms(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Cu(t);return je(n)&&(i.domain=n.map(bl)),je(r)&&(i.range=r.map(bl)),i}initAxes(t){return ap.reduce((n,r)=>{const i=t[r];if(cn(i)||r===Ci&&cn(t.x2)||r===po&&cn(t.y2)){const s=cn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ye(t),r={};for(const i of n){const s=t[i];r[i]=MR(s)?r4e(s):bl(s)}return r}initLegends(t){return GKt.reduce((n,r)=>{const i=Ms(t[r]);if(i&&KKt(r)){const s=i.legend;n[r]=s&&Cu(s)}return n},{})}parseData(){this.component.data=S5(this)}parseLayoutSize(){lrn(this)}parseSelections(){this.component.selection=etn(this,this.selection)}parseMarkGroup(){this.component.mark=qrn(this)}parseAxesAndHeaders(){this.component.axes=vrn(this)}assembleSelectionTopLevelSignals(t){return Een(this,t)}assembleSignals(){return[...d5e(this),..._en(this,[])]}assembleSelectionData(t){return xen(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return zre(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!rT(this.parent))&&(t=VFe(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return R1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return Lh(n)}typedFieldDef(t){const n=this.fieldDef(t);return tu(n)?n:null}}class tie extends Xre{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(o5(a))return new tie(a,this,this.getName(`layer_${u}`),o,s);if(cg(a))return new J5e(a,this,this.getName(`layer_${u}`),o,s);throw new Error(Yne(a))})}parseData(){this.component.data=S5(this);for(const t of this.children)t.parseData()}parseLayoutSize(){arn(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ye(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){_rn(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),d5e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),zre(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return Sen(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),k5e(this))}}function nie(e,t,n,r,i){if(JF(e))return new ZA(e,t,n,i);if(o5(e))return new tie(e,t,n,r,i);if(cg(e))return new J5e(e,t,n,r,i);if(lZt(e))return new prn(e,t,n,i);throw new Error(Yne(e))}function Jrn(e,t={}){t.logger&&pQt(t.logger),t.fieldTitle&&eFe(t.fieldTitle);try{const n=IFe(jS(t.config,e.config)),r=LFe(e,n),i=nie(r,null,"",void 0,n);return i.parse(),Enn(i.component.data,i),{spec:ein(i,Zrn(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&mQt(),t.fieldTitle&&RJt()}}function Zrn(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):mt(t)&&(t={type:t}),i&&s&&gen(t.type)){if(i==="step"&&s==="step")Je(pge()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(pge(zF(o)));const a=o==="width"?"height":"width";t.type=yen(a)}}return{...Ye(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...zge(n,!1),...zge(e,!0)}}function ein(e,t,n={},r){const i=e.config?xZt(e.config):void 0,s=[].concat(e.assembleSelectionData([]),rrn(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...SFe(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const tin=NKt.version,nin=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Tx,accessPathWithDatum:jne,compile:Jrn,contains:Hn,deepEqual:Cl,deleteNestedProperty:IM,duplicate:nn,entries:my,every:Mne,fieldIntersection:Fne,flatAccessWithDatum:L6e,getFirstDefined:cs,hasIntersection:Lne,hash:Vn,internalField:B6e,isBoolean:LI,isEmpty:jr,isEqual:DKt,isInternalField:U6e,isNullOrFalse:XH,isNumeric:MF,keys:Ye,logicalExpr:QA,mergeDeep:$6e,never:O6e,normalize:LFe,normalizeAngle:FI,omit:qu,pick:Sx,prefixGenerator:QH,removePathFromField:XS,replaceAll:mb,replacePathInField:Lc,resetIdCounter:$Kt,setEqual:M6e,some:pb,stringify:Br,titleCase:AR,unique:nh,uniqueId:j6e,vals:$o,varName:Ai,version:tin},Symbol.toStringTag,{value:"Module"}));function Z5e(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var rin="vega-themes",iin="2.15.0",sin="Themes for stylized Vega and Vega-Lite visualizations.",oin=["vega","vega-lite","themes","style"],ain="BSD-3-Clause",uin={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},lin=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],cin="build/vega-themes.js",rie="build/vega-themes.module.js",fin="build/vega-themes.min.js",din="build/vega-themes.min.js",hin="build/vega-themes.module.d.ts",pin={type:"git",url:"https://github.com/vega/vega-themes.git"},min=["src","build"],gin={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},yin={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},vin={vega:"*","vega-lite":"*"},bin={},_in={name:rin,version:iin,description:sin,keywords:oin,license:ain,author:uin,contributors:lin,main:cin,module:rie,unpkg:fin,jsdelivr:din,types:hin,repository:pin,files:min,scripts:gin,devDependencies:yin,peerDependencies:vin,dependencies:bin};const V_="#fff",_0e="#888",win={background:"#333",view:{stroke:_0e},title:{color:V_,subtitleColor:V_},style:{"guide-label":{fill:V_},"guide-title":{fill:V_}},axis:{domainColor:V_,gridColor:_0e,tickColor:V_}},hv="#4572a7",Ein={background:"#fff",arc:{fill:hv},area:{fill:hv},line:{stroke:hv,strokeWidth:2},path:{stroke:hv},rect:{fill:hv},shape:{stroke:hv},symbol:{fill:hv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},pv="#30a2da",TB="#cbcbcb",xin="#999",Sin="#333",w0e="#f0f0f0",E0e="#333",Tin={arc:{fill:pv},area:{fill:pv},axis:{domainColor:TB,grid:!0,gridColor:TB,gridWidth:1,labelColor:xin,labelFontSize:10,titleColor:Sin,tickColor:TB,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:w0e,group:{fill:w0e},legend:{labelColor:E0e,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:E0e,titleFontSize:14,titlePadding:10},line:{stroke:pv,strokeWidth:2},path:{stroke:pv,strokeWidth:.5},rect:{fill:pv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:pv},bar:{binSpacing:2,fill:pv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},mv="#000",Ain={group:{fill:"#e5e5e5"},arc:{fill:mv},area:{fill:mv},line:{stroke:mv},path:{stroke:mv},rect:{fill:mv},shape:{stroke:mv},symbol:{fill:mv,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},Cin=22,Iin="normal",x0e="Benton Gothic, sans-serif",S0e=11.5,kin="normal",gv="#82c6df",AB="Benton Gothic Bold, sans-serif",T0e="normal",A0e=13,r2={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},Rin={background:"#ffffff",title:{anchor:"start",color:"#000000",font:AB,fontSize:Cin,fontWeight:Iin},arc:{fill:gv},area:{fill:gv},line:{stroke:gv,strokeWidth:2},path:{stroke:gv},rect:{fill:gv},shape:{stroke:gv},symbol:{fill:gv,size:30},axis:{labelFont:x0e,labelFontSize:S0e,labelFontWeight:kin,titleFont:AB,titleFontSize:A0e,titleFontWeight:T0e},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:x0e,labelFontSize:S0e,symbolType:"square",titleFont:AB,titleFontSize:A0e,titleFontWeight:T0e},range:{category:r2["category-6"],diverging:r2["fireandice-6"],heatmap:r2["fire-7"],ordinal:r2["fire-7"],ramp:r2["fire-7"]}},yv="#ab5787",DP="#979797",Nin={background:"#f9f9f9",arc:{fill:yv},area:{fill:yv},line:{stroke:yv},path:{stroke:yv},rect:{fill:yv},shape:{stroke:yv},symbol:{fill:yv,size:30},axis:{domainColor:DP,domainWidth:.5,gridWidth:.2,labelColor:DP,tickColor:DP,tickWidth:.2,titleColor:DP},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},vv="#3e5c69",Pin={background:"#fff",arc:{fill:vv},area:{fill:vv},line:{stroke:vv},path:{stroke:vv},rect:{fill:vv},shape:{stroke:vv},symbol:{fill:vv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},oc="#1696d2",C0e="#000000",Din="#FFFFFF",OP="Lato",CB="Lato",Oin="Lato",$in="#DEDDDD",Min=18,i2={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Lin={background:Din,title:{anchor:"start",fontSize:Min,font:OP},axisX:{domain:!0,domainColor:C0e,domainWidth:1,grid:!1,labelFontSize:12,labelFont:CB,labelAngle:0,tickColor:C0e,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:OP},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:$in,gridWidth:1,labelFontSize:12,labelFont:CB,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:OP,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:CB,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:OP,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:i2["six-groups-cat-1"],diverging:i2["diverging-colors"],heatmap:i2["diverging-colors"],ordinal:i2["six-groups-seq"],ramp:i2["shades-blue"]},area:{fill:oc},rect:{fill:oc},line:{color:oc,stroke:oc,strokeWidth:5},trail:{color:oc,stroke:oc,strokeWidth:0,size:1},path:{stroke:oc,strokeWidth:.5},point:{filled:!0},text:{font:Oin,color:oc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:oc,stroke:null}},arc:{fill:oc},shape:{stroke:oc},symbol:{fill:oc,size:30}},bv="#3366CC",I0e="#ccc",$P="Arial, sans-serif",Fin={arc:{fill:bv},area:{fill:bv},path:{stroke:bv},rect:{fill:bv},shape:{stroke:bv},symbol:{stroke:bv},circle:{fill:bv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:$P,fontSize:12},"guide-title":{font:$P,fontSize:12},"group-title":{font:$P,fontSize:12}},title:{font:$P,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:I0e,tickColor:I0e,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},iie=e=>e*(1/3+1),k0e=iie(9),R0e=iie(10),N0e=iie(12),s2="Segoe UI",P0e="wf_standard-font, helvetica, arial, sans-serif",D0e="#252423",o2="#605E5C",O0e="transparent",jin="#C8C6C4",af="#118DFF",Bin="#12239E",Uin="#E66C37",zin="#6B007B",Vin="#E044A7",Hin="#744EC2",qin="#D9B300",Win="#D64550",eje=af,tje="#DEEFFF",$0e=[tje,eje],Gin=[tje,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",eje],Yin={view:{stroke:O0e},background:O0e,font:s2,header:{titleFont:P0e,titleFontSize:N0e,titleColor:D0e,labelFont:s2,labelFontSize:R0e,labelColor:o2},axis:{ticks:!1,grid:!1,domain:!1,labelColor:o2,labelFontSize:k0e,titleFont:P0e,titleColor:D0e,titleFontSize:N0e,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:jin,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:af},line:{stroke:af,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:s2,fontSize:k0e,fill:o2},arc:{fill:af},area:{fill:af,line:!0,opacity:.6},path:{stroke:af},rect:{fill:af},point:{fill:af,filled:!0,size:75},shape:{stroke:af},symbol:{fill:af,strokeWidth:1.5,size:50},legend:{titleFont:s2,titleFontWeight:"bold",titleColor:o2,labelFont:s2,labelFontSize:R0e,labelColor:o2,symbolType:"circle",symbolSize:75},range:{category:[af,Bin,Uin,zin,Vin,Hin,qin,Win],diverging:$0e,heatmap:$0e,ordinal:Gin}},IB='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Kin='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',kB=400,MP={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Xin=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Qin=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function T5({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=MP.gridBg[e],i=MP.textPrimary[e],s=MP.textSecondary[e],o=n==="dark"?Xin:Qin,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:IB,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Kin,labelFontWeight:kB,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:MP.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:IB,fill:s,fontWeight:kB},"guide-title":{font:IB,fill:s,fontWeight:kB}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const Jin=T5({theme:"white",background:"#ffffff"}),Zin=T5({theme:"g10",background:"#f4f4f4"}),esn=T5({theme:"g90",background:"#262626"}),tsn=T5({theme:"g100",background:"#161616"}),nsn=_in.version,rsn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Zin,carbong100:tsn,carbong90:esn,carbonwhite:Jin,dark:win,excel:Ein,fivethirtyeight:Tin,ggplot2:Ain,googlecharts:Fin,latimes:Rin,powerbi:Yin,quartz:Nin,urbaninstitute:Lin,version:nsn,vox:Pin},Symbol.toStringTag,{value:"Module"}));function isn(e,t,n,r){if(je(e))return`[${e.map(i=>t(mt(i)?i:M0e(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=M0e(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function ssn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function M0e(e,t){return JSON.stringify(e,ssn(t))}var osn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const nje="vg-tooltip-element",asn={offsetX:10,offsetY:10,id:nje,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:usn,maxDepth:2,formatTooltip:isn,baseURL:""};function usn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function lsn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return osn.toString().replace(nje,e)}function csn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class fsn{constructor(t){this.options={...asn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=lsn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=csn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var RB={};function dsn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var NB,L0e;function hsn(){return L0e||(L0e=1,NB=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),NB}var psn=yr;yr.Node=Sb;yr.create=yr;function yr(e){var t=this;if(t instanceof yr||(t=new yr),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}yr.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};yr.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};yr.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};yr.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)gsn(this,arguments[e]);return this.length};yr.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ysn(this,arguments[e]);return this.length};yr.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};yr.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};yr.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};yr.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};yr.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};yr.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};yr.prototype.map=function(e,t){t=t||this;for(var n=new yr,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};yr.prototype.mapReverse=function(e,t){t=t||this;for(var n=new yr,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};yr.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};yr.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};yr.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};yr.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};yr.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};yr.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new yr;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};yr.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=msn(this,i,n[r]);return s};yr.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function msn(e,t,n){var r=t===e.head?new Sb(n,null,t,e):new Sb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function gsn(e,t){e.tail=new Sb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ysn(e,t){e.head=new Sb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Sb(e,t,n,r){if(!(this instanceof Sb))return new Sb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{hsn()(yr)}catch{}const vsn=psn,Kv=Symbol("max"),Pp=Symbol("length"),H_=Symbol("lengthCalculator"),eC=Symbol("allowStale"),g1=Symbol("maxAge"),Cp=Symbol("dispose"),F0e=Symbol("noDisposeOnSet"),Gs=Symbol("lruList"),uf=Symbol("cache"),rje=Symbol("updateAgeOnGet"),PB=()=>1;class bsn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[Kv]=t.max||1/0;const n=t.length||PB;if(this[H_]=typeof n!="function"?PB:n,this[eC]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[g1]=t.maxAge||0,this[Cp]=t.dispose,this[F0e]=t.noDisposeOnSet||!1,this[rje]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[Kv]=t||1/0,a2(this)}get max(){return this[Kv]}set allowStale(t){this[eC]=!!t}get allowStale(){return this[eC]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[g1]=t,a2(this)}get maxAge(){return this[g1]}set lengthCalculator(t){typeof t!="function"&&(t=PB),t!==this[H_]&&(this[H_]=t,this[Pp]=0,this[Gs].forEach(n=>{n.length=this[H_](n.value,n.key),this[Pp]+=n.length})),a2(this)}get lengthCalculator(){return this[H_]}get length(){return this[Pp]}get itemCount(){return this[Gs].length}rforEach(t,n){n=n||this;for(let r=this[Gs].tail;r!==null;){const i=r.prev;j0e(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Gs].head;r!==null;){const i=r.next;j0e(this,t,r,n),r=i}}keys(){return this[Gs].toArray().map(t=>t.key)}values(){return this[Gs].toArray().map(t=>t.value)}reset(){this[Cp]&&this[Gs]&&this[Gs].length&&this[Gs].forEach(t=>this[Cp](t.key,t.value)),this[uf]=new Map,this[Gs]=new vsn,this[Pp]=0}dump(){return this[Gs].map(t=>HM(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Gs]}set(t,n,r){if(r=r||this[g1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[H_](n,t);if(this[uf].has(t)){if(s>this[Kv])return vE(this,this[uf].get(t)),!1;const u=this[uf].get(t).value;return this[Cp]&&(this[F0e]||this[Cp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[Pp]+=s-u.length,u.length=s,this.get(t),a2(this),!0}const o=new _sn(t,n,s,i,r);return o.length>this[Kv]?(this[Cp]&&this[Cp](t,n),!1):(this[Pp]+=o.length,this[Gs].unshift(o),this[uf].set(t,this[Gs].head),a2(this),!0)}has(t){if(!this[uf].has(t))return!1;const n=this[uf].get(t).value;return!HM(this,n)}get(t){return DB(this,t,!0)}peek(t){return DB(this,t,!1)}pop(){const t=this[Gs].tail;return t?(vE(this,t),t.value):null}del(t){vE(this,this[uf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[uf].forEach((t,n)=>DB(this,n,!1))}}const DB=(e,t,n)=>{const r=e[uf].get(t);if(r){const i=r.value;if(HM(e,i)){if(vE(e,r),!e[eC])return}else n&&(e[rje]&&(r.value.now=Date.now()),e[Gs].unshiftNode(r));return i.value}},HM=(e,t)=>{if(!t||!t.maxAge&&!e[g1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[g1]&&n>e[g1]},a2=e=>{if(e[Pp]>e[Kv])for(let t=e[Gs].tail;e[Pp]>e[Kv]&&t!==null;){const n=t.prev;vE(e,t),t=n}},vE=(e,t)=>{if(t){const n=t.value;e[Cp]&&e[Cp](n.key,n.value),e[Pp]-=n.length,e[uf].delete(n.key),e[Gs].removeNode(t)}};class _sn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const j0e=(e,t,n,r)=>{let i=n.value;HM(e,i)&&(vE(e,n),e[eC]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var wsn=bsn;const Esn=Object.freeze({loose:!0}),xsn=Object.freeze({}),Ssn=e=>e?typeof e!="object"?Esn:e:xsn;var sie=Ssn,bq={exports:{}};const Tsn="2.0.0",ije=256,Asn=Number.MAX_SAFE_INTEGER||9007199254740991,Csn=16,Isn=ije-6,ksn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var oie={MAX_LENGTH:ije,MAX_SAFE_COMPONENT_LENGTH:Csn,MAX_SAFE_BUILD_LENGTH:Isn,MAX_SAFE_INTEGER:Asn,RELEASE_TYPES:ksn,SEMVER_SPEC_VERSION:Tsn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const Rsn=typeof process=="object"&&RB&&RB.NODE_DEBUG&&/\bsemver\b/i.test(RB.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var A5=Rsn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=oie,s=A5;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(bq,bq.exports);var aie=bq.exports;const B0e=/^[0-9]+$/,sje=(e,t)=>{const n=B0e.test(e),r=B0e.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},Nsn=(e,t)=>sje(t,e);var Psn={compareIdentifiers:sje,rcompareIdentifiers:Nsn};const LP=A5,{MAX_LENGTH:U0e,MAX_SAFE_INTEGER:FP}=oie,{safeRe:z0e,t:V0e}=aie,Dsn=sie,{compareIdentifiers:q_}=Psn;let Osn=class Sd{constructor(t,n){if(n=Dsn(n),t instanceof Sd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>U0e)throw new TypeError(`version is longer than ${U0e} characters`);LP("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?z0e[V0e.LOOSE]:z0e[V0e.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>FP||this.major<0)throw new TypeError("Invalid major version");if(this.minor>FP||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>FP||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<FP)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(LP("SemVer.compare",this.version,this.options,t),!(t instanceof Sd)){if(typeof t=="string"&&t===this.version)return 0;t=new Sd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Sd||(t=new Sd(t,this.options)),q_(this.major,t.major)||q_(this.minor,t.minor)||q_(this.patch,t.patch)}comparePre(t){if(t instanceof Sd||(t=new Sd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(LP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return q_(r,i)}while(++n)}compareBuild(t){t instanceof Sd||(t=new Sd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(LP("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return q_(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),q_(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var uie=Osn;const H0e=uie,$sn=(e,t,n)=>new H0e(e,n).compare(new H0e(t,n));var iT=$sn;const Msn=iT,Lsn=(e,t,n)=>Msn(e,t,n)===0;var Fsn=Lsn;const jsn=iT,Bsn=(e,t,n)=>jsn(e,t,n)!==0;var Usn=Bsn;const zsn=iT,Vsn=(e,t,n)=>zsn(e,t,n)>0;var Hsn=Vsn;const qsn=iT,Wsn=(e,t,n)=>qsn(e,t,n)>=0;var Gsn=Wsn;const Ysn=iT,Ksn=(e,t,n)=>Ysn(e,t,n)<0;var Xsn=Ksn;const Qsn=iT,Jsn=(e,t,n)=>Qsn(e,t,n)<=0;var Zsn=Jsn;const eon=Fsn,ton=Usn,non=Hsn,ron=Gsn,ion=Xsn,son=Zsn,oon=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return eon(e,n,r);case"!=":return ton(e,n,r);case">":return non(e,n,r);case">=":return ron(e,n,r);case"<":return ion(e,n,r);case"<=":return son(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var aon=oon,OB,q0e;function uon(){if(q0e)return OB;q0e=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}OB=t;const n=sie,{safeRe:r,t:i}=aie,s=aon,o=A5,a=uie,u=oje();return OB}var $B,W0e;function oje(){if(W0e)return $B;W0e=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(H,N(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let P=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>k(q,this.options));U&&(P=P.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",P);const z=new Map,W=P.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,F)&&$.set.some(B=>g(B,F)&&M.every(U=>B.every(H=>U.intersects(H,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(O(this.set[F],$,this.options))return!0;return!1}}$B=e;const t=wsn,n=new t({max:1e3}),r=sie,i=uon(),s=A5,o=uie,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=aie,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=oie,p=D=>D.value==="<0.0.0-0",m=D=>D.value==="",g=(D,$)=>{let F=!0;const M=D.slice();let B=M.pop();for(;F&&M.length;)F=M.every(U=>B.intersects(U,$)),B=M.pop();return F},y=(D,$)=>(s("comp",D,$),D=E(D,$),s("caret",D),D=b(D,$),s("tildes",D),D=S(D,$),s("xrange",D),D=C(D,$),s("stars",D),D),v=D=>!D||D.toLowerCase()==="x"||D==="*",b=(D,$)=>D.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(D,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return D.replace(F,(M,B,U,H,P)=>{s("tilde",D,M,B,U,H,P);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:P?(s("replaceTilde pr",P),z=`>=${B}.${U}.${H}-${P} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(D,$)=>D.trim().split(/\s+/).map(F=>T(F,$)).join(" "),T=(D,$)=>{s("caret",D,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return D.replace(F,(B,U,H,P,z)=>{s("caret",D,B,U,H,P,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${M} <${+U+1}.0.0-0`:v(P)?U==="0"?W=`>=${U}.${H}.0${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${M} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${P}-${z} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${P}${M} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P} <${+U+1}.0.0-0`),s("caret return",W),W})},S=(D,$)=>(s("replaceXRanges",D,$),D.split(/\s+/).map(F=>A(F,$)).join(" ")),A=(D,$)=>{D=D.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return D.replace(F,(M,B,U,H,P,z)=>{s("xRange",D,M,B,U,H,P,z);const W=v(U),j=W||v(H),q=j||v(P),G=q;return B==="="&&G&&(B=""),z=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(H=0),P=0,B===">"?(B=">=",j?(U=+U+1,H=0,P=0):(H=+H+1,P=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),M=`${B+U}.${H}.${P}${z}`):j?M=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(M=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",M),M})},C=(D,$)=>(s("replaceStars",D,$),D.trim().replace(a[u.STAR],"")),k=(D,$)=>(s("replaceGTE0",D,$),D.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=D=>($,F,M,B,U,H,P,z,W,j,q,G,ne)=>(v(M)?F="":v(B)?F=`>=${M}.0.0${D?"-0":""}`:v(U)?F=`>=${M}.${B}.0${D?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${D?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:D?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),O=(D,$,F)=>{for(let M=0;M<D.length;M++)if(!D[M].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let M=0;M<D.length;M++)if(s(D[M].semver),D[M].semver!==i.ANY&&D[M].semver.prerelease.length>0){const B=D[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return $B}const lon=oje(),con=(e,t,n)=>{try{t=new lon(t,n)}catch{return!1}return t.test(e)};var fon=con,aje=dsn(fon);function don(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var hon=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function uje(e,...t){for(const n of t)pon(e,n);return e}function pon(e,t){for(const n of Object.keys(t))BS(e,n,t[n],!0)}const cf=QYt;let HI=nin;const jP=typeof window<"u"?window:void 0;var tye;HI===void 0&&((tye=jP==null?void 0:jP.vl)!=null&&tye.compile)&&(HI=jP.vl);const mon={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},gon={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},Z2={vega:"Vega","vega-lite":"Vega-Lite"},qM={vega:cf.version,"vega-lite":HI?HI.version:"not available"},yon={vega:e=>e,"vega-lite":(e,t)=>HI.compile(e,{config:t}).spec},von=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,bon="chart-wrapper";function _on(e){return typeof e=="function"}function G0e(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${Z2[r]} JSON Source`}function won(e,t){if(e.$schema){const n=Z5e(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${Z2[n.library]}, but mode argument sets ${Z2[t]??t}.`);const r=n.library;return aje(qM[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${Z2[r]} ${n.version}, but the current version of ${Z2[r]} is v${qM[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function lje(e){return!!(e&&"load"in e)}function Y0e(e){return lje(e)?e:cf.loader(e)}function Eon(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function xon(e,t,n={}){let r,i;mt(t)?(i=Y0e(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=Eon(r),o=s.loader;(!i||o)&&(i=Y0e(n.loader??o));const a=await K0e(s,i),u=await K0e(n,i),l={...uje(u,a),config:jS(u.config??{},a.config??{})};return await Ton(e,r,l,i)}async function K0e(e,t){const n=mt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function Son(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function Ton(e,t,n={},r){const i=n.theme?jS(rsn[n.theme],n.config??{}):n.config,s=Hy(n.actions)?n.actions:uje({},mon,n.actions??{}),o={...gon,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??cf.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:S}=Son(c);if(!T.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?hon.toString():n.defaultStyle,S.appendChild(A)}}const f=won(t,n.mode);let d=yon[f](t,i);if(f==="vega-lite"&&d.$schema){const E=Z5e(d.$schema);aje(qM.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${qM.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(bon),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):U4(d,p,!0,!1).newDocument),n.formatLocale&&cf.formatLocale(n.formatLocale),n.timeFormatLocale&&cf.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?cf.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&cf.expressionFunction(E,T)}const{ast:m}=n,g=cf.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||cf.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:cf.expressionInterpreter??n.expr??aKt}:{}});if(y.addSignalListener("autosize",(E,T)=>{const{type:S}=T;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,S=E&&!lje(E)?E==null?void 0:E.baseURL:void 0,A=_on(T)?T:new fsn({baseURL:S,...T===!0?{}:T}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(E,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const A=document.createElement("summary");A.innerHTML=von,S.append(A),b=C=>{S.contains(C.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const A=o[`${S.toUpperCase()}_ACTION`],C=document.createElement("a"),k=gt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${S}`,C.addEventListener("mousedown",async function(N){N.preventDefault();const O=await y.toImageURL(S,k);this.href=O}),T.append(C)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(A){G0e(M9(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),T.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(A){G0e(M9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),T.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){don(window,S,{config:i,mode:f,renderer:a,spec:M9(t)}),C.preventDefault()}),T.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function Aon(e){return!!e&&{}.toString.call(e)==="[object Function]"}function Con(e,t,n){n&&(Aon(n)?n(e.data(t)):e.change(t,cf.changeset().remove(()=>!0).insert(n)))}function Ion(e,t){Object.keys(t).forEach(n=>{Con(e,n,t[n])})}function cje(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const fje=()=>{};function MB(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function kon(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=cje([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!aD(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function X0e(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function LB(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function eA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class dje extends _r.PureComponent{constructor(){super(...arguments),eA(this,"containerRef",_r.createRef()),eA(this,"resultPromise",void 0),eA(this,"handleError",t=>{const{onError:n=fje}=this.props;n(t,this.containerRef.current),console.warn(t)}),eA(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=cje([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=kon(LB(this.props),LB(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!qV(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&X0e(a,s),i&&MB(a,i)),a.run()})}else qV(i,s)||this.modifyView(o=>{s&&X0e(o,s),i&&MB(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=LB(this.props);this.resultPromise=xon(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;MB(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return _r.createElement("div",{ref:this.containerRef,className:t,style:n})}}eA(dje,"propTypes",{className:Uoe.string,onError:Uoe.func});function _q(){return _q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_q.apply(this,arguments)}function wq(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const Ron={};class hje extends _r.PureComponent{constructor(){super(...arguments),wq(this,"vegaEmbed",_r.createRef()),wq(this,"handleNewView",t=>{this.update();const{onNewView:n=fje}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){qV(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{Ion(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return _r.createElement(dje,_q({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}wq(hje,"defaultProps",{data:Ron});function Eq(){return Eq=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eq.apply(this,arguments)}function xq(e){return _r.createElement(hje,Eq({},e,{mode:"vega-lite"}))}function Non({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=dL(!0),[o,a]=b1(),u=I.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=I.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=I.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(Vx,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Nt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Nt,{align:"center",children:[e.type==="metadata"&&_.jsx(eQe,{size:20}),e.type==="numerical"&&_.jsx(lQe,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(KXe,{size:20}),e.type==="likert"&&_.jsx(rQe,{size:20}),e.type==="dropdown"&&_.jsx(gQe,{size:20}),e.type==="slider"&&_.jsx(HXe,{size:20}),e.type==="radio"&&_.jsx(dQe,{size:20}),e.type==="checkbox"&&_.jsx(yQe,{size:20}),e.type==="iframe"&&_.jsx(oQe,{size:20}),_.jsx(Si,{order:5,ml:4,children:e.id})]}),_.jsx(ZXe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(pL,{in:i,mah:400,children:[_.jsx(me,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(NE,{})}),_.jsxs(tY,{cols:2,h:360,children:[_.jsx(pm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx(xq,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Nt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(fA,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Nt,{align:"center",gap:"xs",children:_.jsx(et,{children:f[e.id]})},d))]})]})}),_.jsx(pm,{mih:200,children:e.type==="metadata"?_.jsx(xq,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Response Specification: "}),_.jsx(fA,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Correct Answer: "}),_.jsx(fA,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function Pon({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&nNe(t.components[n],t),i=I.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Nt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(Non,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(et,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function Don({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=I.useState([...n]),o=I.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=I.useMemo(()=>{let l=b0(e.sequence);return l=WY(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=vm();return _.jsxs(Vx,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Nt,{direction:"row",justify:"space-between",children:_.jsx(El.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(Ss,{children:[_.jsx(El,{value:"completed",label:"Completed"}),_.jsx(El,{value:"inprogress",label:"In Progress"}),_.jsx(El,{value:"rejected",label:"Rejected"})]})})}),_.jsx(NE,{my:"xs"}),i.length===0?_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(et,{children:"No data available."})}):_.jsxs(Nt,{direction:"row",children:[_.jsx(me,{w:340,children:_.jsx(O$,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(NE,{orientation:"vertical",mx:"md"}),_.jsx(Pon,{participantData:i,studyConfig:e,trialId:u})]})]})}function Oon({globalConfig:e}){const{studyId:t}=vm(),[n,r]=I.useState([]),[i,s]=I.useState(void 0),[o,a]=I.useState(!1),{storageEngine:u}=As(),l=Vh(),{tab:c}=vm(),{user:f}=Qb(),d=I.useCallback(async()=>{if(a(!0),t){const g=await m4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);I.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=I.useMemo(()=>{const g=n.filter(b=>!b.rejected&&b.completed),y=n.filter(b=>!b.rejected&&!b.completed),v=n.filter(b=>b.rejected);return[g,y,v]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx(HA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsxs(Rc,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx($l,{visible:o}),_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(Si,{order:5,children:t}),_.jsx(QDe,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx(kl,{h:"xs"}),_.jsxs(rs,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(rs.List,{children:[_.jsx(rs.Tab,{value:"table",leftSection:_.jsx(vQe,{size:16}),children:"Table View"}),_.jsx(rs.Tab,{value:"stats",leftSection:_.jsx(QXe,{size:16}),children:"Trial Stats"}),_.jsx(xi,{label:"Coming soon",position:"bottom",children:_.jsx(rs.Tab,{value:"replay",leftSection:_.jsx(fQe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(rs.Tab,{value:"manage",leftSection:_.jsx(_we,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(rs.Panel,{value:"table",pt:"xs",children:i&&_.jsx(V6t,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(rs.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(Don,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(rs.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(rs.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(Q6t,{studyId:t,refresh:d}):_.jsx(Rc,{mt:20,children:_.jsx(Yx,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(vwe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Q0e({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=Qb(),{storageEngine:o}=As(),[a,u]=I.useState(!1),l=vm();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[s,n,t,l,r,i,a]),r.determiningStatus||!o?_.jsx($l,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(gY,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function pje(e,t){if(e instanceof yf){t(!0);const n=new jp,r=z$();try{await DDt(r,n,GNe)}catch(i){Q$({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function $on(){const{user:e}=Qb(),[t,n]=I.useState(!1),{storageEngine:r}=As();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&Q$({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.determiningStatus,e.isAdmin,e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(gY,{to:"/"}):_.jsx(Rc,{children:_.jsx(Db,{padding:"lg",children:_.jsxs(Nt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Ry,{maw:200,mt:50,mb:100,src:`${Uu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(et,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(on,{onClick:()=>pje(r,n),leftSection:_.jsx(bQe,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx($l,{visible:t})]})})})}var mje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],M=$%100;return"["+$+(F[(M-20)%10]||F[M]||F[0])+"]"}},b=function($,F,M){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(M)+$},w={s:b,z:function($){var F=-$.utcOffset(),M=Math.abs(F),B=Math.floor(M/60),U=M%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function $(F,M){if(F.date()<M.date())return-$(M,F);var B=12*(M.year()-F.year())+(M.month()-F.month()),U=F.clone().add(B,f),H=M-U<0,P=F.clone().add(B+(H?-1:1),f);return+(-(B+(M-U)/(H?U-P:P-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",T={};T[E]=v;var S="$isDayjsObject",A=function($){return $ instanceof O||!(!$||!$[S])},C=function $(F,M,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();T[H]&&(U=H),M&&(T[H]=M,U=H);var P=F.split("-");if(!U&&P.length>1)return $(P[0])}else{var z=F.name;T[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},k=function($,F){if(A($))return $.clone();var M=typeof F=="object"?F:{};return M.date=$,M.args=arguments,new O(M)},N=w;N.l=C,N.i=A,N.w=function($,F){return k($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var O=function(){function $(M){this.$L=C(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[S]=!0}var F=$.prototype;return F.parse=function(M){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(N.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var P=U.match(g);if(P){var z=P[2]-1||0,W=(P[7]||"0").substring(0,3);return H?new Date(Date.UTC(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(U)}(M),this.init()},F.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(M,B){var U=k(M);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(M,B){return k(M)<this.startOf(B)},F.isBefore=function(M,B){return this.endOf(B)<k(M)},F.$g=function(M,B,U){return N.u(M)?this[B]:this.set(U,M)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(M,B){var U=this,H=!!N.u(B)||B,P=N.p(M),z=function(he,ve){var Ie=N.w(U.$u?Date.UTC(U.$y,ve,he):new Date(U.$y,ve,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ve){return N.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ve)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(P){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(M){return this.startOf(M,!1)},F.$set=function(M,B){var U,H=N.p(M),P="set"+(this.$u?"UTC":""),z=(U={},U[l]=P+"Date",U[p]=P+"Date",U[f]=P+"Month",U[h]=P+"FullYear",U[u]=P+"Hours",U[a]=P+"Minutes",U[o]=P+"Seconds",U[s]=P+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(M,B){return this.clone().$set(M,B)},F.get=function(M){return this[N.p(M)]()},F.add=function(M,B){var U,H=this;M=Number(M);var P=N.p(B),z=function(q){var G=k(H);return N.w(G.date(G.date()+Math.round(q*M)),H)};if(P===f)return this.set(f,this.$M+M);if(P===h)return this.set(h,this.$y+M);if(P===l)return z(1);if(P===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[P]||1,j=this.$d.getTime()+M*W;return N.w(j,this)},F.subtract=function(M,B){return this.add(-1*M,B)},F.format=function(M){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=M||"YYYY-MM-DDTHH:mm:ssZ",P=N.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ve,Ie,be,Ke){return ve&&(ve[Ie]||ve(B,H))||be[Ie].slice(0,Ke)},de=function(ve){return N.s(z%12||12,ve,"0")},he=ne||function(ve,Ie,be){var Ke=ve<12?"AM":"PM";return be?Ke.toLowerCase():Ke};return H.replace(y,function(ve,Ie){return Ie||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return N.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return P}return null}(ve)||P.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(M,B,U){var H,P=this,z=N.p(B),W=k(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return N.m(P,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:N.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return T[this.$L]},F.locale=function(M,B){if(!M)return this.$L;var U=this.clone(),H=C(M,B,!0);return H&&(U.$L=H),U},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),D=O.prototype;return k.prototype=D,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){D[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),k.extend=function($,F){return $.$i||($(F,O,k),$.$i=!0),k},k.locale=C,k.isDayjs=A,k.unix=function($){return k(1e3*$)},k.en=T[E],k.Ls=T,k.p={},k})})(mje);var Mon=mje.exports;const Tt=Gl(Mon);function Lon({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>Tt(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function Fon({formatter:e,...t}){return(e||Lon)(t)}function jon({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function gje({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=jon({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?gje({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function Bon(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function Uon(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function lie({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=Bon(i.key);if(s){i.preventDefault();const o=Uon(e);gje({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var yje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],T=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(S).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(T,S,A){var C=T-60*S*1e3,k=l(C,A);if(S===k)return[C,S];var N=l(C-=60*(k-S)*1e3,A);return k===N?[C,k]:[T-60*Math.min(k,N)*1e3,Math.max(k,N)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(yje);var zon=yje.exports;const Von=Gl(zon);var vje={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(to,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var T=E.match(r);if(!T)return null;var S=(""+T[0]).match(i)||["-",0,0],A=S[0],C=60*+S[1]+ +S[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(vje);var Hon=vje.exports;const qon=Gl(Hon);Tt.extend(qon);Tt.extend(Von);function Won(e,t){return t?Tt(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const J0e=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=Won(e,t);return n==="remove"&&(r*=-1),Tt(e).add(r,"minutes").toDate()};function O0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>J0e(i,n,e)):J0e(t,n,e)}function Gon({minDate:e,maxDate:t,timezone:n}){const r=O0("add",new Date,n);return!e&&!t?r:e&&Tt(r).isBefore(e)?e:t&&Tt(r).isAfter(t)?t:r}const Yon={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},Kon=I.createContext(Yon);function Jl(){const e=I.useContext(Kon),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function Xon(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function bje({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:Xon(e,t),name:n,form:r})}bje.displayName="@mantine/dates/HiddenDatesInput";var _je={day:"m_396ce5cb"};const Qon={},Jon=(e,{size:t})=>({day:{"--day-size":tn(t,"day-size")}}),cie=Me((e,t)=>{const n=xe("Day",Qon,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,T=dt({name:f||"Day",classes:_je,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Jon,rootSelector:"day"}),S=Jl();return _.jsx(Es,{...T("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":Tt(l).isSame(O0("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});cie.classes=_je;cie.displayName="@mantine/dates/Day";function Zon({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=Tt().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(Tt(r).add(s,"days").locale(e).format(t)):i.push(t(Tt(r).add(s,"days").toDate()));return i}var wje={weekday:"m_18a3eca"};const ean={},tan=(e,{size:t})=>({weekdaysRow:{"--wr-fz":uo(t),"--wr-spacing":as(t)}}),fie=Me((e,t)=>{const n=xe("WeekdaysRow",ean,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=dt({name:h||"WeekdaysRow",classes:wje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:tan,rootSelector:"weekdaysRow"}),g=Jl(),y=Zon({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(me,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});fie.classes=wje;fie.displayName="@mantine/dates/WeekdaysRow";function nan(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function ran(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function ian({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=nan(s,t),a=ran(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function Eje(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function xje(e,t){return t instanceof Date?Tt(e).isAfter(Tt(t).subtract(1,"day"),"day"):!0}function Sje(e,t){return t instanceof Date?Tt(e).isBefore(Tt(t).add(1,"day"),"day"):!0}function san(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return Sje(c,n)&&xje(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||Eje(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>Tt().isSame(c,"date"));return l||a[0]}var Tje={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const oan={withCellSpacing:!0},C5=Me((e,t)=>{const n=xe("Month",oan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:T,static:S,__getDayRef:A,__onDayKeyDown:C,__onDayClick:k,__onDayMouseEnter:N,__preventFocus:O,__stopPropagation:D,withCellSpacing:$,size:F,...M}=n,B=dt({name:l||"Month",classes:Tje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=Jl(),H=ian({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),P=san(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Bm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!Eje(ce,h),ve=(T==null?void 0:T(ce))||Tt(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),be=Tt(ce).isSame(P,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(cie,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":D||void 0,renderDay:b,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ve,static:S,disabled:(g==null?void 0:g(ce))||!Sje(ce,v)||!xje(ce,y),ref:Ke=>A==null?void 0:A(G,de,Ke),...Ie,onKeyDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onKeyDown)==null||Ue.call(Ie,Ke),C==null||C(Ke,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseEnter)==null||Ue.call(Ie,Ke),N==null||N(Ke,ce)},onClick:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onClick)==null||Ue.call(Ie,Ke),k==null||k(Ke,ce)},onMouseDown:Ke=>{var Ue;(Ue=Ie==null?void 0:Ie.onMouseDown)==null||Ue.call(Ie,Ke),O&&Ke.preventDefault()},tabIndex:O||!be?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(me,{component:"table",...B("month"),size:F,ref:t,...M,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(fie,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});C5.classes=Tje;C5.displayName="@mantine/dates/Month";var Aje={pickerControl:"m_dc6a3c71"};const aan={},uan=(e,{size:t})=>({pickerControl:{"--dpc-fz":uo(t),"--dpc-size":tn(t,"dpc-size")}}),I5=Me((e,t)=>{const n=xe("PickerControl",aan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=dt({name:d||"PickerControl",classes:Aje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:uan,rootSelector:"pickerControl"});return _.jsx(Es,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});I5.classes=Aje;I5.displayName="@mantine/dates/PickerControl";function Cje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"year")||n&&Tt(e).isAfter(n,"year"))}function lan(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Cje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"year"));return o||i[0]}function Ije(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var kje={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const can={yearsListFormat:"YYYY",withCellSpacing:!0},k5=Me((e,t)=>{const n=xe("YearsList",can,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=dt({name:m||"YearsList",classes:kje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=Jl(),N=Ije(l),O=lan(N,d,h,p),D=N.map(($,F)=>{const M=$.map((B,U)=>{const H=p==null?void 0:p(B),P=Tt(B).isSame(O,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(I5,{...C("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:Cje(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(k.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...C("yearsListRow"),children:M},F)});return _.jsx(me,{component:"table",ref:t,size:S,...C("yearsList"),...A,children:_.jsx("tbody",{children:D})})});k5.classes=kje;k5.displayName="@mantine/dates/YearsList";function Rje(e,t,n){return!t&&!n?!1:!!(t&&Tt(e).isBefore(t,"month")||n&&Tt(e).isAfter(n,"month"))}function fan(e,t,n,r){const i=e.flat().filter(a=>{var u;return!Rje(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>Tt().isSame(a,"month"));return o||i[0]}function dan(e){const t=Tt(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(Tt(t).add(r,"months").toDate()),r+=1;return n}var Nje={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const han={monthsListFormat:"MMM",withCellSpacing:!0},R5=Me((e,t)=>{const n=xe("MonthsList",han,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=dt({name:l||"MonthsList",classes:Nje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=Jl(),N=dan(c),O=fan(N,h,p,m),D=N.map(($,F)=>{const M=$.map((B,U)=>{const H=m==null?void 0:m(B),P=Tt(B).isSame(O,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(I5,{...C("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:Rje(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:Tt(B).locale(k.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...C("monthsListRow"),children:M},F)});return _.jsx(me,{component:"table",ref:t,size:S,...C("monthsList"),...A,children:_.jsx("tbody",{children:D})})});R5.classes=Nje;R5.displayName="@mantine/dates/MonthsList";var Pje={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const pan={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},man=(e,{size:t})=>({calendarHeader:{"--dch-control-size":tn(t,"dch-control-size"),"--dch-fz":uo(t)}}),ev=Me((e,t)=>{const n=xe("CalendarHeader",pan,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:T,__staticSelector:S,__preventFocus:A,__stopPropagation:C,...k}=n,N=dt({name:S||"CalendarHeader",classes:Pje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:man,rootSelector:"calendarHeader"}),O=A?D=>D.preventDefault():void 0;return _.jsxs(me,{...N("calendarHeader"),ref:t,...k,children:[T&&_.jsx(Es,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:O,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(kE,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Es,{component:b?"button":"div",...N("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?O:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(Es,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:O,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(kE,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});ev.classes=Pje;ev.displayName="@mantine/dates/CalendarHeader";function gan(e){const t=Ije(e);return[t[0][0],t[3][0]]}const yan={decadeLabelFormat:"YYYY"},N5=Me((e,t)=>{const n=xe("DecadeLevel",yan,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:T,levelControlAriaLabel:S,withNext:A,withPrevious:C,decadeLabelFormat:k,classNames:N,styles:O,unstyled:D,__staticSelector:$,__stopPropagation:F,size:M,...B}=n,U=Jl(),[H,P]=gan(r),z={__staticSelector:$||"DecadeLevel",classNames:N,styles:O,unstyled:D,size:M},W=typeof E=="boolean"?E:o?!Tt(P).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!Tt(H).startOf("year").isAfter(s):!1,q=(G,ne)=>Tt(G).locale(i||U.locale).format(ne);return _.jsxs(me,{"data-decade-level":!0,size:M,ref:t,...B,children:[_.jsx(ev,{label:typeof k=="function"?k(H,P):`${q(H,k)}  ${q(P,k)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:A,withPrevious:C,...z}),_.jsx(k5,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});N5.classes={...k5.classes,...ev.classes};N5.displayName="@mantine/dates/DecadeLevel";const van={yearLabelFormat:"YYYY"},P5=Me((e,t)=>{const n=xe("YearLevel",van,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:T,previousDisabled:S,hasNextLevel:A,levelControlAriaLabel:C,withNext:k,withPrevious:N,yearLabelFormat:O,__staticSelector:D,__stopPropagation:$,size:F,classNames:M,styles:B,unstyled:U,...H}=n,P=Jl(),z={__staticSelector:D||"YearLevel",classNames:M,styles:B,unstyled:U,size:F},W=typeof T=="boolean"?T:o?!Tt(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!Tt(r).startOf("year").isAfter(s):!1;return _.jsxs(me,{"data-year-level":!0,size:F,ref:t,...H,children:[_.jsx(ev,{label:typeof O=="function"?O(r):Tt(r).locale(i||P.locale).format(O),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:k,withPrevious:N,...z}),_.jsx(R5,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});P5.classes={...ev.classes,...R5.classes};P5.displayName="@mantine/dates/YearLevel";const ban={monthLabelFormat:"MMMM YYYY"},D5=Me((e,t)=>{const n=xe("MonthLevel",ban,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:$,previousDisabled:F,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:P,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=Jl(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ve=typeof $=="boolean"?$:f?!Tt(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!Tt(r).startOf("month").isAfter(c):!1;return _.jsxs(me,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx(ev,{label:typeof P=="function"?P(r):Tt(r).locale(i||de.locale).format(P),__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:k,onNext:N,onPrevious:O,onLevelClick:D,nextDisabled:ve,previousDisabled:Ie,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),_.jsx(C5,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:T,static:ne,withCellSpacing:w,...he})]})});D5.classes={...C5.classes,...ev.classes};D5.displayName="@mantine/dates/MonthLevel";var Dje={levelsGroup:"m_30b26e33"};const _an={},tv=Me((e,t)=>{const n=xe("LevelsGroup",_an,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=dt({name:l||"LevelsGroup",classes:Dje,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(me,{ref:t,...f("levelsGroup"),...c})});tv.classes=Dje;tv.displayName="@mantine/dates/LevelsGroup";const wan={numberOfColumns:1},O5=Me((e,t)=>{const n=xe("DecadeLevelGroup",wan,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:T,unstyled:S,__staticSelector:A,__stopPropagation:C,numberOfColumns:k,levelControlAriaLabel:N,decadeLabelFormat:O,size:D,vars:$,...F}=n,M=I.useRef([]),B=Array(k).fill(0).map((U,H)=>{const P=Tt(r).add(H*10,"years").toDate();return _.jsx(N5,{size:D,yearsListFormat:a,decade:P,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:O,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>lie({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[H])||(M.current[H]=[]),Array.isArray(M.current[H][z])||(M.current[H][z]=[]),M.current[H][z][W]=j},levelControlAriaLabel:typeof N=="function"?N(P):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:T,unstyled:S,withCellSpacing:f},H)});return _.jsx(tv,{classNames:E,styles:T,__staticSelector:A||"DecadeLevelGroup",ref:t,size:D,unstyled:S,...F,children:B})});O5.classes={...tv.classes,...N5.classes};O5.displayName="@mantine/dates/DecadeLevelGroup";const Ean={numberOfColumns:1},$5=Me((e,t)=>{const n=xe("YearLevelGroup",Ean,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,classNames:S,styles:A,unstyled:C,__staticSelector:k,__stopPropagation:N,numberOfColumns:O,levelControlAriaLabel:D,yearLabelFormat:$,size:F,vars:M,...B}=n,U=I.useRef([]),H=Array(O).fill(0).map((P,z)=>{const W=Tt(r).add(z,"years").toDate();return _.jsx(P5,{size:F,monthsListFormat:a,year:W,withNext:z===O-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>lie({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof D=="function"?D(W):D,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,getMonthControlProps:u,classNames:S,styles:A,unstyled:C,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(tv,{classNames:S,styles:A,__staticSelector:k||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:H})});$5.classes={...P5.classes,...tv.classes};$5.displayName="@mantine/dates/YearLevelGroup";const xan={numberOfColumns:1},M5=Me((e,t)=>{const n=xe("MonthLevelGroup",xan,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:P,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=I.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ve=Tt(r).add(he,"months").toDate();return _.jsx(D5,{month:ve,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,be)=>lie({levelIndex:he,rowIndex:be.rowIndex,cellIndex:be.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,be,Ke)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][be]=Ke},levelControlAriaLabel:typeof U=="function"?U(ve):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:k,nextDisabled:N,previousDisabled:O,hasNextLevel:D,classNames:$,styles:F,unstyled:M,__staticSelector:P||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(tv,{classNames:$,styles:F,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});M5.classes={...tv.classes,...D5.classes};M5.displayName="@mantine/dates/MonthLevelGroup";var Oje={input:"m_6fa5e2aa"};const San={},L5=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:T,value:S,name:A,form:C,type:k,...N}=Pbe("PickerInputBase",San,e),O=b||(g&&w&&!E&&!T?_.jsx(Vm,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),D=()=>{k==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(Ki,{opened:p,onClose:D,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(hi.Wrapper,{...r,children:_.jsxs(No,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),D()},children:[_.jsx(No.Target,{children:_.jsx(hi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:O,...n,ref:t,classNames:{...s,input:Qi(Oje.input,s==null?void 0:s.input)},...N,children:d||_.jsx(hi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(No.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(bje,{value:S,name:A,form:C,type:k})]})});L5.classes=Oje;L5.displayName="@mantine/dates/PickerInputBase";const Z0e=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function die({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=Jl(),[a,u,l]=xs({value:O0("add",t,o.getTimezone(),!i),defaultValue:O0("add",n,o.getTimezone(),!i),finalValue:Z0e(e),onChange:f=>{r==null||r(O0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:Z0e(e),u(c))),[c,u,l]}function FB(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function Tan(e){return e===0?"month":e===1?"year":"decade"}function u2(e,t,n){return Tan(Kd(FB(e,0),FB(t,0),FB(n,2)))}const Aan={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},F5=Me((e,t)=>{const n=xe("Calendar",Aan,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,monthLabelFormat:$,nextIcon:F,previousIcon:M,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:P,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ve,locale:Ie,__staticSelector:be,size:Ke,__preventFocus:Ue,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:ze,onNextMonth:ct,onPreviousMonth:Ot,static:We,__timezoneApplied:ge,...ht}=n,{resolvedClassNames:vt,resolvedStyles:pe}=Bm({classNames:ne,styles:ce,props:n}),[Ce,He]=xs({value:a?u2(a,s,i):void 0,defaultValue:o?u2(o,s,i):void 0,finalValue:u2(void 0,s,i),onChange:u}),[ut,_t]=die({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ge}),Ln={__staticSelector:be||"Calendar",styles:pe,classNames:vt,unstyled:de,size:Ke},Ar=Jl(),Fn=h||d||1,cr=ut||O0("add",new Date,Ar.getTimezone()),gn=()=>{const In=Tt(cr).add(Fn,"month").toDate();ct==null||ct(In),_t(In)},Cn=()=>{const In=Tt(cr).subtract(Fn,"month").toDate();Ot==null||Ot(In),_t(In)},nr=()=>{const In=Tt(cr).add(Fn,"year").toDate();ke==null||ke(In),_t(In)},rr=()=>{const In=Tt(cr).subtract(Fn,"year").toDate();ze==null||ze(In),_t(In)},Uo=()=>{const In=Tt(cr).add(10*Fn,"year").toDate();it==null||it(In),_t(In)},$i=()=>{const In=Tt(cr).subtract(10*Fn,"year").toDate();_e==null||_e(In),_t(In)};return _.jsxs(me,{ref:t,size:Ke,"data-calendar":!0,...ht,children:[Ce==="month"&&_.jsx(M5,{month:cr,minDate:he,maxDate:ve,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:k,hideOutsideDates:N,hideWeekdays:O,getDayAriaLabel:D,onNext:gn,onPrevious:Cn,hasNextLevel:i!=="month",onLevelClick:()=>He("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:Ue,__stopPropagation:yt,static:We,withCellSpacing:H,...Ln}),Ce==="year"&&_.jsx($5,{year:cr,numberOfColumns:d,minDate:he,maxDate:ve,monthsListFormat:P,getMonthControlProps:z,locale:Ie,onNext:nr,onPrevious:rr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>He("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(In,Mi)=>{w&&_t(Mi),He(u2("month",s,i)),g==null||g(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln}),Ce==="decade"&&_.jsx(O5,{decade:cr,minDate:he,maxDate:ve,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:Uo,onPrevious:$i,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(In,Mi)=>{b&&_t(Mi),He(u2("year",s,i)),m==null||m(Mi)},__preventFocus:Ue,__stopPropagation:yt,withCellSpacing:H,...Ln})]})});F5.classes={...O5.classes,...$5.classes,...M5.classes};F5.displayName="@mantine/dates/Calendar";function Can(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie,...be}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:O,weekendDays:D,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie},others:be}}function eye(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return Tt(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&Tt(n[1]).endOf("day").add(1,"ms").isAfter(e)}function Ian({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=die({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(Tt(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[T,f];S.sort((A,C)=>A.getTime()-C.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&Tt(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(S=>Tt(S).isSame(T,t))?c(l.filter(S=>!Tt(S).isSame(T,t))):c([...l,T]);return}l&&o&&Tt(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?eye(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?eye(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,v=T=>l[0]instanceof Date&&Tt(T).isSame(l[0],t)?!(h&&Tt(h).isBefore(l[0])):!1,b=T=>l[1]instanceof Date?Tt(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:Tt(h).isBefore(l[0])&&Tt(T).isSame(l[0],t),w=T=>{if(e==="range")return{selected:l.some(A=>A&&Tt(A).isSame(T,t)),inRange:g(T),firstInRange:v(T),lastInRange:b(T),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&Tt(A).isSame(T,t)),"data-autofocus":!!l[0]&&Tt(l[0]).isSame(T,t)||void 0};const S=Tt(l).isSame(T,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const kan={type:"default",defaultLevel:"month",numberOfColumns:1},j5=Me((e,t)=>{const n=xe("DatePicker",kan,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:T,onHoveredDateChange:S,getControlProps:A}=Ian({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:k}=Bm({classNames:r,styles:i,props:n}),N=Jl();return _.jsx(F5,{ref:t,minLevel:"month",classNames:C,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(O,D)=>{S(D),y==null||y(O,D)},__onDayClick:(O,D)=>{E(D),v==null||v(O,D)},getDayProps:O=>({...A(O),...f==null?void 0:f(O)}),...w,date:O0("add",w.date,N.getTimezone(),b),__timezoneApplied:!0})});j5.classes=F5.classes;j5.displayName="@mantine/dates/DatePicker";function Ran({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=Jl(),[f,d]=dL(!1),[h,p]=die({type:e,value:t,defaultValue:n,onChange:r}),m=Fon({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const Nan={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},hie=Me((e,t)=>{const n=xe("DatePickerInput",Nan,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:T,...S}=n,{resolvedClassNames:A,resolvedStyles:C}=Bm({classNames:c,styles:f,props:n}),{calendarProps:k,others:N}=Can(S),{_value:O,setValue:D,formattedValue:$,dropdownHandlers:F,dropdownOpened:M,onClear:B,shouldClear:U}=Ran({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),H=Array.isArray(O)?O[0]||E:O||E,P=Jl();return _.jsx(L5,{formattedValue:$,dropdownOpened:M,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:U,value:O,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:_.jsx(j5,{...k,size:p,variant:m,type:r,value:O,defaultDate:H||Gon({maxDate:b,minDate:v,timezone:P.getTimezone()}),onChange:D,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:O0("add",k.date,P.getTimezone()),__timezoneApplied:!0})})});hie.classes={...L5.classes,...j5.classes};hie.displayName="@mantine/dates/DatePickerInput";function Pan(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function Dan({studyId:e,allParticipants:t}){const n=Vh(),[r,i]=b1(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[o,a]=I.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=I.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>Pan(y.answers,o))]},[t,o]),d=I.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=I.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return _.jsx(Rc,{children:_.jsxs(Db,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Nt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(Si,{order:5,children:e}),_.jsx(QDe,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(Ss,{children:[_.jsx(xZ,{allParticipants:t,studyId:e}),_.jsx(xi,{label:"Analyze and manage study data",children:_.jsx(on,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Uu}analysis/stats/${e}`,children:_.jsx(JXe,{})})})]})]}),_.jsx(hie,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{mt:16,children:"Finished Participants"}),_.jsx(xq,{spec:h,actions:!1})]}):_.jsx(me,{h:293.4,children:_.jsx(ym,{style:{height:"100%"},children:_.jsx(et,{children:"Not enough participants for chart"})})})]})})}function Oan({globalConfig:e}){const[t,n]=I.useState(!1),[r,i]=I.useState({}),[s,o]=I.useState({}),{storageEngine:a}=As(),{user:u}=Qb();I.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await m4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof yf){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(za.Col,{span:{md:12,xl:6},children:_.jsx(Dan,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx(HA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx(Rc,{fluid:!0,children:_.jsxs(me,{children:[_.jsx(Si,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(za,{children:[l.length>0?l:_.jsx(Rc,{mt:100,children:_.jsx(et,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx($l,{visible:t})]})]})})})]})}function $an(){const{user:e,triggerAuth:t}=Qb(),{storageEngine:n}=As(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(!1),[y,v]=I.useState(""),[b,w]=I.useState(null),E=Txe({initialValues:{email:""},validate:{email:Zot("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof yf){const D=await(n==null?void 0:n.getUserManagementData("authentication"));i(D==null?void 0:D.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof yf){const O=await pje(n,u);O&&O.email?(w({email:O.email,uid:O.uid}),p(!0)):g(!0)}u(!1)},S=async O=>{u(!0),n instanceof yf&&O&&(await n.changeAuth(!0),await n.addAdminUser(O),o([O.email]),i(!0),t()),p(!1),u(!1)},A=async()=>{if(u(!0),n instanceof yf){await n.addAdminUser({email:E.values.email,uid:null});const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}u(!1),c(!1),E.setValues({email:""})},C=O=>{d(!0),v(O)},k=async()=>{if(u(!0),n instanceof yf){await n.removeAdminUser(y);const O=await n.getUserManagementData("adminUsers");o(O==null?void 0:O.adminUsersList.map(D=>D.email))}d(!1),u(!1)},N=I.useMemo(()=>n instanceof yf,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Rc,{children:_.jsxs(Db,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(Si,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Nt,{children:_.jsx(et,{children:"Authentication is enabled."})}):_.jsxs(Nt,{justify:"space-between",children:[_.jsx(me,{children:_.jsx(et,{children:"Authentication is currently disabled."})}),_.jsx(xi,{label:"You can only enable auth when using Firebase",disabled:N,children:_.jsx(on,{onClick:O=>N?T():O.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Nt,{mt:40,direction:"column",children:[_.jsxs(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(Si,{order:6,children:"Enabled Users"}),_.jsx(bY,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(O=>{var D;return _.jsxs(Nt,{justify:"space-between",mb:10,children:[_.jsx(et,{children:O}),O===((D=e.user)==null?void 0:D.email)?_.jsx(et,{color:"blue",size:"xs",children:"You"}):_.jsx(Nb,{variant:"subtle",onClick:()=>C(O),children:_.jsx(Ewe,{color:"red"})})]},O)}):null]}):null]})}),_.jsx(Ki,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(me,{component:"form",onSubmit:E.onSubmit(()=>A()),children:[_.jsx(Yg,{leftSection:_.jsx(GXe,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),_.jsxs(Nt,{mt:30,justify:"right",children:[_.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(on,{type:"submit",children:"Save"})]})]})}),_.jsxs(Ki,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(et,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(et,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(on,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(Ki,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(et,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(et,{mt:40,children:["User"," ",_.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(on,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(on,{onClick:()=>S(b),children:"Yes, I'm sure."})]})]}),_.jsxs(Ki,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(et,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(et,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(Nt,{mt:40,justify:"right",children:_.jsx(on,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx($l,{visible:a})]})}class Man extends KDe{constructor(){super("localStorage");fu(this,"studyDatabase");fu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await sw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await X$(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await X$(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await sw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=K$();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=sw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=K$();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await sw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await sw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function Lan(){let e;{const t=new Man;await t.connect(),e=t}return e}function W_({title:e}){const t=Ny();return I.useEffect(()=>{document.title=e},[t,e]),null}async function Fan(){const t=await(await fetch(`${Uu}global.json`)).text();return mRt(t)}function jan(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await URt(e))}a()},[e]),I.useEffect(()=>{e||Fan().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=As();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Lan();s(u)}a()},[s,i]);const o=async a=>i instanceof yf?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(MXe,{basename:Uu,children:_.jsx(B6t,{children:_.jsx(zXe,{children:_.jsx(di,{padding:"md",header:{height:70},children:_.jsxs(PXe,{children:[_.jsx(wp,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(W_,{title:"ReVISit | Home"}),_.jsx(HA,{studyIds:e.configsList}),_.jsx(sst,{globalConfig:e,studyConfigs:n})]})}),_.jsx(wp,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(W_,{title:"ReVISit | Study"}),_.jsx(zRt,{globalConfig:e})]})}),_.jsx(wp,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(W_,{title:"ReVISit | Analysis"}),_.jsx(Oan,{globalConfig:e})]})}),_.jsx(wp,{path:"/analysis",element:_.jsx(yV,{to:"/analysis/dashboard"})}),_.jsx(wp,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(W_,{title:"ReVISit | Analysis"}),_.jsx(Q0e,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(Oon,{globalConfig:e})})]})}),_.jsx(wp,{path:"/analysis/stats/:studyId",element:_.jsx(yV,{to:"./table",replace:!0})}),_.jsx(wp,{path:"/settings",element:_.jsxs(Q0e,{children:[_.jsx(W_,{title:"ReVISit | Settings"}),_.jsx(HA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx($an,{})})]})}),_.jsx(wp,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(W_,{title:"ReVISit | Login"}),_.jsx(HA,{studyIds:e.configsList}),_.jsx(di.Main,{children:_.jsx($on,{})})]})})]})})})})}):null}jB.createRoot(document.getElementById("root")).render(_.jsx(_r.StrictMode,{children:_.jsx(zKe,{children:_.jsxs(M1e,{children:[_.jsx(Ym,{}),_.jsx(jan,{})]})})}))});export default Ban();
