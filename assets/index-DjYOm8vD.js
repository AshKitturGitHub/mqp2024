var _9e=Object.defineProperty;var w9e=(e,t,n)=>t in e?_9e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var E9e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var gu=(e,t,n)=>(w9e(e,typeof t!="symbol"?t+"":t,n),n);var Chn=E9e((bmn,wse)=>{function x9e(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var so=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ec(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function S9e(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var i=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,i.get?i:{enumerable:!0,get:function(){return e[r]}})}),n}var Yve={exports:{}},ML={},Kve={exports:{}},Ln={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vk=Symbol.for("react.element"),T9e=Symbol.for("react.portal"),A9e=Symbol.for("react.fragment"),C9e=Symbol.for("react.strict_mode"),I9e=Symbol.for("react.profiler"),k9e=Symbol.for("react.provider"),R9e=Symbol.for("react.context"),N9e=Symbol.for("react.forward_ref"),P9e=Symbol.for("react.suspense"),O9e=Symbol.for("react.memo"),D9e=Symbol.for("react.lazy"),qse=Symbol.iterator;function $9e(e){return e===null||typeof e!="object"?null:(e=qse&&e[qse]||e["@@iterator"],typeof e=="function"?e:null)}var Xve={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qve=Object.assign,Jve={};function aS(e,t,n){this.props=e,this.context=t,this.refs=Jve,this.updater=n||Xve}aS.prototype.isReactComponent={};aS.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};aS.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function Zve(){}Zve.prototype=aS.prototype;function DW(e,t,n){this.props=e,this.context=t,this.refs=Jve,this.updater=n||Xve}var $W=DW.prototype=new Zve;$W.constructor=DW;Qve($W,aS.prototype);$W.isPureReactComponent=!0;var Wse=Array.isArray,e1e=Object.prototype.hasOwnProperty,MW={current:null},t1e={key:!0,ref:!0,__self:!0,__source:!0};function n1e(e,t,n){var r,i={},s=null,o=null;if(t!=null)for(r in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)e1e.call(t,r)&&!t1e.hasOwnProperty(r)&&(i[r]=t[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),l=0;l<a;l++)u[l]=arguments[l+2];i.children=u}if(e&&e.defaultProps)for(r in a=e.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:vk,type:e,key:s,ref:o,props:i,_owner:MW.current}}function M9e(e,t){return{$$typeof:vk,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function LW(e){return typeof e=="object"&&e!==null&&e.$$typeof===vk}function L9e(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var Gse=/\/+/g;function jj(e,t){return typeof e=="object"&&e!==null&&e.key!=null?L9e(""+e.key):t.toString(36)}function yO(e,t,n,r,i){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case vk:case T9e:o=!0}}if(o)return o=e,i=i(o),e=r===""?"."+jj(o,0):r,Wse(i)?(n="",e!=null&&(n=e.replace(Gse,"$&/")+"/"),yO(i,t,n,"",function(l){return l})):i!=null&&(LW(i)&&(i=M9e(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Gse,"$&/")+"/")+e)),t.push(i)),1;if(o=0,r=r===""?".":r+":",Wse(e))for(var a=0;a<e.length;a++){s=e[a];var u=r+jj(s,a);o+=yO(s,t,n,u,i)}else if(u=$9e(e),typeof u=="function")for(e=u.call(e),a=0;!(s=e.next()).done;)s=s.value,u=r+jj(s,a++),o+=yO(s,t,n,u,i);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function AN(e,t,n){if(e==null)return e;var r=[],i=0;return yO(e,r,"","",function(s){return t.call(n,s,i++)}),r}function F9e(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var au={current:null},vO={transition:null},j9e={ReactCurrentDispatcher:au,ReactCurrentBatchConfig:vO,ReactCurrentOwner:MW};function r1e(){throw Error("act(...) is not supported in production builds of React.")}Ln.Children={map:AN,forEach:function(e,t,n){AN(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return AN(e,function(){t++}),t},toArray:function(e){return AN(e,function(t){return t})||[]},only:function(e){if(!LW(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Ln.Component=aS;Ln.Fragment=A9e;Ln.Profiler=I9e;Ln.PureComponent=DW;Ln.StrictMode=C9e;Ln.Suspense=P9e;Ln.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=j9e;Ln.act=r1e;Ln.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=Qve({},e.props),i=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=MW.current),t.key!==void 0&&(i=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(u in t)e1e.call(t,u)&&!t1e.hasOwnProperty(u)&&(r[u]=t[u]===void 0&&a!==void 0?a[u]:t[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var l=0;l<u;l++)a[l]=arguments[l+2];r.children=a}return{$$typeof:vk,type:e.type,key:i,ref:s,props:r,_owner:o}};Ln.createContext=function(e){return e={$$typeof:R9e,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:k9e,_context:e},e.Consumer=e};Ln.createElement=n1e;Ln.createFactory=function(e){var t=n1e.bind(null,e);return t.type=e,t};Ln.createRef=function(){return{current:null}};Ln.forwardRef=function(e){return{$$typeof:N9e,render:e}};Ln.isValidElement=LW;Ln.lazy=function(e){return{$$typeof:D9e,_payload:{_status:-1,_result:e},_init:F9e}};Ln.memo=function(e,t){return{$$typeof:O9e,type:e,compare:t===void 0?null:t}};Ln.startTransition=function(e){var t=vO.transition;vO.transition={};try{e()}finally{vO.transition=t}};Ln.unstable_act=r1e;Ln.useCallback=function(e,t){return au.current.useCallback(e,t)};Ln.useContext=function(e){return au.current.useContext(e)};Ln.useDebugValue=function(){};Ln.useDeferredValue=function(e){return au.current.useDeferredValue(e)};Ln.useEffect=function(e,t){return au.current.useEffect(e,t)};Ln.useId=function(){return au.current.useId()};Ln.useImperativeHandle=function(e,t,n){return au.current.useImperativeHandle(e,t,n)};Ln.useInsertionEffect=function(e,t){return au.current.useInsertionEffect(e,t)};Ln.useLayoutEffect=function(e,t){return au.current.useLayoutEffect(e,t)};Ln.useMemo=function(e,t){return au.current.useMemo(e,t)};Ln.useReducer=function(e,t,n){return au.current.useReducer(e,t,n)};Ln.useRef=function(e){return au.current.useRef(e)};Ln.useState=function(e){return au.current.useState(e)};Ln.useSyncExternalStore=function(e,t,n){return au.current.useSyncExternalStore(e,t,n)};Ln.useTransition=function(){return au.current.useTransition()};Ln.version="18.3.1";Kve.exports=Ln;var I=Kve.exports;const wr=ec(I),zD=x9e({__proto__:null,default:wr},[I]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B9e=I,U9e=Symbol.for("react.element"),z9e=Symbol.for("react.fragment"),V9e=Object.prototype.hasOwnProperty,H9e=B9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,q9e={key:!0,ref:!0,__self:!0,__source:!0};function i1e(e,t,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(r in t)V9e.call(t,r)&&!q9e.hasOwnProperty(r)&&(i[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)i[r]===void 0&&(i[r]=t[r]);return{$$typeof:U9e,type:e,key:s,ref:o,props:i,_owner:H9e.current}}ML.Fragment=z9e;ML.jsx=i1e;ML.jsxs=i1e;Yve.exports=ML;var _=Yve.exports,BU={},s1e={exports:{}},tc={},o1e={exports:{}},a1e={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(U,H){var P=U.length;U.push(H);e:for(;0<P;){var z=P-1>>>1,W=U[z];if(0<i(W,H))U[z]=H,U[P]=W,P=z;else break e}}function n(U){return U.length===0?null:U[0]}function r(U){if(U.length===0)return null;var H=U[0],P=U.pop();if(P!==H){U[0]=P;e:for(var z=0,W=U.length,j=W>>>1;z<j;){var q=2*(z+1)-1,G=U[q],ne=q+1,ce=U[ne];if(0>i(G,P))ne<W&&0>i(ce,G)?(U[z]=ce,U[ne]=P,z=ne):(U[z]=G,U[q]=P,z=q);else if(ne<W&&0>i(ce,P))U[z]=ce,U[ne]=P,z=ne;else break e}}return H}function i(U,H){var P=U.sortIndex-H.sortIndex;return P!==0?P:U.id-H.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var u=[],l=[],c=1,f=null,d=3,h=!1,p=!1,m=!1,g=typeof setTimeout=="function"?setTimeout:null,y=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(U){for(var H=n(l);H!==null;){if(H.callback===null)r(l);else if(H.startTime<=U)r(l),H.sortIndex=H.expirationTime,t(u,H);else break;H=n(l)}}function w(U){if(m=!1,b(U),!p)if(n(u)!==null)p=!0,M(E);else{var H=n(l);H!==null&&B(w,H.startTime-U)}}function E(U,H){p=!1,m&&(m=!1,y(A),A=-1),h=!0;var P=d;try{for(b(H),f=n(u);f!==null&&(!(f.expirationTime>H)||U&&!N());){var z=f.callback;if(typeof z=="function"){f.callback=null,d=f.priorityLevel;var W=z(f.expirationTime<=H);H=e.unstable_now(),typeof W=="function"?f.callback=W:f===n(u)&&r(u),b(H)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var q=n(l);q!==null&&B(w,q.startTime-H),j=!1}return j}finally{f=null,d=P,h=!1}}var T=!1,S=null,A=-1,C=5,k=-1;function N(){return!(e.unstable_now()-k<C)}function D(){if(S!==null){var U=e.unstable_now();k=U;var H=!0;try{H=S(!0,U)}finally{H?O():(T=!1,S=null)}}else T=!1}var O;if(typeof v=="function")O=function(){v(D)};else if(typeof MessageChannel<"u"){var $=new MessageChannel,F=$.port2;$.port1.onmessage=D,O=function(){F.postMessage(null)}}else O=function(){g(D,0)};function M(U){S=U,T||(T=!0,O())}function B(U,H){A=g(function(){U(e.unstable_now())},H)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(U){U.callback=null},e.unstable_continueExecution=function(){p||h||(p=!0,M(E))},e.unstable_forceFrameRate=function(U){0>U||125<U?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<U?Math.floor(1e3/U):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return n(u)},e.unstable_next=function(U){switch(d){case 1:case 2:case 3:var H=3;break;default:H=d}var P=d;d=H;try{return U()}finally{d=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(U,H){switch(U){case 1:case 2:case 3:case 4:case 5:break;default:U=3}var P=d;d=U;try{return H()}finally{d=P}},e.unstable_scheduleCallback=function(U,H,P){var z=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?z+P:z):P=z,U){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=P+W,U={id:c++,callback:H,priorityLevel:U,startTime:P,expirationTime:W,sortIndex:-1},P>z?(U.sortIndex=P,t(l,U),n(u)===null&&U===n(l)&&(m?(y(A),A=-1):m=!0,B(w,P-z))):(U.sortIndex=W,t(u,U),p||h||(p=!0,M(E))),U},e.unstable_shouldYield=N,e.unstable_wrapCallback=function(U){var H=d;return function(){var P=d;d=H;try{return U.apply(this,arguments)}finally{d=P}}}})(a1e);o1e.exports=a1e;var W9e=o1e.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G9e=I,Bl=W9e;function tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u1e=new Set,I2={};function Ub(e,t){zE(e,t),zE(e+"Capture",t)}function zE(e,t){for(I2[e]=t,e=0;e<t.length;e++)u1e.add(t[e])}var _m=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),UU=Object.prototype.hasOwnProperty,Y9e=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Yse={},Kse={};function K9e(e){return UU.call(Kse,e)?!0:UU.call(Yse,e)?!1:Y9e.test(e)?Kse[e]=!0:(Yse[e]=!0,!1)}function X9e(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function Q9e(e,t,n,r){if(t===null||typeof t>"u"||X9e(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function uu(e,t,n,r,i,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Bo={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Bo[e]=new uu(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Bo[t]=new uu(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Bo[e]=new uu(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Bo[e]=new uu(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Bo[e]=new uu(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Bo[e]=new uu(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Bo[e]=new uu(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Bo[e]=new uu(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Bo[e]=new uu(e,5,!1,e.toLowerCase(),null,!1,!1)});var FW=/[\-:]([a-z])/g;function jW(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(FW,jW);Bo[t]=new uu(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(FW,jW);Bo[t]=new uu(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(FW,jW);Bo[t]=new uu(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Bo[e]=new uu(e,1,!1,e.toLowerCase(),null,!1,!1)});Bo.xlinkHref=new uu("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Bo[e]=new uu(e,1,!1,e.toLowerCase(),null,!0,!0)});function BW(e,t,n,r){var i=Bo.hasOwnProperty(t)?Bo[t]:null;(i!==null?i.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(Q9e(t,n,i,r)&&(n=null),r||i===null?K9e(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=n===null?i.type===3?!1:"":n:(t=i.attributeName,r=i.attributeNamespace,n===null?e.removeAttribute(t):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var Qm=G9e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,CN=Symbol.for("react.element"),kw=Symbol.for("react.portal"),Rw=Symbol.for("react.fragment"),UW=Symbol.for("react.strict_mode"),zU=Symbol.for("react.profiler"),l1e=Symbol.for("react.provider"),c1e=Symbol.for("react.context"),zW=Symbol.for("react.forward_ref"),VU=Symbol.for("react.suspense"),HU=Symbol.for("react.suspense_list"),VW=Symbol.for("react.memo"),jg=Symbol.for("react.lazy"),f1e=Symbol.for("react.offscreen"),Xse=Symbol.iterator;function PT(e){return e===null||typeof e!="object"?null:(e=Xse&&e[Xse]||e["@@iterator"],typeof e=="function"?e:null)}var Li=Object.assign,Bj;function PA(e){if(Bj===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);Bj=t&&t[1]||""}return`
`+Bj+e}var Uj=!1;function zj(e,t){if(!e||Uj)return"";Uj=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(l){var r=l}Reflect.construct(e,[],t)}else{try{t.call()}catch(l){r=l}e.call(t.prototype)}else{try{throw Error()}catch(l){r=l}e()}}catch(l){if(l&&r&&typeof l.stack=="string"){for(var i=l.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}while(1<=o&&0<=a);break}}}finally{Uj=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?PA(e):""}function J9e(e){switch(e.tag){case 5:return PA(e.type);case 16:return PA("Lazy");case 13:return PA("Suspense");case 19:return PA("SuspenseList");case 0:case 2:case 15:return e=zj(e.type,!1),e;case 11:return e=zj(e.type.render,!1),e;case 1:return e=zj(e.type,!0),e;default:return""}}function qU(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Rw:return"Fragment";case kw:return"Portal";case zU:return"Profiler";case UW:return"StrictMode";case VU:return"Suspense";case HU:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case c1e:return(e.displayName||"Context")+".Consumer";case l1e:return(e._context.displayName||"Context")+".Provider";case zW:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case VW:return t=e.displayName||null,t!==null?t:qU(e.type)||"Memo";case jg:t=e._payload,e=e._init;try{return qU(e(t))}catch{}}return null}function Z9e(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return qU(t);case 8:return t===UW?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function G0(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function d1e(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function eUe(e){var t=d1e(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function IN(e){e._valueTracker||(e._valueTracker=eUe(e))}function h1e(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=d1e(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function VD(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function WU(e,t){var n=t.checked;return Li({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function Qse(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=G0(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function p1e(e,t){t=t.checked,t!=null&&BW(e,"checked",t,!1)}function GU(e,t){p1e(e,t);var n=G0(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?YU(e,t.type,n):t.hasOwnProperty("defaultValue")&&YU(e,t.type,G0(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function Jse(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function YU(e,t,n){(t!=="number"||VD(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var OA=Array.isArray;function tE(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+G0(n),t=null,i=0;i<e.length;i++){if(e[i].value===n){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}t!==null||e[i].disabled||(t=e[i])}t!==null&&(t.selected=!0)}}function KU(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(tt(91));return Li({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function Zse(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(tt(92));if(OA(n)){if(1<n.length)throw Error(tt(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:G0(n)}}function m1e(e,t){var n=G0(t.value),r=G0(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function eoe(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function g1e(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function XU(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?g1e(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var kN,y1e=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,i){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,i)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(kN=kN||document.createElement("div"),kN.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=kN.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function k2(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var CC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},tUe=["Webkit","ms","Moz","O"];Object.keys(CC).forEach(function(e){tUe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),CC[t]=CC[e]})});function v1e(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||CC.hasOwnProperty(e)&&CC[e]?(""+t).trim():t+"px"}function b1e(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=v1e(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}var nUe=Li({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function QU(e,t){if(t){if(nUe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(tt(62))}}function JU(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ZU=null;function HW(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var e7=null,nE=null,rE=null;function toe(e){if(e=wk(e)){if(typeof e7!="function")throw Error(tt(280));var t=e.stateNode;t&&(t=UL(t),e7(e.stateNode,e.type,t))}}function _1e(e){nE?rE?rE.push(e):rE=[e]:nE=e}function w1e(){if(nE){var e=nE,t=rE;if(rE=nE=null,toe(e),t)for(e=0;e<t.length;e++)toe(t[e])}}function E1e(e,t){return e(t)}function x1e(){}var Vj=!1;function S1e(e,t,n){if(Vj)return e(t,n);Vj=!0;try{return E1e(e,t,n)}finally{Vj=!1,(nE!==null||rE!==null)&&(x1e(),w1e())}}function R2(e,t){var n=e.stateNode;if(n===null)return null;var r=UL(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(tt(231,t,typeof n));return n}var t7=!1;if(_m)try{var OT={};Object.defineProperty(OT,"passive",{get:function(){t7=!0}}),window.addEventListener("test",OT,OT),window.removeEventListener("test",OT,OT)}catch{t7=!1}function rUe(e,t,n,r,i,s,o,a,u){var l=Array.prototype.slice.call(arguments,3);try{t.apply(n,l)}catch(c){this.onError(c)}}var IC=!1,HD=null,qD=!1,n7=null,iUe={onError:function(e){IC=!0,HD=e}};function sUe(e,t,n,r,i,s,o,a,u){IC=!1,HD=null,rUe.apply(iUe,arguments)}function oUe(e,t,n,r,i,s,o,a,u){if(sUe.apply(this,arguments),IC){if(IC){var l=HD;IC=!1,HD=null}else throw Error(tt(198));qD||(qD=!0,n7=l)}}function zb(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function T1e(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function noe(e){if(zb(e)!==e)throw Error(tt(188))}function aUe(e){var t=e.alternate;if(!t){if(t=zb(e),t===null)throw Error(tt(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return noe(i),e;if(s===r)return noe(i),t;s=s.sibling}throw Error(tt(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(tt(189))}}if(n.alternate!==r)throw Error(tt(190))}if(n.tag!==3)throw Error(tt(188));return n.stateNode.current===n?e:t}function A1e(e){return e=aUe(e),e!==null?C1e(e):null}function C1e(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=C1e(e);if(t!==null)return t;e=e.sibling}return null}var I1e=Bl.unstable_scheduleCallback,roe=Bl.unstable_cancelCallback,uUe=Bl.unstable_shouldYield,lUe=Bl.unstable_requestPaint,ls=Bl.unstable_now,cUe=Bl.unstable_getCurrentPriorityLevel,qW=Bl.unstable_ImmediatePriority,k1e=Bl.unstable_UserBlockingPriority,WD=Bl.unstable_NormalPriority,fUe=Bl.unstable_LowPriority,R1e=Bl.unstable_IdlePriority,LL=null,ch=null;function dUe(e){if(ch&&typeof ch.onCommitFiberRoot=="function")try{ch.onCommitFiberRoot(LL,e,void 0,(e.current.flags&128)===128)}catch{}}var zf=Math.clz32?Math.clz32:mUe,hUe=Math.log,pUe=Math.LN2;function mUe(e){return e>>>=0,e===0?32:31-(hUe(e)/pUe|0)|0}var RN=64,NN=4194304;function DA(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function GD(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=DA(a):(s&=o,s!==0&&(r=DA(s)))}else o=n&~i,o!==0?r=DA(o):s!==0&&(r=DA(s));if(r===0)return 0;if(t!==0&&t!==r&&!(t&i)&&(i=r&-r,s=t&-t,i>=s||i===16&&(s&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-zf(t),i=1<<n,r|=e[n],t&=~i;return r}function gUe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yUe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-zf(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=gUe(a,t)):u<=t&&(e.expiredLanes|=a),s&=~a}}function r7(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function N1e(){var e=RN;return RN<<=1,!(RN&4194240)&&(RN=64),e}function Hj(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function bk(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-zf(t),e[t]=n}function vUe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-zf(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}function WW(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-zf(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var Mr=0;function P1e(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var O1e,GW,D1e,$1e,M1e,i7=!1,PN=[],w0=null,E0=null,x0=null,N2=new Map,P2=new Map,Kg=[],bUe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ioe(e,t){switch(e){case"focusin":case"focusout":w0=null;break;case"dragenter":case"dragleave":E0=null;break;case"mouseover":case"mouseout":x0=null;break;case"pointerover":case"pointerout":N2.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":P2.delete(t.pointerId)}}function DT(e,t,n,r,i,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},t!==null&&(t=wk(t),t!==null&&GW(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,i!==null&&t.indexOf(i)===-1&&t.push(i),e)}function _Ue(e,t,n,r,i){switch(t){case"focusin":return w0=DT(w0,e,t,n,r,i),!0;case"dragenter":return E0=DT(E0,e,t,n,r,i),!0;case"mouseover":return x0=DT(x0,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return N2.set(s,DT(N2.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,P2.set(s,DT(P2.get(s)||null,e,t,n,r,i)),!0}return!1}function L1e(e){var t=p1(e.target);if(t!==null){var n=zb(t);if(n!==null){if(t=n.tag,t===13){if(t=T1e(n),t!==null){e.blockedOn=t,M1e(e.priority,function(){D1e(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function bO(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=s7(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);ZU=r,n.target.dispatchEvent(r),ZU=null}else return t=wk(n),t!==null&&GW(t),e.blockedOn=n,!1;t.shift()}return!0}function soe(e,t,n){bO(e)&&n.delete(t)}function wUe(){i7=!1,w0!==null&&bO(w0)&&(w0=null),E0!==null&&bO(E0)&&(E0=null),x0!==null&&bO(x0)&&(x0=null),N2.forEach(soe),P2.forEach(soe)}function $T(e,t){e.blockedOn===t&&(e.blockedOn=null,i7||(i7=!0,Bl.unstable_scheduleCallback(Bl.unstable_NormalPriority,wUe)))}function O2(e){function t(i){return $T(i,e)}if(0<PN.length){$T(PN[0],e);for(var n=1;n<PN.length;n++){var r=PN[n];r.blockedOn===e&&(r.blockedOn=null)}}for(w0!==null&&$T(w0,e),E0!==null&&$T(E0,e),x0!==null&&$T(x0,e),N2.forEach(t),P2.forEach(t),n=0;n<Kg.length;n++)r=Kg[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<Kg.length&&(n=Kg[0],n.blockedOn===null);)L1e(n),n.blockedOn===null&&Kg.shift()}var iE=Qm.ReactCurrentBatchConfig,YD=!0;function EUe(e,t,n,r){var i=Mr,s=iE.transition;iE.transition=null;try{Mr=1,YW(e,t,n,r)}finally{Mr=i,iE.transition=s}}function xUe(e,t,n,r){var i=Mr,s=iE.transition;iE.transition=null;try{Mr=4,YW(e,t,n,r)}finally{Mr=i,iE.transition=s}}function YW(e,t,n,r){if(YD){var i=s7(e,t,n,r);if(i===null)e8(e,t,r,KD,n),ioe(e,r);else if(_Ue(i,e,t,n,r))r.stopPropagation();else if(ioe(e,r),t&4&&-1<bUe.indexOf(e)){for(;i!==null;){var s=wk(i);if(s!==null&&O1e(s),s=s7(e,t,n,r),s===null&&e8(e,t,r,KD,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else e8(e,t,r,null,n)}}var KD=null;function s7(e,t,n,r){if(KD=null,e=HW(r),e=p1(e),e!==null)if(t=zb(e),t===null)e=null;else if(n=t.tag,n===13){if(e=T1e(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return KD=e,null}function F1e(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(cUe()){case qW:return 1;case k1e:return 4;case WD:case fUe:return 16;case R1e:return 536870912;default:return 16}default:return 16}}var s0=null,KW=null,_O=null;function j1e(){if(_O)return _O;var e,t=KW,n=t.length,r,i="value"in s0?s0.value:s0.textContent,s=i.length;for(e=0;e<n&&t[e]===i[e];e++);var o=n-e;for(r=1;r<=o&&t[n-r]===i[s-r];r++);return _O=i.slice(e,1<r?1-r:void 0)}function wO(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function ON(){return!0}function ooe(){return!1}function nc(e){function t(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(n=e[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ON:ooe,this.isPropagationStopped=ooe,this}return Li(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ON)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ON)},persist:function(){},isPersistent:ON}),t}var uS={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},XW=nc(uS),_k=Li({},uS,{view:0,detail:0}),SUe=nc(_k),qj,Wj,MT,FL=Li({},_k,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:QW,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==MT&&(MT&&e.type==="mousemove"?(qj=e.screenX-MT.screenX,Wj=e.screenY-MT.screenY):Wj=qj=0,MT=e),qj)},movementY:function(e){return"movementY"in e?e.movementY:Wj}}),aoe=nc(FL),TUe=Li({},FL,{dataTransfer:0}),AUe=nc(TUe),CUe=Li({},_k,{relatedTarget:0}),Gj=nc(CUe),IUe=Li({},uS,{animationName:0,elapsedTime:0,pseudoElement:0}),kUe=nc(IUe),RUe=Li({},uS,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),NUe=nc(RUe),PUe=Li({},uS,{data:0}),uoe=nc(PUe),OUe={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},DUe={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},$Ue={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function MUe(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=$Ue[e])?!!t[e]:!1}function QW(){return MUe}var LUe=Li({},_k,{key:function(e){if(e.key){var t=OUe[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=wO(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?DUe[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:QW,charCode:function(e){return e.type==="keypress"?wO(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?wO(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),FUe=nc(LUe),jUe=Li({},FL,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),loe=nc(jUe),BUe=Li({},_k,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:QW}),UUe=nc(BUe),zUe=Li({},uS,{propertyName:0,elapsedTime:0,pseudoElement:0}),VUe=nc(zUe),HUe=Li({},FL,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),qUe=nc(HUe),WUe=[9,13,27,32],JW=_m&&"CompositionEvent"in window,kC=null;_m&&"documentMode"in document&&(kC=document.documentMode);var GUe=_m&&"TextEvent"in window&&!kC,B1e=_m&&(!JW||kC&&8<kC&&11>=kC),coe=" ",foe=!1;function U1e(e,t){switch(e){case"keyup":return WUe.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z1e(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Nw=!1;function YUe(e,t){switch(e){case"compositionend":return z1e(t);case"keypress":return t.which!==32?null:(foe=!0,coe);case"textInput":return e=t.data,e===coe&&foe?null:e;default:return null}}function KUe(e,t){if(Nw)return e==="compositionend"||!JW&&U1e(e,t)?(e=j1e(),_O=KW=s0=null,Nw=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return B1e&&t.locale!=="ko"?null:t.data;default:return null}}var XUe={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function doe(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!XUe[e.type]:t==="textarea"}function V1e(e,t,n,r){_1e(r),t=XD(t,"onChange"),0<t.length&&(n=new XW("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var RC=null,D2=null;function QUe(e){ebe(e,0)}function jL(e){var t=Dw(e);if(h1e(t))return e}function JUe(e,t){if(e==="change")return t}var H1e=!1;if(_m){var Yj;if(_m){var Kj="oninput"in document;if(!Kj){var hoe=document.createElement("div");hoe.setAttribute("oninput","return;"),Kj=typeof hoe.oninput=="function"}Yj=Kj}else Yj=!1;H1e=Yj&&(!document.documentMode||9<document.documentMode)}function poe(){RC&&(RC.detachEvent("onpropertychange",q1e),D2=RC=null)}function q1e(e){if(e.propertyName==="value"&&jL(D2)){var t=[];V1e(t,D2,e,HW(e)),S1e(QUe,t)}}function ZUe(e,t,n){e==="focusin"?(poe(),RC=t,D2=n,RC.attachEvent("onpropertychange",q1e)):e==="focusout"&&poe()}function e7e(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return jL(D2)}function t7e(e,t){if(e==="click")return jL(t)}function n7e(e,t){if(e==="input"||e==="change")return jL(t)}function r7e(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xf=typeof Object.is=="function"?Object.is:r7e;function $2(e,t){if(Xf(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!UU.call(t,i)||!Xf(e[i],t[i]))return!1}return!0}function moe(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function goe(e,t){var n=moe(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=moe(n)}}function W1e(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?W1e(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function G1e(){for(var e=window,t=VD();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=VD(e.document)}return t}function ZW(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function i7e(e){var t=G1e(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&W1e(n.ownerDocument.documentElement,n)){if(r!==null&&ZW(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=goe(n,s);var o=goe(n,r);i&&o&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var s7e=_m&&"documentMode"in document&&11>=document.documentMode,Pw=null,o7=null,NC=null,a7=!1;function yoe(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;a7||Pw==null||Pw!==VD(r)||(r=Pw,"selectionStart"in r&&ZW(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),NC&&$2(NC,r)||(NC=r,r=XD(o7,"onSelect"),0<r.length&&(t=new XW("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=Pw)))}function DN(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Ow={animationend:DN("Animation","AnimationEnd"),animationiteration:DN("Animation","AnimationIteration"),animationstart:DN("Animation","AnimationStart"),transitionend:DN("Transition","TransitionEnd")},Xj={},Y1e={};_m&&(Y1e=document.createElement("div").style,"AnimationEvent"in window||(delete Ow.animationend.animation,delete Ow.animationiteration.animation,delete Ow.animationstart.animation),"TransitionEvent"in window||delete Ow.transitionend.transition);function BL(e){if(Xj[e])return Xj[e];if(!Ow[e])return e;var t=Ow[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Y1e)return Xj[e]=t[n];return e}var K1e=BL("animationend"),X1e=BL("animationiteration"),Q1e=BL("animationstart"),J1e=BL("transitionend"),Z1e=new Map,voe="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ly(e,t){Z1e.set(e,t),Ub(t,[e])}for(var Qj=0;Qj<voe.length;Qj++){var Jj=voe[Qj],o7e=Jj.toLowerCase(),a7e=Jj[0].toUpperCase()+Jj.slice(1);Ly(o7e,"on"+a7e)}Ly(K1e,"onAnimationEnd");Ly(X1e,"onAnimationIteration");Ly(Q1e,"onAnimationStart");Ly("dblclick","onDoubleClick");Ly("focusin","onFocus");Ly("focusout","onBlur");Ly(J1e,"onTransitionEnd");zE("onMouseEnter",["mouseout","mouseover"]);zE("onMouseLeave",["mouseout","mouseover"]);zE("onPointerEnter",["pointerout","pointerover"]);zE("onPointerLeave",["pointerout","pointerover"]);Ub("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ub("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ub("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ub("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ub("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ub("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var $A="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),u7e=new Set("cancel close invalid load scroll toggle".split(" ").concat($A));function boe(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,oUe(r,t,void 0,e),e.currentTarget=null}function ebe(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,l=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;boe(i,a,l),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,l=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;boe(i,a,l),s=u}}}if(qD)throw e=n7,qD=!1,n7=null,e}function ai(e,t){var n=t[d7];n===void 0&&(n=t[d7]=new Set);var r=e+"__bubble";n.has(r)||(tbe(t,e,2,!1),n.add(r))}function Zj(e,t,n){var r=0;t&&(r|=4),tbe(n,e,r,t)}var $N="_reactListening"+Math.random().toString(36).slice(2);function M2(e){if(!e[$N]){e[$N]=!0,u1e.forEach(function(n){n!=="selectionchange"&&(u7e.has(n)||Zj(n,!1,e),Zj(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[$N]||(t[$N]=!0,Zj("selectionchange",!1,t))}}function tbe(e,t,n,r){switch(F1e(t)){case 1:var i=EUe;break;case 4:i=xUe;break;default:i=YW}n=i.bind(null,t,n,e),i=void 0,!t7||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):i!==void 0?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function e8(e,t,n,r,i){var s=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=p1(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}S1e(function(){var l=s,c=HW(n),f=[];e:{var d=Z1e.get(e);if(d!==void 0){var h=XW,p=e;switch(e){case"keypress":if(wO(n)===0)break e;case"keydown":case"keyup":h=FUe;break;case"focusin":p="focus",h=Gj;break;case"focusout":p="blur",h=Gj;break;case"beforeblur":case"afterblur":h=Gj;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":h=aoe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":h=AUe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":h=UUe;break;case K1e:case X1e:case Q1e:h=kUe;break;case J1e:h=VUe;break;case"scroll":h=SUe;break;case"wheel":h=qUe;break;case"copy":case"cut":case"paste":h=NUe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":h=loe}var m=(t&4)!==0,g=!m&&e==="scroll",y=m?d!==null?d+"Capture":null:d;m=[];for(var v=l,b;v!==null;){b=v;var w=b.stateNode;if(b.tag===5&&w!==null&&(b=w,y!==null&&(w=R2(v,y),w!=null&&m.push(L2(v,w,b)))),g)break;v=v.return}0<m.length&&(d=new h(d,p,null,n,c),f.push({event:d,listeners:m}))}}if(!(t&7)){e:{if(d=e==="mouseover"||e==="pointerover",h=e==="mouseout"||e==="pointerout",d&&n!==ZU&&(p=n.relatedTarget||n.fromElement)&&(p1(p)||p[wm]))break e;if((h||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,h?(p=n.relatedTarget||n.toElement,h=l,p=p?p1(p):null,p!==null&&(g=zb(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(h=null,p=l),h!==p)){if(m=aoe,w="onMouseLeave",y="onMouseEnter",v="mouse",(e==="pointerout"||e==="pointerover")&&(m=loe,w="onPointerLeave",y="onPointerEnter",v="pointer"),g=h==null?d:Dw(h),b=p==null?d:Dw(p),d=new m(w,v+"leave",h,n,c),d.target=g,d.relatedTarget=b,w=null,p1(c)===l&&(m=new m(y,v+"enter",p,n,c),m.target=b,m.relatedTarget=g,w=m),g=w,h&&p)t:{for(m=h,y=p,v=0,b=m;b;b=$_(b))v++;for(b=0,w=y;w;w=$_(w))b++;for(;0<v-b;)m=$_(m),v--;for(;0<b-v;)y=$_(y),b--;for(;v--;){if(m===y||y!==null&&m===y.alternate)break t;m=$_(m),y=$_(y)}m=null}else m=null;h!==null&&_oe(f,d,h,m,!1),p!==null&&g!==null&&_oe(f,g,p,m,!0)}}e:{if(d=l?Dw(l):window,h=d.nodeName&&d.nodeName.toLowerCase(),h==="select"||h==="input"&&d.type==="file")var E=JUe;else if(doe(d))if(H1e)E=n7e;else{E=e7e;var T=ZUe}else(h=d.nodeName)&&h.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(E=t7e);if(E&&(E=E(e,l))){V1e(f,E,n,c);break e}T&&T(e,d,l),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&YU(d,"number",d.value)}switch(T=l?Dw(l):window,e){case"focusin":(doe(T)||T.contentEditable==="true")&&(Pw=T,o7=l,NC=null);break;case"focusout":NC=o7=Pw=null;break;case"mousedown":a7=!0;break;case"contextmenu":case"mouseup":case"dragend":a7=!1,yoe(f,n,c);break;case"selectionchange":if(s7e)break;case"keydown":case"keyup":yoe(f,n,c)}var S;if(JW)e:{switch(e){case"compositionstart":var A="onCompositionStart";break e;case"compositionend":A="onCompositionEnd";break e;case"compositionupdate":A="onCompositionUpdate";break e}A=void 0}else Nw?U1e(e,n)&&(A="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(A="onCompositionStart");A&&(B1e&&n.locale!=="ko"&&(Nw||A!=="onCompositionStart"?A==="onCompositionEnd"&&Nw&&(S=j1e()):(s0=c,KW="value"in s0?s0.value:s0.textContent,Nw=!0)),T=XD(l,A),0<T.length&&(A=new uoe(A,e,null,n,c),f.push({event:A,listeners:T}),S?A.data=S:(S=z1e(n),S!==null&&(A.data=S)))),(S=GUe?YUe(e,n):KUe(e,n))&&(l=XD(l,"onBeforeInput"),0<l.length&&(c=new uoe("onBeforeInput","beforeinput",null,n,c),f.push({event:c,listeners:l}),c.data=S))}ebe(f,t)})}function L2(e,t,n){return{instance:e,listener:t,currentTarget:n}}function XD(e,t){for(var n=t+"Capture",r=[];e!==null;){var i=e,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=R2(e,n),s!=null&&r.unshift(L2(e,s,i)),s=R2(e,t),s!=null&&r.push(L2(e,s,i))),e=e.return}return r}function $_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function _oe(e,t,n,r,i){for(var s=t._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,l=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&l!==null&&(a=l,i?(u=R2(n,s),u!=null&&o.unshift(L2(n,u,a))):i||(u=R2(n,s),u!=null&&o.push(L2(n,u,a)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var l7e=/\r\n?/g,c7e=/\u0000|\uFFFD/g;function woe(e){return(typeof e=="string"?e:""+e).replace(l7e,`
`).replace(c7e,"")}function MN(e,t,n){if(t=woe(t),woe(e)!==t&&n)throw Error(tt(425))}function QD(){}var u7=null,l7=null;function c7(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var f7=typeof setTimeout=="function"?setTimeout:void 0,f7e=typeof clearTimeout=="function"?clearTimeout:void 0,Eoe=typeof Promise=="function"?Promise:void 0,d7e=typeof queueMicrotask=="function"?queueMicrotask:typeof Eoe<"u"?function(e){return Eoe.resolve(null).then(e).catch(h7e)}:f7;function h7e(e){setTimeout(function(){throw e})}function t8(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){e.removeChild(i),O2(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);O2(t)}function S0(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function xoe(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var lS=Math.random().toString(36).slice(2),Vd="__reactFiber$"+lS,F2="__reactProps$"+lS,wm="__reactContainer$"+lS,d7="__reactEvents$"+lS,p7e="__reactListeners$"+lS,m7e="__reactHandles$"+lS;function p1(e){var t=e[Vd];if(t)return t;for(var n=e.parentNode;n;){if(t=n[wm]||n[Vd]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=xoe(e);e!==null;){if(n=e[Vd])return n;e=xoe(e)}return t}e=n,n=e.parentNode}return null}function wk(e){return e=e[Vd]||e[wm],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Dw(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(tt(33))}function UL(e){return e[F2]||null}var h7=[],$w=-1;function Fy(e){return{current:e}}function hi(e){0>$w||(e.current=h7[$w],h7[$w]=null,$w--)}function ii(e,t){$w++,h7[$w]=e.current,e.current=t}var Y0={},Ea=Fy(Y0),Vu=Fy(!1),J1=Y0;function VE(e,t){var n=e.type.contextTypes;if(!n)return Y0;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=t[s];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=i),i}function Hu(e){return e=e.childContextTypes,e!=null}function JD(){hi(Vu),hi(Ea)}function Soe(e,t,n){if(Ea.current!==Y0)throw Error(tt(168));ii(Ea,t),ii(Vu,n)}function nbe(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in t))throw Error(tt(108,Z9e(e)||"Unknown",i));return Li({},n,r)}function ZD(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Y0,J1=Ea.current,ii(Ea,e),ii(Vu,Vu.current),!0}function Toe(e,t,n){var r=e.stateNode;if(!r)throw Error(tt(169));n?(e=nbe(e,t,J1),r.__reactInternalMemoizedMergedChildContext=e,hi(Vu),hi(Ea),ii(Ea,e)):hi(Vu),ii(Vu,n)}var $p=null,zL=!1,n8=!1;function rbe(e){$p===null?$p=[e]:$p.push(e)}function g7e(e){zL=!0,rbe(e)}function jy(){if(!n8&&$p!==null){n8=!0;var e=0,t=Mr;try{var n=$p;for(Mr=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}$p=null,zL=!1}catch(i){throw $p!==null&&($p=$p.slice(e+1)),I1e(qW,jy),i}finally{Mr=t,n8=!1}}return null}var Mw=[],Lw=0,e$=null,t$=0,vc=[],bc=0,Z1=null,Gp=1,Yp="";function Fv(e,t){Mw[Lw++]=t$,Mw[Lw++]=e$,e$=e,t$=t}function ibe(e,t,n){vc[bc++]=Gp,vc[bc++]=Yp,vc[bc++]=Z1,Z1=e;var r=Gp;e=Yp;var i=32-zf(r)-1;r&=~(1<<i),n+=1;var s=32-zf(t)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Gp=1<<32-zf(t)+i|n<<i|r,Yp=s+e}else Gp=1<<s|n<<i|r,Yp=e}function eG(e){e.return!==null&&(Fv(e,1),ibe(e,1,0))}function tG(e){for(;e===e$;)e$=Mw[--Lw],Mw[Lw]=null,t$=Mw[--Lw],Mw[Lw]=null;for(;e===Z1;)Z1=vc[--bc],vc[bc]=null,Yp=vc[--bc],vc[bc]=null,Gp=vc[--bc],vc[bc]=null}var Dl=null,Al=null,Ti=!1,Tf=null;function sbe(e,t){var n=Cc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Aoe(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Dl=e,Al=S0(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Dl=e,Al=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=Z1!==null?{id:Gp,overflow:Yp}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Cc(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Dl=e,Al=null,!0):!1;default:return!1}}function p7(e){return(e.mode&1)!==0&&(e.flags&128)===0}function m7(e){if(Ti){var t=Al;if(t){var n=t;if(!Aoe(e,t)){if(p7(e))throw Error(tt(418));t=S0(n.nextSibling);var r=Dl;t&&Aoe(e,t)?sbe(r,n):(e.flags=e.flags&-4097|2,Ti=!1,Dl=e)}}else{if(p7(e))throw Error(tt(418));e.flags=e.flags&-4097|2,Ti=!1,Dl=e}}}function Coe(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Dl=e}function LN(e){if(e!==Dl)return!1;if(!Ti)return Coe(e),Ti=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!c7(e.type,e.memoizedProps)),t&&(t=Al)){if(p7(e))throw obe(),Error(tt(418));for(;t;)sbe(e,t),t=S0(t.nextSibling)}if(Coe(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Al=S0(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Al=null}}else Al=Dl?S0(e.stateNode.nextSibling):null;return!0}function obe(){for(var e=Al;e;)e=S0(e.nextSibling)}function HE(){Al=Dl=null,Ti=!1}function nG(e){Tf===null?Tf=[e]:Tf.push(e)}var y7e=Qm.ReactCurrentBatchConfig;function LT(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(tt(309));var r=n.stateNode}if(!r)throw Error(tt(147,e));var i=r,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(tt(284));if(!n._owner)throw Error(tt(290,e))}return e}function FN(e,t){throw e=Object.prototype.toString.call(t),Error(tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ioe(e){var t=e._init;return t(e._payload)}function abe(e){function t(y,v){if(e){var b=y.deletions;b===null?(y.deletions=[v],y.flags|=16):b.push(v)}}function n(y,v){if(!e)return null;for(;v!==null;)t(y,v),v=v.sibling;return null}function r(y,v){for(y=new Map;v!==null;)v.key!==null?y.set(v.key,v):y.set(v.index,v),v=v.sibling;return y}function i(y,v){return y=I0(y,v),y.index=0,y.sibling=null,y}function s(y,v,b){return y.index=b,e?(b=y.alternate,b!==null?(b=b.index,b<v?(y.flags|=2,v):b):(y.flags|=2,v)):(y.flags|=1048576,v)}function o(y){return e&&y.alternate===null&&(y.flags|=2),y}function a(y,v,b,w){return v===null||v.tag!==6?(v=l8(b,y.mode,w),v.return=y,v):(v=i(v,b),v.return=y,v)}function u(y,v,b,w){var E=b.type;return E===Rw?c(y,v,b.props.children,w,b.key):v!==null&&(v.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===jg&&Ioe(E)===v.type)?(w=i(v,b.props),w.ref=LT(y,v,b),w.return=y,w):(w=IO(b.type,b.key,b.props,null,y.mode,w),w.ref=LT(y,v,b),w.return=y,w)}function l(y,v,b,w){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=c8(b,y.mode,w),v.return=y,v):(v=i(v,b.children||[]),v.return=y,v)}function c(y,v,b,w,E){return v===null||v.tag!==7?(v=M1(b,y.mode,w,E),v.return=y,v):(v=i(v,b),v.return=y,v)}function f(y,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=l8(""+v,y.mode,b),v.return=y,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case CN:return b=IO(v.type,v.key,v.props,null,y.mode,b),b.ref=LT(y,null,v),b.return=y,b;case kw:return v=c8(v,y.mode,b),v.return=y,v;case jg:var w=v._init;return f(y,w(v._payload),b)}if(OA(v)||PT(v))return v=M1(v,y.mode,b,null),v.return=y,v;FN(y,v)}return null}function d(y,v,b,w){var E=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return E!==null?null:a(y,v,""+b,w);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case CN:return b.key===E?u(y,v,b,w):null;case kw:return b.key===E?l(y,v,b,w):null;case jg:return E=b._init,d(y,v,E(b._payload),w)}if(OA(b)||PT(b))return E!==null?null:c(y,v,b,w,null);FN(y,b)}return null}function h(y,v,b,w,E){if(typeof w=="string"&&w!==""||typeof w=="number")return y=y.get(b)||null,a(v,y,""+w,E);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case CN:return y=y.get(w.key===null?b:w.key)||null,u(v,y,w,E);case kw:return y=y.get(w.key===null?b:w.key)||null,l(v,y,w,E);case jg:var T=w._init;return h(y,v,b,T(w._payload),E)}if(OA(w)||PT(w))return y=y.get(b)||null,c(v,y,w,E,null);FN(v,w)}return null}function p(y,v,b,w){for(var E=null,T=null,S=v,A=v=0,C=null;S!==null&&A<b.length;A++){S.index>A?(C=S,S=null):C=S.sibling;var k=d(y,S,b[A],w);if(k===null){S===null&&(S=C);break}e&&S&&k.alternate===null&&t(y,S),v=s(k,v,A),T===null?E=k:T.sibling=k,T=k,S=C}if(A===b.length)return n(y,S),Ti&&Fv(y,A),E;if(S===null){for(;A<b.length;A++)S=f(y,b[A],w),S!==null&&(v=s(S,v,A),T===null?E=S:T.sibling=S,T=S);return Ti&&Fv(y,A),E}for(S=r(y,S);A<b.length;A++)C=h(S,y,A,b[A],w),C!==null&&(e&&C.alternate!==null&&S.delete(C.key===null?A:C.key),v=s(C,v,A),T===null?E=C:T.sibling=C,T=C);return e&&S.forEach(function(N){return t(y,N)}),Ti&&Fv(y,A),E}function m(y,v,b,w){var E=PT(b);if(typeof E!="function")throw Error(tt(150));if(b=E.call(b),b==null)throw Error(tt(151));for(var T=E=null,S=v,A=v=0,C=null,k=b.next();S!==null&&!k.done;A++,k=b.next()){S.index>A?(C=S,S=null):C=S.sibling;var N=d(y,S,k.value,w);if(N===null){S===null&&(S=C);break}e&&S&&N.alternate===null&&t(y,S),v=s(N,v,A),T===null?E=N:T.sibling=N,T=N,S=C}if(k.done)return n(y,S),Ti&&Fv(y,A),E;if(S===null){for(;!k.done;A++,k=b.next())k=f(y,k.value,w),k!==null&&(v=s(k,v,A),T===null?E=k:T.sibling=k,T=k);return Ti&&Fv(y,A),E}for(S=r(y,S);!k.done;A++,k=b.next())k=h(S,y,A,k.value,w),k!==null&&(e&&k.alternate!==null&&S.delete(k.key===null?A:k.key),v=s(k,v,A),T===null?E=k:T.sibling=k,T=k);return e&&S.forEach(function(D){return t(y,D)}),Ti&&Fv(y,A),E}function g(y,v,b,w){if(typeof b=="object"&&b!==null&&b.type===Rw&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case CN:e:{for(var E=b.key,T=v;T!==null;){if(T.key===E){if(E=b.type,E===Rw){if(T.tag===7){n(y,T.sibling),v=i(T,b.props.children),v.return=y,y=v;break e}}else if(T.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===jg&&Ioe(E)===T.type){n(y,T.sibling),v=i(T,b.props),v.ref=LT(y,T,b),v.return=y,y=v;break e}n(y,T);break}else t(y,T);T=T.sibling}b.type===Rw?(v=M1(b.props.children,y.mode,w,b.key),v.return=y,y=v):(w=IO(b.type,b.key,b.props,null,y.mode,w),w.ref=LT(y,v,b),w.return=y,y=w)}return o(y);case kw:e:{for(T=b.key;v!==null;){if(v.key===T)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){n(y,v.sibling),v=i(v,b.children||[]),v.return=y,y=v;break e}else{n(y,v);break}else t(y,v);v=v.sibling}v=c8(b,y.mode,w),v.return=y,y=v}return o(y);case jg:return T=b._init,g(y,v,T(b._payload),w)}if(OA(b))return p(y,v,b,w);if(PT(b))return m(y,v,b,w);FN(y,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(n(y,v.sibling),v=i(v,b),v.return=y,y=v):(n(y,v),v=l8(b,y.mode,w),v.return=y,y=v),o(y)):n(y,v)}return g}var qE=abe(!0),ube=abe(!1),n$=Fy(null),r$=null,Fw=null,rG=null;function iG(){rG=Fw=r$=null}function sG(e){var t=n$.current;hi(n$),e._currentValue=t}function g7(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function sE(e,t){r$=e,rG=Fw=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Lu=!0),e.firstContext=null)}function $c(e){var t=e._currentValue;if(rG!==e)if(e={context:e,memoizedValue:t,next:null},Fw===null){if(r$===null)throw Error(tt(308));Fw=e,r$.dependencies={lanes:0,firstContext:e}}else Fw=Fw.next=e;return t}var m1=null;function oG(e){m1===null?m1=[e]:m1.push(e)}function lbe(e,t,n,r){var i=t.interleaved;return i===null?(n.next=n,oG(t)):(n.next=i.next,i.next=n),t.interleaved=n,Em(e,r)}function Em(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Bg=!1;function aG(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function cbe(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function am(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function T0(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,cr&2){var i=r.pending;return i===null?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Em(e,n)}return i=r.interleaved,i===null?(t.next=t,oG(r)):(t.next=i.next,i.next=t),r.interleaved=t,Em(e,n)}function EO(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,WW(e,n)}}function koe(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=t:s=s.next=t}else i=s=t;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function i$(e,t,n,r){var i=e.updateQueue;Bg=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,l=u.next;u.next=null,o===null?s=l:o.next=l,o=u;var c=e.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=l:a.next=l,c.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,c=l=u=null,a=s;do{var d=a.lane,h=a.eventTime;if((r&d)===d){c!==null&&(c=c.next={eventTime:h,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=e,m=a;switch(d=t,h=n,m.tag){case 1:if(p=m.payload,typeof p=="function"){f=p.call(h,f,d);break e}f=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,d=typeof p=="function"?p.call(h,f,d):p,d==null)break e;f=Li({},f,d);break e;case 2:Bg=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=i.effects,d===null?i.effects=[a]:d.push(a))}else h={eventTime:h,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(l=c=h,u=f):c=c.next=h,o|=d;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;d=a,a=d.next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}while(!0);if(c===null&&(u=f),i.baseState=u,i.firstBaseUpdate=l,i.lastBaseUpdate=c,t=i.shared.interleaved,t!==null){i=t;do o|=i.lane,i=i.next;while(i!==t)}else s===null&&(i.shared.lanes=0);tb|=o,e.lanes=o,e.memoizedState=f}}function Roe(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(tt(191,i));i.call(r)}}}var Ek={},fh=Fy(Ek),j2=Fy(Ek),B2=Fy(Ek);function g1(e){if(e===Ek)throw Error(tt(174));return e}function uG(e,t){switch(ii(B2,t),ii(j2,e),ii(fh,Ek),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:XU(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=XU(t,e)}hi(fh),ii(fh,t)}function WE(){hi(fh),hi(j2),hi(B2)}function fbe(e){g1(B2.current);var t=g1(fh.current),n=XU(t,e.type);t!==n&&(ii(j2,e),ii(fh,n))}function lG(e){j2.current===e&&(hi(fh),hi(j2))}var $i=Fy(0);function s$(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var r8=[];function cG(){for(var e=0;e<r8.length;e++)r8[e]._workInProgressVersionPrimary=null;r8.length=0}var xO=Qm.ReactCurrentDispatcher,i8=Qm.ReactCurrentBatchConfig,eb=0,Mi=null,Ns=null,eo=null,o$=!1,PC=!1,U2=0,v7e=0;function Qo(){throw Error(tt(321))}function fG(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!Xf(e[n],t[n]))return!1;return!0}function dG(e,t,n,r,i,s){if(eb=s,Mi=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,xO.current=e===null||e.memoizedState===null?E7e:x7e,e=n(r,i),PC){s=0;do{if(PC=!1,U2=0,25<=s)throw Error(tt(301));s+=1,eo=Ns=null,t.updateQueue=null,xO.current=S7e,e=n(r,i)}while(PC)}if(xO.current=a$,t=Ns!==null&&Ns.next!==null,eb=0,eo=Ns=Mi=null,o$=!1,t)throw Error(tt(300));return e}function hG(){var e=U2!==0;return U2=0,e}function Od(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return eo===null?Mi.memoizedState=eo=e:eo=eo.next=e,eo}function Mc(){if(Ns===null){var e=Mi.alternate;e=e!==null?e.memoizedState:null}else e=Ns.next;var t=eo===null?Mi.memoizedState:eo.next;if(t!==null)eo=t,Ns=e;else{if(e===null)throw Error(tt(310));Ns=e,e={memoizedState:Ns.memoizedState,baseState:Ns.baseState,baseQueue:Ns.baseQueue,queue:Ns.queue,next:null},eo===null?Mi.memoizedState=eo=e:eo=eo.next=e}return eo}function z2(e,t){return typeof t=="function"?t(e):t}function s8(e){var t=Mc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=Ns,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,l=s;do{var c=l.lane;if((eb&c)===c)u!==null&&(u=u.next={lane:0,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null}),r=l.hasEagerState?l.eagerState:e(r,l.action);else{var f={lane:c,action:l.action,hasEagerState:l.hasEagerState,eagerState:l.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,Mi.lanes|=c,tb|=c}l=l.next}while(l!==null&&l!==s);u===null?o=r:u.next=a,Xf(r,t.memoizedState)||(Lu=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=u,n.lastRenderedState=r}if(e=n.interleaved,e!==null){i=e;do s=i.lane,Mi.lanes|=s,tb|=s,i=i.next;while(i!==e)}else i===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function o8(e){var t=Mc(),n=t.queue;if(n===null)throw Error(tt(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,s=t.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=e(s,o.action),o=o.next;while(o!==i);Xf(s,t.memoizedState)||(Lu=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),n.lastRenderedState=s}return[s,r]}function dbe(){}function hbe(e,t){var n=Mi,r=Mc(),i=t(),s=!Xf(r.memoizedState,i);if(s&&(r.memoizedState=i,Lu=!0),r=r.queue,pG(gbe.bind(null,n,r,e),[e]),r.getSnapshot!==t||s||eo!==null&&eo.memoizedState.tag&1){if(n.flags|=2048,V2(9,mbe.bind(null,n,r,i,t),void 0,null),ho===null)throw Error(tt(349));eb&30||pbe(n,t,i)}return i}function pbe(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function mbe(e,t,n,r){t.value=n,t.getSnapshot=r,ybe(t)&&vbe(e)}function gbe(e,t,n){return n(function(){ybe(t)&&vbe(e)})}function ybe(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!Xf(e,n)}catch{return!0}}function vbe(e){var t=Em(e,1);t!==null&&Vf(t,e,1,-1)}function Noe(e){var t=Od();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:z2,lastRenderedState:e},t.queue=e,e=e.dispatch=w7e.bind(null,Mi,e),[t.memoizedState,e]}function V2(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=Mi.updateQueue,t===null?(t={lastEffect:null,stores:null},Mi.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function bbe(){return Mc().memoizedState}function SO(e,t,n,r){var i=Od();Mi.flags|=e,i.memoizedState=V2(1|t,n,void 0,r===void 0?null:r)}function VL(e,t,n,r){var i=Mc();r=r===void 0?null:r;var s=void 0;if(Ns!==null){var o=Ns.memoizedState;if(s=o.destroy,r!==null&&fG(r,o.deps)){i.memoizedState=V2(t,n,s,r);return}}Mi.flags|=e,i.memoizedState=V2(1|t,n,s,r)}function Poe(e,t){return SO(8390656,8,e,t)}function pG(e,t){return VL(2048,8,e,t)}function _be(e,t){return VL(4,2,e,t)}function wbe(e,t){return VL(4,4,e,t)}function Ebe(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function xbe(e,t,n){return n=n!=null?n.concat([e]):null,VL(4,4,Ebe.bind(null,t,e),n)}function mG(){}function Sbe(e,t){var n=Mc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fG(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Tbe(e,t){var n=Mc();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&fG(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Abe(e,t,n){return eb&21?(Xf(n,t)||(n=N1e(),Mi.lanes|=n,tb|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Lu=!0),e.memoizedState=n)}function b7e(e,t){var n=Mr;Mr=n!==0&&4>n?n:4,e(!0);var r=i8.transition;i8.transition={};try{e(!1),t()}finally{Mr=n,i8.transition=r}}function Cbe(){return Mc().memoizedState}function _7e(e,t,n){var r=C0(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Ibe(e))kbe(t,n);else if(n=lbe(e,t,n,r),n!==null){var i=Xa();Vf(n,e,r,i),Rbe(n,t,r)}}function w7e(e,t,n){var r=C0(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ibe(e))kbe(t,i);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,Xf(a,o)){var u=t.interleaved;u===null?(i.next=i,oG(t)):(i.next=u.next,u.next=i),t.interleaved=i;return}}catch{}finally{}n=lbe(e,t,i,r),n!==null&&(i=Xa(),Vf(n,e,r,i),Rbe(n,t,r))}}function Ibe(e){var t=e.alternate;return e===Mi||t!==null&&t===Mi}function kbe(e,t){PC=o$=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Rbe(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,WW(e,n)}}var a$={readContext:$c,useCallback:Qo,useContext:Qo,useEffect:Qo,useImperativeHandle:Qo,useInsertionEffect:Qo,useLayoutEffect:Qo,useMemo:Qo,useReducer:Qo,useRef:Qo,useState:Qo,useDebugValue:Qo,useDeferredValue:Qo,useTransition:Qo,useMutableSource:Qo,useSyncExternalStore:Qo,useId:Qo,unstable_isNewReconciler:!1},E7e={readContext:$c,useCallback:function(e,t){return Od().memoizedState=[e,t===void 0?null:t],e},useContext:$c,useEffect:Poe,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,SO(4194308,4,Ebe.bind(null,t,e),n)},useLayoutEffect:function(e,t){return SO(4194308,4,e,t)},useInsertionEffect:function(e,t){return SO(4,2,e,t)},useMemo:function(e,t){var n=Od();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Od();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=_7e.bind(null,Mi,e),[r.memoizedState,e]},useRef:function(e){var t=Od();return e={current:e},t.memoizedState=e},useState:Noe,useDebugValue:mG,useDeferredValue:function(e){return Od().memoizedState=e},useTransition:function(){var e=Noe(!1),t=e[0];return e=b7e.bind(null,e[1]),Od().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=Mi,i=Od();if(Ti){if(n===void 0)throw Error(tt(407));n=n()}else{if(n=t(),ho===null)throw Error(tt(349));eb&30||pbe(r,t,n)}i.memoizedState=n;var s={value:n,getSnapshot:t};return i.queue=s,Poe(gbe.bind(null,r,s,e),[e]),r.flags|=2048,V2(9,mbe.bind(null,r,s,n,t),void 0,null),n},useId:function(){var e=Od(),t=ho.identifierPrefix;if(Ti){var n=Yp,r=Gp;n=(r&~(1<<32-zf(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=U2++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=v7e++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},x7e={readContext:$c,useCallback:Sbe,useContext:$c,useEffect:pG,useImperativeHandle:xbe,useInsertionEffect:_be,useLayoutEffect:wbe,useMemo:Tbe,useReducer:s8,useRef:bbe,useState:function(){return s8(z2)},useDebugValue:mG,useDeferredValue:function(e){var t=Mc();return Abe(t,Ns.memoizedState,e)},useTransition:function(){var e=s8(z2)[0],t=Mc().memoizedState;return[e,t]},useMutableSource:dbe,useSyncExternalStore:hbe,useId:Cbe,unstable_isNewReconciler:!1},S7e={readContext:$c,useCallback:Sbe,useContext:$c,useEffect:pG,useImperativeHandle:xbe,useInsertionEffect:_be,useLayoutEffect:wbe,useMemo:Tbe,useReducer:o8,useRef:bbe,useState:function(){return o8(z2)},useDebugValue:mG,useDeferredValue:function(e){var t=Mc();return Ns===null?t.memoizedState=e:Abe(t,Ns.memoizedState,e)},useTransition:function(){var e=o8(z2)[0],t=Mc().memoizedState;return[e,t]},useMutableSource:dbe,useSyncExternalStore:hbe,useId:Cbe,unstable_isNewReconciler:!1};function bf(e,t){if(e&&e.defaultProps){t=Li({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function y7(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Li({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var HL={isMounted:function(e){return(e=e._reactInternals)?zb(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Xa(),i=C0(e),s=am(r,i);s.payload=t,n!=null&&(s.callback=n),t=T0(e,s,i),t!==null&&(Vf(t,e,i,r),EO(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Xa(),i=C0(e),s=am(r,i);s.tag=1,s.payload=t,n!=null&&(s.callback=n),t=T0(e,s,i),t!==null&&(Vf(t,e,i,r),EO(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Xa(),r=C0(e),i=am(n,r);i.tag=2,t!=null&&(i.callback=t),t=T0(e,i,r),t!==null&&(Vf(t,e,r,n),EO(t,e,r))}};function Ooe(e,t,n,r,i,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,s,o):t.prototype&&t.prototype.isPureReactComponent?!$2(n,r)||!$2(i,s):!0}function Nbe(e,t,n){var r=!1,i=Y0,s=t.contextType;return typeof s=="object"&&s!==null?s=$c(s):(i=Hu(t)?J1:Ea.current,r=t.contextTypes,s=(r=r!=null)?VE(e,i):Y0),t=new t(n,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=HL,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function Doe(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&HL.enqueueReplaceState(t,t.state,null)}function v7(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},aG(e);var s=t.contextType;typeof s=="object"&&s!==null?i.context=$c(s):(s=Hu(t)?J1:Ea.current,i.context=VE(e,s)),i.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(y7(e,t,s,n),i.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(t=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),t!==i.state&&HL.enqueueReplaceState(i,i.state,null),i$(e,n,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function GE(e,t){try{var n="",r=t;do n+=J9e(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:i,digest:null}}function a8(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function b7(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var T7e=typeof WeakMap=="function"?WeakMap:Map;function Pbe(e,t,n){n=am(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){l$||(l$=!0,k7=r),b7(e,t)},n}function Obe(e,t,n){n=am(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){b7(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){b7(e,t),typeof r!="function"&&(A0===null?A0=new Set([this]):A0.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function $oe(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new T7e;var i=new Set;r.set(t,i)}else i=r.get(t),i===void 0&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=j7e.bind(null,e,t,n),t.then(e,e))}function Moe(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Loe(e,t,n,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=am(-1,1),t.tag=2,T0(n,t,1))),n.lanes|=1),e)}var A7e=Qm.ReactCurrentOwner,Lu=!1;function ja(e,t,n,r){t.child=e===null?ube(t,null,n,r):qE(t,e.child,n,r)}function Foe(e,t,n,r,i){n=n.render;var s=t.ref;return sE(t,i),r=dG(e,t,n,r,s,i),n=hG(),e!==null&&!Lu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xm(e,t,i)):(Ti&&n&&eG(t),t.flags|=1,ja(e,t,r,i),t.child)}function joe(e,t,n,r,i){if(e===null){var s=n.type;return typeof s=="function"&&!xG(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=s,Dbe(e,t,s,r,i)):(e=IO(n.type,null,r,t,t.mode,i),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:$2,n(o,r)&&e.ref===t.ref)return xm(e,t,i)}return t.flags|=1,e=I0(s,r),e.ref=t.ref,e.return=t,t.child=e}function Dbe(e,t,n,r,i){if(e!==null){var s=e.memoizedProps;if($2(s,r)&&e.ref===t.ref)if(Lu=!1,t.pendingProps=r=s,(e.lanes&i)!==0)e.flags&131072&&(Lu=!0);else return t.lanes=e.lanes,xm(e,t,i)}return _7(e,t,n,r,i)}function $be(e,t,n){var r=t.pendingProps,i=r.children,s=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},ii(Bw,bl),bl|=n;else{if(!(n&1073741824))return e=s!==null?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,ii(Bw,bl),bl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ii(Bw,bl),bl|=r}else s!==null?(r=s.baseLanes|n,t.memoizedState=null):r=n,ii(Bw,bl),bl|=r;return ja(e,t,i,n),t.child}function Mbe(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function _7(e,t,n,r,i){var s=Hu(n)?J1:Ea.current;return s=VE(t,s),sE(t,i),n=dG(e,t,n,r,s,i),r=hG(),e!==null&&!Lu?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,xm(e,t,i)):(Ti&&r&&eG(t),t.flags|=1,ja(e,t,n,i),t.child)}function Boe(e,t,n,r,i){if(Hu(n)){var s=!0;ZD(t)}else s=!1;if(sE(t,i),t.stateNode===null)TO(e,t),Nbe(t,n,r),v7(t,n,r,i),r=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var u=o.context,l=n.contextType;typeof l=="object"&&l!==null?l=$c(l):(l=Hu(n)?J1:Ea.current,l=VE(t,l));var c=n.getDerivedStateFromProps,f=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==l)&&Doe(t,o,r,l),Bg=!1;var d=t.memoizedState;o.state=d,i$(t,r,o,i),u=t.memoizedState,a!==r||d!==u||Vu.current||Bg?(typeof c=="function"&&(y7(t,n,c,r),u=t.memoizedState),(a=Bg||Ooe(t,n,a,r,d,u,l))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=u),o.props=r,o.state=u,o.context=l,r=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{o=t.stateNode,cbe(e,t),a=t.memoizedProps,l=t.type===t.elementType?a:bf(t.type,a),o.props=l,f=t.pendingProps,d=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=$c(u):(u=Hu(n)?J1:Ea.current,u=VE(t,u));var h=n.getDerivedStateFromProps;(c=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||d!==u)&&Doe(t,o,r,u),Bg=!1,d=t.memoizedState,o.state=d,i$(t,r,o,i);var p=t.memoizedState;a!==f||d!==p||Vu.current||Bg?(typeof h=="function"&&(y7(t,n,h,r),p=t.memoizedState),(l=Bg||Ooe(t,n,l,r,d,p,u)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,p,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,p,u)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),o.props=r,o.state=p,o.context=u,r=l):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return w7(e,t,n,r,s,i)}function w7(e,t,n,r,i,s){Mbe(e,t);var o=(t.flags&128)!==0;if(!r&&!o)return i&&Toe(t,n,!1),xm(e,t,s);r=t.stateNode,A7e.current=t;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&o?(t.child=qE(t,e.child,null,s),t.child=qE(t,null,a,s)):ja(e,t,a,s),t.memoizedState=r.state,i&&Toe(t,n,!0),t.child}function Lbe(e){var t=e.stateNode;t.pendingContext?Soe(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Soe(e,t.context,!1),uG(e,t.containerInfo)}function Uoe(e,t,n,r,i){return HE(),nG(i),t.flags|=256,ja(e,t,n,r),t.child}var E7={dehydrated:null,treeContext:null,retryLane:0};function x7(e){return{baseLanes:e,cachePool:null,transitions:null}}function Fbe(e,t,n){var r=t.pendingProps,i=$i.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(i&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),ii($i,i&1),e===null)return m7(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=r.children,e=r.fallback,s?(r=t.mode,s=t.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=GL(o,r,0,null),e=M1(e,r,n,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=x7(n),t.memoizedState=E7,e):gG(t,o));if(i=e.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return C7e(e,t,o,r,a,i,n);if(s){s=r.fallback,o=t.mode,i=e.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&t.child!==i?(r=t.child,r.childLanes=0,r.pendingProps=u,t.deletions=null):(r=I0(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=I0(a,s):(s=M1(s,o,n,null),s.flags|=2),s.return=t,r.return=t,r.sibling=s,t.child=r,r=s,s=t.child,o=e.child.memoizedState,o=o===null?x7(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~n,t.memoizedState=E7,r}return s=e.child,e=s.sibling,r=I0(s,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function gG(e,t){return t=GL({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function jN(e,t,n,r){return r!==null&&nG(r),qE(t,e.child,null,n),e=gG(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function C7e(e,t,n,r,i,s,o){if(n)return t.flags&256?(t.flags&=-257,r=a8(Error(tt(422))),jN(e,t,o,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=r.fallback,i=t.mode,r=GL({mode:"visible",children:r.children},i,0,null),s=M1(s,i,o,null),s.flags|=2,r.return=t,s.return=t,r.sibling=s,t.child=r,t.mode&1&&qE(t,e.child,null,o),t.child.memoizedState=x7(o),t.memoizedState=E7,s);if(!(t.mode&1))return jN(e,t,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(tt(419)),r=a8(s,r,void 0),jN(e,t,o,r)}if(a=(o&e.childLanes)!==0,Lu||a){if(r=ho,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Em(e,i),Vf(r,e,i,-1))}return EG(),r=a8(Error(tt(421))),jN(e,t,o,r)}return i.data==="$?"?(t.flags|=128,t.child=e.child,t=B7e.bind(null,e),i._reactRetry=t,null):(e=s.treeContext,Al=S0(i.nextSibling),Dl=t,Ti=!0,Tf=null,e!==null&&(vc[bc++]=Gp,vc[bc++]=Yp,vc[bc++]=Z1,Gp=e.id,Yp=e.overflow,Z1=t),t=gG(t,r.children),t.flags|=4096,t)}function zoe(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),g7(e.return,t,n)}function u8(e,t,n,r,i){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function jbe(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(ja(e,t,r.children,n),r=$i.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&zoe(e,n,t);else if(e.tag===19)zoe(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(ii($i,r),!(t.mode&1))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;n!==null;)e=n.alternate,e!==null&&s$(e)===null&&(i=n),n=n.sibling;n=i,n===null?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),u8(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;i!==null;){if(e=i.alternate,e!==null&&s$(e)===null){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}u8(t,!0,n,null,s);break;case"together":u8(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function TO(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function xm(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),tb|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(tt(153));if(t.child!==null){for(e=t.child,n=I0(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=I0(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function I7e(e,t,n){switch(t.tag){case 3:Lbe(t),HE();break;case 5:fbe(t);break;case 1:Hu(t.type)&&ZD(t);break;case 4:uG(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;ii(n$,r._currentValue),r._currentValue=i;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(ii($i,$i.current&1),t.flags|=128,null):n&t.child.childLanes?Fbe(e,t,n):(ii($i,$i.current&1),e=xm(e,t,n),e!==null?e.sibling:null);ii($i,$i.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return jbe(e,t,n);t.flags|=128}if(i=t.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ii($i,$i.current),r)break;return null;case 22:case 23:return t.lanes=0,$be(e,t,n)}return xm(e,t,n)}var Bbe,S7,Ube,zbe;Bbe=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};S7=function(){};Ube=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,g1(fh.current);var s=null;switch(n){case"input":i=WU(e,i),r=WU(e,r),s=[];break;case"select":i=Li({},i,{value:void 0}),r=Li({},r,{value:void 0}),s=[];break;case"textarea":i=KU(e,i),r=KU(e,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=QD)}QU(n,r);var o;n=null;for(l in i)if(!r.hasOwnProperty(l)&&i.hasOwnProperty(l)&&i[l]!=null)if(l==="style"){var a=i[l];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else l!=="dangerouslySetInnerHTML"&&l!=="children"&&l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&l!=="autoFocus"&&(I2.hasOwnProperty(l)?s||(s=[]):(s=s||[]).push(l,null));for(l in r){var u=r[l];if(a=i!=null?i[l]:void 0,r.hasOwnProperty(l)&&u!==a&&(u!=null||a!=null))if(l==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(l,n)),n=u;else l==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(l,u)):l==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(l,""+u):l!=="suppressContentEditableWarning"&&l!=="suppressHydrationWarning"&&(I2.hasOwnProperty(l)?(u!=null&&l==="onScroll"&&ai("scroll",e),s||a===u||(s=[])):(s=s||[]).push(l,u))}n&&(s=s||[]).push("style",n);var l=s;(t.updateQueue=l)&&(t.flags|=4)}};zbe=function(e,t,n,r){n!==r&&(t.flags|=4)};function FT(e,t){if(!Ti)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Jo(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function k7e(e,t,n){var r=t.pendingProps;switch(tG(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Jo(t),null;case 1:return Hu(t.type)&&JD(),Jo(t),null;case 3:return r=t.stateNode,WE(),hi(Vu),hi(Ea),cG(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(LN(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,Tf!==null&&(P7(Tf),Tf=null))),S7(e,t),Jo(t),null;case 5:lG(t);var i=g1(B2.current);if(n=t.type,e!==null&&t.stateNode!=null)Ube(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(tt(166));return Jo(t),null}if(e=g1(fh.current),LN(t)){r=t.stateNode,n=t.type;var s=t.memoizedProps;switch(r[Vd]=t,r[F2]=s,e=(t.mode&1)!==0,n){case"dialog":ai("cancel",r),ai("close",r);break;case"iframe":case"object":case"embed":ai("load",r);break;case"video":case"audio":for(i=0;i<$A.length;i++)ai($A[i],r);break;case"source":ai("error",r);break;case"img":case"image":case"link":ai("error",r),ai("load",r);break;case"details":ai("toggle",r);break;case"input":Qse(r,s),ai("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},ai("invalid",r);break;case"textarea":Zse(r,s),ai("invalid",r)}QU(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&MN(r.textContent,a,e),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&MN(r.textContent,a,e),i=["children",""+a]):I2.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ai("scroll",r)}switch(n){case"input":IN(r),Jse(r,s,!0);break;case"textarea":IN(r),eoe(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=QD)}r=i,t.updateQueue=r,r!==null&&(t.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=g1e(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),n==="select"&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[Vd]=t,e[F2]=r,Bbe(e,t,!1,!1),t.stateNode=e;e:{switch(o=JU(n,r),n){case"dialog":ai("cancel",e),ai("close",e),i=r;break;case"iframe":case"object":case"embed":ai("load",e),i=r;break;case"video":case"audio":for(i=0;i<$A.length;i++)ai($A[i],e);i=r;break;case"source":ai("error",e),i=r;break;case"img":case"image":case"link":ai("error",e),ai("load",e),i=r;break;case"details":ai("toggle",e),i=r;break;case"input":Qse(e,r),i=WU(e,r),ai("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Li({},r,{value:void 0}),ai("invalid",e);break;case"textarea":Zse(e,r),i=KU(e,r),ai("invalid",e);break;default:i=r}QU(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?b1e(e,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&y1e(e,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&k2(e,u):typeof u=="number"&&k2(e,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(I2.hasOwnProperty(s)?u!=null&&s==="onScroll"&&ai("scroll",e):u!=null&&BW(e,s,u,o))}switch(n){case"input":IN(e),Jse(e,r,!1);break;case"textarea":IN(e),eoe(e);break;case"option":r.value!=null&&e.setAttribute("value",""+G0(r.value));break;case"select":e.multiple=!!r.multiple,s=r.value,s!=null?tE(e,!!r.multiple,s,!1):r.defaultValue!=null&&tE(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=QD)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Jo(t),null;case 6:if(e&&t.stateNode!=null)zbe(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(tt(166));if(n=g1(B2.current),g1(fh.current),LN(t)){if(r=t.stateNode,n=t.memoizedProps,r[Vd]=t,(s=r.nodeValue!==n)&&(e=Dl,e!==null))switch(e.tag){case 3:MN(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&MN(r.nodeValue,n,(e.mode&1)!==0)}s&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Vd]=t,t.stateNode=r}return Jo(t),null;case 13:if(hi($i),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Ti&&Al!==null&&t.mode&1&&!(t.flags&128))obe(),HE(),t.flags|=98560,s=!1;else if(s=LN(t),r!==null&&r.dehydrated!==null){if(e===null){if(!s)throw Error(tt(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(tt(317));s[Vd]=t}else HE(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Jo(t),s=!1}else Tf!==null&&(P7(Tf),Tf=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||$i.current&1?Ls===0&&(Ls=3):EG())),t.updateQueue!==null&&(t.flags|=4),Jo(t),null);case 4:return WE(),S7(e,t),e===null&&M2(t.stateNode.containerInfo),Jo(t),null;case 10:return sG(t.type._context),Jo(t),null;case 17:return Hu(t.type)&&JD(),Jo(t),null;case 19:if(hi($i),s=t.memoizedState,s===null)return Jo(t),null;if(r=(t.flags&128)!==0,o=s.rendering,o===null)if(r)FT(s,!1);else{if(Ls!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=s$(e),o!==null){for(t.flags|=128,FT(s,!1),r=o.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)s=n,e=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return ii($i,$i.current&1|2),t.child}e=e.sibling}s.tail!==null&&ls()>YE&&(t.flags|=128,r=!0,FT(s,!1),t.lanes=4194304)}else{if(!r)if(e=s$(o),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),FT(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Ti)return Jo(t),null}else 2*ls()-s.renderingStartTime>YE&&n!==1073741824&&(t.flags|=128,r=!0,FT(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(n=s.last,n!==null?n.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=ls(),t.sibling=null,n=$i.current,ii($i,r?n&1|2:n&1),t):(Jo(t),null);case 22:case 23:return wG(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?bl&1073741824&&(Jo(t),t.subtreeFlags&6&&(t.flags|=8192)):Jo(t),null;case 24:return null;case 25:return null}throw Error(tt(156,t.tag))}function R7e(e,t){switch(tG(t),t.tag){case 1:return Hu(t.type)&&JD(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return WE(),hi(Vu),hi(Ea),cG(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return lG(t),null;case 13:if(hi($i),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(tt(340));HE()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return hi($i),null;case 4:return WE(),null;case 10:return sG(t.type._context),null;case 22:case 23:return wG(),null;case 24:return null;default:return null}}var BN=!1,ca=!1,N7e=typeof WeakSet=="function"?WeakSet:Set,St=null;function jw(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wi(e,t,r)}else n.current=null}function T7(e,t,n){try{n()}catch(r){Wi(e,t,r)}}var Voe=!1;function P7e(e,t){if(u7=YD,e=G1e(),ZW(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,l=0,c=0,f=e,d=null;t:for(;;){for(var h;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(h=f.firstChild)!==null;)d=f,f=h;for(;;){if(f===e)break t;if(d===n&&++l===i&&(a=o),d===s&&++c===r&&(u=o),(h=f.nextSibling)!==null)break;f=d,d=f.parentNode}f=h}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(l7={focusedElem:e,selectionRange:n},YD=!1,St=t;St!==null;)if(t=St,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,St=e;else for(;St!==null;){t=St;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,g=p.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?m:bf(t.type,m),g);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(tt(163))}}catch(w){Wi(t,t.return,w)}if(e=t.sibling,e!==null){e.return=t.return,St=e;break}St=t.return}return p=Voe,Voe=!1,p}function OC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,s!==void 0&&T7(t,n,s)}i=i.next}while(i!==r)}}function qL(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function A7(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Vbe(e){var t=e.alternate;t!==null&&(e.alternate=null,Vbe(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Vd],delete t[F2],delete t[d7],delete t[p7e],delete t[m7e])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Hbe(e){return e.tag===5||e.tag===3||e.tag===4}function Hoe(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Hbe(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function C7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=QD));else if(r!==4&&(e=e.child,e!==null))for(C7(e,t,n),e=e.sibling;e!==null;)C7(e,t,n),e=e.sibling}function I7(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(I7(e,t,n),e=e.sibling;e!==null;)I7(e,t,n),e=e.sibling}var Co=null,wf=!1;function Tg(e,t,n){for(n=n.child;n!==null;)qbe(e,t,n),n=n.sibling}function qbe(e,t,n){if(ch&&typeof ch.onCommitFiberUnmount=="function")try{ch.onCommitFiberUnmount(LL,n)}catch{}switch(n.tag){case 5:ca||jw(n,t);case 6:var r=Co,i=wf;Co=null,Tg(e,t,n),Co=r,wf=i,Co!==null&&(wf?(e=Co,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Co.removeChild(n.stateNode));break;case 18:Co!==null&&(wf?(e=Co,n=n.stateNode,e.nodeType===8?t8(e.parentNode,n):e.nodeType===1&&t8(e,n),O2(e)):t8(Co,n.stateNode));break;case 4:r=Co,i=wf,Co=n.stateNode.containerInfo,wf=!0,Tg(e,t,n),Co=r,wf=i;break;case 0:case 11:case 14:case 15:if(!ca&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&T7(n,t,o),i=i.next}while(i!==r)}Tg(e,t,n);break;case 1:if(!ca&&(jw(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Wi(n,t,a)}Tg(e,t,n);break;case 21:Tg(e,t,n);break;case 22:n.mode&1?(ca=(r=ca)||n.memoizedState!==null,Tg(e,t,n),ca=r):Tg(e,t,n);break;default:Tg(e,t,n)}}function qoe(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new N7e),t.forEach(function(r){var i=U7e.bind(null,e,r);n.has(r)||(n.add(r),r.then(i,i))})}}function lf(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=e,o=t,a=o;e:for(;a!==null;){switch(a.tag){case 5:Co=a.stateNode,wf=!1;break e;case 3:Co=a.stateNode.containerInfo,wf=!0;break e;case 4:Co=a.stateNode.containerInfo,wf=!0;break e}a=a.return}if(Co===null)throw Error(tt(160));qbe(s,o,i),Co=null,wf=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(l){Wi(i,t,l)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Wbe(t,e),t=t.sibling}function Wbe(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(lf(t,e),Td(e),r&4){try{OC(3,e,e.return),qL(3,e)}catch(m){Wi(e,e.return,m)}try{OC(5,e,e.return)}catch(m){Wi(e,e.return,m)}}break;case 1:lf(t,e),Td(e),r&512&&n!==null&&jw(n,n.return);break;case 5:if(lf(t,e),Td(e),r&512&&n!==null&&jw(n,n.return),e.flags&32){var i=e.stateNode;try{k2(i,"")}catch(m){Wi(e,e.return,m)}}if(r&4&&(i=e.stateNode,i!=null)){var s=e.memoizedProps,o=n!==null?n.memoizedProps:s,a=e.type,u=e.updateQueue;if(e.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&p1e(i,s),JU(a,o);var l=JU(a,s);for(o=0;o<u.length;o+=2){var c=u[o],f=u[o+1];c==="style"?b1e(i,f):c==="dangerouslySetInnerHTML"?y1e(i,f):c==="children"?k2(i,f):BW(i,c,f,l)}switch(a){case"input":GU(i,s);break;case"textarea":m1e(i,s);break;case"select":var d=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var h=s.value;h!=null?tE(i,!!s.multiple,h,!1):d!==!!s.multiple&&(s.defaultValue!=null?tE(i,!!s.multiple,s.defaultValue,!0):tE(i,!!s.multiple,s.multiple?[]:"",!1))}i[F2]=s}catch(m){Wi(e,e.return,m)}}break;case 6:if(lf(t,e),Td(e),r&4){if(e.stateNode===null)throw Error(tt(162));i=e.stateNode,s=e.memoizedProps;try{i.nodeValue=s}catch(m){Wi(e,e.return,m)}}break;case 3:if(lf(t,e),Td(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{O2(t.containerInfo)}catch(m){Wi(e,e.return,m)}break;case 4:lf(t,e),Td(e);break;case 13:lf(t,e),Td(e),i=e.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bG=ls())),r&4&&qoe(e);break;case 22:if(c=n!==null&&n.memoizedState!==null,e.mode&1?(ca=(l=ca)||c,lf(t,e),ca=l):lf(t,e),Td(e),r&8192){if(l=e.memoizedState!==null,(e.stateNode.isHidden=l)&&!c&&e.mode&1)for(St=e,c=e.child;c!==null;){for(f=St=c;St!==null;){switch(d=St,h=d.child,d.tag){case 0:case 11:case 14:case 15:OC(4,d,d.return);break;case 1:jw(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){r=d,n=d.return;try{t=r,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(m){Wi(r,n,m)}}break;case 5:jw(d,d.return);break;case 22:if(d.memoizedState!==null){Goe(f);continue}}h!==null?(h.return=d,St=h):Goe(f)}c=c.sibling}e:for(c=null,f=e;;){if(f.tag===5){if(c===null){c=f;try{i=f.stateNode,l?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=v1e("display",o))}catch(m){Wi(e,e.return,m)}}}else if(f.tag===6){if(c===null)try{f.stateNode.nodeValue=l?"":f.memoizedProps}catch(m){Wi(e,e.return,m)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===e)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;f.sibling===null;){if(f.return===null||f.return===e)break e;c===f&&(c=null),f=f.return}c===f&&(c=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:lf(t,e),Td(e),r&4&&qoe(e);break;case 21:break;default:lf(t,e),Td(e)}}function Td(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(Hbe(n)){var r=n;break e}n=n.return}throw Error(tt(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(k2(i,""),r.flags&=-33);var s=Hoe(e);I7(e,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Hoe(e);C7(e,a,o);break;default:throw Error(tt(161))}}catch(u){Wi(e,e.return,u)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function O7e(e,t,n){St=e,Gbe(e)}function Gbe(e,t,n){for(var r=(e.mode&1)!==0;St!==null;){var i=St,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||BN;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||ca;a=BN;var l=ca;if(BN=o,(ca=u)&&!l)for(St=i;St!==null;)o=St,u=o.child,o.tag===22&&o.memoizedState!==null?Yoe(i):u!==null?(u.return=o,St=u):Yoe(i);for(;s!==null;)St=s,Gbe(s),s=s.sibling;St=i,BN=a,ca=l}Woe(e)}else i.subtreeFlags&8772&&s!==null?(s.return=i,St=s):Woe(e)}}function Woe(e){for(;St!==null;){var t=St;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ca||qL(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!ca)if(n===null)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:bf(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&Roe(t,s,r);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Roe(t,o,n)}break;case 5:var a=t.stateNode;if(n===null&&t.flags&4){n=a;var u=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var l=t.alternate;if(l!==null){var c=l.memoizedState;if(c!==null){var f=c.dehydrated;f!==null&&O2(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(tt(163))}ca||t.flags&512&&A7(t)}catch(d){Wi(t,t.return,d)}}if(t===e){St=null;break}if(n=t.sibling,n!==null){n.return=t.return,St=n;break}St=t.return}}function Goe(e){for(;St!==null;){var t=St;if(t===e){St=null;break}var n=t.sibling;if(n!==null){n.return=t.return,St=n;break}St=t.return}}function Yoe(e){for(;St!==null;){var t=St;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{qL(4,t)}catch(u){Wi(t,n,u)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var i=t.return;try{r.componentDidMount()}catch(u){Wi(t,i,u)}}var s=t.return;try{A7(t)}catch(u){Wi(t,s,u)}break;case 5:var o=t.return;try{A7(t)}catch(u){Wi(t,o,u)}}}catch(u){Wi(t,t.return,u)}if(t===e){St=null;break}var a=t.sibling;if(a!==null){a.return=t.return,St=a;break}St=t.return}}var D7e=Math.ceil,u$=Qm.ReactCurrentDispatcher,yG=Qm.ReactCurrentOwner,Pc=Qm.ReactCurrentBatchConfig,cr=0,ho=null,xs=null,$o=0,bl=0,Bw=Fy(0),Ls=0,H2=null,tb=0,WL=0,vG=0,DC=null,ku=null,bG=0,YE=1/0,Rp=null,l$=!1,k7=null,A0=null,UN=!1,o0=null,c$=0,$C=0,R7=null,AO=-1,CO=0;function Xa(){return cr&6?ls():AO!==-1?AO:AO=ls()}function C0(e){return e.mode&1?cr&2&&$o!==0?$o&-$o:y7e.transition!==null?(CO===0&&(CO=N1e()),CO):(e=Mr,e!==0||(e=window.event,e=e===void 0?16:F1e(e.type)),e):1}function Vf(e,t,n,r){if(50<$C)throw $C=0,R7=null,Error(tt(185));bk(e,n,r),(!(cr&2)||e!==ho)&&(e===ho&&(!(cr&2)&&(WL|=n),Ls===4&&Xg(e,$o)),qu(e,r),n===1&&cr===0&&!(t.mode&1)&&(YE=ls()+500,zL&&jy()))}function qu(e,t){var n=e.callbackNode;yUe(e,t);var r=GD(e,e===ho?$o:0);if(r===0)n!==null&&roe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&roe(n),t===1)e.tag===0?g7e(Koe.bind(null,e)):rbe(Koe.bind(null,e)),d7e(function(){!(cr&6)&&jy()}),n=null;else{switch(P1e(r)){case 1:n=qW;break;case 4:n=k1e;break;case 16:n=WD;break;case 536870912:n=R1e;break;default:n=WD}n=t_e(n,Ybe.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Ybe(e,t){if(AO=-1,CO=0,cr&6)throw Error(tt(327));var n=e.callbackNode;if(oE()&&e.callbackNode!==n)return null;var r=GD(e,e===ho?$o:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=f$(e,r);else{t=r;var i=cr;cr|=2;var s=Xbe();(ho!==e||$o!==t)&&(Rp=null,YE=ls()+500,$1(e,t));do try{L7e();break}catch(a){Kbe(e,a)}while(!0);iG(),u$.current=s,cr=i,xs!==null?t=0:(ho=null,$o=0,t=Ls)}if(t!==0){if(t===2&&(i=r7(e),i!==0&&(r=i,t=N7(e,i))),t===1)throw n=H2,$1(e,0),Xg(e,r),qu(e,ls()),n;if(t===6)Xg(e,r);else{if(i=e.current.alternate,!(r&30)&&!$7e(i)&&(t=f$(e,r),t===2&&(s=r7(e),s!==0&&(r=s,t=N7(e,s))),t===1))throw n=H2,$1(e,0),Xg(e,r),qu(e,ls()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(tt(345));case 2:jv(e,ku,Rp);break;case 3:if(Xg(e,r),(r&130023424)===r&&(t=bG+500-ls(),10<t)){if(GD(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){Xa(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=f7(jv.bind(null,e,ku,Rp),t);break}jv(e,ku,Rp);break;case 4:if(Xg(e,r),(r&4194240)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-zf(r);s=1<<o,o=t[o],o>i&&(i=o),r&=~s}if(r=i,r=ls()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*D7e(r/1960))-r,10<r){e.timeoutHandle=f7(jv.bind(null,e,ku,Rp),r);break}jv(e,ku,Rp);break;case 5:jv(e,ku,Rp);break;default:throw Error(tt(329))}}}return qu(e,ls()),e.callbackNode===n?Ybe.bind(null,e):null}function N7(e,t){var n=DC;return e.current.memoizedState.isDehydrated&&($1(e,t).flags|=256),e=f$(e,t),e!==2&&(t=ku,ku=n,t!==null&&P7(t)),e}function P7(e){ku===null?ku=e:ku.push.apply(ku,e)}function $7e(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Xf(s(),i))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Xg(e,t){for(t&=~vG,t&=~WL,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-zf(t),r=1<<n;e[n]=-1,t&=~r}}function Koe(e){if(cr&6)throw Error(tt(327));oE();var t=GD(e,0);if(!(t&1))return qu(e,ls()),null;var n=f$(e,t);if(e.tag!==0&&n===2){var r=r7(e);r!==0&&(t=r,n=N7(e,r))}if(n===1)throw n=H2,$1(e,0),Xg(e,t),qu(e,ls()),n;if(n===6)throw Error(tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,jv(e,ku,Rp),qu(e,ls()),null}function _G(e,t){var n=cr;cr|=1;try{return e(t)}finally{cr=n,cr===0&&(YE=ls()+500,zL&&jy())}}function nb(e){o0!==null&&o0.tag===0&&!(cr&6)&&oE();var t=cr;cr|=1;var n=Pc.transition,r=Mr;try{if(Pc.transition=null,Mr=1,e)return e()}finally{Mr=r,Pc.transition=n,cr=t,!(cr&6)&&jy()}}function wG(){bl=Bw.current,hi(Bw)}function $1(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,f7e(n)),xs!==null)for(n=xs.return;n!==null;){var r=n;switch(tG(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&JD();break;case 3:WE(),hi(Vu),hi(Ea),cG();break;case 5:lG(r);break;case 4:WE();break;case 13:hi($i);break;case 19:hi($i);break;case 10:sG(r.type._context);break;case 22:case 23:wG()}n=n.return}if(ho=e,xs=e=I0(e.current,null),$o=bl=t,Ls=0,H2=null,vG=WL=tb=0,ku=DC=null,m1!==null){for(t=0;t<m1.length;t++)if(n=m1[t],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}m1=null}return e}function Kbe(e,t){do{var n=xs;try{if(iG(),xO.current=a$,o$){for(var r=Mi.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}o$=!1}if(eb=0,eo=Ns=Mi=null,PC=!1,U2=0,yG.current=null,n===null||n.return===null){Ls=1,H2=t,xs=null;break}e:{var s=e,o=n.return,a=n,u=t;if(t=$o,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var l=u,c=a,f=c.tag;if(!(c.mode&1)&&(f===0||f===11||f===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var h=Moe(o);if(h!==null){h.flags&=-257,Loe(h,o,a,s,t),h.mode&1&&$oe(s,l,t),t=h,u=l;var p=t.updateQueue;if(p===null){var m=new Set;m.add(u),t.updateQueue=m}else p.add(u);break e}else{if(!(t&1)){$oe(s,l,t),EG();break e}u=Error(tt(426))}}else if(Ti&&a.mode&1){var g=Moe(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Loe(g,o,a,s,t),nG(GE(u,a));break e}}s=u=GE(u,a),Ls!==4&&(Ls=2),DC===null?DC=[s]:DC.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var y=Pbe(s,u,t);koe(s,y);break e;case 1:a=u;var v=s.type,b=s.stateNode;if(!(s.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(A0===null||!A0.has(b)))){s.flags|=65536,t&=-t,s.lanes|=t;var w=Obe(s,a,t);koe(s,w);break e}}s=s.return}while(s!==null)}Jbe(n)}catch(E){t=E,xs===n&&n!==null&&(xs=n=n.return);continue}break}while(!0)}function Xbe(){var e=u$.current;return u$.current=a$,e===null?a$:e}function EG(){(Ls===0||Ls===3||Ls===2)&&(Ls=4),ho===null||!(tb&268435455)&&!(WL&268435455)||Xg(ho,$o)}function f$(e,t){var n=cr;cr|=2;var r=Xbe();(ho!==e||$o!==t)&&(Rp=null,$1(e,t));do try{M7e();break}catch(i){Kbe(e,i)}while(!0);if(iG(),cr=n,u$.current=r,xs!==null)throw Error(tt(261));return ho=null,$o=0,Ls}function M7e(){for(;xs!==null;)Qbe(xs)}function L7e(){for(;xs!==null&&!uUe();)Qbe(xs)}function Qbe(e){var t=e_e(e.alternate,e,bl);e.memoizedProps=e.pendingProps,t===null?Jbe(e):xs=t,yG.current=null}function Jbe(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=R7e(n,t),n!==null){n.flags&=32767,xs=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Ls=6,xs=null;return}}else if(n=k7e(n,t,bl),n!==null){xs=n;return}if(t=t.sibling,t!==null){xs=t;return}xs=t=e}while(t!==null);Ls===0&&(Ls=5)}function jv(e,t,n){var r=Mr,i=Pc.transition;try{Pc.transition=null,Mr=1,F7e(e,t,n,r)}finally{Pc.transition=i,Mr=r}return null}function F7e(e,t,n,r){do oE();while(o0!==null);if(cr&6)throw Error(tt(327));n=e.finishedWork;var i=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(tt(177));e.callbackNode=null,e.callbackPriority=0;var s=n.lanes|n.childLanes;if(vUe(e,s),e===ho&&(xs=ho=null,$o=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||UN||(UN=!0,t_e(WD,function(){return oE(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Pc.transition,Pc.transition=null;var o=Mr;Mr=1;var a=cr;cr|=4,yG.current=null,P7e(e,n),Wbe(n,e),i7e(l7),YD=!!u7,l7=u7=null,e.current=n,O7e(n),lUe(),cr=a,Mr=o,Pc.transition=s}else e.current=n;if(UN&&(UN=!1,o0=e,c$=i),s=e.pendingLanes,s===0&&(A0=null),dUe(n.stateNode),qu(e,ls()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(l$)throw l$=!1,e=k7,k7=null,e;return c$&1&&e.tag!==0&&oE(),s=e.pendingLanes,s&1?e===R7?$C++:($C=0,R7=e):$C=0,jy(),null}function oE(){if(o0!==null){var e=P1e(c$),t=Pc.transition,n=Mr;try{if(Pc.transition=null,Mr=16>e?16:e,o0===null)var r=!1;else{if(e=o0,o0=null,c$=0,cr&6)throw Error(tt(331));var i=cr;for(cr|=4,St=e.current;St!==null;){var s=St,o=s.child;if(St.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var l=a[u];for(St=l;St!==null;){var c=St;switch(c.tag){case 0:case 11:case 15:OC(8,c,s)}var f=c.child;if(f!==null)f.return=c,St=f;else for(;St!==null;){c=St;var d=c.sibling,h=c.return;if(Vbe(c),c===l){St=null;break}if(d!==null){d.return=h,St=d;break}St=h}}}var p=s.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var g=m.sibling;m.sibling=null,m=g}while(m!==null)}}St=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,St=o;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:OC(9,s,s.return)}var y=s.sibling;if(y!==null){y.return=s.return,St=y;break e}St=s.return}}var v=e.current;for(St=v;St!==null;){o=St;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,St=b;else e:for(o=v;St!==null;){if(a=St,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qL(9,a)}}catch(E){Wi(a,a.return,E)}if(a===o){St=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,St=w;break e}St=a.return}}if(cr=i,jy(),ch&&typeof ch.onPostCommitFiberRoot=="function")try{ch.onPostCommitFiberRoot(LL,e)}catch{}r=!0}return r}finally{Mr=n,Pc.transition=t}}return!1}function Xoe(e,t,n){t=GE(n,t),t=Pbe(e,t,1),e=T0(e,t,1),t=Xa(),e!==null&&(bk(e,1,t),qu(e,t))}function Wi(e,t,n){if(e.tag===3)Xoe(e,e,n);else for(;t!==null;){if(t.tag===3){Xoe(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(A0===null||!A0.has(r))){e=GE(n,e),e=Obe(t,e,1),t=T0(t,e,1),e=Xa(),t!==null&&(bk(t,1,e),qu(t,e));break}}t=t.return}}function j7e(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=Xa(),e.pingedLanes|=e.suspendedLanes&n,ho===e&&($o&n)===n&&(Ls===4||Ls===3&&($o&130023424)===$o&&500>ls()-bG?$1(e,0):vG|=n),qu(e,t)}function Zbe(e,t){t===0&&(e.mode&1?(t=NN,NN<<=1,!(NN&130023424)&&(NN=4194304)):t=1);var n=Xa();e=Em(e,t),e!==null&&(bk(e,t,n),qu(e,n))}function B7e(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Zbe(e,n)}function U7e(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(tt(314))}r!==null&&r.delete(t),Zbe(e,n)}var e_e;e_e=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Vu.current)Lu=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Lu=!1,I7e(e,t,n);Lu=!!(e.flags&131072)}else Lu=!1,Ti&&t.flags&1048576&&ibe(t,t$,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;TO(e,t),e=t.pendingProps;var i=VE(t,Ea.current);sE(t,n),i=dG(null,t,r,e,i,n);var s=hG();return t.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Hu(r)?(s=!0,ZD(t)):s=!1,t.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,aG(t),i.updater=HL,t.stateNode=i,i._reactInternals=t,v7(t,r,e,n),t=w7(null,t,r,!0,s,n)):(t.tag=0,Ti&&s&&eG(t),ja(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(TO(e,t),e=t.pendingProps,i=r._init,r=i(r._payload),t.type=r,i=t.tag=V7e(r),e=bf(r,e),i){case 0:t=_7(null,t,r,e,n);break e;case 1:t=Boe(null,t,r,e,n);break e;case 11:t=Foe(null,t,r,e,n);break e;case 14:t=joe(null,t,r,bf(r.type,e),n);break e}throw Error(tt(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),_7(e,t,r,i,n);case 1:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),Boe(e,t,r,i,n);case 3:e:{if(Lbe(t),e===null)throw Error(tt(387));r=t.pendingProps,s=t.memoizedState,i=s.element,cbe(e,t),i$(t,r,null,n);var o=t.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){i=GE(Error(tt(423)),t),t=Uoe(e,t,r,n,i);break e}else if(r!==i){i=GE(Error(tt(424)),t),t=Uoe(e,t,r,n,i);break e}else for(Al=S0(t.stateNode.containerInfo.firstChild),Dl=t,Ti=!0,Tf=null,n=ube(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(HE(),r===i){t=xm(e,t,n);break e}ja(e,t,r,n)}t=t.child}return t;case 5:return fbe(t),e===null&&m7(t),r=t.type,i=t.pendingProps,s=e!==null?e.memoizedProps:null,o=i.children,c7(r,i)?o=null:s!==null&&c7(r,s)&&(t.flags|=32),Mbe(e,t),ja(e,t,o,n),t.child;case 6:return e===null&&m7(t),null;case 13:return Fbe(e,t,n);case 4:return uG(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=qE(t,null,r,n):ja(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),Foe(e,t,r,i,n);case 7:return ja(e,t,t.pendingProps,n),t.child;case 8:return ja(e,t,t.pendingProps.children,n),t.child;case 12:return ja(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,s=t.memoizedProps,o=i.value,ii(n$,r._currentValue),r._currentValue=o,s!==null)if(Xf(s.value,o)){if(s.children===i.children&&!Vu.current){t=xm(e,t,n);break e}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=am(-1,n&-n),u.tag=2;var l=s.updateQueue;if(l!==null){l=l.shared;var c=l.pending;c===null?u.next=u:(u.next=c.next,c.next=u),l.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),g7(s.return,n,t),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(tt(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),g7(o,n,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ja(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,sE(t,n),i=$c(i),r=r(i),t.flags|=1,ja(e,t,r,n),t.child;case 14:return r=t.type,i=bf(r,t.pendingProps),i=bf(r.type,i),joe(e,t,r,i,n);case 15:return Dbe(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:bf(r,i),TO(e,t),t.tag=1,Hu(r)?(e=!0,ZD(t)):e=!1,sE(t,n),Nbe(t,r,i),v7(t,r,i,n),w7(null,t,r,!0,e,n);case 19:return jbe(e,t,n);case 22:return $be(e,t,n)}throw Error(tt(156,t.tag))};function t_e(e,t){return I1e(e,t)}function z7e(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cc(e,t,n,r){return new z7e(e,t,n,r)}function xG(e){return e=e.prototype,!(!e||!e.isReactComponent)}function V7e(e){if(typeof e=="function")return xG(e)?1:0;if(e!=null){if(e=e.$$typeof,e===zW)return 11;if(e===VW)return 14}return 2}function I0(e,t){var n=e.alternate;return n===null?(n=Cc(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function IO(e,t,n,r,i,s){var o=2;if(r=e,typeof e=="function")xG(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Rw:return M1(n.children,i,s,t);case UW:o=8,i|=8;break;case zU:return e=Cc(12,n,t,i|2),e.elementType=zU,e.lanes=s,e;case VU:return e=Cc(13,n,t,i),e.elementType=VU,e.lanes=s,e;case HU:return e=Cc(19,n,t,i),e.elementType=HU,e.lanes=s,e;case f1e:return GL(n,i,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case l1e:o=10;break e;case c1e:o=9;break e;case zW:o=11;break e;case VW:o=14;break e;case jg:o=16,r=null;break e}throw Error(tt(130,e==null?e:typeof e,""))}return t=Cc(o,n,t,i),t.elementType=e,t.type=r,t.lanes=s,t}function M1(e,t,n,r){return e=Cc(7,e,r,t),e.lanes=n,e}function GL(e,t,n,r){return e=Cc(22,e,r,t),e.elementType=f1e,e.lanes=n,e.stateNode={isHidden:!1},e}function l8(e,t,n){return e=Cc(6,e,null,t),e.lanes=n,e}function c8(e,t,n){return t=Cc(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function H7e(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hj(0),this.expirationTimes=Hj(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hj(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function SG(e,t,n,r,i,s,o,a,u){return e=new H7e(e,t,n,a,u),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Cc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},aG(s),e}function q7e(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:kw,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function n_e(e){if(!e)return Y0;e=e._reactInternals;e:{if(zb(e)!==e||e.tag!==1)throw Error(tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Hu(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(tt(171))}if(e.tag===1){var n=e.type;if(Hu(n))return nbe(e,n,t)}return t}function r_e(e,t,n,r,i,s,o,a,u){return e=SG(n,r,!0,e,i,s,o,a,u),e.context=n_e(null),n=e.current,r=Xa(),i=C0(n),s=am(r,i),s.callback=t??null,T0(n,s,i),e.current.lanes=i,bk(e,i,r),qu(e,r),e}function YL(e,t,n,r){var i=t.current,s=Xa(),o=C0(i);return n=n_e(n),t.context===null?t.context=n:t.pendingContext=n,t=am(s,o),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=T0(i,t,o),e!==null&&(Vf(e,i,o,s),EO(e,i,o)),o}function d$(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function Qoe(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function TG(e,t){Qoe(e,t),(e=e.alternate)&&Qoe(e,t)}function W7e(){return null}var i_e=typeof reportError=="function"?reportError:function(e){console.error(e)};function AG(e){this._internalRoot=e}KL.prototype.render=AG.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(tt(409));YL(e,t,null,null)};KL.prototype.unmount=AG.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;nb(function(){YL(null,e,null,null)}),t[wm]=null}};function KL(e){this._internalRoot=e}KL.prototype.unstable_scheduleHydration=function(e){if(e){var t=$1e();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Kg.length&&t!==0&&t<Kg[n].priority;n++);Kg.splice(n,0,e),n===0&&L1e(e)}};function CG(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function XL(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function Joe(){}function G7e(e,t,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var l=d$(o);s.call(l)}}var o=r_e(t,r,e,0,null,!1,!1,"",Joe);return e._reactRootContainer=o,e[wm]=o.current,M2(e.nodeType===8?e.parentNode:e),nb(),o}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var l=d$(u);a.call(l)}}var u=SG(e,0,!1,null,null,!1,!1,"",Joe);return e._reactRootContainer=u,e[wm]=u.current,M2(e.nodeType===8?e.parentNode:e),nb(function(){YL(t,u,n,r)}),u}function QL(e,t,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=d$(o);a.call(u)}}YL(t,o,e,i)}else o=G7e(n,t,e,i,r);return d$(o)}O1e=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=DA(t.pendingLanes);n!==0&&(WW(t,n|1),qu(t,ls()),!(cr&6)&&(YE=ls()+500,jy()))}break;case 13:nb(function(){var r=Em(e,1);if(r!==null){var i=Xa();Vf(r,e,1,i)}}),TG(e,1)}};GW=function(e){if(e.tag===13){var t=Em(e,134217728);if(t!==null){var n=Xa();Vf(t,e,134217728,n)}TG(e,134217728)}};D1e=function(e){if(e.tag===13){var t=C0(e),n=Em(e,t);if(n!==null){var r=Xa();Vf(n,e,t,r)}TG(e,t)}};$1e=function(){return Mr};M1e=function(e,t){var n=Mr;try{return Mr=e,t()}finally{Mr=n}};e7=function(e,t,n){switch(t){case"input":if(GU(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=UL(r);if(!i)throw Error(tt(90));h1e(r),GU(r,i)}}}break;case"textarea":m1e(e,n);break;case"select":t=n.value,t!=null&&tE(e,!!n.multiple,t,!1)}};E1e=_G;x1e=nb;var Y7e={usingClientEntryPoint:!1,Events:[wk,Dw,UL,_1e,w1e,_G]},jT={findFiberByHostInstance:p1,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},K7e={bundleType:jT.bundleType,version:jT.version,rendererPackageName:jT.rendererPackageName,rendererConfig:jT.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Qm.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=A1e(e),e===null?null:e.stateNode},findFiberByHostInstance:jT.findFiberByHostInstance||W7e,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var zN=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!zN.isDisabled&&zN.supportsFiber)try{LL=zN.inject(K7e),ch=zN}catch{}}tc.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Y7e;tc.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!CG(t))throw Error(tt(200));return q7e(e,t,null,n)};tc.createRoot=function(e,t){if(!CG(e))throw Error(tt(299));var n=!1,r="",i=i_e;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(i=t.onRecoverableError)),t=SG(e,1,!1,null,null,n,!1,r,i),e[wm]=t.current,M2(e.nodeType===8?e.parentNode:e),new AG(t)};tc.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(tt(188)):(e=Object.keys(e).join(","),Error(tt(268,e)));return e=A1e(t),e=e===null?null:e.stateNode,e};tc.flushSync=function(e){return nb(e)};tc.hydrate=function(e,t,n){if(!XL(t))throw Error(tt(200));return QL(null,e,t,!0,n)};tc.hydrateRoot=function(e,t,n){if(!CG(e))throw Error(tt(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=i_e;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=r_e(t,null,e,1,n??null,i,!1,s,o),e[wm]=t.current,M2(e),r)for(e=0;e<r.length;e++)n=r[e],i=n._getVersion,i=i(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new KL(t)};tc.render=function(e,t,n){if(!XL(t))throw Error(tt(200));return QL(null,e,t,!1,n)};tc.unmountComponentAtNode=function(e){if(!XL(e))throw Error(tt(40));return e._reactRootContainer?(nb(function(){QL(null,null,e,!1,function(){e._reactRootContainer=null,e[wm]=null})}),!0):!1};tc.unstable_batchedUpdates=_G;tc.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!XL(n))throw Error(tt(200));if(e==null||e._reactInternals===void 0)throw Error(tt(38));return QL(e,t,n,!1,r)};tc.version="18.3.1-next-f1338f8080-20240426";function s_e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s_e)}catch(e){console.error(e)}}s_e(),s1e.exports=tc;var xk=s1e.exports;const MA=ec(xk);var Zoe=xk;BU.createRoot=Zoe.createRoot,BU.hydrateRoot=Zoe.hydrateRoot;var Hd=function(){return Hd=Object.assign||function(t){for(var n,r=1,i=arguments.length;r<i;r++){n=arguments[r];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(t[s]=n[s])}return t},Hd.apply(this,arguments)};function By(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}function Bp(e,t,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function a(c){try{l(r.next(c))}catch(f){o(f)}}function u(c){try{l(r.throw(c))}catch(f){o(f)}}function l(c){c.done?s(c.value):i(c.value).then(a,u)}l((r=r.apply(e,t||[])).next())})}function eae(e){var t=typeof Symbol=="function"&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function X7e(e,t,n){if(n||arguments.length===2)for(var r=0,i=t.length,s;r<i;r++)(s||!(r in t))&&(s||(s=Array.prototype.slice.call(t,0,r)),s[r]=t[r]);return e.concat(s||Array.prototype.slice.call(t))}function Kn(e){return this instanceof Kn?(this.v=e,this):new Kn(e)}function y1(e,t,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var r=n.apply(e,t||[]),i,s=[];return i={},a("next"),a("throw"),a("return",o),i[Symbol.asyncIterator]=function(){return this},i;function o(h){return function(p){return Promise.resolve(p).then(h,f)}}function a(h,p){r[h]&&(i[h]=function(m){return new Promise(function(g,y){s.push([h,m,g,y])>1||u(h,m)})},p&&(i[h]=p(i[h])))}function u(h,p){try{l(r[h](p))}catch(m){d(s[0][3],m)}}function l(h){h.value instanceof Kn?Promise.resolve(h.value.v).then(c,f):d(s[0][2],h)}function c(h){u("next",h)}function f(h){u("throw",h)}function d(h,p){h(p),s.shift(),s.length&&u(s[0][0],s[0][1])}}function f8(e){var t,n;return t={},r("next"),r("throw",function(i){throw i}),r("return"),t[Symbol.iterator]=function(){return this},t;function r(i,s){t[i]=e[i]?function(o){return(n=!n)?{value:Kn(e[i](o)),done:!1}:s?s(o):o}:s}}function MC(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],n;return t?t.call(e):(e=typeof eae=="function"?eae(e):e[Symbol.iterator](),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(s){n[s]=e[s]&&function(o){return new Promise(function(a,u){o=e[s](o),i(a,u,o.done,o.value)})}}function i(s,o,a,u){Promise.resolve(u).then(function(l){s({value:l,done:a})},o)}}var kO="right-scroll-bar-position",RO="width-before-scroll-bar",Q7e="with-scroll-bars-hidden",J7e="--removed-body-scroll-bar-size";function d8(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function Z7e(e,t){var n=I.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var i=n.value;i!==r&&(n.value=r,n.callback(r,i))}}}})[0];return n.callback=t,n.facade}var eze=typeof window<"u"?I.useLayoutEffect:I.useEffect,tae=new WeakMap;function tze(e,t){var n=Z7e(null,function(r){return e.forEach(function(i){return d8(i,r)})});return eze(function(){var r=tae.get(n);if(r){var i=new Set(r),s=new Set(e),o=n.current;i.forEach(function(a){s.has(a)||d8(a,null)}),s.forEach(function(a){i.has(a)||d8(a,o)})}tae.set(n,e)},[e]),n}function nze(e){return e}function rze(e,t){t===void 0&&(t=nze);var n=[],r=!1,i={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(s){var o=t(s,r);return n.push(o),function(){n=n.filter(function(a){return a!==o})}},assignSyncMedium:function(s){for(r=!0;n.length;){var o=n;n=[],o.forEach(s)}n={push:function(a){return s(a)},filter:function(){return n}}},assignMedium:function(s){r=!0;var o=[];if(n.length){var a=n;n=[],a.forEach(s),o=n}var u=function(){var c=o;o=[],c.forEach(s)},l=function(){return Promise.resolve().then(u)};l(),n={push:function(c){o.push(c),l()},filter:function(c){return o=o.filter(c),n}}}};return i}function ize(e){e===void 0&&(e={});var t=rze(null);return t.options=Hd({async:!0,ssr:!1},e),t}var o_e=function(e){var t=e.sideCar,n=By(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return I.createElement(r,Hd({},n))};o_e.isSideCarExport=!0;function sze(e,t){return e.useMedium(t),o_e}var a_e=ize(),h8=function(){},JL=I.forwardRef(function(e,t){var n=I.useRef(null),r=I.useState({onScrollCapture:h8,onWheelCapture:h8,onTouchMoveCapture:h8}),i=r[0],s=r[1],o=e.forwardProps,a=e.children,u=e.className,l=e.removeScrollBar,c=e.enabled,f=e.shards,d=e.sideCar,h=e.noIsolation,p=e.inert,m=e.allowPinchZoom,g=e.as,y=g===void 0?"div":g,v=e.gapMode,b=By(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),w=d,E=tze([n,t]),T=Hd(Hd({},b),i);return I.createElement(I.Fragment,null,c&&I.createElement(w,{sideCar:a_e,removeScrollBar:l,shards:f,noIsolation:h,inert:p,setCallbacks:s,allowPinchZoom:!!m,lockRef:n,gapMode:v}),o?I.cloneElement(I.Children.only(a),Hd(Hd({},T),{ref:E})):I.createElement(y,Hd({},T,{className:u,ref:E}),a))});JL.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};JL.classNames={fullWidth:RO,zeroRight:kO};var oze=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function aze(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=oze();return t&&e.setAttribute("nonce",t),e}function uze(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function lze(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var cze=function(){var e=0,t=null;return{add:function(n){e==0&&(t=aze())&&(uze(t,n),lze(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},fze=function(){var e=cze();return function(t,n){I.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},u_e=function(){var e=fze(),t=function(n){var r=n.styles,i=n.dynamic;return e(r,i),null};return t},dze={left:0,top:0,right:0,gap:0},p8=function(e){return parseInt(e||"",10)||0},hze=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],i=t[e==="padding"?"paddingRight":"marginRight"];return[p8(n),p8(r),p8(i)]},pze=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return dze;var t=hze(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},mze=u_e(),aE="data-scroll-locked",gze=function(e,t,n,r){var i=e.left,s=e.top,o=e.right,a=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Q7e,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(a,"px ").concat(r,`;
  }
  body[`).concat(aE,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(i,`px;
    padding-top: `).concat(s,`px;
    padding-right: `).concat(o,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(a,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(a,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(kO,` {
    right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(RO,` {
    margin-right: `).concat(a,"px ").concat(r,`;
  }
  
  .`).concat(kO," .").concat(kO,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(RO," .").concat(RO,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(aE,`] {
    `).concat(J7e,": ").concat(a,`px;
  }
`)},nae=function(){var e=parseInt(document.body.getAttribute(aE)||"0",10);return isFinite(e)?e:0},yze=function(){I.useEffect(function(){return document.body.setAttribute(aE,(nae()+1).toString()),function(){var e=nae()-1;e<=0?document.body.removeAttribute(aE):document.body.setAttribute(aE,e.toString())}},[])},vze=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,i=r===void 0?"margin":r;yze();var s=I.useMemo(function(){return pze(i)},[i]);return I.createElement(mze,{styles:gze(s,!t,i,n?"":"!important")})},O7=!1;if(typeof window<"u")try{var VN=Object.defineProperty({},"passive",{get:function(){return O7=!0,!0}});window.addEventListener("test",VN,VN),window.removeEventListener("test",VN,VN)}catch{O7=!1}var M_=O7?{passive:!1}:!1,bze=function(e){return e.tagName==="TEXTAREA"},l_e=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!bze(e)&&n[t]==="visible")},_ze=function(e){return l_e(e,"overflowY")},wze=function(e){return l_e(e,"overflowX")},rae=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var i=c_e(e,r);if(i){var s=f_e(e,r),o=s[1],a=s[2];if(o>a)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Eze=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},xze=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},c_e=function(e,t){return e==="v"?_ze(t):wze(t)},f_e=function(e,t){return e==="v"?Eze(t):xze(t)},Sze=function(e,t){return e==="h"&&t==="rtl"?-1:1},Tze=function(e,t,n,r,i){var s=Sze(e,window.getComputedStyle(t).direction),o=s*r,a=n.target,u=t.contains(a),l=!1,c=o>0,f=0,d=0;do{var h=f_e(e,a),p=h[0],m=h[1],g=h[2],y=m-g-s*p;(p||y)&&c_e(e,a)&&(f+=y,d+=p),a instanceof ShadowRoot?a=a.host:a=a.parentNode}while(!u&&a!==document.body||u&&(t.contains(a)||t===a));return(c&&(Math.abs(f)<1||!i)||!c&&(Math.abs(d)<1||!i))&&(l=!0),l},HN=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},iae=function(e){return[e.deltaX,e.deltaY]},sae=function(e){return e&&"current"in e?e.current:e},Aze=function(e,t){return e[0]===t[0]&&e[1]===t[1]},Cze=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ize=0,L_=[];function kze(e){var t=I.useRef([]),n=I.useRef([0,0]),r=I.useRef(),i=I.useState(Ize++)[0],s=I.useState(u_e)[0],o=I.useRef(e);I.useEffect(function(){o.current=e},[e]),I.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(i));var m=X7e([e.lockRef.current],(e.shards||[]).map(sae),!0).filter(Boolean);return m.forEach(function(g){return g.classList.add("allow-interactivity-".concat(i))}),function(){document.body.classList.remove("block-interactivity-".concat(i)),m.forEach(function(g){return g.classList.remove("allow-interactivity-".concat(i))})}}},[e.inert,e.lockRef.current,e.shards]);var a=I.useCallback(function(m,g){if("touches"in m&&m.touches.length===2)return!o.current.allowPinchZoom;var y=HN(m),v=n.current,b="deltaX"in m?m.deltaX:v[0]-y[0],w="deltaY"in m?m.deltaY:v[1]-y[1],E,T=m.target,S=Math.abs(b)>Math.abs(w)?"h":"v";if("touches"in m&&S==="h"&&T.type==="range")return!1;var A=rae(S,T);if(!A)return!0;if(A?E=S:(E=S==="v"?"h":"v",A=rae(S,T)),!A)return!1;if(!r.current&&"changedTouches"in m&&(b||w)&&(r.current=E),!E)return!0;var C=r.current||E;return Tze(C,g,m,C==="h"?b:w,!0)},[]),u=I.useCallback(function(m){var g=m;if(!(!L_.length||L_[L_.length-1]!==s)){var y="deltaY"in g?iae(g):HN(g),v=t.current.filter(function(E){return E.name===g.type&&(E.target===g.target||g.target===E.shadowParent)&&Aze(E.delta,y)})[0];if(v&&v.should){g.cancelable&&g.preventDefault();return}if(!v){var b=(o.current.shards||[]).map(sae).filter(Boolean).filter(function(E){return E.contains(g.target)}),w=b.length>0?a(g,b[0]):!o.current.noIsolation;w&&g.cancelable&&g.preventDefault()}}},[]),l=I.useCallback(function(m,g,y,v){var b={name:m,delta:g,target:y,should:v,shadowParent:Rze(y)};t.current.push(b),setTimeout(function(){t.current=t.current.filter(function(w){return w!==b})},1)},[]),c=I.useCallback(function(m){n.current=HN(m),r.current=void 0},[]),f=I.useCallback(function(m){l(m.type,iae(m),m.target,a(m,e.lockRef.current))},[]),d=I.useCallback(function(m){l(m.type,HN(m),m.target,a(m,e.lockRef.current))},[]);I.useEffect(function(){return L_.push(s),e.setCallbacks({onScrollCapture:f,onWheelCapture:f,onTouchMoveCapture:d}),document.addEventListener("wheel",u,M_),document.addEventListener("touchmove",u,M_),document.addEventListener("touchstart",c,M_),function(){L_=L_.filter(function(m){return m!==s}),document.removeEventListener("wheel",u,M_),document.removeEventListener("touchmove",u,M_),document.removeEventListener("touchstart",c,M_)}},[]);var h=e.removeScrollBar,p=e.inert;return I.createElement(I.Fragment,null,p?I.createElement(s,{styles:Cze(i)}):null,h?I.createElement(vze,{gapMode:e.gapMode}):null)}function Rze(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const Nze=sze(a_e,kze);var ZL=I.forwardRef(function(e,t){return I.createElement(JL,Hd({},e,{ref:t,sideCar:Nze}))});ZL.classNames=JL.classNames;function Zr(e){return Object.keys(e)}function m8(e){return e&&typeof e=="object"&&!Array.isArray(e)}function IG(e,t){const n={...e},r=t;return m8(e)&&m8(t)&&Object.keys(t).forEach(i=>{m8(r[i])&&i in e?n[i]=IG(n[i],r[i]):n[i]=r[i]}),n}function Pze(e){return e.replace(/[A-Z]/g,t=>`-${t.toLowerCase()}`)}function Oze(e){var t;return typeof e!="string"||!e.includes("var(--mantine-scale)")?e:(t=e.match(/^calc\((.*?)\)$/))==null?void 0:t[1].split("*")[0].trim()}function q2(e){const t=Oze(e);return typeof t=="number"?t:typeof t=="string"?t.includes("calc")||t.includes("var")?t:t.includes("px")?Number(t.replace("px","")):t.includes("rem")?Number(t.replace("rem",""))*16:t.includes("em")?Number(t.replace("em",""))*16:Number(t):NaN}function g8(e){return e==="0rem"?"0rem":`calc(${e} * var(--mantine-scale))`}function d_e(e,{shouldScale:t=!1}={}){function n(r){if(r===0||r==="0")return`0${e}`;if(typeof r=="number"){const i=`${r/16}${e}`;return t?g8(i):i}if(typeof r=="string"){if(r===""||r.startsWith("calc(")||r.startsWith("clamp(")||r.includes("rgba("))return r;if(r.includes(","))return r.split(",").map(s=>n(s)).join(",");if(r.includes(" "))return r.split(" ").map(s=>n(s)).join(" ");if(r.includes(e))return t?g8(r):r;const i=r.replace("px","");if(!Number.isNaN(Number(i))){const s=`${Number(i)/16}${e}`;return t?g8(s):s}}return r}return n}const Te=d_e("rem",{shouldScale:!0}),h$=d_e("em");function Uy(e){return Object.keys(e).reduce((t,n)=>(e[n]!==void 0&&(t[n]=e[n]),t),{})}function h_e(e){return typeof e=="number"?!0:typeof e=="string"?e.startsWith("calc(")||e.startsWith("var(")||e.includes(" ")&&e.trim()!==""?!0:/[0-9]/.test(e.trim().replace("-","")[0]):!1}function zy(e){return Array.isArray(e)||e===null?!1:typeof e=="object"?e.type!==I.Fragment:!1}function yo(e){const t=I.createContext(null);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>{const i=I.useContext(t);if(i===null)throw new Error(e);return i}]}function cS(e=null){const t=I.createContext(e);return[({children:i,value:s})=>_.jsx(t.Provider,{value:s,children:i}),()=>I.useContext(t)]}function p$(e,t){return n=>{if(typeof n!="string"||n.trim().length===0)throw new Error(t);return`${e}-${n}`}}function m$(e,t){let n=e;for(;(n=n.parentElement)&&!n.matches(t););return n}function Dze(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].disabled)return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].disabled)return r}return e}function $ze(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].disabled)return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].disabled)return r}return e}function Mze(e,t,n){return m$(e,n)===m$(t,n)}function kG({parentSelector:e,siblingSelector:t,onKeyDown:n,loop:r=!0,activateOnFocus:i=!1,dir:s="rtl",orientation:o}){return a=>{var p;n==null||n(a);const u=Array.from(((p=m$(a.currentTarget,e))==null?void 0:p.querySelectorAll(t))||[]).filter(m=>Mze(a.currentTarget,m,e)),l=u.findIndex(m=>a.currentTarget===m),c=$ze(l,u,r),f=Dze(l,u,r),d=s==="rtl"?f:c,h=s==="rtl"?c:f;switch(a.key){case"ArrowRight":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[d].focus(),i&&u[d].click());break}case"ArrowLeft":{o==="horizontal"&&(a.stopPropagation(),a.preventDefault(),u[h].focus(),i&&u[h].click());break}case"ArrowUp":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[f].focus(),i&&u[f].click());break}case"ArrowDown":{o==="vertical"&&(a.stopPropagation(),a.preventDefault(),u[c].focus(),i&&u[c].click());break}case"Home":{a.stopPropagation(),a.preventDefault(),!u[0].disabled&&u[0].focus();break}case"End":{a.stopPropagation(),a.preventDefault();const m=u.length-1;!u[m].disabled&&u[m].focus();break}}}}const Lze={app:100,modal:200,popover:300,overlay:400,max:9999};function rc(e){return Lze[e]}const Fze=()=>{};function jze(e,t={active:!0}){return typeof e!="function"||!t.active?t.onKeyDown||Fze:n=>{var r;n.key==="Escape"&&(e(n),(r=t.onTrigger)==null||r.call(t))}}function tn(e,t="size",n=!0){if(e!==void 0)return h_e(e)?n?Te(e):e:`var(--${t}-${e})`}function fs(e){return tn(e,"mantine-spacing")}function Vr(e){return e===void 0?"var(--mantine-radius-default)":tn(e,"mantine-radius")}function po(e){return tn(e,"mantine-font-size")}function p_e(e){return tn(e,"mantine-line-height",!1)}function RG(e){if(e)return tn(e,"mantine-shadow",!1)}function Kp(e,t){return n=>{e==null||e(n),t==null||t(n)}}function NG(e,t){return e in t.breakpoints?q2(t.breakpoints[e]):q2(e)}function W2(e,t){const n=e.map(r=>({value:r,px:NG(r,t)}));return n.sort((r,i)=>r.px-i.px),n}function Df(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function Bze(e,t,n){var r;return n?Array.from(((r=m$(n,t))==null?void 0:r.querySelectorAll(e))||[]).findIndex(i=>i===n):null}function Uze(){const[e,t]=I.useState(-1);return[e,{setHovered:t,resetHovered:()=>t(-1)}]}function rh(e,t,n){return t===void 0&&n===void 0?e:t!==void 0&&n===void 0?Math.max(e,t):Math.min(t===void 0&&n!==void 0?e:Math.max(e,t),n)}function uE(){return`mantine-${Math.random().toString(36).slice(2,11)}`}function e1(e){const t=I.useRef(e);return I.useEffect(()=>{t.current=e}),I.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}function e6(e,t){const n=e1(e),r=I.useRef(0);return I.useEffect(()=>()=>window.clearTimeout(r.current),[]),I.useCallback((...i)=>{window.clearTimeout(r.current),r.current=window.setTimeout(()=>n(...i),t)},[n,t])}const oae=["mousedown","touchstart"];function zze(e,t,n){const r=I.useRef();return I.useEffect(()=>{const i=s=>{const{target:o}=s??{};if(Array.isArray(n)){const a=(o==null?void 0:o.hasAttribute("data-ignore-outside-clicks"))||!document.body.contains(o)&&o.tagName!=="HTML";n.every(l=>!!l&&!s.composedPath().includes(l))&&!a&&e()}else r.current&&!r.current.contains(o)&&e()};return(t||oae).forEach(s=>document.addEventListener(s,i)),()=>{(t||oae).forEach(s=>document.removeEventListener(s,i))}},[r,e,n]),r}function Vze(e,t){try{return e.addEventListener("change",t),()=>e.removeEventListener("change",t)}catch{return e.addListener(t),()=>e.removeListener(t)}}function Hze(e,t){return typeof window<"u"&&"matchMedia"in window?window.matchMedia(e).matches:!1}function qze(e,t,{getInitialValueInEffect:n}={getInitialValueInEffect:!0}){const[r,i]=I.useState(n?t:Hze(e)),s=I.useRef();return I.useEffect(()=>{if("matchMedia"in window)return s.current=window.matchMedia(e),i(s.current.matches),Vze(s.current,o=>i(o.matches))},[e]),r}const Vb=typeof document<"u"?I.useLayoutEffect:I.useEffect;function kh(e,t){const n=I.useRef(!1);I.useEffect(()=>()=>{n.current=!1},[]),I.useEffect(()=>{if(n.current)return e();n.current=!0},t)}function m_e({opened:e,shouldReturnFocus:t=!0}){const n=I.useRef(),r=()=>{var i;n.current&&"focus"in n.current&&typeof n.current.focus=="function"&&((i=n.current)==null||i.focus({preventScroll:!0}))};return kh(()=>{let i=-1;const s=o=>{o.key==="Tab"&&window.clearTimeout(i)};return document.addEventListener("keydown",s),e?n.current=document.activeElement:t&&(i=window.setTimeout(r,10)),()=>{window.clearTimeout(i),document.removeEventListener("keydown",s)}},[e,t]),r}function Wze(e,t="body > :not(script)"){const n=uE(),r=Array.from(document.querySelectorAll(t)).map(i=>{var u;if((u=i==null?void 0:i.shadowRoot)!=null&&u.contains(e)||i.contains(e))return;const s=i.getAttribute("aria-hidden"),o=i.getAttribute("data-hidden"),a=i.getAttribute("data-focus-id");return i.setAttribute("data-focus-id",n),s===null||s==="false"?i.setAttribute("aria-hidden","true"):!o&&!a&&i.setAttribute("data-hidden",s),{node:i,ariaHidden:o||null}});return()=>{r.forEach(i=>{!i||n!==i.node.getAttribute("data-focus-id")||(i.ariaHidden===null?i.node.removeAttribute("aria-hidden"):i.node.setAttribute("aria-hidden",i.ariaHidden),i.node.removeAttribute("data-focus-id"),i.node.removeAttribute("data-hidden"))})}}const Gze=/input|select|textarea|button|object/,g_e="a, input, select, textarea, button, object, [tabindex]";function Yze(e){return e.style.display==="none"}function Kze(e){if(e.getAttribute("aria-hidden")||e.getAttribute("hidden")||e.getAttribute("type")==="hidden")return!1;let n=e;for(;n&&!(n===document.body||n.nodeType===11);){if(Yze(n))return!1;n=n.parentNode}return!0}function y_e(e){let t=e.getAttribute("tabindex");return t===null&&(t=void 0),parseInt(t,10)}function D7(e){const t=e.nodeName.toLowerCase(),n=!Number.isNaN(y_e(e));return(Gze.test(t)&&!e.disabled||e instanceof HTMLAnchorElement&&e.href||n)&&Kze(e)}function v_e(e){const t=y_e(e);return(Number.isNaN(t)||t>=0)&&D7(e)}function Xze(e){return Array.from(e.querySelectorAll(g_e)).filter(v_e)}function Qze(e,t){const n=Xze(e);if(!n.length){t.preventDefault();return}const r=n[t.shiftKey?0:n.length-1],i=e.getRootNode();let s=r===i.activeElement||e===i.activeElement;const o=i.activeElement;if(o.tagName==="INPUT"&&o.getAttribute("type")==="radio"&&(s=n.filter(c=>c.getAttribute("type")==="radio"&&c.getAttribute("name")===o.getAttribute("name")).includes(r)),!s)return;t.preventDefault();const u=n[t.shiftKey?n.length-1:0];u&&u.focus()}function Jze(e=!0){const t=I.useRef(),n=I.useRef(null),r=s=>{let o=s.querySelector("[data-autofocus]");if(!o){const a=Array.from(s.querySelectorAll(g_e));o=a.find(v_e)||a.find(D7)||null,!o&&D7(s)&&(o=s)}o&&o.focus({preventScroll:!0})},i=I.useCallback(s=>{if(e){if(s===null){n.current&&(n.current(),n.current=null);return}n.current=Wze(s),t.current!==s&&(s?(setTimeout(()=>{s.getRootNode()&&r(s)}),t.current=s):t.current=null)}},[e]);return I.useEffect(()=>{if(!e)return;t.current&&setTimeout(()=>r(t.current));const s=o=>{o.key==="Tab"&&t.current&&Qze(t.current,o)};return document.addEventListener("keydown",s),()=>{document.removeEventListener("keydown",s),n.current&&n.current()}},[e]),i}const Zze=e=>(e+1)%1e6;function eVe(){const[,e]=I.useReducer(Zze,0);return e}const tVe=wr.useId||(()=>{});function nVe(){const e=tVe();return e?`mantine-${e.replace(/:/g,"")}`:""}function Ia(e){const t=nVe(),[n,r]=I.useState(t);return Vb(()=>{r(uE())},[]),typeof e=="string"?e:typeof window>"u"?t:n}function b_e(e,t,n){I.useEffect(()=>(window.addEventListener(e,t,n),()=>window.removeEventListener(e,t,n)),[e,t])}function PG(e,t){typeof e=="function"?e(t):typeof e=="object"&&e!==null&&"current"in e&&(e.current=t)}function __e(...e){return t=>{e.forEach(n=>PG(n,t))}}function gs(...e){return I.useCallback(__e(...e),e)}function w_e(e,t,n="ltr"){const r=I.useRef(null),i=I.useRef(!1),s=I.useRef(!1),o=I.useRef(0),[a,u]=I.useState(!1);return I.useEffect(()=>{i.current=!0},[]),I.useEffect(()=>{var v,b;const l=({x:w,y:E})=>{cancelAnimationFrame(o.current),o.current=requestAnimationFrame(()=>{if(i.current&&r.current){r.current.style.userSelect="none";const T=r.current.getBoundingClientRect();if(T.width&&T.height){const S=rh((w-T.left)/T.width,0,1);e({x:n==="ltr"?S:1-S,y:rh((E-T.top)/T.height,0,1)})}}})},c=()=>{document.addEventListener("mousemove",m),document.addEventListener("mouseup",h),document.addEventListener("touchmove",y),document.addEventListener("touchend",h)},f=()=>{document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",h),document.removeEventListener("touchmove",y),document.removeEventListener("touchend",h)},d=()=>{!s.current&&i.current&&(s.current=!0,typeof(t==null?void 0:t.onScrubStart)=="function"&&t.onScrubStart(),u(!0),c())},h=()=>{s.current&&i.current&&(s.current=!1,u(!1),f(),setTimeout(()=>{typeof(t==null?void 0:t.onScrubEnd)=="function"&&t.onScrubEnd()},0))},p=w=>{d(),w.preventDefault(),m(w)},m=w=>l({x:w.clientX,y:w.clientY}),g=w=>{w.cancelable&&w.preventDefault(),d(),y(w)},y=w=>{w.cancelable&&w.preventDefault(),l({x:w.changedTouches[0].clientX,y:w.changedTouches[0].clientY})};return(v=r.current)==null||v.addEventListener("mousedown",p),(b=r.current)==null||b.addEventListener("touchstart",g,{passive:!1}),()=>{r.current&&(r.current.removeEventListener("mousedown",p),r.current.removeEventListener("touchstart",g))}},[n,e]),{ref:r,active:a}}function As({value:e,defaultValue:t,finalValue:n,onChange:r=()=>{}}){const[i,s]=I.useState(t!==void 0?t:n),o=(a,...u)=>{s(a),r==null||r(a,...u)};return e!==void 0?[e,r,!0]:[i,o,!1]}function t6(e,t){return qze("(prefers-reduced-motion: reduce)",e,t)}const rVe={x:0,y:0,width:0,height:0,top:0,left:0,bottom:0,right:0};function L1(e){const t=I.useRef(0),n=I.useRef(null),[r,i]=I.useState(rVe),s=I.useMemo(()=>typeof window<"u"?new ResizeObserver(o=>{const a=o[0];a&&(cancelAnimationFrame(t.current),t.current=requestAnimationFrame(()=>{n.current&&i(a.contentRect)}))}):null,[]);return I.useEffect(()=>(n.current&&(s==null||s.observe(n.current,e)),()=>{s==null||s.disconnect(),t.current&&cancelAnimationFrame(t.current)}),[n.current]),[n,r]}function iVe(e){const[t,{width:n,height:r}]=L1(e);return{ref:t,width:n,height:r}}function sVe(e){const t=e.toLowerCase().split("+").map(s=>s.trim()),n={alt:t.includes("alt"),ctrl:t.includes("ctrl"),meta:t.includes("meta"),mod:t.includes("mod"),shift:t.includes("shift")},r=["alt","ctrl","meta","shift","mod"],i=t.find(s=>!r.includes(s));return{...n,key:i}}function oVe(e,t){const{alt:n,ctrl:r,meta:i,mod:s,shift:o,key:a}=e,{altKey:u,ctrlKey:l,metaKey:c,shiftKey:f,key:d}=t;if(n!==u)return!1;if(s){if(!l&&!c)return!1}else if(r!==l||i!==c)return!1;return o!==f?!1:!!(a&&(d.toLowerCase()===a.toLowerCase()||t.code.replace("Key","").toLowerCase()===a.toLowerCase()))}function aVe(e){return t=>oVe(sVe(e),t)}function uVe(e){return t=>{const n="nativeEvent"in t?t.nativeEvent:t;e.forEach(([r,i,s={preventDefault:!0}])=>{aVe(r)(n)&&(s.preventDefault&&t.preventDefault(),i(n))})}}function n6(e=!1,t){const{onOpen:n,onClose:r}={},[i,s]=I.useState(e),o=I.useCallback(()=>{s(l=>l||(n==null||n(),!0))},[n]),a=I.useCallback(()=>{s(l=>l&&(r==null||r(),!1))},[r]),u=I.useCallback(()=>{i?a():o()},[a,o,i]);return[i,{open:o,close:a,toggle:u}]}function lVe(e,t,n={autoInvoke:!1}){const r=I.useRef(null),i=I.useCallback((...o)=>{r.current||(r.current=window.setTimeout(()=>{e(o),r.current=null},t))},[t]),s=I.useCallback(()=>{r.current&&(window.clearTimeout(r.current),r.current=null)},[]);return I.useEffect(()=>(n.autoInvoke&&i(),s),[s,i]),{start:i,clear:s}}function cVe(e,t,n){const r=I.useRef(),i=I.useRef(null);return I.useEffect(()=>{const s=typeof n=="function"?n():n;return(s||i.current)&&(r.current=new MutationObserver(e),r.current.observe(s||i.current,t)),()=>{var o;(o=r.current)==null||o.disconnect()}},[e,t]),i}function fVe(){const[e,t]=I.useState(!1);return I.useEffect(()=>t(!0),[]),e}function dVe(e,t){window.dispatchEvent(new CustomEvent(e,{detail:t}))}function hVe(e){function t(r){const i=Object.keys(r).reduce((s,o)=>(s[`${e}:${o}`]=a=>r[o](a.detail),s),{});Vb(()=>(Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s]),window.addEventListener(s,i[s])}),()=>Object.keys(i).forEach(s=>{window.removeEventListener(s,i[s])})),[i])}function n(r){return(...i)=>dVe(`${e}:${String(r)}`,i[0])}return[t,n]}var pVe={};function E_e(){return typeof process<"u"&&pVe?"production":"development"}function x_e(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var i=e.length;for(t=0;t<i;t++)e[t]&&(n=x_e(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function es(){for(var e,t,n=0,r="",i=arguments.length;n<i;n++)(e=arguments[n])&&(t=x_e(e))&&(r&&(r+=" "),r+=t);return r}const mVe={};function gVe(e){const t={};return e.forEach(n=>{Object.entries(n).forEach(([r,i])=>{t[r]?t[r]=es(t[r],i):t[r]=i})}),t}function r6({theme:e,classNames:t,props:n,stylesCtx:r}){const s=(Array.isArray(t)?t:[t]).map(o=>typeof o=="function"?o(e,n,r):o||mVe);return gVe(s)}function g$({theme:e,styles:t,props:n,stylesCtx:r}){return(Array.isArray(t)?t:[t]).reduce((s,o)=>typeof o=="function"?{...s,...o(e,n,r)}:{...s,...o},{})}const S_e=I.createContext(null);function Vy(){const e=I.useContext(S_e);if(!e)throw new Error("[@mantine/core] MantineProvider was not found in tree");return e}function yVe(){return Vy().cssVariablesResolver}function vVe(){return Vy().classNamesPrefix}function OG(){return Vy().getStyleNonce}function bVe(){return Vy().withStaticClasses}function _Ve(){return Vy().headless}function wVe(){var e;return(e=Vy().stylesTransform)==null?void 0:e.sx}function EVe(){var e;return(e=Vy().stylesTransform)==null?void 0:e.styles}function xVe(e){return/^#?([0-9A-F]{3}){1,2}([0-9A-F]{2})?$/i.test(e)}function SVe(e){let t=e.replace("#","");if(t.length===3){const o=t.split("");t=[o[0],o[0],o[1],o[1],o[2],o[2]].join("")}if(t.length===8){const o=parseInt(t.slice(6,8),16)/255;return{r:parseInt(t.slice(0,2),16),g:parseInt(t.slice(2,4),16),b:parseInt(t.slice(4,6),16),a:o}}const n=parseInt(t,16),r=n>>16&255,i=n>>8&255,s=n&255;return{r,g:i,b:s,a:1}}function TVe(e){const[t,n,r,i]=e.replace(/[^0-9,./]/g,"").split(/[/,]/).map(Number);return{r:t,g:n,b:r,a:i||1}}function AVe(e){const t=/^hsla?\(\s*(\d+)\s*,\s*(\d+%)\s*,\s*(\d+%)\s*(,\s*(0?\.\d+|\d+(\.\d+)?))?\s*\)$/i,n=e.match(t);if(!n)return{r:0,g:0,b:0,a:1};const r=parseInt(n[1],10),i=parseInt(n[2],10)/100,s=parseInt(n[3],10)/100,o=n[5]?parseFloat(n[5]):void 0,a=(1-Math.abs(2*s-1))*i,u=r/60,l=a*(1-Math.abs(u%2-1)),c=s-a/2;let f,d,h;return u>=0&&u<1?(f=a,d=l,h=0):u>=1&&u<2?(f=l,d=a,h=0):u>=2&&u<3?(f=0,d=a,h=l):u>=3&&u<4?(f=0,d=l,h=a):u>=4&&u<5?(f=l,d=0,h=a):(f=a,d=0,h=l),{r:Math.round((f+c)*255),g:Math.round((d+c)*255),b:Math.round((h+c)*255),a:o||1}}function DG(e){return xVe(e)?SVe(e):e.startsWith("rgb")?TVe(e):e.startsWith("hsl")?AVe(e):{r:0,g:0,b:0,a:1}}function qN(e,t){if(e.startsWith("var("))return`color-mix(in srgb, ${e}, black ${t*100}%)`;const{r:n,g:r,b:i,a:s}=DG(e),o=1-t,a=u=>Math.round(u*o);return`rgba(${a(n)}, ${a(r)}, ${a(i)}, ${s})`}function G2(e,t){return typeof e.primaryShade=="number"?e.primaryShade:t==="dark"?e.primaryShade.dark:e.primaryShade.light}function y8(e){return e<=.03928?e/12.92:((e+.055)/1.055)**2.4}function CVe(e){const t=e.match(/oklch\((.*?)%\s/);return t?parseFloat(t[1]):null}function IVe(e){if(e.startsWith("oklch("))return(CVe(e)||0)/100;const{r:t,g:n,b:r}=DG(e),i=t/255,s=n/255,o=r/255,a=y8(i),u=y8(s),l=y8(o);return .2126*a+.7152*u+.0722*l}function BT(e,t=.179){return e.startsWith("var(")?!1:IVe(e)>t}function Gh({color:e,theme:t,colorScheme:n}){if(typeof e!="string")throw new Error(`[@mantine/core] Failed to parse color. Expected color to be a string, instead got ${typeof e}`);if(e==="bright")return{color:e,value:n==="dark"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:BT(n==="dark"?t.white:t.black,t.luminanceThreshold),variable:"--mantine-color-bright"};if(e==="dimmed")return{color:e,value:n==="dark"?t.colors.dark[2]:t.colors.gray[7],shade:void 0,isThemeColor:!1,isLight:BT(n==="dark"?t.colors.dark[2]:t.colors.gray[6],t.luminanceThreshold),variable:"--mantine-color-dimmed"};if(e==="white"||e==="black")return{color:e,value:e==="white"?t.white:t.black,shade:void 0,isThemeColor:!1,isLight:BT(e==="white"?t.white:t.black,t.luminanceThreshold),variable:`--mantine-color-${e}`};const[r,i]=e.split("."),s=i?Number(i):void 0,o=r in t.colors;if(o){const a=s!==void 0?t.colors[r][s]:t.colors[r][G2(t,n||"light")];return{color:r,value:a,shade:s,isThemeColor:o,isLight:BT(a,t.luminanceThreshold),variable:i?`--mantine-color-${r}-${s}`:`--mantine-color-${r}-filled`}}return{color:e,value:e,isThemeColor:o,isLight:BT(e,t.luminanceThreshold),shade:s,variable:void 0}}function Lr(e,t){const n=Gh({color:e||t.primaryColor,theme:t});return n.variable?`var(${n.variable})`:e}function $7(e,t){const n={from:(e==null?void 0:e.from)||t.defaultGradient.from,to:(e==null?void 0:e.to)||t.defaultGradient.to,deg:(e==null?void 0:e.deg)||t.defaultGradient.deg||0},r=Lr(n.from,t),i=Lr(n.to,t);return`linear-gradient(${n.deg}deg, ${r} 0%, ${i} 100%)`}function Dd(e,t){if(typeof e!="string"||t>1||t<0)return"rgba(0, 0, 0, 1)";if(e.startsWith("var(")){const s=(1-t)*100;return`color-mix(in srgb, ${e}, transparent ${s}%)`}if(e.startsWith("oklch"))return e.includes("/")?e.replace(/\/\s*[\d.]+\s*\)/,`/ ${t})`):e.replace(")",` / ${t})`);const{r:n,g:r,b:i}=DG(e);return`rgba(${n}, ${r}, ${i}, ${t})`}const F_=Dd,kVe=({color:e,theme:t,variant:n,gradient:r,autoContrast:i})=>{const s=Gh({color:e,theme:t}),o=typeof i=="boolean"?i:t.autoContrast;if(n==="filled"){const a=o&&s.isLight?"var(--mantine-color-black)":"var(--mantine-color-white)";return s.isThemeColor?s.shade===void 0?{background:`var(--mantine-color-${e}-filled)`,hover:`var(--mantine-color-${e}-filled-hover)`,color:a,border:`${Te(1)} solid transparent`}:{background:`var(--mantine-color-${s.color}-${s.shade})`,hover:`var(--mantine-color-${s.color}-${s.shade===9?8:s.shade+1})`,color:a,border:`${Te(1)} solid transparent`}:{background:e,hover:qN(e,.1),color:a,border:`${Te(1)} solid transparent`}}if(n==="light"){if(s.isThemeColor){if(s.shade===void 0)return{background:`var(--mantine-color-${e}-light)`,hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:Dd(a,.1),hover:Dd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:Dd(e,.1),hover:Dd(e,.12),color:e,border:`${Te(1)} solid transparent`}}if(n==="outline")return s.isThemeColor?s.shade===void 0?{background:"transparent",hover:`var(--mantine-color-${e}-outline-hover)`,color:`var(--mantine-color-${e}-outline)`,border:`${Te(1)} solid var(--mantine-color-${e}-outline)`}:{background:"transparent",hover:Dd(t.colors[s.color][s.shade],.05),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid var(--mantine-color-${s.color}-${s.shade})`}:{background:"transparent",hover:Dd(e,.05),color:e,border:`${Te(1)} solid ${e}`};if(n==="subtle"){if(s.isThemeColor){if(s.shade===void 0)return{background:"transparent",hover:`var(--mantine-color-${e}-light-hover)`,color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`};const a=t.colors[s.color][s.shade];return{background:"transparent",hover:Dd(a,.12),color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}}return{background:"transparent",hover:Dd(e,.12),color:e,border:`${Te(1)} solid transparent`}}return n==="transparent"?s.isThemeColor?s.shade===void 0?{background:"transparent",hover:"transparent",color:`var(--mantine-color-${e}-light-color)`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:`var(--mantine-color-${s.color}-${Math.min(s.shade,6)})`,border:`${Te(1)} solid transparent`}:{background:"transparent",hover:"transparent",color:e,border:`${Te(1)} solid transparent`}:n==="white"?s.isThemeColor?s.shade===void 0?{background:"var(--mantine-color-white)",hover:qN(t.white,.01),color:`var(--mantine-color-${e}-filled)`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:qN(t.white,.01),color:`var(--mantine-color-${s.color}-${s.shade})`,border:`${Te(1)} solid transparent`}:{background:"var(--mantine-color-white)",hover:qN(t.white,.01),color:e,border:`${Te(1)} solid transparent`}:n==="gradient"?{background:$7(r,t),hover:$7(r,t),color:"var(--mantine-color-white)",border:"none"}:n==="default"?{background:"var(--mantine-color-default)",hover:"var(--mantine-color-default-hover)",color:"var(--mantine-color-default-color)",border:`${Te(1)} solid var(--mantine-color-default-border)`}:{}},RVe={dark:["#C9C9C9","#b8b8b8","#828282","#696969","#424242","#3b3b3b","#2e2e2e","#242424","#1f1f1f","#141414"],gray:["#f8f9fa","#f1f3f5","#e9ecef","#dee2e6","#ced4da","#adb5bd","#868e96","#495057","#343a40","#212529"],red:["#fff5f5","#ffe3e3","#ffc9c9","#ffa8a8","#ff8787","#ff6b6b","#fa5252","#f03e3e","#e03131","#c92a2a"],pink:["#fff0f6","#ffdeeb","#fcc2d7","#faa2c1","#f783ac","#f06595","#e64980","#d6336c","#c2255c","#a61e4d"],grape:["#f8f0fc","#f3d9fa","#eebefa","#e599f7","#da77f2","#cc5de8","#be4bdb","#ae3ec9","#9c36b5","#862e9c"],violet:["#f3f0ff","#e5dbff","#d0bfff","#b197fc","#9775fa","#845ef7","#7950f2","#7048e8","#6741d9","#5f3dc4"],indigo:["#edf2ff","#dbe4ff","#bac8ff","#91a7ff","#748ffc","#5c7cfa","#4c6ef5","#4263eb","#3b5bdb","#364fc7"],blue:["#e7f5ff","#d0ebff","#a5d8ff","#74c0fc","#4dabf7","#339af0","#228be6","#1c7ed6","#1971c2","#1864ab"],cyan:["#e3fafc","#c5f6fa","#99e9f2","#66d9e8","#3bc9db","#22b8cf","#15aabf","#1098ad","#0c8599","#0b7285"],teal:["#e6fcf5","#c3fae8","#96f2d7","#63e6be","#38d9a9","#20c997","#12b886","#0ca678","#099268","#087f5b"],green:["#ebfbee","#d3f9d8","#b2f2bb","#8ce99a","#69db7c","#51cf66","#40c057","#37b24d","#2f9e44","#2b8a3e"],lime:["#f4fce3","#e9fac8","#d8f5a2","#c0eb75","#a9e34b","#94d82d","#82c91e","#74b816","#66a80f","#5c940d"],yellow:["#fff9db","#fff3bf","#ffec99","#ffe066","#ffd43b","#fcc419","#fab005","#f59f00","#f08c00","#e67700"],orange:["#fff4e6","#ffe8cc","#ffd8a8","#ffc078","#ffa94d","#ff922b","#fd7e14","#f76707","#e8590c","#d9480f"]},aae="-apple-system, BlinkMacSystemFont, Segoe UI, Roboto, Helvetica, Arial, sans-serif, Apple Color Emoji, Segoe UI Emoji",$G={scale:1,fontSmoothing:!0,focusRing:"auto",white:"#fff",black:"#000",colors:RVe,primaryShade:{light:6,dark:8},primaryColor:"blue",variantColorResolver:kVe,autoContrast:!1,luminanceThreshold:.3,fontFamily:aae,fontFamilyMonospace:"ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, Liberation Mono, Courier New, monospace",respectReducedMotion:!1,cursorType:"default",defaultGradient:{from:"blue",to:"cyan",deg:45},defaultRadius:"sm",activeClassName:"mantine-active",focusClassName:"",headings:{fontFamily:aae,fontWeight:"700",textWrap:"wrap",sizes:{h1:{fontSize:Te(34),lineHeight:"1.3"},h2:{fontSize:Te(26),lineHeight:"1.35"},h3:{fontSize:Te(22),lineHeight:"1.4"},h4:{fontSize:Te(18),lineHeight:"1.45"},h5:{fontSize:Te(16),lineHeight:"1.5"},h6:{fontSize:Te(14),lineHeight:"1.5"}}},fontSizes:{xs:Te(12),sm:Te(14),md:Te(16),lg:Te(18),xl:Te(20)},lineHeights:{xs:"1.4",sm:"1.45",md:"1.55",lg:"1.6",xl:"1.65"},radius:{xs:Te(2),sm:Te(4),md:Te(8),lg:Te(16),xl:Te(32)},spacing:{xs:Te(10),sm:Te(12),md:Te(16),lg:Te(20),xl:Te(32)},breakpoints:{xs:"36em",sm:"48em",md:"62em",lg:"75em",xl:"88em"},shadows:{xs:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), 0 ${Te(1)} ${Te(2)} rgba(0, 0, 0, 0.1)`,sm:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(10)} ${Te(15)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(7)} ${Te(7)} ${Te(-5)}`,md:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(20)} ${Te(25)} ${Te(-5)}, rgba(0, 0, 0, 0.04) 0 ${Te(10)} ${Te(10)} ${Te(-5)}`,lg:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(28)} ${Te(23)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(12)} ${Te(12)} ${Te(-7)}`,xl:`0 ${Te(1)} ${Te(3)} rgba(0, 0, 0, 0.05), rgba(0, 0, 0, 0.05) 0 ${Te(36)} ${Te(28)} ${Te(-7)}, rgba(0, 0, 0, 0.04) 0 ${Te(17)} ${Te(17)} ${Te(-7)}`},other:{},components:{}};function uae(e){return e==="auto"||e==="dark"||e==="light"}function NVe({key:e="mantine-color-scheme-value"}={}){let t;return{get:n=>{if(typeof window>"u")return n;try{const r=window.localStorage.getItem(e);return uae(r)?r:n}catch{return n}},set:n=>{try{window.localStorage.setItem(e,n)}catch(r){console.warn("[@mantine/core] Local storage color scheme manager was unable to save color scheme.",r)}},subscribe:n=>{t=r=>{r.storageArea===window.localStorage&&r.key===e&&uae(r.newValue)&&n(r.newValue)},window.addEventListener("storage",t)},unsubscribe:()=>{window.removeEventListener("storage",t)},clear:()=>{window.localStorage.removeItem(e)}}}const PVe="[@mantine/core] MantineProvider: Invalid theme.primaryColor, it accepts only key of theme.colors, learn more  https://mantine.dev/theming/colors/#primary-color",lae="[@mantine/core] MantineProvider: Invalid theme.primaryShade, it accepts only 0-9 integers or an object { light: 0-9, dark: 0-9 }";function v8(e){return e<0||e>9?!1:parseInt(e.toString(),10)===e}function cae(e){if(!(e.primaryColor in e.colors))throw new Error(PVe);if(typeof e.primaryShade=="object"&&(!v8(e.primaryShade.dark)||!v8(e.primaryShade.light)))throw new Error(lae);if(typeof e.primaryShade=="number"&&!v8(e.primaryShade))throw new Error(lae)}function OVe(e,t){var r;if(!t)return cae(e),e;const n=IG(e,t);return t.fontFamily&&!((r=t.headings)!=null&&r.fontFamily)&&(n.headings.fontFamily=t.fontFamily),cae(n),n}const MG=I.createContext(null),DVe=()=>I.useContext(MG)||$G;function ys(){const e=I.useContext(MG);if(!e)throw new Error("@mantine/core: MantineProvider was not found in component tree, make sure you have it in your app");return e}function T_e({theme:e,children:t,inherit:n=!0}){const r=DVe(),i=I.useMemo(()=>OVe(n?r:$G,e),[e,r,n]);return _.jsx(MG.Provider,{value:i,children:t})}T_e.displayName="@mantine/core/MantineThemeProvider";function $Ve(){const e=ys(),t=OG(),n=Zr(e.breakpoints).reduce((r,i)=>{const s=e.breakpoints[i].includes("px"),o=q2(e.breakpoints[i]),a=s?`${o-.1}px`:h$(o-.1),u=s?`${o}px`:h$(o);return`${r}@media (max-width: ${a}) {.mantine-visible-from-${i} {display: none !important;}}@media (min-width: ${u}) {.mantine-hidden-from-${i} {display: none !important;}}`},"");return _.jsx("style",{"data-mantine-styles":"classes",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:n}})}function b8(e){return Object.entries(e).map(([t,n])=>`${t}: ${n};`).join("")}function _8(e,t){return(Array.isArray(e)?e:[e]).reduce((r,i)=>`${i}{${r}}`,t)}function MVe(e,t){const n=b8(e.variables),r=n?_8(t,n):"",i=b8(e.dark),s=i?_8(`${t}[data-mantine-color-scheme="dark"]`,i):"",o=b8(e.light),a=o?_8(`${t}[data-mantine-color-scheme="light"]`,o):"";return`${r}${s}${a}`}function Hy({color:e,theme:t,autoContrast:n}){return(typeof n=="boolean"?n:t.autoContrast)&&Gh({color:e||t.primaryColor,theme:t}).isLight?"var(--mantine-color-black)":"var(--mantine-color-white)"}function fae(e,t){return Hy({color:e.colors[e.primaryColor][G2(e,t)],theme:e,autoContrast:null})}function WN({theme:e,color:t,colorScheme:n,name:r=t,withColorValues:i=!0}){if(!e.colors[t])return{};if(n==="light"){const a=G2(e,"light"),u={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-filled)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${a===9?8:a+1})`,[`--mantine-color-${r}-light`]:F_(e.colors[t][a],.1),[`--mantine-color-${r}-light-hover`]:F_(e.colors[t][a],.12),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${a})`,[`--mantine-color-${r}-outline-hover`]:F_(e.colors[t][a],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...u}:u}const s=G2(e,"dark"),o={[`--mantine-color-${r}-text`]:`var(--mantine-color-${r}-4)`,[`--mantine-color-${r}-filled`]:`var(--mantine-color-${r}-${s})`,[`--mantine-color-${r}-filled-hover`]:`var(--mantine-color-${r}-${s===9?8:s+1})`,[`--mantine-color-${r}-light`]:F_(e.colors[t][Math.max(0,s-2)],.15),[`--mantine-color-${r}-light-hover`]:F_(e.colors[t][Math.max(0,s-2)],.2),[`--mantine-color-${r}-light-color`]:`var(--mantine-color-${r}-${Math.max(s-5,0)})`,[`--mantine-color-${r}-outline`]:`var(--mantine-color-${r}-${Math.max(s-4,0)})`,[`--mantine-color-${r}-outline-hover`]:F_(e.colors[t][Math.max(s-4,0)],.05)};return i?{[`--mantine-color-${r}-0`]:e.colors[t][0],[`--mantine-color-${r}-1`]:e.colors[t][1],[`--mantine-color-${r}-2`]:e.colors[t][2],[`--mantine-color-${r}-3`]:e.colors[t][3],[`--mantine-color-${r}-4`]:e.colors[t][4],[`--mantine-color-${r}-5`]:e.colors[t][5],[`--mantine-color-${r}-6`]:e.colors[t][6],[`--mantine-color-${r}-7`]:e.colors[t][7],[`--mantine-color-${r}-8`]:e.colors[t][8],[`--mantine-color-${r}-9`]:e.colors[t][9],...o}:o}function LVe(e){return Array.isArray(e)?e:Array(10).fill(e)}function FVe(e){return!!e&&typeof e=="object"&&"mantine-virtual-color"in e}function j_(e,t,n){Zr(t).forEach(r=>Object.assign(e,{[`--mantine-${n}-${r}`]:t[r]}))}const A_e=e=>{const t=G2(e,"light"),n=e.defaultRadius in e.radius?e.radius[e.defaultRadius]:Te(e.defaultRadius),r={variables:{"--mantine-scale":e.scale.toString(),"--mantine-cursor-type":e.cursorType,"--mantine-color-scheme":"light dark","--mantine-webkit-font-smoothing":e.fontSmoothing?"antialiased":"unset","--mantine-moz-font-smoothing":e.fontSmoothing?"grayscale":"unset","--mantine-color-white":e.white,"--mantine-color-black":e.black,"--mantine-line-height":e.lineHeights.md,"--mantine-font-family":e.fontFamily,"--mantine-font-family-monospace":e.fontFamilyMonospace,"--mantine-font-family-headings":e.headings.fontFamily,"--mantine-heading-font-weight":e.headings.fontWeight,"--mantine-heading-text-wrap":e.headings.textWrap,"--mantine-radius-default":n,"--mantine-primary-color-filled":`var(--mantine-color-${e.primaryColor}-filled)`,"--mantine-primary-color-filled-hover":`var(--mantine-color-${e.primaryColor}-filled-hover)`,"--mantine-primary-color-light":`var(--mantine-color-${e.primaryColor}-light)`,"--mantine-primary-color-light-hover":`var(--mantine-color-${e.primaryColor}-light-hover)`,"--mantine-primary-color-light-color":`var(--mantine-color-${e.primaryColor}-light-color)`},light:{"--mantine-primary-color-contrast":fae(e,"light"),"--mantine-color-bright":"var(--mantine-color-black)","--mantine-color-text":e.black,"--mantine-color-body":e.white,"--mantine-color-error":"var(--mantine-color-red-6)","--mantine-color-placeholder":"var(--mantine-color-gray-5)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-${t})`,"--mantine-color-default":"var(--mantine-color-white)","--mantine-color-default-hover":"var(--mantine-color-gray-0)","--mantine-color-default-color":"var(--mantine-color-black)","--mantine-color-default-border":"var(--mantine-color-gray-4)","--mantine-color-dimmed":"var(--mantine-color-gray-6)"},dark:{"--mantine-primary-color-contrast":fae(e,"dark"),"--mantine-color-bright":"var(--mantine-color-white)","--mantine-color-text":"var(--mantine-color-dark-0)","--mantine-color-body":"var(--mantine-color-dark-7)","--mantine-color-error":"var(--mantine-color-red-8)","--mantine-color-placeholder":"var(--mantine-color-dark-3)","--mantine-color-anchor":`var(--mantine-color-${e.primaryColor}-4)`,"--mantine-color-default":"var(--mantine-color-dark-6)","--mantine-color-default-hover":"var(--mantine-color-dark-5)","--mantine-color-default-color":"var(--mantine-color-white)","--mantine-color-default-border":"var(--mantine-color-dark-4)","--mantine-color-dimmed":"var(--mantine-color-dark-2)"}};j_(r.variables,e.breakpoints,"breakpoint"),j_(r.variables,e.spacing,"spacing"),j_(r.variables,e.fontSizes,"font-size"),j_(r.variables,e.lineHeights,"line-height"),j_(r.variables,e.shadows,"shadow"),j_(r.variables,e.radius,"radius"),e.colors[e.primaryColor].forEach((s,o)=>{r.variables[`--mantine-primary-color-${o}`]=`var(--mantine-color-${e.primaryColor}-${o})`}),Zr(e.colors).forEach(s=>{const o=e.colors[s];if(FVe(o)){Object.assign(r.light,WN({theme:e,name:o.name,color:o.light,colorScheme:"light",withColorValues:!0})),Object.assign(r.dark,WN({theme:e,name:o.name,color:o.dark,colorScheme:"dark",withColorValues:!0}));return}o.forEach((a,u)=>{r.variables[`--mantine-color-${s}-${u}`]=a}),Object.assign(r.light,WN({theme:e,color:s,colorScheme:"light",withColorValues:!1})),Object.assign(r.dark,WN({theme:e,color:s,colorScheme:"dark",withColorValues:!1}))});const i=e.headings.sizes;return Zr(i).forEach(s=>{r.variables[`--mantine-${s}-font-size`]=i[s].fontSize,r.variables[`--mantine-${s}-line-height`]=i[s].lineHeight,r.variables[`--mantine-${s}-font-weight`]=i[s].fontWeight||e.headings.fontWeight}),r};function jVe({theme:e,generator:t}){const n=A_e(e),r=t==null?void 0:t(e);return r?IG(n,r):n}const w8=A_e($G);function BVe(e){const t={variables:{},light:{},dark:{}};return Zr(e.variables).forEach(n=>{w8.variables[n]!==e.variables[n]&&(t.variables[n]=e.variables[n])}),Zr(e.light).forEach(n=>{w8.light[n]!==e.light[n]&&(t.light[n]=e.light[n])}),Zr(e.dark).forEach(n=>{w8.dark[n]!==e.dark[n]&&(t.dark[n]=e.dark[n])}),t}function UVe(e){return`
  ${e}[data-mantine-color-scheme="dark"] { --mantine-color-scheme: dark; }
  ${e}[data-mantine-color-scheme="light"] { --mantine-color-scheme: light; }
`}function C_e({cssVariablesSelector:e,deduplicateCssVariables:t}){const n=ys(),r=OG(),i=yVe(),s=jVe({theme:n,generator:i}),o=e===":root"&&t,a=o?BVe(s):s,u=MVe(a,e);return u?_.jsx("style",{"data-mantine-styles":!0,nonce:r==null?void 0:r(),dangerouslySetInnerHTML:{__html:`${u}${o?"":UVe(e)}`}}):null}C_e.displayName="@mantine/CssVariables";function zVe(){const e=console.error;console.error=(...t)=>{t.length>1&&typeof t[0]=="string"&&t[0].toLowerCase().includes("extra attributes from the server")&&typeof t[1]=="string"&&t[1].toLowerCase().includes("data-mantine-color-scheme")||e(...t)}}function B_(e,t){var r;const n=e!=="auto"?e:window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";(r=t())==null||r.setAttribute("data-mantine-color-scheme",n)}function VVe({manager:e,defaultColorScheme:t,getRootElement:n,forceColorScheme:r}){const i=I.useRef(),[s,o]=I.useState(()=>e.get(t)),a=r||s,u=I.useCallback(c=>{r||(B_(c,n),o(c),e.set(c))},[e.set,a,r]),l=I.useCallback(()=>{o(t),B_(t,n),e.clear()},[e.clear,t]);return I.useEffect(()=>(e.subscribe(u),e.unsubscribe),[e.subscribe,e.unsubscribe]),Vb(()=>{B_(e.get(t),n)},[]),I.useEffect(()=>{var f;if(r)return B_(r,n),()=>{};r===void 0&&B_(s,n),i.current=window.matchMedia("(prefers-color-scheme: dark)");const c=d=>{s==="auto"&&B_(d.matches?"dark":"light",n)};return(f=i.current)==null||f.addEventListener("change",c),()=>{var d;return(d=i.current)==null?void 0:d.removeEventListener("change",c)}},[s,r]),{colorScheme:a,setColorScheme:u,clearColorScheme:l}}function HVe({respectReducedMotion:e,getRootElement:t}){Vb(()=>{var n;e&&((n=t())==null||n.setAttribute("data-respect-reduced-motion","true"))},[e])}zVe();function I_e({theme:e,children:t,getStyleNonce:n,withStaticClasses:r=!0,withGlobalClasses:i=!0,deduplicateCssVariables:s=!0,withCssVariables:o=!0,cssVariablesSelector:a=":root",classNamesPrefix:u="mantine",colorSchemeManager:l=NVe(),defaultColorScheme:c="light",getRootElement:f=()=>document.documentElement,cssVariablesResolver:d,forceColorScheme:h,stylesTransform:p}){const{colorScheme:m,setColorScheme:g,clearColorScheme:y}=VVe({defaultColorScheme:c,forceColorScheme:h,manager:l,getRootElement:f});return HVe({respectReducedMotion:(e==null?void 0:e.respectReducedMotion)||!1,getRootElement:f}),_.jsx(S_e.Provider,{value:{colorScheme:m,setColorScheme:g,clearColorScheme:y,getRootElement:f,classNamesPrefix:u,getStyleNonce:n,cssVariablesResolver:d,cssVariablesSelector:a,withStaticClasses:r,stylesTransform:p},children:_.jsxs(T_e,{theme:e,children:[o&&_.jsx(C_e,{cssVariablesSelector:a,deduplicateCssVariables:s}),i&&_.jsx($Ve,{}),t]})})}I_e.displayName="@mantine/core/MantineProvider";function Jm({classNames:e,styles:t,props:n,stylesCtx:r}){const i=ys();return{resolvedClassNames:r6({theme:i,classNames:e,props:n,stylesCtx:r||void 0}),resolvedStyles:g$({theme:i,styles:t,props:n,stylesCtx:r||void 0})}}const qVe={always:"mantine-focus-always",auto:"mantine-focus-auto",never:"mantine-focus-never"};function WVe({theme:e,options:t,unstyled:n}){return es((t==null?void 0:t.focusable)&&!n&&(e.focusClassName||qVe[e.focusRing]),(t==null?void 0:t.active)&&!n&&e.activeClassName)}function GVe({selector:e,stylesCtx:t,options:n,props:r,theme:i}){return r6({theme:i,classNames:n==null?void 0:n.classNames,props:(n==null?void 0:n.props)||r,stylesCtx:t})[e]}function dae({selector:e,stylesCtx:t,theme:n,classNames:r,props:i}){return r6({theme:n,classNames:r,props:i,stylesCtx:t})[e]}function YVe({rootSelector:e,selector:t,className:n}){return e===t?n:void 0}function KVe({selector:e,classes:t,unstyled:n}){return n?void 0:t[e]}function XVe({themeName:e,classNamesPrefix:t,selector:n,withStaticClass:r}){return r===!1?[]:e.map(i=>`${t}-${i}-${n}`)}function QVe({themeName:e,theme:t,selector:n,props:r,stylesCtx:i}){return e.map(s=>{var o,a;return(a=r6({theme:t,classNames:(o=t.components[s])==null?void 0:o.classNames,props:r,stylesCtx:i}))==null?void 0:a[n]})}function JVe({options:e,classes:t,selector:n,unstyled:r}){return e!=null&&e.variant&&!r?t[`${n}--${e.variant}`]:void 0}function ZVe({theme:e,options:t,themeName:n,selector:r,classNamesPrefix:i,classNames:s,classes:o,unstyled:a,className:u,rootSelector:l,props:c,stylesCtx:f,withStaticClasses:d,headless:h,transformedStyles:p}){return es(WVe({theme:e,options:t,unstyled:a||h}),QVe({theme:e,themeName:n,selector:r,props:c,stylesCtx:f}),JVe({options:t,classes:o,selector:r,unstyled:a}),dae({selector:r,stylesCtx:f,theme:e,classNames:s,props:c}),dae({selector:r,stylesCtx:f,theme:e,classNames:p,props:c}),GVe({selector:r,stylesCtx:f,options:t,props:c,theme:e}),YVe({rootSelector:l,selector:r,className:u}),KVe({selector:r,classes:o,unstyled:a||h}),d&&!h&&XVe({themeName:n,classNamesPrefix:i,selector:r,withStaticClass:t==null?void 0:t.withStaticClass}),t==null?void 0:t.className)}function eHe({theme:e,themeName:t,props:n,stylesCtx:r,selector:i}){return t.map(s=>{var o;return g$({theme:e,styles:(o=e.components[s])==null?void 0:o.styles,props:n,stylesCtx:r})[i]}).reduce((s,o)=>({...s,...o}),{})}function M7({style:e,theme:t}){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...M7({style:r,theme:t})}),{}):typeof e=="function"?e(t):e??{}}function tHe(e){return e.reduce((t,n)=>(n&&Object.keys(n).forEach(r=>{t[r]={...t[r],...Uy(n[r])}}),t),{})}function nHe({vars:e,varsResolver:t,theme:n,props:r,stylesCtx:i,selector:s,themeName:o,headless:a}){var u;return(u=tHe([a?{}:t==null?void 0:t(n,r,i),...o.map(l=>{var c,f,d;return(d=(f=(c=n.components)==null?void 0:c[l])==null?void 0:f.vars)==null?void 0:d.call(f,n,r,i)}),e==null?void 0:e(n,r,i)]))==null?void 0:u[s]}function rHe({theme:e,themeName:t,selector:n,options:r,props:i,stylesCtx:s,rootSelector:o,styles:a,style:u,vars:l,varsResolver:c,headless:f,withStylesTransform:d}){return{...!d&&eHe({theme:e,themeName:t,props:i,stylesCtx:s,selector:n}),...!d&&g$({theme:e,styles:a,props:i,stylesCtx:s})[n],...!d&&g$({theme:e,styles:r==null?void 0:r.styles,props:(r==null?void 0:r.props)||i,stylesCtx:s})[n],...nHe({theme:e,props:i,stylesCtx:s,vars:l,varsResolver:c,selector:n,themeName:t,headless:f}),...o===n?M7({style:u,theme:e}):null,...M7({style:r==null?void 0:r.style,theme:e})}}function iHe({props:e,stylesCtx:t,themeName:n}){var o;const r=ys(),i=(o=EVe())==null?void 0:o();return{getTransformedStyles:a=>i?[...a.map(l=>i(l,{props:e,theme:r,ctx:t})),...n.map(l=>{var c;return i((c=r.components[l])==null?void 0:c.styles,{props:e,theme:r,ctx:t})})].filter(Boolean):[],withStylesTransform:!!i}}function dt({name:e,classes:t,props:n,stylesCtx:r,className:i,style:s,rootSelector:o="root",unstyled:a,classNames:u,styles:l,vars:c,varsResolver:f}){const d=ys(),h=vVe(),p=bVe(),m=_Ve(),g=(Array.isArray(e)?e:[e]).filter(b=>b),{withStylesTransform:y,getTransformedStyles:v}=iHe({props:n,stylesCtx:r,themeName:g});return(b,w)=>({className:ZVe({theme:d,options:w,themeName:g,selector:b,classNamesPrefix:h,classNames:u,classes:t,unstyled:a,className:i,rootSelector:o,props:n,stylesCtx:r,withStaticClasses:p,headless:m,transformedStyles:v([w==null?void 0:w.styles,l])}),style:rHe({theme:d,themeName:g,selector:b,options:w,props:n,stylesCtx:r,rootSelector:o,styles:l,style:s,vars:c,varsResolver:f,headless:m,withStylesTransform:y})})}function fS(e,t){return typeof e=="boolean"?e:t.autoContrast}function xe(e,t,n){var o;const r=ys(),i=(o=r.components[e])==null?void 0:o.defaultProps,s=typeof i=="function"?i(r):i;return{...t,...s,...Uy(n)}}function E8(e){return Zr(e).reduce((t,n)=>e[n]!==void 0?`${t}${Pze(n)}:${e[n]};`:t,"").trim()}function sHe({selector:e,styles:t,media:n,container:r}){const i=t?E8(t):"",s=Array.isArray(n)?n.map(a=>`@media${a.query}{${e}{${E8(a.styles)}}}`):[],o=Array.isArray(r)?r.map(a=>`@container ${a.query}{${e}{${E8(a.styles)}}}`):[];return`${i?`${e}{${i}}`:""}${s.join("")}${o.join("")}`.trim()}function Hb(e){const t=OG();return _.jsx("style",{"data-mantine-styles":"inline",nonce:t==null?void 0:t(),dangerouslySetInnerHTML:{__html:sHe(e)}})}function qb(e){const{m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:k,ta:N,lh:D,fs:O,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Xe,hiddenFrom:ze,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke,...Ve}=e;return{styleProps:Uy({m:t,mx:n,my:r,mt:i,mb:s,ml:o,mr:a,me:u,ms:l,p:c,px:f,py:d,pt:h,pb:p,pl:m,pr:g,pe:y,ps:v,bd:b,bg:w,c:E,opacity:T,ff:S,fz:A,fw:C,lts:k,ta:N,lh:D,fs:O,tt:$,td:F,w:M,miw:B,maw:U,h:H,mih:P,mah:z,bgsz:W,bgp:j,bgr:q,bga:G,pos:ne,top:ce,left:de,bottom:he,right:ve,inset:Ie,display:be,flex:Xe,hiddenFrom:ze,visibleFrom:yt,lightHidden:it,darkHidden:_e,sx:ke}),rest:Ve}}const oHe={m:{type:"spacing",property:"margin"},mt:{type:"spacing",property:"marginTop"},mb:{type:"spacing",property:"marginBottom"},ml:{type:"spacing",property:"marginLeft"},mr:{type:"spacing",property:"marginRight"},ms:{type:"spacing",property:"marginInlineStart"},me:{type:"spacing",property:"marginInlineEnd"},mx:{type:"spacing",property:"marginInline"},my:{type:"spacing",property:"marginBlock"},p:{type:"spacing",property:"padding"},pt:{type:"spacing",property:"paddingTop"},pb:{type:"spacing",property:"paddingBottom"},pl:{type:"spacing",property:"paddingLeft"},pr:{type:"spacing",property:"paddingRight"},ps:{type:"spacing",property:"paddingInlineStart"},pe:{type:"spacing",property:"paddingInlineEnd"},px:{type:"spacing",property:"paddingInline"},py:{type:"spacing",property:"paddingBlock"},bd:{type:"border",property:"border"},bg:{type:"color",property:"background"},c:{type:"textColor",property:"color"},opacity:{type:"identity",property:"opacity"},ff:{type:"fontFamily",property:"fontFamily"},fz:{type:"fontSize",property:"fontSize"},fw:{type:"identity",property:"fontWeight"},lts:{type:"size",property:"letterSpacing"},ta:{type:"identity",property:"textAlign"},lh:{type:"lineHeight",property:"lineHeight"},fs:{type:"identity",property:"fontStyle"},tt:{type:"identity",property:"textTransform"},td:{type:"identity",property:"textDecoration"},w:{type:"spacing",property:"width"},miw:{type:"spacing",property:"minWidth"},maw:{type:"spacing",property:"maxWidth"},h:{type:"spacing",property:"height"},mih:{type:"spacing",property:"minHeight"},mah:{type:"spacing",property:"maxHeight"},bgsz:{type:"size",property:"backgroundSize"},bgp:{type:"identity",property:"backgroundPosition"},bgr:{type:"identity",property:"backgroundRepeat"},bga:{type:"identity",property:"backgroundAttachment"},pos:{type:"identity",property:"position"},top:{type:"identity",property:"top"},left:{type:"size",property:"left"},bottom:{type:"size",property:"bottom"},right:{type:"size",property:"right"},inset:{type:"size",property:"inset"},display:{type:"identity",property:"display"},flex:{type:"identity",property:"flex"}};function LG(e,t){const n=Gh({color:e,theme:t});return n.color==="dimmed"?"var(--mantine-color-dimmed)":n.color==="bright"?"var(--mantine-color-bright)":n.variable?`var(${n.variable})`:n.color}function aHe(e,t){const n=Gh({color:e,theme:t});return n.isThemeColor&&n.shade===void 0?`var(--mantine-color-${n.color}-text)`:LG(e,t)}function uHe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const[n,r,...i]=e.split(" ").filter(o=>o.trim()!=="");let s=`${Te(n)}`;return r&&(s+=` ${r}`),LVe.length>0&&(s+=` ${LG(i.join(" "),t)}`),s.trim()}return e}const hae={text:"var(--mantine-font-family)",mono:"var(--mantine-font-family-monospace)",monospace:"var(--mantine-font-family-monospace)",heading:"var(--mantine-font-family-headings)",headings:"var(--mantine-font-family-headings)"};function lHe(e){return typeof e=="string"&&e in hae?hae[e]:e}const cHe=["h1","h2","h3","h4","h5","h6"];function fHe(e,t){return typeof e=="string"&&e in t.fontSizes?`var(--mantine-font-size-${e})`:typeof e=="string"&&cHe.includes(e)?`var(--mantine-${e}-font-size)`:typeof e=="number"||typeof e=="string"?Te(e):e}function dHe(e){return e}const hHe=["h1","h2","h3","h4","h5","h6"];function pHe(e,t){return typeof e=="string"&&e in t.lineHeights?`var(--mantine-line-height-${e})`:typeof e=="string"&&hHe.includes(e)?`var(--mantine-${e}-line-height)`:e}function mHe(e){return typeof e=="number"?Te(e):e}function gHe(e,t){if(typeof e=="number")return Te(e);if(typeof e=="string"){const n=e.replace("-","");if(!(n in t.spacing))return Te(e);const r=`--mantine-spacing-${n}`;return e.startsWith("-")?`calc(var(${r}) * -1)`:`var(${r})`}return e}const x8={color:LG,textColor:aHe,fontSize:fHe,spacing:gHe,identity:dHe,size:mHe,lineHeight:pHe,fontFamily:lHe,border:uHe};function pae(e){return e.replace("(min-width: ","").replace("em)","")}function yHe({media:e,...t}){const r=Object.keys(e).sort((i,s)=>Number(pae(i))-Number(pae(s))).map(i=>({query:i,styles:e[i]}));return{...t,media:r}}function vHe(e){if(typeof e!="object"||e===null)return!1;const t=Object.keys(e);return!(t.length===1&&t[0]==="base")}function bHe(e){return typeof e=="object"&&e!==null?"base"in e?e.base:void 0:e}function _He(e){return typeof e=="object"&&e!==null?Zr(e).filter(t=>t!=="base"):[]}function wHe(e,t){return typeof e=="object"&&e!==null&&t in e?e[t]:e}function k_e({styleProps:e,data:t,theme:n}){return yHe(Zr(e).reduce((r,i)=>{if(i==="hiddenFrom"||i==="visibleFrom"||i==="sx")return r;const s=t[i],o=Array.isArray(s.property)?s.property:[s.property],a=bHe(e[i]);if(!vHe(e[i]))return o.forEach(l=>{r.inlineStyles[l]=x8[s.type](a,n)}),r;r.hasResponsiveStyles=!0;const u=_He(e[i]);return o.forEach(l=>{a&&(r.styles[l]=x8[s.type](a,n)),u.forEach(c=>{const f=`(min-width: ${n.breakpoints[c]})`;r.media[f]={...r.media[f],[l]:x8[s.type](wHe(e[i],c),n)}})}),r},{hasResponsiveStyles:!1,styles:{},inlineStyles:{},media:{}}))}function Sk(){return`__m__-${I.useId().replace(/:/g,"")}`}function FG(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...FG(r,t)}),{}):typeof e=="function"?e(t):e??{}}function R_e(e){return e.startsWith("data-")?e:`data-${e}`}function EHe(e){return Object.keys(e).reduce((t,n)=>{const r=e[n];return r===void 0||r===""||r===!1||r===null||(t[R_e(n)]=e[n]),t},{})}function N_e(e){return e?typeof e=="string"?{[R_e(e)]:!0}:Array.isArray(e)?[...e].reduce((t,n)=>({...t,...N_e(n)}),{}):EHe(e):null}function L7(e,t){return Array.isArray(e)?[...e].reduce((n,r)=>({...n,...L7(r,t)}),{}):typeof e=="function"?e(t):e??{}}function xHe({theme:e,style:t,vars:n,styleProps:r}){const i=L7(t,e),s=L7(n,e);return{...i,...s,...r}}const P_e=I.forwardRef(({component:e,style:t,__vars:n,className:r,variant:i,mod:s,size:o,hiddenFrom:a,visibleFrom:u,lightHidden:l,darkHidden:c,renderRoot:f,__size:d,...h},p)=>{var A;const m=ys(),g=e||"div",{styleProps:y,rest:v}=qb(h),b=wVe(),w=(A=b==null?void 0:b())==null?void 0:A(y.sx),E=Sk(),T=k_e({styleProps:y,theme:m,data:oHe}),S={ref:p,style:xHe({theme:m,style:t,vars:n,styleProps:T.inlineStyles}),className:es(r,w,{[E]:T.hasResponsiveStyles,"mantine-light-hidden":l,"mantine-dark-hidden":c,[`mantine-hidden-from-${a}`]:a,[`mantine-visible-from-${u}`]:u}),"data-variant":i,"data-size":h_e(o)?void 0:o||void 0,size:d,...N_e(s),...v};return _.jsxs(_.Fragment,{children:[T.hasResponsiveStyles&&_.jsx(Hb,{selector:`.${E}`,styles:T.styles,media:T.media}),typeof f=="function"?f(S):_.jsx(g,{...S})]})});P_e.displayName="@mantine/core/Box";const me=P_e;function O_e(e){return e}function Me(e){const t=I.forwardRef(e);return t.extend=O_e,t}function qs(e){const t=I.forwardRef(e);return t.extend=O_e,t}const SHe=I.createContext({dir:"ltr",toggleDirection:()=>{},setDirection:()=>{}});function Yh(){return I.useContext(SHe)}function THe(e){if(!e||typeof e=="string")return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function S8(e){return e!=null&&e.current?e.current.scrollHeight:"auto"}const UT=typeof window<"u"&&window.requestAnimationFrame;function AHe({transitionDuration:e,transitionTimingFunction:t="ease",onTransitionEnd:n=()=>{},opened:r}){const i=I.useRef(null),s=0,o={display:"none",height:0,overflow:"hidden"},[a,u]=I.useState(r?{}:o),l=p=>{xk.flushSync(()=>u(p))},c=p=>{l(m=>({...m,...p}))};function f(p){const m=e||THe(p);return{transition:`height ${m}ms ${t}, opacity ${m}ms ${t}`}}kh(()=>{typeof UT=="function"&&UT(r?()=>{c({willChange:"height",display:"block",overflow:"hidden"}),UT(()=>{const p=S8(i);c({...f(p),height:p})})}:()=>{const p=S8(i);c({...f(p),willChange:"height",height:p}),UT(()=>c({height:s,overflow:"hidden"}))})},[r]);const d=p=>{if(!(p.target!==i.current||p.propertyName!=="height"))if(r){const m=S8(i);m===a.height?l({}):c({height:m}),n()}else a.height===s&&(l(o),n())};function h({style:p={},refKey:m="ref",...g}={}){const y=g[m];return{"aria-hidden":!r,...g,[m]:__e(i,y),onTransitionEnd:d,style:{boxSizing:"border-box",...p,...a}}}return h}const CHe={transitionDuration:200,transitionTimingFunction:"ease",animateOpacity:!0},i6=Me((e,t)=>{const{children:n,in:r,transitionDuration:i,transitionTimingFunction:s,style:o,onTransitionEnd:a,animateOpacity:u,...l}=xe("Collapse",CHe,e),c=ys(),f=t6(),h=(c.respectReducedMotion?f:!1)?0:i,p=AHe({opened:r,transitionDuration:h,transitionTimingFunction:s,onTransitionEnd:a});return h===0?r?_.jsx(me,{...l,children:n}):null:_.jsx(me,{...p({style:{opacity:r||!u?1:0,transition:u?`opacity ${h}ms ${s}`:"none",...FG(o,c)},ref:t,...l}),children:n})});i6.displayName="@mantine/core/Collapse";const[IHe,Yc]=yo("ScrollArea.Root component was not found in tree");function KE(e,t){const n=e1(t);Vb(()=>{let r=0;if(e){const i=new ResizeObserver(()=>{cancelAnimationFrame(r),r=window.requestAnimationFrame(n)});return i.observe(e),()=>{window.cancelAnimationFrame(r),i.unobserve(e)}}},[e,n])}const kHe=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Yc(),[s,o]=I.useState(0),[a,u]=I.useState(0),l=!!(s&&a);return KE(i.scrollbarX,()=>{var f;const c=((f=i.scrollbarX)==null?void 0:f.offsetHeight)||0;i.onCornerHeightChange(c),u(c)}),KE(i.scrollbarY,()=>{var f;const c=((f=i.scrollbarY)==null?void 0:f.offsetWidth)||0;i.onCornerWidthChange(c),o(c)}),l?_.jsx("div",{...r,ref:t,style:{...n,width:s,height:a}}):null}),RHe=I.forwardRef((e,t)=>{const n=Yc(),r=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&r?_.jsx(kHe,{...e,ref:t}):null}),NHe={scrollHideDelay:1e3,type:"hover"},D_e=I.forwardRef((e,t)=>{const n=xe("ScrollAreaRoot",NHe,e),{type:r,scrollHideDelay:i,scrollbars:s,...o}=n,[a,u]=I.useState(null),[l,c]=I.useState(null),[f,d]=I.useState(null),[h,p]=I.useState(null),[m,g]=I.useState(null),[y,v]=I.useState(0),[b,w]=I.useState(0),[E,T]=I.useState(!1),[S,A]=I.useState(!1),C=gs(t,k=>u(k));return _.jsx(IHe,{value:{type:r,scrollHideDelay:i,scrollArea:a,viewport:l,onViewportChange:c,content:f,onContentChange:d,scrollbarX:h,onScrollbarXChange:p,scrollbarXEnabled:E,onScrollbarXEnabledChange:T,scrollbarY:m,onScrollbarYChange:g,scrollbarYEnabled:S,onScrollbarYEnabledChange:A,onCornerWidthChange:v,onCornerHeightChange:w},children:_.jsx(me,{...o,ref:C,__vars:{"--sa-corner-width":s!=="xy"?"0px":`${y}px`,"--sa-corner-height":s!=="xy"?"0px":`${b}px`}})})});D_e.displayName="@mantine/core/ScrollAreaRoot";function $_e(e,t){const n=e/t;return Number.isNaN(n)?0:n}function s6(e){const t=$_e(e.viewport,e.content),n=e.scrollbar.paddingStart+e.scrollbar.paddingEnd,r=(e.scrollbar.size-n)*t;return Math.max(r,18)}function M_e(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function PHe(e,[t,n]){return Math.min(n,Math.max(t,e))}function mae(e,t,n="ltr"){const r=s6(t),i=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,s=t.scrollbar.size-i,o=t.content-t.viewport,a=s-r,u=n==="ltr"?[0,o]:[o*-1,0],l=PHe(e,u);return M_e([0,o],[0,a])(l)}function OHe(e,t,n,r="ltr"){const i=s6(n),s=i/2,o=t||s,a=i-o,u=n.scrollbar.paddingStart+o,l=n.scrollbar.size-n.scrollbar.paddingEnd-a,c=n.content-n.viewport,f=r==="ltr"?[0,c]:[c*-1,0];return M_e([u,l],f)(e)}function L_e(e,t){return e>0&&e<t}function y$(e){return e?parseInt(e,10):0}function F1(e,t,{checkForDefaultPrevented:n=!0}={}){return r=>{e==null||e(r),(n===!1||!r.defaultPrevented)&&(t==null||t(r))}}const[DHe,F_e]=yo("ScrollAreaScrollbar was not found in tree"),j_e=I.forwardRef((e,t)=>{const{sizes:n,hasThumb:r,onThumbChange:i,onThumbPointerUp:s,onThumbPointerDown:o,onThumbPositionChange:a,onDragScroll:u,onWheelScroll:l,onResize:c,...f}=e,d=Yc(),[h,p]=I.useState(null),m=gs(t,A=>p(A)),g=I.useRef(null),y=I.useRef(""),{viewport:v}=d,b=n.content-n.viewport,w=e1(l),E=e1(a),T=e6(c,10),S=A=>{if(g.current){const C=A.clientX-g.current.left,k=A.clientY-g.current.top;u({x:C,y:k})}};return I.useEffect(()=>{const A=C=>{const k=C.target;(h==null?void 0:h.contains(k))&&w(C,b)};return document.addEventListener("wheel",A,{passive:!1}),()=>document.removeEventListener("wheel",A,{passive:!1})},[v,h,b,w]),I.useEffect(E,[n,E]),KE(h,T),KE(d.content,T),_.jsx(DHe,{value:{scrollbar:h,hasThumb:r,onThumbChange:e1(i),onThumbPointerUp:e1(s),onThumbPositionChange:E,onThumbPointerDown:e1(o)},children:_.jsx("div",{...f,ref:m,style:{position:"absolute",...f.style},onPointerDown:F1(e.onPointerDown,A=>{A.button===0&&(A.target.setPointerCapture(A.pointerId),g.current=h.getBoundingClientRect(),y.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",S(A))}),onPointerMove:F1(e.onPointerMove,S),onPointerUp:F1(e.onPointerUp,A=>{const C=A.target;C.hasPointerCapture(A.pointerId)&&C.releasePointerCapture(A.pointerId),document.body.style.webkitUserSelect=y.current,g.current=null})})})}),$He=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Yc(),[a,u]=I.useState(),l=I.useRef(null),c=gs(t,l,o.onScrollbarXChange);return I.useEffect(()=>{l.current&&u(getComputedStyle(l.current))},[l]),_.jsx(j_e,{"data-orientation":"horizontal",...s,ref:c,sizes:n,style:{...i,"--sa-thumb-width":`${s6(n)}px`},onThumbPointerDown:f=>e.onThumbPointerDown(f.x),onDragScroll:f=>e.onDragScroll(f.x),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollLeft+f.deltaX;e.onWheelScroll(h),L_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollWidth,viewport:o.viewport.offsetWidth,scrollbar:{size:l.current.clientWidth,paddingStart:y$(a.paddingLeft),paddingEnd:y$(a.paddingRight)}})}})}),MHe=I.forwardRef((e,t)=>{const{sizes:n,onSizesChange:r,style:i,...s}=e,o=Yc(),[a,u]=I.useState(),l=I.useRef(null),c=gs(t,l,o.onScrollbarYChange);return I.useEffect(()=>{l.current&&u(window.getComputedStyle(l.current))},[]),_.jsx(j_e,{...s,"data-orientation":"vertical",ref:c,sizes:n,style:{"--sa-thumb-height":`${s6(n)}px`,...i},onThumbPointerDown:f=>e.onThumbPointerDown(f.y),onDragScroll:f=>e.onDragScroll(f.y),onWheelScroll:(f,d)=>{if(o.viewport){const h=o.viewport.scrollTop+f.deltaY;e.onWheelScroll(h),L_e(h,d)&&f.preventDefault()}},onResize:()=>{l.current&&o.viewport&&a&&r({content:o.viewport.scrollHeight,viewport:o.viewport.offsetHeight,scrollbar:{size:l.current.clientHeight,paddingStart:y$(a.paddingTop),paddingEnd:y$(a.paddingBottom)}})}})}),jG=I.forwardRef((e,t)=>{const{orientation:n="vertical",...r}=e,{dir:i}=Yh(),s=Yc(),o=I.useRef(null),a=I.useRef(0),[u,l]=I.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),c=$_e(u.viewport,u.content),f={...r,sizes:u,onSizesChange:l,hasThumb:c>0&&c<1,onThumbChange:h=>{o.current=h},onThumbPointerUp:()=>{a.current=0},onThumbPointerDown:h=>{a.current=h}},d=(h,p)=>OHe(h,a.current,u,p);return n==="horizontal"?_.jsx($He,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollLeft,p=mae(h,u,i);o.current.style.transform=`translate3d(${p}px, 0, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollLeft=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollLeft=d(h,i))}}):n==="vertical"?_.jsx(MHe,{...f,ref:t,onThumbPositionChange:()=>{if(s.viewport&&o.current){const h=s.viewport.scrollTop,p=mae(h,u);u.scrollbar.size===0?o.current.style.opacity="0":o.current.style.opacity="1",o.current.style.transform=`translate3d(0, ${p}px, 0)`}},onWheelScroll:h=>{s.viewport&&(s.viewport.scrollTop=h)},onDragScroll:h=>{s.viewport&&(s.viewport.scrollTop=d(h))}}):null}),B_e=I.forwardRef((e,t)=>{const n=Yc(),{forceMount:r,...i}=e,[s,o]=I.useState(!1),a=e.orientation==="horizontal",u=e6(()=>{if(n.viewport){const l=n.viewport.offsetWidth<n.viewport.scrollWidth,c=n.viewport.offsetHeight<n.viewport.scrollHeight;o(a?l:c)}},10);return KE(n.viewport,u),KE(n.content,u),r||s?_.jsx(jG,{"data-state":s?"visible":"hidden",...i,ref:t}):null}),LHe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yc(),[s,o]=I.useState(!1);return I.useEffect(()=>{const{scrollArea:a}=i;let u=0;if(a){const l=()=>{window.clearTimeout(u),o(!0)},c=()=>{u=window.setTimeout(()=>o(!1),i.scrollHideDelay)};return a.addEventListener("pointerenter",l),a.addEventListener("pointerleave",c),()=>{window.clearTimeout(u),a.removeEventListener("pointerenter",l),a.removeEventListener("pointerleave",c)}}},[i.scrollArea,i.scrollHideDelay]),n||s?_.jsx(B_e,{"data-state":s?"visible":"hidden",...r,ref:t}):null}),FHe=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yc(),s=e.orientation==="horizontal",[o,a]=I.useState("hidden"),u=e6(()=>a("idle"),100);return I.useEffect(()=>{if(o==="idle"){const l=window.setTimeout(()=>a("hidden"),i.scrollHideDelay);return()=>window.clearTimeout(l)}},[o,i.scrollHideDelay]),I.useEffect(()=>{const{viewport:l}=i,c=s?"scrollLeft":"scrollTop";if(l){let f=l[c];const d=()=>{const h=l[c];f!==h&&(a("scrolling"),u()),f=h};return l.addEventListener("scroll",d),()=>l.removeEventListener("scroll",d)}},[i.viewport,s,u]),n||o!=="hidden"?_.jsx(jG,{"data-state":o==="hidden"?"hidden":"visible",...r,ref:t,onPointerEnter:F1(e.onPointerEnter,()=>a("interacting")),onPointerLeave:F1(e.onPointerLeave,()=>a("idle"))}):null}),gae=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=Yc(),{onScrollbarXEnabledChange:s,onScrollbarYEnabledChange:o}=i,a=e.orientation==="horizontal";return I.useEffect(()=>(a?s(!0):o(!0),()=>{a?s(!1):o(!1)}),[a,s,o]),i.type==="hover"?_.jsx(LHe,{...r,ref:t,forceMount:n}):i.type==="scroll"?_.jsx(FHe,{...r,ref:t,forceMount:n}):i.type==="auto"?_.jsx(B_e,{...r,ref:t,forceMount:n}):i.type==="always"?_.jsx(jG,{...r,ref:t}):null});function jHe(e,t=()=>{}){let n={left:e.scrollLeft,top:e.scrollTop},r=0;return function i(){const s={left:e.scrollLeft,top:e.scrollTop},o=n.left!==s.left,a=n.top!==s.top;(o||a)&&t(),n=s,r=window.requestAnimationFrame(i)}(),()=>window.cancelAnimationFrame(r)}const BHe=I.forwardRef((e,t)=>{const{style:n,...r}=e,i=Yc(),s=F_e(),{onThumbPositionChange:o}=s,a=gs(t,c=>s.onThumbChange(c)),u=I.useRef(),l=e6(()=>{u.current&&(u.current(),u.current=void 0)},100);return I.useEffect(()=>{const{viewport:c}=i;if(c){const f=()=>{if(l(),!u.current){const d=jHe(c,o);u.current=d,o()}};return o(),c.addEventListener("scroll",f),()=>c.removeEventListener("scroll",f)}},[i.viewport,l,o]),_.jsx("div",{"data-state":s.hasThumb?"visible":"hidden",...r,ref:a,style:{width:"var(--sa-thumb-width)",height:"var(--sa-thumb-height)",...n},onPointerDownCapture:F1(e.onPointerDownCapture,c=>{const d=c.target.getBoundingClientRect(),h=c.clientX-d.left,p=c.clientY-d.top;s.onThumbPointerDown({x:h,y:p})}),onPointerUp:F1(e.onPointerUp,s.onThumbPointerUp)})}),yae=I.forwardRef((e,t)=>{const{forceMount:n,...r}=e,i=F_e();return n||i.hasThumb?_.jsx(BHe,{ref:t,...r}):null}),U_e=I.forwardRef(({children:e,style:t,...n},r)=>{const i=Yc(),s=gs(r,i.onViewportChange);return _.jsx(me,{...n,ref:s,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t},children:_.jsx("div",{style:{minWidth:"100%",display:"table"},ref:i.onContentChange,children:e})})});U_e.displayName="@mantine/core/ScrollAreaViewport";var BG={root:"m_d57069b5",viewport:"m_c0783ff9",viewportInner:"m_f8f631dd",scrollbar:"m_c44ba933",thumb:"m_d8b5e363",corner:"m_21657268"};const z_e={scrollHideDelay:1e3,type:"hover",scrollbars:"xy"},UHe=(e,{scrollbarSize:t})=>({root:{"--scrollarea-scrollbar-size":Te(t)}}),Sm=Me((e,t)=>{const n=xe("ScrollArea",z_e,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,scrollbarSize:u,vars:l,type:c,scrollHideDelay:f,viewportProps:d,viewportRef:h,onScrollPositionChange:p,children:m,offsetScrollbars:g,scrollbars:y,...v}=n,[b,w]=I.useState(!1),E=dt({name:"ScrollArea",props:n,classes:BG,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:UHe});return _.jsxs(D_e,{type:c==="never"?"always":c,scrollHideDelay:f,ref:t,scrollbars:y,...E("root"),...v,children:[_.jsx(U_e,{...d,...E("viewport",{style:d==null?void 0:d.style}),ref:h,"data-offset-scrollbars":g===!0?"xy":g||void 0,"data-scrollbars":y||void 0,onScroll:T=>{var S;(S=d==null?void 0:d.onScroll)==null||S.call(d,T),p==null||p({x:T.currentTarget.scrollLeft,y:T.currentTarget.scrollTop})},children:m}),(y==="xy"||y==="x")&&_.jsx(gae,{...E("scrollbar"),orientation:"horizontal","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(yae,{...E("thumb")})}),(y==="xy"||y==="y")&&_.jsx(gae,{...E("scrollbar"),orientation:"vertical","data-hidden":c==="never"||void 0,forceMount:!0,onMouseEnter:()=>w(!0),onMouseLeave:()=>w(!1),children:_.jsx(yae,{...E("thumb")})}),_.jsx(RHe,{...E("corner"),"data-hovered":b||void 0,"data-hidden":c==="never"||void 0})]})});Sm.displayName="@mantine/core/ScrollArea";const UG=Me((e,t)=>{const{children:n,classNames:r,styles:i,scrollbarSize:s,scrollHideDelay:o,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,scrollbars:m,style:g,vars:y,...v}=xe("ScrollAreaAutosize",z_e,e);return _.jsx(me,{...v,ref:t,style:[{display:"flex",overflow:"auto"},g],children:_.jsx(me,{style:{display:"flex",flexDirection:"column",flex:1},children:_.jsx(Sm,{classNames:r,styles:i,scrollHideDelay:o,scrollbarSize:s,type:a,dir:u,offsetScrollbars:l,viewportRef:c,onScrollPositionChange:f,unstyled:d,variant:h,viewportProps:p,vars:y,scrollbars:m,children:n})})})});Sm.classes=BG;UG.displayName="@mantine/core/ScrollAreaAutosize";UG.classes=BG;Sm.Autosize=UG;var V_e={root:"m_87cf2631"};const zHe={__staticSelector:"UnstyledButton"},Ts=qs((e,t)=>{const n=xe("UnstyledButton",zHe,e),{className:r,component:i="button",__staticSelector:s,unstyled:o,classNames:a,styles:u,style:l,...c}=n,f=dt({name:s,props:n,classes:V_e,className:r,style:l,classNames:a,styles:u,unstyled:o});return _.jsx(me,{...f("root",{focusable:!0}),component:i,ref:t,type:i==="button"?"button":void 0,...c})});Ts.classes=V_e;Ts.displayName="@mantine/core/UnstyledButton";var H_e={root:"m_515a97f8"};const VHe={},zG=Me((e,t)=>{const n=xe("VisuallyHidden",VHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,...l}=n,c=dt({name:"VisuallyHidden",classes:H_e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a});return _.jsx(me,{component:"span",ref:t,...c("root"),...l})});zG.classes=H_e;zG.displayName="@mantine/core/VisuallyHidden";var q_e={root:"m_1b7284a3"};const HHe={},qHe=(e,{radius:t,shadow:n})=>({root:{"--paper-radius":t===void 0?void 0:Vr(t),"--paper-shadow":RG(n)}}),dS=qs((e,t)=>{const n=xe("Paper",HHe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,withBorder:u,vars:l,radius:c,shadow:f,variant:d,mod:h,...p}=n,m=dt({name:"Paper",props:n,classes:q_e,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:qHe});return _.jsx(me,{ref:t,mod:[{"data-with-border":u},h],...m("root"),variant:d,...p})});dS.classes=q_e;dS.displayName="@mantine/core/Paper";function hS(e){return W_e(e)?(e.nodeName||"").toLowerCase():"#document"}function Wu(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function Zm(e){var t;return(t=(W_e(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function W_e(e){return e instanceof Node||e instanceof Wu(e).Node}function Ai(e){return e instanceof Element||e instanceof Wu(e).Element}function Ul(e){return e instanceof HTMLElement||e instanceof Wu(e).HTMLElement}function F7(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Wu(e).ShadowRoot}function Tk(e){const{overflow:t,overflowX:n,overflowY:r,display:i}=Lc(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(i)}function WHe(e){return["table","td","th"].includes(hS(e))}function VG(e){const t=HG(),n=Lc(e);return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function GHe(e){let t=Tm(e);for(;Ul(t)&&!K0(t);){if(VG(t))return t;t=Tm(t)}return null}function HG(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function K0(e){return["html","body","#document"].includes(hS(e))}function Lc(e){return Wu(e).getComputedStyle(e)}function o6(e){return Ai(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Tm(e){if(hS(e)==="html")return e;const t=e.assignedSlot||e.parentNode||F7(e)&&e.host||Zm(e);return F7(t)?t.host:t}function G_e(e){const t=Tm(e);return K0(t)?e.ownerDocument?e.ownerDocument.body:e.body:Ul(t)&&Tk(t)?t:G_e(t)}function um(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const i=G_e(e),s=i===((r=e.ownerDocument)==null?void 0:r.body),o=Wu(i);return s?t.concat(o,o.visualViewport||[],Tk(i)?i:[],o.frameElement&&n?um(o.frameElement):[]):t.concat(i,um(i,[],n))}function vae(e){let t=e.activeElement;for(;((n=t)==null||(n=n.shadowRoot)==null?void 0:n.activeElement)!=null;){var n;t=t.shadowRoot.activeElement}return t}function Y2(e,t){if(!e||!t)return!1;const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&F7(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function Y_e(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function K_e(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function YHe(e){return QHe()?!1:!bae()&&e.width===0&&e.height===0||bae()&&e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType==="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0&&e.pointerType==="touch"}function KHe(){return/apple/i.test(navigator.vendor)}function bae(){const e=/android/i;return e.test(Y_e())||e.test(K_e())}function XHe(){return Y_e().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function QHe(){return K_e().includes("jsdom/")}function j7(e,t){const n=["mouse","pen"];return n.push("",void 0),n.includes(e)}function JHe(e){return"nativeEvent"in e}function ZHe(e){return e.matches("html,body")}function v1(e){return(e==null?void 0:e.ownerDocument)||document}function T8(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function cw(e){return"composedPath"in e?e.composedPath()[0]:e.target}const eqe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function tqe(e){return Ul(e)&&e.matches(eqe)}const Cl=Math.min,fa=Math.max,v$=Math.round,GN=Math.floor,X0=e=>({x:e,y:e}),nqe={left:"right",right:"left",bottom:"top",top:"bottom"},rqe={start:"end",end:"start"};function B7(e,t,n){return fa(e,Cl(t,n))}function Am(e,t){return typeof e=="function"?e(t):e}function Qf(e){return e.split("-")[0]}function pS(e){return e.split("-")[1]}function qG(e){return e==="x"?"y":"x"}function WG(e){return e==="y"?"height":"width"}function Wb(e){return["top","bottom"].includes(Qf(e))?"y":"x"}function GG(e){return qG(Wb(e))}function iqe(e,t,n){n===void 0&&(n=!1);const r=pS(e),i=GG(e),s=WG(i);let o=i==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[s]>t.floating[s]&&(o=b$(o)),[o,b$(o)]}function sqe(e){const t=b$(e);return[U7(e),t,U7(t)]}function U7(e){return e.replace(/start|end/g,t=>rqe[t])}function oqe(e,t,n){const r=["left","right"],i=["right","left"],s=["top","bottom"],o=["bottom","top"];switch(e){case"top":case"bottom":return n?t?i:r:t?r:i;case"left":case"right":return t?s:o;default:return[]}}function aqe(e,t,n,r){const i=pS(e);let s=oqe(Qf(e),n==="start",r);return i&&(s=s.map(o=>o+"-"+i),t&&(s=s.concat(s.map(U7)))),s}function b$(e){return e.replace(/left|right|bottom|top/g,t=>nqe[t])}function uqe(e){return{top:0,right:0,bottom:0,left:0,...e}}function YG(e){return typeof e!="number"?uqe(e):{top:e,right:e,bottom:e,left:e}}function XE(e){const{x:t,y:n,width:r,height:i}=e;return{width:r,height:i,top:n,left:t,right:t+r,bottom:n+i,x:t,y:n}}function _ae(e,t,n){let{reference:r,floating:i}=e;const s=Wb(t),o=GG(t),a=WG(o),u=Qf(t),l=s==="y",c=r.x+r.width/2-i.width/2,f=r.y+r.height/2-i.height/2,d=r[a]/2-i[a]/2;let h;switch(u){case"top":h={x:c,y:r.y-i.height};break;case"bottom":h={x:c,y:r.y+r.height};break;case"right":h={x:r.x+r.width,y:f};break;case"left":h={x:r.x-i.width,y:f};break;default:h={x:r.x,y:r.y}}switch(pS(t)){case"start":h[o]-=d*(n&&l?-1:1);break;case"end":h[o]+=d*(n&&l?-1:1);break}return h}const lqe=async(e,t,n)=>{const{placement:r="bottom",strategy:i="absolute",middleware:s=[],platform:o}=n,a=s.filter(Boolean),u=await(o.isRTL==null?void 0:o.isRTL(t));let l=await o.getElementRects({reference:e,floating:t,strategy:i}),{x:c,y:f}=_ae(l,r,u),d=r,h={},p=0;for(let m=0;m<a.length;m++){const{name:g,fn:y}=a[m],{x:v,y:b,data:w,reset:E}=await y({x:c,y:f,initialPlacement:r,placement:d,strategy:i,middlewareData:h,rects:l,platform:o,elements:{reference:e,floating:t}});c=v??c,f=b??f,h={...h,[g]:{...h[g],...w}},E&&p<=50&&(p++,typeof E=="object"&&(E.placement&&(d=E.placement),E.rects&&(l=E.rects===!0?await o.getElementRects({reference:e,floating:t,strategy:i}):E.rects),{x:c,y:f}=_ae(l,d,u)),m=-1)}return{x:c,y:f,placement:d,strategy:i,middlewareData:h}};async function KG(e,t){var n;t===void 0&&(t={});const{x:r,y:i,platform:s,rects:o,elements:a,strategy:u}=e,{boundary:l="clippingAncestors",rootBoundary:c="viewport",elementContext:f="floating",altBoundary:d=!1,padding:h=0}=Am(t,e),p=YG(h),g=a[d?f==="floating"?"reference":"floating":f],y=XE(await s.getClippingRect({element:(n=await(s.isElement==null?void 0:s.isElement(g)))==null||n?g:g.contextElement||await(s.getDocumentElement==null?void 0:s.getDocumentElement(a.floating)),boundary:l,rootBoundary:c,strategy:u})),v=f==="floating"?{x:r,y:i,width:o.floating.width,height:o.floating.height}:o.reference,b=await(s.getOffsetParent==null?void 0:s.getOffsetParent(a.floating)),w=await(s.isElement==null?void 0:s.isElement(b))?await(s.getScale==null?void 0:s.getScale(b))||{x:1,y:1}:{x:1,y:1},E=XE(s.convertOffsetParentRelativeRectToViewportRelativeRect?await s.convertOffsetParentRelativeRectToViewportRelativeRect({elements:a,rect:v,offsetParent:b,strategy:u}):v);return{top:(y.top-E.top+p.top)/w.y,bottom:(E.bottom-y.bottom+p.bottom)/w.y,left:(y.left-E.left+p.left)/w.x,right:(E.right-y.right+p.right)/w.x}}const cqe=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:i,rects:s,platform:o,elements:a,middlewareData:u}=t,{element:l,padding:c=0}=Am(e,t)||{};if(l==null)return{};const f=YG(c),d={x:n,y:r},h=GG(i),p=WG(h),m=await o.getDimensions(l),g=h==="y",y=g?"top":"left",v=g?"bottom":"right",b=g?"clientHeight":"clientWidth",w=s.reference[p]+s.reference[h]-d[h]-s.floating[p],E=d[h]-s.reference[h],T=await(o.getOffsetParent==null?void 0:o.getOffsetParent(l));let S=T?T[b]:0;(!S||!await(o.isElement==null?void 0:o.isElement(T)))&&(S=a.floating[b]||s.floating[p]);const A=w/2-E/2,C=S/2-m[p]/2-1,k=Cl(f[y],C),N=Cl(f[v],C),D=k,O=S-m[p]-N,$=S/2-m[p]/2+A,F=B7(D,$,O),M=!u.arrow&&pS(i)!=null&&$!==F&&s.reference[p]/2-($<D?k:N)-m[p]/2<0,B=M?$<D?$-D:$-O:0;return{[h]:d[h]+B,data:{[h]:F,centerOffset:$-F-B,...M&&{alignmentOffset:B}},reset:M}}}),fqe=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:i,middlewareData:s,rects:o,initialPlacement:a,platform:u,elements:l}=t,{mainAxis:c=!0,crossAxis:f=!0,fallbackPlacements:d,fallbackStrategy:h="bestFit",fallbackAxisSideDirection:p="none",flipAlignment:m=!0,...g}=Am(e,t);if((n=s.arrow)!=null&&n.alignmentOffset)return{};const y=Qf(i),v=Qf(a)===a,b=await(u.isRTL==null?void 0:u.isRTL(l.floating)),w=d||(v||!m?[b$(a)]:sqe(a));!d&&p!=="none"&&w.push(...aqe(a,m,p,b));const E=[a,...w],T=await KG(t,g),S=[];let A=((r=s.flip)==null?void 0:r.overflows)||[];if(c&&S.push(T[y]),f){const D=iqe(i,o,b);S.push(T[D[0]],T[D[1]])}if(A=[...A,{placement:i,overflows:S}],!S.every(D=>D<=0)){var C,k;const D=(((C=s.flip)==null?void 0:C.index)||0)+1,O=E[D];if(O)return{data:{index:D,overflows:A},reset:{placement:O}};let $=(k=A.filter(F=>F.overflows[0]<=0).sort((F,M)=>F.overflows[1]-M.overflows[1])[0])==null?void 0:k.placement;if(!$)switch(h){case"bestFit":{var N;const F=(N=A.map(M=>[M.placement,M.overflows.filter(B=>B>0).reduce((B,U)=>B+U,0)]).sort((M,B)=>M[1]-B[1])[0])==null?void 0:N[0];F&&($=F);break}case"initialPlacement":$=a;break}if(i!==$)return{reset:{placement:$}}}return{}}}};function X_e(e){const t=Cl(...e.map(s=>s.left)),n=Cl(...e.map(s=>s.top)),r=fa(...e.map(s=>s.right)),i=fa(...e.map(s=>s.bottom));return{x:t,y:n,width:r-t,height:i-n}}function dqe(e){const t=e.slice().sort((i,s)=>i.y-s.y),n=[];let r=null;for(let i=0;i<t.length;i++){const s=t[i];!r||s.y-r.y>r.height/2?n.push([s]):n[n.length-1].push(s),r=s}return n.map(i=>XE(X_e(i)))}const hqe=function(e){return e===void 0&&(e={}),{name:"inline",options:e,async fn(t){const{placement:n,elements:r,rects:i,platform:s,strategy:o}=t,{padding:a=2,x:u,y:l}=Am(e,t),c=Array.from(await(s.getClientRects==null?void 0:s.getClientRects(r.reference))||[]),f=dqe(c),d=XE(X_e(c)),h=YG(a);function p(){if(f.length===2&&f[0].left>f[1].right&&u!=null&&l!=null)return f.find(g=>u>g.left-h.left&&u<g.right+h.right&&l>g.top-h.top&&l<g.bottom+h.bottom)||d;if(f.length>=2){if(Wb(n)==="y"){const k=f[0],N=f[f.length-1],D=Qf(n)==="top",O=k.top,$=N.bottom,F=D?k.left:N.left,M=D?k.right:N.right,B=M-F,U=$-O;return{top:O,bottom:$,left:F,right:M,width:B,height:U,x:F,y:O}}const g=Qf(n)==="left",y=fa(...f.map(k=>k.right)),v=Cl(...f.map(k=>k.left)),b=f.filter(k=>g?k.left===v:k.right===y),w=b[0].top,E=b[b.length-1].bottom,T=v,S=y,A=S-T,C=E-w;return{top:w,bottom:E,left:T,right:S,width:A,height:C,x:T,y:w}}return d}const m=await s.getElementRects({reference:{getBoundingClientRect:p},floating:r.floating,strategy:o});return i.reference.x!==m.reference.x||i.reference.y!==m.reference.y||i.reference.width!==m.reference.width||i.reference.height!==m.reference.height?{reset:{rects:m}}:{}}}};async function pqe(e,t){const{placement:n,platform:r,elements:i}=e,s=await(r.isRTL==null?void 0:r.isRTL(i.floating)),o=Qf(n),a=pS(n),u=Wb(n)==="y",l=["left","top"].includes(o)?-1:1,c=s&&u?-1:1,f=Am(t,e);let{mainAxis:d,crossAxis:h,alignmentAxis:p}=typeof f=="number"?{mainAxis:f,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...f};return a&&typeof p=="number"&&(h=a==="end"?p*-1:p),u?{x:h*c,y:d*l}:{x:d*l,y:h*c}}const mqe=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:i,y:s,placement:o,middlewareData:a}=t,u=await pqe(t,e);return o===((n=a.offset)==null?void 0:n.placement)&&(r=a.arrow)!=null&&r.alignmentOffset?{}:{x:i+u.x,y:s+u.y,data:{...u,placement:o}}}}},gqe=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:i}=t,{mainAxis:s=!0,crossAxis:o=!1,limiter:a={fn:g=>{let{x:y,y:v}=g;return{x:y,y:v}}},...u}=Am(e,t),l={x:n,y:r},c=await KG(t,u),f=Wb(Qf(i)),d=qG(f);let h=l[d],p=l[f];if(s){const g=d==="y"?"top":"left",y=d==="y"?"bottom":"right",v=h+c[g],b=h-c[y];h=B7(v,h,b)}if(o){const g=f==="y"?"top":"left",y=f==="y"?"bottom":"right",v=p+c[g],b=p-c[y];p=B7(v,p,b)}const m=a.fn({...t,[d]:h,[f]:p});return{...m,data:{x:m.x-n,y:m.y-r}}}}},yqe=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:i,rects:s,middlewareData:o}=t,{offset:a=0,mainAxis:u=!0,crossAxis:l=!0}=Am(e,t),c={x:n,y:r},f=Wb(i),d=qG(f);let h=c[d],p=c[f];const m=Am(a,t),g=typeof m=="number"?{mainAxis:m,crossAxis:0}:{mainAxis:0,crossAxis:0,...m};if(u){const b=d==="y"?"height":"width",w=s.reference[d]-s.floating[b]+g.mainAxis,E=s.reference[d]+s.reference[b]-g.mainAxis;h<w?h=w:h>E&&(h=E)}if(l){var y,v;const b=d==="y"?"width":"height",w=["top","left"].includes(Qf(i)),E=s.reference[f]-s.floating[b]+(w&&((y=o.offset)==null?void 0:y[f])||0)+(w?0:g.crossAxis),T=s.reference[f]+s.reference[b]+(w?0:((v=o.offset)==null?void 0:v[f])||0)-(w?g.crossAxis:0);p<E?p=E:p>T&&(p=T)}return{[d]:h,[f]:p}}}},vqe=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){const{placement:n,rects:r,platform:i,elements:s}=t,{apply:o=()=>{},...a}=Am(e,t),u=await KG(t,a),l=Qf(n),c=pS(n),f=Wb(n)==="y",{width:d,height:h}=r.floating;let p,m;l==="top"||l==="bottom"?(p=l,m=c===(await(i.isRTL==null?void 0:i.isRTL(s.floating))?"start":"end")?"left":"right"):(m=l,p=c==="end"?"top":"bottom");const g=h-u.top-u.bottom,y=d-u.left-u.right,v=Cl(h-u[p],g),b=Cl(d-u[m],y),w=!t.middlewareData.shift;let E=v,T=b;if(f?T=c||w?Cl(b,y):y:E=c||w?Cl(v,g):g,w&&!c){const A=fa(u.left,0),C=fa(u.right,0),k=fa(u.top,0),N=fa(u.bottom,0);f?T=d-2*(A!==0||C!==0?A+C:fa(u.left,u.right)):E=h-2*(k!==0||N!==0?k+N:fa(u.top,u.bottom))}await o({...t,availableWidth:T,availableHeight:E});const S=await i.getDimensions(s.floating);return d!==S.width||h!==S.height?{reset:{rects:!0}}:{}}}};function Q_e(e){const t=Lc(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const i=Ul(e),s=i?e.offsetWidth:n,o=i?e.offsetHeight:r,a=v$(n)!==s||v$(r)!==o;return a&&(n=s,r=o),{width:n,height:r,$:a}}function XG(e){return Ai(e)?e:e.contextElement}function lE(e){const t=XG(e);if(!Ul(t))return X0(1);const n=t.getBoundingClientRect(),{width:r,height:i,$:s}=Q_e(t);let o=(s?v$(n.width):n.width)/r,a=(s?v$(n.height):n.height)/i;return(!o||!Number.isFinite(o))&&(o=1),(!a||!Number.isFinite(a))&&(a=1),{x:o,y:a}}const bqe=X0(0);function J_e(e){const t=Wu(e);return!HG()||!t.visualViewport?bqe:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function _qe(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Wu(e)?!1:t}function rb(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const i=e.getBoundingClientRect(),s=XG(e);let o=X0(1);t&&(r?Ai(r)&&(o=lE(r)):o=lE(e));const a=_qe(s,n,r)?J_e(s):X0(0);let u=(i.left+a.x)/o.x,l=(i.top+a.y)/o.y,c=i.width/o.x,f=i.height/o.y;if(s){const d=Wu(s),h=r&&Ai(r)?Wu(r):r;let p=d,m=p.frameElement;for(;m&&r&&h!==p;){const g=lE(m),y=m.getBoundingClientRect(),v=Lc(m),b=y.left+(m.clientLeft+parseFloat(v.paddingLeft))*g.x,w=y.top+(m.clientTop+parseFloat(v.paddingTop))*g.y;u*=g.x,l*=g.y,c*=g.x,f*=g.y,u+=b,l+=w,p=Wu(m),m=p.frameElement}}return XE({width:c,height:f,x:u,y:l})}const wqe=[":popover-open",":modal"];function QG(e){return wqe.some(t=>{try{return e.matches(t)}catch{return!1}})}function Eqe(e){let{elements:t,rect:n,offsetParent:r,strategy:i}=e;const s=i==="fixed",o=Zm(r),a=t?QG(t.floating):!1;if(r===o||a&&s)return n;let u={scrollLeft:0,scrollTop:0},l=X0(1);const c=X0(0),f=Ul(r);if((f||!f&&!s)&&((hS(r)!=="body"||Tk(o))&&(u=o6(r)),Ul(r))){const d=rb(r);l=lE(r),c.x=d.x+r.clientLeft,c.y=d.y+r.clientTop}return{width:n.width*l.x,height:n.height*l.y,x:n.x*l.x-u.scrollLeft*l.x+c.x,y:n.y*l.y-u.scrollTop*l.y+c.y}}function xqe(e){return Array.from(e.getClientRects())}function Z_e(e){return rb(Zm(e)).left+o6(e).scrollLeft}function Sqe(e){const t=Zm(e),n=o6(e),r=e.ownerDocument.body,i=fa(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),s=fa(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let o=-n.scrollLeft+Z_e(e);const a=-n.scrollTop;return Lc(r).direction==="rtl"&&(o+=fa(t.clientWidth,r.clientWidth)-i),{width:i,height:s,x:o,y:a}}function Tqe(e,t){const n=Wu(e),r=Zm(e),i=n.visualViewport;let s=r.clientWidth,o=r.clientHeight,a=0,u=0;if(i){s=i.width,o=i.height;const l=HG();(!l||l&&t==="fixed")&&(a=i.offsetLeft,u=i.offsetTop)}return{width:s,height:o,x:a,y:u}}function Aqe(e,t){const n=rb(e,!0,t==="fixed"),r=n.top+e.clientTop,i=n.left+e.clientLeft,s=Ul(e)?lE(e):X0(1),o=e.clientWidth*s.x,a=e.clientHeight*s.y,u=i*s.x,l=r*s.y;return{width:o,height:a,x:u,y:l}}function wae(e,t,n){let r;if(t==="viewport")r=Tqe(e,n);else if(t==="document")r=Sqe(Zm(e));else if(Ai(t))r=Aqe(t,n);else{const i=J_e(e);r={...t,x:t.x-i.x,y:t.y-i.y}}return XE(r)}function ewe(e,t){const n=Tm(e);return n===t||!Ai(n)||K0(n)?!1:Lc(n).position==="fixed"||ewe(n,t)}function Cqe(e,t){const n=t.get(e);if(n)return n;let r=um(e,[],!1).filter(a=>Ai(a)&&hS(a)!=="body"),i=null;const s=Lc(e).position==="fixed";let o=s?Tm(e):e;for(;Ai(o)&&!K0(o);){const a=Lc(o),u=VG(o);!u&&a.position==="fixed"&&(i=null),(s?!u&&!i:!u&&a.position==="static"&&!!i&&["absolute","fixed"].includes(i.position)||Tk(o)&&!u&&ewe(e,o))?r=r.filter(c=>c!==o):i=a,o=Tm(o)}return t.set(e,r),r}function Iqe(e){let{element:t,boundary:n,rootBoundary:r,strategy:i}=e;const o=[...n==="clippingAncestors"?QG(t)?[]:Cqe(t,this._c):[].concat(n),r],a=o[0],u=o.reduce((l,c)=>{const f=wae(t,c,i);return l.top=fa(f.top,l.top),l.right=Cl(f.right,l.right),l.bottom=Cl(f.bottom,l.bottom),l.left=fa(f.left,l.left),l},wae(t,a,i));return{width:u.right-u.left,height:u.bottom-u.top,x:u.left,y:u.top}}function kqe(e){const{width:t,height:n}=Q_e(e);return{width:t,height:n}}function Rqe(e,t,n){const r=Ul(t),i=Zm(t),s=n==="fixed",o=rb(e,!0,s,t);let a={scrollLeft:0,scrollTop:0};const u=X0(0);if(r||!r&&!s)if((hS(t)!=="body"||Tk(i))&&(a=o6(t)),r){const f=rb(t,!0,s,t);u.x=f.x+t.clientLeft,u.y=f.y+t.clientTop}else i&&(u.x=Z_e(i));const l=o.left+a.scrollLeft-u.x,c=o.top+a.scrollTop-u.y;return{x:l,y:c,width:o.width,height:o.height}}function A8(e){return Lc(e).position==="static"}function Eae(e,t){return!Ul(e)||Lc(e).position==="fixed"?null:t?t(e):e.offsetParent}function twe(e,t){const n=Wu(e);if(QG(e))return n;if(!Ul(e)){let i=Tm(e);for(;i&&!K0(i);){if(Ai(i)&&!A8(i))return i;i=Tm(i)}return n}let r=Eae(e,t);for(;r&&WHe(r)&&A8(r);)r=Eae(r,t);return r&&K0(r)&&A8(r)&&!VG(r)?n:r||GHe(e)||n}const Nqe=async function(e){const t=this.getOffsetParent||twe,n=this.getDimensions,r=await n(e.floating);return{reference:Rqe(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function Pqe(e){return Lc(e).direction==="rtl"}const Oqe={convertOffsetParentRelativeRectToViewportRelativeRect:Eqe,getDocumentElement:Zm,getClippingRect:Iqe,getOffsetParent:twe,getElementRects:Nqe,getClientRects:xqe,getDimensions:kqe,getScale:lE,isElement:Ai,isRTL:Pqe};function Dqe(e,t){let n=null,r;const i=Zm(e);function s(){var a;clearTimeout(r),(a=n)==null||a.disconnect(),n=null}function o(a,u){a===void 0&&(a=!1),u===void 0&&(u=1),s();const{left:l,top:c,width:f,height:d}=e.getBoundingClientRect();if(a||t(),!f||!d)return;const h=GN(c),p=GN(i.clientWidth-(l+f)),m=GN(i.clientHeight-(c+d)),g=GN(l),v={rootMargin:-h+"px "+-p+"px "+-m+"px "+-g+"px",threshold:fa(0,Cl(1,u))||1};let b=!0;function w(E){const T=E[0].intersectionRatio;if(T!==u){if(!b)return o();T?o(!1,T):r=setTimeout(()=>{o(!1,1e-7)},1e3)}b=!1}try{n=new IntersectionObserver(w,{...v,root:i.ownerDocument})}catch{n=new IntersectionObserver(w,v)}n.observe(e)}return o(!0),s}function $qe(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:i=!0,ancestorResize:s=!0,elementResize:o=typeof ResizeObserver=="function",layoutShift:a=typeof IntersectionObserver=="function",animationFrame:u=!1}=r,l=XG(e),c=i||s?[...l?um(l):[],...um(t)]:[];c.forEach(y=>{i&&y.addEventListener("scroll",n,{passive:!0}),s&&y.addEventListener("resize",n)});const f=l&&a?Dqe(l,n):null;let d=-1,h=null;o&&(h=new ResizeObserver(y=>{let[v]=y;v&&v.target===l&&h&&(h.unobserve(t),cancelAnimationFrame(d),d=requestAnimationFrame(()=>{var b;(b=h)==null||b.observe(t)})),n()}),l&&!u&&h.observe(l),h.observe(t));let p,m=u?rb(e):null;u&&g();function g(){const y=rb(e);m&&(y.x!==m.x||y.y!==m.y||y.width!==m.width||y.height!==m.height)&&n(),m=y,p=requestAnimationFrame(g)}return n(),()=>{var y;c.forEach(v=>{i&&v.removeEventListener("scroll",n),s&&v.removeEventListener("resize",n)}),f==null||f(),(y=h)==null||y.disconnect(),h=null,u&&cancelAnimationFrame(p)}}const Mqe=mqe,Lqe=gqe,Fqe=fqe,jqe=vqe,xae=cqe,Bqe=hqe,Uqe=yqe,zqe=(e,t,n)=>{const r=new Map,i={platform:Oqe,...n},s={...i.platform,_c:r};return lqe(e,t,{...i,platform:s})};var NO=typeof document<"u"?I.useLayoutEffect:I.useEffect;function _$(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,i;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!_$(e[r],t[r]))return!1;return!0}if(i=Object.keys(e),n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!(s==="_owner"&&e.$$typeof)&&!_$(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function nwe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function Sae(e,t){const n=nwe(e);return Math.round(t*n)/n}function Tae(e){const t=I.useRef(e);return NO(()=>{t.current=e}),t}function Vqe(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:i,elements:{reference:s,floating:o}={},transform:a=!0,whileElementsMounted:u,open:l}=e,[c,f]=I.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[d,h]=I.useState(r);_$(d,r)||h(r);const[p,m]=I.useState(null),[g,y]=I.useState(null),v=I.useCallback(B=>{B!==T.current&&(T.current=B,m(B))},[]),b=I.useCallback(B=>{B!==S.current&&(S.current=B,y(B))},[]),w=s||p,E=o||g,T=I.useRef(null),S=I.useRef(null),A=I.useRef(c),C=u!=null,k=Tae(u),N=Tae(i),D=I.useCallback(()=>{if(!T.current||!S.current)return;const B={placement:t,strategy:n,middleware:d};N.current&&(B.platform=N.current),zqe(T.current,S.current,B).then(U=>{const H={...U,isPositioned:!0};O.current&&!_$(A.current,H)&&(A.current=H,xk.flushSync(()=>{f(H)}))})},[d,t,n,N]);NO(()=>{l===!1&&A.current.isPositioned&&(A.current.isPositioned=!1,f(B=>({...B,isPositioned:!1})))},[l]);const O=I.useRef(!1);NO(()=>(O.current=!0,()=>{O.current=!1}),[]),NO(()=>{if(w&&(T.current=w),E&&(S.current=E),w&&E){if(k.current)return k.current(w,E,D);D()}},[w,E,D,k,C]);const $=I.useMemo(()=>({reference:T,floating:S,setReference:v,setFloating:b}),[v,b]),F=I.useMemo(()=>({reference:w,floating:E}),[w,E]),M=I.useMemo(()=>{const B={position:n,left:0,top:0};if(!F.floating)return B;const U=Sae(F.floating,c.x),H=Sae(F.floating,c.y);return a?{...B,transform:"translate("+U+"px, "+H+"px)",...nwe(F.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:U,top:H}},[n,a,F.floating,c.x,c.y]);return I.useMemo(()=>({...c,update:D,refs:$,elements:F,floatingStyles:M}),[c,D,$,F,M])}const Hqe=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:i}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?xae({element:r.current,padding:i}).fn(n):{}:r?xae({element:r,padding:i}).fn(n):{}}}},rwe=(e,t)=>({...Mqe(e),options:[e,t]}),JG=(e,t)=>({...Lqe(e),options:[e,t]}),Aae=(e,t)=>({...Uqe(e),options:[e,t]}),z7=(e,t)=>({...Fqe(e),options:[e,t]}),qqe=(e,t)=>({...jqe(e),options:[e,t]}),V7=(e,t)=>({...Bqe(e),options:[e,t]}),iwe=(e,t)=>({...Hqe(e),options:[e,t]}),swe={...zD},Wqe=swe.useInsertionEffect,Gqe=Wqe||(e=>e());function Qg(e){const t=I.useRef(()=>{});return Gqe(()=>{t.current=e}),I.useCallback(function(){for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return t.current==null?void 0:t.current(...r)},[])}var dh=typeof document<"u"?I.useLayoutEffect:I.useEffect;let Cae=!1,Yqe=0;const Iae=()=>"floating-ui-"+Math.random().toString(36).slice(2,6)+Yqe++;function Kqe(){const[e,t]=I.useState(()=>Cae?Iae():void 0);return dh(()=>{e==null&&t(Iae())},[]),I.useEffect(()=>{Cae=!0},[]),e}const Xqe=swe.useId,owe=Xqe||Kqe;function Qqe(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(i=>i(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(i=>i!==n))||[])}}}const Jqe=I.createContext(null),Zqe=I.createContext(null),ZG=()=>{var e;return((e=I.useContext(Jqe))==null?void 0:e.id)||null},eY=()=>I.useContext(Zqe);function tY(e){return"data-floating-ui-"+e}function kae(e){const t=I.useRef(e);return dh(()=>{t.current=e}),t}const Rae=tY("safe-polygon");function PO(e,t,n){return n&&!j7(n)?0:typeof e=="number"?e:e==null?void 0:e[t]}function eWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:i,events:s,elements:{domReference:o,floating:a}}=e,{enabled:u=!0,delay:l=0,handleClose:c=null,mouseOnly:f=!1,restMs:d=0,move:h=!0}=t,p=eY(),m=ZG(),g=kae(c),y=kae(l),v=I.useRef(),b=I.useRef(-1),w=I.useRef(),E=I.useRef(-1),T=I.useRef(!0),S=I.useRef(!1),A=I.useRef(()=>{}),C=I.useCallback(()=>{var O;const $=(O=i.current.openEvent)==null?void 0:O.type;return($==null?void 0:$.includes("mouse"))&&$!=="mousedown"},[i]);I.useEffect(()=>{if(!u)return;function O($){let{open:F}=$;F||(clearTimeout(b.current),clearTimeout(E.current),T.current=!0)}return s.on("openchange",O),()=>{s.off("openchange",O)}},[u,s]),I.useEffect(()=>{if(!u||!g.current||!n)return;function O(F){C()&&r(!1,F,"hover")}const $=v1(a).documentElement;return $.addEventListener("mouseleave",O),()=>{$.removeEventListener("mouseleave",O)}},[a,n,r,u,g,C]);const k=I.useCallback(function(O,$,F){$===void 0&&($=!0),F===void 0&&(F="hover");const M=PO(y.current,"close",v.current);M&&!w.current?(clearTimeout(b.current),b.current=window.setTimeout(()=>r(!1,O,F),M)):$&&(clearTimeout(b.current),r(!1,O,F))},[y,r]),N=Qg(()=>{A.current(),w.current=void 0}),D=Qg(()=>{if(S.current){const O=v1(a).body;O.style.pointerEvents="",O.removeAttribute(Rae),S.current=!1}});return I.useEffect(()=>{if(!u)return;function O(){return i.current.openEvent?["click","mousedown"].includes(i.current.openEvent.type):!1}function $(B){if(clearTimeout(b.current),T.current=!1,f&&!j7(v.current)||d>0&&!PO(y.current,"open"))return;const U=PO(y.current,"open",v.current);U?b.current=window.setTimeout(()=>{r(!0,B,"hover")},U):r(!0,B,"hover")}function F(B){if(O())return;A.current();const U=v1(a);if(clearTimeout(E.current),g.current&&i.current.floatingContext){n||clearTimeout(b.current),w.current=g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){D(),N(),k(B,!0,"safe-polygon")}});const P=w.current;U.addEventListener("mousemove",P),A.current=()=>{U.removeEventListener("mousemove",P)};return}(v.current==="touch"?!Y2(a,B.relatedTarget):!0)&&k(B)}function M(B){O()||i.current.floatingContext&&(g.current==null||g.current({...i.current.floatingContext,tree:p,x:B.clientX,y:B.clientY,onClose(){D(),N(),k(B)}})(B))}if(Ai(o)){const B=o;return n&&B.addEventListener("mouseleave",M),a==null||a.addEventListener("mouseleave",M),h&&B.addEventListener("mousemove",$,{once:!0}),B.addEventListener("mouseenter",$),B.addEventListener("mouseleave",F),()=>{n&&B.removeEventListener("mouseleave",M),a==null||a.removeEventListener("mouseleave",M),h&&B.removeEventListener("mousemove",$),B.removeEventListener("mouseenter",$),B.removeEventListener("mouseleave",F)}}},[o,a,u,e,f,d,h,k,N,D,r,n,p,y,g,i]),dh(()=>{var O;if(u&&n&&(O=g.current)!=null&&O.__options.blockPointerEvents&&C()){const F=v1(a).body;if(F.setAttribute(Rae,""),F.style.pointerEvents="none",S.current=!0,Ai(o)&&a){var $;const M=o,B=p==null||($=p.nodesRef.current.find(U=>U.id===m))==null||($=$.context)==null?void 0:$.elements.floating;return B&&(B.style.pointerEvents=""),M.style.pointerEvents="auto",a.style.pointerEvents="auto",()=>{M.style.pointerEvents="",a.style.pointerEvents=""}}}},[u,n,m,a,o,p,g,C]),dh(()=>{n||(v.current=void 0,N(),D())},[n,N,D]),I.useEffect(()=>()=>{N(),clearTimeout(b.current),clearTimeout(E.current),D()},[u,o,N,D]),I.useMemo(()=>{if(!u)return{};function O($){v.current=$.pointerType}return{reference:{onPointerDown:O,onPointerEnter:O,onMouseMove($){function F(){T.current||r(!0,$.nativeEvent,"hover")}f&&!j7(v.current)||n||d===0||(clearTimeout(E.current),v.current==="touch"?F():E.current=window.setTimeout(F,d))}},floating:{onMouseEnter(){clearTimeout(b.current)},onMouseLeave($){k($.nativeEvent,!1)}}}},[u,f,n,d,r,k])}const H7=()=>{},awe=I.createContext({delay:0,initialDelay:0,timeoutMs:0,currentId:null,setCurrentId:H7,setState:H7,isInstantPhase:!1}),uwe=()=>I.useContext(awe);function tWe(e){const{children:t,delay:n,timeoutMs:r=0}=e,[i,s]=I.useReducer((u,l)=>({...u,...l}),{delay:n,timeoutMs:r,initialDelay:n,currentId:null,isInstantPhase:!1}),o=I.useRef(null),a=I.useCallback(u=>{s({currentId:u})},[]);return dh(()=>{i.currentId?o.current===null?o.current=i.currentId:i.isInstantPhase||s({isInstantPhase:!0}):(i.isInstantPhase&&s({isInstantPhase:!1}),o.current=null)},[i.currentId,i.isInstantPhase]),I.createElement(awe.Provider,{value:I.useMemo(()=>({...i,setState:s,setCurrentId:a}),[i,a])},t)}function nWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,floatingId:i}=e,{id:s}=t,o=s??i,a=uwe(),{currentId:u,setCurrentId:l,initialDelay:c,setState:f,timeoutMs:d}=a;return dh(()=>{u&&(f({delay:{open:1,close:PO(c,"close")}}),u!==o&&r(!1))},[o,r,f,u,c]),dh(()=>{function h(){r(!1),f({delay:c,currentId:null})}if(u&&!n&&u===o){if(d){const p=window.setTimeout(h,d);return()=>{clearTimeout(p)}}h()}},[n,f,u,o,r,c,d]),dh(()=>{l===H7||!n||l(o)},[n,l,o]),a}function C8(e,t){let n=e.filter(i=>{var s;return i.parentId===t&&((s=i.context)==null?void 0:s.open)}),r=n;for(;r.length;)r=e.filter(i=>{var s;return(s=r)==null?void 0:s.some(o=>{var a;return i.parentId===o.id&&((a=i.context)==null?void 0:a.open)})}),n=n.concat(r);return n}const rWe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},iWe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},Nae=e=>{var t,n;return{escapeKey:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePress:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function sWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,elements:{reference:i,domReference:s,floating:o},dataRef:a}=e,{enabled:u=!0,escapeKey:l=!0,outsidePress:c=!0,outsidePressEvent:f="pointerdown",referencePress:d=!1,referencePressEvent:h="pointerdown",ancestorScroll:p=!1,bubbles:m,capture:g}=t,y=eY(),v=Qg(typeof c=="function"?c:()=>!1),b=typeof c=="function"?v:c,w=I.useRef(!1),E=I.useRef(!1),{escapeKey:T,outsidePress:S}=Nae(m),{escapeKey:A,outsidePress:C}=Nae(g),k=Qg($=>{var F;if(!n||!u||!l||$.key!=="Escape")return;const M=(F=a.current.floatingContext)==null?void 0:F.nodeId,B=y?C8(y.nodesRef.current,M):[];if(!T&&($.stopPropagation(),B.length>0)){let U=!0;if(B.forEach(H=>{var P;if((P=H.context)!=null&&P.open&&!H.context.dataRef.current.__escapeKeyBubbles){U=!1;return}}),!U)return}r(!1,JHe($)?$.nativeEvent:$,"escape-key")}),N=Qg($=>{var F;const M=()=>{var B;k($),(B=cw($))==null||B.removeEventListener("keydown",M)};(F=cw($))==null||F.addEventListener("keydown",M)}),D=Qg($=>{var F;const M=w.current;w.current=!1;const B=E.current;if(E.current=!1,f==="click"&&B||M||typeof b=="function"&&!b($))return;const U=cw($),H="["+tY("inert")+"]",P=v1(o).querySelectorAll(H);let z=Ai(U)?U:null;for(;z&&!K0(z);){const G=Tm(z);if(K0(G)||!Ai(G))break;z=G}if(P.length&&Ai(U)&&!ZHe(U)&&!Y2(U,o)&&Array.from(P).every(G=>!Y2(z,G)))return;if(Ul(U)&&o){const G=U.clientWidth>0&&U.scrollWidth>U.clientWidth,ne=U.clientHeight>0&&U.scrollHeight>U.clientHeight;let ce=ne&&$.offsetX>U.clientWidth;if(ne&&Lc(U).direction==="rtl"&&(ce=$.offsetX<=U.offsetWidth-U.clientWidth),ce||G&&$.offsetY>U.clientHeight)return}const W=(F=a.current.floatingContext)==null?void 0:F.nodeId,j=y&&C8(y.nodesRef.current,W).some(G=>{var ne;return T8($,(ne=G.context)==null?void 0:ne.elements.floating)});if(T8($,o)||T8($,s)||j)return;const q=y?C8(y.nodesRef.current,W):[];if(q.length>0){let G=!0;if(q.forEach(ne=>{var ce;if((ce=ne.context)!=null&&ce.open&&!ne.context.dataRef.current.__outsidePressBubbles){G=!1;return}}),!G)return}r(!1,$,"outside-press")}),O=Qg($=>{var F;const M=()=>{var B;D($),(B=cw($))==null||B.removeEventListener(f,M)};(F=cw($))==null||F.addEventListener(f,M)});return I.useEffect(()=>{if(!n||!u)return;a.current.__escapeKeyBubbles=T,a.current.__outsidePressBubbles=S;function $(B){r(!1,B,"ancestor-scroll")}const F=v1(o);l&&F.addEventListener("keydown",A?N:k,A),b&&F.addEventListener(f,C?O:D,C);let M=[];return p&&(Ai(s)&&(M=um(s)),Ai(o)&&(M=M.concat(um(o))),!Ai(i)&&i&&i.contextElement&&(M=M.concat(um(i.contextElement)))),M=M.filter(B=>{var U;return B!==((U=F.defaultView)==null?void 0:U.visualViewport)}),M.forEach(B=>{B.addEventListener("scroll",$,{passive:!0})}),()=>{l&&F.removeEventListener("keydown",A?N:k,A),b&&F.removeEventListener(f,C?O:D,C),M.forEach(B=>{B.removeEventListener("scroll",$)})}},[a,o,s,i,l,b,f,n,r,p,u,T,S,k,A,N,D,C,O]),I.useEffect(()=>{w.current=!1},[b,f]),I.useMemo(()=>u?{reference:{onKeyDown:k,[rWe[h]]:$=>{d&&r(!1,$.nativeEvent,"reference-press")}},floating:{onKeyDown:k,onMouseDown(){E.current=!0},onMouseUp(){E.current=!0},[iWe[f]]:()=>{w.current=!0}}}:{},[u,d,f,h,r,k])}function oWe(e){const{open:t=!1,onOpenChange:n,elements:r}=e,i=owe(),s=I.useRef({}),[o]=I.useState(()=>Qqe()),a=ZG()!=null,[u,l]=I.useState(r.reference),c=Qg((h,p,m)=>{s.current.openEvent=h?p:void 0,o.emit("openchange",{open:h,event:p,reason:m,nested:a}),n==null||n(h,p,m)}),f=I.useMemo(()=>({setPositionReference:l}),[]),d=I.useMemo(()=>({reference:u||r.reference||null,floating:r.floating||null,domReference:r.reference}),[u,r.reference,r.floating]);return I.useMemo(()=>({dataRef:s,open:t,onOpenChange:c,elements:d,events:o,floatingId:i,refs:f}),[t,c,d,o,i,f])}function nY(e){e===void 0&&(e={});const{nodeId:t}=e,n=oWe({...e,elements:{reference:null,floating:null,...e.elements}}),r=e.rootContext||n,i=r.elements,[s,o]=I.useState(null),[a,u]=I.useState(null),c=(i==null?void 0:i.reference)||s,f=I.useRef(null),d=eY();dh(()=>{c&&(f.current=c)},[c]);const h=Vqe({...e,elements:{...i,...a&&{reference:a}}}),p=I.useCallback(b=>{const w=Ai(b)?{getBoundingClientRect:()=>b.getBoundingClientRect(),contextElement:b}:b;u(w),h.refs.setReference(w)},[h.refs]),m=I.useCallback(b=>{(Ai(b)||b===null)&&(f.current=b,o(b)),(Ai(h.refs.reference.current)||h.refs.reference.current===null||b!==null&&!Ai(b))&&h.refs.setReference(b)},[h.refs]),g=I.useMemo(()=>({...h.refs,setReference:m,setPositionReference:p,domReference:f}),[h.refs,m,p]),y=I.useMemo(()=>({...h.elements,domReference:c}),[h.elements,c]),v=I.useMemo(()=>({...h,...r,refs:g,elements:y,nodeId:t}),[h,g,y,t,r]);return dh(()=>{r.dataRef.current.floatingContext=v;const b=d==null?void 0:d.nodesRef.current.find(w=>w.id===t);b&&(b.context=v)}),I.useMemo(()=>({...h,context:v,refs:g,elements:y}),[h,g,y,v])}function aWe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:i,dataRef:s,elements:{domReference:o}}=e,{enabled:a=!0,visibleOnly:u=!0}=t,l=I.useRef(!1),c=I.useRef(),f=I.useRef(!0);return I.useEffect(()=>{if(!a)return;const d=Wu(o);function h(){!n&&Ul(o)&&o===vae(v1(o))&&(l.current=!0)}function p(){f.current=!0}return d.addEventListener("blur",h),d.addEventListener("keydown",p,!0),()=>{d.removeEventListener("blur",h),d.removeEventListener("keydown",p,!0)}},[o,n,a]),I.useEffect(()=>{if(!a)return;function d(h){let{reason:p}=h;(p==="reference-press"||p==="escape-key")&&(l.current=!0)}return i.on("openchange",d),()=>{i.off("openchange",d)}},[i,a]),I.useEffect(()=>()=>{clearTimeout(c.current)},[]),I.useMemo(()=>a?{reference:{onPointerDown(d){YHe(d.nativeEvent)||(f.current=!1)},onMouseLeave(){l.current=!1},onFocus(d){if(l.current)return;const h=cw(d.nativeEvent);if(u&&Ai(h))try{if(KHe()&&XHe())throw Error();if(!h.matches(":focus-visible"))return}catch{if(!f.current&&!tqe(h))return}r(!0,d.nativeEvent,"focus")},onBlur(d){l.current=!1;const h=d.relatedTarget,p=Ai(h)&&h.hasAttribute(tY("focus-guard"))&&h.getAttribute("data-type")==="outside";c.current=window.setTimeout(()=>{var m;const g=vae(o?o.ownerDocument:document);!h&&g===o||Y2((m=s.current.floatingContext)==null?void 0:m.refs.floating.current,g)||Y2(o,g)||p||r(!1,d.nativeEvent,"focus")})}}}:{},[a,u,s,o,r])}const Pae="active",Oae="selected";function I8(e,t,n){const r=new Map,i=n==="item";let s=e;if(i&&e){const{[Pae]:o,[Oae]:a,...u}=e;s=u}return{...n==="floating"&&{tabIndex:-1},...s,...t.map(o=>{const a=o?o[n]:null;return typeof a=="function"?e?a(e):null:a}).concat(e).reduce((o,a)=>(a&&Object.entries(a).forEach(u=>{let[l,c]=u;if(!(i&&[Pae,Oae].includes(l)))if(l.indexOf("on")===0){if(r.has(l)||r.set(l,[]),typeof c=="function"){var f;(f=r.get(l))==null||f.push(c),o[l]=function(){for(var d,h=arguments.length,p=new Array(h),m=0;m<h;m++)p[m]=arguments[m];return(d=r.get(l))==null?void 0:d.map(g=>g(...p)).find(g=>g!==void 0)}}}else o[l]=c}),o),{})}}function uWe(e){e===void 0&&(e=[]);const t=e,n=I.useCallback(s=>I8(s,e,"reference"),t),r=I.useCallback(s=>I8(s,e,"floating"),t),i=I.useCallback(s=>I8(s,e,"item"),e.map(s=>s==null?void 0:s.item));return I.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:i}),[n,r,i])}const lWe=new Map([["select","listbox"],["combobox","listbox"],["label",!1]]);function cWe(e,t){var n;t===void 0&&(t={});const{open:r,floatingId:i}=e,{enabled:s=!0,role:o="dialog"}=t,a=(n=lWe.get(o))!=null?n:o,u=owe(),c=ZG()!=null;return I.useMemo(()=>{if(!s)return{};const f={id:i,...a&&{role:a}};return a==="tooltip"||o==="label"?{reference:{["aria-"+(o==="label"?"labelledby":"describedby")]:r?i:void 0},floating:f}:{reference:{"aria-expanded":r?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":r?i:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:u},...a==="menu"&&c&&{role:"menuitem"},...o==="select"&&{"aria-autocomplete":"none"},...o==="combobox"&&{"aria-autocomplete":"list"}},floating:{...f,...a==="menu"&&{"aria-labelledby":u}},item(d){let{active:h,selected:p}=d;const m={role:"option",...h&&{id:i+"-option"}};switch(o){case"select":return{...m,"aria-selected":h&&p};case"combobox":return{...m,...h&&{"aria-selected":!0}}}return{}}}},[s,o,a,r,i,u,c])}function lwe(e,t){if(e==="rtl"&&(t.includes("right")||t.includes("left"))){const[n,r]=t.split("-"),i=n==="right"?"left":"right";return r===void 0?i:`${i}-${r}`}return t}function Dae(e,t,n,r){return e==="center"||r==="center"?{top:t}:e==="end"?{bottom:n}:e==="start"?{top:n}:{}}function $ae(e,t,n,r,i){return e==="center"||r==="center"?{left:t}:e==="end"?{[i==="ltr"?"right":"left"]:n}:e==="start"?{[i==="ltr"?"left":"right"]:n}:{}}const fWe={bottom:"borderTopLeftRadius",left:"borderTopRightRadius",right:"borderBottomLeftRadius",top:"borderBottomRightRadius"};function dWe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,arrowX:s,arrowY:o,dir:a}){const[u,l="center"]=e.split("-"),c={width:Te(t),height:Te(t),transform:"rotate(45deg)",position:"absolute",[fWe[u]]:Te(r)},f=Te(-t/2);return u==="left"?{...c,...Dae(l,o,n,i),right:f,borderLeftColor:"transparent",borderBottomColor:"transparent"}:u==="right"?{...c,...Dae(l,o,n,i),left:f,borderRightColor:"transparent",borderTopColor:"transparent"}:u==="top"?{...c,...$ae(l,s,n,i,a),bottom:f,borderTopColor:"transparent",borderLeftColor:"transparent"}:u==="bottom"?{...c,...$ae(l,s,n,i,a),top:f,borderBottomColor:"transparent",borderRightColor:"transparent"}:{}}const rY=I.forwardRef(({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,visible:s,arrowX:o,arrowY:a,style:u,...l},c)=>{const{dir:f}=Yh();return s?_.jsx("div",{...l,ref:c,style:{...u,...dWe({position:e,arrowSize:t,arrowOffset:n,arrowRadius:r,arrowPosition:i,dir:f,arrowX:o,arrowY:a})}}):null});rY.displayName="@mantine/core/FloatingArrow";const[hWe,cwe]=yo("Popover component was not found in the tree");function a6({children:e,active:t=!0,refProp:n="ref"}){const r=Jze(t),i=gs(r,e==null?void 0:e.ref);return zy(e)?I.cloneElement(e,{[n]:i}):e}function fwe(e){return _.jsx(zG,{tabIndex:-1,"data-autofocus":!0,...e})}a6.displayName="@mantine/core/FocusTrap";fwe.displayName="@mantine/core/FocusTrapInitialFocus";a6.InitialFocus=fwe;function pWe(e){const t=document.createElement("div");return t.setAttribute("data-portal","true"),typeof e.className=="string"&&t.classList.add(...e.className.split(" ").filter(Boolean)),typeof e.style=="object"&&Object.assign(t.style,e.style),typeof e.id=="string"&&t.setAttribute("id",e.id),t}const mWe={},dwe=I.forwardRef((e,t)=>{const{children:n,target:r,...i}=xe("Portal",mWe,e),[s,o]=I.useState(!1),a=I.useRef(null);return Vb(()=>(o(!0),a.current=r?typeof r=="string"?document.querySelector(r):r:pWe(i),PG(t,a.current),!r&&a.current&&document.body.appendChild(a.current),()=>{!r&&a.current&&document.body.removeChild(a.current)}),[r]),!s||!a.current?null:xk.createPortal(_.jsx(_.Fragment,{children:n}),a.current)});dwe.displayName="@mantine/core/Portal";function mS({withinPortal:e=!0,children:t,...n}){return e?_.jsx(dwe,{...n,children:t}):_.jsx(_.Fragment,{children:t})}mS.displayName="@mantine/core/OptionalPortal";const zT=e=>({in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:`scale(.9) translateY(${Te(e==="bottom"?10:-10)})`},transitionProperty:"transform, opacity"}),YN={fade:{in:{opacity:1},out:{opacity:0},transitionProperty:"opacity"},"fade-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:`translateY(${Te(-30)}`},transitionProperty:"opacity, transform"},"fade-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(30)}`},transitionProperty:"opacity, transform"},"fade-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:`translateX(${Te(-30)}`},transitionProperty:"opacity, transform"},scale:{in:{opacity:1,transform:"scale(1)"},out:{opacity:0,transform:"scale(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-y":{in:{opacity:1,transform:"scaleY(1)"},out:{opacity:0,transform:"scaleY(0)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"scale-x":{in:{opacity:1,transform:"scaleX(1)"},out:{opacity:0,transform:"scaleX(0)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"skew-up":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(-20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"skew-down":{in:{opacity:1,transform:"translateY(0) skew(0deg, 0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) skew(-10deg, -5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-left":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(-5deg)`},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"rotate-right":{in:{opacity:1,transform:"translateY(0) rotate(0deg)"},out:{opacity:0,transform:`translateY(${Te(20)}) rotate(5deg)`},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-down":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(-100%)"},common:{transformOrigin:"top"},transitionProperty:"transform, opacity"},"slide-up":{in:{opacity:1,transform:"translateY(0)"},out:{opacity:0,transform:"translateY(100%)"},common:{transformOrigin:"bottom"},transitionProperty:"transform, opacity"},"slide-left":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(100%)"},common:{transformOrigin:"left"},transitionProperty:"transform, opacity"},"slide-right":{in:{opacity:1,transform:"translateX(0)"},out:{opacity:0,transform:"translateX(-100%)"},common:{transformOrigin:"right"},transitionProperty:"transform, opacity"},pop:{...zT("bottom"),common:{transformOrigin:"center center"}},"pop-bottom-left":{...zT("bottom"),common:{transformOrigin:"bottom left"}},"pop-bottom-right":{...zT("bottom"),common:{transformOrigin:"bottom right"}},"pop-top-left":{...zT("top"),common:{transformOrigin:"top left"}},"pop-top-right":{...zT("top"),common:{transformOrigin:"top right"}}},Mae={entering:"in",entered:"in",exiting:"out",exited:"out","pre-exiting":"out","pre-entering":"out"};function gWe({transition:e,state:t,duration:n,timingFunction:r}){const i={transitionDuration:`${n}ms`,transitionTimingFunction:r};return typeof e=="string"?e in YN?{transitionProperty:YN[e].transitionProperty,...i,...YN[e].common,...YN[e][Mae[t]]}:{}:{transitionProperty:e.transitionProperty,...i,...e.common,...e[Mae[t]]}}function yWe({duration:e,exitDuration:t,timingFunction:n,mounted:r,onEnter:i,onExit:s,onEntered:o,onExited:a}){const u=ys(),l=t6(),c=u.respectReducedMotion?l:!1,[f,d]=I.useState(c?0:e),[h,p]=I.useState(r?"entered":"exited"),m=I.useRef(-1),g=I.useRef(-1),y=v=>{const b=v?i:s,w=v?o:a;window.clearTimeout(m.current);const E=c?0:v?e:t;d(E),E===0?(typeof b=="function"&&b(),typeof w=="function"&&w(),p(v?"entered":"exited")):g.current=requestAnimationFrame(()=>{MA.flushSync(()=>{p(v?"pre-entering":"pre-exiting")}),g.current=requestAnimationFrame(()=>{typeof b=="function"&&b(),p(v?"entering":"exiting"),m.current=window.setTimeout(()=>{typeof w=="function"&&w(),p(v?"entered":"exited")},E)})})};return kh(()=>{y(r)},[r]),I.useEffect(()=>()=>{window.clearTimeout(m.current),cancelAnimationFrame(g.current)},[]),{transitionDuration:f,transitionStatus:h,transitionTimingFunction:n||"ease"}}function eg({keepMounted:e,transition:t="fade",duration:n=250,exitDuration:r=n,mounted:i,children:s,timingFunction:o="ease",onExit:a,onEntered:u,onEnter:l,onExited:c}){const{transitionDuration:f,transitionStatus:d,transitionTimingFunction:h}=yWe({mounted:i,exitDuration:r,duration:n,timingFunction:o,onExit:a,onEntered:u,onEnter:l,onExited:c});return f===0?i?_.jsx(_.Fragment,{children:s({})}):e?s({display:"none"}):null:d==="exited"?e?s({display:"none"}):null:_.jsx(_.Fragment,{children:s(gWe({transition:t,duration:f,state:d,timingFunction:h}))})}eg.displayName="@mantine/core/Transition";var hwe={dropdown:"m_38a85659",arrow:"m_a31dc6c1"};const vWe={},iY=Me((e,t)=>{var g,y,v,b;const n=xe("PopoverDropdown",vWe,e),{className:r,style:i,vars:s,children:o,onKeyDownCapture:a,variant:u,classNames:l,styles:c,...f}=n,d=cwe(),h=m_e({opened:d.opened,shouldReturnFocus:d.returnFocus}),p=d.withRoles?{"aria-labelledby":d.getTargetId(),id:d.getDropdownId(),role:"dialog",tabIndex:-1}:{},m=gs(t,d.floating);return d.disabled?null:_.jsx(mS,{...d.portalProps,withinPortal:d.withinPortal,children:_.jsx(eg,{mounted:d.opened,...d.transitionProps,transition:((g=d.transitionProps)==null?void 0:g.transition)||"fade",duration:((y=d.transitionProps)==null?void 0:y.duration)??150,keepMounted:d.keepMounted,exitDuration:typeof((v=d.transitionProps)==null?void 0:v.exitDuration)=="number"?d.transitionProps.exitDuration:(b=d.transitionProps)==null?void 0:b.duration,children:w=>_.jsx(a6,{active:d.trapFocus,children:_.jsxs(me,{...p,...f,variant:u,ref:m,onKeyDownCapture:jze(d.onClose,{active:d.closeOnEscape,onTrigger:h,onKeyDown:a}),"data-position":d.placement,...d.getStyles("dropdown",{className:r,props:n,classNames:l,styles:c,style:[{...w,zIndex:d.zIndex,top:d.y??0,left:d.x??0,width:d.width==="target"?void 0:Te(d.width)},i]}),children:[o,_.jsx(rY,{ref:d.arrowRef,arrowX:d.arrowX,arrowY:d.arrowY,visible:d.withArrow,position:d.placement,arrowSize:d.arrowSize,arrowRadius:d.arrowRadius,arrowOffset:d.arrowOffset,arrowPosition:d.arrowPosition,...d.getStyles("arrow",{props:n,classNames:l,styles:c})})]})})})})});iY.classes=hwe;iY.displayName="@mantine/core/PopoverDropdown";const bWe={refProp:"ref",popupType:"dialog"},pwe=Me((e,t)=>{const{children:n,refProp:r,popupType:i,...s}=xe("PopoverTarget",bWe,e);if(!zy(n))throw new Error("Popover.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const o=s,a=cwe(),u=gs(a.reference,n.ref,t),l=a.withRoles?{"aria-haspopup":i,"aria-expanded":a.opened,"aria-controls":a.getDropdownId(),id:a.getTargetId()}:{};return I.cloneElement(n,{...o,...l,...a.targetProps,className:es(a.targetProps.className,o.className,n.props.className),[r]:u,...a.controlled?null:{onClick:a.onToggle}})});pwe.displayName="@mantine/core/PopoverTarget";function mwe({opened:e,floating:t,position:n,positionDependencies:r}){const[i,s]=I.useState(0);I.useEffect(()=>{if(t.refs.reference.current&&t.refs.floating.current)return $qe(t.refs.reference.current,t.refs.floating.current,t.update)},[t.refs.reference.current,t.refs.floating.current,e,i,n]),kh(()=>{t.update()},r),kh(()=>{s(o=>o+1)},[e])}function _We(e){if(e===void 0)return{shift:!0,flip:!0};const t={...e};return e.shift===void 0&&(t.shift=!0),e.flip===void 0&&(t.flip=!0),t}function wWe(e,t){const n=_We(e.middlewares),r=[rwe(e.offset)];return n.shift&&r.push(JG(typeof n.shift=="boolean"?{limiter:Aae(),padding:5}:{limiter:Aae(),padding:5,...n.shift})),n.flip&&r.push(typeof n.flip=="boolean"?z7():z7(n.flip)),n.inline&&r.push(typeof n.inline=="boolean"?V7():V7(n.inline)),r.push(iwe({element:e.arrowRef,padding:e.arrowOffset})),(n.size||e.width==="target")&&r.push(qqe({...typeof n.size=="boolean"?{}:n.size,apply({rects:i,availableWidth:s,availableHeight:o}){var l;const u=((l=t().refs.floating.current)==null?void 0:l.style)??{};n.size&&Object.assign(u,{maxWidth:`${s}px`,maxHeight:`${o}px`}),e.width==="target"&&Object.assign(u,{width:`${i.reference.width}px`})}})),r}function EWe(e){const[t,n]=As({value:e.opened,defaultValue:e.defaultOpened,finalValue:!1,onChange:e.onChange}),r=()=>{var o;t&&((o=e.onClose)==null||o.call(e),n(!1))},i=()=>{var o,a;t?((o=e.onClose)==null||o.call(e),n(!1)):((a=e.onOpen)==null||a.call(e),n(!0))},s=nY({strategy:e.strategy,placement:e.position,middleware:wWe(e,()=>s)});return mwe({opened:e.opened,position:e.position,positionDependencies:e.positionDependencies||[],floating:s}),kh(()=>{var o;(o=e.onPositionChange)==null||o.call(e,s.placement)},[s.placement]),kh(()=>{var o,a;e.opened?(a=e.onOpen)==null||a.call(e):(o=e.onClose)==null||o.call(e)},[e.opened]),{floating:s,controlled:typeof e.opened=="boolean",opened:t,onClose:r,onToggle:i}}const xWe={position:"bottom",offset:8,positionDependencies:[],transitionProps:{transition:"fade",duration:150},middlewares:{flip:!0,shift:!0,inline:!1},arrowSize:7,arrowOffset:5,arrowRadius:0,arrowPosition:"side",closeOnClickOutside:!0,withinPortal:!0,closeOnEscape:!0,trapFocus:!1,withRoles:!0,returnFocus:!1,clickOutsideEvents:["mousedown","touchstart"],zIndex:rc("popover"),__staticSelector:"Popover",width:"max-content"},SWe=(e,{radius:t,shadow:n})=>({dropdown:{"--popover-radius":t===void 0?void 0:Vr(t),"--popover-shadow":RG(n)}});function Mo(e){var _e,ke,Ve,ct,Dt,Ge;const t=xe("Popover",xWe,e),{children:n,position:r,offset:i,onPositionChange:s,positionDependencies:o,opened:a,transitionProps:u,width:l,middlewares:c,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,unstyled:g,classNames:y,styles:v,closeOnClickOutside:b,withinPortal:w,portalProps:E,closeOnEscape:T,clickOutsideEvents:S,trapFocus:A,onClose:C,onOpen:k,onChange:N,zIndex:D,radius:O,shadow:$,id:F,defaultOpened:M,__staticSelector:B,withRoles:U,disabled:H,returnFocus:P,variant:z,keepMounted:W,vars:j,floatingStrategy:q,...G}=t,ne=dt({name:B,props:t,classes:hwe,classNames:y,styles:v,unstyled:g,rootSelector:"dropdown",vars:j,varsResolver:SWe}),ce=I.useRef(null),[de,he]=I.useState(null),[ve,Ie]=I.useState(null),{dir:be}=Yh(),Xe=Ia(F),ze=EWe({middlewares:c,width:l,position:lwe(be,r),offset:typeof i=="number"?i+(f?d/2:0):i,arrowRef:ce,arrowOffset:h,onPositionChange:s,positionDependencies:o,opened:a,defaultOpened:M,onChange:N,onOpen:k,onClose:C,strategy:q});zze(()=>b&&ze.onClose(),S,[de,ve]);const yt=I.useCallback(ge=>{he(ge),ze.floating.refs.setReference(ge)},[ze.floating.refs.setReference]),it=I.useCallback(ge=>{Ie(ge),ze.floating.refs.setFloating(ge)},[ze.floating.refs.setFloating]);return _.jsx(hWe,{value:{returnFocus:P,disabled:H,controlled:ze.controlled,reference:yt,floating:it,x:ze.floating.x,y:ze.floating.y,arrowX:(Ve=(ke=(_e=ze.floating)==null?void 0:_e.middlewareData)==null?void 0:ke.arrow)==null?void 0:Ve.x,arrowY:(Ge=(Dt=(ct=ze.floating)==null?void 0:ct.middlewareData)==null?void 0:Dt.arrow)==null?void 0:Ge.y,opened:ze.opened,arrowRef:ce,transitionProps:u,width:l,withArrow:f,arrowSize:d,arrowOffset:h,arrowRadius:p,arrowPosition:m,placement:ze.floating.placement,trapFocus:A,withinPortal:w,portalProps:E,zIndex:D,radius:O,shadow:$,closeOnEscape:T,onClose:ze.onClose,onToggle:ze.onToggle,getTargetId:()=>`${Xe}-target`,getDropdownId:()=>`${Xe}-dropdown`,withRoles:U,targetProps:G,__staticSelector:B,classNames:y,styles:v,unstyled:g,variant:z,keepMounted:W,getStyles:ne},children:n})}Mo.Target=pwe;Mo.Dropdown=iY;Mo.displayName="@mantine/core/Popover";Mo.extend=e=>e;var $f={root:"m_5ae2e3c",barsLoader:"m_7a2bd4cd",bar:"m_870bb79","bars-loader-animation":"m_5d2b3b9d",dotsLoader:"m_4e3f22d7",dot:"m_870c4af","loader-dots-animation":"m_aac34a1",ovalLoader:"m_b34414df","oval-loader-animation":"m_f8e89c4b"};const TWe=I.forwardRef(({className:e,...t},n)=>_.jsxs(me,{component:"span",className:es($f.barsLoader,e),...t,ref:n,children:[_.jsx("span",{className:$f.bar}),_.jsx("span",{className:$f.bar}),_.jsx("span",{className:$f.bar})]})),AWe=I.forwardRef(({className:e,...t},n)=>_.jsxs(me,{component:"span",className:es($f.dotsLoader,e),...t,ref:n,children:[_.jsx("span",{className:$f.dot}),_.jsx("span",{className:$f.dot}),_.jsx("span",{className:$f.dot})]})),CWe=I.forwardRef(({className:e,...t},n)=>_.jsx(me,{component:"span",className:es($f.ovalLoader,e),...t,ref:n})),gwe={bars:TWe,oval:CWe,dots:AWe},IWe={loaders:gwe,type:"oval"},kWe=(e,{size:t,color:n})=>({root:{"--loader-size":tn(t,"loader-size"),"--loader-color":n?Lr(n,e):void 0}}),Kc=Me((e,t)=>{const n=xe("Loader",IWe,e),{size:r,color:i,type:s,vars:o,className:a,style:u,classNames:l,styles:c,unstyled:f,loaders:d,variant:h,children:p,...m}=n,g=dt({name:"Loader",props:n,classes:$f,className:a,style:u,classNames:l,styles:c,unstyled:f,vars:o,varsResolver:kWe});return p?_.jsx(me,{...g("root"),ref:t,...m,children:p}):_.jsx(me,{...g("root"),ref:t,component:d[s],variant:h,size:r,...m})});Kc.defaultLoaders=gwe;Kc.classes=$f;Kc.displayName="@mantine/core/Loader";var u6={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21"};const Lae={orientation:"horizontal"},RWe=(e,{borderWidth:t})=>({group:{"--ai-border-width":Te(t)}}),sY=Me((e,t)=>{const n=xe("ActionIconGroup",Lae,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ActionIconGroup",Lae,e),p=dt({name:"ActionIconGroup",props:n,classes:u6,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:RWe,rootSelector:"group"});return _.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});sY.classes=u6;sY.displayName="@mantine/core/ActionIconGroup";const NWe={},PWe=(e,{size:t,radius:n,variant:r,gradient:i,color:s,autoContrast:o})=>{const a=e.variantColorResolver({color:s||e.primaryColor,theme:e,gradient:i,variant:r||"filled",autoContrast:o});return{root:{"--ai-size":tn(t,"ai-size"),"--ai-radius":n===void 0?void 0:Vr(n),"--ai-bg":s||r?a.background:void 0,"--ai-hover":s||r?a.hover:void 0,"--ai-hover-color":s||r?a.hoverColor:void 0,"--ai-color":a.color,"--ai-bd":s||r?a.border:void 0}}},Gb=qs((e,t)=>{const n=xe("ActionIcon",NWe,e),{className:r,unstyled:i,variant:s,classNames:o,styles:a,style:u,loading:l,loaderProps:c,size:f,color:d,radius:h,__staticSelector:p,gradient:m,vars:g,children:y,disabled:v,"data-disabled":b,autoContrast:w,mod:E,...T}=n,S=dt({name:["ActionIcon",p],props:n,className:r,style:u,classes:u6,classNames:o,styles:a,unstyled:i,vars:g,varsResolver:PWe});return _.jsxs(Ts,{...S("root",{active:!v&&!l&&!b}),...T,unstyled:i,variant:s,size:f,disabled:v||l,ref:t,mod:[{loading:l,disabled:v||b},E],children:[_.jsx(eg,{mounted:!!l,transition:"slide-down",duration:150,children:A=>_.jsx(me,{component:"span",...S("loader",{style:A}),"aria-hidden":!0,children:_.jsx(Kc,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...c})})}),_.jsx(me,{component:"span",mod:{loading:l},...S("icon"),children:y})]})});Gb.classes=u6;Gb.displayName="@mantine/core/ActionIcon";Gb.Group=sY;const ywe=I.forwardRef(({size:e="var(--cb-icon-size, 70%)",style:t,...n},r)=>_.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...t,width:e,height:e},ref:r,...n,children:_.jsx("path",{d:"M11.7816 4.03157C12.0062 3.80702 12.0062 3.44295 11.7816 3.2184C11.5571 2.99385 11.193 2.99385 10.9685 3.2184L7.50005 6.68682L4.03164 3.2184C3.80708 2.99385 3.44301 2.99385 3.21846 3.2184C2.99391 3.44295 2.99391 3.80702 3.21846 4.03157L6.68688 7.49999L3.21846 10.9684C2.99391 11.193 2.99391 11.557 3.21846 11.7816C3.44301 12.0061 3.80708 12.0061 4.03164 11.7816L7.50005 8.31316L10.9685 11.7816C11.193 12.0061 11.5571 12.0061 11.7816 11.7816C12.0062 11.557 12.0062 11.193 11.7816 10.9684L8.31322 7.49999L11.7816 4.03157Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}));ywe.displayName="@mantine/core/CloseIcon";var vwe={root:"m_86a44da5","root--subtle":"m_220c80f2"};const OWe={variant:"subtle"},DWe=(e,{size:t,radius:n,iconSize:r})=>({root:{"--cb-size":tn(t,"cb-size"),"--cb-radius":n===void 0?void 0:Vr(n),"--cb-icon-size":Te(r)}}),tg=qs((e,t)=>{const n=xe("CloseButton",OWe,e),{iconSize:r,children:i,vars:s,radius:o,className:a,classNames:u,style:l,styles:c,unstyled:f,"data-disabled":d,disabled:h,variant:p,icon:m,mod:g,...y}=n,v=dt({name:"CloseButton",props:n,className:a,style:l,classes:vwe,classNames:u,styles:c,unstyled:f,vars:s,varsResolver:DWe});return _.jsxs(Ts,{ref:t,...y,unstyled:f,variant:p,disabled:h,mod:[{disabled:h||d},g],...v("root",{variant:p,active:!h&&!d}),children:[m||_.jsx(ywe,{}),i]})});tg.classes=vwe;tg.displayName="@mantine/core/CloseButton";function $We(e){return I.Children.toArray(e).filter(Boolean)}var bwe={root:"m_4081bf90"};const MWe={preventGrowOverflow:!0,gap:"md",align:"center",justify:"flex-start",wrap:"wrap"},LWe=(e,{grow:t,preventGrowOverflow:n,gap:r,align:i,justify:s,wrap:o},{childWidth:a})=>({root:{"--group-child-width":t&&n?a:void 0,"--group-gap":fs(r),"--group-align":i,"--group-justify":s,"--group-wrap":o}}),Cs=Me((e,t)=>{const n=xe("Group",MWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,children:u,gap:l,align:c,justify:f,wrap:d,grow:h,preventGrowOverflow:p,vars:m,variant:g,__size:y,mod:v,...b}=n,w=$We(u),E=w.length,T=fs(l??"md"),A={childWidth:`calc(${100/E}% - (${T} - ${T} / ${E}))`},C=dt({name:"Group",props:n,stylesCtx:A,className:i,style:s,classes:bwe,classNames:r,styles:o,unstyled:a,vars:m,varsResolver:LWe});return _.jsx(me,{...C("root"),ref:t,variant:g,mod:[{grow:h},v],size:y,...b,children:w})});Cs.classes=bwe;Cs.displayName="@mantine/core/Group";var _we={root:"m_9814e45f"};const FWe={zIndex:rc("modal")},jWe=(e,{gradient:t,color:n,backgroundOpacity:r,blur:i,radius:s,zIndex:o})=>({root:{"--overlay-bg":t||(n!==void 0||r!==void 0)&&Dd(n||"#000",r??.6)||void 0,"--overlay-filter":i?`blur(${Te(i)})`:void 0,"--overlay-radius":s===void 0?void 0:Vr(s),"--overlay-z-index":o==null?void 0:o.toString()}}),K2=qs((e,t)=>{const n=xe("Overlay",FWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fixed:l,center:c,children:f,radius:d,zIndex:h,gradient:p,blur:m,color:g,backgroundOpacity:y,mod:v,...b}=n,w=dt({name:"Overlay",props:n,classes:_we,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jWe});return _.jsx(me,{ref:t,...w("root"),mod:[{center:c,fixed:l},v],...b,children:f})});K2.classes=_we;K2.displayName="@mantine/core/Overlay";const[BWe,ng]=yo("ModalBase component was not found in tree");function UWe({opened:e,transitionDuration:t}){const[n,r]=I.useState(e),i=I.useRef(),o=t6()?0:t;return I.useEffect(()=>(e?(r(!0),window.clearTimeout(i.current)):o===0?r(!1):i.current=window.setTimeout(()=>r(!1),o),()=>window.clearTimeout(i.current)),[e,o]),n}function zWe({id:e,transitionProps:t,opened:n,trapFocus:r,closeOnEscape:i,onClose:s,returnFocus:o}){const a=Ia(e),[u,l]=I.useState(!1),[c,f]=I.useState(!1),d=typeof(t==null?void 0:t.duration)=="number"?t==null?void 0:t.duration:200,h=UWe({opened:n,transitionDuration:d});return b_e("keydown",p=>{var m;p.key==="Escape"&&i&&n&&((m=p.target)==null?void 0:m.getAttribute("data-mantine-stop-propagation"))!=="true"&&s()},{capture:!0}),m_e({opened:n,shouldReturnFocus:r&&o}),{_id:a,titleMounted:u,bodyMounted:c,shouldLockScroll:h,setTitleMounted:l,setBodyMounted:f}}const wwe=I.forwardRef(({keepMounted:e,opened:t,onClose:n,id:r,transitionProps:i,trapFocus:s,closeOnEscape:o,returnFocus:a,closeOnClickOutside:u,withinPortal:l,portalProps:c,lockScroll:f,children:d,zIndex:h,shadow:p,padding:m,__vars:g,unstyled:y,removeScrollProps:v,...b},w)=>{const{_id:E,titleMounted:T,bodyMounted:S,shouldLockScroll:A,setTitleMounted:C,setBodyMounted:k}=zWe({id:r,transitionProps:i,opened:t,trapFocus:s,closeOnEscape:o,onClose:n,returnFocus:a});return _.jsx(mS,{...c,withinPortal:l,children:_.jsx(BWe,{value:{opened:t,onClose:n,closeOnClickOutside:u,transitionProps:{...i,keepMounted:e},getTitleId:()=>`${E}-title`,getBodyId:()=>`${E}-body`,titleMounted:T,bodyMounted:S,setTitleMounted:C,setBodyMounted:k,trapFocus:s,closeOnEscape:o,zIndex:h,unstyled:y},children:_.jsx(ZL,{enabled:A&&f,...v,children:_.jsx(me,{ref:w,...b,__vars:{...g,"--mb-z-index":(h||rc("modal")).toString(),"--mb-shadow":RG(p),"--mb-padding":fs(m)},children:d})})})})});function VWe(){const e=ng();return I.useEffect(()=>(e.setBodyMounted(!0),()=>e.setBodyMounted(!1)),[]),e.getBodyId()}var QE={title:"m_615af6c9",header:"m_b5489c3c",inner:"m_60c222c7",content:"m_fd1ab0aa",close:"m_606cb269",body:"m_5df29311"};const oY=I.forwardRef(({className:e,...t},n)=>{const r=VWe(),i=ng();return _.jsx(me,{ref:n,...t,id:r,className:es({[QE.body]:!i.unstyled},e)})});oY.displayName="@mantine/core/ModalBaseBody";const aY=I.forwardRef(({className:e,onClick:t,...n},r)=>{const i=ng();return _.jsx(tg,{ref:r,...n,onClick:s=>{i.onClose(),t==null||t(s)},className:es({[QE.close]:!i.unstyled},e),unstyled:i.unstyled})});aY.displayName="@mantine/core/ModalBaseCloseButton";const Ewe=I.forwardRef(({transitionProps:e,className:t,innerProps:n,onKeyDown:r,style:i,...s},o)=>{const a=ng();return _.jsx(eg,{mounted:a.opened,transition:"pop",...a.transitionProps,...e,children:u=>_.jsx("div",{...n,className:es({[QE.inner]:!a.unstyled},n.className),children:_.jsx(a6,{active:a.opened&&a.trapFocus,children:_.jsx(dS,{...s,component:"section",role:"dialog",tabIndex:-1,"aria-modal":!0,"aria-describedby":a.bodyMounted?a.getBodyId():void 0,"aria-labelledby":a.titleMounted?a.getTitleId():void 0,ref:o,style:[i,u],className:es({[QE.content]:!a.unstyled},t),unstyled:a.unstyled,children:s.children})})})})}),uY=I.forwardRef(({className:e,...t},n)=>{const r=ng();return _.jsx(me,{component:"header",ref:n,className:es({[QE.header]:!r.unstyled},e),...t})});uY.displayName="@mantine/core/ModalBaseHeader";const HWe={duration:200,timingFunction:"ease",transition:"fade"};function qWe(e){const t=ng();return{...HWe,...t.transitionProps,...e}}const lY=I.forwardRef(({onClick:e,transitionProps:t,style:n,...r},i)=>{const s=ng(),o=qWe(t);return _.jsx(eg,{mounted:s.opened,...o,transition:"fade",children:a=>_.jsx(K2,{ref:i,fixed:!0,style:[n,a],zIndex:s.zIndex,unstyled:s.unstyled,onClick:u=>{e==null||e(u),s.closeOnClickOutside&&s.onClose()},...r})})});lY.displayName="@mantine/core/ModalBaseOverlay";function WWe(){const e=ng();return I.useEffect(()=>(e.setTitleMounted(!0),()=>e.setTitleMounted(!1)),[]),e.getTitleId()}const cY=I.forwardRef(({className:e,...t},n)=>{const r=WWe(),i=ng();return _.jsx(me,{component:"h2",ref:n,className:es({[QE.title]:!i.unstyled},e),...t,id:r})});cY.displayName="@mantine/core/ModalBaseTitle";function xwe({children:e}){return _.jsx(_.Fragment,{children:e})}const[GWe,gS]=cS({offsetBottom:!1,offsetTop:!1,describedBy:void 0,getStyles:null,inputId:void 0,labelId:void 0});var Xc={wrapper:"m_6c018570",input:"m_8fb7ebe7",section:"m_82577fc2",placeholder:"m_88bacfd0",root:"m_46b77525",label:"m_8fdc1311",required:"m_78a94662",error:"m_8f816625",description:"m_fe47ce59"};const Fae={},YWe=(e,{size:t})=>({description:{"--input-description-size":t===void 0?void 0:`calc(${po(t)} - ${Te(2)})`}}),l6=Me((e,t)=>{const n=xe("InputDescription",Fae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=xe("InputDescription",Fae,n),p=gS(),m=dt({name:["InputWrapper",c],props:n,classes:Xc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"description",vars:u,varsResolver:YWe}),g=f&&(p==null?void 0:p.getStyles)||m;return _.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("description",p!=null&&p.getStyles?{className:i,style:s}:void 0),...h})});l6.classes=Xc;l6.displayName="@mantine/core/InputDescription";const KWe={},XWe=(e,{size:t})=>({error:{"--input-error-size":t===void 0?void 0:`calc(${po(t)} - ${Te(2)})`}}),c6=Me((e,t)=>{const n=xe("InputError",KWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,__staticSelector:c,__inheritStyles:f=!0,variant:d,...h}=n,p=dt({name:["InputWrapper",c],props:n,classes:Xc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"error",vars:u,varsResolver:XWe}),m=gS(),g=f&&(m==null?void 0:m.getStyles)||p;return _.jsx(me,{component:"p",ref:t,variant:d,size:l,...g("error",m!=null&&m.getStyles?{className:i,style:s}:void 0),...h})});c6.classes=Xc;c6.displayName="@mantine/core/InputError";const jae={labelElement:"label"},QWe=(e,{size:t})=>({label:{"--input-label-size":po(t),"--input-asterisk-color":void 0}}),f6=Me((e,t)=>{const n=xe("InputLabel",jae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,labelElement:l,size:c,required:f,htmlFor:d,onMouseDown:h,children:p,__staticSelector:m,variant:g,mod:y,...v}=xe("InputLabel",jae,n),b=dt({name:["InputWrapper",m],props:n,classes:Xc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"label",vars:u,varsResolver:QWe}),w=gS(),E=(w==null?void 0:w.getStyles)||b;return _.jsxs(me,{...E("label",w!=null&&w.getStyles?{className:i,style:s}:void 0),component:l,variant:g,size:c,ref:t,htmlFor:l==="label"?d:void 0,mod:[{required:f},y],onMouseDown:T=>{h==null||h(T),!T.defaultPrevented&&T.detail>1&&T.preventDefault()},...v,children:[p,f&&_.jsx("span",{...E("required"),"aria-hidden":!0,children:" *"})]})});f6.classes=Xc;f6.displayName="@mantine/core/InputLabel";const Bae={},fY=Me((e,t)=>{const n=xe("InputPlaceholder",Bae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,variant:c,error:f,mod:d,...h}=xe("InputPlaceholder",Bae,n),p=dt({name:["InputPlaceholder",l],props:n,classes:Xc,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"placeholder"});return _.jsx(me,{...p("placeholder"),mod:[{error:!!f},d],component:"span",variant:c,ref:t,...h})});fY.classes=Xc;fY.displayName="@mantine/core/InputPlaceholder";function JWe(e,{hasDescription:t,hasError:n}){const r=e.findIndex(u=>u==="input"),i=e.slice(0,r),s=e.slice(r+1),o=t&&i.includes("description")||n&&i.includes("error");return{offsetBottom:t&&s.includes("description")||n&&s.includes("error"),offsetTop:o}}const ZWe={labelElement:"label",inputContainer:e=>e,inputWrapperOrder:["label","description","input","error"]},eGe=(e,{size:t})=>({label:{"--input-label-size":po(t),"--input-asterisk-color":void 0},error:{"--input-error-size":t===void 0?void 0:`calc(${po(t)} - ${Te(2)})`},description:{"--input-description-size":t===void 0?void 0:`calc(${po(t)} - ${Te(2)})`}}),dY=Me((e,t)=>{const n=xe("InputWrapper",ZWe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,variant:c,__staticSelector:f,inputContainer:d,inputWrapperOrder:h,label:p,error:m,description:g,labelProps:y,descriptionProps:v,errorProps:b,labelElement:w,children:E,withAsterisk:T,id:S,required:A,__stylesApiProps:C,mod:k,...N}=n,D=dt({name:["InputWrapper",f],props:C||n,classes:Xc,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eGe}),O={size:l,variant:c,__staticSelector:f},$=Ia(S),F=typeof T=="boolean"?T:A,M=(b==null?void 0:b.id)||`${$}-error`,B=(v==null?void 0:v.id)||`${$}-description`,U=$,H=!!m&&typeof m!="boolean",P=!!g,z=`${H?M:""} ${P?B:""}`,W=z.trim().length>0?z.trim():void 0,j=(y==null?void 0:y.id)||`${$}-label`,q=p&&_.jsx(f6,{labelElement:w,id:j,htmlFor:U,required:F,...O,...y,children:p},"label"),G=P&&_.jsx(l6,{...v,...O,size:(v==null?void 0:v.size)||O.size,id:(v==null?void 0:v.id)||B,children:g},"description"),ne=_.jsx(I.Fragment,{children:d(E)},"input"),ce=H&&I.createElement(c6,{...b,...O,size:(b==null?void 0:b.size)||O.size,key:"error",id:(b==null?void 0:b.id)||M},m),de=h.map(he=>{switch(he){case"label":return q;case"input":return ne;case"description":return G;case"error":return ce;default:return null}});return _.jsx(GWe,{value:{getStyles:D,describedBy:W,inputId:U,labelId:j,...JWe(h,{hasDescription:P,hasError:H})},children:_.jsx(me,{ref:t,variant:c,size:l,mod:[{error:!!m},k],...D("root"),...N,children:de})})});dY.classes=Xc;dY.displayName="@mantine/core/InputWrapper";const tGe={variant:"default",leftSectionPointerEvents:"none",rightSectionPointerEvents:"none",withAria:!0,withErrorStyles:!0},nGe=(e,t,n)=>({wrapper:{"--input-margin-top":n.offsetTop?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-margin-bottom":n.offsetBottom?"calc(var(--mantine-spacing-xs) / 2)":void 0,"--input-height":tn(t.size,"input-height"),"--input-fz":po(t.size),"--input-radius":t.radius===void 0?void 0:Vr(t.radius),"--input-left-section-width":t.leftSectionWidth!==void 0?Te(t.leftSectionWidth):void 0,"--input-right-section-width":t.rightSectionWidth!==void 0?Te(t.rightSectionWidth):void 0,"--input-padding-y":t.multiline?tn(t.size,"input-padding-y"):void 0,"--input-left-section-pointer-events":t.leftSectionPointerEvents,"--input-right-section-pointer-events":t.rightSectionPointerEvents}}),mi=qs((e,t)=>{const n=xe("Input",tGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,required:u,__staticSelector:l,__stylesApiProps:c,size:f,wrapperProps:d,error:h,disabled:p,leftSection:m,leftSectionProps:g,leftSectionWidth:y,rightSection:v,rightSectionProps:b,rightSectionWidth:w,rightSectionPointerEvents:E,leftSectionPointerEvents:T,variant:S,vars:A,pointer:C,multiline:k,radius:N,id:D,withAria:O,withErrorStyles:$,mod:F,inputSize:M,...B}=n,{styleProps:U,rest:H}=qb(B),P=gS(),z={offsetBottom:P==null?void 0:P.offsetBottom,offsetTop:P==null?void 0:P.offsetTop},W=dt({name:["Input",l],props:c||n,classes:Xc,className:i,style:s,classNames:r,styles:o,unstyled:a,stylesCtx:z,rootSelector:"wrapper",vars:A,varsResolver:nGe}),j=O?{required:u,disabled:p,"aria-invalid":!!h,"aria-describedby":P==null?void 0:P.describedBy,id:(P==null?void 0:P.inputId)||D}:{};return _.jsxs(me,{...W("wrapper"),...U,...d,mod:[{error:!!h&&$,pointer:C,disabled:p,multiline:k,"data-with-right-section":!!v,"data-with-left-section":!!m},F],variant:S,size:f,children:[m&&_.jsx("div",{...g,"data-position":"left",...W("section",{className:g==null?void 0:g.className,style:g==null?void 0:g.style}),children:m}),_.jsx(me,{component:"input",...H,...j,ref:t,required:u,mod:{disabled:p,error:!!h&&$},variant:S,__size:M,...W("input")}),v&&_.jsx("div",{...b,"data-position":"right",...W("section",{className:b==null?void 0:b.className,style:b==null?void 0:b.style}),children:v})]})});mi.classes=Xc;mi.Wrapper=dY;mi.Label=f6;mi.Error=c6;mi.Description=l6;mi.Placeholder=fY;mi.displayName="@mantine/core/Input";function Swe(e,t,n){const r=xe(e,t,n),{label:i,description:s,error:o,required:a,classNames:u,styles:l,className:c,unstyled:f,__staticSelector:d,__stylesApiProps:h,errorProps:p,labelProps:m,descriptionProps:g,wrapperProps:y,id:v,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,vars:C,mod:k,...N}=r,{styleProps:D,rest:O}=qb(N),$={label:i,description:s,error:o,required:a,classNames:u,className:c,__staticSelector:d,__stylesApiProps:h||r,errorProps:p,labelProps:m,descriptionProps:g,unstyled:f,styles:l,size:b,style:w,inputContainer:E,inputWrapperOrder:T,withAsterisk:S,variant:A,id:v,mod:k,...y};return{...O,classNames:u,styles:l,unstyled:f,wrapperProps:{...$,...D},inputProps:{required:a,classNames:u,styles:l,unstyled:f,size:b,__staticSelector:d,__stylesApiProps:h||r,error:o,variant:A,id:v}}}const rGe={__staticSelector:"InputBase",withAria:!0},Qc=qs((e,t)=>{const{inputProps:n,wrapperProps:r,...i}=Swe("InputBase",rGe,e);return _.jsx(mi.Wrapper,{...r,children:_.jsx(mi,{...n,...i,ref:t})})});Qc.classes={...mi.classes,...mi.Wrapper.classes};Qc.displayName="@mantine/core/InputBase";const iGe={gap:{type:"spacing",property:"gap"},rowGap:{type:"spacing",property:"rowGap"},columnGap:{type:"spacing",property:"columnGap"},align:{type:"identity",property:"alignItems"},justify:{type:"identity",property:"justifyContent"},wrap:{type:"identity",property:"flexWrap"},direction:{type:"identity",property:"flexDirection"}};var Twe={root:"m_8bffd616"};const sGe={},Nt=qs((e,t)=>{const n=xe("Flex",sGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m,...g}=n,y=dt({name:"Flex",classes:Twe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),v=ys(),b=Sk(),w=k_e({styleProps:{gap:l,rowGap:c,columnGap:f,align:d,justify:h,wrap:p,direction:m},theme:v,data:iGe});return _.jsxs(_.Fragment,{children:[w.hasResponsiveStyles&&_.jsx(Hb,{selector:`.${b}`,styles:w.styles,media:w.media}),_.jsx(me,{ref:t,...y("root",{className:b,style:Uy(w.inlineStyles)}),...g})]})});Nt.classes=Twe;Nt.displayName="@mantine/core/Flex";function oGe(e,t){if(!t||!e)return!1;let n=t.parentNode;for(;n!=null;){if(n===e)return!0;n=n.parentNode}return!1}function aGe({target:e,parent:t,ref:n,displayAfterTransitionEnd:r}){const i=I.useRef(),[s,o]=I.useState(!1),[a,u]=I.useState(typeof r=="boolean"?r:!1),l=()=>{if(!e||!t)return;const h=e.getBoundingClientRect(),p=t.getBoundingClientRect(),m={top:h.top-p.top,left:h.left-p.left,width:h.width,height:h.height};n.current&&(n.current.style.transform=`translateY(${m.top}px) translateX(${m.left}px)`,n.current.style.width=`${m.width}px`,n.current.style.height=`${m.height}px`)},c=()=>{window.clearTimeout(i.current),n.current&&(n.current.style.transitionDuration="0ms"),l(),i.current=window.setTimeout(()=>{n.current&&(n.current.style.transitionDuration="")},30)},f=I.useRef(),d=I.useRef();return I.useEffect(()=>{if(l(),e)return f.current=new ResizeObserver(c),f.current.observe(e),t&&(d.current=new ResizeObserver(c),d.current.observe(t)),()=>{var h,p;(h=f.current)==null||h.disconnect(),(p=d.current)==null||p.disconnect()}},[t,e]),I.useEffect(()=>{if(t){const h=p=>{oGe(p.target,t)&&(c(),u(!1))};return document.addEventListener("transitionend",h),()=>{document.removeEventListener("transitionend",h)}}},[t]),lVe(()=>{E_e()!=="test"&&o(!0)},20,{autoInvoke:!0}),cVe(h=>{h.forEach(p=>{p.type==="attributes"&&p.attributeName==="dir"&&c()})},{attributes:!0,attributeFilter:["dir"]},()=>document.documentElement),{initialized:s,hidden:a}}var Awe={root:"m_96b553a6"};const uGe={},lGe=(e,{transitionDuration:t})=>({root:{"--transition-duration":typeof t=="number"?`${t}ms`:t}}),hY=Me((e,t)=>{const n=xe("FloatingIndicator",uGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,target:l,parent:c,transitionDuration:f,mod:d,displayAfterTransitionEnd:h,...p}=n,m=dt({name:"FloatingIndicator",classes:Awe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:lGe}),g=I.useRef(null),{initialized:y,hidden:v}=aGe({target:l,parent:c,ref:g,displayAfterTransitionEnd:h}),b=gs(t,g);return!l||!c?null:_.jsx(me,{ref:b,mod:[{initialized:y,hidden:v},d],...m("root"),...p})});hY.displayName="@mantine/core/FloatingIndicator";hY.classes=Awe;const[cGe,pY]=yo("Accordion component was not found in the tree");function JE({style:e,size:t=16,...n}){return _.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{...e,width:Te(t),height:Te(t),display:"block"},...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}JE.displayName="@mantine/core/AccordionChevron";const[fGe,Cwe]=yo("Accordion.Item component was not found in the tree");var Ak={root:"m_9bdbb667",panel:"m_df78851f",content:"m_4ba554d4",itemTitle:"m_8fa820a0",control:"m_4ba585b8","control--default":"m_6939a5e9","control--contained":"m_4271d21b",label:"m_df3ffa0f",chevron:"m_3f35ae96",icon:"m_9bd771fe",item:"m_9bd7b098","item--default":"m_fe19b709","item--contained":"m_1f921b3b","item--filled":"m_2cdf939a","item--separated":"m_9f59b069"};const dGe={},mY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,chevron:a,icon:u,onClick:l,onKeyDown:c,children:f,disabled:d,mod:h,...p}=xe("AccordionControl",dGe,e),{value:m}=Cwe(),g=pY(),y=g.isItemActive(m),v=typeof g.order=="number",b=`h${g.order}`,w=_.jsxs(Ts,{...p,...g.getStyles("control",{className:r,classNames:n,style:i,styles:s,variant:g.variant}),unstyled:g.unstyled,mod:["accordion-control",{active:y,"chevron-position":g.chevronPosition,disabled:d},h],ref:t,onClick:E=>{l==null||l(E),g.onChange(m)},type:"button",disabled:d,"aria-expanded":y,"aria-controls":g.getRegionId(m),id:g.getControlId(m),onKeyDown:kG({siblingSelector:"[data-accordion-control]",parentSelector:"[data-accordion]",activateOnFocus:!1,loop:g.loop,orientation:"vertical",onKeyDown:c}),children:[_.jsx(me,{component:"span",mod:{rotate:!g.disableChevronRotation&&y,position:g.chevronPosition},...g.getStyles("chevron",{classNames:n,styles:s}),children:a||g.chevron}),_.jsx("span",{...g.getStyles("label",{classNames:n,styles:s}),children:f}),u&&_.jsx(me,{component:"span",mod:{"chevron-position":g.chevronPosition},...g.getStyles("icon",{classNames:n,styles:s}),children:u})]});return v?_.jsx(b,{...g.getStyles("itemTitle",{classNames:n,styles:s}),children:w}):w});mY.displayName="@mantine/core/AccordionControl";mY.classes=Ak;const hGe={},gY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,mod:u,...l}=xe("AccordionItem",hGe,e),c=pY();return _.jsx(fGe,{value:{value:a},children:_.jsx(me,{ref:t,mod:[{active:c.isItemActive(a)},u],...c.getStyles("item",{className:r,classNames:n,styles:s,style:i,variant:c.variant}),...l})})});gY.displayName="@mantine/core/AccordionItem";gY.classes=Ak;const pGe={},yY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,...u}=xe("AccordionPanel",pGe,e),{value:l}=Cwe(),c=pY();return _.jsx(i6,{ref:t,...c.getStyles("panel",{className:r,classNames:n,style:i,styles:s}),...u,in:c.isItemActive(l),transitionDuration:c.transitionDuration??200,role:"region",id:c.getRegionId(l),"aria-labelledby":c.getControlId(l),children:_.jsx("div",{...c.getStyles("content",{classNames:n,styles:s}),children:a})})});yY.displayName="@mantine/core/AccordionPanel";yY.classes=Ak;const mGe={multiple:!1,disableChevronRotation:!1,chevronPosition:"right",variant:"default",chevron:_.jsx(JE,{})},gGe=(e,{transitionDuration:t,chevronSize:n,radius:r})=>({root:{"--accordion-transition-duration":t===void 0?void 0:`${t}ms`,"--accordion-chevron-size":n===void 0?void 0:Te(n),"--accordion-radius":r===void 0?void 0:Vr(r)}});function Tu(e){const t=xe("Accordion",mGe,e),{classNames:n,className:r,style:i,styles:s,unstyled:o,vars:a,children:u,multiple:l,value:c,defaultValue:f,onChange:d,id:h,loop:p,transitionDuration:m,disableChevronRotation:g,chevronPosition:y,chevronSize:v,order:b,chevron:w,variant:E,radius:T,...S}=t,A=Ia(h),[C,k]=As({value:c,defaultValue:f,finalValue:l?[]:null,onChange:d}),N=$=>Array.isArray(C)?C.includes($):$===C,D=$=>{const F=Array.isArray(C)?C.includes($)?C.filter(M=>M!==$):[...C,$]:$===C?null:$;k(F)},O=dt({name:"Accordion",classes:Ak,props:t,className:r,style:i,classNames:n,styles:s,unstyled:o,vars:a,varsResolver:gGe});return _.jsx(cGe,{value:{isItemActive:N,onChange:D,getControlId:p$(`${A}-control`,"Accordion.Item component was rendered with invalid value or without value"),getRegionId:p$(`${A}-panel`,"Accordion.Item component was rendered with invalid value or without value"),transitionDuration:m,disableChevronRotation:g,chevronPosition:y,order:b,chevron:w,loop:p,getStyles:O,variant:E,unstyled:o},children:_.jsx(me,{...O("root"),id:A,...S,variant:E,"data-accordion":!0,children:u})})}const yGe=e=>e;Tu.extend=yGe;Tu.classes=Ak;Tu.displayName="@mantine/core/Accordion";Tu.Item=gY;Tu.Panel=yY;Tu.Control=mY;Tu.Chevron=JE;var Iwe={root:"m_66836ed3",wrapper:"m_a5d60502",body:"m_667c2793",title:"m_6a03f287",label:"m_698f4f23",icon:"m_667f2a6a",message:"m_7fa78076",closeButton:"m_87f54839"};const vGe={},bGe=(e,{radius:t,color:n,variant:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:r||"light",autoContrast:i});return{root:{"--alert-radius":t===void 0?void 0:Vr(t),"--alert-bg":n||r?s.background:void 0,"--alert-color":s.color,"--alert-bd":n||r?s.border:void 0}}},yS=Me((e,t)=>{const n=xe("Alert",vGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,title:f,children:d,id:h,icon:p,withCloseButton:m,onClose:g,closeButtonLabel:y,variant:v,autoContrast:b,...w}=n,E=dt({name:"Alert",classes:Iwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:bGe}),T=Ia(h),S=f&&`${T}-title`||void 0,A=`${T}-body`;return _.jsx(me,{id:T,...E("root",{variant:v}),variant:v,ref:t,...w,role:"alert","aria-describedby":A,"aria-labelledby":S,children:_.jsxs("div",{...E("wrapper"),children:[p&&_.jsx("div",{...E("icon"),children:p}),_.jsxs("div",{...E("body"),children:[f&&_.jsx("div",{...E("title"),"data-with-close-button":m||void 0,children:_.jsx("span",{id:S,...E("label"),children:f})}),d&&_.jsx("div",{id:A,...E("message"),"data-variant":v,children:d})]}),m&&_.jsx(tg,{...E("closeButton"),onClick:g,variant:"transparent",size:16,iconSize:16,"aria-label":y,unstyled:a})]})})});yS.classes=Iwe;yS.displayName="@mantine/core/Alert";var kwe={root:"m_b6d8b162"};function _Ge(e){if(e==="start")return"start";if(e==="end"||e)return"end"}const wGe={inherit:!1},EGe=(e,{variant:t,lineClamp:n,gradient:r,size:i,color:s})=>({root:{"--text-fz":po(i),"--text-lh":p_e(i),"--text-gradient":t==="gradient"?$7(r,e):void 0,"--text-line-clamp":typeof n=="number"?n.toString():void 0,"--text-color":s?Lr(s,e):void 0}}),et=qs((e,t)=>{const n=xe("Text",wGe,e),{lineClamp:r,truncate:i,inline:s,inherit:o,gradient:a,span:u,__staticSelector:l,vars:c,className:f,style:d,classNames:h,styles:p,unstyled:m,variant:g,mod:y,size:v,...b}=n,w=dt({name:["Text",l],props:n,classes:kwe,className:f,style:d,classNames:h,styles:p,unstyled:m,vars:c,varsResolver:EGe});return _.jsx(me,{...w("root",{focusable:!0}),ref:t,component:u?"span":"p",variant:g,mod:[{"data-truncate":_Ge(i),"data-line-clamp":typeof r=="number","data-inline":s,"data-inherit":o},y],size:v,...b})});et.classes=kwe;et.displayName="@mantine/core/Text";var Rwe={root:"m_849cf0da"};const xGe={underline:"hover"},Yb=qs((e,t)=>{const{underline:n,className:r,unstyled:i,mod:s,...o}=xe("Anchor",xGe,e);return _.jsx(et,{component:"a",ref:t,className:es({[Rwe.root]:!i},r),...o,mod:[{underline:n},s],__staticSelector:"Anchor",unstyled:i})});Yb.classes=Rwe;Yb.displayName="@mantine/core/Anchor";const[SGe,vS]=yo("AppShell was not found in tree");var qy={root:"m_89ab340",navbar:"m_45252eee",aside:"m_9cdde9a",header:"m_3b16f56b",main:"m_8983817",footer:"m_3840c879",section:"m_6dcfc7c7"};const TGe={},vY=Me((e,t)=>{const n=xe("AppShellAside",TGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=vS();return h.disabled?null:_.jsx(me,{component:"aside",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("aside",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-aside-z-index":`calc(${c??h.zIndex} + 1)`}})});vY.classes=qy;vY.displayName="@mantine/core/AppShellAside";const AGe={},bY=Me((e,t)=>{var p;const n=xe("AppShellFooter",AGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=vS();return h.disabled?null:_.jsx(me,{component:"footer",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("footer",{className:es({[ZL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-footer-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});bY.classes=qy;bY.displayName="@mantine/core/AppShellFooter";const CGe={},_Y=Me((e,t)=>{var p;const n=xe("AppShellHeader",CGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=vS();return h.disabled?null:_.jsx(me,{component:"header",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("header",{className:es({[ZL.classNames.zeroRight]:h.offsetScrollbars},i),classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-header-z-index":(p=c??h.zIndex)==null?void 0:p.toString()}})});_Y.classes=qy;_Y.displayName="@mantine/core/AppShellHeader";const IGe={},wY=Me((e,t)=>{const n=xe("AppShellMain",IGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=vS();return _.jsx(me,{component:"main",ref:t,...l.getStyles("main",{className:i,style:s,classNames:r,styles:o}),...u})});wY.classes=qy;wY.displayName="@mantine/core/AppShellMain";function Ck(e){return typeof e=="object"?e.base:e}function Ik(e){const t=typeof e=="object"&&e!==null&&typeof e.base<"u"&&Object.keys(e).length===1;return typeof e=="number"||typeof e=="string"||t}function kk(e){return!(typeof e!="object"||e===null||Object.keys(e).length===1&&"base"in e)}function kGe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,aside:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(var(--app-shell-aside-width))",a="translateX(calc(var(--app-shell-aside-width) * -1))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-aside-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-aside-offset"]="0px"),Ik(s)){const f=Te(Ck(s));e["--app-shell-aside-width"]=f,e["--app-shell-aside-offset"]=f}if(kk(s)&&(typeof s.base<"u"&&(e["--app-shell-aside-width"]=Te(s.base),e["--app-shell-aside-offset"]=Te(s.base)),Zr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-aside-width"]=Te(s[f]),t[f]["--app-shell-aside-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-aside-transform"]=o,t[f]["--app-shell-aside-transform-rtl"]=a,t[f]["--app-shell-aside-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=NG(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-aside-width"]="100%",n[f]["--app-shell-aside-offset"]="0px",n[f]["--app-shell-aside-transform"]=o,n[f]["--app-shell-aside-transform-rtl"]=a}}function RGe({baseStyles:e,minMediaStyles:t,footer:n}){const r=n==null?void 0:n.height,i="translateY(var(--app-shell-footer-height))",s=(n==null?void 0:n.offset)??!0;if(Ik(r)){const o=Te(Ck(r));e["--app-shell-footer-height"]=o,s&&(e["--app-shell-footer-offset"]=o)}kk(r)&&(typeof r.base<"u"&&(e["--app-shell-footer-height"]=Te(r.base),s&&(e["--app-shell-footer-offset"]=Te(r.base))),Zr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-footer-height"]=Te(r[o]),s&&(t[o]["--app-shell-footer-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-footer-transform"]=i,e["--app-shell-footer-offset"]="0px !important")}function NGe({baseStyles:e,minMediaStyles:t,header:n}){const r=n==null?void 0:n.height,i="translateY(calc(var(--app-shell-header-height) * -1))",s=(n==null?void 0:n.offset)??!0;if(Ik(r)){const o=Te(Ck(r));e["--app-shell-header-height"]=o,s&&(e["--app-shell-header-offset"]=o)}kk(r)&&(typeof r.base<"u"&&(e["--app-shell-header-height"]=Te(r.base),s&&(e["--app-shell-header-offset"]=Te(r.base))),Zr(r).forEach(o=>{o!=="base"&&(t[o]=t[o]||{},t[o]["--app-shell-header-height"]=Te(r[o]),s&&(t[o]["--app-shell-header-offset"]=Te(r[o])))})),n!=null&&n.collapsed&&(e["--app-shell-header-transform"]=i,e["--app-shell-header-offset"]="0px !important")}function PGe({baseStyles:e,minMediaStyles:t,maxMediaStyles:n,navbar:r,theme:i}){var u,l,c;const s=r==null?void 0:r.width,o="translateX(calc(var(--app-shell-navbar-width) * -1))",a="translateX(var(--app-shell-navbar-width))";if(r!=null&&r.breakpoint&&!((u=r==null?void 0:r.collapsed)!=null&&u.mobile)&&(n[r==null?void 0:r.breakpoint]=n[r==null?void 0:r.breakpoint]||{},n[r==null?void 0:r.breakpoint]["--app-shell-navbar-width"]="100%",n[r==null?void 0:r.breakpoint]["--app-shell-navbar-offset"]="0px"),Ik(s)){const f=Te(Ck(s));e["--app-shell-navbar-width"]=f,e["--app-shell-navbar-offset"]=f}if(kk(s)&&(typeof s.base<"u"&&(e["--app-shell-navbar-width"]=Te(s.base),e["--app-shell-navbar-offset"]=Te(s.base)),Zr(s).forEach(f=>{f!=="base"&&(t[f]=t[f]||{},t[f]["--app-shell-navbar-width"]=Te(s[f]),t[f]["--app-shell-navbar-offset"]=Te(s[f]))})),(l=r==null?void 0:r.collapsed)!=null&&l.desktop){const f=r.breakpoint;t[f]=t[f]||{},t[f]["--app-shell-navbar-transform"]=o,t[f]["--app-shell-navbar-transform-rtl"]=a,t[f]["--app-shell-navbar-offset"]="0px !important"}if((c=r==null?void 0:r.collapsed)!=null&&c.mobile){const f=NG(r.breakpoint,i)-.1;n[f]=n[f]||{},n[f]["--app-shell-navbar-width"]="100%",n[f]["--app-shell-navbar-offset"]="0px",n[f]["--app-shell-navbar-transform"]=o,n[f]["--app-shell-navbar-transform-rtl"]=a}}function k8(e){return Number(e)===0?"0px":fs(e)}function OGe({padding:e,baseStyles:t,minMediaStyles:n}){Ik(e)&&(t["--app-shell-padding"]=k8(Ck(e))),kk(e)&&(e.base&&(t["--app-shell-padding"]=k8(e.base)),Zr(e).forEach(r=>{r!=="base"&&(n[r]=n[r]||{},n[r]["--app-shell-padding"]=k8(e[r]))}))}function DGe({navbar:e,header:t,footer:n,aside:r,padding:i,theme:s}){const o={},a={},u={};PGe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,navbar:e,theme:s}),kGe({baseStyles:u,minMediaStyles:o,maxMediaStyles:a,aside:r,theme:s}),NGe({baseStyles:u,minMediaStyles:o,header:t}),RGe({baseStyles:u,minMediaStyles:o,footer:n}),OGe({baseStyles:u,minMediaStyles:o,padding:i});const l=W2(Zr(o),s).map(d=>({query:`(min-width: ${h$(d.px)})`,styles:o[d.value]})),c=W2(Zr(a),s).map(d=>({query:`(max-width: ${h$(d.px)})`,styles:a[d.value]})),f=[...l,...c];return{baseStyles:u,media:f}}function $Ge({navbar:e,header:t,aside:n,footer:r,padding:i}){const s=ys(),o=Vy(),{media:a,baseStyles:u}=DGe({navbar:e,header:t,footer:r,aside:n,padding:i,theme:s});return _.jsx(Hb,{media:a,styles:u,selector:o.cssVariablesSelector})}const MGe={},EY=Me((e,t)=>{const n=xe("AppShellNavbar",MGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,withBorder:l,zIndex:c,mod:f,...d}=n,h=vS();return h.disabled?null:_.jsx(me,{component:"nav",ref:t,mod:[{"with-border":l??h.withBorder},f],...h.getStyles("navbar",{className:i,classNames:r,styles:o,style:s}),...d,__vars:{"--app-shell-navbar-z-index":`calc(${c??h.zIndex} + 1)`}})});EY.classes=qy;EY.displayName="@mantine/core/AppShellNavbar";const LGe={},xY=qs((e,t)=>{const n=xe("AppShellSection",LGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,grow:u,mod:l,...c}=n,f=vS();return _.jsx(me,{ref:t,mod:[{grow:u},l],...f.getStyles("section",{className:i,style:s,classNames:r,styles:o}),...c})});xY.classes=qy;xY.displayName="@mantine/core/AppShellSection";function FGe({transitionDuration:e,disabled:t}){const[n,r]=I.useState(!0),i=I.useRef(),s=I.useRef();return b_e("resize",()=>{r(!0),clearTimeout(i.current),i.current=window.setTimeout(()=>r(!1),200)}),Vb(()=>{I.startTransition(()=>{r(!0),clearTimeout(s.current),s.current=window.setTimeout(()=>r(!1),e||0)})},[t,e]),n}const jGe={withBorder:!0,offsetScrollbars:!0,padding:0,transitionDuration:200,transitionTimingFunction:"ease",zIndex:rc("app")},BGe=(e,{transitionDuration:t,transitionTimingFunction:n})=>({root:{"--app-shell-transition-duration":`${t}ms`,"--app-shell-transition-timing-function":n}}),pi=Me((e,t)=>{const n=xe("AppShell",jGe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,navbar:l,withBorder:c,padding:f,transitionDuration:d,transitionTimingFunction:h,header:p,zIndex:m,layout:g,disabled:y,aside:v,footer:b,offsetScrollbars:w,mod:E,...T}=n,S=dt({name:"AppShell",classes:qy,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:BGe}),A=FGe({disabled:y,transitionDuration:d});return _.jsxs(SGe,{value:{getStyles:S,withBorder:c,zIndex:m,disabled:y,offsetScrollbars:w},children:[_.jsx($Ge,{navbar:l,header:p,aside:v,footer:b,padding:f}),_.jsx(me,{ref:t,...S("root"),mod:[{resizing:A,layout:g,disabled:y},E],...T})]})});pi.classes=qy;pi.displayName="@mantine/core/AppShell";pi.Navbar=EY;pi.Header=_Y;pi.Main=wY;pi.Aside=vY;pi.Footer=bY;pi.Section=xY;function Nwe(e){return typeof e=="string"?{value:e,label:e}:"value"in e&&!("label"in e)?{value:e.value,label:e.value,disabled:e.disabled}:typeof e=="number"?{value:e.toString(),label:e.toString()}:"group"in e?{group:e.group,items:e.items.map(t=>Nwe(t))}:e}function Pwe(e){return e?e.map(t=>Nwe(t)):[]}function SY(e){return e.reduce((t,n)=>"group"in n?{...t,...SY(n.items)}:(t[n.value]=n,t),{})}var el={dropdown:"m_88b62a41",options:"m_b2821a6e",option:"m_92253aa5",search:"m_985517d8",empty:"m_2530cd1d",header:"m_858f94bd",footer:"m_82b967cb",group:"m_254f3e4f",groupLabel:"m_2bb2e9e5",chevron:"m_2943220b",optionsDropdownOption:"m_390b5f4",optionsDropdownCheckIcon:"m_8ee53fc2"};const UGe={error:null},zGe=(e,{size:t})=>({chevron:{"--combobox-chevron-size":tn(t,"combobox-chevron-size")}}),TY=Me((e,t)=>{const n=xe("ComboboxChevron",UGe,e),{size:r,error:i,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,mod:f,...d}=n,h=dt({name:"ComboboxChevron",classes:el,props:n,style:s,className:o,classNames:a,styles:u,unstyled:l,vars:c,varsResolver:zGe,rootSelector:"chevron"});return _.jsx(me,{component:"svg",...d,...h("chevron"),size:r,viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",mod:["combobox-chevron",{error:i},f],ref:t,children:_.jsx("path",{d:"M4.93179 5.43179C4.75605 5.60753 4.75605 5.89245 4.93179 6.06819C5.10753 6.24392 5.39245 6.24392 5.56819 6.06819L7.49999 4.13638L9.43179 6.06819C9.60753 6.24392 9.89245 6.24392 10.0682 6.06819C10.2439 5.89245 10.2439 5.60753 10.0682 5.43179L7.81819 3.18179C7.73379 3.0974 7.61933 3.04999 7.49999 3.04999C7.38064 3.04999 7.26618 3.0974 7.18179 3.18179L4.93179 5.43179ZM10.0682 9.56819C10.2439 9.39245 10.2439 9.10753 10.0682 8.93179C9.89245 8.75606 9.60753 8.75606 9.43179 8.93179L7.49999 10.8636L5.56819 8.93179C5.39245 8.75606 5.10753 8.75606 4.93179 8.93179C4.75605 9.10753 4.75605 9.39245 4.93179 9.56819L7.18179 11.8182C7.35753 11.9939 7.64245 11.9939 7.81819 11.8182L10.0682 9.56819Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})});TY.classes=el;TY.displayName="@mantine/core/ComboboxChevron";const[VGe,Jc]=yo("Combobox component was not found in tree"),Owe=I.forwardRef(({size:e,onMouseDown:t,onClick:n,onClear:r,...i},s)=>_.jsx(tg,{ref:s,size:e||"sm",variant:"transparent",tabIndex:-1,"aria-hidden":!0,...i,onMouseDown:o=>{o.preventDefault(),t==null||t(o)},onClick:o=>{r(),n==null||n(o)}}));Owe.displayName="@mantine/core/ComboboxClearButton";const HGe={},AY=Me((e,t)=>{const{classNames:n,styles:r,className:i,style:s,hidden:o,...a}=xe("ComboboxDropdown",HGe,e),u=Jc();return _.jsx(Mo.Dropdown,{...a,ref:t,role:"presentation","data-hidden":o||void 0,...u.getStyles("dropdown",{className:i,style:s,classNames:n,styles:r})})});AY.classes=el;AY.displayName="@mantine/core/ComboboxDropdown";const qGe={refProp:"ref"},Dwe=Me((e,t)=>{const{children:n,refProp:r}=xe("ComboboxDropdownTarget",qGe,e);if(Jc(),!zy(n))throw new Error("Combobox.DropdownTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");return _.jsx(Mo.Target,{ref:t,refProp:r,children:n})});Dwe.displayName="@mantine/core/ComboboxDropdownTarget";const WGe={},CY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxEmpty",WGe,e),u=Jc();return _.jsx(me,{ref:t,...u.getStyles("empty",{className:r,classNames:n,styles:s,style:i}),...a})});CY.classes=el;CY.displayName="@mantine/core/ComboboxEmpty";function IY({onKeyDown:e,withKeyboardNavigation:t,withAriaAttributes:n,withExpandedAttribute:r,targetType:i,autoComplete:s}){const o=Jc(),[a,u]=I.useState(null),l=f=>{if(e==null||e(f),!o.readOnly&&t){if(f.nativeEvent.isComposing)return;if(f.nativeEvent.code==="ArrowDown"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectNextOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="ArrowUp"&&(f.preventDefault(),o.store.dropdownOpened?u(o.store.selectPreviousOption()):(o.store.openDropdown("keyboard"),u(o.store.selectActiveOption()))),f.nativeEvent.code==="Enter"||f.nativeEvent.code==="NumpadEnter"){if(f.nativeEvent.keyCode===229)return;const d=o.store.getSelectedOptionIndex();o.store.dropdownOpened&&d!==-1?(f.preventDefault(),o.store.clickSelectedOption()):i==="button"&&(f.preventDefault(),o.store.openDropdown("keyboard"))}f.nativeEvent.code==="Escape"&&o.store.closeDropdown("keyboard"),f.nativeEvent.code==="Space"&&i==="button"&&(f.preventDefault(),o.store.toggleDropdown("keyboard"))}};return{...n?{"aria-haspopup":"listbox","aria-expanded":r&&!!(o.store.listId&&o.store.dropdownOpened)||void 0,"aria-controls":o.store.listId,"aria-activedescendant":o.store.dropdownOpened&&a||void 0,autoComplete:s,"data-expanded":o.store.dropdownOpened||void 0,"data-mantine-stop-propagation":o.store.dropdownOpened||void 0}:{},onKeyDown:l}}const GGe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},$we=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxEventsTarget",GGe,e);if(!zy(n))throw new Error("Combobox.EventsTarget component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Jc(),f=IY({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u});return I.cloneElement(n,{...f,...l,[r]:gs(t,c.store.targetRef,n==null?void 0:n.ref)})});$we.displayName="@mantine/core/ComboboxEventsTarget";const YGe={},kY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxFooter",YGe,e),u=Jc();return _.jsx(me,{ref:t,...u.getStyles("footer",{className:r,classNames:n,style:i,styles:s}),...a})});kY.classes=el;kY.displayName="@mantine/core/ComboboxFooter";const KGe={},RY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,children:a,label:u,...l}=xe("ComboboxGroup",KGe,e),c=Jc();return _.jsxs(me,{ref:t,...c.getStyles("group",{className:r,classNames:n,style:i,styles:s}),...l,children:[u&&_.jsx("div",{...c.getStyles("groupLabel",{classNames:n,styles:s}),children:u}),a]})});RY.classes=el;RY.displayName="@mantine/core/ComboboxGroup";const XGe={},NY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ComboboxHeader",XGe,e),u=Jc();return _.jsx(me,{ref:t,...u.getStyles("header",{className:r,classNames:n,style:i,styles:s}),...a})});NY.classes=el;NY.displayName="@mantine/core/ComboboxHeader";function Mwe({value:e,valuesDivider:t=",",...n}){return _.jsx("input",{type:"hidden",value:Array.isArray(e)?e.join(t):e||"",...n})}Mwe.displayName="@mantine/core/ComboboxHiddenInput";const QGe={},PY=Me((e,t)=>{const n=xe("ComboboxOption",QGe,e),{classNames:r,className:i,style:s,styles:o,vars:a,onClick:u,id:l,active:c,onMouseDown:f,onMouseOver:d,disabled:h,selected:p,mod:m,...g}=n,y=Jc(),v=I.useId(),b=l||v;return _.jsx(me,{...y.getStyles("option",{className:i,classNames:r,styles:o,style:s}),...g,ref:t,id:b,mod:["combobox-option",{"combobox-active":c,"combobox-disabled":h,"combobox-selected":p},m],role:"option",onClick:w=>{var E;h?w.preventDefault():((E=y.onOptionSubmit)==null||E.call(y,n.value,n),u==null||u(w))},onMouseDown:w=>{w.preventDefault(),f==null||f(w)},onMouseOver:w=>{y.resetSelectionOnOptionHover&&y.store.resetSelectedOption(),d==null||d(w)}})});PY.classes=el;PY.displayName="@mantine/core/ComboboxOption";const JGe={},OY=Me((e,t)=>{const n=xe("ComboboxOptions",JGe,e),{classNames:r,className:i,style:s,styles:o,id:a,onMouseDown:u,labelledBy:l,...c}=n,f=Jc(),d=Ia(a);return I.useEffect(()=>{f.store.setListId(d)},[d]),_.jsx(me,{ref:t,...f.getStyles("options",{className:i,style:s,classNames:r,styles:o}),...c,id:d,role:"listbox","aria-labelledby":l,onMouseDown:h=>{h.preventDefault(),u==null||u(h)}})});OY.classes=el;OY.displayName="@mantine/core/ComboboxOptions";const ZGe={withAriaAttributes:!0,withKeyboardNavigation:!0},DY=Me((e,t)=>{const n=xe("ComboboxSearch",ZGe,e),{classNames:r,styles:i,unstyled:s,vars:o,withAriaAttributes:a,onKeyDown:u,withKeyboardNavigation:l,size:c,...f}=n,d=Jc(),h=d.getStyles("search"),p=IY({targetType:"input",withAriaAttributes:a,withKeyboardNavigation:l,withExpandedAttribute:!1,onKeyDown:u,autoComplete:"off"});return _.jsx(mi,{ref:gs(t,d.store.searchRef),classNames:[{input:h.className},r],styles:[{input:h.style},i],size:c||d.size,...p,...f,__staticSelector:"Combobox"})});DY.classes=el;DY.displayName="@mantine/core/ComboboxSearch";const eYe={refProp:"ref",targetType:"input",withKeyboardNavigation:!0,withAriaAttributes:!0,withExpandedAttribute:!1,autoComplete:"off"},Lwe=Me((e,t)=>{const{children:n,refProp:r,withKeyboardNavigation:i,withAriaAttributes:s,withExpandedAttribute:o,targetType:a,autoComplete:u,...l}=xe("ComboboxTarget",eYe,e);if(!zy(n))throw new Error("Combobox.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const c=Jc(),f=IY({targetType:a,withAriaAttributes:s,withKeyboardNavigation:i,withExpandedAttribute:o,onKeyDown:n.props.onKeyDown,autoComplete:u}),d=I.cloneElement(n,{...f,...l});return _.jsx(Mo.Target,{ref:gs(t,c.store.targetRef),children:d})});Lwe.displayName="@mantine/core/ComboboxTarget";function tYe(e,t,n){for(let r=e-1;r>=0;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=t.length-1;r>-1;r-=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function nYe(e,t,n){for(let r=e+1;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r;if(n){for(let r=0;r<t.length;r+=1)if(!t[r].hasAttribute("data-combobox-disabled"))return r}return e}function rYe(e){for(let t=0;t<e.length;t+=1)if(!e[t].hasAttribute("data-combobox-disabled"))return t;return-1}function $Y({defaultOpened:e,opened:t,onOpenedChange:n,onDropdownClose:r,onDropdownOpen:i,loop:s=!0,scrollBehavior:o="instant"}={}){const[a,u]=As({value:t,defaultValue:e,finalValue:!1,onChange:n}),l=I.useRef(null),c=I.useRef(-1),f=I.useRef(null),d=I.useRef(null),h=I.useRef(-1),p=I.useRef(-1),m=I.useRef(-1),g=I.useCallback((M="unknown")=>{a||(u(!0),i==null||i(M))},[u,i,a]),y=I.useCallback((M="unknown")=>{a&&(u(!1),r==null||r(M))},[u,r,a]),v=I.useCallback((M="unknown")=>{a?y(M):g(M)},[y,g,a]),b=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-selected]`);M==null||M.removeAttribute("data-combobox-selected"),M==null||M.removeAttribute("aria-selected")},[]),w=I.useCallback(M=>{const B=document.getElementById(l.current),U=B==null?void 0:B.querySelectorAll("[data-combobox-option]");if(!U)return null;const H=M>=U.length?0:M<0?U.length-1:M;return c.current=H,U!=null&&U[H]&&!U[H].hasAttribute("data-combobox-disabled")?(b(),U[H].setAttribute("data-combobox-selected","true"),U[H].setAttribute("aria-selected","true"),U[H].scrollIntoView({block:"nearest",behavior:o}),U[H].id):null},[o,b]),E=I.useCallback(()=>{const M=document.querySelector(`#${l.current} [data-combobox-active]`);if(M){const B=document.querySelectorAll(`#${l.current} [data-combobox-option]`),U=Array.from(B).findIndex(H=>H===M);return w(U)}return w(0)},[w]),T=I.useCallback(()=>w(nYe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),S=I.useCallback(()=>w(tYe(c.current,document.querySelectorAll(`#${l.current} [data-combobox-option]`),s)),[w,s]),A=I.useCallback(()=>w(rYe(document.querySelectorAll(`#${l.current} [data-combobox-option]`))),[w]),C=I.useCallback((M="selected",B)=>{m.current=window.setTimeout(()=>{var P;const U=document.querySelectorAll(`#${l.current} [data-combobox-option]`),H=Array.from(U).findIndex(z=>z.hasAttribute(`data-combobox-${M}`));c.current=H,B!=null&&B.scrollIntoView&&((P=U[H])==null||P.scrollIntoView({block:"nearest",behavior:o}))},0)},[]),k=I.useCallback(()=>{c.current=-1,b()},[b]),N=I.useCallback(()=>{const M=document.querySelectorAll(`#${l.current} [data-combobox-option]`),B=M==null?void 0:M[c.current];B==null||B.click()},[]),D=I.useCallback(M=>{l.current=M},[]),O=I.useCallback(()=>{h.current=window.setTimeout(()=>f.current.focus(),0)},[]),$=I.useCallback(()=>{p.current=window.setTimeout(()=>d.current.focus(),0)},[]),F=I.useCallback(()=>c.current,[]);return I.useEffect(()=>()=>{window.clearTimeout(h.current),window.clearTimeout(p.current),window.clearTimeout(m.current)},[]),{dropdownOpened:a,openDropdown:g,closeDropdown:y,toggleDropdown:v,selectedOptionIndex:c.current,getSelectedOptionIndex:F,selectOption:w,selectFirstOption:A,selectActiveOption:E,selectNextOption:T,selectPreviousOption:S,resetSelectedOption:k,updateSelectedOptionIndex:C,listId:l.current,setListId:D,clickSelectedOption:N,searchRef:f,focusSearchInput:O,targetRef:d,focusTarget:$}}const iYe={keepMounted:!0,withinPortal:!0,resetSelectionOnOptionHover:!1,width:"target",transitionProps:{transition:"fade",duration:0}},sYe=(e,{size:t,dropdownPadding:n})=>({options:{"--combobox-option-fz":po(t),"--combobox-option-padding":tn(t,"combobox-option-padding")},dropdown:{"--combobox-padding":n===void 0?void 0:Te(n),"--combobox-option-fz":po(t),"--combobox-option-padding":tn(t,"combobox-option-padding")}});function Qn(e){const t=xe("Combobox",iYe,e),{classNames:n,styles:r,unstyled:i,children:s,store:o,vars:a,onOptionSubmit:u,onClose:l,size:c,dropdownPadding:f,resetSelectionOnOptionHover:d,__staticSelector:h,readOnly:p,...m}=t,g=$Y(),y=o||g,v=dt({name:h||"Combobox",classes:el,props:t,classNames:n,styles:r,unstyled:i,vars:a,varsResolver:sYe}),b=()=>{l==null||l(),y.closeDropdown()};return _.jsx(VGe,{value:{getStyles:v,store:y,onOptionSubmit:u,size:c,resetSelectionOnOptionHover:d,readOnly:p},children:_.jsx(Mo,{opened:y.dropdownOpened,...m,onClose:b,withRoles:!1,unstyled:i,children:s})})}const oYe=e=>e;Qn.extend=oYe;Qn.classes=el;Qn.displayName="@mantine/core/Combobox";Qn.Target=Lwe;Qn.Dropdown=AY;Qn.Options=OY;Qn.Option=PY;Qn.Search=DY;Qn.Empty=CY;Qn.Chevron=TY;Qn.Footer=kY;Qn.Header=NY;Qn.EventsTarget=$we;Qn.DropdownTarget=Dwe;Qn.Group=RY;Qn.ClearButton=Owe;Qn.HiddenInput=Mwe;var Fwe={root:"m_5f75b09e",body:"m_5f6e695e",labelWrapper:"m_d3ea56bb",label:"m_8ee546b8",description:"m_328f68c0",error:"m_8e8a99cc"};const jwe=Fwe,d6=I.forwardRef(({__staticSelector:e,__stylesApiProps:t,className:n,classNames:r,styles:i,unstyled:s,children:o,label:a,description:u,id:l,disabled:c,error:f,size:d,labelPosition:h="left",bodyElement:p="div",labelElement:m="label",variant:g,style:y,vars:v,mod:b,...w},E)=>{const T=dt({name:e,props:t,className:n,style:y,classes:Fwe,classNames:r,styles:i,unstyled:s});return _.jsx(me,{...T("root"),ref:E,__vars:{"--label-fz":po(d),"--label-lh":tn(d,"label-lh")},mod:[{"label-position":h},b],variant:g,size:d,...w,children:_.jsxs(me,{component:p,htmlFor:p==="label"?l:void 0,...T("body"),children:[o,_.jsxs("div",{...T("labelWrapper"),"data-disabled":c||void 0,children:[a&&_.jsx(me,{component:m,htmlFor:m==="label"?l:void 0,...T("label"),"data-disabled":c||void 0,children:a}),u&&_.jsx(mi.Description,{size:d,__inheritStyles:!1,...T("description"),children:u}),f&&typeof f!="boolean"&&_.jsx(mi.Error,{size:d,__inheritStyles:!1,...T("error"),children:f})]})]})})});d6.displayName="@mantine/core/InlineInput";const Bwe=I.createContext(null),aYe=Bwe.Provider,Uwe=()=>I.useContext(Bwe),[uYe,lYe]=cS();var zwe={card:"m_26775b0a"};const cYe={withBorder:!0},fYe=(e,{radius:t})=>({card:{"--card-radius":Vr(t)}}),MY=Me((e,t)=>{const n=xe("CheckboxCard",cYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,...p}=n,m=dt({name:"CheckboxCard",classes:zwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fYe,rootSelector:"card"}),g=Uwe(),y=typeof l=="boolean"?l:(g==null?void 0:g.value.includes(d||""))||!1;return _.jsx(uYe,{value:{checked:y},children:_.jsx(Ts,{ref:t,mod:[{"with-border":f,checked:y},c],...m("card"),...p,role:"checkbox","aria-checked":y,onClick:v=>{h==null||h(v),g==null||g.onChange(d||"")}})})});MY.displayName="@mantine/core/CheckboxCard";MY.classes=zwe;function LY({children:e,role:t}){const n=gS();return n?_.jsx("div",{role:t,"aria-labelledby":n.labelId,"aria-describedby":n.describedBy,children:e}):_.jsx(_.Fragment,{children:e})}const dYe={},FY=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("CheckboxGroup",dYe,e),[c,f]=As({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=typeof h=="string"?h:h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(aYe,{value:{value:c,onChange:d,size:s},children:_.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"CheckboxGroup",children:_.jsx(LY,{role:"group",children:a})})})});FY.classes=mi.Wrapper.classes;FY.displayName="@mantine/core/CheckboxGroup";function Vwe({size:e,style:t,...n}){const r=e!==void 0?{width:Te(e),height:Te(e),...t}:t;return _.jsx("svg",{viewBox:"0 0 10 7",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:r,"aria-hidden":!0,...n,children:_.jsx("path",{d:"M4 4.586L1.707 2.293A1 1 0 1 0 .293 3.707l3 3a.997.997 0 0 0 1.414 0l5-5A1 1 0 1 0 8.293.293L4 4.586z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}function Hwe({indeterminate:e,...t}){return e?_.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 6","aria-hidden":!0,...t,children:_.jsx("rect",{width:"32",height:"6",fill:"currentColor",rx:"3"})}):_.jsx(Vwe,{...t})}var qwe={indicator:"m_5e5256ee",icon:"m_1b1c543a","indicator--outline":"m_76e20374"};const hYe={icon:Hwe},pYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Gh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Vr(t),"--checkbox-color":s==="outline"?u:Lr(n,e),"--checkbox-icon-color":i?Lr(i,e):fS(o,e)?Hy({color:n,theme:e,autoContrast:o}):void 0}}},jY=Me((e,t)=>{const n=xe("CheckboxIndicator",hYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,indeterminate:c,radius:f,color:d,iconColor:h,autoContrast:p,checked:m,mod:g,variant:y,disabled:v,...b}=n,w=l,E=dt({name:"CheckboxIndicator",classes:qwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:pYe,rootSelector:"indicator"}),T=lYe(),S=typeof m=="boolean"||typeof c=="boolean"?m||c:(T==null?void 0:T.checked)||!1;return _.jsx(me,{ref:t,...E("indicator",{variant:y}),variant:y,mod:[{checked:S,disabled:v},g],...b,children:_.jsx(w,{indeterminate:c,...E("icon")})})});jY.displayName="@mantine/core/CheckboxIndicator";jY.classes=qwe;var Wwe={root:"m_bf2d988c",inner:"m_26062bec",input:"m_26063560",icon:"m_bf295423","input--outline":"m_215c4542"};const mYe={labelPosition:"right",icon:Hwe},gYe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Gh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--checkbox-size":tn(r,"checkbox-size"),"--checkbox-radius":t===void 0?void 0:Vr(t),"--checkbox-color":s==="outline"?u:Lr(n,e),"--checkbox-icon-color":i?Lr(i,e):fS(o,e)?Hy({color:n,theme:e,autoContrast:o}):void 0}}},Il=Me((e,t)=>{const n=xe("Checkbox",mYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,id:f,size:d,radius:h,wrapperProps:p,children:m,checked:g,labelPosition:y,description:v,error:b,disabled:w,variant:E,indeterminate:T,icon:S,rootRef:A,iconColor:C,onChange:k,autoContrast:N,mod:D,...O}=n,$=Uwe(),F=d||($==null?void 0:$.size),M=S,B=dt({name:"Checkbox",props:n,classes:Wwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:gYe}),{styleProps:U,rest:H}=qb(O),P=Ia(f),z=$?{checked:$.value.includes(H.value),onChange:W=>{$.onChange(W),k==null||k(W)}}:{};return _.jsx(d6,{...B("root"),__staticSelector:"Checkbox",__stylesApiProps:n,id:P,size:F,labelPosition:y,label:c,description:v,error:b,disabled:w,classNames:r,styles:o,unstyled:a,"data-checked":z.checked||g||void 0,variant:E,ref:A,mod:D,...U,...p,children:_.jsxs(me,{...B("inner"),mod:{"data-label-position":y},children:[_.jsx(me,{component:"input",id:P,ref:t,checked:g,disabled:w,mod:{error:!!b,indeterminate:T},...B("input",{focusable:!0,variant:E}),onChange:k,...H,...z,type:"checkbox"}),_.jsx(M,{indeterminate:T,...B("icon")})]})})});Il.classes={...Wwe,...jwe};Il.displayName="@mantine/core/Checkbox";Il.Group=FY;Il.Indicator=jY;Il.Card=MY;function ZE(e){return"group"in e}function Gwe({options:e,search:t,limit:n}){const r=t.trim().toLowerCase(),i=[];for(let s=0;s<e.length;s+=1){const o=e[s];if(i.length===n)return i;ZE(o)&&i.push({group:o.group,items:Gwe({options:o.items,search:t,limit:n-i.length})}),ZE(o)||o.label.toLowerCase().includes(r)&&i.push(o)}return i}function yYe(e){if(e.length===0)return!0;for(const t of e)if(!("group"in t)||t.items.length>0)return!1;return!0}function Ywe(e,t=new Set){if(Array.isArray(e))for(const n of e)if(ZE(n))Ywe(n.items,t);else{if(typeof n.value>"u")throw new Error("[@mantine/core] Each option must have value property");if(typeof n.value!="string")throw new Error(`[@mantine/core] Option value must be a string, other data formats are not supported, got ${typeof n.value}`);if(t.has(n.value))throw new Error(`[@mantine/core] Duplicate options are not supported. Option with value "${n.value}" was provided more than once`);t.add(n.value)}}function vYe(e,t){return Array.isArray(e)?e.includes(t):e===t}function Kwe({data:e,withCheckIcon:t,value:n,checkIconPosition:r,unstyled:i,renderOption:s}){if(!ZE(e)){const a=vYe(n,e.value),u=t&&a&&_.jsx(Vwe,{className:el.optionsDropdownCheckIcon}),l=_.jsxs(_.Fragment,{children:[r==="left"&&u,_.jsx("span",{children:e.label}),r==="right"&&u]});return _.jsx(Qn.Option,{value:e.value,disabled:e.disabled,className:es({[el.optionsDropdownOption]:!i}),"data-reverse":r==="right"||void 0,"data-checked":a||void 0,"aria-selected":a,active:a,children:typeof s=="function"?s({option:e,checked:a}):l})}const o=e.items.map(a=>_.jsx(Kwe,{data:a,value:n,unstyled:i,withCheckIcon:t,checkIconPosition:r,renderOption:s},a.value));return _.jsx(Qn.Group,{label:e.group,children:o})}function Xwe({data:e,hidden:t,hiddenWhenEmpty:n,filter:r,search:i,limit:s,maxDropdownHeight:o,withScrollArea:a=!0,filterOptions:u=!0,withCheckIcon:l=!1,value:c,checkIconPosition:f,nothingFoundMessage:d,unstyled:h,labelId:p,renderOption:m,scrollAreaProps:g,"aria-label":y}){Ywe(e);const b=typeof i=="string"?(r||Gwe)({options:e,search:u?i:"",limit:s??1/0}):e,w=yYe(b),E=b.map(T=>_.jsx(Kwe,{data:T,withCheckIcon:l,value:c,checkIconPosition:f,unstyled:h,renderOption:m},ZE(T)?T.group:T.value));return _.jsx(Qn.Dropdown,{hidden:t||n&&w,children:_.jsxs(Qn.Options,{labelledBy:p,"aria-label":y,children:[a?_.jsx(Sm.Autosize,{mah:o??220,type:"scroll",scrollbarSize:"var(--combobox-padding)",offsetScrollbars:"y",...g,children:E}):E,w&&d&&_.jsx(Qn.Empty,{children:d})]})})}var Qwe={root:"m_347db0ec","root--dot":"m_fbd81e3d",label:"m_5add502a",section:"m_91fdda9b"};const bYe={},_Ye=(e,{radius:t,color:n,gradient:r,variant:i,size:s,autoContrast:o})=>{const a=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:o});return{root:{"--badge-height":tn(s,"badge-height"),"--badge-padding-x":tn(s,"badge-padding-x"),"--badge-fz":tn(s,"badge-fz"),"--badge-radius":t===void 0?void 0:Vr(t),"--badge-bg":n||i?a.background:void 0,"--badge-color":n||i?a.color:void 0,"--badge-bd":n||i?a.border:void 0,"--badge-dot-color":i==="dot"?Lr(n,e):void 0}}},k0=qs((e,t)=>{const n=xe("Badge",bYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,radius:l,color:c,gradient:f,leftSection:d,rightSection:h,children:p,variant:m,fullWidth:g,autoContrast:y,circle:v,mod:b,...w}=n,E=dt({name:"Badge",props:n,classes:Qwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:_Ye});return _.jsxs(me,{variant:m,mod:[{block:g,circle:v},b],...E("root",{variant:m}),ref:t,...w,children:[d&&_.jsx("span",{...E("section"),"data-position":"left",children:d}),_.jsx("span",{...E("label"),children:p}),h&&_.jsx("span",{...E("section"),"data-position":"right",children:h})]})});k0.classes=Qwe;k0.displayName="@mantine/core/Badge";var Jwe={root:"m_fea6bf1a",burger:"m_d4fb9cad"};const wYe={},EYe=(e,{color:t,size:n,transitionDuration:r,transitionTimingFunction:i})=>({root:{"--burger-color":t?Lr(t,e):void 0,"--burger-size":tn(n,"burger-size"),"--burger-transition-duration":r===void 0?void 0:`${r}ms`,"--burger-transition-timing-function":i}}),BY=Me((e,t)=>{const n=xe("Burger",wYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,children:c,transitionDuration:f,transitionTimingFunction:d,...h}=n,p=dt({name:"Burger",classes:Jwe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:EYe});return _.jsxs(Ts,{...p("root"),ref:t,...h,children:[_.jsx(me,{mod:["reduce-motion",{opened:l}],...p("burger")}),c]})});BY.classes=Jwe;BY.displayName="@mantine/core/Burger";var h6={root:"m_77c9d27d",inner:"m_80f1301b",label:"m_811560b9",section:"m_a74036a",loader:"m_a25b86ee",group:"m_80d6d844"};const Uae={orientation:"horizontal"},xYe=(e,{borderWidth:t})=>({group:{"--button-border-width":Te(t)}}),UY=Me((e,t)=>{const n=xe("ButtonGroup",Uae,e),{className:r,style:i,classNames:s,styles:o,unstyled:a,orientation:u,vars:l,borderWidth:c,variant:f,mod:d,...h}=xe("ButtonGroup",Uae,e),p=dt({name:"ButtonGroup",props:n,classes:h6,className:r,style:i,classNames:s,styles:o,unstyled:a,vars:l,varsResolver:xYe,rootSelector:"group"});return _.jsx(me,{...p("group"),ref:t,variant:f,mod:[{"data-orientation":u},d],role:"group",...h})});UY.classes=h6;UY.displayName="@mantine/core/ButtonGroup";const SYe={in:{opacity:1,transform:`translate(-50%, calc(-50% + ${Te(1)}))`},out:{opacity:0,transform:"translate(-50%, -200%)"},common:{transformOrigin:"center"},transitionProperty:"transform, opacity"},TYe={},AYe=(e,{radius:t,color:n,gradient:r,variant:i,size:s,justify:o,autoContrast:a})=>{const u=e.variantColorResolver({color:n||e.primaryColor,theme:e,gradient:r,variant:i||"filled",autoContrast:a});return{root:{"--button-justify":o,"--button-height":tn(s,"button-height"),"--button-padding-x":tn(s,"button-padding-x"),"--button-fz":s!=null&&s.includes("compact")?po(s.replace("compact-","")):po(s),"--button-radius":t===void 0?void 0:Vr(t),"--button-bg":n||i?u.background:void 0,"--button-hover":n||i?u.hover:void 0,"--button-color":u.color,"--button-bd":n||i?u.border:void 0,"--button-hover-color":n||i?u.hoverColor:void 0}}},cn=qs((e,t)=>{const n=xe("Button",TYe,e),{style:r,vars:i,className:s,color:o,disabled:a,children:u,leftSection:l,rightSection:c,fullWidth:f,variant:d,radius:h,loading:p,loaderProps:m,gradient:g,classNames:y,styles:v,unstyled:b,"data-disabled":w,autoContrast:E,mod:T,...S}=n,A=dt({name:"Button",props:n,classes:h6,className:s,style:r,classNames:y,styles:v,unstyled:b,vars:i,varsResolver:AYe}),C=!!l,k=!!c;return _.jsxs(Ts,{ref:t,...A("root",{active:!a&&!p&&!w}),unstyled:b,variant:d,disabled:a||p,mod:[{disabled:a||w,loading:p,block:f,"with-left-section":C,"with-right-section":k},T],...S,children:[_.jsx(eg,{mounted:!!p,transition:SYe,duration:150,children:N=>_.jsx(me,{component:"span",...A("loader",{style:N}),"aria-hidden":!0,children:_.jsx(Kc,{color:"var(--button-color)",size:"calc(var(--button-height) / 1.8)",...m})})}),_.jsxs("span",{...A("inner"),children:[l&&_.jsx(me,{component:"span",...A("section"),mod:{position:"left"},children:l}),_.jsx(me,{component:"span",mod:{loading:p},...A("label"),children:u}),c&&_.jsx(me,{component:"span",...A("section"),mod:{position:"right"},children:c})]})]})});cn.classes=h6;cn.displayName="@mantine/core/Button";cn.Group=UY;const[CYe,IYe]=yo("Card component was not found in tree");var zY={root:"m_e615b15f",section:"m_599a2148"};const kYe={},p6=qs((e,t)=>{const n=xe("CardSection",kYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,withBorder:u,inheritPadding:l,mod:c,...f}=n,d=IYe();return _.jsx(me,{ref:t,mod:[{"with-border":u,"inherit-padding":l},c],...d.getStyles("section",{className:i,style:s,styles:o,classNames:r}),...f})});p6.classes=zY;p6.displayName="@mantine/core/CardSection";const RYe={},NYe=(e,{padding:t})=>({root:{"--card-padding":fs(t)}}),Kb=qs((e,t)=>{const n=xe("Card",RYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,padding:c,...f}=n,d=dt({name:"Card",props:n,classes:zY,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:NYe}),h=I.Children.toArray(l),p=h.map((m,g)=>typeof m=="object"&&m&&"type"in m&&m.type===p6?I.cloneElement(m,{"data-first-section":g===0||void 0,"data-last-section":g===h.length-1||void 0}):m);return _.jsx(CYe,{value:{getStyles:d},children:_.jsx(dS,{ref:t,unstyled:a,...d("root"),...f,children:p})})});Kb.classes=zY;Kb.displayName="@mantine/core/Card";Kb.Section=p6;var Zwe={root:"m_4451eb3a"};const PYe={},Cm=qs((e,t)=>{const n=xe("Center",PYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,inline:l,mod:c,...f}=n,d=dt({name:"Center",props:n,classes:Zwe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u});return _.jsx(me,{ref:t,mod:[{inline:l},c],...d("root"),...f})});Cm.classes=Zwe;Cm.displayName="@mantine/core/Center";var eEe={root:"m_b183c0a2"};const OYe={},DYe=(e,{color:t})=>({root:{"--code-bg":t?Lr(t,e):void 0}}),LC=Me((e,t)=>{const n=xe("Code",OYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,block:c,variant:f,mod:d,...h}=n,p=dt({name:"Code",props:n,classes:eEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:DYe});return _.jsx(me,{component:c?"pre":"code",variant:f,ref:t,mod:[{block:c},d],...p("root"),...h,dir:"ltr"})});LC.classes=eEe;LC.displayName="@mantine/core/Code";var tEe={root:"m_7485cace"};const $Ye={},MYe=(e,{size:t,fluid:n})=>({root:{"--container-size":n?void 0:tn(t,"container-size")}}),Fc=Me((e,t)=>{const n=xe("Container",$Ye,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,fluid:l,mod:c,...f}=n,d=dt({name:"Container",classes:tEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:MYe});return _.jsx(me,{ref:t,mod:[{fluid:l},c],...d("root"),...f})});Fc.classes=tEe;Fc.displayName="@mantine/core/Container";var nEe={root:"m_3eebeb36",label:"m_9e365f20"};const LYe={orientation:"horizontal"},FYe=(e,{color:t,variant:n,size:r})=>({root:{"--divider-color":t?Lr(t,e):void 0,"--divider-border-style":n,"--divider-size":tn(r,"divider-size")}}),ex=Me((e,t)=>{const n=xe("Divider",LYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,orientation:c,label:f,labelPosition:d,mod:h,...p}=n,m=dt({name:"Divider",classes:nEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FYe});return _.jsx(me,{ref:t,mod:[{orientation:c,"with-label":!!f},h],...m("root"),...p,role:"separator",children:f&&_.jsx(me,{component:"span",mod:{position:d},...m("label"),children:f})})});ex.classes=nEe;ex.displayName="@mantine/core/Divider";const[jYe,bS]=yo("Drawer component was not found in tree");var rg={root:"m_f11b401e",header:"m_5a7c2c9",content:"m_b8a05bbd",inner:"m_31cd769a"};const BYe={},m6=Me((e,t)=>{const n=xe("DrawerBody",BYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=bS();return _.jsx(oY,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});m6.classes=rg;m6.displayName="@mantine/core/DrawerBody";const UYe={},g6=Me((e,t)=>{const n=xe("DrawerCloseButton",UYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=bS();return _.jsx(aY,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});g6.classes=rg;g6.displayName="@mantine/core/DrawerCloseButton";const zYe={},y6=Me((e,t)=>{const n=xe("DrawerContent",zYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,radius:l,...c}=n,f=bS(),d=f.scrollAreaComponent||xwe;return _.jsx(Ewe,{...f.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:f.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),ref:t,...c,radius:l||f.radius||0,children:_.jsx(d,{style:{height:"100vh"},children:u})})});y6.classes=rg;y6.displayName="@mantine/core/DrawerContent";const VYe={},v6=Me((e,t)=>{const n=xe("DrawerHeader",VYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=bS();return _.jsx(uY,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});v6.classes=rg;v6.displayName="@mantine/core/DrawerHeader";const HYe={},b6=Me((e,t)=>{const n=xe("DrawerOverlay",HYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=bS();return _.jsx(lY,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});b6.classes=rg;b6.displayName="@mantine/core/DrawerOverlay";function qYe(e){switch(e){case"top":return"flex-start";case"bottom":return"flex-end";default:return}}function WYe(e){if(e==="top"||e==="bottom")return"0 0 calc(100% - var(--drawer-offset, 0rem) * 2)"}const GYe={top:"slide-down",bottom:"slide-up",left:"slide-right",right:"slide-left"},YYe={top:"slide-down",bottom:"slide-up",right:"slide-right",left:"slide-left"},KYe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:rc("modal"),position:"left"},XYe=(e,{position:t,size:n,offset:r})=>({root:{"--drawer-size":tn(n,"drawer-size"),"--drawer-flex":WYe(t),"--drawer-height":t==="left"||t==="right"?void 0:"var(--drawer-size)","--drawer-align":qYe(t),"--drawer-justify":t==="right"?"flex-end":void 0,"--drawer-offset":Te(r)}}),_6=Me((e,t)=>{const n=xe("DrawerRoot",KYe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,scrollAreaComponent:l,position:c,transitionProps:f,radius:d,...h}=n,{dir:p}=Yh(),m=dt({name:"Drawer",classes:rg,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:XYe}),g=(p==="rtl"?YYe:GYe)[c];return _.jsx(jYe,{value:{scrollAreaComponent:l,getStyles:m,radius:d},children:_.jsx(wwe,{ref:t,...m("root"),transitionProps:{transition:g,...f},unstyled:a,...h})})});_6.classes=rg;_6.displayName="@mantine/core/DrawerRoot";const QYe={},w6=Me((e,t)=>{const n=xe("DrawerTitle",QYe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=bS();return _.jsx(cY,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});w6.classes=rg;w6.displayName="@mantine/core/DrawerTitle";const JYe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:rc("modal"),withOverlay:!0,withCloseButton:!0},Kh=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,...u}=xe("Drawer",JYe,e),l=!!n||s;return _.jsxs(_6,{ref:t,...u,children:[r&&_.jsx(b6,{...i}),_.jsxs(y6,{children:[l&&_.jsxs(v6,{children:[n&&_.jsx(w6,{children:n}),s&&_.jsx(g6,{...o})]}),_.jsx(m6,{children:a})]})]})});Kh.classes=rg;Kh.displayName="@mantine/core/Drawer";Kh.Root=_6;Kh.Overlay=b6;Kh.Content=y6;Kh.Body=m6;Kh.Header=v6;Kh.Title=w6;Kh.CloseButton=g6;function ZYe({open:e,close:t,openDelay:n,closeDelay:r}){const i=I.useRef(-1),s=I.useRef(-1),o=()=>{window.clearTimeout(i.current),window.clearTimeout(s.current)},a=()=>{o(),n===0||n===void 0?e():i.current=window.setTimeout(e,n)},u=()=>{o(),r===0||r===void 0?t():s.current=window.setTimeout(t,r)};return I.useEffect(()=>o,[]),{openDropdown:a,closeDropdown:u}}const[eKe,rEe]=yo("Grid component was not found in tree"),q7=(e,t)=>e==="content"?"auto":e==="auto"?"0rem":e?`${100/(t/e)}%`:void 0,zae=(e,t,n)=>n||e==="auto"?"100%":e==="content"?"unset":q7(e,t),Vae=(e,t)=>{if(e)return e==="auto"||t?"1":"auto"},Hae=(e,t)=>e===0?"0":e?`${100/(t/e)}%`:void 0;function tKe({span:e,order:t,offset:n,selector:r}){var d;const i=ys(),s=rEe(),a=Df(e)===void 0?12:Df(e),u=Uy({"--col-order":(d=Df(t))==null?void 0:d.toString(),"--col-flex-grow":Vae(a,s.grow),"--col-flex-basis":q7(a,s.columns),"--col-width":a==="content"?"auto":void 0,"--col-max-width":zae(a,s.columns,s.grow),"--col-offset":Hae(Df(n),s.columns)}),l=Zr(i.breakpoints).reduce((h,p)=>{var m;return h[p]||(h[p]={}),typeof t=="object"&&t[p]!==void 0&&(h[p]["--col-order"]=(m=t[p])==null?void 0:m.toString()),typeof e=="object"&&e[p]!==void 0&&(h[p]["--col-flex-grow"]=Vae(e[p],s.grow),h[p]["--col-flex-basis"]=q7(e[p],s.columns),h[p]["--col-width"]=e[p]==="content"?"auto":void 0,h[p]["--col-max-width"]=zae(e[p],s.columns,s.grow)),typeof n=="object"&&n[p]!==void 0&&(h[p]["--col-offset"]=Hae(n[p],s.columns)),h},{}),f=W2(Zr(l),i).filter(h=>Zr(l[h.value]).length>0).map(h=>({query:`(min-width: ${i.breakpoints[h.value]})`,styles:l[h.value]}));return _.jsx(Hb,{styles:u,media:f,selector:r})}var VY={root:"m_410352e9",inner:"m_dee7bd2f",col:"m_96bdd299"};const nKe={span:12},HY=Me((e,t)=>{const n=xe("GridCol",nKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,span:u,order:l,offset:c,...f}=n,d=rEe(),h=Sk();return _.jsxs(_.Fragment,{children:[_.jsx(tKe,{selector:`.${h}`,span:u,order:l,offset:c}),_.jsx(me,{ref:t,...d.getStyles("col",{className:es(i,h),style:s,classNames:r,styles:o}),...f})]})});HY.classes=VY;HY.displayName="@mantine/core/GridCol";function rKe({gutter:e,selector:t}){const n=ys(),r=Uy({"--grid-gutter":fs(Df(e))}),i=Zr(n.breakpoints).reduce((a,u)=>(a[u]||(a[u]={}),typeof e=="object"&&e[u]!==void 0&&(a[u]["--grid-gutter"]=fs(e[u])),a),{}),o=W2(Zr(i),n).filter(a=>Zr(i[a.value]).length>0).map(a=>({query:`(min-width: ${n.breakpoints[a.value]})`,styles:i[a.value]}));return _.jsx(Hb,{styles:r,media:o,selector:t})}const iKe={gutter:"md",grow:!1,columns:12},sKe=(e,{justify:t,align:n,overflow:r})=>({root:{"--grid-justify":t,"--grid-align":n,"--grid-overflow":r}}),Ga=Me((e,t)=>{const n=xe("Grid",iKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,grow:l,gutter:c,columns:f,align:d,justify:h,children:p,...m}=n,g=dt({name:"Grid",classes:VY,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:sKe}),y=Sk();return _.jsxs(eKe,{value:{getStyles:g,grow:l,columns:f},children:[_.jsx(rKe,{selector:`.${y}`,...n}),_.jsx(me,{ref:t,...g("root",{className:y}),...m,children:_.jsx("div",{...g("inner"),children:p})})]})});Ga.classes=VY;Ga.displayName="@mantine/core/Grid";Ga.Col=HY;var iEe={root:"m_9e117634"};const oKe={},aKe=(e,{radius:t,fit:n})=>({root:{"--image-radius":t===void 0?void 0:Vr(t),"--image-object-fit":n}}),Wy=qs((e,t)=>{const n=xe("Image",oKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,onError:l,src:c,radius:f,fit:d,fallbackSrc:h,mod:p,...m}=n,[g,y]=I.useState(!c);I.useEffect(()=>y(!c),[c]);const v=dt({name:"Image",classes:iEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:aKe});return g&&h?_.jsx(me,{component:"img",ref:t,src:h,...v("root"),onError:l,mod:["fallback",p],...m}):_.jsx(me,{component:"img",ref:t,...v("root"),src:c,onError:b=>{l==null||l(b),y(!0)},mod:p,...m})});Wy.classes=iEe;Wy.displayName="@mantine/core/Image";function W7(){return W7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},W7.apply(null,arguments)}function uKe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var lKe=I.useLayoutEffect,cKe=function(t){var n=I.useRef(t);return lKe(function(){n.current=t}),n},qae=function(t,n){if(typeof t=="function"){t(n);return}t.current=n},fKe=function(t,n){var r=I.useRef();return I.useCallback(function(i){t.current=i,r.current&&qae(r.current,null),r.current=n,n&&qae(n,i)},[n])},Wae={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0"},dKe=function(t){Object.keys(Wae).forEach(function(n){t.style.setProperty(n,Wae[n],"important")})},Gae=dKe,Da=null,Yae=function(t,n){var r=t.scrollHeight;return n.sizingStyle.boxSizing==="border-box"?r+n.borderSize:r-n.paddingSize};function hKe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),Da||(Da=document.createElement("textarea"),Da.setAttribute("tabindex","-1"),Da.setAttribute("aria-hidden","true"),Gae(Da)),Da.parentNode===null&&document.body.appendChild(Da);var i=e.paddingSize,s=e.borderSize,o=e.sizingStyle,a=o.boxSizing;Object.keys(o).forEach(function(d){var h=d;Da.style[h]=o[h]}),Gae(Da),Da.value=t;var u=Yae(Da,e);Da.value=t,u=Yae(Da,e),Da.value="x";var l=Da.scrollHeight-i,c=l*n;a==="border-box"&&(c=c+i+s),u=Math.max(c,u);var f=l*r;return a==="border-box"&&(f=f+i+s),u=Math.min(f,u),[u,l]}var Kae=function(){},pKe=function(t,n){return t.reduce(function(r,i){return r[i]=n[i],r},{})},mKe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],gKe=!!document.documentElement.currentStyle,yKe=function(t){var n=window.getComputedStyle(t);if(n===null)return null;var r=pKe(mKe,n),i=r.boxSizing;if(i==="")return null;gKe&&i==="border-box"&&(r.width=parseFloat(r.width)+parseFloat(r.borderRightWidth)+parseFloat(r.borderLeftWidth)+parseFloat(r.paddingRight)+parseFloat(r.paddingLeft)+"px");var s=parseFloat(r.paddingBottom)+parseFloat(r.paddingTop),o=parseFloat(r.borderBottomWidth)+parseFloat(r.borderTopWidth);return{sizingStyle:r,paddingSize:s,borderSize:o}},vKe=yKe;function sEe(e,t,n){var r=cKe(n);I.useLayoutEffect(function(){var i=function(o){return r.current(o)};if(e)return e.addEventListener(t,i),function(){return e.removeEventListener(t,i)}},[])}var bKe=function(t){sEe(window,"resize",t)},_Ke=function(t){sEe(document.fonts,"loadingdone",t)},wKe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],EKe=function(t,n){var r=t.cacheMeasurements,i=t.maxRows,s=t.minRows,o=t.onChange,a=o===void 0?Kae:o,u=t.onHeightChange,l=u===void 0?Kae:u,c=uKe(t,wKe),f=c.value!==void 0,d=I.useRef(null),h=fKe(d,n),p=I.useRef(0),m=I.useRef(),g=function(){var b=d.current,w=r&&m.current?m.current:vKe(b);if(w){m.current=w;var E=hKe(w,b.value||b.placeholder||"x",s,i),T=E[0],S=E[1];p.current!==T&&(p.current=T,b.style.setProperty("height",T+"px","important"),l(T,{rowHeight:S}))}},y=function(b){f||g(),a(b)};return I.useLayoutEffect(g),bKe(g),_Ke(g),I.createElement("textarea",W7({},c,{onChange:y,ref:h}))},xKe=I.forwardRef(EKe);const SKe={},qY=Me((e,t)=>{const{autosize:n,maxRows:r,minRows:i,__staticSelector:s,resize:o,...a}=xe("Textarea",SKe,e),u=n&&E_e()!=="test",l=u?{maxRows:r,minRows:i}:{};return _.jsx(Qc,{component:u?xKe:"textarea",ref:t,...a,__staticSelector:s||"Textarea",multiline:!0,"data-no-overflow":n&&r===void 0||void 0,__vars:{"--input-resize":o},...l})});qY.classes=Qc.classes;qY.displayName="@mantine/core/Textarea";const[TKe,AKe]=yo("List component was not found in tree");var WY={root:"m_abbac491",item:"m_abb6bec2",itemWrapper:"m_75cd9f71",itemIcon:"m_60f83e5b"};const CKe={},GY=Me((e,t)=>{const n=xe("ListItem",CKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,icon:u,children:l,mod:c,...f}=n,d=AKe(),h=u||d.icon,p={classNames:r,styles:o};return _.jsx(me,{...d.getStyles("item",{...p,className:i,style:s}),component:"li",mod:[{"with-icon":!!h,centered:d.center},c],ref:t,...f,children:_.jsxs("div",{...d.getStyles("itemWrapper",p),children:[h&&_.jsx("span",{...d.getStyles("itemIcon",p),children:h}),_.jsx("span",{...d.getStyles("itemLabel",p),children:l})]})})});GY.classes=WY;GY.displayName="@mantine/core/ListItem";const IKe={type:"unordered"},kKe=(e,{size:t,spacing:n})=>({root:{"--list-fz":po(t),"--list-lh":p_e(t),"--list-spacing":fs(n)}}),Hf=Me((e,t)=>{const n=xe("List",IKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,type:c,withPadding:f,icon:d,spacing:h,center:p,listStyleType:m,mod:g,...y}=n,v=dt({name:"List",classes:WY,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:kKe});return _.jsx(TKe,{value:{center:p,icon:d,getStyles:v},children:_.jsx(me,{...v("root",{style:{listStyleType:m}}),component:c==="unordered"?"ul":"ol",mod:[{"with-padding":f},g],ref:t,...y,children:l})})});Hf.classes=WY;Hf.displayName="@mantine/core/List";Hf.Item=GY;var oEe={root:"m_6e45937b",loader:"m_e8eb006c",overlay:"m_df587f17"};const Xae={transitionProps:{transition:"fade",duration:0},overlayProps:{backgroundOpacity:.75},zIndex:rc("overlay")},RKe=(e,{zIndex:t})=>({root:{"--lo-z-index":t==null?void 0:t.toString()}}),zl=Me((e,t)=>{const n=xe("LoadingOverlay",Xae,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,transitionProps:l,loaderProps:c,overlayProps:f,visible:d,zIndex:h,...p}=n,m=ys(),g=dt({name:"LoadingOverlay",classes:oEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:RKe}),y={...Xae.overlayProps,...f};return _.jsx(eg,{transition:"fade",...l,mounted:!!d,children:v=>_.jsxs(me,{...g("root",{style:v}),ref:t,...p,children:[_.jsx(Kc,{...g("loader"),unstyled:a,...c}),_.jsx(K2,{...y,...g("overlay"),darkHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.white}),_.jsx(K2,{...y,...g("overlay"),lightHidden:!0,unstyled:a,color:(f==null?void 0:f.color)||m.colors.dark[5]})]})})});zl.classes=oEe;zl.displayName="@mantine/core/LoadingOverlay";const[NKe,Rk]=yo("Menu component was not found in the tree");var _S={dropdown:"m_dc9b7c9f",label:"m_9bfac126",divider:"m_efdf90cb",item:"m_99ac2aa1",itemLabel:"m_5476e0d3",itemSection:"m_8b75e504"};const PKe={},YY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuDivider",PKe,e),u=Rk();return _.jsx(me,{ref:t,...u.getStyles("divider",{className:r,style:i,styles:s,classNames:n}),...a})});YY.classes=_S;YY.displayName="@mantine/core/MenuDivider";const OKe={},KY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,onMouseEnter:a,onMouseLeave:u,children:l,...c}=xe("MenuDropdown",OKe,e),f=I.useRef(null),d=Rk(),h=g=>{var y,v;(g.key==="ArrowUp"||g.key==="ArrowDown")&&(g.preventDefault(),(v=(y=f.current)==null?void 0:y.querySelectorAll("[data-menu-item]:not(:disabled)")[0])==null||v.focus())},p=Kp(a,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.openDropdown()),m=Kp(u,()=>(d.trigger==="hover"||d.trigger==="click-hover")&&d.closeDropdown());return _.jsxs(Mo.Dropdown,{...c,onMouseEnter:p,onMouseLeave:m,role:"menu","aria-orientation":"vertical",ref:gs(t,f),...d.getStyles("dropdown",{className:r,style:i,styles:s,classNames:n,withStaticClass:!1}),tabIndex:-1,"data-menu-dropdown":!0,onKeyDown:h,children:[_.jsx("div",{tabIndex:-1,"data-autofocus":!0,"aria-hidden":!0,style:{outline:0}}),l]})});KY.classes=_S;KY.displayName="@mantine/core/MenuDropdown";const DKe={},XY=qs((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,color:a,closeMenuOnClick:u,leftSection:l,rightSection:c,children:f,disabled:d,...h}=xe("MenuItem",DKe,e),p=Rk(),m=ys(),{dir:g}=Yh(),y=I.useRef(),v=p.getItemIndex(y.current),b=h,w=Kp(b.onMouseLeave,()=>p.setHovered(-1)),E=Kp(b.onMouseEnter,()=>p.setHovered(p.getItemIndex(y.current))),T=Kp(b.onClick,()=>{typeof u=="boolean"?u&&p.closeDropdownImmediately():p.closeOnItemClick&&p.closeDropdownImmediately()}),S=Kp(b.onFocus,()=>p.setHovered(p.getItemIndex(y.current))),A=a?m.variantColorResolver({color:a,theme:m,variant:"light"}):void 0,C=a?Gh({color:a,theme:m}):null;return _.jsxs(Ts,{...h,unstyled:p.unstyled,tabIndex:p.menuItemTabIndex,onFocus:S,...p.getStyles("item",{className:r,style:i,styles:s,classNames:n}),ref:gs(y,t),role:"menuitem",disabled:d,"data-menu-item":!0,"data-disabled":d||void 0,"data-hovered":p.hovered===v?!0:void 0,onMouseEnter:E,onMouseLeave:w,onClick:T,onKeyDown:kG({siblingSelector:"[data-menu-item]",parentSelector:"[data-menu-dropdown]",activateOnFocus:!1,loop:p.loop,dir:g,orientation:"vertical",onKeyDown:b.onKeydown}),__vars:{"--menu-item-color":C!=null&&C.isThemeColor&&(C==null?void 0:C.shade)===void 0?`var(--mantine-color-${C.color}-6)`:A==null?void 0:A.color,"--menu-item-hover":A==null?void 0:A.hover},children:[l&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"left",children:l}),f&&_.jsx("div",{...p.getStyles("itemLabel",{styles:s,classNames:n}),children:f}),c&&_.jsx("div",{...p.getStyles("itemSection",{styles:s,classNames:n}),"data-position":"right",children:c})]})});XY.classes=_S;XY.displayName="@mantine/core/MenuItem";const $Ke={},QY=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("MenuLabel",$Ke,e),u=Rk();return _.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,styles:s,classNames:n}),...a})});QY.classes=_S;QY.displayName="@mantine/core/MenuLabel";const MKe={refProp:"ref"},aEe=I.forwardRef((e,t)=>{const{children:n,refProp:r,...i}=xe("MenuTarget",MKe,e);if(!zy(n))throw new Error("Menu.Target component children should be an element or a component that accepts ref. Fragments, strings, numbers and other primitive values are not supported");const s=Rk(),o=Kp(n.props.onClick,()=>{s.trigger==="click"?s.toggleDropdown():s.trigger==="click-hover"&&(s.setOpenedViaClick(!0),s.opened||s.openDropdown())}),a=Kp(n.props.onMouseEnter,()=>(s.trigger==="hover"||s.trigger==="click-hover")&&s.openDropdown()),u=Kp(n.props.onMouseLeave,()=>{(s.trigger==="hover"||s.trigger==="click-hover"&&!s.openedViaClick)&&s.closeDropdown()});return _.jsx(Mo.Target,{refProp:r,popupType:"menu",ref:t,...i,children:I.cloneElement(n,{onClick:o,onMouseEnter:a,onMouseLeave:u,"data-expanded":s.opened?!0:void 0})})});aEe.displayName="@mantine/core/MenuTarget";const LKe={trapFocus:!0,closeOnItemClick:!0,clickOutsideEvents:["mousedown","touchstart","keydown"],loop:!0,trigger:"click",openDelay:0,closeDelay:100,menuItemTabIndex:-1};function Ru(e){const t=xe("Menu",LKe,e),{children:n,onOpen:r,onClose:i,opened:s,defaultOpened:o,trapFocus:a,onChange:u,closeOnItemClick:l,loop:c,closeOnEscape:f,trigger:d,openDelay:h,closeDelay:p,classNames:m,styles:g,unstyled:y,variant:v,vars:b,menuItemTabIndex:w,keepMounted:E,...T}=t,S=dt({name:"Menu",classes:_S,props:t,classNames:m,styles:g,unstyled:y}),[A,{setHovered:C,resetHovered:k}]=Uze(),[N,D]=As({value:s,defaultValue:o,finalValue:!1,onChange:u}),[O,$]=I.useState(!1),F=()=>{D(!1),$(!1),N&&(i==null||i())},M=()=>{D(!0),!N&&(r==null||r())},B=()=>{N?F():M()},{openDropdown:U,closeDropdown:H}=ZYe({open:M,close:F,closeDelay:p,openDelay:h}),P=j=>Bze("[data-menu-item]","[data-menu-dropdown]",j),{resolvedClassNames:z,resolvedStyles:W}=Jm({classNames:m,styles:g,props:t});return kh(()=>{k()},[N]),_.jsx(NKe,{value:{getStyles:S,opened:N,toggleDropdown:B,getItemIndex:P,hovered:A,setHovered:C,openedViaClick:O,setOpenedViaClick:$,closeOnItemClick:l,closeDropdown:d==="click"?F:H,openDropdown:d==="click"?M:U,closeDropdownImmediately:F,loop:c,trigger:d,unstyled:y,menuItemTabIndex:w},children:_.jsx(Mo,{...T,opened:N,onChange:B,defaultOpened:o,trapFocus:E?!1:a,closeOnEscape:f,__staticSelector:"Menu",classNames:z,styles:W,unstyled:y,variant:v,keepMounted:E,children:n})})}Ru.extend=e=>e;Ru.classes=_S;Ru.displayName="@mantine/core/Menu";Ru.Item=XY;Ru.Label=QY;Ru.Dropdown=KY;Ru.Target=aEe;Ru.Divider=YY;const[FKe,wS]=yo("Modal component was not found in tree");var ig={root:"m_9df02822",content:"m_54c44539",inner:"m_1f958f16",header:"m_d0e2b9cd"};const jKe={},E6=Me((e,t)=>{const n=xe("ModalBody",jKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=wS();return _.jsx(oY,{ref:t,...l.getStyles("body",{classNames:r,style:s,styles:o,className:i}),...u})});E6.classes=ig;E6.displayName="@mantine/core/ModalBody";const BKe={},x6=Me((e,t)=>{const n=xe("ModalCloseButton",BKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=wS();return _.jsx(aY,{ref:t,...l.getStyles("close",{classNames:r,style:s,styles:o,className:i}),...u})});x6.classes=ig;x6.displayName="@mantine/core/ModalCloseButton";const UKe={},S6=Me((e,t)=>{const n=xe("ModalContent",UKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,children:u,...l}=n,c=wS(),f=c.scrollAreaComponent||xwe;return _.jsx(Ewe,{...c.getStyles("content",{className:i,style:s,styles:o,classNames:r}),innerProps:c.getStyles("inner",{className:i,style:s,styles:o,classNames:r}),"data-full-screen":c.fullScreen||void 0,"data-modal-content":!0,ref:t,...l,children:_.jsx(f,{style:{maxHeight:c.fullScreen?"100dvh":`calc(100dvh - (${Te(c.yOffset)} * 2))`},children:u})})});S6.classes=ig;S6.displayName="@mantine/core/ModalContent";const zKe={},T6=Me((e,t)=>{const n=xe("ModalHeader",zKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=wS();return _.jsx(uY,{ref:t,...l.getStyles("header",{classNames:r,style:s,styles:o,className:i}),...u})});T6.classes=ig;T6.displayName="@mantine/core/ModalHeader";const VKe={},A6=Me((e,t)=>{const n=xe("ModalOverlay",VKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=wS();return _.jsx(lY,{ref:t,...l.getStyles("overlay",{classNames:r,style:s,styles:o,className:i}),...u})});A6.classes=ig;A6.displayName="@mantine/core/ModalOverlay";const HKe={__staticSelector:"Modal",closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:rc("modal"),transitionProps:{duration:200,transition:"pop"},yOffset:"5dvh"},qKe=(e,{radius:t,size:n,yOffset:r,xOffset:i})=>({root:{"--modal-radius":t===void 0?void 0:Vr(t),"--modal-size":tn(n,"modal-size"),"--modal-y-offset":Te(r),"--modal-x-offset":Te(i)}}),C6=Me((e,t)=>{const n=xe("ModalRoot",HKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,yOffset:l,scrollAreaComponent:c,radius:f,fullScreen:d,centered:h,xOffset:p,__staticSelector:m,...g}=n,y=dt({name:m,classes:ig,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:qKe});return _.jsx(FKe,{value:{yOffset:l,scrollAreaComponent:c,getStyles:y,fullScreen:d},children:_.jsx(wwe,{ref:t,...y("root"),"data-full-screen":d||void 0,"data-centered":h||void 0,unstyled:a,...g})})});C6.classes=ig;C6.displayName="@mantine/core/ModalRoot";const WKe={},I6=Me((e,t)=>{const n=xe("ModalTitle",WKe,e),{classNames:r,className:i,style:s,styles:o,vars:a,...u}=n,l=wS();return _.jsx(cY,{ref:t,...l.getStyles("title",{classNames:r,style:s,styles:o,className:i}),...u})});I6.classes=ig;I6.displayName="@mantine/core/ModalTitle";const GKe={closeOnClickOutside:!0,withinPortal:!0,lockScroll:!0,trapFocus:!0,returnFocus:!0,closeOnEscape:!0,keepMounted:!1,zIndex:rc("modal"),transitionProps:{duration:200,transition:"fade-down"},withOverlay:!0,withCloseButton:!0},Ji=Me((e,t)=>{const{title:n,withOverlay:r,overlayProps:i,withCloseButton:s,closeButtonProps:o,children:a,radius:u,...l}=xe("Modal",GKe,e),c=!!n||s;return _.jsxs(C6,{ref:t,radius:u,...l,children:[r&&_.jsx(A6,{...i}),_.jsxs(S6,{radius:u,children:[c&&_.jsxs(T6,{children:[n&&_.jsx(I6,{children:n}),s&&_.jsx(x6,{...o})]}),_.jsx(E6,{children:a})]})]})});Ji.classes=ig;Ji.displayName="@mantine/core/Modal";Ji.Root=C6;Ji.Overlay=A6;Ji.Content=S6;Ji.Body=E6;Ji.Header=T6;Ji.Title=I6;Ji.CloseButton=x6;const[YKe,JY]=cS(),[KKe,XKe]=cS();var k6={root:"m_7cda1cd6","root--default":"m_44da308b","root--contrast":"m_e3a01f8",label:"m_1e0e6180",remove:"m_ae386778",group:"m_1dcfd90b"};const QKe={},JKe=(e,{gap:t},{size:n})=>({group:{"--pg-gap":t!==void 0?tn(t):tn(n,"pg-gap")}}),ZY=Me((e,t)=>{const n=xe("PillGroup",QKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,disabled:c,...f}=n,d=JY(),h=(d==null?void 0:d.size)||l||void 0,p=dt({name:"PillGroup",classes:k6,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:JKe,stylesCtx:{size:h},rootSelector:"group"});return _.jsx(KKe,{value:{size:h,disabled:c},children:_.jsx(me,{ref:t,size:h,...p("group"),...f})})});ZY.classes=k6;ZY.displayName="@mantine/core/PillGroup";const ZKe={variant:"default"},eXe=(e,{radius:t},{size:n})=>({root:{"--pill-fz":tn(n,"pill-fz"),"--pill-height":tn(n,"pill-height"),"--pill-radius":t===void 0?void 0:Vr(t)}}),X2=Me((e,t)=>{const n=xe("Pill",ZKe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,variant:l,children:c,withRemoveButton:f,onRemove:d,removeButtonProps:h,radius:p,size:m,disabled:g,mod:y,...v}=n,b=XKe(),w=JY(),E=m||(b==null?void 0:b.size)||void 0,T=(w==null?void 0:w.variant)==="filled"?"contrast":l||"default",S=dt({name:"Pill",classes:k6,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:eXe,stylesCtx:{size:E}});return _.jsxs(me,{component:"span",ref:t,variant:T,size:E,...S("root",{variant:T}),mod:[{"with-remove":f&&!g,disabled:g||(b==null?void 0:b.disabled)},y],...v,children:[_.jsx("span",{...S("label"),children:c}),f&&_.jsx(tg,{variant:"transparent",radius:p,tabIndex:-1,"aria-hidden":!0,unstyled:a,...h,...S("remove",{className:h==null?void 0:h.className,style:h==null?void 0:h.style}),onMouseDown:A=>{var C;A.preventDefault(),A.stopPropagation(),(C=h==null?void 0:h.onMouseDown)==null||C.call(h,A)},onClick:A=>{var C;A.stopPropagation(),d==null||d(),(C=h==null?void 0:h.onClick)==null||C.call(h,A)}})]})});X2.classes=k6;X2.displayName="@mantine/core/Pill";X2.Group=ZY;var uEe={field:"m_45c4369d"};const tXe={type:"visible"},eK=Me((e,t)=>{const n=xe("PillsInputField",tXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,type:l,disabled:c,id:f,pointer:d,mod:h,...p}=n,m=JY(),g=gS(),y=dt({name:"PillsInputField",classes:uEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,rootSelector:"field"}),v=c||(m==null?void 0:m.disabled);return _.jsx(me,{component:"input",ref:gs(t,m==null?void 0:m.fieldRef),"data-type":l,disabled:v,mod:[{disabled:v,pointer:d},h],...y("field"),...p,id:(g==null?void 0:g.inputId)||f,"aria-invalid":m==null?void 0:m.hasError,"aria-describedby":g==null?void 0:g.describedBy,type:"text",onMouseDown:b=>!d&&b.stopPropagation()})});eK.classes=uEe;eK.displayName="@mantine/core/PillsInputField";const nXe={},w$=Me((e,t)=>{const n=xe("PillsInput",nXe,e),{children:r,onMouseDown:i,onClick:s,size:o,disabled:a,__staticSelector:u,error:l,variant:c,...f}=n,d=I.useRef();return _.jsx(YKe,{value:{fieldRef:d,size:o,disabled:a,hasError:!!l,variant:c},children:_.jsx(Qc,{size:o,error:l,variant:c,component:"div",ref:t,onMouseDown:h=>{var p;h.preventDefault(),i==null||i(h),(p=d.current)==null||p.focus()},onClick:h=>{var p;h.preventDefault(),s==null||s(h),(p=d.current)==null||p.focus()},...f,multiline:!0,disabled:a,__staticSelector:u||"PillsInput",withAria:!1,children:r})})});w$.displayName="@mantine/core/PillsInput";w$.Field=eK;function rXe({data:e,value:t}){const n=t.map(i=>i.trim().toLowerCase());return e.reduce((i,s)=>(ZE(s)?i.push({group:s.group,items:s.items.filter(o=>n.indexOf(o.value.toLowerCase().trim())===-1)}):n.indexOf(s.value.toLowerCase().trim())===-1&&i.push(s),i),[])}const iXe={maxValues:1/0,withCheckIcon:!0,checkIconPosition:"left",hiddenInputValuesDivider:","},tK=Me((e,t)=>{const n=xe("MultiSelect",iXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,size:l,value:c,defaultValue:f,onChange:d,onKeyDown:h,variant:p,data:m,dropdownOpened:g,defaultDropdownOpened:y,onDropdownOpen:v,onDropdownClose:b,selectFirstOptionOnChange:w,onOptionSubmit:E,comboboxProps:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:k,searchValue:N,defaultSearchValue:D,onSearchChange:O,readOnly:$,disabled:F,onFocus:M,onBlur:B,onPaste:U,radius:H,rightSection:P,rightSectionWidth:z,rightSectionPointerEvents:W,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Xe,wrapperProps:ze,description:yt,label:it,error:_e,maxValues:ke,searchable:Ve,nothingFoundMessage:ct,withCheckIcon:Dt,checkIconPosition:Ge,hidePickedOptions:ge,withErrorStyles:ht,name:vt,form:pe,id:Ce,clearable:qe,clearButtonProps:ut,hiddenInputProps:_t,placeholder:Fn,hiddenInputValuesDivider:Ir,required:jn,mod:dr,renderOption:yn,onRemove:In,onClear:ir,scrollAreaProps:sr,...qo}=n,ji=Ia(Ce),kn=Pwe(m),Bi=SY(kn),kr=$Y({opened:g,defaultOpened:y,onDropdownOpen:v,onDropdownClose:()=>{b==null||b(),kr.resetSelectedOption()}}),{styleProps:bs,rest:{type:gp,autoComplete:pl,...Ed}}=qb(qo),[Sr,Pi]=As({value:c,defaultValue:f,finalValue:[],onChange:d}),[ei,hu]=As({value:N,defaultValue:D,finalValue:"",onChange:O}),Na=dt({name:"MultiSelect",classes:{},props:n,classNames:r,styles:o,unstyled:a}),{resolvedClassNames:Pa,resolvedStyles:oe}=Jm({props:n,styles:o,classNames:r}),ee=ot=>{h==null||h(ot),ot.key===" "&&!Ve&&(ot.preventDefault(),kr.toggleDropdown()),ot.key==="Backspace"&&ei.length===0&&Sr.length>0&&(In==null||In(Sr[Sr.length-1]),Pi(Sr.slice(0,Sr.length-1)))},ae=Sr.map((ot,Tt)=>{var Ht,$n;return _.jsx(X2,{withRemoveButton:!$&&!((Ht=Bi[ot])!=null&&Ht.disabled),onRemove:()=>{Pi(Sr.filter(Bn=>ot!==Bn)),In==null||In(ot)},unstyled:a,disabled:F,...Na("pill"),children:(($n=Bi[ot])==null?void 0:$n.label)||ot},`${ot}-${Tt}`)});I.useEffect(()=>{w&&kr.selectFirstOption()},[w,Sr]);const Ae=qe&&Sr.length>0&&!F&&!$&&_.jsx(Qn.ClearButton,{size:l,...ut,onClear:()=>{ir==null||ir(),Pi([]),hu("")}}),Se=rXe({data:kn,value:Sr});return _.jsxs(_.Fragment,{children:[_.jsxs(Qn,{store:kr,classNames:Pa,styles:oe,unstyled:a,size:l,readOnly:$,__staticSelector:"MultiSelect",onOptionSubmit:ot=>{E==null||E(ot),hu(""),kr.updateSelectedOptionIndex("selected"),Sr.includes(Bi[ot].value)?(Pi(Sr.filter(Tt=>Tt!==Bi[ot].value)),In==null||In(Bi[ot].value)):Sr.length<ke&&Pi([...Sr,Bi[ot].value])},...T,children:[_.jsx(Qn.DropdownTarget,{children:_.jsx(w$,{...bs,__staticSelector:"MultiSelect",classNames:Pa,styles:oe,unstyled:a,size:l,className:i,style:s,variant:p,disabled:F,radius:H,rightSection:P||Ae||_.jsx(Qn.Chevron,{size:l,error:_e,unstyled:a}),rightSectionPointerEvents:W||(Ae?"all":"none"),rightSectionWidth:z,rightSectionProps:j,leftSection:q,leftSectionWidth:G,leftSectionPointerEvents:ne,leftSectionProps:ce,inputContainer:de,inputWrapperOrder:he,withAsterisk:ve,labelProps:Ie,descriptionProps:be,errorProps:Xe,wrapperProps:ze,description:yt,label:it,error:_e,multiline:!0,withErrorStyles:ht,__stylesApiProps:{...n,rightSectionPointerEvents:W||(Ae?"all":"none"),multiline:!0},pointer:!Ve,onClick:()=>Ve?kr.openDropdown():kr.toggleDropdown(),"data-expanded":kr.dropdownOpened||void 0,id:ji,required:jn,mod:dr,children:_.jsxs(X2.Group,{disabled:F,unstyled:a,...Na("pillsList"),children:[ae,_.jsx(Qn.EventsTarget,{autoComplete:pl,children:_.jsx(w$.Field,{...Ed,ref:t,id:ji,placeholder:Fn,type:!Ve&&!Fn?"hidden":"visible",...Na("inputField"),unstyled:a,onFocus:ot=>{M==null||M(ot),Ve&&kr.openDropdown()},onBlur:ot=>{B==null||B(ot),kr.closeDropdown(),hu("")},onKeyDown:ee,value:ei,onChange:ot=>{hu(ot.currentTarget.value),Ve&&kr.openDropdown(),w&&kr.selectFirstOption()},disabled:F,readOnly:$||!Ve,pointer:!Ve})})]})})}),_.jsx(Xwe,{data:ge?Se:kn,hidden:$||F,filter:S,search:ei,limit:A,hiddenWhenEmpty:!Ve||!ct||ge&&Se.length===0&&ei.trim().length===0,withScrollArea:C,maxDropdownHeight:k,filterOptions:Ve,value:Sr,checkIconPosition:Ge,withCheckIcon:Dt,nothingFoundMessage:ct,unstyled:a,labelId:it?`${ji}-label`:void 0,"aria-label":it?void 0:qo["aria-label"],renderOption:yn,scrollAreaProps:sr})]}),_.jsx(Qn.HiddenInput,{name:vt,valuesDivider:Ir,value:Sr,form:pe,disabled:F,..._t})]})});tK.classes={...Qc.classes,...Qn.classes};tK.displayName="@mantine/core/MultiSelect";var lEe={root:"m_f0824112",description:"m_57492dcc",section:"m_690090b5",label:"m_1f6ac4c4",body:"m_f07af9d2",children:"m_e17b862f",chevron:"m_1fd8a00b"};const sXe={},oXe=(e,{variant:t,color:n,childrenOffset:r,autoContrast:i})=>{const s=e.variantColorResolver({color:n||e.primaryColor,theme:e,variant:t||"light",autoContrast:i});return{root:{"--nl-bg":n||t?s.background:void 0,"--nl-hover":n||t?s.hover:void 0,"--nl-color":n||t?s.color:void 0},children:{"--nl-offset":fs(r)}}},R6=qs((e,t)=>{const n=xe("NavLink",sXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,opened:l,defaultOpened:c,onChange:f,children:d,onClick:h,active:p,disabled:m,leftSection:g,rightSection:y,label:v,description:b,disableRightSectionRotation:w,noWrap:E,childrenOffset:T,onKeyDown:S,autoContrast:A,mod:C,...k}=n,N=dt({name:"NavLink",props:n,classes:lEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:oXe}),[D,O]=As({value:l,defaultValue:c,finalValue:!1,onChange:f}),$=!!d,F=M=>{h==null||h(M),$&&(M.preventDefault(),O(!D))};return _.jsxs(_.Fragment,{children:[_.jsxs(Ts,{...N("root"),component:"a",ref:t,onClick:F,onKeyDown:M=>{S==null||S(M),M.nativeEvent.code==="Space"&&$&&(M.preventDefault(),O(!D))},unstyled:a,mod:[{disabled:m,active:p,expanded:D},C],...k,children:[g&&_.jsx(me,{component:"span",...N("section"),mod:{position:"left"},children:g}),_.jsxs(me,{...N("body"),mod:{"no-wrap":E},children:[_.jsx(me,{component:"span",...N("label"),children:v}),_.jsx(me,{component:"span",mod:{active:p},...N("description"),children:b})]}),($||y)&&_.jsx(me,{...N("section"),component:"span",mod:{rotate:D&&!w,position:"right"},children:$?y||_.jsx(JE,{...N("chevron")}):y})]}),_.jsx(i6,{in:D,...N("collapse"),children:_.jsx("div",{...N("children"),children:d})})]})});R6.classes=lEe;R6.displayName="@mantine/core/NavLink";var cEe={root:"m_a513464",icon:"m_a4ceffb",loader:"m_b0920b15",body:"m_a49ed24",title:"m_3feedf16",description:"m_3d733a3a",closeButton:"m_919a4d88"};const aXe={withCloseButton:!0},uXe=(e,{radius:t,color:n})=>({root:{"--notification-radius":t===void 0?void 0:Vr(t),"--notification-color":n?Lr(n,e):void 0}}),nK=Me((e,t)=>{const n=xe("Notification",aXe,e),{className:r,color:i,radius:s,loading:o,withCloseButton:a,withBorder:u,title:l,icon:c,children:f,onClose:d,closeButtonProps:h,classNames:p,style:m,styles:g,unstyled:y,variant:v,vars:b,mod:w,...E}=n,T=dt({name:"Notification",classes:cEe,props:n,className:r,style:m,classNames:p,styles:g,unstyled:y,vars:b,varsResolver:uXe});return _.jsxs(me,{...T("root"),mod:[{"data-with-icon":!!c||o,"data-with-border":u},w],ref:t,variant:v,...E,role:"alert",children:[c&&!o&&_.jsx("div",{...T("icon"),children:c}),o&&_.jsx(Kc,{size:28,color:i,...T("loader")}),_.jsxs("div",{...T("body"),children:[l&&_.jsx("div",{...T("title"),children:l}),_.jsx(me,{...T("description"),mod:{"data-with-title":!!l},children:f})]}),a&&_.jsx(tg,{iconSize:16,color:"gray",...h,unstyled:y,onClick:d,...T("closeButton")})]})});nK.classes=cEe;nK.displayName="@mantine/core/Notification";function fEe(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]]);return n}var Q2;(function(e){e.event="event",e.props="prop"})(Q2||(Q2={}));function Jg(){}function lXe(e){var t,n=void 0;return function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t&&r.length===t.length&&r.every(function(s,o){return s===t[o]})||(t=r,n=e.apply(void 0,r)),n}}function J2(e){return!!(e||"").match(/\d/)}function cE(e){return e==null}function cXe(e){return typeof e=="number"&&isNaN(e)}function dEe(e){return cE(e)||cXe(e)||typeof e=="number"&&!isFinite(e)}function hEe(e){return e.replace(/[-[\]/{}()*+?.\\^$|]/g,"\\$&")}function fXe(e){switch(e){case"lakh":return/(\d+?)(?=(\d\d)+(\d)(?!\d))(\.\d+)?/g;case"wan":return/(\d)(?=(\d{4})+(?!\d))/g;case"thousand":default:return/(\d)(?=(\d{3})+(?!\d))/g}}function dXe(e,t,n){var r=fXe(n),i=e.search(/[1-9]/);return i=i===-1?e.length:i,e.substring(0,i)+e.substring(i,e.length).replace(r,"$1"+t)}function hXe(e){var t=I.useRef(e);t.current=e;var n=I.useRef(function(){for(var r=[],i=arguments.length;i--;)r[i]=arguments[i];return t.current.apply(t,r)});return n.current}function rK(e,t){t===void 0&&(t=!0);var n=e[0]==="-",r=n&&t;e=e.replace("-","");var i=e.split("."),s=i[0],o=i[1]||"";return{beforeDecimal:s,afterDecimal:o,hasNegation:n,addNegation:r}}function pXe(e){if(!e)return e;var t=e[0]==="-";t&&(e=e.substring(1,e.length));var n=e.split("."),r=n[0].replace(/^0+/,"")||"0",i=n[1]||"";return(t?"-":"")+r+(i?"."+i:"")}function pEe(e,t,n){for(var r="",i=n?"0":"",s=0;s<=t-1;s++)r+=e[s]||i;return r}function Qae(e,t){return Array(t+1).join(e)}function mEe(e){var t=e+"",n=t[0]==="-"?"-":"";n&&(t=t.substring(1));var r=t.split(/[eE]/g),i=r[0],s=r[1];if(s=Number(s),!s)return n+i;i=i.replace(".","");var o=1+s,a=i.length;return o<0?i="0."+Qae("0",Math.abs(o))+i:o>=a?i=i+Qae("0",o-a):i=(i.substring(0,o)||"0")+"."+i.substring(o),n+i}function Jae(e,t,n){if(["","-"].indexOf(e)!==-1)return e;var r=(e.indexOf(".")!==-1||n)&&t,i=rK(e),s=i.beforeDecimal,o=i.afterDecimal,a=i.hasNegation,u=parseFloat("0."+(o||"0")),l=o.length<=t?"0."+o:u.toFixed(t),c=l.split("."),f=s;s&&Number(c[0])&&(f=s.split("").reverse().reduce(function(m,g,y){return m.length>y?(Number(m[0])+Number(g)).toString()+m.substring(1,m.length):g+m},c[0]));var d=pEe(c[1]||"",t,n),h=a?"-":"",p=r?".":"";return""+h+f+p+d}function t1(e,t){if(e.value=e.value,e!==null){if(e.createTextRange){var n=e.createTextRange();return n.move("character",t),n.select(),!0}return e.selectionStart||e.selectionStart===0?(e.focus(),e.setSelectionRange(t,t),!0):(e.focus(),!1)}}var gEe=lXe(function(e,t){for(var n=0,r=0,i=e.length,s=t.length;e[n]===t[n]&&n<i;)n++;for(;e[i-1-r]===t[s-1-r]&&s-r>n&&i-r>n;)r++;return{from:{start:n,end:i-r},to:{start:n,end:s-r}}}),mXe=function(e,t){var n=Math.min(e.selectionStart,t);return{from:{start:n,end:e.selectionEnd},to:{start:n,end:t}}};function gXe(e,t,n){return Math.min(Math.max(e,t),n)}function R8(e){return Math.max(e.selectionStart,e.selectionEnd)}function yXe(){return typeof navigator<"u"&&!(navigator.platform&&/iPhone|iPod/.test(navigator.platform))}function vXe(e){return{from:{start:0,end:0},to:{start:0,end:e.length},lastValue:""}}function bXe(e){var t=e.currentValue,n=e.formattedValue,r=e.currentValueIndex,i=e.formattedValueIndex;return t[r]===n[i]}function _Xe(e,t,n,r,i,s,o){o===void 0&&(o=bXe);var a=i.findIndex(function(w){return w}),u=e.slice(0,a);!t&&!n.startsWith(u)&&(t=u,n=u+n,r=r+u.length);for(var l=n.length,c=e.length,f={},d=new Array(l),h=0;h<l;h++){d[h]=-1;for(var p=0,m=c;p<m;p++){var g=o({currentValue:n,lastValue:t,formattedValue:e,currentValueIndex:h,formattedValueIndex:p});if(g&&f[p]!==!0){d[h]=p,f[p]=!0;break}}}for(var y=r;y<l&&(d[y]===-1||!s(n[y]));)y++;var v=y===l||d[y]===-1?c:d[y];for(y=r-1;y>0&&d[y]===-1;)y--;var b=y===-1||d[y]===-1?0:d[y]+1;return b>v?v:r-b<v-r?b:v}function Zae(e,t,n,r){var i=e.length;if(t=gXe(t,0,i),r==="left"){for(;t>=0&&!n[t];)t--;t===-1&&(t=n.indexOf(!0))}else{for(;t<=i&&!n[t];)t++;t>i&&(t=n.lastIndexOf(!0))}return t===-1&&(t=i),t}function wXe(e){for(var t=Array.from({length:e.length+1}).map(function(){return!0}),n=0,r=t.length;n<r;n++)t[n]=!!(J2(e[n])||J2(e[n-1]));return t}function yEe(e,t,n,r,i,s){s===void 0&&(s=Jg);var o=hXe(function(p,m){var g,y;return dEe(p)?(y="",g=""):typeof p=="number"||m?(y=typeof p=="number"?mEe(p):p,g=r(y)):(y=i(p,void 0),g=r(y)),{formattedValue:g,numAsString:y}}),a=I.useState(function(){return o(cE(e)?t:e,n)}),u=a[0],l=a[1],c=function(p,m){p.formattedValue!==u.formattedValue&&l({formattedValue:p.formattedValue,numAsString:p.value}),s(p,m)},f=e,d=n;cE(e)&&(f=u.numAsString,d=!0);var h=o(f,d);return I.useMemo(function(){l(h)},[h.formattedValue]),[u,c]}function EXe(e){return e.replace(/[^0-9]/g,"")}function xXe(e){return e}function SXe(e){var t=e.type;t===void 0&&(t="text");var n=e.displayType;n===void 0&&(n="input");var r=e.customInput,i=e.renderText,s=e.getInputRef,o=e.format;o===void 0&&(o=xXe);var a=e.removeFormatting;a===void 0&&(a=EXe);var u=e.defaultValue,l=e.valueIsNumericString,c=e.onValueChange,f=e.isAllowed,d=e.onChange;d===void 0&&(d=Jg);var h=e.onKeyDown;h===void 0&&(h=Jg);var p=e.onMouseUp;p===void 0&&(p=Jg);var m=e.onFocus;m===void 0&&(m=Jg);var g=e.onBlur;g===void 0&&(g=Jg);var y=e.value,v=e.getCaretBoundary;v===void 0&&(v=wXe);var b=e.isValidInputCharacter;b===void 0&&(b=J2);var w=e.isCharacterSame,E=fEe(e,["type","displayType","customInput","renderText","getInputRef","format","removeFormatting","defaultValue","valueIsNumericString","onValueChange","isAllowed","onChange","onKeyDown","onMouseUp","onFocus","onBlur","value","getCaretBoundary","isValidInputCharacter","isCharacterSame"]),T=yEe(y,u,!!l,o,a,c),S=T[0],A=S.formattedValue,C=S.numAsString,k=T[1],N=I.useRef(),D=I.useRef({formattedValue:A,numAsString:C}),O=function(_e,ke){D.current={formattedValue:_e.formattedValue,numAsString:_e.value},k(_e,ke)},$=I.useState(!1),F=$[0],M=$[1],B=I.useRef(null),U=I.useRef({setCaretTimeout:null,focusTimeout:null});I.useEffect(function(){return M(!0),function(){clearTimeout(U.current.setCaretTimeout),clearTimeout(U.current.focusTimeout)}},[]);var H=o,P=function(_e,ke){var Ve=parseFloat(ke);return{formattedValue:_e,value:ke,floatValue:isNaN(Ve)?void 0:Ve}},z=function(_e,ke,Ve){_e.selectionStart===0&&_e.selectionEnd===_e.value.length||(t1(_e,ke),U.current.setCaretTimeout=setTimeout(function(){_e.value===Ve&&_e.selectionStart!==ke&&t1(_e,ke)},0))},W=function(_e,ke,Ve){return Zae(_e,ke,v(_e),Ve)},j=function(_e,ke,Ve){var ct=v(ke),Dt=_Xe(ke,A,_e,Ve,ct,b,w);return Dt=Zae(ke,Dt,ct),Dt},q=function(_e){var ke=_e.formattedValue;ke===void 0&&(ke="");var Ve=_e.input,ct=_e.source,Dt=_e.event,Ge=_e.numAsString,ge;if(Ve){var ht=_e.inputValue||Ve.value,vt=R8(Ve);Ve.value=ke,ge=j(ht,ke,vt),ge!==void 0&&z(Ve,ge,ke)}ke!==A&&O(P(ke,Ge),{event:Dt,source:ct})};I.useEffect(function(){var _e=D.current,ke=_e.formattedValue,Ve=_e.numAsString;(A!==ke||C!==Ve)&&O(P(A,C),{event:void 0,source:Q2.props})},[A,C]);var G=B.current?R8(B.current):void 0,ne=typeof window<"u"?I.useLayoutEffect:I.useEffect;ne(function(){var _e=B.current;if(A!==D.current.formattedValue&&_e){var ke=j(D.current.formattedValue,A,G);_e.value=A,z(_e,ke,A)}},[A]);var ce=function(_e,ke,Ve){var ct=ke.target,Dt=N.current?mXe(N.current,ct.selectionEnd):gEe(A,_e),Ge=Object.assign(Object.assign({},Dt),{lastValue:A}),ge=a(_e,Ge),ht=H(ge);if(ge=a(ht,void 0),f&&!f(P(ht,ge))){var vt=ke.target,pe=R8(vt),Ce=j(_e,A,pe);return vt.value=A,z(vt,Ce,A),!1}return q({formattedValue:ht,numAsString:ge,inputValue:_e,event:ke,source:Ve,input:ke.target}),!0},de=function(_e,ke){ke===void 0&&(ke=0);var Ve=_e.selectionStart,ct=_e.selectionEnd;N.current={selectionStart:Ve,selectionEnd:ct+ke}},he=function(_e){var ke=_e.target,Ve=ke.value,ct=ce(Ve,_e,Q2.event);ct&&d(_e),N.current=void 0},ve=function(_e){var ke=_e.target,Ve=_e.key,ct=ke.selectionStart,Dt=ke.selectionEnd,Ge=ke.value;Ge===void 0&&(Ge="");var ge;Ve==="ArrowLeft"||Ve==="Backspace"?ge=Math.max(ct-1,0):Ve==="ArrowRight"?ge=Math.min(ct+1,Ge.length):Ve==="Delete"&&(ge=ct);var ht=0;Ve==="Delete"&&ct===Dt&&(ht=1);var vt=Ve==="ArrowLeft"||Ve==="ArrowRight";if(ge===void 0||ct!==Dt&&!vt){h(_e),de(ke,ht);return}var pe=ge;if(vt){var Ce=Ve==="ArrowLeft"?"left":"right";pe=W(Ge,ge,Ce),pe!==ge&&_e.preventDefault()}else Ve==="Delete"&&!b(Ge[ge])?pe=W(Ge,ge,"right"):Ve==="Backspace"&&!b(Ge[ge])&&(pe=W(Ge,ge,"left"));pe!==ge&&z(ke,pe,Ge),h(_e),de(ke,ht)},Ie=function(_e){var ke=_e.target,Ve=function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,Ge=ke.value;if(Ge===void 0&&(Ge=""),ct===Dt){var ge=W(Ge,ct);ge!==ct&&z(ke,ge,Ge)}};Ve(),requestAnimationFrame(function(){Ve()}),p(_e),de(ke)},be=function(_e){_e.persist&&_e.persist();var ke=_e.target,Ve=_e.currentTarget;B.current=ke,U.current.focusTimeout=setTimeout(function(){var ct=ke.selectionStart,Dt=ke.selectionEnd,Ge=ke.value;Ge===void 0&&(Ge="");var ge=W(Ge,ct);ge!==ct&&!(ct===0&&Dt===Ge.length)&&z(ke,ge,Ge),m(Object.assign(Object.assign({},_e),{currentTarget:Ve}))},0)},Xe=function(_e){B.current=null,clearTimeout(U.current.focusTimeout),clearTimeout(U.current.setCaretTimeout),g(_e)},ze=F&&yXe()?"numeric":void 0,yt=Object.assign({inputMode:ze},E,{type:t,value:A,onChange:he,onKeyDown:ve,onMouseUp:Ie,onFocus:be,onBlur:Xe});if(n==="text")return i?wr.createElement(wr.Fragment,null,i(A,E)||null):wr.createElement("span",Object.assign({},E,{ref:s}),A);if(r){var it=r;return wr.createElement(it,Object.assign({},yt,{ref:s}))}return wr.createElement("input",Object.assign({},yt,{ref:s}))}function eue(e,t){var n=t.decimalScale,r=t.fixedDecimalScale,i=t.prefix;i===void 0&&(i="");var s=t.suffix;s===void 0&&(s="");var o=t.allowNegative,a=t.thousandsGroupStyle;if(a===void 0&&(a="thousand"),e===""||e==="-")return e;var u=N6(t),l=u.thousandSeparator,c=u.decimalSeparator,f=n!==0&&e.indexOf(".")!==-1||n&&r,d=rK(e,o),h=d.beforeDecimal,p=d.afterDecimal,m=d.addNegation;return n!==void 0&&(p=pEe(p,n,!!r)),l&&(h=dXe(h,l,a)),i&&(h=i+h),s&&(p=p+s),m&&(h="-"+h),e=h+(f&&c||"")+p,e}function N6(e){var t=e.decimalSeparator;t===void 0&&(t=".");var n=e.thousandSeparator,r=e.allowedDecimalSeparators;return n===!0&&(n=","),r||(r=[t,"."]),{decimalSeparator:t,thousandSeparator:n,allowedDecimalSeparators:r}}function TXe(e,t){e===void 0&&(e="");var n=new RegExp("(-)"),r=new RegExp("(-)(.)*(-)"),i=n.test(e),s=r.test(e);return e=e.replace(/-/g,""),i&&!s&&t&&(e="-"+e),e}function AXe(e,t){return new RegExp("(^-)|[0-9]|"+hEe(e),"g")}function CXe(e,t,n){return e===""?!0:!(t!=null&&t.match(/\d/))&&!(n!=null&&n.match(/\d/))&&typeof e=="string"&&!isNaN(Number(e))}function IXe(e,t,n){var r;t===void 0&&(t=vXe(e));var i=n.allowNegative,s=n.prefix;s===void 0&&(s="");var o=n.suffix;o===void 0&&(o="");var a=n.decimalScale,u=t.from,l=t.to,c=l.start,f=l.end,d=N6(n),h=d.allowedDecimalSeparators,p=d.decimalSeparator,m=e[f]===p;if(J2(e)&&(e===s||e===o)&&t.lastValue==="")return e;if(f-c===1&&h.indexOf(e[c])!==-1){var g=a===0?"":p;e=e.substring(0,c)+g+e.substring(c+1,e.length)}var y=function(B,U,H){var P=!1,z=!1;s.startsWith("-")?P=!1:B.startsWith("--")?(P=!1,z=!0):o.startsWith("-")&&B.length===o.length?P=!1:B[0]==="-"&&(P=!0);var W=P?1:0;return z&&(W=2),W&&(B=B.substring(W),U-=W,H-=W),{value:B,start:U,end:H,hasNegation:P}},v=y(e,c,f),b=v.hasNegation;r=v,e=r.value,c=r.start,f=r.end;var w=y(t.lastValue,u.start,u.end),E=w.start,T=w.end,S=w.value,A=e.substring(c,f);e.length&&S.length&&(E>S.length-o.length||T<s.length)&&!(A&&o.startsWith(A))&&(e=S);var C=0;e.startsWith(s)?C+=s.length:c<s.length&&(C=c),e=e.substring(C),f-=C;var k=e.length,N=e.length-o.length;e.endsWith(o)?k=N:(f>N||f>e.length-o.length)&&(k=f),e=e.substring(0,k),e=TXe(b?"-"+e:e,i),e=(e.match(AXe(p))||[]).join("");var D=e.indexOf(p);e=e.replace(new RegExp(hEe(p),"g"),function(B,U){return U===D?".":""});var O=rK(e,i),$=O.beforeDecimal,F=O.afterDecimal,M=O.addNegation;return l.end-l.start<u.end-u.start&&$===""&&m&&!parseFloat(F)&&(e=M?"-":""),e}function kXe(e,t){var n=t.prefix;n===void 0&&(n="");var r=t.suffix;r===void 0&&(r="");var i=Array.from({length:e.length+1}).map(function(){return!0}),s=e[0]==="-";i.fill(!1,0,n.length+(s?1:0));var o=e.length;return i.fill(!1,o-r.length+1,o+1),i}function RXe(e){var t=N6(e),n=t.thousandSeparator,r=t.decimalSeparator,i=e.prefix;i===void 0&&(i="");var s=e.allowNegative;if(s===void 0&&(s=!0),n===r)throw new Error(`
        Decimal separator can't be same as thousand separator.
        thousandSeparator: `+n+` (thousandSeparator = {true} is same as thousandSeparator = ",")
        decimalSeparator: `+r+` (default value for decimalSeparator is .)
     `);return i.startsWith("-")&&s&&(console.error(`
      Prefix can't start with '-' when allowNegative is true.
      prefix: `+i+`
      allowNegative: `+s+`
    `),s=!1),Object.assign(Object.assign({},e),{allowNegative:s})}function NXe(e){e=RXe(e),e.decimalSeparator,e.allowedDecimalSeparators,e.thousandsGroupStyle;var t=e.suffix,n=e.allowNegative,r=e.allowLeadingZeros,i=e.onKeyDown;i===void 0&&(i=Jg);var s=e.onBlur;s===void 0&&(s=Jg);var o=e.thousandSeparator,a=e.decimalScale,u=e.fixedDecimalScale,l=e.prefix;l===void 0&&(l="");var c=e.defaultValue,f=e.value,d=e.valueIsNumericString,h=e.onValueChange,p=fEe(e,["decimalSeparator","allowedDecimalSeparators","thousandsGroupStyle","suffix","allowNegative","allowLeadingZeros","onKeyDown","onBlur","thousandSeparator","decimalScale","fixedDecimalScale","prefix","defaultValue","value","valueIsNumericString","onValueChange"]),m=N6(e),g=m.decimalSeparator,y=m.allowedDecimalSeparators,v=function(M){return eue(M,e)},b=function(M,B){return IXe(M,B,e)},w=cE(f)?c:f,E=d??CXe(w,l,t);cE(f)?cE(c)||(E=E||typeof c=="number"):E=E||typeof f=="number";var T=function(M){return dEe(M)?M:(typeof M=="number"&&(M=mEe(M)),E&&typeof a=="number"?Jae(M,a,!!u):M)},S=yEe(T(f),T(c),!!E,v,b,h),A=S[0],C=A.numAsString,k=A.formattedValue,N=S[1],D=function(M){var B=M.target,U=M.key,H=B.selectionStart,P=B.selectionEnd,z=B.value;if(z===void 0&&(z=""),(U==="Backspace"||U==="Delete")&&P<l.length){M.preventDefault();return}if(H!==P){i(M);return}U==="Backspace"&&z[0]==="-"&&H===l.length+1&&n&&t1(B,1),a&&u&&(U==="Backspace"&&z[H-1]===g?(t1(B,H-1),M.preventDefault()):U==="Delete"&&z[H]===g&&M.preventDefault()),y!=null&&y.includes(U)&&z[H]===g&&t1(B,H+1);var W=o===!0?",":o;U==="Backspace"&&z[H-1]===W&&t1(B,H-1),U==="Delete"&&z[H]===W&&t1(B,H+1),i(M)},O=function(M){var B=C;if(B.match(/\d/g)||(B=""),r||(B=pXe(B)),u&&a&&(B=Jae(B,a,u)),B!==C){var U=eue(B,e);N({formattedValue:U,value:B,floatValue:parseFloat(B)},{event:M,source:Q2.event})}s(M)},$=function(M){return M===g?!0:J2(M)},F=function(M){var B=M.currentValue,U=M.lastValue,H=M.formattedValue,P=M.currentValueIndex,z=M.formattedValueIndex,W=B[P],j=H[z],q=gEe(U,B),G=q.to;return P>=G.start&&P<G.end&&y&&y.includes(W)&&j===g?!0:W===j};return Object.assign(Object.assign({},p),{value:k,valueIsNumericString:!1,isValidInputCharacter:$,isCharacterSame:F,onValueChange:N,format:v,removeFormatting:b,getCaretBoundary:function(M){return kXe(M,e)},onKeyDown:D,onBlur:O})}function PXe(e){var t=NXe(e);return wr.createElement(SXe,Object.assign({},t))}function tue({direction:e,style:t,...n}){return _.jsx("svg",{style:{width:"var(--ni-chevron-size)",height:"var(--ni-chevron-size)",transform:e==="up"?"rotate(180deg)":void 0,...t},viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",...n,children:_.jsx("path",{d:"M3.13523 6.15803C3.3241 5.95657 3.64052 5.94637 3.84197 6.13523L7.5 9.56464L11.158 6.13523C11.3595 5.94637 11.6759 5.95657 11.8648 6.15803C12.0536 6.35949 12.0434 6.67591 11.842 6.86477L7.84197 10.6148C7.64964 10.7951 7.35036 10.7951 7.15803 10.6148L3.15803 6.86477C2.95657 6.67591 2.94637 6.35949 3.13523 6.15803Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})})}var G7={root:"m_e2f5cd4e",controls:"m_95e17d22",control:"m_80b4b171"};const OXe=/^(0\.0*|-0(\.0*)?)$/,DXe=/^-?0\d+(\.\d+)?\.?$/;function $Xe(e){return(typeof e=="number"?e<Number.MAX_SAFE_INTEGER:!Number.isNaN(Number(e)))&&!Number.isNaN(e)}function nue(e,t,n){if(e===void 0)return!0;const r=t===void 0||e>=t,i=n===void 0||e<=n;return r&&i}const MXe={step:1,clampBehavior:"blur",allowDecimal:!0,allowNegative:!0,withKeyboardEvents:!0,allowLeadingZeros:!0,trimLeadingZeroesOnBlur:!0,startValue:0},LXe=(e,{size:t})=>({controls:{"--ni-chevron-size":tn(t,"ni-chevron-size")}}),iK=Me((e,t)=>{const n=xe("NumberInput",MXe,e),{className:r,classNames:i,styles:s,unstyled:o,vars:a,onChange:u,onValueChange:l,value:c,defaultValue:f,max:d,min:h,step:p,hideControls:m,rightSection:g,isAllowed:y,clampBehavior:v,onBlur:b,allowDecimal:w,decimalScale:E,onKeyDown:T,onKeyDownCapture:S,handlersRef:A,startValue:C,disabled:k,rightSectionPointerEvents:N,allowNegative:D,readOnly:O,size:$,rightSectionWidth:F,stepHoldInterval:M,stepHoldDelay:B,allowLeadingZeros:U,withKeyboardEvents:H,trimLeadingZeroesOnBlur:P,...z}=n,W=dt({name:"NumberInput",classes:G7,props:n,classNames:i,styles:s,unstyled:o,vars:a,varsResolver:LXe}),{resolvedClassNames:j,resolvedStyles:q}=Jm({classNames:i,styles:s,props:n}),[G,ne]=As({value:c,defaultValue:f,onChange:u}),ce=B!==void 0&&M!==void 0,de=I.useRef(null),he=I.useRef(null),ve=I.useRef(0),Ie=(ge,ht)=>{ht.source==="event"&&ne($Xe(ge.floatValue)&&!OXe.test(ge.value)&&!(U&&DXe.test(ge.value))?ge.floatValue:ge.value),l==null||l(ge,ht)},be=ge=>{const ht=String(ge).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return ht?Math.max(0,(ht[1]?ht[1].length:0)-(ht[2]?+ht[2]:0)):0},Xe=ge=>{de.current&&typeof ge<"u"&&de.current.setSelectionRange(ge,ge)},ze=I.useRef();ze.current=()=>{let ge;const ht=be(G),vt=be(p),pe=Math.max(ht,vt),Ce=10**pe;if(typeof G!="number"||Number.isNaN(G))ge=rh(C,h,d);else if(d!==void 0){const ut=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;ge=ut<=d?ut:d}else ge=(Math.round(G*Ce)+Math.round(p*Ce))/Ce;const qe=ge.toFixed(pe);ne(parseFloat(qe)),l==null||l({floatValue:parseFloat(qe),formattedValue:qe,value:qe},{source:"increment"}),setTimeout(()=>{var ut;return Xe((ut=de.current)==null?void 0:ut.value.length)},0)};const yt=I.useRef();yt.current=()=>{let ge;const ht=h!==void 0?h:D?Number.MIN_SAFE_INTEGER:0,vt=be(G),pe=be(p),Ce=Math.max(vt,pe),qe=10**Ce;if(typeof G!="number"||Number.isNaN(G))ge=rh(C,ht,d);else{const _t=(Math.round(G*qe)-Math.round(p*qe))/qe;ge=ht!==void 0&&_t<ht?ht:_t}const ut=ge.toFixed(Ce);ne(parseFloat(ut)),l==null||l({floatValue:parseFloat(ut),formattedValue:ut,value:ut},{source:"decrement"}),setTimeout(()=>{var _t;return Xe((_t=de.current)==null?void 0:_t.value.length)},0)};const it=ge=>{T==null||T(ge),!(O||!H)&&(ge.key==="ArrowUp"&&(ge.preventDefault(),ze.current()),ge.key==="ArrowDown"&&(ge.preventDefault(),yt.current()))},_e=ge=>{if(S==null||S(ge),ge.key==="Backspace"){const ht=de.current;ht.selectionStart===0&&ht.selectionStart===ht.selectionEnd&&(ge.preventDefault(),window.setTimeout(()=>Xe(0),0))}};PG(A,{increment:ze.current,decrement:yt.current});const ke=ge=>{ge?ze.current():yt.current(),ve.current+=1},Ve=ge=>{if(ke(ge),ce){const ht=typeof M=="number"?M:M(ve.current);he.current=window.setTimeout(()=>Ve(ge),ht)}},ct=(ge,ht)=>{var vt;ge.preventDefault(),(vt=de.current)==null||vt.focus(),ke(ht),ce&&(he.current=window.setTimeout(()=>Ve(ht),B))},Dt=()=>{he.current&&window.clearTimeout(he.current),he.current=null,ve.current=0},Ge=_.jsxs("div",{...W("controls"),children:[_.jsx(Ts,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&d!==void 0&&G>=d,mod:{direction:"up"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!0)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(tue,{direction:"up"})}),_.jsx(Ts,{...W("control"),tabIndex:-1,"aria-hidden":!0,disabled:k||typeof G=="number"&&h!==void 0&&G<=h,mod:{direction:"down"},onMouseDown:ge=>ge.preventDefault(),onPointerDown:ge=>{ct(ge,!1)},onPointerUp:Dt,onPointerLeave:Dt,children:_.jsx(tue,{direction:"down"})})]});return _.jsx(Qc,{component:PXe,allowNegative:D,className:es(G7.root,r),size:$,...z,readOnly:O,disabled:k,value:G,getInputRef:gs(t,de),onValueChange:Ie,rightSection:m||O?g:g||Ge,classNames:j,styles:q,unstyled:o,__staticSelector:"NumberInput",decimalScale:w?E:0,onKeyDown:it,onKeyDownCapture:_e,rightSectionPointerEvents:N??(k?"none":void 0),rightSectionWidth:F??`var(--ni-right-section-width-${$||"sm"})`,allowLeadingZeros:U,onBlur:ge=>{if(b==null||b(ge),v==="blur"&&typeof G=="number"&&rh(G,h,d)!==G&&ne(rh(G,h,d)),P&&typeof G=="string"){const ht=G.replace(/^0+/,""),vt=parseFloat(ht);ne(Number.isNaN(vt)?ht:vt)}},isAllowed:ge=>v==="strict"?y?y(ge)&&nue(ge.floatValue,h,d):nue(ge.floatValue,h,d):y?y(ge):!0})});iK.classes={...Qc.classes,...G7};iK.displayName="@mantine/core/NumberInput";const[FXe,vEe]=yo("Progress.Root component was not found in tree");var Nk={root:"m_db6d6462",section:"m_2242eb65","stripes-animation":"m_81a374bd",label:"m_91e40b74"};const jXe={},sK=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,...a}=xe("ProgressLabel",jXe,e),u=vEe();return _.jsx(me,{ref:t,...u.getStyles("label",{className:r,style:i,classNames:n,styles:s}),...a})});sK.classes=Nk;sK.displayName="@mantine/core/ProgressLabel";const BXe={},UXe=(e,{size:t,radius:n,transitionDuration:r})=>({root:{"--progress-size":tn(t,"progress-size"),"--progress-radius":n===void 0?void 0:Vr(n),"--progress-transition-duration":typeof r=="number"?`${r}ms`:void 0}}),P6=Me((e,t)=>{const n=xe("ProgressRoot",BXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,autoContrast:l,transitionDuration:c,...f}=n,d=dt({name:"Progress",classes:Nk,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:UXe});return _.jsx(FXe,{value:{getStyles:d,autoContrast:l},children:_.jsx(me,{ref:t,...d("root"),...f})})});P6.classes=Nk;P6.displayName="@mantine/core/ProgressRoot";const zXe={withAria:!0},O6=Me((e,t)=>{const{classNames:n,className:r,style:i,styles:s,vars:o,value:a,withAria:u,color:l,striped:c,animated:f,mod:d,...h}=xe("ProgressSection",zXe,e),p=vEe(),m=ys(),g=u?{role:"progressbar","aria-valuemax":100,"aria-valuemin":0,"aria-valuenow":a,"aria-valuetext":`${a}%`}:{};return _.jsx(me,{ref:t,...p.getStyles("section",{className:r,classNames:n,styles:s,style:i}),...h,...g,mod:[{striped:c||f,animated:f},d],__vars:{"--progress-section-width":`${a}%`,"--progress-section-color":Lr(l,m),"--progress-label-color":fS(p.autoContrast,m)?Hy({color:l,theme:m,autoContrast:p.autoContrast}):void 0}})});O6.classes=Nk;O6.displayName="@mantine/core/ProgressSection";const VXe={},ES=Me((e,t)=>{const n=xe("Progress",VXe,e),{value:r,classNames:i,styles:s,vars:o,color:a,striped:u,animated:l,"aria-label":c,...f}=n,{resolvedClassNames:d,resolvedStyles:h}=Jm({classNames:i,styles:s,props:n});return _.jsx(P6,{ref:t,classNames:d,styles:h,vars:o,...f,children:_.jsx(O6,{value:r,color:a,striped:u,animated:l,"aria-label":c})})});ES.classes=Nk;ES.displayName="@mantine/core/Progress";ES.Section=O6;ES.Root=P6;ES.Label=sK;const[HXe,bEe]=cS(),[qXe,WXe]=cS();var _Ee={card:"m_9dc8ae12"};const GXe={withBorder:!0},YXe=(e,{radius:t})=>({card:{"--card-radius":Vr(t)}}),oK=Me((e,t)=>{const n=xe("RadioCard",GXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,checked:l,mod:c,withBorder:f,value:d,onClick:h,name:p,onKeyDown:m,...g}=n,y=dt({name:"RadioCard",classes:_Ee,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:YXe,rootSelector:"card"}),{dir:v}=Yh(),b=bEe(),w=typeof l=="boolean"?l:(b==null?void 0:b.value)===d||!1,E=p||(b==null?void 0:b.name),T=S=>{if(m==null||m(S),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(S.nativeEvent.code)){S.preventDefault();const A=Array.from(document.querySelectorAll(`[role="radio"][name="${E||"__mantine"}"]`)),C=A.findIndex(D=>D===S.target),k=C+1>=A.length?0:C+1,N=C-1<0?A.length-1:C-1;S.nativeEvent.code==="ArrowDown"&&(A[k].focus(),A[k].click()),S.nativeEvent.code==="ArrowUp"&&(A[N].focus(),A[N].click()),S.nativeEvent.code==="ArrowLeft"&&(A[v==="ltr"?N:k].focus(),A[v==="ltr"?N:k].click()),S.nativeEvent.code==="ArrowRight"&&(A[v==="ltr"?k:N].focus(),A[v==="ltr"?k:N].click())}};return _.jsx(qXe,{value:{checked:w},children:_.jsx(Ts,{ref:t,mod:[{"with-border":f,checked:w},c],...y("card"),...g,role:"radio","aria-checked":w,name:E,onClick:S=>{h==null||h(S),b==null||b.onChange(d||"")},onKeyDown:T})})});oK.displayName="@mantine/core/RadioCard";oK.classes=_Ee;const KXe={},aK=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,name:u,readOnly:l,...c}=xe("RadioGroup",KXe,e),f=Ia(u),[d,h]=As({value:n,defaultValue:r,finalValue:"",onChange:i}),p=m=>!l&&h(typeof m=="string"?m:m.currentTarget.value);return _.jsx(HXe,{value:{value:d,onChange:p,size:s,name:f},children:_.jsx(mi.Wrapper,{size:s,ref:t,...o,...c,labelElement:"div",__staticSelector:"RadioGroup",children:_.jsx(LY,{role:"radiogroup",children:a})})})});aK.classes=mi.Wrapper.classes;aK.displayName="@mantine/core/RadioGroup";function wEe({size:e,style:t,...n}){return _.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 5 5",style:{width:Te(e),height:Te(e),...t},"aria-hidden":!0,...n,children:_.jsx("circle",{cx:"2.5",cy:"2.5",r:"2.5",fill:"currentColor"})})}var EEe={indicator:"m_717d7ff6",icon:"m_3e4da632","indicator--outline":"m_2980836c"};const XXe={icon:wEe},QXe=(e,{radius:t,color:n,size:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Gh({color:n||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{indicator:{"--radio-size":tn(r,"radio-size"),"--radio-radius":t===void 0?void 0:Vr(t),"--radio-color":s==="outline"?u:Lr(n,e),"--radio-icon-size":tn(r,"radio-icon-size"),"--radio-icon-color":i?Lr(i,e):fS(o,e)?Hy({color:n,theme:e,autoContrast:o}):void 0}}},uK=Me((e,t)=>{const n=xe("RadioIndicator",XXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,icon:l,radius:c,color:f,iconColor:d,autoContrast:h,checked:p,mod:m,variant:g,disabled:y,...v}=n,b=l,w=dt({name:"RadioIndicator",classes:EEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:QXe,rootSelector:"indicator"}),E=WXe(),T=typeof p=="boolean"?p:(E==null?void 0:E.checked)||!1;return _.jsx(me,{ref:t,...w("indicator",{variant:g}),variant:g,mod:[{checked:T,disabled:y},m],...v,children:_.jsx(b,{...w("icon")})})});uK.displayName="@mantine/core/RadioIndicator";uK.classes=EEe;var xEe={root:"m_f3f1af94",inner:"m_89c4f5e4",icon:"m_f3ed6b2b",radio:"m_8a3dbb89","radio--outline":"m_1bfe9d39"};const JXe={labelPosition:"right"},ZXe=(e,{size:t,radius:n,color:r,iconColor:i,variant:s,autoContrast:o})=>{const a=Gh({color:r||e.primaryColor,theme:e}),u=a.isThemeColor&&a.shade===void 0?`var(--mantine-color-${a.color}-outline)`:a.color;return{root:{"--radio-size":tn(t,"radio-size"),"--radio-radius":n===void 0?void 0:Vr(n),"--radio-color":s==="outline"?u:Lr(r,e),"--radio-icon-color":i?Lr(i,e):fS(o,e)?Hy({color:r,theme:e,autoContrast:o}):void 0,"--radio-icon-size":tn(t,"radio-icon-size")}}},ib=Me((e,t)=>{const n=xe("Radio",JXe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,id:l,size:c,label:f,labelPosition:d,description:h,error:p,radius:m,color:g,variant:y,disabled:v,wrapperProps:b,icon:w=wEe,rootRef:E,iconColor:T,onChange:S,mod:A,...C}=n,k=dt({name:"Radio",classes:xEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:ZXe}),N=bEe(),D=(N==null?void 0:N.size)??c,O=n.size?c:D,{styleProps:$,rest:F}=qb(C),M=Ia(l),B=N?{checked:N.value===F.value,name:F.name??N.name,onChange:U=>{N.onChange(U),S==null||S(U)}}:{};return _.jsx(d6,{...k("root"),__staticSelector:"Radio",__stylesApiProps:n,id:M,size:O,labelPosition:d,label:f,description:h,error:p,disabled:v,classNames:r,styles:o,unstyled:a,"data-checked":B.checked||void 0,variant:y,ref:E,mod:A,...$,...b,children:_.jsxs(me,{...k("inner"),mod:{"label-position":d},children:[_.jsx(me,{...k("radio",{focusable:!0,variant:y}),onChange:S,...F,...B,component:"input",mod:{error:!!p},ref:t,id:M,disabled:v,type:"radio"}),_.jsx(w,{...k("icon"),"aria-hidden":!0})]})})});ib.classes=xEe;ib.displayName="@mantine/core/Radio";ib.Group=aK;ib.Card=oK;ib.Indicator=uK;const eQe={duration:100,transition:"fade"};function tQe(e,t){return{...eQe,...t,...e}}function nQe({offset:e,position:t}){const[n,r]=I.useState(!1),i=I.useRef(),{x:s,y:o,elements:a,refs:u,update:l,placement:c}=nY({placement:t,middleware:[JG({crossAxis:!0,padding:5,rootBoundary:"document"})]}),f=c.includes("right")?e:t.includes("left")?e*-1:0,d=c.includes("bottom")?e:t.includes("top")?e*-1:0,h=I.useCallback(({clientX:p,clientY:m})=>{u.setPositionReference({getBoundingClientRect(){return{width:0,height:0,x:p,y:m,left:p+f,top:m+d,right:p,bottom:m}}})},[a.reference]);return I.useEffect(()=>{if(u.floating.current){const p=i.current;p.addEventListener("mousemove",h);const m=um(u.floating.current);return m.forEach(g=>{g.addEventListener("scroll",l)}),()=>{p.removeEventListener("mousemove",h),m.forEach(g=>{g.removeEventListener("scroll",l)})}}},[a.reference,u.floating.current,l,h,n]),{handleMouseMove:h,x:s,y:o,opened:n,setOpened:r,boundaryRef:i,floating:u.setFloating}}var D6={tooltip:"m_1b3c8819",arrow:"m_f898399f"};const rQe={refProp:"ref",withinPortal:!0,offset:10,position:"right",zIndex:rc("popover")},iQe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Vr(t),"--tooltip-bg":n?Lr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),lK=Me((e,t)=>{const n=xe("TooltipFloating",rQe,e),{children:r,refProp:i,withinPortal:s,style:o,className:a,classNames:u,styles:l,unstyled:c,radius:f,color:d,label:h,offset:p,position:m,multiline:g,zIndex:y,disabled:v,variant:b,vars:w,portalProps:E,...T}=n,S=ys(),A=dt({name:"TooltipFloating",props:n,classes:D6,className:a,style:o,classNames:u,styles:l,unstyled:c,rootSelector:"tooltip",vars:w,varsResolver:iQe}),{handleMouseMove:C,x:k,y:N,opened:D,boundaryRef:O,floating:$,setOpened:F}=nQe({offset:p,position:m});if(!zy(r))throw new Error("[@mantine/core] Tooltip.Floating component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const M=gs(O,r.ref,t),B=H=>{var P,z;(z=(P=r.props).onMouseEnter)==null||z.call(P,H),C(H),F(!0)},U=H=>{var P,z;(z=(P=r.props).onMouseLeave)==null||z.call(P,H),F(!1)};return _.jsxs(_.Fragment,{children:[_.jsx(mS,{...E,withinPortal:s,children:_.jsx(me,{...T,...A("tooltip",{style:{...FG(o,S),zIndex:y,display:!v&&D?"block":"none",top:(N&&Math.round(N))??"",left:(k&&Math.round(k))??""}}),variant:b,ref:$,mod:{multiline:g},children:h})}),I.cloneElement(r,{...r.props,[i]:M,onMouseEnter:B,onMouseLeave:U})]})});lK.classes=D6;lK.displayName="@mantine/core/TooltipFloating";const SEe=I.createContext(!1),sQe=SEe.Provider,oQe=()=>I.useContext(SEe),aQe={openDelay:0,closeDelay:0};function TEe(e){const{openDelay:t,closeDelay:n,children:r}=xe("TooltipGroup",aQe,e);return _.jsx(sQe,{value:!0,children:_.jsx(tWe,{delay:{open:t,close:n},children:r})})}TEe.displayName="@mantine/core/TooltipGroup";function uQe(e){var T,S,A;const[t,n]=I.useState(!1),i=typeof e.opened=="boolean"?e.opened:t,s=oQe(),o=Ia(),{delay:a,currentId:u,setCurrentId:l}=uwe(),c=I.useCallback(C=>{n(C),C&&l(o)},[l,o]),{x:f,y:d,context:h,refs:p,update:m,placement:g,middlewareData:{arrow:{x:y,y:v}={}}}=nY({strategy:e.strategy,placement:e.position,open:i,onOpenChange:c,middleware:[rwe(e.offset),JG({padding:8}),z7(),iwe({element:e.arrowRef,padding:e.arrowOffset}),...e.inline?[V7()]:[]]}),{getReferenceProps:b,getFloatingProps:w}=uWe([eWe(h,{enabled:(T=e.events)==null?void 0:T.hover,delay:s?a:{open:e.openDelay,close:e.closeDelay},mouseOnly:!((S=e.events)!=null&&S.touch)}),aWe(h,{enabled:(A=e.events)==null?void 0:A.focus,visibleOnly:!0}),cWe(h,{role:"tooltip"}),sWe(h,{enabled:typeof e.opened>"u"}),nWe(h,{id:o})]);mwe({opened:i,position:e.position,positionDependencies:e.positionDependencies,floating:{refs:p,update:m}}),kh(()=>{var C;(C=e.onPositionChange)==null||C.call(e,g)},[g]);const E=i&&u&&u!==o;return{x:f,y:d,arrowX:y,arrowY:v,reference:p.setReference,floating:p.setFloating,getFloatingProps:w,getReferenceProps:b,isGroupPhase:E,opened:i,placement:g}}const rue={position:"top",refProp:"ref",withinPortal:!0,inline:!1,arrowSize:4,arrowOffset:5,arrowRadius:0,arrowPosition:"side",offset:5,transitionProps:{duration:100,transition:"fade"},events:{hover:!0,focus:!1,touch:!1},zIndex:rc("popover"),positionDependencies:[]},lQe=(e,{radius:t,color:n})=>({tooltip:{"--tooltip-radius":t===void 0?void 0:Vr(t),"--tooltip-bg":n?Lr(n,e):void 0,"--tooltip-color":n?"var(--mantine-color-white)":void 0}}),Ci=Me((e,t)=>{const n=xe("Tooltip",rue,e),{children:r,position:i,refProp:s,label:o,openDelay:a,closeDelay:u,onPositionChange:l,opened:c,withinPortal:f,radius:d,color:h,classNames:p,styles:m,unstyled:g,style:y,className:v,withArrow:b,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,offset:A,transitionProps:C,multiline:k,events:N,zIndex:D,disabled:O,positionDependencies:$,onClick:F,onMouseEnter:M,onMouseLeave:B,inline:U,variant:H,keepMounted:P,vars:z,portalProps:W,mod:j,floatingStrategy:q,...G}=xe("Tooltip",rue,n),{dir:ne}=Yh(),ce=I.useRef(null),de=uQe({position:lwe(ne,i),closeDelay:u,openDelay:a,onPositionChange:l,opened:c,events:N,arrowRef:ce,arrowOffset:E,offset:typeof A=="number"?A+(b?w/2:0):A,positionDependencies:[...$,r],inline:U,strategy:q}),he=dt({name:"Tooltip",props:n,classes:D6,className:v,style:y,classNames:p,styles:m,unstyled:g,rootSelector:"tooltip",vars:z,varsResolver:lQe});if(!zy(r))throw new Error("[@mantine/core] Tooltip component children should be an element or a component that accepts ref, fragments, strings, numbers and other primitive values are not supported");const ve=gs(de.reference,r.ref,t),Ie=tQe(C,{duration:100,transition:"fade"});return _.jsxs(_.Fragment,{children:[_.jsx(mS,{...W,withinPortal:f,children:_.jsx(eg,{...Ie,keepMounted:P,mounted:!O&&!!de.opened,duration:de.isGroupPhase?10:Ie.duration,children:be=>_.jsxs(me,{...G,variant:H,mod:[{multiline:k},j],...de.getFloatingProps({ref:de.floating,className:he("tooltip").className,style:{...he("tooltip").style,...be,zIndex:D,top:de.y??0,left:de.x??0}}),children:[o,_.jsx(rY,{ref:ce,arrowX:de.arrowX,arrowY:de.arrowY,visible:b,position:de.placement,arrowSize:w,arrowOffset:E,arrowRadius:T,arrowPosition:S,...he("arrow")})]})})}),I.cloneElement(r,de.getReferenceProps({onClick:F,onMouseEnter:M,onMouseLeave:B,onMouseMove:n.onMouseMove,onPointerDown:n.onPointerDown,onPointerEnter:n.onPointerEnter,[s]:ve,className:es(v,r.props.className),...r.props}))]})});Ci.classes=D6;Ci.displayName="@mantine/core/Tooltip";Ci.Floating=lK;Ci.Group=TEe;var AEe={root:"m_cf365364",indicator:"m_9e182ccd",label:"m_1738fcb2",input:"m_1714d588",control:"m_69686b9b",innerLabel:"m_78882f40"};const cQe={withItemsBorders:!0},fQe=(e,{radius:t,color:n,transitionDuration:r,size:i,transitionTimingFunction:s})=>({root:{"--sc-radius":t===void 0?void 0:Vr(t),"--sc-color":n?Lr(n,e):void 0,"--sc-shadow":n?void 0:"var(--mantine-shadow-xs)","--sc-transition-duration":r===void 0?void 0:`${r}ms`,"--sc-transition-timing-function":s,"--sc-padding":tn(i,"sc-padding"),"--sc-font-size":po(i)}}),cK=Me((e,t)=>{var ne,ce;const n=xe("SegmentedControl",cQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,data:l,value:c,defaultValue:f,onChange:d,size:h,name:p,disabled:m,readOnly:g,fullWidth:y,orientation:v,radius:b,color:w,transitionDuration:E,transitionTimingFunction:T,variant:S,autoContrast:A,withItemsBorders:C,mod:k,...N}=n,D=dt({name:"SegmentedControl",props:n,classes:AEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:fQe}),O=ys(),$=l.map(de=>typeof de=="string"?{label:de,value:de}:de),F=fVe(),[M,B]=I.useState(null),[U,H]=I.useState({}),P=(de,he)=>{U[he]=de,H(U)},[z,W]=As({value:c,defaultValue:f,finalValue:Array.isArray(l)?((ne=$.find(de=>!de.disabled))==null?void 0:ne.value)??((ce=l[0])==null?void 0:ce.value)??null:null,onChange:d}),j=Ia(p),q=$.map(de=>I.createElement(me,{...D("control"),mod:{active:z===de.value,orientation:v},key:de.value},I.createElement("input",{...D("input"),disabled:m||de.disabled,type:"radio",name:j,value:de.value,id:`${j}-${de.value}`,checked:z===de.value,onChange:()=>!g&&W(de.value),"data-focus-ring":O.focusRing,key:`${de.value}-input`}),I.createElement(me,{component:"label",...D("label"),mod:{active:z===de.value&&!(m||de.disabled),disabled:m||de.disabled,"read-only":g},htmlFor:`${j}-${de.value}`,ref:he=>P(he,de.value),__vars:{"--sc-label-color":w!==void 0?Hy({color:w,theme:O,autoContrast:A}):void 0},key:`${de.value}-label`},_.jsx("span",{...D("innerLabel"),children:de.label})))),G=gs(t,de=>B(de));return l.length===0?null:_.jsxs(me,{...D("root"),variant:S,size:h,ref:G,mod:[{"full-width":y,orientation:v,initialized:F,"with-items-borders":C},k],...N,role:"radiogroup",children:[typeof z=="string"&&_.jsx(hY,{target:U[z],parent:M,component:"span",transitionDuration:"var(--sc-transition-duration)",...D("indicator")}),q]})});cK.classes=AEe;cK.displayName="@mantine/core/SegmentedControl";const dQe={searchable:!1,withCheckIcon:!0,allowDeselect:!0,checkIconPosition:"left"},Pk=Me((e,t)=>{const n=xe("Select",dQe,e),{classNames:r,styles:i,unstyled:s,vars:o,dropdownOpened:a,defaultDropdownOpened:u,onDropdownClose:l,onDropdownOpen:c,onFocus:f,onBlur:d,onClick:h,onChange:p,data:m,value:g,defaultValue:y,selectFirstOptionOnChange:v,onOptionSubmit:b,comboboxProps:w,readOnly:E,disabled:T,filter:S,limit:A,withScrollArea:C,maxDropdownHeight:k,size:N,searchable:D,rightSection:O,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,name:B,form:U,searchValue:H,defaultSearchValue:P,onSearchChange:z,allowDeselect:W,error:j,rightSectionPointerEvents:q,id:G,clearable:ne,clearButtonProps:ce,hiddenInputProps:de,renderOption:he,onClear:ve,autoComplete:Ie,scrollAreaProps:be,...Xe}=n,ze=I.useMemo(()=>Pwe(m),[m]),yt=I.useMemo(()=>SY(ze),[ze]),it=Ia(G),[_e,ke,Ve]=As({value:g,defaultValue:y,finalValue:null,onChange:p}),ct=typeof _e=="string"?yt[_e]:void 0,[Dt,Ge]=As({value:H,defaultValue:P,finalValue:ct?ct.label:"",onChange:z}),ge=$Y({opened:a,defaultOpened:u,onDropdownOpen:()=>{c==null||c(),ge.updateSelectedOptionIndex("active",{scrollIntoView:!0})},onDropdownClose:()=>{l==null||l(),ge.resetSelectedOption()}}),{resolvedClassNames:ht,resolvedStyles:vt}=Jm({props:n,styles:i,classNames:r});I.useEffect(()=>{v&&ge.selectFirstOption()},[v,_e]),I.useEffect(()=>{g===null&&Ge(""),typeof g=="string"&&ct&&Ge(ct.label)},[g,ct]);const pe=ne&&!!_e&&!T&&!E&&_.jsx(Qn.ClearButton,{size:N,...ce,onClear:()=>{ke(null,null),Ge(""),ve==null||ve()}});return _.jsxs(_.Fragment,{children:[_.jsxs(Qn,{store:ge,__staticSelector:"Select",classNames:ht,styles:vt,unstyled:s,readOnly:E,onOptionSubmit:Ce=>{b==null||b(Ce);const qe=W&&yt[Ce].value===_e?null:yt[Ce],ut=qe?qe.value:null;ke(ut,qe),!Ve&&Ge(typeof ut=="string"&&(qe==null?void 0:qe.label)||""),ge.closeDropdown()},size:N,...w,children:[_.jsx(Qn.Target,{targetType:D?"input":"button",autoComplete:Ie,children:_.jsx(Qc,{id:it,ref:t,rightSection:O||pe||_.jsx(Qn.Chevron,{size:N,error:j,unstyled:s}),rightSectionPointerEvents:q||(pe?"all":"none"),...Xe,size:N,__staticSelector:"Select",disabled:T,readOnly:E||!D,value:Dt,onChange:Ce=>{Ge(Ce.currentTarget.value),ge.openDropdown(),v&&ge.selectFirstOption()},onFocus:Ce=>{D&&ge.openDropdown(),f==null||f(Ce)},onBlur:Ce=>{var qe;D&&ge.closeDropdown(),Ge(_e!=null&&((qe=yt[_e])==null?void 0:qe.label)||""),d==null||d(Ce)},onClick:Ce=>{D?ge.openDropdown():ge.toggleDropdown(),h==null||h(Ce)},classNames:ht,styles:vt,unstyled:s,pointer:!D,error:j})}),_.jsx(Xwe,{data:ze,hidden:E||T,filter:S,search:Dt,limit:A,hiddenWhenEmpty:!D||!M,withScrollArea:C,maxDropdownHeight:k,filterOptions:D&&(ct==null?void 0:ct.label)!==Dt,value:_e,checkIconPosition:$,withCheckIcon:F,nothingFoundMessage:M,unstyled:s,labelId:Xe.label?`${it}-label`:void 0,"aria-label":Xe.label?void 0:Xe["aria-label"],renderOption:he,scrollAreaProps:be})]}),_.jsx(Qn.HiddenInput,{value:_e,name:B,form:U,disabled:T,...de})]})});Pk.classes={...Qc.classes,...Qn.classes};Pk.displayName="@mantine/core/Select";function hQe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var c;const i=ys(),s=t===void 0?e:t,o=Uy({"--sg-spacing-x":fs(Df(e)),"--sg-spacing-y":fs(Df(s)),"--sg-cols":(c=Df(n))==null?void 0:c.toString()}),a=Zr(i.breakpoints).reduce((f,d)=>(f[d]||(f[d]={}),typeof e=="object"&&e[d]!==void 0&&(f[d]["--sg-spacing-x"]=fs(e[d])),typeof s=="object"&&s[d]!==void 0&&(f[d]["--sg-spacing-y"]=fs(s[d])),typeof n=="object"&&n[d]!==void 0&&(f[d]["--sg-cols"]=n[d]),f),{}),l=W2(Zr(a),i).filter(f=>Zr(a[f.value]).length>0).map(f=>({query:`(min-width: ${i.breakpoints[f.value]})`,styles:a[f.value]}));return _.jsx(Hb,{styles:o,media:l,selector:r})}function N8(e){return typeof e=="object"&&e!==null?Zr(e):[]}function pQe(e){return e.sort((t,n)=>q2(t)-q2(n))}function mQe({spacing:e,verticalSpacing:t,cols:n}){const r=Array.from(new Set([...N8(e),...N8(t),...N8(n)]));return pQe(r)}function gQe({spacing:e,verticalSpacing:t,cols:n,selector:r}){var l;const i=t===void 0?e:t,s=Uy({"--sg-spacing-x":fs(Df(e)),"--sg-spacing-y":fs(Df(i)),"--sg-cols":(l=Df(n))==null?void 0:l.toString()}),o=mQe({spacing:e,verticalSpacing:t,cols:n}),a=o.reduce((c,f)=>(c[f]||(c[f]={}),typeof e=="object"&&e[f]!==void 0&&(c[f]["--sg-spacing-x"]=fs(e[f])),typeof i=="object"&&i[f]!==void 0&&(c[f]["--sg-spacing-y"]=fs(i[f])),typeof n=="object"&&n[f]!==void 0&&(c[f]["--sg-cols"]=n[f]),c),{}),u=o.map(c=>({query:`simple-grid (min-width: ${c})`,styles:a[c]}));return _.jsx(Hb,{styles:s,container:u,selector:r})}var CEe={container:"m_925c2d2c",root:"m_2415a157"};const yQe={cols:1,spacing:"md",type:"media"},fK=Me((e,t)=>{const n=xe("SimpleGrid",yQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,cols:l,verticalSpacing:c,spacing:f,type:d,...h}=n,p=dt({name:"SimpleGrid",classes:CEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u}),m=Sk();return d==="container"?_.jsxs(_.Fragment,{children:[_.jsx(gQe,{...n,selector:`.${m}`}),_.jsx("div",{...p("container"),children:_.jsx(me,{ref:t,...p("root",{className:m}),...h})})]}):_.jsxs(_.Fragment,{children:[_.jsx(hQe,{...n,selector:`.${m}`}),_.jsx(me,{ref:t,...p("root",{className:m}),...h})]})});fK.classes=CEe;fK.displayName="@mantine/core/SimpleGrid";const[IEe,$6]=yo("SliderProvider was not found in tree"),dK=I.forwardRef(({size:e,disabled:t,variant:n,color:r,thumbSize:i,radius:s,...o},a)=>{const{getStyles:u}=$6();return _.jsx(me,{tabIndex:-1,variant:n,size:e,ref:a,...u("root"),...o})});dK.displayName="@mantine/core/SliderRoot";const E$=I.forwardRef(({max:e,min:t,value:n,position:r,label:i,dragging:s,onMouseDown:o,onKeyDownCapture:a,labelTransitionProps:u,labelAlwaysOn:l,thumbLabel:c,onFocus:f,onBlur:d,showLabelOnHover:h,isHovered:p,children:m=null,disabled:g},y)=>{const{getStyles:v}=$6(),[b,w]=I.useState(!1),E=l||s||b||h&&p;return _.jsxs(me,{tabIndex:0,role:"slider","aria-label":c,"aria-valuemax":e,"aria-valuemin":t,"aria-valuenow":n,ref:y,__vars:{"--slider-thumb-offset":`${r}%`},...v("thumb",{focusable:!0}),mod:{dragging:s,disabled:g},onFocus:()=>{w(!0),typeof f=="function"&&f()},onBlur:()=>{w(!1),typeof d=="function"&&d()},onTouchStart:o,onMouseDown:o,onKeyDownCapture:a,onClick:T=>T.stopPropagation(),children:[m,_.jsx(eg,{mounted:i!=null&&!!E,transition:"fade",duration:0,...u,children:T=>_.jsx("div",{...v("label",{style:T}),children:i})})]})});E$.displayName="@mantine/core/SliderThumb";function x$({value:e,min:t,max:n}){const r=(e-t)/(n-t)*100;return Math.min(Math.max(r,0),100)}function vQe({mark:e,offset:t,value:n,inverted:r=!1}){return r?typeof t=="number"&&e.value<=t||e.value>=n:typeof t=="number"?e.value>=t&&e.value<=n:e.value<=n}function kEe({marks:e,min:t,max:n,disabled:r,value:i,offset:s,inverted:o}){const{getStyles:a}=$6();if(!e)return null;const u=e.map((l,c)=>I.createElement(me,{...a("markWrapper"),__vars:{"--mark-offset":`${x$({value:l.value,min:t,max:n})}%`},key:c},_.jsx(me,{...a("mark"),mod:{filled:vQe({mark:l,value:i,offset:s,inverted:o}),disabled:r}}),l.label&&_.jsx("div",{...a("markLabel"),children:l.label})));return _.jsx("div",{children:u})}kEe.displayName="@mantine/core/SliderMarks";function hK({filled:e,children:t,offset:n,disabled:r,marksOffset:i,inverted:s,containerProps:o,...a}){const{getStyles:u}=$6();return _.jsx(_.Fragment,{children:_.jsx(me,{...u("trackContainer"),mod:{disabled:r},...o,children:_.jsxs(me,{...u("track"),mod:{inverted:s,disabled:r},children:[_.jsx(me,{mod:{inverted:s,disabled:r},__vars:{"--slider-bar-width":`calc(${e}% + var(--slider-size))`,"--slider-bar-offset":`calc(${n}% - var(--slider-size))`},...u("bar")}),t,_.jsx(kEe,{...a,offset:i,disabled:r,inverted:s})]})})})}hK.displayName="@mantine/core/SliderTrack";function Y7({value:e,containerWidth:t,min:n,max:r,step:i,precision:s}){const a=(t?Math.min(Math.max(e,0),t)/t:e)*(r-n),u=(a!==0?Math.round(a/i)*i:0)+n,l=Math.max(u,n);return s!==void 0?Number(l.toFixed(s)):l}function gc(e,t){return parseFloat(e.toFixed(t))}function REe(e){if(!e)return 0;const t=e.toString().split(".");return t.length>1?t[1].length:0}var M6={root:"m_dd36362e",label:"m_c9357328",thumb:"m_c9a9a60a",trackContainer:"m_a8645c2",track:"m_c9ade57f",bar:"m_38aeed47",markWrapper:"m_b7b0423a",mark:"m_dd33bc19",markLabel:"m_68c77a5b"};const bQe={radius:"xl",min:0,max:100,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,thumbLabel:"",showLabelOnHover:!0,disabled:!1,scale:e=>e},_Qe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?Lr(n,e):void 0,"--slider-radius":i===void 0?void 0:Vr(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),L6=Me((e,t)=>{const n=xe("Slider",bQe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,step:f,precision:d,defaultValue:h,name:p,marks:m,label:g,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,thumbChildren:E,disabled:T,unstyled:S,scale:A,inverted:C,className:k,style:N,vars:D,hiddenInputProps:O,...$}=n,F=dt({name:"Slider",props:n,classes:M6,classNames:r,className:k,styles:i,style:N,vars:D,varsResolver:_Qe,unstyled:S}),{dir:M}=Yh(),[B,U]=I.useState(!1),[H,P]=As({value:typeof s=="number"?rh(s,l,c):s,defaultValue:typeof h=="number"?rh(h,l,c):h,finalValue:rh(0,l,c),onChange:o}),z=I.useRef(H),W=I.useRef(),j=I.useRef(),q=x$({value:H,min:l,max:c}),G=A(H),ne=typeof g=="function"?g(G):g,ce=d??REe(f),de=I.useCallback(({x:be})=>{if(!T){const Xe=Y7({value:be,min:l,max:c,step:f,precision:ce});P(Xe),z.current=Xe}},[T,l,c,f,ce,P]),{ref:he,active:ve}=w_e(de,{onScrubEnd:()=>a==null?void 0:a(z.current)},M),Ie=be=>{var Xe,ze,yt,it,_e,ke;if(!T)switch(be.key){case"ArrowUp":{be.preventDefault(),(Xe=j.current)==null||Xe.focus();const Ve=gc(Math.min(Math.max(H+f,l),c),ce);P(Ve),a==null||a(Ve);break}case"ArrowRight":{be.preventDefault(),(ze=j.current)==null||ze.focus();const Ve=gc(Math.min(Math.max(M==="rtl"?H-f:H+f,l),c),ce);P(Ve),a==null||a(Ve);break}case"ArrowDown":{be.preventDefault(),(yt=j.current)==null||yt.focus();const Ve=gc(Math.min(Math.max(H-f,l),c),ce);P(Ve),a==null||a(Ve);break}case"ArrowLeft":{be.preventDefault(),(it=j.current)==null||it.focus();const Ve=gc(Math.min(Math.max(M==="rtl"?H+f:H-f,l),c),ce);P(Ve),a==null||a(Ve);break}case"Home":{be.preventDefault(),(_e=j.current)==null||_e.focus(),P(l),a==null||a(l);break}case"End":{be.preventDefault(),(ke=j.current)==null||ke.focus(),P(c),a==null||a(c);break}}};return _.jsx(IEe,{value:{getStyles:F},children:_.jsxs(dK,{...$,ref:gs(t,W),onKeyDownCapture:Ie,onMouseDownCapture:()=>{var be;return(be=W.current)==null?void 0:be.focus()},size:u,disabled:T,children:[_.jsx(hK,{inverted:C,offset:0,filled:q,marks:m,min:l,max:c,value:G,disabled:T,containerProps:{ref:he,onMouseEnter:w?()=>U(!0):void 0,onMouseLeave:w?()=>U(!1):void 0},children:_.jsx(E$,{max:c,min:l,value:G,position:q,dragging:ve,label:ne,ref:j,labelTransitionProps:y,labelAlwaysOn:v,thumbLabel:b,showLabelOnHover:w,isHovered:B,disabled:T,children:E})}),_.jsx("input",{type:"hidden",name:p,value:G,...O})]})})});L6.classes=M6;L6.displayName="@mantine/core/Slider";function wQe(e){return"TouchEvent"in window&&e instanceof window.TouchEvent?e.touches[0].clientX:e.clientX}const EQe=(e,{size:t,color:n,thumbSize:r,radius:i})=>({root:{"--slider-size":tn(t,"slider-size"),"--slider-color":n?Lr(n,e):void 0,"--slider-radius":i===void 0?void 0:Vr(i),"--slider-thumb-size":r!==void 0?Te(r):"calc(var(--slider-size) * 2)"}}),xQe={min:0,max:100,minRange:10,step:1,marks:[],label:e=>e,labelTransitionProps:{transition:"fade",duration:0},labelAlwaysOn:!1,showLabelOnHover:!0,disabled:!1,scale:e=>e},S$=Me((e,t)=>{const n=xe("RangeSlider",xQe,e),{classNames:r,styles:i,value:s,onChange:o,onChangeEnd:a,size:u,min:l,max:c,minRange:f,maxRange:d,step:h,precision:p,defaultValue:m,name:g,marks:y,label:v,labelTransitionProps:b,labelAlwaysOn:w,thumbFromLabel:E,thumbToLabel:T,showLabelOnHover:S,thumbChildren:A,disabled:C,unstyled:k,scale:N,inverted:D,className:O,style:$,vars:F,hiddenInputProps:M,...B}=n,U=dt({name:"Slider",props:n,classes:M6,classNames:r,className:O,styles:i,style:$,vars:F,varsResolver:EQe,unstyled:k}),{dir:H}=Yh(),[P,z]=I.useState(-1),[W,j]=I.useState(!1),[q,G]=As({value:s,defaultValue:m,finalValue:[l,c],onChange:o}),ne=I.useRef(q),ce=I.useRef([]),de=I.useRef(void 0),he=[x$({value:q[0],min:l,max:c}),x$({value:q[1],min:l,max:c})],ve=p??REe(h),Ie=Ge=>{G(Ge),ne.current=Ge};I.useEffect(()=>{Array.isArray(s)&&(ne.current=s)},Array.isArray(s)?[s[0],s[1]]:[null,null]);const be=(Ge,ge,ht)=>{const vt=[...ne.current];vt[ge]=Ge,ge===0&&(Ge>vt[1]-(f-1e-9)&&(vt[1]=Math.min(Ge+f,c)),Ge>(c-(f-1e-9)||l)&&(vt[ge]=ne.current[ge]),vt[1]-Ge>d&&(vt[1]=Ge+d)),ge===1&&(Ge<vt[0]+f&&(vt[0]=Math.max(Ge-f,l)),Ge<vt[0]+f&&(vt[ge]=ne.current[ge]),Ge-vt[0]>d&&(vt[0]=Ge-d)),vt[0]=gc(vt[0],ve),vt[1]=gc(vt[1],ve),Ie(vt),ht&&(a==null||a(ne.current))},Xe=Ge=>{if(!C){const ge=Y7({value:Ge,min:l,max:c,step:h,precision:ve});be(ge,de.current,!1)}},{ref:ze,active:yt}=w_e(({x:Ge})=>Xe(Ge),{onScrubEnd:()=>a==null?void 0:a(ne.current)},H);function it(Ge){de.current=Ge}const _e=Ge=>{ze.current.focus();const ge=ze.current.getBoundingClientRect(),ht=wQe(Ge.nativeEvent),vt=Y7({value:ht-ge.left,max:c,min:l,step:h,containerWidth:ge.width}),pe=Math.abs(q[0]-vt)>Math.abs(q[1]-vt)?1:0,Ce=H==="ltr"?pe:pe===1?0:1;de.current=Ce},ke=()=>P!==1&&P!==0?(z(0),0):P,Ve=Ge=>{if(!C)switch(Ge.key){case"ArrowUp":{Ge.preventDefault();const ge=ke();ce.current[ge].focus(),be(gc(Math.min(Math.max(ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowRight":{Ge.preventDefault();const ge=ke();ce.current[ge].focus(),be(gc(Math.min(Math.max(H==="rtl"?ne.current[ge]-h:ne.current[ge]+h,l),c),ve),ge,!0);break}case"ArrowDown":{Ge.preventDefault();const ge=ke();ce.current[ge].focus(),be(gc(Math.min(Math.max(ne.current[ge]-h,l),c),ve),ge,!0);break}case"ArrowLeft":{Ge.preventDefault();const ge=ke();ce.current[ge].focus(),be(gc(Math.min(Math.max(H==="rtl"?ne.current[ge]+h:ne.current[ge]-h,l),c),ve),ge,!0);break}}},ct={max:c,min:l,size:u,labelTransitionProps:b,labelAlwaysOn:w,onBlur:()=>z(-1)},Dt=Array.isArray(A);return _.jsx(IEe,{value:{getStyles:U},children:_.jsxs(dK,{...B,size:u,ref:t,disabled:C,children:[_.jsxs(hK,{offset:he[0],marksOffset:q[0],filled:he[1]-he[0],marks:y,inverted:D,min:l,max:c,value:q[1],disabled:C,containerProps:{ref:ze,onMouseEnter:S?()=>j(!0):void 0,onMouseLeave:S?()=>j(!1):void 0,onTouchStartCapture:_e,onTouchEndCapture:()=>{de.current=-1},onMouseDownCapture:_e,onMouseUpCapture:()=>{de.current=-1},onKeyDownCapture:Ve},children:[_.jsx(E$,{...ct,value:N(q[0]),position:he[0],dragging:yt,label:typeof v=="function"?v(gc(N(q[0]),ve)):v,ref:Ge=>{ce.current[0]=Ge},thumbLabel:E,onMouseDown:()=>it(0),onFocus:()=>z(0),showLabelOnHover:S,isHovered:W,disabled:C,children:Dt?A[0]:A}),_.jsx(E$,{...ct,thumbLabel:T,value:N(q[1]),position:he[1],dragging:yt,label:typeof v=="function"?v(gc(N(q[1]),ve)):v,ref:Ge=>{ce.current[1]=Ge},onMouseDown:()=>it(1),onFocus:()=>z(1),showLabelOnHover:S,isHovered:W,disabled:C,children:Dt?A[1]:A})]}),_.jsx("input",{type:"hidden",name:`${g}_from`,value:q[0],...M}),_.jsx("input",{type:"hidden",name:`${g}_to`,value:q[1],...M})]})})});S$.classes=M6;S$.displayName="@mantine/core/RangeSlider";const SQe={},$l=Me((e,t)=>{const{w:n,h:r,miw:i,mih:s,...o}=xe("Space",SQe,e);return _.jsx(me,{ref:t,...o,w:n,miw:i??n,h:r,mih:s??r})});$l.displayName="@mantine/core/Space";var NEe={root:"m_559cce2d",content:"m_b912df4e",control:"m_b9131032"};const TQe={maxHeight:100,initialState:!1},AQe=(e,{transitionDuration:t})=>({root:{"--spoiler-transition-duration":t!==void 0?`${t}ms`:void 0}}),pK=Me((e,t)=>{const n=xe("Spoiler",TQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,initialState:l,maxHeight:c,hideLabel:f,showLabel:d,children:h,controlRef:p,transitionDuration:m,id:g,...y}=n,v=dt({name:"Spoiler",classes:NEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:AQe}),b=Ia(g),w=`${b}-region`,[E,T]=I.useState(l),{ref:S,height:A}=iVe(),C=E?f:d,k=C!==null&&c<A;return _.jsxs(me,{...v("root"),id:b,ref:t,"data-has-spoiler":k||void 0,...y,children:[k&&_.jsx(Yb,{component:"button",type:"button",ref:p,onClick:()=>T(N=>!N),"aria-expanded":E,"aria-controls":w,...v("control"),children:C}),_.jsx("div",{...v("content",{style:{maxHeight:E?A?Te(A):void 0:Te(c)}}),"data-reduce-motion":!0,role:"region",id:w,children:_.jsx("div",{ref:S,children:h})})]})});pK.classes=NEe;pK.displayName="@mantine/core/Spoiler";var PEe={root:"m_6d731127"};const CQe={gap:"md",align:"stretch",justify:"flex-start"},IQe=(e,{gap:t,align:n,justify:r})=>({root:{"--stack-gap":fs(t),"--stack-align":n,"--stack-justify":r}}),ih=Me((e,t)=>{const n=xe("Stack",CQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,align:l,justify:c,gap:f,variant:d,...h}=n,p=dt({name:"Stack",props:n,classes:PEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:IQe});return _.jsx(me,{ref:t,...p("root"),variant:d,...h})});ih.classes=PEe;ih.displayName="@mantine/core/Stack";const OEe=I.createContext(null),kQe=OEe.Provider,RQe=()=>I.useContext(OEe),NQe={},mK=Me((e,t)=>{const{value:n,defaultValue:r,onChange:i,size:s,wrapperProps:o,children:a,readOnly:u,...l}=xe("SwitchGroup",NQe,e),[c,f]=As({value:n,defaultValue:r,finalValue:[],onChange:i}),d=h=>{const p=h.currentTarget.value;!u&&f(c.includes(p)?c.filter(m=>m!==p):[...c,p])};return _.jsx(kQe,{value:{value:c,onChange:d,size:s},children:_.jsx(mi.Wrapper,{size:s,ref:t,...o,...l,labelElement:"div",__staticSelector:"SwitchGroup",children:_.jsx(LY,{role:"group",children:a})})})});mK.classes=mi.Wrapper.classes;mK.displayName="@mantine/core/SwitchGroup";var DEe={root:"m_5f93f3bb",input:"m_926b4011",track:"m_9307d992",thumb:"m_93039a1d",trackLabel:"m_8277e082"};const PQe={labelPosition:"right"},OQe=(e,{radius:t,color:n,size:r})=>({root:{"--switch-radius":t===void 0?void 0:Vr(t),"--switch-height":tn(r,"switch-height"),"--switch-width":tn(r,"switch-width"),"--switch-thumb-size":tn(r,"switch-thumb-size"),"--switch-label-font-size":tn(r,"switch-label-font-size"),"--switch-track-label-padding":tn(r,"switch-track-label-padding"),"--switch-color":n?Lr(n,e):void 0}}),fE=Me((e,t)=>{const n=xe("Switch",PQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,color:l,label:c,offLabel:f,onLabel:d,id:h,size:p,radius:m,wrapperProps:g,children:y,thumbIcon:v,checked:b,defaultChecked:w,onChange:E,labelPosition:T,description:S,error:A,disabled:C,variant:k,rootRef:N,mod:D,...O}=n,$=RQe(),F=p||($==null?void 0:$.size),M=dt({name:"Switch",props:n,classes:DEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:OQe}),{styleProps:B,rest:U}=qb(O),H=Ia(h),P=$?{checked:$.value.includes(U.value),onChange:$.onChange}:{},[z,W]=As({value:P.checked??b,defaultValue:w,finalValue:!1});return _.jsxs(d6,{...M("root"),__staticSelector:"Switch",__stylesApiProps:n,id:H,size:F,labelPosition:T,label:c,description:S,error:A,disabled:C,bodyElement:"label",labelElement:"span",classNames:r,styles:o,unstyled:a,"data-checked":P.checked||void 0,variant:k,ref:N,mod:D,...B,...g,children:[_.jsx("input",{...U,disabled:C,checked:z,onChange:j=>{var q;$?(q=P.onChange)==null||q.call(P,j):E==null||E(j),W(j.currentTarget.checked)},id:H,ref:t,type:"checkbox",role:"switch",...M("input")}),_.jsxs(me,{"aria-hidden":"true",mod:{error:A,"label-position":T},...M("track"),children:[_.jsx(me,{component:"span",mod:"reduce-motion",...M("thumb"),children:v}),_.jsx("span",{...M("trackLabel"),children:z?d:f})]})]})});fE.classes={...DEe,...jwe};fE.displayName="@mantine/core/Switch";fE.Group=mK;const[DQe,$Qe]=yo("Table component was not found in the tree");var Ok={table:"m_b23fa0ef",th:"m_4e7aa4f3",tr:"m_4e7aa4fd",td:"m_4e7aa4ef",tbody:"m_b2404537",thead:"m_b242d975",caption:"m_9e5a3ac7",scrollContainer:"m_a100c15",scrollContainerInner:"m_62259741"};function MQe(e,t){if(!t)return;const n={};return t.columnBorder&&e.withColumnBorders&&(n["data-with-column-border"]=!0),t.rowBorder&&e.withRowBorders&&(n["data-with-row-border"]=!0),t.striped&&e.striped&&(n["data-striped"]=e.striped),t.highlightOnHover&&e.highlightOnHover&&(n["data-hover"]=!0),t.captionSide&&e.captionSide&&(n["data-side"]=e.captionSide),t.stickyHeader&&e.stickyHeader&&(n["data-sticky"]=!0),n}function Xb(e,t){const n=`Table${e.charAt(0).toUpperCase()}${e.slice(1)}`,r=Me((i,s)=>{const o=xe(n,{},i),{classNames:a,className:u,style:l,styles:c,...f}=o,d=$Qe();return _.jsx(me,{component:e,ref:s,...MQe(d,t),...d.getStyles(e,{className:u,classNames:a,style:l,styles:c,props:o}),...f})});return r.displayName=`@mantine/core/${n}`,r.classes=Ok,r}const K7=Xb("th",{columnBorder:!0}),$Ee=Xb("td",{columnBorder:!0}),OO=Xb("tr",{rowBorder:!0,striped:!0,highlightOnHover:!0}),MEe=Xb("thead",{stickyHeader:!0}),LEe=Xb("tbody"),FEe=Xb("tfoot"),jEe=Xb("caption",{captionSide:!0});function gK({data:e}){return _.jsxs(_.Fragment,{children:[e.caption&&_.jsx(jEe,{children:e.caption}),e.head&&_.jsx(MEe,{children:_.jsx(OO,{children:e.head.map((t,n)=>_.jsx(K7,{children:t},n))})}),e.body&&_.jsx(LEe,{children:e.body.map((t,n)=>_.jsx(OO,{children:t.map((r,i)=>_.jsx($Ee,{children:r},i))},n))}),e.foot&&_.jsx(FEe,{children:_.jsx(OO,{children:e.foot.map((t,n)=>_.jsx(K7,{children:t},n))})})]})}gK.displayName="@mantine/core/TableDataRenderer";const LQe={type:"scrollarea"},FQe=(e,{minWidth:t,type:n})=>({scrollContainer:{"--table-min-width":Te(t),"--table-overflow":n==="native"?"auto":void 0}}),yK=Me((e,t)=>{const n=xe("TableScrollContainer",LQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,children:l,minWidth:c,type:f,...d}=n,h=dt({name:"TableScrollContainer",classes:Ok,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:FQe,rootSelector:"scrollContainer"});return _.jsx(me,{component:f==="scrollarea"?Sm:"div",...f==="scrollarea"?{offsetScrollbars:"x"}:{},ref:t,...h("scrollContainer"),...d,children:_.jsx("div",{...h("scrollContainerInner"),children:l})})});yK.classes=Ok;yK.displayName="@mantine/core/TableScrollContainer";const jQe={withRowBorders:!0,verticalSpacing:7},BQe=(e,{layout:t,captionSide:n,horizontalSpacing:r,verticalSpacing:i,borderColor:s,stripedColor:o,highlightOnHoverColor:a,striped:u,highlightOnHover:l,stickyHeaderOffset:c,stickyHeader:f})=>({table:{"--table-layout":t,"--table-caption-side":n,"--table-horizontal-spacing":fs(r),"--table-vertical-spacing":fs(i),"--table-border-color":s?Lr(s,e):void 0,"--table-striped-color":u&&o?Lr(o,e):void 0,"--table-highlight-on-hover-color":l&&a?Lr(a,e):void 0,"--table-sticky-header-offset":f?Te(c):void 0}}),qt=Me((e,t)=>{const n=xe("Table",jQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,horizontalSpacing:l,verticalSpacing:c,captionSide:f,stripedColor:d,highlightOnHoverColor:h,striped:p,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,withTableBorder:v,borderColor:b,layout:w,variant:E,data:T,children:S,stickyHeader:A,stickyHeaderOffset:C,mod:k,...N}=n,D=dt({name:"Table",props:n,className:i,style:s,classes:Ok,classNames:r,styles:o,unstyled:a,rootSelector:"table",vars:u,varsResolver:BQe});return _.jsx(DQe,{value:{getStyles:D,stickyHeader:A,striped:p===!0?"odd":p||void 0,highlightOnHover:m,withColumnBorders:g,withRowBorders:y,captionSide:f||"bottom"},children:_.jsx(me,{component:"table",variant:E,ref:t,mod:[{"data-with-table-border":v},k],...D("table"),...N,children:S||!!T&&_.jsx(gK,{data:T})})})});qt.classes=Ok;qt.displayName="@mantine/core/Table";qt.Td=$Ee;qt.Th=K7;qt.Tr=OO;qt.Thead=MEe;qt.Tbody=LEe;qt.Tfoot=FEe;qt.Caption=jEe;qt.ScrollContainer=yK;qt.DataRenderer=gK;const[UQe,vK]=yo("Tabs component was not found in the tree");var Dk={root:"m_89d60db1","list--default":"m_576c9d4",list:"m_89d33d6d",panel:"m_b0c91715",tab:"m_4ec4dce6",tabSection:"m_fc420b1f","tab--default":"m_539e827b","list--outline":"m_6772fbd5","tab--outline":"m_b59ab47c","tab--pills":"m_c3381914"};const zQe={},bK=Me((e,t)=>{const n=xe("TabsList",zQe,e),{children:r,className:i,grow:s,justify:o,classNames:a,styles:u,style:l,mod:c,...f}=n,d=vK();return _.jsx(me,{...f,...d.getStyles("list",{className:i,style:l,classNames:a,styles:u,props:n,variant:d.variant}),ref:t,role:"tablist",variant:d.variant,mod:[{grow:s,orientation:d.orientation,placement:d.orientation==="vertical"&&d.placement,inverted:d.inverted},c],"aria-orientation":d.orientation,__vars:{"--tabs-justify":o},children:r})});bK.classes=Dk;bK.displayName="@mantine/core/TabsList";const VQe={},_K=Me((e,t)=>{const n=xe("TabsPanel",VQe,e),{children:r,className:i,value:s,classNames:o,styles:a,style:u,mod:l,...c}=n,f=vK(),d=f.value===s,h=f.keepMounted||n.keepMounted||d?r:null;return _.jsx(me,{...c,...f.getStyles("panel",{className:i,classNames:o,styles:a,style:[u,d?void 0:{display:"none"}],props:n}),ref:t,mod:[{orientation:f.orientation},l],role:"tabpanel",id:f.getPanelId(s),"aria-labelledby":f.getTabId(s),children:h})});_K.classes=Dk;_K.displayName="@mantine/core/TabsPanel";const HQe={},wK=Me((e,t)=>{const n=xe("TabsTab",HQe,e),{className:r,children:i,rightSection:s,leftSection:o,value:a,onClick:u,onKeyDown:l,disabled:c,color:f,style:d,classNames:h,styles:p,vars:m,mod:g,...y}=n,v=ys(),{dir:b}=Yh(),w=vK(),E=a===w.value,T=A=>{w.onChange(w.allowTabDeactivation&&a===w.value?null:a),u==null||u(A)},S={classNames:h,styles:p,props:n};return _.jsxs(Ts,{...y,...w.getStyles("tab",{className:r,style:d,variant:w.variant,...S}),disabled:c,unstyled:w.unstyled,variant:w.variant,mod:[{active:E,disabled:c,orientation:w.orientation,inverted:w.inverted,placement:w.orientation==="vertical"&&w.placement},g],ref:t,role:"tab",id:w.getTabId(a),"aria-selected":E,tabIndex:E||w.value===null?0:-1,"aria-controls":w.getPanelId(a),onClick:T,__vars:{"--tabs-color":f?Lr(f,v):void 0},onKeyDown:kG({siblingSelector:'[role="tab"]',parentSelector:'[role="tablist"]',activateOnFocus:w.activateTabWithKeyboard,loop:w.loop,orientation:w.orientation||"horizontal",dir:b,onKeyDown:l}),children:[o&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"left",children:o}),i&&_.jsx("span",{...w.getStyles("tabLabel",S),children:i}),s&&_.jsx("span",{...w.getStyles("tabSection",S),"data-position":"right",children:s})]})});wK.classes=Dk;wK.displayName="@mantine/core/TabsTab";const iue="Tabs.Tab or Tabs.Panel component was rendered with invalid value or without value",qQe={keepMounted:!0,orientation:"horizontal",loop:!0,activateTabWithKeyboard:!0,allowTabDeactivation:!1,unstyled:!1,inverted:!1,variant:"default",placement:"left"},WQe=(e,{radius:t,color:n,autoContrast:r})=>({root:{"--tabs-radius":Vr(t),"--tabs-color":Lr(n,e),"--tabs-text-color":fS(r,e)?Hy({color:n,theme:e,autoContrast:r}):void 0}}),os=Me((e,t)=>{const n=xe("Tabs",qQe,e),{defaultValue:r,value:i,onChange:s,orientation:o,children:a,loop:u,id:l,activateTabWithKeyboard:c,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,placement:g,keepMounted:y,classNames:v,styles:b,unstyled:w,className:E,style:T,vars:S,autoContrast:A,mod:C,...k}=n,N=Ia(l),[D,O]=As({value:i,defaultValue:r,finalValue:null,onChange:s}),$=dt({name:"Tabs",props:n,classes:Dk,className:E,style:T,classNames:v,styles:b,unstyled:w,vars:S,varsResolver:WQe});return _.jsx(UQe,{value:{placement:g,value:D,orientation:o,id:N,loop:u,activateTabWithKeyboard:c,getTabId:p$(`${N}-tab`,iue),getPanelId:p$(`${N}-panel`,iue),onChange:O,allowTabDeactivation:f,variant:d,color:h,radius:p,inverted:m,keepMounted:y,unstyled:w,getStyles:$},children:_.jsx(me,{ref:t,id:N,variant:d,mod:[{orientation:o,inverted:o==="horizontal"&&m,placement:o==="vertical"&&g},C],...$("root"),...k,children:a})})});os.classes=Dk;os.displayName="@mantine/core/Tabs";os.Tab=wK;os.Panel=_K;os.List=bK;const GQe={},a0=Me((e,t)=>{const n=xe("TextInput",GQe,e);return _.jsx(Qc,{component:"input",ref:t,...n,__staticSelector:"TextInput"})});a0.classes=Qc.classes;a0.displayName="@mantine/core/TextInput";const YQe=["h1","h2","h3","h4","h5","h6"];function KQe(e,t){const n=t!==void 0?t:`h${e}`;return YQe.includes(n)?{fontSize:`var(--mantine-${n}-font-size)`,fontWeight:`var(--mantine-${n}-font-weight)`,lineHeight:`var(--mantine-${n}-line-height)`}:{fontSize:Te(n),fontWeight:`var(--mantine-h${e}-font-weight)`,lineHeight:`var(--mantine-h${e}-line-height)`}}var BEe={root:"m_8a5d1357"};const XQe={order:1},QQe=(e,{order:t,size:n,lineClamp:r,textWrap:i})=>{const s=KQe(t,n);return{root:{"--title-fw":s.fontWeight,"--title-lh":s.lineHeight,"--title-fz":s.fontSize,"--title-line-clamp":typeof r=="number"?r.toString():void 0,"--title-text-wrap":i}}},Ii=Me((e,t)=>{const n=xe("Title",XQe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,order:u,vars:l,size:c,variant:f,lineClamp:d,textWrap:h,mod:p,...m}=n,g=dt({name:"Title",props:n,classes:BEe,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:l,varsResolver:QQe});return[1,2,3,4,5,6].includes(u)?_.jsx(me,{...g("root"),component:`h${u}`,variant:f,ref:t,mod:[{order:u,"data-line-clamp":typeof d=="number"},p],size:c,...m}):null});Ii.classes=BEe;Ii.displayName="@mantine/core/Title";function JQe(e){let t=e,n=!1;const r=new Set;return{getState(){return t},updateState(i){t=typeof i=="function"?i(t):i},setState(i){this.updateState(i),r.forEach(s=>s(t))},initialize(i){n||(t=i,n=!0)},subscribe(i){return r.add(i),()=>r.delete(i)}}}function ZQe(e){return I.useSyncExternalStore(e.subscribe,()=>e.getState(),()=>e.getState())}function eJe(e,t,n){const r=[],i=[],s={};for(const o of e){const a=o.position||t;s[a]=s[a]||0,s[a]+=1,s[a]<=n?i.push(o):r.push(o)}return{notifications:i,queue:r}}const tJe=()=>JQe({notifications:[],queue:[],defaultPosition:"bottom-right",limit:5}),Qb=tJe(),nJe=(e=Qb)=>ZQe(e);function xS(e,t){const n=e.getState(),r=t([...n.notifications,...n.queue]),i=eJe(r,n.defaultPosition,n.limit);e.setState({notifications:i.notifications,queue:i.queue,limit:n.limit,defaultPosition:n.defaultPosition})}function rJe(e,t=Qb){const n=e.id||uE();return xS(t,r=>e.id&&r.some(i=>i.id===e.id)?r:[...r,{...e,id:n}]),n}function UEe(e,t=Qb){return xS(t,n=>n.filter(r=>{var i;return r.id===e?((i=r.onClose)==null||i.call(r,r),!1):!0})),e}function iJe(e,t=Qb){return xS(t,n=>n.map(r=>r.id===e.id?{...r,...e}:r)),e.id}function sJe(e=Qb){xS(e,()=>[])}function oJe(e=Qb){xS(e,t=>t.slice(0,e.getState().limit))}const Jb={show:rJe,hide:UEe,update:iJe,clean:sJe,cleanQueue:oJe,updateState:xS};function X7(){return X7=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},X7.apply(null,arguments)}function zEe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}function Q7(e,t){return Q7=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},Q7(e,t)}function VEe(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,Q7(e,t)}var HEe={exports:{}},aJe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",uJe=aJe,lJe=uJe;function qEe(){}function WEe(){}WEe.resetWarningCache=qEe;var cJe=function(){function e(r,i,s,o,a,u){if(u!==lJe){var l=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw l.name="Invariant Violation",l}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:WEe,resetWarningCache:qEe};return n.PropTypes=n,n};HEe.exports=cJe();var fJe=HEe.exports;const sue=ec(fJe),oue={disabled:!1},T$=wr.createContext(null);var dJe=function(t){return t.scrollTop},LA="unmounted",Bv="exited",Uv="entering",fw="entered",J7="exiting",sg=function(e){VEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=i,a=o&&!o.isMounting?r.enter:r.appear,u;return s.appearStatus=null,r.in?a?(u=Bv,s.appearStatus=Uv):u=fw:r.unmountOnExit||r.mountOnEnter?u=LA:u=Bv,s.state={status:u},s.nextCallback=null,s}t.getDerivedStateFromProps=function(i,s){var o=i.in;return o&&s.status===LA?{status:Bv}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(i){var s=null;if(i!==this.props){var o=this.state.status;this.props.in?o!==Uv&&o!==fw&&(s=Uv):(o===Uv||o===fw)&&(s=J7)}this.updateStatus(!1,s)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var i=this.props.timeout,s,o,a;return s=o=a=i,i!=null&&typeof i!="number"&&(s=i.exit,o=i.enter,a=i.appear!==void 0?i.appear:o),{exit:s,enter:o,appear:a}},n.updateStatus=function(i,s){if(i===void 0&&(i=!1),s!==null)if(this.cancelNextCallback(),s===Uv){if(this.props.unmountOnExit||this.props.mountOnEnter){var o=this.props.nodeRef?this.props.nodeRef.current:MA.findDOMNode(this);o&&dJe(o)}this.performEnter(i)}else this.performExit();else this.props.unmountOnExit&&this.state.status===Bv&&this.setState({status:LA})},n.performEnter=function(i){var s=this,o=this.props.enter,a=this.context?this.context.isMounting:i,u=this.props.nodeRef?[a]:[MA.findDOMNode(this),a],l=u[0],c=u[1],f=this.getTimeouts(),d=a?f.appear:f.enter;if(!i&&!o||oue.disabled){this.safeSetState({status:fw},function(){s.props.onEntered(l)});return}this.props.onEnter(l,c),this.safeSetState({status:Uv},function(){s.props.onEntering(l,c),s.onTransitionEnd(d,function(){s.safeSetState({status:fw},function(){s.props.onEntered(l,c)})})})},n.performExit=function(){var i=this,s=this.props.exit,o=this.getTimeouts(),a=this.props.nodeRef?void 0:MA.findDOMNode(this);if(!s||oue.disabled){this.safeSetState({status:Bv},function(){i.props.onExited(a)});return}this.props.onExit(a),this.safeSetState({status:J7},function(){i.props.onExiting(a),i.onTransitionEnd(o.exit,function(){i.safeSetState({status:Bv},function(){i.props.onExited(a)})})})},n.cancelNextCallback=function(){this.nextCallback!==null&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(i,s){s=this.setNextCallback(s),this.setState(i,s)},n.setNextCallback=function(i){var s=this,o=!0;return this.nextCallback=function(a){o&&(o=!1,s.nextCallback=null,i(a))},this.nextCallback.cancel=function(){o=!1},this.nextCallback},n.onTransitionEnd=function(i,s){this.setNextCallback(s);var o=this.props.nodeRef?this.props.nodeRef.current:MA.findDOMNode(this),a=i==null&&!this.props.addEndListener;if(!o||a){setTimeout(this.nextCallback,0);return}if(this.props.addEndListener){var u=this.props.nodeRef?[this.nextCallback]:[o,this.nextCallback],l=u[0],c=u[1];this.props.addEndListener(l,c)}i!=null&&setTimeout(this.nextCallback,i)},n.render=function(){var i=this.state.status;if(i===LA)return null;var s=this.props,o=s.children;s.in,s.mountOnEnter,s.unmountOnExit,s.appear,s.enter,s.exit,s.timeout,s.addEndListener,s.onEnter,s.onEntering,s.onEntered,s.onExit,s.onExiting,s.onExited,s.nodeRef;var a=zEe(s,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]);return wr.createElement(T$.Provider,{value:null},typeof o=="function"?o(i,a):wr.cloneElement(wr.Children.only(o),a))},t}(wr.Component);sg.contextType=T$;sg.propTypes={};function U_(){}sg.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:U_,onEntering:U_,onEntered:U_,onExit:U_,onExiting:U_,onExited:U_};sg.UNMOUNTED=LA;sg.EXITED=Bv;sg.ENTERING=Uv;sg.ENTERED=fw;sg.EXITING=J7;function hJe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function EK(e,t){var n=function(s){return t&&I.isValidElement(s)?t(s):s},r=Object.create(null);return e&&I.Children.map(e,function(i){return i}).forEach(function(i){r[i.key]=n(i)}),r}function pJe(e,t){e=e||{},t=t||{};function n(c){return c in t?t[c]:e[c]}var r=Object.create(null),i=[];for(var s in e)s in t?i.length&&(r[s]=i,i=[]):i.push(s);var o,a={};for(var u in t){if(r[u])for(o=0;o<r[u].length;o++){var l=r[u][o];a[r[u][o]]=n(l)}a[u]=n(u)}for(o=0;o<i.length;o++)a[i[o]]=n(i[o]);return a}function b1(e,t,n){return n[t]!=null?n[t]:e.props[t]}function mJe(e,t){return EK(e.children,function(n){return I.cloneElement(n,{onExited:t.bind(null,n),in:!0,appear:b1(n,"appear",e),enter:b1(n,"enter",e),exit:b1(n,"exit",e)})})}function gJe(e,t,n){var r=EK(e.children),i=pJe(t,r);return Object.keys(i).forEach(function(s){var o=i[s];if(I.isValidElement(o)){var a=s in t,u=s in r,l=t[s],c=I.isValidElement(l)&&!l.props.in;u&&(!a||c)?i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:!0,exit:b1(o,"exit",e),enter:b1(o,"enter",e)}):!u&&a&&!c?i[s]=I.cloneElement(o,{in:!1}):u&&a&&I.isValidElement(l)&&(i[s]=I.cloneElement(o,{onExited:n.bind(null,o),in:l.props.in,exit:b1(o,"exit",e),enter:b1(o,"enter",e)}))}}),i}var yJe=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},vJe={component:"div",childFactory:function(t){return t}},Ug=function(e){VEe(t,e);function t(r,i){var s;s=e.call(this,r,i)||this;var o=s.handleExited.bind(hJe(s));return s.state={contextValue:{isMounting:!0},handleExited:o,firstRender:!0},s}var n=t.prototype;return n.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},n.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(i,s){var o=s.children,a=s.handleExited,u=s.firstRender;return{children:u?mJe(i,a):gJe(i,o,a),firstRender:!1}},n.handleExited=function(i,s){var o=EK(this.props.children);i.key in o||(i.props.onExited&&i.props.onExited(s),this.mounted&&this.setState(function(a){var u=X7({},a.children);return delete u[i.key],{children:u}}))},n.render=function(){var i=this.props,s=i.component,o=i.childFactory,a=zEe(i,["component","childFactory"]),u=this.state.contextValue,l=yJe(this.state.children).map(o);return delete a.appear,delete a.enter,delete a.exit,s===null?wr.createElement(T$.Provider,{value:u},l):wr.createElement(T$.Provider,{value:u},wr.createElement(s,a,l))},t}(wr.Component);Ug.propTypes={};Ug.defaultProps=vJe;const GEe=["bottom-center","bottom-left","bottom-right","top-center","top-left","top-right"];function bJe(e,t){return e.reduce((n,r)=>(n[r.position||t].push(r),n),GEe.reduce((n,r)=>(n[r]=[],n),{}))}const aue={left:"translateX(-100%)",right:"translateX(100%)","top-center":"translateY(-100%)","bottom-center":"translateY(100%)"},_Je={left:"translateX(0)",right:"translateX(0)","top-center":"translateY(0)","bottom-center":"translateY(0)"};function wJe({state:e,maxHeight:t,position:n,transitionDuration:r}){const[i,s]=n.split("-"),o=s==="center"?`${i}-center`:s,a={opacity:0,maxHeight:t,transform:aue[o],transitionDuration:`${r}ms, ${r}ms, ${r}ms`,transitionTimingFunction:"cubic-bezier(.51,.3,0,1.21), cubic-bezier(.51,.3,0,1.21), linear",transitionProperty:"opacity, transform, max-height"},u={opacity:1,transform:_Je[o]},l={opacity:0,maxHeight:0,transform:aue[o]};return{...a,...{entering:u,entered:u,exiting:l,exited:l}[e]}}function EJe(e,t){return typeof t=="number"?t:t===!1||e===!1?!1:e}const YEe=I.forwardRef(({data:e,onHide:t,autoClose:n,...r},i)=>{const{autoClose:s,message:o,...a}=e,u=EJe(n,e.autoClose),l=I.useRef(),c=()=>window.clearTimeout(l.current),f=()=>{t(e.id),c()},d=()=>{typeof u=="number"&&(l.current=window.setTimeout(f,u))};return I.useEffect(()=>{var h;(h=e.onOpen)==null||h.call(e,e)},[]),I.useEffect(()=>(d(),c),[u]),_.jsx(nK,{...r,...a,onClose:f,ref:i,onMouseEnter:c,onMouseLeave:d,children:o})});YEe.displayName="@mantine/notifications/NotificationContainer";var KEe={root:"m_b37d9ac7",notification:"m_5ed0edd0"};const xJe=sg,SJe={position:"bottom-right",autoClose:4e3,transitionDuration:250,containerWidth:440,notificationMaxHeight:200,limit:5,zIndex:rc("overlay"),store:Qb,withinPortal:!0},TJe=(e,{zIndex:t,containerWidth:n})=>({root:{"--notifications-z-index":t==null?void 0:t.toString(),"--notifications-container-width":Te(n)}}),og=Me((e,t)=>{const n=xe("Notifications",SJe,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,position:l,autoClose:c,transitionDuration:f,containerWidth:d,notificationMaxHeight:h,limit:p,zIndex:m,store:g,portalProps:y,withinPortal:v,...b}=n,w=ys(),E=nJe(g),T=eVe(),S=t6(),A=I.useRef({}),C=I.useRef(0),N=(w.respectReducedMotion?S:!1)?1:f,D=dt({name:"Notifications",classes:KEe,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:TJe});I.useEffect(()=>{g==null||g.updateState(F=>({...F,limit:p||5,defaultPosition:l}))},[p,l]),kh(()=>{E.notifications.length>C.current&&setTimeout(()=>T(),0),C.current=E.notifications.length},[E.notifications]);const O=bJe(E.notifications,l),$=GEe.reduce((F,M)=>(F[M]=O[M].map(({style:B,...U})=>_.jsx(xJe,{timeout:N,onEnter:()=>A.current[U.id].offsetHeight,nodeRef:{current:A.current[U.id]},children:H=>_.jsx(YEe,{ref:P=>{A.current[U.id]=P},data:U,onHide:P=>UEe(P,g),autoClose:c,...D("notification",{style:{...wJe({state:H,position:M,transitionDuration:N,maxHeight:h}),...B}})})},U.id)),F),{});return _.jsxs(mS,{withinPortal:v,...y,children:[_.jsx(me,{...D("root"),"data-position":"top-center",ref:t,...b,children:_.jsx(Ug,{children:$["top-center"]})}),_.jsx(me,{...D("root"),"data-position":"top-left",...b,children:_.jsx(Ug,{children:$["top-left"]})}),_.jsx(me,{...D("root"),"data-position":"top-right",...b,children:_.jsx(Ug,{children:$["top-right"]})}),_.jsx(me,{...D("root"),"data-position":"bottom-right",...b,children:_.jsx(Ug,{children:$["bottom-right"]})}),_.jsx(me,{...D("root"),"data-position":"bottom-left",...b,children:_.jsx(Ug,{children:$["bottom-left"]})}),_.jsx(me,{...D("root"),"data-position":"bottom-center",...b,children:_.jsx(Ug,{children:$["bottom-center"]})})]})});og.classes=KEe;og.displayName="@mantine/notifications/Notifications";og.show=Jb.show;og.hide=Jb.hide;og.update=Jb.update;og.clean=Jb.clean;og.cleanQueue=Jb.cleanQueue;og.updateState=Jb.updateState;const XEe=I.createContext({storageEngine:void 0,setStorageEngine:()=>{}}),ks=()=>I.useContext(XEe);function AJe({children:e}){const[t,n]=wr.useState(void 0),r=wr.useMemo(()=>({storageEngine:t,setStorageEngine:n}),[t]);return _.jsx(XEe.Provider,{value:r,children:e})}/**
 * @remix-run/router v1.16.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Z2(){return Z2=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Z2.apply(this,arguments)}var u0;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(u0||(u0={}));const uue="popstate";function CJe(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:a}=r.location;return Z7("",{pathname:s,search:o,hash:a},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:JEe(i)}return kJe(t,n,null,e)}function ds(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function QEe(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function IJe(){return Math.random().toString(36).substr(2,8)}function lue(e,t){return{usr:e.state,key:e.key,idx:t}}function Z7(e,t,n,r){return n===void 0&&(n=null),Z2({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?SS(t):t,{state:n,key:t&&t.key||r||IJe()})}function JEe(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function SS(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function kJe(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,a=u0.Pop,u=null,l=c();l==null&&(l=0,o.replaceState(Z2({},o.state,{idx:l}),""));function c(){return(o.state||{idx:null}).idx}function f(){a=u0.Pop;let g=c(),y=g==null?null:g-l;l=g,u&&u({action:a,location:m.location,delta:y})}function d(g,y){a=u0.Push;let v=Z7(m.location,g,y);l=c()+1;let b=lue(v,l),w=m.createHref(v);try{o.pushState(b,"",w)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;i.location.assign(w)}s&&u&&u({action:a,location:m.location,delta:1})}function h(g,y){a=u0.Replace;let v=Z7(m.location,g,y);l=c();let b=lue(v,l),w=m.createHref(v);o.replaceState(b,"",w),s&&u&&u({action:a,location:m.location,delta:0})}function p(g){let y=i.location.origin!=="null"?i.location.origin:i.location.href,v=typeof g=="string"?g:JEe(g);return v=v.replace(/ $/,"%20"),ds(y,"No window.location.(origin|href) available to create URL for href: "+v),new URL(v,y)}let m={get action(){return a},get location(){return e(i,o)},listen(g){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(uue,f),u=g,()=>{i.removeEventListener(uue,f),u=null}},createHref(g){return t(i,g)},createURL:p,encodeLocation(g){let y=p(g);return{pathname:y.pathname,search:y.search,hash:y.hash}},push:d,replace:h,go(g){return o.go(g)}};return m}var cue;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(cue||(cue={}));function RJe(e,t,n){n===void 0&&(n="/");let r=typeof t=="string"?SS(t):t,i=txe(r.pathname||"/",n);if(i==null)return null;let s=ZEe(e);NJe(s);let o=null;for(let a=0;o==null&&a<s.length;++a){let u=VJe(i);o=BJe(s[a],u)}return o}function ZEe(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,a)=>{let u={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(ds(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let l=R0([r,u.relativePath]),c=n.concat(u);s.children&&s.children.length>0&&(ds(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+l+'".')),ZEe(s.children,t,c,l)),!(s.path==null&&!s.index)&&t.push({path:l,score:FJe(l,s.index),routesMeta:c})};return e.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))i(s,o);else for(let u of exe(s.path))i(s,o,u)}),t}function exe(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=exe(r.join("/")),a=[];return a.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&a.push(...o),a.map(u=>e.startsWith("/")&&u===""?"/":u)}function NJe(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:jJe(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const PJe=/^:[\w-]+$/,OJe=3,DJe=2,$Je=1,MJe=10,LJe=-2,fue=e=>e==="*";function FJe(e,t){let n=e.split("/"),r=n.length;return n.some(fue)&&(r+=LJe),t&&(r+=DJe),n.filter(i=>!fue(i)).reduce((i,s)=>i+(PJe.test(s)?OJe:s===""?$Je:MJe),r)}function jJe(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function BJe(e,t){let{routesMeta:n}=e,r={},i="/",s=[];for(let o=0;o<n.length;++o){let a=n[o],u=o===n.length-1,l=i==="/"?t:t.slice(i.length)||"/",c=UJe({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},l);if(!c)return null;Object.assign(r,c.params);let f=a.route;s.push({params:r,pathname:R0([i,c.pathname]),pathnameBase:GJe(R0([i,c.pathnameBase])),route:f}),c.pathnameBase!=="/"&&(i=R0([i,c.pathnameBase]))}return s}function UJe(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=zJe(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),a=i.slice(1);return{params:r.reduce((l,c,f)=>{let{paramName:d,isOptional:h}=c;if(d==="*"){let m=a[f]||"";o=s.slice(0,s.length-m.length).replace(/(.)\/+$/,"$1")}const p=a[f];return h&&!p?l[d]=void 0:l[d]=(p||"").replace(/%2F/g,"/"),l},{}),pathname:s,pathnameBase:o,pattern:e}}function zJe(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),QEe(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,u)=>(r.push({paramName:a,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function VJe(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return QEe(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function txe(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function HJe(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?SS(e):e;return{pathname:n?n.startsWith("/")?n:qJe(n,t):t,search:YJe(r),hash:KJe(i)}}function qJe(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function P8(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WJe(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function xK(e,t){let n=WJe(e);return t?n.map((r,i)=>i===e.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function SK(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=SS(e):(i=Z2({},e),ds(!i.pathname||!i.pathname.includes("?"),P8("?","pathname","search",i)),ds(!i.pathname||!i.pathname.includes("#"),P8("#","pathname","hash",i)),ds(!i.search||!i.search.includes("#"),P8("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,a;if(o==null)a=n;else{let f=t.length-1;if(!r&&o.startsWith("..")){let d=o.split("/");for(;d[0]==="..";)d.shift(),f-=1;i.pathname=d.join("/")}a=f>=0?t[f]:"/"}let u=HJe(i,a),l=o&&o!=="/"&&o.endsWith("/"),c=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(l||c)&&(u.pathname+="/"),u}const R0=e=>e.join("/").replace(/\/\/+/g,"/"),GJe=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),YJe=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,KJe=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function XJe(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const nxe=["post","put","patch","delete"];new Set(nxe);const QJe=["get",...nxe];new Set(QJe);/**
 * React Router v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function eI(){return eI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eI.apply(this,arguments)}const TK=I.createContext(null),JJe=I.createContext(null),Zb=I.createContext(null),F6=I.createContext(null),Xh=I.createContext({outlet:null,matches:[],isDataRoute:!1}),rxe=I.createContext(null);function ixe(e,t){let{relative:n}={};TS()||ds(!1);let{basename:r,navigator:i}=I.useContext(Zb),{hash:s,pathname:o,search:a}=nZe(e,{relative:n}),u=o;return r!=="/"&&(u=o==="/"?r:R0([r,o])),i.createHref({pathname:u,search:a,hash:s})}function TS(){return I.useContext(F6)!=null}function Gy(){return TS()||ds(!1),I.useContext(F6).location}function sxe(e){I.useContext(Zb).static||I.useLayoutEffect(e)}function Qh(){let{isDataRoute:e}=I.useContext(Xh);return e?hZe():ZJe()}function ZJe(){TS()||ds(!1);let e=I.useContext(TK),{basename:t,future:n,navigator:r}=I.useContext(Zb),{matches:i}=I.useContext(Xh),{pathname:s}=Gy(),o=JSON.stringify(xK(i,n.v7_relativeSplatPath)),a=I.useRef(!1);return sxe(()=>{a.current=!0}),I.useCallback(function(l,c){if(c===void 0&&(c={}),!a.current)return;if(typeof l=="number"){r.go(l);return}let f=SK(l,JSON.parse(o),s,c.relative==="path");e==null&&t!=="/"&&(f.pathname=f.pathname==="/"?t:R0([t,f.pathname])),(c.replace?r.replace:r.push)(f,c.state,c)},[t,r,o,s,e])}const eZe=I.createContext(null);function tZe(e){let t=I.useContext(Xh).outlet;return t&&I.createElement(eZe.Provider,{value:e},t)}function Im(){let{matches:e}=I.useContext(Xh),t=e[e.length-1];return t?t.params:{}}function nZe(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=I.useContext(Zb),{matches:i}=I.useContext(Xh),{pathname:s}=Gy(),o=JSON.stringify(xK(i,r.v7_relativeSplatPath));return I.useMemo(()=>SK(e,JSON.parse(o),s,n==="path"),[e,o,s,n])}function oxe(e,t){return rZe(e,t)}function rZe(e,t,n,r){TS()||ds(!1);let{navigator:i}=I.useContext(Zb),{matches:s}=I.useContext(Xh),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let l=Gy(),c;if(t){var f;let g=typeof t=="string"?SS(t):t;u==="/"||(f=g.pathname)!=null&&f.startsWith(u)||ds(!1),c=g}else c=l;let d=c.pathname||"/",h=d;if(u!=="/"){let g=u.replace(/^\//,"").split("/");h="/"+d.replace(/^\//,"").split("/").slice(g.length).join("/")}let p=RJe(e,{pathname:h}),m=uZe(p&&p.map(g=>Object.assign({},g,{params:Object.assign({},a,g.params),pathname:R0([u,i.encodeLocation?i.encodeLocation(g.pathname).pathname:g.pathname]),pathnameBase:g.pathnameBase==="/"?u:R0([u,i.encodeLocation?i.encodeLocation(g.pathnameBase).pathname:g.pathnameBase])})),s,n,r);return t&&m?I.createElement(F6.Provider,{value:{location:eI({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:u0.Pop}},m):m}function iZe(){let e=dZe(),t=XJe(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return I.createElement(I.Fragment,null,I.createElement("h2",null,"Unexpected Application Error!"),I.createElement("h3",{style:{fontStyle:"italic"}},t),n?I.createElement("pre",{style:i},n):null,null)}const sZe=I.createElement(iZe,null);class oZe extends I.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?I.createElement(Xh.Provider,{value:this.props.routeContext},I.createElement(rxe.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function aZe(e){let{routeContext:t,match:n,children:r}=e,i=I.useContext(TK);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),I.createElement(Xh.Provider,{value:t},r)}function uZe(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if((s=n)!=null&&s.errors)e=n.matches;else return null}let o=e,a=(i=n)==null?void 0:i.errors;if(a!=null){let c=o.findIndex(f=>f.route.id&&(a==null?void 0:a[f.route.id])!==void 0);c>=0||ds(!1),o=o.slice(0,Math.min(o.length,c+1))}let u=!1,l=-1;if(n&&r&&r.v7_partialHydration)for(let c=0;c<o.length;c++){let f=o[c];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(l=c),f.route.id){let{loaderData:d,errors:h}=n,p=f.route.loader&&d[f.route.id]===void 0&&(!h||h[f.route.id]===void 0);if(f.route.lazy||p){u=!0,l>=0?o=o.slice(0,l+1):o=[o[0]];break}}}return o.reduceRight((c,f,d)=>{let h,p=!1,m=null,g=null;n&&(h=a&&f.route.id?a[f.route.id]:void 0,m=f.route.errorElement||sZe,u&&(l<0&&d===0?(p=!0,g=null):l===d&&(p=!0,g=f.route.hydrateFallbackElement||null)));let y=t.concat(o.slice(0,d+1)),v=()=>{let b;return h?b=m:p?b=g:f.route.Component?b=I.createElement(f.route.Component,null):f.route.element?b=f.route.element:b=c,I.createElement(aZe,{match:f,routeContext:{outlet:c,matches:y,isDataRoute:n!=null},children:b})};return n&&(f.route.ErrorBoundary||f.route.errorElement||d===0)?I.createElement(oZe,{location:n.location,revalidation:n.revalidation,component:m,error:h,children:v(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):v()},null)}var axe=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(axe||{}),A$=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(A$||{});function lZe(e){let t=I.useContext(TK);return t||ds(!1),t}function cZe(e){let t=I.useContext(JJe);return t||ds(!1),t}function fZe(e){let t=I.useContext(Xh);return t||ds(!1),t}function uxe(e){let t=fZe(),n=t.matches[t.matches.length-1];return n.route.id||ds(!1),n.route.id}function dZe(){var e;let t=I.useContext(rxe),n=cZe(A$.UseRouteError),r=uxe(A$.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function hZe(){let{router:e}=lZe(axe.UseNavigateStable),t=uxe(A$.UseNavigateStable),n=I.useRef(!1);return sxe(()=>{n.current=!0}),I.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,eI({fromRouteId:t},s)))},[e,t])}function AK(e){let{to:t,replace:n,state:r,relative:i}=e;TS()||ds(!1);let{future:s,static:o}=I.useContext(Zb),{matches:a}=I.useContext(Xh),{pathname:u}=Gy(),l=Qh(),c=SK(t,xK(a,s.v7_relativeSplatPath),u,i==="path"),f=JSON.stringify(c);return I.useEffect(()=>l(JSON.parse(f),{replace:n,state:r,relative:i}),[l,f,i,n,r]),null}function pZe(e){return tZe(e.context)}function Ip(e){ds(!1)}function mZe(e){let{basename:t="/",children:n=null,location:r,navigationType:i=u0.Pop,navigator:s,static:o=!1,future:a}=e;TS()&&ds(!1);let u=t.replace(/^\/*/,"/"),l=I.useMemo(()=>({basename:u,navigator:s,static:o,future:eI({v7_relativeSplatPath:!1},a)}),[u,a,s,o]);typeof r=="string"&&(r=SS(r));let{pathname:c="/",search:f="",hash:d="",state:h=null,key:p="default"}=r,m=I.useMemo(()=>{let g=txe(c,u);return g==null?null:{location:{pathname:g,search:f,hash:d,state:h,key:p},navigationType:i}},[u,c,f,d,h,p,i]);return m==null?null:I.createElement(Zb.Provider,{value:l},I.createElement(F6.Provider,{children:n,value:m}))}function gZe(e){let{children:t,location:n}=e;return oxe(ez(t),n)}new Promise(()=>{});function ez(e,t){t===void 0&&(t=[]);let n=[];return I.Children.forEach(e,(r,i)=>{if(!I.isValidElement(r))return;let s=[...t,i];if(r.type===I.Fragment){n.push.apply(n,ez(r.props.children,s));return}r.type!==Ip&&ds(!1),!r.props.index||!r.props.children||ds(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=ez(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function tz(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function yZe(e,t){let n=tz(e);return t&&t.forEach((r,i)=>{n.has(i)||t.getAll(i).forEach(s=>{n.append(i,s)})}),n}const vZe="6";try{window.__reactRouterVersion=vZe}catch{}const bZe="startTransition",due=zD[bZe];function _Ze(e){let{basename:t,children:n,future:r,window:i}=e,s=I.useRef();s.current==null&&(s.current=CJe({window:i,v5Compat:!0}));let o=s.current,[a,u]=I.useState({action:o.action,location:o.location}),{v7_startTransition:l}=r||{},c=I.useCallback(f=>{l&&due?due(()=>u(f)):u(f)},[u,l]);return I.useLayoutEffect(()=>o.listen(c),[o,c]),I.createElement(mZe,{basename:t,children:n,location:a.location,navigationType:a.action,navigator:o,future:r})}var hue;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(hue||(hue={}));var pue;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(pue||(pue={}));function CK(e){let t=I.useRef(tz(e)),n=I.useRef(!1),r=Gy(),i=I.useMemo(()=>yZe(r.search,n.current?null:t.current),[r.search]),s=Qh(),o=I.useCallback((a,u)=>{const l=tz(typeof a=="function"?a(i):a);n.current=!0,s("?"+l,u)},[s,i]);return[i,o]}const IK=I.createContext(null);IK.displayName="@mantine/modals/ModalsContext";function wZe(){const e=I.useContext(IK);if(!e)throw new Error("[@mantine/modals] useModals hook was called outside of context, wrap your app with ModalsProvider component");return e}function EZe({id:e,cancelProps:t,confirmProps:n,labels:r={cancel:"",confirm:""},closeOnConfirm:i=!0,closeOnCancel:s=!0,groupProps:o,onCancel:a,onConfirm:u,children:l}){const{cancel:c,confirm:f}=r,d=wZe(),h=m=>{typeof(t==null?void 0:t.onClick)=="function"&&(t==null||t.onClick(m)),typeof a=="function"&&a(),s&&d.closeModal(e)},p=m=>{typeof(n==null?void 0:n.onClick)=="function"&&(n==null||n.onClick(m)),typeof u=="function"&&u(),i&&d.closeModal(e)};return _.jsxs(_.Fragment,{children:[l&&_.jsx(me,{mb:"md",children:l}),_.jsxs(Cs,{justify:"flex-end",...o,children:[_.jsx(cn,{variant:"default",...t,onClick:h,children:(t==null?void 0:t.children)||c}),_.jsx(cn,{...n,onClick:p,children:(n==null?void 0:n.children)||f})]})]})}const[xZe,j6]=hVe("mantine-modals");j6("openModal");j6("closeModal");j6("closeAllModals");const nz=j6("openConfirmModal");function mue(e,t){var n,r,i,s;t&&e.type==="confirm"&&((r=(n=e.props).onCancel)==null||r.call(n)),(s=(i=e.props).onClose)==null||s.call(i)}function SZe(e,t){switch(t.type){case"OPEN":return{current:t.modal,modals:[...e.modals,t.modal]};case"CLOSE":{const n=e.modals.find(i=>i.id===t.modalId);if(!n)return e;mue(n,t.canceled);const r=e.modals.filter(i=>i.id!==t.modalId);return{current:r[r.length-1]||e.current,modals:r}}case"CLOSE_ALL":return e.modals.length?(e.modals.concat().reverse().forEach(n=>{mue(n,t.canceled)}),{current:e.current,modals:[]}):e;default:return e}}function TZe(e){if(!e)return{confirmProps:{},modalProps:{}};const{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c,...f}=e;return{confirmProps:{id:t,children:n,onCancel:r,onConfirm:i,closeOnConfirm:s,closeOnCancel:o,cancelProps:a,confirmProps:u,groupProps:l,labels:c},modalProps:{id:t,...f}}}function AZe({children:e,modalProps:t,labels:n,modals:r}){const[i,s]=I.useReducer(SZe,{modals:[],current:null}),o=I.useRef(i);o.current=i;const a=I.useCallback(g=>{s({type:"CLOSE_ALL",canceled:g})},[o,s]),u=I.useCallback(({modalId:g,...y})=>{const v=g||uE();return s({type:"OPEN",modal:{id:v,type:"content",props:y}}),v},[s]),l=I.useCallback(({modalId:g,...y})=>{const v=g||uE();return s({type:"OPEN",modal:{id:v,type:"confirm",props:y}}),v},[s]),c=I.useCallback((g,{modalId:y,...v})=>{const b=y||uE();return s({type:"OPEN",modal:{id:b,type:"context",props:v,ctx:g}}),b},[s]),f=I.useCallback((g,y)=>{s({type:"CLOSE",modalId:g,canceled:y})},[o,s]);xZe({openModal:u,openConfirmModal:l,openContextModal:({modal:g,...y})=>c(g,y),closeModal:f,closeContextModal:f,closeAllModals:a});const d={modals:i.modals,openModal:u,openConfirmModal:l,openContextModal:c,closeModal:f,closeContextModal:f,closeAll:a},h=()=>{const g=o.current.current;switch(g==null?void 0:g.type){case"context":{const{innerProps:y,...v}=g.props,b=r[g.ctx];return{modalProps:v,content:_.jsx(b,{innerProps:y,context:d,id:g.id})}}case"confirm":{const{modalProps:y,confirmProps:v}=TZe(g.props);return{modalProps:y,content:_.jsx(EZe,{...v,id:g.id,labels:g.props.labels||n})}}case"content":{const{children:y,...v}=g.props;return{modalProps:v,content:_.jsx(_.Fragment,{children:y})}}default:return{modalProps:{},content:null}}},{modalProps:p,content:m}=h();return _.jsxs(IK.Provider,{value:d,children:[_.jsx(Ji,{zIndex:rc("modal")+1,...t,...p,opened:i.modals.length>0,onClose:()=>{var g;return f((g=i.current)==null?void 0:g.id)},children:m}),e]})}/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var CZe={outline:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"},filled:{xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"currentColor",stroke:"none"}};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */const An=(e,t,n,r)=>{const i=I.forwardRef(({color:s="currentColor",size:o=24,stroke:a=2,className:u,children:l,...c},f)=>I.createElement("svg",{ref:f,...CZe[e],width:o,height:o,className:["tabler-icon",`tabler-icon-${t}`,u].join(" "),...e==="filled"?{fill:s}:{strokeWidth:a,stroke:s},...c},[...r.map(([d,h])=>I.createElement(d,h)),...Array.isArray(l)?l:[l]]));return i.displayName=`${n}`,i};/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var IZe=An("outline","adjustments-horizontal","IconAdjustmentsHorizontal",[["path",{d:"M14 6m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M4 6l8 0",key:"svg-1"}],["path",{d:"M16 6l4 0",key:"svg-2"}],["path",{d:"M8 12m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-3"}],["path",{d:"M4 12l2 0",key:"svg-4"}],["path",{d:"M10 12l10 0",key:"svg-5"}],["path",{d:"M17 18m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-6"}],["path",{d:"M4 18l11 0",key:"svg-7"}],["path",{d:"M19 18l1 0",key:"svg-8"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kZe=An("outline","alert-circle","IconAlertCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 8v4",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var gue=An("outline","alert-triangle","IconAlertTriangle",[["path",{d:"M12 9v4",key:"svg-0"}],["path",{d:"M10.363 3.591l-8.106 13.534a1.914 1.914 0 0 0 1.636 2.871h16.214a1.914 1.914 0 0 0 1.636 -2.87l-8.106 -13.536a1.914 1.914 0 0 0 -3.274 0z",key:"svg-1"}],["path",{d:"M12 16h.01",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RZe=An("outline","arrows-shuffle","IconArrowsShuffle",[["path",{d:"M18 4l3 3l-3 3",key:"svg-0"}],["path",{d:"M18 20l3 -3l-3 -3",key:"svg-1"}],["path",{d:"M3 7h3a5 5 0 0 1 5 5a5 5 0 0 0 5 5h5",key:"svg-2"}],["path",{d:"M21 7h-5a4.978 4.978 0 0 0 -3 1m-4 8a4.984 4.984 0 0 1 -3 1h-3",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var NZe=An("outline","at","IconAt",[["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-0"}],["path",{d:"M16 12v1.5a2.5 2.5 0 0 0 5 0v-1.5a9 9 0 1 0 -5.5 8.28",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var PZe=An("outline","brain","IconBrain",[["path",{d:"M15.5 13a3.5 3.5 0 0 0 -3.5 3.5v1a3.5 3.5 0 0 0 7 0v-1.8",key:"svg-0"}],["path",{d:"M8.5 13a3.5 3.5 0 0 1 3.5 3.5v1a3.5 3.5 0 0 1 -7 0v-1.8",key:"svg-1"}],["path",{d:"M17.5 16a3.5 3.5 0 0 0 0 -7h-.5",key:"svg-2"}],["path",{d:"M19 9.3v-2.8a3.5 3.5 0 0 0 -7 0",key:"svg-3"}],["path",{d:"M6.5 16a3.5 3.5 0 0 1 0 -7h.5",key:"svg-4"}],["path",{d:"M5 9.3v-2.8a3.5 3.5 0 0 1 7 0v10",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var OZe=An("outline","bubble-text","IconBubbleText",[["path",{d:"M7 10h10",key:"svg-0"}],["path",{d:"M9 14h5",key:"svg-1"}],["path",{d:"M12.4 3a5.34 5.34 0 0 1 4.906 3.239a5.333 5.333 0 0 1 -1.195 10.6a4.26 4.26 0 0 1 -5.28 1.863l-3.831 2.298v-3.134a2.668 2.668 0 0 1 -1.795 -3.773a4.8 4.8 0 0 1 2.908 -8.933a5.33 5.33 0 0 1 4.287 -2.16",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var DZe=An("outline","chart-bar","IconChartBar",[["path",{d:"M3 13a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v6a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-0"}],["path",{d:"M15 9a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v10a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-1"}],["path",{d:"M9 5a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v14a1 1 0 0 1 -1 1h-4a1 1 0 0 1 -1 -1z",key:"svg-2"}],["path",{d:"M4 20h14",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $Ze=An("outline","chart-donut-2","IconChartDonut2",[["path",{d:"M12 3v5m4 4h5",key:"svg-0"}],["path",{d:"M12 12m-4 0a4 4 0 1 0 8 0a4 4 0 1 0 -8 0",key:"svg-1"}],["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var MZe=An("outline","chart-histogram","IconChartHistogram",[["path",{d:"M3 3v18h18",key:"svg-0"}],["path",{d:"M20 18v3",key:"svg-1"}],["path",{d:"M16 16v5",key:"svg-2"}],["path",{d:"M12 13v8",key:"svg-3"}],["path",{d:"M8 16v5",key:"svg-4"}],["path",{d:"M3 11c6 0 5 -5 9 -5s3 5 9 5",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var lxe=An("outline","check","IconCheck",[["path",{d:"M5 12l5 5l10 -10",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var LZe=An("outline","chevron-down","IconChevronDown",[["path",{d:"M6 9l6 6l6 -6",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var yue=An("outline","circle-check","IconCircleCheck",[["path",{d:"M12 12m-9 0a9 9 0 1 0 18 0a9 9 0 1 0 -18 0",key:"svg-0"}],["path",{d:"M9 12l2 2l4 -4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var FZe=An("outline","code-plus","IconCodePlus",[["path",{d:"M9 12h6",key:"svg-0"}],["path",{d:"M12 9v6",key:"svg-1"}],["path",{d:"M6 19a2 2 0 0 1 -2 -2v-4l-1 -1l1 -1v-4a2 2 0 0 1 2 -2",key:"svg-2"}],["path",{d:"M18 19a2 2 0 0 0 2 -2v-4l1 -1l-1 -1v-4a2 2 0 0 0 -2 -2",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var jZe=An("outline","database-export","IconDatabaseExport",[["path",{d:"M4 6c0 1.657 3.582 3 8 3s8 -1.343 8 -3s-3.582 -3 -8 -3s-8 1.343 -8 3",key:"svg-0"}],["path",{d:"M4 6v6c0 1.657 3.582 3 8 3c1.118 0 2.183 -.086 3.15 -.241",key:"svg-1"}],["path",{d:"M20 12v-6",key:"svg-2"}],["path",{d:"M4 12v6c0 1.657 3.582 3 8 3c.157 0 .312 -.002 .466 -.005",key:"svg-3"}],["path",{d:"M16 19h6",key:"svg-4"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var BZe=An("outline","dots-vertical","IconDotsVertical",[["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 19m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M12 5m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var UZe=An("outline","dots","IconDots",[["path",{d:"M5 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-0"}],["path",{d:"M12 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-1"}],["path",{d:"M19 12m-1 0a1 1 0 1 0 2 0a1 1 0 1 0 -2 0",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var zZe=An("outline","external-link","IconExternalLink",[["path",{d:"M12 6h-6a2 2 0 0 0 -2 2v10a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-6",key:"svg-0"}],["path",{d:"M11 13l9 -9",key:"svg-1"}],["path",{d:"M15 4h5v5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var VZe=An("outline","file-lambda","IconFileLambda",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M17 21h-10a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h7l5 5v11a2 2 0 0 1 -2 2z",key:"svg-1"}],["path",{d:"M10 17l2 -3",key:"svg-2"}],["path",{d:"M15 17c-2.5 0 -2.5 -6 -5 -6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var HZe=An("outline","html","IconHtml",[["path",{d:"M13 16v-8l2 5l2 -5v8",key:"svg-0"}],["path",{d:"M1 16v-8",key:"svg-1"}],["path",{d:"M5 8v8",key:"svg-2"}],["path",{d:"M1 12h4",key:"svg-3"}],["path",{d:"M7 8h4",key:"svg-4"}],["path",{d:"M9 8v8",key:"svg-5"}],["path",{d:"M20 8v8h3",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var cxe=An("outline","info-circle","IconInfoCircle",[["path",{d:"M3 12a9 9 0 1 0 18 0a9 9 0 0 0 -18 0",key:"svg-0"}],["path",{d:"M12 9h.01",key:"svg-1"}],["path",{d:"M11 12h1v4h1",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var qZe=An("outline","layout-columns","IconLayoutColumns",[["path",{d:"M4 4m0 2a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M12 4l0 16",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var WZe=An("outline","mail","IconMail",[["path",{d:"M3 7a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v10a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-10z",key:"svg-0"}],["path",{d:"M3 7l9 6l9 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var GZe=An("outline","number-123","IconNumber123",[["path",{d:"M3 10l2 -2v8",key:"svg-0"}],["path",{d:"M9 8h3a1 1 0 0 1 1 1v2a1 1 0 0 1 -1 1h-2a1 1 0 0 0 -1 1v2a1 1 0 0 0 1 1h3",key:"svg-1"}],["path",{d:"M17 8h2.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-1.5h1.5a1.5 1.5 0 0 1 1.5 1.5v1a1.5 1.5 0 0 1 -1.5 1.5h-2.5",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var YZe=An("outline","pencil","IconPencil",[["path",{d:"M4 20h4l10.5 -10.5a2.828 2.828 0 1 0 -4 -4l-10.5 10.5v4",key:"svg-0"}],["path",{d:"M13.5 6.5l4 4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var KZe=An("outline","player-play","IconPlayerPlay",[["path",{d:"M7 4v16l13 -8z",key:"svg-0"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var fxe=An("outline","progress","IconProgress",[["path",{d:"M10 20.777a8.942 8.942 0 0 1 -2.48 -.969",key:"svg-0"}],["path",{d:"M14 3.223a9.003 9.003 0 0 1 0 17.554",key:"svg-1"}],["path",{d:"M4.579 17.093a8.961 8.961 0 0 1 -1.227 -2.592",key:"svg-2"}],["path",{d:"M3.124 10.5c.16 -.95 .468 -1.85 .9 -2.675l.169 -.305",key:"svg-3"}],["path",{d:"M6.907 4.579a8.954 8.954 0 0 1 3.093 -1.356",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var XZe=An("outline","radio","IconRadio",[["path",{d:"M14 3l-9.371 3.749a1 1 0 0 0 -.629 .928v11.323a1 1 0 0 0 1 1h14a1 1 0 0 0 1 -1v-11a1 1 0 0 0 -1 -1h-14.5",key:"svg-0"}],["path",{d:"M4 12h16",key:"svg-1"}],["path",{d:"M7 12v-2",key:"svg-2"}],["path",{d:"M17 16v.01",key:"svg-3"}],["path",{d:"M13 16v.01",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var QZe=An("outline","refresh","IconRefresh",[["path",{d:"M20 11a8.1 8.1 0 0 0 -15.5 -2m-.5 -4v4h4",key:"svg-0"}],["path",{d:"M4 13a8.1 8.1 0 0 0 15.5 2m.5 4v-4h-4",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var JZe=An("outline","schema","IconSchema",[["path",{d:"M5 2h5v4h-5z",key:"svg-0"}],["path",{d:"M15 10h5v4h-5z",key:"svg-1"}],["path",{d:"M5 18h5v4h-5z",key:"svg-2"}],["path",{d:"M5 10h5v4h-5z",key:"svg-3"}],["path",{d:"M10 12h5",key:"svg-4"}],["path",{d:"M7.5 6v4",key:"svg-5"}],["path",{d:"M7.5 14v4",key:"svg-6"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ZZe=An("outline","search","IconSearch",[["path",{d:"M10 10m-7 0a7 7 0 1 0 14 0a7 7 0 1 0 -14 0",key:"svg-0"}],["path",{d:"M21 21l-6 -6",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var eet=An("outline","select","IconSelect",[["path",{d:"M3 3m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 11l3 3l3 -3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var dxe=An("outline","settings","IconSettings",[["path",{d:"M10.325 4.317c.426 -1.756 2.924 -1.756 3.35 0a1.724 1.724 0 0 0 2.573 1.066c1.543 -.94 3.31 .826 2.37 2.37a1.724 1.724 0 0 0 1.065 2.572c1.756 .426 1.756 2.924 0 3.35a1.724 1.724 0 0 0 -1.066 2.573c.94 1.543 -.826 3.31 -2.37 2.37a1.724 1.724 0 0 0 -2.572 1.065c-.426 1.756 -2.924 1.756 -3.35 0a1.724 1.724 0 0 0 -2.573 -1.066c-1.543 .94 -3.31 -.826 -2.37 -2.37a1.724 1.724 0 0 0 -1.065 -2.572c-1.756 -.426 -1.756 -2.924 0 -3.35a1.724 1.724 0 0 0 1.066 -2.573c-.94 -1.543 .826 -3.31 2.37 -2.37c1 .608 2.296 .07 2.572 -1.065z",key:"svg-0"}],["path",{d:"M9 12a3 3 0 1 0 6 0a3 3 0 0 0 -6 0",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var tet=An("outline","squares","IconSquares",[["path",{d:"M8 10a2 2 0 0 1 2 -2h9a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-9a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M16 8v-3a2 2 0 0 0 -2 -2h-9a2 2 0 0 0 -2 2v9a2 2 0 0 0 2 2h3",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var hxe=An("outline","table-export","IconTableExport",[["path",{d:"M12.5 21h-7.5a2 2 0 0 1 -2 -2v-14a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v7.5",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}],["path",{d:"M16 19h6",key:"svg-3"}],["path",{d:"M19 16l3 3l-3 3",key:"svg-4"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var net=An("outline","table","IconTable",[["path",{d:"M3 5a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2v-14z",key:"svg-0"}],["path",{d:"M3 10h18",key:"svg-1"}],["path",{d:"M10 3v18",key:"svg-2"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var pxe=An("outline","trash-x","IconTrashX",[["path",{d:"M4 7h16",key:"svg-0"}],["path",{d:"M5 7l1 12a2 2 0 0 0 2 2h8a2 2 0 0 0 2 -2l1 -12",key:"svg-1"}],["path",{d:"M9 7v-3a1 1 0 0 1 1 -1h4a1 1 0 0 1 1 1v3",key:"svg-2"}],["path",{d:"M10 12l4 4m0 -4l-4 4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var kK=An("outline","user-plus","IconUserPlus",[["path",{d:"M8 7a4 4 0 1 0 8 0a4 4 0 0 0 -8 0",key:"svg-0"}],["path",{d:"M16 19h6",key:"svg-1"}],["path",{d:"M19 16v6",key:"svg-2"}],["path",{d:"M6 21v-2a4 4 0 0 1 4 -4h4",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var RK=An("outline","x","IconX",[["path",{d:"M18 6l-12 12",key:"svg-0"}],["path",{d:"M6 6l12 12",key:"svg-1"}]]);/**
 * @license @tabler/icons-react v3.5.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ret=An("filled","brand-google-filled","IconBrandGoogleFilled",[["path",{d:"M12 2a9.96 9.96 0 0 1 6.29 2.226a1 1 0 0 1 .04 1.52l-1.51 1.362a1 1 0 0 1 -1.265 .06a6 6 0 1 0 2.103 6.836l.001 -.004h-3.66a1 1 0 0 1 -.992 -.883l-.007 -.117v-2a1 1 0 0 1 1 -1h6.945a1 1 0 0 1 .994 .89c.04 .367 .061 .737 .061 1.11c0 5.523 -4.477 10 -10 10s-10 -4.477 -10 -10s4.477 -10 10 -10z",key:"svg-0"}]]);function mxe(e){const t=e.split("/")||[];return t[t.length-1].replace(/\.[^\.]+$/,"").replace(".","_").replace(" ","_").replace("/","_")}const Gu="/mqp2024/";function vue(e){const t=[],n=String(e||"");let r=n.indexOf(","),i=0,s=!1;for(;!s;){r===-1&&(r=n.length,s=!0);const o=n.slice(i,r).trim();(o||!s)&&t.push(o),i=r+1,r=n.indexOf(",",i)}return t}function gxe(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const iet=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,set=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,oet={};function bue(e,t){return(oet.jsx?set:iet).test(e)}const aet=/[ \t\n\f\r]/g;function uet(e){return typeof e=="object"?e.type==="text"?_ue(e.value):!1:_ue(e)}function _ue(e){return e.replace(aet,"")===""}let $k=class{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}};$k.prototype.property={};$k.prototype.normal={};$k.prototype.space=null;function yxe(e,t){const n={},r={};let i=-1;for(;++i<e.length;)Object.assign(n,e[i].property),Object.assign(r,e[i].normal);return new $k(n,r,t)}function tI(e){return e.toLowerCase()}let Zc=class{constructor(t,n){this.property=t,this.attribute=n}};Zc.prototype.space=null;Zc.prototype.boolean=!1;Zc.prototype.booleanish=!1;Zc.prototype.overloadedBoolean=!1;Zc.prototype.number=!1;Zc.prototype.commaSeparated=!1;Zc.prototype.spaceSeparated=!1;Zc.prototype.commaOrSpaceSeparated=!1;Zc.prototype.mustUseProperty=!1;Zc.prototype.defined=!1;let cet=0;const vn=e_(),Es=e_(),vxe=e_(),nt=e_(),ri=e_(),dE=e_(),gl=e_();function e_(){return 2**++cet}const rz=Object.freeze(Object.defineProperty({__proto__:null,boolean:vn,booleanish:Es,commaOrSpaceSeparated:gl,commaSeparated:dE,number:nt,overloadedBoolean:vxe,spaceSeparated:ri},Symbol.toStringTag,{value:"Module"})),O8=Object.keys(rz);class NK extends Zc{constructor(t,n,r,i){let s=-1;if(super(t,n),wue(this,"space",i),typeof r=="number")for(;++s<O8.length;){const o=O8[s];wue(this,O8[s],(r&rz[o])===rz[o])}}}NK.prototype.defined=!0;function wue(e,t,n){n&&(e[t]=n)}const fet={}.hasOwnProperty;function AS(e){const t={},n={};let r;for(r in e.properties)if(fet.call(e.properties,r)){const i=e.properties[r],s=new NK(r,e.transform(e.attributes||{},r),i,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),t[r]=s,n[tI(r)]=r,n[tI(s.attribute)]=r}return new $k(t,n,e.space)}const bxe=AS({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),_xe=AS({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function wxe(e,t){return t in e?e[t]:t}function Exe(e,t){return wxe(e,t.toLowerCase())}const xxe=AS({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Exe,properties:{xmlns:null,xmlnsXLink:null}}),Sxe=AS({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:Es,ariaAutoComplete:null,ariaBusy:Es,ariaChecked:Es,ariaColCount:nt,ariaColIndex:nt,ariaColSpan:nt,ariaControls:ri,ariaCurrent:null,ariaDescribedBy:ri,ariaDetails:null,ariaDisabled:Es,ariaDropEffect:ri,ariaErrorMessage:null,ariaExpanded:Es,ariaFlowTo:ri,ariaGrabbed:Es,ariaHasPopup:null,ariaHidden:Es,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:ri,ariaLevel:nt,ariaLive:null,ariaModal:Es,ariaMultiLine:Es,ariaMultiSelectable:Es,ariaOrientation:null,ariaOwns:ri,ariaPlaceholder:null,ariaPosInSet:nt,ariaPressed:Es,ariaReadOnly:Es,ariaRelevant:null,ariaRequired:Es,ariaRoleDescription:ri,ariaRowCount:nt,ariaRowIndex:nt,ariaRowSpan:nt,ariaSelected:Es,ariaSetSize:nt,ariaSort:null,ariaValueMax:nt,ariaValueMin:nt,ariaValueNow:nt,ariaValueText:null,role:null}}),det=AS({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Exe,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:dE,acceptCharset:ri,accessKey:ri,action:null,allow:null,allowFullScreen:vn,allowPaymentRequest:vn,allowUserMedia:vn,alt:null,as:null,async:vn,autoCapitalize:null,autoComplete:ri,autoFocus:vn,autoPlay:vn,blocking:ri,capture:null,charSet:null,checked:vn,cite:null,className:ri,cols:nt,colSpan:null,content:null,contentEditable:Es,controls:vn,controlsList:ri,coords:nt|dE,crossOrigin:null,data:null,dateTime:null,decoding:null,default:vn,defer:vn,dir:null,dirName:null,disabled:vn,download:vxe,draggable:Es,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:vn,formTarget:null,headers:ri,height:nt,hidden:vn,high:nt,href:null,hrefLang:null,htmlFor:ri,httpEquiv:ri,id:null,imageSizes:null,imageSrcSet:null,inert:vn,inputMode:null,integrity:null,is:null,isMap:vn,itemId:null,itemProp:ri,itemRef:ri,itemScope:vn,itemType:ri,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:vn,low:nt,manifest:null,max:null,maxLength:nt,media:null,method:null,min:null,minLength:nt,multiple:vn,muted:vn,name:null,nonce:null,noModule:vn,noValidate:vn,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:vn,optimum:nt,pattern:null,ping:ri,placeholder:null,playsInline:vn,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:vn,referrerPolicy:null,rel:ri,required:vn,reversed:vn,rows:nt,rowSpan:nt,sandbox:ri,scope:null,scoped:vn,seamless:vn,selected:vn,shadowRootClonable:vn,shadowRootDelegatesFocus:vn,shadowRootMode:null,shape:null,size:nt,sizes:null,slot:null,span:nt,spellCheck:Es,src:null,srcDoc:null,srcLang:null,srcSet:null,start:nt,step:null,style:null,tabIndex:nt,target:null,title:null,translate:null,type:null,typeMustMatch:vn,useMap:null,value:Es,width:nt,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:ri,axis:null,background:null,bgColor:null,border:nt,borderColor:null,bottomMargin:nt,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:vn,declare:vn,event:null,face:null,frame:null,frameBorder:null,hSpace:nt,leftMargin:nt,link:null,longDesc:null,lowSrc:null,marginHeight:nt,marginWidth:nt,noResize:vn,noHref:vn,noShade:vn,noWrap:vn,object:null,profile:null,prompt:null,rev:null,rightMargin:nt,rules:null,scheme:null,scrolling:Es,standby:null,summary:null,text:null,topMargin:nt,valueType:null,version:null,vAlign:null,vLink:null,vSpace:nt,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:vn,disableRemotePlayback:vn,prefix:null,property:null,results:nt,security:null,unselectable:null}}),het=AS({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:wxe,properties:{about:gl,accentHeight:nt,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:nt,amplitude:nt,arabicForm:null,ascent:nt,attributeName:null,attributeType:null,azimuth:nt,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:nt,by:null,calcMode:null,capHeight:nt,className:ri,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:nt,diffuseConstant:nt,direction:null,display:null,dur:null,divisor:nt,dominantBaseline:null,download:vn,dx:null,dy:null,edgeMode:null,editable:null,elevation:nt,enableBackground:null,end:null,event:null,exponent:nt,externalResourcesRequired:null,fill:null,fillOpacity:nt,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:dE,g2:dE,glyphName:dE,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:nt,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:nt,horizOriginX:nt,horizOriginY:nt,id:null,ideographic:nt,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:nt,k:nt,k1:nt,k2:nt,k3:nt,k4:nt,kernelMatrix:gl,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:nt,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:nt,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:nt,overlineThickness:nt,paintOrder:null,panose1:null,path:null,pathLength:nt,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:ri,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:nt,pointsAtY:nt,pointsAtZ:nt,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:gl,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:gl,rev:gl,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:gl,requiredFeatures:gl,requiredFonts:gl,requiredFormats:gl,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:nt,specularExponent:nt,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:nt,strikethroughThickness:nt,string:null,stroke:null,strokeDashArray:gl,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:nt,strokeOpacity:nt,strokeWidth:null,style:null,surfaceScale:nt,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:gl,tabIndex:nt,tableValues:null,target:null,targetX:nt,targetY:nt,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:gl,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:nt,underlineThickness:nt,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:nt,values:null,vAlphabetic:nt,vMathematical:nt,vectorEffect:null,vHanging:nt,vIdeographic:nt,version:null,vertAdvY:nt,vertOriginX:nt,vertOriginY:nt,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:nt,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),pet=/^data[-\w.:]+$/i,Eue=/-[a-z]/g,met=/[A-Z]/g;function B6(e,t){const n=tI(t);let r=t,i=Zc;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&pet.test(t)){if(t.charAt(4)==="-"){const s=t.slice(5).replace(Eue,yet);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=t.slice(4);if(!Eue.test(s)){let o=s.replace(met,get);o.charAt(0)!=="-"&&(o="-"+o),t="data"+o}}i=NK}return new i(r,t)}function get(e){return"-"+e.toLowerCase()}function yet(e){return e.charAt(1).toUpperCase()}const vet={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},Mk=yxe([_xe,bxe,xxe,Sxe,det],"html"),Yy=yxe([_xe,bxe,xxe,Sxe,het],"svg");function xue(e){const t=String(e||"").trim();return t?t.split(/[ \t\n\r\f]+/g):[]}function Txe(e){return e.join(" ").trim()}var Axe={},Sue=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,bet=/\n/g,_et=/^\s*/,wet=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,Eet=/^:\s*/,xet=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,Tet=/^[;\s]*/,Aet=/^\s+|\s+$/g,Cet=`
`,Tue="/",Aue="*",n1="",Iet="comment",ket="declaration",Ret=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function i(p){var m=p.match(bet);m&&(n+=m.length);var g=p.lastIndexOf(Cet);r=~g?p.length-g:r+p.length}function s(){var p={line:n,column:r};return function(m){return m.position=new o(p),l(),m}}function o(p){this.start=p,this.end={line:n,column:r},this.source=t.source}o.prototype.content=e;function a(p){var m=new Error(t.source+":"+n+":"+r+": "+p);if(m.reason=p,m.filename=t.source,m.line=n,m.column=r,m.source=e,!t.silent)throw m}function u(p){var m=p.exec(e);if(m){var g=m[0];return i(g),e=e.slice(g.length),m}}function l(){u(_et)}function c(p){var m;for(p=p||[];m=f();)m!==!1&&p.push(m);return p}function f(){var p=s();if(!(Tue!=e.charAt(0)||Aue!=e.charAt(1))){for(var m=2;n1!=e.charAt(m)&&(Aue!=e.charAt(m)||Tue!=e.charAt(m+1));)++m;if(m+=2,n1===e.charAt(m-1))return a("End of comment missing");var g=e.slice(2,m-2);return r+=2,i(g),e=e.slice(m),r+=2,p({type:Iet,comment:g})}}function d(){var p=s(),m=u(wet);if(m){if(f(),!u(Eet))return a("property missing ':'");var g=u(xet),y=p({type:ket,property:Cue(m[0].replace(Sue,n1)),value:g?Cue(g[0].replace(Sue,n1)):n1});return u(Tet),y}}function h(){var p=[];c(p);for(var m;m=d();)m!==!1&&(p.push(m),c(p));return p}return l(),h()};function Cue(e){return e?e.replace(Aet,n1):n1}var Net=so&&so.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Axe,"__esModule",{value:!0});var Pet=Net(Ret);function Oet(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,Pet.default)(e),i=typeof t=="function";return r.forEach(function(s){if(s.type==="declaration"){var o=s.property,a=s.value;i?t(o,a,s):a&&(n=n||{},n[o]=a)}}),n}var Iue=Axe.default=Oet;const Det=Iue.default||Iue,U6=Cxe("end"),Jh=Cxe("start");function Cxe(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function $et(e){const t=Jh(e),n=U6(e);if(t&&n)return{start:t,end:n}}function FC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?kue(e.position):"start"in e||"end"in e?kue(e):"line"in e||"column"in e?iz(e):""}function iz(e){return Rue(e&&e.line)+":"+Rue(e&&e.column)}function kue(e){return iz(e&&e.start)+"-"+iz(e&&e.end)}function Rue(e){return e&&typeof e=="number"?e:1}class ka extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof t=="string"?i=t:!s.cause&&t&&(o=!0,i=t.message,s.cause=t),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file,this.message=i,this.line=a?a.line:void 0,this.name=FC(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual,this.expected,this.note,this.url}}ka.prototype.file="";ka.prototype.name="";ka.prototype.reason="";ka.prototype.message="";ka.prototype.stack="";ka.prototype.column=void 0;ka.prototype.line=void 0;ka.prototype.ancestors=void 0;ka.prototype.cause=void 0;ka.prototype.fatal=void 0;ka.prototype.place=void 0;ka.prototype.ruleId=void 0;ka.prototype.source=void 0;const PK={}.hasOwnProperty,Met=new Map,Let=/[A-Z]/g,Fet=/-([a-z])/g,jet=new Set(["table","tbody","thead","tfoot","tr"]),Bet=new Set(["td","th"]),Ixe="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function Uet(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=Ket(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=Yet(n,t.jsx,t.jsxs)}const i={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?Yy:Mk,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},s=kxe(i,e,void 0);return s&&typeof s!="string"?s:i.create(e,i.Fragment,{children:s||void 0},void 0)}function kxe(e,t,n){if(t.type==="element")return zet(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return Vet(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return qet(e,t,n);if(t.type==="mdxjsEsm")return Het(e,t);if(t.type==="root")return Wet(e,t,n);if(t.type==="text")return Get(e,t)}function zet(e,t,n){const r=e.schema;let i=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=Yy,e.schema=i),e.ancestors.push(t);const s=Nxe(e,t.tagName,!1),o=Xet(e,t);let a=DK(e,t);return jet.has(t.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!uet(u):!0})),Rxe(e,o,s,t),OK(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Vet(e,t){if(t.data&&t.data.estree&&e.evaluater){const r=t.data.estree.body[0];return r.type,e.evaluater.evaluateExpression(r.expression)}nI(e,t.position)}function Het(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);nI(e,t.position)}function qet(e,t,n){const r=e.schema;let i=r;t.name==="svg"&&r.space==="html"&&(i=Yy,e.schema=i),e.ancestors.push(t);const s=t.name===null?e.Fragment:Nxe(e,t.name,!0),o=Qet(e,t),a=DK(e,t);return Rxe(e,o,s,t),OK(o,a),e.ancestors.pop(),e.schema=r,e.create(t,s,o,n)}function Wet(e,t,n){const r={};return OK(r,DK(e,t)),e.create(t,e.Fragment,r,n)}function Get(e,t){return t.value}function Rxe(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function OK(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function Yet(e,t,n){return r;function r(i,s,o,a){const l=Array.isArray(o.children)?n:t;return a?l(s,o,a):l(s,o)}}function Ket(e,t){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Jh(r);return t(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:e,lineNumber:u?u.line:void 0},void 0)}}function Xet(e,t){const n={};let r,i;for(i in t.properties)if(i!=="children"&&PK.call(t.properties,i)){const s=Jet(e,i,t.properties[i]);if(s){const[o,a]=s;e.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&Bet.has(t.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function Qet(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,e.evaluater.evaluateExpression(a.argument))}else nI(e,t.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const a=r.value.data.estree.body[0];a.type,s=e.evaluater.evaluateExpression(a.expression)}else nI(e,t.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function DK(e,t){const n=[];let r=-1;const i=e.passKeys?new Map:Met;for(;++r<t.children.length;){const s=t.children[r];let o;if(e.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const l=i.get(u)||0;o=u+"-"+l,i.set(u,l+1)}}const a=kxe(e,s,o);a!==void 0&&n.push(a)}return n}function Jet(e,t,n){const r=B6(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?gxe(n):Txe(n)),r.property==="style"){let i=typeof n=="object"?n:Zet(e,String(n));return e.stylePropertyNameCase==="css"&&(i=ett(i)),["style",i]}return[e.elementAttributeNameCase==="react"&&r.space?vet[r.property]||r.property:r.attribute,n]}}function Zet(e,t){const n={};try{Det(t,r)}catch(i){if(!e.ignoreInvalidStyle){const s=i,o=new ka("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:s,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw o.file=e.filePath||void 0,o.url=Ixe+"#cannot-parse-style-attribute",o}}return n;function r(i,s){let o=i;o.slice(0,2)!=="--"&&(o.slice(0,4)==="-ms-"&&(o="ms-"+o.slice(4)),o=o.replace(Fet,ntt)),n[o]=s}}function Nxe(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const i=t.split(".");let s=-1,o;for(;++s<i.length;){const a=bue(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=bue(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const i=r.value;return PK.call(e.components,i)?e.components[i]:i}if(e.evaluater)return e.evaluater.evaluateExpression(r);nI(e)}function nI(e,t){const n=new ka("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Ixe+"#cannot-handle-mdx-estrees-without-createevaluater",n}function ett(e){const t={};let n;for(n in e)PK.call(e,n)&&(t[ttt(n)]=e[n]);return t}function ttt(e){let t=e.replace(Let,rtt);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function ntt(e,t){return t.toUpperCase()}function rtt(e){return"-"+e.toLowerCase()}const D8={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},itt={};function stt(e,t){const n=itt,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Pxe(e,r,i)}function Pxe(e,t,n){if(ott(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return Nue(e.children,t,n)}return Array.isArray(e)?Nue(e,t,n):""}function Nue(e,t,n){const r=[];let i=-1;for(;++i<e.length;)r[i]=Pxe(e[i],t,n);return r.join("")}function ott(e){return!!(e&&typeof e=="object")}const Pue=document.createElement("i");function $K(e){const t="&"+e+";";Pue.innerHTML=t;const n=Pue.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function km(e,t,n,r){const i=e.length;let s=0,o;if(t<0?t=-t>i?0:i+t:t=t>i?i:t,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(t,n),e.splice(...o);else for(n&&e.splice(t,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(t,0),e.splice(...o),s+=1e4,t+=1e4}function _c(e,t){return e.length>0?(km(e,e.length,0,t),e):t}const Oue={}.hasOwnProperty;function att(e){const t={};let n=-1;for(;++n<e.length;)utt(t,e[n]);return t}function utt(e,t){let n;for(n in t){const i=(Oue.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let o;if(s)for(o in s){Oue.call(i,o)||(i[o]=[]);const a=s[o];ltt(i[o],Array.isArray(a)?a:a?[a]:[])}}}function ltt(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);km(e,0,0,r)}function Oxe(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function hE(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const qd=Ky(/[A-Za-z]/),kl=Ky(/[\dA-Za-z]/),ctt=Ky(/[#-'*+\--9=?A-Z^-~]/);function sz(e){return e!==null&&(e<32||e===127)}const oz=Ky(/\d/),ftt=Ky(/[\dA-Fa-f]/),dtt=Ky(/[!-/:-@[-`{-~]/);function en(e){return e!==null&&e<-2}function Yu(e){return e!==null&&(e<0||e===32)}function _r(e){return e===-2||e===-1||e===32}const htt=Ky(new RegExp("\\p{P}|\\p{S}","u")),ptt=Ky(/\s/);function Ky(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function CS(e){const t=[];let n=-1,r=0,i=0;for(;++n<e.length;){const s=e.charCodeAt(n);let o="";if(s===37&&kl(e.charCodeAt(n+1))&&kl(e.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=e.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(t.push(e.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return t.join("")+e.slice(r)}function si(e,t,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return _r(u)?(e.enter(n),a(u)):t(u)}function a(u){return _r(u)&&s++<i?(e.consume(u),a):(e.exit(n),t(u))}}const mtt={tokenize:gtt};function gtt(e){const t=e.attempt(this.parser.constructs.contentInitial,r,i);let n;return t;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),si(e,t,"linePrefix")}function i(a){return e.enter("paragraph"),s(a)}function s(a){const u=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(a);return}return en(a)?(e.consume(a),e.exit("chunkText"),s):(e.consume(a),o)}}const ytt={tokenize:vtt},Due={tokenize:btt};function vtt(e){const t=this,n=[];let r=0,i,s,o;return a;function a(b){if(r<n.length){const w=n[r];return t.containerState=w[1],e.attempt(w[0].continuation,u,l)(b)}return l(b)}function u(b){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,i&&v();const w=t.events.length;let E=w,T;for(;E--;)if(t.events[E][0]==="exit"&&t.events[E][1].type==="chunkFlow"){T=t.events[E][1].end;break}y(r);let S=w;for(;S<t.events.length;)t.events[S][1].end=Object.assign({},T),S++;return km(t.events,E+1,0,t.events.slice(w)),t.events.length=S,l(b)}return a(b)}function l(b){if(r===n.length){if(!i)return d(b);if(i.currentConstruct&&i.currentConstruct.concrete)return p(b);t.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(Due,c,f)(b)}function c(b){return i&&v(),y(r),d(b)}function f(b){return t.parser.lazy[t.now().line]=r!==n.length,o=t.now().offset,p(b)}function d(b){return t.containerState={},e.attempt(Due,h,p)(b)}function h(b){return r++,n.push([t.currentConstruct,t.containerState]),d(b)}function p(b){if(b===null){i&&v(),y(0),e.consume(b);return}return i=i||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:s,_tokenizer:i}),m(b)}function m(b){if(b===null){g(e.exit("chunkFlow"),!0),y(0),e.consume(b);return}return en(b)?(e.consume(b),g(e.exit("chunkFlow")),r=0,t.interrupt=void 0,a):(e.consume(b),m)}function g(b,w){const E=t.sliceStream(b);if(w&&E.push(null),b.previous=s,s&&(s.next=b),s=b,i.defineSkip(b.start),i.write(E),t.parser.lazy[b.start.line]){let T=i.events.length;for(;T--;)if(i.events[T][1].start.offset<o&&(!i.events[T][1].end||i.events[T][1].end.offset>o))return;const S=t.events.length;let A=S,C,k;for(;A--;)if(t.events[A][0]==="exit"&&t.events[A][1].type==="chunkFlow"){if(C){k=t.events[A][1].end;break}C=!0}for(y(r),T=S;T<t.events.length;)t.events[T][1].end=Object.assign({},k),T++;km(t.events,A+1,0,t.events.slice(S)),t.events.length=T}}function y(b){let w=n.length;for(;w-- >b;){const E=n[w];t.containerState=E[1],E[0].exit.call(t,e)}n.length=b}function v(){i.write([null]),s=void 0,i=void 0,t.containerState._closeFlow=void 0}}function btt(e,t,n){return si(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function $ue(e){if(e===null||Yu(e)||ptt(e))return 1;if(htt(e))return 2}function MK(e,t,n){const r=[];let i=-1;for(;++i<e.length;){const s=e[i].resolveAll;s&&!r.includes(s)&&(t=s(t,n),r.push(s))}return t}const az={name:"attention",tokenize:wtt,resolveAll:_tt};function _tt(e,t){let n=-1,r,i,s,o,a,u,l,c;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;u=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const f=Object.assign({},e[r][1].end),d=Object.assign({},e[n][1].start);Mue(f,-u),Mue(d,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:Object.assign({},e[r][1].end)},a={type:u>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:d},s={type:u>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},i={type:u>1?"strong":"emphasis",start:Object.assign({},o.start),end:Object.assign({},a.end)},e[r][1].end=Object.assign({},o.start),e[n][1].start=Object.assign({},a.end),l=[],e[r][1].end.offset-e[r][1].start.offset&&(l=_c(l,[["enter",e[r][1],t],["exit",e[r][1],t]])),l=_c(l,[["enter",i,t],["enter",o,t],["exit",o,t],["enter",s,t]]),l=_c(l,MK(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),l=_c(l,[["exit",s,t],["enter",a,t],["exit",a,t],["exit",i,t]]),e[n][1].end.offset-e[n][1].start.offset?(c=2,l=_c(l,[["enter",e[n][1],t],["exit",e[n][1],t]])):c=0,km(e,r-1,n-r+3,l),n=r+l.length-c-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function wtt(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=$ue(r);let s;return o;function o(u){return s=u,e.enter("attentionSequence"),a(u)}function a(u){if(u===s)return e.consume(u),a;const l=e.exit("attentionSequence"),c=$ue(u),f=!c||c===2&&i||n.includes(u),d=!i||i===2&&c||n.includes(r);return l._open=!!(s===42?f:f&&(i||!d)),l._close=!!(s===42?d:d&&(c||!f)),t(u)}}function Mue(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const Ett={name:"autolink",tokenize:xtt};function xtt(e,t,n){let r=0;return i;function i(h){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),s}function s(h){return qd(h)?(e.consume(h),o):h===64?n(h):l(h)}function o(h){return h===43||h===45||h===46||kl(h)?(r=1,a(h)):l(h)}function a(h){return h===58?(e.consume(h),r=0,u):(h===43||h===45||h===46||kl(h))&&r++<32?(e.consume(h),a):(r=0,l(h))}function u(h){return h===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):h===null||h===32||h===60||sz(h)?n(h):(e.consume(h),u)}function l(h){return h===64?(e.consume(h),c):ctt(h)?(e.consume(h),l):n(h)}function c(h){return kl(h)?f(h):n(h)}function f(h){return h===46?(e.consume(h),r=0,c):h===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(h),e.exit("autolinkMarker"),e.exit("autolink"),t):d(h)}function d(h){if((h===45||kl(h))&&r++<63){const p=h===45?d:f;return e.consume(h),p}return n(h)}}const z6={tokenize:Stt,partial:!0};function Stt(e,t,n){return r;function r(s){return _r(s)?si(e,i,"linePrefix")(s):i(s)}function i(s){return s===null||en(s)?t(s):n(s)}}const Dxe={name:"blockQuote",tokenize:Ttt,continuation:{tokenize:Att},exit:Ctt};function Ttt(e,t,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(e.enter("blockQuote",{_container:!0}),a.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(o),e.exit("blockQuoteMarker"),s}return n(o)}function s(o){return _r(o)?(e.enter("blockQuotePrefixWhitespace"),e.consume(o),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(o))}}function Att(e,t,n){const r=this;return i;function i(o){return _r(o)?si(e,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return e.attempt(Dxe,t,n)(o)}}function Ctt(e){e.exit("blockQuote")}const $xe={name:"characterEscape",tokenize:Itt};function Itt(e,t,n){return r;function r(s){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(s),e.exit("escapeMarker"),i}function i(s){return dtt(s)?(e.enter("characterEscapeValue"),e.consume(s),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(s)}}const Mxe={name:"characterReference",tokenize:ktt};function ktt(e,t,n){const r=this;let i=0,s,o;return a;function a(f){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),u}function u(f){return f===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(f),e.exit("characterReferenceMarkerNumeric"),l):(e.enter("characterReferenceValue"),s=31,o=kl,c(f))}function l(f){return f===88||f===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(f),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),s=6,o=ftt,c):(e.enter("characterReferenceValue"),s=7,o=oz,c(f))}function c(f){if(f===59&&i){const d=e.exit("characterReferenceValue");return o===kl&&!$K(r.sliceSerialize(d))?n(f):(e.enter("characterReferenceMarker"),e.consume(f),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return o(f)&&i++<s?(e.consume(f),c):n(f)}}const Lue={tokenize:Ntt,partial:!0},Fue={name:"codeFenced",tokenize:Rtt,concrete:!0};function Rtt(e,t,n){const r=this,i={tokenize:E,partial:!0};let s=0,o=0,a;return u;function u(T){return l(T)}function l(T){const S=r.events[r.events.length-1];return s=S&&S[1].type==="linePrefix"?S[2].sliceSerialize(S[1],!0).length:0,a=T,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),c(T)}function c(T){return T===a?(o++,e.consume(T),c):o<3?n(T):(e.exit("codeFencedFenceSequence"),_r(T)?si(e,f,"whitespace")(T):f(T))}function f(T){return T===null||en(T)?(e.exit("codeFencedFence"),r.interrupt?t(T):e.check(Lue,m,w)(T)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),d(T))}function d(T){return T===null||en(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),f(T)):_r(T)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),si(e,h,"whitespace")(T)):T===96&&T===a?n(T):(e.consume(T),d)}function h(T){return T===null||en(T)?f(T):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),p(T))}function p(T){return T===null||en(T)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),f(T)):T===96&&T===a?n(T):(e.consume(T),p)}function m(T){return e.attempt(i,w,g)(T)}function g(T){return e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),y}function y(T){return s>0&&_r(T)?si(e,v,"linePrefix",s+1)(T):v(T)}function v(T){return T===null||en(T)?e.check(Lue,m,w)(T):(e.enter("codeFlowValue"),b(T))}function b(T){return T===null||en(T)?(e.exit("codeFlowValue"),v(T)):(e.consume(T),b)}function w(T){return e.exit("codeFenced"),t(T)}function E(T,S,A){let C=0;return k;function k(F){return T.enter("lineEnding"),T.consume(F),T.exit("lineEnding"),N}function N(F){return T.enter("codeFencedFence"),_r(F)?si(T,D,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(F):D(F)}function D(F){return F===a?(T.enter("codeFencedFenceSequence"),O(F)):A(F)}function O(F){return F===a?(C++,T.consume(F),O):C>=o?(T.exit("codeFencedFenceSequence"),_r(F)?si(T,$,"whitespace")(F):$(F)):A(F)}function $(F){return F===null||en(F)?(T.exit("codeFencedFence"),S(F)):A(F)}}}function Ntt(e,t,n){const r=this;return i;function i(o){return o===null?n(o):(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}const $8={name:"codeIndented",tokenize:Ott},Ptt={tokenize:Dtt,partial:!0};function Ott(e,t,n){const r=this;return i;function i(l){return e.enter("codeIndented"),si(e,s,"linePrefix",5)(l)}function s(l){const c=r.events[r.events.length-1];return c&&c[1].type==="linePrefix"&&c[2].sliceSerialize(c[1],!0).length>=4?o(l):n(l)}function o(l){return l===null?u(l):en(l)?e.attempt(Ptt,o,u)(l):(e.enter("codeFlowValue"),a(l))}function a(l){return l===null||en(l)?(e.exit("codeFlowValue"),o(l)):(e.consume(l),a)}function u(l){return e.exit("codeIndented"),t(l)}}function Dtt(e,t,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),i):si(e,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):en(o)?i(o):n(o)}}const $tt={name:"codeText",tokenize:Ftt,resolve:Mtt,previous:Ltt};function Mtt(e){let t=e.length-4,n=3,r,i;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)i===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(i=r):(r===t||e[r][1].type==="lineEnding")&&(e[i][1].type="codeTextData",r!==i+2&&(e[i][1].end=e[r-1][1].end,e.splice(i+2,r-i-2),t-=r-i-2,r=i+2),i=void 0);return e}function Ltt(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function Ftt(e,t,n){let r=0,i,s;return o;function o(f){return e.enter("codeText"),e.enter("codeTextSequence"),a(f)}function a(f){return f===96?(e.consume(f),r++,a):(e.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(e.enter("space"),e.consume(f),e.exit("space"),u):f===96?(s=e.enter("codeTextSequence"),i=0,c(f)):en(f)?(e.enter("lineEnding"),e.consume(f),e.exit("lineEnding"),u):(e.enter("codeTextData"),l(f))}function l(f){return f===null||f===32||f===96||en(f)?(e.exit("codeTextData"),u(f)):(e.consume(f),l)}function c(f){return f===96?(e.consume(f),i++,c):i===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(f)):(s.type="codeTextData",l(f))}}class jtt{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const i=n||0;this.setCursor(Math.trunc(t));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&VT(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),VT(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),VT(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);VT(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);VT(this.left,n.reverse())}}}function VT(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Lxe(e){const t={};let n=-1,r,i,s,o,a,u,l;const c=new jtt(e);for(;++n<c.length;){for(;n in t;)n=t[n];if(r=c.get(n),n&&r[1].type==="chunkFlow"&&c.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,Btt(c,n)),n=t[n],l=!0);else if(r[1]._container){for(s=n,i=void 0;s--&&(o=c.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank");)o[0]==="enter"&&(i&&(c.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);i&&(r[1].end=Object.assign({},c.get(i)[1].start),a=c.slice(i,n),a.unshift(r),c.splice(i,n-i+1,a))}}return km(e,0,Number.POSITIVE_INFINITY,c.slice(0)),!l}function Btt(e,t){const n=e.get(t)[1],r=e.get(t)[2];let i=t-1;const s=[],o=n._tokenizer||r.parser[n.contentType](n.start),a=o.events,u=[],l={};let c,f,d=-1,h=n,p=0,m=0;const g=[m];for(;h;){for(;e.get(++i)[1]!==h;);s.push(i),h._tokenizer||(c=r.sliceStream(h),h.next||c.push(null),f&&o.defineSkip(h.start),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(c),h._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=h,h=h.next}for(h=n;++d<a.length;)a[d][0]==="exit"&&a[d-1][0]==="enter"&&a[d][1].type===a[d-1][1].type&&a[d][1].start.line!==a[d][1].end.line&&(m=d+1,g.push(m),h._tokenizer=void 0,h.previous=void 0,h=h.next);for(o.events=[],h?(h._tokenizer=void 0,h.previous=void 0):g.pop(),d=g.length;d--;){const y=a.slice(g[d],g[d+1]),v=s.pop();u.push([v,v+y.length-1]),e.splice(v,2,y)}for(u.reverse(),d=-1;++d<u.length;)l[p+u[d][0]]=p+u[d][1],p+=u[d][1]-u[d][0]-1;return l}const Utt={tokenize:Htt,resolve:Vtt},ztt={tokenize:qtt,partial:!0};function Vtt(e){return Lxe(e),e}function Htt(e,t){let n;return r;function r(a){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):en(a)?e.check(ztt,o,s)(a):(e.consume(a),i)}function s(a){return e.exit("chunkContent"),e.exit("content"),t(a)}function o(a){return e.consume(a),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function qtt(e,t,n){const r=this;return i;function i(o){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),si(e,s,"linePrefix")}function s(o){if(o===null||en(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?t(o):e.interrupt(r.parser.constructs.flow,n,t)(o)}}function Fxe(e,t,n,r,i,s,o,a,u){const l=u||Number.POSITIVE_INFINITY;let c=0;return f;function f(y){return y===60?(e.enter(r),e.enter(i),e.enter(s),e.consume(y),e.exit(s),d):y===null||y===32||y===41||sz(y)?n(y):(e.enter(r),e.enter(o),e.enter(a),e.enter("chunkString",{contentType:"string"}),m(y))}function d(y){return y===62?(e.enter(s),e.consume(y),e.exit(s),e.exit(i),e.exit(r),t):(e.enter(a),e.enter("chunkString",{contentType:"string"}),h(y))}function h(y){return y===62?(e.exit("chunkString"),e.exit(a),d(y)):y===null||y===60||en(y)?n(y):(e.consume(y),y===92?p:h)}function p(y){return y===60||y===62||y===92?(e.consume(y),h):h(y)}function m(y){return!c&&(y===null||y===41||Yu(y))?(e.exit("chunkString"),e.exit(a),e.exit(o),e.exit(r),t(y)):c<l&&y===40?(e.consume(y),c++,m):y===41?(e.consume(y),c--,m):y===null||y===32||y===40||sz(y)?n(y):(e.consume(y),y===92?g:m)}function g(y){return y===40||y===41||y===92?(e.consume(y),m):m(y)}}function jxe(e,t,n,r,i,s){const o=this;let a=0,u;return l;function l(h){return e.enter(r),e.enter(i),e.consume(h),e.exit(i),e.enter(s),c}function c(h){return a>999||h===null||h===91||h===93&&!u||h===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(h):h===93?(e.exit(s),e.enter(i),e.consume(h),e.exit(i),e.exit(r),t):en(h)?(e.enter("lineEnding"),e.consume(h),e.exit("lineEnding"),c):(e.enter("chunkString",{contentType:"string"}),f(h))}function f(h){return h===null||h===91||h===93||en(h)||a++>999?(e.exit("chunkString"),c(h)):(e.consume(h),u||(u=!_r(h)),h===92?d:f)}function d(h){return h===91||h===92||h===93?(e.consume(h),a++,f):f(h)}}function Bxe(e,t,n,r,i,s){let o;return a;function a(d){return d===34||d===39||d===40?(e.enter(r),e.enter(i),e.consume(d),e.exit(i),o=d===40?41:d,u):n(d)}function u(d){return d===o?(e.enter(i),e.consume(d),e.exit(i),e.exit(r),t):(e.enter(s),l(d))}function l(d){return d===o?(e.exit(s),u(o)):d===null?n(d):en(d)?(e.enter("lineEnding"),e.consume(d),e.exit("lineEnding"),si(e,l,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),c(d))}function c(d){return d===o||d===null||en(d)?(e.exit("chunkString"),l(d)):(e.consume(d),d===92?f:c)}function f(d){return d===o||d===92?(e.consume(d),c):c(d)}}function jC(e,t){let n;return r;function r(i){return en(i)?(e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),n=!0,r):_r(i)?si(e,r,n?"linePrefix":"lineSuffix")(i):t(i)}}const Wtt={name:"definition",tokenize:Ytt},Gtt={tokenize:Ktt,partial:!0};function Ytt(e,t,n){const r=this;let i;return s;function s(h){return e.enter("definition"),o(h)}function o(h){return jxe.call(r,e,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(h)}function a(h){return i=hE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),h===58?(e.enter("definitionMarker"),e.consume(h),e.exit("definitionMarker"),u):n(h)}function u(h){return Yu(h)?jC(e,l)(h):l(h)}function l(h){return Fxe(e,c,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(h)}function c(h){return e.attempt(Gtt,f,f)(h)}function f(h){return _r(h)?si(e,d,"whitespace")(h):d(h)}function d(h){return h===null||en(h)?(e.exit("definition"),r.parser.defined.push(i),t(h)):n(h)}}function Ktt(e,t,n){return r;function r(a){return Yu(a)?jC(e,i)(a):n(a)}function i(a){return Bxe(e,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return _r(a)?si(e,o,"whitespace")(a):o(a)}function o(a){return a===null||en(a)?t(a):n(a)}}const Xtt={name:"hardBreakEscape",tokenize:Qtt};function Qtt(e,t,n){return r;function r(s){return e.enter("hardBreakEscape"),e.consume(s),i}function i(s){return en(s)?(e.exit("hardBreakEscape"),t(s)):n(s)}}const Jtt={name:"headingAtx",tokenize:ent,resolve:Ztt};function Ztt(e,t){let n=e.length-2,r=3,i,s;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},s={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},km(e,r,n-r+1,[["enter",i,t],["enter",s,t],["exit",s,t],["exit",i,t]])),e}function ent(e,t,n){let r=0;return i;function i(c){return e.enter("atxHeading"),s(c)}function s(c){return e.enter("atxHeadingSequence"),o(c)}function o(c){return c===35&&r++<6?(e.consume(c),o):c===null||Yu(c)?(e.exit("atxHeadingSequence"),a(c)):n(c)}function a(c){return c===35?(e.enter("atxHeadingSequence"),u(c)):c===null||en(c)?(e.exit("atxHeading"),t(c)):_r(c)?si(e,a,"whitespace")(c):(e.enter("atxHeadingText"),l(c))}function u(c){return c===35?(e.consume(c),u):(e.exit("atxHeadingSequence"),a(c))}function l(c){return c===null||c===35||Yu(c)?(e.exit("atxHeadingText"),a(c)):(e.consume(c),l)}}const tnt=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],jue=["pre","script","style","textarea"],nnt={name:"htmlFlow",tokenize:ont,resolveTo:snt,concrete:!0},rnt={tokenize:unt,partial:!0},int={tokenize:ant,partial:!0};function snt(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function ont(e,t,n){const r=this;let i,s,o,a,u;return l;function l(j){return c(j)}function c(j){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(j),f}function f(j){return j===33?(e.consume(j),d):j===47?(e.consume(j),s=!0,m):j===63?(e.consume(j),i=3,r.interrupt?t:P):qd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function d(j){return j===45?(e.consume(j),i=2,h):j===91?(e.consume(j),i=5,a=0,p):qd(j)?(e.consume(j),i=4,r.interrupt?t:P):n(j)}function h(j){return j===45?(e.consume(j),r.interrupt?t:P):n(j)}function p(j){const q="CDATA[";return j===q.charCodeAt(a++)?(e.consume(j),a===q.length?r.interrupt?t:D:p):n(j)}function m(j){return qd(j)?(e.consume(j),o=String.fromCharCode(j),g):n(j)}function g(j){if(j===null||j===47||j===62||Yu(j)){const q=j===47,G=o.toLowerCase();return!q&&!s&&jue.includes(G)?(i=1,r.interrupt?t(j):D(j)):tnt.includes(o.toLowerCase())?(i=6,q?(e.consume(j),y):r.interrupt?t(j):D(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?v(j):b(j))}return j===45||kl(j)?(e.consume(j),o+=String.fromCharCode(j),g):n(j)}function y(j){return j===62?(e.consume(j),r.interrupt?t:D):n(j)}function v(j){return _r(j)?(e.consume(j),v):k(j)}function b(j){return j===47?(e.consume(j),k):j===58||j===95||qd(j)?(e.consume(j),w):_r(j)?(e.consume(j),b):k(j)}function w(j){return j===45||j===46||j===58||j===95||kl(j)?(e.consume(j),w):E(j)}function E(j){return j===61?(e.consume(j),T):_r(j)?(e.consume(j),E):b(j)}function T(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(e.consume(j),u=j,S):_r(j)?(e.consume(j),T):A(j)}function S(j){return j===u?(e.consume(j),u=null,C):j===null||en(j)?n(j):(e.consume(j),S)}function A(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||Yu(j)?E(j):(e.consume(j),A)}function C(j){return j===47||j===62||_r(j)?b(j):n(j)}function k(j){return j===62?(e.consume(j),N):n(j)}function N(j){return j===null||en(j)?D(j):_r(j)?(e.consume(j),N):n(j)}function D(j){return j===45&&i===2?(e.consume(j),M):j===60&&i===1?(e.consume(j),B):j===62&&i===4?(e.consume(j),z):j===63&&i===3?(e.consume(j),P):j===93&&i===5?(e.consume(j),H):en(j)&&(i===6||i===7)?(e.exit("htmlFlowData"),e.check(rnt,W,O)(j)):j===null||en(j)?(e.exit("htmlFlowData"),O(j)):(e.consume(j),D)}function O(j){return e.check(int,$,W)(j)}function $(j){return e.enter("lineEnding"),e.consume(j),e.exit("lineEnding"),F}function F(j){return j===null||en(j)?O(j):(e.enter("htmlFlowData"),D(j))}function M(j){return j===45?(e.consume(j),P):D(j)}function B(j){return j===47?(e.consume(j),o="",U):D(j)}function U(j){if(j===62){const q=o.toLowerCase();return jue.includes(q)?(e.consume(j),z):D(j)}return qd(j)&&o.length<8?(e.consume(j),o+=String.fromCharCode(j),U):D(j)}function H(j){return j===93?(e.consume(j),P):D(j)}function P(j){return j===62?(e.consume(j),z):j===45&&i===2?(e.consume(j),P):D(j)}function z(j){return j===null||en(j)?(e.exit("htmlFlowData"),W(j)):(e.consume(j),z)}function W(j){return e.exit("htmlFlow"),t(j)}}function ant(e,t,n){const r=this;return i;function i(o){return en(o)?(e.enter("lineEnding"),e.consume(o),e.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):t(o)}}function unt(e,t,n){return r;function r(i){return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),e.attempt(z6,t,n)}}const lnt={name:"htmlText",tokenize:cnt};function cnt(e,t,n){const r=this;let i,s,o;return a;function a(P){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(P),u}function u(P){return P===33?(e.consume(P),l):P===47?(e.consume(P),E):P===63?(e.consume(P),b):qd(P)?(e.consume(P),A):n(P)}function l(P){return P===45?(e.consume(P),c):P===91?(e.consume(P),s=0,p):qd(P)?(e.consume(P),v):n(P)}function c(P){return P===45?(e.consume(P),h):n(P)}function f(P){return P===null?n(P):P===45?(e.consume(P),d):en(P)?(o=f,B(P)):(e.consume(P),f)}function d(P){return P===45?(e.consume(P),h):f(P)}function h(P){return P===62?M(P):P===45?d(P):f(P)}function p(P){const z="CDATA[";return P===z.charCodeAt(s++)?(e.consume(P),s===z.length?m:p):n(P)}function m(P){return P===null?n(P):P===93?(e.consume(P),g):en(P)?(o=m,B(P)):(e.consume(P),m)}function g(P){return P===93?(e.consume(P),y):m(P)}function y(P){return P===62?M(P):P===93?(e.consume(P),y):m(P)}function v(P){return P===null||P===62?M(P):en(P)?(o=v,B(P)):(e.consume(P),v)}function b(P){return P===null?n(P):P===63?(e.consume(P),w):en(P)?(o=b,B(P)):(e.consume(P),b)}function w(P){return P===62?M(P):b(P)}function E(P){return qd(P)?(e.consume(P),T):n(P)}function T(P){return P===45||kl(P)?(e.consume(P),T):S(P)}function S(P){return en(P)?(o=S,B(P)):_r(P)?(e.consume(P),S):M(P)}function A(P){return P===45||kl(P)?(e.consume(P),A):P===47||P===62||Yu(P)?C(P):n(P)}function C(P){return P===47?(e.consume(P),M):P===58||P===95||qd(P)?(e.consume(P),k):en(P)?(o=C,B(P)):_r(P)?(e.consume(P),C):M(P)}function k(P){return P===45||P===46||P===58||P===95||kl(P)?(e.consume(P),k):N(P)}function N(P){return P===61?(e.consume(P),D):en(P)?(o=N,B(P)):_r(P)?(e.consume(P),N):C(P)}function D(P){return P===null||P===60||P===61||P===62||P===96?n(P):P===34||P===39?(e.consume(P),i=P,O):en(P)?(o=D,B(P)):_r(P)?(e.consume(P),D):(e.consume(P),$)}function O(P){return P===i?(e.consume(P),i=void 0,F):P===null?n(P):en(P)?(o=O,B(P)):(e.consume(P),O)}function $(P){return P===null||P===34||P===39||P===60||P===61||P===96?n(P):P===47||P===62||Yu(P)?C(P):(e.consume(P),$)}function F(P){return P===47||P===62||Yu(P)?C(P):n(P)}function M(P){return P===62?(e.consume(P),e.exit("htmlTextData"),e.exit("htmlText"),t):n(P)}function B(P){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(P),e.exit("lineEnding"),U}function U(P){return _r(P)?si(e,H,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(P):H(P)}function H(P){return e.enter("htmlTextData"),o(P)}}const LK={name:"labelEnd",tokenize:gnt,resolveTo:mnt,resolveAll:pnt},fnt={tokenize:ynt},dnt={tokenize:vnt},hnt={tokenize:bnt};function pnt(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function mnt(e,t){let n=e.length,r=0,i,s,o,a;for(;n--;)if(i=e[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;e[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(e[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:e[s][1].type==="labelLink"?"link":"image",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)},l={type:"label",start:Object.assign({},e[s][1].start),end:Object.assign({},e[o][1].end)},c={type:"labelText",start:Object.assign({},e[s+r+2][1].end),end:Object.assign({},e[o-2][1].start)};return a=[["enter",u,t],["enter",l,t]],a=_c(a,e.slice(s+1,s+r+3)),a=_c(a,[["enter",c,t]]),a=_c(a,MK(t.parser.constructs.insideSpan.null,e.slice(s+r+4,o-3),t)),a=_c(a,[["exit",c,t],e[o-2],e[o-1],["exit",l,t]]),a=_c(a,e.slice(o+1)),a=_c(a,[["exit",u,t]]),km(e,s,e.length,a),e}function gnt(e,t,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(d){return s?s._inactive?f(d):(o=r.parser.defined.includes(hE(r.sliceSerialize({start:s.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(d),e.exit("labelMarker"),e.exit("labelEnd"),u):n(d)}function u(d){return d===40?e.attempt(fnt,c,o?c:f)(d):d===91?e.attempt(dnt,c,o?l:f)(d):o?c(d):f(d)}function l(d){return e.attempt(hnt,c,f)(d)}function c(d){return t(d)}function f(d){return s._balanced=!0,n(d)}}function ynt(e,t,n){return r;function r(f){return e.enter("resource"),e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),i}function i(f){return Yu(f)?jC(e,s)(f):s(f)}function s(f){return f===41?c(f):Fxe(e,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return Yu(f)?jC(e,u)(f):c(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?Bxe(e,l,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):c(f)}function l(f){return Yu(f)?jC(e,c)(f):c(f)}function c(f){return f===41?(e.enter("resourceMarker"),e.consume(f),e.exit("resourceMarker"),e.exit("resource"),t):n(f)}}function vnt(e,t,n){const r=this;return i;function i(a){return jxe.call(r,e,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(hE(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(a):n(a)}function o(a){return n(a)}}function bnt(e,t,n){return r;function r(s){return e.enter("reference"),e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),i}function i(s){return s===93?(e.enter("referenceMarker"),e.consume(s),e.exit("referenceMarker"),e.exit("reference"),t):n(s)}}const _nt={name:"labelStartImage",tokenize:wnt,resolveAll:LK.resolveAll};function wnt(e,t,n){const r=this;return i;function i(a){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(a),e.exit("labelImageMarker"),s}function s(a){return a===91?(e.enter("labelMarker"),e.consume(a),e.exit("labelMarker"),e.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):t(a)}}const Ent={name:"labelStartLink",tokenize:xnt,resolveAll:LK.resolveAll};function xnt(e,t,n){const r=this;return i;function i(o){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(o),e.exit("labelMarker"),e.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):t(o)}}const M8={name:"lineEnding",tokenize:Snt};function Snt(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),si(e,t,"linePrefix")}}const DO={name:"thematicBreak",tokenize:Tnt};function Tnt(e,t,n){let r=0,i;return s;function s(l){return e.enter("thematicBreak"),o(l)}function o(l){return i=l,a(l)}function a(l){return l===i?(e.enter("thematicBreakSequence"),u(l)):r>=3&&(l===null||en(l))?(e.exit("thematicBreak"),t(l)):n(l)}function u(l){return l===i?(e.consume(l),r++,u):(e.exit("thematicBreakSequence"),_r(l)?si(e,a,"whitespace")(l):a(l))}}const _u={name:"list",tokenize:Int,continuation:{tokenize:knt},exit:Nnt},Ant={tokenize:Pnt,partial:!0},Cnt={tokenize:Rnt,partial:!0};function Int(e,t,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(h){const p=r.containerState.type||(h===42||h===43||h===45?"listUnordered":"listOrdered");if(p==="listUnordered"?!r.containerState.marker||h===r.containerState.marker:oz(h)){if(r.containerState.type||(r.containerState.type=p,e.enter(p,{_container:!0})),p==="listUnordered")return e.enter("listItemPrefix"),h===42||h===45?e.check(DO,n,l)(h):l(h);if(!r.interrupt||h===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),u(h)}return n(h)}function u(h){return oz(h)&&++o<10?(e.consume(h),u):(!r.interrupt||o<2)&&(r.containerState.marker?h===r.containerState.marker:h===41||h===46)?(e.exit("listItemValue"),l(h)):n(h)}function l(h){return e.enter("listItemMarker"),e.consume(h),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||h,e.check(z6,r.interrupt?n:c,e.attempt(Ant,d,f))}function c(h){return r.containerState.initialBlankLine=!0,s++,d(h)}function f(h){return _r(h)?(e.enter("listItemPrefixWhitespace"),e.consume(h),e.exit("listItemPrefixWhitespace"),d):n(h)}function d(h){return r.containerState.size=s+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(h)}}function knt(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(z6,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,si(e,t,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!_r(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(Cnt,t,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,si(e,e.attempt(_u,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function Rnt(e,t,n){const r=this;return si(e,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?t(s):n(s)}}function Nnt(e){e.exit(this.containerState.type)}function Pnt(e,t,n){const r=this;return si(e,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!_r(s)&&o&&o[1].type==="listItemPrefixWhitespace"?t(s):n(s)}}const Bue={name:"setextUnderline",tokenize:Dnt,resolveTo:Ont};function Ont(e,t){let n=e.length,r,i,s;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(i=n)}else e[n][1].type==="content"&&e.splice(n,1),!s&&e[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:Object.assign({},e[i][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[i][1].type="setextHeadingText",s?(e.splice(i,0,["enter",o,t]),e.splice(s+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[s][1].end)):e[r][1]=o,e.push(["exit",o,t]),e}function Dnt(e,t,n){const r=this;let i;return s;function s(l){let c=r.events.length,f;for(;c--;)if(r.events[c][1].type!=="lineEnding"&&r.events[c][1].type!=="linePrefix"&&r.events[c][1].type!=="content"){f=r.events[c][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(e.enter("setextHeadingLine"),i=l,o(l)):n(l)}function o(l){return e.enter("setextHeadingLineSequence"),a(l)}function a(l){return l===i?(e.consume(l),a):(e.exit("setextHeadingLineSequence"),_r(l)?si(e,u,"lineSuffix")(l):u(l))}function u(l){return l===null||en(l)?(e.exit("setextHeadingLine"),t(l)):n(l)}}const $nt={tokenize:Mnt};function Mnt(e){const t=this,n=e.attempt(z6,r,e.attempt(this.parser.constructs.flowInitial,i,si(e,e.attempt(this.parser.constructs.flow,i,e.attempt(Utt,i)),"linePrefix")));return n;function r(s){if(s===null){e.consume(s);return}return e.enter("lineEndingBlank"),e.consume(s),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function i(s){if(s===null){e.consume(s);return}return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const Lnt={resolveAll:zxe()},Fnt=Uxe("string"),jnt=Uxe("text");function Uxe(e){return{tokenize:t,resolveAll:zxe(e==="text"?Bnt:void 0)};function t(n){const r=this,i=this.parser.constructs[e],s=n.attempt(i,o,a);return o;function o(c){return l(c)?s(c):a(c)}function a(c){if(c===null){n.consume(c);return}return n.enter("data"),n.consume(c),u}function u(c){return l(c)?(n.exit("data"),s(c)):(n.consume(c),u)}function l(c){if(c===null)return!0;const f=i[c];let d=-1;if(f)for(;++d<f.length;){const h=f[d];if(!h.previous||h.previous.call(r,r.previous))return!0}return!1}}}function zxe(e){return t;function t(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return e?e(n,r):n}}function Bnt(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],i=t.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const l=i[s];if(typeof l=="string"){for(o=l.length;l.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(l===-2)u=!0,a++;else if(l!==-1){s++;break}}if(a){const l={type:n===e.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-a,offset:r.end.offset-a,_index:r.start._index+s,_bufferIndex:s?o:r.start._bufferIndex+o},end:Object.assign({},r.end)};r.end=Object.assign({},l.start),r.start.offset===r.end.offset?Object.assign(r,l):(e.splice(n,0,["enter",l,t],["exit",l,t]),n+=2)}n++}return e}function Unt(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const i={},s=[];let o=[],a=[];const u={consume:v,enter:b,exit:w,attempt:S(E),check:S(T),interrupt:S(T,{interrupt:!0})},l={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:h,sliceSerialize:d,now:p,defineSkip:m,write:f};let c=t.tokenize.call(l,u);return t.resolveAll&&s.push(t),l;function f(N){return o=_c(o,N),g(),o[o.length-1]!==null?[]:(A(t,0),l.events=MK(s,l.events,l),l.events)}function d(N,D){return Vnt(h(N),D)}function h(N){return znt(o,N)}function p(){const{line:N,column:D,offset:O,_index:$,_bufferIndex:F}=r;return{line:N,column:D,offset:O,_index:$,_bufferIndex:F}}function m(N){i[N.line]=N.column,k()}function g(){let N;for(;r._index<o.length;){const D=o[r._index];if(typeof D=="string")for(N=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===N&&r._bufferIndex<D.length;)y(D.charCodeAt(r._bufferIndex));else y(D)}}function y(N){c=c(N)}function v(N){en(N)?(r.line++,r.column=1,r.offset+=N===-3?2:1,k()):N!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),l.previous=N}function b(N,D){const O=D||{};return O.type=N,O.start=p(),l.events.push(["enter",O,l]),a.push(O),O}function w(N){const D=a.pop();return D.end=p(),l.events.push(["exit",D,l]),D}function E(N,D){A(N,D.from)}function T(N,D){D.restore()}function S(N,D){return O;function O($,F,M){let B,U,H,P;return Array.isArray($)?W($):"tokenize"in $?W([$]):z($);function z(ne){return ce;function ce(de){const he=de!==null&&ne[de],ve=de!==null&&ne.null,Ie=[...Array.isArray(he)?he:he?[he]:[],...Array.isArray(ve)?ve:ve?[ve]:[]];return W(Ie)(de)}}function W(ne){return B=ne,U=0,ne.length===0?M:j(ne[U])}function j(ne){return ce;function ce(de){return P=C(),H=ne,ne.partial||(l.currentConstruct=ne),ne.name&&l.parser.constructs.disable.null.includes(ne.name)?G():ne.tokenize.call(D?Object.assign(Object.create(l),D):l,u,q,G)(de)}}function q(ne){return N(H,P),F}function G(ne){return P.restore(),++U<B.length?j(B[U]):M}}}function A(N,D){N.resolveAll&&!s.includes(N)&&s.push(N),N.resolve&&km(l.events,D,l.events.length-D,N.resolve(l.events.slice(D),l)),N.resolveTo&&(l.events=N.resolveTo(l.events,l))}function C(){const N=p(),D=l.previous,O=l.currentConstruct,$=l.events.length,F=Array.from(a);return{restore:M,from:$};function M(){r=N,l.previous=D,l.currentConstruct=O,l.events.length=$,a=F,k()}}function k(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function znt(e,t){const n=t.start._index,r=t.start._bufferIndex,i=t.end._index,s=t.end._bufferIndex;let o;if(n===i)o=[e[n].slice(r,s)];else{if(o=e.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(e[i].slice(0,s))}return o}function Vnt(e,t){let n=-1;const r=[];let i;for(;++n<e.length;){const s=e[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=t?" ":"	";break}case-1:{if(!t&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}const Hnt={42:_u,43:_u,45:_u,48:_u,49:_u,50:_u,51:_u,52:_u,53:_u,54:_u,55:_u,56:_u,57:_u,62:Dxe},qnt={91:Wtt},Wnt={[-2]:$8,[-1]:$8,32:$8},Gnt={35:Jtt,42:DO,45:[Bue,DO],60:nnt,61:Bue,95:DO,96:Fue,126:Fue},Ynt={38:Mxe,92:$xe},Knt={[-5]:M8,[-4]:M8,[-3]:M8,33:_nt,38:Mxe,42:az,60:[Ett,lnt],91:Ent,92:[Xtt,$xe],93:LK,95:az,96:$tt},Xnt={null:[az,Lnt]},Qnt={null:[42,95]},Jnt={null:[]},Znt=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:Qnt,contentInitial:qnt,disable:Jnt,document:Hnt,flow:Gnt,flowInitial:Wnt,insideSpan:Xnt,string:Ynt,text:Knt},Symbol.toStringTag,{value:"Module"}));function ert(e){const n=att([Znt,...(e||{}).extensions||[]]),r={defined:[],lazy:{},constructs:n,content:i(mtt),document:i(ytt),flow:i($nt),string:i(Fnt),text:i(jnt)};return r;function i(s){return o;function o(a){return Unt(r,s,a)}}}function trt(e){for(;!Lxe(e););return e}const Uue=/[\0\t\n\r]/g;function nrt(){let e=1,t="",n=!0,r;return i;function i(s,o,a){const u=[];let l,c,f,d,h;for(s=t+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,t="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(Uue.lastIndex=f,l=Uue.exec(s),d=l&&l.index!==void 0?l.index:s.length,h=s.charCodeAt(d),!l){t=s.slice(f);break}if(h===10&&f===d&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<d&&(u.push(s.slice(f,d)),e+=d-f),h){case 0:{u.push(65533),e++;break}case 9:{for(c=Math.ceil(e/4)*4,u.push(-2);e++<c;)u.push(-1);break}case 10:{u.push(-4),e=1;break}default:r=!0,e=1}f=d+1}return a&&(r&&u.push(-5),t&&u.push(t),u.push(null)),u}}const rrt=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function irt(e){return e.replace(rrt,srt)}function srt(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return Oxe(n.slice(s?2:1),s?16:10)}return $K(n)||e}const Vxe={}.hasOwnProperty;function ort(e,t,n){return typeof t!="string"&&(n=t,t=void 0),art(n)(trt(ert(n).document().write(nrt()(e,t,!0))))}function art(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(Ve),autolinkProtocol:C,autolinkEmail:C,atxHeading:s(yt),blockQuote:s(ve),characterEscape:C,characterReference:C,codeFenced:s(Ie),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(Ie,o),codeText:s(be,o),codeTextData:C,data:C,codeFlowValue:C,definition:s(Xe),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(ze),hardBreakEscape:s(it),hardBreakTrailing:s(it),htmlFlow:s(_e,o),htmlFlowData:C,htmlText:s(_e,o),htmlTextData:C,image:s(ke),label:o,link:s(Ve),listItem:s(Dt),listItemValue:d,listOrdered:s(ct,f),listUnordered:s(ct),paragraph:s(Ge),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(yt),strong:s(ge),thematicBreak:s(vt)},exit:{atxHeading:u(),atxHeadingSequence:E,autolink:u(),autolinkEmail:he,autolinkProtocol:de,blockQuote:u(),characterEscapeValue:k,characterReferenceMarkerHexadecimal:G,characterReferenceMarkerNumeric:G,characterReferenceValue:ne,characterReference:ce,codeFenced:u(g),codeFencedFence:m,codeFencedFenceInfo:h,codeFencedFenceMeta:p,codeFlowValue:k,codeIndented:u(y),codeText:u(F),codeTextData:k,data:k,definition:u(),definitionDestinationString:w,definitionLabelString:v,definitionTitleString:b,emphasis:u(),hardBreakEscape:u(D),hardBreakTrailing:u(D),htmlFlow:u(O),htmlFlowData:k,htmlText:u($),htmlTextData:k,image:u(B),label:H,labelText:U,lineEnding:N,link:u(M),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:q,resourceDestinationString:P,resourceTitleString:z,resource:W,setextHeading:u(A),setextHeadingLineSequence:S,setextHeadingText:T,strong:u(),thematicBreak:u()}};Hxe(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(pe){let Ce={type:"root",children:[]};const qe={stack:[Ce],tokenStack:[],config:t,enter:a,exit:l,buffer:o,resume:c,data:n},ut=[];let _t=-1;for(;++_t<pe.length;)if(pe[_t][1].type==="listOrdered"||pe[_t][1].type==="listUnordered")if(pe[_t][0]==="enter")ut.push(_t);else{const Fn=ut.pop();_t=i(pe,Fn,_t)}for(_t=-1;++_t<pe.length;){const Fn=t[pe[_t][0]];Vxe.call(Fn,pe[_t][1].type)&&Fn[pe[_t][1].type].call(Object.assign({sliceSerialize:pe[_t][2].sliceSerialize},qe),pe[_t][1])}if(qe.tokenStack.length>0){const Fn=qe.tokenStack[qe.tokenStack.length-1];(Fn[1]||zue).call(qe,void 0,Fn[0])}for(Ce.position={start:Ag(pe.length>0?pe[0][1].start:{line:1,column:1,offset:0}),end:Ag(pe.length>0?pe[pe.length-2][1].end:{line:1,column:1,offset:0})},_t=-1;++_t<t.transforms.length;)Ce=t.transforms[_t](Ce)||Ce;return Ce}function i(pe,Ce,qe){let ut=Ce-1,_t=-1,Fn=!1,Ir,jn,dr,yn;for(;++ut<=qe;){const In=pe[ut];switch(In[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{In[0]==="enter"?_t++:_t--,yn=void 0;break}case"lineEndingBlank":{In[0]==="enter"&&(Ir&&!yn&&!_t&&!dr&&(dr=ut),yn=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:yn=void 0}if(!_t&&In[0]==="enter"&&In[1].type==="listItemPrefix"||_t===-1&&In[0]==="exit"&&(In[1].type==="listUnordered"||In[1].type==="listOrdered")){if(Ir){let ir=ut;for(jn=void 0;ir--;){const sr=pe[ir];if(sr[1].type==="lineEnding"||sr[1].type==="lineEndingBlank"){if(sr[0]==="exit")continue;jn&&(pe[jn][1].type="lineEndingBlank",Fn=!0),sr[1].type="lineEnding",jn=ir}else if(!(sr[1].type==="linePrefix"||sr[1].type==="blockQuotePrefix"||sr[1].type==="blockQuotePrefixWhitespace"||sr[1].type==="blockQuoteMarker"||sr[1].type==="listItemIndent"))break}dr&&(!jn||dr<jn)&&(Ir._spread=!0),Ir.end=Object.assign({},jn?pe[jn][1].start:In[1].end),pe.splice(jn||ut,0,["exit",Ir,In[2]]),ut++,qe++}if(In[1].type==="listItemPrefix"){const ir={type:"listItem",_spread:!1,start:Object.assign({},In[1].start),end:void 0};Ir=ir,pe.splice(ut,0,["enter",ir,In[2]]),ut++,qe++,dr=void 0,yn=!0}}}return pe[Ce][1]._spread=Fn,qe}function s(pe,Ce){return qe;function qe(ut){a.call(this,pe(ut),ut),Ce&&Ce.call(this,ut)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(pe,Ce,qe){this.stack[this.stack.length-1].children.push(pe),this.stack.push(pe),this.tokenStack.push([Ce,qe]),pe.position={start:Ag(Ce.start),end:void 0}}function u(pe){return Ce;function Ce(qe){pe&&pe.call(this,qe),l.call(this,qe)}}function l(pe,Ce){const qe=this.stack.pop(),ut=this.tokenStack.pop();if(ut)ut[0].type!==pe.type&&(Ce?Ce.call(this,pe,ut[0]):(ut[1]||zue).call(this,pe,ut[0]));else throw new Error("Cannot close `"+pe.type+"` ("+FC({start:pe.start,end:pe.end})+"): its not open");qe.position.end=Ag(pe.end)}function c(){return stt(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function d(pe){if(this.data.expectingFirstListItemValue){const Ce=this.stack[this.stack.length-2];Ce.start=Number.parseInt(this.sliceSerialize(pe),10),this.data.expectingFirstListItemValue=void 0}}function h(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.lang=pe}function p(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.meta=pe}function m(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function g(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function y(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe.replace(/(\r?\n|\r)$/g,"")}function v(pe){const Ce=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Ce,qe.identifier=hE(this.sliceSerialize(pe)).toLowerCase()}function b(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function w(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function E(pe){const Ce=this.stack[this.stack.length-1];if(!Ce.depth){const qe=this.sliceSerialize(pe).length;Ce.depth=qe}}function T(){this.data.setextHeadingSlurpLineEnding=!0}function S(pe){const Ce=this.stack[this.stack.length-1];Ce.depth=this.sliceSerialize(pe).codePointAt(0)===61?1:2}function A(){this.data.setextHeadingSlurpLineEnding=void 0}function C(pe){const qe=this.stack[this.stack.length-1].children;let ut=qe[qe.length-1];(!ut||ut.type!=="text")&&(ut=ht(),ut.position={start:Ag(pe.start),end:void 0},qe.push(ut)),this.stack.push(ut)}function k(pe){const Ce=this.stack.pop();Ce.value+=this.sliceSerialize(pe),Ce.position.end=Ag(pe.end)}function N(pe){const Ce=this.stack[this.stack.length-1];if(this.data.atHardBreak){const qe=Ce.children[Ce.children.length-1];qe.position.end=Ag(pe.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(Ce.type)&&(C.call(this,pe),k.call(this,pe))}function D(){this.data.atHardBreak=!0}function O(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function $(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function F(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.value=pe}function M(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function B(){const pe=this.stack[this.stack.length-1];if(this.data.inReference){const Ce=this.data.referenceType||"shortcut";pe.type+="Reference",pe.referenceType=Ce,delete pe.url,delete pe.title}else delete pe.identifier,delete pe.label;this.data.referenceType=void 0}function U(pe){const Ce=this.sliceSerialize(pe),qe=this.stack[this.stack.length-2];qe.label=irt(Ce),qe.identifier=hE(Ce).toLowerCase()}function H(){const pe=this.stack[this.stack.length-1],Ce=this.resume(),qe=this.stack[this.stack.length-1];if(this.data.inReference=!0,qe.type==="link"){const ut=pe.children;qe.children=ut}else qe.alt=Ce}function P(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.url=pe}function z(){const pe=this.resume(),Ce=this.stack[this.stack.length-1];Ce.title=pe}function W(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function q(pe){const Ce=this.resume(),qe=this.stack[this.stack.length-1];qe.label=Ce,qe.identifier=hE(this.sliceSerialize(pe)).toLowerCase(),this.data.referenceType="full"}function G(pe){this.data.characterReferenceType=pe.type}function ne(pe){const Ce=this.sliceSerialize(pe),qe=this.data.characterReferenceType;let ut;qe?(ut=Oxe(Ce,qe==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ut=$K(Ce);const _t=this.stack[this.stack.length-1];_t.value+=ut}function ce(pe){const Ce=this.stack.pop();Ce.position.end=Ag(pe.end)}function de(pe){k.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url=this.sliceSerialize(pe)}function he(pe){k.call(this,pe);const Ce=this.stack[this.stack.length-1];Ce.url="mailto:"+this.sliceSerialize(pe)}function ve(){return{type:"blockquote",children:[]}}function Ie(){return{type:"code",lang:null,meta:null,value:""}}function be(){return{type:"inlineCode",value:""}}function Xe(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function ze(){return{type:"emphasis",children:[]}}function yt(){return{type:"heading",depth:0,children:[]}}function it(){return{type:"break"}}function _e(){return{type:"html",value:""}}function ke(){return{type:"image",title:null,url:"",alt:null}}function Ve(){return{type:"link",title:null,url:"",children:[]}}function ct(pe){return{type:"list",ordered:pe.type==="listOrdered",start:null,spread:pe._spread,children:[]}}function Dt(pe){return{type:"listItem",spread:pe._spread,checked:null,children:[]}}function Ge(){return{type:"paragraph",children:[]}}function ge(){return{type:"strong",children:[]}}function ht(){return{type:"text",value:""}}function vt(){return{type:"thematicBreak"}}}function Ag(e){return{line:e.line,column:e.column,offset:e.offset}}function Hxe(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?Hxe(e,r):urt(e,r)}}function urt(e,t){let n;for(n in t)if(Vxe.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function zue(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+FC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+FC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+FC({start:t.start,end:t.end})+") is still open")}function lrt(e){const t=this;t.parser=n;function n(r){return ort(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function crt(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function frt(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function drt(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let i={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(i.data={meta:t.meta}),e.patch(t,i),i=e.applyData(t,i),i={type:"element",tagName:"pre",properties:{},children:[i]},e.patch(t,i),i}function hrt(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function prt(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function mrt(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),i=CS(r.toLowerCase()),s=e.footnoteOrder.indexOf(r);let o,a=e.footnoteCounts.get(r);a===void 0?(a=0,e.footnoteOrder.push(r),o=e.footnoteOrder.length):o=s+1,a+=1,e.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};e.patch(t,u);const l={type:"element",tagName:"sup",properties:{},children:[u]};return e.patch(t,l),e.applyData(t,l)}function grt(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function yrt(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function qxe(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const i=e.all(t),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function vrt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return qxe(e,t);const i={src:CS(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return e.patch(t,s),e.applyData(t,s)}function brt(e,t){const n={src:CS(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function _rt(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function wrt(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return qxe(e,t);const i={href:CS(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:e.all(t)};return e.patch(t,s),e.applyData(t,s)}function Ert(e,t){const n={href:CS(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function xrt(e,t,n){const r=e.all(t),i=n?Srt(n):Wxe(t),s={},o=[];if(typeof t.checked=="boolean"){const c=r[0];let f;c&&c.type==="element"&&c.tagName==="p"?f=c:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const c=r[a];(i||a!==0||c.type!=="element"||c.tagName!=="p")&&o.push({type:"text",value:`
`}),c.type==="element"&&c.tagName==="p"&&!i?o.push(...c.children):o.push(c)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const l={type:"element",tagName:"li",properties:s,children:o};return e.patch(t,l),e.applyData(t,l)}function Srt(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Wxe(n[r])}return t}function Wxe(e){const t=e.spread;return t??e.children.length>1}function Trt(e,t){const n={},r=e.all(t);let i=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,s),e.applyData(t,s)}function Art(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function Crt(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function Irt(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function krt(e,t){const n=e.all(t),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},a=Jh(t.children[1]),u=U6(t.children[t.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:e.wrap(i,!0)};return e.patch(t,s),e.applyData(t,s)}function Rrt(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:t.children.length;let u=-1;const l=[];for(;++u<a;){const f=t.children[u],d={},h=o?o[u]:void 0;h&&(d.align=h);let p={type:"element",tagName:s,properties:d,children:[]};f&&(p.children=e.all(f),e.patch(f,p),p=e.applyData(f,p)),l.push(p)}const c={type:"element",tagName:"tr",properties:{},children:e.wrap(l,!0)};return e.patch(t,c),e.applyData(t,c)}function Nrt(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const Vue=9,Hue=32;function Prt(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),i=0;const s=[];for(;r;)s.push(que(t.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(t);return s.push(que(t.slice(i),i>0,!1)),s.join("")}function que(e,t,n){let r=0,i=e.length;if(t){let s=e.codePointAt(r);for(;s===Vue||s===Hue;)r++,s=e.codePointAt(r)}if(n){let s=e.codePointAt(i-1);for(;s===Vue||s===Hue;)i--,s=e.codePointAt(i-1)}return i>r?e.slice(r,i):""}function Ort(e,t){const n={type:"text",value:Prt(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function Drt(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const $rt={blockquote:crt,break:frt,code:drt,delete:hrt,emphasis:prt,footnoteReference:mrt,heading:grt,html:yrt,imageReference:vrt,image:brt,inlineCode:_rt,linkReference:wrt,link:Ert,listItem:xrt,list:Trt,paragraph:Art,root:Crt,strong:Irt,table:krt,tableCell:Nrt,tableRow:Rrt,text:Ort,thematicBreak:Drt,toml:KN,yaml:KN,definition:KN,footnoteDefinition:KN};function KN(){}const Gxe=-1,V6=0,C$=1,I$=2,FK=3,jK=4,BK=5,UK=6,Yxe=7,Kxe=8,Wue=typeof self=="object"?self:globalThis,Mrt=(e,t)=>{const n=(i,s)=>(e.set(s,i),i),r=i=>{if(e.has(i))return e.get(i);const[s,o]=t[i];switch(s){case V6:case Gxe:return n(o,i);case C$:{const a=n([],i);for(const u of o)a.push(r(u));return a}case I$:{const a=n({},i);for(const[u,l]of o)a[r(u)]=r(l);return a}case FK:return n(new Date(o),i);case jK:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case BK:{const a=n(new Map,i);for(const[u,l]of o)a.set(r(u),r(l));return a}case UK:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case Yxe:{const{name:a,message:u}=o;return n(new Wue[a](u),i)}case Kxe:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i)}return n(new Wue[s](o),i)};return r},Gue=e=>Mrt(new Map,e)(0),z_="",{toString:Lrt}={},{keys:Frt}=Object,HT=e=>{const t=typeof e;if(t!=="object"||!e)return[V6,t];const n=Lrt.call(e).slice(8,-1);switch(n){case"Array":return[C$,z_];case"Object":return[I$,z_];case"Date":return[FK,z_];case"RegExp":return[jK,z_];case"Map":return[BK,z_];case"Set":return[UK,z_]}return n.includes("Array")?[C$,n]:n.includes("Error")?[Yxe,n]:[I$,n]},XN=([e,t])=>e===V6&&(t==="function"||t==="symbol"),jrt=(e,t,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=HT(o);switch(a){case V6:{let c=o;switch(u){case"bigint":a=Kxe,c=o.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+u);c=null;break;case"undefined":return i([Gxe],o)}return i([a,c],o)}case C$:{if(u)return i([u,[...o]],o);const c=[],f=i([a,c],o);for(const d of o)c.push(s(d));return f}case I$:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(t&&"toJSON"in o)return s(o.toJSON());const c=[],f=i([a,c],o);for(const d of Frt(o))(e||!XN(HT(o[d])))&&c.push([s(d),s(o[d])]);return f}case FK:return i([a,o.toISOString()],o);case jK:{const{source:c,flags:f}=o;return i([a,{source:c,flags:f}],o)}case BK:{const c=[],f=i([a,c],o);for(const[d,h]of o)(e||!(XN(HT(d))||XN(HT(h))))&&c.push([s(d),s(h)]);return f}case UK:{const c=[],f=i([a,c],o);for(const d of o)(e||!XN(HT(d)))&&c.push(s(d));return f}}const{message:l}=o;return i([a,{name:u,message:l}],o)};return s},Yue=(e,{json:t,lossy:n}={})=>{const r=[];return jrt(!(t||n),!!t,new Map,r)(e),r},tx=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?Gue(Yue(e,t)):structuredClone(e):(e,t)=>Gue(Yue(e,t));function Brt(e,t){const n=[{type:"text",value:""}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function Urt(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function zrt(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||Brt,r=e.options.footnoteBackLabel||Urt,i=e.options.footnoteLabel||"Footnotes",s=e.options.footnoteLabelTagName||"h2",o=e.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<e.footnoteOrder.length;){const l=e.footnoteById.get(e.footnoteOrder[u]);if(!l)continue;const c=e.all(l),f=String(l.identifier).toUpperCase(),d=CS(f.toLowerCase());let h=0;const p=[],m=e.footnoteCounts.get(f);for(;m!==void 0&&++h<=m;){p.length>0&&p.push({type:"text",value:" "});let v=typeof n=="string"?n:n(u,h);typeof v=="string"&&(v={type:"text",value:v}),p.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+d+(h>1?"-"+h:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,h),className:["data-footnote-backref"]},children:Array.isArray(v)?v:[v]})}const g=c[c.length-1];if(g&&g.type==="element"&&g.tagName==="p"){const v=g.children[g.children.length-1];v&&v.type==="text"?v.value+=" ":g.children.push({type:"text",value:" "}),g.children.push(...p)}else c.push(...p);const y={type:"element",tagName:"li",properties:{id:t+"fn-"+d},children:e.wrap(c,!0)};e.patch(l,y),a.push(y)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...tx(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(a,!0)},{type:"text",value:`
`}]}}const Xxe=function(e){if(e==null)return Wrt;if(typeof e=="function")return H6(e);if(typeof e=="object")return Array.isArray(e)?Vrt(e):Hrt(e);if(typeof e=="string")return qrt(e);throw new Error("Expected function, string, or object as test")};function Vrt(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=Xxe(e[n]);return H6(r);function r(...i){let s=-1;for(;++s<t.length;)if(t[s].apply(this,i))return!0;return!1}}function Hrt(e){const t=e;return H6(n);function n(r){const i=r;let s;for(s in e)if(i[s]!==t[s])return!1;return!0}}function qrt(e){return H6(t);function t(n){return n&&n.type===e}}function H6(e){return t;function t(n,r,i){return!!(Grt(n)&&e.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function Wrt(){return!0}function Grt(e){return e!==null&&typeof e=="object"&&"type"in e}const Qxe=[],Yrt=!0,Kue=!1,Krt="skip";function Xrt(e,t,n,r){let i;typeof t=="function"&&typeof n!="function"?(r=n,n=t):i=t;const s=Xxe(i),o=r?-1:1;a(e,void 0,[])();function a(u,l,c){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const h=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(d,"name",{value:"node ("+(u.type+(h?"<"+h+">":""))+")"})}return d;function d(){let h=Qxe,p,m,g;if((!t||s(u,l,c[c.length-1]||void 0))&&(h=Qrt(n(u,c)),h[0]===Kue))return h;if("children"in u&&u.children){const y=u;if(y.children&&h[0]!==Krt)for(m=(r?y.children.length:-1)+o,g=c.concat(y);m>-1&&m<y.children.length;){const v=y.children[m];if(p=a(v,m,g)(),p[0]===Kue)return p;m=typeof p[1]=="number"?p[1]:m+o}}return h}}}function Qrt(e){return Array.isArray(e)?e:typeof e=="number"?[Yrt,e]:e==null?Qxe:[e]}function zK(e,t,n,r){let i,s,o;typeof t=="function"&&typeof n!="function"?(s=void 0,o=t,i=n):(s=t,o=n,i=r),Xrt(e,s,a,i);function a(u,l){const c=l[l.length-1],f=c?c.children.indexOf(u):void 0;return o(u,f,c)}}const uz={}.hasOwnProperty,Jrt={};function Zrt(e,t){const n=t||Jrt,r=new Map,i=new Map,s=new Map,o={...$rt,...n.handlers},a={all:l,applyData:tit,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:eit,wrap:rit};return zK(e,function(c){if(c.type==="definition"||c.type==="footnoteDefinition"){const f=c.type==="definition"?r:i,d=String(c.identifier).toUpperCase();f.has(d)||f.set(d,c)}}),a;function u(c,f){const d=c.type,h=a.handlers[d];if(uz.call(a.handlers,d)&&h)return h(a,c,f);if(a.options.passThrough&&a.options.passThrough.includes(d)){if("children"in c){const{children:m,...g}=c,y=tx(g);return y.children=a.all(c),y}return tx(c)}return(a.options.unknownHandler||nit)(a,c,f)}function l(c){const f=[];if("children"in c){const d=c.children;let h=-1;for(;++h<d.length;){const p=a.one(d[h],c);if(p){if(h&&d[h-1].type==="break"&&(!Array.isArray(p)&&p.type==="text"&&(p.value=Xue(p.value)),!Array.isArray(p)&&p.type==="element")){const m=p.children[0];m&&m.type==="text"&&(m.value=Xue(m.value))}Array.isArray(p)?f.push(...p):f.push(p)}}}return f}}function eit(e,t){e.position&&(t.position=$et(e))}function tit(e,t){let n=t;if(e&&e.data){const r=e.data.hName,i=e.data.hChildren,s=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,tx(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function nit(e,t){const n=t.data||{},r="value"in t&&!(uz.call(n,"hProperties")||uz.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function rit(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function Xue(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function Que(e,t){const n=Zrt(e,t),r=n.one(e,void 0),i=zrt(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function iit(e,t){return e&&"run"in e?async function(n,r){const i=Que(n,{file:r,...t});await e.run(i,r)}:function(n,r){return Que(n,{file:r,...t||e})}}function Jue(e){if(e)throw e}var $O=Object.prototype.hasOwnProperty,Jxe=Object.prototype.toString,Zue=Object.defineProperty,ele=Object.getOwnPropertyDescriptor,tle=function(t){return typeof Array.isArray=="function"?Array.isArray(t):Jxe.call(t)==="[object Array]"},nle=function(t){if(!t||Jxe.call(t)!=="[object Object]")return!1;var n=$O.call(t,"constructor"),r=t.constructor&&t.constructor.prototype&&$O.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!n&&!r)return!1;var i;for(i in t);return typeof i>"u"||$O.call(t,i)},rle=function(t,n){Zue&&n.name==="__proto__"?Zue(t,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):t[n.name]=n.newValue},ile=function(t,n){if(n==="__proto__")if($O.call(t,n)){if(ele)return ele(t,n).value}else return;return t[n]},sit=function e(){var t,n,r,i,s,o,a=arguments[0],u=1,l=arguments.length,c=!1;for(typeof a=="boolean"&&(c=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<l;++u)if(t=arguments[u],t!=null)for(n in t)r=ile(a,n),i=ile(t,n),a!==i&&(c&&i&&(nle(i)||(s=tle(i)))?(s?(s=!1,o=r&&tle(r)?r:[]):o=r&&nle(r)?r:{},rle(a,{name:n,newValue:e(c,o,i)})):typeof i<"u"&&rle(a,{name:n,newValue:i}));return a};const L8=ec(sit);function lz(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function oit(){const e=[],t={run:n,use:r};return t;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...l){const c=e[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(l[f]===null||l[f]===void 0)&&(l[f]=i[f]);i=l,c?ait(c,a)(...l):o(null,...l)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return e.push(i),t}}function ait(e,t){let n;return r;function r(...o){const a=e.length>o.length;let u;a&&o.push(i);try{u=e.apply(this,o)}catch(l){const c=l;if(a&&n)throw c;return i(c)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,t(o,...a))}function s(o){i(null,o)}}const $d={basename:uit,dirname:lit,extname:cit,join:fit,sep:"/"};function uit(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');Lk(e);let n=0,r=-1,i=e.length,s;if(t===void 0||t.length===0||t.length>e.length){for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let o=-1,a=t.length-1;for(;i--;)if(e.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(e.codePointAt(i)===t.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=e.length),e.slice(n,r)}function lit(e){if(Lk(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function cit(e){Lk(e);let t=e.length,n=-1,r=0,i=-1,s=0,o;for(;t--;){const a=e.codePointAt(t);if(a===47){if(o){r=t+1;break}continue}n<0&&(o=!0,n=t+1),a===46?i<0?i=t:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":e.slice(i,n)}function fit(...e){let t=-1,n;for(;++t<e.length;)Lk(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":dit(n)}function dit(e){Lk(e);const t=e.codePointAt(0)===47;let n=hit(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function hit(e,t){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=e.length;){if(o<e.length)a=e.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(i+1,o):n=e.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Lk(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const pit={cwd:mit};function mit(){return"/"}function cz(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function git(e){if(typeof e=="string")e=new URL(e);else if(!cz(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return yit(e)}function yit(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(t)}const F8=["history","path","basename","stem","extname","dirname"];class Zxe{constructor(t){let n;t?cz(t)?n={path:t}:typeof t=="string"||vit(t)?n={value:t}:n=t:n={},this.cwd=pit.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<F8.length;){const s=F8[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)F8.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?$d.basename(this.path):void 0}set basename(t){B8(t,"basename"),j8(t,"basename"),this.path=$d.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?$d.dirname(this.path):void 0}set dirname(t){sle(this.basename,"dirname"),this.path=$d.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?$d.extname(this.path):void 0}set extname(t){if(j8(t,"extname"),sle(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=$d.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){cz(t)&&(t=git(t)),B8(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?$d.basename(this.path,this.extname):void 0}set stem(t){B8(t,"stem"),j8(t,"stem"),this.path=$d.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const i=this.message(t,n,r);throw i.fatal=!0,i}info(t,n,r){const i=this.message(t,n,r);return i.fatal=void 0,i}message(t,n,r){const i=new ka(t,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function j8(e,t){if(e&&e.includes($d.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+$d.sep+"`")}function B8(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function sle(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function vit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const bit=function(e){const r=this.constructor.prototype,i=r[e],s=function(){return i.apply(s,arguments)};Object.setPrototypeOf(s,r);const o=Object.getOwnPropertyNames(i);for(const a of o){const u=Object.getOwnPropertyDescriptor(i,a);u&&Object.defineProperty(s,a,u)}return s},_it={}.hasOwnProperty;class VK extends bit{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=oit()}copy(){const t=new VK;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data(L8(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(V8("data",this.frozen),this.namespace[t]=n,this):_it.call(this.namespace,t)&&this.namespace[t]||void 0:t?(V8("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(t,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=QN(t),r=this.parser||this.Parser;return U8("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),U8("process",this.parser||this.Parser),z8("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=QN(t),u=r.parse(a);r.run(u,a,function(c,f,d){if(c||!f||!d)return l(c);const h=f,p=r.stringify(h,d);xit(p)?d.value=p:d.result=p,l(c,d)});function l(c,f){c||!f?o(c):s?s(f):n(void 0,f)}}}processSync(t){let n=!1,r;return this.freeze(),U8("processSync",this.parser||this.Parser),z8("processSync",this.compiler||this.Compiler),this.process(t,i),ale("processSync","process",n),r;function i(s,o){n=!0,Jue(s),r=o}}run(t,n,r){ole(t),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=QN(n);i.run(t,u,l);function l(c,f,d){const h=f||t;c?a(c):o?o(h):r(void 0,h,d)}}}runSync(t,n){let r=!1,i;return this.run(t,n,s),ale("runSync","run",r),i;function s(o,a){Jue(o),i=a,r=!0}}stringify(t,n){this.freeze();const r=QN(n),i=this.compiler||this.Compiler;return z8("stringify",i),ole(t),i(t,r)}use(t,...n){const r=this.attachers,i=this.namespace;if(V8("use",this.frozen),t!=null)if(typeof t=="function")u(t,n);else if(typeof t=="object")Array.isArray(t)?a(t):o(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function s(l){if(typeof l=="function")u(l,[]);else if(typeof l=="object")if(Array.isArray(l)){const[c,...f]=l;u(c,f)}else o(l);else throw new TypeError("Expected usable value, not `"+l+"`")}function o(l){if(!("plugins"in l)&&!("settings"in l))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(l.plugins),l.settings&&(i.settings=L8(!0,i.settings,l.settings))}function a(l){let c=-1;if(l!=null)if(Array.isArray(l))for(;++c<l.length;){const f=l[c];s(f)}else throw new TypeError("Expected a list of plugins, not `"+l+"`")}function u(l,c){let f=-1,d=-1;for(;++f<r.length;)if(r[f][0]===l){d=f;break}if(d===-1)r.push([l,...c]);else if(c.length>0){let[h,...p]=c;const m=r[d][1];lz(m)&&lz(h)&&(h=L8(!0,m,h)),r[d]=[l,h,...p]}}}}const wit=new VK().freeze();function U8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function z8(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function V8(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function ole(e){if(!lz(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function ale(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function QN(e){return Eit(e)?e:new Zxe(e)}function Eit(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function xit(e){return typeof e=="string"||Sit(e)}function Sit(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const Tit="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",ule=[],lle={allowDangerousHtml:!0},Ait=/^(https?|ircs?|mailto|xmpp)$/i,Cit=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function Iit(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",i=e.className,s=e.components,o=e.disallowedElements,a=e.rehypePlugins||ule,u=e.remarkPlugins||ule,l=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...lle}:lle,c=e.skipHtml,f=e.unwrapDisallowed,d=e.urlTransform||kit,h=wit().use(lrt).use(u).use(iit,l).use(a),p=new Zxe;typeof r=="string"&&(p.value=r);for(const v of Cit)Object.hasOwn(e,v.from)&&(""+v.from+(v.to?"use `"+v.to+"` instead":"remove it")+Tit+v.id,void 0);const m=h.parse(p);let g=h.runSync(m,p);return i&&(g={type:"element",tagName:"div",properties:{className:i},children:g.type==="root"?g.children:[g]}),zK(g,y),Uet(g,{Fragment:_.Fragment,components:s,ignoreInvalidStyle:!0,jsx:_.jsx,jsxs:_.jsxs,passKeys:!0,passNode:!0});function y(v,b,w){if(v.type==="raw"&&w&&typeof b=="number")return c?w.children.splice(b,1):w.children[b]={type:"text",value:v.value},b;if(v.type==="element"){let E;for(E in D8)if(Object.hasOwn(D8,E)&&Object.hasOwn(v.properties,E)){const T=v.properties[E],S=D8[E];(S===null||S.includes(v.tagName))&&(v.properties[E]=d(String(T||""),E,v))}}if(v.type==="element"){let E=t?!t.includes(v.tagName):o?o.includes(v.tagName):!1;if(!E&&n&&typeof b=="number"&&(E=!n(v,b,w)),E&&w&&typeof b=="number")return f&&v.children?w.children.splice(b,1,...v.children):w.children.splice(b,1),b}}}function kit(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),i=e.indexOf("/");return t<0||i>-1&&t>i||n>-1&&t>n||r>-1&&t>r||Ait.test(e.slice(0,t))?e:""}const cle=/[#.]/g;function Rit(e,t){const n=e||"",r={};let i=0,s,o;for(;i<n.length;){cle.lastIndex=i;const a=cle.exec(n),u=n.slice(i,a?a.index:n.length);u&&(s?s==="#"?r.id=u:Array.isArray(r.className)?r.className.push(u):r.className=[u]:o=u,i+=u.length),a&&(s=a[0],i++)}return{type:"element",tagName:o||t||"div",properties:r,children:[]}}const Nit=new Set(["button","menu","reset","submit"]),fz={}.hasOwnProperty;function eSe(e,t,n){const r=n&&$it(n);function i(s,o,...a){let u=-1,l;if(s==null){l={type:"root",children:[]};const c=o;a.unshift(c)}else if(l=Rit(s,t),l.tagName=l.tagName.toLowerCase(),r&&fz.call(r,l.tagName)&&(l.tagName=r[l.tagName]),Pit(o,l.tagName)){let c;for(c in o)fz.call(o,c)&&Oit(e,l.properties,c,o[c])}else a.unshift(o);for(;++u<a.length;)dz(l.children,a[u]);return l.type==="element"&&l.tagName==="template"&&(l.content={type:"root",children:l.children},l.children=[]),l}return i}function Pit(e,t){return e==null||typeof e!="object"||Array.isArray(e)?!1:t==="input"||!e.type||typeof e.type!="string"?!0:"children"in e&&Array.isArray(e.children)?!1:t==="button"?Nit.has(e.type.toLowerCase()):!("value"in e)}function Oit(e,t,n,r){const i=B6(e,n);let s=-1,o;if(r!=null){if(typeof r=="number"){if(Number.isNaN(r))return;o=r}else typeof r=="boolean"?o=r:typeof r=="string"?i.spaceSeparated?o=xue(r):i.commaSeparated?o=vue(r):i.commaOrSpaceSeparated?o=xue(vue(r).join(" ")):o=fle(i,i.property,r):Array.isArray(r)?o=r.concat():o=i.property==="style"?Dit(r):String(r);if(Array.isArray(o)){const a=[];for(;++s<o.length;){const u=fle(i,i.property,o[s]);a[s]=u}o=a}if(i.property==="className"&&Array.isArray(t.className)){const a=o;o=t.className.concat(a)}t[i.property]=o}}function dz(e,t){let n=-1;if(t!=null)if(typeof t=="string"||typeof t=="number")e.push({type:"text",value:String(t)});else if(Array.isArray(t))for(;++n<t.length;)dz(e,t[n]);else if(typeof t=="object"&&"type"in t)t.type==="root"?dz(e,t.children):e.push(t);else throw new Error("Expected node, nodes, or string, got `"+t+"`")}function fle(e,t,n){if(typeof n=="string"){if(e.number&&n&&!Number.isNaN(Number(n)))return Number(n);if((e.boolean||e.overloadedBoolean)&&(n===""||tI(n)===tI(t)))return!0}return n}function Dit(e){const t=[];let n;for(n in e)fz.call(e,n)&&t.push([n,e[n]].join(": "));return t.join("; ")}function $it(e){const t={};let n=-1;for(;++n<e.length;)t[e[n].toLowerCase()]=e[n];return t}const Mit=["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","solidColor","textArea","textPath"],Lit=eSe(Mk,"div"),Fit=eSe(Yy,"g",Mit),H8=/\r?\n|\r/g;function jit(e){const t=String(e),n=[];for(H8.lastIndex=0;H8.test(t);)n.push(H8.lastIndex);return n.push(t.length+1),{toPoint:r,toOffset:i};function r(s){let o=-1;if(typeof s=="number"&&s>-1&&s<n[n.length-1]){for(;++o<n.length;)if(n[o]>s)return{line:o+1,column:s-(o>0?n[o-1]:0)+1,offset:s}}}function i(s){const o=s&&s.line,a=s&&s.column;if(typeof o=="number"&&typeof a=="number"&&!Number.isNaN(o)&&!Number.isNaN(a)&&o-1 in n){const u=(n[o-2]||0)+a-1||0;if(u>-1&&u<n[n.length-1])return u}}}const _1={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},tSe={}.hasOwnProperty,Bit=Object.prototype;function Uit(e,t){const n=t||{};return HK({file:n.file||void 0,location:!1,schema:n.space==="svg"?Yy:Mk,verbose:n.verbose||!1},e)}function HK(e,t){let n;switch(t.nodeName){case"#comment":{const r=t;return n={type:"comment",value:r.data},MO(e,r,n),n}case"#document":case"#document-fragment":{const r=t,i="mode"in r?r.mode==="quirks"||r.mode==="limited-quirks":!1;if(n={type:"root",children:nSe(e,t.childNodes),data:{quirksMode:i}},e.file&&e.location){const s=String(e.file),o=jit(s),a=o.toPoint(0),u=o.toPoint(s.length);n.position={start:a,end:u}}return n}case"#documentType":{const r=t;return n={type:"doctype"},MO(e,r,n),n}case"#text":{const r=t;return n={type:"text",value:r.value},MO(e,r,n),n}default:return n=zit(e,t),n}}function nSe(e,t){let n=-1;const r=[];for(;++n<t.length;){const i=HK(e,t[n]);r.push(i)}return r}function zit(e,t){const n=e.schema;e.schema=t.namespaceURI===_1.svg?Yy:Mk;let r=-1;const i={};for(;++r<t.attrs.length;){const a=t.attrs[r],u=(a.prefix?a.prefix+":":"")+a.name;tSe.call(Bit,u)||(i[u]=a.value)}const o=(e.schema.space==="svg"?Fit:Lit)(t.tagName,i,nSe(e,t.childNodes));if(MO(e,t,o),o.tagName==="template"){const a=t,u=a.sourceCodeLocation,l=u&&u.startTag&&Uw(u.startTag),c=u&&u.endTag&&Uw(u.endTag),f=HK(e,a.content);l&&c&&e.file&&(f.position={start:l.end,end:c.start}),o.content=f}return e.schema=n,o}function MO(e,t,n){if("sourceCodeLocation"in t&&t.sourceCodeLocation&&e.file){const r=Vit(e,n,t.sourceCodeLocation);r&&(e.location=!0,n.position=r)}}function Vit(e,t,n){const r=Uw(n);if(t.type==="element"){const i=t.children[t.children.length-1];if(r&&!n.endTag&&i&&i.position&&i.position.end&&(r.end=Object.assign({},i.position.end)),e.verbose){const s={};let o;if(n.attrs)for(o in n.attrs)tSe.call(n.attrs,o)&&(s[B6(e.schema,o).property]=Uw(n.attrs[o]));n.startTag;const a=Uw(n.startTag),u=n.endTag?Uw(n.endTag):void 0,l={opening:a};u&&(l.closing=u),l.properties=s,t.data={position:l}}}return r}function Uw(e){const t=dle({line:e.startLine,column:e.startCol,offset:e.startOffset}),n=dle({line:e.endLine,column:e.endCol,offset:e.endOffset});return t||n?{start:t,end:n}:void 0}function dle(e){return e.line&&e.column?e:void 0}const hle={}.hasOwnProperty;function rSe(e,t){const n=t||{};function r(i,...s){let o=r.invalid;const a=r.handlers;if(i&&hle.call(i,e)){const u=String(i[e]);o=hle.call(a,u)?a[u]:r.unknown}if(o)return o.call(this,i,...s)}return r.handlers=n.handlers||{},r.invalid=n.invalid,r.unknown=n.unknown,r}const Hit={},qit={}.hasOwnProperty,iSe=rSe("type",{handlers:{root:Git,element:Jit,text:Xit,comment:Qit,doctype:Kit}});function Wit(e,t){const r=(t||Hit).space;return iSe(e,r==="svg"?Yy:Mk)}function Git(e,t){const n={nodeName:"#document",mode:(e.data||{}).quirksMode?"quirks":"no-quirks",childNodes:[]};return n.childNodes=qK(e.children,n,t),IS(e,n),n}function Yit(e,t){const n={nodeName:"#document-fragment",childNodes:[]};return n.childNodes=qK(e.children,n,t),IS(e,n),n}function Kit(e){const t={nodeName:"#documentType",name:"html",publicId:"",systemId:"",parentNode:null};return IS(e,t),t}function Xit(e){const t={nodeName:"#text",value:e.value,parentNode:null};return IS(e,t),t}function Qit(e){const t={nodeName:"#comment",data:e.value,parentNode:null};return IS(e,t),t}function Jit(e,t){const n=t;let r=n;e.type==="element"&&e.tagName.toLowerCase()==="svg"&&n.space==="html"&&(r=Yy);const i=[];let s;if(e.properties){for(s in e.properties)if(s!=="children"&&qit.call(e.properties,s)){const u=Zit(r,s,e.properties[s]);u&&i.push(u)}}const o=r.space,a={nodeName:e.tagName,tagName:e.tagName,attrs:i,namespaceURI:_1[o],childNodes:[],parentNode:null};return a.childNodes=qK(e.children,a,r),IS(e,a),e.tagName==="template"&&e.content&&(a.content=Yit(e.content,r)),a}function Zit(e,t,n){const r=B6(e,t);if(n===!1||n===null||n===void 0||typeof n=="number"&&Number.isNaN(n)||!n&&r.boolean)return;Array.isArray(n)&&(n=r.commaSeparated?gxe(n):Txe(n));const i={name:r.attribute,value:n===!0?"":String(n)};if(r.space&&r.space!=="html"&&r.space!=="svg"){const s=i.name.indexOf(":");s<0?i.prefix="":(i.name=i.name.slice(s+1),i.prefix=r.attribute.slice(0,s)),i.namespace=_1[r.space]}return i}function qK(e,t,n){let r=-1;const i=[];if(e)for(;++r<e.length;){const s=iSe(e[r],n);s.parentNode=t,i.push(s)}return i}function IS(e,t){const n=e.position;n&&n.start&&n.end&&(n.start.offset,n.end.offset,t.sourceCodeLocation={startLine:n.start.line,startCol:n.start.column,startOffset:n.start.offset,endLine:n.end.line,endCol:n.end.column,endOffset:n.end.offset})}const est=["area","base","basefont","bgsound","br","col","command","embed","frame","hr","image","img","input","keygen","link","meta","param","source","track","wbr"],tst=new Set([65534,65535,131070,131071,196606,196607,262142,262143,327678,327679,393214,393215,458750,458751,524286,524287,589822,589823,655358,655359,720894,720895,786430,786431,851966,851967,917502,917503,983038,983039,1048574,1048575,1114110,1114111]),bi="";var X;(function(e){e[e.EOF=-1]="EOF",e[e.NULL=0]="NULL",e[e.TABULATION=9]="TABULATION",e[e.CARRIAGE_RETURN=13]="CARRIAGE_RETURN",e[e.LINE_FEED=10]="LINE_FEED",e[e.FORM_FEED=12]="FORM_FEED",e[e.SPACE=32]="SPACE",e[e.EXCLAMATION_MARK=33]="EXCLAMATION_MARK",e[e.QUOTATION_MARK=34]="QUOTATION_MARK",e[e.NUMBER_SIGN=35]="NUMBER_SIGN",e[e.AMPERSAND=38]="AMPERSAND",e[e.APOSTROPHE=39]="APOSTROPHE",e[e.HYPHEN_MINUS=45]="HYPHEN_MINUS",e[e.SOLIDUS=47]="SOLIDUS",e[e.DIGIT_0=48]="DIGIT_0",e[e.DIGIT_9=57]="DIGIT_9",e[e.SEMICOLON=59]="SEMICOLON",e[e.LESS_THAN_SIGN=60]="LESS_THAN_SIGN",e[e.EQUALS_SIGN=61]="EQUALS_SIGN",e[e.GREATER_THAN_SIGN=62]="GREATER_THAN_SIGN",e[e.QUESTION_MARK=63]="QUESTION_MARK",e[e.LATIN_CAPITAL_A=65]="LATIN_CAPITAL_A",e[e.LATIN_CAPITAL_F=70]="LATIN_CAPITAL_F",e[e.LATIN_CAPITAL_X=88]="LATIN_CAPITAL_X",e[e.LATIN_CAPITAL_Z=90]="LATIN_CAPITAL_Z",e[e.RIGHT_SQUARE_BRACKET=93]="RIGHT_SQUARE_BRACKET",e[e.GRAVE_ACCENT=96]="GRAVE_ACCENT",e[e.LATIN_SMALL_A=97]="LATIN_SMALL_A",e[e.LATIN_SMALL_F=102]="LATIN_SMALL_F",e[e.LATIN_SMALL_X=120]="LATIN_SMALL_X",e[e.LATIN_SMALL_Z=122]="LATIN_SMALL_Z",e[e.REPLACEMENT_CHARACTER=65533]="REPLACEMENT_CHARACTER"})(X=X||(X={}));const yu={DASH_DASH:"--",CDATA_START:"[CDATA[",DOCTYPE:"doctype",SCRIPT:"script",PUBLIC:"public",SYSTEM:"system"};function sSe(e){return e>=55296&&e<=57343}function nst(e){return e>=56320&&e<=57343}function rst(e,t){return(e-55296)*1024+9216+t}function oSe(e){return e!==32&&e!==10&&e!==13&&e!==9&&e!==12&&e>=1&&e<=31||e>=127&&e<=159}function aSe(e){return e>=64976&&e<=65007||tst.has(e)}var Ne;(function(e){e.controlCharacterInInputStream="control-character-in-input-stream",e.noncharacterInInputStream="noncharacter-in-input-stream",e.surrogateInInputStream="surrogate-in-input-stream",e.nonVoidHtmlElementStartTagWithTrailingSolidus="non-void-html-element-start-tag-with-trailing-solidus",e.endTagWithAttributes="end-tag-with-attributes",e.endTagWithTrailingSolidus="end-tag-with-trailing-solidus",e.unexpectedSolidusInTag="unexpected-solidus-in-tag",e.unexpectedNullCharacter="unexpected-null-character",e.unexpectedQuestionMarkInsteadOfTagName="unexpected-question-mark-instead-of-tag-name",e.invalidFirstCharacterOfTagName="invalid-first-character-of-tag-name",e.unexpectedEqualsSignBeforeAttributeName="unexpected-equals-sign-before-attribute-name",e.missingEndTagName="missing-end-tag-name",e.unexpectedCharacterInAttributeName="unexpected-character-in-attribute-name",e.unknownNamedCharacterReference="unknown-named-character-reference",e.missingSemicolonAfterCharacterReference="missing-semicolon-after-character-reference",e.unexpectedCharacterAfterDoctypeSystemIdentifier="unexpected-character-after-doctype-system-identifier",e.unexpectedCharacterInUnquotedAttributeValue="unexpected-character-in-unquoted-attribute-value",e.eofBeforeTagName="eof-before-tag-name",e.eofInTag="eof-in-tag",e.missingAttributeValue="missing-attribute-value",e.missingWhitespaceBetweenAttributes="missing-whitespace-between-attributes",e.missingWhitespaceAfterDoctypePublicKeyword="missing-whitespace-after-doctype-public-keyword",e.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers="missing-whitespace-between-doctype-public-and-system-identifiers",e.missingWhitespaceAfterDoctypeSystemKeyword="missing-whitespace-after-doctype-system-keyword",e.missingQuoteBeforeDoctypePublicIdentifier="missing-quote-before-doctype-public-identifier",e.missingQuoteBeforeDoctypeSystemIdentifier="missing-quote-before-doctype-system-identifier",e.missingDoctypePublicIdentifier="missing-doctype-public-identifier",e.missingDoctypeSystemIdentifier="missing-doctype-system-identifier",e.abruptDoctypePublicIdentifier="abrupt-doctype-public-identifier",e.abruptDoctypeSystemIdentifier="abrupt-doctype-system-identifier",e.cdataInHtmlContent="cdata-in-html-content",e.incorrectlyOpenedComment="incorrectly-opened-comment",e.eofInScriptHtmlCommentLikeText="eof-in-script-html-comment-like-text",e.eofInDoctype="eof-in-doctype",e.nestedComment="nested-comment",e.abruptClosingOfEmptyComment="abrupt-closing-of-empty-comment",e.eofInComment="eof-in-comment",e.incorrectlyClosedComment="incorrectly-closed-comment",e.eofInCdata="eof-in-cdata",e.absenceOfDigitsInNumericCharacterReference="absence-of-digits-in-numeric-character-reference",e.nullCharacterReference="null-character-reference",e.surrogateCharacterReference="surrogate-character-reference",e.characterReferenceOutsideUnicodeRange="character-reference-outside-unicode-range",e.controlCharacterReference="control-character-reference",e.noncharacterCharacterReference="noncharacter-character-reference",e.missingWhitespaceBeforeDoctypeName="missing-whitespace-before-doctype-name",e.missingDoctypeName="missing-doctype-name",e.invalidCharacterSequenceAfterDoctypeName="invalid-character-sequence-after-doctype-name",e.duplicateAttribute="duplicate-attribute",e.nonConformingDoctype="non-conforming-doctype",e.missingDoctype="missing-doctype",e.misplacedDoctype="misplaced-doctype",e.endTagWithoutMatchingOpenElement="end-tag-without-matching-open-element",e.closingOfElementWithOpenChildElements="closing-of-element-with-open-child-elements",e.disallowedContentInNoscriptInHead="disallowed-content-in-noscript-in-head",e.openElementsLeftAfterEof="open-elements-left-after-eof",e.abandonedHeadElementChild="abandoned-head-element-child",e.misplacedStartTagForHeadElement="misplaced-start-tag-for-head-element",e.nestedNoscriptInHead="nested-noscript-in-head",e.eofInElementThatCanContainOnlyText="eof-in-element-that-can-contain-only-text"})(Ne=Ne||(Ne={}));const ist=65536;class sst{constructor(t){this.handler=t,this.html="",this.pos=-1,this.lastGapPos=-2,this.gapStack=[],this.skipNextNewLine=!1,this.lastChunkWritten=!1,this.endOfChunkHit=!1,this.bufferWaterline=ist,this.isEol=!1,this.lineStartPos=0,this.droppedBufferSize=0,this.line=1,this.lastErrOffset=-1}get col(){return this.pos-this.lineStartPos+ +(this.lastGapPos!==this.pos)}get offset(){return this.droppedBufferSize+this.pos}getError(t){const{line:n,col:r,offset:i}=this;return{code:t,startLine:n,endLine:n,startCol:r,endCol:r,startOffset:i,endOffset:i}}_err(t){this.handler.onParseError&&this.lastErrOffset!==this.offset&&(this.lastErrOffset=this.offset,this.handler.onParseError(this.getError(t)))}_addGap(){this.gapStack.push(this.lastGapPos),this.lastGapPos=this.pos}_processSurrogate(t){if(this.pos!==this.html.length-1){const n=this.html.charCodeAt(this.pos+1);if(nst(n))return this.pos++,this._addGap(),rst(t,n)}else if(!this.lastChunkWritten)return this.endOfChunkHit=!0,X.EOF;return this._err(Ne.surrogateInInputStream),t}willDropParsedChunk(){return this.pos>this.bufferWaterline}dropParsedChunk(){this.willDropParsedChunk()&&(this.html=this.html.substring(this.pos),this.lineStartPos-=this.pos,this.droppedBufferSize+=this.pos,this.pos=0,this.lastGapPos=-2,this.gapStack.length=0)}write(t,n){this.html.length>0?this.html+=t:this.html=t,this.endOfChunkHit=!1,this.lastChunkWritten=n}insertHtmlAtCurrentPos(t){this.html=this.html.substring(0,this.pos+1)+t+this.html.substring(this.pos+1),this.endOfChunkHit=!1}startsWith(t,n){if(this.pos+t.length>this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,!1;if(n)return this.html.startsWith(t,this.pos);for(let r=0;r<t.length;r++)if((this.html.charCodeAt(this.pos+r)|32)!==t.charCodeAt(r))return!1;return!0}peek(t){const n=this.pos+t;if(n>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;const r=this.html.charCodeAt(n);return r===X.CARRIAGE_RETURN?X.LINE_FEED:r}advance(){if(this.pos++,this.isEol&&(this.isEol=!1,this.line++,this.lineStartPos=this.pos),this.pos>=this.html.length)return this.endOfChunkHit=!this.lastChunkWritten,X.EOF;let t=this.html.charCodeAt(this.pos);return t===X.CARRIAGE_RETURN?(this.isEol=!0,this.skipNextNewLine=!0,X.LINE_FEED):t===X.LINE_FEED&&(this.isEol=!0,this.skipNextNewLine)?(this.line--,this.skipNextNewLine=!1,this._addGap(),this.advance()):(this.skipNextNewLine=!1,sSe(t)&&(t=this._processSurrogate(t)),this.handler.onParseError===null||t>31&&t<127||t===X.LINE_FEED||t===X.CARRIAGE_RETURN||t>159&&t<64976||this._checkForProblematicCharacters(t),t)}_checkForProblematicCharacters(t){oSe(t)?this._err(Ne.controlCharacterInInputStream):aSe(t)&&this._err(Ne.noncharacterInInputStream)}retreat(t){for(this.pos-=t;this.pos<this.lastGapPos;)this.lastGapPos=this.gapStack.pop(),this.pos--;this.isEol=!1}}var Rn;(function(e){e[e.CHARACTER=0]="CHARACTER",e[e.NULL_CHARACTER=1]="NULL_CHARACTER",e[e.WHITESPACE_CHARACTER=2]="WHITESPACE_CHARACTER",e[e.START_TAG=3]="START_TAG",e[e.END_TAG=4]="END_TAG",e[e.COMMENT=5]="COMMENT",e[e.DOCTYPE=6]="DOCTYPE",e[e.EOF=7]="EOF",e[e.HIBERNATION=8]="HIBERNATION"})(Rn=Rn||(Rn={}));function uSe(e,t){for(let n=e.attrs.length-1;n>=0;n--)if(e.attrs[n].name===t)return e.attrs[n].value;return null}const Og=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(e=>e.charCodeAt(0))),ost=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(e=>e.charCodeAt(0)));var q8;const ast=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]),ust=(q8=String.fromCodePoint)!==null&&q8!==void 0?q8:function(e){let t="";return e>65535&&(e-=65536,t+=String.fromCharCode(e>>>10&1023|55296),e=56320|e&1023),t+=String.fromCharCode(e),t};function lst(e){var t;return e>=55296&&e<=57343||e>1114111?65533:(t=ast.get(e))!==null&&t!==void 0?t:e}var ro;(function(e){e[e.NUM=35]="NUM",e[e.SEMI=59]="SEMI",e[e.EQUALS=61]="EQUALS",e[e.ZERO=48]="ZERO",e[e.NINE=57]="NINE",e[e.LOWER_A=97]="LOWER_A",e[e.LOWER_F=102]="LOWER_F",e[e.LOWER_X=120]="LOWER_X",e[e.LOWER_Z=122]="LOWER_Z",e[e.UPPER_A=65]="UPPER_A",e[e.UPPER_F=70]="UPPER_F",e[e.UPPER_Z=90]="UPPER_Z"})(ro||(ro={}));const cst=32;var sh;(function(e){e[e.VALUE_LENGTH=49152]="VALUE_LENGTH",e[e.BRANCH_LENGTH=16256]="BRANCH_LENGTH",e[e.JUMP_TABLE=127]="JUMP_TABLE"})(sh||(sh={}));function hz(e){return e>=ro.ZERO&&e<=ro.NINE}function fst(e){return e>=ro.UPPER_A&&e<=ro.UPPER_F||e>=ro.LOWER_A&&e<=ro.LOWER_F}function dst(e){return e>=ro.UPPER_A&&e<=ro.UPPER_Z||e>=ro.LOWER_A&&e<=ro.LOWER_Z||hz(e)}function hst(e){return e===ro.EQUALS||dst(e)}var Xs;(function(e){e[e.EntityStart=0]="EntityStart",e[e.NumericStart=1]="NumericStart",e[e.NumericDecimal=2]="NumericDecimal",e[e.NumericHex=3]="NumericHex",e[e.NamedEntity=4]="NamedEntity"})(Xs||(Xs={}));var r1;(function(e){e[e.Legacy=0]="Legacy",e[e.Strict=1]="Strict",e[e.Attribute=2]="Attribute"})(r1||(r1={}));class pst{constructor(t,n,r){this.decodeTree=t,this.emitCodePoint=n,this.errors=r,this.state=Xs.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=r1.Strict}startEntity(t){this.decodeMode=t,this.state=Xs.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(t,n){switch(this.state){case Xs.EntityStart:return t.charCodeAt(n)===ro.NUM?(this.state=Xs.NumericStart,this.consumed+=1,this.stateNumericStart(t,n+1)):(this.state=Xs.NamedEntity,this.stateNamedEntity(t,n));case Xs.NumericStart:return this.stateNumericStart(t,n);case Xs.NumericDecimal:return this.stateNumericDecimal(t,n);case Xs.NumericHex:return this.stateNumericHex(t,n);case Xs.NamedEntity:return this.stateNamedEntity(t,n)}}stateNumericStart(t,n){return n>=t.length?-1:(t.charCodeAt(n)|cst)===ro.LOWER_X?(this.state=Xs.NumericHex,this.consumed+=1,this.stateNumericHex(t,n+1)):(this.state=Xs.NumericDecimal,this.stateNumericDecimal(t,n))}addToNumericResult(t,n,r,i){if(n!==r){const s=r-n;this.result=this.result*Math.pow(i,s)+parseInt(t.substr(n,s),i),this.consumed+=s}}stateNumericHex(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(hz(i)||fst(i))n+=1;else return this.addToNumericResult(t,r,n,16),this.emitNumericEntity(i,3)}return this.addToNumericResult(t,r,n,16),-1}stateNumericDecimal(t,n){const r=n;for(;n<t.length;){const i=t.charCodeAt(n);if(hz(i))n+=1;else return this.addToNumericResult(t,r,n,10),this.emitNumericEntity(i,2)}return this.addToNumericResult(t,r,n,10),-1}emitNumericEntity(t,n){var r;if(this.consumed<=n)return(r=this.errors)===null||r===void 0||r.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(t===ro.SEMI)this.consumed+=1;else if(this.decodeMode===r1.Strict)return 0;return this.emitCodePoint(lst(this.result),this.consumed),this.errors&&(t!==ro.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(t,n){const{decodeTree:r}=this;let i=r[this.treeIndex],s=(i&sh.VALUE_LENGTH)>>14;for(;n<t.length;n++,this.excess++){const o=t.charCodeAt(n);if(this.treeIndex=cSe(r,i,this.treeIndex+Math.max(1,s),o),this.treeIndex<0)return this.result===0||this.decodeMode===r1.Attribute&&(s===0||hst(o))?0:this.emitNotTerminatedNamedEntity();if(i=r[this.treeIndex],s=(i&sh.VALUE_LENGTH)>>14,s!==0){if(o===ro.SEMI)return this.emitNamedEntityData(this.treeIndex,s,this.consumed+this.excess);this.decodeMode!==r1.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var t;const{result:n,decodeTree:r}=this,i=(r[n]&sh.VALUE_LENGTH)>>14;return this.emitNamedEntityData(n,i,this.consumed),(t=this.errors)===null||t===void 0||t.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(t,n,r){const{decodeTree:i}=this;return this.emitCodePoint(n===1?i[t]&~sh.VALUE_LENGTH:i[t+1],r),n===3&&this.emitCodePoint(i[t+2],r),r}end(){var t;switch(this.state){case Xs.NamedEntity:return this.result!==0&&(this.decodeMode!==r1.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case Xs.NumericDecimal:return this.emitNumericEntity(0,2);case Xs.NumericHex:return this.emitNumericEntity(0,3);case Xs.NumericStart:return(t=this.errors)===null||t===void 0||t.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case Xs.EntityStart:return 0}}}function lSe(e){let t="";const n=new pst(e,r=>t+=ust(r));return function(i,s){let o=0,a=0;for(;(a=i.indexOf("&",a))>=0;){t+=i.slice(o,a),n.startEntity(s);const l=n.write(i,a+1);if(l<0){o=a+n.end();break}o=a+l,a=l===0?o+1:o}const u=t+i.slice(o);return t="",u}}function cSe(e,t,n,r){const i=(t&sh.BRANCH_LENGTH)>>7,s=t&sh.JUMP_TABLE;if(i===0)return s!==0&&r===s?n:-1;if(s){const u=r-s;return u<0||u>=i?-1:e[n+u]-1}let o=n,a=o+i-1;for(;o<=a;){const u=o+a>>>1,l=e[u];if(l<r)o=u+1;else if(l>r)a=u-1;else return e[u+i]}return-1}lSe(Og);lSe(ost);var Fe;(function(e){e.HTML="http://www.w3.org/1999/xhtml",e.MATHML="http://www.w3.org/1998/Math/MathML",e.SVG="http://www.w3.org/2000/svg",e.XLINK="http://www.w3.org/1999/xlink",e.XML="http://www.w3.org/XML/1998/namespace",e.XMLNS="http://www.w3.org/2000/xmlns/"})(Fe=Fe||(Fe={}));var N0;(function(e){e.TYPE="type",e.ACTION="action",e.ENCODING="encoding",e.PROMPT="prompt",e.NAME="name",e.COLOR="color",e.FACE="face",e.SIZE="size"})(N0=N0||(N0={}));var wl;(function(e){e.NO_QUIRKS="no-quirks",e.QUIRKS="quirks",e.LIMITED_QUIRKS="limited-quirks"})(wl=wl||(wl={}));var Ee;(function(e){e.A="a",e.ADDRESS="address",e.ANNOTATION_XML="annotation-xml",e.APPLET="applet",e.AREA="area",e.ARTICLE="article",e.ASIDE="aside",e.B="b",e.BASE="base",e.BASEFONT="basefont",e.BGSOUND="bgsound",e.BIG="big",e.BLOCKQUOTE="blockquote",e.BODY="body",e.BR="br",e.BUTTON="button",e.CAPTION="caption",e.CENTER="center",e.CODE="code",e.COL="col",e.COLGROUP="colgroup",e.DD="dd",e.DESC="desc",e.DETAILS="details",e.DIALOG="dialog",e.DIR="dir",e.DIV="div",e.DL="dl",e.DT="dt",e.EM="em",e.EMBED="embed",e.FIELDSET="fieldset",e.FIGCAPTION="figcaption",e.FIGURE="figure",e.FONT="font",e.FOOTER="footer",e.FOREIGN_OBJECT="foreignObject",e.FORM="form",e.FRAME="frame",e.FRAMESET="frameset",e.H1="h1",e.H2="h2",e.H3="h3",e.H4="h4",e.H5="h5",e.H6="h6",e.HEAD="head",e.HEADER="header",e.HGROUP="hgroup",e.HR="hr",e.HTML="html",e.I="i",e.IMG="img",e.IMAGE="image",e.INPUT="input",e.IFRAME="iframe",e.KEYGEN="keygen",e.LABEL="label",e.LI="li",e.LINK="link",e.LISTING="listing",e.MAIN="main",e.MALIGNMARK="malignmark",e.MARQUEE="marquee",e.MATH="math",e.MENU="menu",e.META="meta",e.MGLYPH="mglyph",e.MI="mi",e.MO="mo",e.MN="mn",e.MS="ms",e.MTEXT="mtext",e.NAV="nav",e.NOBR="nobr",e.NOFRAMES="noframes",e.NOEMBED="noembed",e.NOSCRIPT="noscript",e.OBJECT="object",e.OL="ol",e.OPTGROUP="optgroup",e.OPTION="option",e.P="p",e.PARAM="param",e.PLAINTEXT="plaintext",e.PRE="pre",e.RB="rb",e.RP="rp",e.RT="rt",e.RTC="rtc",e.RUBY="ruby",e.S="s",e.SCRIPT="script",e.SECTION="section",e.SELECT="select",e.SOURCE="source",e.SMALL="small",e.SPAN="span",e.STRIKE="strike",e.STRONG="strong",e.STYLE="style",e.SUB="sub",e.SUMMARY="summary",e.SUP="sup",e.TABLE="table",e.TBODY="tbody",e.TEMPLATE="template",e.TEXTAREA="textarea",e.TFOOT="tfoot",e.TD="td",e.TH="th",e.THEAD="thead",e.TITLE="title",e.TR="tr",e.TRACK="track",e.TT="tt",e.U="u",e.UL="ul",e.SVG="svg",e.VAR="var",e.WBR="wbr",e.XMP="xmp"})(Ee=Ee||(Ee={}));var R;(function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.A=1]="A",e[e.ADDRESS=2]="ADDRESS",e[e.ANNOTATION_XML=3]="ANNOTATION_XML",e[e.APPLET=4]="APPLET",e[e.AREA=5]="AREA",e[e.ARTICLE=6]="ARTICLE",e[e.ASIDE=7]="ASIDE",e[e.B=8]="B",e[e.BASE=9]="BASE",e[e.BASEFONT=10]="BASEFONT",e[e.BGSOUND=11]="BGSOUND",e[e.BIG=12]="BIG",e[e.BLOCKQUOTE=13]="BLOCKQUOTE",e[e.BODY=14]="BODY",e[e.BR=15]="BR",e[e.BUTTON=16]="BUTTON",e[e.CAPTION=17]="CAPTION",e[e.CENTER=18]="CENTER",e[e.CODE=19]="CODE",e[e.COL=20]="COL",e[e.COLGROUP=21]="COLGROUP",e[e.DD=22]="DD",e[e.DESC=23]="DESC",e[e.DETAILS=24]="DETAILS",e[e.DIALOG=25]="DIALOG",e[e.DIR=26]="DIR",e[e.DIV=27]="DIV",e[e.DL=28]="DL",e[e.DT=29]="DT",e[e.EM=30]="EM",e[e.EMBED=31]="EMBED",e[e.FIELDSET=32]="FIELDSET",e[e.FIGCAPTION=33]="FIGCAPTION",e[e.FIGURE=34]="FIGURE",e[e.FONT=35]="FONT",e[e.FOOTER=36]="FOOTER",e[e.FOREIGN_OBJECT=37]="FOREIGN_OBJECT",e[e.FORM=38]="FORM",e[e.FRAME=39]="FRAME",e[e.FRAMESET=40]="FRAMESET",e[e.H1=41]="H1",e[e.H2=42]="H2",e[e.H3=43]="H3",e[e.H4=44]="H4",e[e.H5=45]="H5",e[e.H6=46]="H6",e[e.HEAD=47]="HEAD",e[e.HEADER=48]="HEADER",e[e.HGROUP=49]="HGROUP",e[e.HR=50]="HR",e[e.HTML=51]="HTML",e[e.I=52]="I",e[e.IMG=53]="IMG",e[e.IMAGE=54]="IMAGE",e[e.INPUT=55]="INPUT",e[e.IFRAME=56]="IFRAME",e[e.KEYGEN=57]="KEYGEN",e[e.LABEL=58]="LABEL",e[e.LI=59]="LI",e[e.LINK=60]="LINK",e[e.LISTING=61]="LISTING",e[e.MAIN=62]="MAIN",e[e.MALIGNMARK=63]="MALIGNMARK",e[e.MARQUEE=64]="MARQUEE",e[e.MATH=65]="MATH",e[e.MENU=66]="MENU",e[e.META=67]="META",e[e.MGLYPH=68]="MGLYPH",e[e.MI=69]="MI",e[e.MO=70]="MO",e[e.MN=71]="MN",e[e.MS=72]="MS",e[e.MTEXT=73]="MTEXT",e[e.NAV=74]="NAV",e[e.NOBR=75]="NOBR",e[e.NOFRAMES=76]="NOFRAMES",e[e.NOEMBED=77]="NOEMBED",e[e.NOSCRIPT=78]="NOSCRIPT",e[e.OBJECT=79]="OBJECT",e[e.OL=80]="OL",e[e.OPTGROUP=81]="OPTGROUP",e[e.OPTION=82]="OPTION",e[e.P=83]="P",e[e.PARAM=84]="PARAM",e[e.PLAINTEXT=85]="PLAINTEXT",e[e.PRE=86]="PRE",e[e.RB=87]="RB",e[e.RP=88]="RP",e[e.RT=89]="RT",e[e.RTC=90]="RTC",e[e.RUBY=91]="RUBY",e[e.S=92]="S",e[e.SCRIPT=93]="SCRIPT",e[e.SECTION=94]="SECTION",e[e.SELECT=95]="SELECT",e[e.SOURCE=96]="SOURCE",e[e.SMALL=97]="SMALL",e[e.SPAN=98]="SPAN",e[e.STRIKE=99]="STRIKE",e[e.STRONG=100]="STRONG",e[e.STYLE=101]="STYLE",e[e.SUB=102]="SUB",e[e.SUMMARY=103]="SUMMARY",e[e.SUP=104]="SUP",e[e.TABLE=105]="TABLE",e[e.TBODY=106]="TBODY",e[e.TEMPLATE=107]="TEMPLATE",e[e.TEXTAREA=108]="TEXTAREA",e[e.TFOOT=109]="TFOOT",e[e.TD=110]="TD",e[e.TH=111]="TH",e[e.THEAD=112]="THEAD",e[e.TITLE=113]="TITLE",e[e.TR=114]="TR",e[e.TRACK=115]="TRACK",e[e.TT=116]="TT",e[e.U=117]="U",e[e.UL=118]="UL",e[e.SVG=119]="SVG",e[e.VAR=120]="VAR",e[e.WBR=121]="WBR",e[e.XMP=122]="XMP"})(R=R||(R={}));const mst=new Map([[Ee.A,R.A],[Ee.ADDRESS,R.ADDRESS],[Ee.ANNOTATION_XML,R.ANNOTATION_XML],[Ee.APPLET,R.APPLET],[Ee.AREA,R.AREA],[Ee.ARTICLE,R.ARTICLE],[Ee.ASIDE,R.ASIDE],[Ee.B,R.B],[Ee.BASE,R.BASE],[Ee.BASEFONT,R.BASEFONT],[Ee.BGSOUND,R.BGSOUND],[Ee.BIG,R.BIG],[Ee.BLOCKQUOTE,R.BLOCKQUOTE],[Ee.BODY,R.BODY],[Ee.BR,R.BR],[Ee.BUTTON,R.BUTTON],[Ee.CAPTION,R.CAPTION],[Ee.CENTER,R.CENTER],[Ee.CODE,R.CODE],[Ee.COL,R.COL],[Ee.COLGROUP,R.COLGROUP],[Ee.DD,R.DD],[Ee.DESC,R.DESC],[Ee.DETAILS,R.DETAILS],[Ee.DIALOG,R.DIALOG],[Ee.DIR,R.DIR],[Ee.DIV,R.DIV],[Ee.DL,R.DL],[Ee.DT,R.DT],[Ee.EM,R.EM],[Ee.EMBED,R.EMBED],[Ee.FIELDSET,R.FIELDSET],[Ee.FIGCAPTION,R.FIGCAPTION],[Ee.FIGURE,R.FIGURE],[Ee.FONT,R.FONT],[Ee.FOOTER,R.FOOTER],[Ee.FOREIGN_OBJECT,R.FOREIGN_OBJECT],[Ee.FORM,R.FORM],[Ee.FRAME,R.FRAME],[Ee.FRAMESET,R.FRAMESET],[Ee.H1,R.H1],[Ee.H2,R.H2],[Ee.H3,R.H3],[Ee.H4,R.H4],[Ee.H5,R.H5],[Ee.H6,R.H6],[Ee.HEAD,R.HEAD],[Ee.HEADER,R.HEADER],[Ee.HGROUP,R.HGROUP],[Ee.HR,R.HR],[Ee.HTML,R.HTML],[Ee.I,R.I],[Ee.IMG,R.IMG],[Ee.IMAGE,R.IMAGE],[Ee.INPUT,R.INPUT],[Ee.IFRAME,R.IFRAME],[Ee.KEYGEN,R.KEYGEN],[Ee.LABEL,R.LABEL],[Ee.LI,R.LI],[Ee.LINK,R.LINK],[Ee.LISTING,R.LISTING],[Ee.MAIN,R.MAIN],[Ee.MALIGNMARK,R.MALIGNMARK],[Ee.MARQUEE,R.MARQUEE],[Ee.MATH,R.MATH],[Ee.MENU,R.MENU],[Ee.META,R.META],[Ee.MGLYPH,R.MGLYPH],[Ee.MI,R.MI],[Ee.MO,R.MO],[Ee.MN,R.MN],[Ee.MS,R.MS],[Ee.MTEXT,R.MTEXT],[Ee.NAV,R.NAV],[Ee.NOBR,R.NOBR],[Ee.NOFRAMES,R.NOFRAMES],[Ee.NOEMBED,R.NOEMBED],[Ee.NOSCRIPT,R.NOSCRIPT],[Ee.OBJECT,R.OBJECT],[Ee.OL,R.OL],[Ee.OPTGROUP,R.OPTGROUP],[Ee.OPTION,R.OPTION],[Ee.P,R.P],[Ee.PARAM,R.PARAM],[Ee.PLAINTEXT,R.PLAINTEXT],[Ee.PRE,R.PRE],[Ee.RB,R.RB],[Ee.RP,R.RP],[Ee.RT,R.RT],[Ee.RTC,R.RTC],[Ee.RUBY,R.RUBY],[Ee.S,R.S],[Ee.SCRIPT,R.SCRIPT],[Ee.SECTION,R.SECTION],[Ee.SELECT,R.SELECT],[Ee.SOURCE,R.SOURCE],[Ee.SMALL,R.SMALL],[Ee.SPAN,R.SPAN],[Ee.STRIKE,R.STRIKE],[Ee.STRONG,R.STRONG],[Ee.STYLE,R.STYLE],[Ee.SUB,R.SUB],[Ee.SUMMARY,R.SUMMARY],[Ee.SUP,R.SUP],[Ee.TABLE,R.TABLE],[Ee.TBODY,R.TBODY],[Ee.TEMPLATE,R.TEMPLATE],[Ee.TEXTAREA,R.TEXTAREA],[Ee.TFOOT,R.TFOOT],[Ee.TD,R.TD],[Ee.TH,R.TH],[Ee.THEAD,R.THEAD],[Ee.TITLE,R.TITLE],[Ee.TR,R.TR],[Ee.TRACK,R.TRACK],[Ee.TT,R.TT],[Ee.U,R.U],[Ee.UL,R.UL],[Ee.SVG,R.SVG],[Ee.VAR,R.VAR],[Ee.WBR,R.WBR],[Ee.XMP,R.XMP]]);function kS(e){var t;return(t=mst.get(e))!==null&&t!==void 0?t:R.UNKNOWN}const Qe=R,gst={[Fe.HTML]:new Set([Qe.ADDRESS,Qe.APPLET,Qe.AREA,Qe.ARTICLE,Qe.ASIDE,Qe.BASE,Qe.BASEFONT,Qe.BGSOUND,Qe.BLOCKQUOTE,Qe.BODY,Qe.BR,Qe.BUTTON,Qe.CAPTION,Qe.CENTER,Qe.COL,Qe.COLGROUP,Qe.DD,Qe.DETAILS,Qe.DIR,Qe.DIV,Qe.DL,Qe.DT,Qe.EMBED,Qe.FIELDSET,Qe.FIGCAPTION,Qe.FIGURE,Qe.FOOTER,Qe.FORM,Qe.FRAME,Qe.FRAMESET,Qe.H1,Qe.H2,Qe.H3,Qe.H4,Qe.H5,Qe.H6,Qe.HEAD,Qe.HEADER,Qe.HGROUP,Qe.HR,Qe.HTML,Qe.IFRAME,Qe.IMG,Qe.INPUT,Qe.LI,Qe.LINK,Qe.LISTING,Qe.MAIN,Qe.MARQUEE,Qe.MENU,Qe.META,Qe.NAV,Qe.NOEMBED,Qe.NOFRAMES,Qe.NOSCRIPT,Qe.OBJECT,Qe.OL,Qe.P,Qe.PARAM,Qe.PLAINTEXT,Qe.PRE,Qe.SCRIPT,Qe.SECTION,Qe.SELECT,Qe.SOURCE,Qe.STYLE,Qe.SUMMARY,Qe.TABLE,Qe.TBODY,Qe.TD,Qe.TEMPLATE,Qe.TEXTAREA,Qe.TFOOT,Qe.TH,Qe.THEAD,Qe.TITLE,Qe.TR,Qe.TRACK,Qe.UL,Qe.WBR,Qe.XMP]),[Fe.MATHML]:new Set([Qe.MI,Qe.MO,Qe.MN,Qe.MS,Qe.MTEXT,Qe.ANNOTATION_XML]),[Fe.SVG]:new Set([Qe.TITLE,Qe.FOREIGN_OBJECT,Qe.DESC]),[Fe.XLINK]:new Set,[Fe.XML]:new Set,[Fe.XMLNS]:new Set};function fSe(e){return e===Qe.H1||e===Qe.H2||e===Qe.H3||e===Qe.H4||e===Qe.H5||e===Qe.H6}Ee.STYLE,Ee.SCRIPT,Ee.XMP,Ee.IFRAME,Ee.NOEMBED,Ee.NOFRAMES,Ee.PLAINTEXT;const yst=new Map([[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);var J;(function(e){e[e.DATA=0]="DATA",e[e.RCDATA=1]="RCDATA",e[e.RAWTEXT=2]="RAWTEXT",e[e.SCRIPT_DATA=3]="SCRIPT_DATA",e[e.PLAINTEXT=4]="PLAINTEXT",e[e.TAG_OPEN=5]="TAG_OPEN",e[e.END_TAG_OPEN=6]="END_TAG_OPEN",e[e.TAG_NAME=7]="TAG_NAME",e[e.RCDATA_LESS_THAN_SIGN=8]="RCDATA_LESS_THAN_SIGN",e[e.RCDATA_END_TAG_OPEN=9]="RCDATA_END_TAG_OPEN",e[e.RCDATA_END_TAG_NAME=10]="RCDATA_END_TAG_NAME",e[e.RAWTEXT_LESS_THAN_SIGN=11]="RAWTEXT_LESS_THAN_SIGN",e[e.RAWTEXT_END_TAG_OPEN=12]="RAWTEXT_END_TAG_OPEN",e[e.RAWTEXT_END_TAG_NAME=13]="RAWTEXT_END_TAG_NAME",e[e.SCRIPT_DATA_LESS_THAN_SIGN=14]="SCRIPT_DATA_LESS_THAN_SIGN",e[e.SCRIPT_DATA_END_TAG_OPEN=15]="SCRIPT_DATA_END_TAG_OPEN",e[e.SCRIPT_DATA_END_TAG_NAME=16]="SCRIPT_DATA_END_TAG_NAME",e[e.SCRIPT_DATA_ESCAPE_START=17]="SCRIPT_DATA_ESCAPE_START",e[e.SCRIPT_DATA_ESCAPE_START_DASH=18]="SCRIPT_DATA_ESCAPE_START_DASH",e[e.SCRIPT_DATA_ESCAPED=19]="SCRIPT_DATA_ESCAPED",e[e.SCRIPT_DATA_ESCAPED_DASH=20]="SCRIPT_DATA_ESCAPED_DASH",e[e.SCRIPT_DATA_ESCAPED_DASH_DASH=21]="SCRIPT_DATA_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN=22]="SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_OPEN=23]="SCRIPT_DATA_ESCAPED_END_TAG_OPEN",e[e.SCRIPT_DATA_ESCAPED_END_TAG_NAME=24]="SCRIPT_DATA_ESCAPED_END_TAG_NAME",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_START=25]="SCRIPT_DATA_DOUBLE_ESCAPE_START",e[e.SCRIPT_DATA_DOUBLE_ESCAPED=26]="SCRIPT_DATA_DOUBLE_ESCAPED",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH=27]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH=28]="SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH",e[e.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN=29]="SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN",e[e.SCRIPT_DATA_DOUBLE_ESCAPE_END=30]="SCRIPT_DATA_DOUBLE_ESCAPE_END",e[e.BEFORE_ATTRIBUTE_NAME=31]="BEFORE_ATTRIBUTE_NAME",e[e.ATTRIBUTE_NAME=32]="ATTRIBUTE_NAME",e[e.AFTER_ATTRIBUTE_NAME=33]="AFTER_ATTRIBUTE_NAME",e[e.BEFORE_ATTRIBUTE_VALUE=34]="BEFORE_ATTRIBUTE_VALUE",e[e.ATTRIBUTE_VALUE_DOUBLE_QUOTED=35]="ATTRIBUTE_VALUE_DOUBLE_QUOTED",e[e.ATTRIBUTE_VALUE_SINGLE_QUOTED=36]="ATTRIBUTE_VALUE_SINGLE_QUOTED",e[e.ATTRIBUTE_VALUE_UNQUOTED=37]="ATTRIBUTE_VALUE_UNQUOTED",e[e.AFTER_ATTRIBUTE_VALUE_QUOTED=38]="AFTER_ATTRIBUTE_VALUE_QUOTED",e[e.SELF_CLOSING_START_TAG=39]="SELF_CLOSING_START_TAG",e[e.BOGUS_COMMENT=40]="BOGUS_COMMENT",e[e.MARKUP_DECLARATION_OPEN=41]="MARKUP_DECLARATION_OPEN",e[e.COMMENT_START=42]="COMMENT_START",e[e.COMMENT_START_DASH=43]="COMMENT_START_DASH",e[e.COMMENT=44]="COMMENT",e[e.COMMENT_LESS_THAN_SIGN=45]="COMMENT_LESS_THAN_SIGN",e[e.COMMENT_LESS_THAN_SIGN_BANG=46]="COMMENT_LESS_THAN_SIGN_BANG",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH=47]="COMMENT_LESS_THAN_SIGN_BANG_DASH",e[e.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH=48]="COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH",e[e.COMMENT_END_DASH=49]="COMMENT_END_DASH",e[e.COMMENT_END=50]="COMMENT_END",e[e.COMMENT_END_BANG=51]="COMMENT_END_BANG",e[e.DOCTYPE=52]="DOCTYPE",e[e.BEFORE_DOCTYPE_NAME=53]="BEFORE_DOCTYPE_NAME",e[e.DOCTYPE_NAME=54]="DOCTYPE_NAME",e[e.AFTER_DOCTYPE_NAME=55]="AFTER_DOCTYPE_NAME",e[e.AFTER_DOCTYPE_PUBLIC_KEYWORD=56]="AFTER_DOCTYPE_PUBLIC_KEYWORD",e[e.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER=57]="BEFORE_DOCTYPE_PUBLIC_IDENTIFIER",e[e.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED=58]="DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED=59]="DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_PUBLIC_IDENTIFIER=60]="AFTER_DOCTYPE_PUBLIC_IDENTIFIER",e[e.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS=61]="BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS",e[e.AFTER_DOCTYPE_SYSTEM_KEYWORD=62]="AFTER_DOCTYPE_SYSTEM_KEYWORD",e[e.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER=63]="BEFORE_DOCTYPE_SYSTEM_IDENTIFIER",e[e.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED=64]="DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED",e[e.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED=65]="DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED",e[e.AFTER_DOCTYPE_SYSTEM_IDENTIFIER=66]="AFTER_DOCTYPE_SYSTEM_IDENTIFIER",e[e.BOGUS_DOCTYPE=67]="BOGUS_DOCTYPE",e[e.CDATA_SECTION=68]="CDATA_SECTION",e[e.CDATA_SECTION_BRACKET=69]="CDATA_SECTION_BRACKET",e[e.CDATA_SECTION_END=70]="CDATA_SECTION_END",e[e.CHARACTER_REFERENCE=71]="CHARACTER_REFERENCE",e[e.NAMED_CHARACTER_REFERENCE=72]="NAMED_CHARACTER_REFERENCE",e[e.AMBIGUOUS_AMPERSAND=73]="AMBIGUOUS_AMPERSAND",e[e.NUMERIC_CHARACTER_REFERENCE=74]="NUMERIC_CHARACTER_REFERENCE",e[e.HEXADEMICAL_CHARACTER_REFERENCE_START=75]="HEXADEMICAL_CHARACTER_REFERENCE_START",e[e.HEXADEMICAL_CHARACTER_REFERENCE=76]="HEXADEMICAL_CHARACTER_REFERENCE",e[e.DECIMAL_CHARACTER_REFERENCE=77]="DECIMAL_CHARACTER_REFERENCE",e[e.NUMERIC_CHARACTER_REFERENCE_END=78]="NUMERIC_CHARACTER_REFERENCE_END"})(J||(J={}));const cs={DATA:J.DATA,RCDATA:J.RCDATA,RAWTEXT:J.RAWTEXT,SCRIPT_DATA:J.SCRIPT_DATA,PLAINTEXT:J.PLAINTEXT,CDATA_SECTION:J.CDATA_SECTION};function BC(e){return e>=X.DIGIT_0&&e<=X.DIGIT_9}function FA(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_Z}function vst(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_Z}function Dg(e){return vst(e)||FA(e)}function pz(e){return Dg(e)||BC(e)}function dSe(e){return e>=X.LATIN_CAPITAL_A&&e<=X.LATIN_CAPITAL_F}function hSe(e){return e>=X.LATIN_SMALL_A&&e<=X.LATIN_SMALL_F}function bst(e){return BC(e)||dSe(e)||hSe(e)}function JN(e){return e+32}function pSe(e){return e===X.SPACE||e===X.LINE_FEED||e===X.TABULATION||e===X.FORM_FEED}function _st(e){return e===X.EQUALS_SIGN||pz(e)}function ple(e){return pSe(e)||e===X.SOLIDUS||e===X.GREATER_THAN_SIGN}class wst{constructor(t,n){this.options=t,this.handler=n,this.paused=!1,this.inLoop=!1,this.inForeignNode=!1,this.lastStartTagName="",this.active=!1,this.state=J.DATA,this.returnState=J.DATA,this.charRefCode=-1,this.consumedAfterSnapshot=-1,this.currentCharacterToken=null,this.currentToken=null,this.currentAttr={name:"",value:""},this.preprocessor=new sst(n),this.currentLocation=this.getCurrentLocation(-1)}_err(t){var n,r;(r=(n=this.handler).onParseError)===null||r===void 0||r.call(n,this.preprocessor.getError(t))}getCurrentLocation(t){return this.options.sourceCodeLocationInfo?{startLine:this.preprocessor.line,startCol:this.preprocessor.col-t,startOffset:this.preprocessor.offset-t,endLine:-1,endCol:-1,endOffset:-1}:null}_runParsingLoop(){if(!this.inLoop){for(this.inLoop=!0;this.active&&!this.paused;){this.consumedAfterSnapshot=0;const t=this._consume();this._ensureHibernation()||this._callState(t)}this.inLoop=!1}}pause(){this.paused=!0}resume(t){if(!this.paused)throw new Error("Parser was already resumed");this.paused=!1,!this.inLoop&&(this._runParsingLoop(),this.paused||t==null||t())}write(t,n,r){this.active=!0,this.preprocessor.write(t,n),this._runParsingLoop(),this.paused||r==null||r()}insertHtmlAtCurrentPos(t){this.active=!0,this.preprocessor.insertHtmlAtCurrentPos(t),this._runParsingLoop()}_ensureHibernation(){return this.preprocessor.endOfChunkHit?(this._unconsume(this.consumedAfterSnapshot),this.active=!1,!0):!1}_consume(){return this.consumedAfterSnapshot++,this.preprocessor.advance()}_unconsume(t){this.consumedAfterSnapshot-=t,this.preprocessor.retreat(t)}_reconsumeInState(t,n){this.state=t,this._callState(n)}_advanceBy(t){this.consumedAfterSnapshot+=t;for(let n=0;n<t;n++)this.preprocessor.advance()}_consumeSequenceIfMatch(t,n){return this.preprocessor.startsWith(t,n)?(this._advanceBy(t.length-1),!0):!1}_createStartTagToken(){this.currentToken={type:Rn.START_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(1)}}_createEndTagToken(){this.currentToken={type:Rn.END_TAG,tagName:"",tagID:R.UNKNOWN,selfClosing:!1,ackSelfClosing:!1,attrs:[],location:this.getCurrentLocation(2)}}_createCommentToken(t){this.currentToken={type:Rn.COMMENT,data:"",location:this.getCurrentLocation(t)}}_createDoctypeToken(t){this.currentToken={type:Rn.DOCTYPE,name:t,forceQuirks:!1,publicId:null,systemId:null,location:this.currentLocation}}_createCharacterToken(t,n){this.currentCharacterToken={type:t,chars:n,location:this.currentLocation}}_createAttr(t){this.currentAttr={name:t,value:""},this.currentLocation=this.getCurrentLocation(0)}_leaveAttrName(){var t,n;const r=this.currentToken;if(uSe(r,this.currentAttr.name)===null){if(r.attrs.push(this.currentAttr),r.location&&this.currentLocation){const i=(t=(n=r.location).attrs)!==null&&t!==void 0?t:n.attrs=Object.create(null);i[this.currentAttr.name]=this.currentLocation,this._leaveAttrValue()}}else this._err(Ne.duplicateAttribute)}_leaveAttrValue(){this.currentLocation&&(this.currentLocation.endLine=this.preprocessor.line,this.currentLocation.endCol=this.preprocessor.col,this.currentLocation.endOffset=this.preprocessor.offset)}prepareToken(t){this._emitCurrentCharacterToken(t.location),this.currentToken=null,t.location&&(t.location.endLine=this.preprocessor.line,t.location.endCol=this.preprocessor.col+1,t.location.endOffset=this.preprocessor.offset+1),this.currentLocation=this.getCurrentLocation(-1)}emitCurrentTagToken(){const t=this.currentToken;this.prepareToken(t),t.tagID=kS(t.tagName),t.type===Rn.START_TAG?(this.lastStartTagName=t.tagName,this.handler.onStartTag(t)):(t.attrs.length>0&&this._err(Ne.endTagWithAttributes),t.selfClosing&&this._err(Ne.endTagWithTrailingSolidus),this.handler.onEndTag(t)),this.preprocessor.dropParsedChunk()}emitCurrentComment(t){this.prepareToken(t),this.handler.onComment(t),this.preprocessor.dropParsedChunk()}emitCurrentDoctype(t){this.prepareToken(t),this.handler.onDoctype(t),this.preprocessor.dropParsedChunk()}_emitCurrentCharacterToken(t){if(this.currentCharacterToken){switch(t&&this.currentCharacterToken.location&&(this.currentCharacterToken.location.endLine=t.startLine,this.currentCharacterToken.location.endCol=t.startCol,this.currentCharacterToken.location.endOffset=t.startOffset),this.currentCharacterToken.type){case Rn.CHARACTER:{this.handler.onCharacter(this.currentCharacterToken);break}case Rn.NULL_CHARACTER:{this.handler.onNullCharacter(this.currentCharacterToken);break}case Rn.WHITESPACE_CHARACTER:{this.handler.onWhitespaceCharacter(this.currentCharacterToken);break}}this.currentCharacterToken=null}}_emitEOFToken(){const t=this.getCurrentLocation(0);t&&(t.endLine=t.startLine,t.endCol=t.startCol,t.endOffset=t.startOffset),this._emitCurrentCharacterToken(t),this.handler.onEof({type:Rn.EOF,location:t}),this.active=!1}_appendCharToCurrentCharacterToken(t,n){if(this.currentCharacterToken)if(this.currentCharacterToken.type!==t)this.currentLocation=this.getCurrentLocation(0),this._emitCurrentCharacterToken(this.currentLocation),this.preprocessor.dropParsedChunk();else{this.currentCharacterToken.chars+=n;return}this._createCharacterToken(t,n)}_emitCodePoint(t){const n=pSe(t)?Rn.WHITESPACE_CHARACTER:t===X.NULL?Rn.NULL_CHARACTER:Rn.CHARACTER;this._appendCharToCurrentCharacterToken(n,String.fromCodePoint(t))}_emitChars(t){this._appendCharToCurrentCharacterToken(Rn.CHARACTER,t)}_matchNamedCharacterReference(t){let n=null,r=0,i=!1;for(let s=0,o=Og[0];s>=0&&(s=cSe(Og,o,s+1,t),!(s<0));t=this._consume()){r+=1,o=Og[s];const a=o&sh.VALUE_LENGTH;if(a){const u=(a>>14)-1;if(t!==X.SEMICOLON&&this._isCharacterReferenceInAttribute()&&_st(this.preprocessor.peek(1))?(n=[X.AMPERSAND],s+=u):(n=u===0?[Og[s]&~sh.VALUE_LENGTH]:u===1?[Og[++s]]:[Og[++s],Og[++s]],r=0,i=t!==X.SEMICOLON),u===0){this._consume();break}}}return this._unconsume(r),i&&!this.preprocessor.endOfChunkHit&&this._err(Ne.missingSemicolonAfterCharacterReference),this._unconsume(1),n}_isCharacterReferenceInAttribute(){return this.returnState===J.ATTRIBUTE_VALUE_DOUBLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_SINGLE_QUOTED||this.returnState===J.ATTRIBUTE_VALUE_UNQUOTED}_flushCodePointConsumedAsCharacterReference(t){this._isCharacterReferenceInAttribute()?this.currentAttr.value+=String.fromCodePoint(t):this._emitCodePoint(t)}_callState(t){switch(this.state){case J.DATA:{this._stateData(t);break}case J.RCDATA:{this._stateRcdata(t);break}case J.RAWTEXT:{this._stateRawtext(t);break}case J.SCRIPT_DATA:{this._stateScriptData(t);break}case J.PLAINTEXT:{this._statePlaintext(t);break}case J.TAG_OPEN:{this._stateTagOpen(t);break}case J.END_TAG_OPEN:{this._stateEndTagOpen(t);break}case J.TAG_NAME:{this._stateTagName(t);break}case J.RCDATA_LESS_THAN_SIGN:{this._stateRcdataLessThanSign(t);break}case J.RCDATA_END_TAG_OPEN:{this._stateRcdataEndTagOpen(t);break}case J.RCDATA_END_TAG_NAME:{this._stateRcdataEndTagName(t);break}case J.RAWTEXT_LESS_THAN_SIGN:{this._stateRawtextLessThanSign(t);break}case J.RAWTEXT_END_TAG_OPEN:{this._stateRawtextEndTagOpen(t);break}case J.RAWTEXT_END_TAG_NAME:{this._stateRawtextEndTagName(t);break}case J.SCRIPT_DATA_LESS_THAN_SIGN:{this._stateScriptDataLessThanSign(t);break}case J.SCRIPT_DATA_END_TAG_OPEN:{this._stateScriptDataEndTagOpen(t);break}case J.SCRIPT_DATA_END_TAG_NAME:{this._stateScriptDataEndTagName(t);break}case J.SCRIPT_DATA_ESCAPE_START:{this._stateScriptDataEscapeStart(t);break}case J.SCRIPT_DATA_ESCAPE_START_DASH:{this._stateScriptDataEscapeStartDash(t);break}case J.SCRIPT_DATA_ESCAPED:{this._stateScriptDataEscaped(t);break}case J.SCRIPT_DATA_ESCAPED_DASH:{this._stateScriptDataEscapedDash(t);break}case J.SCRIPT_DATA_ESCAPED_DASH_DASH:{this._stateScriptDataEscapedDashDash(t);break}case J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataEscapedLessThanSign(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:{this._stateScriptDataEscapedEndTagOpen(t);break}case J.SCRIPT_DATA_ESCAPED_END_TAG_NAME:{this._stateScriptDataEscapedEndTagName(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_START:{this._stateScriptDataDoubleEscapeStart(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED:{this._stateScriptDataDoubleEscaped(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH:{this._stateScriptDataDoubleEscapedDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH:{this._stateScriptDataDoubleEscapedDashDash(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN:{this._stateScriptDataDoubleEscapedLessThanSign(t);break}case J.SCRIPT_DATA_DOUBLE_ESCAPE_END:{this._stateScriptDataDoubleEscapeEnd(t);break}case J.BEFORE_ATTRIBUTE_NAME:{this._stateBeforeAttributeName(t);break}case J.ATTRIBUTE_NAME:{this._stateAttributeName(t);break}case J.AFTER_ATTRIBUTE_NAME:{this._stateAfterAttributeName(t);break}case J.BEFORE_ATTRIBUTE_VALUE:{this._stateBeforeAttributeValue(t);break}case J.ATTRIBUTE_VALUE_DOUBLE_QUOTED:{this._stateAttributeValueDoubleQuoted(t);break}case J.ATTRIBUTE_VALUE_SINGLE_QUOTED:{this._stateAttributeValueSingleQuoted(t);break}case J.ATTRIBUTE_VALUE_UNQUOTED:{this._stateAttributeValueUnquoted(t);break}case J.AFTER_ATTRIBUTE_VALUE_QUOTED:{this._stateAfterAttributeValueQuoted(t);break}case J.SELF_CLOSING_START_TAG:{this._stateSelfClosingStartTag(t);break}case J.BOGUS_COMMENT:{this._stateBogusComment(t);break}case J.MARKUP_DECLARATION_OPEN:{this._stateMarkupDeclarationOpen(t);break}case J.COMMENT_START:{this._stateCommentStart(t);break}case J.COMMENT_START_DASH:{this._stateCommentStartDash(t);break}case J.COMMENT:{this._stateComment(t);break}case J.COMMENT_LESS_THAN_SIGN:{this._stateCommentLessThanSign(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG:{this._stateCommentLessThanSignBang(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH:{this._stateCommentLessThanSignBangDash(t);break}case J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:{this._stateCommentLessThanSignBangDashDash(t);break}case J.COMMENT_END_DASH:{this._stateCommentEndDash(t);break}case J.COMMENT_END:{this._stateCommentEnd(t);break}case J.COMMENT_END_BANG:{this._stateCommentEndBang(t);break}case J.DOCTYPE:{this._stateDoctype(t);break}case J.BEFORE_DOCTYPE_NAME:{this._stateBeforeDoctypeName(t);break}case J.DOCTYPE_NAME:{this._stateDoctypeName(t);break}case J.AFTER_DOCTYPE_NAME:{this._stateAfterDoctypeName(t);break}case J.AFTER_DOCTYPE_PUBLIC_KEYWORD:{this._stateAfterDoctypePublicKeyword(t);break}case J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateBeforeDoctypePublicIdentifier(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypePublicIdentifierDoubleQuoted(t);break}case J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypePublicIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER:{this._stateAfterDoctypePublicIdentifier(t);break}case J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS:{this._stateBetweenDoctypePublicAndSystemIdentifiers(t);break}case J.AFTER_DOCTYPE_SYSTEM_KEYWORD:{this._stateAfterDoctypeSystemKeyword(t);break}case J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateBeforeDoctypeSystemIdentifier(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED:{this._stateDoctypeSystemIdentifierDoubleQuoted(t);break}case J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED:{this._stateDoctypeSystemIdentifierSingleQuoted(t);break}case J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER:{this._stateAfterDoctypeSystemIdentifier(t);break}case J.BOGUS_DOCTYPE:{this._stateBogusDoctype(t);break}case J.CDATA_SECTION:{this._stateCdataSection(t);break}case J.CDATA_SECTION_BRACKET:{this._stateCdataSectionBracket(t);break}case J.CDATA_SECTION_END:{this._stateCdataSectionEnd(t);break}case J.CHARACTER_REFERENCE:{this._stateCharacterReference(t);break}case J.NAMED_CHARACTER_REFERENCE:{this._stateNamedCharacterReference(t);break}case J.AMBIGUOUS_AMPERSAND:{this._stateAmbiguousAmpersand(t);break}case J.NUMERIC_CHARACTER_REFERENCE:{this._stateNumericCharacterReference(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE_START:{this._stateHexademicalCharacterReferenceStart(t);break}case J.HEXADEMICAL_CHARACTER_REFERENCE:{this._stateHexademicalCharacterReference(t);break}case J.DECIMAL_CHARACTER_REFERENCE:{this._stateDecimalCharacterReference(t);break}case J.NUMERIC_CHARACTER_REFERENCE_END:{this._stateNumericCharacterReferenceEnd(t);break}default:throw new Error("Unknown state")}}_stateData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.TAG_OPEN;break}case X.AMPERSAND:{this.returnState=J.DATA,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitCodePoint(t);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRcdata(t){switch(t){case X.AMPERSAND:{this.returnState=J.RCDATA,this.state=J.CHARACTER_REFERENCE;break}case X.LESS_THAN_SIGN:{this.state=J.RCDATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateRawtext(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.RAWTEXT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptData(t){switch(t){case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_statePlaintext(t){switch(t){case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateTagOpen(t){if(Dg(t))this._createStartTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.EXCLAMATION_MARK:{this.state=J.MARKUP_DECLARATION_OPEN;break}case X.SOLIDUS:{this.state=J.END_TAG_OPEN;break}case X.QUESTION_MARK:{this._err(Ne.unexpectedQuestionMarkInsteadOfTagName),this._createCommentToken(1),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t);break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("<"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._emitChars("<"),this.state=J.DATA,this._stateData(t)}}_stateEndTagOpen(t){if(Dg(t))this._createEndTagToken(),this.state=J.TAG_NAME,this._stateTagName(t);else switch(t){case X.GREATER_THAN_SIGN:{this._err(Ne.missingEndTagName),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofBeforeTagName),this._emitChars("</"),this._emitEOFToken();break}default:this._err(Ne.invalidFirstCharacterOfTagName),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t)}}_stateTagName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.tagName+=bi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:n.tagName+=String.fromCodePoint(FA(t)?JN(t):t)}}_stateRcdataLessThanSign(t){t===X.SOLIDUS?this.state=J.RCDATA_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRcdataEndTagOpen(t){Dg(t)?(this.state=J.RCDATA_END_TAG_NAME,this._stateRcdataEndTagName(t)):(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}handleSpecialEndTag(t){if(!this.preprocessor.startsWith(this.lastStartTagName,!1))return!this._ensureHibernation();this._createEndTagToken();const n=this.currentToken;switch(n.tagName=this.lastStartTagName,this.preprocessor.peek(this.lastStartTagName.length)){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:return this._advanceBy(this.lastStartTagName.length),this.state=J.BEFORE_ATTRIBUTE_NAME,!1;case X.SOLIDUS:return this._advanceBy(this.lastStartTagName.length),this.state=J.SELF_CLOSING_START_TAG,!1;case X.GREATER_THAN_SIGN:return this._advanceBy(this.lastStartTagName.length),this.emitCurrentTagToken(),this.state=J.DATA,!1;default:return!this._ensureHibernation()}}_stateRcdataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RCDATA,this._stateRcdata(t))}_stateRawtextLessThanSign(t){t===X.SOLIDUS?this.state=J.RAWTEXT_END_TAG_OPEN:(this._emitChars("<"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagOpen(t){Dg(t)?(this.state=J.RAWTEXT_END_TAG_NAME,this._stateRawtextEndTagName(t)):(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateRawtextEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.RAWTEXT,this._stateRawtext(t))}_stateScriptDataLessThanSign(t){switch(t){case X.SOLIDUS:{this.state=J.SCRIPT_DATA_END_TAG_OPEN;break}case X.EXCLAMATION_MARK:{this.state=J.SCRIPT_DATA_ESCAPE_START,this._emitChars("<!");break}default:this._emitChars("<"),this.state=J.SCRIPT_DATA,this._stateScriptData(t)}}_stateScriptDataEndTagOpen(t){Dg(t)?(this.state=J.SCRIPT_DATA_END_TAG_NAME,this._stateScriptDataEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStart(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPE_START_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscapeStartDash(t){t===X.HYPHEN_MINUS?(this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-")):(this.state=J.SCRIPT_DATA,this._stateScriptData(t))}_stateScriptDataEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_ESCAPED_LESS_THAN_SIGN;break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataEscapedLessThanSign(t){t===X.SOLIDUS?this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_OPEN:Dg(t)?(this._emitChars("<"),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_START,this._stateScriptDataDoubleEscapeStart(t)):(this._emitChars("<"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagOpen(t){Dg(t)?(this.state=J.SCRIPT_DATA_ESCAPED_END_TAG_NAME,this._stateScriptDataEscapedEndTagName(t)):(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataEscapedEndTagName(t){this.handleSpecialEndTag(t)&&(this._emitChars("</"),this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscapeStart(t){if(this.preprocessor.startsWith(yu.SCRIPT,!1)&&ple(this.preprocessor.peek(yu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_ESCAPED,this._stateScriptDataEscaped(t))}_stateScriptDataDoubleEscaped(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._emitChars(bi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDash(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_DASH_DASH,this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedDashDash(t){switch(t){case X.HYPHEN_MINUS:{this._emitChars("-");break}case X.LESS_THAN_SIGN:{this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED_LESS_THAN_SIGN,this._emitChars("<");break}case X.GREATER_THAN_SIGN:{this.state=J.SCRIPT_DATA,this._emitChars(">");break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitChars(bi);break}case X.EOF:{this._err(Ne.eofInScriptHtmlCommentLikeText),this._emitEOFToken();break}default:this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._emitCodePoint(t)}}_stateScriptDataDoubleEscapedLessThanSign(t){t===X.SOLIDUS?(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPE_END,this._emitChars("/")):(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateScriptDataDoubleEscapeEnd(t){if(this.preprocessor.startsWith(yu.SCRIPT,!1)&&ple(this.preprocessor.peek(yu.SCRIPT.length))){this._emitCodePoint(t);for(let n=0;n<yu.SCRIPT.length;n++)this._emitCodePoint(this._consume());this.state=J.SCRIPT_DATA_ESCAPED}else this._ensureHibernation()||(this.state=J.SCRIPT_DATA_DOUBLE_ESCAPED,this._stateScriptDataDoubleEscaped(t))}_stateBeforeAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._err(Ne.unexpectedEqualsSignBeforeAttributeName),this._createAttr("="),this.state=J.ATTRIBUTE_NAME;break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:case X.SOLIDUS:case X.GREATER_THAN_SIGN:case X.EOF:{this._leaveAttrName(),this.state=J.AFTER_ATTRIBUTE_NAME,this._stateAfterAttributeName(t);break}case X.EQUALS_SIGN:{this._leaveAttrName(),this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:{this._err(Ne.unexpectedCharacterInAttributeName),this.currentAttr.name+=String.fromCodePoint(t);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.name+=bi;break}default:this.currentAttr.name+=String.fromCodePoint(FA(t)?JN(t):t)}}_stateAfterAttributeName(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.SOLIDUS:{this.state=J.SELF_CLOSING_START_TAG;break}case X.EQUALS_SIGN:{this.state=J.BEFORE_ATTRIBUTE_VALUE;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._createAttr(""),this.state=J.ATTRIBUTE_NAME,this._stateAttributeName(t)}}_stateBeforeAttributeValue(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{this.state=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this.state=J.ATTRIBUTE_VALUE_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingAttributeValue),this.state=J.DATA,this.emitCurrentTagToken();break}default:this.state=J.ATTRIBUTE_VALUE_UNQUOTED,this._stateAttributeValueUnquoted(t)}}_stateAttributeValueDoubleQuoted(t){switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_DOUBLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=bi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueSingleQuoted(t){switch(t){case X.APOSTROPHE:{this.state=J.AFTER_ATTRIBUTE_VALUE_QUOTED;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_SINGLE_QUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=bi;break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAttributeValueUnquoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.AMPERSAND:{this.returnState=J.ATTRIBUTE_VALUE_UNQUOTED,this.state=J.CHARACTER_REFERENCE;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),this.currentAttr.value+=bi;break}case X.QUOTATION_MARK:case X.APOSTROPHE:case X.LESS_THAN_SIGN:case X.EQUALS_SIGN:case X.GRAVE_ACCENT:{this._err(Ne.unexpectedCharacterInUnquotedAttributeValue),this.currentAttr.value+=String.fromCodePoint(t);break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this.currentAttr.value+=String.fromCodePoint(t)}}_stateAfterAttributeValueQuoted(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this._leaveAttrValue(),this.state=J.BEFORE_ATTRIBUTE_NAME;break}case X.SOLIDUS:{this._leaveAttrValue(),this.state=J.SELF_CLOSING_START_TAG;break}case X.GREATER_THAN_SIGN:{this._leaveAttrValue(),this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBetweenAttributes),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateSelfClosingStartTag(t){switch(t){case X.GREATER_THAN_SIGN:{const n=this.currentToken;n.selfClosing=!0,this.state=J.DATA,this.emitCurrentTagToken();break}case X.EOF:{this._err(Ne.eofInTag),this._emitEOFToken();break}default:this._err(Ne.unexpectedSolidusInTag),this.state=J.BEFORE_ATTRIBUTE_NAME,this._stateBeforeAttributeName(t)}}_stateBogusComment(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this.emitCurrentComment(n),this._emitEOFToken();break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=bi;break}default:n.data+=String.fromCodePoint(t)}}_stateMarkupDeclarationOpen(t){this._consumeSequenceIfMatch(yu.DASH_DASH,!0)?(this._createCommentToken(yu.DASH_DASH.length+1),this.state=J.COMMENT_START):this._consumeSequenceIfMatch(yu.DOCTYPE,!1)?(this.currentLocation=this.getCurrentLocation(yu.DOCTYPE.length+1),this.state=J.DOCTYPE):this._consumeSequenceIfMatch(yu.CDATA_START,!0)?this.inForeignNode?this.state=J.CDATA_SECTION:(this._err(Ne.cdataInHtmlContent),this._createCommentToken(yu.CDATA_START.length+1),this.currentToken.data="[CDATA[",this.state=J.BOGUS_COMMENT):this._ensureHibernation()||(this._err(Ne.incorrectlyOpenedComment),this._createCommentToken(2),this.state=J.BOGUS_COMMENT,this._stateBogusComment(t))}_stateCommentStart(t){switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_START_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA;const n=this.currentToken;this.emitCurrentComment(n);break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentStartDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptClosingOfEmptyComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateComment(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END_DASH;break}case X.LESS_THAN_SIGN:{n.data+="<",this.state=J.COMMENT_LESS_THAN_SIGN;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.data+=bi;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+=String.fromCodePoint(t)}}_stateCommentLessThanSign(t){const n=this.currentToken;switch(t){case X.EXCLAMATION_MARK:{n.data+="!",this.state=J.COMMENT_LESS_THAN_SIGN_BANG;break}case X.LESS_THAN_SIGN:{n.data+="<";break}default:this.state=J.COMMENT,this._stateComment(t)}}_stateCommentLessThanSignBang(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH:(this.state=J.COMMENT,this._stateComment(t))}_stateCommentLessThanSignBangDash(t){t===X.HYPHEN_MINUS?this.state=J.COMMENT_LESS_THAN_SIGN_BANG_DASH_DASH:(this.state=J.COMMENT_END_DASH,this._stateCommentEndDash(t))}_stateCommentLessThanSignBangDashDash(t){t!==X.GREATER_THAN_SIGN&&t!==X.EOF&&this._err(Ne.nestedComment),this.state=J.COMMENT_END,this._stateCommentEnd(t)}_stateCommentEndDash(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{this.state=J.COMMENT_END;break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="-",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEnd(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentComment(n);break}case X.EXCLAMATION_MARK:{this.state=J.COMMENT_END_BANG;break}case X.HYPHEN_MINUS:{n.data+="-";break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--",this.state=J.COMMENT,this._stateComment(t)}}_stateCommentEndBang(t){const n=this.currentToken;switch(t){case X.HYPHEN_MINUS:{n.data+="--!",this.state=J.COMMENT_END_DASH;break}case X.GREATER_THAN_SIGN:{this._err(Ne.incorrectlyClosedComment),this.state=J.DATA,this.emitCurrentComment(n);break}case X.EOF:{this._err(Ne.eofInComment),this.emitCurrentComment(n),this._emitEOFToken();break}default:n.data+="--!",this.state=J.COMMENT,this._stateComment(t)}}_stateDoctype(t){switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t);break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingWhitespaceBeforeDoctypeName),this.state=J.BEFORE_DOCTYPE_NAME,this._stateBeforeDoctypeName(t)}}_stateBeforeDoctypeName(t){if(FA(t))this._createDoctypeToken(String.fromCharCode(JN(t))),this.state=J.DOCTYPE_NAME;else switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.NULL:{this._err(Ne.unexpectedNullCharacter),this._createDoctypeToken(bi),this.state=J.DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeName),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),this._createDoctypeToken(null);const n=this.currentToken;n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._createDoctypeToken(String.fromCodePoint(t)),this.state=J.DOCTYPE_NAME}}_stateDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.AFTER_DOCTYPE_NAME;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.name+=bi;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.name+=String.fromCodePoint(FA(t)?JN(t):t)}}_stateAfterDoctypeName(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._consumeSequenceIfMatch(yu.PUBLIC,!1)?this.state=J.AFTER_DOCTYPE_PUBLIC_KEYWORD:this._consumeSequenceIfMatch(yu.SYSTEM,!1)?this.state=J.AFTER_DOCTYPE_SYSTEM_KEYWORD:this._ensureHibernation()||(this._err(Ne.invalidCharacterSequenceAfterDoctypeName),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t))}}_stateAfterDoctypePublicKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypePublicKeyword),n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.publicId="",this.state=J.DOCTYPE_PUBLIC_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypePublicIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypePublicIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateDoctypePublicIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_PUBLIC_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.publicId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypePublicIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.publicId+=String.fromCodePoint(t)}}_stateAfterDoctypePublicIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BETWEEN_DOCTYPE_PUBLIC_AND_SYSTEM_IDENTIFIERS;break}case X.GREATER_THAN_SIGN:{this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceBetweenDoctypePublicAndSystemIdentifiers),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBetweenDoctypePublicAndSystemIdentifiers(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateAfterDoctypeSystemKeyword(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:{this.state=J.BEFORE_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.QUOTATION_MARK:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{this._err(Ne.missingWhitespaceAfterDoctypeSystemKeyword),n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBeforeDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.QUOTATION_MARK:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_DOUBLE_QUOTED;break}case X.APOSTROPHE:{n.systemId="",this.state=J.DOCTYPE_SYSTEM_IDENTIFIER_SINGLE_QUOTED;break}case X.GREATER_THAN_SIGN:{this._err(Ne.missingDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.DATA,this.emitCurrentDoctype(n);break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.missingQuoteBeforeDoctypeSystemIdentifier),n.forceQuirks=!0,this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateDoctypeSystemIdentifierDoubleQuoted(t){const n=this.currentToken;switch(t){case X.QUOTATION_MARK:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateDoctypeSystemIdentifierSingleQuoted(t){const n=this.currentToken;switch(t){case X.APOSTROPHE:{this.state=J.AFTER_DOCTYPE_SYSTEM_IDENTIFIER;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter),n.systemId+=bi;break}case X.GREATER_THAN_SIGN:{this._err(Ne.abruptDoctypeSystemIdentifier),n.forceQuirks=!0,this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:n.systemId+=String.fromCodePoint(t)}}_stateAfterDoctypeSystemIdentifier(t){const n=this.currentToken;switch(t){case X.SPACE:case X.LINE_FEED:case X.TABULATION:case X.FORM_FEED:break;case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.EOF:{this._err(Ne.eofInDoctype),n.forceQuirks=!0,this.emitCurrentDoctype(n),this._emitEOFToken();break}default:this._err(Ne.unexpectedCharacterAfterDoctypeSystemIdentifier),this.state=J.BOGUS_DOCTYPE,this._stateBogusDoctype(t)}}_stateBogusDoctype(t){const n=this.currentToken;switch(t){case X.GREATER_THAN_SIGN:{this.emitCurrentDoctype(n),this.state=J.DATA;break}case X.NULL:{this._err(Ne.unexpectedNullCharacter);break}case X.EOF:{this.emitCurrentDoctype(n),this._emitEOFToken();break}}}_stateCdataSection(t){switch(t){case X.RIGHT_SQUARE_BRACKET:{this.state=J.CDATA_SECTION_BRACKET;break}case X.EOF:{this._err(Ne.eofInCdata),this._emitEOFToken();break}default:this._emitCodePoint(t)}}_stateCdataSectionBracket(t){t===X.RIGHT_SQUARE_BRACKET?this.state=J.CDATA_SECTION_END:(this._emitChars("]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t))}_stateCdataSectionEnd(t){switch(t){case X.GREATER_THAN_SIGN:{this.state=J.DATA;break}case X.RIGHT_SQUARE_BRACKET:{this._emitChars("]");break}default:this._emitChars("]]"),this.state=J.CDATA_SECTION,this._stateCdataSection(t)}}_stateCharacterReference(t){t===X.NUMBER_SIGN?this.state=J.NUMERIC_CHARACTER_REFERENCE:pz(t)?(this.state=J.NAMED_CHARACTER_REFERENCE,this._stateNamedCharacterReference(t)):(this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._reconsumeInState(this.returnState,t))}_stateNamedCharacterReference(t){const n=this._matchNamedCharacterReference(t);if(!this._ensureHibernation())if(n){for(let r=0;r<n.length;r++)this._flushCodePointConsumedAsCharacterReference(n[r]);this.state=this.returnState}else this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this.state=J.AMBIGUOUS_AMPERSAND}_stateAmbiguousAmpersand(t){pz(t)?this._flushCodePointConsumedAsCharacterReference(t):(t===X.SEMICOLON&&this._err(Ne.unknownNamedCharacterReference),this._reconsumeInState(this.returnState,t))}_stateNumericCharacterReference(t){this.charRefCode=0,t===X.LATIN_SMALL_X||t===X.LATIN_CAPITAL_X?this.state=J.HEXADEMICAL_CHARACTER_REFERENCE_START:BC(t)?(this.state=J.DECIMAL_CHARACTER_REFERENCE,this._stateDecimalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._reconsumeInState(this.returnState,t))}_stateHexademicalCharacterReferenceStart(t){bst(t)?(this.state=J.HEXADEMICAL_CHARACTER_REFERENCE,this._stateHexademicalCharacterReference(t)):(this._err(Ne.absenceOfDigitsInNumericCharacterReference),this._flushCodePointConsumedAsCharacterReference(X.AMPERSAND),this._flushCodePointConsumedAsCharacterReference(X.NUMBER_SIGN),this._unconsume(2),this.state=this.returnState)}_stateHexademicalCharacterReference(t){dSe(t)?this.charRefCode=this.charRefCode*16+t-55:hSe(t)?this.charRefCode=this.charRefCode*16+t-87:BC(t)?this.charRefCode=this.charRefCode*16+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateDecimalCharacterReference(t){BC(t)?this.charRefCode=this.charRefCode*10+t-48:t===X.SEMICOLON?this.state=J.NUMERIC_CHARACTER_REFERENCE_END:(this._err(Ne.missingSemicolonAfterCharacterReference),this.state=J.NUMERIC_CHARACTER_REFERENCE_END,this._stateNumericCharacterReferenceEnd(t))}_stateNumericCharacterReferenceEnd(t){if(this.charRefCode===X.NULL)this._err(Ne.nullCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(this.charRefCode>1114111)this._err(Ne.characterReferenceOutsideUnicodeRange),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(sSe(this.charRefCode))this._err(Ne.surrogateCharacterReference),this.charRefCode=X.REPLACEMENT_CHARACTER;else if(aSe(this.charRefCode))this._err(Ne.noncharacterCharacterReference);else if(oSe(this.charRefCode)||this.charRefCode===X.CARRIAGE_RETURN){this._err(Ne.controlCharacterReference);const n=yst.get(this.charRefCode);n!==void 0&&(this.charRefCode=n)}this._flushCodePointConsumedAsCharacterReference(this.charRefCode),this._reconsumeInState(this.returnState,t)}}const mSe=new Set([R.DD,R.DT,R.LI,R.OPTGROUP,R.OPTION,R.P,R.RB,R.RP,R.RT,R.RTC]),mle=new Set([...mSe,R.CAPTION,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]),ZN=new Map([[R.APPLET,Fe.HTML],[R.CAPTION,Fe.HTML],[R.HTML,Fe.HTML],[R.MARQUEE,Fe.HTML],[R.OBJECT,Fe.HTML],[R.TABLE,Fe.HTML],[R.TD,Fe.HTML],[R.TEMPLATE,Fe.HTML],[R.TH,Fe.HTML],[R.ANNOTATION_XML,Fe.MATHML],[R.MI,Fe.MATHML],[R.MN,Fe.MATHML],[R.MO,Fe.MATHML],[R.MS,Fe.MATHML],[R.MTEXT,Fe.MATHML],[R.DESC,Fe.SVG],[R.FOREIGN_OBJECT,Fe.SVG],[R.TITLE,Fe.SVG]]),Est=[R.H1,R.H2,R.H3,R.H4,R.H5,R.H6],xst=[R.TR,R.TEMPLATE,R.HTML],Sst=[R.TBODY,R.TFOOT,R.THEAD,R.TEMPLATE,R.HTML],Tst=[R.TABLE,R.TEMPLATE,R.HTML],Ast=[R.TD,R.TH];class Cst{get currentTmplContentOrNode(){return this._isInTemplate()?this.treeAdapter.getTemplateContent(this.current):this.current}constructor(t,n,r){this.treeAdapter=n,this.handler=r,this.items=[],this.tagIDs=[],this.stackTop=-1,this.tmplCount=0,this.currentTagId=R.UNKNOWN,this.current=t}_indexOf(t){return this.items.lastIndexOf(t,this.stackTop)}_isInTemplate(){return this.currentTagId===R.TEMPLATE&&this.treeAdapter.getNamespaceURI(this.current)===Fe.HTML}_updateCurrentElement(){this.current=this.items[this.stackTop],this.currentTagId=this.tagIDs[this.stackTop]}push(t,n){this.stackTop++,this.items[this.stackTop]=t,this.current=t,this.tagIDs[this.stackTop]=n,this.currentTagId=n,this._isInTemplate()&&this.tmplCount++,this.handler.onItemPush(t,n,!0)}pop(){const t=this.current;this.tmplCount>0&&this._isInTemplate()&&this.tmplCount--,this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!0)}replace(t,n){const r=this._indexOf(t);this.items[r]=n,r===this.stackTop&&(this.current=n)}insertAfter(t,n,r){const i=this._indexOf(t)+1;this.items.splice(i,0,n),this.tagIDs.splice(i,0,r),this.stackTop++,i===this.stackTop&&this._updateCurrentElement(),this.handler.onItemPush(this.current,this.currentTagId,i===this.stackTop)}popUntilTagNamePopped(t){let n=this.stackTop+1;do n=this.tagIDs.lastIndexOf(t,n-1);while(n>0&&this.treeAdapter.getNamespaceURI(this.items[n])!==Fe.HTML);this.shortenToLength(n<0?0:n)}shortenToLength(t){for(;this.stackTop>=t;){const n=this.current;this.tmplCount>0&&this._isInTemplate()&&(this.tmplCount-=1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(n,this.stackTop<t)}}popUntilElementPopped(t){const n=this._indexOf(t);this.shortenToLength(n<0?0:n)}popUntilPopped(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r<0?0:r)}popUntilNumberedHeaderPopped(){this.popUntilPopped(Est,Fe.HTML)}popUntilTableCellPopped(){this.popUntilPopped(Ast,Fe.HTML)}popAllUpToHtmlElement(){this.tmplCount=0,this.shortenToLength(1)}_indexOfTagNames(t,n){for(let r=this.stackTop;r>=0;r--)if(t.includes(this.tagIDs[r])&&this.treeAdapter.getNamespaceURI(this.items[r])===n)return r;return-1}clearBackTo(t,n){const r=this._indexOfTagNames(t,n);this.shortenToLength(r+1)}clearBackToTableContext(){this.clearBackTo(Tst,Fe.HTML)}clearBackToTableBodyContext(){this.clearBackTo(Sst,Fe.HTML)}clearBackToTableRowContext(){this.clearBackTo(xst,Fe.HTML)}remove(t){const n=this._indexOf(t);n>=0&&(n===this.stackTop?this.pop():(this.items.splice(n,1),this.tagIDs.splice(n,1),this.stackTop--,this._updateCurrentElement(),this.handler.onItemPop(t,!1)))}tryPeekProperlyNestedBodyElement(){return this.stackTop>=1&&this.tagIDs[1]===R.BODY?this.items[1]:null}contains(t){return this._indexOf(t)>-1}getCommonAncestor(t){const n=this._indexOf(t)-1;return n>=0?this.items[n]:null}isRootHtmlElementCurrent(){return this.stackTop===0&&this.tagIDs[0]===R.HTML}hasInScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(ZN.get(r)===i)return!1}return!0}hasNumberedHeaderInScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t],r=this.treeAdapter.getNamespaceURI(this.items[t]);if(fSe(n)&&r===Fe.HTML)return!0;if(ZN.get(n)===r)return!1}return!0}hasInListItemScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if((r===R.UL||r===R.OL)&&i===Fe.HTML||ZN.get(r)===i)return!1}return!0}hasInButtonScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n],i=this.treeAdapter.getNamespaceURI(this.items[n]);if(r===t&&i===Fe.HTML)return!0;if(r===R.BUTTON&&i===Fe.HTML||ZN.get(r)===i)return!1}return!0}hasInTableScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r===R.TABLE||r===R.TEMPLATE||r===R.HTML)return!1}}return!0}hasTableBodyContextInTableScope(){for(let t=this.stackTop;t>=0;t--){const n=this.tagIDs[t];if(this.treeAdapter.getNamespaceURI(this.items[t])===Fe.HTML){if(n===R.TBODY||n===R.THEAD||n===R.TFOOT)return!0;if(n===R.TABLE||n===R.HTML)return!1}}return!0}hasInSelectScope(t){for(let n=this.stackTop;n>=0;n--){const r=this.tagIDs[n];if(this.treeAdapter.getNamespaceURI(this.items[n])===Fe.HTML){if(r===t)return!0;if(r!==R.OPTION&&r!==R.OPTGROUP)return!1}}return!0}generateImpliedEndTags(){for(;mSe.has(this.currentTagId);)this.pop()}generateImpliedEndTagsThoroughly(){for(;mle.has(this.currentTagId);)this.pop()}generateImpliedEndTagsWithExclusion(t){for(;this.currentTagId!==t&&mle.has(this.currentTagId);)this.pop()}}const W8=3;var Af;(function(e){e[e.Marker=0]="Marker",e[e.Element=1]="Element"})(Af=Af||(Af={}));const gle={type:Af.Marker};class Ist{constructor(t){this.treeAdapter=t,this.entries=[],this.bookmark=null}_getNoahArkConditionCandidates(t,n){const r=[],i=n.length,s=this.treeAdapter.getTagName(t),o=this.treeAdapter.getNamespaceURI(t);for(let a=0;a<this.entries.length;a++){const u=this.entries[a];if(u.type===Af.Marker)break;const{element:l}=u;if(this.treeAdapter.getTagName(l)===s&&this.treeAdapter.getNamespaceURI(l)===o){const c=this.treeAdapter.getAttrList(l);c.length===i&&r.push({idx:a,attrs:c})}}return r}_ensureNoahArkCondition(t){if(this.entries.length<W8)return;const n=this.treeAdapter.getAttrList(t),r=this._getNoahArkConditionCandidates(t,n);if(r.length<W8)return;const i=new Map(n.map(o=>[o.name,o.value]));let s=0;for(let o=0;o<r.length;o++){const a=r[o];a.attrs.every(u=>i.get(u.name)===u.value)&&(s+=1,s>=W8&&this.entries.splice(a.idx,1))}}insertMarker(){this.entries.unshift(gle)}pushElement(t,n){this._ensureNoahArkCondition(t),this.entries.unshift({type:Af.Element,element:t,token:n})}insertElementAfterBookmark(t,n){const r=this.entries.indexOf(this.bookmark);this.entries.splice(r,0,{type:Af.Element,element:t,token:n})}removeEntry(t){const n=this.entries.indexOf(t);n>=0&&this.entries.splice(n,1)}clearToLastMarker(){const t=this.entries.indexOf(gle);t>=0?this.entries.splice(0,t+1):this.entries.length=0}getElementEntryInScopeWithTagName(t){const n=this.entries.find(r=>r.type===Af.Marker||this.treeAdapter.getTagName(r.element)===t);return n&&n.type===Af.Element?n:null}getElementEntry(t){return this.entries.find(n=>n.type===Af.Element&&n.element===t)}}function yle(e){return{nodeName:"#text",value:e,parentNode:null}}const dw={createDocument(){return{nodeName:"#document",mode:wl.NO_QUIRKS,childNodes:[]}},createDocumentFragment(){return{nodeName:"#document-fragment",childNodes:[]}},createElement(e,t,n){return{nodeName:e,tagName:e,attrs:n,namespaceURI:t,childNodes:[],parentNode:null}},createCommentNode(e){return{nodeName:"#comment",data:e,parentNode:null}},appendChild(e,t){e.childNodes.push(t),t.parentNode=e},insertBefore(e,t,n){const r=e.childNodes.indexOf(n);e.childNodes.splice(r,0,t),t.parentNode=e},setTemplateContent(e,t){e.content=t},getTemplateContent(e){return e.content},setDocumentType(e,t,n,r){const i=e.childNodes.find(s=>s.nodeName==="#documentType");if(i)i.name=t,i.publicId=n,i.systemId=r;else{const s={nodeName:"#documentType",name:t,publicId:n,systemId:r,parentNode:null};dw.appendChild(e,s)}},setDocumentMode(e,t){e.mode=t},getDocumentMode(e){return e.mode},detachNode(e){if(e.parentNode){const t=e.parentNode.childNodes.indexOf(e);e.parentNode.childNodes.splice(t,1),e.parentNode=null}},insertText(e,t){if(e.childNodes.length>0){const n=e.childNodes[e.childNodes.length-1];if(dw.isTextNode(n)){n.value+=t;return}}dw.appendChild(e,yle(t))},insertTextBefore(e,t,n){const r=e.childNodes[e.childNodes.indexOf(n)-1];r&&dw.isTextNode(r)?r.value+=t:dw.insertBefore(e,yle(t),n)},adoptAttributes(e,t){const n=new Set(e.attrs.map(r=>r.name));for(let r=0;r<t.length;r++)n.has(t[r].name)||e.attrs.push(t[r])},getFirstChild(e){return e.childNodes[0]},getChildNodes(e){return e.childNodes},getParentNode(e){return e.parentNode},getAttrList(e){return e.attrs},getTagName(e){return e.tagName},getNamespaceURI(e){return e.namespaceURI},getTextNodeContent(e){return e.value},getCommentNodeContent(e){return e.data},getDocumentTypeNodeName(e){return e.name},getDocumentTypeNodePublicId(e){return e.publicId},getDocumentTypeNodeSystemId(e){return e.systemId},isTextNode(e){return e.nodeName==="#text"},isCommentNode(e){return e.nodeName==="#comment"},isDocumentTypeNode(e){return e.nodeName==="#documentType"},isElementNode(e){return Object.prototype.hasOwnProperty.call(e,"tagName")},setNodeSourceCodeLocation(e,t){e.sourceCodeLocation=t},getNodeSourceCodeLocation(e){return e.sourceCodeLocation},updateNodeSourceCodeLocation(e,t){e.sourceCodeLocation={...e.sourceCodeLocation,...t}}},gSe="html",kst="about:legacy-compat",Rst="http://www.ibm.com/data/dtd/v11/ibmxhtml1-transitional.dtd",ySe=["+//silmaril//dtd html pro v0r11 19970101//","-//as//dtd html 3.0 aswedit + extensions//","-//advasoft ltd//dtd html 3.0 aswedit + extensions//","-//ietf//dtd html 2.0 level 1//","-//ietf//dtd html 2.0 level 2//","-//ietf//dtd html 2.0 strict level 1//","-//ietf//dtd html 2.0 strict level 2//","-//ietf//dtd html 2.0 strict//","-//ietf//dtd html 2.0//","-//ietf//dtd html 2.1e//","-//ietf//dtd html 3.0//","-//ietf//dtd html 3.2 final//","-//ietf//dtd html 3.2//","-//ietf//dtd html 3//","-//ietf//dtd html level 0//","-//ietf//dtd html level 1//","-//ietf//dtd html level 2//","-//ietf//dtd html level 3//","-//ietf//dtd html strict level 0//","-//ietf//dtd html strict level 1//","-//ietf//dtd html strict level 2//","-//ietf//dtd html strict level 3//","-//ietf//dtd html strict//","-//ietf//dtd html//","-//metrius//dtd metrius presentational//","-//microsoft//dtd internet explorer 2.0 html strict//","-//microsoft//dtd internet explorer 2.0 html//","-//microsoft//dtd internet explorer 2.0 tables//","-//microsoft//dtd internet explorer 3.0 html strict//","-//microsoft//dtd internet explorer 3.0 html//","-//microsoft//dtd internet explorer 3.0 tables//","-//netscape comm. corp.//dtd html//","-//netscape comm. corp.//dtd strict html//","-//o'reilly and associates//dtd html 2.0//","-//o'reilly and associates//dtd html extended 1.0//","-//o'reilly and associates//dtd html extended relaxed 1.0//","-//sq//dtd html 2.0 hotmetal + extensions//","-//softquad software//dtd hotmetal pro 6.0::19990601::extensions to html 4.0//","-//softquad//dtd hotmetal pro 4.0::19971010::extensions to html 4.0//","-//spyglass//dtd html 2.0 extended//","-//sun microsystems corp.//dtd hotjava html//","-//sun microsystems corp.//dtd hotjava strict html//","-//w3c//dtd html 3 1995-03-24//","-//w3c//dtd html 3.2 draft//","-//w3c//dtd html 3.2 final//","-//w3c//dtd html 3.2//","-//w3c//dtd html 3.2s draft//","-//w3c//dtd html 4.0 frameset//","-//w3c//dtd html 4.0 transitional//","-//w3c//dtd html experimental 19960712//","-//w3c//dtd html experimental 970421//","-//w3c//dtd w3 html//","-//w3o//dtd w3 html 3.0//","-//webtechs//dtd mozilla html 2.0//","-//webtechs//dtd mozilla html//"],Nst=[...ySe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"],Pst=new Set(["-//w3o//dtd w3 html strict 3.0//en//","-/w3c/dtd html 4.0 transitional/en","html"]),vSe=["-//w3c//dtd xhtml 1.0 frameset//","-//w3c//dtd xhtml 1.0 transitional//"],Ost=[...vSe,"-//w3c//dtd html 4.01 frameset//","-//w3c//dtd html 4.01 transitional//"];function vle(e,t){return t.some(n=>e.startsWith(n))}function Dst(e){return e.name===gSe&&e.publicId===null&&(e.systemId===null||e.systemId===kst)}function $st(e){if(e.name!==gSe)return wl.QUIRKS;const{systemId:t}=e;if(t&&t.toLowerCase()===Rst)return wl.QUIRKS;let{publicId:n}=e;if(n!==null){if(n=n.toLowerCase(),Pst.has(n))return wl.QUIRKS;let r=t===null?Nst:ySe;if(vle(n,r))return wl.QUIRKS;if(r=t===null?vSe:Ost,vle(n,r))return wl.LIMITED_QUIRKS}return wl.NO_QUIRKS}const ble={TEXT_HTML:"text/html",APPLICATION_XML:"application/xhtml+xml"},Mst="definitionurl",Lst="definitionURL",Fst=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(e=>[e.toLowerCase(),e])),jst=new Map([["xlink:actuate",{prefix:"xlink",name:"actuate",namespace:Fe.XLINK}],["xlink:arcrole",{prefix:"xlink",name:"arcrole",namespace:Fe.XLINK}],["xlink:href",{prefix:"xlink",name:"href",namespace:Fe.XLINK}],["xlink:role",{prefix:"xlink",name:"role",namespace:Fe.XLINK}],["xlink:show",{prefix:"xlink",name:"show",namespace:Fe.XLINK}],["xlink:title",{prefix:"xlink",name:"title",namespace:Fe.XLINK}],["xlink:type",{prefix:"xlink",name:"type",namespace:Fe.XLINK}],["xml:base",{prefix:"xml",name:"base",namespace:Fe.XML}],["xml:lang",{prefix:"xml",name:"lang",namespace:Fe.XML}],["xml:space",{prefix:"xml",name:"space",namespace:Fe.XML}],["xmlns",{prefix:"",name:"xmlns",namespace:Fe.XMLNS}],["xmlns:xlink",{prefix:"xmlns",name:"xlink",namespace:Fe.XMLNS}]]),Bst=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(e=>[e.toLowerCase(),e])),Ust=new Set([R.B,R.BIG,R.BLOCKQUOTE,R.BODY,R.BR,R.CENTER,R.CODE,R.DD,R.DIV,R.DL,R.DT,R.EM,R.EMBED,R.H1,R.H2,R.H3,R.H4,R.H5,R.H6,R.HEAD,R.HR,R.I,R.IMG,R.LI,R.LISTING,R.MENU,R.META,R.NOBR,R.OL,R.P,R.PRE,R.RUBY,R.S,R.SMALL,R.SPAN,R.STRONG,R.STRIKE,R.SUB,R.SUP,R.TABLE,R.TT,R.U,R.UL,R.VAR]);function zst(e){const t=e.tagID;return t===R.FONT&&e.attrs.some(({name:r})=>r===N0.COLOR||r===N0.SIZE||r===N0.FACE)||Ust.has(t)}function bSe(e){for(let t=0;t<e.attrs.length;t++)if(e.attrs[t].name===Mst){e.attrs[t].name=Lst;break}}function _Se(e){for(let t=0;t<e.attrs.length;t++){const n=Fst.get(e.attrs[t].name);n!=null&&(e.attrs[t].name=n)}}function WK(e){for(let t=0;t<e.attrs.length;t++){const n=jst.get(e.attrs[t].name);n&&(e.attrs[t].prefix=n.prefix,e.attrs[t].name=n.name,e.attrs[t].namespace=n.namespace)}}function Vst(e){const t=Bst.get(e.tagName);t!=null&&(e.tagName=t,e.tagID=kS(e.tagName))}function Hst(e,t){return t===Fe.MATHML&&(e===R.MI||e===R.MO||e===R.MN||e===R.MS||e===R.MTEXT)}function qst(e,t,n){if(t===Fe.MATHML&&e===R.ANNOTATION_XML){for(let r=0;r<n.length;r++)if(n[r].name===N0.ENCODING){const i=n[r].value.toLowerCase();return i===ble.TEXT_HTML||i===ble.APPLICATION_XML}}return t===Fe.SVG&&(e===R.FOREIGN_OBJECT||e===R.DESC||e===R.TITLE)}function Wst(e,t,n,r){return(!r||r===Fe.HTML)&&qst(e,t,n)||(!r||r===Fe.MATHML)&&Hst(e,t)}const Gst="hidden",Yst=8,Kst=3;var ie;(function(e){e[e.INITIAL=0]="INITIAL",e[e.BEFORE_HTML=1]="BEFORE_HTML",e[e.BEFORE_HEAD=2]="BEFORE_HEAD",e[e.IN_HEAD=3]="IN_HEAD",e[e.IN_HEAD_NO_SCRIPT=4]="IN_HEAD_NO_SCRIPT",e[e.AFTER_HEAD=5]="AFTER_HEAD",e[e.IN_BODY=6]="IN_BODY",e[e.TEXT=7]="TEXT",e[e.IN_TABLE=8]="IN_TABLE",e[e.IN_TABLE_TEXT=9]="IN_TABLE_TEXT",e[e.IN_CAPTION=10]="IN_CAPTION",e[e.IN_COLUMN_GROUP=11]="IN_COLUMN_GROUP",e[e.IN_TABLE_BODY=12]="IN_TABLE_BODY",e[e.IN_ROW=13]="IN_ROW",e[e.IN_CELL=14]="IN_CELL",e[e.IN_SELECT=15]="IN_SELECT",e[e.IN_SELECT_IN_TABLE=16]="IN_SELECT_IN_TABLE",e[e.IN_TEMPLATE=17]="IN_TEMPLATE",e[e.AFTER_BODY=18]="AFTER_BODY",e[e.IN_FRAMESET=19]="IN_FRAMESET",e[e.AFTER_FRAMESET=20]="AFTER_FRAMESET",e[e.AFTER_AFTER_BODY=21]="AFTER_AFTER_BODY",e[e.AFTER_AFTER_FRAMESET=22]="AFTER_AFTER_FRAMESET"})(ie||(ie={}));const Xst={startLine:-1,startCol:-1,startOffset:-1,endLine:-1,endCol:-1,endOffset:-1},wSe=new Set([R.TABLE,R.TBODY,R.TFOOT,R.THEAD,R.TR]),_le={scriptingEnabled:!0,sourceCodeLocationInfo:!1,treeAdapter:dw,onParseError:null};let wle=class{constructor(t,n,r=null,i=null){this.fragmentContext=r,this.scriptHandler=i,this.currentToken=null,this.stopped=!1,this.insertionMode=ie.INITIAL,this.originalInsertionMode=ie.INITIAL,this.headElement=null,this.formElement=null,this.currentNotInHTML=!1,this.tmplInsertionModeStack=[],this.pendingCharacterTokens=[],this.hasNonWhitespacePendingCharacterToken=!1,this.framesetOk=!0,this.skipNextNewLine=!1,this.fosterParentingEnabled=!1,this.options={..._le,...t},this.treeAdapter=this.options.treeAdapter,this.onParseError=this.options.onParseError,this.onParseError&&(this.options.sourceCodeLocationInfo=!0),this.document=n??this.treeAdapter.createDocument(),this.tokenizer=new wst(this.options,this),this.activeFormattingElements=new Ist(this.treeAdapter),this.fragmentContextID=r?kS(this.treeAdapter.getTagName(r)):R.UNKNOWN,this._setContextModes(r??this.document,this.fragmentContextID),this.openElements=new Cst(this.document,this.treeAdapter,this)}static parse(t,n){const r=new this(n);return r.tokenizer.write(t,!0),r.document}static getFragmentParser(t,n){const r={..._le,...n};t??(t=r.treeAdapter.createElement(Ee.TEMPLATE,Fe.HTML,[]));const i=r.treeAdapter.createElement("documentmock",Fe.HTML,[]),s=new this(r,i,t);return s.fragmentContextID===R.TEMPLATE&&s.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE),s._initTokenizerForFragmentParsing(),s._insertFakeRootElement(),s._resetInsertionMode(),s._findFormInFragmentContext(),s}getFragment(){const t=this.treeAdapter.getFirstChild(this.document),n=this.treeAdapter.createDocumentFragment();return this._adoptNodes(t,n),n}_err(t,n,r){var i;if(!this.onParseError)return;const s=(i=t.location)!==null&&i!==void 0?i:Xst,o={code:n,startLine:s.startLine,startCol:s.startCol,startOffset:s.startOffset,endLine:r?s.startLine:s.endLine,endCol:r?s.startCol:s.endCol,endOffset:r?s.startOffset:s.endOffset};this.onParseError(o)}onItemPush(t,n,r){var i,s;(s=(i=this.treeAdapter).onItemPush)===null||s===void 0||s.call(i,t),r&&this.openElements.stackTop>0&&this._setContextModes(t,n)}onItemPop(t,n){var r,i;if(this.options.sourceCodeLocationInfo&&this._setEndLocation(t,this.currentToken),(i=(r=this.treeAdapter).onItemPop)===null||i===void 0||i.call(r,t,this.openElements.current),n){let s,o;this.openElements.stackTop===0&&this.fragmentContext?(s=this.fragmentContext,o=this.fragmentContextID):{current:s,currentTagId:o}=this.openElements,this._setContextModes(s,o)}}_setContextModes(t,n){const r=t===this.document||this.treeAdapter.getNamespaceURI(t)===Fe.HTML;this.currentNotInHTML=!r,this.tokenizer.inForeignNode=!r&&!this._isIntegrationPoint(n,t)}_switchToTextParsing(t,n){this._insertElement(t,Fe.HTML),this.tokenizer.state=n,this.originalInsertionMode=this.insertionMode,this.insertionMode=ie.TEXT}switchToPlaintextParsing(){this.insertionMode=ie.TEXT,this.originalInsertionMode=ie.IN_BODY,this.tokenizer.state=cs.PLAINTEXT}_getAdjustedCurrentElement(){return this.openElements.stackTop===0&&this.fragmentContext?this.fragmentContext:this.openElements.current}_findFormInFragmentContext(){let t=this.fragmentContext;for(;t;){if(this.treeAdapter.getTagName(t)===Ee.FORM){this.formElement=t;break}t=this.treeAdapter.getParentNode(t)}}_initTokenizerForFragmentParsing(){if(!(!this.fragmentContext||this.treeAdapter.getNamespaceURI(this.fragmentContext)!==Fe.HTML))switch(this.fragmentContextID){case R.TITLE:case R.TEXTAREA:{this.tokenizer.state=cs.RCDATA;break}case R.STYLE:case R.XMP:case R.IFRAME:case R.NOEMBED:case R.NOFRAMES:case R.NOSCRIPT:{this.tokenizer.state=cs.RAWTEXT;break}case R.SCRIPT:{this.tokenizer.state=cs.SCRIPT_DATA;break}case R.PLAINTEXT:{this.tokenizer.state=cs.PLAINTEXT;break}}}_setDocumentType(t){const n=t.name||"",r=t.publicId||"",i=t.systemId||"";if(this.treeAdapter.setDocumentType(this.document,n,r,i),t.location){const o=this.treeAdapter.getChildNodes(this.document).find(a=>this.treeAdapter.isDocumentTypeNode(a));o&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}}_attachElementToTree(t,n){if(this.options.sourceCodeLocationInfo){const r=n&&{...n,startTag:n};this.treeAdapter.setNodeSourceCodeLocation(t,r)}if(this._shouldFosterParentOnInsertion())this._fosterParentElement(t);else{const r=this.openElements.currentTmplContentOrNode;this.treeAdapter.appendChild(r,t)}}_appendElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location)}_insertElement(t,n){const r=this.treeAdapter.createElement(t.tagName,n,t.attrs);this._attachElementToTree(r,t.location),this.openElements.push(r,t.tagID)}_insertFakeElement(t,n){const r=this.treeAdapter.createElement(t,Fe.HTML,[]);this._attachElementToTree(r,null),this.openElements.push(r,n)}_insertTemplate(t){const n=this.treeAdapter.createElement(t.tagName,Fe.HTML,t.attrs),r=this.treeAdapter.createDocumentFragment();this.treeAdapter.setTemplateContent(n,r),this._attachElementToTree(n,t.location),this.openElements.push(n,t.tagID),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,null)}_insertFakeRootElement(){const t=this.treeAdapter.createElement(Ee.HTML,Fe.HTML,[]);this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(t,null),this.treeAdapter.appendChild(this.openElements.current,t),this.openElements.push(t,R.HTML)}_appendCommentNode(t,n){const r=this.treeAdapter.createCommentNode(t.data);this.treeAdapter.appendChild(n,r),this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(r,t.location)}_insertCharacters(t){let n,r;if(this._shouldFosterParentOnInsertion()?({parent:n,beforeElement:r}=this._findFosterParentingLocation(),r?this.treeAdapter.insertTextBefore(n,t.chars,r):this.treeAdapter.insertText(n,t.chars)):(n=this.openElements.currentTmplContentOrNode,this.treeAdapter.insertText(n,t.chars)),!t.location)return;const i=this.treeAdapter.getChildNodes(n),s=r?i.lastIndexOf(r):i.length,o=i[s-1];if(this.treeAdapter.getNodeSourceCodeLocation(o)){const{endLine:u,endCol:l,endOffset:c}=t.location;this.treeAdapter.updateNodeSourceCodeLocation(o,{endLine:u,endCol:l,endOffset:c})}else this.options.sourceCodeLocationInfo&&this.treeAdapter.setNodeSourceCodeLocation(o,t.location)}_adoptNodes(t,n){for(let r=this.treeAdapter.getFirstChild(t);r;r=this.treeAdapter.getFirstChild(t))this.treeAdapter.detachNode(r),this.treeAdapter.appendChild(n,r)}_setEndLocation(t,n){if(this.treeAdapter.getNodeSourceCodeLocation(t)&&n.location){const r=n.location,i=this.treeAdapter.getTagName(t),s=n.type===Rn.END_TAG&&i===n.tagName?{endTag:{...r},endLine:r.endLine,endCol:r.endCol,endOffset:r.endOffset}:{endLine:r.startLine,endCol:r.startCol,endOffset:r.startOffset};this.treeAdapter.updateNodeSourceCodeLocation(t,s)}}shouldProcessStartTagTokenInForeignContent(t){if(!this.currentNotInHTML)return!1;let n,r;return this.openElements.stackTop===0&&this.fragmentContext?(n=this.fragmentContext,r=this.fragmentContextID):{current:n,currentTagId:r}=this.openElements,t.tagID===R.SVG&&this.treeAdapter.getTagName(n)===Ee.ANNOTATION_XML&&this.treeAdapter.getNamespaceURI(n)===Fe.MATHML?!1:this.tokenizer.inForeignNode||(t.tagID===R.MGLYPH||t.tagID===R.MALIGNMARK)&&!this._isIntegrationPoint(r,n,Fe.HTML)}_processToken(t){switch(t.type){case Rn.CHARACTER:{this.onCharacter(t);break}case Rn.NULL_CHARACTER:{this.onNullCharacter(t);break}case Rn.COMMENT:{this.onComment(t);break}case Rn.DOCTYPE:{this.onDoctype(t);break}case Rn.START_TAG:{this._processStartTag(t);break}case Rn.END_TAG:{this.onEndTag(t);break}case Rn.EOF:{this.onEof(t);break}case Rn.WHITESPACE_CHARACTER:{this.onWhitespaceCharacter(t);break}}}_isIntegrationPoint(t,n,r){const i=this.treeAdapter.getNamespaceURI(n),s=this.treeAdapter.getAttrList(n);return Wst(t,i,s,r)}_reconstructActiveFormattingElements(){const t=this.activeFormattingElements.entries.length;if(t){const n=this.activeFormattingElements.entries.findIndex(i=>i.type===Af.Marker||this.openElements.contains(i.element)),r=n<0?t-1:n-1;for(let i=r;i>=0;i--){const s=this.activeFormattingElements.entries[i];this._insertElement(s.token,this.treeAdapter.getNamespaceURI(s.element)),s.element=this.openElements.current}}}_closeTableCell(){this.openElements.generateImpliedEndTags(),this.openElements.popUntilTableCellPopped(),this.activeFormattingElements.clearToLastMarker(),this.insertionMode=ie.IN_ROW}_closePElement(){this.openElements.generateImpliedEndTagsWithExclusion(R.P),this.openElements.popUntilTagNamePopped(R.P)}_resetInsertionMode(){for(let t=this.openElements.stackTop;t>=0;t--)switch(t===0&&this.fragmentContext?this.fragmentContextID:this.openElements.tagIDs[t]){case R.TR:{this.insertionMode=ie.IN_ROW;return}case R.TBODY:case R.THEAD:case R.TFOOT:{this.insertionMode=ie.IN_TABLE_BODY;return}case R.CAPTION:{this.insertionMode=ie.IN_CAPTION;return}case R.COLGROUP:{this.insertionMode=ie.IN_COLUMN_GROUP;return}case R.TABLE:{this.insertionMode=ie.IN_TABLE;return}case R.BODY:{this.insertionMode=ie.IN_BODY;return}case R.FRAMESET:{this.insertionMode=ie.IN_FRAMESET;return}case R.SELECT:{this._resetInsertionModeForSelect(t);return}case R.TEMPLATE:{this.insertionMode=this.tmplInsertionModeStack[0];return}case R.HTML:{this.insertionMode=this.headElement?ie.AFTER_HEAD:ie.BEFORE_HEAD;return}case R.TD:case R.TH:{if(t>0){this.insertionMode=ie.IN_CELL;return}break}case R.HEAD:{if(t>0){this.insertionMode=ie.IN_HEAD;return}break}}this.insertionMode=ie.IN_BODY}_resetInsertionModeForSelect(t){if(t>0)for(let n=t-1;n>0;n--){const r=this.openElements.tagIDs[n];if(r===R.TEMPLATE)break;if(r===R.TABLE){this.insertionMode=ie.IN_SELECT_IN_TABLE;return}}this.insertionMode=ie.IN_SELECT}_isElementCausesFosterParenting(t){return wSe.has(t)}_shouldFosterParentOnInsertion(){return this.fosterParentingEnabled&&this._isElementCausesFosterParenting(this.openElements.currentTagId)}_findFosterParentingLocation(){for(let t=this.openElements.stackTop;t>=0;t--){const n=this.openElements.items[t];switch(this.openElements.tagIDs[t]){case R.TEMPLATE:{if(this.treeAdapter.getNamespaceURI(n)===Fe.HTML)return{parent:this.treeAdapter.getTemplateContent(n),beforeElement:null};break}case R.TABLE:{const r=this.treeAdapter.getParentNode(n);return r?{parent:r,beforeElement:n}:{parent:this.openElements.items[t-1],beforeElement:null}}}}return{parent:this.openElements.items[0],beforeElement:null}}_fosterParentElement(t){const n=this._findFosterParentingLocation();n.beforeElement?this.treeAdapter.insertBefore(n.parent,t,n.beforeElement):this.treeAdapter.appendChild(n.parent,t)}_isSpecialElement(t,n){const r=this.treeAdapter.getNamespaceURI(t);return gst[r].has(n)}onCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Aat(this,t);return}switch(this.insertionMode){case ie.INITIAL:{qT(this,t);break}case ie.BEFORE_HTML:{UC(this,t);break}case ie.BEFORE_HEAD:{zC(this,t);break}case ie.IN_HEAD:{VC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{HC(this,t);break}case ie.AFTER_HEAD:{qC(this,t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:{xSe(this,t);break}case ie.TEXT:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{G8(this,t);break}case ie.IN_TABLE_TEXT:{kSe(this,t);break}case ie.IN_COLUMN_GROUP:{k$(this,t);break}case ie.AFTER_BODY:{R$(this,t);break}case ie.AFTER_AFTER_BODY:{LO(this,t);break}}}onNullCharacter(t){if(this.skipNextNewLine=!1,this.tokenizer.inForeignNode){Tat(this,t);return}switch(this.insertionMode){case ie.INITIAL:{qT(this,t);break}case ie.BEFORE_HTML:{UC(this,t);break}case ie.BEFORE_HEAD:{zC(this,t);break}case ie.IN_HEAD:{VC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{HC(this,t);break}case ie.AFTER_HEAD:{qC(this,t);break}case ie.TEXT:{this._insertCharacters(t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{G8(this,t);break}case ie.IN_COLUMN_GROUP:{k$(this,t);break}case ie.AFTER_BODY:{R$(this,t);break}case ie.AFTER_AFTER_BODY:{LO(this,t);break}}}onComment(t){if(this.skipNextNewLine=!1,this.currentNotInHTML){mz(this,t);return}switch(this.insertionMode){case ie.INITIAL:case ie.BEFORE_HTML:case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_TEMPLATE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{mz(this,t);break}case ie.IN_TABLE_TEXT:{WT(this,t);break}case ie.AFTER_BODY:{rot(this,t);break}case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{iot(this,t);break}}}onDoctype(t){switch(this.skipNextNewLine=!1,this.insertionMode){case ie.INITIAL:{sot(this,t);break}case ie.BEFORE_HEAD:case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:{this._err(t,Ne.misplacedDoctype);break}case ie.IN_TABLE_TEXT:{WT(this,t);break}}}onStartTag(t){this.skipNextNewLine=!1,this.currentToken=t,this._processStartTag(t),t.selfClosing&&!t.ackSelfClosing&&this._err(t,Ne.nonVoidHtmlElementStartTagWithTrailingSolidus)}_processStartTag(t){this.shouldProcessStartTagTokenInForeignContent(t)?Cat(this,t):this._startTagOutsideForeignContent(t)}_startTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{qT(this,t);break}case ie.BEFORE_HTML:{oot(this,t);break}case ie.BEFORE_HEAD:{uot(this,t);break}case ie.IN_HEAD:{ld(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{fot(this,t);break}case ie.AFTER_HEAD:{hot(this,t);break}case ie.IN_BODY:{Ra(this,t);break}case ie.IN_TABLE:{nx(this,t);break}case ie.IN_TABLE_TEXT:{WT(this,t);break}case ie.IN_CAPTION:{lat(this,t);break}case ie.IN_COLUMN_GROUP:{KK(this,t);break}case ie.IN_TABLE_BODY:{G6(this,t);break}case ie.IN_ROW:{Y6(this,t);break}case ie.IN_CELL:{dat(this,t);break}case ie.IN_SELECT:{PSe(this,t);break}case ie.IN_SELECT_IN_TABLE:{pat(this,t);break}case ie.IN_TEMPLATE:{gat(this,t);break}case ie.AFTER_BODY:{vat(this,t);break}case ie.IN_FRAMESET:{bat(this,t);break}case ie.AFTER_FRAMESET:{wat(this,t);break}case ie.AFTER_AFTER_BODY:{xat(this,t);break}case ie.AFTER_AFTER_FRAMESET:{Sat(this,t);break}}}onEndTag(t){this.skipNextNewLine=!1,this.currentToken=t,this.currentNotInHTML?Iat(this,t):this._endTagOutsideForeignContent(t)}_endTagOutsideForeignContent(t){switch(this.insertionMode){case ie.INITIAL:{qT(this,t);break}case ie.BEFORE_HTML:{aot(this,t);break}case ie.BEFORE_HEAD:{lot(this,t);break}case ie.IN_HEAD:{cot(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{dot(this,t);break}case ie.AFTER_HEAD:{pot(this,t);break}case ie.IN_BODY:{W6(this,t);break}case ie.TEXT:{Zot(this,t);break}case ie.IN_TABLE:{rI(this,t);break}case ie.IN_TABLE_TEXT:{WT(this,t);break}case ie.IN_CAPTION:{cat(this,t);break}case ie.IN_COLUMN_GROUP:{fat(this,t);break}case ie.IN_TABLE_BODY:{gz(this,t);break}case ie.IN_ROW:{NSe(this,t);break}case ie.IN_CELL:{hat(this,t);break}case ie.IN_SELECT:{OSe(this,t);break}case ie.IN_SELECT_IN_TABLE:{mat(this,t);break}case ie.IN_TEMPLATE:{yat(this,t);break}case ie.AFTER_BODY:{$Se(this,t);break}case ie.IN_FRAMESET:{_at(this,t);break}case ie.AFTER_FRAMESET:{Eat(this,t);break}case ie.AFTER_AFTER_BODY:{LO(this,t);break}}}onEof(t){switch(this.insertionMode){case ie.INITIAL:{qT(this,t);break}case ie.BEFORE_HTML:{UC(this,t);break}case ie.BEFORE_HEAD:{zC(this,t);break}case ie.IN_HEAD:{VC(this,t);break}case ie.IN_HEAD_NO_SCRIPT:{HC(this,t);break}case ie.AFTER_HEAD:{qC(this,t);break}case ie.IN_BODY:case ie.IN_TABLE:case ie.IN_CAPTION:case ie.IN_COLUMN_GROUP:case ie.IN_TABLE_BODY:case ie.IN_ROW:case ie.IN_CELL:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:{CSe(this,t);break}case ie.TEXT:{eat(this,t);break}case ie.IN_TABLE_TEXT:{WT(this,t);break}case ie.IN_TEMPLATE:{DSe(this,t);break}case ie.AFTER_BODY:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{YK(this,t);break}}}onWhitespaceCharacter(t){if(this.skipNextNewLine&&(this.skipNextNewLine=!1,t.chars.charCodeAt(0)===X.LINE_FEED)){if(t.chars.length===1)return;t.chars=t.chars.substr(1)}if(this.tokenizer.inForeignNode){this._insertCharacters(t);return}switch(this.insertionMode){case ie.IN_HEAD:case ie.IN_HEAD_NO_SCRIPT:case ie.AFTER_HEAD:case ie.TEXT:case ie.IN_COLUMN_GROUP:case ie.IN_SELECT:case ie.IN_SELECT_IN_TABLE:case ie.IN_FRAMESET:case ie.AFTER_FRAMESET:{this._insertCharacters(t);break}case ie.IN_BODY:case ie.IN_CAPTION:case ie.IN_CELL:case ie.IN_TEMPLATE:case ie.AFTER_BODY:case ie.AFTER_AFTER_BODY:case ie.AFTER_AFTER_FRAMESET:{ESe(this,t);break}case ie.IN_TABLE:case ie.IN_TABLE_BODY:case ie.IN_ROW:{G8(this,t);break}case ie.IN_TABLE_TEXT:{ISe(this,t);break}}}};function Qst(e,t){let n=e.activeFormattingElements.getElementEntryInScopeWithTagName(t.tagName);return n?e.openElements.contains(n.element)?e.openElements.hasInScope(t.tagID)||(n=null):(e.activeFormattingElements.removeEntry(n),n=null):ASe(e,t),n}function Jst(e,t){let n=null,r=e.openElements.stackTop;for(;r>=0;r--){const i=e.openElements.items[r];if(i===t.element)break;e._isSpecialElement(i,e.openElements.tagIDs[r])&&(n=i)}return n||(e.openElements.shortenToLength(r<0?0:r),e.activeFormattingElements.removeEntry(t)),n}function Zst(e,t,n){let r=t,i=e.openElements.getCommonAncestor(t);for(let s=0,o=i;o!==n;s++,o=i){i=e.openElements.getCommonAncestor(o);const a=e.activeFormattingElements.getElementEntry(o),u=a&&s>=Kst;!a||u?(u&&e.activeFormattingElements.removeEntry(a),e.openElements.remove(o)):(o=eot(e,a),r===t&&(e.activeFormattingElements.bookmark=a),e.treeAdapter.detachNode(r),e.treeAdapter.appendChild(o,r),r=o)}return r}function eot(e,t){const n=e.treeAdapter.getNamespaceURI(t.element),r=e.treeAdapter.createElement(t.token.tagName,n,t.token.attrs);return e.openElements.replace(t.element,r),t.element=r,r}function tot(e,t,n){const r=e.treeAdapter.getTagName(t),i=kS(r);if(e._isElementCausesFosterParenting(i))e._fosterParentElement(n);else{const s=e.treeAdapter.getNamespaceURI(t);i===R.TEMPLATE&&s===Fe.HTML&&(t=e.treeAdapter.getTemplateContent(t)),e.treeAdapter.appendChild(t,n)}}function not(e,t,n){const r=e.treeAdapter.getNamespaceURI(n.element),{token:i}=n,s=e.treeAdapter.createElement(i.tagName,r,i.attrs);e._adoptNodes(t,s),e.treeAdapter.appendChild(t,s),e.activeFormattingElements.insertElementAfterBookmark(s,i),e.activeFormattingElements.removeEntry(n),e.openElements.remove(n.element),e.openElements.insertAfter(t,s,i.tagID)}function GK(e,t){for(let n=0;n<Yst;n++){const r=Qst(e,t);if(!r)break;const i=Jst(e,r);if(!i)break;e.activeFormattingElements.bookmark=r;const s=Zst(e,i,r.element),o=e.openElements.getCommonAncestor(r.element);e.treeAdapter.detachNode(s),o&&tot(e,o,s),not(e,i,r)}}function mz(e,t){e._appendCommentNode(t,e.openElements.currentTmplContentOrNode)}function rot(e,t){e._appendCommentNode(t,e.openElements.items[0])}function iot(e,t){e._appendCommentNode(t,e.document)}function YK(e,t){if(e.stopped=!0,t.location){const n=e.fragmentContext?0:2;for(let r=e.openElements.stackTop;r>=n;r--)e._setEndLocation(e.openElements.items[r],t);if(!e.fragmentContext&&e.openElements.stackTop>=0){const r=e.openElements.items[0],i=e.treeAdapter.getNodeSourceCodeLocation(r);if(i&&!i.endTag&&(e._setEndLocation(r,t),e.openElements.stackTop>=1)){const s=e.openElements.items[1],o=e.treeAdapter.getNodeSourceCodeLocation(s);o&&!o.endTag&&e._setEndLocation(s,t)}}}}function sot(e,t){e._setDocumentType(t);const n=t.forceQuirks?wl.QUIRKS:$st(t);Dst(t)||e._err(t,Ne.nonConformingDoctype),e.treeAdapter.setDocumentMode(e.document,n),e.insertionMode=ie.BEFORE_HTML}function qT(e,t){e._err(t,Ne.missingDoctype,!0),e.treeAdapter.setDocumentMode(e.document,wl.QUIRKS),e.insertionMode=ie.BEFORE_HTML,e._processToken(t)}function oot(e,t){t.tagID===R.HTML?(e._insertElement(t,Fe.HTML),e.insertionMode=ie.BEFORE_HEAD):UC(e,t)}function aot(e,t){const n=t.tagID;(n===R.HTML||n===R.HEAD||n===R.BODY||n===R.BR)&&UC(e,t)}function UC(e,t){e._insertFakeRootElement(),e.insertionMode=ie.BEFORE_HEAD,e._processToken(t)}function uot(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.HEAD:{e._insertElement(t,Fe.HTML),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD;break}default:zC(e,t)}}function lot(e,t){const n=t.tagID;n===R.HEAD||n===R.BODY||n===R.HTML||n===R.BR?zC(e,t):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function zC(e,t){e._insertFakeElement(Ee.HEAD,R.HEAD),e.headElement=e.openElements.current,e.insertionMode=ie.IN_HEAD,e._processToken(t)}function ld(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TITLE:{e._switchToTextParsing(t,cs.RCDATA);break}case R.NOSCRIPT:{e.options.scriptingEnabled?e._switchToTextParsing(t,cs.RAWTEXT):(e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_HEAD_NO_SCRIPT);break}case R.NOFRAMES:case R.STYLE:{e._switchToTextParsing(t,cs.RAWTEXT);break}case R.SCRIPT:{e._switchToTextParsing(t,cs.SCRIPT_DATA);break}case R.TEMPLATE:{e._insertTemplate(t),e.activeFormattingElements.insertMarker(),e.framesetOk=!1,e.insertionMode=ie.IN_TEMPLATE,e.tmplInsertionModeStack.unshift(ie.IN_TEMPLATE);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:VC(e,t)}}function cot(e,t){switch(t.tagID){case R.HEAD:{e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD;break}case R.BODY:case R.BR:case R.HTML:{VC(e,t);break}case R.TEMPLATE:{t_(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function t_(e,t){e.openElements.tmplCount>0?(e.openElements.generateImpliedEndTagsThoroughly(),e.openElements.currentTagId!==R.TEMPLATE&&e._err(t,Ne.closingOfElementWithOpenChildElements),e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode()):e._err(t,Ne.endTagWithoutMatchingOpenElement)}function VC(e,t){e.openElements.pop(),e.insertionMode=ie.AFTER_HEAD,e._processToken(t)}function fot(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.BASEFONT:case R.BGSOUND:case R.HEAD:case R.LINK:case R.META:case R.NOFRAMES:case R.STYLE:{ld(e,t);break}case R.NOSCRIPT:{e._err(t,Ne.nestedNoscriptInHead);break}default:HC(e,t)}}function dot(e,t){switch(t.tagID){case R.NOSCRIPT:{e.openElements.pop(),e.insertionMode=ie.IN_HEAD;break}case R.BR:{HC(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function HC(e,t){const n=t.type===Rn.EOF?Ne.openElementsLeftAfterEof:Ne.disallowedContentInNoscriptInHead;e._err(t,n),e.openElements.pop(),e.insertionMode=ie.IN_HEAD,e._processToken(t)}function hot(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.BODY:{e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_BODY;break}case R.FRAMESET:{e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET;break}case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{e._err(t,Ne.abandonedHeadElementChild),e.openElements.push(e.headElement,R.HEAD),ld(e,t),e.openElements.remove(e.headElement);break}case R.HEAD:{e._err(t,Ne.misplacedStartTagForHeadElement);break}default:qC(e,t)}}function pot(e,t){switch(t.tagID){case R.BODY:case R.HTML:case R.BR:{qC(e,t);break}case R.TEMPLATE:{t_(e,t);break}default:e._err(t,Ne.endTagWithoutMatchingOpenElement)}}function qC(e,t){e._insertFakeElement(Ee.BODY,R.BODY),e.insertionMode=ie.IN_BODY,q6(e,t)}function q6(e,t){switch(t.type){case Rn.CHARACTER:{xSe(e,t);break}case Rn.WHITESPACE_CHARACTER:{ESe(e,t);break}case Rn.COMMENT:{mz(e,t);break}case Rn.START_TAG:{Ra(e,t);break}case Rn.END_TAG:{W6(e,t);break}case Rn.EOF:{CSe(e,t);break}}}function ESe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t)}function xSe(e,t){e._reconstructActiveFormattingElements(),e._insertCharacters(t),e.framesetOk=!1}function mot(e,t){e.openElements.tmplCount===0&&e.treeAdapter.adoptAttributes(e.openElements.items[0],t.attrs)}function got(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e.openElements.tmplCount===0&&(e.framesetOk=!1,e.treeAdapter.adoptAttributes(n,t.attrs))}function yot(e,t){const n=e.openElements.tryPeekProperlyNestedBodyElement();e.framesetOk&&n&&(e.treeAdapter.detachNode(n),e.openElements.popAllUpToHtmlElement(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_FRAMESET)}function vot(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function bot(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),fSe(e.openElements.currentTagId)&&e.openElements.pop(),e._insertElement(t,Fe.HTML)}function _ot(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.framesetOk=!1}function wot(e,t){const n=e.openElements.tmplCount>0;(!e.formElement||n)&&(e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),n||(e.formElement=e.openElements.current))}function Eot(e,t){e.framesetOk=!1;const n=t.tagID;for(let r=e.openElements.stackTop;r>=0;r--){const i=e.openElements.tagIDs[r];if(n===R.LI&&i===R.LI||(n===R.DD||n===R.DT)&&(i===R.DD||i===R.DT)){e.openElements.generateImpliedEndTagsWithExclusion(i),e.openElements.popUntilTagNamePopped(i);break}if(i!==R.ADDRESS&&i!==R.DIV&&i!==R.P&&e._isSpecialElement(e.openElements.items[r],i))break}e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML)}function xot(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.tokenizer.state=cs.PLAINTEXT}function Sot(e,t){e.openElements.hasInScope(R.BUTTON)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.BUTTON)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1}function Tot(e,t){const n=e.activeFormattingElements.getElementEntryInScopeWithTagName(Ee.A);n&&(GK(e,t),e.openElements.remove(n.element),e.activeFormattingElements.removeEntry(n)),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Aot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Cot(e,t){e._reconstructActiveFormattingElements(),e.openElements.hasInScope(R.NOBR)&&(GK(e,t),e._reconstructActiveFormattingElements()),e._insertElement(t,Fe.HTML),e.activeFormattingElements.pushElement(e.openElements.current,t)}function Iot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.activeFormattingElements.insertMarker(),e.framesetOk=!1}function kot(e,t){e.treeAdapter.getDocumentMode(e.document)!==wl.QUIRKS&&e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=ie.IN_TABLE}function SSe(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function TSe(e){const t=uSe(e,N0.TYPE);return t!=null&&t.toLowerCase()===Gst}function Rot(e,t){e._reconstructActiveFormattingElements(),e._appendElement(t,Fe.HTML),TSe(t)||(e.framesetOk=!1),t.ackSelfClosing=!0}function Not(e,t){e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0}function Pot(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._appendElement(t,Fe.HTML),e.framesetOk=!1,t.ackSelfClosing=!0}function Oot(e,t){t.tagName=Ee.IMG,t.tagID=R.IMG,SSe(e,t)}function Dot(e,t){e._insertElement(t,Fe.HTML),e.skipNextNewLine=!0,e.tokenizer.state=cs.RCDATA,e.originalInsertionMode=e.insertionMode,e.framesetOk=!1,e.insertionMode=ie.TEXT}function $ot(e,t){e.openElements.hasInButtonScope(R.P)&&e._closePElement(),e._reconstructActiveFormattingElements(),e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function Mot(e,t){e.framesetOk=!1,e._switchToTextParsing(t,cs.RAWTEXT)}function Ele(e,t){e._switchToTextParsing(t,cs.RAWTEXT)}function Lot(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML),e.framesetOk=!1,e.insertionMode=e.insertionMode===ie.IN_TABLE||e.insertionMode===ie.IN_CAPTION||e.insertionMode===ie.IN_TABLE_BODY||e.insertionMode===ie.IN_ROW||e.insertionMode===ie.IN_CELL?ie.IN_SELECT_IN_TABLE:ie.IN_SELECT}function Fot(e,t){e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function jot(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTags(),e._insertElement(t,Fe.HTML)}function Bot(e,t){e.openElements.hasInScope(R.RUBY)&&e.openElements.generateImpliedEndTagsWithExclusion(R.RTC),e._insertElement(t,Fe.HTML)}function Uot(e,t){e._reconstructActiveFormattingElements(),bSe(t),WK(t),t.selfClosing?e._appendElement(t,Fe.MATHML):e._insertElement(t,Fe.MATHML),t.ackSelfClosing=!0}function zot(e,t){e._reconstructActiveFormattingElements(),_Se(t),WK(t),t.selfClosing?e._appendElement(t,Fe.SVG):e._insertElement(t,Fe.SVG),t.ackSelfClosing=!0}function xle(e,t){e._reconstructActiveFormattingElements(),e._insertElement(t,Fe.HTML)}function Ra(e,t){switch(t.tagID){case R.I:case R.S:case R.B:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.SMALL:case R.STRIKE:case R.STRONG:{Aot(e,t);break}case R.A:{Tot(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{bot(e,t);break}case R.P:case R.DL:case R.OL:case R.UL:case R.DIV:case R.DIR:case R.NAV:case R.MAIN:case R.MENU:case R.ASIDE:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.DETAILS:case R.ADDRESS:case R.ARTICLE:case R.SECTION:case R.SUMMARY:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{vot(e,t);break}case R.LI:case R.DD:case R.DT:{Eot(e,t);break}case R.BR:case R.IMG:case R.WBR:case R.AREA:case R.EMBED:case R.KEYGEN:{SSe(e,t);break}case R.HR:{Pot(e,t);break}case R.RB:case R.RTC:{jot(e,t);break}case R.RT:case R.RP:{Bot(e,t);break}case R.PRE:case R.LISTING:{_ot(e,t);break}case R.XMP:{$ot(e,t);break}case R.SVG:{zot(e,t);break}case R.HTML:{mot(e,t);break}case R.BASE:case R.LINK:case R.META:case R.STYLE:case R.TITLE:case R.SCRIPT:case R.BGSOUND:case R.BASEFONT:case R.TEMPLATE:{ld(e,t);break}case R.BODY:{got(e,t);break}case R.FORM:{wot(e,t);break}case R.NOBR:{Cot(e,t);break}case R.MATH:{Uot(e,t);break}case R.TABLE:{kot(e,t);break}case R.INPUT:{Rot(e,t);break}case R.PARAM:case R.TRACK:case R.SOURCE:{Not(e,t);break}case R.IMAGE:{Oot(e,t);break}case R.BUTTON:{Sot(e,t);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{Iot(e,t);break}case R.IFRAME:{Mot(e,t);break}case R.SELECT:{Lot(e,t);break}case R.OPTION:case R.OPTGROUP:{Fot(e,t);break}case R.NOEMBED:{Ele(e,t);break}case R.FRAMESET:{yot(e,t);break}case R.TEXTAREA:{Dot(e,t);break}case R.NOSCRIPT:{e.options.scriptingEnabled?Ele(e,t):xle(e,t);break}case R.PLAINTEXT:{xot(e,t);break}case R.COL:case R.TH:case R.TD:case R.TR:case R.HEAD:case R.FRAME:case R.TBODY:case R.TFOOT:case R.THEAD:case R.CAPTION:case R.COLGROUP:break;default:xle(e,t)}}function Vot(e,t){if(e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,e.options.sourceCodeLocationInfo)){const n=e.openElements.tryPeekProperlyNestedBodyElement();n&&e._setEndLocation(n,t)}}function Hot(e,t){e.openElements.hasInScope(R.BODY)&&(e.insertionMode=ie.AFTER_BODY,$Se(e,t))}function qot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n))}function Wot(e){const t=e.openElements.tmplCount>0,{formElement:n}=e;t||(e.formElement=null),(n||t)&&e.openElements.hasInScope(R.FORM)&&(e.openElements.generateImpliedEndTags(),t?e.openElements.popUntilTagNamePopped(R.FORM):n&&e.openElements.remove(n))}function Got(e){e.openElements.hasInButtonScope(R.P)||e._insertFakeElement(Ee.P,R.P),e._closePElement()}function Yot(e){e.openElements.hasInListItemScope(R.LI)&&(e.openElements.generateImpliedEndTagsWithExclusion(R.LI),e.openElements.popUntilTagNamePopped(R.LI))}function Kot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTagsWithExclusion(n),e.openElements.popUntilTagNamePopped(n))}function Xot(e){e.openElements.hasNumberedHeaderInScope()&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilNumberedHeaderPopped())}function Qot(e,t){const n=t.tagID;e.openElements.hasInScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker())}function Jot(e){e._reconstructActiveFormattingElements(),e._insertFakeElement(Ee.BR,R.BR),e.openElements.pop(),e.framesetOk=!1}function ASe(e,t){const n=t.tagName,r=t.tagID;for(let i=e.openElements.stackTop;i>0;i--){const s=e.openElements.items[i],o=e.openElements.tagIDs[i];if(r===o&&(r!==R.UNKNOWN||e.treeAdapter.getTagName(s)===n)){e.openElements.generateImpliedEndTagsWithExclusion(r),e.openElements.stackTop>=i&&e.openElements.shortenToLength(i);break}if(e._isSpecialElement(s,o))break}}function W6(e,t){switch(t.tagID){case R.A:case R.B:case R.I:case R.S:case R.U:case R.EM:case R.TT:case R.BIG:case R.CODE:case R.FONT:case R.NOBR:case R.SMALL:case R.STRIKE:case R.STRONG:{GK(e,t);break}case R.P:{Got(e);break}case R.DL:case R.UL:case R.OL:case R.DIR:case R.DIV:case R.NAV:case R.PRE:case R.MAIN:case R.MENU:case R.ASIDE:case R.BUTTON:case R.CENTER:case R.FIGURE:case R.FOOTER:case R.HEADER:case R.HGROUP:case R.DIALOG:case R.ADDRESS:case R.ARTICLE:case R.DETAILS:case R.SECTION:case R.SUMMARY:case R.LISTING:case R.FIELDSET:case R.BLOCKQUOTE:case R.FIGCAPTION:{qot(e,t);break}case R.LI:{Yot(e);break}case R.DD:case R.DT:{Kot(e,t);break}case R.H1:case R.H2:case R.H3:case R.H4:case R.H5:case R.H6:{Xot(e);break}case R.BR:{Jot(e);break}case R.BODY:{Vot(e,t);break}case R.HTML:{Hot(e,t);break}case R.FORM:{Wot(e);break}case R.APPLET:case R.OBJECT:case R.MARQUEE:{Qot(e,t);break}case R.TEMPLATE:{t_(e,t);break}default:ASe(e,t)}}function CSe(e,t){e.tmplInsertionModeStack.length>0?DSe(e,t):YK(e,t)}function Zot(e,t){var n;t.tagID===R.SCRIPT&&((n=e.scriptHandler)===null||n===void 0||n.call(e,e.openElements.current)),e.openElements.pop(),e.insertionMode=e.originalInsertionMode}function eat(e,t){e._err(t,Ne.eofInElementThatCanContainOnlyText),e.openElements.pop(),e.insertionMode=e.originalInsertionMode,e.onEof(t)}function G8(e,t){if(wSe.has(e.openElements.currentTagId))switch(e.pendingCharacterTokens.length=0,e.hasNonWhitespacePendingCharacterToken=!1,e.originalInsertionMode=e.insertionMode,e.insertionMode=ie.IN_TABLE_TEXT,t.type){case Rn.CHARACTER:{kSe(e,t);break}case Rn.WHITESPACE_CHARACTER:{ISe(e,t);break}}else Fk(e,t)}function tat(e,t){e.openElements.clearBackToTableContext(),e.activeFormattingElements.insertMarker(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CAPTION}function nat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_COLUMN_GROUP}function rat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.COLGROUP,R.COLGROUP),e.insertionMode=ie.IN_COLUMN_GROUP,KK(e,t)}function iat(e,t){e.openElements.clearBackToTableContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_TABLE_BODY}function sat(e,t){e.openElements.clearBackToTableContext(),e._insertFakeElement(Ee.TBODY,R.TBODY),e.insertionMode=ie.IN_TABLE_BODY,G6(e,t)}function oat(e,t){e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode(),e._processStartTag(t))}function aat(e,t){TSe(t)?e._appendElement(t,Fe.HTML):Fk(e,t),t.ackSelfClosing=!0}function uat(e,t){!e.formElement&&e.openElements.tmplCount===0&&(e._insertElement(t,Fe.HTML),e.formElement=e.openElements.current,e.openElements.pop())}function nx(e,t){switch(t.tagID){case R.TD:case R.TH:case R.TR:{sat(e,t);break}case R.STYLE:case R.SCRIPT:case R.TEMPLATE:{ld(e,t);break}case R.COL:{rat(e,t);break}case R.FORM:{uat(e,t);break}case R.TABLE:{oat(e,t);break}case R.TBODY:case R.TFOOT:case R.THEAD:{iat(e,t);break}case R.INPUT:{aat(e,t);break}case R.CAPTION:{tat(e,t);break}case R.COLGROUP:{nat(e,t);break}default:Fk(e,t)}}function rI(e,t){switch(t.tagID){case R.TABLE:{e.openElements.hasInTableScope(R.TABLE)&&(e.openElements.popUntilTagNamePopped(R.TABLE),e._resetInsertionMode());break}case R.TEMPLATE:{t_(e,t);break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:Fk(e,t)}}function Fk(e,t){const n=e.fosterParentingEnabled;e.fosterParentingEnabled=!0,q6(e,t),e.fosterParentingEnabled=n}function ISe(e,t){e.pendingCharacterTokens.push(t)}function kSe(e,t){e.pendingCharacterTokens.push(t),e.hasNonWhitespacePendingCharacterToken=!0}function WT(e,t){let n=0;if(e.hasNonWhitespacePendingCharacterToken)for(;n<e.pendingCharacterTokens.length;n++)Fk(e,e.pendingCharacterTokens[n]);else for(;n<e.pendingCharacterTokens.length;n++)e._insertCharacters(e.pendingCharacterTokens[n]);e.insertionMode=e.originalInsertionMode,e._processToken(t)}const RSe=new Set([R.CAPTION,R.COL,R.COLGROUP,R.TBODY,R.TD,R.TFOOT,R.TH,R.THEAD,R.TR]);function lat(e,t){const n=t.tagID;RSe.has(n)?e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,nx(e,t)):Ra(e,t)}function cat(e,t){const n=t.tagID;switch(n){case R.CAPTION:case R.TABLE:{e.openElements.hasInTableScope(R.CAPTION)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(R.CAPTION),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_TABLE,n===R.TABLE&&rI(e,t));break}case R.BODY:case R.COL:case R.COLGROUP:case R.HTML:case R.TBODY:case R.TD:case R.TFOOT:case R.TH:case R.THEAD:case R.TR:break;default:W6(e,t)}}function KK(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.COL:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.TEMPLATE:{ld(e,t);break}default:k$(e,t)}}function fat(e,t){switch(t.tagID){case R.COLGROUP:{e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TEMPLATE:{t_(e,t);break}case R.COL:break;default:k$(e,t)}}function k$(e,t){e.openElements.currentTagId===R.COLGROUP&&(e.openElements.pop(),e.insertionMode=ie.IN_TABLE,e._processToken(t))}function G6(e,t){switch(t.tagID){case R.TR:{e.openElements.clearBackToTableBodyContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_ROW;break}case R.TH:case R.TD:{e.openElements.clearBackToTableBodyContext(),e._insertFakeElement(Ee.TR,R.TR),e.insertionMode=ie.IN_ROW,Y6(e,t);break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,nx(e,t));break}default:nx(e,t)}}function gz(e,t){const n=t.tagID;switch(t.tagID){case R.TBODY:case R.TFOOT:case R.THEAD:{e.openElements.hasInTableScope(n)&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE);break}case R.TABLE:{e.openElements.hasTableBodyContextInTableScope()&&(e.openElements.clearBackToTableBodyContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE,rI(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:case R.TR:break;default:rI(e,t)}}function Y6(e,t){switch(t.tagID){case R.TH:case R.TD:{e.openElements.clearBackToTableRowContext(),e._insertElement(t,Fe.HTML),e.insertionMode=ie.IN_CELL,e.activeFormattingElements.insertMarker();break}case R.CAPTION:case R.COL:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,G6(e,t));break}default:nx(e,t)}}function NSe(e,t){switch(t.tagID){case R.TR:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY);break}case R.TABLE:{e.openElements.hasInTableScope(R.TR)&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,gz(e,t));break}case R.TBODY:case R.TFOOT:case R.THEAD:{(e.openElements.hasInTableScope(t.tagID)||e.openElements.hasInTableScope(R.TR))&&(e.openElements.clearBackToTableRowContext(),e.openElements.pop(),e.insertionMode=ie.IN_TABLE_BODY,gz(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:case R.TD:case R.TH:break;default:rI(e,t)}}function dat(e,t){const n=t.tagID;RSe.has(n)?(e.openElements.hasInTableScope(R.TD)||e.openElements.hasInTableScope(R.TH))&&(e._closeTableCell(),Y6(e,t)):Ra(e,t)}function hat(e,t){const n=t.tagID;switch(n){case R.TD:case R.TH:{e.openElements.hasInTableScope(n)&&(e.openElements.generateImpliedEndTags(),e.openElements.popUntilTagNamePopped(n),e.activeFormattingElements.clearToLastMarker(),e.insertionMode=ie.IN_ROW);break}case R.TABLE:case R.TBODY:case R.TFOOT:case R.THEAD:case R.TR:{e.openElements.hasInTableScope(n)&&(e._closeTableCell(),NSe(e,t));break}case R.BODY:case R.CAPTION:case R.COL:case R.COLGROUP:case R.HTML:break;default:W6(e,t)}}function PSe(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.OPTGROUP:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop(),e._insertElement(t,Fe.HTML);break}case R.INPUT:case R.KEYGEN:case R.TEXTAREA:case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),t.tagID!==R.SELECT&&e._processStartTag(t));break}case R.SCRIPT:case R.TEMPLATE:{ld(e,t);break}}}function OSe(e,t){switch(t.tagID){case R.OPTGROUP:{e.openElements.stackTop>0&&e.openElements.currentTagId===R.OPTION&&e.openElements.tagIDs[e.openElements.stackTop-1]===R.OPTGROUP&&e.openElements.pop(),e.openElements.currentTagId===R.OPTGROUP&&e.openElements.pop();break}case R.OPTION:{e.openElements.currentTagId===R.OPTION&&e.openElements.pop();break}case R.SELECT:{e.openElements.hasInSelectScope(R.SELECT)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode());break}case R.TEMPLATE:{t_(e,t);break}}}function pat(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e._processStartTag(t)):PSe(e,t)}function mat(e,t){const n=t.tagID;n===R.CAPTION||n===R.TABLE||n===R.TBODY||n===R.TFOOT||n===R.THEAD||n===R.TR||n===R.TD||n===R.TH?e.openElements.hasInTableScope(n)&&(e.openElements.popUntilTagNamePopped(R.SELECT),e._resetInsertionMode(),e.onEndTag(t)):OSe(e,t)}function gat(e,t){switch(t.tagID){case R.BASE:case R.BASEFONT:case R.BGSOUND:case R.LINK:case R.META:case R.NOFRAMES:case R.SCRIPT:case R.STYLE:case R.TEMPLATE:case R.TITLE:{ld(e,t);break}case R.CAPTION:case R.COLGROUP:case R.TBODY:case R.TFOOT:case R.THEAD:{e.tmplInsertionModeStack[0]=ie.IN_TABLE,e.insertionMode=ie.IN_TABLE,nx(e,t);break}case R.COL:{e.tmplInsertionModeStack[0]=ie.IN_COLUMN_GROUP,e.insertionMode=ie.IN_COLUMN_GROUP,KK(e,t);break}case R.TR:{e.tmplInsertionModeStack[0]=ie.IN_TABLE_BODY,e.insertionMode=ie.IN_TABLE_BODY,G6(e,t);break}case R.TD:case R.TH:{e.tmplInsertionModeStack[0]=ie.IN_ROW,e.insertionMode=ie.IN_ROW,Y6(e,t);break}default:e.tmplInsertionModeStack[0]=ie.IN_BODY,e.insertionMode=ie.IN_BODY,Ra(e,t)}}function yat(e,t){t.tagID===R.TEMPLATE&&t_(e,t)}function DSe(e,t){e.openElements.tmplCount>0?(e.openElements.popUntilTagNamePopped(R.TEMPLATE),e.activeFormattingElements.clearToLastMarker(),e.tmplInsertionModeStack.shift(),e._resetInsertionMode(),e.onEof(t)):YK(e,t)}function vat(e,t){t.tagID===R.HTML?Ra(e,t):R$(e,t)}function $Se(e,t){var n;if(t.tagID===R.HTML){if(e.fragmentContext||(e.insertionMode=ie.AFTER_AFTER_BODY),e.options.sourceCodeLocationInfo&&e.openElements.tagIDs[0]===R.HTML){e._setEndLocation(e.openElements.items[0],t);const r=e.openElements.items[1];r&&!(!((n=e.treeAdapter.getNodeSourceCodeLocation(r))===null||n===void 0)&&n.endTag)&&e._setEndLocation(r,t)}}else R$(e,t)}function R$(e,t){e.insertionMode=ie.IN_BODY,q6(e,t)}function bat(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.FRAMESET:{e._insertElement(t,Fe.HTML);break}case R.FRAME:{e._appendElement(t,Fe.HTML),t.ackSelfClosing=!0;break}case R.NOFRAMES:{ld(e,t);break}}}function _at(e,t){t.tagID===R.FRAMESET&&!e.openElements.isRootHtmlElementCurrent()&&(e.openElements.pop(),!e.fragmentContext&&e.openElements.currentTagId!==R.FRAMESET&&(e.insertionMode=ie.AFTER_FRAMESET))}function wat(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.NOFRAMES:{ld(e,t);break}}}function Eat(e,t){t.tagID===R.HTML&&(e.insertionMode=ie.AFTER_AFTER_FRAMESET)}function xat(e,t){t.tagID===R.HTML?Ra(e,t):LO(e,t)}function LO(e,t){e.insertionMode=ie.IN_BODY,q6(e,t)}function Sat(e,t){switch(t.tagID){case R.HTML:{Ra(e,t);break}case R.NOFRAMES:{ld(e,t);break}}}function Tat(e,t){t.chars=bi,e._insertCharacters(t)}function Aat(e,t){e._insertCharacters(t),e.framesetOk=!1}function MSe(e){for(;e.treeAdapter.getNamespaceURI(e.openElements.current)!==Fe.HTML&&!e._isIntegrationPoint(e.openElements.currentTagId,e.openElements.current);)e.openElements.pop()}function Cat(e,t){if(zst(t))MSe(e),e._startTagOutsideForeignContent(t);else{const n=e._getAdjustedCurrentElement(),r=e.treeAdapter.getNamespaceURI(n);r===Fe.MATHML?bSe(t):r===Fe.SVG&&(Vst(t),_Se(t)),WK(t),t.selfClosing?e._appendElement(t,r):e._insertElement(t,r),t.ackSelfClosing=!0}}function Iat(e,t){if(t.tagID===R.P||t.tagID===R.BR){MSe(e),e._endTagOutsideForeignContent(t);return}for(let n=e.openElements.stackTop;n>0;n--){const r=e.openElements.items[n];if(e.treeAdapter.getNamespaceURI(r)===Fe.HTML){e._endTagOutsideForeignContent(t);break}const i=e.treeAdapter.getTagName(r);if(i.toLowerCase()===t.tagName){t.tagName=i,e.openElements.shortenToLength(n);break}}}Ee.AREA,Ee.BASE,Ee.BASEFONT,Ee.BGSOUND,Ee.BR,Ee.COL,Ee.EMBED,Ee.FRAME,Ee.HR,Ee.IMG,Ee.INPUT,Ee.KEYGEN,Ee.LINK,Ee.META,Ee.PARAM,Ee.SOURCE,Ee.TRACK,Ee.WBR;const kat=new Set(["mdxFlowExpression","mdxJsxFlowElement","mdxJsxTextElement","mdxTextExpression","mdxjsEsm"]),Sle={sourceCodeLocationInfo:!0,scriptingEnabled:!1};function LSe(e,t){const n=jat(e),r=rSe("type",{handlers:{root:Rat,element:Nat,text:Pat,comment:jSe,doctype:Oat,raw:$at},unknown:Mat}),i={parser:n?new wle(Sle):wle.getFragmentParser(void 0,Sle),handle(a){r(a,i)},stitches:!1,options:t||{}};r(e,i),RS(i,Jh());const s=n?i.parser.document:i.parser.getFragment(),o=Uit(s,{file:i.options.file});return i.stitches&&zK(o,"comment",function(a,u,l){const c=a;if(c.value.stitch&&l&&u!==void 0){const f=l.children;return f[u]=c.value.stitch,u}}),o.type==="root"&&o.children.length===1&&o.children[0].type===e.type?o.children[0]:o}function FSe(e,t){let n=-1;if(e)for(;++n<e.length;)t.handle(e[n])}function Rat(e,t){FSe(e.children,t)}function Nat(e,t){Lat(e,t),FSe(e.children,t),Fat(e,t)}function Pat(e,t){const n={type:Rn.CHARACTER,chars:e.value,location:jk(e)};RS(t,Jh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Oat(e,t){const n={type:Rn.DOCTYPE,name:"html",forceQuirks:!1,publicId:"",systemId:"",location:jk(e)};RS(t,Jh(e)),t.parser.currentToken=n,t.parser._processToken(t.parser.currentToken)}function Dat(e,t){t.stitches=!0;const n=Bat(e);if("children"in e&&"children"in n){const r=LSe({type:"root",children:e.children},t.options);n.children=r.children}jSe({type:"comment",value:{stitch:n}},t)}function jSe(e,t){const n=e.value,r={type:Rn.COMMENT,data:n,location:jk(e)};RS(t,Jh(e)),t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken)}function $at(e,t){if(t.parser.tokenizer.preprocessor.html="",t.parser.tokenizer.preprocessor.pos=-1,t.parser.tokenizer.preprocessor.lastGapPos=-2,t.parser.tokenizer.preprocessor.gapStack=[],t.parser.tokenizer.preprocessor.skipNextNewLine=!1,t.parser.tokenizer.preprocessor.lastChunkWritten=!1,t.parser.tokenizer.preprocessor.endOfChunkHit=!1,t.parser.tokenizer.preprocessor.isEol=!1,BSe(t,Jh(e)),t.parser.tokenizer.write(e.value,!1),t.parser.tokenizer._runParsingLoop(),t.parser.tokenizer.state===72||t.parser.tokenizer.state===78){t.parser.tokenizer.preprocessor.lastChunkWritten=!0;const n=t.parser.tokenizer._consume();t.parser.tokenizer._callState(n)}}function Mat(e,t){const n=e;if(t.options.passThrough&&t.options.passThrough.includes(n.type))Dat(n,t);else{let r="";throw kat.has(n.type)&&(r=". It looks like you are using MDX nodes with `hast-util-raw` (or `rehype-raw`). If you use this because you are using remark or rehype plugins that inject `'html'` nodes, then please raise an issue with that plugin, as its a bad and slow idea. If you use this because you are using markdown syntax, then you have to configure this utility (or plugin) to pass through these nodes (see `passThrough` in docs), but you can also migrate to use the MDX syntax"),new Error("Cannot compile `"+n.type+"` node"+r)}}function RS(e,t){BSe(e,t);const n=e.parser.tokenizer.currentCharacterToken;n&&n.location&&(n.location.endLine=e.parser.tokenizer.preprocessor.line,n.location.endCol=e.parser.tokenizer.preprocessor.col+1,n.location.endOffset=e.parser.tokenizer.preprocessor.offset+1,e.parser.currentToken=n,e.parser._processToken(e.parser.currentToken)),e.parser.tokenizer.paused=!1,e.parser.tokenizer.inLoop=!1,e.parser.tokenizer.active=!1,e.parser.tokenizer.returnState=cs.DATA,e.parser.tokenizer.charRefCode=-1,e.parser.tokenizer.consumedAfterSnapshot=-1,e.parser.tokenizer.currentLocation=null,e.parser.tokenizer.currentCharacterToken=null,e.parser.tokenizer.currentToken=null,e.parser.tokenizer.currentAttr={name:"",value:""}}function BSe(e,t){if(t&&t.offset!==void 0){const n={startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:-1,endCol:-1,endOffset:-1};e.parser.tokenizer.preprocessor.lineStartPos=-t.column+1,e.parser.tokenizer.preprocessor.droppedBufferSize=t.offset,e.parser.tokenizer.preprocessor.line=t.line,e.parser.tokenizer.currentLocation=n}}function Lat(e,t){const n=e.tagName.toLowerCase();if(t.parser.tokenizer.state===cs.PLAINTEXT)return;RS(t,Jh(e));const r=t.parser.openElements.current;let i="namespaceURI"in r?r.namespaceURI:_1.html;i===_1.html&&n==="svg"&&(i=_1.svg);const s=Wit({...e,children:[]},{space:i===_1.svg?"svg":"html"}),o={type:Rn.START_TAG,tagName:n,tagID:kS(n),selfClosing:!1,ackSelfClosing:!1,attrs:"attrs"in s?s.attrs:[],location:jk(e)};t.parser.currentToken=o,t.parser._processToken(t.parser.currentToken),t.parser.tokenizer.lastStartTagName=n}function Fat(e,t){const n=e.tagName.toLowerCase();if(!t.parser.tokenizer.inForeignNode&&est.includes(n)||t.parser.tokenizer.state===cs.PLAINTEXT)return;RS(t,U6(e));const r={type:Rn.END_TAG,tagName:n,tagID:kS(n),selfClosing:!1,ackSelfClosing:!1,attrs:[],location:jk(e)};t.parser.currentToken=r,t.parser._processToken(t.parser.currentToken),n===t.parser.tokenizer.lastStartTagName&&(t.parser.tokenizer.state===cs.RCDATA||t.parser.tokenizer.state===cs.RAWTEXT||t.parser.tokenizer.state===cs.SCRIPT_DATA)&&(t.parser.tokenizer.state=cs.DATA)}function jat(e){const t=e.type==="root"?e.children[0]:e;return!!(t&&(t.type==="doctype"||t.type==="element"&&t.tagName.toLowerCase()==="html"))}function jk(e){const t=Jh(e)||{line:void 0,column:void 0,offset:void 0},n=U6(e)||{line:void 0,column:void 0,offset:void 0};return{startLine:t.line,startCol:t.column,startOffset:t.offset,endLine:n.line,endCol:n.column,endOffset:n.offset}}function Bat(e){return"children"in e?tx({...e,children:[]}):tx(e)}function Uat(e){return function(t,n){return LSe(t,{...e,file:n})}}function eu({text:e,required:t}){const n={img({node:i,width:s,height:o,...a}){return _.jsx(Wy,{...a,h:o,w:s,ref:void 0})},p({node:i,...s}){return _.jsx(et,{...s,pb:8,fw:"inherit",ref:void 0})},h1({node:i,...s}){return _.jsx(Ii,{...s,order:1,...s,pb:12})},h2({node:i,...s}){return _.jsx(Ii,{...s,order:2,...s,pb:12})},h3({node:i,...s}){return _.jsx(Ii,{...s,order:3,...s,pb:12})},h4({node:i,...s}){return _.jsx(Ii,{...s,order:4,...s,pb:12})},h5({node:i,...s}){return _.jsx(Ii,{...s,order:5,...s,pb:12})},h6({node:i,...s}){return _.jsx(Ii,{...s,order:6,...s,pb:12})},a({node:i,...s}){return _.jsx(Yb,{...s,ref:void 0})},ul({node:i,...s}){return _.jsx(Hf,{withPadding:!0,...s,pb:8})},ol({node:i,type:s,...o}){return _.jsx(Hf,{type:"ordered",withPadding:!0,...o,pb:8})}};return _.jsx(Iit,{components:n,rehypePlugins:[Uat],children:e+(t?'<span style="color: #fa5252; margin-left: 4px">*</span>':"")})}function yz({issues:e,type:t}){const n=`
    ${t==="error"?"There was an issue loading the study config. Please check the following issues:":"There were some warnings while loading the study config. Please check the following warnings:"}

    ${e.map(r=>`- You have an error at ${r.instancePath||"root"}: ${r.message} - ${JSON.stringify(r.params)}  `).join(`
`)}
  `.replace(/\n\s+/g,`
`);return _.jsx(eu,{text:n})}const zat="https://github.com/revisit-studies/study/tree/main/public/";function Vat({globalConfig:e,studyConfigs:t}){const{configsList:n}=e,r=Qh();return _.jsx(pi.Main,{children:_.jsxs(Fc,{size:"xs",px:"xs",children:[_.jsx(Wy,{maw:150,mx:"auto",mb:"xl",radius:"md",src:`${Gu}revisitAssets/revisitLogoSquare.svg`,alt:"reVISit"}),_.jsx(et,{children:"Select an experiment to launch:"}),n.map(i=>{const s=t[i];if(!s)return null;const o=mxe(i);return _.jsx(Ts,{onClick:a=>{a.preventDefault(),r(`/${o}`)},my:"sm",style:{width:"100%"},children:_.jsxs(Kb,{shadow:"sm",radius:"md",withBorder:!0,children:[s.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:"bold",children:i}),_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(gue,{color:"red"}),_.jsx(et,{fw:"bold",ml:8,color:"red",children:"Errors"})]}),_.jsx(yz,{issues:s.errors,type:"error"})]}):_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{direction:"row",justify:"space-between",children:[_.jsx(et,{fw:"bold",children:s.studyMetadata.title}),_.jsx(Gb,{onClick:a=>{a.stopPropagation()},variant:"transparent",size:20,style:{float:"right"},component:"a",href:`${Gu}${o}`,children:_.jsx(zZe,{style:{paddingTop:4}})})]}),_.jsxs(et,{c:"dimmed",children:[_.jsx(et,{span:!0,fw:500,children:"Authors: "}),s.studyMetadata.authors]}),_.jsx(et,{c:"dimmed",children:s.studyMetadata.description}),_.jsx(et,{c:"dimmed",ta:"right",style:{paddingRight:5},children:_.jsxs(Yb,{target:"_blank",onClick:a=>a.stopPropagation(),href:`${zat}${o}`,children:["View source:"," ",o]})})]}),s.warnings.length>0&&_.jsxs(_.Fragment,{children:[_.jsxs(Nt,{align:"center",direction:"row",children:[_.jsx(gue,{color:"orange"}),_.jsx(et,{fw:"bold",ml:8,color:"orange",children:"Warnings"})]}),_.jsx(yz,{issues:s.warnings,type:"warning"})]})]})},i)})]})})}var USe={exports:{}},zSe={};/**
 * @license React
 * use-sync-external-store-with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bk=I;function Hat(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qat=typeof Object.is=="function"?Object.is:Hat,Wat=Bk.useSyncExternalStore,Gat=Bk.useRef,Yat=Bk.useEffect,Kat=Bk.useMemo,Xat=Bk.useDebugValue;zSe.useSyncExternalStoreWithSelector=function(e,t,n,r,i){var s=Gat(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=Kat(function(){function u(h){if(!l){if(l=!0,c=h,h=r(h),i!==void 0&&o.hasValue){var p=o.value;if(i(p,h))return f=p}return f=h}if(p=f,qat(c,h))return p;var m=r(h);return i!==void 0&&i(p,m)?p:(c=h,f=m)}var l=!1,c,f,d=n===void 0?null:n;return[function(){return u(t())},d===null?void 0:function(){return u(d())}]},[t,n,r,i]);var a=Wat(e,s[0],s[1]);return Yat(function(){o.hasValue=!0,o.value=a},[a]),Xat(a),a};USe.exports=zSe;var Qat=USe.exports,Rl="default"in zD?wr:zD,Tle=Symbol.for("react-redux-context"),Ale=typeof globalThis<"u"?globalThis:{};function Jat(){if(!Rl.createContext)return{};const e=Ale[Tle]??(Ale[Tle]=new Map);let t=e.get(Rl.createContext);return t||(t=Rl.createContext(null),e.set(Rl.createContext,t)),t}var Q0=Jat(),Zat=()=>{throw new Error("uSES not initialized!")};function XK(e=Q0){return function(){return Rl.useContext(e)}}var VSe=XK(),HSe=Zat,eut=e=>{HSe=e},tut=(e,t)=>e===t;function nut(e=Q0){const t=e===Q0?VSe:XK(e),n=(r,i={})=>{const{equalityFn:s=tut,devModeChecks:o={}}=typeof i=="function"?{equalityFn:i}:i,{store:a,subscription:u,getServerState:l,stabilityCheck:c,identityFunctionCheck:f}=t();Rl.useRef(!0);const d=Rl.useCallback({[r.name](p){return r(p)}}[r.name],[r,c,o.stabilityCheck]),h=HSe(u.addNestedSub,a.getState,l||a.getState,d,s);return Rl.useDebugValue(h),h};return Object.assign(n,{withTypes:()=>n}),n}var rut=nut();function iut(e){e()}function sut(){let e=null,t=null;return{clear(){e=null,t=null},notify(){iut(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let r=e;for(;r;)n.push(r),r=r.next;return n},subscribe(n){let r=!0;const i=t={callback:n,next:null,prev:t};return i.prev?i.prev.next=i:e=i,function(){!r||e===null||(r=!1,i.next?i.next.prev=i.prev:t=i.prev,i.prev?i.prev.next=i.next:e=i.next)}}}}var Cle={notify(){},get:()=>[]};function out(e,t){let n,r=Cle,i=0,s=!1;function o(m){c();const g=r.subscribe(m);let y=!1;return()=>{y||(y=!0,g(),f())}}function a(){r.notify()}function u(){p.onStateChange&&p.onStateChange()}function l(){return s}function c(){i++,n||(n=e.subscribe(u),r=sut())}function f(){i--,n&&i===0&&(n(),n=void 0,r.clear(),r=Cle)}function d(){s||(s=!0,c())}function h(){s&&(s=!1,f())}const p={addNestedSub:o,notifyNestedSubs:a,handleChangeWrapper:u,isSubscribed:l,trySubscribe:d,tryUnsubscribe:h,getListeners:()=>r};return p}var aut=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",uut=typeof navigator<"u"&&navigator.product==="ReactNative",lut=aut||uut?Rl.useLayoutEffect:Rl.useEffect;function cut({store:e,context:t,children:n,serverState:r,stabilityCheck:i="once",identityFunctionCheck:s="once"}){const o=Rl.useMemo(()=>{const l=out(e);return{store:e,subscription:l,getServerState:r?()=>r:void 0,stabilityCheck:i,identityFunctionCheck:s}},[e,r,i,s]),a=Rl.useMemo(()=>e.getState(),[e]);lut(()=>{const{subscription:l}=o;return l.onStateChange=l.notifyNestedSubs,l.trySubscribe(),a!==e.getState()&&l.notifyNestedSubs(),()=>{l.tryUnsubscribe(),l.onStateChange=void 0}},[o,a]);const u=t||Q0;return Rl.createElement(u.Provider,{value:o},n)}var fut=cut;function qSe(e=Q0){const t=e===Q0?VSe:XK(e),n=()=>{const{store:r}=t();return r};return Object.assign(n,{withTypes:()=>n}),n}var dut=qSe();function hut(e=Q0){const t=e===Q0?dut:qSe(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var WSe=hut();eut(Qat.useSyncExternalStoreWithSelector);function Ao(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var put=typeof Symbol=="function"&&Symbol.observable||"@@observable",Ile=put,Y8=()=>Math.random().toString(36).substring(7).split("").join("."),mut={INIT:`@@redux/INIT${Y8()}`,REPLACE:`@@redux/REPLACE${Y8()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Y8()}`},N$=mut;function QK(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function GSe(e,t,n){if(typeof e!="function")throw new Error(Ao(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(Ao(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(Ao(1));return n(GSe)(e,t)}let r=e,i=t,s=new Map,o=s,a=0,u=!1;function l(){o===s&&(o=new Map,s.forEach((g,y)=>{o.set(y,g)}))}function c(){if(u)throw new Error(Ao(3));return i}function f(g){if(typeof g!="function")throw new Error(Ao(4));if(u)throw new Error(Ao(5));let y=!0;l();const v=a++;return o.set(v,g),function(){if(y){if(u)throw new Error(Ao(6));y=!1,l(),o.delete(v),s=null}}}function d(g){if(!QK(g))throw new Error(Ao(7));if(typeof g.type>"u")throw new Error(Ao(8));if(typeof g.type!="string")throw new Error(Ao(17));if(u)throw new Error(Ao(9));try{u=!0,i=r(i,g)}finally{u=!1}return(s=o).forEach(v=>{v()}),g}function h(g){if(typeof g!="function")throw new Error(Ao(10));r=g,d({type:N$.REPLACE})}function p(){const g=f;return{subscribe(y){if(typeof y!="object"||y===null)throw new Error(Ao(11));function v(){const w=y;w.next&&w.next(c())}return v(),{unsubscribe:g(v)}},[Ile](){return this}}}return d({type:N$.INIT}),{dispatch:d,subscribe:f,getState:c,replaceReducer:h,[Ile]:p}}function gut(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:N$.INIT})>"u")throw new Error(Ao(12));if(typeof n(void 0,{type:N$.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(Ao(13))})}function yut(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const r=Object.keys(n);let i;try{gut(n)}catch(s){i=s}return function(o={},a){if(i)throw i;let u=!1;const l={};for(let c=0;c<r.length;c++){const f=r[c],d=n[f],h=o[f],p=d(h,a);if(typeof p>"u")throw a&&a.type,new Error(Ao(14));l[f]=p,u=u||p!==h}return u=u||r.length!==Object.keys(o).length,u?l:o}}function P$(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...r)=>t(n(...r)))}function vut(...e){return t=>(n,r)=>{const i=t(n,r);let s=()=>{throw new Error(Ao(15))};const o={getState:i.getState,dispatch:(u,...l)=>s(u,...l)},a=e.map(u=>u(o));return s=P$(...a)(i.dispatch),{...i,dispatch:s}}}function but(e){return QK(e)&&"type"in e&&typeof e.type=="string"}var YSe=Symbol.for("immer-nothing"),kle=Symbol.for("immer-draftable"),Vl=Symbol.for("immer-state");function If(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var rx=Object.getPrototypeOf;function J0(e){return!!e&&!!e[Vl]}function Rm(e){var t;return e?KSe(e)||Array.isArray(e)||!!e[kle]||!!((t=e.constructor)!=null&&t[kle])||X6(e)||Q6(e):!1}var _ut=Object.prototype.constructor.toString();function KSe(e){if(!e||typeof e!="object")return!1;const t=rx(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===_ut}function O$(e,t){K6(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,r)=>t(r,n,e))}function K6(e){const t=e[Vl];return t?t.type_:Array.isArray(e)?1:X6(e)?2:Q6(e)?3:0}function vz(e,t){return K6(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function XSe(e,t,n){const r=K6(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function wut(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function X6(e){return e instanceof Map}function Q6(e){return e instanceof Set}function zv(e){return e.copy_||e.base_}function bz(e,t){if(X6(e))return new Map(e);if(Q6(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=KSe(e);if(t===!0||t==="class_only"&&!n){const r=Object.getOwnPropertyDescriptors(e);delete r[Vl];let i=Reflect.ownKeys(r);for(let s=0;s<i.length;s++){const o=i[s],a=r[o];a.writable===!1&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(r[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(rx(e),r)}else{const r=rx(e);if(r!==null&&n)return{...e};const i=Object.create(r);return Object.assign(i,e)}}function JK(e,t=!1){return J6(e)||J0(e)||!Rm(e)||(K6(e)>1&&(e.set=e.add=e.clear=e.delete=Eut),Object.freeze(e),t&&Object.entries(e).forEach(([n,r])=>JK(r,!0))),e}function Eut(){If(2)}function J6(e){return Object.isFrozen(e)}var xut={};function sb(e){const t=xut[e];return t||If(0,e),t}var iI;function QSe(){return iI}function Sut(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function Rle(e,t){t&&(sb("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function _z(e){wz(e),e.drafts_.forEach(Tut),e.drafts_=null}function wz(e){e===iI&&(iI=e.parent_)}function Nle(e){return iI=Sut(iI,e)}function Tut(e){const t=e[Vl];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function Ple(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Vl].modified_&&(_z(t),If(4)),Rm(e)&&(e=D$(t,e),t.parent_||$$(t,e)),t.patches_&&sb("Patches").generateReplacementPatches_(n[Vl].base_,e,t.patches_,t.inversePatches_)):e=D$(t,n,[]),_z(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==YSe?e:void 0}function D$(e,t,n){if(J6(t))return t;const r=t[Vl];if(!r)return O$(t,(i,s)=>Ole(e,r,t,i,s,n)),t;if(r.scope_!==e)return t;if(!r.modified_)return $$(e,r.base_,!0),r.base_;if(!r.finalized_){r.finalized_=!0,r.scope_.unfinalizedDrafts_--;const i=r.copy_;let s=i,o=!1;r.type_===3&&(s=new Set(i),i.clear(),o=!0),O$(s,(a,u)=>Ole(e,r,i,a,u,n,o)),$$(e,i,!1),n&&e.patches_&&sb("Patches").generatePatches_(r,n,e.patches_,e.inversePatches_)}return r.copy_}function Ole(e,t,n,r,i,s,o){if(J0(i)){const a=s&&t&&t.type_!==3&&!vz(t.assigned_,r)?s.concat(r):void 0,u=D$(e,i,a);if(XSe(n,r,u),J0(u))e.canAutoFreeze_=!1;else return}else o&&n.add(i);if(Rm(i)&&!J6(i)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;D$(e,i),(!t||!t.scope_.parent_)&&typeof r!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,r)&&$$(e,i)}}function $$(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&JK(t,n)}function Aut(e,t){const n=Array.isArray(e),r={type_:n?1:0,scope_:t?t.scope_:QSe(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let i=r,s=ZK;n&&(i=[r],s=sI);const{revoke:o,proxy:a}=Proxy.revocable(i,s);return r.draft_=a,r.revoke_=o,a}var ZK={get(e,t){if(t===Vl)return e;const n=zv(e);if(!vz(n,t))return Cut(e,n,t);const r=n[t];return e.finalized_||!Rm(r)?r:r===K8(e.base_,t)?(X8(e),e.copy_[t]=xz(r,e)):r},has(e,t){return t in zv(e)},ownKeys(e){return Reflect.ownKeys(zv(e))},set(e,t,n){const r=JSe(zv(e),t);if(r!=null&&r.set)return r.set.call(e.draft_,n),!0;if(!e.modified_){const i=K8(zv(e),t),s=i==null?void 0:i[Vl];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(wut(n,i)&&(n!==void 0||vz(e.base_,t)))return!0;X8(e),Ez(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return K8(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,X8(e),Ez(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=zv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty(){If(11)},getPrototypeOf(e){return rx(e.base_)},setPrototypeOf(){If(12)}},sI={};O$(ZK,(e,t)=>{sI[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});sI.deleteProperty=function(e,t){return sI.set.call(this,e,t,void 0)};sI.set=function(e,t,n){return ZK.set.call(this,e[0],t,n,e[0])};function K8(e,t){const n=e[Vl];return(n?zv(n):e)[t]}function Cut(e,t,n){var i;const r=JSe(t,n);return r?"value"in r?r.value:(i=r.get)==null?void 0:i.call(e.draft_):void 0}function JSe(e,t){if(!(t in e))return;let n=rx(e);for(;n;){const r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=rx(n)}}function Ez(e){e.modified_||(e.modified_=!0,e.parent_&&Ez(e.parent_))}function X8(e){e.copy_||(e.copy_=bz(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Iut=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,r)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(u=s,...l){return o.produce(u,c=>n.call(this,c,...l))}}typeof n!="function"&&If(6),r!==void 0&&typeof r!="function"&&If(7);let i;if(Rm(t)){const s=Nle(this),o=xz(t,void 0);let a=!0;try{i=n(o),a=!1}finally{a?_z(s):wz(s)}return Rle(s,r),Ple(i,s)}else if(!t||typeof t!="object"){if(i=n(t),i===void 0&&(i=t),i===YSe&&(i=void 0),this.autoFreeze_&&JK(i,!0),r){const s=[],o=[];sb("Patches").generateReplacementPatches_(t,i,s,o),r(s,o)}return i}else If(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...a)=>this.produceWithPatches(o,u=>t(u,...a));let r,i;return[this.produce(t,n,(o,a)=>{r=o,i=a}),r,i]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Rm(e)||If(8),J0(e)&&(e=ZSe(e));const t=Nle(this),n=xz(e,void 0);return n[Vl].isManual_=!0,wz(t),n}finishDraft(e,t){const n=e&&e[Vl];(!n||!n.isManual_)&&If(9);const{scope_:r}=n;return Rle(r,t),Ple(void 0,r)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const i=t[n];if(i.path.length===0&&i.op==="replace"){e=i.value;break}}n>-1&&(t=t.slice(n+1));const r=sb("Patches").applyPatches_;return J0(e)?r(e,t):this.produce(e,i=>r(i,t))}};function xz(e,t){const n=X6(e)?sb("MapSet").proxyMap_(e,t):Q6(e)?sb("MapSet").proxySet_(e,t):Aut(e,t);return(t?t.scope_:QSe()).drafts_.push(n),n}function ZSe(e){return J0(e)||If(10,e),eTe(e)}function eTe(e){if(!Rm(e)||J6(e))return e;const t=e[Vl];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=bz(e,t.scope_.immer_.useStrictShallowCopy_)}else n=bz(e,!0);return O$(n,(r,i)=>{XSe(n,r,eTe(i))}),t&&(t.finalized_=!1),n}var Hl=new Iut,tTe=Hl.produce;Hl.produceWithPatches.bind(Hl);Hl.setAutoFreeze.bind(Hl);Hl.setUseStrictShallowCopy.bind(Hl);Hl.applyPatches.bind(Hl);Hl.createDraft.bind(Hl);Hl.finishDraft.bind(Hl);function kut(e,t=`expected a function, instead received ${typeof e}`){if(typeof e!="function")throw new TypeError(t)}function Rut(e,t=`expected an object, instead received ${typeof e}`){if(typeof e!="object")throw new TypeError(t)}function Nut(e,t="expected all items to be functions, instead received the following types: "){if(!e.every(n=>typeof n=="function")){const n=e.map(r=>typeof r=="function"?`function ${r.name||"unnamed"}()`:typeof r).join(", ");throw new TypeError(`${t}[${n}]`)}}var Dle=e=>Array.isArray(e)?e:[e];function Put(e){const t=Array.isArray(e[0])?e[0]:e;return Nut(t,"createSelector expects all input-selectors to be functions, but received the following types: "),t}function Out(e,t){const n=[],{length:r}=e;for(let i=0;i<r;i++)n.push(e[i].apply(null,t));return n}var Dut=class{constructor(e){this.value=e}deref(){return this.value}},$ut=typeof WeakRef<"u"?WeakRef:Dut,Mut=0,$le=1;function eP(){return{s:Mut,v:void 0,o:null,p:null}}function eX(e,t={}){let n=eP();const{resultEqualityCheck:r}=t;let i,s=0;function o(){var f;let a=n;const{length:u}=arguments;for(let d=0,h=u;d<h;d++){const p=arguments[d];if(typeof p=="function"||typeof p=="object"&&p!==null){let m=a.o;m===null&&(a.o=m=new WeakMap);const g=m.get(p);g===void 0?(a=eP(),m.set(p,a)):a=g}else{let m=a.p;m===null&&(a.p=m=new Map);const g=m.get(p);g===void 0?(a=eP(),m.set(p,a)):a=g}}const l=a;let c;if(a.s===$le)c=a.v;else if(c=e.apply(null,arguments),s++,r){const d=((f=i==null?void 0:i.deref)==null?void 0:f.call(i))??i;d!=null&&r(d,c)&&(c=d,s!==0&&s--),i=typeof c=="object"&&c!==null||typeof c=="function"?new $ut(c):c}return l.s=$le,l.v=c,c}return o.clearCache=()=>{n=eP(),o.resetResultsCount()},o.resultsCount=()=>s,o.resetResultsCount=()=>{s=0},o}function nTe(e,...t){const n=typeof e=="function"?{memoize:e,memoizeOptions:t}:e,r=(...i)=>{let s=0,o=0,a,u={},l=i.pop();typeof l=="object"&&(u=l,l=i.pop()),kut(l,`createSelector expects an output function after the inputs, but received: [${typeof l}]`);const c={...n,...u},{memoize:f,memoizeOptions:d=[],argsMemoize:h=eX,argsMemoizeOptions:p=[],devModeChecks:m={}}=c,g=Dle(d),y=Dle(p),v=Put(i),b=f(function(){return s++,l.apply(null,arguments)},...g),w=h(function(){o++;const T=Out(v,arguments);return a=b.apply(null,T),a},...y);return Object.assign(w,{resultFunc:l,memoizedResultFunc:b,dependencies:v,dependencyRecomputations:()=>o,resetDependencyRecomputations:()=>{o=0},lastResult:()=>a,recomputations:()=>s,resetRecomputations:()=>{s=0},memoize:f,argsMemoize:h})};return Object.assign(r,{withTypes:()=>r}),r}var Lut=nTe(eX),Fut=Object.assign((e,t=Lut)=>{Rut(e,`createStructuredSelector expects first argument to be an object where each property is a selector, instead received a ${typeof e}`);const n=Object.keys(e),r=n.map(s=>e[s]);return t(r,(...s)=>s.reduce((o,a,u)=>(o[n[u]]=a,o),{}))},{withTypes:()=>Fut});function rTe(e){return({dispatch:n,getState:r})=>i=>s=>typeof s=="function"?s(n,r,e):i(s)}var jut=rTe(),But=rTe,Uut=(...e)=>{const t=nTe(...e),n=Object.assign((...r)=>{const i=t(...r),s=(o,...a)=>i(J0(o)?ZSe(o):o,...a);return Object.assign(s,i),s},{withTypes:()=>n});return n};Uut(eX);var zut=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?P$:P$.apply(null,arguments)};function ix(e,t){function n(...r){if(t){let i=t(...r);if(!i)throw new Error(Ku(0));return{type:e,payload:i.payload,..."meta"in i&&{meta:i.meta},..."error"in i&&{error:i.error}}}return{type:e,payload:r[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=r=>but(r)&&r.type===e,n}var iTe=class jA extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,jA.prototype)}static get[Symbol.species](){return jA}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new jA(...t[0].concat(this)):new jA(...t.concat(this))}};function Mle(e){return Rm(e)?tTe(e,()=>{}):e}function Lle(e,t,n){if(e.has(t)){let i=e.get(t);return n.update&&(i=n.update(i,t,e),e.set(t,i)),i}if(!n.insert)throw new Error(Ku(10));const r=n.insert(t,e);return e.set(t,r),r}function Vut(e){return typeof e=="boolean"}var Hut=()=>function(t){const{thunk:n=!0,immutableCheck:r=!0,serializableCheck:i=!0,actionCreatorCheck:s=!0}=t??{};let o=new iTe;return n&&(Vut(n)?o.push(jut):o.push(But(n.extraArgument))),o},qut="RTK_autoBatch",sTe=e=>t=>{setTimeout(t,e)},Wut=typeof window<"u"&&window.requestAnimationFrame?window.requestAnimationFrame:sTe(10),Gut=(e={type:"raf"})=>t=>(...n)=>{const r=t(...n);let i=!0,s=!1,o=!1;const a=new Set,u=e.type==="tick"?queueMicrotask:e.type==="raf"?Wut:e.type==="callback"?e.queueNotification:sTe(e.timeout),l=()=>{o=!1,s&&(s=!1,a.forEach(c=>c()))};return Object.assign({},r,{subscribe(c){const f=()=>i&&c(),d=r.subscribe(f);return a.add(c),()=>{d(),a.delete(c)}},dispatch(c){var f;try{return i=!((f=c==null?void 0:c.meta)!=null&&f[qut]),s=!i,s&&(o||(o=!0,u(l))),r.dispatch(c)}finally{i=!0}}})},Yut=e=>function(n){const{autoBatch:r=!0}=n??{};let i=new iTe(e);return r&&i.push(Gut(typeof r=="object"?r:void 0)),i},Kut=!0;function Xut(e){const t=Hut(),{reducer:n=void 0,middleware:r,devTools:i=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let a;if(typeof n=="function")a=n;else if(QK(n))a=yut(n);else throw new Error(Ku(1));let u;typeof r=="function"?u=r(t):u=t();let l=P$;i&&(l=zut({trace:!Kut,...typeof i=="object"&&i}));const c=vut(...u),f=Yut(c);let d=typeof o=="function"?o(f):f();const h=l(...d);return GSe(a,s,h)}function oTe(e){const t={},n=[];let r;const i={addCase(s,o){const a=typeof s=="string"?s:s.type;if(!a)throw new Error(Ku(28));if(a in t)throw new Error(Ku(29));return t[a]=o,i},addMatcher(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase(s){return r=s,i}};return e(i),[t,n,r]}function Qut(e){return typeof e=="function"}function Jut(e,t){let[n,r,i]=oTe(t),s;if(Qut(e))s=()=>Mle(e());else{const a=Mle(e);s=()=>a}function o(a=s(),u){let l=[n[u.type],...r.filter(({matcher:c})=>c(u)).map(({reducer:c})=>c)];return l.filter(c=>!!c).length===0&&(l=[i]),l.reduce((c,f)=>{if(f)if(J0(c)){const h=f(c,u);return h===void 0?c:h}else{if(Rm(c))return tTe(c,d=>f(d,u));{const d=f(c,u);if(d===void 0){if(c===null)return c;throw new Error(Ku(9))}return d}}return c},a)}return o.getInitialState=s,o}var Zut="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",elt=(e=21)=>{let t="",n=e;for(;n--;)t+=Zut[Math.random()*64|0];return t},tlt=Symbol.for("rtk-slice-createasyncthunk");function nlt(e,t){return`${e}/${t}`}function rlt({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[tlt];return function(i){const{name:s,reducerPath:o=s}=i;if(!s)throw new Error(Ku(11));typeof process<"u";const a=(typeof i.reducers=="function"?i.reducers(olt()):i.reducers)||{},u=Object.keys(a),l={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},c={addCase(b,w){const E=typeof b=="string"?b:b.type;if(!E)throw new Error(Ku(12));if(E in l.sliceCaseReducersByType)throw new Error(Ku(13));return l.sliceCaseReducersByType[E]=w,c},addMatcher(b,w){return l.sliceMatchers.push({matcher:b,reducer:w}),c},exposeAction(b,w){return l.actionCreators[b]=w,c},exposeCaseReducer(b,w){return l.sliceCaseReducersByName[b]=w,c}};u.forEach(b=>{const w=a[b],E={reducerName:b,type:nlt(s,b),createNotation:typeof i.reducers=="function"};ult(w)?clt(E,w,c,t):alt(E,w,c)});function f(){const[b={},w=[],E=void 0]=typeof i.extraReducers=="function"?oTe(i.extraReducers):[i.extraReducers],T={...b,...l.sliceCaseReducersByType};return Jut(i.initialState,S=>{for(let A in T)S.addCase(A,T[A]);for(let A of l.sliceMatchers)S.addMatcher(A.matcher,A.reducer);for(let A of w)S.addMatcher(A.matcher,A.reducer);E&&S.addDefaultCase(E)})}const d=b=>b,h=new Map;let p;function m(b,w){return p||(p=f()),p(b,w)}function g(){return p||(p=f()),p.getInitialState()}function y(b,w=!1){function E(S){let A=S[b];return typeof A>"u"&&w&&(A=g()),A}function T(S=d){const A=Lle(h,w,{insert:()=>new WeakMap});return Lle(A,S,{insert:()=>{const C={};for(const[k,N]of Object.entries(i.selectors??{}))C[k]=ilt(N,S,g,w);return C}})}return{reducerPath:b,getSelectors:T,get selectors(){return T(E)},selectSlice:E}}const v={name:s,reducer:m,actions:l.actionCreators,caseReducers:l.sliceCaseReducersByName,getInitialState:g,...y(o),injectInto(b,{reducerPath:w,...E}={}){const T=w??o;return b.inject({reducerPath:T,reducer:m},E),{...v,...y(T,!0)}}};return v}}function ilt(e,t,n,r){function i(s,...o){let a=t(s);return typeof a>"u"&&r&&(a=n()),e(a,...o)}return i.unwrapped=e,i}var slt=rlt();function olt(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function alt({type:e,reducerName:t,createNotation:n},r,i){let s,o;if("reducer"in r){if(n&&!llt(r))throw new Error(Ku(17));s=r.reducer,o=r.prepare}else s=r;i.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?ix(e,o):ix(e))}function ult(e){return e._reducerDefinitionType==="asyncThunk"}function llt(e){return e._reducerDefinitionType==="reducerWithPrepare"}function clt({type:e,reducerName:t},n,r,i){if(!i)throw new Error(Ku(18));const{payloadCreator:s,fulfilled:o,pending:a,rejected:u,settled:l,options:c}=n,f=i(e,s,c);r.exposeAction(t,f),o&&r.addCase(f.fulfilled,o),a&&r.addCase(f.pending,a),u&&r.addCase(f.rejected,u),l&&r.addMatcher(f.settled,l),r.exposeCaseReducer(t,{fulfilled:o||tP,pending:a||tP,rejected:u||tP,settled:l||tP})}function tP(){}var flt=(e,t)=>{if(typeof e!="function")throw new Error(Ku(32))},tX="listenerMiddleware",dlt=e=>{let{type:t,actionCreator:n,matcher:r,predicate:i,effect:s}=e;if(t)i=ix(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error(Ku(21));return flt(s),{predicate:i,type:t,effect:s}},hlt=Object.assign(e=>{const{type:t,predicate:n,effect:r}=dlt(e);return{id:elt(),effect:r,type:t,predicate:n,pending:new Set,unsubscribe:()=>{throw new Error(Ku(22))}}},{withTypes:()=>hlt}),plt=Object.assign(ix(`${tX}/add`),{withTypes:()=>plt});ix(`${tX}/removeAll`);var mlt=Object.assign(ix(`${tX}/remove`),{withTypes:()=>mlt});function Ku(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}function Nm(e){return e.components.flatMap(t=>typeof t=="string"?t:Nm(t))}function aTe(e){var t;return[...e.components.flatMap(n=>typeof n=="string"?n:aTe(n)),...((t=e.interruptions)==null?void 0:t.flatMap(n=>n.components))||[]]}function uTe(e,t,n){let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string"){if(typeof t=="number"&&t===n+r)return[{currentBlock:e,firstIndex:n,lastIndex:n+Nm(e).length-1}];if(typeof t=="string"&&e.orderPath===t)return[{currentBlock:e,firstIndex:n,lastIndex:n+Nm(e).length-1}];r+=1}else{const o=uTe(s,t,n+r);if(typeof o=="number")r+=o;else{const a={currentBlock:e,firstIndex:n,lastIndex:o[0].lastIndex};return[...o,a]}}}return r}function lTe(e,t){const n=uTe(e,t,0);return typeof n=="number"?null:n}function cTe(e,t,n){if(e.id===t)return{found:!0,distance:n};let r=0;for(let i=0;i<e.components.length;i+=1){const s=e.components[i];if(typeof s=="string")r+=1;else{const o=cTe(s,t,n+r);if(o.found)return o;r+=o.distance}}return{found:!1,distance:r}}function glt(e,t){const n=cTe(e,t,0);return n.found?n.distance:-1}function fTe(e,t="root"){const n=[],r={};return e.components.forEach((i,s)=>{typeof i=="string"?(n.push({componentName:i,orderPath:t,timesSeenInBlock:r[i]||0}),r[i]=r[i]?r[i]+1:1):n.push(...fTe(i,`${t}-${s}`))}),n}function nX(e,t){return typeof e=="string"?e:{...e,orderPath:t,components:e.components.map((n,r)=>nX(n,`${t}-${r}`))}}async function ylt(e,t,n,r,i){const s=Nm(n),o=Object.fromEntries(s.filter(d=>d!=="end").map((d,h)=>[`${d}_${h}`,{answer:{}}])),a=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}}}}))),u=Object.assign({},...s.map((d,h)=>({[`${d}_${h}`]:{aboveStimulus:!0,belowStimulus:!0,sidebar:!0,values:{}}}))),l={studyId:e,answers:Object.keys(i).length>0?i:o,sequence:n,config:t,showStudyBrowser:!0,showHelpText:!1,alertModal:{show:!1,message:""},trialValidation:i?u:a,iframeAnswers:{},iframeProvenance:null,metadata:r},c=slt({name:"storeSlice",initialState:l,reducers:{setConfig(d,h){d.config=h.payload},toggleStudyBrowser:d=>{d.showStudyBrowser=!d.showStudyBrowser},toggleShowHelpText:d=>{d.showHelpText=!d.showHelpText},setAlertModal:(d,h)=>{d.alertModal=h.payload},setIframeAnswers:(d,h)=>{d.iframeAnswers=h.payload},setIframeProvenance:(d,h)=>{d.iframeProvenance=h.payload},updateResponseBlockValidation:(d,{payload:h})=>{d.trialValidation[h.identifier]||(d.trialValidation[h.identifier]={aboveStimulus:{valid:!1,values:{}},belowStimulus:{valid:!1,values:{}},sidebar:{valid:!1,values:{}},provenanceGraph:void 0}),d.trialValidation[h.identifier][h.location]={valid:h.status,values:h.values},h.provenanceGraph&&(d.trialValidation[h.identifier].provenanceGraph=h.provenanceGraph)},saveTrialAnswer(d,{payload:h}){const{identifier:p,answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}=h;d.answers[p]={answer:m,startTime:g,endTime:y,provenanceGraph:v,windowEvents:b}}}});return{store:Xut({reducer:c.reducer,preloadedState:l}),actions:c.actions}}const dTe=I.createContext(null);function Zh(){return I.useContext(dTe).actions}const ep=WSe,ef=rut;function vlt(e){return ef(t=>{if(e.includes("reviewer-"))return!0;const n=Object.values(t.trialValidation[e]).every(r=>typeof r=="object"&&"valid"in r?r.valid:!0);return n?Object.values(n).every(r=>r):!1})}function rX(){return ef(e=>Nm(e.sequence))}function n_(){const{studyId:e}=Im();return`${e}`}function ag(){const{index:e}=Im(),t=parseInt(e||"0",10);return Number.isNaN(t)?e:t}function Xy(){const e=ag(),t=rX();return typeof e=="number"?t[e]:e.replace("reviewer-","")}var M$={exports:{}};M$.exports;(function(e,t){var n=200,r="__lodash_hash_undefined__",i=800,s=16,o=9007199254740991,a="[object Arguments]",u="[object Array]",l="[object AsyncFunction]",c="[object Boolean]",f="[object Date]",d="[object Error]",h="[object Function]",p="[object GeneratorFunction]",m="[object Map]",g="[object Number]",y="[object Null]",v="[object Object]",b="[object Proxy]",w="[object RegExp]",E="[object Set]",T="[object String]",S="[object Undefined]",A="[object WeakMap]",C="[object ArrayBuffer]",k="[object DataView]",N="[object Float32Array]",D="[object Float64Array]",O="[object Int8Array]",$="[object Int16Array]",F="[object Int32Array]",M="[object Uint8Array]",B="[object Uint8ClampedArray]",U="[object Uint16Array]",H="[object Uint32Array]",P=/[\\^$.*+?()[\]{}|]/g,z=/^\[object .+?Constructor\]$/,W=/^(?:0|[1-9]\d*)$/,j={};j[N]=j[D]=j[O]=j[$]=j[F]=j[M]=j[B]=j[U]=j[H]=!0,j[a]=j[u]=j[C]=j[c]=j[k]=j[f]=j[d]=j[h]=j[m]=j[g]=j[v]=j[w]=j[E]=j[T]=j[A]=!1;var q=typeof so=="object"&&so&&so.Object===Object&&so,G=typeof self=="object"&&self&&self.Object===Object&&self,ne=q||G||Function("return this")(),ce=t&&!t.nodeType&&t,de=ce&&!0&&e&&!e.nodeType&&e,he=de&&de.exports===ce,ve=he&&q.process,Ie=function(){try{var te=de&&de.require&&de.require("util").types;return te||ve&&ve.binding&&ve.binding("util")}catch{}}(),be=Ie&&Ie.isTypedArray;function Xe(te,ue,Re){switch(Re.length){case 0:return te.call(ue);case 1:return te.call(ue,Re[0]);case 2:return te.call(ue,Re[0],Re[1]);case 3:return te.call(ue,Re[0],Re[1],Re[2])}return te.apply(ue,Re)}function ze(te,ue){for(var Re=-1,It=Array(te);++Re<te;)It[Re]=ue(Re);return It}function yt(te){return function(ue){return te(ue)}}function it(te,ue){return te==null?void 0:te[ue]}function _e(te,ue){return function(Re){return te(ue(Re))}}var ke=Array.prototype,Ve=Function.prototype,ct=Object.prototype,Dt=ne["__core-js_shared__"],Ge=Ve.toString,ge=ct.hasOwnProperty,ht=function(){var te=/[^.]+$/.exec(Dt&&Dt.keys&&Dt.keys.IE_PROTO||"");return te?"Symbol(src)_1."+te:""}(),vt=ct.toString,pe=Ge.call(Object),Ce=RegExp("^"+Ge.call(ge).replace(P,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),qe=he?ne.Buffer:void 0,ut=ne.Symbol,_t=ne.Uint8Array;qe&&qe.allocUnsafe;var Fn=_e(Object.getPrototypeOf,Object),Ir=Object.create,jn=ct.propertyIsEnumerable,dr=ke.splice,yn=ut?ut.toStringTag:void 0,In=function(){try{var te=We(Object,"defineProperty");return te({},"",{}),te}catch{}}(),ir=qe?qe.isBuffer:void 0,sr=Math.max,qo=Date.now,ji=We(ne,"Map"),kn=We(Object,"create"),Bi=function(){function te(){}return function(ue){if(!_p(ue))return{};if(Ir)return Ir(ue);te.prototype=ue;var Re=new te;return te.prototype=void 0,Re}}();function kr(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var It=te[ue];this.set(It[0],It[1])}}function bs(){this.__data__=kn?kn(null):{},this.size=0}function gp(te){var ue=this.has(te)&&delete this.__data__[te];return this.size-=ue?1:0,ue}function pl(te){var ue=this.__data__;if(kn){var Re=ue[te];return Re===r?void 0:Re}return ge.call(ue,te)?ue[te]:void 0}function Ed(te){var ue=this.__data__;return kn?ue[te]!==void 0:ge.call(ue,te)}function Sr(te,ue){var Re=this.__data__;return this.size+=this.has(te)?0:1,Re[te]=kn&&ue===void 0?r:ue,this}kr.prototype.clear=bs,kr.prototype.delete=gp,kr.prototype.get=pl,kr.prototype.has=Ed,kr.prototype.set=Sr;function Pi(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var It=te[ue];this.set(It[0],It[1])}}function ei(){this.__data__=[],this.size=0}function hu(te){var ue=this.__data__,Re=er(ue,te);if(Re<0)return!1;var It=ue.length-1;return Re==It?ue.pop():dr.call(ue,Re,1),--this.size,!0}function Na(te){var ue=this.__data__,Re=er(ue,te);return Re<0?void 0:ue[Re][1]}function Pa(te){return er(this.__data__,te)>-1}function oe(te,ue){var Re=this.__data__,It=er(Re,te);return It<0?(++this.size,Re.push([te,ue])):Re[It][1]=ue,this}Pi.prototype.clear=ei,Pi.prototype.delete=hu,Pi.prototype.get=Na,Pi.prototype.has=Pa,Pi.prototype.set=oe;function ee(te){var ue=-1,Re=te==null?0:te.length;for(this.clear();++ue<Re;){var It=te[ue];this.set(It[0],It[1])}}function ae(){this.size=0,this.__data__={hash:new kr,map:new(ji||Pi),string:new kr}}function Ae(te){var ue=He(this,te).delete(te);return this.size-=ue?1:0,ue}function Se(te){return He(this,te).get(te)}function ot(te){return He(this,te).has(te)}function Tt(te,ue){var Re=He(this,te),It=Re.size;return Re.set(te,ue),this.size+=Re.size==It?0:1,this}ee.prototype.clear=ae,ee.prototype.delete=Ae,ee.prototype.get=Se,ee.prototype.has=ot,ee.prototype.set=Tt;function Ht(te){var ue=this.__data__=new Pi(te);this.size=ue.size}function $n(){this.__data__=new Pi,this.size=0}function Bn(te){var ue=this.__data__,Re=ue.delete(te);return this.size=ue.size,Re}function mn(te){return this.__data__.get(te)}function or(te){return this.__data__.has(te)}function Rr(te,ue){var Re=this.__data__;if(Re instanceof Pi){var It=Re.__data__;if(!ji||It.length<n-1)return It.push([te,ue]),this.size=++Re.size,this;Re=this.__data__=new ee(It)}return Re.set(te,ue),this.size=Re.size,this}Ht.prototype.clear=$n,Ht.prototype.delete=Bn,Ht.prototype.get=mn,Ht.prototype.has=or,Ht.prototype.set=Rr;function Vt(te,ue){var Re=vp(te),It=!Re&&pu(te),Mn=!Re&&!It&&bp(te),Tr=!Re&&!It&&!Mn&&vN(te),Gr=Re||It||Mn||Tr,zn=Gr?ze(te.length,String):[],Yr=zn.length;for(var rs in te)Gr&&(rs=="length"||Mn&&(rs=="offset"||rs=="parent")||Tr&&(rs=="buffer"||rs=="byteLength"||rs=="byteOffset")||Et(rs,Yr))||zn.push(rs);return zn}function ar(te,ue,Re){(Re!==void 0&&!ac(te[ue],Re)||Re===void 0&&!(ue in te))&&Oi(te,ue,Re)}function Wr(te,ue,Re){var It=te[ue];(!(ge.call(te,ue)&&ac(It,Re))||Re===void 0&&!(ue in te))&&Oi(te,ue,Re)}function er(te,ue){for(var Re=te.length;Re--;)if(ac(te[Re][0],ue))return Re;return-1}function Oi(te,ue,Re){ue=="__proto__"&&In?In(te,ue,{configurable:!0,enumerable:!0,value:Re,writable:!0}):te[ue]=Re}var Ys=De();function ti(te){return te==null?te===void 0?S:y:yn&&yn in Object(te)?Ye(te):Go(te)}function _o(te){return mu(te)&&ti(te)==a}function Ui(te){if(!_p(te)||Un(te))return!1;var ue=RT(te)?Ce:z;return ue.test(mN(te))}function zi(te){return mu(te)&&yN(te.length)&&!!j[ti(te)]}function Wo(te){if(!_p(te))return Pr(te);var ue=Nr(te),Re=[];for(var It in te)It=="constructor"&&(ue||!ge.call(te,It))||Re.push(It);return Re}function Oa(te,ue,Re,It,Mn){te!==ue&&Ys(ue,function(Tr,Gr){if(Mn||(Mn=new Ht),_p(Tr))Ks(te,ue,Gr,Re,Oa,It,Mn);else{var zn=It?It(yp(te,Gr),Tr,Gr+"",te,ue,Mn):void 0;zn===void 0&&(zn=Tr),ar(te,Gr,zn)}},Ev)}function Ks(te,ue,Re,It,Mn,Tr,Gr){var zn=yp(te,Re),Yr=yp(ue,Re),rs=Gr.get(Yr);if(rs){ar(te,Re,rs);return}var Yo=Tr?Tr(zn,Yr,Re+"",te,ue,Gr):void 0,Sv=Yo===void 0;if(Sv){var wp=vp(Yr),N_=!wp&&bp(Yr),P_=!wp&&!N_&&vN(Yr);Yo=Yr,wp||N_||P_?vp(zn)?Yo=zn:gN(zn)?Yo=fe(zn):N_?(Sv=!1,Yo=Y(Yr)):P_?(Sv=!1,Yo=Z(Yr)):Yo=[]:$j(Yr)||pu(Yr)?(Yo=zn,pu(zn)?Yo=R_(zn):(!_p(zn)||RT(zn))&&(Yo=st(Yr))):Sv=!1}Sv&&(Gr.set(Yr,Yo),Mn(Yo,Yr,It,Tr,Gr),Gr.delete(Yr)),ar(te,Re,Yo)}function oc(te,ue){return kT(Sd(te,ue,Sg),te+"")}var xd=In?function(te,ue){return In(te,"toString",{configurable:!0,enumerable:!1,value:xv(ue),writable:!0})}:Sg;function Y(te,ue){return te.slice()}function se(te){var ue=new te.constructor(te.byteLength);return new _t(ue).set(new _t(te)),ue}function Z(te,ue){var Re=se(te.buffer);return new te.constructor(Re,te.byteOffset,te.length)}function fe(te,ue){var Re=-1,It=te.length;for(ue||(ue=Array(It));++Re<It;)ue[Re]=te[Re];return ue}function ye(te,ue,Re,It){var Mn=!Re;Re||(Re={});for(var Tr=-1,Gr=ue.length;++Tr<Gr;){var zn=ue[Tr],Yr=void 0;Yr===void 0&&(Yr=te[zn]),Mn?Oi(Re,zn,Yr):Wr(Re,zn,Yr)}return Re}function le(te){return oc(function(ue,Re){var It=-1,Mn=Re.length,Tr=Mn>1?Re[Mn-1]:void 0,Gr=Mn>2?Re[2]:void 0;for(Tr=te.length>3&&typeof Tr=="function"?(Mn--,Tr):void 0,Gr&&gn(Re[0],Re[1],Gr)&&(Tr=Mn<3?void 0:Tr,Mn=1),ue=Object(ue);++It<Mn;){var zn=Re[It];zn&&te(ue,zn,It,Tr)}return ue})}function De(te){return function(ue,Re,It){for(var Mn=-1,Tr=Object(ue),Gr=It(ue),zn=Gr.length;zn--;){var Yr=Gr[++Mn];if(Re(Tr[Yr],Yr,Tr)===!1)break}return ue}}function He(te,ue){var Re=te.__data__;return Pt(ue)?Re[typeof ue=="string"?"string":"hash"]:Re.map}function We(te,ue){var Re=it(te,ue);return Ui(Re)?Re:void 0}function Ye(te){var ue=ge.call(te,yn),Re=te[yn];try{te[yn]=void 0;var It=!0}catch{}var Mn=vt.call(te);return It&&(ue?te[yn]=Re:delete te[yn]),Mn}function st(te){return typeof te.constructor=="function"&&!Nr(te)?Bi(Fn(te)):{}}function Et(te,ue){var Re=typeof te;return ue=ue??o,!!ue&&(Re=="number"||Re!="symbol"&&W.test(te))&&te>-1&&te%1==0&&te<ue}function gn(te,ue,Re){if(!_p(Re))return!1;var It=typeof ue;return(It=="number"?k_(Re)&&Et(ue,Re.length):It=="string"&&ue in Re)?ac(Re[ue],te):!1}function Pt(te){var ue=typeof te;return ue=="string"||ue=="number"||ue=="symbol"||ue=="boolean"?te!=="__proto__":te===null}function Un(te){return!!ht&&ht in te}function Nr(te){var ue=te&&te.constructor,Re=typeof ue=="function"&&ue.prototype||ct;return te===Re}function Pr(te){var ue=[];if(te!=null)for(var Re in Object(te))ue.push(Re);return ue}function Go(te){return vt.call(te)}function Sd(te,ue,Re){return ue=sr(ue===void 0?te.length-1:ue,0),function(){for(var It=arguments,Mn=-1,Tr=sr(It.length-ue,0),Gr=Array(Tr);++Mn<Tr;)Gr[Mn]=It[ue+Mn];Mn=-1;for(var zn=Array(ue+1);++Mn<ue;)zn[Mn]=It[Mn];return zn[ue]=Re(Gr),Xe(te,this,zn)}}function yp(te,ue){if(!(ue==="constructor"&&typeof te[ue]=="function")&&ue!="__proto__")return te[ue]}var kT=wv(xd);function wv(te){var ue=0,Re=0;return function(){var It=qo(),Mn=s-(It-Re);if(Re=It,Mn>0){if(++ue>=i)return arguments[0]}else ue=0;return te.apply(void 0,arguments)}}function mN(te){if(te!=null){try{return Ge.call(te)}catch{}try{return te+""}catch{}}return""}function ac(te,ue){return te===ue||te!==te&&ue!==ue}var pu=_o(function(){return arguments}())?_o:function(te){return mu(te)&&ge.call(te,"callee")&&!jn.call(te,"callee")},vp=Array.isArray;function k_(te){return te!=null&&yN(te.length)&&!RT(te)}function gN(te){return mu(te)&&k_(te)}var bp=ir||_N;function RT(te){if(!_p(te))return!1;var ue=ti(te);return ue==h||ue==p||ue==l||ue==b}function yN(te){return typeof te=="number"&&te>-1&&te%1==0&&te<=o}function _p(te){var ue=typeof te;return te!=null&&(ue=="object"||ue=="function")}function mu(te){return te!=null&&typeof te=="object"}function $j(te){if(!mu(te)||ti(te)!=v)return!1;var ue=Fn(te);if(ue===null)return!0;var Re=ge.call(ue,"constructor")&&ue.constructor;return typeof Re=="function"&&Re instanceof Re&&Ge.call(Re)==pe}var vN=be?yt(be):zi;function R_(te){return ye(te,Ev(te))}function Ev(te){return k_(te)?Vt(te):Wo(te)}var bN=le(function(te,ue,Re){Oa(te,ue,Re)});function xv(te){return function(){return te}}function Sg(te){return te}function _N(){return!1}e.exports=bN})(M$,M$.exports);var blt=M$.exports;const iX=ec(blt);function P0(e){return structuredClone(e)}function sX(){const{answers:e}=ef(i=>i),t=ag(),r=`${Xy()}_${t}`;return e[r]}const hTe=I.createContext(null);function _lt(){const e=I.useContext(hTe);if(!e)throw new Error("useWindowEvents must be used within a WindowEventsProvider");return e}function Z0(){return ef(e=>e.config)}function Fle(e,t,n,r){const i=t.slice(0,t.lastIndexOf("_")),s=Object.entries(r.components).find(([a])=>a===i),o=s?s[1]:null;if(!o)throw new Error(`Component ${i} could not be found in the study components.`);return o.correctAnswer?o.correctAnswer.every(a=>e[a.id]===a.answer):!0}function pTe(){const e=ag(),t=rX(),r=`${Xy()}_${e}`,{trialValidation:i,sequence:s,answers:o}=ef(T=>T),a=ep(),{saveTrialAnswer:u,setIframeAnswers:l}=Zh(),{storageEngine:c}=ks(),f=n_(),[d,h]=I.useState(!0);I.useEffect(()=>{(async()=>{if(c){const S=await c.getModes(f);h(S.dataCollectionEnabled)}})()},[c,f]);const p=vlt(r),m=typeof e!="number"||!p,g=sX(),y=Qh(),v=Z0(),b=I.useMemo(()=>Date.now(),[]),w=_lt(),E=I.useCallback(()=>{if(typeof e!="number")return;const T=P0(i[r]),S=Object.values(T).reduce((F,M)=>Object.hasOwn(M,"values")?{...F,...M.values}:F,{}),{provenanceGraph:A}=T,C=Date.now(),k=w&&"current"in w&&w.current?w.current.splice(0,w.current.length):[];d&&!g.endTime&&(a(u({identifier:r,answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k})),c&&c.saveAnswers({...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k}}),a(l({})));let N=e+1;const D=lTe(s,e),O=D!==null&&D.some(F=>Object.hasOwn(F.currentBlock,"skip")&&F.currentBlock.skip!==void 0),$={...o,[r]:{answer:S,startTime:b,endTime:C,provenanceGraph:A,windowEvents:k}};O&&[...D.flatMap(M=>M.currentBlock.skip?M.currentBlock.skip.map(B=>({...B,firstIndex:M.firstIndex,lastIndex:M.lastIndex})):[])].some(M=>{let B=!1;const U=Object.fromEntries(Object.entries($).filter(([P])=>{const z=parseInt(P.slice(P.lastIndexOf("_")+1),10);return z>=M.firstIndex&&z<=e})),H=M.check!=="block"?Object.entries(U).filter(([P])=>P.slice(0,P.lastIndexOf("_"))===M.name):Object.entries(U);if(H.length===0)return!1;if(H.some(([P,z])=>!z))throw new Error(`There are components with missing response objects for the skip condition: ${JSON.stringify(M,null,2)}`);if(M.check==="response"||M.check==="responses"){const[P,z]=H[0];M.check==="response"?B=M.comparison==="equal"?M.value===z.answer[M.responseId]:M.value!==z.answer[M.responseId]:B=!Fle(z.answer,P,v.components[P.slice(0,P.lastIndexOf("_"))],v)}else if(M.check==="block"||M.check==="repeatedComponent"){if(H.length<M.value)return!1;const P=H.map(([j,q])=>Fle(q.answer,j,v.components[j.slice(0,j.lastIndexOf("_"))],v)),z=P.filter(j=>j).length,W=P.length-z;B=M.condition==="numCorrect"&&z===M.value||M.condition==="numIncorrect"&&W===M.value}if(B){const P=t.indexOf(M.to),z=P===-1?glt(s,M.to):-1;return N=P===-1?z:P,!0}return!1}),y(`/${f}/${N}${window.location.search}`)},[e,i,r,w,d,g.endTime,s,o,b,y,f,a,u,c,l,v,t]);return{isNextDisabled:m,goToNextStep:E}}function wlt({label:e="Next",disabled:t=!1,onClick:n}){const{isNextDisabled:r,goToNextStep:i}=pTe(),s=I.useCallback(()=>{n&&n(),i()},[i,n]);return _.jsx(cn,{type:"submit",disabled:t||r,onClick:s,children:e})}function Elt(e){if(!/^[0-9a-zA-Z-]+$/.test(e))throw new Error(`[@mantine/use-form] Form name "${e}" is invalid, it should contain only letters, numbers and dashes`)}const xlt=typeof window<"u"?I.useLayoutEffect:I.useEffect;function Eo(e,t){xlt(()=>{if(e)return window.addEventListener(e,t),()=>window.removeEventListener(e,t)},[e])}function Slt(e,t){e&&Elt(e),Eo(`mantine-form:${e}:set-field-value`,n=>t.setFieldValue(n.detail.path,n.detail.value)),Eo(`mantine-form:${e}:set-values`,n=>t.setValues(n.detail)),Eo(`mantine-form:${e}:set-initial-values`,n=>t.setInitialValues(n.detail)),Eo(`mantine-form:${e}:set-errors`,n=>t.setErrors(n.detail)),Eo(`mantine-form:${e}:set-field-error`,n=>t.setFieldError(n.detail.path,n.detail.error)),Eo(`mantine-form:${e}:clear-field-error`,n=>t.clearFieldError(n.detail)),Eo(`mantine-form:${e}:clear-errors`,t.clearErrors),Eo(`mantine-form:${e}:reset`,t.reset),Eo(`mantine-form:${e}:validate`,t.validate),Eo(`mantine-form:${e}:validate-field`,n=>t.validateField(n.detail)),Eo(`mantine-form:${e}:reorder-list-item`,n=>t.reorderListItem(n.detail.path,n.detail.payload)),Eo(`mantine-form:${e}:remove-list-item`,n=>t.removeListItem(n.detail.path,n.detail.index)),Eo(`mantine-form:${e}:insert-list-item`,n=>t.insertListItem(n.detail.path,n.detail.item,n.detail.index)),Eo(`mantine-form:${e}:set-dirty`,n=>t.setDirty(n.detail)),Eo(`mantine-form:${e}:set-touched`,n=>t.setTouched(n.detail)),Eo(`mantine-form:${e}:reset-dirty`,n=>t.resetDirty(n.detail)),Eo(`mantine-form:${e}:reset-touched`,t.resetTouched)}function Tlt(e){return t=>{if(!t)e(t);else if(typeof t=="function")e(t);else if(typeof t=="object"&&"nativeEvent"in t){const{currentTarget:n}=t;n instanceof HTMLInputElement?n.type==="checkbox"?e(n.checked):e(n.value):(n instanceof HTMLTextAreaElement||n instanceof HTMLSelectElement)&&e(n.value)}else e(t)}}function Sz(e){return e===null||typeof e!="object"?{}:Object.keys(e).reduce((t,n)=>{const r=e[n];return r!=null&&r!==!1&&(t[n]=r),t},{})}function Alt(e){const[t,n]=I.useState(Sz(e)),r=I.useRef(t),i=I.useCallback(u=>{n(l=>{const c=Sz(typeof u=="function"?u(l):u);return r.current=c,c})},[]),s=I.useCallback(()=>i({}),[]),o=I.useCallback(u=>{r.current[u]!==void 0&&i(l=>{const c={...l};return delete c[u],c})},[t]),a=I.useCallback((u,l)=>{l==null||l===!1?o(u):r.current[u]!==l&&i(c=>({...c,[u]:l}))},[t]);return{errorsState:t,setErrors:i,clearErrors:s,setFieldError:a,clearFieldError:o}}function mTe(e,t){if(t===null||typeof t!="object")return{};const n={...t};return Object.keys(t).forEach(r=>{r.includes(`${String(e)}.`)&&delete n[r]}),n}function jle(e,t){const n=e.substring(t.length+1).split(".")[0];return parseInt(n,10)}function Ble(e,t,n,r){if(t===void 0)return n;const i=`${String(e)}`;let s=n;r===-1&&(s=mTe(`${i}.${t}`,s));const o={...s},a=new Set;return Object.entries(s).filter(([u])=>{if(!u.startsWith(`${i}.`))return!1;const l=jle(u,i);return Number.isNaN(l)?!1:l>=t}).forEach(([u,l])=>{const c=jle(u,i),f=u.replace(`${i}.${c}`,`${i}.${c+r}`);o[f]=l,a.add(f),a.has(u)||delete o[u]}),o}function Clt(e,{from:t,to:n},r){const i=`${e}.${t}`,s=`${e}.${n}`,o={...r};return Object.keys(r).every(a=>{let u,l;if(a.startsWith(i)&&(u=a,l=a.replace(i,s)),a.startsWith(s)&&(u=a.replace(s,i),l=a),u&&l){const c=o[u],f=o[l];return f===void 0?delete o[u]:o[u]=f,c===void 0?delete o[l]:o[l]=c,!1}return!0}),o}function Ule(e,t,n){typeof n.value=="object"&&(n.value=zw(n.value)),!n.enumerable||n.get||n.set||!n.configurable||!n.writable||t==="__proto__"?Object.defineProperty(e,t,n):e[t]=n.value}function zw(e){if(typeof e!="object")return e;var t=0,n,r,i,s=Object.prototype.toString.call(e);if(s==="[object Object]"?i=Object.create(e.__proto__||null):s==="[object Array]"?i=Array(e.length):s==="[object Set]"?(i=new Set,e.forEach(function(o){i.add(zw(o))})):s==="[object Map]"?(i=new Map,e.forEach(function(o,a){i.set(zw(a),zw(o))})):s==="[object Date]"?i=new Date(+e):s==="[object RegExp]"?i=new RegExp(e.source,e.flags):s==="[object DataView]"?i=new e.constructor(zw(e.buffer)):s==="[object ArrayBuffer]"?i=e.slice(0):s.slice(-6)==="Array]"&&(i=new e.constructor(e)),i){for(r=Object.getOwnPropertySymbols(e);t<r.length;t++)Ule(i,r[t],Object.getOwnPropertyDescriptor(e,r[t]));for(t=0,r=Object.getOwnPropertyNames(e);t<r.length;t++)Object.hasOwnProperty.call(i,n=r[t])&&i[n]===e[n]||Ule(i,n,Object.getOwnPropertyDescriptor(e,n))}return i||e}function gTe(e){return typeof e!="string"?[]:e.split(".")}function Fu(e,t){const n=gTe(e);if(n.length===0||typeof t!="object"||t===null)return;let r=t[n[0]];for(let i=1;i<n.length&&r!==void 0;i+=1)r=r[n[i]];return r}function Z6(e,t,n){const r=gTe(e);if(r.length===0)return n;const i=zw(n);if(r.length===1)return i[r[0]]=t,i;let s=i[r[0]];for(let o=1;o<r.length-1;o+=1){if(s===void 0)return i;s=s[r[o]]}return s[r[r.length-1]]=t,i}function Ilt(e,{from:t,to:n},r){const i=Fu(e,r);if(!Array.isArray(i))return r;const s=[...i],o=i[t];return s.splice(t,1),s.splice(n,0,o),Z6(e,s,r)}function klt(e,t,n,r){const i=Fu(e,r);if(!Array.isArray(i))return r;const s=[...i];return s.splice(typeof n=="number"?n:s.length,0,t),Z6(e,s,r)}function Rlt(e,t,n){const r=Fu(e,n);return Array.isArray(r)?Z6(e,r.filter((i,s)=>s!==t),n):n}function Nlt({$values:e,$errors:t,$status:n}){const r=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Clt(o,a,u)),e.setValues({values:Ilt(o,a,e.refValues.current),updateState:!0})},[]),i=I.useCallback((o,a)=>{n.clearFieldDirty(o),t.setErrors(u=>Ble(o,a,u,-1)),e.setValues({values:Rlt(o,a,e.refValues.current),updateState:!0})},[]),s=I.useCallback((o,a,u)=>{n.clearFieldDirty(o),t.setErrors(l=>Ble(o,u,l,1)),e.setValues({values:klt(o,a,u,e.refValues.current),updateState:!0})},[]);return{reorderListItem:r,removeListItem:i,insertListItem:s}}var oX=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n};const FO=ec(oX);function nP(e,t){const n=Object.keys(e);if(typeof t=="string"){const r=n.filter(i=>i.startsWith(`${t}.`));return e[t]||r.some(i=>e[i])||!1}return n.some(r=>e[r])}function Plt({initialDirty:e,initialTouched:t,mode:n,$values:r}){const[i,s]=I.useState(t),[o,a]=I.useState(e),u=I.useRef(t),l=I.useRef(e),c=I.useCallback(E=>{const T=typeof E=="function"?E(u.current):E;u.current=T,n==="controlled"&&s(T)},[]),f=I.useCallback(E=>{const T=typeof E=="function"?E(l.current):E;l.current=T,n==="controlled"&&a(T)},[]),d=I.useCallback(()=>c({}),[]),h=E=>{const T=E?{...E,...r.refValues.current}:r.refValues.current;r.setValuesSnapshot(T),f({})},p=I.useCallback((E,T)=>{c(S=>nP(S,E)===T?S:{...S,[E]:T})},[]),m=I.useCallback((E,T)=>{f(S=>nP(S,E)===T?S:{...S,[E]:T})},[]),g=I.useCallback(E=>nP(u.current,E),[]),y=I.useCallback(E=>f(T=>{if(typeof E!="string")return T;const S=mTe(E,T);return delete S[E],FO(S,T)?T:S}),[]),v=I.useCallback(E=>{if(E){const S=Fu(E,l.current);if(typeof S=="boolean")return S;const A=Fu(E,r.refValues.current),C=Fu(E,r.valuesSnapshot.current);return!FO(A,C)}return Object.keys(l.current).length>0?nP(l.current):!FO(r.refValues.current,r.valuesSnapshot.current)},[]),b=I.useCallback(()=>l.current,[]),w=I.useCallback(()=>u.current,[]);return{touchedState:i,dirtyState:o,touchedRef:u,dirtyRef:l,setTouched:c,setDirty:f,resetDirty:h,resetTouched:d,isTouched:g,setFieldTouched:p,setFieldDirty:m,setTouchedState:s,setDirtyState:a,clearFieldDirty:y,isDirty:v,getDirty:b,getTouched:w}}function Olt({initialValues:e,onValuesChange:t,mode:n}){const r=I.useRef(!1),[i,s]=I.useState(e||{}),o=I.useRef(i),a=I.useRef(i),u=I.useCallback(({values:p,subscribers:m,updateState:g=!0,mergeWithPreviousValues:y=!0})=>{const v=o.current,b=p instanceof Function?p(o.current):p,w=y?{...v,...b}:b;o.current=w,g&&s(w),t==null||t(w,v),m==null||m.filter(Boolean).forEach(E=>E({updatedValues:w,previousValues:v}))},[t]),l=I.useCallback(p=>{var y;const m=Fu(p.path,o.current),g=p.value instanceof Function?p.value(m):p.value;if(m!==g){const v=o.current,b=Z6(p.path,g,o.current);u({values:b,updateState:p.updateState}),(y=p.subscribers)==null||y.filter(Boolean).forEach(w=>w({path:p.path,updatedValues:b,previousValues:v}))}},[]),c=I.useCallback(p=>{a.current=p},[]),f=I.useCallback((p,m)=>{r.current||(r.current=!0,u({values:p,updateState:n==="controlled"}),c(p),m())},[]),d=I.useCallback(()=>{u({values:a.current,updateState:!0,mergeWithPreviousValues:!1})},[]),h=I.useCallback(()=>o.current,[]);return{initialized:r,stateValues:i,refValues:o,valuesSnapshot:a,setValues:u,setFieldValue:l,resetValues:d,setValuesSnapshot:c,initialize:f,getValues:h}}function Dlt({$status:e}){const t=I.useRef({}),n=I.useCallback((i,s)=>{I.useEffect(()=>(t.current[i]=t.current[i]||[],t.current[i].push(s),()=>{t.current[i]=t.current[i].filter(o=>o!==s)}),[s])},[]),r=I.useCallback(i=>t.current[i]?t.current[i].map(s=>o=>s({previousValue:Fu(i,o.previousValues),value:Fu(i,o.updatedValues),touched:e.isTouched(i),dirty:e.isDirty(i)})):[],[]);return{subscribers:t,watch:n,getFieldSubscribers:r}}function zle(e,t){return e?`${e}-${t.toString()}`:t.toString()}function Vle(e){const t=Sz(e);return{hasErrors:Object.keys(t).length>0,errors:t}}function Tz(e,t,n="",r={}){return typeof e!="object"||e===null?r:Object.keys(e).reduce((i,s)=>{const o=e[s],a=`${n===""?"":`${n}.`}${s}`,u=Fu(a,t);let l=!1;return typeof o=="function"&&(i[a]=o(u,t,a)),typeof o=="object"&&Array.isArray(u)&&(l=!0,u.forEach((c,f)=>Tz(o,t,`${a}.${f}`,i))),typeof o=="object"&&typeof u=="object"&&u!==null&&(l||Tz(o,t,a,i)),i},r)}function Az(e,t){return Vle(typeof e=="function"?e(t):Tz(e,t))}function rP(e,t,n){if(typeof e!="string")return{hasError:!1,error:null};const r=Az(t,n),i=Object.keys(r.errors).find(s=>e.split(".").every((o,a)=>o===s.split(".")[a]));return{hasError:!!i,error:i?r.errors[i]:null}}const $lt="__MANTINE_FORM_INDEX__";function Hle(e,t){return t?typeof t=="boolean"?t:Array.isArray(t)?t.includes(e.replace(/[.][0-9]/g,`.${$lt}`)):!1:!1}function yTe({name:e,mode:t="controlled",initialValues:n,initialErrors:r={},initialDirty:i={},initialTouched:s={},clearInputErrorOnChange:o=!0,validateInputOnChange:a=!1,validateInputOnBlur:u=!1,onValuesChange:l,transformValues:c=h=>h,enhanceGetInputProps:f,validate:d}={}){const h=Alt(r),p=Olt({initialValues:n,onValuesChange:l,mode:t}),m=Plt({initialDirty:i,initialTouched:s,$values:p,mode:t}),g=Nlt({$values:p,$errors:h,$status:m}),y=Dlt({$status:m}),[v,b]=I.useState(0),[w,E]=I.useState({}),T=I.useCallback(()=>{p.resetValues(),h.clearErrors(),m.resetDirty(),m.resetTouched(),t==="uncontrolled"&&b(P=>P+1)},[]),S=I.useCallback(P=>{p.initialize(P,()=>t==="uncontrolled"&&b(z=>z+1))},[]),A=I.useCallback((P,z,W)=>{const j=Hle(P,a);m.clearFieldDirty(P),m.setFieldTouched(P,!0),!j&&o&&h.clearFieldError(P),p.setFieldValue({path:P,value:z,updateState:t==="controlled",subscribers:[...y.getFieldSubscribers(P),j?q=>{const G=rP(P,d,q.updatedValues);G.hasError?h.setFieldError(P,G.error):h.clearFieldError(P)}:null,(W==null?void 0:W.forceUpdate)!==!1&&t!=="controlled"?()=>E(q=>({...q,[P]:(q[P]||0)+1})):null]})},[l,d]),C=I.useCallback(P=>{const z=p.refValues.current;p.setValues({values:P,updateState:t==="controlled"}),o&&h.clearErrors(),t==="uncontrolled"&&b(W=>W+1),Object.keys(y.subscribers.current).forEach(W=>{const j=Fu(W,p.refValues.current),q=Fu(W,z);j!==q&&y.getFieldSubscribers(W).forEach(G=>G({previousValues:z,updatedValues:p.refValues.current}))})},[l,o]),k=I.useCallback(()=>{const P=Az(d,p.refValues.current);return h.setErrors(P.errors),P},[d]),N=I.useCallback(P=>{const z=rP(P,d,p.refValues.current);return z.hasError?h.setFieldError(P,z.error):h.clearFieldError(P),z},[d]),D=(P,{type:z="input",withError:W=!0,withFocus:j=!0,...q}={})=>{const ne={onChange:Tlt(ce=>A(P,ce,{forceUpdate:!1})),"data-path":zle(e,P)};return W&&(ne.error=h.errorsState[P]),z==="checkbox"?ne[t==="controlled"?"checked":"defaultChecked"]=Fu(P,p.refValues.current):ne[t==="controlled"?"value":"defaultValue"]=Fu(P,p.refValues.current),j&&(ne.onFocus=()=>m.setFieldTouched(P,!0),ne.onBlur=()=>{if(Hle(P,u)){const ce=rP(P,d,p.refValues.current);ce.hasError?h.setFieldError(P,ce.error):h.clearFieldError(P)}}),Object.assign(ne,f==null?void 0:f({inputProps:ne,field:P,options:{type:z,withError:W,withFocus:j,...q},form:H}))},O=(P,z)=>W=>{W==null||W.preventDefault();const j=k();j.hasErrors?z==null||z(j.errors,p.refValues.current,W):P==null||P(c(p.refValues.current),W)},$=P=>c(P||p.refValues.current),F=I.useCallback(P=>{P.preventDefault(),T()},[]),M=I.useCallback(P=>P?!rP(P,d,p.refValues.current).hasError:!Az(d,p.refValues.current).hasErrors,[d]),B=P=>`${v}-${P}-${w[P]||0}`,U=I.useCallback(P=>document.querySelector(`[data-path="${zle(e,P)}"]`),[]),H={watch:y.watch,initialized:p.initialized.current,values:p.stateValues,getValues:p.getValues,setInitialValues:p.setValuesSnapshot,initialize:S,setValues:C,setFieldValue:A,errors:h.errorsState,setErrors:h.setErrors,setFieldError:h.setFieldError,clearFieldError:h.clearFieldError,clearErrors:h.clearErrors,resetDirty:m.resetDirty,setTouched:m.setTouched,setDirty:m.setDirty,isTouched:m.isTouched,resetTouched:m.resetTouched,isDirty:m.isDirty,getTouched:m.getTouched,getDirty:m.getDirty,reorderListItem:g.reorderListItem,insertListItem:g.insertListItem,removeListItem:g.removeListItem,reset:T,validate:k,validateField:N,getInputProps:D,onSubmit:O,onReset:F,isValid:M,getTransformedValues:$,key:B,getInputNode:U};return Slt(e,H),H}function Mlt(e,t){const n=t||!0;return r=>typeof r!="string"?n:e.test(r)?null:n}function Llt(e){return Mlt(/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,e)}function vTe(e,t){if(e.type==="checkbox"){const n=e,r=n.minSelections&&t.length<n.minSelections,i=n.maxSelections&&t.length>n.maxSelections;if(r&&i)return`Please select between ${n.minSelections} and ${n.maxSelections} options`;if(r)return`Please select at least ${n.minSelections} options`;if(i)return`Please select at most ${n.maxSelections} options`}return null}const Flt=new URLSearchParams(window.location.search),jlt=(e,t)=>{let n={};return e.forEach(r=>{const i=t?t[r.id]:{};if(i)n={...n,[r.id]:i};else{const s=r.paramCapture?Flt.get(r.paramCapture):"";n={...n,[r.id]:r.type==="iframe"?[]:s}}}),{...n}},Blt=e=>{let t={};return e.forEach(n=>{n.required&&(t={...t,[n.id]:r=>{if(Array.isArray(r)){if(n.requiredValue!=null&&!Array.isArray(n.requiredValue))return"Incorrect required value. Contact study administrator.";if(n.requiredValue!=null&&Array.isArray(n.requiredValue)){if(n.requiredValue.length!==r.length)return"Incorrect input";const i=[...n.requiredValue].sort(),s=[...r].sort();return i.every((o,a)=>o===s[a])?null:"Incorrect input"}return n.type==="checkbox"?vTe(n,r):r.length===0?"Empty input":null}return n.required&&n.requiredValue!=null&&r!=null?r.toString()!==n.requiredValue.toString()?"Incorrect input":null:n.required?r==null||r===""?"Empty input":null:r===null?"Empty input":null}})}),t};function Ult(e,t,n){const[r,i]=I.useState(null),s=yTe({initialValues:jlt(e,n),validate:Blt(e)});return I.useEffect(()=>{r!==t&&(i(t),s.reset())},[r,s,t]),s}function r_(e,t,n){var o;const{requiredValue:r,requiredLabel:i}=e;let s="";return t.checked&&Array.isArray(r)?s=r&&[...r].sort().toString()!==[...t.checked].sort().toString()?`Please ${n?"select":"enter"} ${i||r.toString()} to continue.`:null:t.checked&&e.required?s=vTe(e,t.checked):s=t.value&&r&&r.toString()!==t.value.toString()?`Please ${n?"select":"enter"} ${i||(n?(o=n.find(a=>a.value===r))==null?void 0:o.label:r.toString())} to continue.`:null,s}function zlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=a.map(c=>typeof c=="string"?{value:c,label:c}:c);return _.jsx(Il.Group,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:s,required:o})})]}),description:u,...n,error:r_(e,n,l),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(Cs,{mt:"xs",children:l.map(c=>_.jsx(Il,{disabled:t,value:c.value,label:c.label},c.value))})})}function Vlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,options:u,secondaryText:l}=e,c=u.map(f=>typeof f=="string"?{value:f,label:f}:f);return _.jsx(Pk,{disabled:t,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:o,required:a})})]}),description:l,placeholder:s,data:c,radius:"md",size:"md",...n,error:r_(e,n,c)})}function Hlt({response:e,answer:t,index:n,enumerateQuestions:r}){const{prompt:i,required:s,secondaryText:o}=e;return _.jsx(mi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[r&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${n}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:i,required:s})})]}),description:o,size:"md",children:_.jsx(Hf,{children:Array.isArray(t.value)?t.value.map(a=>_.jsx(Hf.Item,{children:a},a)):_.jsx(Hf.Item,{children:t.value})})})}function bTe({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,leftLabel:u,rightLabel:l,secondaryText:c}=e,f=a.map(d=>typeof d=="string"?{value:d,label:d}:d);return _.jsx(ib.Group,{name:`radioInput${e.id}`,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:s,required:o})})]}),description:c,...n,error:r_(e,n,f),style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsxs(Cs,{mt:"xs",children:[u?_.jsx(et,{style:{textAlign:"center"},children:u}):null,f.map(d=>_.jsx(ib,{disabled:t,value:d.value,label:d.label},d.label)),_.jsx(et,{children:l})]})},e.id)}function qlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{numItems:s}=e,o=[];for(let u=1;u<=+s;u+=1)o.push({label:`${u}`,value:`${u}`});const a={...e,type:"radio",options:o};return _.jsx(bTe,{disabled:t,response:a,answer:n,index:r,enumerateQuestions:i})}function Wlt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,min:a,max:u,placeholder:l,secondaryText:c}=e;return _.jsx(iK,{disabled:t,placeholder:l,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:s,required:o})})]}),description:c,radius:"md",size:"md",min:a,max:u,...n,error:r_(e,n)})}function Glt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{prompt:s,required:o,options:a,secondaryText:u}=e,l=r_(e,n);return _.jsx(mi.Wrapper,{label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:s,required:o})})]}),description:u,error:l,style:{"--input-description-size":"calc(var(--mantine-font-size-md) - calc(0.125rem * var(--mantine-scale)))"},children:_.jsx(L6,{disabled:t,marks:a,...n,h:40})})}function Ylt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(a0,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:r_(e,n)})}function Klt({response:e,disabled:t,answer:n,index:r,enumerateQuestions:i}){const{placeholder:s,prompt:o,required:a,secondaryText:u}=e;return _.jsx(qY,{disabled:t,placeholder:s,label:_.jsxs(Nt,{direction:"row",wrap:"nowrap",gap:4,children:[i&&_.jsx(me,{style:{minWidth:"fit-content"},children:`${r}. `}),_.jsx(me,{style:{display:"block"},className:"no-last-child-bottom-padding",children:_.jsx(eu,{text:o,required:a})})]}),description:u,radius:"md",size:"md",...n,value:n.value||"",error:r_(e,n)})}function Xlt({response:e,answer:t,storedAnswer:n,index:r}){const i=(n?{value:n}:t)||{value:void 0},s=!!n,[o]=CK(),u=Z0().uiConfig.enumerateQuestions??!1,l=I.useMemo(()=>{if(e.paramCapture){const c=o.get(e.paramCapture);return s||!!c}return s},[s,e.paramCapture,o]);return _.jsxs(me,{mb:"md",children:[e.type==="numerical"&&_.jsx(Wlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="shortText"&&_.jsx(Ylt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="longText"&&_.jsx(Klt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="likert"&&_.jsx(qlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="dropdown"&&_.jsx(Vlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="slider"&&_.jsx(Glt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="radio"&&_.jsx(bTe,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="checkbox"&&_.jsx(zlt,{response:e,disabled:l,answer:i,index:r,enumerateQuestions:u}),e.type==="iframe"&&_.jsx(Hlt,{response:e,answer:i,index:r,enumerateQuestions:u})]})}function L$({config:e,location:t,status:n,style:r}){var $;const i=ep(),{updateResponseBlockValidation:s,toggleShowHelpText:o}=Zh(),a=ag(),u=Xy(),l=n==null?void 0:n.answer,c=Qh(),f=e,d=I.useMemo(()=>{var F;return((F=f==null?void 0:f.response)==null?void 0:F.filter(M=>M.location?M.location===t:t==="belowStimulus"))||[]},[f==null?void 0:f.response,t]),h=Ult(d,a,l||{}),[p,m]=I.useState(void 0),{iframeAnswers:g,iframeProvenance:y}=ef(F=>F),v=(f==null?void 0:f.provideFeedback)&&((($=f==null?void 0:f.correctAnswer)==null?void 0:$.length)||0)>0,b=(f==null?void 0:f.allowFailedTraining)===void 0?!0:f.allowFailedTraining,[w,E]=I.useState(0),T=(f==null?void 0:f.trainingAttempts)||2,[S,A]=I.useState(!1),C=t===((f==null?void 0:f.nextButtonLocation)||"belowStimulus");I.useEffect(()=>{const F=d.find(M=>M.type==="iframe");if(g&&F){const M=F.id;h.setValues({...h.values,[M]:g[M]})}},[g]),I.useEffect(()=>{y&&m(y)},[y]),I.useEffect(()=>{i(s({location:t,identifier:`${u}_${a}`,status:h.isValid(),values:P0(h.values),provenanceGraph:p}))},[h.values,u,a,t,i,s,p]);const[k,N]=I.useState(Object.fromEntries(d.map(F=>[F.id,{visible:!1,title:"Correct Answer",message:"The correct answer is: ",color:"green"}]))),D=(F,M,B,U,H)=>{N(P=>({...P,[F]:{visible:M,title:B,message:U,color:H}}))},O=()=>{const F=w+1;E(F);const M=Object.fromEntries(d.map(B=>{var P,z;const U=(z=(P=f.correctAnswer)==null?void 0:P.find(W=>W.id===B.id))==null?void 0:z.answer,H=h.values[B.id];return[B.id,Array.isArray(H)?typeof U=="string"?H.length===1&&U===H[0]:H.length===U.length&&H.every(W=>U.includes(W)):U===H]}));v&&(d.forEach(B=>{var U;if(M[B.id]&&!((U=k[B.id])!=null&&U.message.includes("You've failed to answer this question correctly")))D(B.id,!0,"Correct Answer","You have answered the question correctly.","green");else{let H="";F>=T?(H=`You didn't answer this question correctly after ${T} attempts. ${b?"You can continue to the next question.":"Unfortunately you have not met the criteria for continuing this study."}`,b||setTimeout(()=>{c("./__trainingFailed")},5e3)):T-F===1?H="Please try again. You have 1 attempt left.":H=`Please try again. You have ${T-F} attempts left.`,D(B.id,!0,"Incorrect Answer",H,"red")}}),A(b&&F>=T||Object.values(M).every(B=>B)&&F<=T))};return _.jsxs("div",{style:r,children:[d.map((F,M)=>{var U,H;const B=(H=(U=f.correctAnswer)==null?void 0:U.find(P=>P.id===F.id))==null?void 0:H.answer;return _.jsx(wr.Fragment,{children:F.hidden?"":_.jsxs(_.Fragment,{children:[_.jsx(Xlt,{storedAnswer:l?l[F.id]:void 0,answer:{...h.getInputProps(F.id,{type:F.type==="checkbox"?"checkbox":"input"})},response:F,index:M+1}),k[F.id].visible&&_.jsxs(yS,{mb:"md",title:k[F.id].title,color:k[F.id].color,children:[k[F.id].message," ",k[F.id].message.includes("Please try again")&&_.jsxs(_.Fragment,{children:["Please"," ",_.jsx(Yb,{style:{fontSize:14},onClick:()=>i(o()),children:"click here"})," ","and read the help text carefully."]}),_.jsx("br",{}),_.jsx("br",{}),w>=T&&B&&` The correct answer was: ${B}.`]})]})},`${F.id}-${a}`)}),_.jsxs(Cs,{justify:"right",gap:"xs",children:[v&&C&&_.jsx(cn,{onClick:()=>O(),disabled:!h.isValid(),children:"Check Answer"}),C&&_.jsx(wlt,{disabled:v&&!S||!h.isValid(),label:f.nextButtonText||"Next"})]})]})}const GT="@REVISIT_COMMS",Qlt={minHeight:"500px",width:"100%",border:0};function Jlt({currentConfig:e}){const{setIframeAnswers:t,setIframeProvenance:n}=Zh(),r=ep(),i=WSe(),s=I.useRef(null),o=I.useMemo(()=>crypto.randomUUID?crypto.randomUUID():`testID-${Date.now()}`,[]),a=Xy(),u=Qh(),l=I.useCallback((c,f)=>{var d,h;(h=(d=s.current)==null?void 0:d.contentWindow)==null||h.postMessage({error:!1,type:`${GT}/${c}`,iframeId:o,message:f},"*")},[s,o]);return I.useEffect(()=>{const c=f=>{const{data:d}=f;if(typeof d=="object"&&o===d.iframeId)switch(d.type){case`${GT}/WINDOW_READY`:e.parameters&&l("STUDY_DATA",e.parameters);break;case`${GT}/READY`:s.current&&(s.current.style.height=`${d.message.documentHeight}px`);break;case`${GT}/ANSWERS`:r(t(d.message));break;case`${GT}/PROVENANCE`:r(n(d.message));break}};return window.addEventListener("message",c),()=>window.removeEventListener("message",c)},[r,i,o,u,e,l,t,n]),_.jsx("iframe",{ref:s,src:`${Gu}${e.path}?trialid=${a}&id=${o}`,style:Qlt})}async function aX(e){const n=await(await fetch(`${Gu}${e}`)).text();if(!n.includes("<title>reVISit</title>"))return n}function ob({email:e,path:t}){const n=Gy();return _.jsxs(Fc,{fluid:!0,my:50,maw:800,mx:"auto",children:[_.jsx(Ii,{order:2,children:_.jsx(et,{span:!0,c:"orange",children:"404"})}),_.jsxs(et,{children:[_.jsx(et,{span:!0,fw:700,children:t||n.pathname})," ","not Found."]}),_.jsx($l,{h:"lg"}),_.jsxs(Hf,{children:[_.jsx(Hf.Item,{children:_.jsx(et,{children:"If you're trying to access your study please check the URL and verify that the global config file is correctly configured. Then try again."})}),_.jsx(Hf.Item,{children:_.jsxs(et,{children:["If you're a participant, please contact the study administrator"," ",e&&_.jsxs(_.Fragment,{children:["at"," ",_.jsxs(Yb,{c:"blue",href:`mailto:${e}`,children:[e," "]})]}),"."]})})]})]})}const Zlt={maxWidth:"100%"};function ect({currentConfig:e}){const t={...Zlt,...e.style},[n,r]=I.useState(!0),[i,s]=I.useState(!1);return I.useEffect(()=>{async function o(){const a=await aX(e.path);s(!!a),r(!1)}o()},[e]),n||i?_.jsx(Wy,{mx:"auto",src:`${Gu}${e.path}`,style:t}):_.jsx(ob,{path:e.path})}function lm(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function tct(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function NS(e){let t,n,r;e.length!==2?(t=lm,n=(a,u)=>lm(e(a),u),r=(a,u)=>e(a)-u):(t=e===lm||e===tct?e:nct,n=e,r=e);function i(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<0?l=f+1:c=f}while(l<c)}return l}function s(a,u,l=0,c=a.length){if(l<c){if(t(u,u)!==0)return c;do{const f=l+c>>>1;n(a[f],u)<=0?l=f+1:c=f}while(l<c)}return l}function o(a,u,l=0,c=a.length){const f=i(a,u,l,c-1);return f>l&&r(a[f-1],u)>-r(a[f],u)?f-1:f}return{left:i,center:o,right:s}}function nct(){return 0}function _Te(e){return e===null?NaN:+e}function*rct(e,t){if(t===void 0)for(let n of e)n!=null&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)(r=t(r,++n,e))!=null&&(r=+r)>=r&&(yield r)}}const wTe=NS(lm),ey=wTe.right,ict=wTe.left;NS(_Te).center;function sct(e,t){let n=0,r,i=0,s=0;if(t===void 0)for(let o of e)o!=null&&(o=+o)>=o&&(r=o-i,i+=r/++n,s+=r*(o-i));else{let o=-1;for(let a of e)(a=t(a,++o,e))!=null&&(a=+a)>=a&&(r=a-i,i+=r/++n,s+=r*(a-i))}if(n>1)return s/(n-1)}function oct(e,t){const n=sct(e,t);return n&&Math.sqrt(n)}function qle(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Qa{constructor(){this._partials=new Float64Array(32),this._n=0}add(t){const n=this._partials;let r=0;for(let i=0;i<this._n&&i<32;i++){const s=n[i],o=t+s,a=Math.abs(t)<Math.abs(s)?t-(o-s):s-(o-t);a&&(n[r++]=a),t=o}return n[r]=t,this._n=r+1,this}valueOf(){const t=this._partials;let n=this._n,r,i,s,o=0;if(n>0){for(o=t[--n];n>0&&(r=o,i=t[--n],o=r+i,s=i-(o-r),!s););n>0&&(s<0&&t[n-1]<0||s>0&&t[n-1]>0)&&(i=s*2,r=o+i,i==r-o&&(o=r))}return o}}class Wle extends Map{constructor(t,n=STe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Cz(this,t))}has(t){return super.has(Cz(this,t))}set(t,n){return super.set(ETe(this,t),n)}delete(t){return super.delete(xTe(this,t))}}class F$ extends Set{constructor(t,n=STe){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const r of t)this.add(r)}has(t){return super.has(Cz(this,t))}add(t){return super.add(ETe(this,t))}delete(t){return super.delete(xTe(this,t))}}function Cz({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function ETe({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function xTe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function STe(e){return e!==null&&typeof e=="object"?e.valueOf():e}function act(e,t){return Array.from(t,n=>e[n])}function uct(e=lm){if(e===lm)return TTe;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function TTe(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const lct=Math.sqrt(50),cct=Math.sqrt(10),fct=Math.sqrt(2);function j$(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),o=s>=lct?10:s>=cct?5:s>=fct?2:1;let a,u,l;return i<0?(l=Math.pow(10,-i)/o,a=Math.round(e*l),u=Math.round(t*l),a/l<e&&++a,u/l>t&&--u,l=-l):(l=Math.pow(10,i)*o,a=Math.round(e/l),u=Math.round(t/l),a*l<e&&++a,u*l>t&&--u),u<a&&.5<=n&&n<2?j$(e,t,n*2):[a,u,l]}function Iz(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,s,o]=r?j$(t,e,n):j$(e,t,n);if(!(s>=i))return[];const a=s-i+1,u=new Array(a);if(r)if(o<0)for(let l=0;l<a;++l)u[l]=(s-l)/-o;else for(let l=0;l<a;++l)u[l]=(s-l)*o;else if(o<0)for(let l=0;l<a;++l)u[l]=(i+l)/-o;else for(let l=0;l<a;++l)u[l]=(i+l)*o;return u}function kz(e,t,n){return t=+t,e=+e,n=+n,j$(e,t,n)[2]}function ty(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?kz(t,e,n):kz(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function cm(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Rz(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function ATe(e,t,n=0,r=1/0,i){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(i=i===void 0?TTe:uct(i);r>n;){if(r-n>600){const u=r-n+1,l=t-n+1,c=Math.log(u),f=.5*Math.exp(2*c/3),d=.5*Math.sqrt(c*f*(u-f)/u)*(l-u/2<0?-1:1),h=Math.max(n,Math.floor(t-l*f/u+d)),p=Math.min(r,Math.floor(t+(u-l)*f/u+d));ATe(e,t,h,p,i)}const s=e[t];let o=n,a=r;for(YT(e,n,t),i(e[r],s)>0&&YT(e,n,r);o<a;){for(YT(e,o,a),++o,--a;i(e[o],s)<0;)++o;for(;i(e[a],s)>0;)--a}i(e[n],s)===0?YT(e,n,a):(++a,YT(e,a,r)),a<=t&&(n=a+1),t<=a&&(r=a-1)}return e}function YT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function Nz(e,t,n){if(e=Float64Array.from(rct(e,n)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return Rz(e);if(t>=1)return cm(e);var r,i=(r-1)*t,s=Math.floor(i),o=cm(ATe(e,s).subarray(0,s+1)),a=Rz(e.subarray(s+1));return o+(a-o)*(i-s)}}function CTe(e,t,n=_Te){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,s=Math.floor(i),o=+n(e[s],s,e),a=+n(e[s+1],s+1,e);return o+(a-o)*(i-s)}}function dct(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let s of e)(s=t(s,++i,e))!=null&&(s=+s)>=s&&(++n,r+=s)}if(n)return r/n}function ITe(e,t){return Nz(e,.5,t)}function*hct(e){for(const t of e)yield*t}function kTe(e){return Array.from(hct(e))}function ju(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,s=new Array(i);++r<i;)s[r]=e+r*n;return s}function RTe(e,t){let n=0;for(let r of e)(r=+r)&&(n+=r);return n}function pct(e,...t){e=new F$(e),t=t.map(mct);e:for(const n of e)for(const r of t)if(!r.has(n)){e.delete(n);continue e}return e}function mct(e){return e instanceof F$?e:new F$(e)}function gct(...e){const t=new F$;for(const n of e)for(const r of n)t.add(r);return t}function yct(e){return e}var Q8=1,J8=2,Pz=3,BA=4,Gle=1e-6;function vct(e){return"translate("+e+",0)"}function bct(e){return"translate(0,"+e+")"}function _ct(e){return t=>+e(t)}function wct(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function Ect(){return!this.__axis}function NTe(e,t){var n=[],r=null,i=null,s=6,o=6,a=3,u=typeof window<"u"&&window.devicePixelRatio>1?0:.5,l=e===Q8||e===BA?-1:1,c=e===BA||e===J8?"x":"y",f=e===Q8||e===Pz?vct:bct;function d(h){var p=r??(t.ticks?t.ticks.apply(t,n):t.domain()),m=i??(t.tickFormat?t.tickFormat.apply(t,n):yct),g=Math.max(s,0)+a,y=t.range(),v=+y[0]+u,b=+y[y.length-1]+u,w=(t.bandwidth?wct:_ct)(t.copy(),u),E=h.selection?h.selection():h,T=E.selectAll(".domain").data([null]),S=E.selectAll(".tick").data(p,t).order(),A=S.exit(),C=S.enter().append("g").attr("class","tick"),k=S.select("line"),N=S.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),S=S.merge(C),k=k.merge(C.append("line").attr("stroke","currentColor").attr(c+"2",l*s)),N=N.merge(C.append("text").attr("fill","currentColor").attr(c,l*g).attr("dy",e===Q8?"0em":e===Pz?"0.71em":"0.32em")),h!==E&&(T=T.transition(h),S=S.transition(h),k=k.transition(h),N=N.transition(h),A=A.transition(h).attr("opacity",Gle).attr("transform",function(D){return isFinite(D=w(D))?f(D+u):this.getAttribute("transform")}),C.attr("opacity",Gle).attr("transform",function(D){var O=this.parentNode.__axis;return f((O&&isFinite(O=O(D))?O:w(D))+u)})),A.remove(),T.attr("d",e===BA||e===J8?o?"M"+l*o+","+v+"H"+u+"V"+b+"H"+l*o:"M"+u+","+v+"V"+b:o?"M"+v+","+l*o+"V"+u+"H"+b+"V"+l*o:"M"+v+","+u+"H"+b),S.attr("opacity",1).attr("transform",function(D){return f(w(D)+u)}),k.attr(c+"2",l*s),N.attr(c,l*g).text(m),E.filter(Ect).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===J8?"start":e===BA?"end":"middle"),E.each(function(){this.__axis=w})}return d.scale=function(h){return arguments.length?(t=h,d):t},d.ticks=function(){return n=Array.from(arguments),d},d.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),d):n.slice()},d.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),d):r&&r.slice()},d.tickFormat=function(h){return arguments.length?(i=h,d):i},d.tickSize=function(h){return arguments.length?(s=o=+h,d):s},d.tickSizeInner=function(h){return arguments.length?(s=+h,d):s},d.tickSizeOuter=function(h){return arguments.length?(o=+h,d):o},d.tickPadding=function(h){return arguments.length?(a=+h,d):a},d.offset=function(h){return arguments.length?(u=+h,d):u},d}function xct(e){return NTe(Pz,e)}function Sct(e){return NTe(BA,e)}var Tct={value:()=>{}};function eF(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new jO(n)}function jO(e){this._=e}function Act(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}jO.prototype=eF.prototype={constructor:jO,on:function(e,t){var n=this._,r=Act(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=Cct(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=Yle(n[i],e.name,t);else if(t==null)for(i in n)n[i]=Yle(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new jO(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function Cct(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function Yle(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Tct,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var Oz="http://www.w3.org/1999/xhtml";const Kle={svg:"http://www.w3.org/2000/svg",xhtml:Oz,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function tF(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Kle.hasOwnProperty(t)?{space:Kle[t],local:e}:e}function Ict(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===Oz&&t.documentElement.namespaceURI===Oz?t.createElement(e):t.createElementNS(n,e)}}function kct(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function PTe(e){var t=tF(e);return(t.local?kct:Ict)(t)}function Rct(){}function uX(e){return e==null?Rct:function(){return this.querySelector(e)}}function Nct(e){typeof e!="function"&&(e=uX(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=new Array(o),u,l,c=0;c<o;++c)(u=s[c])&&(l=e.call(u,u.__data__,c,s))&&("__data__"in u&&(l.__data__=u.__data__),a[c]=l);return new tu(r,this._parents)}function OTe(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Pct(){return[]}function DTe(e){return e==null?Pct:function(){return this.querySelectorAll(e)}}function Oct(e){return function(){return OTe(e.apply(this,arguments))}}function Dct(e){typeof e=="function"?e=Oct(e):e=DTe(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&(r.push(e.call(u,u.__data__,l,o)),i.push(u));return new tu(r,i)}function $Te(e){return function(){return this.matches(e)}}function MTe(e){return function(t){return t.matches(e)}}var $ct=Array.prototype.find;function Mct(e){return function(){return $ct.call(this.children,e)}}function Lct(){return this.firstElementChild}function Fct(e){return this.select(e==null?Lct:Mct(typeof e=="function"?e:MTe(e)))}var jct=Array.prototype.filter;function Bct(){return Array.from(this.children)}function Uct(e){return function(){return jct.call(this.children,e)}}function zct(e){return this.selectAll(e==null?Bct:Uct(typeof e=="function"?e:MTe(e)))}function Vct(e){typeof e!="function"&&(e=$Te(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new tu(r,this._parents)}function LTe(e){return new Array(e.length)}function Hct(){return new tu(this._enter||this._groups.map(LTe),this._parents)}function B$(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}B$.prototype={constructor:B$,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function qct(e){return function(){return e}}function Wct(e,t,n,r,i,s){for(var o=0,a,u=t.length,l=s.length;o<l;++o)(a=t[o])?(a.__data__=s[o],r[o]=a):n[o]=new B$(e,s[o]);for(;o<u;++o)(a=t[o])&&(i[o]=a)}function Gct(e,t,n,r,i,s,o){var a,u,l=new Map,c=t.length,f=s.length,d=new Array(c),h;for(a=0;a<c;++a)(u=t[a])&&(d[a]=h=o.call(u,u.__data__,a,t)+"",l.has(h)?i[a]=u:l.set(h,u));for(a=0;a<f;++a)h=o.call(e,s[a],a,s)+"",(u=l.get(h))?(r[a]=u,u.__data__=s[a],l.delete(h)):n[a]=new B$(e,s[a]);for(a=0;a<c;++a)(u=t[a])&&l.get(d[a])===u&&(i[a]=u)}function Yct(e){return e.__data__}function Kct(e,t){if(!arguments.length)return Array.from(this,Yct);var n=t?Gct:Wct,r=this._parents,i=this._groups;typeof e!="function"&&(e=qct(e));for(var s=i.length,o=new Array(s),a=new Array(s),u=new Array(s),l=0;l<s;++l){var c=r[l],f=i[l],d=f.length,h=Xct(e.call(c,c&&c.__data__,l,r)),p=h.length,m=a[l]=new Array(p),g=o[l]=new Array(p),y=u[l]=new Array(d);n(c,f,m,g,y,h,t);for(var v=0,b=0,w,E;v<p;++v)if(w=m[v]){for(v>=b&&(b=v+1);!(E=g[b])&&++b<p;);w._next=E||null}}return o=new tu(o,r),o._enter=a,o._exit=u,o}function Xct(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Qct(){return new tu(this._exit||this._groups.map(LTe),this._parents)}function Jct(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Zct(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),a=new Array(i),u=0;u<o;++u)for(var l=n[u],c=r[u],f=l.length,d=a[u]=new Array(f),h,p=0;p<f;++p)(h=l[p]||c[p])&&(d[p]=h);for(;u<i;++u)a[u]=n[u];return new tu(a,this._parents)}function eft(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function tft(e){e||(e=nft);function t(f,d){return f&&d?e(f.__data__,d.__data__):!f-!d}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],a=o.length,u=i[s]=new Array(a),l,c=0;c<a;++c)(l=o[c])&&(u[c]=l);u.sort(t)}return new tu(i,this._parents).order()}function nft(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function rft(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function ift(){return Array.from(this)}function sft(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function oft(){let e=0;for(const t of this)++e;return e}function aft(){return!this.node()}function uft(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,a;s<o;++s)(a=i[s])&&e.call(a,a.__data__,s,i);return this}function lft(e){return function(){this.removeAttribute(e)}}function cft(e){return function(){this.removeAttributeNS(e.space,e.local)}}function fft(e,t){return function(){this.setAttribute(e,t)}}function dft(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function hft(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function pft(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function mft(e,t){var n=tF(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?cft:lft:typeof t=="function"?n.local?pft:hft:n.local?dft:fft)(n,t))}function FTe(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function gft(e){return function(){this.style.removeProperty(e)}}function yft(e,t,n){return function(){this.style.setProperty(e,t,n)}}function vft(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function bft(e,t,n){return arguments.length>1?this.each((t==null?gft:typeof t=="function"?vft:yft)(e,t,n??"")):sx(this.node(),e)}function sx(e,t){return e.style.getPropertyValue(t)||FTe(e).getComputedStyle(e,null).getPropertyValue(t)}function _ft(e){return function(){delete this[e]}}function wft(e,t){return function(){this[e]=t}}function Eft(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function xft(e,t){return arguments.length>1?this.each((t==null?_ft:typeof t=="function"?Eft:wft)(e,t)):this.node()[e]}function jTe(e){return e.trim().split(/^|\s+/)}function lX(e){return e.classList||new BTe(e)}function BTe(e){this._node=e,this._names=jTe(e.getAttribute("class")||"")}BTe.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function UTe(e,t){for(var n=lX(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function zTe(e,t){for(var n=lX(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Sft(e){return function(){UTe(this,e)}}function Tft(e){return function(){zTe(this,e)}}function Aft(e,t){return function(){(t.apply(this,arguments)?UTe:zTe)(this,e)}}function Cft(e,t){var n=jTe(e+"");if(arguments.length<2){for(var r=lX(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?Aft:t?Sft:Tft)(n,t))}function Ift(){this.textContent=""}function kft(e){return function(){this.textContent=e}}function Rft(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Nft(e){return arguments.length?this.each(e==null?Ift:(typeof e=="function"?Rft:kft)(e)):this.node().textContent}function Pft(){this.innerHTML=""}function Oft(e){return function(){this.innerHTML=e}}function Dft(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function $ft(e){return arguments.length?this.each(e==null?Pft:(typeof e=="function"?Dft:Oft)(e)):this.node().innerHTML}function Mft(){this.nextSibling&&this.parentNode.appendChild(this)}function Lft(){return this.each(Mft)}function Fft(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function jft(){return this.each(Fft)}function Bft(e){var t=typeof e=="function"?e:PTe(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Uft(){return null}function zft(e,t){var n=typeof e=="function"?e:PTe(e),r=t==null?Uft:typeof t=="function"?t:uX(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Vft(){var e=this.parentNode;e&&e.removeChild(this)}function Hft(){return this.each(Vft)}function qft(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Wft(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Gft(e){return this.select(e?Wft:qft)}function Yft(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Kft(e){return function(t){e.call(this,t,this.__data__)}}function Xft(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Qft(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Jft(e,t,n){return function(){var r=this.__on,i,s=Kft(t);if(r){for(var o=0,a=r.length;o<a;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Zft(e,t,n){var r=Xft(e+""),i,s=r.length,o;if(arguments.length<2){var a=this.node().__on;if(a){for(var u=0,l=a.length,c;u<l;++u)for(i=0,c=a[u];i<s;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(a=t?Jft:Qft,i=0;i<s;++i)this.each(a(r[i],t,n));return this}function VTe(e,t,n){var r=FTe(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function edt(e,t){return function(){return VTe(this,e,t)}}function tdt(e,t){return function(){return VTe(this,e,t.apply(this,arguments))}}function ndt(e,t){return this.each((typeof t=="function"?tdt:edt)(e,t))}function*rdt(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var cX=[null];function tu(e,t){this._groups=e,this._parents=t}function Uk(){return new tu([[document.documentElement]],cX)}function idt(){return this}tu.prototype=Uk.prototype={constructor:tu,select:Nct,selectAll:Dct,selectChild:Fct,selectChildren:zct,filter:Vct,data:Kct,enter:Hct,exit:Qct,join:Jct,merge:Zct,selection:idt,order:eft,sort:tft,call:rft,nodes:ift,node:sft,size:oft,empty:aft,each:uft,attr:mft,style:bft,property:xft,classed:Cft,text:Nft,html:$ft,raise:Lft,lower:jft,append:Bft,insert:zft,remove:Hft,clone:Gft,datum:Yft,on:Zft,dispatch:ndt,[Symbol.iterator]:rdt};function xi(e){return typeof e=="string"?new tu([[document.querySelector(e)]],[document.documentElement]):new tu([[e]],cX)}function sdt(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Dz(e,t){if(e=sdt(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}function odt(e){return typeof e=="string"?new tu([document.querySelectorAll(e)],[document.documentElement]):new tu([OTe(e)],cX)}const $z={capture:!0,passive:!1};function Mz(e){e.preventDefault(),e.stopImmediatePropagation()}function adt(e){var t=e.document.documentElement,n=xi(e).on("dragstart.drag",Mz,$z);"onselectstart"in t?n.on("selectstart.drag",Mz,$z):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function udt(e,t){var n=e.document.documentElement,r=xi(e).on("dragstart.drag",null);t&&(r.on("click.drag",Mz,$z),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}function PS(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function zk(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qy(){}var ab=.7,ox=1/ab,pE="\\s*([+-]?\\d+)\\s*",oI="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",hh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",ldt=/^#([0-9a-f]{3,8})$/,cdt=new RegExp(`^rgb\\(${pE},${pE},${pE}\\)$`),fdt=new RegExp(`^rgb\\(${hh},${hh},${hh}\\)$`),ddt=new RegExp(`^rgba\\(${pE},${pE},${pE},${oI}\\)$`),hdt=new RegExp(`^rgba\\(${hh},${hh},${hh},${oI}\\)$`),pdt=new RegExp(`^hsl\\(${oI},${hh},${hh}\\)$`),mdt=new RegExp(`^hsla\\(${oI},${hh},${hh},${oI}\\)$`),Xle={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};PS(Qy,ub,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:Qle,formatHex:Qle,formatHex8:gdt,formatHsl:ydt,formatRgb:Jle,toString:Jle});function Qle(){return this.rgb().formatHex()}function gdt(){return this.rgb().formatHex8()}function ydt(){return HTe(this).formatHsl()}function Jle(){return this.rgb().formatRgb()}function ub(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=ldt.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?Zle(t):n===3?new oo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?iP(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?iP(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=cdt.exec(e))?new oo(t[1],t[2],t[3],1):(t=fdt.exec(e))?new oo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ddt.exec(e))?iP(t[1],t[2],t[3],t[4]):(t=hdt.exec(e))?iP(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=pdt.exec(e))?nce(t[1],t[2]/100,t[3]/100,1):(t=mdt.exec(e))?nce(t[1],t[2]/100,t[3]/100,t[4]):Xle.hasOwnProperty(e)?Zle(Xle[e]):e==="transparent"?new oo(NaN,NaN,NaN,0):null}function Zle(e){return new oo(e>>16&255,e>>8&255,e&255,1)}function iP(e,t,n,r){return r<=0&&(e=t=n=NaN),new oo(e,t,n,r)}function fX(e){return e instanceof Qy||(e=ub(e)),e?(e=e.rgb(),new oo(e.r,e.g,e.b,e.opacity)):new oo}function ny(e,t,n,r){return arguments.length===1?fX(e):new oo(e,t,n,r??1)}function oo(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}PS(oo,ny,zk(Qy,{brighter(e){return e=e==null?ox:Math.pow(ox,e),new oo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?ab:Math.pow(ab,e),new oo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new oo(j1(this.r),j1(this.g),j1(this.b),U$(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ece,formatHex:ece,formatHex8:vdt,formatRgb:tce,toString:tce}));function ece(){return`#${w1(this.r)}${w1(this.g)}${w1(this.b)}`}function vdt(){return`#${w1(this.r)}${w1(this.g)}${w1(this.b)}${w1((isNaN(this.opacity)?1:this.opacity)*255)}`}function tce(){const e=U$(this.opacity);return`${e===1?"rgb(":"rgba("}${j1(this.r)}, ${j1(this.g)}, ${j1(this.b)}${e===1?")":`, ${e})`}`}function U$(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function j1(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function w1(e){return e=j1(e),(e<16?"0":"")+e.toString(16)}function nce(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new kf(e,t,n,r)}function HTe(e){if(e instanceof kf)return new kf(e.h,e.s,e.l,e.opacity);if(e instanceof Qy||(e=ub(e)),!e)return new kf;if(e instanceof kf)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,a=s-i,u=(s+i)/2;return a?(t===s?o=(n-r)/a+(n<r)*6:n===s?o=(r-t)/a+2:o=(t-n)/a+4,a/=u<.5?s+i:2-s-i,o*=60):a=u>0&&u<1?0:o,new kf(o,a,u,e.opacity)}function z$(e,t,n,r){return arguments.length===1?HTe(e):new kf(e,t,n,r??1)}function kf(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}PS(kf,z$,zk(Qy,{brighter(e){return e=e==null?ox:Math.pow(ox,e),new kf(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ab:Math.pow(ab,e),new kf(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new oo(Z8(e>=240?e-240:e+120,i,r),Z8(e,i,r),Z8(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new kf(rce(this.h),sP(this.s),sP(this.l),U$(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=U$(this.opacity);return`${e===1?"hsl(":"hsla("}${rce(this.h)}, ${sP(this.s)*100}%, ${sP(this.l)*100}%${e===1?")":`, ${e})`}`}}));function rce(e){return e=(e||0)%360,e<0?e+360:e}function sP(e){return Math.max(0,Math.min(1,e||0))}function Z8(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const qTe=Math.PI/180,WTe=180/Math.PI,V$=18,GTe=.96422,YTe=1,KTe=.82521,XTe=4/29,mE=6/29,QTe=3*mE*mE,bdt=mE*mE*mE;function JTe(e){if(e instanceof ph)return new ph(e.l,e.a,e.b,e.opacity);if(e instanceof Xp)return ZTe(e);e instanceof oo||(e=fX(e));var t=rB(e.r),n=rB(e.g),r=rB(e.b),i=eB((.2225045*t+.7168786*n+.0606169*r)/YTe),s,o;return t===n&&n===r?s=o=i:(s=eB((.4360747*t+.3850649*n+.1430804*r)/GTe),o=eB((.0139322*t+.0971045*n+.7141733*r)/KTe)),new ph(116*i-16,500*(s-i),200*(i-o),e.opacity)}function H$(e,t,n,r){return arguments.length===1?JTe(e):new ph(e,t,n,r??1)}function ph(e,t,n,r){this.l=+e,this.a=+t,this.b=+n,this.opacity=+r}PS(ph,H$,zk(Qy,{brighter(e){return new ph(this.l+V$*(e??1),this.a,this.b,this.opacity)},darker(e){return new ph(this.l-V$*(e??1),this.a,this.b,this.opacity)},rgb(){var e=(this.l+16)/116,t=isNaN(this.a)?e:e+this.a/500,n=isNaN(this.b)?e:e-this.b/200;return t=GTe*tB(t),e=YTe*tB(e),n=KTe*tB(n),new oo(nB(3.1338561*t-1.6168667*e-.4906146*n),nB(-.9787684*t+1.9161415*e+.033454*n),nB(.0719453*t-.2289914*e+1.4052427*n),this.opacity)}}));function eB(e){return e>bdt?Math.pow(e,1/3):e/QTe+XTe}function tB(e){return e>mE?e*e*e:QTe*(e-XTe)}function nB(e){return 255*(e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055)}function rB(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function _dt(e){if(e instanceof Xp)return new Xp(e.h,e.c,e.l,e.opacity);if(e instanceof ph||(e=JTe(e)),e.a===0&&e.b===0)return new Xp(NaN,0<e.l&&e.l<100?0:NaN,e.l,e.opacity);var t=Math.atan2(e.b,e.a)*WTe;return new Xp(t<0?t+360:t,Math.sqrt(e.a*e.a+e.b*e.b),e.l,e.opacity)}function q$(e,t,n,r){return arguments.length===1?_dt(e):new Xp(e,t,n,r??1)}function Xp(e,t,n,r){this.h=+e,this.c=+t,this.l=+n,this.opacity=+r}function ZTe(e){if(isNaN(e.h))return new ph(e.l,0,0,e.opacity);var t=e.h*qTe;return new ph(e.l,Math.cos(t)*e.c,Math.sin(t)*e.c,e.opacity)}PS(Xp,q$,zk(Qy,{brighter(e){return new Xp(this.h,this.c,this.l+V$*(e??1),this.opacity)},darker(e){return new Xp(this.h,this.c,this.l-V$*(e??1),this.opacity)},rgb(){return ZTe(this).rgb()}}));var eAe=-.14861,dX=1.78277,hX=-.29227,nF=-.90649,aI=1.97294,ice=aI*nF,sce=aI*dX,oce=dX*hX-nF*eAe;function wdt(e){if(e instanceof B1)return new B1(e.h,e.s,e.l,e.opacity);e instanceof oo||(e=fX(e));var t=e.r/255,n=e.g/255,r=e.b/255,i=(oce*r+ice*t-sce*n)/(oce+ice-sce),s=r-i,o=(aI*(n-i)-hX*s)/nF,a=Math.sqrt(o*o+s*s)/(aI*i*(1-i)),u=a?Math.atan2(o,s)*WTe-120:NaN;return new B1(u<0?u+360:u,a,i,e.opacity)}function Lz(e,t,n,r){return arguments.length===1?wdt(e):new B1(e,t,n,r??1)}function B1(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}PS(B1,Lz,zk(Qy,{brighter(e){return e=e==null?ox:Math.pow(ox,e),new B1(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?ab:Math.pow(ab,e),new B1(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=isNaN(this.h)?0:(this.h+120)*qTe,t=+this.l,n=isNaN(this.s)?0:this.s*t*(1-t),r=Math.cos(e),i=Math.sin(e);return new oo(255*(t+n*(eAe*r+dX*i)),255*(t+n*(hX*r+nF*i)),255*(t+n*(aI*r)),this.opacity)}}));function tAe(e,t,n,r,i){var s=e*e,o=s*e;return((1-3*e+3*s-o)*t+(4-6*s+3*o)*n+(1+3*e+3*s-3*o)*r+o*i)/6}function nAe(e){var t=e.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,t-1):Math.floor(n*t),i=e[r],s=e[r+1],o=r>0?e[r-1]:2*i-s,a=r<t-1?e[r+2]:2*s-i;return tAe((n-r/t)*t,o,i,s,a)}}function rAe(e){var t=e.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*t),i=e[(r+t-1)%t],s=e[r%t],o=e[(r+1)%t],a=e[(r+2)%t];return tAe((n-r/t)*t,i,s,o,a)}}const rF=e=>()=>e;function iAe(e,t){return function(n){return e+n*t}}function Edt(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function iF(e,t){var n=t-e;return n?iAe(e,n>180||n<-180?n-360*Math.round(n/360):n):rF(isNaN(e)?t:e)}function xdt(e){return(e=+e)==1?ao:function(t,n){return n-t?Edt(t,n,e):rF(isNaN(t)?n:t)}}function ao(e,t){var n=t-e;return n?iAe(e,n):rF(isNaN(e)?t:e)}const uI=function e(t){var n=xdt(t);function r(i,s){var o=n((i=ny(i)).r,(s=ny(s)).r),a=n(i.g,s.g),u=n(i.b,s.b),l=ao(i.opacity,s.opacity);return function(c){return i.r=o(c),i.g=a(c),i.b=u(c),i.opacity=l(c),i+""}}return r.gamma=e,r}(1);function sAe(e){return function(t){var n=t.length,r=new Array(n),i=new Array(n),s=new Array(n),o,a;for(o=0;o<n;++o)a=ny(t[o]),r[o]=a.r||0,i[o]=a.g||0,s[o]=a.b||0;return r=e(r),i=e(i),s=e(s),a.opacity=1,function(u){return a.r=r(u),a.g=i(u),a.b=s(u),a+""}}}var Sdt=sAe(nAe),Tdt=sAe(rAe);function pX(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function oAe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Adt(e,t){return(oAe(t)?pX:aAe)(e,t)}function aAe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=ug(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(a){for(o=0;o<r;++o)s[o]=i[o](a);return s}}function uAe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function wc(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function lAe(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=ug(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Fz=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,iB=new RegExp(Fz.source,"g");function Cdt(e){return function(){return e}}function Idt(e){return function(t){return e(t)+""}}function mX(e,t){var n=Fz.lastIndex=iB.lastIndex=0,r,i,s,o=-1,a=[],u=[];for(e=e+"",t=t+"";(r=Fz.exec(e))&&(i=iB.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),a[o]?a[o]+=s:a[++o]=s),(r=r[0])===(i=i[0])?a[o]?a[o]+=i:a[++o]=i:(a[++o]=null,u.push({i:o,x:wc(r,i)})),n=iB.lastIndex;return n<t.length&&(s=t.slice(n),a[o]?a[o]+=s:a[++o]=s),a.length<2?u[0]?Idt(u[0].x):Cdt(t):(t=u.length,function(l){for(var c=0,f;c<t;++c)a[(f=u[c]).i]=f.x(l);return a.join("")})}function ug(e,t){var n=typeof t,r;return t==null||n==="boolean"?rF(t):(n==="number"?wc:n==="string"?(r=ub(t))?(t=r,uI):mX:t instanceof ub?uI:t instanceof Date?uAe:oAe(t)?pX:Array.isArray(t)?aAe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?lAe:wc)(e,t)}function kdt(e){var t=e.length;return function(n){return e[Math.max(0,Math.min(t-1,Math.floor(n*t)))]}}function Rdt(e,t){var n=iF(+e,+t);return function(r){var i=n(r);return i-360*Math.floor(i/360)}}function Vk(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var ace=180/Math.PI,jz={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function cAe(e,t,n,r,i,s){var o,a,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(a=Math.sqrt(n*n+r*r))&&(n/=a,r/=a,u/=a),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*ace,skewX:Math.atan(u)*ace,scaleX:o,scaleY:a}}var oP;function Ndt(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?jz:cAe(t.a,t.b,t.c,t.d,t.e,t.f)}function Pdt(e){return e==null||(oP||(oP=document.createElementNS("http://www.w3.org/2000/svg","g")),oP.setAttribute("transform",e),!(e=oP.transform.baseVal.consolidate()))?jz:(e=e.matrix,cAe(e.a,e.b,e.c,e.d,e.e,e.f))}function fAe(e,t,n,r){function i(l){return l.length?l.pop()+" ":""}function s(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push("translate(",null,t,null,n);p.push({i:m-4,x:wc(l,f)},{i:m-2,x:wc(c,d)})}else(f||d)&&h.push("translate("+f+t+d+n)}function o(l,c,f,d){l!==c?(l-c>180?c+=360:c-l>180&&(l+=360),d.push({i:f.push(i(f)+"rotate(",null,r)-2,x:wc(l,c)})):c&&f.push(i(f)+"rotate("+c+r)}function a(l,c,f,d){l!==c?d.push({i:f.push(i(f)+"skewX(",null,r)-2,x:wc(l,c)}):c&&f.push(i(f)+"skewX("+c+r)}function u(l,c,f,d,h,p){if(l!==f||c!==d){var m=h.push(i(h)+"scale(",null,",",null,")");p.push({i:m-4,x:wc(l,f)},{i:m-2,x:wc(c,d)})}else(f!==1||d!==1)&&h.push(i(h)+"scale("+f+","+d+")")}return function(l,c){var f=[],d=[];return l=e(l),c=e(c),s(l.translateX,l.translateY,c.translateX,c.translateY,f,d),o(l.rotate,c.rotate,f,d),a(l.skewX,c.skewX,f,d),u(l.scaleX,l.scaleY,c.scaleX,c.scaleY,f,d),l=c=null,function(h){for(var p=-1,m=d.length,g;++p<m;)f[(g=d[p]).i]=g.x(h);return f.join("")}}}var dAe=fAe(Ndt,"px, ","px)","deg)"),hAe=fAe(Pdt,", ",")",")"),Odt=1e-12;function uce(e){return((e=Math.exp(e))+1/e)/2}function Ddt(e){return((e=Math.exp(e))-1/e)/2}function $dt(e){return((e=Math.exp(2*e))-1)/(e+1)}const Mdt=function e(t,n,r){function i(s,o){var a=s[0],u=s[1],l=s[2],c=o[0],f=o[1],d=o[2],h=c-a,p=f-u,m=h*h+p*p,g,y;if(m<Odt)y=Math.log(d/l)/t,g=function(S){return[a+S*h,u+S*p,l*Math.exp(t*S*y)]};else{var v=Math.sqrt(m),b=(d*d-l*l+r*m)/(2*l*n*v),w=(d*d-l*l-r*m)/(2*d*n*v),E=Math.log(Math.sqrt(b*b+1)-b),T=Math.log(Math.sqrt(w*w+1)-w);y=(T-E)/t,g=function(S){var A=S*y,C=uce(E),k=l/(n*v)*(C*$dt(t*A+E)-Ddt(E));return[a+k*h,u+k*p,l*C/uce(t*A+E)]}}return g.duration=y*1e3*t/Math.SQRT2,g}return i.rho=function(s){var o=Math.max(.001,+s),a=o*o,u=a*a;return e(o,a,u)},i}(Math.SQRT2,2,4);function pAe(e){return function(t,n){var r=e((t=z$(t)).h,(n=z$(n)).h),i=ao(t.s,n.s),s=ao(t.l,n.l),o=ao(t.opacity,n.opacity);return function(a){return t.h=r(a),t.s=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Ldt=pAe(iF);var Fdt=pAe(ao);function jdt(e,t){var n=ao((e=H$(e)).l,(t=H$(t)).l),r=ao(e.a,t.a),i=ao(e.b,t.b),s=ao(e.opacity,t.opacity);return function(o){return e.l=n(o),e.a=r(o),e.b=i(o),e.opacity=s(o),e+""}}function mAe(e){return function(t,n){var r=e((t=q$(t)).h,(n=q$(n)).h),i=ao(t.c,n.c),s=ao(t.l,n.l),o=ao(t.opacity,n.opacity);return function(a){return t.h=r(a),t.c=i(a),t.l=s(a),t.opacity=o(a),t+""}}}const Bdt=mAe(iF);var Udt=mAe(ao);function gAe(e){return function t(n){n=+n;function r(i,s){var o=e((i=Lz(i)).h,(s=Lz(s)).h),a=ao(i.s,s.s),u=ao(i.l,s.l),l=ao(i.opacity,s.opacity);return function(c){return i.h=o(c),i.s=a(c),i.l=u(Math.pow(c,n)),i.opacity=l(c),i+""}}return r.gamma=t,r}(1)}const zdt=gAe(iF);var Vdt=gAe(ao);function gX(e,t){t===void 0&&(t=e,e=ug);for(var n=0,r=t.length-1,i=t[0],s=new Array(r<0?0:r);n<r;)s[n]=e(i,i=t[++n]);return function(o){var a=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return s[a](o-a)}}function Hdt(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e(r/(t-1));return n}const qdt=Object.freeze(Object.defineProperty({__proto__:null,interpolate:ug,interpolateArray:Adt,interpolateBasis:nAe,interpolateBasisClosed:rAe,interpolateCubehelix:zdt,interpolateCubehelixLong:Vdt,interpolateDate:uAe,interpolateDiscrete:kdt,interpolateHcl:Bdt,interpolateHclLong:Udt,interpolateHsl:Ldt,interpolateHslLong:Fdt,interpolateHue:Rdt,interpolateLab:jdt,interpolateNumber:wc,interpolateNumberArray:pX,interpolateObject:lAe,interpolateRgb:uI,interpolateRgbBasis:Sdt,interpolateRgbBasisClosed:Tdt,interpolateRound:Vk,interpolateString:mX,interpolateTransformCss:dAe,interpolateTransformSvg:hAe,interpolateZoom:Mdt,piecewise:gX,quantize:Hdt},Symbol.toStringTag,{value:"Module"}));var ax=0,UA=0,KT=0,yAe=1e3,W$,zA,G$=0,lb=0,sF=0,lI=typeof performance=="object"&&performance.now?performance:Date,vAe=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function oF(){return lb||(vAe(Wdt),lb=lI.now()+sF)}function Wdt(){lb=0}function cI(){this._call=this._time=this._next=null}cI.prototype=yX.prototype={constructor:cI,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?oF():+n)+(t==null?0:+t),!this._next&&zA!==this&&(zA?zA._next=this:W$=this,zA=this),this._call=e,this._time=n,Bz()},stop:function(){this._call&&(this._call=null,this._time=1/0,Bz())}};function yX(e,t,n){var r=new cI;return r.restart(e,t,n),r}function Gdt(){oF(),++ax;for(var e=W$,t;e;)(t=lb-e._time)>=0&&e._call.call(void 0,t),e=e._next;--ax}function lce(){lb=(G$=lI.now())+sF,ax=UA=0;try{Gdt()}finally{ax=0,Kdt(),lb=0}}function Ydt(){var e=lI.now(),t=e-G$;t>yAe&&(sF-=t,G$=e)}function Kdt(){for(var e,t=W$,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:W$=n);zA=e,Bz(r)}function Bz(e){if(!ax){UA&&(UA=clearTimeout(UA));var t=e-lb;t>24?(e<1/0&&(UA=setTimeout(lce,e-lI.now()-sF)),KT&&(KT=clearInterval(KT))):(KT||(G$=lI.now(),KT=setInterval(Ydt,yAe)),ax=1,vAe(lce))}}function cce(e,t,n){var r=new cI;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}function Xdt(e,t,n){var r=new cI,i=t;return t==null?(r.restart(e,t,n),r):(r._restart=r.restart,r.restart=function(s,o,a){o=+o,a=a==null?oF():+a,r._restart(function u(l){l+=i,r._restart(u,i+=o,a),s(l)},o,a)},r.restart(e,t,n),r)}var Qdt=eF("start","end","cancel","interrupt"),Jdt=[],bAe=0,fce=1,Uz=2,BO=3,dce=4,zz=5,UO=6;function aF(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Zdt(e,n,{name:t,index:r,group:i,on:Qdt,tween:Jdt,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:bAe})}function vX(e,t){var n=cd(e,t);if(n.state>bAe)throw new Error("too late; already scheduled");return n}function tp(e,t){var n=cd(e,t);if(n.state>BO)throw new Error("too late; already running");return n}function cd(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Zdt(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=yX(s,0,n.time);function s(l){n.state=fce,n.timer.restart(o,n.delay,n.time),n.delay<=l&&o(l-n.delay)}function o(l){var c,f,d,h;if(n.state!==fce)return u();for(c in r)if(h=r[c],h.name===n.name){if(h.state===BO)return cce(o);h.state===dce?(h.state=UO,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=UO,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(cce(function(){n.state===BO&&(n.state=dce,n.timer.restart(a,n.delay,n.time),a(l))}),n.state=Uz,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Uz){for(n.state=BO,i=new Array(d=n.tween.length),c=0,f=-1;c<d;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++f]=h);i.length=f+1}}function a(l){for(var c=l<n.duration?n.ease.call(null,l/n.duration):(n.timer.restart(u),n.state=zz,1),f=-1,d=i.length;++f<d;)i[f].call(e,c);n.state===zz&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=UO,n.timer.stop(),delete r[t];for(var l in r)return;delete e.__transition}}function Vz(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Uz&&r.state<zz,r.state=UO,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function eht(e){return this.each(function(){Vz(this,e)})}function tht(e,t){var n,r;return function(){var i=tp(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,a=r.length;o<a;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function nht(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=tp(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var a={name:t,value:n},u=0,l=i.length;u<l;++u)if(i[u].name===t){i[u]=a;break}u===l&&i.push(a)}s.tween=i}}function rht(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=cd(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?tht:nht)(n,e,t))}function bX(e,t,n){var r=e._id;return e.each(function(){var i=tp(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return cd(i,r).value[t]}}function _Ae(e,t){var n;return(typeof t=="number"?wc:t instanceof ub?uI:(n=ub(t))?(t=n,uI):mX)(e,t)}function iht(e){return function(){this.removeAttribute(e)}}function sht(e){return function(){this.removeAttributeNS(e.space,e.local)}}function oht(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function aht(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function uht(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function lht(e,t,n){var r,i,s;return function(){var o,a=n(this),u;return a==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=a+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a)))}}function cht(e,t){var n=tF(e),r=n==="transform"?hAe:_Ae;return this.attrTween(e,typeof t=="function"?(n.local?lht:uht)(n,r,bX(this,"attr."+e,t)):t==null?(n.local?sht:iht)(n):(n.local?aht:oht)(n,r,t))}function fht(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function dht(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function hht(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&dht(e,s)),n}return i._value=t,i}function pht(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&fht(e,s)),n}return i._value=t,i}function mht(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=tF(e);return this.tween(n,(r.local?hht:pht)(r,t))}function ght(e,t){return function(){vX(this,e).delay=+t.apply(this,arguments)}}function yht(e,t){return t=+t,function(){vX(this,e).delay=t}}function vht(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?ght:yht)(t,e)):cd(this.node(),t).delay}function bht(e,t){return function(){tp(this,e).duration=+t.apply(this,arguments)}}function _ht(e,t){return t=+t,function(){tp(this,e).duration=t}}function wht(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?bht:_ht)(t,e)):cd(this.node(),t).duration}function Eht(e,t){if(typeof t!="function")throw new Error;return function(){tp(this,e).ease=t}}function xht(e){var t=this._id;return arguments.length?this.each(Eht(t,e)):cd(this.node(),t).ease}function Sht(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;tp(this,e).ease=n}}function Tht(e){if(typeof e!="function")throw new Error;return this.each(Sht(this._id,e))}function Aht(e){typeof e!="function"&&(e=$Te(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,a=r[i]=[],u,l=0;l<o;++l)(u=s[l])&&e.call(u,u.__data__,l,s)&&a.push(u);return new Pm(r,this._parents,this._name,this._id)}function Cht(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),a=0;a<s;++a)for(var u=t[a],l=n[a],c=u.length,f=o[a]=new Array(c),d,h=0;h<c;++h)(d=u[h]||l[h])&&(f[h]=d);for(;a<r;++a)o[a]=t[a];return new Pm(o,this._parents,this._name,this._id)}function Iht(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function kht(e,t,n){var r,i,s=Iht(t)?vX:tp;return function(){var o=s(this,e),a=o.on;a!==r&&(i=(r=a).copy()).on(t,n),o.on=i}}function Rht(e,t){var n=this._id;return arguments.length<2?cd(this.node(),n).on.on(e):this.each(kht(n,e,t))}function Nht(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Pht(){return this.on("end.remove",Nht(this._id))}function Oht(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uX(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var a=r[o],u=a.length,l=s[o]=new Array(u),c,f,d=0;d<u;++d)(c=a[d])&&(f=e.call(c,c.__data__,d,a))&&("__data__"in c&&(f.__data__=c.__data__),l[d]=f,aF(l[d],t,n,d,l,cd(c,n)));return new Pm(s,this._parents,t,n)}function Dht(e){var t=this._name,n=this._id;typeof e!="function"&&(e=DTe(e));for(var r=this._groups,i=r.length,s=[],o=[],a=0;a<i;++a)for(var u=r[a],l=u.length,c,f=0;f<l;++f)if(c=u[f]){for(var d=e.call(c,c.__data__,f,u),h,p=cd(c,n),m=0,g=d.length;m<g;++m)(h=d[m])&&aF(h,t,n,m,d,p);s.push(d),o.push(c)}return new Pm(s,o,t,n)}var $ht=Uk.prototype.constructor;function Mht(){return new $ht(this._groups,this._parents)}function Lht(e,t){var n,r,i;return function(){var s=sx(this,e),o=(this.style.removeProperty(e),sx(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function wAe(e){return function(){this.style.removeProperty(e)}}function Fht(e,t,n){var r,i=n+"",s;return function(){var o=sx(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function jht(e,t,n){var r,i,s;return function(){var o=sx(this,e),a=n(this),u=a+"";return a==null&&(u=a=(this.style.removeProperty(e),sx(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,a))}}function Bht(e,t){var n,r,i,s="style."+t,o="end."+s,a;return function(){var u=tp(this,e),l=u.on,c=u.value[s]==null?a||(a=wAe(t)):void 0;(l!==n||i!==c)&&(r=(n=l).copy()).on(o,i=c),u.on=r}}function Uht(e,t,n){var r=(e+="")=="transform"?dAe:_Ae;return t==null?this.styleTween(e,Lht(e,r)).on("end.style."+e,wAe(e)):typeof t=="function"?this.styleTween(e,jht(e,r,bX(this,"style."+e,t))).each(Bht(this._id,e)):this.styleTween(e,Fht(e,r,t),n).on("end.style."+e,null)}function zht(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Vht(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&zht(e,o,n)),r}return s._value=t,s}function Hht(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Vht(e,t,n??""))}function qht(e){return function(){this.textContent=e}}function Wht(e){return function(){var t=e(this);this.textContent=t??""}}function Ght(e){return this.tween("text",typeof e=="function"?Wht(bX(this,"text",e)):qht(e==null?"":e+""))}function Yht(e){return function(t){this.textContent=e.call(this,t)}}function Kht(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Yht(i)),t}return r._value=e,r}function Xht(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Kht(e))}function Qht(){for(var e=this._name,t=this._id,n=EAe(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)if(u=o[l]){var c=cd(u,t);aF(u,e,n,l,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new Pm(r,this._parents,e,n)}function Jht(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var a={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var l=tp(this,r),c=l.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(a),t._.interrupt.push(a),t._.end.push(u)),l.on=t}),i===0&&s()})}var Zht=0;function Pm(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function EAe(){return++Zht}var Ep=Uk.prototype;Pm.prototype={constructor:Pm,select:Oht,selectAll:Dht,selectChild:Ep.selectChild,selectChildren:Ep.selectChildren,filter:Aht,merge:Cht,selection:Mht,transition:Qht,call:Ep.call,nodes:Ep.nodes,node:Ep.node,size:Ep.size,empty:Ep.empty,each:Ep.each,on:Rht,attr:cht,attrTween:mht,style:Uht,styleTween:Hht,text:Ght,textTween:Xht,remove:Pht,tween:rht,delay:vht,duration:wht,ease:xht,easeVarying:Tht,end:Jht,[Symbol.iterator]:Ep[Symbol.iterator]};const ept=e=>+e;function tpt(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var npt={time:null,delay:0,duration:250,ease:tpt};function rpt(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function ipt(e){var t,n;e instanceof Pm?(t=e._id,e=e._name):(t=EAe(),(n=npt).time=oF(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],a=o.length,u,l=0;l<a;++l)(u=o[l])&&aF(u,e,t,l,o,n||rpt(u,t));return new Pm(r,this._parents,e,t)}Uk.prototype.interrupt=eht;Uk.prototype.transition=ipt;const sB=e=>()=>e;function spt(e,{sourceEvent:t,target:n,selection:r,mode:i,dispatch:s}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},selection:{value:r,enumerable:!0,configurable:!0},mode:{value:i,enumerable:!0,configurable:!0},_:{value:s}})}function opt(e){e.stopImmediatePropagation()}function oB(e){e.preventDefault(),e.stopImmediatePropagation()}var hce={name:"drag"},aB={name:"space"},V_={name:"handle"},H_={name:"center"};const{abs:pce,max:Zo,min:ea}=Math;function mce(e){return[+e[0],+e[1]]}function Hz(e){return[mce(e[0]),mce(e[1])]}var zO={name:"x",handles:["w","e"].map(fI),input:function(e,t){return e==null?null:[[+e[0],t[0][1]],[+e[1],t[1][1]]]},output:function(e){return e&&[e[0][0],e[1][0]]}},VO={name:"y",handles:["n","s"].map(fI),input:function(e,t){return e==null?null:[[t[0][0],+e[0]],[t[1][0],+e[1]]]},output:function(e){return e&&[e[0][1],e[1][1]]}},apt={name:"xy",handles:["n","w","e","s","nw","ne","sw","se"].map(fI),input:function(e){return e==null?null:Hz(e)},output:function(e){return e}},xp={overlay:"crosshair",selection:"move",n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},gce={e:"w",w:"e",nw:"ne",ne:"nw",se:"sw",sw:"se"},yce={n:"s",s:"n",nw:"sw",ne:"se",se:"ne",sw:"nw"},upt={overlay:1,selection:1,n:null,e:1,s:null,w:-1,nw:-1,ne:1,se:1,sw:-1},lpt={overlay:1,selection:1,n:-1,e:null,s:1,w:null,nw:-1,ne:-1,se:1,sw:1};function fI(e){return{type:e}}function cpt(e){return!e.ctrlKey&&!e.button}function fpt(){var e=this.ownerSVGElement||this;return e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]}function dpt(){return navigator.maxTouchPoints||"ontouchstart"in this}function uB(e){for(;!e.__brush;)if(!(e=e.parentNode))return;return e.__brush}function hpt(e){return e[0][0]===e[1][0]||e[0][1]===e[1][1]}function ppt(){return _X(zO)}function mpt(){return _X(VO)}function gpt(){return _X(apt)}function _X(e){var t=fpt,n=cpt,r=dpt,i=!0,s=eF("start","brush","end"),o=6,a;function u(g){var y=g.property("__brush",m).selectAll(".overlay").data([fI("overlay")]);y.enter().append("rect").attr("class","overlay").attr("pointer-events","all").attr("cursor",xp.overlay).merge(y).each(function(){var b=uB(this).extent;xi(this).attr("x",b[0][0]).attr("y",b[0][1]).attr("width",b[1][0]-b[0][0]).attr("height",b[1][1]-b[0][1])}),g.selectAll(".selection").data([fI("selection")]).enter().append("rect").attr("class","selection").attr("cursor",xp.selection).attr("fill","#777").attr("fill-opacity",.3).attr("stroke","#fff").attr("shape-rendering","crispEdges");var v=g.selectAll(".handle").data(e.handles,function(b){return b.type});v.exit().remove(),v.enter().append("rect").attr("class",function(b){return"handle handle--"+b.type}).attr("cursor",function(b){return xp[b.type]}),g.each(l).attr("fill","none").attr("pointer-events","all").on("mousedown.brush",d).filter(r).on("touchstart.brush",d).on("touchmove.brush",h).on("touchend.brush touchcancel.brush",p).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}u.move=function(g,y,v){g.tween?g.on("start.brush",function(b){c(this,arguments).beforestart().start(b)}).on("interrupt.brush end.brush",function(b){c(this,arguments).end(b)}).tween("brush",function(){var b=this,w=b.__brush,E=c(b,arguments),T=w.selection,S=e.input(typeof y=="function"?y.apply(this,arguments):y,w.extent),A=ug(T,S);function C(k){w.selection=k===1&&S===null?null:A(k),l.call(b),E.brush()}return T!==null&&S!==null?C:C(1)}):g.each(function(){var b=this,w=arguments,E=b.__brush,T=e.input(typeof y=="function"?y.apply(b,w):y,E.extent),S=c(b,w).beforestart();Vz(b),E.selection=T===null?null:T,l.call(b),S.start(v).brush(v).end(v)})},u.clear=function(g,y){u.move(g,null,y)};function l(){var g=xi(this),y=uB(this).selection;y?(g.selectAll(".selection").style("display",null).attr("x",y[0][0]).attr("y",y[0][1]).attr("width",y[1][0]-y[0][0]).attr("height",y[1][1]-y[0][1]),g.selectAll(".handle").style("display",null).attr("x",function(v){return v.type[v.type.length-1]==="e"?y[1][0]-o/2:y[0][0]-o/2}).attr("y",function(v){return v.type[0]==="s"?y[1][1]-o/2:y[0][1]-o/2}).attr("width",function(v){return v.type==="n"||v.type==="s"?y[1][0]-y[0][0]+o:o}).attr("height",function(v){return v.type==="e"||v.type==="w"?y[1][1]-y[0][1]+o:o})):g.selectAll(".selection,.handle").style("display","none").attr("x",null).attr("y",null).attr("width",null).attr("height",null)}function c(g,y,v){var b=g.__brush.emitter;return b&&(!v||!b.clean)?b:new f(g,y,v)}function f(g,y,v){this.that=g,this.args=y,this.state=g.__brush,this.active=0,this.clean=v}f.prototype={beforestart:function(){return++this.active===1&&(this.state.emitter=this,this.starting=!0),this},start:function(g,y){return this.starting?(this.starting=!1,this.emit("start",g,y)):this.emit("brush",g),this},brush:function(g,y){return this.emit("brush",g,y),this},end:function(g,y){return--this.active===0&&(delete this.state.emitter,this.emit("end",g,y)),this},emit:function(g,y,v){var b=xi(this.that).datum();s.call(g,this.that,new spt(g,{sourceEvent:y,target:u,selection:e.output(this.state.selection),mode:v,dispatch:s}),b)}};function d(g){if(a&&!g.touches||!n.apply(this,arguments))return;var y=this,v=g.target.__data__.type,b=(i&&g.metaKey?v="overlay":v)==="selection"?hce:i&&g.altKey?H_:V_,w=e===VO?null:upt[v],E=e===zO?null:lpt[v],T=uB(y),S=T.extent,A=T.selection,C=S[0][0],k,N,D=S[0][1],O,$,F=S[1][0],M,B,U=S[1][1],H,P,z=0,W=0,j,q=w&&E&&i&&g.shiftKey,G,ne,ce=Array.from(g.touches||[g],_e=>{const ke=_e.identifier;return _e=Dz(_e,y),_e.point0=_e.slice(),_e.identifier=ke,_e});Vz(y);var de=c(y,arguments,!0).beforestart();if(v==="overlay"){A&&(j=!0);const _e=[ce[0],ce[1]||ce[0]];T.selection=A=[[k=e===VO?C:ea(_e[0][0],_e[1][0]),O=e===zO?D:ea(_e[0][1],_e[1][1])],[M=e===VO?F:Zo(_e[0][0],_e[1][0]),H=e===zO?U:Zo(_e[0][1],_e[1][1])]],ce.length>1&&Xe(g)}else k=A[0][0],O=A[0][1],M=A[1][0],H=A[1][1];N=k,$=O,B=M,P=H;var he=xi(y).attr("pointer-events","none"),ve=he.selectAll(".overlay").attr("cursor",xp[v]);if(g.touches)de.moved=be,de.ended=ze;else{var Ie=xi(g.view).on("mousemove.brush",be,!0).on("mouseup.brush",ze,!0);i&&Ie.on("keydown.brush",yt,!0).on("keyup.brush",it,!0),adt(g.view)}l.call(y),de.start(g,b.name);function be(_e){for(const ke of _e.changedTouches||[_e])for(const Ve of ce)Ve.identifier===ke.identifier&&(Ve.cur=Dz(ke,y));if(q&&!G&&!ne&&ce.length===1){const ke=ce[0];pce(ke.cur[0]-ke[0])>pce(ke.cur[1]-ke[1])?ne=!0:G=!0}for(const ke of ce)ke.cur&&(ke[0]=ke.cur[0],ke[1]=ke.cur[1]);j=!0,oB(_e),Xe(_e)}function Xe(_e){const ke=ce[0],Ve=ke.point0;var ct;switch(z=ke[0]-Ve[0],W=ke[1]-Ve[1],b){case aB:case hce:{w&&(z=Zo(C-k,ea(F-M,z)),N=k+z,B=M+z),E&&(W=Zo(D-O,ea(U-H,W)),$=O+W,P=H+W);break}case V_:{ce[1]?(w&&(N=Zo(C,ea(F,ce[0][0])),B=Zo(C,ea(F,ce[1][0])),w=1),E&&($=Zo(D,ea(U,ce[0][1])),P=Zo(D,ea(U,ce[1][1])),E=1)):(w<0?(z=Zo(C-k,ea(F-k,z)),N=k+z,B=M):w>0&&(z=Zo(C-M,ea(F-M,z)),N=k,B=M+z),E<0?(W=Zo(D-O,ea(U-O,W)),$=O+W,P=H):E>0&&(W=Zo(D-H,ea(U-H,W)),$=O,P=H+W));break}case H_:{w&&(N=Zo(C,ea(F,k-z*w)),B=Zo(C,ea(F,M+z*w))),E&&($=Zo(D,ea(U,O-W*E)),P=Zo(D,ea(U,H+W*E)));break}}B<N&&(w*=-1,ct=k,k=M,M=ct,ct=N,N=B,B=ct,v in gce&&ve.attr("cursor",xp[v=gce[v]])),P<$&&(E*=-1,ct=O,O=H,H=ct,ct=$,$=P,P=ct,v in yce&&ve.attr("cursor",xp[v=yce[v]])),T.selection&&(A=T.selection),G&&(N=A[0][0],B=A[1][0]),ne&&($=A[0][1],P=A[1][1]),(A[0][0]!==N||A[0][1]!==$||A[1][0]!==B||A[1][1]!==P)&&(T.selection=[[N,$],[B,P]],l.call(y),de.brush(_e,b.name))}function ze(_e){if(opt(_e),_e.touches){if(_e.touches.length)return;a&&clearTimeout(a),a=setTimeout(function(){a=null},500)}else udt(_e.view,j),Ie.on("keydown.brush keyup.brush mousemove.brush mouseup.brush",null);he.attr("pointer-events","all"),ve.attr("cursor",xp.overlay),T.selection&&(A=T.selection),hpt(A)&&(T.selection=null,l.call(y)),de.end(_e,b.name)}function yt(_e){switch(_e.keyCode){case 16:{q=w&&E;break}case 18:{b===V_&&(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,O=$+W*E),b=H_,Xe(_e));break}case 32:{(b===V_||b===H_)&&(w<0?M=B-z:w>0&&(k=N-z),E<0?H=P-W:E>0&&(O=$-W),b=aB,ve.attr("cursor",xp.selection),Xe(_e));break}default:return}oB(_e)}function it(_e){switch(_e.keyCode){case 16:{q&&(G=ne=q=!1,Xe(_e));break}case 18:{b===H_&&(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(O=$),b=V_,Xe(_e));break}case 32:{b===aB&&(_e.altKey?(w&&(M=B-z*w,k=N+z*w),E&&(H=P-W*E,O=$+W*E),b=H_):(w<0?M=B:w>0&&(k=N),E<0?H=P:E>0&&(O=$),b=V_),ve.attr("cursor",xp[v]),Xe(_e));break}default:return}oB(_e)}}function h(g){c(this,arguments).moved(g)}function p(g){c(this,arguments).ended(g)}function m(){var g=this.__brush||{selection:null};return g.extent=Hz(t.apply(this,arguments)),g.dim=e,g}return u.extent=function(g){return arguments.length?(t=typeof g=="function"?g:sB(Hz(g)),u):t},u.filter=function(g){return arguments.length?(n=typeof g=="function"?g:sB(!!g),u):n},u.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:sB(!!g),u):r},u.handleSize=function(g){return arguments.length?(o=+g,u):o},u.keyModifiers=function(g){return arguments.length?(i=!!g,u):i},u.on=function(){var g=s.on.apply(s,arguments);return g===s?u:g},u}const qz=Math.PI,Wz=2*qz,Vv=1e-6,ypt=Wz-Vv;function xAe(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function vpt(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xAe;const n=10**t;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}let wX=class{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xAe:vpt(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,i){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(t,n,r,i,s,o){this._append`C${+t},${+n},${+r},${+i},${this._x1=+s},${this._y1=+o}`}arcTo(t,n,r,i,s){if(t=+t,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let o=this._x1,a=this._y1,u=r-t,l=i-n,c=o-t,f=a-n,d=c*c+f*f;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(d>Vv)if(!(Math.abs(f*u-l*c)>Vv)||!s)this._append`L${this._x1=t},${this._y1=n}`;else{let h=r-o,p=i-a,m=u*u+l*l,g=h*h+p*p,y=Math.sqrt(m),v=Math.sqrt(d),b=s*Math.tan((qz-Math.acos((m+d-g)/(2*y*v)))/2),w=b/v,E=b/y;Math.abs(w-1)>Vv&&this._append`L${t+w*c},${n+w*f}`,this._append`A${s},${s},0,0,${+(f*h>c*p)},${this._x1=t+E*u},${this._y1=n+E*l}`}}arc(t,n,r,i,s,o){if(t=+t,n=+n,r=+r,o=!!o,r<0)throw new Error(`negative radius: ${r}`);let a=r*Math.cos(i),u=r*Math.sin(i),l=t+a,c=n+u,f=1^o,d=o?i-s:s-i;this._x1===null?this._append`M${l},${c}`:(Math.abs(this._x1-l)>Vv||Math.abs(this._y1-c)>Vv)&&this._append`L${l},${c}`,r&&(d<0&&(d=d%Wz+Wz),d>ypt?this._append`A${r},${r},0,1,${f},${t-a},${n-u}A${r},${r},0,1,${f},${this._x1=l},${this._y1=c}`:d>Vv&&this._append`A${r},${r},0,${+(d>=qz)},${f},${this._x1=t+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(t,n,r,i){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}};function uF(){return new wX}uF.prototype=wX.prototype;const fm=11102230246251565e-32,ta=134217729,bpt=(3+8*fm)*fm;function lB(e,t,n,r,i){let s,o,a,u,l=t[0],c=r[0],f=0,d=0;c>l==c>-l?(s=l,l=t[++f]):(s=c,c=r[++d]);let h=0;if(f<e&&d<n)for(c>l==c>-l?(o=l+s,a=s-(o-l),l=t[++f]):(o=c+s,a=s-(o-c),c=r[++d]),s=o,a!==0&&(i[h++]=a);f<e&&d<n;)c>l==c>-l?(o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f]):(o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d]),s=o,a!==0&&(i[h++]=a);for(;f<e;)o=s+l,u=o-s,a=s-(o-u)+(l-u),l=t[++f],s=o,a!==0&&(i[h++]=a);for(;d<n;)o=s+c,u=o-s,a=s-(o-u)+(c-u),c=r[++d],s=o,a!==0&&(i[h++]=a);return(s!==0||h===0)&&(i[h++]=s),h}function _pt(e,t){let n=t[0];for(let r=1;r<e;r++)n+=t[r];return n}function Hk(e){return new Float64Array(e)}const wpt=(3+16*fm)*fm,Ept=(2+12*fm)*fm,xpt=(9+64*fm)*fm*fm,q_=Hk(4),vce=Hk(8),bce=Hk(12),_ce=Hk(16),$a=Hk(4);function Spt(e,t,n,r,i,s,o){let a,u,l,c,f,d,h,p,m,g,y,v,b,w,E,T,S,A;const C=e-i,k=n-i,N=t-s,D=r-s;w=C*D,d=ta*C,h=d-(d-C),p=C-h,d=ta*D,m=d-(d-D),g=D-m,E=p*g-(w-h*m-p*m-h*g),T=N*k,d=ta*N,h=d-(d-N),p=N-h,d=ta*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,q_[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,q_[1]=b-(y+f)+(f-T),A=v+y,f=A-v,q_[2]=v-(A-f)+(y-f),q_[3]=A;let O=_pt(4,q_),$=Ept*o;if(O>=$||-O>=$||(f=e-C,a=e-(C+f)+(f-i),f=n-k,l=n-(k+f)+(f-i),f=t-N,u=t-(N+f)+(f-s),f=r-D,c=r-(D+f)+(f-s),a===0&&u===0&&l===0&&c===0)||($=xpt*o+bpt*Math.abs(O),O+=C*c+D*a-(N*l+k*u),O>=$||-O>=$))return O;w=a*D,d=ta*a,h=d-(d-a),p=a-h,d=ta*D,m=d-(d-D),g=D-m,E=p*g-(w-h*m-p*m-h*g),T=u*k,d=ta*u,h=d-(d-u),p=u-h,d=ta*k,m=d-(d-k),g=k-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,$a[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,$a[1]=b-(y+f)+(f-T),A=v+y,f=A-v,$a[2]=v-(A-f)+(y-f),$a[3]=A;const F=lB(4,q_,4,$a,vce);w=C*c,d=ta*C,h=d-(d-C),p=C-h,d=ta*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=N*l,d=ta*N,h=d-(d-N),p=N-h,d=ta*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,$a[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,$a[1]=b-(y+f)+(f-T),A=v+y,f=A-v,$a[2]=v-(A-f)+(y-f),$a[3]=A;const M=lB(F,vce,4,$a,bce);w=a*c,d=ta*a,h=d-(d-a),p=a-h,d=ta*c,m=d-(d-c),g=c-m,E=p*g-(w-h*m-p*m-h*g),T=u*l,d=ta*u,h=d-(d-u),p=u-h,d=ta*l,m=d-(d-l),g=l-m,S=p*g-(T-h*m-p*m-h*g),y=E-S,f=E-y,$a[0]=E-(y+f)+(f-S),v=w+y,f=v-w,b=w-(v-f)+(y-f),y=b-T,f=b-y,$a[1]=b-(y+f)+(f-T),A=v+y,f=A-v,$a[2]=v-(A-f)+(y-f),$a[3]=A;const B=lB(M,bce,4,$a,_ce);return _ce[B-1]}function aP(e,t,n,r,i,s){const o=(t-s)*(n-i),a=(e-i)*(r-s),u=o-a,l=Math.abs(o+a);return Math.abs(u)>=wpt*l?u:-Spt(e,t,n,r,i,s,l)}const wce=Math.pow(2,-52),uP=new Uint32Array(512);class Y${static from(t,n=kpt,r=Rpt){const i=t.length,s=new Float64Array(i*2);for(let o=0;o<i;o++){const a=t[o];s[2*o]=n(a),s[2*o+1]=r(a)}return new Y$(s)}constructor(t){const n=t.length>>1;if(n>0&&typeof t[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=t;const r=Math.max(2*n-5,0);this._triangles=new Uint32Array(r*3),this._halfedges=new Int32Array(r*3),this._hashSize=Math.ceil(Math.sqrt(n)),this._hullPrev=new Uint32Array(n),this._hullNext=new Uint32Array(n),this._hullTri=new Uint32Array(n),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(n),this._dists=new Float64Array(n),this.update()}update(){const{coords:t,_hullPrev:n,_hullNext:r,_hullTri:i,_hullHash:s}=this,o=t.length>>1;let a=1/0,u=1/0,l=-1/0,c=-1/0;for(let C=0;C<o;C++){const k=t[2*C],N=t[2*C+1];k<a&&(a=k),N<u&&(u=N),k>l&&(l=k),N>c&&(c=N),this._ids[C]=C}const f=(a+l)/2,d=(u+c)/2;let h,p,m;for(let C=0,k=1/0;C<o;C++){const N=cB(f,d,t[2*C],t[2*C+1]);N<k&&(h=C,k=N)}const g=t[2*h],y=t[2*h+1];for(let C=0,k=1/0;C<o;C++){if(C===h)continue;const N=cB(g,y,t[2*C],t[2*C+1]);N<k&&N>0&&(p=C,k=N)}let v=t[2*p],b=t[2*p+1],w=1/0;for(let C=0;C<o;C++){if(C===h||C===p)continue;const k=Cpt(g,y,v,b,t[2*C],t[2*C+1]);k<w&&(m=C,w=k)}let E=t[2*m],T=t[2*m+1];if(w===1/0){for(let N=0;N<o;N++)this._dists[N]=t[2*N]-t[0]||t[2*N+1]-t[1];Vw(this._ids,this._dists,0,o-1);const C=new Uint32Array(o);let k=0;for(let N=0,D=-1/0;N<o;N++){const O=this._ids[N],$=this._dists[O];$>D&&(C[k++]=O,D=$)}this.hull=C.subarray(0,k),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(aP(g,y,v,b,E,T)<0){const C=p,k=v,N=b;p=m,v=E,b=T,m=C,E=k,T=N}const S=Ipt(g,y,v,b,E,T);this._cx=S.x,this._cy=S.y;for(let C=0;C<o;C++)this._dists[C]=cB(t[2*C],t[2*C+1],S.x,S.y);Vw(this._ids,this._dists,0,o-1),this._hullStart=h;let A=3;r[h]=n[m]=p,r[p]=n[h]=m,r[m]=n[p]=h,i[h]=0,i[p]=1,i[m]=2,s.fill(-1),s[this._hashKey(g,y)]=h,s[this._hashKey(v,b)]=p,s[this._hashKey(E,T)]=m,this.trianglesLen=0,this._addTriangle(h,p,m,-1,-1,-1);for(let C=0,k,N;C<this._ids.length;C++){const D=this._ids[C],O=t[2*D],$=t[2*D+1];if(C>0&&Math.abs(O-k)<=wce&&Math.abs($-N)<=wce||(k=O,N=$,D===h||D===p||D===m))continue;let F=0;for(let P=0,z=this._hashKey(O,$);P<this._hashSize&&(F=s[(z+P)%this._hashSize],!(F!==-1&&F!==r[F]));P++);F=n[F];let M=F,B;for(;B=r[M],aP(O,$,t[2*M],t[2*M+1],t[2*B],t[2*B+1])>=0;)if(M=B,M===F){M=-1;break}if(M===-1)continue;let U=this._addTriangle(M,D,r[M],-1,-1,i[M]);i[D]=this._legalize(U+2),i[M]=U,A++;let H=r[M];for(;B=r[H],aP(O,$,t[2*H],t[2*H+1],t[2*B],t[2*B+1])<0;)U=this._addTriangle(H,D,B,i[D],-1,i[H]),i[D]=this._legalize(U+2),r[H]=H,A--,H=B;if(M===F)for(;B=n[M],aP(O,$,t[2*B],t[2*B+1],t[2*M],t[2*M+1])<0;)U=this._addTriangle(B,D,M,-1,i[M],i[B]),this._legalize(U+2),i[B]=U,r[M]=M,A--,M=B;this._hullStart=n[D]=M,r[M]=n[H]=D,r[D]=H,s[this._hashKey(O,$)]=D,s[this._hashKey(t[2*M],t[2*M+1])]=M}this.hull=new Uint32Array(A);for(let C=0,k=this._hullStart;C<A;C++)this.hull[C]=k,k=r[k];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(t,n){return Math.floor(Tpt(t-this._cx,n-this._cy)*this._hashSize)%this._hashSize}_legalize(t){const{_triangles:n,_halfedges:r,coords:i}=this;let s=0,o=0;for(;;){const a=r[t],u=t-t%3;if(o=u+(t+2)%3,a===-1){if(s===0)break;t=uP[--s];continue}const l=a-a%3,c=u+(t+1)%3,f=l+(a+2)%3,d=n[o],h=n[t],p=n[c],m=n[f];if(Apt(i[2*d],i[2*d+1],i[2*h],i[2*h+1],i[2*p],i[2*p+1],i[2*m],i[2*m+1])){n[t]=m,n[a]=d;const y=r[f];if(y===-1){let b=this._hullStart;do{if(this._hullTri[b]===f){this._hullTri[b]=t;break}b=this._hullPrev[b]}while(b!==this._hullStart)}this._link(t,y),this._link(a,r[o]),this._link(o,f);const v=l+(a+1)%3;s<uP.length&&(uP[s++]=v)}else{if(s===0)break;t=uP[--s]}}return o}_link(t,n){this._halfedges[t]=n,n!==-1&&(this._halfedges[n]=t)}_addTriangle(t,n,r,i,s,o){const a=this.trianglesLen;return this._triangles[a]=t,this._triangles[a+1]=n,this._triangles[a+2]=r,this._link(a,i),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function Tpt(e,t){const n=e/(Math.abs(e)+Math.abs(t));return(t>0?3-n:1+n)/4}function cB(e,t,n,r){const i=e-n,s=t-r;return i*i+s*s}function Apt(e,t,n,r,i,s,o,a){const u=e-o,l=t-a,c=n-o,f=r-a,d=i-o,h=s-a,p=u*u+l*l,m=c*c+f*f,g=d*d+h*h;return u*(f*g-m*h)-l*(c*g-m*d)+p*(c*h-f*d)<0}function Cpt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=(l*c-a*f)*d,p=(o*f-u*c)*d;return h*h+p*p}function Ipt(e,t,n,r,i,s){const o=n-e,a=r-t,u=i-e,l=s-t,c=o*o+a*a,f=u*u+l*l,d=.5/(o*l-a*u),h=e+(l*c-a*f)*d,p=t+(o*f-u*c)*d;return{x:h,y:p}}function Vw(e,t,n,r){if(r-n<=20)for(let i=n+1;i<=r;i++){const s=e[i],o=t[s];let a=i-1;for(;a>=n&&t[e[a]]>o;)e[a+1]=e[a--];e[a+1]=s}else{const i=n+r>>1;let s=n+1,o=r;XT(e,i,s),t[e[n]]>t[e[r]]&&XT(e,n,r),t[e[s]]>t[e[r]]&&XT(e,s,r),t[e[n]]>t[e[s]]&&XT(e,n,s);const a=e[s],u=t[a];for(;;){do s++;while(t[e[s]]<u);do o--;while(t[e[o]]>u);if(o<s)break;XT(e,s,o)}e[n+1]=e[o],e[o]=a,r-s+1>=o-n?(Vw(e,t,s,r),Vw(e,t,n,o-1)):(Vw(e,t,n,o-1),Vw(e,t,s,r))}}function XT(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function kpt(e){return e[0]}function Rpt(e){return e[1]}const Ece=1e-6;class E1{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(t,n){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(t,n){this._+=`L${this._x1=+t},${this._y1=+n}`}arc(t,n,r){t=+t,n=+n,r=+r;const i=t+r,s=n;if(r<0)throw new Error("negative radius");this._x1===null?this._+=`M${i},${s}`:(Math.abs(this._x1-i)>Ece||Math.abs(this._y1-s)>Ece)&&(this._+="L"+i+","+s),r&&(this._+=`A${r},${r},0,1,1,${t-r},${n}A${r},${r},0,1,1,${this._x1=i},${this._y1=s}`)}rect(t,n,r,i){this._+=`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${+r}v${+i}h${-r}Z`}value(){return this._||null}}class Gz{constructor(){this._=[]}moveTo(t,n){this._.push([t,n])}closePath(){this._.push(this._[0].slice())}lineTo(t,n){this._.push([t,n])}value(){return this._.length?this._:null}}let Npt=class{constructor(t,[n,r,i,s]=[0,0,960,500]){if(!((i=+i)>=(n=+n))||!((s=+s)>=(r=+r)))throw new Error("invalid bounds");this.delaunay=t,this._circumcenters=new Float64Array(t.points.length*2),this.vectors=new Float64Array(t.points.length*2),this.xmax=i,this.xmin=n,this.ymax=s,this.ymin=r,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:t,hull:n,triangles:r},vectors:i}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,r.length/3*2);for(let m=0,g=0,y=r.length,v,b;m<y;m+=3,g+=2){const w=r[m]*2,E=r[m+1]*2,T=r[m+2]*2,S=t[w],A=t[w+1],C=t[E],k=t[E+1],N=t[T],D=t[T+1],O=C-S,$=k-A,F=N-S,M=D-A,B=(O*M-$*F)*2;if(Math.abs(B)<1e-9){if(s===void 0){s=o=0;for(const H of n)s+=t[H*2],o+=t[H*2+1];s/=n.length,o/=n.length}const U=1e9*Math.sign((s-S)*M-(o-A)*F);v=(S+N)/2-U*M,b=(A+D)/2+U*F}else{const U=1/B,H=O*O+$*$,P=F*F+M*M;v=S+(M*H-$*P)*U,b=A+(O*P-F*H)*U}a[g]=v,a[g+1]=b}let u=n[n.length-1],l,c=u*4,f,d=t[2*u],h,p=t[2*u+1];i.fill(0);for(let m=0;m<n.length;++m)u=n[m],l=c,f=d,h=p,c=u*4,d=t[2*u],p=t[2*u+1],i[l+2]=i[c]=h-p,i[l+3]=i[c+1]=d-f}render(t){const n=t==null?t=new E1:void 0,{delaunay:{halfedges:r,inedges:i,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,f=r.length;c<f;++c){const d=r[c];if(d<c)continue;const h=Math.floor(c/3)*2,p=Math.floor(d/3)*2,m=o[h],g=o[h+1],y=o[p],v=o[p+1];this._renderSegment(m,g,y,v,t)}let u,l=s[s.length-1];for(let c=0;c<s.length;++c){u=l,l=s[c];const f=Math.floor(i[l]/3)*2,d=o[f],h=o[f+1],p=u*4,m=this._project(d,h,a[p+2],a[p+3]);m&&this._renderSegment(d,h,m[0],m[1],t)}return n&&n.value()}renderBounds(t){const n=t==null?t=new E1:void 0;return t.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),n&&n.value()}renderCell(t,n){const r=n==null?n=new E1:void 0,i=this._clip(t);if(i===null||!i.length)return;n.moveTo(i[0],i[1]);let s=i.length;for(;i[0]===i[s-2]&&i[1]===i[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(i[o]!==i[o-2]||i[o+1]!==i[o-1])&&n.lineTo(i[o],i[o+1]);return n.closePath(),r&&r.value()}*cellPolygons(){const{delaunay:{points:t}}=this;for(let n=0,r=t.length/2;n<r;++n){const i=this.cellPolygon(n);i&&(i.index=n,yield i)}}cellPolygon(t){const n=new Gz;return this.renderCell(t,n),n.value()}_renderSegment(t,n,r,i,s){let o;const a=this._regioncode(t,n),u=this._regioncode(r,i);a===0&&u===0?(s.moveTo(t,n),s.lineTo(r,i)):(o=this._clipSegment(t,n,r,i,a,u))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(t,n,r){return n=+n,n!==n||(r=+r,r!==r)?!1:this.delaunay._step(t,n,r)===t}*neighbors(t){const n=this._clip(t);if(n)for(const r of this.delaunay.neighbors(t)){const i=this._clip(r);if(i){e:for(let s=0,o=n.length;s<o;s+=2)for(let a=0,u=i.length;a<u;a+=2)if(n[s]===i[a]&&n[s+1]===i[a+1]&&n[(s+2)%o]===i[(a+u-2)%u]&&n[(s+3)%o]===i[(a+u-1)%u]){yield r;break e}}}}_cell(t){const{circumcenters:n,delaunay:{inedges:r,halfedges:i,triangles:s}}=this,o=r[t];if(o===-1)return null;const a=[];let u=o;do{const l=Math.floor(u/3);if(a.push(n[l*2],n[l*2+1]),u=u%3===2?u-2:u+1,s[u]!==t)break;u=i[u]}while(u!==o&&u!==-1);return a}_clip(t){if(t===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const n=this._cell(t);if(n===null)return null;const{vectors:r}=this,i=t*4;return this._simplify(r[i]||r[i+1]?this._clipInfinite(t,n,r[i],r[i+1],r[i+2],r[i+3]):this._clipFinite(t,n))}_clipFinite(t,n){const r=n.length;let i=null,s,o,a=n[r-2],u=n[r-1],l,c=this._regioncode(a,u),f,d=0;for(let h=0;h<r;h+=2)if(s=a,o=u,a=n[h],u=n[h+1],l=c,c=this._regioncode(a,u),l===0&&c===0)f=d,d=0,i?i.push(a,u):i=[a,u];else{let p,m,g,y,v;if(l===0){if((p=this._clipSegment(s,o,a,u,l,c))===null)continue;[m,g,y,v]=p}else{if((p=this._clipSegment(a,u,s,o,c,l))===null)continue;[y,v,m,g]=p,f=d,d=this._edgecode(m,g),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(m,g):i=[m,g]}f=d,d=this._edgecode(y,v),f&&d&&this._edge(t,f,d,i,i.length),i?i.push(y,v):i=[y,v]}if(i)f=d,d=this._edgecode(i[0],i[1]),f&&d&&this._edge(t,f,d,i,i.length);else if(this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return i}_clipSegment(t,n,r,i,s,o){const a=s<o;for(a&&([t,n,r,i,s,o]=[r,i,t,n,o,s]);;){if(s===0&&o===0)return a?[r,i,t,n]:[t,n,r,i];if(s&o)return null;let u,l,c=s||o;c&8?(u=t+(r-t)*(this.ymax-n)/(i-n),l=this.ymax):c&4?(u=t+(r-t)*(this.ymin-n)/(i-n),l=this.ymin):c&2?(l=n+(i-n)*(this.xmax-t)/(r-t),u=this.xmax):(l=n+(i-n)*(this.xmin-t)/(r-t),u=this.xmin),s?(t=u,n=l,s=this._regioncode(t,n)):(r=u,i=l,o=this._regioncode(r,i))}}_clipInfinite(t,n,r,i,s,o){let a=Array.from(n),u;if((u=this._project(a[0],a[1],r,i))&&a.unshift(u[0],u[1]),(u=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(u[0],u[1]),a=this._clipFinite(t,a))for(let l=0,c=a.length,f,d=this._edgecode(a[c-2],a[c-1]);l<c;l+=2)f=d,d=this._edgecode(a[l],a[l+1]),f&&d&&(l=this._edge(t,f,d,a,l),c=a.length);else this.contains(t,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(t,n,r,i,s){for(;n!==r;){let o,a;switch(n){case 5:n=4;continue;case 4:n=6,o=this.xmax,a=this.ymin;break;case 6:n=2;continue;case 2:n=10,o=this.xmax,a=this.ymax;break;case 10:n=8;continue;case 8:n=9,o=this.xmin,a=this.ymax;break;case 9:n=1;continue;case 1:n=5,o=this.xmin,a=this.ymin;break}(i[s]!==o||i[s+1]!==a)&&this.contains(t,o,a)&&(i.splice(s,0,o,a),s+=2)}return s}_project(t,n,r,i){let s=1/0,o,a,u;if(i<0){if(n<=this.ymin)return null;(o=(this.ymin-n)/i)<s&&(u=this.ymin,a=t+(s=o)*r)}else if(i>0){if(n>=this.ymax)return null;(o=(this.ymax-n)/i)<s&&(u=this.ymax,a=t+(s=o)*r)}if(r>0){if(t>=this.xmax)return null;(o=(this.xmax-t)/r)<s&&(a=this.xmax,u=n+(s=o)*i)}else if(r<0){if(t<=this.xmin)return null;(o=(this.xmin-t)/r)<s&&(a=this.xmin,u=n+(s=o)*i)}return[a,u]}_edgecode(t,n){return(t===this.xmin?1:t===this.xmax?2:0)|(n===this.ymin?4:n===this.ymax?8:0)}_regioncode(t,n){return(t<this.xmin?1:t>this.xmax?2:0)|(n<this.ymin?4:n>this.ymax?8:0)}_simplify(t){if(t&&t.length>4){for(let n=0;n<t.length;n+=2){const r=(n+2)%t.length,i=(n+4)%t.length;(t[n]===t[r]&&t[r]===t[i]||t[n+1]===t[r+1]&&t[r+1]===t[i+1])&&(t.splice(r,2),n-=2)}t.length||(t=null)}return t}};const Ppt=2*Math.PI,W_=Math.pow;function Opt(e){return e[0]}function Dpt(e){return e[1]}function $pt(e){const{triangles:t,coords:n}=e;for(let r=0;r<t.length;r+=3){const i=2*t[r],s=2*t[r+1],o=2*t[r+2];if((n[o]-n[i])*(n[s+1]-n[i+1])-(n[s]-n[i])*(n[o+1]-n[i+1])>1e-10)return!1}return!0}function Mpt(e,t,n){return[e+Math.sin(e+t)*n,t+Math.cos(e-t)*n]}class EX{static from(t,n=Opt,r=Dpt,i){return new EX("length"in t?Lpt(t,n,r,i):Float64Array.from(Fpt(t,n,r,i)))}constructor(t){this._delaunator=new Y$(t),this.inedges=new Int32Array(t.length/2),this._hullIndex=new Int32Array(t.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const t=this._delaunator,n=this.points;if(t.hull&&t.hull.length>2&&$pt(t)){this.collinear=Int32Array.from({length:n.length/2},(d,h)=>h).sort((d,h)=>n[2*d]-n[2*h]||n[2*d+1]-n[2*h+1]);const u=this.collinear[0],l=this.collinear[this.collinear.length-1],c=[n[2*u],n[2*u+1],n[2*l],n[2*l+1]],f=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let d=0,h=n.length/2;d<h;++d){const p=Mpt(n[2*d],n[2*d+1],f);n[2*d]=p[0],n[2*d+1]=p[1]}this._delaunator=new Y$(n)}else delete this.collinear;const r=this.halfedges=this._delaunator.halfedges,i=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let u=0,l=r.length;u<l;++u){const c=s[u%3===2?u-2:u+1];(r[u]===-1||o[c]===-1)&&(o[c]=u)}for(let u=0,l=i.length;u<l;++u)a[i[u]]=u;i.length<=2&&i.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=i[0],o[i[0]]=1,i.length===2&&(o[i[1]]=0,this.triangles[1]=i[1],this.triangles[2]=i[1]))}voronoi(t){return new Npt(this,t)}*neighbors(t){const{inedges:n,hull:r,_hullIndex:i,halfedges:s,triangles:o,collinear:a}=this;if(a){const f=a.indexOf(t);f>0&&(yield a[f-1]),f<a.length-1&&(yield a[f+1]);return}const u=n[t];if(u===-1)return;let l=u,c=-1;do{if(yield c=o[l],l=l%3===2?l-2:l+1,o[l]!==t)return;if(l=s[l],l===-1){const f=r[(i[t]+1)%r.length];f!==c&&(yield f);return}}while(l!==u)}find(t,n,r=0){if(t=+t,t!==t||(n=+n,n!==n))return-1;const i=r;let s;for(;(s=this._step(r,t,n))>=0&&s!==r&&s!==i;)r=s;return s}_step(t,n,r){const{inedges:i,hull:s,_hullIndex:o,halfedges:a,triangles:u,points:l}=this;if(i[t]===-1||!l.length)return(t+1)%(l.length>>1);let c=t,f=W_(n-l[t*2],2)+W_(r-l[t*2+1],2);const d=i[t];let h=d;do{let p=u[h];const m=W_(n-l[p*2],2)+W_(r-l[p*2+1],2);if(m<f&&(f=m,c=p),h=h%3===2?h-2:h+1,u[h]!==t)break;if(h=a[h],h===-1){if(h=s[(o[t]+1)%s.length],h!==p&&W_(n-l[h*2],2)+W_(r-l[h*2+1],2)<f)return h;break}}while(h!==d);return c}render(t){const n=t==null?t=new E1:void 0,{points:r,halfedges:i,triangles:s}=this;for(let o=0,a=i.length;o<a;++o){const u=i[o];if(u<o)continue;const l=s[o]*2,c=s[u]*2;t.moveTo(r[l],r[l+1]),t.lineTo(r[c],r[c+1])}return this.renderHull(t),n&&n.value()}renderPoints(t,n){n===void 0&&(!t||typeof t.moveTo!="function")&&(n=t,t=null),n=n==null?2:+n;const r=t==null?t=new E1:void 0,{points:i}=this;for(let s=0,o=i.length;s<o;s+=2){const a=i[s],u=i[s+1];t.moveTo(a+n,u),t.arc(a,u,n,0,Ppt)}return r&&r.value()}renderHull(t){const n=t==null?t=new E1:void 0,{hull:r,points:i}=this,s=r[0]*2,o=r.length;t.moveTo(i[s],i[s+1]);for(let a=1;a<o;++a){const u=2*r[a];t.lineTo(i[u],i[u+1])}return t.closePath(),n&&n.value()}hullPolygon(){const t=new Gz;return this.renderHull(t),t.value()}renderTriangle(t,n){const r=n==null?n=new E1:void 0,{points:i,triangles:s}=this,o=s[t*=3]*2,a=s[t+1]*2,u=s[t+2]*2;return n.moveTo(i[o],i[o+1]),n.lineTo(i[a],i[a+1]),n.lineTo(i[u],i[u+1]),n.closePath(),r&&r.value()}*trianglePolygons(){const{triangles:t}=this;for(let n=0,r=t.length/3;n<r;++n)yield this.trianglePolygon(n)}trianglePolygon(t){const n=new Gz;return this.renderTriangle(t,n),n.value()}}function Lpt(e,t,n,r){const i=e.length,s=new Float64Array(i*2);for(let o=0;o<i;++o){const a=e[o];s[o*2]=t.call(r,a,o,e),s[o*2+1]=n.call(r,a,o,e)}return s}function*Fpt(e,t,n,r){let i=0;for(const s of e)yield t.call(r,s,i,e),yield n.call(r,s,i,e),++i}var xce={},fB={},dB=34,QT=10,hB=13;function SAe(e){return new Function("d","return {"+e.map(function(t,n){return JSON.stringify(t)+": d["+n+'] || ""'}).join(",")+"}")}function jpt(e,t){var n=SAe(e);return function(r,i){return t(n(r),i,e)}}function Sce(e){var t=Object.create(null),n=[];return e.forEach(function(r){for(var i in r)i in t||n.push(t[i]=i)}),n}function wu(e,t){var n=e+"",r=n.length;return r<t?new Array(t-r+1).join(0)+n:n}function Bpt(e){return e<0?"-"+wu(-e,6):e>9999?"+"+wu(e,6):wu(e,4)}function Upt(e){var t=e.getUTCHours(),n=e.getUTCMinutes(),r=e.getUTCSeconds(),i=e.getUTCMilliseconds();return isNaN(e)?"Invalid Date":Bpt(e.getUTCFullYear())+"-"+wu(e.getUTCMonth()+1,2)+"-"+wu(e.getUTCDate(),2)+(i?"T"+wu(t,2)+":"+wu(n,2)+":"+wu(r,2)+"."+wu(i,3)+"Z":r?"T"+wu(t,2)+":"+wu(n,2)+":"+wu(r,2)+"Z":n||t?"T"+wu(t,2)+":"+wu(n,2)+"Z":"")}function TAe(e){var t=new RegExp('["'+e+`
\r]`),n=e.charCodeAt(0);function r(f,d){var h,p,m=i(f,function(g,y){if(h)return h(g,y-1);p=g,h=d?jpt(g,d):SAe(g)});return m.columns=p||[],m}function i(f,d){var h=[],p=f.length,m=0,g=0,y,v=p<=0,b=!1;f.charCodeAt(p-1)===QT&&--p,f.charCodeAt(p-1)===hB&&--p;function w(){if(v)return fB;if(b)return b=!1,xce;var T,S=m,A;if(f.charCodeAt(S)===dB){for(;m++<p&&f.charCodeAt(m)!==dB||f.charCodeAt(++m)===dB;);return(T=m)>=p?v=!0:(A=f.charCodeAt(m++))===QT?b=!0:A===hB&&(b=!0,f.charCodeAt(m)===QT&&++m),f.slice(S+1,T-1).replace(/""/g,'"')}for(;m<p;){if((A=f.charCodeAt(T=m++))===QT)b=!0;else if(A===hB)b=!0,f.charCodeAt(m)===QT&&++m;else if(A!==n)continue;return f.slice(S,T)}return v=!0,f.slice(S,p)}for(;(y=w())!==fB;){for(var E=[];y!==xce&&y!==fB;)E.push(y),y=w();d&&(E=d(E,g++))==null||h.push(E)}return h}function s(f,d){return f.map(function(h){return d.map(function(p){return c(h[p])}).join(e)})}function o(f,d){return d==null&&(d=Sce(f)),[d.map(c).join(e)].concat(s(f,d)).join(`
`)}function a(f,d){return d==null&&(d=Sce(f)),s(f,d).join(`
`)}function u(f){return f.map(l).join(`
`)}function l(f){return f.map(c).join(e)}function c(f){return f==null?"":f instanceof Date?Upt(f):t.test(f+="")?'"'+f.replace(/"/g,'""')+'"':f}return{parse:r,parseRows:i,format:o,formatBody:a,formatRows:u,formatRow:l,formatValue:c}}var zpt=TAe(","),Vpt=zpt.parse;function Hpt(e){if(!e.ok)throw new Error(e.status+" "+e.statusText);return e.text()}function qpt(e,t){return fetch(e,t).then(Hpt)}function Wpt(e){return function(t,n,r){return arguments.length===2&&typeof n=="function"&&(r=n,n=void 0),qpt(t,n).then(function(i){return e(i,r)})}}var xX=Wpt(Vpt);function Gpt(e,t){var n,r=1;e==null&&(e=0),t==null&&(t=0);function i(){var s,o=n.length,a,u=0,l=0;for(s=0;s<o;++s)a=n[s],u+=a.x,l+=a.y;for(u=(u/o-e)*r,l=(l/o-t)*r,s=0;s<o;++s)a=n[s],a.x-=u,a.y-=l}return i.initialize=function(s){n=s},i.x=function(s){return arguments.length?(e=+s,i):e},i.y=function(s){return arguments.length?(t=+s,i):t},i.strength=function(s){return arguments.length?(r=+s,i):r},i}function Ypt(e){const t=+this._x.call(null,e),n=+this._y.call(null,e);return AAe(this.cover(t,n),t,n,e)}function AAe(e,t,n,r){if(isNaN(t)||isNaN(n))return e;var i,s=e._root,o={data:r},a=e._x0,u=e._y0,l=e._x1,c=e._y1,f,d,h,p,m,g,y,v;if(!s)return e._root=o,e;for(;s.length;)if((m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d,i=s,!(s=s[y=g<<1|m]))return i[y]=o,e;if(h=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===h&&n===p)return o.next=s,i?i[y]=o:e._root=o,e;do i=i?i[y]=new Array(4):e._root=new Array(4),(m=t>=(f=(a+l)/2))?a=f:l=f,(g=n>=(d=(u+c)/2))?u=d:c=d;while((y=g<<1|m)===(v=(p>=d)<<1|h>=f));return i[v]=s,i[y]=o,e}function Kpt(e){var t,n,r=e.length,i,s,o=new Array(r),a=new Array(r),u=1/0,l=1/0,c=-1/0,f=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,t=e[n]))||isNaN(s=+this._y.call(null,t))||(o[n]=i,a[n]=s,i<u&&(u=i),i>c&&(c=i),s<l&&(l=s),s>f&&(f=s));if(u>c||l>f)return this;for(this.cover(u,l).cover(c,f),n=0;n<r;++n)AAe(this,o[n],a[n],e[n]);return this}function Xpt(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(e))+1,s=(r=Math.floor(t))+1;else{for(var o=i-n||1,a=this._root,u,l;n>e||e>=i||r>t||t>=s;)switch(l=(t<r)<<1|e<n,u=new Array(4),u[l]=a,a=u,o*=2,l){case 0:i=n+o,s=r+o;break;case 1:n=i-o,s=r+o;break;case 2:i=n+o,r=s-o;break;case 3:n=i-o,r=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Qpt(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function Jpt(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function qa(e,t,n,r,i){this.node=e,this.x0=t,this.y0=n,this.x1=r,this.y1=i}function Zpt(e,t,n){var r,i=this._x0,s=this._y0,o,a,u,l,c=this._x1,f=this._y1,d=[],h=this._root,p,m;for(h&&d.push(new qa(h,i,s,c,f)),n==null?n=1/0:(i=e-n,s=t-n,c=e+n,f=t+n,n*=n);p=d.pop();)if(!(!(h=p.node)||(o=p.x0)>c||(a=p.y0)>f||(u=p.x1)<i||(l=p.y1)<s))if(h.length){var g=(o+u)/2,y=(a+l)/2;d.push(new qa(h[3],g,y,u,l),new qa(h[2],o,y,g,l),new qa(h[1],g,a,u,y),new qa(h[0],o,a,g,y)),(m=(t>=y)<<1|e>=g)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-m],d[d.length-1-m]=p)}else{var v=e-+this._x.call(null,h.data),b=t-+this._y.call(null,h.data),w=v*v+b*b;if(w<n){var E=Math.sqrt(n=w);i=e-E,s=t-E,c=e+E,f=t+E,r=h.data}}return r}function emt(e){if(isNaN(c=+this._x.call(null,e))||isNaN(f=+this._y.call(null,e)))return this;var t,n=this._root,r,i,s,o=this._x0,a=this._y0,u=this._x1,l=this._y1,c,f,d,h,p,m,g,y;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+u)/2))?o=d:u=d,(m=f>=(h=(a+l)/2))?a=h:l=h,t=n,!(n=n[g=m<<1|p]))return this;if(!n.length)break;(t[g+1&3]||t[g+2&3]||t[g+3&3])&&(r=t,y=g)}for(;n.data!==e;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):t?(s?t[g]=s:delete t[g],(n=t[0]||t[1]||t[2]||t[3])&&n===(t[3]||t[2]||t[1]||t[0])&&!n.length&&(r?r[y]=n:this._root=n),this):(this._root=s,this)}function tmt(e){for(var t=0,n=e.length;t<n;++t)this.remove(e[t]);return this}function nmt(){return this._root}function rmt(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function imt(e){var t=[],n,r=this._root,i,s,o,a,u;for(r&&t.push(new qa(r,this._x0,this._y0,this._x1,this._y1));n=t.pop();)if(!e(r=n.node,s=n.x0,o=n.y0,a=n.x1,u=n.y1)&&r.length){var l=(s+a)/2,c=(o+u)/2;(i=r[3])&&t.push(new qa(i,l,c,a,u)),(i=r[2])&&t.push(new qa(i,s,c,l,u)),(i=r[1])&&t.push(new qa(i,l,o,a,c)),(i=r[0])&&t.push(new qa(i,s,o,l,c))}return this}function smt(e){var t=[],n=[],r;for(this._root&&t.push(new qa(this._root,this._x0,this._y0,this._x1,this._y1));r=t.pop();){var i=r.node;if(i.length){var s,o=r.x0,a=r.y0,u=r.x1,l=r.y1,c=(o+u)/2,f=(a+l)/2;(s=i[0])&&t.push(new qa(s,o,a,c,f)),(s=i[1])&&t.push(new qa(s,c,a,u,f)),(s=i[2])&&t.push(new qa(s,o,f,c,l)),(s=i[3])&&t.push(new qa(s,c,f,u,l))}n.push(r)}for(;r=n.pop();)e(r.node,r.x0,r.y0,r.x1,r.y1);return this}function omt(e){return e[0]}function amt(e){return arguments.length?(this._x=e,this):this._x}function umt(e){return e[1]}function lmt(e){return arguments.length?(this._y=e,this):this._y}function SX(e,t,n){var r=new TX(t??omt,n??umt,NaN,NaN,NaN,NaN);return e==null?r:r.addAll(e)}function TX(e,t,n,r,i,s){this._x=e,this._y=t,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Tce(e){for(var t={data:e.data},n=t;e=e.next;)n=n.next={data:e.data};return t}var lu=SX.prototype=TX.prototype;lu.copy=function(){var e=new TX(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,n,r;if(!t)return e;if(!t.length)return e._root=Tce(t),e;for(n=[{source:t,target:e._root=new Array(4)}];t=n.pop();)for(var i=0;i<4;++i)(r=t.source[i])&&(r.length?n.push({source:r,target:t.target[i]=new Array(4)}):t.target[i]=Tce(r));return e};lu.add=Ypt;lu.addAll=Kpt;lu.cover=Xpt;lu.data=Qpt;lu.extent=Jpt;lu.find=Zpt;lu.remove=emt;lu.removeAll=tmt;lu.root=nmt;lu.size=rmt;lu.visit=imt;lu.visitAfter=smt;lu.x=amt;lu.y=lmt;function Ya(e){return function(){return e}}function l0(e){return(e()-.5)*1e-6}function cmt(e){return e.x+e.vx}function fmt(e){return e.y+e.vy}function dmt(e){var t,n,r,i=1,s=1;typeof e!="function"&&(e=Ya(e==null?1:+e));function o(){for(var l,c=t.length,f,d,h,p,m,g,y=0;y<s;++y)for(f=SX(t,cmt,fmt).visitAfter(a),l=0;l<c;++l)d=t[l],m=n[d.index],g=m*m,h=d.x+d.vx,p=d.y+d.vy,f.visit(v);function v(b,w,E,T,S){var A=b.data,C=b.r,k=m+C;if(A){if(A.index>d.index){var N=h-A.x-A.vx,D=p-A.y-A.vy,O=N*N+D*D;O<k*k&&(N===0&&(N=l0(r),O+=N*N),D===0&&(D=l0(r),O+=D*D),O=(k-(O=Math.sqrt(O)))/O*i,d.vx+=(N*=O)*(k=(C*=C)/(g+C)),d.vy+=(D*=O)*k,A.vx-=N*(k=1-k),A.vy-=D*k)}return}return w>h+k||T<h-k||E>p+k||S<p-k}}function a(l){if(l.data)return l.r=n[l.data.index];for(var c=l.r=0;c<4;++c)l[c]&&l[c].r>l.r&&(l.r=l[c].r)}function u(){if(t){var l,c=t.length,f;for(n=new Array(c),l=0;l<c;++l)f=t[l],n[f.index]=+e(f,l,t)}}return o.initialize=function(l,c){t=l,r=c,u()},o.iterations=function(l){return arguments.length?(s=+l,o):s},o.strength=function(l){return arguments.length?(i=+l,o):i},o.radius=function(l){return arguments.length?(e=typeof l=="function"?l:Ya(+l),u(),o):e},o}function hmt(e){return e.index}function Ace(e,t){var n=e.get(t);if(!n)throw new Error("node not found: "+t);return n}function pmt(e){var t=hmt,n=f,r,i=Ya(30),s,o,a,u,l,c=1;e==null&&(e=[]);function f(g){return 1/Math.min(a[g.source.index],a[g.target.index])}function d(g){for(var y=0,v=e.length;y<c;++y)for(var b=0,w,E,T,S,A,C,k;b<v;++b)w=e[b],E=w.source,T=w.target,S=T.x+T.vx-E.x-E.vx||l0(l),A=T.y+T.vy-E.y-E.vy||l0(l),C=Math.sqrt(S*S+A*A),C=(C-s[b])/C*g*r[b],S*=C,A*=C,T.vx-=S*(k=u[b]),T.vy-=A*k,E.vx+=S*(k=1-k),E.vy+=A*k}function h(){if(o){var g,y=o.length,v=e.length,b=new Map(o.map((E,T)=>[t(E,T,o),E])),w;for(g=0,a=new Array(y);g<v;++g)w=e[g],w.index=g,typeof w.source!="object"&&(w.source=Ace(b,w.source)),typeof w.target!="object"&&(w.target=Ace(b,w.target)),a[w.source.index]=(a[w.source.index]||0)+1,a[w.target.index]=(a[w.target.index]||0)+1;for(g=0,u=new Array(v);g<v;++g)w=e[g],u[g]=a[w.source.index]/(a[w.source.index]+a[w.target.index]);r=new Array(v),p(),s=new Array(v),m()}}function p(){if(o)for(var g=0,y=e.length;g<y;++g)r[g]=+n(e[g],g,e)}function m(){if(o)for(var g=0,y=e.length;g<y;++g)s[g]=+i(e[g],g,e)}return d.initialize=function(g,y){o=g,l=y,h()},d.links=function(g){return arguments.length?(e=g,h(),d):e},d.id=function(g){return arguments.length?(t=g,d):t},d.iterations=function(g){return arguments.length?(c=+g,d):c},d.strength=function(g){return arguments.length?(n=typeof g=="function"?g:Ya(+g),p(),d):n},d.distance=function(g){return arguments.length?(i=typeof g=="function"?g:Ya(+g),m(),d):i},d}const mmt=1664525,gmt=1013904223,Cce=4294967296;function ymt(){let e=1;return()=>(e=(mmt*e+gmt)%Cce)/Cce}function vmt(e){return e.x}function bmt(e){return e.y}var _mt=10,wmt=Math.PI*(3-Math.sqrt(5));function Emt(e){var t,n=1,r=.001,i=1-Math.pow(r,1/300),s=0,o=.6,a=new Map,u=yX(f),l=eF("tick","end"),c=ymt();e==null&&(e=[]);function f(){d(),l.call("tick",t),n<r&&(u.stop(),l.call("end",t))}function d(m){var g,y=e.length,v;m===void 0&&(m=1);for(var b=0;b<m;++b)for(n+=(s-n)*i,a.forEach(function(w){w(n)}),g=0;g<y;++g)v=e[g],v.fx==null?v.x+=v.vx*=o:(v.x=v.fx,v.vx=0),v.fy==null?v.y+=v.vy*=o:(v.y=v.fy,v.vy=0);return t}function h(){for(var m=0,g=e.length,y;m<g;++m){if(y=e[m],y.index=m,y.fx!=null&&(y.x=y.fx),y.fy!=null&&(y.y=y.fy),isNaN(y.x)||isNaN(y.y)){var v=_mt*Math.sqrt(.5+m),b=m*wmt;y.x=v*Math.cos(b),y.y=v*Math.sin(b)}(isNaN(y.vx)||isNaN(y.vy))&&(y.vx=y.vy=0)}}function p(m){return m.initialize&&m.initialize(e,c),m}return h(),t={tick:d,restart:function(){return u.restart(f),t},stop:function(){return u.stop(),t},nodes:function(m){return arguments.length?(e=m,h(),a.forEach(p),t):e},alpha:function(m){return arguments.length?(n=+m,t):n},alphaMin:function(m){return arguments.length?(r=+m,t):r},alphaDecay:function(m){return arguments.length?(i=+m,t):+i},alphaTarget:function(m){return arguments.length?(s=+m,t):s},velocityDecay:function(m){return arguments.length?(o=1-m,t):1-o},randomSource:function(m){return arguments.length?(c=m,a.forEach(p),t):c},force:function(m,g){return arguments.length>1?(g==null?a.delete(m):a.set(m,p(g)),t):a.get(m)},find:function(m,g,y){var v=0,b=e.length,w,E,T,S,A;for(y==null?y=1/0:y*=y,v=0;v<b;++v)S=e[v],w=m-S.x,E=g-S.y,T=w*w+E*E,T<y&&(A=S,y=T);return A},on:function(m,g){return arguments.length>1?(l.on(m,g),t):l.on(m)}}}function xmt(){var e,t,n,r,i=Ya(-30),s,o=1,a=1/0,u=.81;function l(h){var p,m=e.length,g=SX(e,vmt,bmt).visitAfter(f);for(r=h,p=0;p<m;++p)t=e[p],g.visit(d)}function c(){if(e){var h,p=e.length,m;for(s=new Array(p),h=0;h<p;++h)m=e[h],s[m.index]=+i(m,h,e)}}function f(h){var p=0,m,g,y=0,v,b,w;if(h.length){for(v=b=w=0;w<4;++w)(m=h[w])&&(g=Math.abs(m.value))&&(p+=m.value,y+=g,v+=g*m.x,b+=g*m.y);h.x=v/y,h.y=b/y}else{m=h,m.x=m.data.x,m.y=m.data.y;do p+=s[m.data.index];while(m=m.next)}h.value=p}function d(h,p,m,g){if(!h.value)return!0;var y=h.x-t.x,v=h.y-t.y,b=g-p,w=y*y+v*v;if(b*b/u<w)return w<a&&(y===0&&(y=l0(n),w+=y*y),v===0&&(v=l0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)),t.vx+=y*h.value*r/w,t.vy+=v*h.value*r/w),!0;if(h.length||w>=a)return;(h.data!==t||h.next)&&(y===0&&(y=l0(n),w+=y*y),v===0&&(v=l0(n),w+=v*v),w<o&&(w=Math.sqrt(o*w)));do h.data!==t&&(b=s[h.data.index]*r/w,t.vx+=y*b,t.vy+=v*b);while(h=h.next)}return l.initialize=function(h,p){e=h,n=p,c()},l.strength=function(h){return arguments.length?(i=typeof h=="function"?h:Ya(+h),c(),l):i},l.distanceMin=function(h){return arguments.length?(o=h*h,l):Math.sqrt(o)},l.distanceMax=function(h){return arguments.length?(a=h*h,l):Math.sqrt(a)},l.theta=function(h){return arguments.length?(u=h*h,l):Math.sqrt(u)},l}function Smt(e){var t=Ya(.1),n,r,i;typeof e!="function"&&(e=Ya(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vx+=(i[u]-c.x)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ya(+a),o(),s):t},s.x=function(a){return arguments.length?(e=typeof a=="function"?a:Ya(+a),o(),s):e},s}function Tmt(e){var t=Ya(.1),n,r,i;typeof e!="function"&&(e=Ya(e==null?0:+e));function s(a){for(var u=0,l=n.length,c;u<l;++u)c=n[u],c.vy+=(i[u]-c.y)*r[u]*a}function o(){if(n){var a,u=n.length;for(r=new Array(u),i=new Array(u),a=0;a<u;++a)r[a]=isNaN(i[a]=+e(n[a],a,n))?0:+t(n[a],a,n)}}return s.initialize=function(a){n=a,o()},s.strength=function(a){return arguments.length?(t=typeof a=="function"?a:Ya(+a),o(),s):t},s.y=function(a){return arguments.length?(e=typeof a=="function"?a:Ya(+a),o(),s):e},s}function Amt(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function K$(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function ux(e){return e=K$(Math.abs(e)),e?e[1]:NaN}function Cmt(e,t){return function(n,r){for(var i=n.length,s=[],o=0,a=e[0],u=0;i>0&&a>0&&(u+a+1>r&&(a=Math.max(1,r-u)),s.push(n.substring(i-=a,i+a)),!((u+=a+1)>r));)a=e[o=(o+1)%e.length];return s.reverse().join(t)}}function Imt(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var kmt=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function cb(e){if(!(t=kmt.exec(e)))throw new Error("invalid format: "+e);var t;return new AX({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}cb.prototype=AX.prototype;function AX(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}AX.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Rmt(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var CAe;function Nmt(e,t){var n=K$(e,t);if(!n)return e+"";var r=n[0],i=n[1],s=i-(CAe=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return s===o?r:s>o?r+new Array(s-o+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+K$(e,Math.max(0,t+s-1))[0]}function Ice(e,t){var n=K$(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const kce={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Amt,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>Ice(e*100,t),r:Ice,s:Nmt,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Rce(e){return e}var Nce=Array.prototype.map,Pce=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function IAe(e){var t=e.grouping===void 0||e.thousands===void 0?Rce:Cmt(Nce.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",s=e.numerals===void 0?Rce:Imt(Nce.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",a=e.minus===void 0?"":e.minus+"",u=e.nan===void 0?"NaN":e.nan+"";function l(f){f=cb(f);var d=f.fill,h=f.align,p=f.sign,m=f.symbol,g=f.zero,y=f.width,v=f.comma,b=f.precision,w=f.trim,E=f.type;E==="n"?(v=!0,E="g"):kce[E]||(b===void 0&&(b=12),w=!0,E="g"),(g||d==="0"&&h==="=")&&(g=!0,d="0",h="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(E)?"0"+E.toLowerCase():"",S=m==="$"?r:/[%p]/.test(E)?o:"",A=kce[E],C=/[defgprs%]/.test(E);b=b===void 0?6:/[gprs]/.test(E)?Math.max(1,Math.min(21,b)):Math.max(0,Math.min(20,b));function k(N){var D=T,O=S,$,F,M;if(E==="c")O=A(N)+O,N="";else{N=+N;var B=N<0||1/N<0;if(N=isNaN(N)?u:A(Math.abs(N),b),w&&(N=Rmt(N)),B&&+N==0&&p!=="+"&&(B=!1),D=(B?p==="("?p:a:p==="-"||p==="("?"":p)+D,O=(E==="s"?Pce[8+CAe/3]:"")+O+(B&&p==="("?")":""),C){for($=-1,F=N.length;++$<F;)if(M=N.charCodeAt($),48>M||M>57){O=(M===46?i+N.slice($+1):N.slice($))+O,N=N.slice(0,$);break}}}v&&!g&&(N=t(N,1/0));var U=D.length+N.length+O.length,H=U<y?new Array(y-U+1).join(d):"";switch(v&&g&&(N=t(H+N,H.length?y-O.length:1/0),H=""),h){case"<":N=D+N+O+H;break;case"=":N=D+H+N+O;break;case"^":N=H.slice(0,U=H.length>>1)+D+N+O+H.slice(U);break;default:N=H+D+N+O;break}return s(N)}return k.toString=function(){return f+""},k}function c(f,d){var h=l((f=cb(f),f.type="f",f)),p=Math.max(-8,Math.min(8,Math.floor(ux(d)/3)))*3,m=Math.pow(10,-p),g=Pce[8+p/3];return function(y){return h(m*y)+g}}return{format:l,formatPrefix:c}}var lP,OS,CX;Pmt({thousands:",",grouping:[3],currency:["$",""]});function Pmt(e){return lP=IAe(e),OS=lP.format,CX=lP.formatPrefix,lP}function kAe(e){return Math.max(0,-ux(Math.abs(e)))}function RAe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(ux(t)/3)))*3-ux(Math.abs(e)))}function NAe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,ux(t)-ux(e))+1}var Bt=1e-6,X$=1e-12,On=Math.PI,Qi=On/2,Q$=On/4,nu=On*2,as=180/On,Nn=On/180,Jn=Math.abs,DS=Math.atan,jc=Math.atan2,zt=Math.cos,cP=Math.ceil,PAe=Math.exp,Yz=Math.hypot,J$=Math.log,pB=Math.pow,Ft=Math.sin,Ic=Math.sign||function(e){return e>0?1:e<0?-1:0},ru=Math.sqrt,IX=Math.tan;function OAe(e){return e>1?0:e<-1?On:Math.acos(e)}function tl(e){return e>1?Qi:e<-1?-Qi:Math.asin(e)}function Oo(){}function Z$(e,t){e&&Dce.hasOwnProperty(e.type)&&Dce[e.type](e,t)}var Oce={Feature:function(e,t){Z$(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)Z$(n[r].geometry,t)}},Dce={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){Kz(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)Kz(n[r],t,0)},Polygon:function(e,t){$ce(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)$ce(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)Z$(n[r],t)}};function Kz(e,t,n){var r=-1,i=e.length-n,s;for(t.lineStart();++r<i;)s=e[r],t.point(s[0],s[1],s[2]);t.lineEnd()}function $ce(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)Kz(e[n],t,1);t.polygonEnd()}function Up(e,t){e&&Oce.hasOwnProperty(e.type)?Oce[e.type](e,t):Z$(e,t)}var eM=new Qa,tM=new Qa,DAe,$Ae,Xz,Qz,Jz,Rh={point:Oo,lineStart:Oo,lineEnd:Oo,polygonStart:function(){eM=new Qa,Rh.lineStart=Omt,Rh.lineEnd=Dmt},polygonEnd:function(){var e=+eM;tM.add(e<0?nu+e:e),this.lineStart=this.lineEnd=this.point=Oo},sphere:function(){tM.add(nu)}};function Omt(){Rh.point=$mt}function Dmt(){MAe(DAe,$Ae)}function $mt(e,t){Rh.point=MAe,DAe=e,$Ae=t,e*=Nn,t*=Nn,Xz=e,Qz=zt(t=t/2+Q$),Jz=Ft(t)}function MAe(e,t){e*=Nn,t*=Nn,t=t/2+Q$;var n=e-Xz,r=n>=0?1:-1,i=r*n,s=zt(t),o=Ft(t),a=Jz*o,u=Qz*s+a*zt(i),l=a*r*Ft(i);eM.add(jc(l,u)),Xz=e,Qz=s,Jz=o}function Mmt(e){return tM=new Qa,Up(e,Rh),tM*2}function nM(e){return[jc(e[1],e[0]),tl(e[2])]}function fb(e){var t=e[0],n=e[1],r=zt(n);return[r*zt(t),r*Ft(t),Ft(n)]}function fP(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function lx(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function mB(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function dP(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function rM(e){var t=ru(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}var Di,Nu,Vi,El,Hv,LAe,FAe,gE,WC,zg,Om,Mp={point:Zz,lineStart:Mce,lineEnd:Lce,polygonStart:function(){Mp.point=BAe,Mp.lineStart=Lmt,Mp.lineEnd=Fmt,WC=new Qa,Rh.polygonStart()},polygonEnd:function(){Rh.polygonEnd(),Mp.point=Zz,Mp.lineStart=Mce,Mp.lineEnd=Lce,eM<0?(Di=-(Vi=180),Nu=-(El=90)):WC>Bt?El=90:WC<-Bt&&(Nu=-90),Om[0]=Di,Om[1]=Vi},sphere:function(){Di=-(Vi=180),Nu=-(El=90)}};function Zz(e,t){zg.push(Om=[Di=e,Vi=e]),t<Nu&&(Nu=t),t>El&&(El=t)}function jAe(e,t){var n=fb([e*Nn,t*Nn]);if(gE){var r=lx(gE,n),i=[r[1],-r[0],0],s=lx(i,r);rM(s),s=nM(s);var o=e-Hv,a=o>0?1:-1,u=s[0]*as*a,l,c=Jn(o)>180;c^(a*Hv<u&&u<a*e)?(l=s[1]*as,l>El&&(El=l)):(u=(u+360)%360-180,c^(a*Hv<u&&u<a*e)?(l=-s[1]*as,l<Nu&&(Nu=l)):(t<Nu&&(Nu=t),t>El&&(El=t))),c?e<Hv?_l(Di,e)>_l(Di,Vi)&&(Vi=e):_l(e,Vi)>_l(Di,Vi)&&(Di=e):Vi>=Di?(e<Di&&(Di=e),e>Vi&&(Vi=e)):e>Hv?_l(Di,e)>_l(Di,Vi)&&(Vi=e):_l(e,Vi)>_l(Di,Vi)&&(Di=e)}else zg.push(Om=[Di=e,Vi=e]);t<Nu&&(Nu=t),t>El&&(El=t),gE=n,Hv=e}function Mce(){Mp.point=jAe}function Lce(){Om[0]=Di,Om[1]=Vi,Mp.point=Zz,gE=null}function BAe(e,t){if(gE){var n=e-Hv;WC.add(Jn(n)>180?n+(n>0?360:-360):n)}else LAe=e,FAe=t;Rh.point(e,t),jAe(e,t)}function Lmt(){Rh.lineStart()}function Fmt(){BAe(LAe,FAe),Rh.lineEnd(),Jn(WC)>Bt&&(Di=-(Vi=180)),Om[0]=Di,Om[1]=Vi,gE=null}function _l(e,t){return(t-=e)<0?t+360:t}function jmt(e,t){return e[0]-t[0]}function Fce(e,t){return e[0]<=e[1]?e[0]<=t&&t<=e[1]:t<e[0]||e[1]<t}function Bmt(e){var t,n,r,i,s,o,a;if(El=Vi=-(Di=Nu=1/0),zg=[],Up(e,Mp),n=zg.length){for(zg.sort(jmt),t=1,r=zg[0],s=[r];t<n;++t)i=zg[t],Fce(r,i[0])||Fce(r,i[1])?(_l(r[0],i[1])>_l(r[0],r[1])&&(r[1]=i[1]),_l(i[0],r[1])>_l(r[0],r[1])&&(r[0]=i[0])):s.push(r=i);for(o=-1/0,n=s.length-1,t=0,r=s[n];t<=n;r=i,++t)i=s[t],(a=_l(r[1],i[0]))>o&&(o=a,Di=i[0],Vi=r[1])}return zg=Om=null,Di===1/0||Nu===1/0?[[NaN,NaN],[NaN,NaN]]:[[Di,Nu],[Vi,El]]}var VA,iM,sM,oM,aM,uM,lM,cM,eV,tV,nV,UAe,zAe,za,Va,Ha,Mf={sphere:Oo,point:kX,lineStart:jce,lineEnd:Bce,polygonStart:function(){Mf.lineStart=Vmt,Mf.lineEnd=Hmt},polygonEnd:function(){Mf.lineStart=jce,Mf.lineEnd=Bce}};function kX(e,t){e*=Nn,t*=Nn;var n=zt(t);qk(n*zt(e),n*Ft(e),Ft(t))}function qk(e,t,n){++VA,sM+=(e-sM)/VA,oM+=(t-oM)/VA,aM+=(n-aM)/VA}function jce(){Mf.point=Umt}function Umt(e,t){e*=Nn,t*=Nn;var n=zt(t);za=n*zt(e),Va=n*Ft(e),Ha=Ft(t),Mf.point=zmt,qk(za,Va,Ha)}function zmt(e,t){e*=Nn,t*=Nn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=jc(ru((o=Va*s-Ha*i)*o+(o=Ha*r-za*s)*o+(o=za*i-Va*r)*o),za*r+Va*i+Ha*s);iM+=o,uM+=o*(za+(za=r)),lM+=o*(Va+(Va=i)),cM+=o*(Ha+(Ha=s)),qk(za,Va,Ha)}function Bce(){Mf.point=kX}function Vmt(){Mf.point=qmt}function Hmt(){VAe(UAe,zAe),Mf.point=kX}function qmt(e,t){UAe=e,zAe=t,e*=Nn,t*=Nn,Mf.point=VAe;var n=zt(t);za=n*zt(e),Va=n*Ft(e),Ha=Ft(t),qk(za,Va,Ha)}function VAe(e,t){e*=Nn,t*=Nn;var n=zt(t),r=n*zt(e),i=n*Ft(e),s=Ft(t),o=Va*s-Ha*i,a=Ha*r-za*s,u=za*i-Va*r,l=Yz(o,a,u),c=tl(l),f=l&&-c/l;eV.add(f*o),tV.add(f*a),nV.add(f*u),iM+=c,uM+=c*(za+(za=r)),lM+=c*(Va+(Va=i)),cM+=c*(Ha+(Ha=s)),qk(za,Va,Ha)}function Wmt(e){VA=iM=sM=oM=aM=uM=lM=cM=0,eV=new Qa,tV=new Qa,nV=new Qa,Up(e,Mf);var t=+eV,n=+tV,r=+nV,i=Yz(t,n,r);return i<X$&&(t=uM,n=lM,r=cM,iM<Bt&&(t=sM,n=oM,r=aM),i=Yz(t,n,r),i<X$)?[NaN,NaN]:[jc(n,t)*as,tl(r/i)*as]}function rV(e,t){function n(r,i){return r=e(r,i),t(r[0],r[1])}return e.invert&&t.invert&&(n.invert=function(r,i){return r=t.invert(r,i),r&&e.invert(r[0],r[1])}),n}function iV(e,t){return Jn(e)>On&&(e-=Math.round(e/nu)*nu),[e,t]}iV.invert=iV;function HAe(e,t,n){return(e%=nu)?t||n?rV(zce(e),Vce(t,n)):zce(e):t||n?Vce(t,n):iV}function Uce(e){return function(t,n){return t+=e,Jn(t)>On&&(t-=Math.round(t/nu)*nu),[t,n]}}function zce(e){var t=Uce(e);return t.invert=Uce(-e),t}function Vce(e,t){var n=zt(e),r=Ft(e),i=zt(t),s=Ft(t);function o(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*n+c*r;return[jc(f*i-h*s,c*n-d*r),tl(h*i+f*s)]}return o.invert=function(a,u){var l=zt(u),c=zt(a)*l,f=Ft(a)*l,d=Ft(u),h=d*i-f*s;return[jc(f*i+d*s,c*n+h*r),tl(h*n-c*r)]},o}function Gmt(e){e=HAe(e[0]*Nn,e[1]*Nn,e.length>2?e[2]*Nn:0);function t(n){return n=e(n[0]*Nn,n[1]*Nn),n[0]*=as,n[1]*=as,n}return t.invert=function(n){return n=e.invert(n[0]*Nn,n[1]*Nn),n[0]*=as,n[1]*=as,n},t}function Ymt(e,t,n,r,i,s){if(n){var o=zt(t),a=Ft(t),u=r*n;i==null?(i=t+r*nu,s=t-u/2):(i=Hce(o,i),s=Hce(o,s),(r>0?i<s:i>s)&&(i+=r*nu));for(var l,c=i;r>0?c>s:c<s;c-=u)l=nM([o,-a*zt(c),-a*Ft(c)]),e.point(l[0],l[1])}}function Hce(e,t){t=fb(t),t[0]-=e,rM(t);var n=OAe(-t[1]);return((-t[2]<0?-n:n)+nu-Bt)%nu}function qAe(){var e=[],t;return{point:function(n,r,i){t.push([n,r,i])},lineStart:function(){e.push(t=[])},lineEnd:Oo,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function HO(e,t){return Jn(e[0]-t[0])<Bt&&Jn(e[1]-t[1])<Bt}function hP(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function WAe(e,t,n,r,i){var s=[],o=[],a,u;if(e.forEach(function(p){if(!((m=p.length-1)<=0)){var m,g=p[0],y=p[m],v;if(HO(g,y)){if(!g[2]&&!y[2]){for(i.lineStart(),a=0;a<m;++a)i.point((g=p[a])[0],g[1]);i.lineEnd();return}y[0]+=2*Bt}s.push(v=new hP(g,p,null,!0)),o.push(v.o=new hP(g,null,v,!1)),s.push(v=new hP(y,p,null,!1)),o.push(v.o=new hP(y,null,v,!0))}}),!!s.length){for(o.sort(t),qce(s),qce(o),a=0,u=o.length;a<u;++a)o[a].e=n=!n;for(var l=s[0],c,f;;){for(var d=l,h=!0;d.v;)if((d=d.n)===l)return;c=d.z,i.lineStart();do{if(d.v=d.o.v=!0,d.e){if(h)for(a=0,u=c.length;a<u;++a)i.point((f=c[a])[0],f[1]);else r(d.x,d.n.x,1,i);d=d.n}else{if(h)for(c=d.p.z,a=c.length-1;a>=0;--a)i.point((f=c[a])[0],f[1]);else r(d.x,d.p.x,-1,i);d=d.p}d=d.o,c=d.z,h=!h}while(!d.v);i.lineEnd()}}}function qce(e){if(t=e.length){for(var t,n=0,r=e[0],i;++n<t;)r.n=i=e[n],i.p=r,r=i;r.n=i=e[0],i.p=r}}function gB(e){return Jn(e[0])<=On?e[0]:Ic(e[0])*((Jn(e[0])+On)%nu-On)}function Kmt(e,t){var n=gB(t),r=t[1],i=Ft(r),s=[Ft(n),-zt(n),0],o=0,a=0,u=new Qa;i===1?r=Qi+Bt:i===-1&&(r=-Qi-Bt);for(var l=0,c=e.length;l<c;++l)if(d=(f=e[l]).length)for(var f,d,h=f[d-1],p=gB(h),m=h[1]/2+Q$,g=Ft(m),y=zt(m),v=0;v<d;++v,p=w,g=T,y=S,h=b){var b=f[v],w=gB(b),E=b[1]/2+Q$,T=Ft(E),S=zt(E),A=w-p,C=A>=0?1:-1,k=C*A,N=k>On,D=g*T;if(u.add(jc(D*C*Ft(k),y*S+D*zt(k))),o+=N?A+C*nu:A,N^p>=n^w>=n){var O=lx(fb(h),fb(b));rM(O);var $=lx(s,O);rM($);var F=(N^A>=0?-1:1)*tl($[2]);(r>F||r===F&&(O[0]||O[1]))&&(a+=N^A>=0?1:-1)}}return(o<-Bt||o<Bt&&u<-X$)^a&1}function GAe(e,t,n,r){return function(i){var s=t(i),o=qAe(),a=t(o),u=!1,l,c,f,d={point:h,lineStart:m,lineEnd:g,polygonStart:function(){d.point=y,d.lineStart=v,d.lineEnd=b,c=[],l=[]},polygonEnd:function(){d.point=h,d.lineStart=m,d.lineEnd=g,c=kTe(c);var w=Kmt(l,r);c.length?(u||(i.polygonStart(),u=!0),WAe(c,Qmt,w,n,i)):w&&(u||(i.polygonStart(),u=!0),i.lineStart(),n(null,null,1,i),i.lineEnd()),u&&(i.polygonEnd(),u=!1),c=l=null},sphere:function(){i.polygonStart(),i.lineStart(),n(null,null,1,i),i.lineEnd(),i.polygonEnd()}};function h(w,E){e(w,E)&&i.point(w,E)}function p(w,E){s.point(w,E)}function m(){d.point=p,s.lineStart()}function g(){d.point=h,s.lineEnd()}function y(w,E){f.push([w,E]),a.point(w,E)}function v(){a.lineStart(),f=[]}function b(){y(f[0][0],f[0][1]),a.lineEnd();var w=a.clean(),E=o.result(),T,S=E.length,A,C,k;if(f.pop(),l.push(f),f=null,!!S){if(w&1){if(C=E[0],(A=C.length-1)>0){for(u||(i.polygonStart(),u=!0),i.lineStart(),T=0;T<A;++T)i.point((k=C[T])[0],k[1]);i.lineEnd()}return}S>1&&w&2&&E.push(E.pop().concat(E.shift())),c.push(E.filter(Xmt))}}return d}}function Xmt(e){return e.length>1}function Qmt(e,t){return((e=e.x)[0]<0?e[1]-Qi-Bt:Qi-e[1])-((t=t.x)[0]<0?t[1]-Qi-Bt:Qi-t[1])}const Wce=GAe(function(){return!0},Jmt,egt,[-On,-Qi]);function Jmt(e){var t=NaN,n=NaN,r=NaN,i;return{lineStart:function(){e.lineStart(),i=1},point:function(s,o){var a=s>0?On:-On,u=Jn(s-t);Jn(u-On)<Bt?(e.point(t,n=(n+o)/2>0?Qi:-Qi),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),e.point(s,n),i=0):r!==a&&u>=On&&(Jn(t-r)<Bt&&(t-=r*Bt),Jn(s-a)<Bt&&(s-=a*Bt),n=Zmt(t,n,s,o),e.point(r,n),e.lineEnd(),e.lineStart(),e.point(a,n),i=0),e.point(t=s,n=o),r=a},lineEnd:function(){e.lineEnd(),t=n=NaN},clean:function(){return 2-i}}}function Zmt(e,t,n,r){var i,s,o=Ft(e-n);return Jn(o)>Bt?DS((Ft(t)*(s=zt(r))*Ft(n)-Ft(r)*(i=zt(t))*Ft(e))/(i*s*o)):(t+r)/2}function egt(e,t,n,r){var i;if(e==null)i=n*Qi,r.point(-On,i),r.point(0,i),r.point(On,i),r.point(On,0),r.point(On,-i),r.point(0,-i),r.point(-On,-i),r.point(-On,0),r.point(-On,i);else if(Jn(e[0]-t[0])>Bt){var s=e[0]<t[0]?On:-On;i=n*s/2,r.point(-s,i),r.point(0,i),r.point(s,i)}else r.point(t[0],t[1])}function tgt(e){var t=zt(e),n=2*Nn,r=t>0,i=Jn(t)>Bt;function s(c,f,d,h){Ymt(h,e,n,d,c,f)}function o(c,f){return zt(c)*zt(f)>t}function a(c){var f,d,h,p,m;return{lineStart:function(){p=h=!1,m=1},point:function(g,y){var v=[g,y],b,w=o(g,y),E=r?w?0:l(g,y):w?l(g+(g<0?On:-On),y):0;if(!f&&(p=h=w)&&c.lineStart(),w!==h&&(b=u(f,v),(!b||HO(f,b)||HO(v,b))&&(v[2]=1)),w!==h)m=0,w?(c.lineStart(),b=u(v,f),c.point(b[0],b[1])):(b=u(f,v),c.point(b[0],b[1],2),c.lineEnd()),f=b;else if(i&&f&&r^w){var T;!(E&d)&&(T=u(v,f,!0))&&(m=0,r?(c.lineStart(),c.point(T[0][0],T[0][1]),c.point(T[1][0],T[1][1]),c.lineEnd()):(c.point(T[1][0],T[1][1]),c.lineEnd(),c.lineStart(),c.point(T[0][0],T[0][1],3)))}w&&(!f||!HO(f,v))&&c.point(v[0],v[1]),f=v,h=w,d=E},lineEnd:function(){h&&c.lineEnd(),f=null},clean:function(){return m|(p&&h)<<1}}}function u(c,f,d){var h=fb(c),p=fb(f),m=[1,0,0],g=lx(h,p),y=fP(g,g),v=g[0],b=y-v*v;if(!b)return!d&&c;var w=t*y/b,E=-t*v/b,T=lx(m,g),S=dP(m,w),A=dP(g,E);mB(S,A);var C=T,k=fP(S,C),N=fP(C,C),D=k*k-N*(fP(S,S)-1);if(!(D<0)){var O=ru(D),$=dP(C,(-k-O)/N);if(mB($,S),$=nM($),!d)return $;var F=c[0],M=f[0],B=c[1],U=f[1],H;M<F&&(H=F,F=M,M=H);var P=M-F,z=Jn(P-On)<Bt,W=z||P<Bt;if(!z&&U<B&&(H=B,B=U,U=H),W?z?B+U>0^$[1]<(Jn($[0]-F)<Bt?B:U):B<=$[1]&&$[1]<=U:P>On^(F<=$[0]&&$[0]<=M)){var j=dP(C,(-k+O)/N);return mB(j,S),[$,nM(j)]}}}function l(c,f){var d=r?e:On-e,h=0;return c<-d?h|=1:c>d&&(h|=2),f<-d?h|=4:f>d&&(h|=8),h}return GAe(o,a,s,r?[0,-e]:[-On,e-On])}function ngt(e,t,n,r,i,s){var o=e[0],a=e[1],u=t[0],l=t[1],c=0,f=1,d=u-o,h=l-a,p;if(p=n-o,!(!d&&p>0)){if(p/=d,d<0){if(p<c)return;p<f&&(f=p)}else if(d>0){if(p>f)return;p>c&&(c=p)}if(p=i-o,!(!d&&p<0)){if(p/=d,d<0){if(p>f)return;p>c&&(c=p)}else if(d>0){if(p<c)return;p<f&&(f=p)}if(p=r-a,!(!h&&p>0)){if(p/=h,h<0){if(p<c)return;p<f&&(f=p)}else if(h>0){if(p>f)return;p>c&&(c=p)}if(p=s-a,!(!h&&p<0)){if(p/=h,h<0){if(p>f)return;p>c&&(c=p)}else if(h>0){if(p<c)return;p<f&&(f=p)}return c>0&&(e[0]=o+c*d,e[1]=a+c*h),f<1&&(t[0]=o+f*d,t[1]=a+f*h),!0}}}}}var HA=1e9,pP=-HA;function YAe(e,t,n,r){function i(l,c){return e<=l&&l<=n&&t<=c&&c<=r}function s(l,c,f,d){var h=0,p=0;if(l==null||(h=o(l,f))!==(p=o(c,f))||u(l,c)<0^f>0)do d.point(h===0||h===3?e:n,h>1?r:t);while((h=(h+f+4)%4)!==p);else d.point(c[0],c[1])}function o(l,c){return Jn(l[0]-e)<Bt?c>0?0:3:Jn(l[0]-n)<Bt?c>0?2:1:Jn(l[1]-t)<Bt?c>0?1:0:c>0?3:2}function a(l,c){return u(l.x,c.x)}function u(l,c){var f=o(l,1),d=o(c,1);return f!==d?f-d:f===0?c[1]-l[1]:f===1?l[0]-c[0]:f===2?l[1]-c[1]:c[0]-l[0]}return function(l){var c=l,f=qAe(),d,h,p,m,g,y,v,b,w,E,T,S={point:A,lineStart:D,lineEnd:O,polygonStart:k,polygonEnd:N};function A(F,M){i(F,M)&&c.point(F,M)}function C(){for(var F=0,M=0,B=h.length;M<B;++M)for(var U=h[M],H=1,P=U.length,z=U[0],W,j,q=z[0],G=z[1];H<P;++H)W=q,j=G,z=U[H],q=z[0],G=z[1],j<=r?G>r&&(q-W)*(r-j)>(G-j)*(e-W)&&++F:G<=r&&(q-W)*(r-j)<(G-j)*(e-W)&&--F;return F}function k(){c=f,d=[],h=[],T=!0}function N(){var F=C(),M=T&&F,B=(d=kTe(d)).length;(M||B)&&(l.polygonStart(),M&&(l.lineStart(),s(null,null,1,l),l.lineEnd()),B&&WAe(d,a,F,s,l),l.polygonEnd()),c=l,d=h=p=null}function D(){S.point=$,h&&h.push(p=[]),E=!0,w=!1,v=b=NaN}function O(){d&&($(m,g),y&&w&&f.rejoin(),d.push(f.result())),S.point=A,w&&c.lineEnd()}function $(F,M){var B=i(F,M);if(h&&p.push([F,M]),E)m=F,g=M,y=B,E=!1,B&&(c.lineStart(),c.point(F,M));else if(B&&w)c.point(F,M);else{var U=[v=Math.max(pP,Math.min(HA,v)),b=Math.max(pP,Math.min(HA,b))],H=[F=Math.max(pP,Math.min(HA,F)),M=Math.max(pP,Math.min(HA,M))];ngt(U,H,e,t,n,r)?(w||(c.lineStart(),c.point(U[0],U[1])),c.point(H[0],H[1]),B||c.lineEnd(),T=!1):B&&(c.lineStart(),c.point(F,M),T=!1)}v=F,b=M,w=B}return S}}function Gce(e,t,n){var r=ju(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[i,s]})}}function Yce(e,t,n){var r=ju(e,t-Bt,n).concat(t);return function(i){return r.map(function(s){return[s,i]})}}function rgt(){var e,t,n,r,i,s,o,a,u=10,l=u,c=90,f=360,d,h,p,m,g=2.5;function y(){return{type:"MultiLineString",coordinates:v()}}function v(){return ju(cP(r/c)*c,n,c).map(p).concat(ju(cP(a/f)*f,o,f).map(m)).concat(ju(cP(t/u)*u,e,u).filter(function(b){return Jn(b%c)>Bt}).map(d)).concat(ju(cP(s/l)*l,i,l).filter(function(b){return Jn(b%f)>Bt}).map(h))}return y.lines=function(){return v().map(function(b){return{type:"LineString",coordinates:b}})},y.outline=function(){return{type:"Polygon",coordinates:[p(r).concat(m(o).slice(1),p(n).reverse().slice(1),m(a).reverse().slice(1))]}},y.extent=function(b){return arguments.length?y.extentMajor(b).extentMinor(b):y.extentMinor()},y.extentMajor=function(b){return arguments.length?(r=+b[0][0],n=+b[1][0],a=+b[0][1],o=+b[1][1],r>n&&(b=r,r=n,n=b),a>o&&(b=a,a=o,o=b),y.precision(g)):[[r,a],[n,o]]},y.extentMinor=function(b){return arguments.length?(t=+b[0][0],e=+b[1][0],s=+b[0][1],i=+b[1][1],t>e&&(b=t,t=e,e=b),s>i&&(b=s,s=i,i=b),y.precision(g)):[[t,s],[e,i]]},y.step=function(b){return arguments.length?y.stepMajor(b).stepMinor(b):y.stepMinor()},y.stepMajor=function(b){return arguments.length?(c=+b[0],f=+b[1],y):[c,f]},y.stepMinor=function(b){return arguments.length?(u=+b[0],l=+b[1],y):[u,l]},y.precision=function(b){return arguments.length?(g=+b,d=Gce(s,i,90),h=Yce(t,e,g),p=Gce(a,o,90),m=Yce(r,n,g),y):g},y.extentMajor([[-180,-90+Bt],[180,90-Bt]]).extentMinor([[-180,-80-Bt],[180,80+Bt]])}const dI=e=>e;var yB=new Qa,sV=new Qa,KAe,XAe,oV,aV,zp={point:Oo,lineStart:Oo,lineEnd:Oo,polygonStart:function(){zp.lineStart=igt,zp.lineEnd=ogt},polygonEnd:function(){zp.lineStart=zp.lineEnd=zp.point=Oo,yB.add(Jn(sV)),sV=new Qa},result:function(){var e=yB/2;return yB=new Qa,e}};function igt(){zp.point=sgt}function sgt(e,t){zp.point=QAe,KAe=oV=e,XAe=aV=t}function QAe(e,t){sV.add(aV*e-oV*t),oV=e,aV=t}function ogt(){QAe(KAe,XAe)}var cx=1/0,fM=cx,hI=-cx,dM=hI,hM={point:agt,lineStart:Oo,lineEnd:Oo,polygonStart:Oo,polygonEnd:Oo,result:function(){var e=[[cx,fM],[hI,dM]];return hI=dM=-(fM=cx=1/0),e}};function agt(e,t){e<cx&&(cx=e),e>hI&&(hI=e),t<fM&&(fM=t),t>dM&&(dM=t)}var uV=0,lV=0,qA=0,pM=0,mM=0,Hw=0,cV=0,fV=0,WA=0,JAe,ZAe,Wd,Gd,Tc={point:db,lineStart:Kce,lineEnd:Xce,polygonStart:function(){Tc.lineStart=cgt,Tc.lineEnd=fgt},polygonEnd:function(){Tc.point=db,Tc.lineStart=Kce,Tc.lineEnd=Xce},result:function(){var e=WA?[cV/WA,fV/WA]:Hw?[pM/Hw,mM/Hw]:qA?[uV/qA,lV/qA]:[NaN,NaN];return uV=lV=qA=pM=mM=Hw=cV=fV=WA=0,e}};function db(e,t){uV+=e,lV+=t,++qA}function Kce(){Tc.point=ugt}function ugt(e,t){Tc.point=lgt,db(Wd=e,Gd=t)}function lgt(e,t){var n=e-Wd,r=t-Gd,i=ru(n*n+r*r);pM+=i*(Wd+e)/2,mM+=i*(Gd+t)/2,Hw+=i,db(Wd=e,Gd=t)}function Xce(){Tc.point=db}function cgt(){Tc.point=dgt}function fgt(){eCe(JAe,ZAe)}function dgt(e,t){Tc.point=eCe,db(JAe=Wd=e,ZAe=Gd=t)}function eCe(e,t){var n=e-Wd,r=t-Gd,i=ru(n*n+r*r);pM+=i*(Wd+e)/2,mM+=i*(Gd+t)/2,Hw+=i,i=Gd*e-Wd*t,cV+=i*(Wd+e),fV+=i*(Gd+t),WA+=i*3,db(Wd=e,Gd=t)}function tCe(e){this._context=e}tCe.prototype={_radius:4.5,pointRadius:function(e){return this._radius=e,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){this._line===0&&this._context.closePath(),this._point=NaN},point:function(e,t){switch(this._point){case 0:{this._context.moveTo(e,t),this._point=1;break}case 1:{this._context.lineTo(e,t);break}default:{this._context.moveTo(e+this._radius,t),this._context.arc(e,t,this._radius,0,nu);break}}},result:Oo};var dV=new Qa,vB,nCe,rCe,GA,YA,pI={point:Oo,lineStart:function(){pI.point=hgt},lineEnd:function(){vB&&iCe(nCe,rCe),pI.point=Oo},polygonStart:function(){vB=!0},polygonEnd:function(){vB=null},result:function(){var e=+dV;return dV=new Qa,e}};function hgt(e,t){pI.point=iCe,nCe=GA=e,rCe=YA=t}function iCe(e,t){GA-=e,YA-=t,dV.add(ru(GA*GA+YA*YA)),GA=e,YA=t}let Qce,gM,Jce,Zce;class efe{constructor(t){this._append=t==null?sCe:pgt(t),this._radius=4.5,this._=""}pointRadius(t){return this._radius=+t,this}polygonStart(){this._line=0}polygonEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){this._line===0&&(this._+="Z"),this._point=NaN}point(t,n){switch(this._point){case 0:{this._append`M${t},${n}`,this._point=1;break}case 1:{this._append`L${t},${n}`;break}default:{if(this._append`M${t},${n}`,this._radius!==Jce||this._append!==gM){const r=this._radius,i=this._;this._="",this._append`m0,${r}a${r},${r} 0 1,1 0,${-2*r}a${r},${r} 0 1,1 0,${2*r}z`,Jce=r,gM=this._append,Zce=this._,this._=i}this._+=Zce;break}}}result(){const t=this._;return this._="",t.length?t:null}}function sCe(e){let t=1;this._+=e[0];for(const n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function pgt(e){const t=Math.floor(e);if(!(t>=0))throw new RangeError(`invalid digits: ${e}`);if(t>15)return sCe;if(t!==Qce){const n=10**t;Qce=t,gM=function(i){let s=1;this._+=i[0];for(const o=i.length;s<o;++s)this._+=Math.round(arguments[s]*n)/n+i[s]}}return gM}function oCe(e,t){let n=3,r=4.5,i,s;function o(a){return a&&(typeof r=="function"&&s.pointRadius(+r.apply(this,arguments)),Up(a,i(s))),s.result()}return o.area=function(a){return Up(a,i(zp)),zp.result()},o.measure=function(a){return Up(a,i(pI)),pI.result()},o.bounds=function(a){return Up(a,i(hM)),hM.result()},o.centroid=function(a){return Up(a,i(Tc)),Tc.result()},o.projection=function(a){return arguments.length?(i=a==null?(e=null,dI):(e=a).stream,o):e},o.context=function(a){return arguments.length?(s=a==null?(t=null,new efe(n)):new tCe(t=a),typeof r!="function"&&s.pointRadius(r),o):t},o.pointRadius=function(a){return arguments.length?(r=typeof a=="function"?a:(s.pointRadius(+a),+a),o):r},o.digits=function(a){if(!arguments.length)return n;if(a==null)n=null;else{const u=Math.floor(a);if(!(u>=0))throw new RangeError(`invalid digits: ${a}`);n=u}return t===null&&(s=new efe(n)),o},o.projection(e).digits(n).context(t)}function lF(e){return function(t){var n=new hV;for(var r in e)n[r]=e[r];return n.stream=t,n}}function hV(){}hV.prototype={constructor:hV,point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function RX(e,t,n){var r=e.clipExtent&&e.clipExtent();return e.scale(150).translate([0,0]),r!=null&&e.clipExtent(null),Up(n,e.stream(hM)),t(hM.result()),r!=null&&e.clipExtent(r),e}function cF(e,t,n){return RX(e,function(r){var i=t[1][0]-t[0][0],s=t[1][1]-t[0][1],o=Math.min(i/(r[1][0]-r[0][0]),s/(r[1][1]-r[0][1])),a=+t[0][0]+(i-o*(r[1][0]+r[0][0]))/2,u=+t[0][1]+(s-o*(r[1][1]+r[0][1]))/2;e.scale(150*o).translate([a,u])},n)}function NX(e,t,n){return cF(e,[[0,0],t],n)}function PX(e,t,n){return RX(e,function(r){var i=+t,s=i/(r[1][0]-r[0][0]),o=(i-s*(r[1][0]+r[0][0]))/2,a=-s*r[0][1];e.scale(150*s).translate([o,a])},n)}function OX(e,t,n){return RX(e,function(r){var i=+t,s=i/(r[1][1]-r[0][1]),o=-s*r[0][0],a=(i-s*(r[1][1]+r[0][1]))/2;e.scale(150*s).translate([o,a])},n)}var tfe=16,mgt=zt(30*Nn);function nfe(e,t){return+t?ygt(e,t):ggt(e)}function ggt(e){return lF({point:function(t,n){t=e(t,n),this.stream.point(t[0],t[1])}})}function ygt(e,t){function n(r,i,s,o,a,u,l,c,f,d,h,p,m,g){var y=l-r,v=c-i,b=y*y+v*v;if(b>4*t&&m--){var w=o+d,E=a+h,T=u+p,S=ru(w*w+E*E+T*T),A=tl(T/=S),C=Jn(Jn(T)-1)<Bt||Jn(s-f)<Bt?(s+f)/2:jc(E,w),k=e(C,A),N=k[0],D=k[1],O=N-r,$=D-i,F=v*O-y*$;(F*F/b>t||Jn((y*O+v*$)/b-.5)>.3||o*d+a*h+u*p<mgt)&&(n(r,i,s,o,a,u,N,D,C,w/=S,E/=S,T,m,g),g.point(N,D),n(N,D,C,w,E,T,l,c,f,d,h,p,m,g))}}return function(r){var i,s,o,a,u,l,c,f,d,h,p,m,g={point:y,lineStart:v,lineEnd:w,polygonStart:function(){r.polygonStart(),g.lineStart=E},polygonEnd:function(){r.polygonEnd(),g.lineStart=v}};function y(A,C){A=e(A,C),r.point(A[0],A[1])}function v(){f=NaN,g.point=b,r.lineStart()}function b(A,C){var k=fb([A,C]),N=e(A,C);n(f,d,c,h,p,m,f=N[0],d=N[1],c=A,h=k[0],p=k[1],m=k[2],tfe,r),r.point(f,d)}function w(){g.point=y,r.lineEnd()}function E(){v(),g.point=T,g.lineEnd=S}function T(A,C){b(i=A,C),s=f,o=d,a=h,u=p,l=m,g.point=b}function S(){n(f,d,c,h,p,m,s,o,i,a,u,l,tfe,r),g.lineEnd=w,w()}return g}}var vgt=lF({point:function(e,t){this.stream.point(e*Nn,t*Nn)}});function bgt(e){return lF({point:function(t,n){var r=e(t,n);return this.stream.point(r[0],r[1])}})}function _gt(e,t,n,r,i){function s(o,a){return o*=r,a*=i,[t+e*o,n-e*a]}return s.invert=function(o,a){return[(o-t)/e*r,(n-a)/e*i]},s}function rfe(e,t,n,r,i,s){if(!s)return _gt(e,t,n,r,i);var o=zt(s),a=Ft(s),u=o*e,l=a*e,c=o/e,f=a/e,d=(a*n-o*t)/e,h=(a*t+o*n)/e;function p(m,g){return m*=r,g*=i,[u*m-l*g+t,n-l*m-u*g]}return p.invert=function(m,g){return[r*(c*m-f*g+d),i*(h-f*m-c*g)]},p}function np(e){return aCe(function(){return e})()}function aCe(e){var t,n=150,r=480,i=250,s=0,o=0,a=0,u=0,l=0,c,f=0,d=1,h=1,p=null,m=Wce,g=null,y,v,b,w=dI,E=.5,T,S,A,C,k;function N(F){return A(F[0]*Nn,F[1]*Nn)}function D(F){return F=A.invert(F[0],F[1]),F&&[F[0]*as,F[1]*as]}N.stream=function(F){return C&&k===F?C:C=vgt(bgt(c)(m(T(w(k=F)))))},N.preclip=function(F){return arguments.length?(m=F,p=void 0,$()):m},N.postclip=function(F){return arguments.length?(w=F,g=y=v=b=null,$()):w},N.clipAngle=function(F){return arguments.length?(m=+F?tgt(p=F*Nn):(p=null,Wce),$()):p*as},N.clipExtent=function(F){return arguments.length?(w=F==null?(g=y=v=b=null,dI):YAe(g=+F[0][0],y=+F[0][1],v=+F[1][0],b=+F[1][1]),$()):g==null?null:[[g,y],[v,b]]},N.scale=function(F){return arguments.length?(n=+F,O()):n},N.translate=function(F){return arguments.length?(r=+F[0],i=+F[1],O()):[r,i]},N.center=function(F){return arguments.length?(s=F[0]%360*Nn,o=F[1]%360*Nn,O()):[s*as,o*as]},N.rotate=function(F){return arguments.length?(a=F[0]%360*Nn,u=F[1]%360*Nn,l=F.length>2?F[2]%360*Nn:0,O()):[a*as,u*as,l*as]},N.angle=function(F){return arguments.length?(f=F%360*Nn,O()):f*as},N.reflectX=function(F){return arguments.length?(d=F?-1:1,O()):d<0},N.reflectY=function(F){return arguments.length?(h=F?-1:1,O()):h<0},N.precision=function(F){return arguments.length?(T=nfe(S,E=F*F),$()):ru(E)},N.fitExtent=function(F,M){return cF(N,F,M)},N.fitSize=function(F,M){return NX(N,F,M)},N.fitWidth=function(F,M){return PX(N,F,M)},N.fitHeight=function(F,M){return OX(N,F,M)};function O(){var F=rfe(n,0,0,d,h,f).apply(null,t(s,o)),M=rfe(n,r-F[0],i-F[1],d,h,f);return c=HAe(a,u,l),S=rV(t,M),A=rV(c,S),T=nfe(S,E),$()}function $(){return C=k=null,N}return function(){return t=e.apply(this,arguments),N.invert=t.invert&&D,O()}}function DX(e){var t=0,n=On/3,r=aCe(e),i=r(t,n);return i.parallels=function(s){return arguments.length?r(t=s[0]*Nn,n=s[1]*Nn):[t*as,n*as]},i}function wgt(e){var t=zt(e);function n(r,i){return[r*t,Ft(i)/t]}return n.invert=function(r,i){return[r/t,tl(i*t)]},n}function Egt(e,t){var n=Ft(e),r=(n+Ft(t))/2;if(Jn(r)<Bt)return wgt(e);var i=1+n*(2*r-n),s=ru(i)/r;function o(a,u){var l=ru(i-2*r*Ft(u))/r;return[l*Ft(a*=r),s-l*zt(a)]}return o.invert=function(a,u){var l=s-u,c=jc(a,Jn(l))*Ic(l);return l*r<0&&(c-=On*Ic(a)*Ic(l)),[c/r,tl((i-(a*a+l*l)*r*r)/(2*r))]},o}function yM(){return DX(Egt).scale(155.424).center([0,33.6442])}function uCe(){return yM().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function xgt(e){var t=e.length;return{point:function(n,r){for(var i=-1;++i<t;)e[i].point(n,r)},sphere:function(){for(var n=-1;++n<t;)e[n].sphere()},lineStart:function(){for(var n=-1;++n<t;)e[n].lineStart()},lineEnd:function(){for(var n=-1;++n<t;)e[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<t;)e[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<t;)e[n].polygonEnd()}}}function Sgt(){var e,t,n=uCe(),r,i=yM().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s,o=yM().rotate([157,0]).center([-3,19.9]).parallels([8,18]),a,u,l={point:function(d,h){u=[d,h]}};function c(d){var h=d[0],p=d[1];return u=null,r.point(h,p),u||(s.point(h,p),u)||(a.point(h,p),u)}c.invert=function(d){var h=n.scale(),p=n.translate(),m=(d[0]-p[0])/h,g=(d[1]-p[1])/h;return(g>=.12&&g<.234&&m>=-.425&&m<-.214?i:g>=.166&&g<.234&&m>=-.214&&m<-.115?o:n).invert(d)},c.stream=function(d){return e&&t===d?e:e=xgt([n.stream(t=d),i.stream(d),o.stream(d)])},c.precision=function(d){return arguments.length?(n.precision(d),i.precision(d),o.precision(d),f()):n.precision()},c.scale=function(d){return arguments.length?(n.scale(d),i.scale(d*.35),o.scale(d),c.translate(n.translate())):n.scale()},c.translate=function(d){if(!arguments.length)return n.translate();var h=n.scale(),p=+d[0],m=+d[1];return r=n.translate(d).clipExtent([[p-.455*h,m-.238*h],[p+.455*h,m+.238*h]]).stream(l),s=i.translate([p-.307*h,m+.201*h]).clipExtent([[p-.425*h+Bt,m+.12*h+Bt],[p-.214*h-Bt,m+.234*h-Bt]]).stream(l),a=o.translate([p-.205*h,m+.212*h]).clipExtent([[p-.214*h+Bt,m+.166*h+Bt],[p-.115*h-Bt,m+.234*h-Bt]]).stream(l),f()},c.fitExtent=function(d,h){return cF(c,d,h)},c.fitSize=function(d,h){return NX(c,d,h)},c.fitWidth=function(d,h){return PX(c,d,h)},c.fitHeight=function(d,h){return OX(c,d,h)};function f(){return e=t=null,c}return c.scale(1070)}function lCe(e){return function(t,n){var r=zt(t),i=zt(n),s=e(r*i);return s===1/0?[2,0]:[s*i*Ft(t),s*Ft(n)]}}function Wk(e){return function(t,n){var r=ru(t*t+n*n),i=e(r),s=Ft(i),o=zt(i);return[jc(t*s,r*o),tl(r&&n*s/r)]}}var cCe=lCe(function(e){return ru(2/(1+e))});cCe.invert=Wk(function(e){return 2*tl(e/2)});function Tgt(){return np(cCe).scale(124.75).clipAngle(180-.001)}var fCe=lCe(function(e){return(e=OAe(e))&&e/Ft(e)});fCe.invert=Wk(function(e){return e});function Agt(){return np(fCe).scale(79.4188).clipAngle(180-.001)}function fF(e,t){return[e,J$(IX((Qi+t)/2))]}fF.invert=function(e,t){return[e,2*DS(PAe(t))-Qi]};function Cgt(){return dCe(fF).scale(961/nu)}function dCe(e){var t=np(e),n=t.center,r=t.scale,i=t.translate,s=t.clipExtent,o=null,a,u,l;t.scale=function(f){return arguments.length?(r(f),c()):r()},t.translate=function(f){return arguments.length?(i(f),c()):i()},t.center=function(f){return arguments.length?(n(f),c()):n()},t.clipExtent=function(f){return arguments.length?(f==null?o=a=u=l=null:(o=+f[0][0],a=+f[0][1],u=+f[1][0],l=+f[1][1]),c()):o==null?null:[[o,a],[u,l]]};function c(){var f=On*r(),d=t(Gmt(t.rotate()).invert([0,0]));return s(o==null?[[d[0]-f,d[1]-f],[d[0]+f,d[1]+f]]:e===fF?[[Math.max(d[0]-f,o),a],[Math.min(d[0]+f,u),l]]:[[o,Math.max(d[1]-f,a)],[u,Math.min(d[1]+f,l)]])}return c()}function mP(e){return IX((Qi+e)/2)}function Igt(e,t){var n=zt(e),r=e===t?Ft(e):J$(n/zt(t))/J$(mP(t)/mP(e)),i=n*pB(mP(e),r)/r;if(!r)return fF;function s(o,a){i>0?a<-Qi+Bt&&(a=-Qi+Bt):a>Qi-Bt&&(a=Qi-Bt);var u=i/pB(mP(a),r);return[u*Ft(r*o),i-u*zt(r*o)]}return s.invert=function(o,a){var u=i-a,l=Ic(r)*ru(o*o+u*u),c=jc(o,Jn(u))*Ic(u);return u*r<0&&(c-=On*Ic(o)*Ic(u)),[c/r,2*DS(pB(i/l,1/r))-Qi]},s}function kgt(){return DX(Igt).scale(109.5).parallels([30,30])}function vM(e,t){return[e,t]}vM.invert=vM;function Rgt(){return np(vM).scale(152.63)}function Ngt(e,t){var n=zt(e),r=e===t?Ft(e):(n-zt(t))/(t-e),i=n/r+e;if(Jn(r)<Bt)return vM;function s(o,a){var u=i-a,l=r*o;return[u*Ft(l),i-u*zt(l)]}return s.invert=function(o,a){var u=i-a,l=jc(o,Jn(u))*Ic(u);return u*r<0&&(l-=On*Ic(o)*Ic(u)),[l/r,i-Ic(r)*ru(o*o+u*u)]},s}function Pgt(){return DX(Ngt).scale(131.154).center([0,13.9389])}var GC=1.340264,YC=-.081106,KC=893e-6,XC=.003796,bM=ru(3)/2,Ogt=12;function hCe(e,t){var n=tl(bM*Ft(t)),r=n*n,i=r*r*r;return[e*zt(n)/(bM*(GC+3*YC*r+i*(7*KC+9*XC*r))),n*(GC+YC*r+i*(KC+XC*r))]}hCe.invert=function(e,t){for(var n=t,r=n*n,i=r*r*r,s=0,o,a,u;s<Ogt&&(a=n*(GC+YC*r+i*(KC+XC*r))-t,u=GC+3*YC*r+i*(7*KC+9*XC*r),n-=o=a/u,r=n*n,i=r*r*r,!(Jn(o)<X$));++s);return[bM*e*(GC+3*YC*r+i*(7*KC+9*XC*r))/zt(n),tl(Ft(n)/bM)]};function Dgt(){return np(hCe).scale(177.158)}function pCe(e,t){var n=zt(t),r=zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}pCe.invert=Wk(DS);function $gt(){return np(pCe).scale(144.049).clipAngle(60)}function Mgt(){var e=1,t=0,n=0,r=1,i=1,s=0,o,a,u=null,l,c,f,d=1,h=1,p=lF({point:function(w,E){var T=b([w,E]);this.stream.point(T[0],T[1])}}),m=dI,g,y;function v(){return d=e*r,h=e*i,g=y=null,b}function b(w){var E=w[0]*d,T=w[1]*h;if(s){var S=T*o-E*a;E=E*o+T*a,T=S}return[E+t,T+n]}return b.invert=function(w){var E=w[0]-t,T=w[1]-n;if(s){var S=T*o+E*a;E=E*o-T*a,T=S}return[E/d,T/h]},b.stream=function(w){return g&&y===w?g:g=p(m(y=w))},b.postclip=function(w){return arguments.length?(m=w,u=l=c=f=null,v()):m},b.clipExtent=function(w){return arguments.length?(m=w==null?(u=l=c=f=null,dI):YAe(u=+w[0][0],l=+w[0][1],c=+w[1][0],f=+w[1][1]),v()):u==null?null:[[u,l],[c,f]]},b.scale=function(w){return arguments.length?(e=+w,v()):e},b.translate=function(w){return arguments.length?(t=+w[0],n=+w[1],v()):[t,n]},b.angle=function(w){return arguments.length?(s=w%360*Nn,a=Ft(s),o=zt(s),v()):s*as},b.reflectX=function(w){return arguments.length?(r=w?-1:1,v()):r<0},b.reflectY=function(w){return arguments.length?(i=w?-1:1,v()):i<0},b.fitExtent=function(w,E){return cF(b,w,E)},b.fitSize=function(w,E){return NX(b,w,E)},b.fitWidth=function(w,E){return PX(b,w,E)},b.fitHeight=function(w,E){return OX(b,w,E)},b}function mCe(e,t){var n=t*t,r=n*n;return[e*(.8707-.131979*n+r*(-.013791+r*(.003971*n-.001529*r))),t*(1.007226+n*(.015085+r*(-.044475+.028874*n-.005916*r)))]}mCe.invert=function(e,t){var n=t,r=25,i;do{var s=n*n,o=s*s;n-=i=(n*(1.007226+s*(.015085+o*(-.044475+.028874*s-.005916*o)))-t)/(1.007226+s*(.015085*3+o*(-.044475*7+.028874*9*s-.005916*11*o)))}while(Jn(i)>Bt&&--r>0);return[e/(.8707+(s=n*n)*(-.131979+s*(-.013791+s*s*s*(.003971-.001529*s)))),n]};function Lgt(){return np(mCe).scale(175.295)}function gCe(e,t){return[zt(t)*Ft(e),Ft(t)]}gCe.invert=Wk(tl);function Fgt(){return np(gCe).scale(249.5).clipAngle(90+Bt)}function yCe(e,t){var n=zt(t),r=1+zt(e)*n;return[n*Ft(e)/r,Ft(t)/r]}yCe.invert=Wk(function(e){return 2*DS(e)});function jgt(){return np(yCe).scale(250).clipAngle(142)}function vCe(e,t){return[J$(IX((Qi+t)/2)),-e]}vCe.invert=function(e,t){return[-t,2*DS(PAe(e))-Qi]};function Bgt(){var e=dCe(vCe),t=e.center,n=e.rotate;return e.center=function(r){return arguments.length?t([-r[1],r[0]]):(r=t(),[r[1],-r[0]])},e.rotate=function(r){return arguments.length?n([r[0],r[1],r.length>2?r[2]+90:90]):(r=n(),[r[0],r[1],r[2]-90])},n([0,0,90]).scale(159.155)}function Ugt(e,t){return e.parent===t.parent?1:2}function zgt(e){return e.reduce(Vgt,0)/e.length}function Vgt(e,t){return e+t.x}function Hgt(e){return 1+e.reduce(qgt,0)}function qgt(e,t){return Math.max(e,t.y)}function Wgt(e){for(var t;t=e.children;)e=t[0];return e}function Ggt(e){for(var t;t=e.children;)e=t[t.length-1];return e}function Ygt(){var e=Ugt,t=1,n=1,r=!1;function i(s){var o,a=0;s.eachAfter(function(d){var h=d.children;h?(d.x=zgt(h),d.y=Hgt(h)):(d.x=o?a+=e(d,o):0,d.y=0,o=d)});var u=Wgt(s),l=Ggt(s),c=u.x-e(u,l)/2,f=l.x+e(l,u)/2;return s.eachAfter(r?function(d){d.x=(d.x-s.x)*t,d.y=(s.y-d.y)*n}:function(d){d.x=(d.x-c)/(f-c)*t,d.y=(1-(s.y?d.y/s.y:1))*n})}return i.separation=function(s){return arguments.length?(e=s,i):e},i.size=function(s){return arguments.length?(r=!1,t=+s[0],n=+s[1],i):r?null:[t,n]},i.nodeSize=function(s){return arguments.length?(r=!0,t=+s[0],n=+s[1],i):r?[t,n]:null},i}function Kgt(e){var t=0,n=e.children,r=n&&n.length;if(!r)t=1;else for(;--r>=0;)t+=n[r].value;e.value=t}function Xgt(){return this.eachAfter(Kgt)}function Qgt(e,t){let n=-1;for(const r of this)e.call(t,r,++n,this);return this}function Jgt(e,t){for(var n=this,r=[n],i,s,o=-1;n=r.pop();)if(e.call(t,n,++o,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Zgt(e,t){for(var n=this,r=[n],i=[],s,o,a,u=-1;n=r.pop();)if(i.push(n),s=n.children)for(o=0,a=s.length;o<a;++o)r.push(s[o]);for(;n=i.pop();)e.call(t,n,++u,this);return this}function e0t(e,t){let n=-1;for(const r of this)if(e.call(t,r,++n,this))return r}function t0t(e){return this.eachAfter(function(t){for(var n=+e(t.data)||0,r=t.children,i=r&&r.length;--i>=0;)n+=r[i].value;t.value=n})}function n0t(e){return this.eachBefore(function(t){t.children&&t.children.sort(e)})}function r0t(e){for(var t=this,n=i0t(t,e),r=[t];t!==n;)t=t.parent,r.push(t);for(var i=r.length;e!==n;)r.splice(i,0,e),e=e.parent;return r}function i0t(e,t){if(e===t)return e;var n=e.ancestors(),r=t.ancestors(),i=null;for(e=n.pop(),t=r.pop();e===t;)i=e,e=n.pop(),t=r.pop();return i}function s0t(){for(var e=this,t=[e];e=e.parent;)t.push(e);return t}function o0t(){return Array.from(this)}function a0t(){var e=[];return this.eachBefore(function(t){t.children||e.push(t)}),e}function u0t(){var e=this,t=[];return e.each(function(n){n!==e&&t.push({source:n.parent,target:n})}),t}function*l0t(){var e=this,t,n=[e],r,i,s;do for(t=n.reverse(),n=[];e=t.pop();)if(yield e,r=e.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function dF(e,t){e instanceof Map?(e=[void 0,e],t===void 0&&(t=d0t)):t===void 0&&(t=f0t);for(var n=new fx(e),r,i=[n],s,o,a,u;r=i.pop();)if((o=t(r.data))&&(u=(o=Array.from(o)).length))for(r.children=o,a=u-1;a>=0;--a)i.push(s=o[a]=new fx(o[a])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(bCe)}function c0t(){return dF(this).eachBefore(h0t)}function f0t(e){return e.children}function d0t(e){return Array.isArray(e)?e[1]:null}function h0t(e){e.data.value!==void 0&&(e.value=e.data.value),e.data=e.data.data}function bCe(e){var t=0;do e.height=t;while((e=e.parent)&&e.height<++t)}function fx(e){this.data=e,this.depth=this.height=0,this.parent=null}fx.prototype=dF.prototype={constructor:fx,count:Xgt,each:Qgt,eachAfter:Zgt,eachBefore:Jgt,find:e0t,sum:t0t,sort:n0t,path:r0t,ancestors:s0t,descendants:o0t,leaves:a0t,links:u0t,copy:c0t,[Symbol.iterator]:l0t};function qO(e){return e==null?null:_Ce(e)}function _Ce(e){if(typeof e!="function")throw new Error;return e}function i1(){return 0}function hw(e){return function(){return e}}const p0t=1664525,m0t=1013904223,ife=4294967296;function g0t(){let e=1;return()=>(e=(p0t*e+m0t)%ife)/ife}function y0t(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function v0t(e,t){let n=e.length,r,i;for(;n;)i=t()*n--|0,r=e[n],e[n]=e[i],e[i]=r;return e}function b0t(e,t){for(var n=0,r=(e=v0t(Array.from(e),t)).length,i=[],s,o;n<r;)s=e[n],o&&wCe(o,s)?++n:(o=w0t(i=_0t(i,s)),n=0);return o}function _0t(e,t){var n,r;if(bB(t,e))return[t];for(n=0;n<e.length;++n)if(gP(t,e[n])&&bB(KA(e[n],t),e))return[e[n],t];for(n=0;n<e.length-1;++n)for(r=n+1;r<e.length;++r)if(gP(KA(e[n],e[r]),t)&&gP(KA(e[n],t),e[r])&&gP(KA(e[r],t),e[n])&&bB(ECe(e[n],e[r],t),e))return[e[n],e[r],t];throw new Error}function gP(e,t){var n=e.r-t.r,r=t.x-e.x,i=t.y-e.y;return n<0||n*n<r*r+i*i}function wCe(e,t){var n=e.r-t.r+Math.max(e.r,t.r,1)*1e-9,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function bB(e,t){for(var n=0;n<t.length;++n)if(!wCe(e,t[n]))return!1;return!0}function w0t(e){switch(e.length){case 1:return E0t(e[0]);case 2:return KA(e[0],e[1]);case 3:return ECe(e[0],e[1],e[2])}}function E0t(e){return{x:e.x,y:e.y,r:e.r}}function KA(e,t){var n=e.x,r=e.y,i=e.r,s=t.x,o=t.y,a=t.r,u=s-n,l=o-r,c=a-i,f=Math.sqrt(u*u+l*l);return{x:(n+s+u/f*c)/2,y:(r+o+l/f*c)/2,r:(f+i+a)/2}}function ECe(e,t,n){var r=e.x,i=e.y,s=e.r,o=t.x,a=t.y,u=t.r,l=n.x,c=n.y,f=n.r,d=r-o,h=r-l,p=i-a,m=i-c,g=u-s,y=f-s,v=r*r+i*i-s*s,b=v-o*o-a*a+u*u,w=v-l*l-c*c+f*f,E=h*p-d*m,T=(p*w-m*b)/(E*2)-r,S=(m*g-p*y)/E,A=(h*b-d*w)/(E*2)-i,C=(d*y-h*g)/E,k=S*S+C*C-1,N=2*(s+T*S+A*C),D=T*T+A*A-s*s,O=-(Math.abs(k)>1e-6?(N+Math.sqrt(N*N-4*k*D))/(2*k):D/N);return{x:r+T+S*O,y:i+A+C*O,r:O}}function sfe(e,t,n){var r=e.x-t.x,i,s,o=e.y-t.y,a,u,l=r*r+o*o;l?(s=t.r+n.r,s*=s,u=e.r+n.r,u*=u,s>u?(i=(l+u-s)/(2*l),a=Math.sqrt(Math.max(0,u/l-i*i)),n.x=e.x-i*r-a*o,n.y=e.y-i*o+a*r):(i=(l+s-u)/(2*l),a=Math.sqrt(Math.max(0,s/l-i*i)),n.x=t.x+i*r-a*o,n.y=t.y+i*o+a*r)):(n.x=t.x+n.r,n.y=t.y)}function ofe(e,t){var n=e.r+t.r-1e-6,r=t.x-e.x,i=t.y-e.y;return n>0&&n*n>r*r+i*i}function afe(e){var t=e._,n=e.next._,r=t.r+n.r,i=(t.x*n.r+n.x*t.r)/r,s=(t.y*n.r+n.y*t.r)/r;return i*i+s*s}function yP(e){this._=e,this.next=null,this.previous=null}function x0t(e,t){if(!(s=(e=y0t(e)).length))return 0;var n,r,i,s,o,a,u,l,c,f,d;if(n=e[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=e[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;sfe(r,n,i=e[2]),n=new yP(n),r=new yP(r),i=new yP(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;e:for(u=3;u<s;++u){sfe(n._,r._,i=e[u]),i=new yP(i),l=r.next,c=n.previous,f=r._.r,d=n._.r;do if(f<=d){if(ofe(l._,i._)){r=l,n.next=r,r.previous=n,--u;continue e}f+=l._.r,l=l.next}else{if(ofe(c._,i._)){n=c,n.next=r,r.previous=n,--u;continue e}d+=c._.r,c=c.previous}while(l!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,o=afe(n);(i=i.next)!==r;)(a=afe(i))<o&&(n=i,o=a);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=b0t(n,t),u=0;u<s;++u)n=e[u],n.x-=i.x,n.y-=i.y;return i.r}function S0t(e){return Math.sqrt(e.value)}function xCe(){var e=null,t=1,n=1,r=i1;function i(s){const o=g0t();return s.x=t/2,s.y=n/2,e?s.eachBefore(ufe(e)).eachAfter(_B(r,.5,o)).eachBefore(lfe(1)):s.eachBefore(ufe(S0t)).eachAfter(_B(i1,1,o)).eachAfter(_B(r,s.r/Math.min(t,n),o)).eachBefore(lfe(Math.min(t,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(e=qO(s),i):e},i.size=function(s){return arguments.length?(t=+s[0],n=+s[1],i):[t,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:hw(+s),i):r},i}function ufe(e){return function(t){t.children||(t.r=Math.max(0,+e(t)||0))}}function _B(e,t,n){return function(r){if(i=r.children){var i,s,o=i.length,a=e(r)*t||0,u;if(a)for(s=0;s<o;++s)i[s].r+=a;if(u=x0t(i,n),a)for(s=0;s<o;++s)i[s].r-=a;r.r=u+a}}}function lfe(e){return function(t){var n=t.parent;t.r*=e,n&&(t.x=n.x+e*t.x,t.y=n.y+e*t.y)}}function SCe(e){e.x0=Math.round(e.x0),e.y0=Math.round(e.y0),e.x1=Math.round(e.x1),e.y1=Math.round(e.y1)}function Gk(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(r-t)/e.value;++a<u;)o=s[a],o.y0=n,o.y1=i,o.x0=t,o.x1=t+=o.value*l}function T0t(){var e=1,t=1,n=0,r=!1;function i(o){var a=o.height+1;return o.x0=o.y0=n,o.x1=e,o.y1=t/a,o.eachBefore(s(t,a)),r&&o.eachBefore(SCe),o}function s(o,a){return function(u){u.children&&Gk(u,u.x0,o*(u.depth+1)/a,u.x1,o*(u.depth+2)/a);var l=u.x0,c=u.y0,f=u.x1-n,d=u.y1-n;f<l&&(l=f=(l+f)/2),d<c&&(c=d=(c+d)/2),u.x0=l,u.y0=c,u.x1=f,u.y1=d}}return i.round=function(o){return arguments.length?(r=!!o,i):r},i.size=function(o){return arguments.length?(e=+o[0],t=+o[1],i):[e,t]},i.padding=function(o){return arguments.length?(n=+o,i):n},i}var A0t={depth:-1},cfe={},wB={};function C0t(e){return e.id}function I0t(e){return e.parentId}function ffe(){var e=C0t,t=I0t,n;function r(i){var s=Array.from(i),o=e,a=t,u,l,c,f,d,h,p,m,g=new Map;if(n!=null){const y=s.map((w,E)=>k0t(n(w,E,i))),v=y.map(dfe),b=new Set(y).add("");for(const w of v)b.has(w)||(b.add(w),y.push(w),v.push(dfe(w)),s.push(wB));o=(w,E)=>y[E],a=(w,E)=>v[E]}for(c=0,u=s.length;c<u;++c)l=s[c],h=s[c]=new fx(l),(p=o(l,c,i))!=null&&(p+="")&&(m=h.id=p,g.set(m,g.has(m)?cfe:h)),(p=a(l,c,i))!=null&&(p+="")&&(h.parent=p);for(c=0;c<u;++c)if(h=s[c],p=h.parent){if(d=g.get(p),!d)throw new Error("missing: "+p);if(d===cfe)throw new Error("ambiguous: "+p);d.children?d.children.push(h):d.children=[h],h.parent=d}else{if(f)throw new Error("multiple roots");f=h}if(!f)throw new Error("no root");if(n!=null){for(;f.data===wB&&f.children.length===1;)f=f.children[0],--u;for(let y=s.length-1;y>=0&&(h=s[y],h.data===wB);--y)h.data=null}if(f.parent=A0t,f.eachBefore(function(y){y.depth=y.parent.depth+1,--u}).eachBefore(bCe),f.parent=null,u>0)throw new Error("cycle");return f}return r.id=function(i){return arguments.length?(e=qO(i),r):e},r.parentId=function(i){return arguments.length?(t=qO(i),r):t},r.path=function(i){return arguments.length?(n=qO(i),r):n},r}function k0t(e){e=`${e}`;let t=e.length;return pV(e,t-1)&&!pV(e,t-2)&&(e=e.slice(0,-1)),e[0]==="/"?e:`/${e}`}function dfe(e){let t=e.length;if(t<2)return"";for(;--t>1&&!pV(e,t););return e.slice(0,t)}function pV(e,t){if(e[t]==="/"){let n=0;for(;t>0&&e[--t]==="\\";)++n;if(!(n&1))return!0}return!1}function R0t(e,t){return e.parent===t.parent?1:2}function EB(e){var t=e.children;return t?t[0]:e.t}function xB(e){var t=e.children;return t?t[t.length-1]:e.t}function N0t(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function P0t(e){for(var t=0,n=0,r=e.children,i=r.length,s;--i>=0;)s=r[i],s.z+=t,s.m+=t,t+=s.s+(n+=s.c)}function O0t(e,t,n){return e.a.parent===t.parent?e.a:n}function WO(e,t){this._=e,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=t}WO.prototype=Object.create(fx.prototype);function D0t(e){for(var t=new WO(e,0),n,r=[t],i,s,o,a;n=r.pop();)if(s=n._.children)for(n.children=new Array(a=s.length),o=a-1;o>=0;--o)r.push(i=n.children[o]=new WO(s[o],o)),i.parent=n;return(t.parent=new WO(null,0)).children=[t],t}function $0t(){var e=R0t,t=1,n=1,r=null;function i(l){var c=D0t(l);if(c.eachAfter(s),c.parent.m=-c.z,c.eachBefore(o),r)l.eachBefore(u);else{var f=l,d=l,h=l;l.eachBefore(function(v){v.x<f.x&&(f=v),v.x>d.x&&(d=v),v.depth>h.depth&&(h=v)});var p=f===d?1:e(f,d)/2,m=p-f.x,g=t/(d.x+p+m),y=n/(h.depth||1);l.eachBefore(function(v){v.x=(v.x+m)*g,v.y=v.depth*y})}return l}function s(l){var c=l.children,f=l.parent.children,d=l.i?f[l.i-1]:null;if(c){P0t(l);var h=(c[0].z+c[c.length-1].z)/2;d?(l.z=d.z+e(l._,d._),l.m=l.z-h):l.z=h}else d&&(l.z=d.z+e(l._,d._));l.parent.A=a(l,d,l.parent.A||f[0])}function o(l){l._.x=l.z+l.parent.m,l.m+=l.parent.m}function a(l,c,f){if(c){for(var d=l,h=l,p=c,m=d.parent.children[0],g=d.m,y=h.m,v=p.m,b=m.m,w;p=xB(p),d=EB(d),p&&d;)m=EB(m),h=xB(h),h.a=l,w=p.z+v-d.z-g+e(p._,d._),w>0&&(N0t(O0t(p,l,f),l,w),g+=w,y+=w),v+=p.m,g+=d.m,b+=m.m,y+=h.m;p&&!xB(h)&&(h.t=p,h.m+=v-y),d&&!EB(m)&&(m.t=d,m.m+=g-b,f=l)}return f}function u(l){l.x*=t,l.y=l.depth*n}return i.separation=function(l){return arguments.length?(e=l,i):e},i.size=function(l){return arguments.length?(r=!1,t=+l[0],n=+l[1],i):r?null:[t,n]},i.nodeSize=function(l){return arguments.length?(r=!0,t=+l[0],n=+l[1],i):r?[t,n]:null},i}function hF(e,t,n,r,i){for(var s=e.children,o,a=-1,u=s.length,l=e.value&&(i-n)/e.value;++a<u;)o=s[a],o.x0=t,o.x1=r,o.y0=n,o.y1=n+=o.value*l}var TCe=(1+Math.sqrt(5))/2;function ACe(e,t,n,r,i,s){for(var o=[],a=t.children,u,l,c=0,f=0,d=a.length,h,p,m=t.value,g,y,v,b,w,E,T;c<d;){h=i-n,p=s-r;do g=a[f++].value;while(!g&&f<d);for(y=v=g,E=Math.max(p/h,h/p)/(m*e),T=g*g*E,w=Math.max(v/T,T/y);f<d;++f){if(g+=l=a[f].value,l<y&&(y=l),l>v&&(v=l),T=g*g*E,b=Math.max(v/T,T/y),b>w){g-=l;break}w=b}o.push(u={value:g,dice:h<p,children:a.slice(c,f)}),u.dice?Gk(u,n,r,i,m?r+=p*g/m:s):hF(u,n,r,m?n+=h*g/m:i,s),m-=g,c=f}return o}const CCe=function e(t){function n(r,i,s,o,a){ACe(t,r,i,s,o,a)}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(TCe);function M0t(){var e=CCe,t=!1,n=1,r=1,i=[0],s=i1,o=i1,a=i1,u=i1,l=i1;function c(d){return d.x0=d.y0=0,d.x1=n,d.y1=r,d.eachBefore(f),i=[0],t&&d.eachBefore(SCe),d}function f(d){var h=i[d.depth],p=d.x0+h,m=d.y0+h,g=d.x1-h,y=d.y1-h;g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),d.x0=p,d.y0=m,d.x1=g,d.y1=y,d.children&&(h=i[d.depth+1]=s(d)/2,p+=l(d)-h,m+=o(d)-h,g-=a(d)-h,y-=u(d)-h,g<p&&(p=g=(p+g)/2),y<m&&(m=y=(m+y)/2),e(d,p,m,g,y))}return c.round=function(d){return arguments.length?(t=!!d,c):t},c.size=function(d){return arguments.length?(n=+d[0],r=+d[1],c):[n,r]},c.tile=function(d){return arguments.length?(e=_Ce(d),c):e},c.padding=function(d){return arguments.length?c.paddingInner(d).paddingOuter(d):c.paddingInner()},c.paddingInner=function(d){return arguments.length?(s=typeof d=="function"?d:hw(+d),c):s},c.paddingOuter=function(d){return arguments.length?c.paddingTop(d).paddingRight(d).paddingBottom(d).paddingLeft(d):c.paddingTop()},c.paddingTop=function(d){return arguments.length?(o=typeof d=="function"?d:hw(+d),c):o},c.paddingRight=function(d){return arguments.length?(a=typeof d=="function"?d:hw(+d),c):a},c.paddingBottom=function(d){return arguments.length?(u=typeof d=="function"?d:hw(+d),c):u},c.paddingLeft=function(d){return arguments.length?(l=typeof d=="function"?d:hw(+d),c):l},c}function L0t(e,t,n,r,i){var s=e.children,o,a=s.length,u,l=new Array(a+1);for(l[0]=u=o=0;o<a;++o)l[o+1]=u+=s[o].value;c(0,a,e.value,t,n,r,i);function c(f,d,h,p,m,g,y){if(f>=d-1){var v=s[f];v.x0=p,v.y0=m,v.x1=g,v.y1=y;return}for(var b=l[f],w=h/2+b,E=f+1,T=d-1;E<T;){var S=E+T>>>1;l[S]<w?E=S+1:T=S}w-l[E-1]<l[E]-w&&f+1<E&&--E;var A=l[E]-b,C=h-A;if(g-p>y-m){var k=h?(p*C+g*A)/h:g;c(f,E,A,p,m,k,y),c(E,d,C,k,m,g,y)}else{var N=h?(m*C+y*A)/h:y;c(f,E,A,p,m,g,N),c(E,d,C,p,N,g,y)}}}function F0t(e,t,n,r,i){(e.depth&1?hF:Gk)(e,t,n,r,i)}const j0t=function e(t){function n(r,i,s,o,a){if((u=r._squarify)&&u.ratio===t)for(var u,l,c,f,d=-1,h,p=u.length,m=r.value;++d<p;){for(l=u[d],c=l.children,f=l.value=0,h=c.length;f<h;++f)l.value+=c[f].value;l.dice?Gk(l,i,s,o,m?s+=(a-s)*l.value/m:a):hF(l,i,s,m?i+=(o-i)*l.value/m:o,a),m-=l.value}else r._squarify=u=ACe(t,r,i,s,o,a),u.ratio=t}return n.ratio=function(r){return e((r=+r)>1?r:1)},n}(TCe);function fd(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Jy(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const mV=Symbol("implicit");function i_(){var e=new Wle,t=[],n=[],r=mV;function i(s){let o=e.get(s);if(o===void 0){if(r!==mV)return r;e.set(s,o=t.push(s)-1)}return n[o%n.length]}return i.domain=function(s){if(!arguments.length)return t.slice();t=[],e=new Wle;for(const o of s)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(s){return arguments.length?(n=Array.from(s),i):n.slice()},i.unknown=function(s){return arguments.length?(r=s,i):r},i.copy=function(){return i_(t,n).unknown(r)},fd.apply(i,arguments),i}function s_(){var e=i_().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,s,o,a=!1,u=0,l=0,c=.5;delete e.unknown;function f(){var d=t().length,h=i<r,p=h?i:r,m=h?r:i;s=(m-p)/Math.max(1,d-u+l*2),a&&(s=Math.floor(s)),p+=(m-p-s*(d-u))*c,o=s*(1-u),a&&(p=Math.round(p),o=Math.round(o));var g=ju(d).map(function(y){return p+s*y});return n(h?g.reverse():g)}return e.domain=function(d){return arguments.length?(t(d),f()):t()},e.range=function(d){return arguments.length?([r,i]=d,r=+r,i=+i,f()):[r,i]},e.rangeRound=function(d){return[r,i]=d,r=+r,i=+i,a=!0,f()},e.bandwidth=function(){return o},e.step=function(){return s},e.round=function(d){return arguments.length?(a=!!d,f()):a},e.padding=function(d){return arguments.length?(u=Math.min(1,l=+d),f()):u},e.paddingInner=function(d){return arguments.length?(u=Math.min(1,d),f()):u},e.paddingOuter=function(d){return arguments.length?(l=+d,f()):l},e.align=function(d){return arguments.length?(c=Math.max(0,Math.min(1,d)),f()):c},e.copy=function(){return s_(t(),[r,i]).round(a).paddingInner(u).paddingOuter(l).align(c)},fd.apply(f(),arguments)}function B0t(e){return function(){return e}}function gV(e){return+e}var hfe=[0,1];function Bu(e){return e}function yV(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:B0t(isNaN(t)?NaN:.5)}function U0t(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function z0t(e,t,n){var r=e[0],i=e[1],s=t[0],o=t[1];return i<r?(r=yV(i,r),s=n(o,s)):(r=yV(r,i),s=n(s,o)),function(a){return s(r(a))}}function V0t(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),s=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=yV(e[o],e[o+1]),s[o]=n(t[o],t[o+1]);return function(a){var u=ey(e,a,1,r)-1;return s[u](i[u](a))}}function Yk(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function pF(){var e=hfe,t=hfe,n=ug,r,i,s,o=Bu,a,u,l;function c(){var d=Math.min(e.length,t.length);return o!==Bu&&(o=U0t(e[0],e[d-1])),a=d>2?V0t:z0t,u=l=null,f}function f(d){return d==null||isNaN(d=+d)?s:(u||(u=a(e.map(r),t,n)))(r(o(d)))}return f.invert=function(d){return o(i((l||(l=a(t,e.map(r),wc)))(d)))},f.domain=function(d){return arguments.length?(e=Array.from(d,gV),c()):e.slice()},f.range=function(d){return arguments.length?(t=Array.from(d),c()):t.slice()},f.rangeRound=function(d){return t=Array.from(d),n=Vk,c()},f.clamp=function(d){return arguments.length?(o=d?!0:Bu,c()):o!==Bu},f.interpolate=function(d){return arguments.length?(n=d,c()):n},f.unknown=function(d){return arguments.length?(s=d,f):s},function(d,h){return r=d,i=h,c()}}function ICe(){return pF()(Bu,Bu)}function kCe(e,t,n,r){var i=ty(e,t,n),s;switch(r=cb(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(s=RAe(i,o))&&(r.precision=s),CX(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=NAe(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=kAe(i))&&(r.precision=s-(r.type==="%")*2);break}}return OS(r)}function o_(e){var t=e.domain;return e.ticks=function(n){var r=t();return Iz(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return kCe(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,s=r.length-1,o=r[i],a=r[s],u,l,c=10;for(a<o&&(l=o,o=a,a=l,l=i,i=s,s=l);c-- >0;){if(l=kz(o,a,n),l===u)return r[i]=o,r[s]=a,t(r);if(l>0)o=Math.floor(o/l)*l,a=Math.ceil(a/l)*l;else if(l<0)o=Math.ceil(o*l)/l,a=Math.floor(a*l)/l;else break;u=l}return e},e}function Bc(){var e=ICe();return e.copy=function(){return Yk(e,Bc())},fd.apply(e,arguments),o_(e)}function RCe(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,gV),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return RCe(e).unknown(t)},e=arguments.length?Array.from(e,gV):[0,1],o_(n)}function NCe(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],s=e[r],o;return s<i&&(o=n,n=r,r=o,o=i,i=s,s=o),e[n]=t.floor(i),e[r]=t.ceil(s),e}function pfe(e){return Math.log(e)}function mfe(e){return Math.exp(e)}function H0t(e){return-Math.log(-e)}function q0t(e){return-Math.exp(-e)}function W0t(e){return isFinite(e)?+("1e"+e):e<0?0:e}function G0t(e){return e===10?W0t:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Y0t(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function gfe(e){return(t,n)=>-e(-t,n)}function $X(e){const t=e(pfe,mfe),n=t.domain;let r=10,i,s;function o(){return i=Y0t(r),s=G0t(r),n()[0]<0?(i=gfe(i),s=gfe(s),e(H0t,q0t)):e(pfe,mfe),t}return t.base=function(a){return arguments.length?(r=+a,o()):r},t.domain=function(a){return arguments.length?(n(a),o()):n()},t.ticks=a=>{const u=n();let l=u[0],c=u[u.length-1];const f=c<l;f&&([l,c]=[c,l]);let d=i(l),h=i(c),p,m;const g=a==null?10:+a;let y=[];if(!(r%1)&&h-d<g){if(d=Math.floor(d),h=Math.ceil(h),l>0){for(;d<=h;++d)for(p=1;p<r;++p)if(m=d<0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}}else for(;d<=h;++d)for(p=r-1;p>=1;--p)if(m=d>0?p/s(-d):p*s(d),!(m<l)){if(m>c)break;y.push(m)}y.length*2<g&&(y=Iz(l,c,g))}else y=Iz(d,h,Math.min(h-d,g)).map(s);return f?y.reverse():y},t.tickFormat=(a,u)=>{if(a==null&&(a=10),u==null&&(u=r===10?"s":","),typeof u!="function"&&(!(r%1)&&(u=cb(u)).precision==null&&(u.trim=!0),u=OS(u)),a===1/0)return u;const l=Math.max(1,r*a/t.ticks().length);return c=>{let f=c/s(Math.round(i(c)));return f*r<r-.5&&(f*=r),f<=l?u(c):""}},t.nice=()=>n(NCe(n(),{floor:a=>s(Math.floor(i(a))),ceil:a=>s(Math.ceil(i(a)))})),t}function PCe(){const e=$X(pF()).domain([1,10]);return e.copy=()=>Yk(e,PCe()).base(e.base()),fd.apply(e,arguments),e}function yfe(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function vfe(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function MX(e){var t=1,n=e(yfe(t),vfe(t));return n.constant=function(r){return arguments.length?e(yfe(t=+r),vfe(t)):t},o_(n)}function OCe(){var e=MX(pF());return e.copy=function(){return Yk(e,OCe()).constant(e.constant())},fd.apply(e,arguments)}function bfe(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function K0t(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function X0t(e){return e<0?-e*e:e*e}function LX(e){var t=e(Bu,Bu),n=1;function r(){return n===1?e(Bu,Bu):n===.5?e(K0t,X0t):e(bfe(n),bfe(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},o_(t)}function FX(){var e=LX(pF());return e.copy=function(){return Yk(e,FX()).exponent(e.exponent())},fd.apply(e,arguments),e}function Q0t(){return FX.apply(null,arguments).exponent(.5)}function DCe(){var e=[],t=[],n=[],r;function i(){var o=0,a=Math.max(1,t.length);for(n=new Array(a-1);++o<a;)n[o-1]=CTe(e,o/a);return s}function s(o){return o==null||isNaN(o=+o)?r:t[ey(n,o)]}return s.invertExtent=function(o){var a=t.indexOf(o);return a<0?[NaN,NaN]:[a>0?n[a-1]:e[0],a<n.length?n[a]:e[e.length-1]]},s.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let a of o)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(lm),i()},s.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},s.unknown=function(o){return arguments.length?(r=o,s):r},s.quantiles=function(){return n.slice()},s.copy=function(){return DCe().domain(e).range(t).unknown(r)},fd.apply(s,arguments)}function $Ce(){var e=0,t=1,n=1,r=[.5],i=[0,1],s;function o(u){return u!=null&&u<=u?i[ey(r,u,0,n)]:s}function a(){var u=-1;for(r=new Array(n);++u<n;)r[u]=((u+1)*t-(u-n)*e)/(n+1);return o}return o.domain=function(u){return arguments.length?([e,t]=u,e=+e,t=+t,a()):[e,t]},o.range=function(u){return arguments.length?(n=(i=Array.from(u)).length-1,a()):i.slice()},o.invertExtent=function(u){var l=i.indexOf(u);return l<0?[NaN,NaN]:l<1?[e,r[0]]:l>=n?[r[n-1],t]:[r[l-1],r[l]]},o.unknown=function(u){return arguments.length&&(s=u),o},o.thresholds=function(){return r.slice()},o.copy=function(){return $Ce().domain([e,t]).range(i).unknown(s)},fd.apply(o_(o),arguments)}function MCe(){var e=[.5],t=[0,1],n,r=1;function i(s){return s!=null&&s<=s?t[ey(e,s,0,r)]:n}return i.domain=function(s){return arguments.length?(e=Array.from(s),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(s){return arguments.length?(t=Array.from(s),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(s){var o=t.indexOf(s);return[e[o-1],e[o]]},i.unknown=function(s){return arguments.length?(n=s,i):n},i.copy=function(){return MCe().domain(e).range(t).unknown(n)},fd.apply(i,arguments)}const SB=new Date,TB=new Date;function Ws(e,t,n,r){function i(s){return e(s=arguments.length===0?new Date:new Date(+s)),s}return i.floor=s=>(e(s=new Date(+s)),s),i.ceil=s=>(e(s=new Date(s-1)),t(s,1),e(s),s),i.round=s=>{const o=i(s),a=i.ceil(s);return s-o<a-s?o:a},i.offset=(s,o)=>(t(s=new Date(+s),o==null?1:Math.floor(o)),s),i.range=(s,o,a)=>{const u=[];if(s=i.ceil(s),a=a==null?1:Math.floor(a),!(s<o)||!(a>0))return u;let l;do u.push(l=new Date(+s)),t(s,a),e(s);while(l<s&&s<o);return u},i.filter=s=>Ws(o=>{if(o>=o)for(;e(o),!s(o);)o.setTime(o-1)},(o,a)=>{if(o>=o)if(a<0)for(;++a<=0;)for(;t(o,-1),!s(o););else for(;--a>=0;)for(;t(o,1),!s(o););}),n&&(i.count=(s,o)=>(SB.setTime(+s),TB.setTime(+o),e(SB),e(TB),Math.floor(n(SB,TB))),i.every=s=>(s=Math.floor(s),!isFinite(s)||!(s>0)?null:s>1?i.filter(r?o=>r(o)%s===0:o=>i.count(0,o)%s===0):i)),i}const dx=Ws(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);dx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ws(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):dx);dx.range;const Qp=1e3,kc=Qp*60,Jp=kc*60,Dm=Jp*24,jX=Dm*7,_fe=Dm*30,AB=Dm*365,Zp=Ws(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*Qp)},(e,t)=>(t-e)/Qp,e=>e.getUTCSeconds());Zp.range;const mF=Ws(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qp)},(e,t)=>{e.setTime(+e+t*kc)},(e,t)=>(t-e)/kc,e=>e.getMinutes());mF.range;const gF=Ws(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*kc)},(e,t)=>(t-e)/kc,e=>e.getUTCMinutes());gF.range;const yF=Ws(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*Qp-e.getMinutes()*kc)},(e,t)=>{e.setTime(+e+t*Jp)},(e,t)=>(t-e)/Jp,e=>e.getHours());yF.range;const vF=Ws(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*Jp)},(e,t)=>(t-e)/Jp,e=>e.getUTCHours());vF.range;const dm=Ws(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*kc)/Dm,e=>e.getDate()-1);dm.range;const O0=Ws(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dm,e=>e.getUTCDate()-1);O0.range;const LCe=Ws(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Dm,e=>Math.floor(e/Dm));LCe.range;function a_(e){return Ws(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*kc)/jX)}const $S=a_(0),_M=a_(1),J0t=a_(2),Z0t=a_(3),hx=a_(4),eyt=a_(5),tyt=a_(6);$S.range;_M.range;J0t.range;Z0t.range;hx.range;eyt.range;tyt.range;function u_(e){return Ws(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/jX)}const MS=u_(0),wM=u_(1),nyt=u_(2),ryt=u_(3),px=u_(4),iyt=u_(5),syt=u_(6);MS.range;wM.range;nyt.range;ryt.range;px.range;iyt.range;syt.range;const mI=Ws(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());mI.range;const gI=Ws(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());gI.range;const Nh=Ws(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Nh.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ws(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});Nh.range;const Ph=Ws(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ph.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ws(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ph.range;function FCe(e,t,n,r,i,s){const o=[[Zp,1,Qp],[Zp,5,5*Qp],[Zp,15,15*Qp],[Zp,30,30*Qp],[s,1,kc],[s,5,5*kc],[s,15,15*kc],[s,30,30*kc],[i,1,Jp],[i,3,3*Jp],[i,6,6*Jp],[i,12,12*Jp],[r,1,Dm],[r,2,2*Dm],[n,1,jX],[t,1,_fe],[t,3,3*_fe],[e,1,AB]];function a(l,c,f){const d=c<l;d&&([l,c]=[c,l]);const h=f&&typeof f.range=="function"?f:u(l,c,f),p=h?h.range(l,+c+1):[];return d?p.reverse():p}function u(l,c,f){const d=Math.abs(c-l)/f,h=NS(([,,g])=>g).right(o,d);if(h===o.length)return e.every(ty(l/AB,c/AB,f));if(h===0)return dx.every(Math.max(ty(l,c,f),1));const[p,m]=o[d/o[h-1][2]<o[h][2]/d?h-1:h];return p.every(m)}return[a,u]}const[oyt,ayt]=FCe(Ph,gI,MS,LCe,vF,gF),[uyt,lyt]=FCe(Nh,mI,$S,dm,yF,mF);function CB(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function IB(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function JT(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function jCe(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,s=e.days,o=e.shortDays,a=e.months,u=e.shortMonths,l=ZT(i),c=eA(i),f=ZT(s),d=eA(s),h=ZT(o),p=eA(o),m=ZT(a),g=eA(a),y=ZT(u),v=eA(u),b={a:B,A:U,b:H,B:P,c:null,d:Afe,e:Afe,f:Pyt,g:zyt,G:Hyt,H:kyt,I:Ryt,j:Nyt,L:BCe,m:Oyt,M:Dyt,p:z,q:W,Q:kfe,s:Rfe,S:$yt,u:Myt,U:Lyt,V:Fyt,w:jyt,W:Byt,x:null,X:null,y:Uyt,Y:Vyt,Z:qyt,"%":Ife},w={a:j,A:q,b:G,B:ne,c:null,d:Cfe,e:Cfe,f:Kyt,g:svt,G:avt,H:Wyt,I:Gyt,j:Yyt,L:zCe,m:Xyt,M:Qyt,p:ce,q:de,Q:kfe,s:Rfe,S:Jyt,u:Zyt,U:evt,V:tvt,w:nvt,W:rvt,x:null,X:null,y:ivt,Y:ovt,Z:uvt,"%":Ife},E={a:k,A:N,b:D,B:O,c:$,d:Sfe,e:Sfe,f:Tyt,g:xfe,G:Efe,H:Tfe,I:Tfe,j:wyt,L:Syt,m:_yt,M:Eyt,p:C,q:byt,Q:Cyt,s:Iyt,S:xyt,u:pyt,U:myt,V:gyt,w:hyt,W:yyt,x:F,X:M,y:xfe,Y:Efe,Z:vyt,"%":Ayt};b.x=T(n,b),b.X=T(r,b),b.c=T(t,b),w.x=T(n,w),w.X=T(r,w),w.c=T(t,w);function T(he,ve){return function(Ie){var be=[],Xe=-1,ze=0,yt=he.length,it,_e,ke;for(Ie instanceof Date||(Ie=new Date(+Ie));++Xe<yt;)he.charCodeAt(Xe)===37&&(be.push(he.slice(ze,Xe)),(_e=wfe[it=he.charAt(++Xe)])!=null?it=he.charAt(++Xe):_e=it==="e"?" ":"0",(ke=ve[it])&&(it=ke(Ie,_e)),be.push(it),ze=Xe+1);return be.push(he.slice(ze,Xe)),be.join("")}}function S(he,ve){return function(Ie){var be=JT(1900,void 0,1),Xe=A(be,he,Ie+="",0),ze,yt;if(Xe!=Ie.length)return null;if("Q"in be)return new Date(be.Q);if("s"in be)return new Date(be.s*1e3+("L"in be?be.L:0));if(ve&&!("Z"in be)&&(be.Z=0),"p"in be&&(be.H=be.H%12+be.p*12),be.m===void 0&&(be.m="q"in be?be.q:0),"V"in be){if(be.V<1||be.V>53)return null;"w"in be||(be.w=1),"Z"in be?(ze=IB(JT(be.y,0,1)),yt=ze.getUTCDay(),ze=yt>4||yt===0?wM.ceil(ze):wM(ze),ze=O0.offset(ze,(be.V-1)*7),be.y=ze.getUTCFullYear(),be.m=ze.getUTCMonth(),be.d=ze.getUTCDate()+(be.w+6)%7):(ze=CB(JT(be.y,0,1)),yt=ze.getDay(),ze=yt>4||yt===0?_M.ceil(ze):_M(ze),ze=dm.offset(ze,(be.V-1)*7),be.y=ze.getFullYear(),be.m=ze.getMonth(),be.d=ze.getDate()+(be.w+6)%7)}else("W"in be||"U"in be)&&("w"in be||(be.w="u"in be?be.u%7:"W"in be?1:0),yt="Z"in be?IB(JT(be.y,0,1)).getUTCDay():CB(JT(be.y,0,1)).getDay(),be.m=0,be.d="W"in be?(be.w+6)%7+be.W*7-(yt+5)%7:be.w+be.U*7-(yt+6)%7);return"Z"in be?(be.H+=be.Z/100|0,be.M+=be.Z%100,IB(be)):CB(be)}}function A(he,ve,Ie,be){for(var Xe=0,ze=ve.length,yt=Ie.length,it,_e;Xe<ze;){if(be>=yt)return-1;if(it=ve.charCodeAt(Xe++),it===37){if(it=ve.charAt(Xe++),_e=E[it in wfe?ve.charAt(Xe++):it],!_e||(be=_e(he,Ie,be))<0)return-1}else if(it!=Ie.charCodeAt(be++))return-1}return be}function C(he,ve,Ie){var be=l.exec(ve.slice(Ie));return be?(he.p=c.get(be[0].toLowerCase()),Ie+be[0].length):-1}function k(he,ve,Ie){var be=h.exec(ve.slice(Ie));return be?(he.w=p.get(be[0].toLowerCase()),Ie+be[0].length):-1}function N(he,ve,Ie){var be=f.exec(ve.slice(Ie));return be?(he.w=d.get(be[0].toLowerCase()),Ie+be[0].length):-1}function D(he,ve,Ie){var be=y.exec(ve.slice(Ie));return be?(he.m=v.get(be[0].toLowerCase()),Ie+be[0].length):-1}function O(he,ve,Ie){var be=m.exec(ve.slice(Ie));return be?(he.m=g.get(be[0].toLowerCase()),Ie+be[0].length):-1}function $(he,ve,Ie){return A(he,t,ve,Ie)}function F(he,ve,Ie){return A(he,n,ve,Ie)}function M(he,ve,Ie){return A(he,r,ve,Ie)}function B(he){return o[he.getDay()]}function U(he){return s[he.getDay()]}function H(he){return u[he.getMonth()]}function P(he){return a[he.getMonth()]}function z(he){return i[+(he.getHours()>=12)]}function W(he){return 1+~~(he.getMonth()/3)}function j(he){return o[he.getUTCDay()]}function q(he){return s[he.getUTCDay()]}function G(he){return u[he.getUTCMonth()]}function ne(he){return a[he.getUTCMonth()]}function ce(he){return i[+(he.getUTCHours()>=12)]}function de(he){return 1+~~(he.getUTCMonth()/3)}return{format:function(he){var ve=T(he+="",b);return ve.toString=function(){return he},ve},parse:function(he){var ve=S(he+="",!1);return ve.toString=function(){return he},ve},utcFormat:function(he){var ve=T(he+="",w);return ve.toString=function(){return he},ve},utcParse:function(he){var ve=S(he+="",!0);return ve.toString=function(){return he},ve}}}var wfe={"-":"",_:" ",0:"0"},vo=/^\s*\d+/,cyt=/^%/,fyt=/[\\^$*+?|[\]().{}]/g;function yr(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",s=i.length;return r+(s<n?new Array(n-s+1).join(t)+i:i)}function dyt(e){return e.replace(fyt,"\\$&")}function ZT(e){return new RegExp("^(?:"+e.map(dyt).join("|")+")","i")}function eA(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function hyt(e,t,n){var r=vo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function pyt(e,t,n){var r=vo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function myt(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function gyt(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function yyt(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Efe(e,t,n){var r=vo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function xfe(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function vyt(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function byt(e,t,n){var r=vo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function _yt(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Sfe(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function wyt(e,t,n){var r=vo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Tfe(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Eyt(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function xyt(e,t,n){var r=vo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function Syt(e,t,n){var r=vo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Tyt(e,t,n){var r=vo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Ayt(e,t,n){var r=cyt.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Cyt(e,t,n){var r=vo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Iyt(e,t,n){var r=vo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Afe(e,t){return yr(e.getDate(),t,2)}function kyt(e,t){return yr(e.getHours(),t,2)}function Ryt(e,t){return yr(e.getHours()%12||12,t,2)}function Nyt(e,t){return yr(1+dm.count(Nh(e),e),t,3)}function BCe(e,t){return yr(e.getMilliseconds(),t,3)}function Pyt(e,t){return BCe(e,t)+"000"}function Oyt(e,t){return yr(e.getMonth()+1,t,2)}function Dyt(e,t){return yr(e.getMinutes(),t,2)}function $yt(e,t){return yr(e.getSeconds(),t,2)}function Myt(e){var t=e.getDay();return t===0?7:t}function Lyt(e,t){return yr($S.count(Nh(e)-1,e),t,2)}function UCe(e){var t=e.getDay();return t>=4||t===0?hx(e):hx.ceil(e)}function Fyt(e,t){return e=UCe(e),yr(hx.count(Nh(e),e)+(Nh(e).getDay()===4),t,2)}function jyt(e){return e.getDay()}function Byt(e,t){return yr(_M.count(Nh(e)-1,e),t,2)}function Uyt(e,t){return yr(e.getFullYear()%100,t,2)}function zyt(e,t){return e=UCe(e),yr(e.getFullYear()%100,t,2)}function Vyt(e,t){return yr(e.getFullYear()%1e4,t,4)}function Hyt(e,t){var n=e.getDay();return e=n>=4||n===0?hx(e):hx.ceil(e),yr(e.getFullYear()%1e4,t,4)}function qyt(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+yr(t/60|0,"0",2)+yr(t%60,"0",2)}function Cfe(e,t){return yr(e.getUTCDate(),t,2)}function Wyt(e,t){return yr(e.getUTCHours(),t,2)}function Gyt(e,t){return yr(e.getUTCHours()%12||12,t,2)}function Yyt(e,t){return yr(1+O0.count(Ph(e),e),t,3)}function zCe(e,t){return yr(e.getUTCMilliseconds(),t,3)}function Kyt(e,t){return zCe(e,t)+"000"}function Xyt(e,t){return yr(e.getUTCMonth()+1,t,2)}function Qyt(e,t){return yr(e.getUTCMinutes(),t,2)}function Jyt(e,t){return yr(e.getUTCSeconds(),t,2)}function Zyt(e){var t=e.getUTCDay();return t===0?7:t}function evt(e,t){return yr(MS.count(Ph(e)-1,e),t,2)}function VCe(e){var t=e.getUTCDay();return t>=4||t===0?px(e):px.ceil(e)}function tvt(e,t){return e=VCe(e),yr(px.count(Ph(e),e)+(Ph(e).getUTCDay()===4),t,2)}function nvt(e){return e.getUTCDay()}function rvt(e,t){return yr(wM.count(Ph(e)-1,e),t,2)}function ivt(e,t){return yr(e.getUTCFullYear()%100,t,2)}function svt(e,t){return e=VCe(e),yr(e.getUTCFullYear()%100,t,2)}function ovt(e,t){return yr(e.getUTCFullYear()%1e4,t,4)}function avt(e,t){var n=e.getUTCDay();return e=n>=4||n===0?px(e):px.ceil(e),yr(e.getUTCFullYear()%1e4,t,4)}function uvt(){return"+0000"}function Ife(){return"%"}function kfe(e){return+e}function Rfe(e){return Math.floor(+e/1e3)}var G_,BX,HCe,bF,qCe;lvt({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lvt(e){return G_=jCe(e),BX=G_.format,HCe=G_.parse,bF=G_.utcFormat,qCe=G_.utcParse,G_}function cvt(e){return new Date(e)}function fvt(e){return e instanceof Date?+e:+new Date(+e)}function UX(e,t,n,r,i,s,o,a,u,l){var c=ICe(),f=c.invert,d=c.domain,h=l(".%L"),p=l(":%S"),m=l("%I:%M"),g=l("%I %p"),y=l("%a %d"),v=l("%b %d"),b=l("%B"),w=l("%Y");function E(T){return(u(T)<T?h:a(T)<T?p:o(T)<T?m:s(T)<T?g:r(T)<T?i(T)<T?y:v:n(T)<T?b:w)(T)}return c.invert=function(T){return new Date(f(T))},c.domain=function(T){return arguments.length?d(Array.from(T,fvt)):d().map(cvt)},c.ticks=function(T){var S=d();return e(S[0],S[S.length-1],T??10)},c.tickFormat=function(T,S){return S==null?E:l(S)},c.nice=function(T){var S=d();return(!T||typeof T.range!="function")&&(T=t(S[0],S[S.length-1],T??10)),T?d(NCe(S,T)):c},c.copy=function(){return Yk(c,UX(e,t,n,r,i,s,o,a,u,l))},c}function WCe(){return fd.apply(UX(uyt,lyt,Nh,mI,$S,dm,yF,mF,Zp,BX).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function dvt(){return fd.apply(UX(oyt,ayt,Ph,gI,MS,O0,vF,gF,Zp,bF).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function _F(){var e=0,t=1,n,r,i,s,o=Bu,a=!1,u;function l(f){return f==null||isNaN(f=+f)?u:o(i===0?.5:(f=(s(f)-n)*i,a?Math.max(0,Math.min(1,f)):f))}l.domain=function(f){return arguments.length?([e,t]=f,n=s(e=+e),r=s(t=+t),i=n===r?0:1/(r-n),l):[e,t]},l.clamp=function(f){return arguments.length?(a=!!f,l):a},l.interpolator=function(f){return arguments.length?(o=f,l):o};function c(f){return function(d){var h,p;return arguments.length?([h,p]=d,o=f(h,p),l):[o(0),o(1)]}}return l.range=c(ug),l.rangeRound=c(Vk),l.unknown=function(f){return arguments.length?(u=f,l):u},function(f){return s=f,n=f(e),r=f(t),i=n===r?0:1/(r-n),l}}function Zy(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function zX(){var e=o_(_F()(Bu));return e.copy=function(){return Zy(e,zX())},Jy.apply(e,arguments)}function GCe(){var e=$X(_F()).domain([1,10]);return e.copy=function(){return Zy(e,GCe()).base(e.base())},Jy.apply(e,arguments)}function YCe(){var e=MX(_F());return e.copy=function(){return Zy(e,YCe()).constant(e.constant())},Jy.apply(e,arguments)}function VX(){var e=LX(_F());return e.copy=function(){return Zy(e,VX()).exponent(e.exponent())},Jy.apply(e,arguments)}function hvt(){return VX.apply(null,arguments).exponent(.5)}function wF(){var e=0,t=.5,n=1,r=1,i,s,o,a,u,l=Bu,c,f=!1,d;function h(m){return isNaN(m=+m)?d:(m=.5+((m=+c(m))-s)*(r*m<r*s?a:u),l(f?Math.max(0,Math.min(1,m)):m))}h.domain=function(m){return arguments.length?([e,t,n]=m,i=c(e=+e),s=c(t=+t),o=c(n=+n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h):[e,t,n]},h.clamp=function(m){return arguments.length?(f=!!m,h):f},h.interpolator=function(m){return arguments.length?(l=m,h):l};function p(m){return function(g){var y,v,b;return arguments.length?([y,v,b]=g,l=gX(m,[y,v,b]),h):[l(0),l(.5),l(1)]}}return h.range=p(ug),h.rangeRound=p(Vk),h.unknown=function(m){return arguments.length?(d=m,h):d},function(m){return c=m,i=m(e),s=m(t),o=m(n),a=i===s?0:.5/(s-i),u=s===o?0:.5/(o-s),r=s<i?-1:1,h}}function KCe(){var e=o_(wF()(Bu));return e.copy=function(){return Zy(e,KCe())},Jy.apply(e,arguments)}function XCe(){var e=$X(wF()).domain([.1,1,10]);return e.copy=function(){return Zy(e,XCe()).base(e.base())},Jy.apply(e,arguments)}function QCe(){var e=MX(wF());return e.copy=function(){return Zy(e,QCe()).constant(e.constant())},Jy.apply(e,arguments)}function HX(){var e=LX(wF());return e.copy=function(){return Zy(e,HX()).exponent(e.exponent())},Jy.apply(e,arguments)}function pvt(){return HX.apply(null,arguments).exponent(.5)}function dd(e){for(var t=e.length/6|0,n=new Array(t),r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}const JCe=dd("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),mvt=dd("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),gvt=dd("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),yvt=dd("4269d0efb118ff725c6cc5b03ca951ff8ab7a463f297bbf59c6b4e9498a0"),vvt=dd("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),bvt=dd("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),_vt=dd("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),wvt=dd("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),Evt=dd("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),xvt=dd("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),ZCe=dd("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function xn(e){return function(){return e}}const Nfe=Math.abs,na=Math.atan2,Av=Math.cos,Svt=Math.max,kB=Math.min,Ad=Math.sin,x1=Math.sqrt,sa=1e-12,mx=Math.PI,EM=mx/2,QC=2*mx;function Tvt(e){return e>1?0:e<-1?mx:Math.acos(e)}function Pfe(e){return e>=1?EM:e<=-1?-EM:Math.asin(e)}function EF(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new wX(t)}function Avt(e){return e.innerRadius}function Cvt(e){return e.outerRadius}function Ivt(e){return e.startAngle}function kvt(e){return e.endAngle}function Rvt(e){return e&&e.padAngle}function Nvt(e,t,n,r,i,s,o,a){var u=n-e,l=r-t,c=o-i,f=a-s,d=f*u-c*l;if(!(d*d<sa))return d=(c*(t-s)-f*(e-i))/d,[e+d*u,t+d*l]}function vP(e,t,n,r,i,s,o){var a=e-n,u=t-r,l=(o?s:-s)/x1(a*a+u*u),c=l*u,f=-l*a,d=e+c,h=t+f,p=n+c,m=r+f,g=(d+p)/2,y=(h+m)/2,v=p-d,b=m-h,w=v*v+b*b,E=i-s,T=d*m-p*h,S=(b<0?-1:1)*x1(Svt(0,E*E*w-T*T)),A=(T*b-v*S)/w,C=(-T*v-b*S)/w,k=(T*b+v*S)/w,N=(-T*v+b*S)/w,D=A-g,O=C-y,$=k-g,F=N-y;return D*D+O*O>$*$+F*F&&(A=k,C=N),{cx:A,cy:C,x01:-c,y01:-f,x11:A*(i/E-1),y11:C*(i/E-1)}}function xM(){var e=Avt,t=Cvt,n=xn(0),r=null,i=Ivt,s=kvt,o=Rvt,a=null,u=EF(l);function l(){var c,f,d=+e.apply(this,arguments),h=+t.apply(this,arguments),p=i.apply(this,arguments)-EM,m=s.apply(this,arguments)-EM,g=Nfe(m-p),y=m>p;if(a||(a=c=u()),h<d&&(f=h,h=d,d=f),!(h>sa))a.moveTo(0,0);else if(g>QC-sa)a.moveTo(h*Av(p),h*Ad(p)),a.arc(0,0,h,p,m,!y),d>sa&&(a.moveTo(d*Av(m),d*Ad(m)),a.arc(0,0,d,m,p,y));else{var v=p,b=m,w=p,E=m,T=g,S=g,A=o.apply(this,arguments)/2,C=A>sa&&(r?+r.apply(this,arguments):x1(d*d+h*h)),k=kB(Nfe(h-d)/2,+n.apply(this,arguments)),N=k,D=k,O,$;if(C>sa){var F=Pfe(C/d*Ad(A)),M=Pfe(C/h*Ad(A));(T-=F*2)>sa?(F*=y?1:-1,w+=F,E-=F):(T=0,w=E=(p+m)/2),(S-=M*2)>sa?(M*=y?1:-1,v+=M,b-=M):(S=0,v=b=(p+m)/2)}var B=h*Av(v),U=h*Ad(v),H=d*Av(E),P=d*Ad(E);if(k>sa){var z=h*Av(b),W=h*Ad(b),j=d*Av(w),q=d*Ad(w),G;if(g<mx)if(G=Nvt(B,U,j,q,z,W,H,P)){var ne=B-G[0],ce=U-G[1],de=z-G[0],he=W-G[1],ve=1/Ad(Tvt((ne*de+ce*he)/(x1(ne*ne+ce*ce)*x1(de*de+he*he)))/2),Ie=x1(G[0]*G[0]+G[1]*G[1]);N=kB(k,(d-Ie)/(ve-1)),D=kB(k,(h-Ie)/(ve+1))}else N=D=0}S>sa?D>sa?(O=vP(j,q,B,U,h,D,y),$=vP(z,W,H,P,h,D,y),a.moveTo(O.cx+O.x01,O.cy+O.y01),D<k?a.arc(O.cx,O.cy,D,na(O.y01,O.x01),na($.y01,$.x01),!y):(a.arc(O.cx,O.cy,D,na(O.y01,O.x01),na(O.y11,O.x11),!y),a.arc(0,0,h,na(O.cy+O.y11,O.cx+O.x11),na($.cy+$.y11,$.cx+$.x11),!y),a.arc($.cx,$.cy,D,na($.y11,$.x11),na($.y01,$.x01),!y))):(a.moveTo(B,U),a.arc(0,0,h,v,b,!y)):a.moveTo(B,U),!(d>sa)||!(T>sa)?a.lineTo(H,P):N>sa?(O=vP(H,P,z,W,d,-N,y),$=vP(B,U,j,q,d,-N,y),a.lineTo(O.cx+O.x01,O.cy+O.y01),N<k?a.arc(O.cx,O.cy,N,na(O.y01,O.x01),na($.y01,$.x01),!y):(a.arc(O.cx,O.cy,N,na(O.y01,O.x01),na(O.y11,O.x11),!y),a.arc(0,0,d,na(O.cy+O.y11,O.cx+O.x11),na($.cy+$.y11,$.cx+$.x11),y),a.arc($.cx,$.cy,N,na($.y11,$.x11),na($.y01,$.x01),!y))):a.arc(0,0,d,E,w,y)}if(a.closePath(),c)return a=null,c+""||null}return l.centroid=function(){var c=(+e.apply(this,arguments)+ +t.apply(this,arguments))/2,f=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-mx/2;return[Av(f)*c,Ad(f)*c]},l.innerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:xn(+c),l):e},l.outerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:xn(+c),l):t},l.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:xn(+c),l):n},l.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:xn(+c),l):r},l.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:xn(+c),l):i},l.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:xn(+c),l):s},l.padAngle=function(c){return arguments.length?(o=typeof c=="function"?c:xn(+c),l):o},l.context=function(c){return arguments.length?(a=c??null,l):a},l}function xF(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function e2e(e){this._context=e}e2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function qX(e){return new e2e(e)}function t2e(e){return e[0]}function n2e(e){return e[1]}function r2e(e,t){var n=xn(!0),r=null,i=qX,s=null,o=EF(a);e=typeof e=="function"?e:e===void 0?t2e:xn(e),t=typeof t=="function"?t:t===void 0?n2e:xn(t);function a(u){var l,c=(u=xF(u)).length,f,d=!1,h;for(r==null&&(s=i(h=o())),l=0;l<=c;++l)!(l<c&&n(f=u[l],l,u))===d&&((d=!d)?s.lineStart():s.lineEnd()),d&&s.point(+e(f,l,u),+t(f,l,u));if(h)return s=null,h+""||null}return a.x=function(u){return arguments.length?(e=typeof u=="function"?u:xn(+u),a):e},a.y=function(u){return arguments.length?(t=typeof u=="function"?u:xn(+u),a):t},a.defined=function(u){return arguments.length?(n=typeof u=="function"?u:xn(!!u),a):n},a.curve=function(u){return arguments.length?(i=u,r!=null&&(s=i(r)),a):i},a.context=function(u){return arguments.length?(u==null?r=s=null:s=i(r=u),a):r},a}function i2e(e,t,n){var r=null,i=xn(!0),s=null,o=qX,a=null,u=EF(l);e=typeof e=="function"?e:e===void 0?t2e:xn(+e),t=typeof t=="function"?t:xn(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?n2e:xn(+n);function l(f){var d,h,p,m=(f=xF(f)).length,g,y=!1,v,b=new Array(m),w=new Array(m);for(s==null&&(a=o(v=u())),d=0;d<=m;++d){if(!(d<m&&i(g=f[d],d,f))===y)if(y=!y)h=d,a.areaStart(),a.lineStart();else{for(a.lineEnd(),a.lineStart(),p=d-1;p>=h;--p)a.point(b[p],w[p]);a.lineEnd(),a.areaEnd()}y&&(b[d]=+e(g,d,f),w[d]=+t(g,d,f),a.point(r?+r(g,d,f):b[d],n?+n(g,d,f):w[d]))}if(v)return a=null,v+""||null}function c(){return r2e().defined(i).curve(o).context(s)}return l.x=function(f){return arguments.length?(e=typeof f=="function"?f:xn(+f),r=null,l):e},l.x0=function(f){return arguments.length?(e=typeof f=="function"?f:xn(+f),l):e},l.x1=function(f){return arguments.length?(r=f==null?null:typeof f=="function"?f:xn(+f),l):r},l.y=function(f){return arguments.length?(t=typeof f=="function"?f:xn(+f),n=null,l):t},l.y0=function(f){return arguments.length?(t=typeof f=="function"?f:xn(+f),l):t},l.y1=function(f){return arguments.length?(n=f==null?null:typeof f=="function"?f:xn(+f),l):n},l.lineX0=l.lineY0=function(){return c().x(e).y(t)},l.lineY1=function(){return c().x(e).y(n)},l.lineX1=function(){return c().x(r).y(t)},l.defined=function(f){return arguments.length?(i=typeof f=="function"?f:xn(!!f),l):i},l.curve=function(f){return arguments.length?(o=f,s!=null&&(a=o(s)),l):o},l.context=function(f){return arguments.length?(f==null?s=a=null:a=o(s=f),l):s},l}function Pvt(e,t){return t<e?-1:t>e?1:t>=e?0:NaN}function Ovt(e){return e}function s2e(){var e=Ovt,t=Pvt,n=null,r=xn(0),i=xn(QC),s=xn(0);function o(a){var u,l=(a=xF(a)).length,c,f,d=0,h=new Array(l),p=new Array(l),m=+r.apply(this,arguments),g=Math.min(QC,Math.max(-QC,i.apply(this,arguments)-m)),y,v=Math.min(Math.abs(g)/l,s.apply(this,arguments)),b=v*(g<0?-1:1),w;for(u=0;u<l;++u)(w=p[h[u]=u]=+e(a[u],u,a))>0&&(d+=w);for(t!=null?h.sort(function(E,T){return t(p[E],p[T])}):n!=null&&h.sort(function(E,T){return n(a[E],a[T])}),u=0,f=d?(g-l*b)/d:0;u<l;++u,m=y)c=h[u],w=p[c],y=m+(w>0?w*f:0)+b,p[c]={data:a[c],index:u,value:w,startAngle:m,endAngle:y,padAngle:v};return p}return o.value=function(a){return arguments.length?(e=typeof a=="function"?a:xn(+a),o):e},o.sortValues=function(a){return arguments.length?(t=a,n=null,o):t},o.sort=function(a){return arguments.length?(n=a,t=null,o):n},o.startAngle=function(a){return arguments.length?(r=typeof a=="function"?a:xn(+a),o):r},o.endAngle=function(a){return arguments.length?(i=typeof a=="function"?a:xn(+a),o):i},o.padAngle=function(a){return arguments.length?(s=typeof a=="function"?a:xn(+a),o):s},o}const Dvt={draw(e,t){const n=x1(t/mx);e.moveTo(n,0),e.arc(0,0,n,0,QC)}};function $vt(e,t){let n=null,r=EF(i);e=typeof e=="function"?e:xn(e||Dvt),t=typeof t=="function"?t:xn(t===void 0?64:+t);function i(){let s;if(n||(n=s=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),s)return n=null,s+""||null}return i.type=function(s){return arguments.length?(e=typeof s=="function"?s:xn(s),i):e},i.size=function(s){return arguments.length?(t=typeof s=="function"?s:xn(+s),i):t},i.context=function(s){return arguments.length?(n=s??null,i):n},i}function ry(){}function SM(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function SF(e){this._context=e}SF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:SM(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:SM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Mvt(e){return new SF(e)}function o2e(e){this._context=e}o2e.prototype={areaStart:ry,areaEnd:ry,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:SM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Lvt(e){return new o2e(e)}function a2e(e){this._context=e}a2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:SM(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Fvt(e){return new a2e(e)}function u2e(e,t){this._basis=new SF(e),this._beta=t}u2e.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var e=this._x,t=this._y,n=e.length-1;if(n>0)for(var r=e[0],i=t[0],s=e[n]-r,o=t[n]-i,a=-1,u;++a<=n;)u=a/n,this._basis.point(this._beta*e[a]+(1-this._beta)*(r+u*s),this._beta*t[a]+(1-this._beta)*(i+u*o));this._x=this._y=null,this._basis.lineEnd()},point:function(e,t){this._x.push(+e),this._y.push(+t)}};const jvt=function e(t){function n(r){return t===1?new SF(r):new u2e(r,t)}return n.beta=function(r){return e(+r)},n}(.85);function TM(e,t,n){e._context.bezierCurveTo(e._x1+e._k*(e._x2-e._x0),e._y1+e._k*(e._y2-e._y0),e._x2+e._k*(e._x1-t),e._y2+e._k*(e._y1-n),e._x2,e._y2)}function WX(e,t){this._context=e,this._k=(1-t)/6}WX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:TM(this,this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2,this._x1=e,this._y1=t;break;case 2:this._point=3;default:TM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Bvt=function e(t){function n(r){return new WX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function GX(e,t){this._context=e,this._k=(1-t)/6}GX.prototype={areaStart:ry,areaEnd:ry,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:TM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Uvt=function e(t){function n(r){return new GX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function YX(e,t){this._context=e,this._k=(1-t)/6}YX.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:TM(this,e,t);break}this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const zvt=function e(t){function n(r){return new YX(r,t)}return n.tension=function(r){return e(+r)},n}(0);function KX(e,t,n){var r=e._x1,i=e._y1,s=e._x2,o=e._y2;if(e._l01_a>sa){var a=2*e._l01_2a+3*e._l01_a*e._l12_a+e._l12_2a,u=3*e._l01_a*(e._l01_a+e._l12_a);r=(r*a-e._x0*e._l12_2a+e._x2*e._l01_2a)/u,i=(i*a-e._y0*e._l12_2a+e._y2*e._l01_2a)/u}if(e._l23_a>sa){var l=2*e._l23_2a+3*e._l23_a*e._l12_a+e._l12_2a,c=3*e._l23_a*(e._l23_a+e._l12_a);s=(s*l+e._x1*e._l23_2a-t*e._l12_2a)/c,o=(o*l+e._y1*e._l23_2a-n*e._l12_2a)/c}e._context.bezierCurveTo(r,i,s,o,e._x2,e._y2)}function l2e(e,t){this._context=e,this._alpha=t}l2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3;default:KX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Vvt=function e(t){function n(r){return t?new l2e(r,t):new WX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function c2e(e,t){this._context=e,this._alpha=t}c2e.prototype={areaStart:ry,areaEnd:ry,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x3,this._y3),this._context.closePath();break}case 2:{this._context.lineTo(this._x3,this._y3),this._context.closePath();break}case 3:{this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5);break}}},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=e,this._y3=t;break;case 1:this._point=2,this._context.moveTo(this._x4=e,this._y4=t);break;case 2:this._point=3,this._x5=e,this._y5=t;break;default:KX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const Hvt=function e(t){function n(r){return t?new c2e(r,t):new GX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function f2e(e,t){this._context=e,this._alpha=t}f2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){if(e=+e,t=+t,this._point){var n=this._x2-e,r=this._y2-t;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:KX(this,e,t);break}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=e,this._y0=this._y1,this._y1=this._y2,this._y2=t}};const qvt=function e(t){function n(r){return t?new f2e(r,t):new YX(r,0)}return n.alpha=function(r){return e(+r)},n}(.5);function d2e(e){this._context=e}d2e.prototype={areaStart:ry,areaEnd:ry,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Wvt(e){return new d2e(e)}function Ofe(e){return e<0?-1:1}function Dfe(e,t,n){var r=e._x1-e._x0,i=t-e._x1,s=(e._y1-e._y0)/(r||i<0&&-0),o=(n-e._y1)/(i||r<0&&-0),a=(s*i+o*r)/(r+i);return(Ofe(s)+Ofe(o))*Math.min(Math.abs(s),Math.abs(o),.5*Math.abs(a))||0}function $fe(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function RB(e,t,n){var r=e._x0,i=e._y0,s=e._x1,o=e._y1,a=(s-r)/3;e._context.bezierCurveTo(r+a,i+a*t,s-a,o-a*n,s,o)}function AM(e){this._context=e}AM.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:RB(this,this._t0,$fe(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,RB(this,$fe(this,n=Dfe(this,e,t)),n);break;default:RB(this,this._t0,n=Dfe(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function h2e(e){this._context=new p2e(e)}(h2e.prototype=Object.create(AM.prototype)).point=function(e,t){AM.prototype.point.call(this,t,e)};function p2e(e){this._context=e}p2e.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,i,s){this._context.bezierCurveTo(t,e,r,n,s,i)}};function Gvt(e){return new AM(e)}function Yvt(e){return new h2e(e)}function m2e(e){this._context=e}m2e.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=Mfe(e),i=Mfe(t),s=0,o=1;o<n;++s,++o)this._context.bezierCurveTo(r[0][s],i[0][s],r[1][s],i[1][s],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function Mfe(e){var t,n=e.length-1,r,i=new Array(n),s=new Array(n),o=new Array(n);for(i[0]=0,s[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)i[t]=1,s[t]=4,o[t]=4*e[t]+2*e[t+1];for(i[n-1]=2,s[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=i[t]/s[t-1],s[t]-=r,o[t]-=r*o[t-1];for(i[n-1]=o[n-1]/s[n-1],t=n-2;t>=0;--t)i[t]=(o[t]-i[t+1])/s[t];for(s[n-1]=(e[n]+i[n-1])/2,t=0;t<n-1;++t)s[t]=2*e[t+1]-i[t+1];return[i,s]}function Kvt(e){return new m2e(e)}function TF(e,t){this._context=e,this._t=t}TF.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function Xvt(e){return new TF(e,.5)}function Qvt(e){return new TF(e,0)}function Jvt(e){return new TF(e,1)}function Lfe(e,t){if((o=e.length)>1)for(var n=1,r,i,s=e[t[0]],o,a=s.length;n<o;++n)for(i=s,s=e[t[n]],r=0;r<a;++r)s[r][1]+=s[r][0]=isNaN(i[r][1])?i[r][0]:i[r][1]}function Ffe(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Zvt(e,t){return e[t]}function e1t(e){const t=[];return t.key=e,t}function t1t(){var e=xn([]),t=Ffe,n=Lfe,r=Zvt;function i(s){var o=Array.from(e.apply(this,arguments),e1t),a,u=o.length,l=-1,c;for(const f of s)for(a=0,++l;a<u;++a)(o[a][l]=[0,+r(f,o[a].key,l,s)]).data=f;for(a=0,c=xF(t(o));a<u;++a)o[c[a]].index=a;return n(o,c),o}return i.keys=function(s){return arguments.length?(e=typeof s=="function"?s:xn(Array.from(s)),i):e},i.value=function(s){return arguments.length?(r=typeof s=="function"?s:xn(+s),i):r},i.order=function(s){return arguments.length?(t=s==null?Ffe:typeof s=="function"?s:xn(Array.from(s)),i):t},i.offset=function(s){return arguments.length?(n=s??Lfe,i):n},i}function XA(e,t,n){this.k=e,this.x=t,this.y=n}XA.prototype={constructor:XA,scale:function(e){return e===1?this:new XA(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new XA(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};XA.prototype;function jfe({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),i=I.useRef(null);return I.useEffect(()=>{xX(e.data,s=>({userID:+s["User ID"],salary:+s["Salary Value"]})).then(s=>{r(s)})},[e.data]),I.useEffect(()=>{if(n&&i.current){xi(i.current).selectAll("*").remove();const s={top:30,right:30,bottom:70,left:60},o=460-s.left-s.right,a=400-s.top-s.bottom,u=xi(i.current).attr("width",o+s.left+s.right).attr("height",a+s.top+s.bottom).append("g").attr("transform",`translate(${s.left},${s.top})`),l=s_().range([0,o]).domain(n.map(f=>f.userID.toString())).padding(.2);u.append("g").attr("transform",`translate(0,${a})`).call(xct(l)).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end");const c=Bc().domain([0,cm(n,f=>f.salary)||0]).range([a,0]);u.append("g").call(Sct(c)),u.selectAll(".bar").data(n).enter().append("rect").attr("class","bar").attr("x",f=>l(f.userID.toString())||0).attr("y",f=>c(f.salary)).attr("width",l.bandwidth()).attr("height",f=>a-c(f.salary)).attr("fill","#69b3a2")}},[n]),_.jsx("div",{children:n?_.jsx(_.Fragment,{children:_.jsx("svg",{ref:i,style:{height:400,width:460}})}):_.jsx(Kc,{})})}const n1t=Object.freeze(Object.defineProperty({__proto__:null,BarChart:jfe,default:jfe},Symbol.toStringTag,{value:"Module"}));function Bfe({parameters:e,setAnswer:t}){const[n,r]=I.useState(null);I.useEffect(()=>{xX(e.data,s=>({userID:+s["User ID"],salary:+s["Salary Value"]})).then(s=>{r(s)})},[e]),I.useEffect(()=>{if(n){const a=Math.min(800,400)/2,u=i_(JCe);xi("#pie-chart").select("svg").remove();const l=xi("#pie-chart").append("svg").attr("width",800).attr("height",400).append("g").attr("transform",`translate(${800/2},${400/2})`),c=s2e().value(h=>h.salary),f=xM().outerRadius(a).innerRadius(0),d=l.selectAll("arc").data(c(n)).enter().append("g").attr("class","arc");d.append("path").attr("d",f).attr("fill",(h,p)=>u(p.toString())),d.append("text").attr("transform",h=>`translate(${f.centroid(h)})`).attr("text-anchor","middle").text(h=>`ID ${h.data.userID}`)}},[n]);const i=()=>{n&&t({status:!0,answers:{salaryData:n}})};return _.jsx("div",{children:n?_.jsxs(_.Fragment,{children:[_.jsx("div",{id:"pie-chart",style:{height:400,width:800}}),_.jsx(cn,{onClick:i,children:"Submit Data"})]}):_.jsx(Kc,{})})}const r1t=Object.freeze(Object.defineProperty({__proto__:null,PieChart:Bfe,default:Bfe},Symbol.toStringTag,{value:"Module"}));function i1t({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const s1t=Object.freeze(Object.defineProperty({__proto__:null,Bars:i1t},Symbol.toStringTag,{value:"Module"}));function o1t({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const a1t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:o1t},Symbol.toStringTag,{value:"Module"}));function u1t({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const l1t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:u1t},Symbol.toStringTag,{value:"Module"}));function c1t({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Bc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const f1t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:c1t},Symbol.toStringTag,{value:"Module"}));function d1t({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Bc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const h1t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:d1t},Symbol.toStringTag,{value:"Module"}));function p1t({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=s_().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const m1t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:p1t},Symbol.toStringTag,{value:"Module"}));function g1t({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const y1t=Object.freeze(Object.defineProperty({__proto__:null,Slices:g1t},Symbol.toStringTag,{value:"Module"}));function v1t({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const b1t=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:v1t},Symbol.toStringTag,{value:"Module"}));function _1t({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const w1t=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:_1t},Symbol.toStringTag,{value:"Module"}));function XX({xScale:e,yRange:t,vertPosition:n,label:r,ticks:i,isDate:s=!1,showLines:o=!0,compact:a=!1}){const u=I.useMemo(()=>i.length>1?Math.abs(i[1].offset-i[0].offset):e.range()[0]-e.range()[1],[i,e]),l=I.useCallback(c=>(s?bF("%B"):OS(".2s"))(c),[s]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${e.range()[0]}, ${n+25})`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[0]-e.range()[1]),height:20,children:_.jsx(Cm,{children:_.jsx(Cs,{gap:3,children:_.jsx(et,{size:a?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(0, ${n})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),o?_.jsx("path",{transform:`translate(0, ${t[1]})`,d:["M",e.range()[0],0,"H",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:c,offset:f})=>_.jsxs("g",{transform:`translate(${f}, ${n})`,children:[_.jsx("line",{y2:"6",stroke:"currentColor"}),o?_.jsx("line",{y2:`${-(t[0]-t[1])}`,stroke:"lightgray"}):null,_.jsx("foreignObject",{x:0-u/2,y:10,width:u,height:20,children:_.jsx(Cm,{children:_.jsx(Ci,{withinPortal:!0,label:c,children:_.jsx(et,{px:2,size:"10px",style:{textAlign:"center",textOverflow:"ellipsis",overflow:"hidden",whiteSpace:"nowrap"},children:+c==0?0:l(s?new Date(c):c)})})})})]},c))]})}const E1t=Object.freeze(Object.defineProperty({__proto__:null,XAxisBar:XX},Symbol.toStringTag,{value:"Module"}));function g2e({yScale:e,xRange:t,horizontalPosition:n,label:r,ticks:i,showLines:s,compact:o=!1}){const a=I.useMemo(()=>{const u=i.reduce((l,{value:c})=>{const{length:f}=`${c}`;return f>l?f:l},0);return u>10?60:u*6},[i]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-a-40}, ${e.range()[1]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Cm,{children:_.jsx(Cs,{gap:3,children:_.jsx(et,{size:o?"10px":"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),s?_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}):null,i.map(({value:u,offset:l})=>_.jsxs("g",{transform:`translate(${n}, ${l})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),s?_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:"lightgray"}):null,_.jsx("g",{style:{transform:`translate(-${a+10}px, -9px)`},children:_.jsx("foreignObject",{width:a,height:20,children:_.jsx(Cs,{style:{width:"100%",height:"100%"},justify:"right",children:_.jsx(et,{style:{textOverflow:"ellipsis",overflow:"hidden"},size:"10px",children:u})})})},u)]},u))]})}const x1t=Object.freeze(Object.defineProperty({__proto__:null,YAxisBar:g2e},Symbol.toStringTag,{value:"Module"})),uc={top:15,left:100,right:50,bottom:50};function vV({barsTable:e,parameters:t,data:n}){const[r,{height:i,width:s}]=L1(),o=I.useMemo(()=>s-uc.left-uc.right,[s]),a=I.useMemo(()=>i-uc.top-uc.bottom,[i]),u=I.useMemo(()=>{const d=Array.from(new Set(n.map(h=>h[t.category])));return i_(ZCe).domain(d)},[n,t.category]),l=I.useMemo(()=>e?Bc([uc.left,o+uc.left]).domain([0,cm(e.objects().map(d=>d.count))]).nice():null,[e,o]),c=I.useMemo(()=>e?s_([uc.top,a+uc.top]).domain(e.array(t.category).sort()).paddingInner(.1):null,[e,a,t.category]),f=I.useMemo(()=>!l||!c||!u||!e?null:e.objects().map((d,h)=>d[t.category]===null||d.count===null?null:_.jsxs("g",{children:[_.jsx("rect",{x:uc.left,y:c(d[t.category]),fill:u(d[t.category]),height:c.bandwidth(),width:l(d.count)-uc.left},h),_.jsx("text",{x:l(d.count)+5,y:c(d[t.category])+c.bandwidth()/2,style:{textAlign:"center",dominantBaseline:"middle",fontSize:14},children:d.count})]},h)),[e,u,t.category,l,c]);return c&&l?_.jsxs("svg",{ref:r,style:{height:"200px",width:"550px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[_.jsx(XX,{xScale:l,yRange:c.range(),vertPosition:a+uc.top,showLines:!1,label:"Count",ticks:l.ticks(5).map(d=>({value:d.toString(),offset:l(d)}))}),c?_.jsx(g2e,{yScale:c,horizontalPosition:uc.left,xRange:l.range(),label:t.category,ticks:u.domain().map(d=>({value:d,offset:c(d)+c.bandwidth()/2}))}):null,f]}):_.jsx(Kc,{})}const S1t=Object.freeze(Object.defineProperty({__proto__:null,Bar:vV,default:vV},Symbol.toStringTag,{value:"Module"})),pr=Array.isArray;function nl(e){return e!=null?pr(e)?e:[e]:[]}function T1t(e=0,t=1/0){return`${Ufe(e)} < row_number() && row_number() <= ${Ufe(t)}`}function Ufe(e){return e<0?`count() + ${e}`:e}class y2e{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,n){return this.__derive(this,t,n)}filter(t){return this.__filter(this,t)}slice(t,n){return this.filter(T1t(t,n)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,n){return this.__relocate(this,nl(t),n)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,n){return this.__sample(this,t,n)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,n){return this.__impute(this,t,n)}fold(t,n){return this.__fold(this,t,n)}pivot(t,n,r){return this.__pivot(this,t,n,r)}spread(t,n){return this.__spread(this,t,n)}unroll(t,n){return this.__unroll(this,t,n)}lookup(t,n,...r){return this.__lookup(this,t,n,r.flat())}join(t,n,r,i){return this.__join(this,t,n,r,i)}join_left(t,n,r,i){const s={...i,left:!0,right:!1};return this.__join(this,t,n,r,s)}join_right(t,n,r,i){const s={...i,left:!1,right:!0};return this.__join(this,t,n,r,s)}join_full(t,n,r,i){const s={...i,left:!0,right:!0};return this.__join(this,t,n,r,s)}cross(t,n,r){return this.__cross(this,t,n,r)}semijoin(t,n){return this.__semijoin(this,t,n)}antijoin(t,n){return this.__antijoin(this,t,n)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function Sn(e){throw Error(e)}function iu(e){return typeof e=="number"}function gi(e){return typeof e=="function"}function AF(e,t){const n=Array(e);if(gi(t))for(let r=0;r<e;++r)n[r]=t(r);else n.fill(t);return n}let A1t=class extends y2e{constructor(t,n,r,i,s,o,a){super(a),this._names=Object.freeze(t),this._data=r,this._total=n,this._nrows=i?i.count():n,this._mask=n!==this._nrows&&i||null,this._group=s||null,this._order=o||null}create(t){Sn("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(this.numRows()!==1?"s":"");return`Table: ${this.numCols()+" col"+(this.numCols()!==1?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,n){return this.array(t,n)}array(t,n){Sn("Not implemented")}*values(t){const n=this.getter(t),r=this.numRows();for(let i=0;i<r;++i)yield n(i)}get(t,n=0){Sn("Not implemented")}getter(t){Sn("Not implemented")}objects(t){Sn("Not implemented")}object(t){Sn("Not implemented")}[Symbol.iterator](){Sn("Not implemented")}print(t={}){iu(t)?t={limit:t}:t.limit==null&&(t.limit=10);const n=this.objects({...t,grouped:!1}),r=`${this[Symbol.toStringTag]}. Showing ${n.length} rows.`;return console.log(r),console.table(n),this}indices(t=!0){if(this._index)return this._index;const n=this.numRows(),r=new Uint32Array(n),i=this.isOrdered(),s=this.mask();let o=-1;if(s)for(let a=s.next(0);a>=0;a=s.next(a+1))r[++o]=a;else for(let a=0;a<n;++a)r[++o]=a;if(t&&i){const a=this._order,u=this._data;r.sort((l,c)=>a(l,c,u))}return(t||!i)&&(this._index=r),r}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:n,size:r}=this._group,i=AF(r,()=>[]),s=this._index,o=this.mask(),a=this.numRows();if(s&&this.isOrdered())for(let u=0,l;u<a;++u)l=s[u],i[n[l]].push(l);else if(o)for(let u=o.next(0);u>=0;u=o.next(u+1))i[n[u]].push(u);else for(let u=0;u<a;++u)i[n[u]].push(u);if(t&&!s&&this.isOrdered()){const u=this._order,l=this._data;for(let c=0;c<r;++c)i[c].sort((f,d)=>u(f,d,l))}return(t||!this.isOrdered())&&(this._partitions=i),i}scan(t,n,r=1/0,i=0){const s=this._mask,o=this._nrows,a=this._data;let u=i||0;if(u>o)return;const l=Math.min(o,u+r),c=()=>u=this._total;if(n&&this.isOrdered()||s&&this._index){const f=this.indices(),d=this._data;for(;u<l;++u)t(f[u],d,c)}else if(s){let f=l-u+1;for(u=s.nth(u);--f&&u>-1;u=s.next(u+1))t(u,a,c)}else for(;u<l;++u)t(u,a,c)}slice(t=0,n=1/0){if(this.isGrouped())return super.slice(t,n);const r=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),n=Math.min(i,Math.max(0,n+(n<0?i:0))),this.scan(s=>r.push(s),!0,n-t,t),this.reify(r)}reduce(t){return this.__reduce(this,t)}},C1t=class{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}},I1t=function(e){return e&&gi(e.get)?e:new C1t(e)};function $m(e){return e instanceof Date}function xa(e){return e===Object(e)}function CM(e){return e instanceof RegExp}function Vo(e){return typeof e=="string"}function k1t(e,t){const n=r=>Sn(`Illegal argument type: ${r||typeof e}`);return e instanceof Map?zfe(e.entries(),t):$m(e)?n("Date"):CM(e)?n("RegExp"):Vo(e)?n():pr(e)?R1t(e,t):gi(e[Symbol.iterator])?N1t(e,t):xa(e)?zfe(Object.entries(e),t):n()}function zfe(e,t=["key","value"]){const n=[],r=[];for(const[s,o]of e)n.push(s),r.push(o);const i={};return t[0]&&(i[t[0]]=n),t[1]&&(i[t[1]]=r),i}function R1t(e,t){const n=e.length,r={},i=s=>r[s]=Array(n);if(n){t=t||Object.keys(e[0]);const s=t.map(i),o=s.length;for(let a=0;a<n;++a){const u=e[a];for(let l=0;l<o;++l)s[l][a]=u[t[l]]}}else t&&t.forEach(i);return r}function N1t(e,t){const n={},r=o=>n[o]=[];let i,s;for(const o of e){i||(t=t||Object.keys(o),i=t.map(r),s=i.length);for(let a=0;a<s;++a)i[a].push(o[t[a]])}return!i&&t&&t.forEach(r),n}const{hasOwnProperty:P1t}=Object.prototype;function Jf(e,t){return P1t.call(e,t)}function ic(e){return e?new Vfe({...e.data()},e.columnNames()):new Vfe}class Vfe{constructor(t,n){this.data=t||{},this.names=n||[]}add(t,n){return this.has(t)||this.names.push(t+""),this.data[t]=n}has(t){return Jf(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const lr=void 0,O1t=Object.getPrototypeOf(Int8Array);function Kk(e){return e instanceof O1t}function S1(e){return pr(e)||Kk(e)}function Lf(e){return e!=null&&e===e}const tA=e=>S1(e)||Vo(e),D1t={compact:e=>S1(e)?e.filter(t=>Lf(t)):e,concat:(...e)=>[].concat(...e),includes:(e,t,n)=>tA(e)?e.includes(t,n):!1,indexof:(e,t)=>tA(e)?e.indexOf(t):-1,join:(e,t)=>S1(e)?e.join(t):lr,lastindexof:(e,t)=>tA(e)?e.lastIndexOf(t):-1,length:e=>tA(e)?e.length:0,pluck:(e,t)=>S1(e)?e.map(n=>Lf(n)?n[t]:lr):lr,reverse:e=>S1(e)?e.slice().reverse():Vo(e)?e.split("").reverse().join(""):lr,slice:(e,t,n)=>tA(e)?e.slice(t,n):lr};function $1t(e,t,n,r,i){return e==null?null:e<t?-1/0:e>n?1/0:(e=Math.max(t,Math.min(e,n)),t+r*Math.floor(1e-14+(e-t)/r+(i||0)))}function GO(e,t,n="0"){const r=e+"",i=r.length;return i<t?Array(t-i+1).join(n)+r:r}const Cd=e=>(e<10?"0":"")+e,M1t=e=>e<0?"-"+GO(-e,6):e>9999?"+"+GO(e,6):GO(e,4);function v2e(e,t,n,r,i,s,o,a,u){const l=a?"Z":"";return M1t(e)+"-"+Cd(t+1)+"-"+Cd(n)+(!u||o?"T"+Cd(r)+":"+Cd(i)+":"+Cd(s)+"."+GO(o,3)+l:s?"T"+Cd(r)+":"+Cd(i)+":"+Cd(s)+l:i||r||!a?"T"+Cd(r)+":"+Cd(i)+l:"")}function b2e(e,t){return isNaN(e)?"Invalid Date":v2e(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds(),!1,t)}function CF(e,t){return isNaN(e)?"Invalid Date":v2e(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds(),!0,t)}const L1t=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function F1t(e){return e.match(L1t)&&!isNaN(Date.parse(e))}function j1t(e,t=Date.parse){return F1t(e)?t(e):e}const _2e=6e4,w2e=864e5,E2e=6048e5,Gi=new Date,Yi=new Date,is=e=>(Gi.setTime(typeof e=="string"?j1t(e):e),Gi);function B1t(e,t,n,r,i,s,o){return arguments.length?new Date(e,t||0,n??1,r||0,i||0,s||0,o||0):new Date(Date.now())}function U1t(e,t,n,r,i,s,o){return arguments.length?new Date(Date.UTC(e,t||0,n??1,r||0,i||0,s||0,o||0)):new Date(Date.now())}function z1t(e){Yi.setTime(+e),Yi.setHours(0,0,0,0),Gi.setTime(+Yi),Gi.setMonth(0),Gi.setDate(1);const t=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*_2e;return Math.floor(1+(Yi-Gi-t)/w2e)}function V1t(e){Yi.setTime(+e),Yi.setUTCHours(0,0,0,0);const t=Date.UTC(Yi.getUTCFullYear(),0,1);return Math.floor(1+(Yi-t)/w2e)}function H1t(e,t){const n=t||0;Yi.setTime(+e),Yi.setDate(Yi.getDate()-(Yi.getDay()+7-n)%7),Yi.setHours(0,0,0,0),Gi.setTime(+e),Gi.setMonth(0),Gi.setDate(1),Gi.setDate(1-(Gi.getDay()+7-n)%7),Gi.setHours(0,0,0,0);const r=(Yi.getTimezoneOffset()-Gi.getTimezoneOffset())*_2e;return Math.floor((1+(Yi-Gi)-r)/E2e)}function q1t(e,t){const n=t||0;return Yi.setTime(+e),Yi.setUTCDate(Yi.getUTCDate()-(Yi.getUTCDay()+7-n)%7),Yi.setUTCHours(0,0,0,0),Gi.setTime(+e),Gi.setUTCMonth(0),Gi.setUTCDate(1),Gi.setUTCDate(1-(Gi.getUTCDay()+7-n)%7),Gi.setUTCHours(0,0,0,0),Math.floor((1+(Yi-Gi))/E2e)}const W1t={format_date:(e,t)=>b2e(is(e),!t),format_utcdate:(e,t)=>CF(is(e),!t),timestamp:e=>+is(e),year:e=>is(e).getFullYear(),quarter:e=>Math.floor(is(e).getMonth()/3),month:e=>is(e).getMonth(),date:e=>is(e).getDate(),dayofweek:e=>is(e).getDay(),hours:e=>is(e).getHours(),minutes:e=>is(e).getMinutes(),seconds:e=>is(e).getSeconds(),milliseconds:e=>is(e).getMilliseconds(),utcyear:e=>is(e).getUTCFullYear(),utcquarter:e=>Math.floor(is(e).getUTCMonth()/3),utcmonth:e=>is(e).getUTCMonth(),utcdate:e=>is(e).getUTCDate(),utcdayofweek:e=>is(e).getUTCDay(),utchours:e=>is(e).getUTCHours(),utcminutes:e=>is(e).getUTCMinutes(),utcseconds:e=>is(e).getUTCSeconds(),utcmilliseconds:e=>is(e).getUTCMilliseconds(),datetime:B1t,dayofyear:z1t,week:H1t,utcdatetime:U1t,utcdayofyear:V1t,utcweek:q1t,now:Date.now};function QX(e,t){return e==null||t==null||e!==e||t!==t?!1:e===t?!0:$m(e)||$m(t)?+e==+t:CM(e)&&CM(t)?e+""==t+"":xa(e)&&xa(t)?G1t(e,t):!1}function G1t(e,t){if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1;if(e.length||t.length)return Hfe(e,t);const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length||(n.sort(),r.sort(),!Hfe(n,r,(s,o)=>s===o)))return!1;const i=n.length;for(let s=0;s<i;++s){const o=n[s];if(!QX(e[o],t[o]))return!1}return!0}function Hfe(e,t,n=QX){const r=e.length;if(r!==t.length)return!1;for(let i=0;i<r;++i)if(!n(e[i],t[i]))return!1;return!0}const Y1t={parse_json:e=>JSON.parse(e),to_json:e=>JSON.stringify(e)};let K1t=Math.random;function LS(){return K1t()}const X1t={random:LS,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:e=>180*e/Math.PI,radians:e=>Math.PI*e/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh};function JX(e){return e instanceof Map}function Q1t(e){return e instanceof Set}function YO(e){return JX(e)||Q1t(e)}function NB(e){return Array.from(e)}const J1t={has:(e,t)=>YO(e)?e.has(t):e!=null?Jf(e,t):!1,keys:e=>JX(e)?NB(e.keys()):e!=null?Object.keys(e):[],values:e=>YO(e)?NB(e.values()):e!=null?Object.values(e):[],entries:e=>YO(e)?NB(e.entries()):e!=null?Object.entries(e):[],object:e=>e?Object.fromEntries(e):lr};function Z1t(e,t,n){if(t instanceof Map){if(t.has(e))return t.get(e)}else if(Jf(t,e))return t[e];return n!==void 0?n:e}function ebt(e,t,n){let r=arguments.length;e=+e,t=+t,n=r<2?(t=e,e=0,1):r<3?1:+n,r=Math.max(0,Math.ceil((t-e)/n))|0;const i=new Array(r);for(let s=0;s<r;++s)i[s]=e+s*n;return i}const tbt={parse_date:e=>e==null?e:new Date(e),parse_float:e=>e==null?e:Number.parseFloat(e),parse_int:(e,t)=>e==null?e:Number.parseInt(e,t),endswith:(e,t,n)=>e==null?!1:String(e).endsWith(t,n),match:(e,t,n)=>{const r=e==null?e:String(e).match(t);return n==null||r==null?r:typeof n=="number"?r[n]:r.groups?r.groups[n]:null},normalize:(e,t)=>e==null?e:String(e).normalize(t),padend:(e,t,n)=>e==null?e:String(e).padEnd(t,n),padstart:(e,t,n)=>e==null?e:String(e).padStart(t,n),upper:e=>e==null?e:String(e).toUpperCase(),lower:e=>e==null?e:String(e).toLowerCase(),repeat:(e,t)=>e==null?e:String(e).repeat(t),replace:(e,t,n)=>e==null?e:String(e).replace(t,String(n)),substring:(e,t,n)=>e==null?e:String(e).substring(t,n),split:(e,t,n)=>e==null?[]:String(e).split(t,n),startswith:(e,t,n)=>e==null?!1:String(e).startsWith(t,n),trim:e=>e==null?e:String(e).trim()},qw={bin:$1t,equal:QX,recode:Z1t,sequence:ebt,...D1t,...W1t,...Y1t,...X1t,...J1t,...tbt};function yI(e){return typeof e=="bigint"}function Oh(e){return e===void 0?e+"":yI(e)?e+"n":JSON.stringify(e)}function bn(e,t=[],n=[]){return new nbt(e,nl(t),nl(n))}let nbt=class{constructor(t,n,r){this.name=t,this.fields=n,this.params=r}toString(){const t=[...this.fields.map(n=>`d[${Oh(n)}]`),...this.params.map(Oh)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}};const x2e=e=>bn("any",e),S2e=()=>bn("count"),T2e=e=>bn("array_agg",e),A2e=e=>bn("array_agg_distinct",e),C2e=(e,t)=>bn("map_agg",[e,t]),I2e=(e,t)=>bn("object_agg",[e,t]),k2e=(e,t)=>bn("entries_agg",[e,t]);({...qw});function rbt(e,t){e=YO(e)?e:new Set(e);let n=t,r=0;for(;e.has(n);)n=t+ ++r;return n}function ibt(e,t){if(!e||!t)return e;const{keys:n,rows:r,size:i}=e,s=new Int32Array(i);t.scan(c=>s[n[c]]=1);const o=s.reduce((c,f)=>c+f,0);if(o===i)return e;const a=Array(o);let u=0;for(let c=0;c<i;++c)s[c]&&(a[s[c]=u++]=r[c]);const l=new Uint32Array(n.length);return t.scan(c=>l[c]=s[n[c]]),{...e,keys:l,rows:a,size:u}}function sbt(e,t,n,r){const{keys:i,rows:s,size:o}=e;let a=s,u=o,l=null;if(n){l=new Int32Array(o),t(p=>l[i[p]]=1);const h=l.reduce((p,m)=>p+m,0);if(h!==o){a=Array(h),u=0;for(let p=0;p<o;++p)l[p]&&(a[l[p]=u++]=s[p])}}let c=-1;const f=new Uint32Array(r);return t(u!==o?h=>f[++c]=l[i[h]]:h=>f[++c]=i[h]),{...e,keys:f,rows:a,size:u}}function obt(e,t,n,r){const i=r==="map"||r===!0?C2e:r==="entries"?k2e:r==="object"?I2e:Sn('groups option must be "map", "entries", or "object".'),{names:s}=e.groups(),o=rbt(e.columnNames(),"_");let a=e.select().reify(t).create({data:{[o]:n}}).rollup({[o]:T2e(o)});for(let u=s.length;--u>=0;)a=a.groupby(s.slice(0,u)).rollup({[o]:i(s[u],o)});return a.get(o)}const abt="ArrayPattern",ubt="ArrowFunctionExpression",lbt="FunctionExpression",D0="Identifier",FS="Literal",R2e="MemberExpression",cbt="ObjectExpression",N2e="ObjectPattern",P2e="Property",Xk="Column",fbt="Constant",dbt="Dictionary",hbt="Function",pbt="Parameter",O2e="Op",ni=(e,t)=>{const n=mbt[e.type];return n?n(e,t):Sn(`Unsupported expression construct: ${e.type}`)},PB=(e,t)=>"("+ni(e.left,t)+" "+e.operator+" "+ni(e.right,t)+")",OB=(e,t)=>"("+Md(e.params,t)+")=>"+ni(e.body,t),qfe=(e,t)=>ni(e.callee,t)+"("+Md(e.arguments,t)+")",Md=(e,t,n=",")=>e.map(r=>ni(r,t)).join(n),D2e=e=>e.computed?`[${Oh(e.name)}]`:`.${e.name}`,Wfe=(e,t,n)=>{const r=e.table||"";return`data${r}${D2e(e)}.${n}(${t.index}${r})`},mbt={Constant:e=>e.raw,Column:(e,t)=>Wfe(e,t,"get"),Dictionary:(e,t)=>Wfe(e,t,"key"),Function:e=>`fn.${e.name}`,Parameter:e=>`$${D2e(e)}`,Op:(e,t)=>`op(${Oh(e.name)},${t.op||t.index})`,Literal:e=>e.raw,Identifier:e=>e.name,TemplateLiteral:(e,t)=>{const{quasis:n,expressions:r}=e,i=r.length;let s=n[0].value.raw;for(let o=0;o<i;)s+="${"+ni(r[o],t)+"}"+n[++o].value.raw;return"`"+s+"`"},MemberExpression:(e,t)=>{const n=!e.computed,r=ni(e.object,t),i=ni(e.property,t);return r+(n?"."+i:"["+i+"]")},CallExpression:qfe,NewExpression:(e,t)=>"new "+qfe(e,t),ArrayExpression:(e,t)=>"["+Md(e.elements,t)+"]",AssignmentExpression:PB,BinaryExpression:PB,LogicalExpression:PB,UnaryExpression:(e,t)=>"("+e.operator+ni(e.argument,t)+")",ConditionalExpression:(e,t)=>"("+ni(e.test,t)+"?"+ni(e.consequent,t)+":"+ni(e.alternate,t)+")",ObjectExpression:(e,t)=>"({"+Md(e.properties,t)+"})",Property:(e,t)=>{const n=ni(e.key,t);return(e.computed?`[${n}]`:n)+":"+ni(e.value,t)},ArrowFunctionExpression:OB,FunctionExpression:OB,FunctionDeclaration:OB,ArrayPattern:(e,t)=>"["+Md(e.elements,t)+"]",ObjectPattern:(e,t)=>"{"+Md(e.properties,t)+"}",VariableDeclaration:(e,t)=>e.kind+" "+Md(e.declarations,t,","),VariableDeclarator:(e,t)=>ni(e.id,t)+"="+ni(e.init,t),SpreadElement:(e,t)=>"..."+ni(e.argument,t),BlockStatement:(e,t)=>"{"+Md(e.body,t,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(e,t)=>ni(e.expression,t),IfStatement:(e,t)=>"if ("+ni(e.test,t)+")"+ni(e.consequent,t)+(e.alternate?" else "+ni(e.alternate,t):""),SwitchStatement:(e,t)=>"switch ("+ni(e.discriminant,t)+") {"+Md(e.cases,t,"")+"}",SwitchCase:(e,t)=>(e.test?"case "+ni(e.test,t):"default")+": "+Md(e.consequent,t,";")+";",ReturnStatement:(e,t)=>"return "+ni(e.argument,t),Program:(e,t)=>ni(e.body[0],t)};function IM(e,t={index:"row"}){return ni(e,t)}function gbt(e,t,n=15,r=!0,i=0,s){const a=Math.LN10;if(s==null){const u=Math.ceil(Math.log(n)/a),l=t-e||Math.abs(e)||1,c=[5,2];for(s=Math.max(i,Math.pow(10,Math.round(Math.log(l)/a)-u));Math.ceil(l/s)>n;)s*=10;const f=c.length;for(let d=0;d<f;++d){const h=s/c[d];h>=i&&l/h<=n&&(s=h)}}if(r){let u=Math.log(s);const l=u>=0?0:~~(-u/a)+1,c=Math.pow(10,-l-1);u=Math.floor(e/s+c)*s,e=e<u?u-s:u,t=Math.ceil(t/s)*s}return[e,t===e?e+s:t,s]}function gx(e){const t=typeof e;return t==="string"?`"${e}"`:t!=="object"||!e?e:$m(e)?+e:pr(e)||Kk(e)?`[${e.map(gx)}]`:CM(e)?e+"":ybt(e)}function ybt(e){let t="{",n=-1;for(const r in e)++n>0&&(t+=","),t+=`"${r}":${gx(e[r])}`;return t+="}",t}function kM(e,t){const n=e.length;return n===1?(r,i)=>gx(e[0](r,i)):(r,i)=>{let s="";for(let o=0;o<n;++o){o>0&&(s+="|");const a=e[o](r,i);if(t&&(a==null||a!==a))return null;s+=gx(a)}return s}}function vbt(){const e=new Map;return{count(){return e.size},values(){return Array.from(e.values(),t=>t.v)},increment(t){const n=gx(t),r=e.get(n);r?++r.n:e.set(n,{v:t,n:1})},decrement(t){const n=gx(t),r=e.get(n);r.n===1?e.delete(n):--r.n},forEach(t){e.forEach(({v:n,n:r})=>t(n,r))}}}function Lp(){}function bbt(e,t=0,n=e.length){let r=e[t++];for(let i=t;i<n;++i)r*=e[i];return r}function Rs(e){return e.init=e.init||Lp,e.add=e.add||Lp,e.rem=e.rem||Lp,e}function Gfe(e,t){return e.product_v=!1,e.product=t}const $2e={count:{create:()=>Rs({value:e=>e.count}),param:[]},array_agg:{create:()=>Rs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[1]},object_agg:{create:()=>Rs({init:e=>e.values=!0,value:e=>Object.fromEntries(e.list.values())}),param:[2]},map_agg:{create:()=>Rs({init:e=>e.values=!0,value:e=>new Map(e.list.values())}),param:[2]},entries_agg:{create:()=>Rs({init:e=>e.values=!0,value:e=>e.list.values(e.stream)}),param:[2]},any:{create:()=>Rs({add:(e,t)=>{e.any==null&&(e.any=t)},value:e=>e.valid?e.any:lr}),param:[1]},valid:{create:()=>Rs({value:e=>e.valid}),param:[1]},invalid:{create:()=>Rs({value:e=>e.count-e.valid}),param:[1]},distinct:{create:()=>({init:e=>e.distinct=vbt(),value:e=>e.distinct.count()+(e.valid===e.count?0:1),add:(e,t)=>e.distinct.increment(t),rem:(e,t)=>e.distinct.decrement(t)}),param:[1]},array_agg_distinct:{create:()=>Rs({value:e=>e.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Rs({value:e=>{let t=lr,n=0;return e.distinct.forEach((r,i)=>{i>n&&(n=i,t=r)}),t}}),param:[1],req:["distinct"]},sum:{create:()=>({init:e=>e.sum=0,value:e=>e.valid?e.sum:lr,add:(e,t)=>yI(t)?e.sum===0?e.sum=t:e.sum+=t:e.sum+=+t,rem:(e,t)=>e.sum-=t}),param:[1]},product:{create:()=>({init:e=>Gfe(e,1),value:e=>e.valid?e.product_v?Gfe(e,bbt(e.list.values())):e.product:void 0,add:(e,t)=>yI(t)&&e.product===1?e.product=t:e.product*=t,rem:(e,t)=>t==0||t===1/0||t===-1/0?e.product_v=!0:e.product/=t}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:e=>e.mean=0,value:e=>e.valid?e.mean:lr,add:(e,t)=>{e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid},rem:(e,t)=>{e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean}}),param:[1]},average:{create:()=>Rs({value:e=>e.valid?e.mean:lr}),param:[1],req:["mean"]},variance:{create:()=>({init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):lr,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Rs({value:e=>e.valid>1?e.dev/e.valid:lr}),param:[1],req:["variance"]},stdev:{create:()=>Rs({value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):lr}),param:[1],req:["variance"]},stdevp:{create:()=>Rs({value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):lr}),param:[1],req:["variance"]},min:{create:()=>({init:e=>e.min=lr,value:e=>e.min=Number.isNaN(e.min)?e.list.min():e.min,add:(e,t)=>{(t<e.min||e.min===lr)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:e=>e.max=lr,value:e=>e.max=Number.isNaN(e.max)?e.list.max():e.max,add:(e,t)=>{(t>e.max||e.max===lr)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:e=>Rs({value:t=>t.list.quantile(e)}),param:[1,1],req:["array_agg"]},median:{create:()=>Rs({value:e=>e.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:e=>{e.cov=e.mean_x=e.mean_y=e.dev_x=e.dev_y=0},value:e=>e.valid>1?e.cov/(e.valid-1):lr,add:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x+=r/e.valid,e.mean_y+=i/e.valid;const s=n-e.mean_y;e.dev_x+=r*(t-e.mean_x),e.dev_y+=i*s,e.cov+=r*s},rem:(e,t,n)=>{const r=t-e.mean_x,i=n-e.mean_y;e.mean_x-=e.valid?r/e.valid:e.mean_x,e.mean_y-=e.valid?i/e.valid:e.mean_y;const s=n-e.mean_y;e.dev_x-=r*(t-e.mean_x),e.dev_y-=i*s,e.cov-=r*s}}),param:[2]},covariancep:{create:()=>Rs({value:e=>e.valid>1?e.cov/e.valid:lr}),param:[2],req:["covariance"]},corr:{create:()=>Rs({value:e=>e.valid>1?e.cov/(Math.sqrt(e.dev_x)*Math.sqrt(e.dev_y)):lr}),param:[2],req:["covariance"]},bins:{create:(e,t,n,r)=>Rs({value:i=>gbt(i.min,i.max,e,t,n,r)}),param:[1,4],req:["min","max"]}},Yfe={create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?e=n+1:e}}},param:[]},Kfe={create(){let e;return{init:()=>e=0,value:t=>{const{index:n,peer:r,size:i}=t;let s=n;if(e<s){for(;s+1<i&&r(s+1);)++s;e=s}return(1+e)/i}}},param:[]},M2e={row_number:{create(){return{init:Lp,value:e=>e.index+1}},param:[]},rank:Yfe,avg_rank:{create(){let e,t;return{init:()=>(e=-1,t=1),value:n=>{const r=n.index;if(r>=e){for(t=e=r+1;n.peer(e);t+=++e);t/=e-r}return t}}},param:[]},dense_rank:{create(){let e;return{init:()=>e=1,value:t=>{const n=t.index;return n&&!t.peer(n)?++e:e}}},param:[]},percent_rank:{create(){const{init:e,value:t}=Yfe.create();return{init:e,value:n=>(t(n)-1)/(n.size-1)}},param:[]},cume_dist:Kfe,ntile:{create(e){e=+e,e>0||Sn("ntile num must be greater than zero.");const{init:t,value:n}=Kfe.create();return{init:t,value:r=>Math.ceil(e*n(r))}},param:[0,1]},lag:{create(e,t=lr){return e=+e||1,{init:Lp,value:(n,r)=>{const i=n.index-e;return i>=0?n.value(i,r):t}}},param:[1,2]},lead:{create(e,t=lr){return e=+e||1,{init:Lp,value:(n,r)=>{const i=n.index+e;return i<n.size?n.value(i,r):t}}},param:[1,2]},first_value:{create(){return{init:Lp,value:(e,t)=>e.value(e.i0,t)}},param:[1]},last_value:{create(){return{init:Lp,value:(e,t)=>e.value(e.i1-1,t)}},param:[1]},nth_value:{create(e){return e=+e,e>0||Sn("nth_value nth must be greater than zero."),{init:Lp,value:(t,n)=>{const r=t.i0+(e-1);return r<t.i1?t.value(r,n):lr}}},param:[1,1]},fill_down:{create(e=lr){let t;return{init:()=>t=e,value:(n,r)=>{const i=n.value(n.index,r);return Lf(i)?t=i:t}}},param:[1,1]},fill_up:{create(e=lr){let t,n;return{init:()=>(t=e,n=-1),value:(r,i)=>r.index<=n?t:(n=_bt(r,i,r.index))>=0?t=r.value(n,i):(n=r.size,t=e)}},param:[1,1]}};function _bt(e,t,n){for(const r=e.size;n<r;++n)if(Lf(e.value(n,t)))return n;return-1}function ZX(e){return Jf($2e,e)}function eQ(e){return Jf(M2e,e)}function L2e(e){return Jf(qw,e)||e==="row_object"}function F2e(e){return ZX(e)&&$2e[e]}function j2e(e){return eQ(e)&&M2e[e]}function nA(e,t,n){return e=`"use strict"; return ${e};`,Function("fn","$",e)(t,n)}const tQ={escape:(e,t,n)=>nA(e,t,n),expr:(e,t)=>nA(`(row,data,op)=>${e}`,qw,t),expr2:(e,t)=>nA(`(row0,data0,row,data)=>${e}`,qw,t),join:(e,t)=>nA(`(row1,data1,row2,data2)=>${e}`,qw,t),param:(e,t)=>nA(e,qw,t)},wbt={"==":1,"!=":1,"===":1,"!==":1};function B2e(e,t,n=0,r,i){if(e.type=Xk,e.name=t,e.table=n,i&&r&&gi(r.keyFor)){const s=wbt[i.operator]?i.left===e?i.right:i.left:i.callee&&i.callee.name==="equal"?i.arguments[i.arguments[0]===e?1:0]:null;s&&s.type===FS&&Ebt(i,e,s,r.keyFor(s.value))}return e}function Ebt(e,t,n,r){return r<0?(e.type=FS,e.value=!1,e.raw="false"):(t.type=dbt,n.value=r,n.raw=r+""),!0}function IF(e){return pr(e)?e:JX(e)?e.entries():e?Object.entries(e):[]}const U2e="row_object";function z2e(e,t){e.type=cbt;const n=e.properties=[];for(const r of IF(t)){const[i,s]=pr(r)?r:[r,r];n.push({type:P2e,key:{type:FS,raw:Oh(s)},value:B2e({computed:!0},i)})}return e}function V2e(e){return IM(z2e({},e))}function H2e(e){return tQ.expr(V2e(e))}const xbt=new TextDecoder("utf-8"),bV=e=>xbt.decode(e),Sbt=new TextEncoder,nQ=e=>Sbt.encode(e),Tbt=e=>typeof e=="boolean",Au=e=>typeof e=="function",ev=e=>e!=null&&Object(e)===e,kF=e=>ev(e)&&Au(e.then),rQ=e=>ev(e)&&Au(e[Symbol.iterator]),RF=e=>ev(e)&&Au(e[Symbol.asyncIterator]),Abt=e=>ev(e)&&"done"in e&&"value"in e,q2e=e=>"_getDOMStream"in e&&"_getNodeStream"in e,Cbt=e=>ev(e)&&Au(e.abort)&&Au(e.getWriter)&&!q2e(e),Ibt=e=>ev(e)&&Au(e.end)&&Au(e.write)&&Tbt(e.writable)&&!q2e(e),kbt=e=>ev(e)&&Au(e.clear)&&Au(e.bytes)&&Au(e.position)&&Au(e.setPosition)&&Au(e.capacity)&&Au(e.getBufferIdentifier)&&Au(e.createLong),iQ=typeof SharedArrayBuffer<"u"?SharedArrayBuffer:ArrayBuffer;function Rbt(e){const t=e[0]?[e[0]]:[];let n,r,i,s;for(let o,a,u=0,l=0,c=e.length;++u<c;){if(o=t[l],a=e[u],!o||!a||o.buffer!==a.buffer||a.byteOffset<o.byteOffset){a&&(t[++l]=a);continue}if({byteOffset:n,byteLength:i}=o,{byteOffset:r,byteLength:s}=a,n+i<r||r+s<n){a&&(t[++l]=a);continue}t[l]=new Uint8Array(o.buffer,n,r-n+s)}return t}function RM(e,t,n=0,r=t.byteLength){const i=e.byteLength,s=new Uint8Array(e.buffer,e.byteOffset,i),o=new Uint8Array(t.buffer,t.byteOffset,Math.min(r,i));return s.set(o,n),e}function Dh(e,t){const n=Rbt(e),r=n.reduce((c,f)=>c+f.byteLength,0);let i,s,o,a=0,u=-1;const l=Math.min(t||Number.POSITIVE_INFINITY,r);for(const c=n.length;++u<c;){if(i=n[u],s=i.subarray(0,Math.min(i.length,l-a)),l<=a+s.length){s.length<i.length?n[u]=i.subarray(s.length):s.length===i.length&&u++,o?RM(o,s,a):o=s;break}RM(o||(o=new Uint8Array(l)),s,a),a+=s.length}return[o||new Uint8Array(0),n.slice(u),r-(o?o.byteLength:0)]}function Js(e,t){let n=Abt(t)?t.value:t;return n instanceof e?e===Uint8Array?new e(n.buffer,n.byteOffset,n.byteLength):n:n?(typeof n=="string"&&(n=nQ(n)),n instanceof ArrayBuffer?new e(n):n instanceof iQ?new e(n):kbt(n)?Js(e,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new e(0):new e(n.buffer,n.byteOffset,n.byteLength/e.BYTES_PER_ELEMENT):e.from(n)):new e(0)}const rA=e=>Js(Int32Array,e),Dr=e=>Js(Uint8Array,e),_V=e=>(e.next(),e);function*Nbt(e,t){const n=function*(i){yield i},r=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof iQ?n(t):rQ(t)?t:n(t);return yield*_V(function*(i){let s=null;do s=i.next(yield Js(e,s));while(!s.done)}(r[Symbol.iterator]())),new e}const Pbt=e=>Nbt(Uint8Array,e);function W2e(e,t){return y1(this,arguments,function*(){if(kF(t))return yield Kn(yield Kn(yield*f8(MC(W2e(e,yield Kn(t))))));const r=function(o){return y1(this,arguments,function*(){yield yield Kn(yield Kn(o))})},i=function(o){return y1(this,arguments,function*(){yield Kn(yield*f8(MC(_V(function*(a){let u=null;do u=a.next(yield u==null?void 0:u.value);while(!u.done)}(o[Symbol.iterator]())))))})},s=typeof t=="string"||ArrayBuffer.isView(t)||t instanceof ArrayBuffer||t instanceof iQ?r(t):rQ(t)?i(t):RF(t)?t:r(t);return yield Kn(yield*f8(MC(_V(function(o){return y1(this,arguments,function*(){let a=null;do a=yield Kn(o.next(yield yield Kn(Js(e,a))));while(!a.done)})}(s[Symbol.asyncIterator]()))))),yield Kn(new e)})}const Obt=e=>W2e(Uint8Array,e);function G2e(e,t,n){if(e!==0){n=n.slice(0,t);for(let r=-1,i=n.length;++r<i;)n[r]+=e}return n.subarray(0,t)}function Dbt(e,t){let n=0;const r=e.length;if(r!==t.length)return!1;if(r>0)do if(e[n]!==t[n])return!1;while(++n<r);return!0}const Xfe={fromIterable(e){return bP($bt(e))},fromAsyncIterable(e){return bP(Mbt(e))},fromDOMStream(e){return bP(Lbt(e))},fromNodeStream(e){return bP(jbt(e))},toDOMStream(e,t){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(e,t){throw new Error('"toNodeStream" not available in this environment')}},bP=e=>(e.next(),e);function*$bt(e){let t,n=!1,r=[],i,s,o,a=0;function u(){return s==="peek"?Dh(r,o)[0]:([i,r,a]=Dh(r,o),i)}({cmd:s,size:o}=yield null);const l=Pbt(e)[Symbol.iterator]();try{do if({done:t,value:i}=Number.isNaN(o-a)?l.next():l.next(o-a),!t&&i.byteLength>0&&(r.push(i),a+=i.byteLength),t||o<=a)do({cmd:s,size:o}=yield u());while(o<a);while(!t)}catch(c){(n=!0)&&typeof l.throw=="function"&&l.throw(c)}finally{n===!1&&typeof l.return=="function"&&l.return(null)}return null}function Mbt(e){return y1(this,arguments,function*(){let n,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Dh(i,a)[0]:([s,i,u]=Dh(i,a),s)}({cmd:o,size:a}=yield yield Kn(null));const c=Obt(e)[Symbol.asyncIterator]();try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Kn(c.next()):yield Kn(c.next(a-u)),!n&&s.byteLength>0&&(i.push(s),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Kn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&typeof c.throw=="function"&&(yield Kn(c.throw(f)))}finally{r===!1&&typeof c.return=="function"&&(yield Kn(c.return(new Uint8Array(0))))}return yield Kn(null)})}function Lbt(e){return y1(this,arguments,function*(){let n=!1,r=!1,i=[],s,o,a,u=0;function l(){return o==="peek"?Dh(i,a)[0]:([s,i,u]=Dh(i,a),s)}({cmd:o,size:a}=yield yield Kn(null));const c=new Fbt(e);try{do if({done:n,value:s}=Number.isNaN(a-u)?yield Kn(c.read()):yield Kn(c.read(a-u)),!n&&s.byteLength>0&&(i.push(Dr(s)),u+=s.byteLength),n||a<=u)do({cmd:o,size:a}=yield yield Kn(l()));while(a<u);while(!n)}catch(f){(r=!0)&&(yield Kn(c.cancel(f)))}finally{r===!1?yield Kn(c.cancel()):e.locked&&c.releaseLock()}return yield Kn(null)})}class Fbt{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch(()=>{})}get closed(){return this.reader?this.reader.closed.catch(()=>{}):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return Bp(this,void 0,void 0,function*(){const{reader:n,source:r}=this;n&&(yield n.cancel(t).catch(()=>{})),r&&r.locked&&this.releaseLock()})}read(t){return Bp(this,void 0,void 0,function*(){if(t===0)return{done:this.reader==null,value:new Uint8Array(0)};const n=yield this.reader.read();return!n.done&&(n.value=Dr(n)),n})}}const DB=(e,t)=>{const n=i=>r([t,i]);let r;return[t,n,new Promise(i=>(r=i)&&e.once(t,n))]};function jbt(e){return y1(this,arguments,function*(){const n=[];let r="error",i=!1,s=null,o,a,u=0,l=[],c;function f(){return o==="peek"?Dh(l,a)[0]:([c,l,u]=Dh(l,a),c)}if({cmd:o,size:a}=yield yield Kn(null),e.isTTY)return yield yield Kn(new Uint8Array(0)),yield Kn(null);try{n[0]=DB(e,"end"),n[1]=DB(e,"error");do{if(n[2]=DB(e,"readable"),[r,s]=yield Kn(Promise.race(n.map(h=>h[2]))),r==="error")break;if((i=r==="end")||(Number.isFinite(a-u)?(c=Dr(e.read(a-u)),c.byteLength<a-u&&(c=Dr(e.read()))):c=Dr(e.read()),c.byteLength>0&&(l.push(c),u+=c.byteLength)),i||a<=u)do({cmd:o,size:a}=yield yield Kn(f()));while(a<u)}while(!i)}finally{yield Kn(d(n,r==="error"?s:null))}return yield Kn(null);function d(h,p){return c=l=null,new Promise((m,g)=>{for(const[y,v]of h)e.off(y,v);try{const y=e.destroy;y&&y.call(e,p),p=void 0}catch(y){p=y||p}finally{p!=null?g(p):m()}})}})}var Wa;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Wa||(Wa={}));var rl;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(rl||(rl={}));var Lo;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(Lo||(Lo={}));var $h;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})($h||($h={}));var Wt;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(Wt||(Wt={}));var Mh;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(Mh||(Mh={}));var to;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(to||(to={}));var re;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.Float=3]="Float",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct=13]="Struct",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.Dictionary=-1]="Dictionary",e[e.Int8=-2]="Int8",e[e.Int16=-3]="Int16",e[e.Int32=-4]="Int32",e[e.Int64=-5]="Int64",e[e.Uint8=-6]="Uint8",e[e.Uint16=-7]="Uint16",e[e.Uint32=-8]="Uint32",e[e.Uint64=-9]="Uint64",e[e.Float16=-10]="Float16",e[e.Float32=-11]="Float32",e[e.Float64=-12]="Float64",e[e.DateDay=-13]="DateDay",e[e.DateMillisecond=-14]="DateMillisecond",e[e.TimestampSecond=-15]="TimestampSecond",e[e.TimestampMillisecond=-16]="TimestampMillisecond",e[e.TimestampMicrosecond=-17]="TimestampMicrosecond",e[e.TimestampNanosecond=-18]="TimestampNanosecond",e[e.TimeSecond=-19]="TimeSecond",e[e.TimeMillisecond=-20]="TimeMillisecond",e[e.TimeMicrosecond=-21]="TimeMicrosecond",e[e.TimeNanosecond=-22]="TimeNanosecond",e[e.DenseUnion=-23]="DenseUnion",e[e.SparseUnion=-24]="SparseUnion",e[e.IntervalDayTime=-25]="IntervalDayTime",e[e.IntervalYearMonth=-26]="IntervalYearMonth",e[e.DurationSecond=-27]="DurationSecond",e[e.DurationMillisecond=-28]="DurationMillisecond",e[e.DurationMicrosecond=-29]="DurationMicrosecond",e[e.DurationNanosecond=-30]="DurationNanosecond"})(re||(re={}));var Np;(function(e){e[e.OFFSET=0]="OFFSET",e[e.DATA=1]="DATA",e[e.VALIDITY=2]="VALIDITY",e[e.TYPE=3]="TYPE"})(Np||(Np={}));const Bbt=void 0;function hb(e){if(e===null)return"null";if(e===Bbt)return"undefined";switch(typeof e){case"number":return`${e}`;case"bigint":return`${e}`;case"string":return`"${e}"`}return typeof e[Symbol.toPrimitive]=="function"?e[Symbol.toPrimitive]("string"):ArrayBuffer.isView(e)?e instanceof BigInt64Array||e instanceof BigUint64Array?`[${[...e].map(t=>hb(t))}]`:`[${e}]`:ArrayBuffer.isView(e)?`[${e}]`:JSON.stringify(e,(t,n)=>typeof n=="bigint"?`${n}`:n)}const Ubt=Symbol.for("isArrowBigNum");function hd(e,...t){return t.length===0?Object.setPrototypeOf(Js(this.TypedArray,e),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(e,...t),this.constructor.prototype)}hd.prototype[Ubt]=!0;hd.prototype.toJSON=function(){return`"${bI(this)}"`};hd.prototype.valueOf=function(){return Y2e(this)};hd.prototype.toString=function(){return bI(this)};hd.prototype[Symbol.toPrimitive]=function(e="default"){switch(e){case"number":return Y2e(this);case"string":return bI(this);case"default":return zbt(this)}return bI(this)};function yE(...e){return hd.apply(this,e)}function vE(...e){return hd.apply(this,e)}function vI(...e){return hd.apply(this,e)}Object.setPrototypeOf(yE.prototype,Object.create(Int32Array.prototype));Object.setPrototypeOf(vE.prototype,Object.create(Uint32Array.prototype));Object.setPrototypeOf(vI.prototype,Object.create(Uint32Array.prototype));Object.assign(yE.prototype,hd.prototype,{constructor:yE,signed:!0,TypedArray:Int32Array,BigIntArray:BigInt64Array});Object.assign(vE.prototype,hd.prototype,{constructor:vE,signed:!1,TypedArray:Uint32Array,BigIntArray:BigUint64Array});Object.assign(vI.prototype,hd.prototype,{constructor:vI,signed:!0,TypedArray:Uint32Array,BigIntArray:BigUint64Array});function Y2e(e){const{buffer:t,byteOffset:n,length:r,signed:i}=e,s=new BigUint64Array(t,n,r),o=i&&s.at(-1)&BigInt(1)<<BigInt(63);let a=BigInt(o?1:0),u=BigInt(0);if(o){for(const l of s)a+=~l*(BigInt(1)<<BigInt(32)*u++);a*=BigInt(-1)}else for(const l of s)a+=l*(BigInt(1)<<BigInt(32)*u++);return a}const bI=e=>{if(e.byteLength===8)return`${new e.BigIntArray(e.buffer,e.byteOffset,1)[0]}`;if(!e.signed)return $B(e);let t=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);if(new Int16Array([t.at(-1)])[0]>=0)return $B(e);t=t.slice();let r=1;for(let s=0;s<t.length;s++){const o=t[s],a=~o+r;t[s]=a,r&=o===0?1:0}return`-${$B(t)}`},zbt=e=>e.byteLength===8?new e.BigIntArray(e.buffer,e.byteOffset,1)[0]:bI(e);function $B(e){let t="";const n=new Uint32Array(2);let r=new Uint16Array(e.buffer,e.byteOffset,e.byteLength/2);const i=new Uint32Array((r=new Uint16Array(r).reverse()).buffer);let s=-1;const o=r.length-1;do{for(n[0]=r[s=0];s<o;)r[s++]=n[1]=n[0]/10,n[0]=(n[0]-n[1]*10<<16)+r[s];r[s]=n[1]=n[0]/10,n[0]=n[0]-n[1]*10,t=`${n[0]}${t}`}while(i[0]||i[1]||i[2]||i[3]);return t??"0"}class sQ{static new(t,n){switch(n){case!0:return new yE(t);case!1:return new vE(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case BigInt64Array:return new yE(t)}return t.byteLength===16?new vI(t):new vE(t)}static signed(t){return new yE(t)}static unsigned(t){return new vE(t)}static decimal(t){return new vI(t)}constructor(t,n){return sQ.new(t,n)}}function Zf(e){if(typeof e=="bigint"&&(e<Number.MIN_SAFE_INTEGER||e>Number.MAX_SAFE_INTEGER))throw new TypeError(`${e} is not safe to convert to a number.`);return Number(e)}var K2e,X2e,Q2e,J2e,Z2e,eIe,tIe,nIe,rIe,iIe,sIe,oIe,aIe,uIe,lIe,cIe,fIe,dIe,hIe,pIe;let Tn=class wV{static isNull(t){return(t==null?void 0:t.typeId)===re.Null}static isInt(t){return(t==null?void 0:t.typeId)===re.Int}static isFloat(t){return(t==null?void 0:t.typeId)===re.Float}static isBinary(t){return(t==null?void 0:t.typeId)===re.Binary}static isUtf8(t){return(t==null?void 0:t.typeId)===re.Utf8}static isBool(t){return(t==null?void 0:t.typeId)===re.Bool}static isDecimal(t){return(t==null?void 0:t.typeId)===re.Decimal}static isDate(t){return(t==null?void 0:t.typeId)===re.Date}static isTime(t){return(t==null?void 0:t.typeId)===re.Time}static isTimestamp(t){return(t==null?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(t==null?void 0:t.typeId)===re.Interval}static isDuration(t){return(t==null?void 0:t.typeId)===re.Duration}static isList(t){return(t==null?void 0:t.typeId)===re.List}static isStruct(t){return(t==null?void 0:t.typeId)===re.Struct}static isUnion(t){return(t==null?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(t==null?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(t==null?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(t==null?void 0:t.typeId)===re.Map}static isDictionary(t){return(t==null?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return wV.isUnion(t)&&t.mode===rl.Dense}static isSparseUnion(t){return wV.isUnion(t)&&t.mode===rl.Sparse}get typeId(){return re.NONE}};K2e=Symbol.toStringTag;Tn[K2e]=(e=>(e.children=null,e.ArrayType=Array,e[Symbol.toStringTag]="DataType"))(Tn.prototype);let Mm=class extends Tn{toString(){return"Null"}get typeId(){return re.Null}};X2e=Symbol.toStringTag;Mm[X2e]=(e=>e[Symbol.toStringTag]="Null")(Mm.prototype);class su extends Tn{constructor(t,n){super(),this.isSigned=t,this.bitWidth=n}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}Q2e=Symbol.toStringTag;su[Q2e]=(e=>(e.isSigned=null,e.bitWidth=null,e[Symbol.toStringTag]="Int"))(su.prototype);class oQ extends su{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class aQ extends su{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class iy extends su{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class uQ extends su{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class lQ extends su{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class cQ extends su{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class fQ extends su{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class dQ extends su{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(oQ.prototype,"ArrayType",{value:Int8Array});Object.defineProperty(aQ.prototype,"ArrayType",{value:Int16Array});Object.defineProperty(iy.prototype,"ArrayType",{value:Int32Array});Object.defineProperty(uQ.prototype,"ArrayType",{value:BigInt64Array});Object.defineProperty(lQ.prototype,"ArrayType",{value:Uint8Array});Object.defineProperty(cQ.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(fQ.prototype,"ArrayType",{value:Uint32Array});Object.defineProperty(dQ.prototype,"ArrayType",{value:BigUint64Array});class sy extends Tn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Lo.HALF:return Uint16Array;case Lo.SINGLE:return Float32Array;case Lo.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}J2e=Symbol.toStringTag;sy[J2e]=(e=>(e.precision=null,e[Symbol.toStringTag]="Float"))(sy.prototype);class mIe extends sy{constructor(){super(Lo.HALF)}}class hQ extends sy{constructor(){super(Lo.SINGLE)}}class pQ extends sy{constructor(){super(Lo.DOUBLE)}}Object.defineProperty(mIe.prototype,"ArrayType",{value:Uint16Array});Object.defineProperty(hQ.prototype,"ArrayType",{value:Float32Array});Object.defineProperty(pQ.prototype,"ArrayType",{value:Float64Array});let _I=class extends Tn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}};Z2e=Symbol.toStringTag;_I[Z2e]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Binary"))(_I.prototype);let yx=class extends Tn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}};eIe=Symbol.toStringTag;yx[eIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Utf8"))(yx.prototype);let wI=class extends Tn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}};tIe=Symbol.toStringTag;wI[tIe]=(e=>(e.ArrayType=Uint8Array,e[Symbol.toStringTag]="Bool"))(wI.prototype);let NM=class extends Tn{constructor(t,n,r=128){super(),this.scale=t,this.precision=n,this.bitWidth=r}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}};nIe=Symbol.toStringTag;NM[nIe]=(e=>(e.scale=null,e.precision=null,e.ArrayType=Uint32Array,e[Symbol.toStringTag]="Decimal"))(NM.prototype);class vx extends Tn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${(this.unit+1)*32}<${$h[this.unit]}>`}}rIe=Symbol.toStringTag;vx[rIe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Date"))(vx.prototype);class Vbt extends vx{constructor(){super($h.DAY)}}class Hbt extends vx{constructor(){super($h.MILLISECOND)}}class Lm extends Tn{constructor(t,n){super(),this.unit=t,this.bitWidth=n}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${Wt[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}iIe=Symbol.toStringTag;Lm[iIe]=(e=>(e.unit=null,e.bitWidth=null,e[Symbol.toStringTag]="Time"))(Lm.prototype);class qbt extends Lm{constructor(){super(Wt.SECOND,32)}}class Wbt extends Lm{constructor(){super(Wt.MILLISECOND,32)}}class Gbt extends Lm{constructor(){super(Wt.MICROSECOND,64)}}class Ybt extends Lm{constructor(){super(Wt.NANOSECOND,64)}}class PM extends Tn{constructor(t,n){super(),this.unit=t,this.timezone=n}get typeId(){return re.Timestamp}toString(){return`Timestamp<${Wt[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}sIe=Symbol.toStringTag;PM[sIe]=(e=>(e.unit=null,e.timezone=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Timestamp"))(PM.prototype);class bx extends Tn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${Mh[this.unit]}>`}}oIe=Symbol.toStringTag;bx[oIe]=(e=>(e.unit=null,e.ArrayType=Int32Array,e[Symbol.toStringTag]="Interval"))(bx.prototype);class Kbt extends bx{constructor(){super(Mh.DAY_TIME)}}class Xbt extends bx{constructor(){super(Mh.YEAR_MONTH)}}let OM=class extends Tn{constructor(t){super(),this.unit=t}get typeId(){return re.Duration}toString(){return`Duration<${Wt[this.unit]}>`}};aIe=Symbol.toStringTag;OM[aIe]=(e=>(e.unit=null,e.ArrayType=BigInt64Array,e[Symbol.toStringTag]="Duration"))(OM.prototype);let _x=class extends Tn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}};uIe=Symbol.toStringTag;_x[uIe]=(e=>(e.children=null,e[Symbol.toStringTag]="List"))(_x.prototype);class ha extends Tn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}lIe=Symbol.toStringTag;ha[lIe]=(e=>(e.children=null,e[Symbol.toStringTag]="Struct"))(ha.prototype);class EI extends Tn{constructor(t,n,r){super(),this.mode=t,this.children=r,this.typeIds=n=Int32Array.from(n),this.typeIdToChildIndex=n.reduce((i,s,o)=>(i[s]=o)&&i||i,Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map(t=>`${t.type}`).join(" | ")}>`}}cIe=Symbol.toStringTag;EI[cIe]=(e=>(e.mode=null,e.typeIds=null,e.children=null,e.typeIdToChildIndex=null,e.ArrayType=Int8Array,e[Symbol.toStringTag]="Union"))(EI.prototype);let DM=class extends Tn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}};fIe=Symbol.toStringTag;DM[fIe]=(e=>(e.byteWidth=null,e.ArrayType=Uint8Array,e[Symbol.toStringTag]="FixedSizeBinary"))(DM.prototype);let wx=class extends Tn{constructor(t,n){super(),this.listSize=t,this.children=[n]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}};dIe=Symbol.toStringTag;wx[dIe]=(e=>(e.children=null,e.listSize=null,e[Symbol.toStringTag]="FixedSizeList"))(wx.prototype);class xI extends Tn{constructor(t,n=!1){var r,i,s;if(super(),this.children=[t],this.keysSorted=n,t&&(t.name="entries",!((r=t==null?void 0:t.type)===null||r===void 0)&&r.children)){const o=(i=t==null?void 0:t.type)===null||i===void 0?void 0:i.children[0];o&&(o.name="key");const a=(s=t==null?void 0:t.type)===null||s===void 0?void 0:s.children[1];a&&(a.name="value")}}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map(t=>`${t.name}:${t.type}`).join(", ")}}>`}}hIe=Symbol.toStringTag;xI[hIe]=(e=>(e.children=null,e.keysSorted=null,e[Symbol.toStringTag]="Map_"))(xI.prototype);const Qbt=(e=>()=>++e)(-1);class oy extends Tn{constructor(t,n,r,i){super(),this.indices=n,this.dictionary=t,this.isOrdered=i||!1,this.id=r==null?Qbt():Zf(r)}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}pIe=Symbol.toStringTag;oy[pIe]=(e=>(e.id=null,e.indices=null,e.isOrdered=null,e.dictionary=null,e[Symbol.toStringTag]="Dictionary"))(oy.prototype);function jd(e){const t=e;switch(e.typeId){case re.Decimal:return e.bitWidth/32;case re.Timestamp:return 2;case re.Date:return 1+t.unit;case re.Interval:return 1+t.unit;case re.FixedSizeList:return t.listSize;case re.FixedSizeBinary:return t.byteWidth;default:return 1}}class Cn{visitMany(t,...n){return t.map((r,i)=>this.visit(r,...n.map(s=>s[i])))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,n=!0){return Jbt(this,t,n)}getVisitFnByTypeId(t,n=!0){return pw(this,t,n)}visitNull(t,...n){return null}visitBool(t,...n){return null}visitInt(t,...n){return null}visitFloat(t,...n){return null}visitUtf8(t,...n){return null}visitBinary(t,...n){return null}visitFixedSizeBinary(t,...n){return null}visitDate(t,...n){return null}visitTimestamp(t,...n){return null}visitTime(t,...n){return null}visitDecimal(t,...n){return null}visitList(t,...n){return null}visitStruct(t,...n){return null}visitUnion(t,...n){return null}visitDictionary(t,...n){return null}visitInterval(t,...n){return null}visitDuration(t,...n){return null}visitFixedSizeList(t,...n){return null}visitMap(t,...n){return null}}function Jbt(e,t,n=!0){return typeof t=="number"?pw(e,t,n):typeof t=="string"&&t in re?pw(e,re[t],n):t&&t instanceof Tn?pw(e,Qfe(t),n):t!=null&&t.type&&t.type instanceof Tn?pw(e,Qfe(t.type),n):pw(e,re.NONE,n)}function pw(e,t,n=!0){let r=null;switch(t){case re.Null:r=e.visitNull;break;case re.Bool:r=e.visitBool;break;case re.Int:r=e.visitInt;break;case re.Int8:r=e.visitInt8||e.visitInt;break;case re.Int16:r=e.visitInt16||e.visitInt;break;case re.Int32:r=e.visitInt32||e.visitInt;break;case re.Int64:r=e.visitInt64||e.visitInt;break;case re.Uint8:r=e.visitUint8||e.visitInt;break;case re.Uint16:r=e.visitUint16||e.visitInt;break;case re.Uint32:r=e.visitUint32||e.visitInt;break;case re.Uint64:r=e.visitUint64||e.visitInt;break;case re.Float:r=e.visitFloat;break;case re.Float16:r=e.visitFloat16||e.visitFloat;break;case re.Float32:r=e.visitFloat32||e.visitFloat;break;case re.Float64:r=e.visitFloat64||e.visitFloat;break;case re.Utf8:r=e.visitUtf8;break;case re.Binary:r=e.visitBinary;break;case re.FixedSizeBinary:r=e.visitFixedSizeBinary;break;case re.Date:r=e.visitDate;break;case re.DateDay:r=e.visitDateDay||e.visitDate;break;case re.DateMillisecond:r=e.visitDateMillisecond||e.visitDate;break;case re.Timestamp:r=e.visitTimestamp;break;case re.TimestampSecond:r=e.visitTimestampSecond||e.visitTimestamp;break;case re.TimestampMillisecond:r=e.visitTimestampMillisecond||e.visitTimestamp;break;case re.TimestampMicrosecond:r=e.visitTimestampMicrosecond||e.visitTimestamp;break;case re.TimestampNanosecond:r=e.visitTimestampNanosecond||e.visitTimestamp;break;case re.Time:r=e.visitTime;break;case re.TimeSecond:r=e.visitTimeSecond||e.visitTime;break;case re.TimeMillisecond:r=e.visitTimeMillisecond||e.visitTime;break;case re.TimeMicrosecond:r=e.visitTimeMicrosecond||e.visitTime;break;case re.TimeNanosecond:r=e.visitTimeNanosecond||e.visitTime;break;case re.Decimal:r=e.visitDecimal;break;case re.List:r=e.visitList;break;case re.Struct:r=e.visitStruct;break;case re.Union:r=e.visitUnion;break;case re.DenseUnion:r=e.visitDenseUnion||e.visitUnion;break;case re.SparseUnion:r=e.visitSparseUnion||e.visitUnion;break;case re.Dictionary:r=e.visitDictionary;break;case re.Interval:r=e.visitInterval;break;case re.IntervalDayTime:r=e.visitIntervalDayTime||e.visitInterval;break;case re.IntervalYearMonth:r=e.visitIntervalYearMonth||e.visitInterval;break;case re.Duration:r=e.visitDuration;break;case re.DurationSecond:r=e.visitDurationSecond||e.visitDuration;break;case re.DurationMillisecond:r=e.visitDurationMillisecond||e.visitDuration;break;case re.DurationMicrosecond:r=e.visitDurationMicrosecond||e.visitDuration;break;case re.DurationNanosecond:r=e.visitDurationNanosecond||e.visitDuration;break;case re.FixedSizeList:r=e.visitFixedSizeList;break;case re.Map:r=e.visitMap;break}if(typeof r=="function")return r;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[t]}'`)}function Qfe(e){switch(e.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:t,isSigned:n}=e;switch(t){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(e.precision){case Lo.HALF:return re.Float16;case Lo.SINGLE:return re.Float32;case Lo.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(e.unit){case Wt.SECOND:return re.TimeSecond;case Wt.MILLISECOND:return re.TimeMillisecond;case Wt.MICROSECOND:return re.TimeMicrosecond;case Wt.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(e.unit){case Wt.SECOND:return re.TimestampSecond;case Wt.MILLISECOND:return re.TimestampMillisecond;case Wt.MICROSECOND:return re.TimestampMicrosecond;case Wt.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(e.unit){case $h.DAY:return re.DateDay;case $h.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(e.unit){case Mh.DAY_TIME:return re.IntervalDayTime;case Mh.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Duration:switch(e.unit){case Wt.SECOND:return re.DurationSecond;case Wt.MILLISECOND:return re.DurationMillisecond;case Wt.MICROSECOND:return re.DurationMicrosecond;case Wt.NANOSECOND:return re.DurationNanosecond}return re.Duration;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(e.mode){case rl.Dense:return re.DenseUnion;case rl.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[e.typeId]}'`)}Cn.prototype.visitInt8=null;Cn.prototype.visitInt16=null;Cn.prototype.visitInt32=null;Cn.prototype.visitInt64=null;Cn.prototype.visitUint8=null;Cn.prototype.visitUint16=null;Cn.prototype.visitUint32=null;Cn.prototype.visitUint64=null;Cn.prototype.visitFloat16=null;Cn.prototype.visitFloat32=null;Cn.prototype.visitFloat64=null;Cn.prototype.visitDateDay=null;Cn.prototype.visitDateMillisecond=null;Cn.prototype.visitTimestampSecond=null;Cn.prototype.visitTimestampMillisecond=null;Cn.prototype.visitTimestampMicrosecond=null;Cn.prototype.visitTimestampNanosecond=null;Cn.prototype.visitTimeSecond=null;Cn.prototype.visitTimeMillisecond=null;Cn.prototype.visitTimeMicrosecond=null;Cn.prototype.visitTimeNanosecond=null;Cn.prototype.visitDenseUnion=null;Cn.prototype.visitSparseUnion=null;Cn.prototype.visitIntervalDayTime=null;Cn.prototype.visitIntervalYearMonth=null;Cn.prototype.visitDuration=null;Cn.prototype.visitDurationSecond=null;Cn.prototype.visitDurationMillisecond=null;Cn.prototype.visitDurationMicrosecond=null;Cn.prototype.visitDurationNanosecond=null;const gIe=new Float64Array(1),Y_=new Uint32Array(gIe.buffer);function yIe(e){const t=(e&31744)>>10,n=(e&1023)/1024,r=Math.pow(-1,(e&32768)>>15);switch(t){case 31:return r*(n?Number.NaN:1/0);case 0:return r*(n?6103515625e-14*n:0)}return r*Math.pow(2,t-15)*(1+n)}function vIe(e){if(e!==e)return 32256;gIe[0]=e;const t=(Y_[1]&2147483648)>>16&65535;let n=Y_[1]&2146435072,r=0;return n>=1089470464?Y_[0]>0?n=31744:(n=(n&2080374784)>>16,r=(Y_[1]&1048575)>>10):n<=1056964608?(r=1048576+(Y_[1]&1048575),r=1048576+(r<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,r=(Y_[1]&1048575)+512>>10),t|n|r&65535}class Qt extends Cn{}function sn(e){return(t,n,r)=>{if(t.setValid(n,r!=null))return e(t,n,r)}}const Zbt=(e,t,n)=>{e[t]=Math.trunc(n/864e5)},mQ=(e,t,n)=>{e[t]=Math.trunc(n%4294967296),e[t+1]=Math.trunc(n/4294967296)},e_t=(e,t,n)=>{e[t]=Math.trunc(n*1e3%4294967296),e[t+1]=Math.trunc(n*1e3/4294967296)},t_t=(e,t,n)=>{e[t]=Math.trunc(n*1e6%4294967296),e[t+1]=Math.trunc(n*1e6/4294967296)},bIe=(e,t,n,r)=>{if(n+1<t.length){const{[n]:i,[n+1]:s}=t;e.set(r.subarray(0,s-i),i)}},n_t=({offset:e,values:t},n,r)=>{const i=e+n;r?t[i>>3]|=1<<i%8:t[i>>3]&=~(1<<i%8)},lg=({values:e},t,n)=>{e[t]=n},gQ=({values:e},t,n)=>{e[t]=n},_Ie=({values:e},t,n)=>{e[t]=vIe(n)},r_t=(e,t,n)=>{switch(e.type.precision){case Lo.HALF:return _Ie(e,t,n);case Lo.SINGLE:case Lo.DOUBLE:return gQ(e,t,n)}},yQ=({values:e},t,n)=>{Zbt(e,t,n.valueOf())},vQ=({values:e},t,n)=>{mQ(e,t*2,n.valueOf())},wIe=({stride:e,values:t},n,r)=>{t.set(r.subarray(0,e),e*n)},i_t=({values:e,valueOffsets:t},n,r)=>bIe(e,t,n,r),s_t=({values:e,valueOffsets:t},n,r)=>{bIe(e,t,n,nQ(r))},EIe=(e,t,n)=>{e.type.unit===$h.DAY?yQ(e,t,n):vQ(e,t,n)},bQ=({values:e},t,n)=>mQ(e,t*2,n/1e3),_Q=({values:e},t,n)=>mQ(e,t*2,n),wQ=({values:e},t,n)=>e_t(e,t*2,n),EQ=({values:e},t,n)=>t_t(e,t*2,n),xIe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return bQ(e,t,n);case Wt.MILLISECOND:return _Q(e,t,n);case Wt.MICROSECOND:return wQ(e,t,n);case Wt.NANOSECOND:return EQ(e,t,n)}},xQ=({values:e},t,n)=>{e[t]=n},SQ=({values:e},t,n)=>{e[t]=n},TQ=({values:e},t,n)=>{e[t]=n},AQ=({values:e},t,n)=>{e[t]=n},SIe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return xQ(e,t,n);case Wt.MILLISECOND:return SQ(e,t,n);case Wt.MICROSECOND:return TQ(e,t,n);case Wt.NANOSECOND:return AQ(e,t,n)}},TIe=({values:e,stride:t},n,r)=>{e.set(r.subarray(0,t),t*n)},o_t=(e,t,n)=>{const r=e.children[0],i=e.valueOffsets,s=Uc.getVisitFn(r);if(Array.isArray(n))for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n[++o]);else for(let o=-1,a=i[t],u=i[t+1];a<u;)s(r,a++,n.get(++o))},a_t=(e,t,n)=>{const r=e.children[0],{valueOffsets:i}=e,s=Uc.getVisitFn(r);let{[t]:o,[t+1]:a}=i;const u=n instanceof Map?n.entries():Object.entries(n);for(const l of u)if(s(r,o,l),++o>=a)break},u_t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[s]),l_t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(s)),c_t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t.get(i.name)),f_t=(e,t)=>(n,r,i,s)=>r&&n(r,e,t[i.name]),d_t=(e,t,n)=>{const r=e.type.children.map(s=>Uc.getVisitFn(s.type)),i=n instanceof Map?c_t(t,n):n instanceof mr?l_t(t,n):Array.isArray(n)?u_t(t,n):f_t(t,n);e.type.children.forEach((s,o)=>i(r[o],e.children[o],s,o))},h_t=(e,t,n)=>{e.type.mode===rl.Dense?AIe(e,t,n):CIe(e,t,n)},AIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Uc.visit(i,e.valueOffsets[t],n)},CIe=(e,t,n)=>{const r=e.type.typeIdToChildIndex[e.typeIds[t]],i=e.children[r];Uc.visit(i,t,n)},p_t=(e,t,n)=>{var r;(r=e.dictionary)===null||r===void 0||r.set(e.values[t],n)},IIe=(e,t,n)=>{e.type.unit===Mh.DAY_TIME?CQ(e,t,n):IQ(e,t,n)},CQ=({values:e},t,n)=>{e.set(n.subarray(0,2),2*t)},IQ=({values:e},t,n)=>{e[t]=n[0]*12+n[1]%12},kQ=({values:e},t,n)=>{e[t]=n},RQ=({values:e},t,n)=>{e[t]=n},NQ=({values:e},t,n)=>{e[t]=n},PQ=({values:e},t,n)=>{e[t]=n},kIe=(e,t,n)=>{switch(e.type.unit){case Wt.SECOND:return kQ(e,t,n);case Wt.MILLISECOND:return RQ(e,t,n);case Wt.MICROSECOND:return NQ(e,t,n);case Wt.NANOSECOND:return PQ(e,t,n)}},m_t=(e,t,n)=>{const{stride:r}=e,i=e.children[0],s=Uc.getVisitFn(i);if(Array.isArray(n))for(let o=-1,a=t*r;++o<r;)s(i,a+o,n[o]);else for(let o=-1,a=t*r;++o<r;)s(i,a+o,n.get(o))};Qt.prototype.visitBool=sn(n_t);Qt.prototype.visitInt=sn(lg);Qt.prototype.visitInt8=sn(lg);Qt.prototype.visitInt16=sn(lg);Qt.prototype.visitInt32=sn(lg);Qt.prototype.visitInt64=sn(lg);Qt.prototype.visitUint8=sn(lg);Qt.prototype.visitUint16=sn(lg);Qt.prototype.visitUint32=sn(lg);Qt.prototype.visitUint64=sn(lg);Qt.prototype.visitFloat=sn(r_t);Qt.prototype.visitFloat16=sn(_Ie);Qt.prototype.visitFloat32=sn(gQ);Qt.prototype.visitFloat64=sn(gQ);Qt.prototype.visitUtf8=sn(s_t);Qt.prototype.visitBinary=sn(i_t);Qt.prototype.visitFixedSizeBinary=sn(wIe);Qt.prototype.visitDate=sn(EIe);Qt.prototype.visitDateDay=sn(yQ);Qt.prototype.visitDateMillisecond=sn(vQ);Qt.prototype.visitTimestamp=sn(xIe);Qt.prototype.visitTimestampSecond=sn(bQ);Qt.prototype.visitTimestampMillisecond=sn(_Q);Qt.prototype.visitTimestampMicrosecond=sn(wQ);Qt.prototype.visitTimestampNanosecond=sn(EQ);Qt.prototype.visitTime=sn(SIe);Qt.prototype.visitTimeSecond=sn(xQ);Qt.prototype.visitTimeMillisecond=sn(SQ);Qt.prototype.visitTimeMicrosecond=sn(TQ);Qt.prototype.visitTimeNanosecond=sn(AQ);Qt.prototype.visitDecimal=sn(TIe);Qt.prototype.visitList=sn(o_t);Qt.prototype.visitStruct=sn(d_t);Qt.prototype.visitUnion=sn(h_t);Qt.prototype.visitDenseUnion=sn(AIe);Qt.prototype.visitSparseUnion=sn(CIe);Qt.prototype.visitDictionary=sn(p_t);Qt.prototype.visitInterval=sn(IIe);Qt.prototype.visitIntervalDayTime=sn(CQ);Qt.prototype.visitIntervalYearMonth=sn(IQ);Qt.prototype.visitDuration=sn(kIe);Qt.prototype.visitDurationSecond=sn(kQ);Qt.prototype.visitDurationMillisecond=sn(RQ);Qt.prototype.visitDurationMicrosecond=sn(NQ);Qt.prototype.visitDurationNanosecond=sn(PQ);Qt.prototype.visitFixedSizeList=sn(m_t);Qt.prototype.visitMap=sn(a_t);const Uc=new Qt,Ef=Symbol.for("parent"),bE=Symbol.for("rowIndex");class OQ{constructor(t,n){return this[Ef]=t,this[bE]=n,new Proxy(this,new y_t)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[bE],n=this[Ef],r=n.type.children,i={};for(let s=-1,o=r.length;++s<o;)i[r[s].name]=il.visit(n.children[s],t);return i}toString(){return`{${[...this].map(([t,n])=>`${hb(t)}: ${hb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new g_t(this[Ef],this[bE])}}class g_t{constructor(t,n){this.childIndex=0,this.children=t.children,this.rowIndex=n,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,il.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(OQ.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Ef]:{writable:!0,enumerable:!1,configurable:!1,value:null},[bE]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class y_t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Ef].type.children.map(n=>n.name)}has(t,n){return t[Ef].type.children.findIndex(r=>r.name===n)!==-1}getOwnPropertyDescriptor(t,n){if(t[Ef].type.children.findIndex(r=>r.name===n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Ef].type.children.findIndex(i=>i.name===n);if(r!==-1){const i=il.visit(t[Ef].children[r],t[bE]);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Ef].type.children.findIndex(s=>s.name===n);return i!==-1?(Uc.visit(t[Ef].children[i],t[bE],r),Reflect.set(t,n,r)):Reflect.has(t,n)||typeof n=="symbol"?Reflect.set(t,n,r):!1}}class Gt extends Cn{}function Jt(e){return(t,n)=>t.getValid(n)?e(t,n):null}const v_t=(e,t)=>864e5*e[t],DQ=(e,t)=>4294967296*e[t+1]+(e[t]>>>0),b_t=(e,t)=>4294967296*(e[t+1]/1e3)+(e[t]>>>0)/1e3,__t=(e,t)=>4294967296*(e[t+1]/1e6)+(e[t]>>>0)/1e6,RIe=e=>new Date(e),w_t=(e,t)=>RIe(v_t(e,t)),E_t=(e,t)=>RIe(DQ(e,t)),x_t=(e,t)=>null,NIe=(e,t,n)=>{if(n+1>=t.length)return null;const r=t[n],i=t[n+1];return e.subarray(r,i)},S_t=({offset:e,values:t},n)=>{const r=e+n;return(t[r>>3]&1<<r%8)!==0},PIe=({values:e},t)=>w_t(e,t),OIe=({values:e},t)=>E_t(e,t*2),tv=({stride:e,values:t},n)=>t[e*n],T_t=({stride:e,values:t},n)=>yIe(t[e*n]),DIe=({values:e},t)=>e[t],A_t=({stride:e,values:t},n)=>t.subarray(e*n,e*(n+1)),C_t=({values:e,valueOffsets:t},n)=>NIe(e,t,n),I_t=({values:e,valueOffsets:t},n)=>{const r=NIe(e,t,n);return r!==null?bV(r):null},k_t=({values:e},t)=>e[t],R_t=({type:e,values:t},n)=>e.precision!==Lo.HALF?t[n]:yIe(t[n]),N_t=(e,t)=>e.type.unit===$h.DAY?PIe(e,t):OIe(e,t),$Ie=({values:e},t)=>1e3*DQ(e,t*2),MIe=({values:e},t)=>DQ(e,t*2),LIe=({values:e},t)=>b_t(e,t*2),FIe=({values:e},t)=>__t(e,t*2),P_t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return $Ie(e,t);case Wt.MILLISECOND:return MIe(e,t);case Wt.MICROSECOND:return LIe(e,t);case Wt.NANOSECOND:return FIe(e,t)}},jIe=({values:e},t)=>e[t],BIe=({values:e},t)=>e[t],UIe=({values:e},t)=>e[t],zIe=({values:e},t)=>e[t],O_t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return jIe(e,t);case Wt.MILLISECOND:return BIe(e,t);case Wt.MICROSECOND:return UIe(e,t);case Wt.NANOSECOND:return zIe(e,t)}},D_t=({values:e,stride:t},n)=>sQ.decimal(e.subarray(t*n,t*(n+1))),$_t=(e,t)=>{const{valueOffsets:n,stride:r,children:i}=e,{[t*r]:s,[t*r+1]:o}=n,u=i[0].slice(s,o-s);return new mr([u])},M_t=(e,t)=>{const{valueOffsets:n,children:r}=e,{[t]:i,[t+1]:s}=n,o=r[0];return new NF(o.slice(i,s-i))},L_t=(e,t)=>new OQ(e,t),F_t=(e,t)=>e.type.mode===rl.Dense?VIe(e,t):HIe(e,t),VIe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return il.visit(r,e.valueOffsets[t])},HIe=(e,t)=>{const n=e.type.typeIdToChildIndex[e.typeIds[t]],r=e.children[n];return il.visit(r,t)},j_t=(e,t)=>{var n;return(n=e.dictionary)===null||n===void 0?void 0:n.get(e.values[t])},B_t=(e,t)=>e.type.unit===Mh.DAY_TIME?qIe(e,t):WIe(e,t),qIe=({values:e},t)=>e.subarray(2*t,2*(t+1)),WIe=({values:e},t)=>{const n=e[t],r=new Int32Array(2);return r[0]=Math.trunc(n/12),r[1]=Math.trunc(n%12),r},GIe=({values:e},t)=>e[t],YIe=({values:e},t)=>e[t],KIe=({values:e},t)=>e[t],XIe=({values:e},t)=>e[t],U_t=(e,t)=>{switch(e.type.unit){case Wt.SECOND:return GIe(e,t);case Wt.MILLISECOND:return YIe(e,t);case Wt.MICROSECOND:return KIe(e,t);case Wt.NANOSECOND:return XIe(e,t)}},z_t=(e,t)=>{const{stride:n,children:r}=e,s=r[0].slice(t*n,n);return new mr([s])};Gt.prototype.visitNull=Jt(x_t);Gt.prototype.visitBool=Jt(S_t);Gt.prototype.visitInt=Jt(k_t);Gt.prototype.visitInt8=Jt(tv);Gt.prototype.visitInt16=Jt(tv);Gt.prototype.visitInt32=Jt(tv);Gt.prototype.visitInt64=Jt(DIe);Gt.prototype.visitUint8=Jt(tv);Gt.prototype.visitUint16=Jt(tv);Gt.prototype.visitUint32=Jt(tv);Gt.prototype.visitUint64=Jt(DIe);Gt.prototype.visitFloat=Jt(R_t);Gt.prototype.visitFloat16=Jt(T_t);Gt.prototype.visitFloat32=Jt(tv);Gt.prototype.visitFloat64=Jt(tv);Gt.prototype.visitUtf8=Jt(I_t);Gt.prototype.visitBinary=Jt(C_t);Gt.prototype.visitFixedSizeBinary=Jt(A_t);Gt.prototype.visitDate=Jt(N_t);Gt.prototype.visitDateDay=Jt(PIe);Gt.prototype.visitDateMillisecond=Jt(OIe);Gt.prototype.visitTimestamp=Jt(P_t);Gt.prototype.visitTimestampSecond=Jt($Ie);Gt.prototype.visitTimestampMillisecond=Jt(MIe);Gt.prototype.visitTimestampMicrosecond=Jt(LIe);Gt.prototype.visitTimestampNanosecond=Jt(FIe);Gt.prototype.visitTime=Jt(O_t);Gt.prototype.visitTimeSecond=Jt(jIe);Gt.prototype.visitTimeMillisecond=Jt(BIe);Gt.prototype.visitTimeMicrosecond=Jt(UIe);Gt.prototype.visitTimeNanosecond=Jt(zIe);Gt.prototype.visitDecimal=Jt(D_t);Gt.prototype.visitList=Jt($_t);Gt.prototype.visitStruct=Jt(L_t);Gt.prototype.visitUnion=Jt(F_t);Gt.prototype.visitDenseUnion=Jt(VIe);Gt.prototype.visitSparseUnion=Jt(HIe);Gt.prototype.visitDictionary=Jt(j_t);Gt.prototype.visitInterval=Jt(B_t);Gt.prototype.visitIntervalDayTime=Jt(qIe);Gt.prototype.visitIntervalYearMonth=Jt(WIe);Gt.prototype.visitDuration=Jt(U_t);Gt.prototype.visitDurationSecond=Jt(GIe);Gt.prototype.visitDurationMillisecond=Jt(YIe);Gt.prototype.visitDurationMicrosecond=Jt(KIe);Gt.prototype.visitDurationNanosecond=Jt(XIe);Gt.prototype.visitFixedSizeList=Jt(z_t);Gt.prototype.visitMap=Jt(M_t);const il=new Gt,Rf=Symbol.for("keys"),_E=Symbol.for("vals");class NF{constructor(t){return this[Rf]=new mr([t.children[0]]).memoize(),this[_E]=t.children[1],new Proxy(this,new H_t)}[Symbol.iterator](){return new V_t(this[Rf],this[_E])}get size(){return this[Rf].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[Rf],n=this[_E],r={};for(let i=-1,s=t.length;++i<s;)r[t.get(i)]=il.visit(n,i);return r}toString(){return`{${[...this].map(([t,n])=>`${hb(t)}: ${hb(n)}`).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class V_t{constructor(t,n){this.keys=t,this.vals=n,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),il.visit(this.vals,t)]})}}class H_t{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Rf].toArray().map(String)}has(t,n){return t[Rf].includes(n)}getOwnPropertyDescriptor(t,n){if(t[Rf].indexOf(n)!==-1)return{writable:!0,enumerable:!0,configurable:!0}}get(t,n){if(Reflect.has(t,n))return t[n];const r=t[Rf].indexOf(n);if(r!==-1){const i=il.visit(Reflect.get(t,_E),r);return Reflect.set(t,n,i),i}}set(t,n,r){const i=t[Rf].indexOf(n);return i!==-1?(Uc.visit(Reflect.get(t,_E),i,r),Reflect.set(t,n,r)):Reflect.has(t,n)?Reflect.set(t,n,r):!1}}Object.defineProperties(NF.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Rf]:{writable:!0,enumerable:!1,configurable:!1,value:null},[_E]:{writable:!0,enumerable:!1,configurable:!1,value:null}});let Jfe;function QIe(e,t,n,r){const{length:i=0}=e;let s=typeof t!="number"?0:t,o=typeof n!="number"?i:n;return s<0&&(s=(s%i+i)%i),o<0&&(o=(o%i+i)%i),o<s&&(Jfe=s,s=o,o=Jfe),o>i&&(o=i),r?r(e,s,o):[s,o]}const Zfe=e=>e!==e;function jS(e){if(typeof e!=="object"||e===null)return Zfe(e)?Zfe:n=>n===e;if(e instanceof Date){const n=e.valueOf();return r=>r instanceof Date?r.valueOf()===n:!1}return ArrayBuffer.isView(e)?n=>n?Dbt(e,n):!1:e instanceof Map?W_t(e):Array.isArray(e)?q_t(e):e instanceof mr?G_t(e):Y_t(e,!0)}function q_t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=jS(e[n]);return PF(t)}function W_t(e){let t=-1;const n=[];for(const r of e.values())n[++t]=jS(r);return PF(n)}function G_t(e){const t=[];for(let n=-1,r=e.length;++n<r;)t[n]=jS(e.get(n));return PF(t)}function Y_t(e,t=!1){const n=Object.keys(e);if(!t&&n.length===0)return()=>!1;const r=[];for(let i=-1,s=n.length;++i<s;)r[i]=jS(e[n[i]]);return PF(r,n)}function PF(e,t){return n=>{if(!n||typeof n!="object")return!1;switch(n.constructor){case Array:return K_t(e,n);case Map:return ede(e,n,n.keys());case NF:case OQ:case Object:case void 0:return ede(e,n,t||Object.keys(n))}return n instanceof mr?X_t(e,n):!1}}function K_t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t[r]))return!1;return!0}function X_t(e,t){const n=e.length;if(t.length!==n)return!1;for(let r=-1;++r<n;)if(!e[r](t.get(r)))return!1;return!0}function ede(e,t,n){const r=n[Symbol.iterator](),i=t instanceof Map?t.keys():Object.keys(t)[Symbol.iterator](),s=t instanceof Map?t.values():Object.values(t)[Symbol.iterator]();let o=0;const a=e.length;let u=s.next(),l=r.next(),c=i.next();for(;o<a&&!l.done&&!c.done&&!u.done&&!(l.value!==c.value||!e[o](u.value));++o,l=r.next(),c=i.next(),u=s.next());return o===a&&l.done&&c.done&&u.done?!0:(r.return&&r.return(),i.return&&i.return(),s.return&&s.return(),!1)}function JIe(e,t,n,r){return(n&1<<r)!==0}function Q_t(e,t,n,r){return(n&1<<r)>>r}function $M(e,t,n){const r=n.byteLength+7&-8;if(e>0||n.byteLength<r){const i=new Uint8Array(r);return i.set(e%8===0?n.subarray(e>>3):ZIe(new $Q(n,e,t,null,JIe)).subarray(0,r)),i}return n}function ZIe(e){const t=[];let n=0,r=0,i=0;for(const o of e)o&&(i|=1<<r),++r===8&&(t[n++]=i,i=r=0);(n===0||r>0)&&(t[n++]=i);const s=new Uint8Array(t.length+7&-8);return s.set(t),s}class $Q{constructor(t,n,r,i,s){this.bytes=t,this.length=r,this.context=i,this.get=s,this.bit=n%8,this.byteIndex=n>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(this.bit===8&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function EV(e,t,n){if(n-t<=0)return 0;if(n-t<8){let s=0;for(const o of new $Q(e,t,n-t,e,Q_t))s+=o;return s}const r=n>>3<<3,i=t+(t%8===0?0:8-t%8);return EV(e,t,i)+EV(e,r,n)+J_t(e,i>>3,r-i>>3)}function J_t(e,t,n){let r=0,i=Math.trunc(t);const s=new DataView(e.buffer,e.byteOffset,e.byteLength),o=n===void 0?e.byteLength:i+n;for(;o-i>=4;)r+=MB(s.getUint32(i)),i+=4;for(;o-i>=2;)r+=MB(s.getUint16(i)),i+=2;for(;o-i>=1;)r+=MB(s.getUint8(i)),i+=1;return r}function MB(e){let t=Math.trunc(e);return t=t-(t>>>1&1431655765),t=(t&858993459)+(t>>>2&858993459),(t+(t>>>4)&252645135)*16843009>>>24}const Z_t=-1;class Or{get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get nullable(){if(this._nullCount!==0){const{type:t}=this;return Tn.isSparseUnion(t)?this.children.some(n=>n.nullable):Tn.isDenseUnion(t)?this.children.some(n=>n.nullable):this.nullBitmap&&this.nullBitmap.byteLength>0}return!0}get byteLength(){let t=0;const{valueOffsets:n,values:r,nullBitmap:i,typeIds:s}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),this.children.reduce((o,a)=>o+a.byteLength,t)}get nullCount(){if(Tn.isUnion(this.type))return this.children.reduce((r,i)=>r+i.nullCount,0);let t=this._nullCount,n;return t<=Z_t&&(n=this.nullBitmap)&&(this._nullCount=t=this.length-EV(n,this.offset,this.offset+this.length)),t}constructor(t,n,r,i,s,o=[],a){this.type=t,this.children=o,this.dictionary=a,this.offset=Math.floor(Math.max(n||0,0)),this.length=Math.floor(Math.max(r||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1));let u;s instanceof Or?(this.stride=s.stride,this.values=s.values,this.typeIds=s.typeIds,this.nullBitmap=s.nullBitmap,this.valueOffsets=s.valueOffsets):(this.stride=jd(t),s&&((u=s[0])&&(this.valueOffsets=u),(u=s[1])&&(this.values=u),(u=s[2])&&(this.nullBitmap=u),(u=s[3])&&(this.typeIds=u)))}getValid(t){const{type:n}=this;if(Tn.isUnion(n)){const r=n,i=this.children[r.typeIdToChildIndex[this.typeIds[t]]],s=r.mode===rl.Dense?this.valueOffsets[t]:t;return i.getValid(s)}if(this.nullable&&this.nullCount>0){const r=this.offset+t;return(this.nullBitmap[r>>3]&1<<r%8)!==0}return!0}setValid(t,n){let r;const{type:i}=this;if(Tn.isUnion(i)){const s=i,o=this.children[s.typeIdToChildIndex[this.typeIds[t]]],a=s.mode===rl.Dense?this.valueOffsets[t]:t;r=o.getValid(a),o.setValid(a,n)}else{let{nullBitmap:s}=this;const{offset:o,length:a}=this,u=o+t,l=1<<u%8,c=u>>3;(!s||s.byteLength<=c)&&(s=new Uint8Array((o+a+63&-64)>>3).fill(255),this.nullCount>0&&s.set($M(o,a,this.nullBitmap),0),Object.assign(this,{nullBitmap:s,_nullCount:-1}));const f=s[c];r=(f&l)!==0,n?s[c]=f|l:s[c]=f&~l}return r!==!!n&&(this._nullCount=this.nullCount+(n?-1:1)),n}clone(t=this.type,n=this.offset,r=this.length,i=this._nullCount,s=this,o=this.children){return new Or(t,n,r,i,s,o,this.dictionary)}slice(t,n){const{stride:r,typeId:i,children:s}=this,o=+(this._nullCount===0)-1,a=i===16?r:1,u=this._sliceBuffers(t,n,r,i);return this.clone(this.type,this.offset+t,n,o,u,s.length===0||this.valueOffsets?s:this._sliceChildren(s,a*t,a*n))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:n,nullCount:r}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,n>>3);i[n>>3]=(1<<n-(n&-8))-1,r>0&&i.set($M(this.offset,n,this.nullBitmap),0);const s=this.buffers;return s[Np.VALIDITY]=i,this.clone(this.type,0,t,r+(t-n),s)}_sliceBuffers(t,n,r,i){let s;const{buffers:o}=this;return(s=o[Np.TYPE])&&(o[Np.TYPE]=s.subarray(t,t+n)),(s=o[Np.OFFSET])&&(o[Np.OFFSET]=s.subarray(t,t+n+1))||(s=o[Np.DATA])&&(o[Np.DATA]=i===6?s:s.subarray(r*t,r*(t+n))),o}_sliceChildren(t,n,r){return t.map(i=>i.slice(n,r))}}Or.prototype.children=Object.freeze([]);class JC extends Cn{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{["type"]:n,["offset"]:r=0,["length"]:i=0}=t;return new Or(n,r,i,i)}visitBool(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length>>3,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitInt(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitFloat(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitUtf8(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.data),s=Dr(t.nullBitmap),o=rA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,i,s])}visitBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.data),s=Dr(t.nullBitmap),o=rA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,i,s])}visitFixedSizeBinary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDate(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitTimestamp(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitTime(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDecimal(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitList(t){const{["type"]:n,["offset"]:r=0,["child"]:i}=t,s=Dr(t.nullBitmap),o=rA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,void 0,s],[i])}visitStruct(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Dr(t.nullBitmap),{length:o=i.reduce((u,{length:l})=>Math.max(u,l),0),nullCount:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,void 0,s],i)}visitUnion(t){const{["type"]:n,["offset"]:r=0,["children"]:i=[]}=t,s=Js(n.ArrayType,t.typeIds),{["length"]:o=s.length,["nullCount"]:a=-1}=t;if(Tn.isSparseUnion(n))return new Or(n,r,o,a,[void 0,void 0,void 0,s],i);const u=rA(t.valueOffsets);return new Or(n,r,o,a,[u,void 0,void 0,s],i)}visitDictionary(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.indices.ArrayType,t.data),{["dictionary"]:o=new mr([new JC().visit({type:n.dictionary})])}=t,{["length"]:a=s.length,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[void 0,s,i],[],o)}visitInterval(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitDuration(t){const{["type"]:n,["offset"]:r=0}=t,i=Dr(t.nullBitmap),s=Js(n.ArrayType,t.data),{["length"]:o=s.length,["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,s,i])}visitFixedSizeList(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new JC().visit({type:n.valueType})}=t,s=Dr(t.nullBitmap),{["length"]:o=i.length/jd(n),["nullCount"]:a=t.nullBitmap?-1:0}=t;return new Or(n,r,o,a,[void 0,void 0,s],[i])}visitMap(t){const{["type"]:n,["offset"]:r=0,["child"]:i=new JC().visit({type:n.childType})}=t,s=Dr(t.nullBitmap),o=rA(t.valueOffsets),{["length"]:a=o.length-1,["nullCount"]:u=t.nullBitmap?-1:0}=t;return new Or(n,r,a,u,[o,void 0,s],[i])}}const ewt=new JC;function la(e){return ewt.visit(e)}class tde{constructor(t=0,n){this.numChunks=t,this.getChunkIterator=n,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function eke(e){return e.reduce((t,n)=>t+n.nullCount,0)}function tke(e){return e.reduce((t,n,r)=>(t[r+1]=t[r]+n.length,t),new Uint32Array(e.length+1))}function nke(e,t,n,r){const i=[];for(let s=-1,o=e.length;++s<o;){const a=e[s],u=t[s],{length:l}=a;if(u>=r)break;if(n>=u+l)continue;if(u>=n&&u+l<=r){i.push(a);continue}const c=Math.max(0,n-u),f=Math.min(r-u,l);i.push(a.slice(c,f-c))}return i.length===0&&i.push(e[0].slice(0,0)),i}function MQ(e,t,n,r){let i=0,s=0,o=t.length-1;do{if(i>=o-1)return n<t[o]?r(e,i,n-t[i]):null;s=i+Math.trunc((o-i)*.5),n<t[s]?o=s:i=s}while(i<o)}function LQ(e,t){return e.getValid(t)}function wE(e){function t(n,r,i){return e(n[r],i)}return function(n){const r=this.data;return MQ(r,this._offsets,n,t)}}function rke(e){let t;function n(r,i,s){return e(r[i],s,t)}return function(r,i){const s=this.data;t=i;const o=MQ(s,this._offsets,r,n);return t=void 0,o}}function ike(e){let t;function n(r,i,s){let o=s,a=0,u=0;for(let l=i-1,c=r.length;++l<c;){const f=r[l];if(~(a=e(f,t,o)))return u+a;o=0,u+=f.length}return-1}return function(r,i){t=r;const s=this.data,o=typeof i!="number"?n(s,0,0):MQ(s,this._offsets,i,n);return t=void 0,o}}class Yt extends Cn{}function twt(e,t){return t===null&&e.length>0?0:-1}function nwt(e,t){const{nullBitmap:n}=e;if(!n||e.nullCount<=0)return-1;let r=0;for(const i of new $Q(n,e.offset+(t||0),e.length,n,JIe)){if(!i)return r;++r}return-1}function pn(e,t,n){if(t===void 0)return-1;if(t===null)switch(e.typeId){case re.Union:break;case re.Dictionary:break;default:return nwt(e,n)}const r=il.getVisitFn(e),i=jS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}function ske(e,t,n){const r=il.getVisitFn(e),i=jS(t);for(let s=(n||0)-1,o=e.length;++s<o;)if(i(r(e,s)))return s;return-1}Yt.prototype.visitNull=twt;Yt.prototype.visitBool=pn;Yt.prototype.visitInt=pn;Yt.prototype.visitInt8=pn;Yt.prototype.visitInt16=pn;Yt.prototype.visitInt32=pn;Yt.prototype.visitInt64=pn;Yt.prototype.visitUint8=pn;Yt.prototype.visitUint16=pn;Yt.prototype.visitUint32=pn;Yt.prototype.visitUint64=pn;Yt.prototype.visitFloat=pn;Yt.prototype.visitFloat16=pn;Yt.prototype.visitFloat32=pn;Yt.prototype.visitFloat64=pn;Yt.prototype.visitUtf8=pn;Yt.prototype.visitBinary=pn;Yt.prototype.visitFixedSizeBinary=pn;Yt.prototype.visitDate=pn;Yt.prototype.visitDateDay=pn;Yt.prototype.visitDateMillisecond=pn;Yt.prototype.visitTimestamp=pn;Yt.prototype.visitTimestampSecond=pn;Yt.prototype.visitTimestampMillisecond=pn;Yt.prototype.visitTimestampMicrosecond=pn;Yt.prototype.visitTimestampNanosecond=pn;Yt.prototype.visitTime=pn;Yt.prototype.visitTimeSecond=pn;Yt.prototype.visitTimeMillisecond=pn;Yt.prototype.visitTimeMicrosecond=pn;Yt.prototype.visitTimeNanosecond=pn;Yt.prototype.visitDecimal=pn;Yt.prototype.visitList=pn;Yt.prototype.visitStruct=pn;Yt.prototype.visitUnion=pn;Yt.prototype.visitDenseUnion=ske;Yt.prototype.visitSparseUnion=ske;Yt.prototype.visitDictionary=pn;Yt.prototype.visitInterval=pn;Yt.prototype.visitIntervalDayTime=pn;Yt.prototype.visitIntervalYearMonth=pn;Yt.prototype.visitDuration=pn;Yt.prototype.visitDurationSecond=pn;Yt.prototype.visitDurationMillisecond=pn;Yt.prototype.visitDurationMicrosecond=pn;Yt.prototype.visitDurationNanosecond=pn;Yt.prototype.visitFixedSizeList=pn;Yt.prototype.visitMap=pn;const MM=new Yt;class Kt extends Cn{}function Zt(e){const{type:t}=e;if(e.nullCount===0&&e.stride===1&&(t.typeId===re.Timestamp||t instanceof su&&t.bitWidth!==64||t instanceof Lm&&t.bitWidth!==64||t instanceof sy&&t.precision!==Lo.HALF))return new tde(e.data.length,r=>{const i=e.data[r];return i.values.subarray(0,i.length)[Symbol.iterator]()});let n=0;return new tde(e.data.length,r=>{const s=e.data[r].length,o=e.slice(n,n+s);return n+=s,new rwt(o)})}class rwt{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kt.prototype.visitNull=Zt;Kt.prototype.visitBool=Zt;Kt.prototype.visitInt=Zt;Kt.prototype.visitInt8=Zt;Kt.prototype.visitInt16=Zt;Kt.prototype.visitInt32=Zt;Kt.prototype.visitInt64=Zt;Kt.prototype.visitUint8=Zt;Kt.prototype.visitUint16=Zt;Kt.prototype.visitUint32=Zt;Kt.prototype.visitUint64=Zt;Kt.prototype.visitFloat=Zt;Kt.prototype.visitFloat16=Zt;Kt.prototype.visitFloat32=Zt;Kt.prototype.visitFloat64=Zt;Kt.prototype.visitUtf8=Zt;Kt.prototype.visitBinary=Zt;Kt.prototype.visitFixedSizeBinary=Zt;Kt.prototype.visitDate=Zt;Kt.prototype.visitDateDay=Zt;Kt.prototype.visitDateMillisecond=Zt;Kt.prototype.visitTimestamp=Zt;Kt.prototype.visitTimestampSecond=Zt;Kt.prototype.visitTimestampMillisecond=Zt;Kt.prototype.visitTimestampMicrosecond=Zt;Kt.prototype.visitTimestampNanosecond=Zt;Kt.prototype.visitTime=Zt;Kt.prototype.visitTimeSecond=Zt;Kt.prototype.visitTimeMillisecond=Zt;Kt.prototype.visitTimeMicrosecond=Zt;Kt.prototype.visitTimeNanosecond=Zt;Kt.prototype.visitDecimal=Zt;Kt.prototype.visitList=Zt;Kt.prototype.visitStruct=Zt;Kt.prototype.visitUnion=Zt;Kt.prototype.visitDenseUnion=Zt;Kt.prototype.visitSparseUnion=Zt;Kt.prototype.visitDictionary=Zt;Kt.prototype.visitInterval=Zt;Kt.prototype.visitIntervalDayTime=Zt;Kt.prototype.visitIntervalYearMonth=Zt;Kt.prototype.visitDuration=Zt;Kt.prototype.visitDurationSecond=Zt;Kt.prototype.visitDurationMillisecond=Zt;Kt.prototype.visitDurationMicrosecond=Zt;Kt.prototype.visitDurationNanosecond=Zt;Kt.prototype.visitFixedSizeList=Zt;Kt.prototype.visitMap=Zt;const FQ=new Kt,iwt=(e,t)=>e+t;class nv extends Cn{visitNull(t,n){return 0}visitInt(t,n){return t.type.bitWidth/8}visitFloat(t,n){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,n){return 1/8}visitDecimal(t,n){return t.type.bitWidth/8}visitDate(t,n){return(t.type.unit+1)*4}visitTime(t,n){return t.type.bitWidth/8}visitTimestamp(t,n){return t.type.unit===Wt.SECOND?4:8}visitInterval(t,n){return(t.type.unit+1)*4}visitDuration(t,n){return 8}visitStruct(t,n){return t.children.reduce((r,i)=>r+Lh.visit(i,n),0)}visitFixedSizeBinary(t,n){return t.type.byteWidth}visitMap(t,n){return 8+t.children.reduce((r,i)=>r+Lh.visit(i,n),0)}visitDictionary(t,n){var r;return t.type.indices.bitWidth/8+(((r=t.dictionary)===null||r===void 0?void 0:r.getByteLength(t.values[n]))||0)}}const swt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),owt=({valueOffsets:e},t)=>8+(e[t+1]-e[t]),awt=({valueOffsets:e,stride:t,children:n},r)=>{const i=n[0],{[r*t]:s}=e,{[r*t+1]:o}=e,a=Lh.getVisitFn(i.type),u=i.slice(s,o-s);let l=8;for(let c=-1,f=o-s;++c<f;)l+=a(u,c);return l},uwt=({stride:e,children:t},n)=>{const r=t[0],i=r.slice(n*e,e),s=Lh.getVisitFn(r.type);let o=0;for(let a=-1,u=i.length;++a<u;)o+=s(i,a);return o},lwt=(e,t)=>e.type.mode===rl.Dense?oke(e,t):ake(e,t),oke=({type:e,children:t,typeIds:n,valueOffsets:r},i)=>{const s=e.typeIdToChildIndex[n[i]];return 8+Lh.visit(t[s],r[i])},ake=({children:e},t)=>4+Lh.visitMany(e,e.map(()=>t)).reduce(iwt,0);nv.prototype.visitUtf8=swt;nv.prototype.visitBinary=owt;nv.prototype.visitList=awt;nv.prototype.visitFixedSizeList=uwt;nv.prototype.visitUnion=lwt;nv.prototype.visitDenseUnion=oke;nv.prototype.visitSparseUnion=ake;const Lh=new nv;var uke;const lke={},cke={};class mr{constructor(t){var n,r,i;const s=t[0]instanceof mr?t.flatMap(a=>a.data):t;if(s.length===0||s.some(a=>!(a instanceof Or)))throw new TypeError("Vector constructor expects an Array of Data instances.");const o=(n=s[0])===null||n===void 0?void 0:n.type;switch(s.length){case 0:this._offsets=[0];break;case 1:{const{get:a,set:u,indexOf:l,byteLength:c}=lke[o.typeId],f=s[0];this.isValid=d=>LQ(f,d),this.get=d=>a(f,d),this.set=(d,h)=>u(f,d,h),this.indexOf=d=>l(f,d),this.getByteLength=d=>c(f,d),this._offsets=[0,f.length];break}default:Object.setPrototypeOf(this,cke[o.typeId]),this._offsets=tke(s);break}this.data=s,this.type=o,this.stride=jd(o),this.numChildren=(i=(r=o.children)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0,this.length=this._offsets.at(-1)}get byteLength(){return this.data.reduce((t,n)=>t+n.byteLength,0)}get nullCount(){return eke(this.data)}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}includes(t,n){return this.indexOf(t,n)>-1}getByteLength(t){return 0}[Symbol.iterator](){return FQ.visit(this)}concat(...t){return new mr(this.data.concat(t.flatMap(n=>n.data).flat(Number.POSITIVE_INFINITY)))}slice(t,n){return new mr(QIe(this,t,n,({data:r,_offsets:i},s,o)=>nke(r,i,s,o)))}toJSON(){return[...this]}toArray(){const{type:t,data:n,length:r,stride:i,ArrayType:s}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(n.length){case 0:return new s;case 1:return n[0].values.subarray(0,r*i);default:return n.reduce((o,{values:a,length:u})=>(o.array.set(a.subarray(0,u*i),o.offset),o.offset+=u*i,o),{array:new s(r*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var n;return this.getChildAt((n=this.type.children)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.numChildren?new mr(this.data.map(({children:n})=>n[t])):null}get isMemoized(){return Tn.isDictionary(this.type)?this.data[0].dictionary.isMemoized:!1}memoize(){if(Tn.isDictionary(this.type)){const t=new LM(this.data[0].dictionary),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mr(n)}return new LM(this)}unmemoize(){if(Tn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),n=this.data.map(r=>{const i=r.clone();return i.dictionary=t,i});return new mr(n)}return this}}uke=Symbol.toStringTag;mr[uke]=(e=>{e.type=Tn.prototype,e.data=[],e.length=0,e.stride=1,e.numChildren=0,e._offsets=new Uint32Array([0]),e[Symbol.isConcatSpreadable]=!0;const t=Object.keys(re).map(n=>re[n]).filter(n=>typeof n=="number"&&n!==re.NONE);for(const n of t){const r=il.getVisitFnByTypeId(n),i=Uc.getVisitFnByTypeId(n),s=MM.getVisitFnByTypeId(n),o=Lh.getVisitFnByTypeId(n);lke[n]={get:r,set:i,indexOf:s,byteLength:o},cke[n]=Object.create(e,{isValid:{value:wE(LQ)},get:{value:wE(il.getVisitFnByTypeId(n))},set:{value:rke(Uc.getVisitFnByTypeId(n))},indexOf:{value:ike(MM.getVisitFnByTypeId(n))},getByteLength:{value:wE(Lh.getVisitFnByTypeId(n))}})}return"Vector"})(mr.prototype);class LM extends mr{constructor(t){super(t.data);const n=this.get,r=this.set,i=this.slice,s=new Array(this.length);Object.defineProperty(this,"get",{value(o){const a=s[o];if(a!==void 0)return a;const u=n.call(this,o);return s[o]=u,u}}),Object.defineProperty(this,"set",{value(o,a){r.call(this,o,a),s[o]=a}}),Object.defineProperty(this,"slice",{value:(o,a)=>new LM(i.call(this,o,a))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new mr(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}function cwt(e){if(!e||e.length<=0)return function(i){return!0};let t="";const n=e.filter(r=>r===r);return n.length>0&&(t=`
    switch (x) {${n.map(r=>`
        case ${fwt(r)}:`).join("")}
            return false;
    }`),e.length!==n.length&&(t=`if (x !== x) return false;
${t}`),new Function("x",`${t}
return true;`)}function fwt(e){return typeof e!="bigint"?hb(e):`${hb(e)}n`}const LB=(e,t)=>(Math.ceil(e)*t+63&-64||64)/t,dwt=(e,t=0)=>e.length>=t?e.subarray(0,t):RM(new e.constructor(t),e,0);class OF{constructor(t,n=1){this.buffer=t,this.stride=n,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.ceil(t.length/n))}get byteLength(){return Math.ceil(this.length*this.stride)*this.BYTES_PER_ELEMENT}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,n){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const n=this.stride,r=this.length*n,i=this.buffer.length;r>=i&&this._resize(i===0?LB(r*1,this.BYTES_PER_ELEMENT):LB(r*2,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=LB(t*this.stride,this.BYTES_PER_ELEMENT);const n=dwt(this.buffer,t);return this.clear(),n}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=RM(new this.ArrayType(t),this.buffer)}}OF.prototype.offset=0;class Qk extends OF{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,n){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=n,this}}class fke extends Qk{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,n){const{buffer:r}=this.reserve(t-this.length+1),i=t>>3,s=t%8,o=r[i]>>s&1;return n?o===0&&(r[i]|=1<<s,++this.numValid):o===1&&(r[i]&=~(1<<s),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class dke extends Qk{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,n){const r=this.length-1,i=this.reserve(t-r+1).buffer;return r<t++&&i.fill(i[r],r,t),i[t]=i[t-1]+n,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}let fl=class{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}constructor({type:t,nullValues:n}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=n,this.stride=jd(t),this._nulls=new fke,n&&n.length>0&&(this._isValid=cwt(n))}toVector(){return new mr([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:n,_values:r,_nulls:i,_typeIds:s,children:o}=this;return n&&(t+=n.byteLength),r&&(t+=r.byteLength),i&&(t+=i.byteLength),s&&(t+=s.byteLength),o.reduce((a,u)=>a+u.byteLength,t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce((n,r)=>n+r.reservedByteLength,t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,n){return this.setValid(t,this.isValid(n))&&this.setValue(t,n),this}setValue(t,n){this._setValue(this,t,n)}setValid(t,n){return this.length=this._nulls.set(t,+n).length,n}addChild(t,n=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,n,r,i;const{type:s,length:o,nullCount:a,_typeIds:u,_offsets:l,_values:c,_nulls:f}=this;(n=u==null?void 0:u.flush(o))?i=l==null?void 0:l.flush(o):(i=l==null?void 0:l.flush(o))?t=c==null?void 0:c.flush(l.last()):t=c==null?void 0:c.flush(o),a>0&&(r=f==null?void 0:f.flush(o));const d=this.children.map(h=>h.flush());return this.clear(),la({type:s,length:o,nullCount:a,children:d,child:d[0],data:t,typeIds:n,nullBitmap:r,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,n,r,i;this.length=0,(t=this._nulls)===null||t===void 0||t.clear(),(n=this._values)===null||n===void 0||n.clear(),(r=this._offsets)===null||r===void 0||r.clear(),(i=this._typeIds)===null||i===void 0||i.clear();for(const s of this.children)s.clear();return this}};fl.prototype.length=1;fl.prototype.stride=1;fl.prototype.children=null;fl.prototype.finished=!1;fl.prototype.nullValues=null;fl.prototype._isValid=()=>!0;class cg extends fl{constructor(t){super(t),this._values=new Qk(new this.ArrayType(0),this.stride)}setValue(t,n){const r=this._values;return r.reserve(t-r.length+1),super.setValue(t,n)}}class DF extends fl{constructor(t){super(t),this._pendingLength=0,this._offsets=new dke}setValue(t,n){const r=this._pending||(this._pending=new Map),i=r.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=n instanceof NF?n[Rf].length:n.length,r.set(t,n)}setValid(t,n){return super.setValid(t,n)?!0:((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,n=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,n),this}}class xV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,n,r,i){return t.prep(8,24),t.writeInt64(BigInt(i??0)),t.pad(4),t.writeInt32(r),t.writeInt64(BigInt(n??0)),t.offset()}}const FB=2,Yd=4,Vp=4,Hr=4,Vg=new Int32Array(2),nde=new Float32Array(Vg.buffer),rde=new Float64Array(Vg.buffer),_P=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1;var SV;(function(e){e[e.UTF8_BYTES=1]="UTF8_BYTES",e[e.UTF16_STRING=2]="UTF16_STRING"})(SV||(SV={}));let FM=class hke{constructor(t){this.bytes_=t,this.position_=0,this.text_decoder_=new TextDecoder}static allocate(t){return new hke(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return BigInt.asIntN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readUint64(t){return BigInt.asUintN(64,BigInt(this.readUint32(t))+(BigInt(this.readUint32(t+4))<<BigInt(32)))}readFloat32(t){return Vg[0]=this.readInt32(t),nde[0]}readFloat64(t){return Vg[_P?0:1]=this.readInt32(t),Vg[_P?1:0]=this.readInt32(t+4),rde[0]}writeInt8(t,n){this.bytes_[t]=n}writeUint8(t,n){this.bytes_[t]=n}writeInt16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeUint16(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8}writeInt32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeUint32(t,n){this.bytes_[t]=n,this.bytes_[t+1]=n>>8,this.bytes_[t+2]=n>>16,this.bytes_[t+3]=n>>24}writeInt64(t,n){this.writeInt32(t,Number(BigInt.asIntN(32,n))),this.writeInt32(t+4,Number(BigInt.asIntN(32,n>>BigInt(32))))}writeUint64(t,n){this.writeUint32(t,Number(BigInt.asUintN(32,n))),this.writeUint32(t+4,Number(BigInt.asUintN(32,n>>BigInt(32))))}writeFloat32(t,n){nde[0]=n,this.writeInt32(t,Vg[0])}writeFloat64(t,n){rde[0]=n,this.writeInt32(t,Vg[_P?0:1]),this.writeInt32(t+4,Vg[_P?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+Yd+Vp)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let n=0;n<Vp;n++)t+=String.fromCharCode(this.readInt8(this.position_+Yd+n));return t}__offset(t,n){const r=t-this.readInt32(t);return n<this.readInt16(r)?this.readInt16(r+n):0}__union(t,n){return t.bb_pos=n+this.readInt32(n),t.bb=this,t}__string(t,n){t+=this.readInt32(t);const r=this.readInt32(t);t+=Yd;const i=this.bytes_.subarray(t,t+r);return n===SV.UTF8_BYTES?i:this.text_decoder_.decode(i)}__union_with_string(t,n){return typeof t=="string"?this.__string(n):this.__union(t,n)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+Yd}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(t.length!=Vp)throw new Error("FlatBuffers: file identifier must be length "+Vp);for(let n=0;n<Vp;n++)if(t.charCodeAt(n)!=this.readInt8(this.position()+Yd+n))return!1;return!0}createScalarList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s)}return r}createObjList(t,n){const r=[];for(let i=0;i<n;++i){const s=t(i);s!==null&&r.push(s.unpack())}return r}},pke=class mke{constructor(t){this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,this.text_encoder=new TextEncoder;let n;t?n=t:n=1024,this.bb=FM.allocate(n),this.space=n}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,n){t>this.minalign&&(this.minalign=t);const r=~(this.bb.capacity()-this.space+n)+1&t-1;for(;this.space<r+t+n;){const i=this.bb.capacity();this.bb=mke.growByteBuffer(this.bb),this.space+=this.bb.capacity()-i}this.pad(r)}pad(t){for(let n=0;n<t;n++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,n,r){(this.force_defaults||n!=r)&&(this.addInt8(n),this.slot(t))}addFieldInt16(t,n,r){(this.force_defaults||n!=r)&&(this.addInt16(n),this.slot(t))}addFieldInt32(t,n,r){(this.force_defaults||n!=r)&&(this.addInt32(n),this.slot(t))}addFieldInt64(t,n,r){(this.force_defaults||n!==r)&&(this.addInt64(n),this.slot(t))}addFieldFloat32(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat32(n),this.slot(t))}addFieldFloat64(t,n,r){(this.force_defaults||n!=r)&&(this.addFloat64(n),this.slot(t))}addFieldOffset(t,n,r){(this.force_defaults||n!=r)&&(this.addOffset(n),this.slot(t))}addFieldStruct(t,n,r){n!=r&&(this.nested(n),this.slot(t))}nested(t){if(t!=this.offset())throw new TypeError("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new TypeError("FlatBuffers: object serialization must not be nested.")}slot(t){this.vtable!==null&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const n=t.capacity();if(n&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const r=n<<1,i=FM.allocate(r);return i.setPosition(r-n),i.bytes().set(t.bytes(),r-n),i}addOffset(t){this.prep(Yd,0),this.writeInt32(this.offset()-t+Yd)}startObject(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(let n=0;n<t;n++)this.vtable[n]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let n=this.vtable_in_use-1;for(;n>=0&&this.vtable[n]==0;n--);const r=n+1;for(;n>=0;n--)this.addInt16(this.vtable[n]!=0?t-this.vtable[n]:0);const i=2;this.addInt16(t-this.object_start);const s=(r+i)*FB;this.addInt16(s);let o=0;const a=this.space;e:for(n=0;n<this.vtables.length;n++){const u=this.bb.capacity()-this.vtables[n];if(s==this.bb.readInt16(u)){for(let l=FB;l<s;l+=FB)if(this.bb.readInt16(a+l)!=this.bb.readInt16(u+l))continue e;o=this.vtables[n];break}}return o?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,o-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,n,r){const i=r?Hr:0;if(n){const s=n;if(this.prep(this.minalign,Yd+Vp+i),s.length!=Vp)throw new TypeError("FlatBuffers: file identifier must be length "+Vp);for(let o=Vp-1;o>=0;o--)this.writeInt8(s.charCodeAt(o))}this.prep(this.minalign,Yd+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,n){this.finish(t,n,!0)}requiredField(t,n){const r=this.bb.capacity()-t,i=r-this.bb.readInt32(r);if(!(n<this.bb.readInt16(i)&&this.bb.readInt16(i+n)!=0))throw new TypeError("FlatBuffers: field "+n+" must be set")}startVector(t,n,r){this.notNested(),this.vector_num_elems=n,this.prep(Yd,t*n),this.prep(r,t*n)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const n=this.createString(t);return this.string_maps.set(t,n),n}createString(t){if(t==null)return 0;let n;t instanceof Uint8Array?n=t:n=this.text_encoder.encode(t),this.addInt8(0),this.startVector(1,n.length,1),this.bb.setPosition(this.space-=n.length);for(let r=0,i=this.space,s=this.bb.bytes();r<n.length;r++)s[i++]=n[r];return this.endVector()}createObjectOffset(t){return t===null?0:typeof t=="string"?this.createString(t):t.pack(this)}createObjectOffsetList(t){const n=[];for(let r=0;r<t.length;++r){const i=t[r];if(i!==null)n.push(this.createObjectOffset(i));else throw new TypeError("FlatBuffers: Argument for createObjectOffsetList cannot contain null.")}return n}createStructOffsetList(t,n){return n(this,t.length),this.createObjectOffsetList(t.slice().reverse()),this.endVector()}};class Os{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsKeyValue(t,n){return(n||new Os).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,n){return t.setPosition(t.position()+Hr),(n||new Os).__init(t.readInt32(t.position())+t.position(),t)}key(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}value(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,n){t.addFieldOffset(0,n,0)}static addValue(t,n){t.addFieldOffset(1,n,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,n,r){return Os.startKeyValue(t),Os.addKey(t,n),Os.addValue(t,r),Os.endKeyValue(t)}}var Ex;(function(e){e[e.V1=0]="V1",e[e.V2=1]="V2",e[e.V3=2]="V3",e[e.V4=3]="V4",e[e.V5=4]="V5"})(Ex||(Ex={}));var xx;(function(e){e[e.Little=0]="Little",e[e.Big=1]="Big"})(xx||(xx={}));var jM;(function(e){e[e.DenseArray=0]="DenseArray"})(jM||(jM={}));class xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInt(t,n){return(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,n){return t.setPosition(t.position()+Hr),(n||new xl).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startInt(t){t.startObject(2)}static addBitWidth(t,n){t.addFieldInt32(0,n,0)}static addIsSigned(t,n){t.addFieldInt8(1,+n,0)}static endInt(t){return t.endObject()}static createInt(t,n,r){return xl.startInt(t),xl.addBitWidth(t,n),xl.addIsSigned(t,r),xl.endInt(t)}}class Hp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryEncoding(t,n){return(n||new Hp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,n){return t.setPosition(t.position()+Hr),(n||new Hp).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}indexType(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new xl).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):jM.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addIndexType(t,n){t.addFieldOffset(1,n,0)}static addIsOrdered(t,n){t.addFieldInt8(2,+n,0)}static addDictionaryKind(t,n){t.addFieldInt16(3,n,jM.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}class T1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBinary(t,n){return(n||new T1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,n){return t.setPosition(t.position()+Hr),(n||new T1).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return T1.startBinary(t),T1.endBinary(t)}}class A1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBool(t,n){return(n||new A1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,n){return t.setPosition(t.position()+Hr),(n||new A1).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return A1.startBool(t),A1.endBool(t)}}var BM;(function(e){e[e.DAY=0]="DAY",e[e.MILLISECOND=1]="MILLISECOND"})(BM||(BM={}));let KO=class mw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDate(t,n){return(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,n){return t.setPosition(t.position()+Hr),(n||new mw).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):BM.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,BM.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,n){return mw.startDate(t),mw.addUnit(t,n),mw.endDate(t)}};class Cu{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDecimal(t,n){return(n||new Cu).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,n){return t.setPosition(t.position()+Hr),(n||new Cu).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,n){t.addFieldInt32(0,n,0)}static addScale(t,n){t.addFieldInt32(1,n,0)}static addBitWidth(t,n){t.addFieldInt32(2,n,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,n,r,i){return Cu.startDecimal(t),Cu.addPrecision(t,n),Cu.addScale(t,r),Cu.addBitWidth(t,i),Cu.endDecimal(t)}}var ay;(function(e){e[e.SECOND=0]="SECOND",e[e.MILLISECOND=1]="MILLISECOND",e[e.MICROSECOND=2]="MICROSECOND",e[e.NANOSECOND=3]="NANOSECOND"})(ay||(ay={}));class Kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDuration(t,n){return(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDuration(t,n){return t.setPosition(t.position()+Hr),(n||new Kd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ay.MILLISECOND}static startDuration(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,ay.MILLISECOND)}static endDuration(t){return t.endObject()}static createDuration(t,n){return Kd.startDuration(t),Kd.addUnit(t,n),Kd.endDuration(t)}}class Xd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeBinary(t,n){return(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,n){return t.setPosition(t.position()+Hr),(n||new Xd).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,n){return Xd.startFixedSizeBinary(t),Xd.addByteWidth(t,n),Xd.endFixedSizeBinary(t)}}class Qd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFixedSizeList(t,n){return(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,n){return t.setPosition(t.position()+Hr),(n||new Qd).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,n){t.addFieldInt32(0,n,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,n){return Qd.startFixedSizeList(t),Qd.addListSize(t,n),Qd.endFixedSizeList(t)}}var UM;(function(e){e[e.HALF=0]="HALF",e[e.SINGLE=1]="SINGLE",e[e.DOUBLE=2]="DOUBLE"})(UM||(UM={}));class Jd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFloatingPoint(t,n){return(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,n){return t.setPosition(t.position()+Hr),(n||new Jd).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):UM.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,n){t.addFieldInt16(0,n,UM.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,n){return Jd.startFloatingPoint(t),Jd.addPrecision(t,n),Jd.endFloatingPoint(t)}}var zM;(function(e){e[e.YEAR_MONTH=0]="YEAR_MONTH",e[e.DAY_TIME=1]="DAY_TIME",e[e.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"})(zM||(zM={}));class Zd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsInterval(t,n){return(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,n){return t.setPosition(t.position()+Hr),(n||new Zd).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):zM.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,n){t.addFieldInt16(0,n,zM.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,n){return Zd.startInterval(t),Zd.addUnit(t,n),Zd.endInterval(t)}}class C1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsList(t,n){return(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,n){return t.setPosition(t.position()+Hr),(n||new C1).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return C1.startList(t),C1.endList(t)}}let XO=class gw{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMap(t,n){return(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,n){return t.setPosition(t.position()+Hr),(n||new gw).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startMap(t){t.startObject(1)}static addKeysSorted(t,n){t.addFieldInt8(0,+n,0)}static endMap(t){return t.endObject()}static createMap(t,n){return gw.startMap(t),gw.addKeysSorted(t,n),gw.endMap(t)}};class I1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsNull(t,n){return(n||new I1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,n){return t.setPosition(t.position()+Hr),(n||new I1).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return I1.startNull(t),I1.endNull(t)}}class k1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsStruct_(t,n){return(n||new k1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,n){return t.setPosition(t.position()+Hr),(n||new k1).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return k1.startStruct_(t),k1.endStruct_(t)}}let QA=class qv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTime(t,n){return(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,n){return t.setPosition(t.position()+Hr),(n||new qv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ay.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ay.MILLISECOND)}static addBitWidth(t,n){t.addFieldInt32(1,n,32)}static endTime(t){return t.endObject()}static createTime(t,n,r){return qv.startTime(t),qv.addUnit(t,n),qv.addBitWidth(t,r),qv.endTime(t)}},JA=class Wv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsTimestamp(t,n){return(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,n){return t.setPosition(t.position()+Hr),(n||new Wv).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):ay.SECOND}timezone(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.__string(this.bb_pos+n,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,n){t.addFieldInt16(0,n,ay.SECOND)}static addTimezone(t,n){t.addFieldOffset(1,n,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,n,r){return Wv.startTimestamp(t),Wv.addUnit(t,n),Wv.addTimezone(t,r),Wv.endTimestamp(t)}};var VM;(function(e){e[e.Sparse=0]="Sparse",e[e.Dense=1]="Dense"})(VM||(VM={}));let Gv=class Yv{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUnion(t,n){return(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,n){return t.setPosition(t.position()+Hr),(n||new Yv).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):VM.Sparse}typeIds(t){const n=this.bb.__offset(this.bb_pos,6);return n?this.bb.readInt32(this.bb.__vector(this.bb_pos+n)+t*4):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,n){t.addFieldInt16(0,n,VM.Sparse)}static addTypeIds(t,n){t.addFieldOffset(1,n,0)}static createTypeIdsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addInt32(n[r]);return t.endVector()}static startTypeIdsVector(t,n){t.startVector(4,n,4)}static endUnion(t){return t.endObject()}static createUnion(t,n,r){return Yv.startUnion(t),Yv.addMode(t,n),Yv.addTypeIds(t,r),Yv.endUnion(t)}};class R1{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsUtf8(t,n){return(n||new R1).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,n){return t.setPosition(t.position()+Hr),(n||new R1).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return R1.startUtf8(t),R1.endUtf8(t)}}var _i;(function(e){e[e.NONE=0]="NONE",e[e.Null=1]="Null",e[e.Int=2]="Int",e[e.FloatingPoint=3]="FloatingPoint",e[e.Binary=4]="Binary",e[e.Utf8=5]="Utf8",e[e.Bool=6]="Bool",e[e.Decimal=7]="Decimal",e[e.Date=8]="Date",e[e.Time=9]="Time",e[e.Timestamp=10]="Timestamp",e[e.Interval=11]="Interval",e[e.List=12]="List",e[e.Struct_=13]="Struct_",e[e.Union=14]="Union",e[e.FixedSizeBinary=15]="FixedSizeBinary",e[e.FixedSizeList=16]="FixedSizeList",e[e.Map=17]="Map",e[e.Duration=18]="Duration",e[e.LargeBinary=19]="LargeBinary",e[e.LargeUtf8=20]="LargeUtf8",e[e.LargeList=21]="LargeList",e[e.RunEndEncoded=22]="RunEndEncoded"})(_i||(_i={}));let pc=class QO{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsField(t,n){return(n||new QO).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,n){return t.setPosition(t.position()+Hr),(n||new QO).__init(t.readInt32(t.position())+t.position(),t)}name(t){const n=this.bb.__offset(this.bb_pos,4);return n?this.bb.__string(this.bb_pos+n,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return t?!!this.bb.readInt8(this.bb_pos+t):!1}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):_i.NONE}type(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.__union(t,this.bb_pos+n):null}dictionary(t){const n=this.bb.__offset(this.bb_pos,12);return n?(t||new Hp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}children(t,n){const r=this.bb.__offset(this.bb_pos,14);return r?(n||new QO).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,16);return r?(n||new Os).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,n){t.addFieldOffset(0,n,0)}static addNullable(t,n){t.addFieldInt8(1,+n,0)}static addTypeType(t,n){t.addFieldInt8(2,n,_i.NONE)}static addType(t,n){t.addFieldOffset(3,n,0)}static addDictionary(t,n){t.addFieldOffset(4,n,0)}static addChildren(t,n){t.addFieldOffset(5,n,0)}static createChildrenVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startChildrenVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(6,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endField(t){return t.endObject()}},Ld=class kp{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsSchema(t,n){return(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,n){return t.setPosition(t.position()+Hr),(n||new kp).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):xx.Little}fields(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new pc).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Os).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const n=this.bb.__offset(this.bb_pos,10);return n?this.bb.readInt64(this.bb.__vector(this.bb_pos+n)+t*8):BigInt(0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,n){t.addFieldInt16(0,n,xx.Little)}static addFields(t,n){t.addFieldOffset(1,n,0)}static createFieldsVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startFieldsVector(t,n){t.startVector(4,n,4)}static addCustomMetadata(t,n){t.addFieldOffset(2,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static addFeatures(t,n){t.addFieldOffset(3,n,0)}static createFeaturesVector(t,n){t.startVector(8,n.length,8);for(let r=n.length-1;r>=0;r--)t.addInt64(n[r]);return t.endVector()}static startFeaturesVector(t,n){t.startVector(8,n,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,n){t.finish(n)}static finishSizePrefixedSchemaBuffer(t,n){t.finish(n,void 0,!0)}static createSchema(t,n,r,i,s){return kp.startSchema(t),kp.addEndianness(t,n),kp.addFields(t,r),kp.addCustomMetadata(t,i),kp.addFeatures(t,s),kp.endSchema(t)}};class vl{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsFooter(t,n){return(n||new vl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,n){return t.setPosition(t.position()+Hr),(n||new vl).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ex.V1}schema(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Ld).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}dictionaries(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new xV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,n){const r=this.bb.__offset(this.bb_pos,10);return r?(n||new xV).__init(this.bb.__vector(this.bb_pos+r)+t*24,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Os).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ex.V1)}static addSchema(t,n){t.addFieldOffset(1,n,0)}static addDictionaries(t,n){t.addFieldOffset(2,n,0)}static startDictionariesVector(t,n){t.startVector(24,n,8)}static addRecordBatches(t,n){t.addFieldOffset(3,n,0)}static startRecordBatchesVector(t,n){t.startVector(24,n,8)}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,n){t.finish(n)}static finishSizePrefixedFooterBuffer(t,n){t.finish(n,void 0,!0)}}class Ar{constructor(t=[],n,r,i=Wa.V5){this.fields=t||[],this.metadata=n||new Map,r||(r=AV(t)),this.dictionaries=r,this.metadataVersion=i}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map(t=>t.name)}toString(){return`Schema<{ ${this.fields.map((t,n)=>`${n}: ${t}`).join(", ")} }>`}select(t){const n=new Set(t),r=this.fields.filter(i=>n.has(i.name));return new Ar(r,this.metadata)}selectAt(t){const n=t.map(r=>this.fields[r]).filter(Boolean);return new Ar(n,this.metadata)}assign(...t){const n=t[0]instanceof Ar?t[0]:Array.isArray(t[0])?new Ar(t[0]):new Ar(t),r=[...this.fields],i=wP(wP(new Map,this.metadata),n.metadata),s=n.fields.filter(a=>{const u=r.findIndex(l=>l.name===a.name);return~u?(r[u]=a.clone({metadata:wP(wP(new Map,r[u].metadata),a.metadata)}))&&!1:!0}),o=AV(s,new Map);return new Ar([...r,...s],i,new Map([...this.dictionaries,...o]))}}Ar.prototype.fields=null;Ar.prototype.metadata=null;Ar.prototype.dictionaries=null;let Br=class TV{static new(...t){let[n,r,i,s]=t;return t[0]&&typeof t[0]=="object"&&({name:n}=t[0],r===void 0&&(r=t[0].type),i===void 0&&(i=t[0].nullable),s===void 0&&(s=t[0].metadata)),new TV(`${n}`,r,i,s)}constructor(t,n,r=!1,i){this.name=t,this.type=n,this.nullable=r,this.metadata=i||new Map}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[n,r,i,s]=t;return!t[0]||typeof t[0]!="object"?[n=this.name,r=this.type,i=this.nullable,s=this.metadata]=t:{name:n=this.name,type:r=this.type,nullable:i=this.nullable,metadata:s=this.metadata}=t[0],TV.new(n,r,i,s)}};Br.prototype.type=null;Br.prototype.name=null;Br.prototype.nullable=null;Br.prototype.metadata=null;function wP(e,t){return new Map([...e||new Map,...t||new Map])}function AV(e,t=new Map){for(let n=-1,r=e.length;++n<r;){const s=e[n].type;if(Tn.isDictionary(s)){if(!t.has(s.id))t.set(s.id,s.dictionary);else if(t.get(s.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}s.children&&s.children.length>0&&AV(s.children,t)}return t}var hwt=pke,pwt=FM;class CV{static decode(t){t=new pwt(Dr(t));const n=vl.getRootAsFooter(t),r=Ar.decode(n.schema(),new Map,n.version());return new mwt(r,n)}static encode(t){const n=new hwt,r=Ar.encode(n,t.schema);vl.startRecordBatchesVector(n,t.numRecordBatches);for(const o of[...t.recordBatches()].slice().reverse())uy.encode(n,o);const i=n.endVector();vl.startDictionariesVector(n,t.numDictionaries);for(const o of[...t.dictionaryBatches()].slice().reverse())uy.encode(n,o);const s=n.endVector();return vl.startFooter(n),vl.addSchema(n,r),vl.addVersion(n,Wa.V5),vl.addRecordBatches(n,i),vl.addDictionaries(n,s),vl.finishFooterBuffer(n,vl.endFooter(n)),n.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}constructor(t,n=Wa.V5,r,i){this.schema=t,this.version=n,r&&(this._recordBatches=r),i&&(this._dictionaryBatches=i)}*recordBatches(){for(let t,n=-1,r=this.numRecordBatches;++n<r;)(t=this.getRecordBatch(n))&&(yield t)}*dictionaryBatches(){for(let t,n=-1,r=this.numDictionaries;++n<r;)(t=this.getDictionaryBatch(n))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class mwt extends CV{get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}constructor(t,n){super(t,n.version()),this._footer=n}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const n=this._footer.recordBatches(t);if(n)return uy.decode(n)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const n=this._footer.dictionaries(t);if(n)return uy.decode(n)}return null}}class uy{static decode(t){return new uy(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,n){const{metaDataLength:r}=n,i=BigInt(n.offset),s=BigInt(n.bodyLength);return xV.createBlock(t,i,r,s)}constructor(t,n,r){this.metaDataLength=t,this.offset=Zf(r),this.bodyLength=Zf(n)}}const EP=Object.freeze({done:!0,value:void 0});class gke{tee(){return this._getDOMStream().tee()}pipe(t,n){return this._getNodeStream().pipe(t,n)}pipeTo(t,n){return this._getDOMStream().pipeTo(t,n)}pipeThrough(t,n){return this._getDOMStream().pipeThrough(t,n)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class gwt extends gke{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise(t=>this._closedPromiseResolve=t)}get closed(){return this._closedPromise}cancel(t){return Bp(this,void 0,void 0,function*(){yield this.return(t)})}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(EP);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return Xfe.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return Xfe.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return Bp(this,void 0,void 0,function*(){return yield this.abort(t),EP})}return(t){return Bp(this,void 0,void 0,function*(){return yield this.close(),EP})}read(t){return Bp(this,void 0,void 0,function*(){return(yield this.next(t,"read")).value})}peek(t){return Bp(this,void 0,void 0,function*(){return(yield this.next(t,"peek")).value})}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise((n,r)=>{this.resolvers.push({resolve:n,reject:r})}):Promise.resolve(EP)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class jB extends gwt{write(t){if((t=Dr(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?bV(this.toUint8Array(!0)):this.toUint8Array(!1).then(bV)}toUint8Array(t=!1){return t?Dh(this._values)[0]:Bp(this,void 0,void 0,function*(){var n,r,i,s;const o=[];let a=0;try{for(var u=!0,l=MC(this),c;c=yield l.next(),n=c.done,!n;u=!0){s=c.value,u=!1;const f=s;o.push(f),a+=f.byteLength}}catch(f){r={error:f}}finally{try{!u&&!n&&(i=l.return)&&(yield i.call(l))}finally{if(r)throw r.error}}return Dh(o,a)[0]})}}class yke extends DF{constructor(t){super(t),this._values=new OF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,Dr(n))}_flushPending(t,n){const r=this._offsets,i=this._values.reserve(n).buffer;let s=0;for(const[o,a]of t)if(a===void 0)r.set(o,0);else{const u=a.length;i.set(a,s),r.set(o,u),s+=u}}}class ywt extends fl{constructor(t){super(t),this._values=new fke}setValue(t,n){this._values.set(t,+n)}}class $F extends cg{}$F.prototype._setValue=EIe;class vke extends $F{}vke.prototype._setValue=yQ;class bke extends $F{}bke.prototype._setValue=vQ;class _ke extends cg{}_ke.prototype._setValue=TIe;class vwt extends fl{constructor({type:t,nullValues:n,dictionaryHashFunction:r}){super({type:new oy(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=HM({type:this.type.indices,nullValues:n}),this.dictionary=HM({type:this.type.dictionary,nullValues:null}),typeof r=="function"&&(this.valueToKey=r)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,n){const r=this.indices;return n=r.setValid(t,n),this.length=r.length,n}setValue(t,n){const r=this._keysToIndices,i=this.valueToKey(n);let s=r[i];return s===void 0&&(r[i]=s=this._dictionaryOffset+this.dictionary.append(n).length-1),this.indices.setValue(t,s)}flush(){const t=this.type,n=this._dictionary,r=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=n?n.concat(r):r,this.finished||(this._dictionaryOffset+=r.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return typeof t=="string"?t:`${t}`}}class wke extends cg{}wke.prototype._setValue=wIe;class bwt extends fl{setValue(t,n){const[r]=this.children,i=t*this.stride;for(let s=-1,o=n.length;++s<o;)r.set(i+s,n[s])}addChild(t,n="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const r=this.children.push(t);return this.type=new wx(this.type.listSize,new Br(n,t.type,!0)),r}}class MF extends cg{setValue(t,n){this._values.set(t,n)}}class _wt extends MF{setValue(t,n){super.setValue(t,vIe(n))}}class wwt extends MF{}class Ewt extends MF{}class LF extends cg{}LF.prototype._setValue=IIe;class Eke extends LF{}Eke.prototype._setValue=CQ;class xke extends LF{}xke.prototype._setValue=IQ;class BS extends cg{}BS.prototype._setValue=kIe;class Ske extends BS{}Ske.prototype._setValue=kQ;class Tke extends BS{}Tke.prototype._setValue=RQ;class Ake extends BS{}Ake.prototype._setValue=NQ;class Cke extends BS{}Cke.prototype._setValue=PQ;class fg extends cg{setValue(t,n){this._values.set(t,n)}}class xwt extends fg{}class Swt extends fg{}class Twt extends fg{}class Awt extends fg{}class Cwt extends fg{}class Iwt extends fg{}class kwt extends fg{}class Rwt extends fg{}class Nwt extends DF{constructor(t){super(t),this._offsets=new dke}addChild(t,n="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new _x(new Br(n,t.type,!0)),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(typeof s>"u")n.set(i,0);else{const o=s,a=o.length,u=n.set(i,a).buffer[i];for(let l=-1;++l<a;)r.set(u+l,o[l])}}}class Pwt extends DF{set(t,n){return super.set(t,n)}setValue(t,n){const r=n instanceof Map?n:new Map(Object.entries(n)),i=this._pending||(this._pending=new Map),s=i.get(t);s&&(this._pendingLength-=s.size),this._pendingLength+=r.size,i.set(t,r)}addChild(t,n=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new xI(new Br(n,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const n=this._offsets,[r]=this.children;for(const[i,s]of t)if(s===void 0)n.set(i,0);else{let{[i]:o,[i+1]:a}=n.set(i,s.size).buffer;for(const u of s.entries())if(r.set(o,u),++o>=a)break}}}class Owt extends fl{setValue(t,n){}setValid(t,n){return this.length=Math.max(t+1,this.length),n}}class Dwt extends fl{setValue(t,n){const{children:r,type:i}=this;switch(Array.isArray(n)||n.constructor){case!0:return i.children.forEach((s,o)=>r[o].set(t,n[o]));case Map:return i.children.forEach((s,o)=>r[o].set(t,n.get(s.name)));default:return i.children.forEach((s,o)=>r[o].set(t,n[s.name]))}}setValid(t,n){return super.setValid(t,n)||this.children.forEach(r=>r.setValid(t,n)),n}addChild(t,n=`${this.numChildren}`){const r=this.children.push(t);return this.type=new ha([...this.type.children,new Br(n,t.type,!0)]),r}}class US extends cg{}US.prototype._setValue=xIe;class Ike extends US{}Ike.prototype._setValue=bQ;class kke extends US{}kke.prototype._setValue=_Q;class Rke extends US{}Rke.prototype._setValue=wQ;class Nke extends US{}Nke.prototype._setValue=EQ;class zS extends cg{}zS.prototype._setValue=SIe;class Pke extends zS{}Pke.prototype._setValue=xQ;class Oke extends zS{}Oke.prototype._setValue=SQ;class Dke extends zS{}Dke.prototype._setValue=TQ;class $ke extends zS{}$ke.prototype._setValue=AQ;class jQ extends fl{constructor(t){super(t),this._typeIds=new Qk(new Int8Array(0),1),typeof t.valueToChildTypeId=="function"&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,n){return this.set(this.length,t,n)}set(t,n,r){return r===void 0&&(r=this._valueToChildTypeId(this,n,t)),this.setValue(t,n,r),this}setValue(t,n,r){this._typeIds.set(t,r);const i=this.type.typeIdToChildIndex[r],s=this.children[i];s==null||s.set(t,n)}addChild(t,n=`${this.children.length}`){const r=this.children.push(t),{type:{children:i,mode:s,typeIds:o}}=this,a=[...i,new Br(n,t.type)];return this.type=new EI(s,[...o,r],a),r}_valueToChildTypeId(t,n,r){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class $wt extends jQ{}class Mwt extends jQ{constructor(t){super(t),this._offsets=new Qk(new Int32Array(0))}setValue(t,n,r){const i=this._typeIds.set(t,r).buffer[t],s=this.getChildAt(this.type.typeIdToChildIndex[i]),o=this._offsets.set(t,s.length).buffer[t];s==null||s.set(o,n)}}class Mke extends DF{constructor(t){super(t),this._values=new OF(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+this.length*4;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,n){return super.setValue(t,nQ(n))}_flushPending(t,n){}}Mke.prototype._flushPending=yke.prototype._flushPending;class Lwt extends Cn{visitNull(){return Owt}visitBool(){return ywt}visitInt(){return fg}visitInt8(){return xwt}visitInt16(){return Swt}visitInt32(){return Twt}visitInt64(){return Awt}visitUint8(){return Cwt}visitUint16(){return Iwt}visitUint32(){return kwt}visitUint64(){return Rwt}visitFloat(){return MF}visitFloat16(){return _wt}visitFloat32(){return wwt}visitFloat64(){return Ewt}visitUtf8(){return Mke}visitBinary(){return yke}visitFixedSizeBinary(){return wke}visitDate(){return $F}visitDateDay(){return vke}visitDateMillisecond(){return bke}visitTimestamp(){return US}visitTimestampSecond(){return Ike}visitTimestampMillisecond(){return kke}visitTimestampMicrosecond(){return Rke}visitTimestampNanosecond(){return Nke}visitTime(){return zS}visitTimeSecond(){return Pke}visitTimeMillisecond(){return Oke}visitTimeMicrosecond(){return Dke}visitTimeNanosecond(){return $ke}visitDecimal(){return _ke}visitList(){return Nwt}visitStruct(){return Dwt}visitUnion(){return jQ}visitDenseUnion(){return Mwt}visitSparseUnion(){return $wt}visitDictionary(){return vwt}visitInterval(){return LF}visitIntervalDayTime(){return Eke}visitIntervalYearMonth(){return xke}visitDuration(){return BS}visitDurationSecond(){return Ske}visitDurationMillisecond(){return Tke}visitDurationMicrosecond(){return Ake}visistDurationNanosecond(){return Cke}visitFixedSizeList(){return bwt}visitMap(){return Pwt}}const Fwt=new Lwt;class Xt extends Cn{compareSchemas(t,n){return t===n||n instanceof t.constructor&&this.compareManyFields(t.fields,n.fields)}compareManyFields(t,n){return t===n||Array.isArray(t)&&Array.isArray(n)&&t.length===n.length&&t.every((r,i)=>this.compareFields(r,n[i]))}compareFields(t,n){return t===n||n instanceof t.constructor&&t.name===n.name&&t.nullable===n.nullable&&this.visit(t.type,n.type)}}function cu(e,t){return t instanceof e.constructor}function Jk(e,t){return e===t||cu(e,t)}function dg(e,t){return e===t||cu(e,t)&&e.bitWidth===t.bitWidth&&e.isSigned===t.isSigned}function FF(e,t){return e===t||cu(e,t)&&e.precision===t.precision}function jwt(e,t){return e===t||cu(e,t)&&e.byteWidth===t.byteWidth}function BQ(e,t){return e===t||cu(e,t)&&e.unit===t.unit}function Zk(e,t){return e===t||cu(e,t)&&e.unit===t.unit&&e.timezone===t.timezone}function eR(e,t){return e===t||cu(e,t)&&e.unit===t.unit&&e.bitWidth===t.bitWidth}function Bwt(e,t){return e===t||cu(e,t)&&e.children.length===t.children.length&&ly.compareManyFields(e.children,t.children)}function Uwt(e,t){return e===t||cu(e,t)&&e.children.length===t.children.length&&ly.compareManyFields(e.children,t.children)}function UQ(e,t){return e===t||cu(e,t)&&e.mode===t.mode&&e.typeIds.every((n,r)=>n===t.typeIds[r])&&ly.compareManyFields(e.children,t.children)}function zwt(e,t){return e===t||cu(e,t)&&e.id===t.id&&e.isOrdered===t.isOrdered&&ly.visit(e.indices,t.indices)&&ly.visit(e.dictionary,t.dictionary)}function zQ(e,t){return e===t||cu(e,t)&&e.unit===t.unit}function tR(e,t){return e===t||cu(e,t)&&e.unit===t.unit}function Vwt(e,t){return e===t||cu(e,t)&&e.listSize===t.listSize&&e.children.length===t.children.length&&ly.compareManyFields(e.children,t.children)}function Hwt(e,t){return e===t||cu(e,t)&&e.keysSorted===t.keysSorted&&e.children.length===t.children.length&&ly.compareManyFields(e.children,t.children)}Xt.prototype.visitNull=Jk;Xt.prototype.visitBool=Jk;Xt.prototype.visitInt=dg;Xt.prototype.visitInt8=dg;Xt.prototype.visitInt16=dg;Xt.prototype.visitInt32=dg;Xt.prototype.visitInt64=dg;Xt.prototype.visitUint8=dg;Xt.prototype.visitUint16=dg;Xt.prototype.visitUint32=dg;Xt.prototype.visitUint64=dg;Xt.prototype.visitFloat=FF;Xt.prototype.visitFloat16=FF;Xt.prototype.visitFloat32=FF;Xt.prototype.visitFloat64=FF;Xt.prototype.visitUtf8=Jk;Xt.prototype.visitBinary=Jk;Xt.prototype.visitFixedSizeBinary=jwt;Xt.prototype.visitDate=BQ;Xt.prototype.visitDateDay=BQ;Xt.prototype.visitDateMillisecond=BQ;Xt.prototype.visitTimestamp=Zk;Xt.prototype.visitTimestampSecond=Zk;Xt.prototype.visitTimestampMillisecond=Zk;Xt.prototype.visitTimestampMicrosecond=Zk;Xt.prototype.visitTimestampNanosecond=Zk;Xt.prototype.visitTime=eR;Xt.prototype.visitTimeSecond=eR;Xt.prototype.visitTimeMillisecond=eR;Xt.prototype.visitTimeMicrosecond=eR;Xt.prototype.visitTimeNanosecond=eR;Xt.prototype.visitDecimal=Jk;Xt.prototype.visitList=Bwt;Xt.prototype.visitStruct=Uwt;Xt.prototype.visitUnion=UQ;Xt.prototype.visitDenseUnion=UQ;Xt.prototype.visitSparseUnion=UQ;Xt.prototype.visitDictionary=zwt;Xt.prototype.visitInterval=zQ;Xt.prototype.visitIntervalDayTime=zQ;Xt.prototype.visitIntervalYearMonth=zQ;Xt.prototype.visitDuration=tR;Xt.prototype.visitDurationSecond=tR;Xt.prototype.visitDurationMillisecond=tR;Xt.prototype.visitDurationMicrosecond=tR;Xt.prototype.visitDurationNanosecond=tR;Xt.prototype.visitFixedSizeList=Vwt;Xt.prototype.visitMap=Hwt;const ly=new Xt;function IV(e,t){return ly.compareSchemas(e,t)}function HM(e){const t=e.type,n=new(Fwt.getVisitFn(t)())(e);if(t.children&&t.children.length>0){const r=e.children||[],i={nullValues:e.nullValues},s=Array.isArray(r)?(o,a)=>r[a]||i:({name:o})=>r[o]||i;for(const[o,a]of t.children.entries()){const{type:u}=a,l=s(a,o);n.children.push(HM(Object.assign(Object.assign({},l),{type:u})))}}return n}function BB(e,t){return qwt(e,t.map(n=>n.data.concat()))}function qwt(e,t){const n=[...e.fields],r=[],i={numBatches:t.reduce((f,d)=>Math.max(f,d.length),0)};let s=0,o=0,a=-1;const u=t.length;let l,c=[];for(;i.numBatches-- >0;){for(o=Number.POSITIVE_INFINITY,a=-1;++a<u;)c[a]=l=t[a].shift(),o=Math.min(o,l?l.length:o);Number.isFinite(o)&&(c=Wwt(n,o,c,t,i),o>0&&(r[s++]=la({type:new ha(n),length:o,nullCount:0,children:c.slice()})))}return[e=e.assign(n),r.map(f=>new Sl(e,f))]}function Wwt(e,t,n,r,i){var s;const o=(t+63&-64)>>3;for(let a=-1,u=r.length;++a<u;){const l=n[a],c=l==null?void 0:l.length;if(c>=t)c===t?n[a]=l:(n[a]=l.slice(0,t),i.numBatches=Math.max(i.numBatches,r[a].unshift(l.slice(t,c-t))));else{const f=e[a];e[a]=f.clone({nullable:!0}),n[a]=(s=l==null?void 0:l._changeLengthAndBackfillNullBitmap(t))!==null&&s!==void 0?s:la({type:f.type,length:t,nullCount:t,nullBitmap:new Uint8Array(o)})}}return n}var Lke;class Pu{constructor(...t){var n,r;if(t.length===0)return this.batches=[],this.schema=new Ar([]),this._offsets=[0],this;let i,s;t[0]instanceof Ar&&(i=t.shift()),t.at(-1)instanceof Uint32Array&&(s=t.pop());const o=u=>{if(u){if(u instanceof Sl)return[u];if(u instanceof Pu)return u.batches;if(u instanceof Or){if(u.type instanceof ha)return[new Sl(new Ar(u.type.children),u)]}else{if(Array.isArray(u))return u.flatMap(l=>o(l));if(typeof u[Symbol.iterator]=="function")return[...u].flatMap(l=>o(l));if(typeof u=="object"){const l=Object.keys(u),c=l.map(h=>new mr([u[h]])),f=new Ar(l.map((h,p)=>new Br(String(h),c[p].type))),[,d]=BB(f,c);return d.length===0?[new Sl(u)]:d}}}return[]},a=t.flatMap(u=>o(u));if(i=(r=i??((n=a[0])===null||n===void 0?void 0:n.schema))!==null&&r!==void 0?r:new Ar([]),!(i instanceof Ar))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const u of a){if(!(u instanceof Sl))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!IV(i,u.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=s??tke(this.data)}get data(){return this.batches.map(({data:t})=>t)}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce((t,n)=>t+n.length,0)}get nullCount(){return this._nullCount===-1&&(this._nullCount=eke(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,n){}indexOf(t,n){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?FQ.visit(new mr(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[
  ${this.toArray().join(`,
  `)}
]`}concat(...t){const n=this.schema,r=this.data.concat(t.flatMap(({data:i})=>i));return new Pu(n,r.map(i=>new Sl(n,i)))}slice(t,n){const r=this.schema;[t,n]=QIe({length:this.numRows},t,n);const i=nke(this.data,this._offsets,t,n);return new Pu(r,i.map(s=>new Sl(r,s)))}getChild(t){return this.getChildAt(this.schema.fields.findIndex(n=>n.name===t))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const n=this.data.map(r=>r.children[t]);if(n.length===0){const{type:r}=this.schema.fields[t],i=la({type:r,length:0,nullCount:0});n.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new mr(n)}return null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){n||(n=new mr([la({type:new Mm,length:this.numRows})]));const s=r.fields.slice(),o=s[t].clone({type:n.type}),a=this.schema.fields.map((u,l)=>this.getChildAt(l));[s[t],a[t]]=[o,n],[r,i]=BB(r,a)}return new Pu(r,i)}select(t){const n=this.schema.fields.reduce((r,i,s)=>r.set(i.name,s),new Map);return this.selectAt(t.map(r=>n.get(r)).filter(r=>r>-1))}selectAt(t){const n=this.schema.selectAt(t),r=this.batches.map(i=>i.selectAt(t));return new Pu(n,r)}assign(t){const n=this.schema.fields,[r,i]=t.schema.fields.reduce((a,u,l)=>{const[c,f]=a,d=n.findIndex(h=>h.name===u.name);return~d?f[d]=l:c.push(l),a},[[],[]]),s=this.schema.assign(t.schema),o=[...n.map((a,u)=>[u,i[u]]).map(([a,u])=>u===void 0?this.getChildAt(a):t.getChildAt(u)),...r.map(a=>t.getChildAt(a))].filter(Boolean);return new Pu(...BB(s,o))}}Lke=Symbol.toStringTag;Pu[Lke]=(e=>(e.schema=null,e.batches=[],e._offsets=new Uint32Array([0]),e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,e.isValid=wE(LQ),e.get=wE(il.getVisitFn(re.Struct)),e.set=rke(Uc.getVisitFn(re.Struct)),e.indexOf=ike(MM.getVisitFn(re.Struct)),e.getByteLength=wE(Lh.getVisitFn(re.Struct)),"Table"))(Pu.prototype);var Fke;let Sl=class ZA{constructor(...t){switch(t.length){case 2:{if([this.schema]=t,!(this.schema instanceof Ar))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=la({nullCount:0,type:new ha(this.schema.fields),children:this.schema.fields.map(n=>la({type:n.type,nullCount:0}))})]=t,!(this.data instanceof Or))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=ide(this.schema,this.data.children);break}case 1:{const[n]=t,{fields:r,children:i,length:s}=Object.keys(n).reduce((u,l,c)=>(u.children[c]=n[l],u.length=Math.max(u.length,n[l].length),u.fields[c]=Br.new({name:l,type:n[l].type,nullable:!0}),u),{length:0,fields:new Array,children:new Array}),o=new Ar(r),a=la({type:new ha(r),length:s,children:i,nullCount:0});[this.schema,this.data]=ide(o,a.children,s);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=jke(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return il.visit(this.data,t)}set(t,n){return Uc.visit(this.data,t,n)}indexOf(t,n){return MM.visit(this.data,t,n)}getByteLength(t){return Lh.visit(this.data,t)}[Symbol.iterator](){return FQ.visit(new mr([this.data]))}toArray(){return[...this]}concat(...t){return new Pu(this.schema,[this,...t])}slice(t,n){const[r]=new mr([this.data]).slice(t,n).data;return new ZA(this.schema,r)}getChild(t){var n;return this.getChildAt((n=this.schema.fields)===null||n===void 0?void 0:n.findIndex(r=>r.name===t))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new mr([this.data.children[t]]):null}setChild(t,n){var r;return this.setChildAt((r=this.schema.fields)===null||r===void 0?void 0:r.findIndex(i=>i.name===t),n)}setChildAt(t,n){let r=this.schema,i=this.data;if(t>-1&&t<this.numCols){n||(n=new mr([la({type:new Mm,length:this.numRows})]));const s=r.fields.slice(),o=i.children.slice(),a=s[t].clone({type:n.type});[s[t],o[t]]=[a,n.data[0]],r=new Ar(s,new Map(this.schema.metadata)),i=la({type:new ha(s),children:o})}return new ZA(r,i)}select(t){const n=this.schema.select(t),r=new ha(n.fields),i=[];for(const s of t){const o=this.schema.fields.findIndex(a=>a.name===s);~o&&(i[o]=this.data.children[o])}return new ZA(n,la({type:r,length:this.numRows,children:i}))}selectAt(t){const n=this.schema.selectAt(t),r=t.map(s=>this.data.children[s]).filter(Boolean),i=la({type:new ha(n.fields),length:this.numRows,children:r});return new ZA(n,i)}};Fke=Symbol.toStringTag;Sl[Fke]=(e=>(e._nullCount=-1,e[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Sl.prototype);function ide(e,t,n=t.reduce((r,i)=>Math.max(r,i.length),0)){var r;const i=[...e.fields],s=[...t],o=(n+63&-64)>>3;for(const[a,u]of e.fields.entries()){const l=t[a];(!l||l.length!==n)&&(i[a]=u.clone({nullable:!0}),s[a]=(r=l==null?void 0:l._changeLengthAndBackfillNullBitmap(n))!==null&&r!==void 0?r:la({type:u.type,length:n,nullCount:n,nullBitmap:new Uint8Array(o)}))}return[e.assign(i),la({type:new ha(i),length:n,children:s})]}function jke(e,t,n=new Map){var r,i;if(((r=e==null?void 0:e.length)!==null&&r!==void 0?r:0)>0&&(e==null?void 0:e.length)===(t==null?void 0:t.length))for(let s=-1,o=e.length;++s<o;){const{type:a}=e[s],u=t[s];for(const l of[u,...((i=u==null?void 0:u.dictionary)===null||i===void 0?void 0:i.data)||[]])jke(a.children,l==null?void 0:l.children,n);if(Tn.isDictionary(a)){const{id:l}=a;if(!n.has(l))u!=null&&u.dictionary&&n.set(l,u.dictionary);else if(n.get(l)!==u.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}}return n}class Gwt extends Sl{constructor(t){const n=t.fields.map(i=>la({type:i.type})),r=la({type:new ha(t.fields),nullCount:0,children:n});super(t,r)}}var qM;(function(e){e[e.BUFFER=0]="BUFFER"})(qM||(qM={}));var WM;(function(e){e[e.LZ4_FRAME=0]="LZ4_FRAME",e[e.ZSTD=1]="ZSTD"})(WM||(WM={}));class Hg{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsBodyCompression(t,n){return(n||new Hg).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,n){return t.setPosition(t.position()+Hr),(n||new Hg).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):WM.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):qM.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,n){t.addFieldInt8(0,n,WM.LZ4_FRAME)}static addMethod(t,n){t.addFieldInt8(1,n,qM.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,n,r){return Hg.startBodyCompression(t),Hg.addCodec(t,n),Hg.addMethod(t,r),Hg.endBodyCompression(t)}}let Bke=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Uke=class{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,n,r){return t.prep(8,16),t.writeInt64(BigInt(r??0)),t.writeInt64(BigInt(n??0)),t.offset()}},Pp=class kV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsRecordBatch(t,n){return(n||new kV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,n){return t.setPosition(t.position()+Hr),(n||new kV).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}nodes(t,n){const r=this.bb.__offset(this.bb_pos,6);return r?(n||new Uke).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,n){const r=this.bb.__offset(this.bb_pos,8);return r?(n||new Bke).__init(this.bb.__vector(this.bb_pos+r)+t*16,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const n=this.bb.__offset(this.bb_pos,10);return n?(t||new Hg).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addNodes(t,n){t.addFieldOffset(1,n,0)}static startNodesVector(t,n){t.startVector(16,n,8)}static addBuffers(t,n){t.addFieldOffset(2,n,0)}static startBuffersVector(t,n){t.startVector(16,n,8)}static addCompression(t,n){t.addFieldOffset(3,n,0)}static endRecordBatch(t){return t.endObject()}},yw=class RV{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsDictionaryBatch(t,n){return(n||new RV).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,n){return t.setPosition(t.position()+Hr),(n||new RV).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}data(t){const n=this.bb.__offset(this.bb_pos,6);return n?(t||new Pp).__init(this.bb.__indirect(this.bb_pos+n),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return t?!!this.bb.readInt8(this.bb_pos+t):!1}static startDictionaryBatch(t){t.startObject(3)}static addId(t,n){t.addFieldInt64(0,n,BigInt("0"))}static addData(t,n){t.addFieldOffset(1,n,0)}static addIsDelta(t,n){t.addFieldInt8(2,+n,0)}static endDictionaryBatch(t){return t.endObject()}};var GM;(function(e){e[e.NONE=0]="NONE",e[e.Schema=1]="Schema",e[e.DictionaryBatch=2]="DictionaryBatch",e[e.RecordBatch=3]="RecordBatch",e[e.Tensor=4]="Tensor",e[e.SparseTensor=5]="SparseTensor"})(GM||(GM={}));let Cg=class kd{constructor(){this.bb=null,this.bb_pos=0}__init(t,n){return this.bb_pos=t,this.bb=n,this}static getRootAsMessage(t,n){return(n||new kd).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,n){return t.setPosition(t.position()+Hr),(n||new kd).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Ex.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):GM.NONE}header(t){const n=this.bb.__offset(this.bb_pos,8);return n?this.bb.__union(t,this.bb_pos+n):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):BigInt("0")}customMetadata(t,n){const r=this.bb.__offset(this.bb_pos,12);return r?(n||new Os).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+r)+t*4),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,n){t.addFieldInt16(0,n,Ex.V1)}static addHeaderType(t,n){t.addFieldInt8(1,n,GM.NONE)}static addHeader(t,n){t.addFieldOffset(2,n,0)}static addBodyLength(t,n){t.addFieldInt64(3,n,BigInt("0"))}static addCustomMetadata(t,n){t.addFieldOffset(4,n,0)}static createCustomMetadataVector(t,n){t.startVector(4,n.length,4);for(let r=n.length-1;r>=0;r--)t.addOffset(n[r]);return t.endVector()}static startCustomMetadataVector(t,n){t.startVector(4,n,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,n){t.finish(n)}static finishSizePrefixedMessageBuffer(t,n){t.finish(n,void 0,!0)}static createMessage(t,n,r,i,s,o){return kd.startMessage(t),kd.addVersion(t,n),kd.addHeaderType(t,r),kd.addHeader(t,i),kd.addBodyLength(t,s),kd.addCustomMetadata(t,o),kd.endMessage(t)}};class Ywt extends Cn{visit(t,n){return t==null||n==null?void 0:super.visit(t,n)}visitNull(t,n){return I1.startNull(n),I1.endNull(n)}visitInt(t,n){return xl.startInt(n),xl.addBitWidth(n,t.bitWidth),xl.addIsSigned(n,t.isSigned),xl.endInt(n)}visitFloat(t,n){return Jd.startFloatingPoint(n),Jd.addPrecision(n,t.precision),Jd.endFloatingPoint(n)}visitBinary(t,n){return T1.startBinary(n),T1.endBinary(n)}visitBool(t,n){return A1.startBool(n),A1.endBool(n)}visitUtf8(t,n){return R1.startUtf8(n),R1.endUtf8(n)}visitDecimal(t,n){return Cu.startDecimal(n),Cu.addScale(n,t.scale),Cu.addPrecision(n,t.precision),Cu.addBitWidth(n,t.bitWidth),Cu.endDecimal(n)}visitDate(t,n){return KO.startDate(n),KO.addUnit(n,t.unit),KO.endDate(n)}visitTime(t,n){return QA.startTime(n),QA.addUnit(n,t.unit),QA.addBitWidth(n,t.bitWidth),QA.endTime(n)}visitTimestamp(t,n){const r=t.timezone&&n.createString(t.timezone)||void 0;return JA.startTimestamp(n),JA.addUnit(n,t.unit),r!==void 0&&JA.addTimezone(n,r),JA.endTimestamp(n)}visitInterval(t,n){return Zd.startInterval(n),Zd.addUnit(n,t.unit),Zd.endInterval(n)}visitDuration(t,n){return Kd.startDuration(n),Kd.addUnit(n,t.unit),Kd.endDuration(n)}visitList(t,n){return C1.startList(n),C1.endList(n)}visitStruct(t,n){return k1.startStruct_(n),k1.endStruct_(n)}visitUnion(t,n){Gv.startTypeIdsVector(n,t.typeIds.length);const r=Gv.createTypeIdsVector(n,t.typeIds);return Gv.startUnion(n),Gv.addMode(n,t.mode),Gv.addTypeIds(n,r),Gv.endUnion(n)}visitDictionary(t,n){const r=this.visit(t.indices,n);return Hp.startDictionaryEncoding(n),Hp.addId(n,BigInt(t.id)),Hp.addIsOrdered(n,t.isOrdered),r!==void 0&&Hp.addIndexType(n,r),Hp.endDictionaryEncoding(n)}visitFixedSizeBinary(t,n){return Xd.startFixedSizeBinary(n),Xd.addByteWidth(n,t.byteWidth),Xd.endFixedSizeBinary(n)}visitFixedSizeList(t,n){return Qd.startFixedSizeList(n),Qd.addListSize(n,t.listSize),Qd.endFixedSizeList(n)}visitMap(t,n){return XO.startMap(n),XO.addKeysSorted(n,t.keysSorted),XO.endMap(n)}}const UB=new Ywt;function Kwt(e,t=new Map){return new Ar(Qwt(e,t),JO(e.metadata),t)}function zke(e){return new ql(e.count,Vke(e.columns),Hke(e.columns))}function Xwt(e){return new Fh(zke(e.data),e.id,e.isDelta)}function Qwt(e,t){return(e.fields||[]).filter(Boolean).map(n=>Br.fromJSON(n,t))}function sde(e,t){return(e.children||[]).filter(Boolean).map(n=>Br.fromJSON(n,t))}function Vke(e){return(e||[]).reduce((t,n)=>[...t,new cy(n.count,Jwt(n.VALIDITY)),...Vke(n.children)],[])}function Hke(e,t=[]){for(let n=-1,r=(e||[]).length;++n<r;){const i=e[n];i.VALIDITY&&t.push(new oh(t.length,i.VALIDITY.length)),i.TYPE_ID&&t.push(new oh(t.length,i.TYPE_ID.length)),i.OFFSET&&t.push(new oh(t.length,i.OFFSET.length)),i.DATA&&t.push(new oh(t.length,i.DATA.length)),t=Hke(i.children,t)}return t}function Jwt(e){return(e||[]).reduce((t,n)=>t+ +(n===0),0)}function Zwt(e,t){let n,r,i,s,o,a;return!t||!(s=e.dictionary)?(o=ade(e,sde(e,t)),i=new Br(e.name,o,e.nullable,JO(e.metadata))):t.has(n=s.id)?(r=(r=s.indexType)?ode(r):new iy,a=new oy(t.get(n),r,n,s.isOrdered),i=new Br(e.name,a,e.nullable,JO(e.metadata))):(r=(r=s.indexType)?ode(r):new iy,t.set(n,o=ade(e,sde(e,t))),a=new oy(o,r,n,s.isOrdered),i=new Br(e.name,a,e.nullable,JO(e.metadata))),i||null}function JO(e=[]){return new Map(e.map(({key:t,value:n})=>[t,n]))}function ode(e){return new su(e.isSigned,e.bitWidth)}function ade(e,t){const n=e.type.name;switch(n){case"NONE":return new Mm;case"null":return new Mm;case"binary":return new _I;case"utf8":return new yx;case"bool":return new wI;case"list":return new _x((t||[])[0]);case"struct":return new ha(t||[]);case"struct_":return new ha(t||[])}switch(n){case"int":{const r=e.type;return new su(r.isSigned,r.bitWidth)}case"floatingpoint":{const r=e.type;return new sy(Lo[r.precision])}case"decimal":{const r=e.type;return new NM(r.scale,r.precision,r.bitWidth)}case"date":{const r=e.type;return new vx($h[r.unit])}case"time":{const r=e.type;return new Lm(Wt[r.unit],r.bitWidth)}case"timestamp":{const r=e.type;return new PM(Wt[r.unit],r.timezone)}case"interval":{const r=e.type;return new bx(Mh[r.unit])}case"duration":{const r=e.type;return new OM(Wt[r.unit])}case"union":{const r=e.type,[i,...s]=(r.mode+"").toLowerCase(),o=i.toUpperCase()+s.join("");return new EI(rl[o],r.typeIds||[],t||[])}case"fixedsizebinary":{const r=e.type;return new DM(r.byteWidth)}case"fixedsizelist":{const r=e.type;return new wx(r.listSize,(t||[])[0])}case"map":{const r=e.type;return new xI((t||[])[0],r.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var eEt=pke,tEt=FM;class eh{static fromJSON(t,n){const r=new eh(0,Wa.V5,n);return r._createHeader=nEt(t,n),r}static decode(t){t=new tEt(Dr(t));const n=Cg.getRootAsMessage(t),r=n.bodyLength(),i=n.version(),s=n.headerType(),o=new eh(r,i,s);return o._createHeader=rEt(n,s),o}static encode(t){const n=new eEt;let r=-1;return t.isSchema()?r=Ar.encode(n,t.header()):t.isRecordBatch()?r=ql.encode(n,t.header()):t.isDictionaryBatch()&&(r=Fh.encode(n,t.header())),Cg.startMessage(n),Cg.addVersion(n,Wa.V5),Cg.addHeader(n,r),Cg.addHeaderType(n,t.headerType),Cg.addBodyLength(n,BigInt(t.bodyLength)),Cg.finishMessageBuffer(n,Cg.endMessage(n)),n.asUint8Array()}static from(t,n=0){if(t instanceof Ar)return new eh(0,Wa.V5,to.Schema,t);if(t instanceof ql)return new eh(n,Wa.V5,to.RecordBatch,t);if(t instanceof Fh)return new eh(n,Wa.V5,to.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===to.Schema}isRecordBatch(){return this.headerType===to.RecordBatch}isDictionaryBatch(){return this.headerType===to.DictionaryBatch}constructor(t,n,r,i){this._version=n,this._headerType=r,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength=Zf(t)}}class ql{get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}constructor(t,n,r){this._nodes=n,this._buffers=r,this._length=Zf(t)}}class Fh{get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}constructor(t,n,r=!1){this._data=t,this._isDelta=r,this._id=Zf(n)}}class oh{constructor(t,n){this.offset=Zf(t),this.length=Zf(n)}}class cy{constructor(t,n){this.length=Zf(t),this.nullCount=Zf(n)}}function nEt(e,t){return()=>{switch(t){case to.Schema:return Ar.fromJSON(e);case to.RecordBatch:return ql.fromJSON(e);case to.DictionaryBatch:return Fh.fromJSON(e)}throw new Error(`Unrecognized Message type: { name: ${to[t]}, type: ${t} }`)}}function rEt(e,t){return()=>{switch(t){case to.Schema:return Ar.decode(e.header(new Ld),new Map,e.version());case to.RecordBatch:return ql.decode(e.header(new Pp),e.version());case to.DictionaryBatch:return Fh.decode(e.header(new yw),e.version())}throw new Error(`Unrecognized Message type: { name: ${to[t]}, type: ${t} }`)}}Br.encode=pEt;Br.decode=dEt;Br.fromJSON=Zwt;Ar.encode=hEt;Ar.decode=iEt;Ar.fromJSON=Kwt;ql.encode=mEt;ql.decode=sEt;ql.fromJSON=zke;Fh.encode=gEt;Fh.decode=oEt;Fh.fromJSON=Xwt;cy.encode=yEt;cy.decode=uEt;oh.encode=vEt;oh.decode=aEt;function iEt(e,t=new Map,n=Wa.V5){const r=fEt(e,t);return new Ar(r,ZO(e),t,n)}function sEt(e,t=Wa.V5){if(e.compression()!==null)throw new Error("Record batch compression not implemented");return new ql(e.length(),lEt(e),cEt(e,t))}function oEt(e,t=Wa.V5){return new Fh(ql.decode(e.data(),t),e.id(),e.isDelta())}function aEt(e){return new oh(e.offset(),e.length())}function uEt(e){return new cy(e.length(),e.nullCount())}function lEt(e){const t=[];for(let n,r=-1,i=-1,s=e.nodesLength();++r<s;)(n=e.nodes(r))&&(t[++i]=cy.decode(n));return t}function cEt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.buffersLength();++i<o;)(r=e.buffers(i))&&(t<Wa.V4&&(r.bb_pos+=8*(i+1)),n[++s]=oh.decode(r));return n}function fEt(e,t){const n=[];for(let r,i=-1,s=-1,o=e.fieldsLength();++i<o;)(r=e.fields(i))&&(n[++s]=Br.decode(r,t));return n}function ude(e,t){const n=[];for(let r,i=-1,s=-1,o=e.childrenLength();++i<o;)(r=e.children(i))&&(n[++s]=Br.decode(r,t));return n}function dEt(e,t){let n,r,i,s,o,a;return!t||!(a=e.dictionary())?(i=cde(e,ude(e,t)),r=new Br(e.name(),i,e.nullable(),ZO(e))):t.has(n=Zf(a.id()))?(s=(s=a.indexType())?lde(s):new iy,o=new oy(t.get(n),s,n,a.isOrdered()),r=new Br(e.name(),o,e.nullable(),ZO(e))):(s=(s=a.indexType())?lde(s):new iy,t.set(n,i=cde(e,ude(e,t))),o=new oy(i,s,n,a.isOrdered()),r=new Br(e.name(),o,e.nullable(),ZO(e))),r||null}function ZO(e){const t=new Map;if(e)for(let n,r,i=-1,s=Math.trunc(e.customMetadataLength());++i<s;)(n=e.customMetadata(i))&&(r=n.key())!=null&&t.set(r,n.value());return t}function lde(e){return new su(e.isSigned(),e.bitWidth())}function cde(e,t){const n=e.typeType();switch(n){case _i.NONE:return new Mm;case _i.Null:return new Mm;case _i.Binary:return new _I;case _i.Utf8:return new yx;case _i.Bool:return new wI;case _i.List:return new _x((t||[])[0]);case _i.Struct_:return new ha(t||[])}switch(n){case _i.Int:{const r=e.type(new xl);return new su(r.isSigned(),r.bitWidth())}case _i.FloatingPoint:{const r=e.type(new Jd);return new sy(r.precision())}case _i.Decimal:{const r=e.type(new Cu);return new NM(r.scale(),r.precision(),r.bitWidth())}case _i.Date:{const r=e.type(new KO);return new vx(r.unit())}case _i.Time:{const r=e.type(new QA);return new Lm(r.unit(),r.bitWidth())}case _i.Timestamp:{const r=e.type(new JA);return new PM(r.unit(),r.timezone())}case _i.Interval:{const r=e.type(new Zd);return new bx(r.unit())}case _i.Duration:{const r=e.type(new Kd);return new OM(r.unit())}case _i.Union:{const r=e.type(new Gv);return new EI(r.mode(),r.typeIdsArray()||[],t||[])}case _i.FixedSizeBinary:{const r=e.type(new Xd);return new DM(r.byteWidth())}case _i.FixedSizeList:{const r=e.type(new Qd);return new wx(r.listSize(),(t||[])[0])}case _i.Map:{const r=e.type(new XO);return new xI((t||[])[0],r.keysSorted())}}throw new Error(`Unrecognized type: "${_i[n]}" (${n})`)}function hEt(e,t){const n=t.fields.map(s=>Br.encode(e,s));Ld.startFieldsVector(e,n.length);const r=Ld.createFieldsVector(e,n),i=t.metadata&&t.metadata.size>0?Ld.createCustomMetadataVector(e,[...t.metadata].map(([s,o])=>{const a=e.createString(`${s}`),u=e.createString(`${o}`);return Os.startKeyValue(e),Os.addKey(e,a),Os.addValue(e,u),Os.endKeyValue(e)})):-1;return Ld.startSchema(e),Ld.addFields(e,r),Ld.addEndianness(e,bEt?xx.Little:xx.Big),i!==-1&&Ld.addCustomMetadata(e,i),Ld.endSchema(e)}function pEt(e,t){let n=-1,r=-1,i=-1;const s=t.type;let o=t.typeId;Tn.isDictionary(s)?(o=s.dictionary.typeId,i=UB.visit(s,e),r=UB.visit(s.dictionary,e)):r=UB.visit(s,e);const a=(s.children||[]).map(c=>Br.encode(e,c)),u=pc.createChildrenVector(e,a),l=t.metadata&&t.metadata.size>0?pc.createCustomMetadataVector(e,[...t.metadata].map(([c,f])=>{const d=e.createString(`${c}`),h=e.createString(`${f}`);return Os.startKeyValue(e),Os.addKey(e,d),Os.addValue(e,h),Os.endKeyValue(e)})):-1;return t.name&&(n=e.createString(t.name)),pc.startField(e),pc.addType(e,r),pc.addTypeType(e,o),pc.addChildren(e,u),pc.addNullable(e,!!t.nullable),n!==-1&&pc.addName(e,n),i!==-1&&pc.addDictionary(e,i),l!==-1&&pc.addCustomMetadata(e,l),pc.endField(e)}function mEt(e,t){const n=t.nodes||[],r=t.buffers||[];Pp.startNodesVector(e,n.length);for(const o of n.slice().reverse())cy.encode(e,o);const i=e.endVector();Pp.startBuffersVector(e,r.length);for(const o of r.slice().reverse())oh.encode(e,o);const s=e.endVector();return Pp.startRecordBatch(e),Pp.addLength(e,BigInt(t.length)),Pp.addNodes(e,i),Pp.addBuffers(e,s),Pp.endRecordBatch(e)}function gEt(e,t){const n=ql.encode(e,t.data);return yw.startDictionaryBatch(e),yw.addId(e,BigInt(t.id)),yw.addIsDelta(e,t.isDelta),yw.addData(e,n),yw.endDictionaryBatch(e)}function yEt(e,t){return Uke.createFieldNode(e,BigInt(t.length),BigInt(t.nullCount))}function vEt(e,t){return Bke.createBuffer(e,BigInt(t.offset),BigInt(t.length))}const bEt=(()=>{const e=new ArrayBuffer(2);return new DataView(e).setInt16(0,256,!0),new Int16Array(e)[0]===256})(),NV="ARROW1",VQ=new Uint8Array(NV.length);for(let e=0;e<NV.length;e+=1)VQ[e]=NV.codePointAt(e);VQ.length;class hs extends Cn{static assemble(...t){const n=i=>i.flatMap(s=>Array.isArray(s)?n(s):s instanceof Sl?s.data.children:s.data),r=new hs;return r.visitMany(n(t)),r}constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}visit(t){if(t instanceof mr)return this.visitMany(t.data),this;const{type:n}=t;if(!Tn.isDictionary(n)){const{length:r}=t;if(r>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");if(Tn.isUnion(n))this.nodes.push(new cy(r,0));else{const{nullCount:i}=t;Tn.isNull(n)||qf.call(this,i<=0?new Uint8Array(0):$M(t.offset,r,t.nullBitmap)),this.nodes.push(new cy(r,i))}}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function qf(e){const t=e.byteLength+7&-8;return this.buffers.push(e),this.bufferRegions.push(new oh(this._byteLength,t)),this._byteLength+=t,this}function _Et(e){var t;const{type:n,length:r,typeIds:i,valueOffsets:s}=e;if(qf.call(this,i),n.mode===rl.Sparse)return PV.call(this,e);if(n.mode===rl.Dense){if(e.offset<=0)return qf.call(this,s),PV.call(this,e);{const o=new Int32Array(r),a=Object.create(null),u=Object.create(null);for(let l,c,f=-1;++f<r;)(l=i[f])!==void 0&&((c=a[l])===void 0&&(c=a[l]=s[f]),o[f]=s[f]-c,u[l]=((t=u[l])!==null&&t!==void 0?t:0)+1);qf.call(this,o),this.visitMany(e.children.map((l,c)=>{const f=n.typeIds[c],d=a[f],h=u[f];return l.slice(d,Math.min(r,h))}))}}return this}function wEt(e){let t;return e.nullCount>=e.length?qf.call(this,new Uint8Array(0)):(t=e.values)instanceof Uint8Array?qf.call(this,$M(e.offset,e.length,t)):qf.call(this,ZIe(e.values))}function hg(e){return qf.call(this,e.values.subarray(0,e.length*e.stride))}function qke(e){const{length:t,values:n,valueOffsets:r}=e,{[0]:i,[t]:s}=r,o=Math.min(s-i,n.byteLength-i);return qf.call(this,G2e(-i,t+1,r)),qf.call(this,n.subarray(i,i+o)),this}function HQ(e){const{length:t,valueOffsets:n}=e;if(n){const{[0]:r,[t]:i}=n;return qf.call(this,G2e(-r,t+1,n)),this.visit(e.children[0].slice(r,i-r))}return this.visit(e.children[0])}function PV(e){return this.visitMany(e.type.children.map((t,n)=>e.children[n]).filter(Boolean))[0]}hs.prototype.visitBool=wEt;hs.prototype.visitInt=hg;hs.prototype.visitFloat=hg;hs.prototype.visitUtf8=qke;hs.prototype.visitBinary=qke;hs.prototype.visitFixedSizeBinary=hg;hs.prototype.visitDate=hg;hs.prototype.visitTimestamp=hg;hs.prototype.visitTime=hg;hs.prototype.visitDecimal=hg;hs.prototype.visitList=HQ;hs.prototype.visitStruct=PV;hs.prototype.visitUnion=_Et;hs.prototype.visitInterval=hg;hs.prototype.visitDuration=hg;hs.prototype.visitFixedSizeList=HQ;hs.prototype.visitMap=HQ;class Wke extends gke{static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,n){throw new Error('"throughDOM" not available in this environment')}constructor(t){super(),this._position=0,this._started=!1,this._sink=new jB,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,ev(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy=typeof t.autoDestroy=="boolean"?t.autoDestroy:!0,this._writeLegacyIpcFormat=typeof t.writeLegacyIpcFormat=="boolean"?t.writeLegacyIpcFormat:!1}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return kF(t)?t.then(n=>this.writeAll(n)):RF(t)?YQ(this,t):GQ(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,n=null){return t===this._sink||t instanceof jB?this._sink=t:(this._sink=new jB,t&&Cbt(t)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&Ibt(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,(!n||!IV(n,this._schema))&&(n==null?(this._position=0,this._schema=null):(this._started=!0,this._schema=n,this._writeSchema(n))),this}write(t){let n=null;if(this._sink){if(t==null)return this.finish()&&void 0;if(t instanceof Pu&&!(n=t.schema))return this.finish()&&void 0;if(t instanceof Sl&&!(n=t.schema))return this.finish()&&void 0}else throw new Error("RecordBatchWriter is closed");if(n&&!IV(n,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,n)}t instanceof Sl?t instanceof Gwt||this._writeRecordBatch(t):t instanceof Pu?this.writeAll(t.batches):rQ(t)&&this.writeAll(t)}_writeMessage(t,n=8){const r=n-1,i=eh.encode(t),s=i.byteLength,o=this._writeLegacyIpcFormat?4:8,a=s+o+r&~r,u=a-s-o;return t.headerType===to.RecordBatch?this._recordBatchBlocks.push(new uy(a,t.bodyLength,this._position)):t.headerType===to.DictionaryBatch&&this._dictionaryBlocks.push(new uy(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-o)),s>0&&this._write(i),this._writePadding(u)}_write(t){if(this._started){const n=Dr(t);n&&n.byteLength>0&&(this._sink.write(n),this._position+=n.byteLength)}return this}_writeSchema(t){return this._writeMessage(eh.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(VQ)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:n,nodes:r,bufferRegions:i,buffers:s}=hs.assemble(t),o=new ql(t.numRows,r,i),a=eh.from(o,n);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(s)}_writeDictionaryBatch(t,n,r=!1){this._dictionaryDeltaOffsets.set(n,t.length+(this._dictionaryDeltaOffsets.get(n)||0));const{byteLength:i,nodes:s,bufferRegions:o,buffers:a}=hs.assemble(new mr([t])),u=new ql(t.length,s,o),l=new Fh(u,n,r),c=eh.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let n,r,i;for(let s=-1,o=t.length;++s<o;)(n=t[s])&&(r=n.byteLength)>0&&(this._write(n),(i=(r+7&-8)-r)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[n,r]of t.dictionaries){let i=this._dictionaryDeltaOffsets.get(n)||0;if(i===0||(r=r==null?void 0:r.slice(i)).length>0)for(const s of r.data)this._writeDictionaryBatch(s,n,i>0),i+=s.length}return this}}class qQ extends Wke{static writeAll(t,n){const r=new qQ(n);return kF(t)?t.then(i=>r.writeAll(i)):RF(t)?YQ(r,t):GQ(r,t)}}class WQ extends Wke{static writeAll(t){const n=new WQ;return kF(t)?t.then(r=>n.writeAll(r)):RF(t)?YQ(n,t):GQ(n,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const n=CV.encode(new CV(t,Wa.V5,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(n)._write(Int32Array.of(n.byteLength))._writeMagic()}}function GQ(e,t){let n=t;t instanceof Pu&&(n=t.batches,e.reset(void 0,t.schema));for(const r of n)e.write(r);return e.finish()}function YQ(e,t){var n,r,i,s,o,a,u;return Bp(this,void 0,void 0,function*(){try{for(n=!0,r=MC(t);i=yield r.next(),s=i.done,!s;n=!0){u=i.value,n=!1;const l=u;e.write(l)}}catch(l){o={error:l}}finally{try{!n&&!s&&(a=r.return)&&(yield a.call(r))}finally{if(o)throw o.error}}return e.finish()})}function EEt(e,t="stream"){return(t==="stream"?qQ:WQ).writeAll(e).toUint8Array(!0)}function KQ(e,t=1){return(e*t+63&-64||64)/t}function fy(e,t,n=e.BYTES_PER_ELEMENT){return new e(KQ(t,n))}function XQ(e){return e instanceof Or?e:new Or(e.type,0,e.length,e.nulls,e.buffers,null,e.dict)}function xEt(e){return new mr([XQ(e)])}const QQ=new TextEncoder;function SEt(e,t,n){const r=QQ.encode(n);return e.set(r,t),r.length}function TEt(e,t,n){return QQ.encodeInto(n,e.subarray(t)).written}const AEt=QQ.encodeInto?TEt:SEt;function fde(e,t){const n=fy(e.ArrayType,t);return{set(r,i){n[i]=r},data:()=>({type:e,length:t,buffers:[null,n]})}}function CEt(e,t){const n=fy(e.ArrayType,t/8);return{set(r,i){r&&(n[i>>3]|=1<<i%8)},data:()=>({type:e,length:t,buffers:[null,n]})}}function IEt(e,t){const n=fy(e.ArrayType,t);return{set(r,i){n[i]=r/864e5|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function kEt(e,t){const n=fy(e.ArrayType,t<<1);return{set(r,i){const s=i<<1;n[s]=r%4294967296|0,n[s+1]=r/4294967296|0},data:()=>({type:e,length:t,buffers:[null,n]})}}function REt(e){const t=HM({type:e,nullValues:[null,void 0]});return{set(n,r){t.set(r,n)},data:()=>t.finish().flush()}}function NEt(e,t,n){const r=fy(Int32Array,t+1),i=fy(Uint8Array,3*n);let s=0;return{set(o,a){s+=AEt(i,s,o),r[a+1]=s},data:()=>{const o=KQ(s),a=i.length>o?i.subarray(0,o):i;return{type:e,length:t,buffers:[r,a]}}}}function PEt(e,t){const n=[],r=fy(e.indices.ArrayType,t),i=Object.create(null);let s=-1,o=0;return{set(a,u){const l=String(a);let c=i[l];c===void 0&&(o+=l.length,i[l]=c=++s,n.push(l)),r[u]=c},data:()=>({type:e,length:t,buffers:[null,r],dict:OEt(e.dictionary,n,o)})}}function OEt(e,t,n){const r=NEt(e,t.length,n);return t.forEach(r.set),xEt(r.data())}function DEt(e,t){const n=fy(Uint8Array,t/8);let r=0;return{set(i,s){i==null?++r:(e.set(i,s),n[s>>3]|=1<<s%8)},data:()=>{const i=e.data();return r&&(i.nulls=r,i.buffers[2]=n),i}}}function $Et(e,t,n=!0){let r;switch(e.typeId){case re.Int:r=e.bitWidth<64?fde:null;break;case re.Float:r=e.precision>0?fde:null;break;case re.Dictionary:r=e.dictionary.typeId===re.Utf8&&e.indices.typeId===re.Int&&e.indices.bitWidth<64?PEt:null;break;case re.Bool:r=CEt;break;case re.Date:r=e.unit?kEt:IEt;break}return r==null?REt(e):n?DEt(r(e,t),t):r(e,t)}function MEt(e,t){const n=e.length,r=KQ(n,e.BYTES_PER_ELEMENT);let i=e;return n!==r&&(i=new e.constructor(r),i.set(e)),XQ({type:t,length:n,buffers:[null,i]})}function Gke(e,t,n,r,i=!0){const s=$Et(r,e,i);return t(n,s.set),XQ(s.data())}function JQ(e){if(e instanceof Tn||e==null)return e;switch(e){case re.Binary:return new _I;case re.Bool:return new wI;case re.DateDay:return new Vbt;case re.DateMillisecond:case re.Date:return new Hbt;case re.Dictionary:return new oy(new yx,new iy);case re.Float16:return new mIe;case re.Float32:return new hQ;case re.Float64:case re.Float:return new pQ;case re.Int8:return new oQ;case re.Int16:return new aQ;case re.Int32:case re.Int:return new iy;case re.Int64:return new uQ;case re.IntervalDayTime:return new Kbt;case re.Interval:case re.IntervalYearMonth:return new Xbt;case re.Null:return new Mm;case re.TimeMicrosecond:return new Gbt;case re.TimeMillisecond:case re.Time:return new Wbt;case re.TimeNanosecond:return new Ybt;case re.TimeSecond:return new qbt;case re.Uint8:return new lQ;case re.Uint16:return new cQ;case re.Uint32:return new fQ;case re.Uint64:return new dQ;case re.Utf8:return new yx;default:Sn(`Unsupported type code: ${Oh(e)}. Use a data type constructor instead?`)}}function LEt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function Yke(e,t){const n=OV();return e(t,n.add),n}function OV(){const e={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(t){if(++e.count,t==null){++e.nulls;return}const n=typeof t;if(n==="string")++e.strings;else if(n==="number")++e.nums,t<e.min&&(e.min=t),t>e.max&&(e.max=t),Number.isInteger(t)&&++e.ints;else if(n==="boolean")++e.bools;else if(n==="object")if($m(t))++e.dates,LEt(t)&&++e.utcdays;else if(S1(t)){++e.arrays,t.length<e.minlen&&(e.minlen=t.length),t.length>e.maxlen&&(e.maxlen=t.length);const r=e.array_prof||(e.array_prof=OV());t.forEach(r.add)}else{++e.structs;const r=e.struct_prof||(e.struct_prof={});for(const i in t)(r[i]||(r[i]=OV())).add(t[i])}else n==="bigint"&&(++e.bigints,t<e.min&&(e.min=t),t>e.max&&(e.max=t))},type(){return JQ(FEt(e))}};return e}function FEt(e){const t=e.count-e.nulls;if(t===0)return re.Null;if(e.ints===t){const n=Math.max(Math.abs(e.min)-1,e.max);return e.min<0?n>=2**31?re.Float64:n<128?re.Int8:n<32768?re.Int16:re.Int32:n>=2**32?re.Float64:n<256?re.Uint8:n<65536?re.Uint16:re.Uint32}else{if(e.nums===t)return re.Float64;if(e.bigints===t){const n=-e.min>e.max?-e.min-1n:e.max;return e.min<0?n<2**63?re.Int64:Sn(`BigInt exceeds 64 bits: ${n}`):e.max<2**64?re.Uint64:Sn(`BigInt exceeds 64 bits: ${e.max}`)}else{if(e.bools===t)return re.Bool;if(e.utcdays===t)return re.DateDay;if(e.dates===t)return re.DateMillisecond;if(e.arrays===t){const n=Br.new("value",e.array_prof.type(),!0);return e.minlen===e.maxlen?new wx(e.minlen,n):new _x(n)}else if(e.structs===t){const n=e.struct_prof;return new ha(Object.keys(n).map(r=>Br.new(r,n[r].type(),!0)))}else{if(e.strings>0)return re.Dictionary;Sn("Type inference failure")}}}}function jEt(e,t,n,r,i,s=!0){if(i=JQ(i),!i){const o=Yke(r,t);s=o.nulls>0,i=o.type()}return Gke(n,r,t,i,s)}function BEt(e,t,n,r,i,s=!0){i=JQ(i);const o=e.column(t),a=!(e.isFiltered()||e.isOrdered()),u=UEt(o);if(u&&a&&dde(u.type,i))return u;const l=o.data;if(Kk(l)){const c=zEt(l);if(a&&c&&dde(c,i))return MEt(l,c);i=i||c,s=!1}if(!i){const c=Yke(r,o);s=c.nulls>0,i=c.type()}return Gke(n,r,o,i,s)}function UEt(e){return e instanceof mr?e:e.vector instanceof mr?e.vector:null}function zEt(e){const n={Float32Array:hQ,Float64Array:pQ,Int8Array:oQ,Int16Array:aQ,Int32Array:iy,Uint8Array:lQ,Uint16Array:cQ,Uint32Array:fQ,BigInt64Array:uQ,BigUint64Array:dQ}[e.constructor.name];return n?new n:null}function dde(e,t){return!e||!t?!0:e.compareTo(t)}function VEt(e,t,n){const r=Math.min(e.length,n+t);return(i,s)=>{for(let o=n;o<r;++o)s(e[o][i],o)}}function HEt(e,t,n){const r=n===0&&e.numRows()<=t&&!e.isFiltered()&&!e.isOrdered();return(i,s)=>{let o=-1;r&&S1(i.data)?i.data.forEach(s):e.scan(a=>s(i.get(a),++o),!0,t,n)}}const qEt=()=>Sn("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function WEt(){try{return Pu}catch{qEt()}}function Kke(e,t={}){const{types:n={}}=t,{dataFrom:r,names:i,nrows:s,scan:o}=GEt(e,t),a={};i.forEach(l=>{const c=r(e,l,s,o,n[l]);c.length!==s&&Sn("Column length mismatch"),a[l]=c});const u=WEt();return new u(a)}function GEt(e,t){const{columns:n,limit:r=1/0,offset:i=0}=t,s=gi(n)?n(e):pr(n)?n:null;if(pr(e))return{dataFrom:jEt,names:s||Object.keys(e[0]),nrows:Math.min(r,e.length-i),scan:VEt(e,r,i)};if(YEt(e))return{dataFrom:BEt,names:s||e.columnNames(),nrows:Math.min(r,e.numRows()-i),scan:HEt(e,r,i)};Sn("Unsupported input data type")}function YEt(e){return e&&gi(e.reify)}function KEt(e,t={}){const{format:n,...r}=t,i=n||"stream";if(!["stream","file"].includes(i))throw Error("Unrecognised output format");return EEt(Kke(e,r),n)}function XEt(e){return e.getUTCHours()===0&&e.getUTCMinutes()===0&&e.getUTCSeconds()===0&&e.getUTCMilliseconds()===0}function QEt(e,t={}){let n=0,r=0,i=0,s=0,o=0,a=0;return e(u=>{if(++n,u==null){++r;return}const l=typeof u;if(l==="object"&&$m(u))++i,XEt(u)&&++s;else if(l==="number"&&(++o,u===u&&(u|0)!==u)){const c=u+"",f=c.indexOf(".");if(f>=0){const d=c.indexOf("e"),h=d>0?d:c.length;a=Math.max(a,h-f-1)}}}),{align:(r+o+i)/n>.5?"r":"l",format:{utc:i===s,digits:Math.min(a,t.maxdigits||6)}}}function jF(e,t){return gi(t)?t(e):t||e.columnNames()}function Xke(e,t,n){const r=n.format||{},i=n.align||{},s={},o={};return t.forEach(a=>{const u=QEt(JEt(e,a),n);o[a]=i[a]||u.align,s[a]=r[a]||u.format}),{align:o,format:s}}function JEt(e,t){const n=e.column(t);return r=>e.scan(i=>r(n.get(i)))}function ZQ(e,t,n=100,r,i){const s=e.data(),o=t.length;e.scan(a=>{i.row(a);for(let u=0;u<o;++u){const l=t[u];i.cell(s[t[u]].get(a),l,u)}},!0,n,r)}function ZEt(e,t={}){const n=jF(e,t.columns),r=t.format||{},i=t.delimiter||",",s=new RegExp(`["${i}
\r]`),o=l=>l==null?"":$m(l)?CF(l,!0):s.test(l+="")?'"'+l.replace(/"/g,'""')+'"':l,a=n.map(o);let u="";return ZQ(e,n,t.limit||1/0,t.offset,{row(){u+=a.join(i)+`
`},cell(l,c,f){a[f]=o(r[c]?r[c](l):l)}}),u+a.join(i)}function Qke(e,t={}){if(gi(t))return t(e)+"";const n=typeof e;if(n==="object"){if($m(e))return t.utc?CF(e):b2e(e);{const r=JSON.stringify(e,(s,o)=>Kk(o)?Array.from(o):o),i=t.maxlen||30;return r.length>i?r.slice(0,28)+""+(r[0]==="["?"]":"}"):r}}else if(n==="number"){const r=t.digits||0;let i;return e!==0&&((i=Math.abs(e))>=1e18||i<Math.pow(10,-r))?e.toExponential(r):e.toFixed(r)}else return e+""}function BF(e,t,n={}){for(const r in e)n[r]=t(e[r],r);return n}function ext(e,t={}){const n=jF(e,t.columns),{align:r,format:i}=Xke(e,n,t),s=txt(t),o=t.null,a=m=>m==="c"?"center":m==="r"?"right":"left",u=m=>m.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=(m,g)=>u(Qke(m,g)),c=o?(m,g)=>m==null?o(m):l(m,g):l;let f=-1,d=-1;const h=(m,g,y)=>{const v=y?a(r[g]):"",b=s[m]&&s[m](g,d,f)||"",w=(v?`text-align: ${v};`+(b?" ":""):"")+b;return`<${m}${w?` style="${w}"`:""}>`};let p=h("table")+h("thead")+h("tr",f)+n.map(m=>`${h("th",m,1)}${m}</th>`).join("")+"</tr></thead>"+h("tbody");return ZQ(e,n,t.limit,t.offset,{row(m){f=m,p+=(++d?"</tr>":"")+h("tr")},cell(m,g){p+=h("td",g,1)+c(m,i[g])+"</td>"}}),p+"</tr></tbody></table>"}function txt(e){return BF(e.style,t=>gi(t)?t:()=>t)}function nxt(e,t=!0,n=!1){return e===void 0||e?t:n}const rxt=e=>$m(e)?CF(e,!0):e;function ixt(e,t={}){const n=nxt(t.schema),r=t.format||{},i=jF(e,t.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(i.map(o=>({name:o})))+'},"data":{'),i.forEach((o,a)=>{s+=(a?",":"")+JSON.stringify(o)+":[";const u=e.column(o),l=r[o]||rxt;let c=-1;e.scan(f=>{const d=u.get(f);s+=(++c?",":"")+JSON.stringify(l(d))},!0,t.limit,t.offset),s+="]"}),s+"}"+(n?"}":"")}function sxt(e,t={}){const n=jF(e,t.columns),{align:r,format:i}=Xke(e,n,t),s=u=>u==="c"?":-:":u==="r"?"-:":":-",o=u=>u.replace(/\|/g,"\\|");let a="|"+n.map(o).join("|")+`|
|`+n.map(u=>s(r[u])).join("|")+"|";return ZQ(e,n,t.limit,t.offset,{row(){a+=`
|`},cell(u,l){a+=o(Qke(u,i[l]))+"|"}}),a+`
`}function Jke(e,t){for(const[n,r]of IF(t))e.set(n,r);return e}function oxt(e){return e.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Fm(e,t,n=new Map){return t=iu(t)?e.columnName(t):t,Vo(t)?n.set(t,t):pr(t)?t.forEach(r=>Fm(e,r,n)):gi(t)?Fm(e,t(e),n):xa(t)?Jke(n,t):Sn(`Invalid column selection: ${Oh(t)}`),n}function UF(e,t){return e.toObject=t,e}function Zke(e){return pr(e)?e.map(Zke):e&&e.toObject?e.toObject():e}function Sx(){return UF(e=>e.columnNames(),()=>({all:[]}))}function eRe(...e){return e=e.flat(),UF(t=>{const n=Fm(t,e);return t.columnNames(r=>!n.has(r))},()=>({not:Zke(e)}))}function axt(e,t){return UF(n=>{let r=iu(e)?e:n.columnIndex(e),i=iu(t)?t:n.columnIndex(t);if(i<r){const s=i;i=r,r=s}return n.columnNames().slice(r,i+1)},()=>({range:[e,t]}))}function uxt(e){return Vo(e)&&(e=RegExp(oxt(e))),UF(t=>t.columnNames(n=>e.test(n)),()=>({matches:[e.source,e.flags]}))}function lxt(e){return Kk(e.data)?e.data.constructor:Array}class qp extends A1t{static from(t,n){return new qp(k1t(t,n),n)}static new(t,n){if(t instanceof qp)return t;const r={},i=[];for(const[s,o]of IF(t))r[s]=o,i.push(s);return new qp(r,n||i)}constructor(t,n,r,i,s,o){BF(t,I1t,t),n=n||Object.keys(t);const a=n.length?t[n[0]].length:0;super(n,a,t,r,i,s,o)}create({data:t,names:n,filter:r,groups:i,order:s}){const o=r!==void 0?r:this.mask();return new qp(t||this._data,n||(t?null:this._names),o,i!==void 0?i:ibt(this._group,r&&o),s!==void 0?s:this._order,this._params)}assign(...t){const n=this.numRows(),r=this.reify(),i=ic(r).groupby(r.groups());return t.forEach(s=>{s=qp.new(s),s.numRows()!==n&&Sn("Assign row counts do not match"),s=s.reify(),s.columnNames(o=>i.add(o,s.column(o)))}),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,n=Array){const r=this.column(t),i=new n(this.numRows());let s=-1;return this.scan(o=>i[++s]=r.get(o),!0),i}get(t,n=0){const r=this.column(t);return this.isFiltered()||this.isOrdered()?r.get(this.indices()[n]):r.get(n)}getter(t){const n=this.column(t),r=this.isFiltered()||this.isOrdered()?this.indices():null;return r?i=>n.get(r[i]):n?i=>n.get(i):Sn(`Unrecognized column: ${t}`)}object(t=0){return hde(this)(t)}objects(t={}){const{grouped:n,limit:r,offset:i}=t,s=Fm(this,t.columns||Sx()),o=H2e(s),a=[];if(this.scan((u,l)=>a.push(o(u,l)),!0,r,i),n&&this.isGrouped()){const u=[];return this.scan(l=>u.push(l),!0,r,i),obt(this,u,a,n)}return a}*[Symbol.iterator](){const t=hde(this),n=this.numRows();for(let r=0;r<n;++r)yield t(r)}reify(t){const n=t?t.length:this.numRows(),r=this._names;let i,s;if(!t&&!this.isOrdered())if(this.isFiltered())n===this.totalRows()&&(i=this.data());else return this;if(!i){const o=t?u=>t.forEach(u):u=>this.scan(u,!0),a=r.length;i={};for(let u=0;u<a;++u){const l=r[u],c=this.column(l),f=i[l]=new(lxt(c))(n);let d=-1;o(h=>f[++d]=c.get(h))}this.isGrouped()&&(s=sbt(this.groups(),o,!!t,n))}return this.create({data:i,names:r,groups:s,filter:null,order:null})}transform(...t){return t.flat().reduce((n,r)=>r(n),this)}toArrow(t){return Kke(this,t)}toArrowBuffer(t){return KEt(this,t)}toCSV(t){return ZEt(this,t)}toHTML(t){return ext(this,t)}toJSON(t){return ixt(this,t)}toMarkdown(t){return sxt(this,t)}}function hde(e){let t=e._builder;if(!t){const n=H2e(e.columnNames()),r=e.data();if(e.isOrdered()||e.isFiltered()){const i=e.indices();t=s=>n(i[s],r)}else t=i=>n(i,r);e._builder=t}return t}class cxt{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function nr(e,t,n,r){const i=n[e.type]||n.Default;if(i&&i(e,t,r)===!1)return;const s=fxt[e.type];s&&s(e,t,n)}const xP=(e,t,n)=>{nr(e.argument,t,n,e)},zB=(e,t,n)=>{nr(e.left,t,n,e),nr(e.right,t,n,e)},pde=(e,t,n)=>{nr(e.test,t,n,e),nr(e.consequent,t,n,e),e.alternate&&nr(e.alternate,t,n,e)},VB=(e,t,n)=>{Fd(e.params,t,n,e),nr(e.body,t,n,e)},mde=(e,t,n)=>{nr(e.callee,t,n,e),Fd(e.arguments,t,n,e)},Fd=(e,t,n,r)=>{e.forEach(i=>nr(i,t,n,r))},fxt={TemplateLiteral:(e,t,n)=>{Fd(e.expressions,t,n,e),Fd(e.quasis,t,n,e)},MemberExpression:(e,t,n)=>{nr(e.object,t,n,e),nr(e.property,t,n,e)},CallExpression:mde,NewExpression:mde,ArrayExpression:(e,t,n)=>{Fd(e.elements,t,n,e)},AssignmentExpression:zB,AwaitExpression:xP,BinaryExpression:zB,LogicalExpression:zB,UnaryExpression:xP,UpdateExpression:xP,ConditionalExpression:pde,ObjectExpression:(e,t,n)=>{Fd(e.properties,t,n,e)},Property:(e,t,n)=>{nr(e.key,t,n,e),nr(e.value,t,n,e)},ArrowFunctionExpression:VB,FunctionExpression:VB,FunctionDeclaration:VB,VariableDeclaration:(e,t,n)=>{Fd(e.declarations,t,n,e)},VariableDeclarator:(e,t,n)=>{nr(e.id,t,n,e),nr(e.init,t,n,e)},SpreadElement:(e,t,n)=>{nr(e.argument,t,n,e)},BlockStatement:(e,t,n)=>{Fd(e.body,t,n,e)},ExpressionStatement:(e,t,n)=>{nr(e.expression,t,n,e)},IfStatement:pde,ForStatement:(e,t,n)=>{nr(e.init,t,n,e),nr(e.test,t,n,e),nr(e.update,t,n,e),nr(e.body,t,n,e)},WhileStatement:(e,t,n)=>{nr(e.test,t,n,e),nr(e.body,t,n,e)},DoWhileStatement:(e,t,n)=>{nr(e.body,t,n,e),nr(e.test,t,n,e)},SwitchStatement:(e,t,n)=>{nr(e.discriminant,t,n,e),Fd(e.cases,t,n,e)},SwitchCase:(e,t,n)=>{e.test&&nr(e.test,t,n,e),Fd(e.consequent,t,n,e)},ReturnStatement:xP,Program:(e,t,n)=>{nr(e.body[0],t,n,e)}};function tRe(e){delete e.start,delete e.end,delete e.optional}function gde(e){tRe(e),delete e.object,delete e.property,delete e.computed,e.table||delete e.table}function dxt(e){return nr(e,null,{Column:gde,Constant:gde,Default:tRe}),e}function $s(e,t){return t&&t.type===e}function hxt(e){return $s(lbt,e)||$s(ubt,e)}function pxt(e){return gi(e)?e:()=>e}const mxt="Escaped functions are not valid as rollup or pivot values.";function gxt(e,t,n){e.aggronly&&Sn(mxt);const r="(row,data)=>fn("+V2e(e.table.columnNames())+",$)";return{escape:tQ.escape(r,pxt(t.expr),n)}}var yxt=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,81,2,71,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,3,0,158,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,10,1,2,0,49,6,4,4,14,9,5351,0,7,14,13835,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,101,0,161,6,10,9,357,0,62,13,499,13,983,6,110,6,6,9,4759,9,787719,239],nRe=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,20,1,64,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,16,0,2,12,2,33,125,0,80,921,103,110,18,195,2637,96,16,1071,18,5,4026,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,16,0,30,2,3,0,15,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,7,5,262,61,147,44,11,6,17,0,322,29,19,43,485,27,757,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4153,7,221,3,5761,15,7472,16,621,2467,541,1507,4938,6,4191],vxt="-----------------------------------------------------------------------------------------------------------------------------------------------------",rRe="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",HB={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},qB="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",bxt={5:qB,"5module":qB+" export import",6:qB+" const class extends export import super"},_xt=/^in(stanceof)?$/,wxt=new RegExp("["+rRe+"]"),Ext=new RegExp("["+rRe+vxt+"]");function DV(e,t){for(var n=65536,r=0;r<t.length;r+=2){if(n+=t[r],n>e)return!1;if(n+=t[r+1],n>=e)return!0}return!1}function jm(e,t){return e<65?e===36:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&wxt.test(String.fromCharCode(e)):t===!1?!1:DV(e,nRe)}function Tx(e,t){return e<48?e===36:e<58?!0:e<65?!1:e<91?!0:e<97?e===95:e<123?!0:e<=65535?e>=170&&Ext.test(String.fromCharCode(e)):t===!1?!1:DV(e,nRe)||DV(e,yxt)}var ur=function(t,n){n===void 0&&(n={}),this.label=t,this.keyword=n.keyword,this.beforeExpr=!!n.beforeExpr,this.startsExpr=!!n.startsExpr,this.isLoop=!!n.isLoop,this.isAssign=!!n.isAssign,this.prefix=!!n.prefix,this.postfix=!!n.postfix,this.binop=n.binop||null,this.updateContext=null};function lc(e,t){return new ur(e,{beforeExpr:!0,binop:t})}var cc={beforeExpr:!0},vu={startsExpr:!0},eJ={};function Yn(e,t){return t===void 0&&(t={}),t.keyword=e,eJ[e]=new ur(e,t)}var K={num:new ur("num",vu),regexp:new ur("regexp",vu),string:new ur("string",vu),name:new ur("name",vu),privateId:new ur("privateId",vu),eof:new ur("eof"),bracketL:new ur("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ur("]"),braceL:new ur("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ur("}"),parenL:new ur("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ur(")"),comma:new ur(",",cc),semi:new ur(";",cc),colon:new ur(":",cc),dot:new ur("."),question:new ur("?",cc),questionDot:new ur("?."),arrow:new ur("=>",cc),template:new ur("template"),invalidTemplate:new ur("invalidTemplate"),ellipsis:new ur("...",cc),backQuote:new ur("`",vu),dollarBraceL:new ur("${",{beforeExpr:!0,startsExpr:!0}),eq:new ur("=",{beforeExpr:!0,isAssign:!0}),assign:new ur("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ur("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ur("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:lc("||",1),logicalAND:lc("&&",2),bitwiseOR:lc("|",3),bitwiseXOR:lc("^",4),bitwiseAND:lc("&",5),equality:lc("==/!=/===/!==",6),relational:lc("</>/<=/>=",7),bitShift:lc("<</>>/>>>",8),plusMin:new ur("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:lc("%",10),star:lc("*",10),slash:lc("/",10),starstar:new ur("**",{beforeExpr:!0}),coalesce:lc("??",1),_break:Yn("break"),_case:Yn("case",cc),_catch:Yn("catch"),_continue:Yn("continue"),_debugger:Yn("debugger"),_default:Yn("default",cc),_do:Yn("do",{isLoop:!0,beforeExpr:!0}),_else:Yn("else",cc),_finally:Yn("finally"),_for:Yn("for",{isLoop:!0}),_function:Yn("function",vu),_if:Yn("if"),_return:Yn("return",cc),_switch:Yn("switch"),_throw:Yn("throw",cc),_try:Yn("try"),_var:Yn("var"),_const:Yn("const"),_while:Yn("while",{isLoop:!0}),_with:Yn("with"),_new:Yn("new",{beforeExpr:!0,startsExpr:!0}),_this:Yn("this",vu),_super:Yn("super",vu),_class:Yn("class",vu),_extends:Yn("extends",cc),_export:Yn("export"),_import:Yn("import",vu),_null:Yn("null",vu),_true:Yn("true",vu),_false:Yn("false",vu),_in:Yn("in",{beforeExpr:!0,binop:7}),_instanceof:Yn("instanceof",{beforeExpr:!0,binop:7}),_typeof:Yn("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Yn("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Yn("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},tf=/\r\n?|\n|\u2028|\u2029/,xxt=new RegExp(tf.source,"g");function VS(e){return e===10||e===13||e===8232||e===8233}function iRe(e,t,n){n===void 0&&(n=e.length);for(var r=t;r<n;r++){var i=e.charCodeAt(r);if(VS(i))return r<n-1&&i===13&&e.charCodeAt(r+1)===10?r+2:r+1}return-1}var sRe=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,Ec=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,oRe=Object.prototype,Sxt=oRe.hasOwnProperty,Txt=oRe.toString,nR=Object.hasOwn||function(e,t){return Sxt.call(e,t)},yde=Array.isArray||function(e){return Txt.call(e)==="[object Array]"},vde=Object.create(null);function c0(e){return vde[e]||(vde[e]=new RegExp("^(?:"+e.replace(/ /g,"|")+")$"))}function dy(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode((e>>10)+55296,(e&1023)+56320))}var Axt=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,SI=function(t,n){this.line=t,this.column=n};SI.prototype.offset=function(t){return new SI(this.line,this.column+t)};var zF=function(t,n,r){this.start=n,this.end=r,t.sourceFile!==null&&(this.source=t.sourceFile)};function aRe(e,t){for(var n=1,r=0;;){var i=iRe(e,r,t);if(i<0)return new SI(n,t-r);++n,r=i}}var $V={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,checkPrivateFields:!0,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},bde=!1;function Cxt(e){var t={};for(var n in $V)t[n]=e&&nR(e,n)?e[n]:$V[n];if(t.ecmaVersion==="latest"?t.ecmaVersion=1e8:t.ecmaVersion==null?(!bde&&typeof console=="object"&&console.warn&&(bde=!0,console.warn(`Since Acorn 8.0.0, options.ecmaVersion is required.
Defaulting to 2020, but this will stop working in the future.`)),t.ecmaVersion=11):t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),t.allowReserved==null&&(t.allowReserved=t.ecmaVersion<5),(!e||e.allowHashBang==null)&&(t.allowHashBang=t.ecmaVersion>=14),yde(t.onToken)){var r=t.onToken;t.onToken=function(i){return r.push(i)}}return yde(t.onComment)&&(t.onComment=Ixt(t,t.onComment)),t}function Ixt(e,t){return function(n,r,i,s,o,a){var u={type:n?"Block":"Line",value:r,start:i,end:s};e.locations&&(u.loc=new zF(this,o,a)),e.ranges&&(u.range=[i,s]),t.push(u)}}var TI=1,HS=2,tJ=4,uRe=8,lRe=16,cRe=32,nJ=64,fRe=128,rR=256,rJ=TI|HS|rR;function iJ(e,t){return HS|(e?tJ:0)|(t?uRe:0)}var YM=0,sJ=1,pg=2,dRe=3,hRe=4,pRe=5,Hs=function(t,n,r){this.options=t=Cxt(t),this.sourceFile=t.sourceFile,this.keywords=c0(bxt[t.ecmaVersion>=6?6:t.sourceType==="module"?"5module":5]);var i="";t.allowReserved!==!0&&(i=HB[t.ecmaVersion>=6?6:t.ecmaVersion===5?5:3],t.sourceType==="module"&&(i+=" await")),this.reservedWords=c0(i);var s=(i?i+" ":"")+HB.strict;this.reservedWordsStrict=c0(s),this.reservedWordsStrictBind=c0(s+" "+HB.strictBind),this.input=String(n),this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf(`
`,r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(tf).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=K.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule=t.sourceType==="module",this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),this.pos===0&&t.allowHashBang&&this.input.slice(0,2)==="#!"&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(TI),this.regexpState=null,this.privateNameStack=[]},rp={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};Hs.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)};rp.inFunction.get=function(){return(this.currentVarScope().flags&HS)>0};rp.inGenerator.get=function(){return(this.currentVarScope().flags&uRe)>0&&!this.currentVarScope().inClassFieldInit};rp.inAsync.get=function(){return(this.currentVarScope().flags&tJ)>0&&!this.currentVarScope().inClassFieldInit};rp.canAwait.get=function(){for(var e=this.scopeStack.length-1;e>=0;e--){var t=this.scopeStack[e];if(t.inClassFieldInit||t.flags&rR)return!1;if(t.flags&HS)return(t.flags&tJ)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction};rp.allowSuper.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&nJ)>0||n||this.options.allowSuperOutsideMethod};rp.allowDirectSuper.get=function(){return(this.currentThisScope().flags&fRe)>0};rp.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())};rp.allowNewDotTarget.get=function(){var e=this.currentThisScope(),t=e.flags,n=e.inClassFieldInit;return(t&(HS|rR))>0||n};rp.inClassStaticBlock.get=function(){return(this.currentVarScope().flags&rR)>0};Hs.extend=function(){for(var t=[],n=arguments.length;n--;)t[n]=arguments[n];for(var r=this,i=0;i<t.length;i++)r=t[i](r);return r};Hs.parse=function(t,n){return new this(n,t).parse()};Hs.parseExpressionAt=function(t,n,r){var i=new this(r,t,n);return i.nextToken(),i.parseExpression()};Hs.tokenizer=function(t,n){return new this(n,t)};Object.defineProperties(Hs.prototype,rp);var fu=Hs.prototype,kxt=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;fu.strictDirective=function(e){if(this.options.ecmaVersion<5)return!1;for(;;){Ec.lastIndex=e,e+=Ec.exec(this.input)[0].length;var t=kxt.exec(this.input.slice(e));if(!t)return!1;if((t[1]||t[2])==="use strict"){Ec.lastIndex=e+t[0].length;var n=Ec.exec(this.input),r=n.index+n[0].length,i=this.input.charAt(r);return i===";"||i==="}"||tf.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(i)||i==="!"&&this.input.charAt(r+1)==="=")}e+=t[0].length,Ec.lastIndex=e,e+=Ec.exec(this.input)[0].length,this.input[e]===";"&&e++}};fu.eat=function(e){return this.type===e?(this.next(),!0):!1};fu.isContextual=function(e){return this.type===K.name&&this.value===e&&!this.containsEsc};fu.eatContextual=function(e){return this.isContextual(e)?(this.next(),!0):!1};fu.expectContextual=function(e){this.eatContextual(e)||this.unexpected()};fu.canInsertSemicolon=function(){return this.type===K.eof||this.type===K.braceR||tf.test(this.input.slice(this.lastTokEnd,this.start))};fu.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0};fu.semicolon=function(){!this.eat(K.semi)&&!this.insertSemicolon()&&this.unexpected()};fu.afterTrailingComma=function(e,t){if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0};fu.expect=function(e){this.eat(e)||this.unexpected()};fu.unexpected=function(e){this.raise(e??this.start,"Unexpected token")};var VF=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};fu.checkPatternErrors=function(e,t){if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var n=t?e.parenthesizedAssign:e.parenthesizedBind;n>-1&&this.raiseRecoverable(n,t?"Assigning to rvalue":"Parenthesized pattern")}};fu.checkExpressionErrors=function(e,t){if(!e)return!1;var n=e.shorthandAssign,r=e.doubleProto;if(!t)return n>=0||r>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),r>=0&&this.raiseRecoverable(r,"Redefinition of __proto__ property")};fu.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")};fu.isSimpleAssignTarget=function(e){return e.type==="ParenthesizedExpression"?this.isSimpleAssignTarget(e.expression):e.type==="Identifier"||e.type==="MemberExpression"};var $t=Hs.prototype;$t.parseTopLevel=function(e){var t=Object.create(null);for(e.body||(e.body=[]);this.type!==K.eof;){var n=this.parseStatement(null,!0,t);e.body.push(n)}if(this.inModule)for(var r=0,i=Object.keys(this.undefinedExports);r<i.length;r+=1){var s=i[r];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(e.body),this.next(),e.sourceType=this.options.sourceType,this.finishNode(e,"Program")};var oJ={kind:"loop"},Rxt={kind:"switch"};$t.isLet=function(e){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;Ec.lastIndex=this.pos;var t=Ec.exec(this.input),n=this.pos+t[0].length,r=this.input.charCodeAt(n);if(r===91||r===92)return!0;if(e)return!1;if(r===123||r>55295&&r<56320)return!0;if(jm(r,!0)){for(var i=n+1;Tx(r=this.input.charCodeAt(i),!0);)++i;if(r===92||r>55295&&r<56320)return!0;var s=this.input.slice(n,i);if(!_xt.test(s))return!0}return!1};$t.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;Ec.lastIndex=this.pos;var e=Ec.exec(this.input),t=this.pos+e[0].length,n;return!tf.test(this.input.slice(this.pos,t))&&this.input.slice(t,t+8)==="function"&&(t+8===this.input.length||!(Tx(n=this.input.charCodeAt(t+8))||n>55295&&n<56320))};$t.parseStatement=function(e,t,n){var r=this.type,i=this.startNode(),s;switch(this.isLet(e)&&(r=K._var,s="let"),r){case K._break:case K._continue:return this.parseBreakContinueStatement(i,r.keyword);case K._debugger:return this.parseDebuggerStatement(i);case K._do:return this.parseDoStatement(i);case K._for:return this.parseForStatement(i);case K._function:return e&&(this.strict||e!=="if"&&e!=="label")&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(i,!1,!e);case K._class:return e&&this.unexpected(),this.parseClass(i,!0);case K._if:return this.parseIfStatement(i);case K._return:return this.parseReturnStatement(i);case K._switch:return this.parseSwitchStatement(i);case K._throw:return this.parseThrowStatement(i);case K._try:return this.parseTryStatement(i);case K._const:case K._var:return s=s||this.value,e&&s!=="var"&&this.unexpected(),this.parseVarStatement(i,s);case K._while:return this.parseWhileStatement(i);case K._with:return this.parseWithStatement(i);case K.braceL:return this.parseBlock(!0,i);case K.semi:return this.parseEmptyStatement(i);case K._export:case K._import:if(this.options.ecmaVersion>10&&r===K._import){Ec.lastIndex=this.pos;var o=Ec.exec(this.input),a=this.pos+o[0].length,u=this.input.charCodeAt(a);if(u===40||u===46)return this.parseExpressionStatement(i,this.parseExpression())}return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===K._import?this.parseImport(i):this.parseExport(i,n);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(i,!0,!e);var l=this.value,c=this.parseExpression();return r===K.name&&c.type==="Identifier"&&this.eat(K.colon)?this.parseLabeledStatement(i,l,c,e):this.parseExpressionStatement(i,c)}};$t.parseBreakContinueStatement=function(e,t){var n=t==="break";this.next(),this.eat(K.semi)||this.insertSemicolon()?e.label=null:this.type!==K.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var r=0;r<this.labels.length;++r){var i=this.labels[r];if((e.label==null||i.name===e.label.name)&&(i.kind!=null&&(n||i.kind==="loop")||e.label&&n))break}return r===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,n?"BreakStatement":"ContinueStatement")};$t.parseDebuggerStatement=function(e){return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")};$t.parseDoStatement=function(e){return this.next(),this.labels.push(oJ),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(K._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(K.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")};$t.parseForStatement=function(e){this.next();var t=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(oJ),this.enterScope(0),this.expect(K.parenL),this.type===K.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var n=this.isLet();if(this.type===K._var||this.type===K._const||n){var r=this.startNode(),i=n?"let":this.value;return this.next(),this.parseVar(r,!0,i),this.finishNode(r,"VariableDeclaration"),(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&r.declarations.length===1?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,r)):(t>-1&&this.unexpected(t),this.parseFor(e,r))}var s=this.isContextual("let"),o=!1,a=new VF,u=this.parseExpression(t>-1?"await":!0,a);return this.type===K._in||(o=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===K._in?t>-1&&this.unexpected(t):e.await=t>-1),s&&o&&this.raise(u.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(u,!1,a),this.checkLValPattern(u),this.parseForIn(e,u)):(this.checkExpressionErrors(a,!0),t>-1&&this.unexpected(t),this.parseFor(e,u))};$t.parseFunctionStatement=function(e,t,n){return this.next(),this.parseFunction(e,ZC|(n?0:MV),!1,t)};$t.parseIfStatement=function(e){return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(K._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")};$t.parseReturnStatement=function(e){return!this.inFunction&&!this.options.allowReturnOutsideFunction&&this.raise(this.start,"'return' outside of function"),this.next(),this.eat(K.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")};$t.parseSwitchStatement=function(e){this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(K.braceL),this.labels.push(Rxt),this.enterScope(0);for(var t,n=!1;this.type!==K.braceR;)if(this.type===K._case||this.type===K._default){var r=this.type===K._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),r?t.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,t.test=null),this.expect(K.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")};$t.parseThrowStatement=function(e){return this.next(),tf.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Nxt=[];$t.parseCatchClauseParam=function(){var e=this.parseBindingAtom(),t=e.type==="Identifier";return this.enterScope(t?cRe:0),this.checkLValPattern(e,t?hRe:pg),this.expect(K.parenR),e};$t.parseTryStatement=function(e){if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===K._catch){var t=this.startNode();this.next(),this.eat(K.parenL)?t.param=this.parseCatchClauseParam():(this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0)),t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(K._finally)?this.parseBlock():null,!e.handler&&!e.finalizer&&this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")};$t.parseVarStatement=function(e,t,n){return this.next(),this.parseVar(e,!1,t,n),this.semicolon(),this.finishNode(e,"VariableDeclaration")};$t.parseWhileStatement=function(e){return this.next(),e.test=this.parseParenExpression(),this.labels.push(oJ),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")};$t.parseWithStatement=function(e){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")};$t.parseEmptyStatement=function(e){return this.next(),this.finishNode(e,"EmptyStatement")};$t.parseLabeledStatement=function(e,t,n,r){for(var i=0,s=this.labels;i<s.length;i+=1){var o=s[i];o.name===t&&this.raise(n.start,"Label '"+t+"' is already declared")}for(var a=this.type.isLoop?"loop":this.type===K._switch?"switch":null,u=this.labels.length-1;u>=0;u--){var l=this.labels[u];if(l.statementStart===e.start)l.statementStart=this.start,l.kind=a;else break}return this.labels.push({name:t,kind:a,statementStart:this.start}),e.body=this.parseStatement(r?r.indexOf("label")===-1?r+"label":r:"label"),this.labels.pop(),e.label=n,this.finishNode(e,"LabeledStatement")};$t.parseExpressionStatement=function(e,t){return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")};$t.parseBlock=function(e,t,n){for(e===void 0&&(e=!0),t===void 0&&(t=this.startNode()),t.body=[],this.expect(K.braceL),e&&this.enterScope(0);this.type!==K.braceR;){var r=this.parseStatement(null);t.body.push(r)}return n&&(this.strict=!1),this.next(),e&&this.exitScope(),this.finishNode(t,"BlockStatement")};$t.parseFor=function(e,t){return e.init=t,this.expect(K.semi),e.test=this.type===K.semi?null:this.parseExpression(),this.expect(K.semi),e.update=this.type===K.parenR?null:this.parseExpression(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")};$t.parseForIn=function(e,t){var n=this.type===K._in;return this.next(),t.type==="VariableDeclaration"&&t.declarations[0].init!=null&&(!n||this.options.ecmaVersion<8||this.strict||t.kind!=="var"||t.declarations[0].id.type!=="Identifier")&&this.raise(t.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),e.left=t,e.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(K.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,n?"ForInStatement":"ForOfStatement")};$t.parseVar=function(e,t,n,r){for(e.declarations=[],e.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(K.eq)?i.init=this.parseMaybeAssign(t):!r&&n==="const"&&!(this.type===K._in||this.options.ecmaVersion>=6&&this.isContextual("of"))?this.unexpected():!r&&i.id.type!=="Identifier"&&!(t&&(this.type===K._in||this.isContextual("of")))?this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):i.init=null,e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(K.comma))break}return e};$t.parseVarId=function(e,t){e.id=this.parseBindingAtom(),this.checkLValPattern(e.id,t==="var"?sJ:pg,!1)};var ZC=1,MV=2,mRe=4;$t.parseFunction=function(e,t,n,r,i){this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!r)&&(this.type===K.star&&t&MV&&this.unexpected(),e.generator=this.eat(K.star)),this.options.ecmaVersion>=8&&(e.async=!!r),t&ZC&&(e.id=t&mRe&&this.type!==K.name?null:this.parseIdent(),e.id&&!(t&MV)&&this.checkLValSimple(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?sJ:pg:dRe));var s=this.yieldPos,o=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(iJ(e.async,e.generator)),t&ZC||(e.id=this.type===K.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,n,!1,i),this.yieldPos=s,this.awaitPos=o,this.awaitIdentPos=a,this.finishNode(e,t&ZC?"FunctionDeclaration":"FunctionExpression")};$t.parseFunctionParams=function(e){this.expect(K.parenL),e.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()};$t.parseClass=function(e,t){this.next();var n=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var r=this.enterClassBody(),i=this.startNode(),s=!1;for(i.body=[],this.expect(K.braceL);this.type!==K.braceR;){var o=this.parseClassElement(e.superClass!==null);o&&(i.body.push(o),o.type==="MethodDefinition"&&o.kind==="constructor"?(s&&this.raiseRecoverable(o.start,"Duplicate constructor in the same class"),s=!0):o.key&&o.key.type==="PrivateIdentifier"&&Pxt(r,o)&&this.raiseRecoverable(o.key.start,"Identifier '#"+o.key.name+"' has already been declared"))}return this.strict=n,this.next(),e.body=this.finishNode(i,"ClassBody"),this.exitClassBody(),this.finishNode(e,t?"ClassDeclaration":"ClassExpression")};$t.parseClassElement=function(e){if(this.eat(K.semi))return null;var t=this.options.ecmaVersion,n=this.startNode(),r="",i=!1,s=!1,o="method",a=!1;if(this.eatContextual("static")){if(t>=13&&this.eat(K.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===K.star?a=!0:r="static"}if(n.static=a,!r&&t>=8&&this.eatContextual("async")&&((this.isClassElementNameStart()||this.type===K.star)&&!this.canInsertSemicolon()?s=!0:r="async"),!r&&(t>=9||!s)&&this.eat(K.star)&&(i=!0),!r&&!s&&!i){var u=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?o=u:r=u)}if(r?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=r,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),t<13||this.type===K.parenL||o!=="method"||i||s){var l=!n.static&&KM(n,"constructor"),c=l&&e;l&&o!=="method"&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=l?"constructor":o,this.parseClassMethod(n,i,s,c)}else this.parseClassField(n);return n};$t.isClassElementNameStart=function(){return this.type===K.name||this.type===K.privateId||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword};$t.parseClassElementName=function(e){this.type===K.privateId?(this.value==="constructor"&&this.raise(this.start,"Classes can't have an element named '#constructor'"),e.computed=!1,e.key=this.parsePrivateIdent()):this.parsePropertyName(e)};$t.parseClassMethod=function(e,t,n,r){var i=e.key;e.kind==="constructor"?(t&&this.raise(i.start,"Constructor can't be a generator"),n&&this.raise(i.start,"Constructor can't be an async method")):e.static&&KM(e,"prototype")&&this.raise(i.start,"Classes may not have a static property named prototype");var s=e.value=this.parseMethod(t,n,r);return e.kind==="get"&&s.params.length!==0&&this.raiseRecoverable(s.start,"getter should have no params"),e.kind==="set"&&s.params.length!==1&&this.raiseRecoverable(s.start,"setter should have exactly one param"),e.kind==="set"&&s.params[0].type==="RestElement"&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(e,"MethodDefinition")};$t.parseClassField=function(e){if(KM(e,"constructor")?this.raise(e.key.start,"Classes can't have a field named 'constructor'"):e.static&&KM(e,"prototype")&&this.raise(e.key.start,"Classes can't have a static field named 'prototype'"),this.eat(K.eq)){var t=this.currentThisScope(),n=t.inClassFieldInit;t.inClassFieldInit=!0,e.value=this.parseMaybeAssign(),t.inClassFieldInit=n}else e.value=null;return this.semicolon(),this.finishNode(e,"PropertyDefinition")};$t.parseClassStaticBlock=function(e){e.body=[];var t=this.labels;for(this.labels=[],this.enterScope(rR|nJ);this.type!==K.braceR;){var n=this.parseStatement(null);e.body.push(n)}return this.next(),this.exitScope(),this.labels=t,this.finishNode(e,"StaticBlock")};$t.parseClassId=function(e,t){this.type===K.name?(e.id=this.parseIdent(),t&&this.checkLValSimple(e.id,pg,!1)):(t===!0&&this.unexpected(),e.id=null)};$t.parseClassSuper=function(e){e.superClass=this.eat(K._extends)?this.parseExprSubscripts(null,!1):null};$t.enterClassBody=function(){var e={declared:Object.create(null),used:[]};return this.privateNameStack.push(e),e.declared};$t.exitClassBody=function(){var e=this.privateNameStack.pop(),t=e.declared,n=e.used;if(this.options.checkPrivateFields)for(var r=this.privateNameStack.length,i=r===0?null:this.privateNameStack[r-1],s=0;s<n.length;++s){var o=n[s];nR(t,o.name)||(i?i.used.push(o):this.raiseRecoverable(o.start,"Private field '#"+o.name+"' must be declared in an enclosing class"))}};function Pxt(e,t){var n=t.key.name,r=e[n],i="true";return t.type==="MethodDefinition"&&(t.kind==="get"||t.kind==="set")&&(i=(t.static?"s":"i")+t.kind),r==="iget"&&i==="iset"||r==="iset"&&i==="iget"||r==="sget"&&i==="sset"||r==="sset"&&i==="sget"?(e[n]="true",!1):r?!0:(e[n]=i,!1)}function KM(e,t){var n=e.computed,r=e.key;return!n&&(r.type==="Identifier"&&r.name===t||r.type==="Literal"&&r.value===t)}$t.parseExportAllDeclaration=function(e,t){return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(e.exported=this.parseModuleExportName(),this.checkExport(t,e.exported,this.lastTokStart)):e.exported=null),this.expectContextual("from"),this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration")};$t.parseExport=function(e,t){if(this.next(),this.eat(K.star))return this.parseExportAllDeclaration(e,t);if(this.eat(K._default))return this.checkExport(t,"default",this.lastTokStart),e.declaration=this.parseExportDefaultDeclaration(),this.finishNode(e,"ExportDefaultDeclaration");if(this.shouldParseExportStatement())e.declaration=this.parseExportDeclaration(e),e.declaration.type==="VariableDeclaration"?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==K.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var n=0,r=e.specifiers;n<r.length;n+=1){var i=r[n];this.checkUnreserved(i.local),this.checkLocalExport(i.local),i.local.type==="Literal"&&this.raise(i.local.start,"A string literal cannot be used as an exported binding without `from`.")}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")};$t.parseExportDeclaration=function(e){return this.parseStatement(null)};$t.parseExportDefaultDeclaration=function(){var e;if(this.type===K._function||(e=this.isAsyncFunction())){var t=this.startNode();return this.next(),e&&this.next(),this.parseFunction(t,ZC|mRe,!1,e)}else if(this.type===K._class){var n=this.startNode();return this.parseClass(n,"nullableID")}else{var r=this.parseMaybeAssign();return this.semicolon(),r}};$t.checkExport=function(e,t,n){e&&(typeof t!="string"&&(t=t.type==="Identifier"?t.name:t.value),nR(e,t)&&this.raiseRecoverable(n,"Duplicate export '"+t+"'"),e[t]=!0)};$t.checkPatternExport=function(e,t){var n=t.type;if(n==="Identifier")this.checkExport(e,t,t.start);else if(n==="ObjectPattern")for(var r=0,i=t.properties;r<i.length;r+=1){var s=i[r];this.checkPatternExport(e,s)}else if(n==="ArrayPattern")for(var o=0,a=t.elements;o<a.length;o+=1){var u=a[o];u&&this.checkPatternExport(e,u)}else n==="Property"?this.checkPatternExport(e,t.value):n==="AssignmentPattern"?this.checkPatternExport(e,t.left):n==="RestElement"&&this.checkPatternExport(e,t.argument)};$t.checkVariableExport=function(e,t){if(e)for(var n=0,r=t;n<r.length;n+=1){var i=r[n];this.checkPatternExport(e,i.id)}};$t.shouldParseExportStatement=function(){return this.type.keyword==="var"||this.type.keyword==="const"||this.type.keyword==="class"||this.type.keyword==="function"||this.isLet()||this.isAsyncFunction()};$t.parseExportSpecifier=function(e){var t=this.startNode();return t.local=this.parseModuleExportName(),t.exported=this.eatContextual("as")?this.parseModuleExportName():t.local,this.checkExport(e,t.exported,t.exported.start),this.finishNode(t,"ExportSpecifier")};$t.parseExportSpecifiers=function(e){var t=[],n=!0;for(this.expect(K.braceL);!this.eat(K.braceR);){if(n)n=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;t.push(this.parseExportSpecifier(e))}return t};$t.parseImport=function(e){return this.next(),this.type===K.string?(e.specifiers=Nxt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===K.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")};$t.parseImportSpecifier=function(){var e=this.startNode();return e.imported=this.parseModuleExportName(),this.eatContextual("as")?e.local=this.parseIdent():(this.checkUnreserved(e.imported),e.local=e.imported),this.checkLValSimple(e.local,pg),this.finishNode(e,"ImportSpecifier")};$t.parseImportDefaultSpecifier=function(){var e=this.startNode();return e.local=this.parseIdent(),this.checkLValSimple(e.local,pg),this.finishNode(e,"ImportDefaultSpecifier")};$t.parseImportNamespaceSpecifier=function(){var e=this.startNode();return this.next(),this.expectContextual("as"),e.local=this.parseIdent(),this.checkLValSimple(e.local,pg),this.finishNode(e,"ImportNamespaceSpecifier")};$t.parseImportSpecifiers=function(){var e=[],t=!0;if(this.type===K.name&&(e.push(this.parseImportDefaultSpecifier()),!this.eat(K.comma)))return e;if(this.type===K.star)return e.push(this.parseImportNamespaceSpecifier()),e;for(this.expect(K.braceL);!this.eat(K.braceR);){if(t)t=!1;else if(this.expect(K.comma),this.afterTrailingComma(K.braceR))break;e.push(this.parseImportSpecifier())}return e};$t.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===K.string){var e=this.parseLiteral(this.value);return Axt.test(e.value)&&this.raise(e.start,"An export name cannot include a lone surrogate."),e}return this.parseIdent(!0)};$t.adaptDirectivePrologue=function(e){for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)};$t.isDirectiveCandidate=function(e){return this.options.ecmaVersion>=5&&e.type==="ExpressionStatement"&&e.expression.type==="Literal"&&typeof e.expression.value=="string"&&(this.input[e.start]==='"'||this.input[e.start]==="'")};var nf=Hs.prototype;nf.toAssignable=function(e,t,n){if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&e.name==="await"&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.toAssignable(s,t),s.type==="RestElement"&&(s.argument.type==="ArrayPattern"||s.argument.type==="ObjectPattern")&&this.raise(s.argument.start,"Unexpected token")}break;case"Property":e.kind!=="init"&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),e.argument.type==="AssignmentPattern"&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":e.operator!=="="&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,n);break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return e};nf.toAssignableList=function(e,t){for(var n=e.length,r=0;r<n;r++){var i=e[r];i&&this.toAssignable(i,t)}if(n){var s=e[n-1];this.options.ecmaVersion===6&&t&&s&&s.type==="RestElement"&&s.argument.type!=="Identifier"&&this.unexpected(s.argument.start)}return e};nf.parseSpread=function(e){var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")};nf.parseRestBinding=function(){var e=this.startNode();return this.next(),this.options.ecmaVersion===6&&this.type!==K.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")};nf.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case K.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(K.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case K.braceL:return this.parseObj(!0)}return this.parseIdent()};nf.parseBindingList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);)if(s?s=!1:this.expect(K.comma),t&&this.type===K.comma)i.push(null);else{if(n&&this.afterTrailingComma(e))break;if(this.type===K.ellipsis){var o=this.parseRestBinding();this.parseBindingListItem(o),i.push(o),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}else i.push(this.parseAssignableListItem(r))}return i};nf.parseAssignableListItem=function(e){var t=this.parseMaybeDefault(this.start,this.startLoc);return this.parseBindingListItem(t),t};nf.parseBindingListItem=function(e){return e};nf.parseMaybeDefault=function(e,t,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(K.eq))return n;var r=this.startNodeAt(e,t);return r.left=n,r.right=this.parseMaybeAssign(),this.finishNode(r,"AssignmentPattern")};nf.checkLValSimple=function(e,t,n){t===void 0&&(t=YM);var r=t!==YM;switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(r?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(t===pg&&e.name==="let"&&this.raiseRecoverable(e.start,"let is disallowed as a lexically bound name"),n&&(nR(n,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),n[e.name]=!0),t!==pRe&&this.declareName(e.name,t,e.start));break;case"ChainExpression":this.raiseRecoverable(e.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":r&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ParenthesizedExpression":return r&&this.raiseRecoverable(e.start,"Binding parenthesized expression"),this.checkLValSimple(e.expression,t,n);default:this.raise(e.start,(r?"Binding":"Assigning to")+" rvalue")}};nf.checkLValPattern=function(e,t,n){switch(t===void 0&&(t=YM),e.type){case"ObjectPattern":for(var r=0,i=e.properties;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,t,n)}break;case"ArrayPattern":for(var o=0,a=e.elements;o<a.length;o+=1){var u=a[o];u&&this.checkLValInnerPattern(u,t,n)}break;default:this.checkLValSimple(e,t,n)}};nf.checkLValInnerPattern=function(e,t,n){switch(t===void 0&&(t=YM),e.type){case"Property":this.checkLValInnerPattern(e.value,t,n);break;case"AssignmentPattern":this.checkLValPattern(e.left,t,n);break;case"RestElement":this.checkLValPattern(e.argument,t,n);break;default:this.checkLValPattern(e,t,n)}};var hf=function(t,n,r,i,s){this.token=t,this.isExpr=!!n,this.preserveSpace=!!r,this.override=i,this.generator=!!s},ki={b_stat:new hf("{",!1),b_expr:new hf("{",!0),b_tmpl:new hf("${",!1),p_stat:new hf("(",!1),p_expr:new hf("(",!0),q_tmpl:new hf("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new hf("function",!1),f_expr:new hf("function",!0),f_expr_gen:new hf("function",!0,!1,null,!0),f_gen:new hf("function",!1,!1,null,!0)},qS=Hs.prototype;qS.initialContext=function(){return[ki.b_stat]};qS.curContext=function(){return this.context[this.context.length-1]};qS.braceIsBlock=function(e){var t=this.curContext();return t===ki.f_expr||t===ki.f_stat?!0:e===K.colon&&(t===ki.b_stat||t===ki.b_expr)?!t.isExpr:e===K._return||e===K.name&&this.exprAllowed?tf.test(this.input.slice(this.lastTokEnd,this.start)):e===K._else||e===K.semi||e===K.eof||e===K.parenR||e===K.arrow?!0:e===K.braceL?t===ki.b_stat:e===K._var||e===K._const||e===K.name?!1:!this.exprAllowed};qS.inGeneratorContext=function(){for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if(t.token==="function")return t.generator}return!1};qS.updateContext=function(e){var t,n=this.type;n.keyword&&e===K.dot?this.exprAllowed=!1:(t=n.updateContext)?t.call(this,e):this.exprAllowed=n.beforeExpr};qS.overrideContext=function(e){this.curContext()!==e&&(this.context[this.context.length-1]=e)};K.parenR.updateContext=K.braceR.updateContext=function(){if(this.context.length===1){this.exprAllowed=!0;return}var e=this.context.pop();e===ki.b_stat&&this.curContext().token==="function"&&(e=this.context.pop()),this.exprAllowed=!e.isExpr};K.braceL.updateContext=function(e){this.context.push(this.braceIsBlock(e)?ki.b_stat:ki.b_expr),this.exprAllowed=!0};K.dollarBraceL.updateContext=function(){this.context.push(ki.b_tmpl),this.exprAllowed=!0};K.parenL.updateContext=function(e){var t=e===K._if||e===K._for||e===K._with||e===K._while;this.context.push(t?ki.p_stat:ki.p_expr),this.exprAllowed=!0};K.incDec.updateContext=function(){};K._function.updateContext=K._class.updateContext=function(e){e.beforeExpr&&e!==K._else&&!(e===K.semi&&this.curContext()!==ki.p_stat)&&!(e===K._return&&tf.test(this.input.slice(this.lastTokEnd,this.start)))&&!((e===K.colon||e===K.braceL)&&this.curContext()===ki.b_stat)?this.context.push(ki.f_expr):this.context.push(ki.f_stat),this.exprAllowed=!1};K.colon.updateContext=function(){this.curContext().token==="function"&&this.context.pop(),this.exprAllowed=!0};K.backQuote.updateContext=function(){this.curContext()===ki.q_tmpl?this.context.pop():this.context.push(ki.q_tmpl),this.exprAllowed=!1};K.star.updateContext=function(e){if(e===K._function){var t=this.context.length-1;this.context[t]===ki.f_expr?this.context[t]=ki.f_expr_gen:this.context[t]=ki.f_gen}this.exprAllowed=!0};K.name.updateContext=function(e){var t=!1;this.options.ecmaVersion>=6&&e!==K.dot&&(this.value==="of"&&!this.exprAllowed||this.value==="yield"&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};var ln=Hs.prototype;ln.checkPropClash=function(e,t,n){if(!(this.options.ecmaVersion>=9&&e.type==="SpreadElement")&&!(this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var r=e.key,i;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6){i==="__proto__"&&s==="init"&&(t.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),t.proto=!0);return}i="$"+i;var o=t[i];if(o){var a;s==="init"?a=this.strict&&o.init||o.get||o.set:a=o.init||o[s],a&&this.raiseRecoverable(r.start,"Redefinition of property")}else o=t[i]={init:!1,get:!1,set:!1};o[s]=!0}};ln.parseExpression=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeAssign(e,t);if(this.type===K.comma){var s=this.startNodeAt(n,r);for(s.expressions=[i];this.eat(K.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return i};ln.parseMaybeAssign=function(e,t,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var r=!1,i=-1,s=-1,o=-1;t?(i=t.parenthesizedAssign,s=t.trailingComma,o=t.doubleProto,t.parenthesizedAssign=t.trailingComma=-1):(t=new VF,r=!0);var a=this.start,u=this.startLoc;(this.type===K.parenL||this.type===K.name)&&(this.potentialArrowAt=this.start,this.potentialArrowInForAwait=e==="await");var l=this.parseMaybeConditional(e,t);if(n&&(l=n.call(this,l,a,u)),this.type.isAssign){var c=this.startNodeAt(a,u);return c.operator=this.value,this.type===K.eq&&(l=this.toAssignable(l,!1,t)),r||(t.parenthesizedAssign=t.trailingComma=t.doubleProto=-1),t.shorthandAssign>=l.start&&(t.shorthandAssign=-1),this.type===K.eq?this.checkLValPattern(l):this.checkLValSimple(l),c.left=l,this.next(),c.right=this.parseMaybeAssign(e),o>-1&&(t.doubleProto=o),this.finishNode(c,"AssignmentExpression")}else r&&this.checkExpressionErrors(t,!0);return i>-1&&(t.parenthesizedAssign=i),s>-1&&(t.trailingComma=s),l};ln.parseMaybeConditional=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return i;if(this.eat(K.question)){var s=this.startNodeAt(n,r);return s.test=i,s.consequent=this.parseMaybeAssign(),this.expect(K.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return i};ln.parseExprOps=function(e,t){var n=this.start,r=this.startLoc,i=this.parseMaybeUnary(t,!1,!1,e);return this.checkExpressionErrors(t)||i.start===n&&i.type==="ArrowFunctionExpression"?i:this.parseExprOp(i,n,r,-1,e)};ln.parseExprOp=function(e,t,n,r,i){var s=this.type.binop;if(s!=null&&(!i||this.type!==K._in)&&s>r){var o=this.type===K.logicalOR||this.type===K.logicalAND,a=this.type===K.coalesce;a&&(s=K.logicalAND.binop);var u=this.value;this.next();var l=this.start,c=this.startLoc,f=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,i),l,c,s,i),d=this.buildBinary(t,n,e,f,u,o||a);return(o&&this.type===K.coalesce||a&&(this.type===K.logicalOR||this.type===K.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,t,n,r,i)}return e};ln.buildBinary=function(e,t,n,r,i,s){r.type==="PrivateIdentifier"&&this.raise(r.start,"Private identifier can only be left side of binary expression");var o=this.startNodeAt(e,t);return o.left=n,o.operator=i,o.right=r,this.finishNode(o,s?"LogicalExpression":"BinaryExpression")};ln.parseMaybeUnary=function(e,t,n,r){var i=this.start,s=this.startLoc,o;if(this.isContextual("await")&&this.canAwait)o=this.parseAwait(r),t=!0;else if(this.type.prefix){var a=this.startNode(),u=this.type===K.incDec;a.operator=this.value,a.prefix=!0,this.next(),a.argument=this.parseMaybeUnary(null,!0,u,r),this.checkExpressionErrors(e,!0),u?this.checkLValSimple(a.argument):this.strict&&a.operator==="delete"&&a.argument.type==="Identifier"?this.raiseRecoverable(a.start,"Deleting local variable in strict mode"):a.operator==="delete"&&gRe(a.argument)?this.raiseRecoverable(a.start,"Private fields can not be deleted"):t=!0,o=this.finishNode(a,u?"UpdateExpression":"UnaryExpression")}else if(!t&&this.type===K.privateId)(r||this.privateNameStack.length===0)&&this.options.checkPrivateFields&&this.unexpected(),o=this.parsePrivateIdent(),this.type!==K._in&&this.unexpected();else{if(o=this.parseExprSubscripts(e,r),this.checkExpressionErrors(e))return o;for(;this.type.postfix&&!this.canInsertSemicolon();){var l=this.startNodeAt(i,s);l.operator=this.value,l.prefix=!1,l.argument=o,this.checkLValSimple(o),this.next(),o=this.finishNode(l,"UpdateExpression")}}if(!n&&this.eat(K.starstar))if(t)this.unexpected(this.lastTokStart);else return this.buildBinary(i,s,o,this.parseMaybeUnary(null,!1,!1,r),"**",!1);else return o};function gRe(e){return e.type==="MemberExpression"&&e.property.type==="PrivateIdentifier"||e.type==="ChainExpression"&&gRe(e.expression)}ln.parseExprSubscripts=function(e,t){var n=this.start,r=this.startLoc,i=this.parseExprAtom(e,t);if(i.type==="ArrowFunctionExpression"&&this.input.slice(this.lastTokStart,this.lastTokEnd)!==")")return i;var s=this.parseSubscripts(i,n,r,!1,t);return e&&s.type==="MemberExpression"&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1),e.trailingComma>=s.start&&(e.trailingComma=-1)),s};ln.parseSubscripts=function(e,t,n,r,i){for(var s=this.options.ecmaVersion>=8&&e.type==="Identifier"&&e.name==="async"&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&e.end-e.start===5&&this.potentialArrowAt===e.start,o=!1;;){var a=this.parseSubscript(e,t,n,r,s,o,i);if(a.optional&&(o=!0),a===e||a.type==="ArrowFunctionExpression"){if(o){var u=this.startNodeAt(t,n);u.expression=a,a=this.finishNode(u,"ChainExpression")}return a}e=a}};ln.shouldParseAsyncArrow=function(){return!this.canInsertSemicolon()&&this.eat(K.arrow)};ln.parseSubscriptAsyncArrow=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!0,r)};ln.parseSubscript=function(e,t,n,r,i,s,o){var a=this.options.ecmaVersion>=11,u=a&&this.eat(K.questionDot);r&&u&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var l=this.eat(K.bracketL);if(l||u&&this.type!==K.parenL&&this.type!==K.backQuote||this.eat(K.dot)){var c=this.startNodeAt(t,n);c.object=e,l?(c.property=this.parseExpression(),this.expect(K.bracketR)):this.type===K.privateId&&e.type!=="Super"?c.property=this.parsePrivateIdent():c.property=this.parseIdent(this.options.allowReserved!=="never"),c.computed=!!l,a&&(c.optional=u),e=this.finishNode(c,"MemberExpression")}else if(!r&&this.eat(K.parenL)){var f=new VF,d=this.yieldPos,h=this.awaitPos,p=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1,f);if(i&&!u&&this.shouldParseAsyncArrow())return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=h,this.awaitIdentPos=p,this.parseSubscriptAsyncArrow(t,n,m,o);this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,this.awaitIdentPos=p||this.awaitIdentPos;var g=this.startNodeAt(t,n);g.callee=e,g.arguments=m,a&&(g.optional=u),e=this.finishNode(g,"CallExpression")}else if(this.type===K.backQuote){(u||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var y=this.startNodeAt(t,n);y.tag=e,y.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(y,"TaggedTemplateExpression")}return e};ln.parseExprAtom=function(e,t,n){this.type===K.slash&&this.readRegexp();var r,i=this.potentialArrowAt===this.start;switch(this.type){case K._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),r=this.startNode(),this.next(),this.type===K.parenL&&!this.allowDirectSuper&&this.raise(r.start,"super() call outside constructor of a subclass"),this.type!==K.dot&&this.type!==K.bracketL&&this.type!==K.parenL&&this.unexpected(),this.finishNode(r,"Super");case K._this:return r=this.startNode(),this.next(),this.finishNode(r,"ThisExpression");case K.name:var s=this.start,o=this.startLoc,a=this.containsEsc,u=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&u.name==="async"&&!this.canInsertSemicolon()&&this.eat(K._function))return this.overrideContext(ki.f_expr),this.parseFunction(this.startNodeAt(s,o),0,!1,!0,t);if(i&&!this.canInsertSemicolon()){if(this.eat(K.arrow))return this.parseArrowExpression(this.startNodeAt(s,o),[u],!1,t);if(this.options.ecmaVersion>=8&&u.name==="async"&&this.type===K.name&&!a&&(!this.potentialArrowInForAwait||this.value!=="of"||this.containsEsc))return u=this.parseIdent(!1),(this.canInsertSemicolon()||!this.eat(K.arrow))&&this.unexpected(),this.parseArrowExpression(this.startNodeAt(s,o),[u],!0,t)}return u;case K.regexp:var l=this.value;return r=this.parseLiteral(l.value),r.regex={pattern:l.pattern,flags:l.flags},r;case K.num:case K.string:return this.parseLiteral(this.value);case K._null:case K._true:case K._false:return r=this.startNode(),r.value=this.type===K._null?null:this.type===K._true,r.raw=this.type.keyword,this.next(),this.finishNode(r,"Literal");case K.parenL:var c=this.start,f=this.parseParenAndDistinguishExpression(i,t);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(f)&&(e.parenthesizedAssign=c),e.parenthesizedBind<0&&(e.parenthesizedBind=c)),f;case K.bracketL:return r=this.startNode(),this.next(),r.elements=this.parseExprList(K.bracketR,!0,!0,e),this.finishNode(r,"ArrayExpression");case K.braceL:return this.overrideContext(ki.b_expr),this.parseObj(!1,e);case K._function:return r=this.startNode(),this.next(),this.parseFunction(r,0);case K._class:return this.parseClass(this.startNode(),!1);case K._new:return this.parseNew();case K.backQuote:return this.parseTemplate();case K._import:return this.options.ecmaVersion>=11?this.parseExprImport(n):this.unexpected();default:return this.parseExprAtomDefault()}};ln.parseExprAtomDefault=function(){this.unexpected()};ln.parseExprImport=function(e){var t=this.startNode();if(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import"),this.next(),this.type===K.parenL&&!e)return this.parseDynamicImport(t);if(this.type===K.dot){var n=this.startNodeAt(t.start,t.loc&&t.loc.start);return n.name="import",t.meta=this.finishNode(n,"Identifier"),this.parseImportMeta(t)}else this.unexpected()};ln.parseDynamicImport=function(e){if(this.next(),e.source=this.parseMaybeAssign(),!this.eat(K.parenR)){var t=this.start;this.eat(K.comma)&&this.eat(K.parenR)?this.raiseRecoverable(t,"Trailing comma is not allowed in import()"):this.unexpected(t)}return this.finishNode(e,"ImportExpression")};ln.parseImportMeta=function(e){this.next();var t=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="meta"&&this.raiseRecoverable(e.property.start,"The only valid meta property for import is 'import.meta'"),t&&this.raiseRecoverable(e.start,"'import.meta' must not contain escaped characters"),this.options.sourceType!=="module"&&!this.options.allowImportExportEverywhere&&this.raiseRecoverable(e.start,"Cannot use 'import.meta' outside a module"),this.finishNode(e,"MetaProperty")};ln.parseLiteral=function(e){var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),t.raw.charCodeAt(t.raw.length-1)===110&&(t.bigint=t.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(t,"Literal")};ln.parseParenExpression=function(){this.expect(K.parenL);var e=this.parseExpression();return this.expect(K.parenR),e};ln.shouldParseArrow=function(e){return!this.canInsertSemicolon()};ln.parseParenAndDistinguishExpression=function(e,t){var n=this.start,r=this.startLoc,i,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var o=this.start,a=this.startLoc,u=[],l=!0,c=!1,f=new VF,d=this.yieldPos,h=this.awaitPos,p;for(this.yieldPos=0,this.awaitPos=0;this.type!==K.parenR;)if(l?l=!1:this.expect(K.comma),s&&this.afterTrailingComma(K.parenR,!0)){c=!0;break}else if(this.type===K.ellipsis){p=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element");break}else u.push(this.parseMaybeAssign(!1,f,this.parseParenItem));var m=this.lastTokEnd,g=this.lastTokEndLoc;if(this.expect(K.parenR),e&&this.shouldParseArrow(u)&&this.eat(K.arrow))return this.checkPatternErrors(f,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=d,this.awaitPos=h,this.parseParenArrowList(n,r,u,t);(!u.length||c)&&this.unexpected(this.lastTokStart),p&&this.unexpected(p),this.checkExpressionErrors(f,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=h||this.awaitPos,u.length>1?(i=this.startNodeAt(o,a),i.expressions=u,this.finishNodeAt(i,"SequenceExpression",m,g)):i=u[0]}else i=this.parseParenExpression();if(this.options.preserveParens){var y=this.startNodeAt(n,r);return y.expression=i,this.finishNode(y,"ParenthesizedExpression")}else return i};ln.parseParenItem=function(e){return e};ln.parseParenArrowList=function(e,t,n,r){return this.parseArrowExpression(this.startNodeAt(e,t),n,!1,r)};var Oxt=[];ln.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var e=this.startNode();if(this.next(),this.options.ecmaVersion>=6&&this.type===K.dot){var t=this.startNodeAt(e.start,e.loc&&e.loc.start);t.name="new",e.meta=this.finishNode(t,"Identifier"),this.next();var n=this.containsEsc;return e.property=this.parseIdent(!0),e.property.name!=="target"&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(e.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(e.start,"'new.target' can only be used in functions and class static block"),this.finishNode(e,"MetaProperty")}var r=this.start,i=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(null,!1,!0),r,i,!0,!1),this.eat(K.parenL)?e.arguments=this.parseExprList(K.parenR,this.options.ecmaVersion>=8,!1):e.arguments=Oxt,this.finishNode(e,"NewExpression")};ln.parseTemplateElement=function(e){var t=e.isTagged,n=this.startNode();return this.type===K.invalidTemplate?(t||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,`
`),cooked:this.value},this.next(),n.tail=this.type===K.backQuote,this.finishNode(n,"TemplateElement")};ln.parseTemplate=function(e){e===void 0&&(e={});var t=e.isTagged;t===void 0&&(t=!1);var n=this.startNode();this.next(),n.expressions=[];var r=this.parseTemplateElement({isTagged:t});for(n.quasis=[r];!r.tail;)this.type===K.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(K.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(K.braceR),n.quasis.push(r=this.parseTemplateElement({isTagged:t}));return this.next(),this.finishNode(n,"TemplateLiteral")};ln.isAsyncProp=function(e){return!e.computed&&e.key.type==="Identifier"&&e.key.name==="async"&&(this.type===K.name||this.type===K.num||this.type===K.string||this.type===K.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===K.star)&&!tf.test(this.input.slice(this.lastTokEnd,this.start))};ln.parseObj=function(e,t){var n=this.startNode(),r=!0,i={};for(n.properties=[],this.next();!this.eat(K.braceR);){if(r)r=!1;else if(this.expect(K.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(K.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,i,t),n.properties.push(s)}return this.finishNode(n,e?"ObjectPattern":"ObjectExpression")};ln.parseProperty=function(e,t){var n=this.startNode(),r,i,s,o;if(this.options.ecmaVersion>=9&&this.eat(K.ellipsis))return e?(n.argument=this.parseIdent(!1),this.type===K.comma&&this.raiseRecoverable(this.start,"Comma is not permitted after the rest element"),this.finishNode(n,"RestElement")):(n.argument=this.parseMaybeAssign(!1,t),this.type===K.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(n,"SpreadElement"));this.options.ecmaVersion>=6&&(n.method=!1,n.shorthand=!1,(e||t)&&(s=this.start,o=this.startLoc),e||(r=this.eat(K.star)));var a=this.containsEsc;return this.parsePropertyName(n),!e&&!a&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(n)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(K.star),this.parsePropertyName(n)):i=!1,this.parsePropertyValue(n,e,r,i,s,o,t,a),this.finishNode(n,"Property")};ln.parseGetterSetter=function(e){e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var t=e.kind==="get"?0:1;if(e.value.params.length!==t){var n=e.value.start;e.kind==="get"?this.raiseRecoverable(n,"getter should have no params"):this.raiseRecoverable(n,"setter should have exactly one param")}else e.kind==="set"&&e.value.params[0].type==="RestElement"&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")};ln.parsePropertyValue=function(e,t,n,r,i,s,o,a){(n||r)&&this.type===K.colon&&this.unexpected(),this.eat(K.colon)?(e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,o),e.kind="init"):this.options.ecmaVersion>=6&&this.type===K.parenL?(t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(n,r)):!t&&!a&&this.options.ecmaVersion>=5&&!e.computed&&e.key.type==="Identifier"&&(e.key.name==="get"||e.key.name==="set")&&this.type!==K.comma&&this.type!==K.braceR&&this.type!==K.eq?((n||r)&&this.unexpected(),this.parseGetterSetter(e)):this.options.ecmaVersion>=6&&!e.computed&&e.key.type==="Identifier"?((n||r)&&this.unexpected(),this.checkUnreserved(e.key),e.key.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=i),e.kind="init",t?e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key)):this.type===K.eq&&o?(o.shorthandAssign<0&&(o.shorthandAssign=this.start),e.value=this.parseMaybeDefault(i,s,this.copyNode(e.key))):e.value=this.copyNode(e.key),e.shorthand=!0):this.unexpected()};ln.parsePropertyName=function(e){if(this.options.ecmaVersion>=6){if(this.eat(K.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(K.bracketR),e.key;e.computed=!1}return e.key=this.type===K.num||this.type===K.string?this.parseExprAtom():this.parseIdent(this.options.allowReserved!=="never")};ln.initFunction=function(e){e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)};ln.parseMethod=function(e,t,n){var r=this.startNode(),i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.initFunction(r),this.options.ecmaVersion>=6&&(r.generator=e),this.options.ecmaVersion>=8&&(r.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(iJ(t,r.generator)|nJ|(n?fRe:0)),this.expect(K.parenL),r.params=this.parseBindingList(K.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(r,!1,!0,!1),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(r,"FunctionExpression")};ln.parseArrowExpression=function(e,t,n,r){var i=this.yieldPos,s=this.awaitPos,o=this.awaitIdentPos;return this.enterScope(iJ(n,!1)|lRe),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1,r),this.yieldPos=i,this.awaitPos=s,this.awaitIdentPos=o,this.finishNode(e,"ArrowFunctionExpression")};ln.parseFunctionBody=function(e,t,n,r){var i=t&&this.type!==K.braceL,s=this.strict,o=!1;if(i)e.body=this.parseMaybeAssign(r),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);(!s||a)&&(o=this.strictDirective(this.end),o&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var u=this.labels;this.labels=[],o&&(this.strict=!0),this.checkParams(e,!s&&!o&&!t&&!n&&this.isSimpleParamList(e.params)),this.strict&&e.id&&this.checkLValSimple(e.id,pRe),e.body=this.parseBlock(!1,void 0,o&&!s),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=u}this.exitScope()};ln.isSimpleParamList=function(e){for(var t=0,n=e;t<n.length;t+=1){var r=n[t];if(r.type!=="Identifier")return!1}return!0};ln.checkParams=function(e,t){for(var n=Object.create(null),r=0,i=e.params;r<i.length;r+=1){var s=i[r];this.checkLValInnerPattern(s,sJ,t?null:n)}};ln.parseExprList=function(e,t,n,r){for(var i=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(K.comma),t&&this.afterTrailingComma(e))break;var o=void 0;n&&this.type===K.comma?o=null:this.type===K.ellipsis?(o=this.parseSpread(r),r&&this.type===K.comma&&r.trailingComma<0&&(r.trailingComma=this.start)):o=this.parseMaybeAssign(!1,r),i.push(o)}return i};ln.checkUnreserved=function(e){var t=e.start,n=e.end,r=e.name;if(this.inGenerator&&r==="yield"&&this.raiseRecoverable(t,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&r==="arguments"&&this.raiseRecoverable(t,"Cannot use 'arguments' in class field initializer"),this.inClassStaticBlock&&(r==="arguments"||r==="await")&&this.raise(t,"Cannot use "+r+" in class static initialization block"),this.keywords.test(r)&&this.raise(t,"Unexpected keyword '"+r+"'"),!(this.options.ecmaVersion<6&&this.input.slice(t,n).indexOf("\\")!==-1)){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(!this.inAsync&&r==="await"&&this.raiseRecoverable(t,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(t,"The keyword '"+r+"' is reserved"))}};ln.parseIdent=function(e){var t=this.parseIdentNode();return this.next(!!e),this.finishNode(t,"Identifier"),e||(this.checkUnreserved(t),t.name==="await"&&!this.awaitIdentPos&&(this.awaitIdentPos=t.start)),t};ln.parseIdentNode=function(){var e=this.startNode();return this.type===K.name?e.name=this.value:this.type.keyword?(e.name=this.type.keyword,(e.name==="class"||e.name==="function")&&(this.lastTokEnd!==this.lastTokStart+1||this.input.charCodeAt(this.lastTokStart)!==46)&&this.context.pop(),this.type=K.name):this.unexpected(),e};ln.parsePrivateIdent=function(){var e=this.startNode();return this.type===K.privateId?e.name=this.value:this.unexpected(),this.next(),this.finishNode(e,"PrivateIdentifier"),this.options.checkPrivateFields&&(this.privateNameStack.length===0?this.raise(e.start,"Private field '#"+e.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(e)),e};ln.parseYield=function(e){this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===K.semi||this.canInsertSemicolon()||this.type!==K.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(K.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")};ln.parseAwait=function(e){this.awaitPos||(this.awaitPos=this.start);var t=this.startNode();return this.next(),t.argument=this.parseMaybeUnary(null,!0,!1,e),this.finishNode(t,"AwaitExpression")};var XM=Hs.prototype;XM.raise=function(e,t){var n=aRe(this.input,e);t+=" ("+n.line+":"+n.column+")";var r=new SyntaxError(t);throw r.pos=e,r.loc=n,r.raisedAt=this.pos,r};XM.raiseRecoverable=XM.raise;XM.curPosition=function(){if(this.options.locations)return new SI(this.curLine,this.pos-this.lineStart)};var rv=Hs.prototype,Dxt=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};rv.enterScope=function(e){this.scopeStack.push(new Dxt(e))};rv.exitScope=function(){this.scopeStack.pop()};rv.treatFunctionsAsVarInScope=function(e){return e.flags&HS||!this.inModule&&e.flags&TI};rv.declareName=function(e,t,n){var r=!1;if(t===pg){var i=this.currentScope();r=i.lexical.indexOf(e)>-1||i.functions.indexOf(e)>-1||i.var.indexOf(e)>-1,i.lexical.push(e),this.inModule&&i.flags&TI&&delete this.undefinedExports[e]}else if(t===hRe){var s=this.currentScope();s.lexical.push(e)}else if(t===dRe){var o=this.currentScope();this.treatFunctionsAsVar?r=o.lexical.indexOf(e)>-1:r=o.lexical.indexOf(e)>-1||o.var.indexOf(e)>-1,o.functions.push(e)}else for(var a=this.scopeStack.length-1;a>=0;--a){var u=this.scopeStack[a];if(u.lexical.indexOf(e)>-1&&!(u.flags&cRe&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){r=!0;break}if(u.var.push(e),this.inModule&&u.flags&TI&&delete this.undefinedExports[e],u.flags&rJ)break}r&&this.raiseRecoverable(n,"Identifier '"+e+"' has already been declared")};rv.checkLocalExport=function(e){this.scopeStack[0].lexical.indexOf(e.name)===-1&&this.scopeStack[0].var.indexOf(e.name)===-1&&(this.undefinedExports[e.name]=e)};rv.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]};rv.currentVarScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&rJ)return t}};rv.currentThisScope=function(){for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&rJ&&!(t.flags&lRe))return t}};var HF=function(t,n,r){this.type="",this.start=n,this.end=0,t.options.locations&&(this.loc=new zF(t,r)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[n,0])},iR=Hs.prototype;iR.startNode=function(){return new HF(this,this.start,this.startLoc)};iR.startNodeAt=function(e,t){return new HF(this,e,t)};function yRe(e,t,n,r){return e.type=t,e.end=n,this.options.locations&&(e.loc.end=r),this.options.ranges&&(e.range[1]=n),e}iR.finishNode=function(e,t){return yRe.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)};iR.finishNodeAt=function(e,t,n,r){return yRe.call(this,e,t,n,r)};iR.copyNode=function(e){var t=new HF(this,e.start,this.startLoc);for(var n in e)t[n]=e[n];return t};var vRe="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",bRe=vRe+" Extended_Pictographic",_Re=bRe,wRe=_Re+" EBase EComp EMod EPres ExtPict",ERe=wRe,$xt=ERe,Mxt={9:vRe,10:bRe,11:_Re,12:wRe,13:ERe,14:$xt},Lxt="Basic_Emoji Emoji_Keycap_Sequence RGI_Emoji_Modifier_Sequence RGI_Emoji_Flag_Sequence RGI_Emoji_Tag_Sequence RGI_Emoji_ZWJ_Sequence RGI_Emoji",Fxt={9:"",10:"",11:"",12:"",13:"",14:Lxt},_de="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",xRe="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",SRe=xRe+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",TRe=SRe+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",ARe=TRe+" Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",CRe=ARe+" Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith",jxt=CRe+" Hrkt Katakana_Or_Hiragana Kawi Nag_Mundari Nagm Unknown Zzzz",Bxt={9:xRe,10:SRe,11:TRe,12:ARe,13:CRe,14:jxt},IRe={};function Uxt(e){var t=IRe[e]={binary:c0(Mxt[e]+" "+_de),binaryOfStrings:c0(Fxt[e]),nonBinary:{General_Category:c0(_de),Script:c0(Bxt[e])}};t.nonBinary.Script_Extensions=t.nonBinary.Script,t.nonBinary.gc=t.nonBinary.General_Category,t.nonBinary.sc=t.nonBinary.Script,t.nonBinary.scx=t.nonBinary.Script_Extensions}for(var WB=0,wde=[9,10,11,12,13,14];WB<wde.length;WB+=1){var zxt=wde[WB];Uxt(zxt)}var Ct=Hs.prototype,ip=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":"")+(t.options.ecmaVersion>=15?"v":""),this.unicodeProperties=IRe[t.options.ecmaVersion>=14?14:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchV=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};ip.prototype.reset=function(t,n,r){var i=r.indexOf("v")!==-1,s=r.indexOf("u")!==-1;this.start=t|0,this.source=n+"",this.flags=r,i&&this.parser.options.ecmaVersion>=15?(this.switchU=!0,this.switchV=!0,this.switchN=!0):(this.switchU=s&&this.parser.options.ecmaVersion>=6,this.switchV=!1,this.switchN=s&&this.parser.options.ecmaVersion>=9)};ip.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)};ip.prototype.at=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return-1;var s=r.charCodeAt(t);if(!(n||this.switchU)||s<=55295||s>=57344||t+1>=i)return s;var o=r.charCodeAt(t+1);return o>=56320&&o<=57343?(s<<10)+o-56613888:s};ip.prototype.nextIndex=function(t,n){n===void 0&&(n=!1);var r=this.source,i=r.length;if(t>=i)return i;var s=r.charCodeAt(t),o;return!(n||this.switchU)||s<=55295||s>=57344||t+1>=i||(o=r.charCodeAt(t+1))<56320||o>57343?t+1:t+2};ip.prototype.current=function(t){return t===void 0&&(t=!1),this.at(this.pos,t)};ip.prototype.lookahead=function(t){return t===void 0&&(t=!1),this.at(this.nextIndex(this.pos,t),t)};ip.prototype.advance=function(t){t===void 0&&(t=!1),this.pos=this.nextIndex(this.pos,t)};ip.prototype.eat=function(t,n){return n===void 0&&(n=!1),this.current(n)===t?(this.advance(n),!0):!1};ip.prototype.eatChars=function(t,n){n===void 0&&(n=!1);for(var r=this.pos,i=0,s=t;i<s.length;i+=1){var o=s[i],a=this.at(r,n);if(a===-1||a!==o)return!1;r=this.nextIndex(r,n)}return this.pos=r,!0};Ct.validateRegExpFlags=function(e){for(var t=e.validFlags,n=e.flags,r=!1,i=!1,s=0;s<n.length;s++){var o=n.charAt(s);t.indexOf(o)===-1&&this.raise(e.start,"Invalid regular expression flag"),n.indexOf(o,s+1)>-1&&this.raise(e.start,"Duplicate regular expression flag"),o==="u"&&(r=!0),o==="v"&&(i=!0)}this.options.ecmaVersion>=15&&r&&i&&this.raise(e.start,"Invalid regular expression flag")};Ct.validateRegExpPattern=function(e){this.regexp_pattern(e),!e.switchN&&this.options.ecmaVersion>=9&&e.groupNames.length>0&&(e.switchN=!0,this.regexp_pattern(e))};Ct.regexp_pattern=function(e){e.pos=0,e.lastIntValue=0,e.lastStringValue="",e.lastAssertionIsQuantifiable=!1,e.numCapturingParens=0,e.maxBackReference=0,e.groupNames.length=0,e.backReferenceNames.length=0,this.regexp_disjunction(e),e.pos!==e.source.length&&(e.eat(41)&&e.raise("Unmatched ')'"),(e.eat(93)||e.eat(125))&&e.raise("Lone quantifier brackets")),e.maxBackReference>e.numCapturingParens&&e.raise("Invalid escape");for(var t=0,n=e.backReferenceNames;t<n.length;t+=1){var r=n[t];e.groupNames.indexOf(r)===-1&&e.raise("Invalid named capture referenced")}};Ct.regexp_disjunction=function(e){for(this.regexp_alternative(e);e.eat(124);)this.regexp_alternative(e);this.regexp_eatQuantifier(e,!0)&&e.raise("Nothing to repeat"),e.eat(123)&&e.raise("Lone quantifier brackets")};Ct.regexp_alternative=function(e){for(;e.pos<e.source.length&&this.regexp_eatTerm(e););};Ct.regexp_eatTerm=function(e){return this.regexp_eatAssertion(e)?(e.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(e)&&e.switchU&&e.raise("Invalid quantifier"),!0):(e.switchU?this.regexp_eatAtom(e):this.regexp_eatExtendedAtom(e))?(this.regexp_eatQuantifier(e),!0):!1};Ct.regexp_eatAssertion=function(e){var t=e.pos;if(e.lastAssertionIsQuantifiable=!1,e.eat(94)||e.eat(36))return!0;if(e.eat(92)){if(e.eat(66)||e.eat(98))return!0;e.pos=t}if(e.eat(40)&&e.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=e.eat(60)),e.eat(61)||e.eat(33))return this.regexp_disjunction(e),e.eat(41)||e.raise("Unterminated group"),e.lastAssertionIsQuantifiable=!n,!0}return e.pos=t,!1};Ct.regexp_eatQuantifier=function(e,t){return t===void 0&&(t=!1),this.regexp_eatQuantifierPrefix(e,t)?(e.eat(63),!0):!1};Ct.regexp_eatQuantifierPrefix=function(e,t){return e.eat(42)||e.eat(43)||e.eat(63)||this.regexp_eatBracedQuantifier(e,t)};Ct.regexp_eatBracedQuantifier=function(e,t){var n=e.pos;if(e.eat(123)){var r=0,i=-1;if(this.regexp_eatDecimalDigits(e)&&(r=e.lastIntValue,e.eat(44)&&this.regexp_eatDecimalDigits(e)&&(i=e.lastIntValue),e.eat(125)))return i!==-1&&i<r&&!t&&e.raise("numbers out of order in {} quantifier"),!0;e.switchU&&!t&&e.raise("Incomplete quantifier"),e.pos=n}return!1};Ct.regexp_eatAtom=function(e){return this.regexp_eatPatternCharacters(e)||e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)};Ct.regexp_eatReverseSolidusAtomEscape=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatAtomEscape(e))return!0;e.pos=t}return!1};Ct.regexp_eatUncapturingGroup=function(e){var t=e.pos;if(e.eat(40)){if(e.eat(63)&&e.eat(58)){if(this.regexp_disjunction(e),e.eat(41))return!0;e.raise("Unterminated group")}e.pos=t}return!1};Ct.regexp_eatCapturingGroup=function(e){if(e.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(e):e.current()===63&&e.raise("Invalid group"),this.regexp_disjunction(e),e.eat(41))return e.numCapturingParens+=1,!0;e.raise("Unterminated group")}return!1};Ct.regexp_eatExtendedAtom=function(e){return e.eat(46)||this.regexp_eatReverseSolidusAtomEscape(e)||this.regexp_eatCharacterClass(e)||this.regexp_eatUncapturingGroup(e)||this.regexp_eatCapturingGroup(e)||this.regexp_eatInvalidBracedQuantifier(e)||this.regexp_eatExtendedPatternCharacter(e)};Ct.regexp_eatInvalidBracedQuantifier=function(e){return this.regexp_eatBracedQuantifier(e,!0)&&e.raise("Nothing to repeat"),!1};Ct.regexp_eatSyntaxCharacter=function(e){var t=e.current();return kRe(t)?(e.lastIntValue=t,e.advance(),!0):!1};function kRe(e){return e===36||e>=40&&e<=43||e===46||e===63||e>=91&&e<=94||e>=123&&e<=125}Ct.regexp_eatPatternCharacters=function(e){for(var t=e.pos,n=0;(n=e.current())!==-1&&!kRe(n);)e.advance();return e.pos!==t};Ct.regexp_eatExtendedPatternCharacter=function(e){var t=e.current();return t!==-1&&t!==36&&!(t>=40&&t<=43)&&t!==46&&t!==63&&t!==91&&t!==94&&t!==124?(e.advance(),!0):!1};Ct.regexp_groupSpecifier=function(e){if(e.eat(63)){if(this.regexp_eatGroupName(e)){e.groupNames.indexOf(e.lastStringValue)!==-1&&e.raise("Duplicate capture group name"),e.groupNames.push(e.lastStringValue);return}e.raise("Invalid group")}};Ct.regexp_eatGroupName=function(e){if(e.lastStringValue="",e.eat(60)){if(this.regexp_eatRegExpIdentifierName(e)&&e.eat(62))return!0;e.raise("Invalid capture group name")}return!1};Ct.regexp_eatRegExpIdentifierName=function(e){if(e.lastStringValue="",this.regexp_eatRegExpIdentifierStart(e)){for(e.lastStringValue+=dy(e.lastIntValue);this.regexp_eatRegExpIdentifierPart(e);)e.lastStringValue+=dy(e.lastIntValue);return!0}return!1};Ct.regexp_eatRegExpIdentifierStart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Vxt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Vxt(e){return jm(e,!0)||e===36||e===95}Ct.regexp_eatRegExpIdentifierPart=function(e){var t=e.pos,n=this.options.ecmaVersion>=11,r=e.current(n);return e.advance(n),r===92&&this.regexp_eatRegExpUnicodeEscapeSequence(e,n)&&(r=e.lastIntValue),Hxt(r)?(e.lastIntValue=r,!0):(e.pos=t,!1)};function Hxt(e){return Tx(e,!0)||e===36||e===95||e===8204||e===8205}Ct.regexp_eatAtomEscape=function(e){return this.regexp_eatBackReference(e)||this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)||e.switchN&&this.regexp_eatKGroupName(e)?!0:(e.switchU&&(e.current()===99&&e.raise("Invalid unicode escape"),e.raise("Invalid escape")),!1)};Ct.regexp_eatBackReference=function(e){var t=e.pos;if(this.regexp_eatDecimalEscape(e)){var n=e.lastIntValue;if(e.switchU)return n>e.maxBackReference&&(e.maxBackReference=n),!0;if(n<=e.numCapturingParens)return!0;e.pos=t}return!1};Ct.regexp_eatKGroupName=function(e){if(e.eat(107)){if(this.regexp_eatGroupName(e))return e.backReferenceNames.push(e.lastStringValue),!0;e.raise("Invalid named reference")}return!1};Ct.regexp_eatCharacterEscape=function(e){return this.regexp_eatControlEscape(e)||this.regexp_eatCControlLetter(e)||this.regexp_eatZero(e)||this.regexp_eatHexEscapeSequence(e)||this.regexp_eatRegExpUnicodeEscapeSequence(e,!1)||!e.switchU&&this.regexp_eatLegacyOctalEscapeSequence(e)||this.regexp_eatIdentityEscape(e)};Ct.regexp_eatCControlLetter=function(e){var t=e.pos;if(e.eat(99)){if(this.regexp_eatControlLetter(e))return!0;e.pos=t}return!1};Ct.regexp_eatZero=function(e){return e.current()===48&&!qF(e.lookahead())?(e.lastIntValue=0,e.advance(),!0):!1};Ct.regexp_eatControlEscape=function(e){var t=e.current();return t===116?(e.lastIntValue=9,e.advance(),!0):t===110?(e.lastIntValue=10,e.advance(),!0):t===118?(e.lastIntValue=11,e.advance(),!0):t===102?(e.lastIntValue=12,e.advance(),!0):t===114?(e.lastIntValue=13,e.advance(),!0):!1};Ct.regexp_eatControlLetter=function(e){var t=e.current();return RRe(t)?(e.lastIntValue=t%32,e.advance(),!0):!1};function RRe(e){return e>=65&&e<=90||e>=97&&e<=122}Ct.regexp_eatRegExpUnicodeEscapeSequence=function(e,t){t===void 0&&(t=!1);var n=e.pos,r=t||e.switchU;if(e.eat(117)){if(this.regexp_eatFixedHexDigits(e,4)){var i=e.lastIntValue;if(r&&i>=55296&&i<=56319){var s=e.pos;if(e.eat(92)&&e.eat(117)&&this.regexp_eatFixedHexDigits(e,4)){var o=e.lastIntValue;if(o>=56320&&o<=57343)return e.lastIntValue=(i-55296)*1024+(o-56320)+65536,!0}e.pos=s,e.lastIntValue=i}return!0}if(r&&e.eat(123)&&this.regexp_eatHexDigits(e)&&e.eat(125)&&qxt(e.lastIntValue))return!0;r&&e.raise("Invalid unicode escape"),e.pos=n}return!1};function qxt(e){return e>=0&&e<=1114111}Ct.regexp_eatIdentityEscape=function(e){if(e.switchU)return this.regexp_eatSyntaxCharacter(e)?!0:e.eat(47)?(e.lastIntValue=47,!0):!1;var t=e.current();return t!==99&&(!e.switchN||t!==107)?(e.lastIntValue=t,e.advance(),!0):!1};Ct.regexp_eatDecimalEscape=function(e){e.lastIntValue=0;var t=e.current();if(t>=49&&t<=57){do e.lastIntValue=10*e.lastIntValue+(t-48),e.advance();while((t=e.current())>=48&&t<=57);return!0}return!1};var NRe=0,Bm=1,Ac=2;Ct.regexp_eatCharacterClassEscape=function(e){var t=e.current();if(Wxt(t))return e.lastIntValue=-1,e.advance(),Bm;var n=!1;if(e.switchU&&this.options.ecmaVersion>=9&&((n=t===80)||t===112)){e.lastIntValue=-1,e.advance();var r;if(e.eat(123)&&(r=this.regexp_eatUnicodePropertyValueExpression(e))&&e.eat(125))return n&&r===Ac&&e.raise("Invalid property name"),r;e.raise("Invalid property name")}return NRe};function Wxt(e){return e===100||e===68||e===115||e===83||e===119||e===87}Ct.regexp_eatUnicodePropertyValueExpression=function(e){var t=e.pos;if(this.regexp_eatUnicodePropertyName(e)&&e.eat(61)){var n=e.lastStringValue;if(this.regexp_eatUnicodePropertyValue(e)){var r=e.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(e,n,r),Bm}}if(e.pos=t,this.regexp_eatLoneUnicodePropertyNameOrValue(e)){var i=e.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(e,i)}return NRe};Ct.regexp_validateUnicodePropertyNameAndValue=function(e,t,n){nR(e.unicodeProperties.nonBinary,t)||e.raise("Invalid property name"),e.unicodeProperties.nonBinary[t].test(n)||e.raise("Invalid property value")};Ct.regexp_validateUnicodePropertyNameOrValue=function(e,t){if(e.unicodeProperties.binary.test(t))return Bm;if(e.switchV&&e.unicodeProperties.binaryOfStrings.test(t))return Ac;e.raise("Invalid property name")};Ct.regexp_eatUnicodePropertyName=function(e){var t=0;for(e.lastStringValue="";PRe(t=e.current());)e.lastStringValue+=dy(t),e.advance();return e.lastStringValue!==""};function PRe(e){return RRe(e)||e===95}Ct.regexp_eatUnicodePropertyValue=function(e){var t=0;for(e.lastStringValue="";Gxt(t=e.current());)e.lastStringValue+=dy(t),e.advance();return e.lastStringValue!==""};function Gxt(e){return PRe(e)||qF(e)}Ct.regexp_eatLoneUnicodePropertyNameOrValue=function(e){return this.regexp_eatUnicodePropertyValue(e)};Ct.regexp_eatCharacterClass=function(e){if(e.eat(91)){var t=e.eat(94),n=this.regexp_classContents(e);return e.eat(93)||e.raise("Unterminated character class"),t&&n===Ac&&e.raise("Negated character class may contain strings"),!0}return!1};Ct.regexp_classContents=function(e){return e.current()===93?Bm:e.switchV?this.regexp_classSetExpression(e):(this.regexp_nonEmptyClassRanges(e),Bm)};Ct.regexp_nonEmptyClassRanges=function(e){for(;this.regexp_eatClassAtom(e);){var t=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassAtom(e)){var n=e.lastIntValue;e.switchU&&(t===-1||n===-1)&&e.raise("Invalid character class"),t!==-1&&n!==-1&&t>n&&e.raise("Range out of order in character class")}}};Ct.regexp_eatClassAtom=function(e){var t=e.pos;if(e.eat(92)){if(this.regexp_eatClassEscape(e))return!0;if(e.switchU){var n=e.current();(n===99||$Re(n))&&e.raise("Invalid class escape"),e.raise("Invalid escape")}e.pos=t}var r=e.current();return r!==93?(e.lastIntValue=r,e.advance(),!0):!1};Ct.regexp_eatClassEscape=function(e){var t=e.pos;if(e.eat(98))return e.lastIntValue=8,!0;if(e.switchU&&e.eat(45))return e.lastIntValue=45,!0;if(!e.switchU&&e.eat(99)){if(this.regexp_eatClassControlLetter(e))return!0;e.pos=t}return this.regexp_eatCharacterClassEscape(e)||this.regexp_eatCharacterEscape(e)};Ct.regexp_classSetExpression=function(e){var t=Bm,n;if(!this.regexp_eatClassSetRange(e))if(n=this.regexp_eatClassSetOperand(e)){n===Ac&&(t=Ac);for(var r=e.pos;e.eatChars([38,38]);){if(e.current()!==38&&(n=this.regexp_eatClassSetOperand(e))){n!==Ac&&(t=Bm);continue}e.raise("Invalid character in character class")}if(r!==e.pos)return t;for(;e.eatChars([45,45]);)this.regexp_eatClassSetOperand(e)||e.raise("Invalid character in character class");if(r!==e.pos)return t}else e.raise("Invalid character in character class");for(;;)if(!this.regexp_eatClassSetRange(e)){if(n=this.regexp_eatClassSetOperand(e),!n)return t;n===Ac&&(t=Ac)}};Ct.regexp_eatClassSetRange=function(e){var t=e.pos;if(this.regexp_eatClassSetCharacter(e)){var n=e.lastIntValue;if(e.eat(45)&&this.regexp_eatClassSetCharacter(e)){var r=e.lastIntValue;return n!==-1&&r!==-1&&n>r&&e.raise("Range out of order in character class"),!0}e.pos=t}return!1};Ct.regexp_eatClassSetOperand=function(e){return this.regexp_eatClassSetCharacter(e)?Bm:this.regexp_eatClassStringDisjunction(e)||this.regexp_eatNestedClass(e)};Ct.regexp_eatNestedClass=function(e){var t=e.pos;if(e.eat(91)){var n=e.eat(94),r=this.regexp_classContents(e);if(e.eat(93))return n&&r===Ac&&e.raise("Negated character class may contain strings"),r;e.pos=t}if(e.eat(92)){var i=this.regexp_eatCharacterClassEscape(e);if(i)return i;e.pos=t}return null};Ct.regexp_eatClassStringDisjunction=function(e){var t=e.pos;if(e.eatChars([92,113])){if(e.eat(123)){var n=this.regexp_classStringDisjunctionContents(e);if(e.eat(125))return n}else e.raise("Invalid escape");e.pos=t}return null};Ct.regexp_classStringDisjunctionContents=function(e){for(var t=this.regexp_classString(e);e.eat(124);)this.regexp_classString(e)===Ac&&(t=Ac);return t};Ct.regexp_classString=function(e){for(var t=0;this.regexp_eatClassSetCharacter(e);)t++;return t===1?Bm:Ac};Ct.regexp_eatClassSetCharacter=function(e){var t=e.pos;if(e.eat(92))return this.regexp_eatCharacterEscape(e)||this.regexp_eatClassSetReservedPunctuator(e)?!0:e.eat(98)?(e.lastIntValue=8,!0):(e.pos=t,!1);var n=e.current();return n<0||n===e.lookahead()&&Yxt(n)||Kxt(n)?!1:(e.advance(),e.lastIntValue=n,!0)};function Yxt(e){return e===33||e>=35&&e<=38||e>=42&&e<=44||e===46||e>=58&&e<=64||e===94||e===96||e===126}function Kxt(e){return e===40||e===41||e===45||e===47||e>=91&&e<=93||e>=123&&e<=125}Ct.regexp_eatClassSetReservedPunctuator=function(e){var t=e.current();return Xxt(t)?(e.lastIntValue=t,e.advance(),!0):!1};function Xxt(e){return e===33||e===35||e===37||e===38||e===44||e===45||e>=58&&e<=62||e===64||e===96||e===126}Ct.regexp_eatClassControlLetter=function(e){var t=e.current();return qF(t)||t===95?(e.lastIntValue=t%32,e.advance(),!0):!1};Ct.regexp_eatHexEscapeSequence=function(e){var t=e.pos;if(e.eat(120)){if(this.regexp_eatFixedHexDigits(e,2))return!0;e.switchU&&e.raise("Invalid escape"),e.pos=t}return!1};Ct.regexp_eatDecimalDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;qF(n=e.current());)e.lastIntValue=10*e.lastIntValue+(n-48),e.advance();return e.pos!==t};function qF(e){return e>=48&&e<=57}Ct.regexp_eatHexDigits=function(e){var t=e.pos,n=0;for(e.lastIntValue=0;ORe(n=e.current());)e.lastIntValue=16*e.lastIntValue+DRe(n),e.advance();return e.pos!==t};function ORe(e){return e>=48&&e<=57||e>=65&&e<=70||e>=97&&e<=102}function DRe(e){return e>=65&&e<=70?10+(e-65):e>=97&&e<=102?10+(e-97):e-48}Ct.regexp_eatLegacyOctalEscapeSequence=function(e){if(this.regexp_eatOctalDigit(e)){var t=e.lastIntValue;if(this.regexp_eatOctalDigit(e)){var n=e.lastIntValue;t<=3&&this.regexp_eatOctalDigit(e)?e.lastIntValue=t*64+n*8+e.lastIntValue:e.lastIntValue=t*8+n}else e.lastIntValue=t;return!0}return!1};Ct.regexp_eatOctalDigit=function(e){var t=e.current();return $Re(t)?(e.lastIntValue=t-48,e.advance(),!0):(e.lastIntValue=0,!1)};function $Re(e){return e>=48&&e<=55}Ct.regexp_eatFixedHexDigits=function(e,t){var n=e.pos;e.lastIntValue=0;for(var r=0;r<t;++r){var i=e.current();if(!ORe(i))return e.pos=n,!1;e.lastIntValue=16*e.lastIntValue+DRe(i),e.advance()}return!0};var aJ=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new zF(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Gn=Hs.prototype;Gn.next=function(e){!e&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new aJ(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()};Gn.getToken=function(){return this.next(),new aJ(this)};typeof Symbol<"u"&&(Gn[Symbol.iterator]=function(){var e=this;return{next:function(){var t=e.getToken();return{done:t.type===K.eof,value:t}}}});Gn.nextToken=function(){var e=this.curContext();if((!e||!e.preserveSpace)&&this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length)return this.finishToken(K.eof);if(e.override)return e.override(this);this.readToken(this.fullCharCodeAtPos())};Gn.readToken=function(e){return jm(e,this.options.ecmaVersion>=6)||e===92?this.readWord():this.getTokenFromCode(e)};Gn.fullCharCodeAtPos=function(){var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=56320)return e;var t=this.input.charCodeAt(this.pos+1);return t<=56319||t>=57344?e:(e<<10)+t-56613888};Gn.skipBlockComment=function(){var e=this.options.onComment&&this.curPosition(),t=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(n===-1&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var r=void 0,i=t;(r=iRe(this.input,i,this.pos))>-1;)++this.curLine,i=this.lineStart=r;this.options.onComment&&this.options.onComment(!0,this.input.slice(t+2,n),t,this.pos,e,this.curPosition())};Gn.skipLineComment=function(e){for(var t=this.pos,n=this.options.onComment&&this.curPosition(),r=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!VS(r);)r=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,n,this.curPosition())};Gn.skipSpace=function(){e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:this.input.charCodeAt(this.pos+1)===10&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(e>8&&e<14||e>=5760&&sRe.test(String.fromCharCode(e)))++this.pos;else break e}}};Gn.finishToken=function(e,t){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=e,this.value=t,this.updateContext(n)};Gn.readToken_dot=function(){var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&e===46&&t===46?(this.pos+=3,this.finishToken(K.ellipsis)):(++this.pos,this.finishToken(K.dot))};Gn.readToken_slash=function(){var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):e===61?this.finishOp(K.assign,2):this.finishOp(K.slash,1)};Gn.readToken_mult_modulo_exp=function(e){var t=this.input.charCodeAt(this.pos+1),n=1,r=e===42?K.star:K.modulo;return this.options.ecmaVersion>=7&&e===42&&t===42&&(++n,r=K.starstar,t=this.input.charCodeAt(this.pos+2)),t===61?this.finishOp(K.assign,n+1):this.finishOp(r,n)};Gn.readToken_pipe_amp=function(e){var t=this.input.charCodeAt(this.pos+1);if(t===e){if(this.options.ecmaVersion>=12){var n=this.input.charCodeAt(this.pos+2);if(n===61)return this.finishOp(K.assign,3)}return this.finishOp(e===124?K.logicalOR:K.logicalAND,2)}return t===61?this.finishOp(K.assign,2):this.finishOp(e===124?K.bitwiseOR:K.bitwiseAND,1)};Gn.readToken_caret=function(){var e=this.input.charCodeAt(this.pos+1);return e===61?this.finishOp(K.assign,2):this.finishOp(K.bitwiseXOR,1)};Gn.readToken_plus_min=function(e){var t=this.input.charCodeAt(this.pos+1);return t===e?t===45&&!this.inModule&&this.input.charCodeAt(this.pos+2)===62&&(this.lastTokEnd===0||tf.test(this.input.slice(this.lastTokEnd,this.pos)))?(this.skipLineComment(3),this.skipSpace(),this.nextToken()):this.finishOp(K.incDec,2):t===61?this.finishOp(K.assign,2):this.finishOp(K.plusMin,1)};Gn.readToken_lt_gt=function(e){var t=this.input.charCodeAt(this.pos+1),n=1;return t===e?(n=e===62&&this.input.charCodeAt(this.pos+2)===62?3:2,this.input.charCodeAt(this.pos+n)===61?this.finishOp(K.assign,n+1):this.finishOp(K.bitShift,n)):t===33&&e===60&&!this.inModule&&this.input.charCodeAt(this.pos+2)===45&&this.input.charCodeAt(this.pos+3)===45?(this.skipLineComment(4),this.skipSpace(),this.nextToken()):(t===61&&(n=2),this.finishOp(K.relational,n))};Gn.readToken_eq_excl=function(e){var t=this.input.charCodeAt(this.pos+1);return t===61?this.finishOp(K.equality,this.input.charCodeAt(this.pos+2)===61?3:2):e===61&&t===62&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(K.arrow)):this.finishOp(e===61?K.eq:K.prefix,1)};Gn.readToken_question=function(){var e=this.options.ecmaVersion;if(e>=11){var t=this.input.charCodeAt(this.pos+1);if(t===46){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(K.questionDot,2)}if(t===63){if(e>=12){var r=this.input.charCodeAt(this.pos+2);if(r===61)return this.finishOp(K.assign,3)}return this.finishOp(K.coalesce,2)}}return this.finishOp(K.question,1)};Gn.readToken_numberSign=function(){var e=this.options.ecmaVersion,t=35;if(e>=13&&(++this.pos,t=this.fullCharCodeAtPos(),jm(t,!0)||t===92))return this.finishToken(K.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+dy(t)+"'")};Gn.getTokenFromCode=function(e){switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(K.parenL);case 41:return++this.pos,this.finishToken(K.parenR);case 59:return++this.pos,this.finishToken(K.semi);case 44:return++this.pos,this.finishToken(K.comma);case 91:return++this.pos,this.finishToken(K.bracketL);case 93:return++this.pos,this.finishToken(K.bracketR);case 123:return++this.pos,this.finishToken(K.braceL);case 125:return++this.pos,this.finishToken(K.braceR);case 58:return++this.pos,this.finishToken(K.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(K.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(t===120||t===88)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(t===111||t===79)return this.readRadixNumber(8);if(t===98||t===66)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 63:return this.readToken_question();case 126:return this.finishOp(K.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+dy(e)+"'")};Gn.finishOp=function(e,t){var n=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,n)};Gn.readRegexp=function(){for(var e,t,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var r=this.input.charAt(this.pos);if(tf.test(r)&&this.raise(n,"Unterminated regular expression"),e)e=!1;else{if(r==="[")t=!0;else if(r==="]"&&t)t=!1;else if(r==="/"&&!t)break;e=r==="\\"}++this.pos}var i=this.input.slice(n,this.pos);++this.pos;var s=this.pos,o=this.readWord1();this.containsEsc&&this.unexpected(s);var a=this.regexpState||(this.regexpState=new ip(this));a.reset(n,i,o),this.validateRegExpFlags(a),this.validateRegExpPattern(a);var u=null;try{u=new RegExp(i,o)}catch{}return this.finishToken(K.regexp,{pattern:i,flags:o,value:u})};Gn.readInt=function(e,t,n){for(var r=this.options.ecmaVersion>=12&&t===void 0,i=n&&this.input.charCodeAt(this.pos)===48,s=this.pos,o=0,a=0,u=0,l=t??1/0;u<l;++u,++this.pos){var c=this.input.charCodeAt(this.pos),f=void 0;if(r&&c===95){i&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),a===95&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),u===0&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),a=c;continue}if(c>=97?f=c-97+10:c>=65?f=c-65+10:c>=48&&c<=57?f=c-48:f=1/0,f>=e)break;a=c,o=o*e+f}return r&&a===95&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||t!=null&&this.pos-s!==t?null:o};function Qxt(e,t){return t?parseInt(e,8):parseFloat(e.replace(/_/g,""))}function MRe(e){return typeof BigInt!="function"?null:BigInt(e.replace(/_/g,""))}Gn.readRadixNumber=function(e){var t=this.pos;this.pos+=2;var n=this.readInt(e);return n==null&&this.raise(this.start+2,"Expected number in radix "+e),this.options.ecmaVersion>=11&&this.input.charCodeAt(this.pos)===110?(n=MRe(this.input.slice(t,this.pos)),++this.pos):jm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,n)};Gn.readNumber=function(e){var t=this.pos;!e&&this.readInt(10,void 0,!0)===null&&this.raise(t,"Invalid number");var n=this.pos-t>=2&&this.input.charCodeAt(t)===48;n&&this.strict&&this.raise(t,"Invalid number");var r=this.input.charCodeAt(this.pos);if(!n&&!e&&this.options.ecmaVersion>=11&&r===110){var i=MRe(this.input.slice(t,this.pos));return++this.pos,jm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(K.num,i)}n&&/[89]/.test(this.input.slice(t,this.pos))&&(n=!1),r===46&&!n&&(++this.pos,this.readInt(10),r=this.input.charCodeAt(this.pos)),(r===69||r===101)&&!n&&(r=this.input.charCodeAt(++this.pos),(r===43||r===45)&&++this.pos,this.readInt(10)===null&&this.raise(t,"Invalid number")),jm(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s=Qxt(this.input.slice(t,this.pos),n);return this.finishToken(K.num,s)};Gn.readCodePoint=function(){var e=this.input.charCodeAt(this.pos),t;if(e===123){this.options.ecmaVersion<6&&this.unexpected();var n=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(n,"Code point out of bounds")}else t=this.readHexChar(4);return t};Gn.readString=function(e){for(var t="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var r=this.input.charCodeAt(this.pos);if(r===e)break;r===92?(t+=this.input.slice(n,this.pos),t+=this.readEscapedChar(!1),n=this.pos):r===8232||r===8233?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(VS(r)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(n,this.pos++),this.finishToken(K.string,t)};var LRe={};Gn.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e===LRe)this.readInvalidTemplateToken();else throw e}this.inTemplateElement=!1};Gn.invalidStringToken=function(e,t){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw LRe;this.raise(e,t)};Gn.readTmplToken=function(){for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(n===96||n===36&&this.input.charCodeAt(this.pos+1)===123)return this.pos===this.start&&(this.type===K.template||this.type===K.invalidTemplate)?n===36?(this.pos+=2,this.finishToken(K.dollarBraceL)):(++this.pos,this.finishToken(K.backQuote)):(e+=this.input.slice(t,this.pos),this.finishToken(K.template,e));if(n===92)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(VS(n)){switch(e+=this.input.slice(t,this.pos),++this.pos,n){case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:e+=`
`;break;default:e+=String.fromCharCode(n);break}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}};Gn.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if(this.input[this.pos+1]!=="{")break;case"`":return this.finishToken(K.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")};Gn.readEscapedChar=function(e){var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return`
`;case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return dy(this.readCodePoint());case 116:return"	";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:this.input.charCodeAt(this.pos)===10&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),e){var n=this.pos-1;this.invalidStringToken(n,"Invalid escape sequence in template string")}default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),(r!=="0"||t===56||t===57)&&(this.strict||e)&&this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return VS(t)?"":String.fromCharCode(t)}};Gn.readHexChar=function(e){var t=this.pos,n=this.readInt(16,e);return n===null&&this.invalidStringToken(t,"Bad character escape sequence"),n};Gn.readWord1=function(){this.containsEsc=!1;for(var e="",t=!0,n=this.pos,r=this.options.ecmaVersion>=6;this.pos<this.input.length;){var i=this.fullCharCodeAtPos();if(Tx(i,r))this.pos+=i<=65535?1:2;else if(i===92){this.containsEsc=!0,e+=this.input.slice(n,this.pos);var s=this.pos;this.input.charCodeAt(++this.pos)!==117&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var o=this.readCodePoint();(t?jm:Tx)(o,r)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=dy(o),n=this.pos}else break;t=!1}return e+this.input.slice(n,this.pos)};Gn.readWord=function(){var e=this.readWord1(),t=K.name;return this.keywords.test(e)&&(t=eJ[e]),this.finishToken(t,e)};var Jxt="8.11.3";Hs.acorn={Parser:Hs,version:Jxt,defaultOptions:$V,Position:SI,SourceLocation:zF,getLineInfo:aRe,Node:HF,TokenType:ur,tokTypes:K,keywordTypes:eJ,TokContext:hf,tokContexts:ki,isIdentifierChar:Tx,isIdentifierStart:jm,Token:aJ,isNewLine:VS,lineBreak:tf,lineBreakG:xxt,nonASCIIwhitespace:sRe};function Zxt(e,t){return Hs.parse(e,t)}const uJ={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},eSt={ecmaVersion:11},Ede="$",tSt="d",nSt="d1",rSt="d2",Io=e=>(t,n)=>n.error(t,e+" not allowed"),iSt=Io("Aggregate function"),sSt=Io("Window function"),oSt="Invalid argument",lJ="Invalid column reference",aSt=lJ+" (must be input to an aggregate function)",FRe="Invalid function call",uSt="Invalid member expression",lSt="Invalid operator parameter",cSt="Invalid param reference",fSt="Invalid variable reference",dSt="Variable not accessible in operator call",hSt="Unsupported variable declaration",pSt="Unsupported destructuring pattern",jRe="Table expressions do not support closures",BRe="Use aq.escape(fn) to use a function as-is (including closures)",mSt="use table.params({ name: value }) to define dynamic parameters",gSt="use aq.addFunction(name, fn) to add new op functions",ySt=`
Note: ${jRe}. ${BRe}, or ${mSt}.`,URe=`
Note: ${jRe}. ${BRe}, or ${gSt}.`,vSt=`The ${U2e} method is not valid in multi-table expressions.`;function bSt(e,t){const n=_St(t);let r=e.root=n;return e.spec=t,e.tuple=null,e.tuple1=null,e.tuple2=null,e.$param=null,e.$op=0,e.scope=new Set,e.paramsRef=new Map,e.columnRef=new Map,hxt(r)?(ESt(r,e),r=r.body):e.join?(e.scope.add(e.tuple1=nSt),e.scope.add(e.tuple2=rSt),e.scope.add(e.$param=Ede)):(e.scope.add(e.tuple=tSt),e.scope.add(e.$param=Ede)),nr(r,e,cJ),e.root}function _St(e){try{const t=e.field?wSt(e):pr(e)?Oh(e):e;return Zxt(`expr=(${t})`,eSt).body[0].expression.right}catch{Sn(`Expression parse error: ${e+""}`)}}function wSt(e){const t=JSON.stringify(e+"");return e.table?`(a,b)=>b[${t}]`:`d=>d[${t}]`}const cJ={FunctionDeclaration:Io("Function definitions"),ForStatement:Io("For loops"),ForOfStatement:Io("For-of loops"),ForInStatement:Io("For-in loops"),WhileStatement:Io("While loops"),DoWhileStatement:Io("Do-while loops"),AwaitExpression:Io("Await expressions"),ArrowFunctionExpression:Io("Function definitions"),AssignmentExpression:Io("Assignments"),FunctionExpression:Io("Function definitions"),NewExpression:Io('Use of "new"'),UpdateExpression:Io("Update expressions"),VariableDeclarator(e,t){jV(e.id,t)},Identifier(e,t,n){HRe(e,t,n)&&!t.scope.has(e.name)&&t.error(e,fSt,ySt)},CallExpression(e,t){const n=zRe(e.callee),r=F2e(n)||j2e(n);if(r){if((t.join||t.aggregate===!1)&&ZX(n)&&iSt(e,t),(t.join||t.window===!1)&&eQ(n)&&sSt(e,t),t.$op=1,t.ast)FV(e,n,t),e.arguments.forEach(i=>nr(i,t,LV));else{const i=t.op(xSt(t,r,n,e.arguments));Object.assign(e,{type:O2e,name:i.id})}return t.$op=0,!1}else L2e(n)?FV(e,n,t):t.error(e,FRe,URe)},MemberExpression(e,t,n){const{object:r,property:i}=e;if(!$s(D0,r))return;const{name:s}=r;if(VRe(e)&&$s(D0,i)&&Jf(uJ,i.name)){GRe(e,i.name);return}const o=s===t.tuple?0:s===t.tuple1?1:s===t.tuple2?2:-1;if(o>=0)return xde(e,o,t,qRe,n);if(s===t.$param)return xde(e,o,t,TSt);t.paramsRef.has(s)?AI(e,t.paramsRef.get(s)):t.columnRef.has(s)?WRe(r,s,t,e):Jf(t.params,s)&&AI(r,s)}};function xde(e,t,n,r,i){const{property:s,computed:o}=e;let a;if(!o)a=s.name;else if($s(FS,s))a=s.value;else try{nr(s,n,cJ,e),a=n.param(s)}catch{n.error(e,uSt)}return r(e,a,t,n,i),!1}const LV={...cJ,VariableDeclarator:Io("Variable declaration in operator call"),Identifier(e,t,n){HRe(e,t,n)&&t.error(e,dSt)},CallExpression(e,t){const n=zRe(e.callee);L2e(n)?FV(e,n,t):t.error(e,FRe,URe)}};function ESt(e,t){e.generator&&Io("Generator functions")(e,t),e.async&&Io("Async functions")(e,t);const{params:n}=e,r=n.length,i=o=>(a,u)=>t.columnRef.set(a,[u,o]),s=(o,a)=>t.paramsRef.set(o,a);r&&(t.join?(iA(t,n[0],"tuple1",i(1)),r>1&&iA(t,n[1],"tuple2",i(2)),r>2&&iA(t,n[2],"$param",s)):(iA(t,n[0],"tuple",i(0)),r>1&&iA(t,n[1],"$param",s))),t.root=e.body}function iA(e,t,n,r){$s(D0,t)?(e.scope.add(t.name),e[n]=t.name):$s(N2e,t)&&t.properties.forEach(i=>{const s=$s(D0,i.key)?i.key.name:$s(FS,i.key)?i.key.value:e.error(i,oSt);$s(D0,i.value)||e.error(i.value,pSt),r(i.value.name,s)})}function xSt(e,t,n,r){const i=[],s=[],o=t.param[0]||0,a=o+(t.param[1]||0);return r.forEach((u,l)=>{l<o?(nr(u,e,LV),i.push(e.field(u))):l<a?(nr(u,e,LV),s.push(e.param(u))):e.error(u,lSt)}),{name:n,fields:i,params:s,...e.spec.window||{}}}function zRe(e){return $s(D0,e)?e.name:$s(R2e,e)?VRe(e)?SSt(e.property.name):e.property.name:null}function VRe(e){return $s(D0,e.object)&&e.object.name==="Math"}function SSt(e){return e==="max"?"greatest":e==="min"?"least":e}function HRe(e,t,n){const{name:r}=e;if(!($s(R2e,n)&&n.property===e)){if(!($s(P2e,n)&&n.key===e))if(t.paramsRef.has(r))AI(e,t.paramsRef.get(r));else if(t.columnRef.has(r))WRe(e,r,t,n);else if(Jf(t.params,r))AI(e,r);else if(Jf(uJ,r))GRe(e,r);else return!0}}function qRe(e,t,n,r,i){const s=n===0?r.table:n>0?r.join[n-1]:null,o=s&&s.column(t);s&&!o&&r.error(e,lJ),r.aggronly&&!r.$op&&r.error(e,aSt),B2e(e,t,n,o,i)}function WRe(e,t,n,r){const[i,s]=n.columnRef.get(t);qRe(e,i,s,n,r)}function TSt(e,t,n,r){r.params&&!Jf(r.params,t)&&r.error(e,cSt),AI(e,t)}function AI(e,t){e.type=pbt,e.name=t}function GRe(e,t){e.type=fbt,e.name=t,e.raw=uJ[t]}function FV(e,t,n){if(t===U2e){const r=n.table;r||n.error(e,vSt),z2e(e,e.arguments.length?e.arguments.map(i=>{const s=n.param(i),o=iu(s)?r.columnName(s):s;return r.column(o)||n.error(i,lJ),o}):r.columnNames())}else e.callee={type:hbt,name:t}}function jV(e,t){$s(D0,e)?t.scope.add(e.name):$s(abt,e)?e.elements.forEach(n=>jV(n,t)):$s(N2e,e)?e.properties.forEach(n=>jV(n.value,t)):t.error(e.id,hSt)}const ASt={[Xk]:1,[O2e]:1};function sl(e,t={}){const n=t.generate||IM,r=t.compiler||tQ,i=ISt(t),s={},o={},a=[],u=[];let l=0,c=-1;const f=t.join?r.join:t.index==1?r.expr2:r.expr,d={op(m){const g=CSt(m);return o[g]||(m.id=++c,o[g]=m)},field(m){const g=n(m);return s[g]||(s[g]=++l)},param(m){return $s(FS,m)?m.value:r.param(n(m),i)},value(m,g){a.push(m);const y=g.escape||(t.ast?dxt(g):f(n(g),i));u.push(y),ASt[g.type]&&y!==g&&xa(y)&&(y.field=g.name)},error(m,g,y=""){const v=m.start-6,b=m.end-6,w=String(d.spec).slice(v,b);Sn(`${g}: "${w}"${y}`)}};Object.assign(d,t,{params:i});for(const[m,g]of IF(e))d.value(m+"",g.escape?gxt(d,g,i):bSt(d,g));if(t.ast)return{names:a,exprs:u};const h=[];for(const m in s)h[s[m]]=r.expr(m,i);const p=Object.values(o);return p.forEach(m=>m.fields=m.fields.map(g=>h[g])),{names:a,exprs:u,ops:p}}function CSt(e){let t=`${e.name}(${e.fields.concat(e.params).join(",")})`;if(e.frame){const n=e.frame.map(r=>Number.isFinite(r)?Math.abs(r):-1);t+=`[${n},${!!e.peers}]`}return t}function ISt(e){return(e.table?GB(e.table):e.join?{...GB(e.join[1]),...GB(e.join[0])}:{})||{}}function GB(e){return e&&gi(e.params)?e.params():{}}const YRe="Expr",pf="ExprList",KRe="ExprNumber",eC="ExprObject",Ww="JoinKeys",QM="JoinValues",mc="Options",fJ="OrderKeys",$g="SelectionList",s1="TableRef",Gw="TableRefList",kSt="Descending",RSt="Query",NSt="Selection",PSt="Verb",OSt="Window";function WF(e,t){return e&&e.expr?new Sde({...e,...t}):new Sde(t,e)}class Sde{constructor(t,n){this.expr=n,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...gi(this.expr)?{func:!0}:{}}}}function DSt(e){return WF(e,{desc:!0})}function pb(e,t,n=0){const r=n?{field:!0,table:n}:{field:!0};return WF(e,t?{expr:t,...r}:r)}function $St(e,t,n){return WF(e,{window:{frame:t||[-1/0,0],peers:!!n}})}function MSt(e){const t=n=>n;return t.toString=()=>e,t}function Tde(e,t){return t=t&&gi(t.query)?t.query():t,t&&gi(t.evaluate)?t.evaluate(null,e):e(t)}function XRe(e){return xa(e)&&(pr(e.all)||pr(e.matches)||pr(e.not)||pr(e.range))}function CI(e){return e&&gi(e.toObject)?e.toObject():gi(e)?{expr:String(e),func:!0}:pr(e)?e.map(CI):xa(e)?BF(e,t=>CI(t)):e}function dJ(e){return pr(e)?e.map(dJ):xa(e)?pr(e.verbs)?pJ.from(e):pr(e.all)?Sx():pr(e.range)?axt(...e.range):pr(e.match)?uxt(RegExp(...e.match)):pr(e.not)?eRe(e.not.map(CI)):LSt(e):e}function LSt(e){let t=e,n=e.expr;if(n!=null){if(e.field===!0?t=n=pb(n):e.func===!0&&(t=n=MSt(n)),xa(e.window)){const{frame:r,peers:i}=e.window;t=n=$St(n,r,i)}e.desc===!0&&(t=DSt(n))}return e===t?BF(e,r=>dJ(r)):t}function FSt(e){return pr(e)?e.map(jSt):e}function jSt(e){const t=[];return nl(e).forEach(n=>{iu(n)?t.push(n):Vo(n)?t.push(pb(n,null)):xa(n)&&n.expr||gi(n)?t.push(n):Sn(`Invalid key value: ${n+""}`)}),t}function BSt(e){return pr(e)?e.map(USt):e}function USt(e,t){return t<2?nl(e):e}function zSt(e){const t=[];return e.forEach(n=>{const r=n.expr!=null?n.expr:n;if(xa(r)&&!gi(r))for(const i in r)t.push(r[i]);else n=iu(r)?r:Vo(r)?pb(n):gi(r)?n:Sn(`Invalid orderby field: ${n+""}`),t.push(n)}),t}const VSt={[YRe]:eNe,[pf]:Ax,[KRe]:KSt,[eC]:hy,[Ww]:XSt,[QM]:QSt,[fJ]:Ax,[$g]:GSt};function HSt(e,t,n){return t===s1?Ade(e):t===Gw?e.map(Ade):QRe(CI(e),t,n)}function QRe(e,t,n){return t===mc?e&&qSt(e,n):VSt[t](e)}function qSt(e,t={}){const n={};for(const r in e){const i=e[r];n[r]=t[r]?QRe(i,t[r]):i}return n}function WSt(e,t){return sl({expr:e},{...t,ast:!0}).exprs[0]}function hJ(e){return{type:Xk,name:e}}function JRe(e){return{type:Xk,index:e}}function hy(e,t){if(Vo(e))return WSt(e,t);if(e.expr){let n;if(e.field===!0?n=hJ(e.expr):e.func===!0&&(n=hy(e.expr,t)),n)return e.desc&&(n={type:kSt,expr:n}),e.window&&(n={type:OSt,expr:n,...e.window}),n}return Object.keys(e).map(n=>({...hy(e[n],t),as:n}))}function ZRe(e){const t=NSt;return e.all?{type:t,operator:"all"}:e.not?{type:t,operator:"not",arguments:Ax(e.not)}:e.range?{type:t,operator:"range",arguments:Ax(e.range)}:e.matches?{type:t,operator:"matches",arguments:e.matches}:Sn("Invalid input")}function GSt(e){return nl(e).map(YSt).flat()}function YSt(e){return XRe(e)?ZRe(e):iu(e)?JRe(e):Vo(e)?hJ(e):xa(e)?Object.keys(e).map(t=>({type:Xk,name:t,as:e[t]})):Sn("Invalid input")}function eNe(e){return XRe(e)?ZRe(e):iu(e)?JRe(e):Vo(e)?hJ(e):xa(e)?hy(e):Sn("Invalid input")}function Ax(e){return nl(e).map(eNe).flat()}function KSt(e){return iu(e)?e:hy(e)}function XSt(e){return pr(e)?e.map(Ax):hy(e,{join:!0})}function QSt(e){return pr(e)?e.map((t,n)=>n<2?Ax(t):hy(t,{join:!0})):hy(e,{join:!0})}function Ade(e){return e&&gi(e.toAST)?e.toAST():e}class tNe{constructor(t,n=[],r=[]){this.verb=t,this.schema=n,n.forEach((i,s)=>{const o=i.type,a=r[s],u=o===Ww?FSt(a):o===QM?BSt(a):o===fJ?zSt(a):a;this[i.name]=u!==void 0?u:i.default})}static from(t){const n=BV[t.verb],r=(n.schema||[]).map(({name:i})=>dJ(t[i]));return n(...r)}evaluate(t,n){const r=this.schema.map(({name:i,type:s})=>{const o=this[i];return s===s1?Tde(n,o):s===Gw?o.map(a=>Tde(n,a)):o});return t[this.verb](...r)}toObject(){const t={verb:this.verb};return this.schema.forEach(({name:n})=>{t[n]=CI(this[n])}),t}toAST(){const t={type:PSt,verb:this.verb};return this.schema.forEach(({name:n,type:r,props:i})=>{t[n]=HSt(this[n],r,i)}),t}}function jr(e,t){return Object.assign((...n)=>new tNe(e,t,n),{schema:t})}const BV={count:jr("count",[{name:"options",type:mc}]),derive:jr("derive",[{name:"values",type:eC},{name:"options",type:mc,props:{before:$g,after:$g}}]),filter:jr("filter",[{name:"criteria",type:eC}]),groupby:jr("groupby",[{name:"keys",type:pf}]),orderby:jr("orderby",[{name:"keys",type:fJ}]),relocate:jr("relocate",[{name:"columns",type:$g},{name:"options",type:mc,props:{before:$g,after:$g}}]),rename:jr("rename",[{name:"columns",type:$g}]),rollup:jr("rollup",[{name:"values",type:eC}]),sample:jr("sample",[{name:"size",type:KRe},{name:"options",type:mc,props:{weight:YRe}}]),select:jr("select",[{name:"columns",type:$g}]),ungroup:jr("ungroup"),unorder:jr("unorder"),reify:jr("reify"),dedupe:jr("dedupe",[{name:"keys",type:pf,default:[]}]),impute:jr("impute",[{name:"values",type:eC},{name:"options",type:mc,props:{expand:pf}}]),fold:jr("fold",[{name:"values",type:pf},{name:"options",type:mc}]),pivot:jr("pivot",[{name:"keys",type:pf},{name:"values",type:pf},{name:"options",type:mc}]),spread:jr("spread",[{name:"values",type:pf},{name:"options",type:mc}]),unroll:jr("unroll",[{name:"values",type:pf},{name:"options",type:mc,props:{drop:pf}}]),lookup:jr("lookup",[{name:"table",type:s1},{name:"on",type:Ww},{name:"values",type:pf}]),join:jr("join",[{name:"table",type:s1},{name:"on",type:Ww},{name:"values",type:QM},{name:"options",type:mc}]),cross:jr("cross",[{name:"table",type:s1},{name:"values",type:QM},{name:"options",type:mc}]),semijoin:jr("semijoin",[{name:"table",type:s1},{name:"on",type:Ww}]),antijoin:jr("antijoin",[{name:"table",type:s1},{name:"on",type:Ww}]),concat:jr("concat",[{name:"tables",type:Gw}]),union:jr("union",[{name:"tables",type:Gw}]),intersect:jr("intersect",[{name:"tables",type:Gw}]),except:jr("except",[{name:"tables",type:Gw}])};let pJ=class nNe extends y2e{constructor(t,n,r){super(n),this._verbs=t||[],this._table=r}static from({verbs:t,table:n,params:r}){return new nNe(t.map(tNe.from),r,n)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,n){t=t||n(this._table);for(const r of this._verbs)t=r.evaluate(t.params(this._params),n);return t}toObject(){return Cde(this,"toObject")}toJSON(){return this.toObject()}toAST(){return Cde(this,"toAST",{type:RSt})}};function Cde(e,t,n){return{...n,verbs:e._verbs.map(r=>r[t]()),...e._params?{params:e._params}:null,...e._table?{table:e._table}:null}}function JSt(e,t){return new pJ(e._verbs.concat(t),e._params,e._table)}for(const e in BV){const t=BV[e];pJ.prototype["__"+e]=function(n,...r){return JSt(n,t(...r))}}function WS(e,t,...n){const r=["_","$"],i=r.slice(0,n.length);return i.push('"use strict"; const '+n.map((s,o)=>s.map((a,u)=>`${r[o]}${u} = ${r[o]}[${u}]`).join(", ")).join(", ")+`; return (${e}) => ${t};`),Function(...i)(...n)}function ZSt(e,t=[]){return e.groupby(t.length?t:e.columnNames()).filter("row_number() === 1").ungroup().reify()}function mJ(e,t){const n=ic();return t.forEach((r,i)=>{const s=Vo(r)?r:i;if(s){const o=e.column(i)||Sn(`Unrecognized column: ${i}`);n.add(s,o)}}),e.create(n)}function rNe(e,t,{before:n,after:r}={}){const i=n!=null,s=r!=null;i||s||Sn("relocate requires a before or after option."),i&&s&&Sn("relocate accepts only one of the before or after options."),t=Fm(e,t);const o=[...Fm(e,i?n:r).keys()],a=i?o[0]:o.pop(),u=new Map;return e.columnNames().forEach(l=>{const c=!t.has(l);if(l===a){s&&c&&u.set(l,l);for(const[f,d]of t)u.set(f,d);if(s)return}c&&u.set(l,l)}),mJ(e,u)}function sR(e,t=r=>r,n=""){const r=e.length;if(!r)return"";let i=t(e[0],0);for(let s=1;s<r;++s)i+=n+t(e[s],s);return i}function gJ(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function eTt(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r>e[i]&&(r=e[i]);return r}function tTt(e,t=0,n=e.length){let r=n?e[t++]:lr;for(let i=t;i<n;++i)r<e[i]&&(r=e[i]);return r}function SP(e){return yI(e)?e:+e}function nTt(e,t){const n=e.length;if(!n)return lr;if((t=+t)<=0||n<2)return SP(e[0]);if(t>=1)return SP(e[n-1]);const r=(n-1)*t,i=Math.floor(r),s=SP(e[i]);return yI(s)?s:s+(SP(e[i+1])-s)*(r-i)}class rTt{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:eTt(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:tTt(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(gJ)),nTt(this._sorted,t)}}const JM=(e,t,n)=>WS(t,"{"+sR(e,(r,i)=>`_${i}.${n}(${t});`)+"}",e);function iTt(e,t){const{ops:n,output:r}=sTt(e,t),i=e[0].fields,s=i.length,o=s===0?yJ:s===1?oTt:s===2?aTt:Sn("Unsupported field count: "+s);return new o(i,n,r,t)}function sTt(e,t){const n={},r=[];function i(o,a=[]){const u=o+":"+a;if(n[u])return n[u];const l=F2e(o),c=l.create(...a);return t<0&&l.stream&&l.stream.forEach(f=>i(f,[])),l.req&&l.req.forEach(f=>i(f,[])),n[u]=c,r.push(c),c}const s=e.map(o=>{const a=i(o.name,o.params);return a.output=o.id,a});return{ops:r,output:s}}class yJ extends cxt{constructor(t,n,r,i){super(r),this._op=n,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach(n=>n.init(t)),t.values&&(t.list=new rTt),t}write(t,n,r){const i=this._outputs,s=i.length;for(let o=0;o<s;++o)n[i[o].output][r]=i[o].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class oTt extends yJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=JM(n,s,"add"),this._rem=JM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r);++t.count,Lf(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,n,r){const i=this._fields[0](n,r);--t.count,Lf(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class aTt extends yJ{constructor(t,n,r,i){super(t,n,r,i);const s=["state","v1","v2"];this._add=JM(n,s,"add"),this._rem=JM(n,s,"rem")}add(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);++t.count,Lf(i)&&Lf(s)&&(++t.valid,t.list&&t.list.add([i,s]),this._add(t,i,s))}rem(t,n,r){const i=this._fields[0](n,r),s=this._fields[1](n,r);--t.count,Lf(i)&&Lf(s)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,s))}}function l_(e,t,n){if(t.length){const r=e.data(),{keys:i}=e.groups()||{},s=GS(e,t),o=i?(a,u)=>s[a][i[u]]:a=>s[a][0];n=n.map(a=>u=>a(u,r,o))}return n}function GS(e,t,n){if(!t.length)return n;const r=iNe(t),i=e.groups(),s=i?i.size:1;return n=n||AF(t.length,()=>Array(s)),s>1?r.forEach(o=>{const a=oNe(e,o,i);for(let u=0;u<s;++u)o.write(a[u],n,u)}):r.forEach(o=>{const a=sNe(e,o);o.write(a,n,0)}),n}function iNe(e,t){const n=[],r={};for(const i of e){const s=i.fields.map(o=>o+"").join(",");(r[s]||(r[s]=[])).push(i)}for(const i in r)n.push(iTt(r[i],t));return n}function sNe(e,t){const n=t.init(),r=e.totalRows(),i=e.data(),s=e.mask();if(e.isOrdered()){const o=e.indices();for(let a=0;a<r;++a)t.add(n,o[a],i)}else if(s)for(let o=s.next(0);o>=0;o=s.next(o+1))t.add(n,o,i);else for(let o=0;o<r;++o)t.add(n,o,i);return n}function oNe(e,t,n){const{keys:r,size:i}=n,s=AF(i,()=>t.init()),o=e.data();if(e.isOrdered()){const a=e.indices(),u=a.length;for(let l=0;l<u;++l){const c=a[l];t.add(s[r[c]],c,o)}}else if(e.isFiltered()){const a=e.mask();for(let u=a.next(0);u>=0;u=a.next(u+1))t.add(s[r[u]],u,o)}else{const a=e.totalRows();for(let u=0;u<a;++u)t.add(s[r[u]],u,o)}return s}function aNe(e,t){const{get:n,names:r,rows:i,size:s}=t,o=r.length;for(let a=0;a<o;++a){const u=e.add(r[a],Array(s)),l=n[a];for(let c=0;c<s;++c)u[c]=l(i[c])}}function uNe(e){return{left(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)<0?r=s+1:i=s}return r},right(t,n,r,i){for(r==null&&(r=0),i==null&&(i=t.length);r<i;){const s=r+i>>>1;e(t[s],n)>0?i=s:r=s+1}return r}}}const Ide=uNe(gJ);function uTt(e,t,n,r,i){let s,o,a,u,l;const c=m=>o[m-1]===o[m],f=r.length,d=i.length,h=r.length?WS(["w","r","k"],"{"+sR(r,(m,g)=>`r[_${g}.id][k]=_${g}.value(w,_${g}.get);`)+"}",r):()=>{},p={i0:0,i1:0,index:0,size:0,peer:c,init(m,g,y,v){p.index=p.i0=p.i1=0,p.size=g.length,s=m,o=g,u=y,l=v,a=i?i.map(b=>b.init()):null;for(let b=0;b<f;++b)r[b].init();return p},value(m,g){return g(s[m],e)},step(m){const[g,y]=t,v=p.size,b=p.i0,w=p.i1;p.i0=g!=null?Math.max(0,m-Math.abs(g)):0,p.i1=y!=null?Math.min(v,m+Math.abs(y)+1):v,p.index=m,n&&(p.i0>0&&c(p.i0)&&(p.i0=Ide.left(o,o[p.i0])),p.i1<v&&c(p.i1)&&(p.i1=Ide.right(o,o[p.i1-1])));for(let E=0;E<d;++E){const T=i[E],S=a[E];for(let A=b;A<p.i0;++A)T.rem(S,s[A],e);for(let A=w;A<p.i1;++A)T.add(S,s[A],e);T.write(S,u,l)}return h(p,u,l),u}};return p}const lTt=e=>(e.frame||[null,null]).map(t=>Number.isFinite(t)?Math.abs(t):null),cTt=e=>!!e.peers;function fTt(e){const{id:t,name:n,fields:r=[],params:i=[]}=e,s=j2e(n).create(...i);return r.length&&(s.get=r[0]),s.id=t,s}function dTt(e,t,n,r={},i){const s=e.data(),o=hTt(i,s),a=o.length,u=WS(["r","d","op"],"{"+sR(t,(l,c)=>`_${c}[r] = $${c}(r, d, op);`)+"}",t,n);e.partitions().forEach((l,c)=>{const f=l.length,d=pTt(e,l);for(let p=0;p<a;++p)o[p].init(l,d,r,c);const h=p=>r[p][c];for(let p=0;p<f;++p){for(let m=0;m<a;++m)o[m].step(p);u(l[p],s,h)}})}function hTt(e,t){const n={};return e.forEach(r=>{const i=lTt(r),s=cTt(r),o=`${i},${s}`,{aggOps:a,winOps:u}=n[o]||(n[o]={frame:i,peers:s,aggOps:[],winOps:[]});ZX(r.name)?a.push(r):u.push(fTt(r))}),Object.values(n).map(r=>uTt(t,r.frame,r.peers,r.winOps,iNe(r.aggOps,r.frame[0]!=null?-1:1)))}function pTt(e,t){if(e.isOrdered()){const n=e.comparator(),r=e.data(),i=t.length,s=new Uint32Array(i);for(let o=1,a=0;o<i;++o)s[o]=n(t[o-1],t[o],r)?++a:a;return s}else return t}function mTt(e){return eQ(e.name)||e.frame&&(Number.isFinite(e.frame[0])||Number.isFinite(e.frame[1]))}function vJ(e,{names:t,exprs:n,ops:r},i={}){const s=e.totalRows(),o=ic(i.drop?null:e),a=t.map(d=>o.add(d,Array(s))),[u,l]=gTt(r),c=e.isGrouped()?e.groups().size:1,f=GS(e,u,AF(r.length,()=>Array(c)));return l.length?dTt(e,a,n,f,l):yTt(e,a,n,f),e.create(o)}function gTt(e){const t=[],n=[],r=e.length;for(let i=0;i<r;++i){const s=e[i];s.id=i,(mTt(s)?n:t).push(s)}return[t,n]}function yTt(e,t,n,r){const i=e.mask(),s=e.data(),{keys:o}=e.groups()||{},a=o?(l,c)=>r[l][o[c]]:l=>r[l][0],u=t.length;for(let l=0;l<u;++l){const c=n[l],f=t[l];if(i)for(let d=i.next(0);d>=0;d=i.next(d+1))f[d]=c(d,s,a);else{const d=e.totalRows();for(let h=0;h<d;++h)f[h]=c(h,s,a)}}}function vTt(e,t,n={}){const r=vJ(e,sl(t,{table:e}),n);return n.drop||n.before==null&&n.after==null?r:rNe(r,Object.keys(t).filter(i=>!e.column(i)),n)}function bTt(e,t){if(t.length===0)return e;const n=e.columnNames();return t.reduce((r,i)=>r.antijoin(i.select(n)),e).dedupe()}const TP=2147483648,_Tt=4294967295;class lNe{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let n=0;for(let r=0;r<t;++r)for(let i=this._bits[r];i;++n)i&=i-1;return n}get(t){return this._bits[t>>5]&TP>>>t}set(t){this._bits[t>>5]|=TP>>>t}clear(t){this._bits[t>>5]&=~(TP>>>t)}scan(t){for(let n=this.next(0);n>=0;n=this.next(n+1))t(n)}next(t){const n=this._bits,r=n.length;let i=t>>5,s=n[i]&_Tt>>>t;for(;i<r;s=n[++i])if(s!==0)return(i<<5)+Math.clz32(s);return-1}nth(t){let n=this.next(0);for(;t--&&n>=0;)n=this.next(n+1);return n}not(){const t=this._bits,n=t.length;for(let i=0;i<n;++i)t[i]=~t[i];const r=this._size%32;return r&&(t[n-1]&=TP>>r-1),this}and(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]&=r[s]}return this}or(t){if(t){const n=this._bits,r=t._bits,i=n.length;for(let s=0;s<i;++s)n[s]|=r[s]}return this}}function wTt(e,t){const n=e.totalRows(),r=e.mask(),i=e.data(),s=new lNe(n);if(r)for(let o=r.next(0);o>=0;o=r.next(o+1))t(o,i)&&s.set(o);else for(let o=0;o<n;++o)t(o,i)&&s.set(o);return e.create({filter:s})}function ETt(e,t){const n=sl({p:t},{table:e});let r=n.exprs[0];if(n.ops.length){const{data:i}=vJ(e,n,{drop:!0}).column("p");r=s=>i[s]}return wTt(e,r)}function cNe(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(!t.length)return e;const s=i.limit>0?+i.limit:1/0,o=i.index?i.index===!0?"index":i.index+"":null,a=new Set(i.drop),u=l_(e,r,n),l=ic(),c=new Set(t),f=[],d=[],h=[];e.columnNames().forEach(w=>{if(!a.has(w)){const E=l.add(w,[]);c.has(w)||(f.push(e.column(w)),d.push(E))}}),t.forEach(w=>{a.has(w)||(l.has(w)||l.add(w,[]),h.push(l.data[w]))});const p=o?l.add(o,[]):null;let m=0;const g=f.length,y=h.length,v=(w,E)=>{for(let T=0;T<g;++T)d[T].length=m+E,d[T].fill(f[T].get(w),m,m+E)},b=p?(w,E)=>{for(let T=0;T<E;++T)p[w+T]=T}:()=>{};if(y===1){const w=u[0],E=h[0];e.scan((T,S)=>{const A=nl(w(T,S)),C=Math.min(A.length,s);v(T,C);for(let k=0;k<C;++k)E[m+k]=A[k];b(m,C),m+=C})}else e.scan((w,E)=>{let T=0;const S=u.map(A=>{const C=nl(A(w,E));return T=Math.min(Math.max(T,C.length),s),C});v(w,T);for(let A=0;A<y;++A){const C=h[A],k=S[A];for(let N=0;N<T;++N)C[m+N]=k[N]}b(m,T),m+=T});return e.create(l.new())}function xTt(e,{names:t=[],exprs:n=[],ops:r=[]},i={}){if(t.length===0)return e;const[s="key",o="value"]=i.as||[],a=l_(e,r,n);return cNe(e,{names:[s,o],exprs:[()=>t,(u,l)=>a.map(c=>c(u,l))]},{...i,drop:t})}function ed(e,t,n,r={window:!1}){const i=new Map,s=o=>{o=iu(o)?t.columnName(o):o,Vo(o)?i.set(o,pb(o)):gi(o)?Fm(t,o).forEach(s):xa(o)?Jke(i,o):Sn(`Invalid ${e} value: ${o+""}`)};return nl(n).forEach(s),r.preparse&&r.preparse(i),sl(i,{table:t,...r})}function STt(e,t,n){return xTt(e,ed("fold",e,t),n)}function kde(e,t,n,r){const i=n&&n.length;return TTt(i?ATt(e,n,r):e,t,i)}function TTt(e,{names:t,exprs:n,ops:r},i){const s=l_(e,r,n),o=i?null:ic(e),a=e.totalRows();return t.forEach((u,l)=>{const c=e.column(u),f=i?c.data:o.add(u,Array(a)),d=s[l];e.scan(h=>{const p=c.get(h);f[h]=Lf(p)?p:d(h)})}),i?e:e.create(o)}function ATt(e,t,n){const r=e.groups(),i=e.data(),s=(r?r.names:[]).concat(t),o=(r?r.get:[]).concat(t.map(p=>e.getter(p))),a=new Set,u=kM(o);e.scan((p,m)=>a.add(u(p,m)));const l=e.columnNames(),c=ic(),f=l.map(p=>c.add(p,[]));l.forEach((p,m)=>{const g=i[p],y=f[m];e.scan(v=>y.push(g.get(v)))});const d=kM(o.map((p,m)=>g=>g[m])),h=WS("v","{"+f.map((p,m)=>`_${m}.push(v[$${m}]);`).join("")+"}",f,l.map(p=>s.indexOf(p)));if(r){let p=r.keys.length;const m=n.reduce((y,v)=>y*v.length,r.size),g=new Uint32Array(m+(p-a.size));g.set(r.keys),Rde(r,n,(y,v)=>{a.has(d(y))||(h(y),g[p++]=v[0])}),c.groupby({...r,keys:g})}else Rde(r,n,p=>{a.has(d(p))||h(p)});return e.create(c.new())}function Rde(e,t,n){const r=e?e.get.length:0,i=e?1:0,s=i+t.length,o=new Int32Array(s),a=new Int32Array(s),u=[];if(e){const{get:c,rows:f,size:d}=e;o[0]=d,u.push((h,p)=>{const m=f[p];for(let g=0;g<r;++g)h[g]=c[g](m)})}t.forEach((c,f)=>{const d=f+r;o[f+i]=c.length,u.push((h,p)=>h[d]=c[p])});const l=Array(r+t.length);for(let c=0;c<s;++c)u[c](l,0);n(l,a);for(let c=s-1;c>=0;){const f=++a[c];f<o[c]?(u[c](l,f),n(l,a),c=s-1):(a[c]=0,u[c](l,0),--c)}}function bJ(e,{names:t,exprs:n,ops:r}){const i=ic(),s=e.groups();return s&&aNe(i,s),CTt(t,n,s,GS(e,r),i),e.create(i.new())}function CTt(e,t,n,r=[],i){if(!t.length)return;const s=n?n.size:1,o=(u,l)=>r[u][l],a=e.length;for(let u=0;u<a;++u){const l=t[u];if(l.field!=null)i.add(e[u],r[l.field]);else if(s>1){const c=i.add(e[u],Array(s));for(let f=0;f<s;++f)c[f]=l(f,null,o)}else i.add(e[u],[l(0,null,o)])}}function ITt(e,t,n={}){if(t=sl(t,{table:e}),t.names.forEach(r=>e.column(r)?0:Sn(`Invalid impute column ${Oh(r)}`)),n.expand){const r={preparse:kTt,aggronly:!0},i=ed("impute",e,n.expand,r),s=bJ(e.ungroup(),i);return kde(e,t,i.names,i.names.map(o=>s.get(o,0)))}else return kde(e,t)}function kTt(e){e.forEach((t,n)=>t.field?e.set(n,A2e(t+"")):0)}function RTt(e,t){const n=e.columnNames();return t.length?t.reduce((r,i)=>r.semijoin(i.select(n)),e).dedupe():e.reify([])}function fNe(e,t){const n=new Map;return e.scan((r,i)=>{const s=t(r,i);s!=null&&s===s&&n.set(s,r)}),n}function NTt(e,t,n){const r=new Map,i=e.length;for(let s=0;s<i;++s){const o=e[s],a=n(o,t);a!=null&&a===a&&(r.has(a)?r.get(a).push(s):r.set(a,[s]))}return r}function PTt(e,t){const n=["i","a","j","b"];return WS(n,"{"+sR(e,(r,i)=>`_${i}.push($${i}(${n}));`)+"}",e,t)}function OTt(e,t,n,{names:r,exprs:i},s={}){const o=e.data(),a=e.indices(!1),u=a.length,l=new Int32Array(u),c=t.data(),f=t.indices(!1),d=f.length,h=new Int32Array(d),p=r.length,m=ic(),g=Array(p),y=Array(p);for(let w=0;w<r.length;++w)g[w]=m.add(r[w],[]),y[w]=i[w];const v=PTt(g,y);if((pr(n)?$Tt:DTt)(v,n,o,c,a,f,l,h,u,d),s.left)for(let w=0;w<u;++w)l[w]||v(a[w],o,-1,c);if(s.right)for(let w=0;w<d;++w)h[w]||v(-1,o,f[w],c);return e.create(m.new())}function DTt(e,t,n,r,i,s,o,a,u,l){for(let c=0;c<u;++c){const f=i[c];for(let d=0;d<l;++d){const h=s[d];t(f,n,h,r)&&(e(f,n,h,r),o[c]=1,a[d]=1)}}}function $Tt(e,[t,n],r,i,s,o,a,u,l,c){let f,d,h,p,m,g,y,v,b=e;l>=c?(f=r,d=t,h=a,p=s,m=i,g=n,y=u,v=o):(f=i,d=n,h=u,p=o,m=r,g=t,y=a,v=s,b=(T,S,A,C)=>e(A,C,T,S));const w=NTt(v,m,g),E=p.length;for(let T=0;T<E;++T){const S=p[T],A=w.get(d(S,f));if(A){const C=A.length;for(let k=0;k<C;++k){const N=A[k];b(S,f,v[N],m),y[N]=1}h[T]=1}}}function ZM(e,t,n){const r=new Map;nl(n).forEach((s,o)=>{s=iu(s)?t.columnName(s):s,Vo(s)?r.set(o,pb(s)):gi(s)||xa(s)&&s.expr?r.set(o,s):Sn(`Invalid ${e} key value: ${s+""}`)});const i=sl(r,{table:t,aggregate:!1,window:!1});return kM(i.exprs,!0)}function MTt(e,t){const n=new Set(t);return e.filter(r=>n.has(r))}function _J(e,t,n){if(n)Vo(n)?n=[n,n]:pr(n)&&n.length===1&&(n=[n[0],n[0]]);else{const r=MTt(e.columnNames(),t.columnNames());r.length||Sn("Natural join requires shared column names."),n=[r,r]}return n}function dNe(e,t,n,r){return n.length!==r.length&&Sn("Mismatched number of join keys"),[ZM("join",e,n),ZM("join",t,r)]}const LTt={aggregate:!1,window:!1},FTt={...LTt,index:1};function Nde(e,t,n,r,i={}){n=_J(e,t,n);const s={join:[e,t]};let o;if(pr(n)){const[a,u]=n.map(nl);o=dNe(e,t,a,u),r||(r=jTt(e,a,u,i))}else o=sl({on:n},s).exprs[0],r||(r=[Sx(),Sx()]);return OTt(e,t,o,BTt(e,t,r,s,i&&i.suffix),i)}function jTt(e,t,n,r){const i=[];t.forEach((o,a)=>Vo(o)&&o===n[a]?i.push(o):0);const s=eRe(i);if(r.left&&r.right){const o=new Set(i);return[e.columnNames().map(a=>{const u=`[${Oh(a)}]`;return o.has(a)?{[a]:`(a, b) => a${u} == null ? b${u} : a${u}`}:a}),s]}return r.right?[s,Sx()]:[Sx(),s]}function BTt(e,t,n,r,i=[]){if(pr(n)){let s,o,a,u=n.length;s=o=a={names:[],exprs:[]},u--&&(s=ed("join",e,n[0],r)),u--&&(o=ed("join",t,n[1],FTt)),u--&&(a=sl(n[2],r));const l=new Set,c=new Set(s.names);return o.names.forEach(f=>{c.has(f)&&l.add(f)}),l.size&&(i[0]!==""&&Pde(s.names,l,i[0]||"_1"),i[1]!==""&&Pde(o.names,l,i[1]||"_2")),{names:s.names.concat(o.names,a.names),exprs:s.exprs.concat(o.exprs,a.exprs)}}else return sl(n,r)}function Pde(e,t,n){e.forEach((r,i)=>t.has(r)?e[i]=r+n:0)}function UTt(e,t,n,r={}){const i=new lNe(e.totalRows());return(pr(n)?zTt:VTt)(i,e,t,n),r.anti&&i.not().and(e.mask()),e.create({filter:i})}function zTt(e,t,n,[r,i]){const s=fNe(n,i);t.scan((o,a)=>{s.get(r(o,a))>=0&&e.set(o)})}function VTt(e,t,n,r){const i=t.numRows(),s=n.numRows(),o=t.data(),a=n.data();if(t.isFiltered()||n.isFiltered()){const u=t.indices(!1),l=n.indices(!1);for(let c=0;c<i;++c){const f=u[c];for(let d=0;d<s;++d)if(r(f,o,l[d],a)){e.set(f);break}}}else for(let u=0;u<i;++u)for(let l=0;l<s;++l)if(r(u,o,l,a)){e.set(u);break}}function Ode(e,t,n,r){n=_J(e,t,n);const i=pr(n)?dNe(e,t,...n.map(nl)):sl({on:n},{join:[e,t]}).exprs[0];return UTt(e,t,i,r)}function HTt(e,t,[n,r],{names:i,exprs:s,ops:o}){const a=ic(e),u=e.totalRows();i.forEach(d=>a.add(d,Array(u).fill(lr)));const l=fNe(t,r),c=WS(["lr","rr","data"],"{"+sR(i,(d,h)=>`_[${h}][lr] = $[${h}](rr, data);`)+"}",i.map(d=>a.data[d]),l_(t,o,s)),f=t.data();return e.scan((d,h)=>{const p=l.get(n(d,h));p>=0&&c(d,p,f)}),e.create(a)}function qTt(e,t,n,r){return n=_J(e,t,n),HTt(e,t,[ZM("lookup",e,n[0]),ZM("lookup",t,n[1])],ed("lookup",t,r))}const UV=(e,t)=>e??t;function WTt(e,t,n,r={}){const{keys:i,keyColumn:s}=GTt(e,t,r),o=UV(r.valueSeparator,"_"),a=n.names.length>1?(l,c)=>c+o+i[l]:l=>i[l],u=i.map(l=>GS(e,n.ops.map(c=>{if(c.name==="count"){const d=h=>l===s[h]?1:NaN;return d.toString=()=>l+":1",{...c,name:"sum",fields:[d]}}const f=c.fields.map(d=>{const h=(p,m)=>l===s[p]?d(p,m):NaN;return h.toString=()=>l+":"+d,h});return{...c,fields:f}})));return e.create(YTt(n,a,e.groups(),u))}function GTt(e,t,n){const r=n.limit>0?+n.limit:1/0,i=UV(n.sort,!0),s=UV(n.keySeparator,"_"),o=l_(e,t.ops,t.exprs),a=o.length===1?o[0]:(f,d)=>o.map(h=>h(f,d)).join(s),u=Array(e.totalRows());e.scan((f,d)=>u[f]=a(f,d));const l=GS(e.ungroup(),[{id:0,name:"array_agg_distinct",fields:[f=>u[f]],params:[]}])[0][0],c=i?l.sort():l;return{keys:Number.isFinite(r)?c.slice(0,r):c,keyColumn:u}}function YTt({names:e,exprs:t},n,r,i){const s=r?r.size:1,o=ic(),a=i.length,u=e.length;let l;const c=(f,d)=>l[f][d];r&&aNe(o,r);for(let f=0;f<u;++f){const d=t[f];if(d.field!=null)for(let h=0;h<a;++h)o.add(n(h,e[f]),i[h][d.field]);else if(s>1)for(let h=0;h<a;++h){l=i[h];const p=o.add(n(h,e[f]),Array(s));for(let m=0;m<s;++m)p[m]=d(m,null,c)}else for(let h=0;h<a;++h)l=i[h],o.add(n(h,e[f]),[d(0,null,c)])}return o.new()}function KTt(e,t,n,r){return WTt(e,ed("fold",e,t),ed("fold",e,n,{preparse:XTt,aggronly:!0}),r)}function XTt(e){e.forEach((t,n)=>t.field?e.set(n,x2e(t+"")):0)}function QTt(e,t){const n=new Map;return e.columnNames(r=>(n.set(r,r),0)),mJ(e,Fm(e,t,n))}function Dde(e,t){return bJ(e,sl(t,{table:e,aggronly:!0,window:!1}))}function JTt(e,t,n,r){return(t?r?eAt:ZTt:r?nAt:tAt)(e.length,e,n,r)}function ZTt(e,t,n){const r=n.length;for(let i=0;i<e;++i)t[i]=n[r*LS()|0];return t}function eAt(e,t,n,r){const i=n.length,s=new Float64Array(i);let o=0;for(let u=0;u<i;++u)s[u]=o+=r(n[u]);const a=uNe(gJ).right;for(let u=0;u<e;++u)t[u]=n[a(s,o*LS())];return t}function tAt(e,t,n){const r=n.length;if(e>=r)return n;for(let i=0;i<e;++i)t[i]=n[i];for(let i=e;i<r;++i){const s=i*LS();s<e&&(t[s|0]=n[i])}return t}function nAt(e,t,n,r){const i=n.length;if(e>=i)return n;const s=new Float32Array(i),o=new Uint32Array(i);for(let a=0;a<i;++a)o[a]=a,s[a]=-Math.log(LS())/r(n[a]);o.sort((a,u)=>s[a]-s[u]);for(let a=0;a<e;++a)t[a]=n[o[a]];return t}function rAt(e,t=0,n=e.length){let r=n-(t=+t);for(;r;){const i=LS()*r--|0,s=e[r+t];e[r+t]=e[i+t],e[i+t]=s}return e}function iAt(e,t,n,r={}){const{replace:i,shuffle:s}=r,o=e.partitions(!1);let a=0;t=o.map((c,f)=>{let d=t(f);return a+=d=i?d:Math.min(c.length,d),d});const u=new Uint32Array(a);let l=0;return o.forEach((c,f)=>{const d=t[f],h=u.subarray(l,l+=d);!i&&d===c.length?h.set(c):JTt(h,i,c,n)}),s!==!1&&(o.length>1||!i)&&rAt(u),e.reify(u)}function sAt(e,t,n={}){return iAt(e,oAt(e,t),aAt(e,n.weight),n)}const hNe=e=>t=>e.get(t)||0;function oAt(e,t){return iu(t)?()=>t:hNe(bJ(e,sl({size:t},{table:e,window:!1})).column("size"))}function aAt(e,t){return t==null?null:(t=iu(t)?e.columnName(t):t,hNe(Vo(t)?e.column(t):vJ(e,sl({w:t},{table:e}),{drop:!0}).column("w")))}function uAt(e,t){return mJ(e,Fm(e,t))}function lAt(e,{names:t,exprs:n,ops:r=[]},i={}){if(t.length===0)return e;const s=t.length===1&&i.as||[],o=i.drop==null?!0:!!i.drop,a=i.limit==null?s.length||1/0:Math.max(1,+i.limit||1),u=l_(e,r,n),l=ic(),c=t.reduce((d,h,p)=>d.set(h,p),new Map),f=(d,h)=>{const p=cAt(e,u[d],a),m=p.length;for(let g=0;g<m;++g)l.add(s[g]||`${h}_${g+1}`,p[g])};return e.columnNames().forEach(d=>{c.has(d)?(o||l.add(d,e.column(d)),f(c.get(d),d),c.delete(d)):l.add(d,e.column(d))}),c.forEach(f),e.create(l)}function cAt(e,t,n){const r=e.totalRows(),i=[];return e.scan((s,o)=>{const a=nl(t(s,o)),u=Math.min(a.length,n);for(;i.length<u;)i.push(Array(r).fill(lr));for(let l=0;l<u;++l)i[l][s]=a[l]}),i}function fAt(e,t,n){return lAt(e,ed("spread",e,t),n)}function dAt(e,t){return e.concat(t).dedupe()}function hAt(e,t,n){return cNe(e,ed("unroll",e,t),n&&n.drop?{...n,drop:ed("unroll",e,n.drop).names}:n)}function pAt(e,t){return e.create({groups:mAt(e,t)})}function mAt(e,{names:t=[],exprs:n=[],ops:r=[]}){const i=t.length;if(i===0)return null;if(i===1&&!e.isFiltered()&&n[0].field){const h=e.column(n[0].field);if(h.groups)return h.groups(t)}let s=l_(e,r,n);const o=kM(s),a=e.totalRows(),u=new Uint32Array(a),l={},c=[],f=e.data(),d=e.mask();if(d)for(let h=d.next(0);h>=0;h=d.next(h+1)){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}else for(let h=0;h<a;++h){const p=o(h,f)+"",m=l[p];u[h]=m??(l[p]=c.push(h)-1)}return r.length||(s=s.map(h=>p=>h(p,f))),{keys:u,get:s,names:t,rows:c,size:c.length}}function gAt(e,t){return pAt(e,ed("groupby",e,t))}function yAt(e,t){return e.create({order:t})}const vAt=(e,t,n,r)=>`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
    : (u > v || v == null) && u != null ? ${r}
    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
    : v !== v && u === u ? ${r} : `;function bAt(e,t){const n=[],r=[],i=[];let s=null,o="0",a="0";e.isGrouped()&&(s=e.groups().keys,o="ka",a="kb");const{ops:u}=sl(t,{table:e,value:(h,p)=>{if(n.push(h),p.escape){const m=g=>`fn[${i.length}](${g}, data)`;r.push([m("a"),m("b")]),i.push(p.escape)}else r.push([IM(p,{index:"a",op:o}),IM(p,{index:"b",op:a})])},window:!1}),l=GS(e,u),c=(h,p)=>l[h][p],f=n.length;let d="return (a, b) => {"+(c&&e.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let h=0;h<f;++h){const p=t.get(n[h]).desc?-1:1,[m,g]=r[h];d+=vAt(m,g,-p,p)}return d+="0;};",Function("op","keys","fn","data",d)(c,s,i,e.data())}function _At(e,t){return yAt(e,wAt(e,t))}function wAt(e,t){let n=-1;const r=new Map,i=s=>r.set(++n+"",s);return t.forEach(s=>{const o=s.expr!=null?s.expr:s;if(xa(o)&&!gi(o))for(const a in o)i(o[a]);else i(iu(o)?pb(s,e.columnName(o)):Vo(o)?pb(s):gi(o)?s:Sn(`Invalid orderby field: ${s+""}`))}),bAt(e,r)}function EAt(e,t){const n=e.numRows(),r=n+t.reduce((o,a)=>o+a.numRows(),0);if(n===r)return e;const i=[e,...t],s=ic();return e.columnNames().forEach(o=>{const a=Array(r);let u=0;i.forEach(l=>{const c=l.column(o)||{get:()=>lr};l.scan(f=>a[u++]=c.get(f))}),s.add(o,a)}),e.create(s.new())}function xAt(e,t){const n=ic(),r=e.groups(),{get:i,names:s=[],rows:o,size:a=1}=r||{},u=new Uint32Array(a+1);s.forEach(d=>n.add(d,null));const l=r?oNe(e,t,r):[sNe(e,t)];t.outputs().map(d=>n.add(d,[]));const c=u.length-1;let f=0;for(let d=0;d<c;++d)f+=u[d+1]=t.write(l[d],n.data,u[d]);if(r){const d=e.data();s.forEach((h,p)=>{const m=n.data[h]=Array(f),g=i[p];for(let y=0,v=0;y<a;++y)m.fill(g(o[y],d),v,v+=u[y+1])})}return e.create(n.new())}function SAt(e){return e.isGrouped()?e.create({groups:null}):e}function TAt(e){return e.isOrdered()?e.create({order:null}):e}const AAt={__antijoin:(e,t,n)=>Ode(e,t,n,{anti:!0}),__count:(e,t={})=>Dde(e,{[t.as||"count"]:S2e()}),__cross:(e,t,n,r)=>Nde(e,t,()=>!0,n,{...r,left:!0,right:!0}),__concat:EAt,__dedupe:ZSt,__derive:vTt,__except:bTt,__filter:ETt,__fold:STt,__impute:ITt,__intersect:RTt,__join:Nde,__lookup:qTt,__pivot:KTt,__relocate:rNe,__rename:QTt,__rollup:Dde,__sample:sAt,__select:uAt,__semijoin:Ode,__spread:fAt,__union:dAt,__unroll:hAt,__groupby:gAt,__orderby:_At,__ungroup:SAt,__unorder:TAt,__reduce:xAt};Object.assign(qp.prototype,AAt);function CAt(e,t){return qp.from(e,t)}function YB(e){return WF(e,{escape:!0,toString(){Sn("Escaped values can not be serialized.")}})}qp.prototype;function Nf(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(i){return"'"+i+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function py(e){return!!e&&!!e[Ei]}function Um(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===MAt}(e)||Array.isArray(e)||!!e[Ude]||!!(!((t=e.constructor)===null||t===void 0)&&t[Ude])||wJ(e)||EJ(e))}function mb(e,t,n){n===void 0&&(n=!1),YS(e)===0?(n?Object.keys:xE)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function YS(e){var t=e[Ei];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:wJ(e)?2:EJ(e)?3:0}function EE(e,t){return YS(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function IAt(e,t){return YS(e)===2?e.get(t):e[t]}function pNe(e,t,n){var r=YS(e);r===2?e.set(t,n):r===3?e.add(n):e[t]=n}function mNe(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function wJ(e){return DAt&&e instanceof Map}function EJ(e){return $At&&e instanceof Set}function Kv(e){return e.o||e.t}function xJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=yNe(e);delete t[Ei];for(var n=xE(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function SJ(e,t){return t===void 0&&(t=!1),TJ(e)||py(e)||!Um(e)||(YS(e)>1&&(e.set=e.add=e.clear=e.delete=kAt),Object.freeze(e),t&&mb(e,function(n,r){return SJ(r,!0)},!0)),e}function kAt(){Nf(2)}function TJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function mh(e){var t=qV[e];return t||Nf(18,e),t}function RAt(e,t){qV[e]||(qV[e]=t)}function zV(){return II}function KB(e,t){t&&(mh("Patches"),e.u=[],e.s=[],e.v=t)}function e3(e){VV(e),e.p.forEach(NAt),e.p=null}function VV(e){e===II&&(II=e.l)}function $de(e){return II={p:[],l:II,h:e,m:!0,_:0}}function NAt(e){var t=e[Ei];t.i===0||t.i===1?t.j():t.g=!0}function XB(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.O||mh("ES5").S(t,e,r),r?(n[Ei].P&&(e3(t),Nf(4)),Um(e)&&(e=t3(t,e),t.l||n3(t,e)),t.u&&mh("Patches").M(n[Ei].t,e,t.u,t.s)):e=t3(t,n,[]),e3(t),t.u&&t.v(t.u,t.s),e!==gNe?e:void 0}function t3(e,t,n){if(TJ(t))return t;var r=t[Ei];if(!r)return mb(t,function(a,u){return Mde(e,r,t,a,u,n)},!0),t;if(r.A!==e)return t;if(!r.P)return n3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=xJ(r.k):r.o,s=i,o=!1;r.i===3&&(s=new Set(i),i.clear(),o=!0),mb(s,function(a,u){return Mde(e,r,i,a,u,n,o)}),n3(e,i,!1),n&&e.u&&mh("Patches").N(r,n,e.u,e.s)}return r.o}function Mde(e,t,n,r,i,s,o){if(py(i)){var a=t3(e,i,s&&t&&t.i!==3&&!EE(t.R,r)?s.concat(r):void 0);if(pNe(n,r,a),!py(a))return;e.m=!1}else o&&n.add(i);if(Um(i)&&!TJ(i)){if(!e.h.D&&e._<1)return;t3(e,i),t&&t.A.l||n3(e,i)}}function n3(e,t,n){n===void 0&&(n=!1),!e.l&&e.h.D&&e.m&&SJ(t,n)}function QB(e,t){var n=e[Ei];return(n?Kv(n):e)[t]}function Lde(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function Zg(e){e.P||(e.P=!0,e.l&&Zg(e.l))}function JB(e){e.o||(e.o=xJ(e.t))}function HV(e,t,n){var r=wJ(t)?mh("MapSet").F(t,n):EJ(t)?mh("MapSet").T(t,n):e.O?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:zV(),P:!1,I:!1,R:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=kI;o&&(u=[a],l=tC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):mh("ES5").J(t,n);return(n?n.A:zV()).p.push(r),r}function PAt(e){return py(e)||Nf(22,e),function t(n){if(!Um(n))return n;var r,i=n[Ei],s=YS(n);if(i){if(!i.P&&(i.i<4||!mh("ES5").K(i)))return i.t;i.I=!0,r=Fde(n,s),i.I=!1}else r=Fde(n,s);return mb(r,function(o,a){i&&IAt(i.t,o)===a||pNe(r,o,t(a))}),s===3?new Set(r):r}(e)}function Fde(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return xJ(e)}function OAt(){function e(s,o){var a=i[s];return a?a.enumerable=o:i[s]=a={configurable:!0,enumerable:o,get:function(){var u=this[Ei];return kI.get(u,s)},set:function(u){var l=this[Ei];kI.set(l,s,u)}},a}function t(s){for(var o=s.length-1;o>=0;o--){var a=s[o][Ei];if(!a.P)switch(a.i){case 5:r(a)&&Zg(a);break;case 4:n(a)&&Zg(a)}}}function n(s){for(var o=s.t,a=s.k,u=xE(a),l=u.length-1;l>=0;l--){var c=u[l];if(c!==Ei){var f=o[c];if(f===void 0&&!EE(o,c))return!0;var d=a[c],h=d&&d[Ei];if(h?h.t!==f:!mNe(d,f))return!0}}var p=!!o[Ei];return u.length!==xE(o).length+(p?0:1)}function r(s){var o=s.k;if(o.length!==s.t.length)return!0;var a=Object.getOwnPropertyDescriptor(o,o.length-1);if(a&&!a.get)return!0;for(var u=0;u<o.length;u++)if(!o.hasOwnProperty(u))return!0;return!1}var i={};RAt("ES5",{J:function(s,o){var a=Array.isArray(s),u=function(c,f){if(c){for(var d=Array(f.length),h=0;h<f.length;h++)Object.defineProperty(d,""+h,e(h,!0));return d}var p=yNe(f);delete p[Ei];for(var m=xE(p),g=0;g<m.length;g++){var y=m[g];p[y]=e(y,c||!!p[y].enumerable)}return Object.create(Object.getPrototypeOf(f),p)}(a,s),l={i:a?5:4,A:o?o.A:zV(),P:!1,I:!1,R:{},l:o,t:s,k:u,o:null,g:!1,C:!1};return Object.defineProperty(u,Ei,{value:l,writable:!0}),u},S:function(s,o,a){a?py(o)&&o[Ei].A===s&&t(s.p):(s.u&&function u(l){if(l&&typeof l=="object"){var c=l[Ei];if(c){var f=c.t,d=c.k,h=c.R,p=c.i;if(p===4)mb(d,function(b){b!==Ei&&(f[b]!==void 0||EE(f,b)?h[b]||u(d[b]):(h[b]=!0,Zg(c)))}),mb(f,function(b){d[b]!==void 0||EE(d,b)||(h[b]=!1,Zg(c))});else if(p===5){if(r(c)&&(Zg(c),h.length=!0),d.length<f.length)for(var m=d.length;m<f.length;m++)h[m]=!1;else for(var g=f.length;g<d.length;g++)h[g]=!0;for(var y=Math.min(d.length,f.length),v=0;v<y;v++)d.hasOwnProperty(v)||(h[v]=!0),h[v]===void 0&&u(d[v])}}}}(s.p[0]),t(s.p))},K:function(s){return s.i===4?n(s):r(s)}})}var jde,II,AJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",DAt=typeof Map<"u",$At=typeof Set<"u",Bde=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",gNe=AJ?Symbol.for("immer-nothing"):((jde={})["immer-nothing"]=!0,jde),Ude=AJ?Symbol.for("immer-draftable"):"__$immer_draftable",Ei=AJ?Symbol.for("immer-state"):"__$immer_state",MAt=""+Object.prototype.constructor,xE=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,yNe=Object.getOwnPropertyDescriptors||function(e){var t={};return xE(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},qV={},kI={get:function(e,t){if(t===Ei)return e;var n=Kv(e);if(!EE(n,t))return function(i,s,o){var a,u=Lde(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!Um(r)?r:r===QB(e.t,t)?(JB(e),e.o[t]=HV(e.A.h,r,e)):r},has:function(e,t){return t in Kv(e)},ownKeys:function(e){return Reflect.ownKeys(Kv(e))},set:function(e,t,n){var r=Lde(Kv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=QB(Kv(e),t),s=i==null?void 0:i[Ei];if(s&&s.t===n)return e.o[t]=n,e.R[t]=!1,!0;if(mNe(n,i)&&(n!==void 0||EE(e.t,t)))return!0;JB(e),Zg(e)}return e.o[t]===n&&(n!==void 0||t in e.o)||Number.isNaN(n)&&Number.isNaN(e.o[t])||(e.o[t]=n,e.R[t]=!0),!0},deleteProperty:function(e,t){return QB(e.t,t)!==void 0||t in e.t?(e.R[t]=!1,JB(e),Zg(e)):delete e.R[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Kv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Nf(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Nf(12)}},tC={};mb(kI,function(e,t){tC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),tC.deleteProperty=function(e,t){return tC.set.call(this,e,t,void 0)},tC.set=function(e,t,n){return kI.set.call(this,e[0],t,n,e[0])};var LAt=function(){function e(n){var r=this;this.O=Bde,this.D=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Nf(6),o!==void 0&&typeof o!="function"&&Nf(7),Um(i)){var c=$de(r),f=HV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?e3(c):VV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return KB(c,o),XB(m,c)},function(m){throw e3(c),m}):(KB(c,o),XB(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===gNe&&(l=void 0),r.D&&SJ(l,!0),o){var h=[],p=[];mh("Patches").M(i,l,h,p),o(h,p)}return l}Nf(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){Um(n)||Nf(8),py(n)&&(n=PAt(n));var r=$de(this),i=HV(this,n,void 0);return i[Ei].C=!0,VV(r),i},t.finishDraft=function(n,r){var i=n&&n[Ei],s=i.A;return KB(s,r),XB(void 0,s)},t.setAutoFreeze=function(n){this.D=n},t.setUseProxies=function(n){n&&!Bde&&Nf(20),this.O=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=mh("Patches").$;return py(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Wl=new LAt,FAt=Wl.produce;Wl.produceWithPatches.bind(Wl);Wl.setAutoFreeze.bind(Wl);Wl.setUseProxies.bind(Wl);Wl.applyPatches.bind(Wl);Wl.createDraft.bind(Wl);Wl.finishDraft.bind(Wl);const vNe=FAt;function RI(e){"@babel/helpers - typeof";return RI=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},RI(e)}function jAt(e,t){if(RI(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(RI(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function BAt(e){var t=jAt(e,"string");return RI(t)=="symbol"?t:t+""}function UAt(e,t,n){return(t=BAt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zde(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function Vde(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zde(Object(n),!0).forEach(function(r){UAt(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zde(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function aa(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var Hde=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}(),ZB=function(){return Math.random().toString(36).substring(7).split("").join(".")},r3={INIT:"@@redux/INIT"+ZB(),REPLACE:"@@redux/REPLACE"+ZB(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+ZB()}};function zAt(e){if(typeof e!="object"||e===null)return!1;for(var t=e;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}function bNe(e,t,n){var r;if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(aa(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(aa(1));return n(bNe)(e,t)}if(typeof e!="function")throw new Error(aa(2));var i=e,s=t,o=[],a=o,u=!1;function l(){a===o&&(a=o.slice())}function c(){if(u)throw new Error(aa(3));return s}function f(m){if(typeof m!="function")throw new Error(aa(4));if(u)throw new Error(aa(5));var g=!0;return l(),a.push(m),function(){if(g){if(u)throw new Error(aa(6));g=!1,l();var v=a.indexOf(m);a.splice(v,1),o=null}}}function d(m){if(!zAt(m))throw new Error(aa(7));if(typeof m.type>"u")throw new Error(aa(8));if(u)throw new Error(aa(9));try{u=!0,s=i(s,m)}finally{u=!1}for(var g=o=a,y=0;y<g.length;y++){var v=g[y];v()}return m}function h(m){if(typeof m!="function")throw new Error(aa(10));i=m,d({type:r3.REPLACE})}function p(){var m,g=f;return m={subscribe:function(v){if(typeof v!="object"||v===null)throw new Error(aa(11));function b(){v.next&&v.next(c())}b();var w=g(b);return{unsubscribe:w}}},m[Hde]=function(){return this},m}return d({type:r3.INIT}),r={dispatch:d,subscribe:f,getState:c,replaceReducer:h},r[Hde]=p,r}function VAt(e){Object.keys(e).forEach(function(t){var n=e[t],r=n(void 0,{type:r3.INIT});if(typeof r>"u")throw new Error(aa(12));if(typeof n(void 0,{type:r3.PROBE_UNKNOWN_ACTION()})>"u")throw new Error(aa(13))})}function HAt(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];typeof e[i]=="function"&&(n[i]=e[i])}var s=Object.keys(n),o;try{VAt(n)}catch(a){o=a}return function(u,l){if(u===void 0&&(u={}),o)throw o;for(var c=!1,f={},d=0;d<s.length;d++){var h=s[d],p=n[h],m=u[h],g=p(m,l);if(typeof g>"u")throw l&&l.type,new Error(aa(14));f[h]=g,c=c||g!==m}return c=c||s.length!==Object.keys(u).length,c?f:u}}function i3(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.length===0?function(r){return r}:t.length===1?t[0]:t.reduce(function(r,i){return function(){return r(i.apply(void 0,arguments))}})}function qAt(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){return function(){var i=r.apply(void 0,arguments),s=function(){throw new Error(aa(15))},o={getState:i.getState,dispatch:function(){return s.apply(void 0,arguments)}},a=t.map(function(u){return u(o)});return s=i3.apply(void 0,a)(i.dispatch),Vde(Vde({},i),{},{dispatch:s})}}}function _Ne(e){var t=function(r){var i=r.dispatch,s=r.getState;return function(o){return function(a){return typeof a=="function"?a(i,s,e):o(a)}}};return t}var WV=_Ne();WV.withExtraArgument=_Ne;var wNe=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},e(t,n)};return function(t,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),oR=function(e,t){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:a(0),throw:a(1),return:a(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function a(l){return function(c){return u([l,c])}}function u(l){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=l[0]&2?i.return:l[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,l[1])).done)return s;switch(i=0,s&&(l=[l[0]&2,s.value]),l[0]){case 0:case 1:s=l;break;case 4:return n.label++,{value:l[1],done:!1};case 5:n.label++,i=l[1],l=[0];continue;case 7:l=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(l[0]===6||l[0]===2)){n=0;continue}if(l[0]===3&&(!s||l[1]>s[0]&&l[1]<s[3])){n.label=l[1];break}if(l[0]===6&&n.label<s[1]){n.label=s[1],s=l;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(l);break}s[2]&&n.ops.pop(),n.trys.pop();continue}l=t.call(e,n)}catch(c){l=[6,c],i=0}finally{r=s=0}if(l[0]&5)throw l[1];return{value:l[0]?l[1]:void 0,done:!0}}},gb=function(e,t){for(var n=0,r=t.length,i=e.length;n<r;n++,i++)e[i]=t[n];return e},WAt=Object.defineProperty,GAt=Object.defineProperties,YAt=Object.getOwnPropertyDescriptors,qde=Object.getOwnPropertySymbols,KAt=Object.prototype.hasOwnProperty,XAt=Object.prototype.propertyIsEnumerable,Wde=function(e,t,n){return t in e?WAt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n},$0=function(e,t){for(var n in t||(t={}))KAt.call(t,n)&&Wde(e,n,t[n]);if(qde)for(var r=0,i=qde(t);r<i.length;r++){var n=i[r];XAt.call(t,n)&&Wde(e,n,t[n])}return e},e9=function(e,t){return GAt(e,YAt(t))},aR=function(e,t,n){return new Promise(function(r,i){var s=function(u){try{a(n.next(u))}catch(l){i(l)}},o=function(u){try{a(n.throw(u))}catch(l){i(l)}},a=function(u){return u.done?r(u.value):Promise.resolve(u.value).then(s,o)};a((n=n.apply(e,t)).next())})},QAt=typeof window<"u"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?i3:i3.apply(null,arguments)};function ENe(e){if(typeof e!="object"||e===null)return!1;var t=Object.getPrototypeOf(e);if(t===null)return!0;for(var n=t;Object.getPrototypeOf(n)!==null;)n=Object.getPrototypeOf(n);return t===n}var JAt=function(e){return e&&typeof e.match=="function"};function gh(e,t){function n(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];if(t){var s=t.apply(void 0,r);if(!s)throw new Error("prepareAction did not return an object");return $0($0({type:e,payload:s.payload},"meta"in s&&{meta:s.meta}),"error"in s&&{error:s.error})}return{type:e,payload:r[0]}}return n.toString=function(){return""+e},n.type=e,n.match=function(r){return r.type===e},n}function ZAt(e){return ENe(e)&&"type"in e}var eCt=function(e){wNe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,gb([void 0],n[0].concat(this)))):new(t.bind.apply(t,gb([void 0],n.concat(this))))},t}(Array),tCt=function(e){wNe(t,e);function t(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];var i=e.apply(this,n)||this;return Object.setPrototypeOf(i,t.prototype),i}return Object.defineProperty(t,Symbol.species,{get:function(){return t},enumerable:!1,configurable:!0}),t.prototype.concat=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.prototype.concat.apply(this,n)},t.prototype.prepend=function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return n.length===1&&Array.isArray(n[0])?new(t.bind.apply(t,gb([void 0],n[0].concat(this)))):new(t.bind.apply(t,gb([void 0],n.concat(this))))},t}(Array);function GV(e){return Um(e)?vNe(e,function(){}):e}function nCt(e){return typeof e=="boolean"}function rCt(){return function(t){return iCt(t)}}function iCt(e){e===void 0&&(e={});var t=e.thunk,n=t===void 0?!0:t;e.immutableCheck,e.serializableCheck,e.actionCreatorCheck;var r=new eCt;return n&&(nCt(n)?r.push(WV):r.push(WV.withExtraArgument(n.extraArgument))),r}var sCt=!0;function oCt(e){var t=rCt(),n=e||{},r=n.reducer,i=r===void 0?void 0:r,s=n.middleware,o=s===void 0?t():s,a=n.devTools,u=a===void 0?!0:a,l=n.preloadedState,c=l===void 0?void 0:l,f=n.enhancers,d=f===void 0?void 0:f,h;if(typeof i=="function")h=i;else if(ENe(i))h=HAt(i);else throw new Error('"reducer" is a required argument, and must be a function or an object of functions that can be passed to combineReducers');var p=o;typeof p=="function"&&(p=p(t));var m=qAt.apply(void 0,p),g=i3;u&&(g=QAt($0({trace:!sCt},typeof u=="object"&&u)));var y=new tCt(m),v=y;Array.isArray(d)?v=gb([m],d):typeof d=="function"&&(v=d(y));var b=g.apply(void 0,v);return bNe(h,c,b)}function xNe(e){var t={},n=[],r,i={addCase:function(s,o){var a=typeof s=="string"?s:s.type;if(!a)throw new Error("`builder.addCase` cannot be called with an empty action type");if(a in t)throw new Error("`builder.addCase` cannot be called with two reducers for the same action type");return t[a]=o,i},addMatcher:function(s,o){return n.push({matcher:s,reducer:o}),i},addDefaultCase:function(s){return r=s,i}};return e(i),[t,n,r]}function aCt(e){return typeof e=="function"}function uCt(e,t,n,r){n===void 0&&(n=[]);var i=typeof t=="function"?xNe(t):[t,n,r],s=i[0],o=i[1],a=i[2],u;if(aCt(e))u=function(){return GV(e())};else{var l=GV(e);u=function(){return l}}function c(f,d){f===void 0&&(f=u());var h=gb([s[d.type]],o.filter(function(p){var m=p.matcher;return m(d)}).map(function(p){var m=p.reducer;return m}));return h.filter(function(p){return!!p}).length===0&&(h=[a]),h.reduce(function(p,m){if(m)if(py(p)){var g=p,y=m(g,d);return y===void 0?p:y}else{if(Um(p))return vNe(p,function(v){return m(v,d)});var y=m(p,d);if(y===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return y}return p},f)}return c.getInitialState=u,c}function lCt(e,t){return e+"/"+t}function cCt(e){var t=e.name;if(!t)throw new Error("`name` is a required option for createSlice");typeof process<"u";var n=typeof e.initialState=="function"?e.initialState:GV(e.initialState),r=e.reducers||{},i=Object.keys(r),s={},o={},a={};i.forEach(function(c){var f=r[c],d=lCt(t,c),h,p;"reducer"in f?(h=f.reducer,p=f.prepare):h=f,s[c]=h,o[d]=h,a[c]=p?gh(d,p):gh(d)});function u(){var c=typeof e.extraReducers=="function"?xNe(e.extraReducers):[e.extraReducers],f=c[0],d=f===void 0?{}:f,h=c[1],p=h===void 0?[]:h,m=c[2],g=m===void 0?void 0:m,y=$0($0({},d),o);return uCt(n,function(v){for(var b in y)v.addCase(b,y[b]);for(var w=0,E=p;w<E.length;w++){var T=E[w];v.addMatcher(T.matcher,T.reducer)}g&&v.addDefaultCase(g)})}var l;return{name:t,reducer:function(c,f){return l||(l=u()),l(c,f)},actions:a,caseReducers:s,getInitialState:function(){return l||(l=u()),l.getInitialState()}}}var fCt="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",SNe=function(e){e===void 0&&(e=21);for(var t="",n=e;n--;)t+=fCt[Math.random()*64|0];return t},dCt=["name","message","stack","code"],t9=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),Gde=function(){function e(t,n){this.payload=t,this.meta=n}return e}(),hCt=function(e){if(typeof e=="object"&&e!==null){for(var t={},n=0,r=dCt;n<r.length;n++){var i=r[n];typeof e[i]=="string"&&(t[i]=e[i])}return t}return{message:String(e)}};(function(){function e(t,n,r){var i=gh(t+"/fulfilled",function(l,c,f,d){return{payload:l,meta:e9($0({},d||{}),{arg:f,requestId:c,requestStatus:"fulfilled"})}}),s=gh(t+"/pending",function(l,c,f){return{payload:void 0,meta:e9($0({},f||{}),{arg:c,requestId:l,requestStatus:"pending"})}}),o=gh(t+"/rejected",function(l,c,f,d,h){return{payload:d,error:(r&&r.serializeError||hCt)(l||"Rejected"),meta:e9($0({},h||{}),{arg:f,requestId:c,rejectedWithValue:!!d,requestStatus:"rejected",aborted:(l==null?void 0:l.name)==="AbortError",condition:(l==null?void 0:l.name)==="ConditionError"})}}),a=typeof AbortController<"u"?AbortController:function(){function l(){this.signal={aborted:!1,addEventListener:function(){},dispatchEvent:function(){return!1},onabort:function(){},removeEventListener:function(){},reason:void 0,throwIfAborted:function(){}}}return l.prototype.abort=function(){},l}();function u(l){return function(c,f,d){var h=r!=null&&r.idGenerator?r.idGenerator(l):SNe(),p=new a,m;function g(v){m=v,p.abort()}var y=function(){return aR(this,null,function(){var v,b,w,E,T,S,A;return oR(this,function(C){switch(C.label){case 0:return C.trys.push([0,4,,5]),E=(v=r==null?void 0:r.condition)==null?void 0:v.call(r,l,{getState:f,extra:d}),mCt(E)?[4,E]:[3,2];case 1:E=C.sent(),C.label=2;case 2:if(E===!1||p.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};return T=new Promise(function(k,N){return p.signal.addEventListener("abort",function(){return N({name:"AbortError",message:m||"Aborted"})})}),c(s(h,l,(b=r==null?void 0:r.getPendingMeta)==null?void 0:b.call(r,{requestId:h,arg:l},{getState:f,extra:d}))),[4,Promise.race([T,Promise.resolve(n(l,{dispatch:c,getState:f,extra:d,requestId:h,signal:p.signal,abort:g,rejectWithValue:function(k,N){return new t9(k,N)},fulfillWithValue:function(k,N){return new Gde(k,N)}})).then(function(k){if(k instanceof t9)throw k;return k instanceof Gde?i(k.payload,h,l,k.meta):i(k,h,l)})])];case 3:return w=C.sent(),[3,5];case 4:return S=C.sent(),w=S instanceof t9?o(null,h,l,S.payload,S.meta):o(S,h,l),[3,5];case 5:return A=r&&!r.dispatchConditionRejection&&o.match(w)&&w.meta.condition,A||c(w),[2,w]}})})}();return Object.assign(y,{abort:g,requestId:h,arg:l,unwrap:function(){return y.then(pCt)}})}}return Object.assign(u,{pending:s,rejected:o,fulfilled:i,typePrefix:t})}return e.withTypes=function(){return e},e})();function pCt(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function mCt(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var gCt=function(e,t){return JAt(e)?e.match(t):e(t)};function Yde(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(n){return e.some(function(r){return gCt(r,n)})}}var CJ=function(e,t){if(typeof e!="function")throw new TypeError(t+" is not a function")},YV=function(){},TNe=function(e,t){return t===void 0&&(t=YV),e.catch(t),e},ANe=function(e,t){return e.addEventListener("abort",t,{once:!0}),function(){return e.removeEventListener("abort",t)}},SE=function(e,t){var n=e.signal;n.aborted||("reason"in n||Object.defineProperty(n,"reason",{enumerable:!0,value:t,configurable:!0,writable:!0}),e.abort(t))},yCt="task",CNe="listener",INe="completed",IJ="cancelled",vCt="task-"+IJ,bCt="task-"+INe,kNe=CNe+"-"+IJ,_Ct=CNe+"-"+INe,GF=function(){function e(t){this.code=t,this.name="TaskAbortError",this.message=yCt+" "+IJ+" (reason: "+t+")"}return e}(),TE=function(e){if(e.aborted)throw new GF(e.reason)};function RNe(e,t){var n=YV;return new Promise(function(r,i){var s=function(){return i(new GF(e.reason))};if(e.aborted){s();return}n=ANe(e,s),t.finally(function(){return n()}).then(r,i)}).finally(function(){n=YV})}var wCt=function(e,t){return aR(void 0,null,function(){var n,r;return oR(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,4,5]),[4,Promise.resolve()];case 1:return i.sent(),[4,e()];case 2:return n=i.sent(),[2,{status:"ok",value:n}];case 3:return r=i.sent(),[2,{status:r instanceof GF?"cancelled":"rejected",error:r}];case 4:return t==null||t(),[7];case 5:return[2]}})})},s3=function(e){return function(t){return TNe(RNe(e,t).then(function(n){return TE(e),n}))}},NNe=function(e){var t=s3(e);return function(n){return t(new Promise(function(r){return setTimeout(r,n)}))}},ECt=Object.assign,Kde={},uR="listenerMiddleware",xCt=function(e,t){var n=function(r){return ANe(e,function(){return SE(r,e.reason)})};return function(r,i){CJ(r,"taskExecutor");var s=new AbortController;n(s);var o=wCt(function(){return aR(void 0,null,function(){var a;return oR(this,function(u){switch(u.label){case 0:return TE(e),TE(s.signal),[4,r({pause:s3(s.signal),delay:NNe(s.signal),signal:s.signal})];case 1:return a=u.sent(),TE(s.signal),[2,a]}})})},function(){return SE(s,bCt)});return i!=null&&i.autoJoin&&t.push(o),{result:s3(e)(o),cancel:function(){SE(s,vCt)}}}},SCt=function(e,t){var n=function(r,i){return aR(void 0,null,function(){var s,o,a,u;return oR(this,function(l){switch(l.label){case 0:TE(t),s=function(){},o=new Promise(function(c,f){var d=e({predicate:r,effect:function(h,p){p.unsubscribe(),c([h,p.getState(),p.getOriginalState()])}});s=function(){d(),f()}}),a=[o],i!=null&&a.push(new Promise(function(c){return setTimeout(c,i,null)})),l.label=1;case 1:return l.trys.push([1,,3,4]),[4,RNe(t,Promise.race(a))];case 2:return u=l.sent(),TE(t),[2,u];case 3:return s(),[7];case 4:return[2]}})})};return function(r,i){return TNe(n(r,i))}},PNe=function(e){var t=e.type,n=e.actionCreator,r=e.matcher,i=e.predicate,s=e.effect;if(t)i=gh(t).match;else if(n)t=n.type,i=n.match;else if(r)i=r;else if(!i)throw new Error("Creating or removing a listener requires one of the known fields for matching an action");return CJ(s,"options.listener"),{predicate:i,type:t,effect:s}},TCt=function(e){var t=PNe(e),n=t.type,r=t.predicate,i=t.effect,s=SNe(),o={id:s,effect:i,type:n,predicate:r,pending:new Set,unsubscribe:function(){throw new Error("Unsubscribe not initialized")}};return o},KV=function(e){e.pending.forEach(function(t){SE(t,kNe)})},ACt=function(e){return function(){e.forEach(KV),e.clear()}},Xde=function(e,t,n){try{e(t,n)}catch(r){setTimeout(function(){throw r},0)}},CCt=gh(uR+"/add"),ICt=gh(uR+"/removeAll"),kCt=gh(uR+"/remove"),RCt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.error.apply(console,gb([uR+"/error"],e))};function NCt(e){var t=this;e===void 0&&(e={});var n=new Map,r=e.extra,i=e.onError,s=i===void 0?RCt:i;CJ(s,"onError");var o=function(h){return h.unsubscribe=function(){return n.delete(h.id)},n.set(h.id,h),function(p){h.unsubscribe(),p!=null&&p.cancelActive&&KV(h)}},a=function(h){for(var p=0,m=Array.from(n.values());p<m.length;p++){var g=m[p];if(h(g))return g}},u=function(h){var p=a(function(m){return m.effect===h.effect});return p||(p=TCt(h)),o(p)},l=function(h){var p=PNe(h),m=p.type,g=p.effect,y=p.predicate,v=a(function(b){var w=typeof m=="string"?b.type===m:b.predicate===y;return w&&b.effect===g});return v&&(v.unsubscribe(),h.cancelActive&&KV(v)),!!v},c=function(h,p,m,g){return aR(t,null,function(){var y,v,b,w;return oR(this,function(E){switch(E.label){case 0:y=new AbortController,v=SCt(u,y.signal),b=[],E.label=1;case 1:return E.trys.push([1,3,4,6]),h.pending.add(y),[4,Promise.resolve(h.effect(p,ECt({},m,{getOriginalState:g,condition:function(T,S){return v(T,S).then(Boolean)},take:v,delay:NNe(y.signal),pause:s3(y.signal),extra:r,signal:y.signal,fork:xCt(y.signal,b),unsubscribe:h.unsubscribe,subscribe:function(){n.set(h.id,h)},cancelActiveListeners:function(){h.pending.forEach(function(T,S,A){T!==y&&(SE(T,kNe),A.delete(T))})}})))];case 2:return E.sent(),[3,6];case 3:return w=E.sent(),w instanceof GF||Xde(s,w,{raisedBy:"effect"}),[3,6];case 4:return[4,Promise.allSettled(b)];case 5:return E.sent(),SE(y,_Ct),h.pending.delete(y),[7];case 6:return[2]}})})},f=ACt(n),d=function(h){return function(p){return function(m){if(!ZAt(m))return p(m);if(CCt.match(m))return u(m.payload);if(ICt.match(m)){f();return}if(kCt.match(m))return l(m.payload);var g=h.getState(),y=function(){if(g===Kde)throw new Error(uR+": getOriginalState can only be called synchronously");return g},v;try{if(v=p(m),n.size>0)for(var b=h.getState(),w=Array.from(n.values()),E=0,T=w;E<T.length;E++){var S=T[E],A=!1;try{A=S.predicate(m,b,g)}catch(C){A=!1,Xde(s,C,{raisedBy:"predicate"})}A&&c(S,m,h,y)}}finally{g=Kde}return v}}};return{middleware:d,startListening:u,stopListening:l,clearListeners:f}}var Qde;typeof queueMicrotask=="function"&&queueMicrotask.bind(typeof window<"u"?window:typeof global<"u"?global:globalThis);OAt();function PCt(){const e=new Map;return{listen(t,n){return e.has(t)||e.set(t,[]),e.get(t).push(n),()=>{e.set(t,(e.get(t)||[]).filter(r=>r!==n))}},fire(t,n){const r=e.get(t);r&&r.forEach(i=>i(n))}}}let AP;const OCt=new Uint8Array(16);function DCt(){if(!AP&&(AP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!AP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return AP(OCt)}const xo=[];for(let e=0;e<256;++e)xo.push((e+256).toString(16).slice(1));function $Ct(e,t=0){return(xo[e[t+0]]+xo[e[t+1]]+xo[e[t+2]]+xo[e[t+3]]+"-"+xo[e[t+4]]+xo[e[t+5]]+"-"+xo[e[t+6]]+xo[e[t+7]]+"-"+xo[e[t+8]]+xo[e[t+9]]+"-"+xo[e[t+10]]+xo[e[t+11]]+xo[e[t+12]]+xo[e[t+13]]+xo[e[t+14]]+xo[e[t+15]]).toLowerCase()}const MCt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),Jde={randomUUID:MCt};function Zde(e,t,n){if(Jde.randomUUID&&!t&&!e)return Jde.randomUUID();e=e||{};const r=e.random||(e.rng||DCt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,$Ct(r)}class yh{static get(){let t=Zde();for(;this.ids.has(t);)t=Zde();return this.ids.set(t,!0),t}}yh.ids=new Map;function vh(e){return"parent"in e}function LCt(e){const{label:t=void 0,state:n,initialArtifact:r,initialMetadata:i}=e,s={annotation:[],bookmark:[]},o=Object.keys(i||{}).reduce((u,l)=>(u[l]=[],i&&i[l]&&u[l].push({type:l,id:yh.get(),val:i[l],createdOn:Date.now()}),u),s),a=r?[{id:yh.get(),createdOn:Date.now(),val:r}]:[];return{id:yh.get(),label:t||"Root",event:"Root",children:[],level:0,createdOn:Date.now(),meta:o,artifacts:a,state:{type:"checkpoint",val:n}}}function FCt({parent:e,state:t,label:n,sideEffects:r={do:[],undo:[]},initialMetadata:i,initialArtifact:s,event:o}){const a={annotation:[],bookmark:[]},u=Object.keys(i||{}).reduce((c,f)=>(c[f]=[],i&&i[f]&&c[f].push({type:f,id:yh.get(),val:i[f],createdOn:Date.now()}),c),a),l=s?[{id:yh.get(),createdOn:Date.now(),val:s}]:[];return{id:yh.get(),label:n,event:o,children:[],parent:e.id,createdOn:Date.now(),meta:u,artifacts:l,sideEffects:r,state:t,level:e.level+1}}function Ki(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if({}.NODE_ENV!=="production"){var i=GCt[e],s=i?typeof i=="function"?i.apply(null,n):i:"unknown error nr: "+e;throw Error("[Immer] "+s)}throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(o){return"'"+o+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function yb(e){return!!e&&!!e[Gl]}function my(e){var t;return!!e&&(function(n){if(!n||typeof n!="object")return!1;var r=Object.getPrototypeOf(n);if(r===null)return!0;var i=Object.hasOwnProperty.call(r,"constructor")&&r.constructor;return i===Object||typeof i=="function"&&Function.toString.call(i)===YCt}(e)||Array.isArray(e)||!!e[e2]||!!(!((t=e.constructor)===null||t===void 0)&&t[e2])||YF(e)||KF(e))}function Cx(e,t,n){n===void 0&&(n=!1),gy(e)===0?(n?Object.keys:DJ)(e).forEach(function(r){n&&typeof r=="symbol"||t(r,e[r],e)}):e.forEach(function(r,i){return t(i,r,e)})}function gy(e){var t=e[Gl];return t?t.i>3?t.i-4:t.i:Array.isArray(e)?1:YF(e)?2:KF(e)?3:0}function NI(e,t){return gy(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function eD(e,t){return gy(e)===2?e.get(t):e[t]}function ONe(e,t,n){var r=gy(e);r===2?e.set(t,n):r===3?(e.delete(t),e.add(n)):e[t]=n}function jCt(e,t){return e===t?e!==0||1/e==1/t:e!=e&&t!=t}function YF(e){return qCt&&e instanceof Map}function KF(e){return WCt&&e instanceof Set}function Xv(e){return e.o||e.t}function kJ(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=KCt(e);delete t[Gl];for(var n=DJ(t),r=0;r<n.length;r++){var i=n[r],s=t[i];s.writable===!1&&(s.writable=!0,s.configurable=!0),(s.get||s.set)&&(t[i]={configurable:!0,writable:!0,enumerable:s.enumerable,value:e[i]})}return Object.create(Object.getPrototypeOf(e),t)}function RJ(e,t){return t===void 0&&(t=!1),NJ(e)||yb(e)||!my(e)||(gy(e)>1&&(e.set=e.add=e.clear=e.delete=BCt),Object.freeze(e),t&&Cx(e,function(n,r){return RJ(r,!0)},!0)),e}function BCt(){Ki(2)}function NJ(e){return e==null||typeof e!="object"||Object.isFrozen(e)}function bh(e){var t=ZV[e];return t||Ki(18,e),t}function UCt(e,t){ZV[e]||(ZV[e]=t)}function ehe(){return{}.NODE_ENV==="production"||Ix||Ki(0),Ix}function n9(e,t){t&&(bh("Patches"),e.u=[],e.s=[],e.v=t)}function o3(e){XV(e),e.p.forEach(zCt),e.p=null}function XV(e){e===Ix&&(Ix=e.l)}function the(e){return Ix={p:[],l:Ix,h:e,m:!0,_:0}}function zCt(e){var t=e[Gl];t.i===0||t.i===1?t.j():t.O=!0}function r9(e,t){t._=t.p.length;var n=t.p[0],r=e!==void 0&&e!==n;return t.h.g||bh("ES5").S(t,e,r),r?(n[Gl].P&&(o3(t),Ki(4)),my(e)&&(e=a3(t,e),t.l||u3(t,e)),t.u&&bh("Patches").M(n[Gl].t,e,t.u,t.s)):e=a3(t,n,[]),o3(t),t.u&&t.v(t.u,t.s),e!==OJ?e:void 0}function a3(e,t,n){if(NJ(t))return t;var r=t[Gl];if(!r)return Cx(t,function(s,o){return nhe(e,r,t,s,o,n)},!0),t;if(r.A!==e)return t;if(!r.P)return u3(e,r.t,!0),r.t;if(!r.I){r.I=!0,r.A._--;var i=r.i===4||r.i===5?r.o=kJ(r.k):r.o;Cx(r.i===3?new Set(i):i,function(s,o){return nhe(e,r,i,s,o,n)}),u3(e,i,!1),n&&e.u&&bh("Patches").R(r,n,e.u,e.s)}return r.o}function nhe(e,t,n,r,i,s){if({}.NODE_ENV!=="production"&&i===n&&Ki(5),yb(i)){var o=a3(e,i,s&&t&&t.i!==3&&!NI(t.D,r)?s.concat(r):void 0);if(ONe(n,r,o),!yb(o))return;e.m=!1}if(my(i)&&!NJ(i)){if(!e.h.F&&e._<1)return;a3(e,i),t&&t.A.l||u3(e,i)}}function u3(e,t,n){n===void 0&&(n=!1),e.h.F&&e.m&&RJ(t,n)}function i9(e,t){var n=e[Gl];return(n?Xv(n):e)[t]}function rhe(e,t){if(t in e)for(var n=Object.getPrototypeOf(e);n;){var r=Object.getOwnPropertyDescriptor(n,t);if(r)return r;n=Object.getPrototypeOf(n)}}function QV(e){e.P||(e.P=!0,e.l&&QV(e.l))}function s9(e){e.o||(e.o=kJ(e.t))}function JV(e,t,n){var r=YF(t)?bh("MapSet").N(t,n):KF(t)?bh("MapSet").T(t,n):e.g?function(i,s){var o=Array.isArray(i),a={i:o?1:0,A:s?s.A:ehe(),P:!1,I:!1,D:{},l:s,t:i,k:null,o:null,j:null,C:!1},u=a,l=eH;o&&(u=[a],l=nC);var c=Proxy.revocable(u,l),f=c.revoke,d=c.proxy;return a.k=d,a.j=f,d}(t,n):bh("ES5").J(t,n);return(n?n.A:ehe()).p.push(r),r}function VCt(e){return yb(e)||Ki(22,e),function t(n){if(!my(n))return n;var r,i=n[Gl],s=gy(n);if(i){if(!i.P&&(i.i<4||!bh("ES5").K(i)))return i.t;i.I=!0,r=ihe(n,s),i.I=!1}else r=ihe(n,s);return Cx(r,function(o,a){i&&eD(i.t,o)===a||ONe(r,o,t(a))}),s===3?new Set(r):r}(e)}function ihe(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return kJ(e)}function HCt(){function e(r){if(!my(r))return r;if(Array.isArray(r))return r.map(e);if(YF(r))return new Map(Array.from(r.entries()).map(function(o){return[o[0],e(o[1])]}));if(KF(r))return new Set(Array.from(r).map(e));var i=Object.create(Object.getPrototypeOf(r));for(var s in r)i[s]=e(r[s]);return NI(r,e2)&&(i[e2]=r[e2]),i}function t(r){return yb(r)?e(r):r}var n="add";UCt("Patches",{$:function(r,i){return i.forEach(function(s){for(var o=s.path,a=s.op,u=r,l=0;l<o.length-1;l++){var c=gy(u),f=""+o[l];c!==0&&c!==1||f!=="__proto__"&&f!=="constructor"||Ki(24),typeof u=="function"&&f==="prototype"&&Ki(24),typeof(u=eD(u,f))!="object"&&Ki(15,o.join("/"))}var d=gy(u),h=e(s.value),p=o[o.length-1];switch(a){case"replace":switch(d){case 2:return u.set(p,h);case 3:Ki(16);default:return u[p]=h}case n:switch(d){case 1:return p==="-"?u.push(h):u.splice(p,0,h);case 2:return u.set(p,h);case 3:return u.add(h);default:return u[p]=h}case"remove":switch(d){case 1:return u.splice(p,1);case 2:return u.delete(p);case 3:return u.delete(s.value);default:return delete u[p]}default:Ki(17,a)}}),r},R:function(r,i,s,o){switch(r.i){case 0:case 4:case 2:return function(a,u,l,c){var f=a.t,d=a.o;Cx(a.D,function(h,p){var m=eD(f,h),g=eD(d,h),y=p?NI(f,h)?"replace":n:"remove";if(m!==g||y!=="replace"){var v=u.concat(h);l.push(y==="remove"?{op:y,path:v}:{op:y,path:v,value:g}),c.push(y===n?{op:"remove",path:v}:y==="remove"?{op:n,path:v,value:t(m)}:{op:"replace",path:v,value:t(m)})}})}(r,i,s,o);case 5:case 1:return function(a,u,l,c){var f=a.t,d=a.D,h=a.o;if(h.length<f.length){var p=[h,f];f=p[0],h=p[1];var m=[c,l];l=m[0],c=m[1]}for(var g=0;g<f.length;g++)if(d[g]&&h[g]!==f[g]){var y=u.concat([g]);l.push({op:"replace",path:y,value:t(h[g])}),c.push({op:"replace",path:y,value:t(f[g])})}for(var v=f.length;v<h.length;v++){var b=u.concat([v]);l.push({op:n,path:b,value:t(h[v])})}f.length<h.length&&c.push({op:"replace",path:u.concat(["length"]),value:f.length})}(r,i,s,o);case 3:return function(a,u,l,c){var f=a.t,d=a.o,h=0;f.forEach(function(p){if(!d.has(p)){var m=u.concat([h]);l.push({op:"remove",path:m,value:p}),c.unshift({op:n,path:m,value:p})}h++}),h=0,d.forEach(function(p){if(!f.has(p)){var m=u.concat([h]);l.push({op:n,path:m,value:p}),c.unshift({op:"remove",path:m,value:p})}h++})}(r,i,s,o)}},M:function(r,i,s,o){s.push({op:"replace",path:[],value:i===OJ?void 0:i}),o.push({op:"replace",path:[],value:r})}})}var she,Ix,PJ=typeof Symbol<"u"&&typeof Symbol("x")=="symbol",qCt=typeof Map<"u",WCt=typeof Set<"u",ohe=typeof Proxy<"u"&&Proxy.revocable!==void 0&&typeof Reflect<"u",OJ=PJ?Symbol.for("immer-nothing"):((she={})["immer-nothing"]=!0,she),e2=PJ?Symbol.for("immer-draftable"):"__$immer_draftable",Gl=PJ?Symbol.for("immer-state"):"__$immer_state",GCt={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},YCt=""+Object.prototype.constructor,DJ=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:Object.getOwnPropertySymbols!==void 0?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,KCt=Object.getOwnPropertyDescriptors||function(e){var t={};return DJ(e).forEach(function(n){t[n]=Object.getOwnPropertyDescriptor(e,n)}),t},ZV={},eH={get:function(e,t){if(t===Gl)return e;var n=Xv(e);if(!NI(n,t))return function(i,s,o){var a,u=rhe(s,o);return u?"value"in u?u.value:(a=u.get)===null||a===void 0?void 0:a.call(i.k):void 0}(e,n,t);var r=n[t];return e.I||!my(r)?r:r===i9(e.t,t)?(s9(e),e.o[t]=JV(e.A.h,r,e)):r},has:function(e,t){return t in Xv(e)},ownKeys:function(e){return Reflect.ownKeys(Xv(e))},set:function(e,t,n){var r=rhe(Xv(e),t);if(r!=null&&r.set)return r.set.call(e.k,n),!0;if(!e.P){var i=i9(Xv(e),t),s=i==null?void 0:i[Gl];if(s&&s.t===n)return e.o[t]=n,e.D[t]=!1,!0;if(jCt(n,i)&&(n!==void 0||NI(e.t,t)))return!0;s9(e),QV(e)}return e.o[t]===n&&typeof n!="number"&&(n!==void 0||t in e.o)||(e.o[t]=n,e.D[t]=!0,!0)},deleteProperty:function(e,t){return i9(e.t,t)!==void 0||t in e.t?(e.D[t]=!1,s9(e),QV(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var n=Xv(e),r=Reflect.getOwnPropertyDescriptor(n,t);return r&&{writable:!0,configurable:e.i!==1||t!=="length",enumerable:r.enumerable,value:n[t]}},defineProperty:function(){Ki(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){Ki(12)}},nC={};Cx(eH,function(e,t){nC[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),nC.deleteProperty=function(e,t){return{}.NODE_ENV!=="production"&&isNaN(parseInt(t))&&Ki(13),nC.set.call(this,e,t,void 0)},nC.set=function(e,t,n){return{}.NODE_ENV!=="production"&&t!=="length"&&isNaN(parseInt(t))&&Ki(14),eH.set.call(this,e[0],t,n,e[0])};var XCt=function(){function e(n){var r=this;this.g=ohe,this.F=!0,this.produce=function(i,s,o){if(typeof i=="function"&&typeof s!="function"){var a=s;s=i;var u=r;return function(m){var g=this;m===void 0&&(m=a);for(var y=arguments.length,v=Array(y>1?y-1:0),b=1;b<y;b++)v[b-1]=arguments[b];return u.produce(m,function(w){var E;return(E=s).call.apply(E,[g,w].concat(v))})}}var l;if(typeof s!="function"&&Ki(6),o!==void 0&&typeof o!="function"&&Ki(7),my(i)){var c=the(r),f=JV(r,i,void 0),d=!0;try{l=s(f),d=!1}finally{d?o3(c):XV(c)}return typeof Promise<"u"&&l instanceof Promise?l.then(function(m){return n9(c,o),r9(m,c)},function(m){throw o3(c),m}):(n9(c,o),r9(l,c))}if(!i||typeof i!="object"){if((l=s(i))===void 0&&(l=i),l===OJ&&(l=void 0),r.F&&RJ(l,!0),o){var h=[],p=[];bh("Patches").M(i,l,h,p),o(h,p)}return l}Ki(21,i)},this.produceWithPatches=function(i,s){if(typeof i=="function")return function(l){for(var c=arguments.length,f=Array(c>1?c-1:0),d=1;d<c;d++)f[d-1]=arguments[d];return r.produceWithPatches(l,function(h){return i.apply(void 0,[h].concat(f))})};var o,a,u=r.produce(i,s,function(l,c){o=l,a=c});return typeof Promise<"u"&&u instanceof Promise?u.then(function(l){return[l,o,a]}):[u,o,a]},typeof(n==null?void 0:n.useProxies)=="boolean"&&this.setUseProxies(n.useProxies),typeof(n==null?void 0:n.autoFreeze)=="boolean"&&this.setAutoFreeze(n.autoFreeze)}var t=e.prototype;return t.createDraft=function(n){my(n)||Ki(8),yb(n)&&(n=VCt(n));var r=the(this),i=JV(this,n,void 0);return i[Gl].C=!0,XV(r),i},t.finishDraft=function(n,r){var i=n&&n[Gl];({}).NODE_ENV!=="production"&&(i&&i.C||Ki(9),i.I&&Ki(10));var s=i.A;return n9(s,r),r9(void 0,s)},t.setAutoFreeze=function(n){this.F=n},t.setUseProxies=function(n){n&&!ohe&&Ki(20),this.g=n},t.applyPatches=function(n,r){var i;for(i=r.length-1;i>=0;i--){var s=r[i];if(s.path.length===0&&s.op==="replace"){n=s.value;break}}i>-1&&(r=r.slice(i+1));var o=bh("Patches").$;return yb(n)?o(n,r):this.produce(n,function(a){return o(a,r)})},e}(),Yl=new XCt,QCt=Yl.produce;Yl.produceWithPatches.bind(Yl);Yl.setAutoFreeze.bind(Yl);Yl.setUseProxies.bind(Yl);Yl.applyPatches.bind(Yl);Yl.createDraft.bind(Yl);Yl.finishDraft.bind(Yl);function JCt(e,t={}){const{artifact:n=void 0,metadata:r=void 0,rootLabel:i="Root"}=t,s=LCt({state:e,label:i,initialArtifact:n,initialMetadata:r}),o={nodes:{[s.id]:s},root:s.id,current:s.id};return cCt({name:"provenance-graph",initialState:o,reducers:{addMetadata(a,u){const{id:l,meta:c}=u.payload,f=a.nodes[l].meta,d=Object.keys(c).reduce((h,p)=>(h[p]||(h[p]=[]),h[p].push({type:p,id:yh.get(),val:c[p],createdOn:Date.now()}),h),f);a.nodes[u.payload.id].meta=d},addArtifact(a,u){a.nodes[u.payload.id].artifacts.push({id:yh.get(),createdOn:Date.now(),val:u.payload.artifact})},changeCurrent(a,u){a.current=u.payload},addNode(a,{payload:u}){a.nodes[u.id]=u,a.nodes[u.parent].children.push(u.id),a.current=u.id},load(a,{payload:u}){return u}}})}function ZCt(e){const t=new Map,{reducer:n,actions:r,getInitialState:i}=JCt(e),s=NCt();s.startListening({matcher:Yde(r.changeCurrent,r.addNode),effect:(a,u)=>{u.cancelActiveListeners(),t.forEach(l=>{const c=Yde(r.addNode)(a),{skipOnNew:f}=l.config;f&&c||l.func(c?"new":"traversal")})}});const o=oCt({reducer:n,middleware:a=>a().prepend(s.middleware)});return{initialState:i(),get backend(){return o.getState()},get current(){return o.getState().nodes[o.getState().current]},get root(){return o.getState().nodes[o.getState().root]},currentChange(a,u){const l={id:yh.get(),func:a,config:u};return t.set(l.id,l),()=>t.delete(l.id)},update:o.dispatch,...r}}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var e2t=globalThis&&globalThis.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),t2t=Object.prototype.hasOwnProperty;function tH(e,t){return t2t.call(e,t)}function nH(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)tH(e,i)&&r.push(i);return r}function Uu(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function rH(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Qv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function DNe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function iH(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(iH(e[t]))return!0}else if(typeof e=="object"){for(var r=nH(e),i=r.length,s=0;s<i;s++)if(iH(e[r[s]]))return!0}}return!1}function ahe(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var $Ne=function(e){e2t(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,ahe(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=ahe(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),Hi=$Ne,n2t=Uu,Yw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=l3(n,this.path);r&&(r=Uu(r));var i=U1(n,{op:"remove",path:this.from}).removed;return U1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=l3(n,this.from);return U1(n,{op:"add",path:this.path,value:Uu(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:PI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},r2t={add:function(e,t,n){return rH(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Yw.move,copy:Yw.copy,test:Yw.test,_get:Yw._get};function l3(e,t){if(t=="")return e;var n={op:"_get",path:t};return U1(e,n),n.value}function U1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):c3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=l3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=PI(e,t.value),o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new Hi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Uu(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=c3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=DNe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!rH(h))throw new Hi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);rH(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new Hi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=r2t[t.op].call(t,l,h,e);if(o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Yw[t.op].call(t,l,h,e);if(o.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new Hi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function XF(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new Hi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Uu(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=U1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function i2t(e,t,n){var r=U1(e,t);if(r.test===!1)throw new Hi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function c3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new Hi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Yw[e.op]){if(typeof e.path!="string")throw new Hi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new Hi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new Hi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new Hi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&iH(e.value))throw new Hi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new Hi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new Hi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=MNe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new Hi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new Hi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function MNe(e,t,n){try{if(!Array.isArray(e))throw new Hi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)XF(Uu(t),Uu(e),n||!0);else{n=n||c3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof Hi)return i;throw i}}function PI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!PI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!PI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const s2t=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:Hi,_areEquals:PI,applyOperation:U1,applyPatch:XF,applyReducer:i2t,deepClone:n2t,getValueByPointer:l3,validate:MNe,validator:c3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var $J=new WeakMap,o2t=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),a2t=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function u2t(e){return $J.get(e)}function l2t(e,t){return e.observers.get(t)}function c2t(e,t){e.observers.delete(t.callback)}function f2t(e,t){t.unobserve()}function d2t(e,t){var n=[],r,i=u2t(e);if(!i)i=new o2t(e),$J.set(e,i);else{var s=l2t(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Uu(e),t){r.callback=t,r.next=null;var o=function(){sH(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){sH(r),clearTimeout(r.next),c2t(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new a2t(t,r)),r}function sH(e,t){t===void 0&&(t=!1);var n=$J.get(e.object);MJ(n.value,e.object,e.patches,"",t),e.patches.length&&XF(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function MJ(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=nH(t),o=nH(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(tH(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?MJ(c,f,n,r+"/"+Qv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Qv(l),value:Uu(c)}),n.push({op:"replace",path:r+"/"+Qv(l),value:Uu(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Qv(l),value:Uu(c)}),n.push({op:"remove",path:r+"/"+Qv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!tH(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Qv(l),value:Uu(t[l])})}}}function LNe(e,t,n){n===void 0&&(n=!1);var r=[];return MJ(e,t,r,"",n),r}const h2t=Object.freeze(Object.defineProperty({__proto__:null,compare:LNe,generate:sH,observe:d2t,unobserve:f2t},Symbol.toStringTag,{value:"Module"}));Object.assign({},s2t,h2t,{JsonPatchError:$Ne,deepClone:Uu,escapePathComponent:Qv,unescapePathComponent:DNe});var rC=(e=>(e.TRAVERSAL_START="Traversal_Start",e.TRAVERSAL_END="Traversal_End",e))(rC||{});function tD(e,t){const n=e.state;if(n.type==="checkpoint")return n.val;const{checkpointRef:r}=n,i=t[r],s=jNe(i,e,t);s.shift();const o=s.map(u=>t[u]).map(u=>u.state.val).reduce((u,l)=>[...u,...l],[]),a=tD(i,t);return XF(a,Uu(o),!0,!1).newDocument}function p2t(e,t){const n=Object.keys(e).length;return new Set(t.map(r=>r.path.split("/")[0])).size<n/2?"patch":"checkpoint"}function FNe({registry:e,initialState:t}){let n=!1;const r=PCt(),i=ZCt(t);function s(c){return i.backend.nodes[c]}r.listen(rC.TRAVERSAL_START,()=>{n=!0}),r.listen(rC.TRAVERSAL_END,()=>{n=!1});const o={add(c,f=i.current.id){i.update(i.addMetadata({id:f,meta:c}))},latestOfType(c,f=i.current.id){var d;return(d=i.backend.nodes[f].meta[c])==null?void 0:d.at(-1)},allOfType(c,f=i.current.id){return i.backend.nodes[f].meta[c]},latest(c=i.current.id){const f=i.backend.nodes[c].meta,d=Object.keys(f).reduce((h,p)=>{const m=f[p].at(-1);return m&&(h[p]=m),h},{});return Object.keys(d).length>0?d:void 0},all(c=i.current.id){return i.backend.nodes[c].meta},types(c=i.current.id){return Object.keys(i.backend.nodes[c].meta)}},a={add(c,f=i.current.id){i.update(i.addArtifact({id:f,artifact:c}))},latest(c=i.current.id){return i.backend.nodes[c].artifacts.at(-1)},all(c=i.current.id){return i.backend.nodes[c].artifacts}},u={add(c,f=i.current.id){o.add({annotation:c},f)},latest(c=i.current.id){var f;return(f=o.latestOfType("annotation",c))==null?void 0:f.val},all(c=i.current.id){var f;return(f=o.allOfType("annotation",c))==null?void 0:f.map(d=>d.val)}},l={add(c=i.current.id){o.add({bookmark:!0},c)},remove(c=i.current.id){o.add({bookmark:!1},c)},is(c=i.current.id){var f;return!!((f=o.latestOfType("bookmark",c))!=null&&f.val)},toggle(c=i.current.id){l.is(c)?l.remove(c):l.add(c)}};return{registry:e,get isTraversing(){return n},getState(c=i.current){return tD(c,i.backend.nodes)},graph:i,get current(){return i.current},get root(){return i.root},record({label:c,state:f,sideEffects:d,eventType:h,onlySideEffects:p=!1}){let m=null,g=null;const y=tD(this.current,this.graph.backend.nodes);if(p)g={type:"checkpoint",val:f};else{const v=LNe(y,f);if(p2t(f,v)==="checkpoint")g={type:"checkpoint",val:f};else{const b=this.current.state.type==="checkpoint"?this.current.id:this.current.state.checkpointRef;g={type:"patch",val:v,checkpointRef:b}}}if(!g)throw new Error(`Could not calculate new state. Previous state is: ${JSON.stringify(this.current.state,null,2)}`);if(m=FCt({label:c,state:g,parent:this.current,sideEffects:d,event:h}),!m)throw new Error("State Node creation failed!");i.update(i.addNode(m))},async apply(c,f){const d=e.get(f.type),h=tD(this.current,this.graph.backend.nodes);if(d.config.hasSideEffects){const{do:p=f,undo:m}=d.func(f.payload);this.record({label:c,state:h,sideEffects:{do:[p],undo:[m]},eventType:d.config.eventType})}else{const p=d.func(h,f.payload);this.record({label:c,state:p,sideEffects:{do:[],undo:[]},eventType:d.config.eventType})}},async to(c){r.fire(rC.TRAVERSAL_START);const f=jNe(i.current,i.backend.nodes[c],i.backend.nodes),d=[];for(let h=0;h<f.length-1;++h){const p=s(f[h]),m=s(f[h+1]);g2t(p,m)?vh(p)&&d.push(...p.sideEffects.undo):vh(m)&&d.push(...m.sideEffects.do)}for(const h of d){const p=e.get(h.type).func;await p(h.payload)}i.update(i.changeCurrent(c)),r.fire(rC.TRAVERSAL_END)},undo(){const{current:c}=i;return vh(c)?this.to(c.parent):Promise.resolve(console.warn("Already at root!"))},redo(c="latest"){const{current:f}=i;return f.children.length>0?this.to(f.children[c==="oldest"?0:f.children.length-1]):Promise.resolve(console.warn("Already at latest in this branch!"))},currentChange(c,f=!1){return i.currentChange(c,{skipOnNew:f})},done(){console.log("Setup later for URL sharing.")},tree(){return BNe(i.root,i.backend.nodes)},on(c,f){r.listen(c,f)},export(){return JSON.stringify(i.backend)},exportObject(){return JSON.parse(JSON.stringify(i.backend))},import(c){const f=JSON.parse(c),d=f.current;f.current=f.root,i.update(i.load(f)),this.to(d)},importObject(c){const f=c.current;c.current=c.root,i.update(i.load(c)),this.to(f)},metadata:o,artifact:a,annotations:u,bookmarks:l}}function m2t(e,t,n){let[r,i]=[e,t];r.level>i.level&&([r,i]=[i,r]);let s=i.level-r.level;for(;vh(i)&&s!==0;)i=n[i.parent],s-=1;if(r.id===i.id)return r.id;for(;r.id!==i.id;)vh(r)&&(r=n[r.parent]),vh(i)&&(i=n[i.parent]);return r.id}function jNe(e,t,n){const r=m2t(e,t,n),i=n[r],s=[],o=[];let[a,u]=[e,t];for(;a.id!==i.id;)s.push(a),vh(a)&&(a=n[a.parent]);for(s.push(a);u.id!==i.id;)o.push(u),vh(u)&&(u=n[u.parent]);const l=o.reverse();return[...s,...l].map(c=>c.id)}function g2t(e,t){if(vh(e)&&e.parent===t.id)return!0;if(vh(t)&&t.parent===e.id)return!1;throw new Error("Incorrect use of function. Nodes are not connected to each other.")}function BNe(e,t){return{...e,children:e.children.map(n=>BNe(t[n],t)),name:`${e.label}`}}HCt();function y2t(e){return e.length===2?QCt(e):e}class QF{static create(){return new QF}constructor(){this.registry=new Map}has(t){return this.registry.has(t)}register(t,n,r){const i=n.length===2;if(n.length>2)throw new Error("Incorrect action function signature. Action function can only have two arguments at most!");if(this.has(t))throw new Error(`Already registered: ${t}`);const{label:s=t,eventType:o=t}=r||{};return this.registry.set(t,{func:y2t(n),config:{hasSideEffects:!i,label:typeof s=="string"?()=>s:s,eventType:o}}),gh(t)}get(t){const n=this.registry.get(t);if(!n)throw new Error(`Not registered: ${t}`);return n}}var v2t="Expected a function",uhe=NaN,b2t="[object Symbol]",_2t=/^\s+|\s+$/g,w2t=/^[-+]0x[0-9a-f]+$/i,E2t=/^0b[01]+$/i,x2t=/^0o[0-7]+$/i,S2t=parseInt,T2t=typeof so=="object"&&so&&so.Object===Object&&so,A2t=typeof self=="object"&&self&&self.Object===Object&&self,C2t=T2t||A2t||Function("return this")(),I2t=Object.prototype,k2t=I2t.toString,R2t=Math.max,N2t=Math.min,o9=function(){return C2t.Date.now()};function P2t(e,t,n){var r,i,s,o,a,u,l=0,c=!1,f=!1,d=!0;if(typeof e!="function")throw new TypeError(v2t);t=lhe(t)||0,oH(n)&&(c=!!n.leading,f="maxWait"in n,s=f?R2t(lhe(n.maxWait)||0,t):s,d="trailing"in n?!!n.trailing:d);function h(T){var S=r,A=i;return r=i=void 0,l=T,o=e.apply(A,S),o}function p(T){return l=T,a=setTimeout(y,t),c?h(T):o}function m(T){var S=T-u,A=T-l,C=t-S;return f?N2t(C,s-A):C}function g(T){var S=T-u,A=T-l;return u===void 0||S>=t||S<0||f&&A>=s}function y(){var T=o9();if(g(T))return v(T);a=setTimeout(y,m(T))}function v(T){return a=void 0,d&&r?h(T):(r=i=void 0,o)}function b(){a!==void 0&&clearTimeout(a),l=0,r=u=i=a=void 0}function w(){return a===void 0?o:v(o9())}function E(){var T=o9(),S=g(T);if(r=arguments,i=this,u=T,S){if(a===void 0)return p(u);if(f)return a=setTimeout(y,t),h(u)}return a===void 0&&(a=setTimeout(y,t)),o}return E.cancel=b,E.flush=w,E}function oH(e){var t=typeof e;return!!e&&(t=="object"||t=="function")}function O2t(e){return!!e&&typeof e=="object"}function D2t(e){return typeof e=="symbol"||O2t(e)&&k2t.call(e)==b2t}function lhe(e){if(typeof e=="number")return e;if(D2t(e))return uhe;if(oH(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=oH(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=e.replace(_2t,"");var n=E2t.test(e);return n||x2t.test(e)?S2t(e.slice(2),n?2:8):w2t.test(e)?uhe:+e}var $2t=P2t;const Rd=ec($2t);function UNe({yScale:e,xRange:t,horizontalPosition:n,label:r}){const i=I.useMemo(()=>e.ticks(5).map(o=>({value:o,yOffset:e(o)})),[e]),s=I.useMemo(()=>OS(".2s"),[]);return _.jsxs(_.Fragment,{children:[_.jsx("g",{transform:`translate(${n-60}, ${e.range()[0]}) rotate(-90)`,children:_.jsx("foreignObject",{width:Math.abs(e.range()[1]-e.range()[0]),height:20,children:_.jsx(Cm,{children:_.jsx(Cs,{gap:3,children:_.jsx(et,{size:"14px",style:{color:"#878E95"},children:r})})})})}),_.jsx("path",{transform:`translate(${n}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),_.jsx("path",{transform:`translate(${t[1]}, 0)`,d:["M",0,e.range()[0],"V",e.range()[1]].join(" "),fill:"none",stroke:"lightgray"}),i.map(({value:o,yOffset:a})=>_.jsxs("g",{transform:`translate(${n}, ${a})`,children:[_.jsx("line",{x2:"-6",stroke:"currentColor"}),_.jsx("line",{x2:`${t[1]-t[0]}`,stroke:`${o===0?"black":"lightgray"}`}),_.jsx("text",{style:{dominantBaseline:"middle",fontSize:"10px",textAnchor:"end",transform:"translateX(-8px)",fill:"black",font:"Roboto"},children:s(o)},o)]},o))]})}const M2t=Object.freeze(Object.defineProperty({__proto__:null,YAxis:UNe},Symbol.toStringTag,{value:"Module"})),a9=15;function zNe({xScale:e,yScale:t,setBrushedSpace:n,params:r,data:i,brushState:s,isSelect:o=!0}){const[a,u]=I.useState([0,0]),[l,c]=I.useState(!1);return I.useEffect(()=>{const f=xi("#scatterSvgBrushStudy");if(f){const d=f.node().getBoundingClientRect();f.on("mousemove",h=>{const p=[h.clientX-d.x,h.clientY-d.y];if(u(p),l){const m=i.filter(g=>Math.abs(e(g[r.x])-p[0])<a9&&Math.abs(t(g[r.y])-p[1])<a9);if(h.ctrlKey||h.metaKey||!o){const g=new Set(s.ids);m.forEach(v=>{g.has(v[r.ids])&&g.delete(v[r.ids])});const y=Array.from(g);n([[a[0],a[1]],[a[0],a[1]]],e,t,y.length===0?"clear":"drag",y)}else{const g=Array.from(new Set([...s.ids,...m.map(y=>y[r.ids])]));g.length>0&&n([[a[0],a[1]],[a[0],a[1]]],e,t,"drag",g)}}}),f.on("mousedown",h=>{c(!0),h.stopPropagation(),h.preventDefault()}),f.on("mouseup",()=>{c(!1)})}},[a,s.ids,i,l,o,r,n,e,t]),_.jsx("circle",{style:{cursor:l?"pointer":"default"},r:a9,fill:"darkgray",opacity:.5,cx:a[0],cy:a[1]})}const L2t=Object.freeze(Object.defineProperty({__proto__:null,Paintbrush:zNe},Symbol.toStringTag,{value:"Module"})),vi={top:15,left:100,right:15,bottom:70};function aH({setFilteredTable:e,brushState:t,setBrushedSpace:n,brushType:r,params:i,data:s,brushedPoints:o}){const[a,{height:u,width:l}]=L1(),[c]=L1(),[f]=L1(),[d,h]=I.useState(!0),p=I.useMemo(()=>l-vi.left-vi.right,[l]),m=I.useMemo(()=>u-vi.top-vi.bottom,[u]),g=I.useMemo(()=>{const k=Array.from(new Set(s.map(N=>N[i.category])));return i_(ZCe).domain(k)},[s,i.category]),{xMin:y,yMin:v,xMax:b,yMax:w}=I.useMemo(()=>{const k=s.map(M=>+M[i.x]).filter(M=>M!==null),[N,D]=qle(k),O=s.map(M=>+M[i.y]).filter(M=>M!==null),[$,F]=qle(O);return{xMin:N,xMax:D,yMin:$,yMax:F}},[s,i.x,i.y]),E=I.useMemo(()=>{const k=b-y;return p<=0?null:i.dataType==="date"?WCe([vi.left,p+vi.left]).domain([new Date("2014-12-20"),new Date("2016-01-10")]):Bc([vi.left,p+vi.left]).domain([y-k/10,b+k/10]).nice()},[i.dataType,p,b,y]),T=I.useMemo(()=>{const k=w-v;return m<=0?null:Bc([m+vi.top,vi.top]).domain([v-k/10,w+k/10]).nice()},[m,w,v]),S=I.useMemo(()=>{if(!E||!T)return()=>null;if(r==="Axis Selection"){const k=ppt().extent([[vi.left,vi.top+m-5],[vi.left+p,vi.top+m+5]]).on("brush end",D=>{D.sourceEvent!==void 0&&n([[D.selection[0],null],[D.selection[1],null]],E,T,D.mode)}),N=mpt().extent([[vi.left-5,vi.top],[vi.left+5,vi.top+m]]).on("brush end",D=>{D.sourceEvent!==void 0&&n([[null,D.selection[0]],[null,D.selection[1]]],E,T,D.mode)});return c.current&&f.current&&(xi(f.current).call(N),xi(c.current).call(k),t.hasBrush||(xi(f.current).call(N.move,[T(w),T(v)]),xi(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"drag"))),()=>{xi(f.current).call(N.move,[T(w),T(v)]),xi(c.current).call(k.move,[E(new Date("2015-01-02")),E(new Date("2015-12-31"))]),n([[E(new Date("2015-01-02")),T(w)],[E(new Date("2015-12-31")),T(v)]],E,T,"clear")}}if(r==="Rectangular Selection"){const k=gpt().extent([[vi.left,vi.top],[vi.left+p,vi.top+m]]).on("brush",N=>{N.sourceEvent!==void 0&&n([[N.selection[0][0],N.selection[0][1]],[N.selection[1][0],N.selection[1][1]]],E,T,N.mode)}).on("end",N=>{N.selection===null&&N.sourceEvent!==void 0&&(xi(a.current).call(k.move,null),e(null))});return xi(a.current).call(k),()=>{xi(a.current).call(k.move,null),n([[null,null],[null,null]],E,T,"clear")}}return r==="Slider Selection"?(t.hasBrush||n([[E(y),T(w)],[E(b),T(v)]],E,T,null),()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear")):r==="Paintbrush Selection"?()=>n([[E(y),T(w)],[E(b),T(v)]],E,T,"clear",[]):()=>null},[t.hasBrush,r,c,f,m,a,n,e,p,b,y,E,w,v,T]),A=I.useMemo(()=>o.length===0?null:new Set(o),[o]),C=I.useMemo(()=>!E||!T?null:s.map((k,N)=>{if(k[i.x]===null||k[i.y]===null)return null;const D=i.dataType==="date"?E(new Date(k[i.x])):E(k[i.x]);return _.jsx("circle",{opacity:A&&!A.has(k[i.ids])?.3:1,r:3,fill:A&&!A.has(k[i.ids])?"lightgray":g(k[i.category]),cx:D,cy:T(k[i.y])},N)}),[A,g,s,i.category,i.dataType,i.ids,i.x,i.y,E,T]);return I.useEffect(()=>{r==="Axis Selection"&&odt(".handle").style("fill","darkgrey")},[t,r]),_.jsxs(ih,{children:[_.jsxs(Cs,{children:[_.jsx(cn,{ml:60,size:"compact-sm",style:{width:"130px"},disabled:o.length===0,onClick:()=>{e(null),S==null||S()},children:"Clear Selection"}),i.brushType==="Paintbrush Selection"?_.jsx(cK,{defaultChecked:!0,value:d?"Select":"De-Select",onChange:k=>h(k==="Select"),data:[{label:"Select",value:"Select"},{label:"De-Select",value:"De-Select",disabled:o.length===0}]}):null]}),_.jsxs(Cs,{style:{width:"100%",height:"100%"},wrap:"nowrap",children:[_.jsxs("svg",{id:"scatterSvgBrushStudy",ref:a,style:{height:"500px",width:i.brushType==="Axis Selection"?"800px":"530px",fontFamily:'BlinkMacSystemFont, -apple-system, "Segoe UI", "Roboto", "Oxygen", "Ubuntu", "Cantarell", "Fira Sans", "Droid Sans", "Helvetica Neue", "Helvetica", "Arial", sans-serif'},children:[E&&T?_.jsxs("g",{children:[_.jsx(UNe,{yScale:T,label:i.y,horizontalPosition:vi.left,xRange:E.range()}),_.jsx(XX,{xScale:E,yRange:T.range(),isDate:i.dataType==="date",vertPosition:m+vi.top,label:i.x,ticks:E.ticks(i.brushType==="Axis Selection"?12:5).map(k=>({value:k.toString(),offset:E(k)}))})]}):null,C,_.jsx("g",{id:"brushXRef",ref:c}),_.jsx("g",{id:"brushYRef",ref:f}),E&&T&&r==="Paintbrush Selection"?_.jsx(zNe,{brushState:t,setBrushedSpace:n,params:i,data:s,isSelect:d,xScale:E,yScale:T}):null]}),r==="Slider Selection"&&E&&T?_.jsxs(ih,{style:{flexGrow:1},gap:50,children:[_.jsxs(ih,{gap:0,children:[_.jsx(et,{children:i.x}),_.jsx(S$,{minRange:1,label:null,min:E.domain()[0],max:E.domain()[1],labelAlwaysOn:!1,onChange:k=>{n([[E(k[0]),t.y1],[E(k[1]),t.y2]],E,T,"drag")},style:{width:"300px"},marks:E.ticks(5).map(k=>({value:k,label:k})),value:[E.invert(t.x1),E.invert(t.x2)]})]}),_.jsxs(ih,{gap:0,children:[_.jsx(et,{children:i.y}),_.jsx(S$,{minRange:1,label:null,min:T.domain()[0],max:T.domain()[1],onChange:k=>{n([[t.x1,T(k[1])],[t.x2,T(k[0])]],E,T,"drag")},style:{width:"300px"},marks:T.ticks(5).map(k=>({value:k,label:k})),value:[T.invert(t.y2),T.invert(t.y1)]})]})]}):null]})]})}const F2t=Object.freeze(Object.defineProperty({__proto__:null,Scatter:aH,default:aH},Symbol.toStringTag,{value:"Module"}));function che({parameters:e,setAnswer:t}){const[n,r]=I.useState(null),[i,s]=I.useState({hasBrush:!1,x1:0,y1:0,x2:0,y2:0,ids:[]}),[o,a]=I.useState(null);I.useEffect(()=>{xX(`./data/${e.dataset}.csv`).then(g=>{a(g)})},[e]);const u=I.useMemo(()=>o?CAt(o):null,[o]),{actions:l,trrack:c}=I.useMemo(()=>{const g=QF.create(),y=g.register("brush",(T,S)=>(T.all={brush:S},T)),v=g.register("brushMove",(T,S)=>(T.all={brush:S},T)),b=g.register("brushResize",(T,S)=>(T.all={brush:S},T)),w=g.register("brushClear",(T,S)=>(T.all={brush:S},T)),E=FNe({registry:g,initialState:{all:{hasBrush:!1,x1:null,x2:null,y1:null,y2:null,ids:[]}}});return{actions:{brush:y,brushMove:v,brushResize:b,clearBrush:w},trrack:E}},[]),f=I.useCallback((g,y)=>{g==="drag"?c.apply("Move Brush",l.brushMove(y)):g==="handle"&&c.apply("Brush",l.brush(y))},[l,c]),d=I.useMemo(()=>Rd(f,100,{maxWait:100}),[f]),h=I.useCallback((g,y,v,b,w)=>{if(!y||!v)return;const E=y.invert(g[0][0]||i.x1),T=y.invert(g[1][0]||i.x2),S=v.invert(g[1][1]||i.y2),A=v.invert(g[0][1]||i.y1);let C=null;if(b==="clear")C=u;else if(w){const N=new Set(w);C=u.filter(YB(D=>N.has(D[e.ids])))}else e.brushType==="Axis Selection"?C=u.filter(YB(N=>new Date(N[e.x])>=new Date(E)&&new Date(N[e.x])<=new Date(T)&&N[e.y]>=S&&N[e.y]<=A)):C=u.filter(YB(N=>N[e.x]>=E&&N[e.x]<=T&&N[e.y]>=S&&N[e.y]<=A));const k={x1:g[0][0]||(i==null?void 0:i.x1)||0,x2:g[1][0]||(i==null?void 0:i.x2)||0,y1:g[0][1]||(i==null?void 0:i.y1)||0,y2:g[1][1]||(i==null?void 0:i.y2)||0,hasBrush:b!=="clear",ids:b!=="clear"?C==null?void 0:C.array("id"):[]};s(k),b==="drag"||b==="handle"?d(b,k):b==="clear"&&c.apply("Clear Brush",l.clearBrush(k)),r(C),t({status:!0,provenanceGraph:c.graph.backend,answers:{}})},[i,u,e,c,t,d,l]),p=I.useMemo(()=>n?n==null?void 0:n.groupby(e.category).count():u?u==null?void 0:u.groupby(e.category).count():null,[n,u,e.category]),m=I.useCallback(g=>{r(g)},[]);return o?_.jsxs(ih,{gap:"xs",children:[_.jsx(aH,{brushedPoints:i==null?void 0:i.ids,data:o,params:e,brushType:e.brushType,setBrushedSpace:h,brushState:i,setFilteredTable:m}),_.jsx(vV,{data:o,parameters:e,barsTable:p})]}):_.jsx(Kc,{})}const j2t=Object.freeze(Object.defineProperty({__proto__:null,BrushPlot:che,default:che},Symbol.toStringTag,{value:"Module"})),B2t=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"})),fhe=e=>{const t={...e,marginTop:e.marginTop||10,marginRight:e.marginRight||10,marginBottom:e.marginBottom||40,marginLeft:e.marginLeft||75};return{...t,boundedHeight:t.height?Math.max(t.height-t.marginTop-t.marginBottom,0):0,boundedWidth:t.width?Math.max(t.width-t.marginLeft-t.marginRight,0):0}},KS=e=>{const t=I.useRef(null),n=fhe(e),[r,i]=I.useState(0),[s,o]=I.useState(0);I.useEffect(()=>{const u=t.current;if(u){const l=new ResizeObserver(c=>{if(!Array.isArray(c)||!c.length)return;const f=c[0];r!==f.contentRect.width&&i(f.contentRect.width),s!==f.contentRect.height&&o(f.contentRect.height)});return l.observe(u),()=>l.unobserve(u)}return()=>null},[s,r]);const a=fhe({...n,width:n.width||r,height:n.height||s});return[t,a]},U2t=Object.freeze(Object.defineProperty({__proto__:null,useChartDimensions:KS},Symbol.toStringTag,{value:"Module"}));function VNe({data:e,xScale:t,yScale:n,height:r}){return _.jsx("g",{children:e.map((i,s)=>_.jsx("rect",{x:t(i.name),y:n(i.value),width:t.bandwidth(),height:r-n(i.value),fill:"transparent",stroke:"currentColor"},s))})}const z2t=Object.freeze(Object.defineProperty({__proto__:null,Bars:VNe},Symbol.toStringTag,{value:"Module"}));function LJ({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Bc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",0,t[0],"h",r,"V",t[1],"h",-r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(0,${a})`,children:[_.jsx("line",{x2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateX(-10px)"},children:o},o)]},o))]})}const V2t=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisV:LJ},Symbol.toStringTag,{value:"Module"}));function HNe({domain:e=["A","B","C","D","E"],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=s_().domain(e).range(t).padding(.2);return i(e.map(a=>({value:a,xOffset:(o(a)||0)+o.bandwidth()/2-5})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsx("g",{transform:`translate(${a}, 10)`,children:_.jsx("circle",{r:2,cx:0,cy:0,children:o},o)},o))]})}const H2t=Object.freeze(Object.defineProperty({__proto__:null,OrdinalAxisHWithDotMarks:HNe},Symbol.toStringTag,{value:"Module"})),q2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,width:400,height:400};function W2t({parameters:e}){const[n,r]=KS(q2t),i=s_().domain(e.data.map(u=>u.name)).range([0,r.boundedWidth]).padding(.2),s=Bc().domain([100,0]).range([0,r.boundedHeight]),o=u=>u.filter((l,c)=>c===0||c===u.length-1),a=u=>u.filter((l,c)=>e.selectedIndices.includes(c));return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:400},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(HNe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(LJ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsx("g",{transform:`translate(${[0,0].join(",")})`,children:_.jsx(VNe,{data:e.data,xScale:i,yScale:s,height:r.boundedHeight})})]})})})}const G2t=Object.freeze(Object.defineProperty({__proto__:null,default:W2t},Symbol.toStringTag,{value:"Module"}));function qNe({data:e}){return _.jsx("g",{children:e.map(({bubble:t},n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:t.r,fill:"transparent",stroke:"currentColor"},n))})}const Y2t=Object.freeze(Object.defineProperty({__proto__:null,Bubbles:qNe},Symbol.toStringTag,{value:"Module"}));function FJ({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("circle",{cx:t.x,cy:t.y,r:2,fill:"black",stroke:"currentColor"},n))})}const K2t=Object.freeze(Object.defineProperty({__proto__:null,DotMarks:FJ},Symbol.toStringTag,{value:"Module"})),X2t={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400},Q2t=({data:e},t=100,n=100)=>{const i={children:e.map(a=>+a.value).map(a=>({value:a}))},s=xCe().size([t-10,n-10]).padding(1.5),o=dF(i).sum(a=>a.value);return s(o).descendants().filter(a=>!a.children).map((a,u)=>({bubble:a,data:e[u]}))},J2t=(e,t)=>e.filter((n,r)=>t.includes(r)).map(({bubble:n})=>({x:n.x,y:n.y}));function Z2t({parameters:e}){const[t,n]=KS(X2t),r=Q2t(e,n.width,n.height),i=J2t(r,e.selectedIndices);return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:"400px"},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft/2,n.marginTop/2].join(",")})`,children:[_.jsx(qNe,{data:r}),_.jsx(FJ,{positions:i})]})})})}const eIt=Object.freeze(Object.defineProperty({__proto__:null,default:Z2t},Symbol.toStringTag,{value:"Module"}));function WNe({arcs:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("path",{d:t(),fill:"transparent",stroke:"currentColor"},n))})}const tIt=Object.freeze(Object.defineProperty({__proto__:null,Slices:WNe},Symbol.toStringTag,{value:"Module"}));function GNe({positions:e}){return _.jsx("g",{children:e.map((t,n)=>_.jsx("g",{transform:`translate(${t.centroid()})`,children:_.jsx("circle",{r:2,cx:0,cy:0},n)},n))})}const nIt=Object.freeze(Object.defineProperty({__proto__:null,SlicesDotMarks:GNe},Symbol.toStringTag,{value:"Module"})),rIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:500},iIt=s2e().value(e=>e.value),sA=150;function sIt({parameters:e}){const[t,n]=KS(rIt),r=iIt(e.data),i=r.map(o=>xM().innerRadius(0).outerRadius(sA).startAngle(o.startAngle).endAngle(o.endAngle)),s=r.map(o=>xM().outerRadius(sA+10).innerRadius(sA+10).startAngle(o.startAngle).endAngle(o.endAngle)).filter((o,a)=>e.selectedIndices.includes(a));return _.jsx("div",{className:"Chart__wrapper",ref:t,style:{height:400},children:_.jsx("svg",{width:n.width,height:n.height,children:_.jsxs("g",{transform:`translate(${[n.marginLeft+sA,n.marginTop+sA].join(",")})`,children:[_.jsx(WNe,{arcs:i}),_.jsx(GNe,{positions:s})]})})})}const oIt=Object.freeze(Object.defineProperty({__proto__:null,default:sIt},Symbol.toStringTag,{value:"Module"}));function YNe({domain:e=[0,100],range:t=[10,100],withTick:n=!0,tickLen:r=5,tickFilter:i=s=>s}){const s=I.useMemo(()=>{const o=Bc().domain(e).range(t),a=t[1]-t[0],l=Math.max(1,Math.floor(a/30));return i(o.ticks(l).map(c=>({value:c,xOffset:o(c)})))},[e,t,i]);return _.jsxs("g",{children:[_.jsx("path",{d:["M",t[0],r,"v",-r,"H",t[1],"v",r].join(" "),fill:"none",stroke:"currentColor"}),n&&s.map(({value:o,xOffset:a})=>_.jsxs("g",{transform:`translate(${a}, 0)`,children:[_.jsx("line",{y2:`${r}`,stroke:"currentColor"}),_.jsx("text",{style:{fontSize:"10px",textAnchor:"middle",transform:"translateY(20px)"},children:o},o)]},o))]})}const aIt=Object.freeze(Object.defineProperty({__proto__:null,NumericAxisH:YNe},Symbol.toStringTag,{value:"Module"}));function KNe({data:e,barWidth:t,yScale:n}){return _.jsx("g",{children:e.map((r,i)=>_.jsx("rect",{x:t/2,y:n(r[0][1]),width:t,height:n(r[0][0])-n(r[0][1]),fill:"transparent",stroke:"currentColor"},i))})}const uIt=Object.freeze(Object.defineProperty({__proto__:null,StackedBars:KNe},Symbol.toStringTag,{value:"Module"})),lIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:400,width:400};function cIt({parameters:e}){const[n,r]=KS(lIt),i=s_().domain(e.data.map(h=>h.name)).range([0,r.boundedWidth]).padding(.2),s=Bc().domain([100,0]).range([0,r.boundedWidth]),o=h=>h.filter((p,m)=>m===0||m===h.length-1),a=h=>h.filter((p,m)=>e.selectedIndices.includes(m)),u=h=>{const p=h.map(b=>+b.value),g=p.reduce((b,w)=>Number(b)+Number(w))/100,y={};p.forEach((b,w)=>{y[String.fromCharCode(w+65)]=b/g});const v=[y];return t1t().keys(e.data.map(b=>b.name))(v)},l=(h,p,m)=>h.filter((y,v)=>p.includes(v)).map(y=>({x:m,y:s(y[0][1])+.5*(s(y[0][0])-s(y[0][1]))})),c=u(e.data),f=Math.min(r.width,r.height)/2-20,d=l(c,e.selectedIndices,f);return _.jsx("div",{className:"Chart__wrapper",ref:n,style:{height:"400"},children:_.jsx("svg",{width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft,r.marginTop].join(",")})`,children:[_.jsx("g",{transform:`translate(${[6,r.boundedHeight].join(",")})`,children:_.jsx(YNe,{domain:i.domain(),range:i.range(),withTick:!0,tickLen:0,tickFilter:a})}),_.jsx("g",{transform:"translate(0, 0)",children:_.jsx(LJ,{domain:s.domain(),range:s.range(),withTick:!0,tickLen:6,tickFilter:o})}),_.jsxs("g",{transform:"translate(0, 0)",children:[_.jsx(KNe,{data:c,barWidth:f,yScale:s}),_.jsx(FJ,{positions:d})]})]})})})}const fIt=Object.freeze(Object.defineProperty({__proto__:null,default:cIt},Symbol.toStringTag,{value:"Module"})),dIt={marginBottom:40,marginLeft:40,marginTop:15,marginRight:15,height:650,width:850};function hIt({parameters:e,setAnswer:t}){const[n,r]=KS(dIt),[i,s]=I.useState(100),[o,a]=I.useState(100),[u,l]=I.useState(300),{taskid:c}=e,{actions:f,trrack:d}=I.useMemo(()=>{const p=QF.create(),m=p.register("click",(y,v)=>(y.clickX=v.clickX,y.clickY=v.clickY,y.distance=v.distance,y)),g=FNe({registry:p,initialState:{distance:0,speed:10,clickX:0,clickY:0}});return{actions:{clickAction:m},trrack:g}},[]),h=I.useCallback(p=>{const m=xi("#movingCircle"),g=xi("#clickAccuracySvg"),y=Dz(p,g.node()),v=[+m.attr("cx"),+m.attr("cy")],b=`${Math.round(Math.sqrt((y[0]-v[0])**2+(y[1]-v[1])**2))}px`;d.apply("Clicked",f.clickAction({distance:+b,clickX:y[0],clickY:y[1]})),t({status:!0,provenanceGraph:d.graph.backend,answers:{[c]:b}})},[f,t,c,d]);return I.useEffect(()=>{const p=Math.random()*800,m=Math.random()*600,y=Math.sqrt((p-i)**2+(m-o)**2)/u*1e3;xi(n.current).select("circle").transition().duration(y).ease(ept).attr("cx",p).attr("cy",m).on("end",()=>{s(p),a(m)})},[n,u,i,o]),_.jsxs(_.Fragment,{children:[_.jsx("div",{className:"Chart__wrapper",ref:n,onClick:h,style:{height:"650px"},children:_.jsx("svg",{id:"clickAccuracySvg",width:r.width,height:r.height,children:_.jsxs("g",{transform:`translate(${[r.marginLeft/2,r.marginTop/2].join(",")})`,children:[_.jsx("rect",{width:"800",height:"600",stroke:"black",strokeWidth:"5",fill:"none"}),_.jsx("circle",{id:"movingCircle",cx:"100",cy:"100",r:"10"})]})})}),_.jsxs(me,{children:["Adjust speed (px/s):",_.jsx(L6,{w:800,min:10,max:1e3,value:u,onChange:l})]})]})}const pIt=Object.freeze(Object.defineProperty({__proto__:null,default:hIt},Symbol.toStringTag,{value:"Module"}));function dhe({rankings:e}){return _.jsx("div",{style:{fontFamily:"sans-serif"},children:_.jsx("div",{children:e.map((t,n)=>_.jsx("div",{style:{textAlign:"center",marginBottom:1,padding:2,background:`${t===0?"#AEC7E8":"#FF9896"}`},children:t===0?"Group A":"Group B"},n))})})}function mIt({parameters:e,setAnswer:t}){const n=Xy(),[r,i]=I.useState(""),{goToNextStep:s,isNextDisabled:o}=pTe(),a=I.useMemo(()=>Math.floor(Math.random()*2)===0?"r1":"r2",[]),[u]=I.useState(new URLSearchParams(window.location.search)),l=(u.get("admin")||"f")==="t",c=I.useCallback(h=>{i(h),t({status:!0,answers:{[`${n}/leftARP`]:a==="r1"?e.data.r1ARP:e.data.r2ARP,[`${n}/rightARP`]:a==="r2"?e.data.r1ARP:e.data.r2ARP,[`${n}/leftRanking`]:JSON.stringify(a==="r1"?e.data.r1:e.data.r2),[`${n}/rightRanking`]:JSON.stringify(a==="r2"?e.data.r1:e.data.r2),[`${n}/choice`]:h,[`${n}/correctChoice`]:a==="r1"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)?"left":"right"}})},[n,a,e.data,t]),f=I.useCallback(()=>{o||s()},[o,s]);I.useEffect(()=>{const h=uVe([["ArrowLeft",()=>c("left")],["ArrowRight",()=>c("right")],["Enter",f]]);return document.body.addEventListener("keydown",h),()=>{document.body.removeEventListener("keydown",h)}},[c,f]);let d=!1;return a==="r1"?(r==="left"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP)||r==="right"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP))&&(d=!0):(r==="left"&&parseFloat(e.data.r2ARP)<parseFloat(e.data.r1ARP)||r==="right"&&parseFloat(e.data.r1ARP)<parseFloat(e.data.r2ARP))&&(d=!0),_.jsxs("div",{children:[_.jsxs(Ga,{children:[_.jsxs(Ga.Col,{span:2,children:[_.jsx(dhe,{rankings:a==="r1"?e.data.r1:e.data.r2}),_.jsx(cn,{fullWidth:!0,disabled:r==="left",onClick:()=>{c("left")},children:r==="left"?_.jsx(yue,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r1ARP:e.data.r2ARP})]}),_.jsxs(Ga.Col,{span:2,children:[_.jsx(dhe,{rankings:a==="r1"?e.data.r2:e.data.r1}),_.jsx(cn,{fullWidth:!0,disabled:r==="right",onClick:()=>{c("right")},children:r==="right"?_.jsx(yue,{}):"Select this ranking"}),l&&r&&_.jsx("div",{children:a==="r1"?e.data.r2ARP:e.data.r1ARP})]})]}),l&&r&&_.jsx("div",{style:{padding:20,textAlign:"center",width:300},children:d?"CORRECT":"INCORRECT"})]})}const gIt=Object.freeze(Object.defineProperty({__proto__:null,default:mIt},Symbol.toStringTag,{value:"Module"})),hhe=Object.assign({"../public/basic-questionnaire-study/SalaryDataChart.tsx":n1t,"../public/basic-questionnaire-study/SalaryDataChartPie.tsx":r1t,"../public/basic-questionnaire-study/chartcomponents/Bars.tsx":s1t,"../public/basic-questionnaire-study/chartcomponents/Bubbles.tsx":a1t,"../public/basic-questionnaire-study/chartcomponents/DotMarks.tsx":l1t,"../public/basic-questionnaire-study/chartcomponents/NumericAxisH.tsx":f1t,"../public/basic-questionnaire-study/chartcomponents/NumericAxisV.tsx":h1t,"../public/basic-questionnaire-study/chartcomponents/OrdinalAxisHWithDotMarks.tsx":m1t,"../public/basic-questionnaire-study/chartcomponents/Slices.tsx":y1t,"../public/basic-questionnaire-study/chartcomponents/SlicesDotMarks.tsx":b1t,"../public/basic-questionnaire-study/chartcomponents/StackedBars.tsx":w1t,"../public/demo-brush-interactions/assets/Bar.tsx":S1t,"../public/demo-brush-interactions/assets/BrushPlot.tsx":j2t,"../public/demo-brush-interactions/assets/Paintbrush.tsx":L2t,"../public/demo-brush-interactions/assets/Scatter.tsx":F2t,"../public/demo-brush-interactions/assets/XAxisBar.tsx":E1t,"../public/demo-brush-interactions/assets/YAxis.tsx":M2t,"../public/demo-brush-interactions/assets/YAxisBar.tsx":x1t,"../public/demo-brush-interactions/assets/types.ts":B2t,"../public/demo-cleveland/assets/BarChart.tsx":G2t,"../public/demo-cleveland/assets/BubbleChart.tsx":eIt,"../public/demo-cleveland/assets/PieChart.tsx":oIt,"../public/demo-cleveland/assets/StackedBarChart.tsx":fIt,"../public/demo-cleveland/assets/chartcomponents/Bars.tsx":z2t,"../public/demo-cleveland/assets/chartcomponents/Bubbles.tsx":Y2t,"../public/demo-cleveland/assets/chartcomponents/DotMarks.tsx":K2t,"../public/demo-cleveland/assets/chartcomponents/NumericAxisH.tsx":aIt,"../public/demo-cleveland/assets/chartcomponents/NumericAxisV.tsx":V2t,"../public/demo-cleveland/assets/chartcomponents/OrdinalAxisHWithDotMarks.tsx":H2t,"../public/demo-cleveland/assets/chartcomponents/Slices.tsx":tIt,"../public/demo-cleveland/assets/chartcomponents/SlicesDotMarks.tsx":nIt,"../public/demo-cleveland/assets/chartcomponents/StackedBars.tsx":uIt,"../public/demo-cleveland/assets/hooks/useChartDimensions.tsx":U2t,"../public/demo-click-accuracy-test/assets/ClickAccuracyTest.tsx":pIt,"../public/demo-fairness-jnd/assets/FairnessJND.tsx":gIt});function yIt({currentConfig:e}){const t=ag(),n=Xy(),r=`../public/${e.path}`,i=r in hhe?hhe[r].default:null,s=ep(),{updateResponseBlockValidation:o,setIframeAnswers:a}=Zh();function u({status:l,provenanceGraph:c,answers:f}){s(o({location:"sidebar",identifier:`${n}_${t}`,status:l,values:f,provenanceGraph:c})),s(a(f))}return _.jsx(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:i?_.jsx(i,{parameters:e.parameters,setAnswer:u}):_.jsx(ob,{path:e.path})})}function vIt({currentConfig:e}){const[t,n]=I.useState(""),[r,i]=I.useState(!0);return I.useEffect(()=>{async function s(){const o=await aX(e.path);o!==void 0&&n(o),i(!1)}s()},[e.path]),r||t?_.jsx(eu,{text:t}):_.jsx(ob,{path:e.path})}const bIt={},_It=Object.freeze(Object.defineProperty({__proto__:null,default:bIt},Symbol.toStringTag,{value:"Module"})),wIt=S9e(_It);var EIt=wIt;function xIt(e,t){var n,r="",i=0,s=!0,o=0,a;function u(){return a=e.charAt(o),o++,a}for(u(),a==="-"&&(r="-",u());a>="0"&&a<="9";)s&&(a=="0"?i++:s=!1),r+=a,u();if(s&&i--,a===".")for(r+=".";u()&&a>="0"&&a<="9";)r+=a;if(a==="e"||a==="E")for(r+=a,u(),(a==="-"||a==="+")&&(r+=a,u());a>="0"&&a<="9";)r+=a,u();for(;a&&a<=" ";)u();if(t&&(a===","||a==="}"||a==="]"||a==="#"||a==="/"&&(e[o]==="/"||e[o]==="*"))&&(a=0),n=+r,!(a||i||!isFinite(n)))return n}function SIt(e,t){return Object.defineProperty&&Object.defineProperty(e,"__COMMENTS__",{enumerable:!1,writable:!0}),e.__COMMENTS__=t||{}}function TIt(e){Object.defineProperty(e,"__COMMENTS__",{value:void 0})}function AIt(e){return e.__COMMENTS__}function CIt(e){if(!e)return"";var t=e.split(`
`),n,r,i,s;for(i=0;i<t.length;i++)for(n=t[i],s=n.length,r=0;r<s;r++){var o=n[r];if(o==="#")break;if(o==="/"&&(n[r+1]==="/"||n[r+1]==="*")){n[r+1]==="*"&&(i=t.length);break}else if(o>" "){t[i]="# "+n;break}}return t.join(`
`)}var JF={EOL:EIt.EOL||`
`,tryParseNumber:xIt,createComment:SIt,removeComment:TIt,getComment:AIt,forceComment:CIt},IIt="3.2.1";function kIt(e,t){if(Object.prototype.toString.apply(e)!=="[object Array]"){if(e)throw new Error("dsf option must contain an array!");return phe}else if(e.length===0)return phe;var n=[];function r(i){return{}.toString.call(i)==="[object Function]"}return e.forEach(function(i){if(!i.name||!r(i.parse)||!r(i.stringify))throw new Error("extension does not match the DSF interface");n.push(function(){try{if(t=="parse")return i.parse.apply(null,arguments);if(t=="stringify"){var s=i.stringify.apply(null,arguments);if(s!==void 0&&(typeof s!="string"||s.length===0||s[0]==='"'||[].some.call(s,function(o){return NIt(o)})))throw new Error("value may not be empty, start with a quote or contain a punctuator character except colon: "+s);return s}else throw new Error("Invalid type")}catch(o){throw new Error("DSF-"+i.name+" failed; "+o.message)}})}),RIt.bind(null,n)}function RIt(e,t){if(e)for(var n=0;n<e.length;n++){var r=e[n](t);if(r!==void 0)return r}}function phe(){}function NIt(e){return e==="{"||e==="}"||e==="["||e==="]"||e===","}function XNe(){return{name:"math",parse:function(e){switch(e){case"+inf":case"inf":case"+Inf":case"Inf":return 1/0;case"-inf":case"-Inf":return-1/0;case"nan":case"NaN":return NaN}},stringify:function(e){if(typeof e=="number"){if(1/e===-1/0)return"-0";if(e===1/0)return"Inf";if(e===-1/0)return"-Inf";if(isNaN(e))return"NaN"}}}}XNe.description="support for Inf/inf, -Inf/-inf, Nan/naN and -0";function QNe(e){var t=e&&e.out;return{name:"hex",parse:function(n){if(/^0x[0-9A-Fa-f]+$/.test(n))return parseInt(n,16)},stringify:function(n){if(t&&Number.isInteger(n))return"0x"+n.toString(16)}}}QNe.description="parse hexadecimal numbers prefixed with 0x";function JNe(){return{name:"date",parse:function(e){if(/^\d{4}-\d{2}-\d{2}$/.test(e)||/^\d{4}-\d{2}-\d{2}T\d{2}\:\d{2}\:\d{2}(?:.\d+)(?:Z|[+-]\d{2}:\d{2})$/.test(e)){var t=Date.parse(e);if(!isNaN(t))return new Date(t)}},stringify:function(e){if(Object.prototype.toString.call(e)==="[object Date]"){var t=e.toISOString();return t.indexOf("T00:00:00.000Z",t.length-14)!==-1?t.substr(0,10):t}}}}JNe.description="support ISO dates";var jJ={loadDsf:kIt,std:{math:XNe,hex:QNe,date:JNe}},PIt=function(e,t){var n=JF,r=jJ,i,s,o,a={'"':'"',"'":"'","\\":"\\","/":"/",b:"\b",f:"\f",n:`
`,r:"\r",t:"	"},u,l;function c(){s=0,o=" "}function f($){return $==="{"||$==="}"||$==="["||$==="]"||$===","||$===":"}function d($){var F,M=0,B=1;for(F=s-1;F>0&&i[F]!==`
`;F--,M++);for(;F>0;F--)i[F]===`
`&&B++;throw new Error($+" at line "+B+","+M+" >>>"+i.substr(s-M,20)+" ...")}function h(){return o=i.charAt(s),s++,o}function p($){return i.charAt(s+$)}function m($){for(var F="",M=o;h();){if(o===M)return h(),$&&M==="'"&&o==="'"&&F.length===0?(h(),g()):F;if(o==="\\")if(h(),o==="u"){for(var B=0,U=0;U<4;U++){h();var H=o.charCodeAt(0),P;o>="0"&&o<="9"?P=H-48:o>="a"&&o<="f"?P=H-97+10:o>="A"&&o<="F"?P=H-65+10:d("Bad \\u char "+o),B=B*16+P}F+=String.fromCharCode(B)}else if(typeof a[o]=="string")F+=a[o];else break;else o===`
`||o==="\r"?d("Bad string containing newline"):F+=o}d("Bad string")}function g(){for(var $="",F=0,M=0;;){var B=p(-M-5);if(!B||B===`
`)break;M++}function U(){for(var H=M;o&&o<=" "&&o!==`
`&&H-- >0;)h()}for(;o&&o<=" "&&o!==`
`;)h();for(o===`
`&&(h(),U());;){if(!o)d("Bad multiline string");else if(o==="'"){if(F++,h(),F===3)return $.slice(-1)===`
`&&($=$.slice(0,-1)),$;continue}else for(;F>0;)$+="'",F--;o===`
`?($+=`
`,h(),U()):(o!=="\r"&&($+=o),h())}}function y(){if(o==='"'||o==="'")return m(!1);for(var $="",F=s,M=-1;;){if(o===":")return $?M>=0&&M!==$.length&&(s=F+M,d("Found whitespace in your key name (use quotes to include)")):d("Found ':' but no key name (for an empty key name use quotes)"),$;o<=" "?o?M<0&&(M=$.length):d("Found EOF while looking for a key name (check your syntax)"):f(o)?d("Found '"+o+"' where a key name was expected (check your syntax or use quotes if the key name includes {}[],: or whitespace)"):$+=o,h()}}function v(){for(;o;){for(;o&&o<=" ";)h();if(o==="#"||o==="/"&&p(0)==="/")for(;o&&o!==`
`;)h();else if(o==="/"&&p(0)==="*"){for(h(),h();o&&!(o==="*"&&p(0)==="/");)h();o&&(h(),h())}else break}}function b(){var $=o;for(f(o)&&d("Found a punctuator character '"+o+"' when expecting a quoteless string (check your syntax)");;){h();var F=o==="\r"||o===`
`||o==="";if(F||o===","||o==="}"||o==="]"||o==="#"||o==="/"&&(p(0)==="/"||p(0)==="*")){var M=$[0];switch(M){case"f":if($.trim()==="false")return!1;break;case"n":if($.trim()==="null")return null;break;case"t":if($.trim()==="true")return!0;break;default:if(M==="-"||M>="0"&&M<="9"){var B=n.tryParseNumber($);if(B!==void 0)return B}}if(F){$=$.trim();var U=l($);return U!==void 0?U:$}}$+=o}}function w($,F){var M;for($--,M=s-2;M>$&&i[M]<=" "&&i[M]!==`
`;M--);i[M]===`
`&&M--,i[M]==="\r"&&M--;var B=i.substr($,M-$+1);for(M=0;M<B.length;M++)if(B[M]>" "){var U=B.indexOf(`
`);if(U>=0){var H=[B.substr(0,U),B.substr(U+1)];return F&&H[0].trim().length===0&&H.shift(),H}else return[B]}return[]}function E($){function F(B,U){var H,P,z,W;switch(typeof B){case"string":B.indexOf(U)>=0&&(W=B);break;case"object":if(Object.prototype.toString.apply(B)==="[object Array]")for(H=0,z=B.length;H<z;H++)W=F(B[H],U)||W;else for(P in B)Object.prototype.hasOwnProperty.call(B,P)&&(W=F(B[P],U)||W)}return W}function M(B){var U=F($,B);return U?"found '"+B+`' in a string value, your mistake could be with:
  > `+U+`
  (unquoted strings contain everything up to the next line!)`:""}return M("}")||M("]")}function T(){var $=[],F,M,B;try{if(u&&(F=n.createComment($,{a:[]})),h(),M=s,v(),F&&(B=w(M,!0).join(`
`)),o==="]")return h(),F&&(F.e=[B]),$;for(;o;){if($.push(A()),M=s,v(),o===","&&(h(),M=s,v()),F){var U=w(M);F.a.push([B||"",U[0]||""]),B=U[1]}if(o==="]")return h(),F&&(F.a[F.a.length-1][1]+=B||""),$;v()}d("End of input while parsing an array (missing ']')")}catch(H){throw H.hint=H.hint||E($),H}}function S($){var F="",M={},B,U,H;try{if(u&&(B=n.createComment(M,{c:{},o:[]})),$?U=1:(h(),U=s),v(),B&&(H=w(U,!0).join(`
`)),o==="}"&&!$)return B&&(B.e=[H]),h(),M;for(;o;){if(F=y(),v(),o!==":"&&d("Expected ':' instead of '"+o+"'"),h(),M[F]=A(),U=s,v(),o===","&&(h(),U=s,v()),B){var P=w(U);B.c[F]=[H||"",P[0]||""],H=P[1],B.o.push(F)}if(o==="}"&&!$)return h(),B&&(B.c[F][1]+=H||""),M;v()}if($)return M;d("End of input while parsing an object (missing '}')")}catch(z){throw z.hint=z.hint||E(M),z}}function A(){switch(v(),o){case"{":return S();case"[":return T();case"'":case'"':return m(!0);default:return b()}}function C($,F){var M=s;if(v(),o&&d("Syntax error, found trailing characters"),u){var B=F.join(`
`),U=w(M).join(`
`);if(U||B){var H=n.createComment($,n.getComment($));H.r=[B,U]}}return $}function k(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$);default:return C(A(),$)}}function N(){v();var $=u?w(1):null;switch(o){case"{":return C(S(),$);case"[":return C(T(),$)}try{return C(S(!0),$)}catch(F){c();try{return C(A(),$)}catch{throw F}}}if(typeof e!="string")throw new Error("source is not a string");var D=null,O=!0;return t&&typeof t=="object"&&(u=t.keepWsc,D=t.dsf,O=t.legacyRoot!==!1),l=r.loadDsf(D,"parse"),i=e,c(),O?N():k()},OIt=function(e,t){var n=JF,r=jJ,i={obj:["{","}"],arr:["[","]"],key:["",""],qkey:['"','"'],col:[":",""],com:[",",""],str:["",""],qstr:['"','"'],mstr:["'''","'''"],num:["",""],lit:["",""],dsf:["",""],esc:["\\",""],uni:["\\u",""],rem:["",""]},s=n.EOL,o="  ",a=!1,u=!1,l=!1,c=!1,f=0,d=1,h="",p=null,m=!1,g=i;if(t&&typeof t=="object"){t.quotes=t.quotes==="always"?"strings":t.quotes,(t.eol===`
`||t.eol===`\r
`)&&(s=t.eol),a=t.keepWsc,f=t.condense||0,u=t.bracesSameLine,l=t.quotes==="all"||t.quotes==="keys",c=t.quotes==="all"||t.quotes==="strings"||t.separator===!0,c||t.multiline=="off"?d=0:d=t.multiline=="no-tabs"?2:1,h=t.separator===!0?g.com[0]:"",p=t.dsf,m=t.sortProps,typeof t.space=="number"?o=new Array(t.space+1).join(" "):typeof t.space=="string"&&(o=t.space),t.colors===!0&&(g={obj:["\x1B[37m{\x1B[0m","\x1B[37m}\x1B[0m"],arr:["\x1B[37m[\x1B[0m","\x1B[37m]\x1B[0m"],key:["\x1B[33m","\x1B[0m"],qkey:['\x1B[33m"','"\x1B[0m'],col:["\x1B[37m:\x1B[0m",""],com:["\x1B[37m,\x1B[0m",""],str:["\x1B[37;1m","\x1B[0m"],qstr:['\x1B[37;1m"','"\x1B[0m'],mstr:["\x1B[37;1m'''","'''\x1B[0m"],num:["\x1B[36;1m","\x1B[0m"],lit:["\x1B[36m","\x1B[0m"],dsf:["\x1B[37m","\x1B[0m"],esc:["\x1B[31m\\","\x1B[0m"],uni:["\x1B[31m\\u","\x1B[0m"],rem:["\x1B[35m","\x1B[0m"]});var y,v=Object.keys(i);for(y=v.length-1;y>=0;y--){var b=v[y];g[b].push(i[b][0].length,i[b][1].length)}}var w,E="---\u2028--\uFEFF-",T=new RegExp('[\\\\\\"\0-'+E+"]","g"),S=new RegExp(`^\\s|^"|^'|^#|^\\/\\*|^\\/\\/|^\\{|^\\}|^\\[|^\\]|^:|^,|\\s$|[\0-`+E+"]","g"),A=new RegExp("'''|^[\\s]+$|[\0-"+(d===2?"	":"\b")+"\v\f-"+E+"]","g"),C=new RegExp("^(true|false|null)\\s*((,|\\]|\\}|#|//|/\\*).*)?$"),k={"\b":"b","	":"t","\n":"n","\f":"f","\r":"r",'"':'"',"\\":"\\"},N=/[,\{\[\}\]\s:#"']|\/\/|\/\*/,D="",O=0;function $(W,j){return O+=W[0].length+W[1].length-W[2]-W[3],W[0]+j+W[1]}function F(W){return W.replace(T,function(j){var q=k[j];return typeof q=="string"?$(g.esc,q):$(g.uni,("0000"+j.charCodeAt(0).toString(16)).slice(-4))})}function M(W,j,q,G){return W?(S.lastIndex=0,C.lastIndex=0,c||q||S.test(W)||n.tryParseNumber(W,!0)!==void 0||C.test(W)?(T.lastIndex=0,A.lastIndex=0,T.test(W)?!A.test(W)&&!G&&d?B(W,j):$(g.qstr,F(W)):$(g.qstr,W)):$(g.str,W)):$(g.qstr,"")}function B(W,j){var q,G=W.replace(/\r/g,"").split(`
`);if(j+=o,G.length===1)return $(g.mstr,G[0]);var ne=s+j+g.mstr[0];for(q=0;q<G.length;q++)ne+=s,G[q]&&(ne+=j+G[q]);return ne+s+j+g.mstr[1]}function U(W){return W?l||N.test(W)?(T.lastIndex=0,$(g.qkey,T.test(W)?F(W):W)):$(g.key,W):'""'}function H(W,j,q,G){function ne(yn){return yn&&yn[yn[0]==="\r"?1:0]===`
`}function ce(yn){return yn&&!ne(yn)}function de(yn,In,ir){if(!yn)return"";yn=n.forceComment(yn);var sr,qo=yn.length;for(sr=0;sr<qo&&yn[sr]<=" ";sr++);return ir&&sr>0&&(yn=yn.substr(sr)),sr<qo?In+$(g.rem,yn):yn}var he=w(W);if(he!==void 0)return $(g.dsf,he);switch(typeof W){case"string":return M(W,D,j,G);case"number":return isFinite(W)?$(g.num,String(W)):$(g.lit,"null");case"boolean":return $(g.lit,String(W));case"object":if(!W)return $(g.lit,"null");var ve;a&&(ve=n.getComment(W));var Ie=Object.prototype.toString.apply(W)==="[object Array]",be=D;D+=o;var Xe=s+be,ze=s+D,yt=q||u?"":Xe,it=[],_e,ke=f?[]:null,Ve=c,ct=d,Dt=h?"":g.com[0],Ge=0,ge,ht,vt,pe,Ce,qe,ut,_t,Fn;if(Ie){for(ge=0,ht=W.length;ge<ht;ge++){if(_e=ge<ht-1,ve?(qe=ve.a[ge]||[],ut=ce(qe[1]),it.push(de(qe[0],`
`)+ze),ke&&(qe[0]||qe[1]||ut)&&(ke=null)):it.push(ze),O=0,pe=W[ge],it.push(H(pe,ve?ut:!1,!0)+(_e?h:"")),ke){switch(typeof pe){case"string":O=0,c=!0,d=0,ke.push(H(pe,!1,!0)+(_e?g.com[0]:"")),c=Ve,d=ct;break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Dt:""));break}_e&&(O+=g.com[0].length-g.com[2]),Ge+=O}ve&&qe[1]&&it.push(de(qe[1],ut?" ":`
`,ut))}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Xe):it.push(Xe),it.length===0?_t=$(g.arr,""):(_t=yt+$(g.arr,it.join("")),ke&&(Fn=ke.join(" "),Fn.length-Ge<=f&&(_t=$(g.arr,Fn))))}else{var Ir=ve?ve.o.slice():[],jn=[];for(vt in W)Object.prototype.hasOwnProperty.call(W,vt)&&Ir.indexOf(vt)<0&&jn.push(vt);m&&jn.sort();var dr=Ir.concat(jn);for(ge=0,ht=dr.length;ge<ht;ge++)if(_e=ge<ht-1,vt=dr[ge],ve?(qe=ve.c[vt]||[],ut=ce(qe[1]),it.push(de(qe[0],`
`)+ze),ke&&(qe[0]||qe[1]||ut)&&(ke=null)):it.push(ze),O=0,pe=W[vt],Ce=H(pe,ve&&ut),it.push(U(vt)+g.col[0]+(ne(Ce)?"":" ")+Ce+(_e?h:"")),ve&&qe[1]&&it.push(de(qe[1],ut?" ":`
`,ut)),ke){switch(typeof pe){case"string":O=0,c=!0,d=0,Ce=H(pe,!1),c=Ve,d=ct,ke.push(U(vt)+g.col[0]+" "+Ce+(_e?g.com[0]:""));break;case"object":if(pe){ke=null;break}default:ke.push(it[it.length-1]+(_e?Dt:""));break}O+=g.col[0].length-g.col[2],_e&&(O+=g.com[0].length-g.com[2]),Ge+=O}ht===0?ve&&ve.e&&it.push(de(ve.e[0],`
`)+Xe):it.push(Xe),it.length===0?_t=$(g.obj,""):(_t=yt+$(g.obj,it.join("")),ke&&(Fn=ke.join(" "),Fn.length-Ge<=f&&(_t=$(g.obj,Fn))))}return D=be,_t}}w=r.loadDsf(p,"stringify");var P="",z=a?z=(n.getComment(e)||{}).r:null;return z&&z[0]&&(P=z[0]+`
`),P+=H(e,null,!0,!0),z&&(P+=z[1]||""),P},AE=JF;function t2(e,t,n){var r;return e&&(r={b:e}),t&&((r=r||{}).a=t),n&&((r=r||{}).x=n),r}function uH(e,t){if(!(e===null||typeof e!="object")){var n=AE.getComment(e);n&&AE.removeComment(e);var r,i,s,o;if(Object.prototype.toString.apply(e)==="[object Array]"){for(o={a:{}},r=0,i=e.length;r<i;r++)mhe(o.a,r,n.a[r],uH(e[r]))&&(s=!0);!s&&n.e&&(o.e=t2(n.e[0],n.e[1]),s=!0)}else{o={s:{}};var a,u=Object.keys(e);for(n&&n.o?(a=[],n.o.concat(u).forEach(function(c){Object.prototype.hasOwnProperty.call(e,c)&&a.indexOf(c)<0&&a.push(c)})):a=u,o.o=a,r=0,i=a.length;r<i;r++){var l=a[r];mhe(o.s,l,n.c[l],uH(e[l]))&&(s=!0)}!s&&n.e&&(o.e=t2(n.e[0],n.e[1]),s=!0)}return t&&n&&n.r&&(o.r=t2(n.r[0],n.r[1])),s?o:void 0}}function DIt(){var e="";return[].forEach.call(arguments,function(t){t&&t.trim()!==""&&(e&&(e+="; "),e+=t.trim())}),e}function $It(e,t){var n=[];if(lH(e,t,n,[]),n.length>0){var r=f3(t,null,1);r+=`
# Orphaned comments:
`,n.forEach(function(i){r+=("# "+i.path.join("/")+": "+DIt(i.b,i.a,i.e)).replace(`
`,"\\n ")+`
`}),f3(t,r,1)}}function mhe(e,t,n,r){var i=t2(n?n[0]:void 0,n?n[1]:void 0,r);return i&&(e[t]=i),i}function n2(e,t){var n=t2(t.b,t.a);return n.path=e,n}function r2(e,t,n){if(e){var r,i;if(e.a)for(r=0,i=e.a.length;r<i;r++){var s=n.slice().concat([r]),o=e.a[r];o&&(t.push(n2(s,o)),r2(o.x,t,s))}else e.o&&e.o.forEach(function(a){var u=n.slice().concat([a]),l=e.s[a];l&&(t.push(n2(u,l)),r2(l.x,t,u))});e.e&&t.push(n2(n,e.e))}}function lH(e,t,n,r){if(e){if(t===null||typeof t!="object"){r2(e,n,r);return}var i,s=AE.createComment(t);if(r.length===0&&e.r&&(s.r=[e.r.b,e.r.a]),Object.prototype.toString.apply(t)==="[object Array]"){s.a=[];var o=e.a||{};for(var a in o)if(o.hasOwnProperty(a)){i=parseInt(a);var u=e.a[a];if(u){var l=r.slice().concat([i]);i<t.length?(s.a[i]=[u.b,u.a],lH(u.x,t[i],n,l)):(n.push(n2(l,u)),r2(u.x,n,l))}}i===0&&e.e&&(s.e=[e.e.b,e.e.a])}else s.c={},s.o=[],(e.o||[]).forEach(function(c){var f=r.slice().concat([c]),d=e.s[c];Object.prototype.hasOwnProperty.call(t,c)?(s.o.push(c),d&&(s.c[c]=[d.b,d.a],lH(d.x,t[c],n,f))):d&&(n.push(n2(f,d)),r2(d.x,n,f))}),e.e&&(s.e=[e.e.b,e.e.a])}}function f3(e,t,n){var r=AE.createComment(e,AE.getComment(e));return r.r||(r.r=["",""]),(t||t==="")&&(r.r[n]=AE.forceComment(t)),r.r[n]||""}var MIt={extract:function(e){return uH(e,!0)},merge:$It,header:function(e,t){return f3(e,t,0)},footer:function(e,t){return f3(e,t,1)}};/*!
 * Hjson v3.2.1
 * https://hjson.github.io
 *
 * Copyright 2014-2017 Christian Zangl, MIT license
 * Details and documentation:
 * https://github.com/hjson/hjson-js
 *
 * This code is based on the the JSON version by Douglas Crockford:
 * https://github.com/douglascrockford/JSON-js (json_parse.js, json2.js)
 */var ghe=JF,LIt=IIt,yhe=PIt,vhe=OIt,FIt=MIt,jIt=jJ,BJ={parse:yhe,stringify:vhe,endOfLine:function(){return ghe.EOL},setEndOfLine:function(e){(e===`
`||e===`\r
`)&&(ghe.EOL=e)},version:LIt,rt:{parse:function(e,t){return(t=t||{}).keepWsc=!0,yhe(e,t)},stringify:function(e,t){return(t=t||{}).keepWsc=!0,vhe(e,t)}},comments:FIt,dsf:jIt.std},cH={exports:{}},ZNe={},Wf={},kx={},lR={},Dn={},OI={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.regexpCode=e.getEsmExportName=e.getProperty=e.safeStringify=e.stringify=e.strConcat=e.addCodeArg=e.str=e._=e.nil=e._Code=e.Name=e.IDENTIFIER=e._CodeOrName=void 0;class t{}e._CodeOrName=t,e.IDENTIFIER=/^[a-z$_][a-z$_0-9]*$/i;class n extends t{constructor(v){if(super(),!e.IDENTIFIER.test(v))throw new Error("CodeGen: name must be a valid identifier");this.str=v}toString(){return this.str}emptyStr(){return!1}get names(){return{[this.str]:1}}}e.Name=n;class r extends t{constructor(v){super(),this._items=typeof v=="string"?[v]:v}toString(){return this.str}emptyStr(){if(this._items.length>1)return!1;const v=this._items[0];return v===""||v==='""'}get str(){var v;return(v=this._str)!==null&&v!==void 0?v:this._str=this._items.reduce((b,w)=>`${b}${w}`,"")}get names(){var v;return(v=this._names)!==null&&v!==void 0?v:this._names=this._items.reduce((b,w)=>(w instanceof n&&(b[w.str]=(b[w.str]||0)+1),b),{})}}e._Code=r,e.nil=new r("");function i(y,...v){const b=[y[0]];let w=0;for(;w<v.length;)a(b,v[w]),b.push(y[++w]);return new r(b)}e._=i;const s=new r("+");function o(y,...v){const b=[h(y[0])];let w=0;for(;w<v.length;)b.push(s),a(b,v[w]),b.push(s,h(y[++w]));return u(b),new r(b)}e.str=o;function a(y,v){v instanceof r?y.push(...v._items):v instanceof n?y.push(v):y.push(f(v))}e.addCodeArg=a;function u(y){let v=1;for(;v<y.length-1;){if(y[v]===s){const b=l(y[v-1],y[v+1]);if(b!==void 0){y.splice(v-1,3,b);continue}y[v++]="+"}v++}}function l(y,v){if(v==='""')return y;if(y==='""')return v;if(typeof y=="string")return v instanceof n||y[y.length-1]!=='"'?void 0:typeof v!="string"?`${y.slice(0,-1)}${v}"`:v[0]==='"'?y.slice(0,-1)+v.slice(1):void 0;if(typeof v=="string"&&v[0]==='"'&&!(y instanceof n))return`"${y}${v.slice(1)}`}function c(y,v){return v.emptyStr()?y:y.emptyStr()?v:o`${y}${v}`}e.strConcat=c;function f(y){return typeof y=="number"||typeof y=="boolean"||y===null?y:h(Array.isArray(y)?y.join(","):y)}function d(y){return new r(h(y))}e.stringify=d;function h(y){return JSON.stringify(y).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")}e.safeStringify=h;function p(y){return typeof y=="string"&&e.IDENTIFIER.test(y)?new r(`.${y}`):i`[${y}]`}e.getProperty=p;function m(y){if(typeof y=="string"&&e.IDENTIFIER.test(y))return new r(`${y}`);throw new Error(`CodeGen: invalid export name: ${y}, use explicit $id name mapping`)}e.getEsmExportName=m;function g(y){return new r(y.toString())}e.regexpCode=g})(OI);var fH={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ValueScope=e.ValueScopeName=e.Scope=e.varKinds=e.UsedValueState=void 0;const t=OI;class n extends Error{constructor(l){super(`CodeGen: "code" for ${l} not defined`),this.value=l.value}}var r;(function(u){u[u.Started=0]="Started",u[u.Completed=1]="Completed"})(r||(e.UsedValueState=r={})),e.varKinds={const:new t.Name("const"),let:new t.Name("let"),var:new t.Name("var")};class i{constructor({prefixes:l,parent:c}={}){this._names={},this._prefixes=l,this._parent=c}toName(l){return l instanceof t.Name?l:this.name(l)}name(l){return new t.Name(this._newName(l))}_newName(l){const c=this._names[l]||this._nameGroup(l);return`${l}${c.index++}`}_nameGroup(l){var c,f;if(!((f=(c=this._parent)===null||c===void 0?void 0:c._prefixes)===null||f===void 0)&&f.has(l)||this._prefixes&&!this._prefixes.has(l))throw new Error(`CodeGen: prefix "${l}" is not allowed in this scope`);return this._names[l]={prefix:l,index:0}}}e.Scope=i;class s extends t.Name{constructor(l,c){super(c),this.prefix=l}setValue(l,{property:c,itemIndex:f}){this.value=l,this.scopePath=(0,t._)`.${new t.Name(c)}[${f}]`}}e.ValueScopeName=s;const o=(0,t._)`\n`;class a extends i{constructor(l){super(l),this._values={},this._scope=l.scope,this.opts={...l,_n:l.lines?o:t.nil}}get(){return this._scope}name(l){return new s(l,this._newName(l))}value(l,c){var f;if(c.ref===void 0)throw new Error("CodeGen: ref must be passed in value");const d=this.toName(l),{prefix:h}=d,p=(f=c.key)!==null&&f!==void 0?f:c.ref;let m=this._values[h];if(m){const v=m.get(p);if(v)return v}else m=this._values[h]=new Map;m.set(p,d);const g=this._scope[h]||(this._scope[h]=[]),y=g.length;return g[y]=c.ref,d.setValue(c,{property:h,itemIndex:y}),d}getValue(l,c){const f=this._values[l];if(f)return f.get(c)}scopeRefs(l,c=this._values){return this._reduceValues(c,f=>{if(f.scopePath===void 0)throw new Error(`CodeGen: name "${f}" has no value`);return(0,t._)`${l}${f.scopePath}`})}scopeCode(l=this._values,c,f){return this._reduceValues(l,d=>{if(d.value===void 0)throw new Error(`CodeGen: name "${d}" has no value`);return d.value.code},c,f)}_reduceValues(l,c,f={},d){let h=t.nil;for(const p in l){const m=l[p];if(!m)continue;const g=f[p]=f[p]||new Map;m.forEach(y=>{if(g.has(y))return;g.set(y,r.Started);let v=c(y);if(v){const b=this.opts.es5?e.varKinds.var:e.varKinds.const;h=(0,t._)`${h}${b} ${y} = ${v};${this.opts._n}`}else if(v=d==null?void 0:d(y))h=(0,t._)`${h}${v}${this.opts._n}`;else throw new n(y);g.set(y,r.Completed)})}return h}}e.ValueScope=a})(fH);(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.or=e.and=e.not=e.CodeGen=e.operators=e.varKinds=e.ValueScopeName=e.ValueScope=e.Scope=e.Name=e.regexpCode=e.stringify=e.getProperty=e.nil=e.strConcat=e.str=e._=void 0;const t=OI,n=fH;var r=OI;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return r._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return r.str}}),Object.defineProperty(e,"strConcat",{enumerable:!0,get:function(){return r.strConcat}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return r.nil}}),Object.defineProperty(e,"getProperty",{enumerable:!0,get:function(){return r.getProperty}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return r.stringify}}),Object.defineProperty(e,"regexpCode",{enumerable:!0,get:function(){return r.regexpCode}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return r.Name}});var i=fH;Object.defineProperty(e,"Scope",{enumerable:!0,get:function(){return i.Scope}}),Object.defineProperty(e,"ValueScope",{enumerable:!0,get:function(){return i.ValueScope}}),Object.defineProperty(e,"ValueScopeName",{enumerable:!0,get:function(){return i.ValueScopeName}}),Object.defineProperty(e,"varKinds",{enumerable:!0,get:function(){return i.varKinds}}),e.operators={GT:new t._Code(">"),GTE:new t._Code(">="),LT:new t._Code("<"),LTE:new t._Code("<="),EQ:new t._Code("==="),NEQ:new t._Code("!=="),NOT:new t._Code("!"),OR:new t._Code("||"),AND:new t._Code("&&"),ADD:new t._Code("+")};class s{optimizeNodes(){return this}optimizeNames(q,G){return this}}class o extends s{constructor(q,G,ne){super(),this.varKind=q,this.name=G,this.rhs=ne}render({es5:q,_n:G}){const ne=q?n.varKinds.var:this.varKind,ce=this.rhs===void 0?"":` = ${this.rhs}`;return`${ne} ${this.name}${ce};`+G}optimizeNames(q,G){if(q[this.name.str])return this.rhs&&(this.rhs=$(this.rhs,q,G)),this}get names(){return this.rhs instanceof t._CodeOrName?this.rhs.names:{}}}class a extends s{constructor(q,G,ne){super(),this.lhs=q,this.rhs=G,this.sideEffects=ne}render({_n:q}){return`${this.lhs} = ${this.rhs};`+q}optimizeNames(q,G){if(!(this.lhs instanceof t.Name&&!q[this.lhs.str]&&!this.sideEffects))return this.rhs=$(this.rhs,q,G),this}get names(){const q=this.lhs instanceof t.Name?{}:{...this.lhs.names};return O(q,this.rhs)}}class u extends a{constructor(q,G,ne,ce){super(q,ne,ce),this.op=G}render({_n:q}){return`${this.lhs} ${this.op}= ${this.rhs};`+q}}class l extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`${this.label}:`+q}}class c extends s{constructor(q){super(),this.label=q,this.names={}}render({_n:q}){return`break${this.label?` ${this.label}`:""};`+q}}class f extends s{constructor(q){super(),this.error=q}render({_n:q}){return`throw ${this.error};`+q}get names(){return this.error.names}}class d extends s{constructor(q){super(),this.code=q}render({_n:q}){return`${this.code};`+q}optimizeNodes(){return`${this.code}`?this:void 0}optimizeNames(q,G){return this.code=$(this.code,q,G),this}get names(){return this.code instanceof t._CodeOrName?this.code.names:{}}}class h extends s{constructor(q=[]){super(),this.nodes=q}render(q){return this.nodes.reduce((G,ne)=>G+ne.render(q),"")}optimizeNodes(){const{nodes:q}=this;let G=q.length;for(;G--;){const ne=q[G].optimizeNodes();Array.isArray(ne)?q.splice(G,1,...ne):ne?q[G]=ne:q.splice(G,1)}return q.length>0?this:void 0}optimizeNames(q,G){const{nodes:ne}=this;let ce=ne.length;for(;ce--;){const de=ne[ce];de.optimizeNames(q,G)||(F(q,de.names),ne.splice(ce,1))}return ne.length>0?this:void 0}get names(){return this.nodes.reduce((q,G)=>D(q,G.names),{})}}class p extends h{render(q){return"{"+q._n+super.render(q)+"}"+q._n}}class m extends h{}class g extends p{}g.kind="else";class y extends p{constructor(q,G){super(G),this.condition=q}render(q){let G=`if(${this.condition})`+super.render(q);return this.else&&(G+="else "+this.else.render(q)),G}optimizeNodes(){super.optimizeNodes();const q=this.condition;if(q===!0)return this.nodes;let G=this.else;if(G){const ne=G.optimizeNodes();G=this.else=Array.isArray(ne)?new g(ne):ne}if(G)return q===!1?G instanceof y?G:G.nodes:this.nodes.length?this:new y(M(q),G instanceof y?[G]:G.nodes);if(!(q===!1||!this.nodes.length))return this}optimizeNames(q,G){var ne;if(this.else=(ne=this.else)===null||ne===void 0?void 0:ne.optimizeNames(q,G),!!(super.optimizeNames(q,G)||this.else))return this.condition=$(this.condition,q,G),this}get names(){const q=super.names;return O(q,this.condition),this.else&&D(q,this.else.names),q}}y.kind="if";class v extends p{}v.kind="for";class b extends v{constructor(q){super(),this.iteration=q}render(q){return`for(${this.iteration})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iteration=$(this.iteration,q,G),this}get names(){return D(super.names,this.iteration.names)}}class w extends v{constructor(q,G,ne,ce){super(),this.varKind=q,this.name=G,this.from=ne,this.to=ce}render(q){const G=q.es5?n.varKinds.var:this.varKind,{name:ne,from:ce,to:de}=this;return`for(${G} ${ne}=${ce}; ${ne}<${de}; ${ne}++)`+super.render(q)}get names(){const q=O(super.names,this.from);return O(q,this.to)}}class E extends v{constructor(q,G,ne,ce){super(),this.loop=q,this.varKind=G,this.name=ne,this.iterable=ce}render(q){return`for(${this.varKind} ${this.name} ${this.loop} ${this.iterable})`+super.render(q)}optimizeNames(q,G){if(super.optimizeNames(q,G))return this.iterable=$(this.iterable,q,G),this}get names(){return D(super.names,this.iterable.names)}}class T extends p{constructor(q,G,ne){super(),this.name=q,this.args=G,this.async=ne}render(q){return`${this.async?"async ":""}function ${this.name}(${this.args})`+super.render(q)}}T.kind="func";class S extends h{render(q){return"return "+super.render(q)}}S.kind="return";class A extends p{render(q){let G="try"+super.render(q);return this.catch&&(G+=this.catch.render(q)),this.finally&&(G+=this.finally.render(q)),G}optimizeNodes(){var q,G;return super.optimizeNodes(),(q=this.catch)===null||q===void 0||q.optimizeNodes(),(G=this.finally)===null||G===void 0||G.optimizeNodes(),this}optimizeNames(q,G){var ne,ce;return super.optimizeNames(q,G),(ne=this.catch)===null||ne===void 0||ne.optimizeNames(q,G),(ce=this.finally)===null||ce===void 0||ce.optimizeNames(q,G),this}get names(){const q=super.names;return this.catch&&D(q,this.catch.names),this.finally&&D(q,this.finally.names),q}}class C extends p{constructor(q){super(),this.error=q}render(q){return`catch(${this.error})`+super.render(q)}}C.kind="catch";class k extends p{render(q){return"finally"+super.render(q)}}k.kind="finally";class N{constructor(q,G={}){this._values={},this._blockStarts=[],this._constants={},this.opts={...G,_n:G.lines?`
`:""},this._extScope=q,this._scope=new n.Scope({parent:q}),this._nodes=[new m]}toString(){return this._root.render(this.opts)}name(q){return this._scope.name(q)}scopeName(q){return this._extScope.name(q)}scopeValue(q,G){const ne=this._extScope.value(q,G);return(this._values[ne.prefix]||(this._values[ne.prefix]=new Set)).add(ne),ne}getScopeValue(q,G){return this._extScope.getValue(q,G)}scopeRefs(q){return this._extScope.scopeRefs(q,this._values)}scopeCode(){return this._extScope.scopeCode(this._values)}_def(q,G,ne,ce){const de=this._scope.toName(G);return ne!==void 0&&ce&&(this._constants[de.str]=ne),this._leafNode(new o(q,de,ne)),de}const(q,G,ne){return this._def(n.varKinds.const,q,G,ne)}let(q,G,ne){return this._def(n.varKinds.let,q,G,ne)}var(q,G,ne){return this._def(n.varKinds.var,q,G,ne)}assign(q,G,ne){return this._leafNode(new a(q,G,ne))}add(q,G){return this._leafNode(new u(q,e.operators.ADD,G))}code(q){return typeof q=="function"?q():q!==t.nil&&this._leafNode(new d(q)),this}object(...q){const G=["{"];for(const[ne,ce]of q)G.length>1&&G.push(","),G.push(ne),(ne!==ce||this.opts.es5)&&(G.push(":"),(0,t.addCodeArg)(G,ce));return G.push("}"),new t._Code(G)}if(q,G,ne){if(this._blockNode(new y(q)),G&&ne)this.code(G).else().code(ne).endIf();else if(G)this.code(G).endIf();else if(ne)throw new Error('CodeGen: "else" body without "then" body');return this}elseIf(q){return this._elseNode(new y(q))}else(){return this._elseNode(new g)}endIf(){return this._endBlockNode(y,g)}_for(q,G){return this._blockNode(q),G&&this.code(G).endFor(),this}for(q,G){return this._for(new b(q),G)}forRange(q,G,ne,ce,de=this.opts.es5?n.varKinds.var:n.varKinds.let){const he=this._scope.toName(q);return this._for(new w(de,he,G,ne),()=>ce(he))}forOf(q,G,ne,ce=n.varKinds.const){const de=this._scope.toName(q);if(this.opts.es5){const he=G instanceof t.Name?G:this.var("_arr",G);return this.forRange("_i",0,(0,t._)`${he}.length`,ve=>{this.var(de,(0,t._)`${he}[${ve}]`),ne(de)})}return this._for(new E("of",ce,de,G),()=>ne(de))}forIn(q,G,ne,ce=this.opts.es5?n.varKinds.var:n.varKinds.const){if(this.opts.ownProperties)return this.forOf(q,(0,t._)`Object.keys(${G})`,ne);const de=this._scope.toName(q);return this._for(new E("in",ce,de,G),()=>ne(de))}endFor(){return this._endBlockNode(v)}label(q){return this._leafNode(new l(q))}break(q){return this._leafNode(new c(q))}return(q){const G=new S;if(this._blockNode(G),this.code(q),G.nodes.length!==1)throw new Error('CodeGen: "return" should have one node');return this._endBlockNode(S)}try(q,G,ne){if(!G&&!ne)throw new Error('CodeGen: "try" without "catch" and "finally"');const ce=new A;if(this._blockNode(ce),this.code(q),G){const de=this.name("e");this._currNode=ce.catch=new C(de),G(de)}return ne&&(this._currNode=ce.finally=new k,this.code(ne)),this._endBlockNode(C,k)}throw(q){return this._leafNode(new f(q))}block(q,G){return this._blockStarts.push(this._nodes.length),q&&this.code(q).endBlock(G),this}endBlock(q){const G=this._blockStarts.pop();if(G===void 0)throw new Error("CodeGen: not in self-balancing block");const ne=this._nodes.length-G;if(ne<0||q!==void 0&&ne!==q)throw new Error(`CodeGen: wrong number of nodes: ${ne} vs ${q} expected`);return this._nodes.length=G,this}func(q,G=t.nil,ne,ce){return this._blockNode(new T(q,G,ne)),ce&&this.code(ce).endFunc(),this}endFunc(){return this._endBlockNode(T)}optimize(q=1){for(;q-- >0;)this._root.optimizeNodes(),this._root.optimizeNames(this._root.names,this._constants)}_leafNode(q){return this._currNode.nodes.push(q),this}_blockNode(q){this._currNode.nodes.push(q),this._nodes.push(q)}_endBlockNode(q,G){const ne=this._currNode;if(ne instanceof q||G&&ne instanceof G)return this._nodes.pop(),this;throw new Error(`CodeGen: not in block "${G?`${q.kind}/${G.kind}`:q.kind}"`)}_elseNode(q){const G=this._currNode;if(!(G instanceof y))throw new Error('CodeGen: "else" without "if"');return this._currNode=G.else=q,this}get _root(){return this._nodes[0]}get _currNode(){const q=this._nodes;return q[q.length-1]}set _currNode(q){const G=this._nodes;G[G.length-1]=q}}e.CodeGen=N;function D(j,q){for(const G in q)j[G]=(j[G]||0)+(q[G]||0);return j}function O(j,q){return q instanceof t._CodeOrName?D(j,q.names):j}function $(j,q,G){if(j instanceof t.Name)return ne(j);if(!ce(j))return j;return new t._Code(j._items.reduce((de,he)=>(he instanceof t.Name&&(he=ne(he)),he instanceof t._Code?de.push(...he._items):de.push(he),de),[]));function ne(de){const he=G[de.str];return he===void 0||q[de.str]!==1?de:(delete q[de.str],he)}function ce(de){return de instanceof t._Code&&de._items.some(he=>he instanceof t.Name&&q[he.str]===1&&G[he.str]!==void 0)}}function F(j,q){for(const G in q)j[G]=(j[G]||0)-(q[G]||0)}function M(j){return typeof j=="boolean"||typeof j=="number"||j===null?!j:(0,t._)`!${W(j)}`}e.not=M;const B=z(e.operators.AND);function U(...j){return j.reduce(B)}e.and=U;const H=z(e.operators.OR);function P(...j){return j.reduce(H)}e.or=P;function z(j){return(q,G)=>q===t.nil?G:G===t.nil?q:(0,t._)`${W(q)} ${j} ${W(G)}`}function W(j){return j instanceof t.Name?j:(0,t._)`(${j})`}})(Dn);var wt={};Object.defineProperty(wt,"__esModule",{value:!0});wt.checkStrictMode=wt.getErrorPath=wt.Type=wt.useFunc=wt.setEvaluated=wt.evaluatedPropsToName=wt.mergeEvaluated=wt.eachItem=wt.unescapeJsonPointer=wt.escapeJsonPointer=wt.escapeFragment=wt.unescapeFragment=wt.schemaRefOrVal=wt.schemaHasRulesButRef=wt.schemaHasRules=wt.checkUnknownRules=wt.alwaysValidSchema=wt.toHash=void 0;const Qr=Dn,BIt=OI;function UIt(e){const t={};for(const n of e)t[n]=!0;return t}wt.toHash=UIt;function zIt(e,t){return typeof t=="boolean"?t:Object.keys(t).length===0?!0:(ePe(e,t),!tPe(t,e.self.RULES.all))}wt.alwaysValidSchema=zIt;function ePe(e,t=e.schema){const{opts:n,self:r}=e;if(!n.strictSchema||typeof t=="boolean")return;const i=r.RULES.keywords;for(const s in t)i[s]||iPe(e,`unknown keyword: "${s}"`)}wt.checkUnknownRules=ePe;function tPe(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(t[n])return!0;return!1}wt.schemaHasRules=tPe;function VIt(e,t){if(typeof e=="boolean")return!e;for(const n in e)if(n!=="$ref"&&t.all[n])return!0;return!1}wt.schemaHasRulesButRef=VIt;function HIt({topSchemaRef:e,schemaPath:t},n,r,i){if(!i){if(typeof n=="number"||typeof n=="boolean")return n;if(typeof n=="string")return(0,Qr._)`${n}`}return(0,Qr._)`${e}${t}${(0,Qr.getProperty)(r)}`}wt.schemaRefOrVal=HIt;function qIt(e){return nPe(decodeURIComponent(e))}wt.unescapeFragment=qIt;function WIt(e){return encodeURIComponent(UJ(e))}wt.escapeFragment=WIt;function UJ(e){return typeof e=="number"?`${e}`:e.replace(/~/g,"~0").replace(/\//g,"~1")}wt.escapeJsonPointer=UJ;function nPe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}wt.unescapeJsonPointer=nPe;function GIt(e,t){if(Array.isArray(e))for(const n of e)t(n);else t(e)}wt.eachItem=GIt;function bhe({mergeNames:e,mergeToName:t,mergeValues:n,resultToName:r}){return(i,s,o,a)=>{const u=o===void 0?s:o instanceof Qr.Name?(s instanceof Qr.Name?e(i,s,o):t(i,s,o),o):s instanceof Qr.Name?(t(i,o,s),s):n(s,o);return a===Qr.Name&&!(u instanceof Qr.Name)?r(i,u):u}}wt.mergeEvaluated={props:bhe({mergeNames:(e,t,n)=>e.if((0,Qr._)`${n} !== true && ${t} !== undefined`,()=>{e.if((0,Qr._)`${t} === true`,()=>e.assign(n,!0),()=>e.assign(n,(0,Qr._)`${n} || {}`).code((0,Qr._)`Object.assign(${n}, ${t})`))}),mergeToName:(e,t,n)=>e.if((0,Qr._)`${n} !== true`,()=>{t===!0?e.assign(n,!0):(e.assign(n,(0,Qr._)`${n} || {}`),zJ(e,n,t))}),mergeValues:(e,t)=>e===!0?!0:{...e,...t},resultToName:rPe}),items:bhe({mergeNames:(e,t,n)=>e.if((0,Qr._)`${n} !== true && ${t} !== undefined`,()=>e.assign(n,(0,Qr._)`${t} === true ? true : ${n} > ${t} ? ${n} : ${t}`)),mergeToName:(e,t,n)=>e.if((0,Qr._)`${n} !== true`,()=>e.assign(n,t===!0?!0:(0,Qr._)`${n} > ${t} ? ${n} : ${t}`)),mergeValues:(e,t)=>e===!0?!0:Math.max(e,t),resultToName:(e,t)=>e.var("items",t)})};function rPe(e,t){if(t===!0)return e.var("props",!0);const n=e.var("props",(0,Qr._)`{}`);return t!==void 0&&zJ(e,n,t),n}wt.evaluatedPropsToName=rPe;function zJ(e,t,n){Object.keys(n).forEach(r=>e.assign((0,Qr._)`${t}${(0,Qr.getProperty)(r)}`,!0))}wt.setEvaluated=zJ;const _he={};function YIt(e,t){return e.scopeValue("func",{ref:t,code:_he[t.code]||(_he[t.code]=new BIt._Code(t.code))})}wt.useFunc=YIt;var dH;(function(e){e[e.Num=0]="Num",e[e.Str=1]="Str"})(dH||(wt.Type=dH={}));function KIt(e,t,n){if(e instanceof Qr.Name){const r=t===dH.Num;return n?r?(0,Qr._)`"[" + ${e} + "]"`:(0,Qr._)`"['" + ${e} + "']"`:r?(0,Qr._)`"/" + ${e}`:(0,Qr._)`"/" + ${e}.replace(/~/g, "~0").replace(/\\//g, "~1")`}return n?(0,Qr.getProperty)(e).toString():"/"+UJ(e)}wt.getErrorPath=KIt;function iPe(e,t,n=e.opts.strictSchema){if(n){if(t=`strict mode: ${t}`,n===!0)throw new Error(t);e.self.logger.warn(t)}}wt.checkStrictMode=iPe;var sp={};Object.defineProperty(sp,"__esModule",{value:!0});const ra=Dn,XIt={data:new ra.Name("data"),valCxt:new ra.Name("valCxt"),instancePath:new ra.Name("instancePath"),parentData:new ra.Name("parentData"),parentDataProperty:new ra.Name("parentDataProperty"),rootData:new ra.Name("rootData"),dynamicAnchors:new ra.Name("dynamicAnchors"),vErrors:new ra.Name("vErrors"),errors:new ra.Name("errors"),this:new ra.Name("this"),self:new ra.Name("self"),scope:new ra.Name("scope"),json:new ra.Name("json"),jsonPos:new ra.Name("jsonPos"),jsonLen:new ra.Name("jsonLen"),jsonPart:new ra.Name("jsonPart")};sp.default=XIt;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.extendErrors=e.resetErrorsCount=e.reportExtraError=e.reportError=e.keyword$DataError=e.keywordError=void 0;const t=Dn,n=wt,r=sp;e.keywordError={message:({keyword:g})=>(0,t.str)`must pass "${g}" keyword validation`},e.keyword$DataError={message:({keyword:g,schemaType:y})=>y?(0,t.str)`"${g}" keyword must be ${y} ($data)`:(0,t.str)`"${g}" keyword is invalid ($data)`};function i(g,y=e.keywordError,v,b){const{it:w}=g,{gen:E,compositeRule:T,allErrors:S}=w,A=f(g,y,v);b??(T||S)?u(E,A):l(w,(0,t._)`[${A}]`)}e.reportError=i;function s(g,y=e.keywordError,v){const{it:b}=g,{gen:w,compositeRule:E,allErrors:T}=b,S=f(g,y,v);u(w,S),E||T||l(b,r.default.vErrors)}e.reportExtraError=s;function o(g,y){g.assign(r.default.errors,y),g.if((0,t._)`${r.default.vErrors} !== null`,()=>g.if(y,()=>g.assign((0,t._)`${r.default.vErrors}.length`,y),()=>g.assign(r.default.vErrors,null)))}e.resetErrorsCount=o;function a({gen:g,keyword:y,schemaValue:v,data:b,errsCount:w,it:E}){if(w===void 0)throw new Error("ajv implementation error");const T=g.name("err");g.forRange("i",w,r.default.errors,S=>{g.const(T,(0,t._)`${r.default.vErrors}[${S}]`),g.if((0,t._)`${T}.instancePath === undefined`,()=>g.assign((0,t._)`${T}.instancePath`,(0,t.strConcat)(r.default.instancePath,E.errorPath))),g.assign((0,t._)`${T}.schemaPath`,(0,t.str)`${E.errSchemaPath}/${y}`),E.opts.verbose&&(g.assign((0,t._)`${T}.schema`,v),g.assign((0,t._)`${T}.data`,b))})}e.extendErrors=a;function u(g,y){const v=g.const("err",y);g.if((0,t._)`${r.default.vErrors} === null`,()=>g.assign(r.default.vErrors,(0,t._)`[${v}]`),(0,t._)`${r.default.vErrors}.push(${v})`),g.code((0,t._)`${r.default.errors}++`)}function l(g,y){const{gen:v,validateName:b,schemaEnv:w}=g;w.$async?v.throw((0,t._)`new ${g.ValidationError}(${y})`):(v.assign((0,t._)`${b}.errors`,y),v.return(!1))}const c={keyword:new t.Name("keyword"),schemaPath:new t.Name("schemaPath"),params:new t.Name("params"),propertyName:new t.Name("propertyName"),message:new t.Name("message"),schema:new t.Name("schema"),parentSchema:new t.Name("parentSchema")};function f(g,y,v){const{createErrors:b}=g.it;return b===!1?(0,t._)`{}`:d(g,y,v)}function d(g,y,v={}){const{gen:b,it:w}=g,E=[h(w,v),p(g,v)];return m(g,y,E),b.object(...E)}function h({errorPath:g},{instancePath:y}){const v=y?(0,t.str)`${g}${(0,n.getErrorPath)(y,n.Type.Str)}`:g;return[r.default.instancePath,(0,t.strConcat)(r.default.instancePath,v)]}function p({keyword:g,it:{errSchemaPath:y}},{schemaPath:v,parentSchema:b}){let w=b?y:(0,t.str)`${y}/${g}`;return v&&(w=(0,t.str)`${w}${(0,n.getErrorPath)(v,n.Type.Str)}`),[c.schemaPath,w]}function m(g,{params:y,message:v},b){const{keyword:w,data:E,schemaValue:T,it:S}=g,{opts:A,propertyName:C,topSchemaRef:k,schemaPath:N}=S;b.push([c.keyword,w],[c.params,typeof y=="function"?y(g):y||(0,t._)`{}`]),A.messages&&b.push([c.message,typeof v=="function"?v(g):v]),A.verbose&&b.push([c.schema,T],[c.parentSchema,(0,t._)`${k}${N}`],[r.default.data,E]),C&&b.push([c.propertyName,C])}})(lR);Object.defineProperty(kx,"__esModule",{value:!0});kx.boolOrEmptySchema=kx.topBoolOrEmptySchema=void 0;const QIt=lR,JIt=Dn,ZIt=sp,ekt={message:"boolean schema is false"};function tkt(e){const{gen:t,schema:n,validateName:r}=e;n===!1?sPe(e,!1):typeof n=="object"&&n.$async===!0?t.return(ZIt.default.data):(t.assign((0,JIt._)`${r}.errors`,null),t.return(!0))}kx.topBoolOrEmptySchema=tkt;function nkt(e,t){const{gen:n,schema:r}=e;r===!1?(n.var(t,!1),sPe(e)):n.var(t,!0)}kx.boolOrEmptySchema=nkt;function sPe(e,t){const{gen:n,data:r}=e,i={gen:n,keyword:"false schema",data:r,schema:!1,schemaCode:!1,schemaValue:!1,params:{},it:e};(0,QIt.reportError)(i,ekt,void 0,t)}var Ps={},vb={};Object.defineProperty(vb,"__esModule",{value:!0});vb.getRules=vb.isJSONType=void 0;const rkt=["string","number","integer","boolean","null","object","array"],ikt=new Set(rkt);function skt(e){return typeof e=="string"&&ikt.has(e)}vb.isJSONType=skt;function okt(){const e={number:{type:"number",rules:[]},string:{type:"string",rules:[]},array:{type:"array",rules:[]},object:{type:"object",rules:[]}};return{types:{...e,integer:!0,boolean:!0,null:!0},rules:[{rules:[]},e.number,e.string,e.array,e.object],post:{rules:[]},all:{},keywords:{}}}vb.getRules=okt;var hm={};Object.defineProperty(hm,"__esModule",{value:!0});hm.shouldUseRule=hm.shouldUseGroup=hm.schemaHasRulesForType=void 0;function akt({schema:e,self:t},n){const r=t.RULES.types[n];return r&&r!==!0&&oPe(e,r)}hm.schemaHasRulesForType=akt;function oPe(e,t){return t.rules.some(n=>aPe(e,n))}hm.shouldUseGroup=oPe;function aPe(e,t){var n;return e[t.keyword]!==void 0||((n=t.definition.implements)===null||n===void 0?void 0:n.some(r=>e[r]!==void 0))}hm.shouldUseRule=aPe;Object.defineProperty(Ps,"__esModule",{value:!0});Ps.reportTypeError=Ps.checkDataTypes=Ps.checkDataType=Ps.coerceAndCheckDataType=Ps.getJSONTypes=Ps.getSchemaTypes=Ps.DataType=void 0;const ukt=vb,lkt=hm,ckt=lR,En=Dn,uPe=wt;var CE;(function(e){e[e.Correct=0]="Correct",e[e.Wrong=1]="Wrong"})(CE||(Ps.DataType=CE={}));function fkt(e){const t=lPe(e.type);if(t.includes("null")){if(e.nullable===!1)throw new Error("type: null contradicts nullable: false")}else{if(!t.length&&e.nullable!==void 0)throw new Error('"nullable" cannot be used without "type"');e.nullable===!0&&t.push("null")}return t}Ps.getSchemaTypes=fkt;function lPe(e){const t=Array.isArray(e)?e:e?[e]:[];if(t.every(ukt.isJSONType))return t;throw new Error("type must be JSONType or JSONType[]: "+t.join(","))}Ps.getJSONTypes=lPe;function dkt(e,t){const{gen:n,data:r,opts:i}=e,s=hkt(t,i.coerceTypes),o=t.length>0&&!(s.length===0&&t.length===1&&(0,lkt.schemaHasRulesForType)(e,t[0]));if(o){const a=VJ(t,r,i.strictNumbers,CE.Wrong);n.if(a,()=>{s.length?pkt(e,t,s):HJ(e)})}return o}Ps.coerceAndCheckDataType=dkt;const cPe=new Set(["string","number","integer","boolean","null"]);function hkt(e,t){return t?e.filter(n=>cPe.has(n)||t==="array"&&n==="array"):[]}function pkt(e,t,n){const{gen:r,data:i,opts:s}=e,o=r.let("dataType",(0,En._)`typeof ${i}`),a=r.let("coerced",(0,En._)`undefined`);s.coerceTypes==="array"&&r.if((0,En._)`${o} == 'object' && Array.isArray(${i}) && ${i}.length == 1`,()=>r.assign(i,(0,En._)`${i}[0]`).assign(o,(0,En._)`typeof ${i}`).if(VJ(t,i,s.strictNumbers),()=>r.assign(a,i))),r.if((0,En._)`${a} !== undefined`);for(const l of n)(cPe.has(l)||l==="array"&&s.coerceTypes==="array")&&u(l);r.else(),HJ(e),r.endIf(),r.if((0,En._)`${a} !== undefined`,()=>{r.assign(i,a),mkt(e,a)});function u(l){switch(l){case"string":r.elseIf((0,En._)`${o} == "number" || ${o} == "boolean"`).assign(a,(0,En._)`"" + ${i}`).elseIf((0,En._)`${i} === null`).assign(a,(0,En._)`""`);return;case"number":r.elseIf((0,En._)`${o} == "boolean" || ${i} === null
              || (${o} == "string" && ${i} && ${i} == +${i})`).assign(a,(0,En._)`+${i}`);return;case"integer":r.elseIf((0,En._)`${o} === "boolean" || ${i} === null
              || (${o} === "string" && ${i} && ${i} == +${i} && !(${i} % 1))`).assign(a,(0,En._)`+${i}`);return;case"boolean":r.elseIf((0,En._)`${i} === "false" || ${i} === 0 || ${i} === null`).assign(a,!1).elseIf((0,En._)`${i} === "true" || ${i} === 1`).assign(a,!0);return;case"null":r.elseIf((0,En._)`${i} === "" || ${i} === 0 || ${i} === false`),r.assign(a,null);return;case"array":r.elseIf((0,En._)`${o} === "string" || ${o} === "number"
              || ${o} === "boolean" || ${i} === null`).assign(a,(0,En._)`[${i}]`)}}}function mkt({gen:e,parentData:t,parentDataProperty:n},r){e.if((0,En._)`${t} !== undefined`,()=>e.assign((0,En._)`${t}[${n}]`,r))}function hH(e,t,n,r=CE.Correct){const i=r===CE.Correct?En.operators.EQ:En.operators.NEQ;let s;switch(e){case"null":return(0,En._)`${t} ${i} null`;case"array":s=(0,En._)`Array.isArray(${t})`;break;case"object":s=(0,En._)`${t} && typeof ${t} == "object" && !Array.isArray(${t})`;break;case"integer":s=o((0,En._)`!(${t} % 1) && !isNaN(${t})`);break;case"number":s=o();break;default:return(0,En._)`typeof ${t} ${i} ${e}`}return r===CE.Correct?s:(0,En.not)(s);function o(a=En.nil){return(0,En.and)((0,En._)`typeof ${t} == "number"`,a,n?(0,En._)`isFinite(${t})`:En.nil)}}Ps.checkDataType=hH;function VJ(e,t,n,r){if(e.length===1)return hH(e[0],t,n,r);let i;const s=(0,uPe.toHash)(e);if(s.array&&s.object){const o=(0,En._)`typeof ${t} != "object"`;i=s.null?o:(0,En._)`!${t} || ${o}`,delete s.null,delete s.array,delete s.object}else i=En.nil;s.number&&delete s.integer;for(const o in s)i=(0,En.and)(i,hH(o,t,n,r));return i}Ps.checkDataTypes=VJ;const gkt={message:({schema:e})=>`must be ${e}`,params:({schema:e,schemaValue:t})=>typeof e=="string"?(0,En._)`{type: ${e}}`:(0,En._)`{type: ${t}}`};function HJ(e){const t=ykt(e);(0,ckt.reportError)(t,gkt)}Ps.reportTypeError=HJ;function ykt(e){const{gen:t,data:n,schema:r}=e,i=(0,uPe.schemaRefOrVal)(e,r,"type");return{gen:t,keyword:"type",data:n,schema:r.type,schemaCode:i,schemaValue:i,parentSchema:r,params:{},it:e}}var ZF={};Object.defineProperty(ZF,"__esModule",{value:!0});ZF.assignDefaults=void 0;const K_=Dn,vkt=wt;function bkt(e,t){const{properties:n,items:r}=e.schema;if(t==="object"&&n)for(const i in n)whe(e,i,n[i].default);else t==="array"&&Array.isArray(r)&&r.forEach((i,s)=>whe(e,s,i.default))}ZF.assignDefaults=bkt;function whe(e,t,n){const{gen:r,compositeRule:i,data:s,opts:o}=e;if(n===void 0)return;const a=(0,K_._)`${s}${(0,K_.getProperty)(t)}`;if(i){(0,vkt.checkStrictMode)(e,`default is ignored for: ${a}`);return}let u=(0,K_._)`${a} === undefined`;o.useDefaults==="empty"&&(u=(0,K_._)`${u} || ${a} === null || ${a} === ""`),r.if(u,(0,K_._)`${a} = ${(0,K_.stringify)(n)}`)}var ah={},Pn={};Object.defineProperty(Pn,"__esModule",{value:!0});Pn.validateUnion=Pn.validateArray=Pn.usePattern=Pn.callValidateCode=Pn.schemaProperties=Pn.allSchemaProperties=Pn.noPropertyInData=Pn.propertyInData=Pn.isOwnProperty=Pn.hasPropFunc=Pn.reportMissingProp=Pn.checkMissingProp=Pn.checkReportMissingProp=void 0;const li=Dn,qJ=wt,Ig=sp,_kt=wt;function wkt(e,t){const{gen:n,data:r,it:i}=e;n.if(GJ(n,r,t,i.opts.ownProperties),()=>{e.setParams({missingProperty:(0,li._)`${t}`},!0),e.error()})}Pn.checkReportMissingProp=wkt;function Ekt({gen:e,data:t,it:{opts:n}},r,i){return(0,li.or)(...r.map(s=>(0,li.and)(GJ(e,t,s,n.ownProperties),(0,li._)`${i} = ${s}`)))}Pn.checkMissingProp=Ekt;function xkt(e,t){e.setParams({missingProperty:t},!0),e.error()}Pn.reportMissingProp=xkt;function fPe(e){return e.scopeValue("func",{ref:Object.prototype.hasOwnProperty,code:(0,li._)`Object.prototype.hasOwnProperty`})}Pn.hasPropFunc=fPe;function WJ(e,t,n){return(0,li._)`${fPe(e)}.call(${t}, ${n})`}Pn.isOwnProperty=WJ;function Skt(e,t,n,r){const i=(0,li._)`${t}${(0,li.getProperty)(n)} !== undefined`;return r?(0,li._)`${i} && ${WJ(e,t,n)}`:i}Pn.propertyInData=Skt;function GJ(e,t,n,r){const i=(0,li._)`${t}${(0,li.getProperty)(n)} === undefined`;return r?(0,li.or)(i,(0,li.not)(WJ(e,t,n))):i}Pn.noPropertyInData=GJ;function dPe(e){return e?Object.keys(e).filter(t=>t!=="__proto__"):[]}Pn.allSchemaProperties=dPe;function Tkt(e,t){return dPe(t).filter(n=>!(0,qJ.alwaysValidSchema)(e,t[n]))}Pn.schemaProperties=Tkt;function Akt({schemaCode:e,data:t,it:{gen:n,topSchemaRef:r,schemaPath:i,errorPath:s},it:o},a,u,l){const c=l?(0,li._)`${e}, ${t}, ${r}${i}`:t,f=[[Ig.default.instancePath,(0,li.strConcat)(Ig.default.instancePath,s)],[Ig.default.parentData,o.parentData],[Ig.default.parentDataProperty,o.parentDataProperty],[Ig.default.rootData,Ig.default.rootData]];o.opts.dynamicRef&&f.push([Ig.default.dynamicAnchors,Ig.default.dynamicAnchors]);const d=(0,li._)`${c}, ${n.object(...f)}`;return u!==li.nil?(0,li._)`${a}.call(${u}, ${d})`:(0,li._)`${a}(${d})`}Pn.callValidateCode=Akt;const Ckt=(0,li._)`new RegExp`;function Ikt({gen:e,it:{opts:t}},n){const r=t.unicodeRegExp?"u":"",{regExp:i}=t.code,s=i(n,r);return e.scopeValue("pattern",{key:s.toString(),ref:s,code:(0,li._)`${i.code==="new RegExp"?Ckt:(0,_kt.useFunc)(e,i)}(${n}, ${r})`})}Pn.usePattern=Ikt;function kkt(e){const{gen:t,data:n,keyword:r,it:i}=e,s=t.name("valid");if(i.allErrors){const a=t.let("valid",!0);return o(()=>t.assign(a,!1)),a}return t.var(s,!0),o(()=>t.break()),s;function o(a){const u=t.const("len",(0,li._)`${n}.length`);t.forRange("i",0,u,l=>{e.subschema({keyword:r,dataProp:l,dataPropType:qJ.Type.Num},s),t.if((0,li.not)(s),a)})}}Pn.validateArray=kkt;function Rkt(e){const{gen:t,schema:n,keyword:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(n.some(u=>(0,qJ.alwaysValidSchema)(i,u))&&!i.opts.unevaluated)return;const o=t.let("valid",!1),a=t.name("_valid");t.block(()=>n.forEach((u,l)=>{const c=e.subschema({keyword:r,schemaProp:l,compositeRule:!0},a);t.assign(o,(0,li._)`${o} || ${a}`),e.mergeValidEvaluated(c,a)||t.if((0,li.not)(o))})),e.result(o,()=>e.reset(),()=>e.error(!0))}Pn.validateUnion=Rkt;Object.defineProperty(ah,"__esModule",{value:!0});ah.validateKeywordUsage=ah.validSchemaType=ah.funcKeywordCode=ah.macroKeywordCode=void 0;const Ba=Dn,o1=sp,Nkt=Pn,Pkt=lR;function Okt(e,t){const{gen:n,keyword:r,schema:i,parentSchema:s,it:o}=e,a=t.macro.call(o.self,i,s,o),u=hPe(n,r,a);o.opts.validateSchema!==!1&&o.self.validateSchema(a,!0);const l=n.name("valid");e.subschema({schema:a,schemaPath:Ba.nil,errSchemaPath:`${o.errSchemaPath}/${r}`,topSchemaRef:u,compositeRule:!0},l),e.pass(l,()=>e.error(!0))}ah.macroKeywordCode=Okt;function Dkt(e,t){var n;const{gen:r,keyword:i,schema:s,parentSchema:o,$data:a,it:u}=e;Mkt(u,t);const l=!a&&t.compile?t.compile.call(u.self,s,o,u):t.validate,c=hPe(r,i,l),f=r.let("valid");e.block$data(f,d),e.ok((n=t.valid)!==null&&n!==void 0?n:f);function d(){if(t.errors===!1)m(),t.modifying&&Ehe(e),g(()=>e.error());else{const y=t.async?h():p();t.modifying&&Ehe(e),g(()=>$kt(e,y))}}function h(){const y=r.let("ruleErrs",null);return r.try(()=>m((0,Ba._)`await `),v=>r.assign(f,!1).if((0,Ba._)`${v} instanceof ${u.ValidationError}`,()=>r.assign(y,(0,Ba._)`${v}.errors`),()=>r.throw(v))),y}function p(){const y=(0,Ba._)`${c}.errors`;return r.assign(y,null),m(Ba.nil),y}function m(y=t.async?(0,Ba._)`await `:Ba.nil){const v=u.opts.passContext?o1.default.this:o1.default.self,b=!("compile"in t&&!a||t.schema===!1);r.assign(f,(0,Ba._)`${y}${(0,Nkt.callValidateCode)(e,c,v,b)}`,t.modifying)}function g(y){var v;r.if((0,Ba.not)((v=t.valid)!==null&&v!==void 0?v:f),y)}}ah.funcKeywordCode=Dkt;function Ehe(e){const{gen:t,data:n,it:r}=e;t.if(r.parentData,()=>t.assign(n,(0,Ba._)`${r.parentData}[${r.parentDataProperty}]`))}function $kt(e,t){const{gen:n}=e;n.if((0,Ba._)`Array.isArray(${t})`,()=>{n.assign(o1.default.vErrors,(0,Ba._)`${o1.default.vErrors} === null ? ${t} : ${o1.default.vErrors}.concat(${t})`).assign(o1.default.errors,(0,Ba._)`${o1.default.vErrors}.length`),(0,Pkt.extendErrors)(e)},()=>e.error())}function Mkt({schemaEnv:e},t){if(t.async&&!e.$async)throw new Error("async keyword in sync schema")}function hPe(e,t,n){if(n===void 0)throw new Error(`keyword "${t}" failed to compile`);return e.scopeValue("keyword",typeof n=="function"?{ref:n}:{ref:n,code:(0,Ba.stringify)(n)})}function Lkt(e,t,n=!1){return!t.length||t.some(r=>r==="array"?Array.isArray(e):r==="object"?e&&typeof e=="object"&&!Array.isArray(e):typeof e==r||n&&typeof e>"u")}ah.validSchemaType=Lkt;function Fkt({schema:e,opts:t,self:n,errSchemaPath:r},i,s){if(Array.isArray(i.keyword)?!i.keyword.includes(s):i.keyword!==s)throw new Error("ajv implementation error");const o=i.dependencies;if(o!=null&&o.some(a=>!Object.prototype.hasOwnProperty.call(e,a)))throw new Error(`parent schema must have dependencies of ${s}: ${o.join(",")}`);if(i.validateSchema&&!i.validateSchema(e[s])){const u=`keyword "${s}" value is invalid at path "${r}": `+n.errorsText(i.validateSchema.errors);if(t.validateSchema==="log")n.logger.error(u);else throw new Error(u)}}ah.validateKeywordUsage=Fkt;var M0={};Object.defineProperty(M0,"__esModule",{value:!0});M0.extendSubschemaMode=M0.extendSubschemaData=M0.getSubschema=void 0;const th=Dn,pPe=wt;function jkt(e,{keyword:t,schemaProp:n,schema:r,schemaPath:i,errSchemaPath:s,topSchemaRef:o}){if(t!==void 0&&r!==void 0)throw new Error('both "keyword" and "schema" passed, only one allowed');if(t!==void 0){const a=e.schema[t];return n===void 0?{schema:a,schemaPath:(0,th._)`${e.schemaPath}${(0,th.getProperty)(t)}`,errSchemaPath:`${e.errSchemaPath}/${t}`}:{schema:a[n],schemaPath:(0,th._)`${e.schemaPath}${(0,th.getProperty)(t)}${(0,th.getProperty)(n)}`,errSchemaPath:`${e.errSchemaPath}/${t}/${(0,pPe.escapeFragment)(n)}`}}if(r!==void 0){if(i===void 0||s===void 0||o===void 0)throw new Error('"schemaPath", "errSchemaPath" and "topSchemaRef" are required with "schema"');return{schema:r,schemaPath:i,topSchemaRef:o,errSchemaPath:s}}throw new Error('either "keyword" or "schema" must be passed')}M0.getSubschema=jkt;function Bkt(e,t,{dataProp:n,dataPropType:r,data:i,dataTypes:s,propertyName:o}){if(i!==void 0&&n!==void 0)throw new Error('both "data" and "dataProp" passed, only one allowed');const{gen:a}=t;if(n!==void 0){const{errorPath:l,dataPathArr:c,opts:f}=t,d=a.let("data",(0,th._)`${t.data}${(0,th.getProperty)(n)}`,!0);u(d),e.errorPath=(0,th.str)`${l}${(0,pPe.getErrorPath)(n,r,f.jsPropertySyntax)}`,e.parentDataProperty=(0,th._)`${n}`,e.dataPathArr=[...c,e.parentDataProperty]}if(i!==void 0){const l=i instanceof th.Name?i:a.let("data",i,!0);u(l),o!==void 0&&(e.propertyName=o)}s&&(e.dataTypes=s);function u(l){e.data=l,e.dataLevel=t.dataLevel+1,e.dataTypes=[],t.definedProperties=new Set,e.parentData=t.data,e.dataNames=[...t.dataNames,l]}}M0.extendSubschemaData=Bkt;function Ukt(e,{jtdDiscriminator:t,jtdMetadata:n,compositeRule:r,createErrors:i,allErrors:s}){r!==void 0&&(e.compositeRule=r),i!==void 0&&(e.createErrors=i),s!==void 0&&(e.allErrors=s),e.jtdDiscriminator=t,e.jtdMetadata=n}M0.extendSubschemaMode=Ukt;var No={},mPe={exports:{}},f0=mPe.exports=function(e,t,n){typeof t=="function"&&(n=t,t={}),n=t.cb||n;var r=typeof n=="function"?n:n.pre||function(){},i=n.post||function(){};nD(t,r,i,e,"",e)};f0.keywords={additionalItems:!0,items:!0,contains:!0,additionalProperties:!0,propertyNames:!0,not:!0,if:!0,then:!0,else:!0};f0.arrayKeywords={items:!0,allOf:!0,anyOf:!0,oneOf:!0};f0.propsKeywords={$defs:!0,definitions:!0,properties:!0,patternProperties:!0,dependencies:!0};f0.skipKeywords={default:!0,enum:!0,const:!0,required:!0,maximum:!0,minimum:!0,exclusiveMaximum:!0,exclusiveMinimum:!0,multipleOf:!0,maxLength:!0,minLength:!0,pattern:!0,format:!0,maxItems:!0,minItems:!0,uniqueItems:!0,maxProperties:!0,minProperties:!0};function nD(e,t,n,r,i,s,o,a,u,l){if(r&&typeof r=="object"&&!Array.isArray(r)){t(r,i,s,o,a,u,l);for(var c in r){var f=r[c];if(Array.isArray(f)){if(c in f0.arrayKeywords)for(var d=0;d<f.length;d++)nD(e,t,n,f[d],i+"/"+c+"/"+d,s,i,c,r,d)}else if(c in f0.propsKeywords){if(f&&typeof f=="object")for(var h in f)nD(e,t,n,f[h],i+"/"+c+"/"+zkt(h),s,i,c,r,h)}else(c in f0.keywords||e.allKeys&&!(c in f0.skipKeywords))&&nD(e,t,n,f,i+"/"+c,s,i,c,r)}n(r,i,s,o,a,u,l)}}function zkt(e){return e.replace(/~/g,"~0").replace(/\//g,"~1")}var Vkt=mPe.exports;Object.defineProperty(No,"__esModule",{value:!0});No.getSchemaRefs=No.resolveUrl=No.normalizeId=No._getFullPath=No.getFullPath=No.inlineRef=void 0;const Hkt=wt,qkt=oX,Wkt=Vkt,Gkt=new Set(["type","format","pattern","maxLength","minLength","maxProperties","minProperties","maxItems","minItems","maximum","minimum","uniqueItems","multipleOf","required","enum","const"]);function Ykt(e,t=!0){return typeof e=="boolean"?!0:t===!0?!pH(e):t?gPe(e)<=t:!1}No.inlineRef=Ykt;const Kkt=new Set(["$ref","$recursiveRef","$recursiveAnchor","$dynamicRef","$dynamicAnchor"]);function pH(e){for(const t in e){if(Kkt.has(t))return!0;const n=e[t];if(Array.isArray(n)&&n.some(pH)||typeof n=="object"&&pH(n))return!0}return!1}function gPe(e){let t=0;for(const n in e){if(n==="$ref")return 1/0;if(t++,!Gkt.has(n)&&(typeof e[n]=="object"&&(0,Hkt.eachItem)(e[n],r=>t+=gPe(r)),t===1/0))return 1/0}return t}function yPe(e,t="",n){n!==!1&&(t=IE(t));const r=e.parse(t);return vPe(e,r)}No.getFullPath=yPe;function vPe(e,t){return e.serialize(t).split("#")[0]+"#"}No._getFullPath=vPe;const Xkt=/#\/?$/;function IE(e){return e?e.replace(Xkt,""):""}No.normalizeId=IE;function Qkt(e,t,n){return n=IE(n),e.resolve(t,n)}No.resolveUrl=Qkt;const Jkt=/^[a-z_][-a-z0-9._]*$/i;function Zkt(e,t){if(typeof e=="boolean")return{};const{schemaId:n,uriResolver:r}=this.opts,i=IE(e[n]||t),s={"":i},o=yPe(r,i,!1),a={},u=new Set;return Wkt(e,{allKeys:!0},(f,d,h,p)=>{if(p===void 0)return;const m=o+d;let g=s[p];typeof f[n]=="string"&&(g=y.call(this,f[n])),v.call(this,f.$anchor),v.call(this,f.$dynamicAnchor),s[d]=g;function y(b){const w=this.opts.uriResolver.resolve;if(b=IE(g?w(g,b):b),u.has(b))throw c(b);u.add(b);let E=this.refs[b];return typeof E=="string"&&(E=this.refs[E]),typeof E=="object"?l(f,E.schema,b):b!==IE(m)&&(b[0]==="#"?(l(f,a[b],b),a[b]=f):this.refs[b]=m),b}function v(b){if(typeof b=="string"){if(!Jkt.test(b))throw new Error(`invalid anchor "${b}"`);y.call(this,`#${b}`)}}}),a;function l(f,d,h){if(d!==void 0&&!qkt(f,d))throw c(h)}function c(f){return new Error(`reference "${f}" resolves to more than one schema`)}}No.getSchemaRefs=Zkt;Object.defineProperty(Wf,"__esModule",{value:!0});Wf.getData=Wf.KeywordCxt=Wf.validateFunctionCode=void 0;const bPe=kx,xhe=Ps,YJ=hm,d3=Ps,eRt=ZF,i2=ah,u9=M0,Ot=Dn,on=sp,tRt=No,pm=wt,oA=lR;function nRt(e){if(EPe(e)&&(xPe(e),wPe(e))){sRt(e);return}_Pe(e,()=>(0,bPe.topBoolOrEmptySchema)(e))}Wf.validateFunctionCode=nRt;function _Pe({gen:e,validateName:t,schema:n,schemaEnv:r,opts:i},s){i.code.es5?e.func(t,(0,Ot._)`${on.default.data}, ${on.default.valCxt}`,r.$async,()=>{e.code((0,Ot._)`"use strict"; ${She(n,i)}`),iRt(e,i),e.code(s)}):e.func(t,(0,Ot._)`${on.default.data}, ${rRt(i)}`,r.$async,()=>e.code(She(n,i)).code(s))}function rRt(e){return(0,Ot._)`{${on.default.instancePath}="", ${on.default.parentData}, ${on.default.parentDataProperty}, ${on.default.rootData}=${on.default.data}${e.dynamicRef?(0,Ot._)`, ${on.default.dynamicAnchors}={}`:Ot.nil}}={}`}function iRt(e,t){e.if(on.default.valCxt,()=>{e.var(on.default.instancePath,(0,Ot._)`${on.default.valCxt}.${on.default.instancePath}`),e.var(on.default.parentData,(0,Ot._)`${on.default.valCxt}.${on.default.parentData}`),e.var(on.default.parentDataProperty,(0,Ot._)`${on.default.valCxt}.${on.default.parentDataProperty}`),e.var(on.default.rootData,(0,Ot._)`${on.default.valCxt}.${on.default.rootData}`),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Ot._)`${on.default.valCxt}.${on.default.dynamicAnchors}`)},()=>{e.var(on.default.instancePath,(0,Ot._)`""`),e.var(on.default.parentData,(0,Ot._)`undefined`),e.var(on.default.parentDataProperty,(0,Ot._)`undefined`),e.var(on.default.rootData,on.default.data),t.dynamicRef&&e.var(on.default.dynamicAnchors,(0,Ot._)`{}`)})}function sRt(e){const{schema:t,opts:n,gen:r}=e;_Pe(e,()=>{n.$comment&&t.$comment&&TPe(e),cRt(e),r.let(on.default.vErrors,null),r.let(on.default.errors,0),n.unevaluated&&oRt(e),SPe(e),hRt(e)})}function oRt(e){const{gen:t,validateName:n}=e;e.evaluated=t.const("evaluated",(0,Ot._)`${n}.evaluated`),t.if((0,Ot._)`${e.evaluated}.dynamicProps`,()=>t.assign((0,Ot._)`${e.evaluated}.props`,(0,Ot._)`undefined`)),t.if((0,Ot._)`${e.evaluated}.dynamicItems`,()=>t.assign((0,Ot._)`${e.evaluated}.items`,(0,Ot._)`undefined`))}function She(e,t){const n=typeof e=="object"&&e[t.schemaId];return n&&(t.code.source||t.code.process)?(0,Ot._)`/*# sourceURL=${n} */`:Ot.nil}function aRt(e,t){if(EPe(e)&&(xPe(e),wPe(e))){uRt(e,t);return}(0,bPe.boolOrEmptySchema)(e,t)}function wPe({schema:e,self:t}){if(typeof e=="boolean")return!e;for(const n in e)if(t.RULES.all[n])return!0;return!1}function EPe(e){return typeof e.schema!="boolean"}function uRt(e,t){const{schema:n,gen:r,opts:i}=e;i.$comment&&n.$comment&&TPe(e),fRt(e),dRt(e);const s=r.const("_errs",on.default.errors);SPe(e,s),r.var(t,(0,Ot._)`${s} === ${on.default.errors}`)}function xPe(e){(0,pm.checkUnknownRules)(e),lRt(e)}function SPe(e,t){if(e.opts.jtd)return The(e,[],!1,t);const n=(0,xhe.getSchemaTypes)(e.schema),r=(0,xhe.coerceAndCheckDataType)(e,n);The(e,n,!r,t)}function lRt(e){const{schema:t,errSchemaPath:n,opts:r,self:i}=e;t.$ref&&r.ignoreKeywordsWithRef&&(0,pm.schemaHasRulesButRef)(t,i.RULES)&&i.logger.warn(`$ref: keywords ignored in schema at path "${n}"`)}function cRt(e){const{schema:t,opts:n}=e;t.default!==void 0&&n.useDefaults&&n.strictSchema&&(0,pm.checkStrictMode)(e,"default is ignored in the schema root")}function fRt(e){const t=e.schema[e.opts.schemaId];t&&(e.baseId=(0,tRt.resolveUrl)(e.opts.uriResolver,e.baseId,t))}function dRt(e){if(e.schema.$async&&!e.schemaEnv.$async)throw new Error("async schema in sync schema")}function TPe({gen:e,schemaEnv:t,schema:n,errSchemaPath:r,opts:i}){const s=n.$comment;if(i.$comment===!0)e.code((0,Ot._)`${on.default.self}.logger.log(${s})`);else if(typeof i.$comment=="function"){const o=(0,Ot.str)`${r}/$comment`,a=e.scopeValue("root",{ref:t.root});e.code((0,Ot._)`${on.default.self}.opts.$comment(${s}, ${o}, ${a}.schema)`)}}function hRt(e){const{gen:t,schemaEnv:n,validateName:r,ValidationError:i,opts:s}=e;n.$async?t.if((0,Ot._)`${on.default.errors} === 0`,()=>t.return(on.default.data),()=>t.throw((0,Ot._)`new ${i}(${on.default.vErrors})`)):(t.assign((0,Ot._)`${r}.errors`,on.default.vErrors),s.unevaluated&&pRt(e),t.return((0,Ot._)`${on.default.errors} === 0`))}function pRt({gen:e,evaluated:t,props:n,items:r}){n instanceof Ot.Name&&e.assign((0,Ot._)`${t}.props`,n),r instanceof Ot.Name&&e.assign((0,Ot._)`${t}.items`,r)}function The(e,t,n,r){const{gen:i,schema:s,data:o,allErrors:a,opts:u,self:l}=e,{RULES:c}=l;if(s.$ref&&(u.ignoreKeywordsWithRef||!(0,pm.schemaHasRulesButRef)(s,c))){i.block(()=>IPe(e,"$ref",c.all.$ref.definition));return}u.jtd||mRt(e,t),i.block(()=>{for(const d of c.rules)f(d);f(c.post)});function f(d){(0,YJ.shouldUseGroup)(s,d)&&(d.type?(i.if((0,d3.checkDataType)(d.type,o,u.strictNumbers)),Ahe(e,d),t.length===1&&t[0]===d.type&&n&&(i.else(),(0,d3.reportTypeError)(e)),i.endIf()):Ahe(e,d),a||i.if((0,Ot._)`${on.default.errors} === ${r||0}`))}}function Ahe(e,t){const{gen:n,schema:r,opts:{useDefaults:i}}=e;i&&(0,eRt.assignDefaults)(e,t.type),n.block(()=>{for(const s of t.rules)(0,YJ.shouldUseRule)(r,s)&&IPe(e,s.keyword,s.definition,t.type)})}function mRt(e,t){e.schemaEnv.meta||!e.opts.strictTypes||(gRt(e,t),e.opts.allowUnionTypes||yRt(e,t),vRt(e,e.dataTypes))}function gRt(e,t){if(t.length){if(!e.dataTypes.length){e.dataTypes=t;return}t.forEach(n=>{APe(e.dataTypes,n)||KJ(e,`type "${n}" not allowed by context "${e.dataTypes.join(",")}"`)}),_Rt(e,t)}}function yRt(e,t){t.length>1&&!(t.length===2&&t.includes("null"))&&KJ(e,"use allowUnionTypes to allow union type keyword")}function vRt(e,t){const n=e.self.RULES.all;for(const r in n){const i=n[r];if(typeof i=="object"&&(0,YJ.shouldUseRule)(e.schema,i)){const{type:s}=i.definition;s.length&&!s.some(o=>bRt(t,o))&&KJ(e,`missing type "${s.join(",")}" for keyword "${r}"`)}}}function bRt(e,t){return e.includes(t)||t==="number"&&e.includes("integer")}function APe(e,t){return e.includes(t)||t==="integer"&&e.includes("number")}function _Rt(e,t){const n=[];for(const r of e.dataTypes)APe(t,r)?n.push(r):t.includes("integer")&&r==="number"&&n.push("integer");e.dataTypes=n}function KJ(e,t){const n=e.schemaEnv.baseId+e.errSchemaPath;t+=` at "${n}" (strictTypes)`,(0,pm.checkStrictMode)(e,t,e.opts.strictTypes)}class CPe{constructor(t,n,r){if((0,i2.validateKeywordUsage)(t,n,r),this.gen=t.gen,this.allErrors=t.allErrors,this.keyword=r,this.data=t.data,this.schema=t.schema[r],this.$data=n.$data&&t.opts.$data&&this.schema&&this.schema.$data,this.schemaValue=(0,pm.schemaRefOrVal)(t,this.schema,r,this.$data),this.schemaType=n.schemaType,this.parentSchema=t.schema,this.params={},this.it=t,this.def=n,this.$data)this.schemaCode=t.gen.const("vSchema",kPe(this.$data,t));else if(this.schemaCode=this.schemaValue,!(0,i2.validSchemaType)(this.schema,n.schemaType,n.allowUndefined))throw new Error(`${r} value must be ${JSON.stringify(n.schemaType)}`);("code"in n?n.trackErrors:n.errors!==!1)&&(this.errsCount=t.gen.const("_errs",on.default.errors))}result(t,n,r){this.failResult((0,Ot.not)(t),n,r)}failResult(t,n,r){this.gen.if(t),r?r():this.error(),n?(this.gen.else(),n(),this.allErrors&&this.gen.endIf()):this.allErrors?this.gen.endIf():this.gen.else()}pass(t,n){this.failResult((0,Ot.not)(t),void 0,n)}fail(t){if(t===void 0){this.error(),this.allErrors||this.gen.if(!1);return}this.gen.if(t),this.error(),this.allErrors?this.gen.endIf():this.gen.else()}fail$data(t){if(!this.$data)return this.fail(t);const{schemaCode:n}=this;this.fail((0,Ot._)`${n} !== undefined && (${(0,Ot.or)(this.invalid$data(),t)})`)}error(t,n,r){if(n){this.setParams(n),this._error(t,r),this.setParams({});return}this._error(t,r)}_error(t,n){(t?oA.reportExtraError:oA.reportError)(this,this.def.error,n)}$dataError(){(0,oA.reportError)(this,this.def.$dataError||oA.keyword$DataError)}reset(){if(this.errsCount===void 0)throw new Error('add "trackErrors" to keyword definition');(0,oA.resetErrorsCount)(this.gen,this.errsCount)}ok(t){this.allErrors||this.gen.if(t)}setParams(t,n){n?Object.assign(this.params,t):this.params=t}block$data(t,n,r=Ot.nil){this.gen.block(()=>{this.check$data(t,r),n()})}check$data(t=Ot.nil,n=Ot.nil){if(!this.$data)return;const{gen:r,schemaCode:i,schemaType:s,def:o}=this;r.if((0,Ot.or)((0,Ot._)`${i} === undefined`,n)),t!==Ot.nil&&r.assign(t,!0),(s.length||o.validateSchema)&&(r.elseIf(this.invalid$data()),this.$dataError(),t!==Ot.nil&&r.assign(t,!1)),r.else()}invalid$data(){const{gen:t,schemaCode:n,schemaType:r,def:i,it:s}=this;return(0,Ot.or)(o(),a());function o(){if(r.length){if(!(n instanceof Ot.Name))throw new Error("ajv implementation error");const u=Array.isArray(r)?r:[r];return(0,Ot._)`${(0,d3.checkDataTypes)(u,n,s.opts.strictNumbers,d3.DataType.Wrong)}`}return Ot.nil}function a(){if(i.validateSchema){const u=t.scopeValue("validate$data",{ref:i.validateSchema});return(0,Ot._)`!${u}(${n})`}return Ot.nil}}subschema(t,n){const r=(0,u9.getSubschema)(this.it,t);(0,u9.extendSubschemaData)(r,this.it,t),(0,u9.extendSubschemaMode)(r,t);const i={...this.it,...r,items:void 0,props:void 0};return aRt(i,n),i}mergeEvaluated(t,n){const{it:r,gen:i}=this;r.opts.unevaluated&&(r.props!==!0&&t.props!==void 0&&(r.props=pm.mergeEvaluated.props(i,t.props,r.props,n)),r.items!==!0&&t.items!==void 0&&(r.items=pm.mergeEvaluated.items(i,t.items,r.items,n)))}mergeValidEvaluated(t,n){const{it:r,gen:i}=this;if(r.opts.unevaluated&&(r.props!==!0||r.items!==!0))return i.if(n,()=>this.mergeEvaluated(t,Ot.Name)),!0}}Wf.KeywordCxt=CPe;function IPe(e,t,n,r){const i=new CPe(e,n,t);"code"in n?n.code(i,r):i.$data&&n.validate?(0,i2.funcKeywordCode)(i,n):"macro"in n?(0,i2.macroKeywordCode)(i,n):(n.compile||n.validate)&&(0,i2.funcKeywordCode)(i,n)}const wRt=/^\/(?:[^~]|~0|~1)*$/,ERt=/^([0-9]+)(#|\/(?:[^~]|~0|~1)*)?$/;function kPe(e,{dataLevel:t,dataNames:n,dataPathArr:r}){let i,s;if(e==="")return on.default.rootData;if(e[0]==="/"){if(!wRt.test(e))throw new Error(`Invalid JSON-pointer: ${e}`);i=e,s=on.default.rootData}else{const l=ERt.exec(e);if(!l)throw new Error(`Invalid JSON-pointer: ${e}`);const c=+l[1];if(i=l[2],i==="#"){if(c>=t)throw new Error(u("property/index",c));return r[t-c]}if(c>t)throw new Error(u("data",c));if(s=n[t-c],!i)return s}let o=s;const a=i.split("/");for(const l of a)l&&(s=(0,Ot._)`${s}${(0,Ot.getProperty)((0,pm.unescapeJsonPointer)(l))}`,o=(0,Ot._)`${o} && ${s}`);return o;function u(l,c){return`Cannot access ${l} ${c} levels up, current level is ${t}`}}Wf.getData=kPe;var cR={};Object.defineProperty(cR,"__esModule",{value:!0});class xRt extends Error{constructor(t){super("validation failed"),this.errors=t,this.ajv=this.validation=!0}}cR.default=xRt;var XS={};Object.defineProperty(XS,"__esModule",{value:!0});const l9=No;class SRt extends Error{constructor(t,n,r,i){super(i||`can't resolve reference ${r} from id ${n}`),this.missingRef=(0,l9.resolveUrl)(t,n,r),this.missingSchema=(0,l9.normalizeId)((0,l9.getFullPath)(t,this.missingRef))}}XS.default=SRt;var Du={};Object.defineProperty(Du,"__esModule",{value:!0});Du.resolveSchema=Du.getCompilingSchema=Du.resolveRef=Du.compileSchema=Du.SchemaEnv=void 0;const cf=Dn,TRt=cR,Cv=sp,Pf=No,Che=wt,ARt=Wf;class e4{constructor(t){var n;this.refs={},this.dynamicAnchors={};let r;typeof t.schema=="object"&&(r=t.schema),this.schema=t.schema,this.schemaId=t.schemaId,this.root=t.root||this,this.baseId=(n=t.baseId)!==null&&n!==void 0?n:(0,Pf.normalizeId)(r==null?void 0:r[t.schemaId||"$id"]),this.schemaPath=t.schemaPath,this.localRefs=t.localRefs,this.meta=t.meta,this.$async=r==null?void 0:r.$async,this.refs={}}}Du.SchemaEnv=e4;function XJ(e){const t=RPe.call(this,e);if(t)return t;const n=(0,Pf.getFullPath)(this.opts.uriResolver,e.root.baseId),{es5:r,lines:i}=this.opts.code,{ownProperties:s}=this.opts,o=new cf.CodeGen(this.scope,{es5:r,lines:i,ownProperties:s});let a;e.$async&&(a=o.scopeValue("Error",{ref:TRt.default,code:(0,cf._)`require("ajv/dist/runtime/validation_error").default`}));const u=o.scopeName("validate");e.validateName=u;const l={gen:o,allErrors:this.opts.allErrors,data:Cv.default.data,parentData:Cv.default.parentData,parentDataProperty:Cv.default.parentDataProperty,dataNames:[Cv.default.data],dataPathArr:[cf.nil],dataLevel:0,dataTypes:[],definedProperties:new Set,topSchemaRef:o.scopeValue("schema",this.opts.code.source===!0?{ref:e.schema,code:(0,cf.stringify)(e.schema)}:{ref:e.schema}),validateName:u,ValidationError:a,schema:e.schema,schemaEnv:e,rootId:n,baseId:e.baseId||n,schemaPath:cf.nil,errSchemaPath:e.schemaPath||(this.opts.jtd?"":"#"),errorPath:(0,cf._)`""`,opts:this.opts,self:this};let c;try{this._compilations.add(e),(0,ARt.validateFunctionCode)(l),o.optimize(this.opts.code.optimize);const f=o.toString();c=`${o.scopeRefs(Cv.default.scope)}return ${f}`,this.opts.code.process&&(c=this.opts.code.process(c,e));const h=new Function(`${Cv.default.self}`,`${Cv.default.scope}`,c)(this,this.scope.get());if(this.scope.value(u,{ref:h}),h.errors=null,h.schema=e.schema,h.schemaEnv=e,e.$async&&(h.$async=!0),this.opts.code.source===!0&&(h.source={validateName:u,validateCode:f,scopeValues:o._values}),this.opts.unevaluated){const{props:p,items:m}=l;h.evaluated={props:p instanceof cf.Name?void 0:p,items:m instanceof cf.Name?void 0:m,dynamicProps:p instanceof cf.Name,dynamicItems:m instanceof cf.Name},h.source&&(h.source.evaluated=(0,cf.stringify)(h.evaluated))}return e.validate=h,e}catch(f){throw delete e.validate,delete e.validateName,c&&this.logger.error("Error compiling schema, function code:",c),f}finally{this._compilations.delete(e)}}Du.compileSchema=XJ;function CRt(e,t,n){var r;n=(0,Pf.resolveUrl)(this.opts.uriResolver,t,n);const i=e.refs[n];if(i)return i;let s=RRt.call(this,e,n);if(s===void 0){const o=(r=e.localRefs)===null||r===void 0?void 0:r[n],{schemaId:a}=this.opts;o&&(s=new e4({schema:o,schemaId:a,root:e,baseId:t}))}if(s!==void 0)return e.refs[n]=IRt.call(this,s)}Du.resolveRef=CRt;function IRt(e){return(0,Pf.inlineRef)(e.schema,this.opts.inlineRefs)?e.schema:e.validate?e:XJ.call(this,e)}function RPe(e){for(const t of this._compilations)if(kRt(t,e))return t}Du.getCompilingSchema=RPe;function kRt(e,t){return e.schema===t.schema&&e.root===t.root&&e.baseId===t.baseId}function RRt(e,t){let n;for(;typeof(n=this.refs[t])=="string";)t=n;return n||this.schemas[t]||t4.call(this,e,t)}function t4(e,t){const n=this.opts.uriResolver.parse(t),r=(0,Pf._getFullPath)(this.opts.uriResolver,n);let i=(0,Pf.getFullPath)(this.opts.uriResolver,e.baseId,void 0);if(Object.keys(e.schema).length>0&&r===i)return c9.call(this,n,e);const s=(0,Pf.normalizeId)(r),o=this.refs[s]||this.schemas[s];if(typeof o=="string"){const a=t4.call(this,e,o);return typeof(a==null?void 0:a.schema)!="object"?void 0:c9.call(this,n,a)}if(typeof(o==null?void 0:o.schema)=="object"){if(o.validate||XJ.call(this,o),s===(0,Pf.normalizeId)(t)){const{schema:a}=o,{schemaId:u}=this.opts,l=a[u];return l&&(i=(0,Pf.resolveUrl)(this.opts.uriResolver,i,l)),new e4({schema:a,schemaId:u,root:e,baseId:i})}return c9.call(this,n,o)}}Du.resolveSchema=t4;const NRt=new Set(["properties","patternProperties","enum","dependencies","definitions"]);function c9(e,{baseId:t,schema:n,root:r}){var i;if(((i=e.fragment)===null||i===void 0?void 0:i[0])!=="/")return;for(const a of e.fragment.slice(1).split("/")){if(typeof n=="boolean")return;const u=n[(0,Che.unescapeFragment)(a)];if(u===void 0)return;n=u;const l=typeof n=="object"&&n[this.opts.schemaId];!NRt.has(a)&&l&&(t=(0,Pf.resolveUrl)(this.opts.uriResolver,t,l))}let s;if(typeof n!="boolean"&&n.$ref&&!(0,Che.schemaHasRulesButRef)(n,this.RULES)){const a=(0,Pf.resolveUrl)(this.opts.uriResolver,t,n.$ref);s=t4.call(this,r,a)}const{schemaId:o}=this.opts;if(s=s||new e4({schema:n,schemaId:o,root:r,baseId:t}),s.schema!==s.root.schema)return s}const PRt="https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#",ORt="Meta-schema for $data reference (JSON AnySchema extension proposal)",DRt="object",$Rt=["$data"],MRt={$data:{type:"string",anyOf:[{format:"relative-json-pointer"},{format:"json-pointer"}]}},LRt=!1,FRt={$id:PRt,description:ORt,type:DRt,required:$Rt,properties:MRt,additionalProperties:LRt};var QJ={},mH={exports:{}};/** @license URI.js v4.4.1 (c) 2011 Gary Court. License: http://github.com/garycourt/uri-js */(function(e,t){(function(n,r){r(t)})(so,function(n){function r(){for(var oe=arguments.length,ee=Array(oe),ae=0;ae<oe;ae++)ee[ae]=arguments[ae];if(ee.length>1){ee[0]=ee[0].slice(0,-1);for(var Ae=ee.length-1,Se=1;Se<Ae;++Se)ee[Se]=ee[Se].slice(1,-1);return ee[Ae]=ee[Ae].slice(1),ee.join("")}else return ee[0]}function i(oe){return"(?:"+oe+")"}function s(oe){return oe===void 0?"undefined":oe===null?"null":Object.prototype.toString.call(oe).split(" ").pop().split("]").shift().toLowerCase()}function o(oe){return oe.toUpperCase()}function a(oe){return oe!=null?oe instanceof Array?oe:typeof oe.length!="number"||oe.split||oe.setInterval||oe.call?[oe]:Array.prototype.slice.call(oe):[]}function u(oe,ee){var ae=oe;if(ee)for(var Ae in ee)ae[Ae]=ee[Ae];return ae}function l(oe){var ee="[A-Za-z]",ae="[0-9]",Ae=r(ae,"[A-Fa-f]"),Se=i(i("%[EFef]"+Ae+"%"+Ae+Ae+"%"+Ae+Ae)+"|"+i("%[89A-Fa-f]"+Ae+"%"+Ae+Ae)+"|"+i("%"+Ae+Ae)),ot="[\\:\\/\\?\\#\\[\\]\\@]",Tt="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",Ht=r(ot,Tt),$n=oe?"[\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]":"[]",Bn=oe?"[\\uE000-\\uF8FF]":"[]",mn=r(ee,ae,"[\\-\\.\\_\\~]",$n);i(ee+r(ee,ae,"[\\+\\-\\.]")+"*"),i(i(Se+"|"+r(mn,Tt,"[\\:]"))+"*");var or=i(i("25[0-5]")+"|"+i("2[0-4]"+ae)+"|"+i("1"+ae+ae)+"|"+i("0?[1-9]"+ae)+"|0?0?"+ae),Rr=i(or+"\\."+or+"\\."+or+"\\."+or),Vt=i(Ae+"{1,4}"),ar=i(i(Vt+"\\:"+Vt)+"|"+Rr),Wr=i(i(Vt+"\\:")+"{6}"+ar),er=i("\\:\\:"+i(Vt+"\\:")+"{5}"+ar),Oi=i(i(Vt)+"?\\:\\:"+i(Vt+"\\:")+"{4}"+ar),Ys=i(i(i(Vt+"\\:")+"{0,1}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{3}"+ar),ti=i(i(i(Vt+"\\:")+"{0,2}"+Vt)+"?\\:\\:"+i(Vt+"\\:")+"{2}"+ar),_o=i(i(i(Vt+"\\:")+"{0,3}"+Vt)+"?\\:\\:"+Vt+"\\:"+ar),Ui=i(i(i(Vt+"\\:")+"{0,4}"+Vt)+"?\\:\\:"+ar),zi=i(i(i(Vt+"\\:")+"{0,5}"+Vt)+"?\\:\\:"+Vt),Wo=i(i(i(Vt+"\\:")+"{0,6}"+Vt)+"?\\:\\:"),Oa=i([Wr,er,Oi,Ys,ti,_o,Ui,zi,Wo].join("|")),Ks=i(i(mn+"|"+Se)+"+");i("[vV]"+Ae+"+\\."+r(mn,Tt,"[\\:]")+"+"),i(i(Se+"|"+r(mn,Tt))+"*");var oc=i(Se+"|"+r(mn,Tt,"[\\:\\@]"));return i(i(Se+"|"+r(mn,Tt,"[\\@]"))+"+"),i(i(oc+"|"+r("[\\/\\?]",Bn))+"*"),{NOT_SCHEME:new RegExp(r("[^]",ee,ae,"[\\+\\-\\.]"),"g"),NOT_USERINFO:new RegExp(r("[^\\%\\:]",mn,Tt),"g"),NOT_HOST:new RegExp(r("[^\\%\\[\\]\\:]",mn,Tt),"g"),NOT_PATH:new RegExp(r("[^\\%\\/\\:\\@]",mn,Tt),"g"),NOT_PATH_NOSCHEME:new RegExp(r("[^\\%\\/\\@]",mn,Tt),"g"),NOT_QUERY:new RegExp(r("[^\\%]",mn,Tt,"[\\:\\@\\/\\?]",Bn),"g"),NOT_FRAGMENT:new RegExp(r("[^\\%]",mn,Tt,"[\\:\\@\\/\\?]"),"g"),ESCAPE:new RegExp(r("[^]",mn,Tt),"g"),UNRESERVED:new RegExp(mn,"g"),OTHER_CHARS:new RegExp(r("[^\\%]",mn,Ht),"g"),PCT_ENCODED:new RegExp(Se,"g"),IPV4ADDRESS:new RegExp("^("+Rr+")$"),IPV6ADDRESS:new RegExp("^\\[?("+Oa+")"+i(i("\\%25|\\%(?!"+Ae+"{2})")+"("+Ks+")")+"?\\]?$")}}var c=l(!1),f=l(!0),d=function(){function oe(ee,ae){var Ae=[],Se=!0,ot=!1,Tt=void 0;try{for(var Ht=ee[Symbol.iterator](),$n;!(Se=($n=Ht.next()).done)&&(Ae.push($n.value),!(ae&&Ae.length===ae));Se=!0);}catch(Bn){ot=!0,Tt=Bn}finally{try{!Se&&Ht.return&&Ht.return()}finally{if(ot)throw Tt}}return Ae}return function(ee,ae){if(Array.isArray(ee))return ee;if(Symbol.iterator in Object(ee))return oe(ee,ae);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),h=function(oe){if(Array.isArray(oe)){for(var ee=0,ae=Array(oe.length);ee<oe.length;ee++)ae[ee]=oe[ee];return ae}else return Array.from(oe)},p=2147483647,m=36,g=1,y=26,v=38,b=700,w=72,E=128,T="-",S=/^xn--/,A=/[^\0-\x7E]/,C=/[\x2E\u3002\uFF0E\uFF61]/g,k={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},N=m-g,D=Math.floor,O=String.fromCharCode;function $(oe){throw new RangeError(k[oe])}function F(oe,ee){for(var ae=[],Ae=oe.length;Ae--;)ae[Ae]=ee(oe[Ae]);return ae}function M(oe,ee){var ae=oe.split("@"),Ae="";ae.length>1&&(Ae=ae[0]+"@",oe=ae[1]),oe=oe.replace(C,".");var Se=oe.split("."),ot=F(Se,ee).join(".");return Ae+ot}function B(oe){for(var ee=[],ae=0,Ae=oe.length;ae<Ae;){var Se=oe.charCodeAt(ae++);if(Se>=55296&&Se<=56319&&ae<Ae){var ot=oe.charCodeAt(ae++);(ot&64512)==56320?ee.push(((Se&1023)<<10)+(ot&1023)+65536):(ee.push(Se),ae--)}else ee.push(Se)}return ee}var U=function(ee){return String.fromCodePoint.apply(String,h(ee))},H=function(ee){return ee-48<10?ee-22:ee-65<26?ee-65:ee-97<26?ee-97:m},P=function(ee,ae){return ee+22+75*(ee<26)-((ae!=0)<<5)},z=function(ee,ae,Ae){var Se=0;for(ee=Ae?D(ee/b):ee>>1,ee+=D(ee/ae);ee>N*y>>1;Se+=m)ee=D(ee/N);return D(Se+(N+1)*ee/(ee+v))},W=function(ee){var ae=[],Ae=ee.length,Se=0,ot=E,Tt=w,Ht=ee.lastIndexOf(T);Ht<0&&(Ht=0);for(var $n=0;$n<Ht;++$n)ee.charCodeAt($n)>=128&&$("not-basic"),ae.push(ee.charCodeAt($n));for(var Bn=Ht>0?Ht+1:0;Bn<Ae;){for(var mn=Se,or=1,Rr=m;;Rr+=m){Bn>=Ae&&$("invalid-input");var Vt=H(ee.charCodeAt(Bn++));(Vt>=m||Vt>D((p-Se)/or))&&$("overflow"),Se+=Vt*or;var ar=Rr<=Tt?g:Rr>=Tt+y?y:Rr-Tt;if(Vt<ar)break;var Wr=m-ar;or>D(p/Wr)&&$("overflow"),or*=Wr}var er=ae.length+1;Tt=z(Se-mn,er,mn==0),D(Se/er)>p-ot&&$("overflow"),ot+=D(Se/er),Se%=er,ae.splice(Se++,0,ot)}return String.fromCodePoint.apply(String,ae)},j=function(ee){var ae=[];ee=B(ee);var Ae=ee.length,Se=E,ot=0,Tt=w,Ht=!0,$n=!1,Bn=void 0;try{for(var mn=ee[Symbol.iterator](),or;!(Ht=(or=mn.next()).done);Ht=!0){var Rr=or.value;Rr<128&&ae.push(O(Rr))}}catch(De){$n=!0,Bn=De}finally{try{!Ht&&mn.return&&mn.return()}finally{if($n)throw Bn}}var Vt=ae.length,ar=Vt;for(Vt&&ae.push(T);ar<Ae;){var Wr=p,er=!0,Oi=!1,Ys=void 0;try{for(var ti=ee[Symbol.iterator](),_o;!(er=(_o=ti.next()).done);er=!0){var Ui=_o.value;Ui>=Se&&Ui<Wr&&(Wr=Ui)}}catch(De){Oi=!0,Ys=De}finally{try{!er&&ti.return&&ti.return()}finally{if(Oi)throw Ys}}var zi=ar+1;Wr-Se>D((p-ot)/zi)&&$("overflow"),ot+=(Wr-Se)*zi,Se=Wr;var Wo=!0,Oa=!1,Ks=void 0;try{for(var oc=ee[Symbol.iterator](),xd;!(Wo=(xd=oc.next()).done);Wo=!0){var Y=xd.value;if(Y<Se&&++ot>p&&$("overflow"),Y==Se){for(var se=ot,Z=m;;Z+=m){var fe=Z<=Tt?g:Z>=Tt+y?y:Z-Tt;if(se<fe)break;var ye=se-fe,le=m-fe;ae.push(O(P(fe+ye%le,0))),se=D(ye/le)}ae.push(O(P(se,0))),Tt=z(ot,zi,ar==Vt),ot=0,++ar}}}catch(De){Oa=!0,Ks=De}finally{try{!Wo&&oc.return&&oc.return()}finally{if(Oa)throw Ks}}++ot,++Se}return ae.join("")},q=function(ee){return M(ee,function(ae){return S.test(ae)?W(ae.slice(4).toLowerCase()):ae})},G=function(ee){return M(ee,function(ae){return A.test(ae)?"xn--"+j(ae):ae})},ne={version:"2.1.0",ucs2:{decode:B,encode:U},decode:W,encode:j,toASCII:G,toUnicode:q},ce={};function de(oe){var ee=oe.charCodeAt(0),ae=void 0;return ee<16?ae="%0"+ee.toString(16).toUpperCase():ee<128?ae="%"+ee.toString(16).toUpperCase():ee<2048?ae="%"+(ee>>6|192).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase():ae="%"+(ee>>12|224).toString(16).toUpperCase()+"%"+(ee>>6&63|128).toString(16).toUpperCase()+"%"+(ee&63|128).toString(16).toUpperCase(),ae}function he(oe){for(var ee="",ae=0,Ae=oe.length;ae<Ae;){var Se=parseInt(oe.substr(ae+1,2),16);if(Se<128)ee+=String.fromCharCode(Se),ae+=3;else if(Se>=194&&Se<224){if(Ae-ae>=6){var ot=parseInt(oe.substr(ae+4,2),16);ee+=String.fromCharCode((Se&31)<<6|ot&63)}else ee+=oe.substr(ae,6);ae+=6}else if(Se>=224){if(Ae-ae>=9){var Tt=parseInt(oe.substr(ae+4,2),16),Ht=parseInt(oe.substr(ae+7,2),16);ee+=String.fromCharCode((Se&15)<<12|(Tt&63)<<6|Ht&63)}else ee+=oe.substr(ae,9);ae+=9}else ee+=oe.substr(ae,3),ae+=3}return ee}function ve(oe,ee){function ae(Ae){var Se=he(Ae);return Se.match(ee.UNRESERVED)?Se:Ae}return oe.scheme&&(oe.scheme=String(oe.scheme).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_SCHEME,"")),oe.userinfo!==void 0&&(oe.userinfo=String(oe.userinfo).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_USERINFO,de).replace(ee.PCT_ENCODED,o)),oe.host!==void 0&&(oe.host=String(oe.host).replace(ee.PCT_ENCODED,ae).toLowerCase().replace(ee.NOT_HOST,de).replace(ee.PCT_ENCODED,o)),oe.path!==void 0&&(oe.path=String(oe.path).replace(ee.PCT_ENCODED,ae).replace(oe.scheme?ee.NOT_PATH:ee.NOT_PATH_NOSCHEME,de).replace(ee.PCT_ENCODED,o)),oe.query!==void 0&&(oe.query=String(oe.query).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_QUERY,de).replace(ee.PCT_ENCODED,o)),oe.fragment!==void 0&&(oe.fragment=String(oe.fragment).replace(ee.PCT_ENCODED,ae).replace(ee.NOT_FRAGMENT,de).replace(ee.PCT_ENCODED,o)),oe}function Ie(oe){return oe.replace(/^0*(.*)/,"$1")||"0"}function be(oe,ee){var ae=oe.match(ee.IPV4ADDRESS)||[],Ae=d(ae,2),Se=Ae[1];return Se?Se.split(".").map(Ie).join("."):oe}function Xe(oe,ee){var ae=oe.match(ee.IPV6ADDRESS)||[],Ae=d(ae,3),Se=Ae[1],ot=Ae[2];if(Se){for(var Tt=Se.toLowerCase().split("::").reverse(),Ht=d(Tt,2),$n=Ht[0],Bn=Ht[1],mn=Bn?Bn.split(":").map(Ie):[],or=$n.split(":").map(Ie),Rr=ee.IPV4ADDRESS.test(or[or.length-1]),Vt=Rr?7:8,ar=or.length-Vt,Wr=Array(Vt),er=0;er<Vt;++er)Wr[er]=mn[er]||or[ar+er]||"";Rr&&(Wr[Vt-1]=be(Wr[Vt-1],ee));var Oi=Wr.reduce(function(zi,Wo,Oa){if(!Wo||Wo==="0"){var Ks=zi[zi.length-1];Ks&&Ks.index+Ks.length===Oa?Ks.length++:zi.push({index:Oa,length:1})}return zi},[]),Ys=Oi.sort(function(zi,Wo){return Wo.length-zi.length})[0],ti=void 0;if(Ys&&Ys.length>1){var _o=Wr.slice(0,Ys.index),Ui=Wr.slice(Ys.index+Ys.length);ti=_o.join(":")+"::"+Ui.join(":")}else ti=Wr.join(":");return ot&&(ti+="%"+ot),ti}else return oe}var ze=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?(\[[^\/?#\]]+\]|[^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#((?:.|\n|\r)*))?/i,yt="".match(/(){0}/)[1]===void 0;function it(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae={},Ae=ee.iri!==!1?f:c;ee.reference==="suffix"&&(oe=(ee.scheme?ee.scheme+":":"")+"//"+oe);var Se=oe.match(ze);if(Se){yt?(ae.scheme=Se[1],ae.userinfo=Se[3],ae.host=Se[4],ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=Se[7],ae.fragment=Se[8],isNaN(ae.port)&&(ae.port=Se[5])):(ae.scheme=Se[1]||void 0,ae.userinfo=oe.indexOf("@")!==-1?Se[3]:void 0,ae.host=oe.indexOf("//")!==-1?Se[4]:void 0,ae.port=parseInt(Se[5],10),ae.path=Se[6]||"",ae.query=oe.indexOf("?")!==-1?Se[7]:void 0,ae.fragment=oe.indexOf("#")!==-1?Se[8]:void 0,isNaN(ae.port)&&(ae.port=oe.match(/\/\/(?:.|\n)*\:(?:\/|\?|\#|$)/)?Se[4]:void 0)),ae.host&&(ae.host=Xe(be(ae.host,Ae),Ae)),ae.scheme===void 0&&ae.userinfo===void 0&&ae.host===void 0&&ae.port===void 0&&!ae.path&&ae.query===void 0?ae.reference="same-document":ae.scheme===void 0?ae.reference="relative":ae.fragment===void 0?ae.reference="absolute":ae.reference="uri",ee.reference&&ee.reference!=="suffix"&&ee.reference!==ae.reference&&(ae.error=ae.error||"URI is not a "+ee.reference+" reference.");var ot=ce[(ee.scheme||ae.scheme||"").toLowerCase()];if(!ee.unicodeSupport&&(!ot||!ot.unicodeSupport)){if(ae.host&&(ee.domainHost||ot&&ot.domainHost))try{ae.host=ne.toASCII(ae.host.replace(Ae.PCT_ENCODED,he).toLowerCase())}catch(Tt){ae.error=ae.error||"Host's domain name can not be converted to ASCII via punycode: "+Tt}ve(ae,c)}else ve(ae,Ae);ot&&ot.parse&&ot.parse(ae,ee)}else ae.error=ae.error||"URI can not be parsed.";return ae}function _e(oe,ee){var ae=ee.iri!==!1?f:c,Ae=[];return oe.userinfo!==void 0&&(Ae.push(oe.userinfo),Ae.push("@")),oe.host!==void 0&&Ae.push(Xe(be(String(oe.host),ae),ae).replace(ae.IPV6ADDRESS,function(Se,ot,Tt){return"["+ot+(Tt?"%25"+Tt:"")+"]"})),(typeof oe.port=="number"||typeof oe.port=="string")&&(Ae.push(":"),Ae.push(String(oe.port))),Ae.length?Ae.join(""):void 0}var ke=/^\.\.?\//,Ve=/^\/\.(\/|$)/,ct=/^\/\.\.(\/|$)/,Dt=/^\/?(?:.|\n)*?(?=\/|$)/;function Ge(oe){for(var ee=[];oe.length;)if(oe.match(ke))oe=oe.replace(ke,"");else if(oe.match(Ve))oe=oe.replace(Ve,"/");else if(oe.match(ct))oe=oe.replace(ct,"/"),ee.pop();else if(oe==="."||oe==="..")oe="";else{var ae=oe.match(Dt);if(ae){var Ae=ae[0];oe=oe.slice(Ae.length),ee.push(Ae)}else throw new Error("Unexpected dot segment condition")}return ee.join("")}function ge(oe){var ee=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ae=ee.iri?f:c,Ae=[],Se=ce[(ee.scheme||oe.scheme||"").toLowerCase()];if(Se&&Se.serialize&&Se.serialize(oe,ee),oe.host&&!ae.IPV6ADDRESS.test(oe.host)){if(ee.domainHost||Se&&Se.domainHost)try{oe.host=ee.iri?ne.toUnicode(oe.host):ne.toASCII(oe.host.replace(ae.PCT_ENCODED,he).toLowerCase())}catch(Ht){oe.error=oe.error||"Host's domain name can not be converted to "+(ee.iri?"Unicode":"ASCII")+" via punycode: "+Ht}}ve(oe,ae),ee.reference!=="suffix"&&oe.scheme&&(Ae.push(oe.scheme),Ae.push(":"));var ot=_e(oe,ee);if(ot!==void 0&&(ee.reference!=="suffix"&&Ae.push("//"),Ae.push(ot),oe.path&&oe.path.charAt(0)!=="/"&&Ae.push("/")),oe.path!==void 0){var Tt=oe.path;!ee.absolutePath&&(!Se||!Se.absolutePath)&&(Tt=Ge(Tt)),ot===void 0&&(Tt=Tt.replace(/^\/\//,"/%2F")),Ae.push(Tt)}return oe.query!==void 0&&(Ae.push("?"),Ae.push(oe.query)),oe.fragment!==void 0&&(Ae.push("#"),Ae.push(oe.fragment)),Ae.join("")}function ht(oe,ee){var ae=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Ae=arguments[3],Se={};return Ae||(oe=it(ge(oe,ae),ae),ee=it(ge(ee,ae),ae)),ae=ae||{},!ae.tolerant&&ee.scheme?(Se.scheme=ee.scheme,Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=Ge(ee.path||""),Se.query=ee.query):(ee.userinfo!==void 0||ee.host!==void 0||ee.port!==void 0?(Se.userinfo=ee.userinfo,Se.host=ee.host,Se.port=ee.port,Se.path=Ge(ee.path||""),Se.query=ee.query):(ee.path?(ee.path.charAt(0)==="/"?Se.path=Ge(ee.path):((oe.userinfo!==void 0||oe.host!==void 0||oe.port!==void 0)&&!oe.path?Se.path="/"+ee.path:oe.path?Se.path=oe.path.slice(0,oe.path.lastIndexOf("/")+1)+ee.path:Se.path=ee.path,Se.path=Ge(Se.path)),Se.query=ee.query):(Se.path=oe.path,ee.query!==void 0?Se.query=ee.query:Se.query=oe.query),Se.userinfo=oe.userinfo,Se.host=oe.host,Se.port=oe.port),Se.scheme=oe.scheme),Se.fragment=ee.fragment,Se}function vt(oe,ee,ae){var Ae=u({scheme:"null"},ae);return ge(ht(it(oe,Ae),it(ee,Ae),Ae,!0),Ae)}function pe(oe,ee){return typeof oe=="string"?oe=ge(it(oe,ee),ee):s(oe)==="object"&&(oe=it(ge(oe,ee),ee)),oe}function Ce(oe,ee,ae){return typeof oe=="string"?oe=ge(it(oe,ae),ae):s(oe)==="object"&&(oe=ge(oe,ae)),typeof ee=="string"?ee=ge(it(ee,ae),ae):s(ee)==="object"&&(ee=ge(ee,ae)),oe===ee}function qe(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.ESCAPE:f.ESCAPE,de)}function ut(oe,ee){return oe&&oe.toString().replace(!ee||!ee.iri?c.PCT_ENCODED:f.PCT_ENCODED,he)}var _t={scheme:"http",domainHost:!0,parse:function(ee,ae){return ee.host||(ee.error=ee.error||"HTTP URIs must have a host."),ee},serialize:function(ee,ae){var Ae=String(ee.scheme).toLowerCase()==="https";return(ee.port===(Ae?443:80)||ee.port==="")&&(ee.port=void 0),ee.path||(ee.path="/"),ee}},Fn={scheme:"https",domainHost:_t.domainHost,parse:_t.parse,serialize:_t.serialize};function Ir(oe){return typeof oe.secure=="boolean"?oe.secure:String(oe.scheme).toLowerCase()==="wss"}var jn={scheme:"ws",domainHost:!0,parse:function(ee,ae){var Ae=ee;return Ae.secure=Ir(Ae),Ae.resourceName=(Ae.path||"/")+(Ae.query?"?"+Ae.query:""),Ae.path=void 0,Ae.query=void 0,Ae},serialize:function(ee,ae){if((ee.port===(Ir(ee)?443:80)||ee.port==="")&&(ee.port=void 0),typeof ee.secure=="boolean"&&(ee.scheme=ee.secure?"wss":"ws",ee.secure=void 0),ee.resourceName){var Ae=ee.resourceName.split("?"),Se=d(Ae,2),ot=Se[0],Tt=Se[1];ee.path=ot&&ot!=="/"?ot:void 0,ee.query=Tt,ee.resourceName=void 0}return ee.fragment=void 0,ee}},dr={scheme:"wss",domainHost:jn.domainHost,parse:jn.parse,serialize:jn.serialize},yn={},In="[A-Za-z0-9\\-\\.\\_\\~\\xA0-\\u200D\\u2010-\\u2029\\u202F-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]",ir="[0-9A-Fa-f]",sr=i(i("%[EFef]"+ir+"%"+ir+ir+"%"+ir+ir)+"|"+i("%[89A-Fa-f]"+ir+"%"+ir+ir)+"|"+i("%"+ir+ir)),qo="[A-Za-z0-9\\!\\$\\%\\'\\*\\+\\-\\^\\_\\`\\{\\|\\}\\~]",ji="[\\!\\$\\%\\'\\(\\)\\*\\+\\,\\-\\.0-9\\<\\>A-Z\\x5E-\\x7E]",kn=r(ji,'[\\"\\\\]'),Bi="[\\!\\$\\'\\(\\)\\*\\+\\,\\;\\:\\@]",kr=new RegExp(In,"g"),bs=new RegExp(sr,"g"),gp=new RegExp(r("[^]",qo,"[\\.]",'[\\"]',kn),"g"),pl=new RegExp(r("[^]",In,Bi),"g"),Ed=pl;function Sr(oe){var ee=he(oe);return ee.match(kr)?ee:oe}var Pi={scheme:"mailto",parse:function(ee,ae){var Ae=ee,Se=Ae.to=Ae.path?Ae.path.split(","):[];if(Ae.path=void 0,Ae.query){for(var ot=!1,Tt={},Ht=Ae.query.split("&"),$n=0,Bn=Ht.length;$n<Bn;++$n){var mn=Ht[$n].split("=");switch(mn[0]){case"to":for(var or=mn[1].split(","),Rr=0,Vt=or.length;Rr<Vt;++Rr)Se.push(or[Rr]);break;case"subject":Ae.subject=ut(mn[1],ae);break;case"body":Ae.body=ut(mn[1],ae);break;default:ot=!0,Tt[ut(mn[0],ae)]=ut(mn[1],ae);break}}ot&&(Ae.headers=Tt)}Ae.query=void 0;for(var ar=0,Wr=Se.length;ar<Wr;++ar){var er=Se[ar].split("@");if(er[0]=ut(er[0]),ae.unicodeSupport)er[1]=ut(er[1],ae).toLowerCase();else try{er[1]=ne.toASCII(ut(er[1],ae).toLowerCase())}catch(Oi){Ae.error=Ae.error||"Email address's domain name can not be converted to ASCII via punycode: "+Oi}Se[ar]=er.join("@")}return Ae},serialize:function(ee,ae){var Ae=ee,Se=a(ee.to);if(Se){for(var ot=0,Tt=Se.length;ot<Tt;++ot){var Ht=String(Se[ot]),$n=Ht.lastIndexOf("@"),Bn=Ht.slice(0,$n).replace(bs,Sr).replace(bs,o).replace(gp,de),mn=Ht.slice($n+1);try{mn=ae.iri?ne.toUnicode(mn):ne.toASCII(ut(mn,ae).toLowerCase())}catch(ar){Ae.error=Ae.error||"Email address's domain name can not be converted to "+(ae.iri?"Unicode":"ASCII")+" via punycode: "+ar}Se[ot]=Bn+"@"+mn}Ae.path=Se.join(",")}var or=ee.headers=ee.headers||{};ee.subject&&(or.subject=ee.subject),ee.body&&(or.body=ee.body);var Rr=[];for(var Vt in or)or[Vt]!==yn[Vt]&&Rr.push(Vt.replace(bs,Sr).replace(bs,o).replace(pl,de)+"="+or[Vt].replace(bs,Sr).replace(bs,o).replace(Ed,de));return Rr.length&&(Ae.query=Rr.join("&")),Ae}},ei=/^([^\:]+)\:(.*)/,hu={scheme:"urn",parse:function(ee,ae){var Ae=ee.path&&ee.path.match(ei),Se=ee;if(Ae){var ot=ae.scheme||Se.scheme||"urn",Tt=Ae[1].toLowerCase(),Ht=Ae[2],$n=ot+":"+(ae.nid||Tt),Bn=ce[$n];Se.nid=Tt,Se.nss=Ht,Se.path=void 0,Bn&&(Se=Bn.parse(Se,ae))}else Se.error=Se.error||"URN can not be parsed.";return Se},serialize:function(ee,ae){var Ae=ae.scheme||ee.scheme||"urn",Se=ee.nid,ot=Ae+":"+(ae.nid||Se),Tt=ce[ot];Tt&&(ee=Tt.serialize(ee,ae));var Ht=ee,$n=ee.nss;return Ht.path=(Se||ae.nid)+":"+$n,Ht}},Na=/^[0-9A-Fa-f]{8}(?:\-[0-9A-Fa-f]{4}){3}\-[0-9A-Fa-f]{12}$/,Pa={scheme:"urn:uuid",parse:function(ee,ae){var Ae=ee;return Ae.uuid=Ae.nss,Ae.nss=void 0,!ae.tolerant&&(!Ae.uuid||!Ae.uuid.match(Na))&&(Ae.error=Ae.error||"UUID is not valid."),Ae},serialize:function(ee,ae){var Ae=ee;return Ae.nss=(ee.uuid||"").toLowerCase(),Ae}};ce[_t.scheme]=_t,ce[Fn.scheme]=Fn,ce[jn.scheme]=jn,ce[dr.scheme]=dr,ce[Pi.scheme]=Pi,ce[hu.scheme]=hu,ce[Pa.scheme]=Pa,n.SCHEMES=ce,n.pctEncChar=de,n.pctDecChars=he,n.parse=it,n.removeDotSegments=Ge,n.serialize=ge,n.resolveComponents=ht,n.resolve=vt,n.normalize=pe,n.equal=Ce,n.escapeComponent=qe,n.unescapeComponent=ut,Object.defineProperty(n,"__esModule",{value:!0})})})(mH,mH.exports);var jRt=mH.exports;Object.defineProperty(QJ,"__esModule",{value:!0});const NPe=jRt;NPe.code='require("ajv/dist/runtime/uri").default';QJ.default=NPe;(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.CodeGen=e.Name=e.nil=e.stringify=e.str=e._=e.KeywordCxt=void 0;var t=Wf;Object.defineProperty(e,"KeywordCxt",{enumerable:!0,get:function(){return t.KeywordCxt}});var n=Dn;Object.defineProperty(e,"_",{enumerable:!0,get:function(){return n._}}),Object.defineProperty(e,"str",{enumerable:!0,get:function(){return n.str}}),Object.defineProperty(e,"stringify",{enumerable:!0,get:function(){return n.stringify}}),Object.defineProperty(e,"nil",{enumerable:!0,get:function(){return n.nil}}),Object.defineProperty(e,"Name",{enumerable:!0,get:function(){return n.Name}}),Object.defineProperty(e,"CodeGen",{enumerable:!0,get:function(){return n.CodeGen}});const r=cR,i=XS,s=vb,o=Du,a=Dn,u=No,l=Ps,c=wt,f=FRt,d=QJ,h=(P,z)=>new RegExp(P,z);h.code="new RegExp";const p=["removeAdditional","useDefaults","coerceTypes"],m=new Set(["validate","serialize","parse","wrapper","root","schema","keyword","pattern","formats","validate$data","func","obj","Error"]),g={errorDataPath:"",format:"`validateFormats: false` can be used instead.",nullable:'"nullable" keyword is supported by default.',jsonPointers:"Deprecated jsPropertySyntax can be used instead.",extendRefs:"Deprecated ignoreKeywordsWithRef can be used instead.",missingRefs:"Pass empty schema with $id that should be ignored to ajv.addSchema.",processCode:"Use option `code: {process: (code, schemaEnv: object) => string}`",sourceCode:"Use option `code: {source: true}`",strictDefaults:"It is default now, see option `strict`.",strictKeywords:"It is default now, see option `strict`.",uniqueItems:'"uniqueItems" keyword is always validated.',unknownFormats:"Disable strict mode or pass `true` to `ajv.addFormat` (or `formats` option).",cache:"Map is used as cache, schema object as key.",serialize:"Map is used as cache, schema object as key.",ajvErrors:"It is default now."},y={ignoreKeywordsWithRef:"",jsPropertySyntax:"",unicode:'"minLength"/"maxLength" account for unicode characters by default.'},v=200;function b(P){var z,W,j,q,G,ne,ce,de,he,ve,Ie,be,Xe,ze,yt,it,_e,ke,Ve,ct,Dt,Ge,ge,ht,vt;const pe=P.strict,Ce=(z=P.code)===null||z===void 0?void 0:z.optimize,qe=Ce===!0||Ce===void 0?1:Ce||0,ut=(j=(W=P.code)===null||W===void 0?void 0:W.regExp)!==null&&j!==void 0?j:h,_t=(q=P.uriResolver)!==null&&q!==void 0?q:d.default;return{strictSchema:(ne=(G=P.strictSchema)!==null&&G!==void 0?G:pe)!==null&&ne!==void 0?ne:!0,strictNumbers:(de=(ce=P.strictNumbers)!==null&&ce!==void 0?ce:pe)!==null&&de!==void 0?de:!0,strictTypes:(ve=(he=P.strictTypes)!==null&&he!==void 0?he:pe)!==null&&ve!==void 0?ve:"log",strictTuples:(be=(Ie=P.strictTuples)!==null&&Ie!==void 0?Ie:pe)!==null&&be!==void 0?be:"log",strictRequired:(ze=(Xe=P.strictRequired)!==null&&Xe!==void 0?Xe:pe)!==null&&ze!==void 0?ze:!1,code:P.code?{...P.code,optimize:qe,regExp:ut}:{optimize:qe,regExp:ut},loopRequired:(yt=P.loopRequired)!==null&&yt!==void 0?yt:v,loopEnum:(it=P.loopEnum)!==null&&it!==void 0?it:v,meta:(_e=P.meta)!==null&&_e!==void 0?_e:!0,messages:(ke=P.messages)!==null&&ke!==void 0?ke:!0,inlineRefs:(Ve=P.inlineRefs)!==null&&Ve!==void 0?Ve:!0,schemaId:(ct=P.schemaId)!==null&&ct!==void 0?ct:"$id",addUsedSchema:(Dt=P.addUsedSchema)!==null&&Dt!==void 0?Dt:!0,validateSchema:(Ge=P.validateSchema)!==null&&Ge!==void 0?Ge:!0,validateFormats:(ge=P.validateFormats)!==null&&ge!==void 0?ge:!0,unicodeRegExp:(ht=P.unicodeRegExp)!==null&&ht!==void 0?ht:!0,int32range:(vt=P.int32range)!==null&&vt!==void 0?vt:!0,uriResolver:_t}}class w{constructor(z={}){this.schemas={},this.refs={},this.formats={},this._compilations=new Set,this._loading={},this._cache=new Map,z=this.opts={...z,...b(z)};const{es5:W,lines:j}=this.opts.code;this.scope=new a.ValueScope({scope:{},prefixes:m,es5:W,lines:j}),this.logger=D(z.logger);const q=z.validateFormats;z.validateFormats=!1,this.RULES=(0,s.getRules)(),E.call(this,g,z,"NOT SUPPORTED"),E.call(this,y,z,"DEPRECATED","warn"),this._metaOpts=k.call(this),z.formats&&A.call(this),this._addVocabularies(),this._addDefaultMetaSchema(),z.keywords&&C.call(this,z.keywords),typeof z.meta=="object"&&this.addMetaSchema(z.meta),S.call(this),z.validateFormats=q}_addVocabularies(){this.addKeyword("$async")}_addDefaultMetaSchema(){const{$data:z,meta:W,schemaId:j}=this.opts;let q=f;j==="id"&&(q={...f},q.id=q.$id,delete q.$id),W&&z&&this.addMetaSchema(q,q[j],!1)}defaultMeta(){const{meta:z,schemaId:W}=this.opts;return this.opts.defaultMeta=typeof z=="object"?z[W]||z:void 0}validate(z,W){let j;if(typeof z=="string"){if(j=this.getSchema(z),!j)throw new Error(`no schema with key or ref "${z}"`)}else j=this.compile(z);const q=j(W);return"$async"in j||(this.errors=j.errors),q}compile(z,W){const j=this._addSchema(z,W);return j.validate||this._compileSchemaEnv(j)}compileAsync(z,W){if(typeof this.opts.loadSchema!="function")throw new Error("options.loadSchema should be a function");const{loadSchema:j}=this.opts;return q.call(this,z,W);async function q(ve,Ie){await G.call(this,ve.$schema);const be=this._addSchema(ve,Ie);return be.validate||ne.call(this,be)}async function G(ve){ve&&!this.getSchema(ve)&&await q.call(this,{$ref:ve},!0)}async function ne(ve){try{return this._compileSchemaEnv(ve)}catch(Ie){if(!(Ie instanceof i.default))throw Ie;return ce.call(this,Ie),await de.call(this,Ie.missingSchema),ne.call(this,ve)}}function ce({missingSchema:ve,missingRef:Ie}){if(this.refs[ve])throw new Error(`AnySchema ${ve} is loaded but ${Ie} cannot be resolved`)}async function de(ve){const Ie=await he.call(this,ve);this.refs[ve]||await G.call(this,Ie.$schema),this.refs[ve]||this.addSchema(Ie,ve,W)}async function he(ve){const Ie=this._loading[ve];if(Ie)return Ie;try{return await(this._loading[ve]=j(ve))}finally{delete this._loading[ve]}}}addSchema(z,W,j,q=this.opts.validateSchema){if(Array.isArray(z)){for(const ne of z)this.addSchema(ne,void 0,j,q);return this}let G;if(typeof z=="object"){const{schemaId:ne}=this.opts;if(G=z[ne],G!==void 0&&typeof G!="string")throw new Error(`schema ${ne} must be string`)}return W=(0,u.normalizeId)(W||G),this._checkUnique(W),this.schemas[W]=this._addSchema(z,j,W,q,!0),this}addMetaSchema(z,W,j=this.opts.validateSchema){return this.addSchema(z,W,!0,j),this}validateSchema(z,W){if(typeof z=="boolean")return!0;let j;if(j=z.$schema,j!==void 0&&typeof j!="string")throw new Error("$schema must be a string");if(j=j||this.opts.defaultMeta||this.defaultMeta(),!j)return this.logger.warn("meta-schema not available"),this.errors=null,!0;const q=this.validate(j,z);if(!q&&W){const G="schema is invalid: "+this.errorsText();if(this.opts.validateSchema==="log")this.logger.error(G);else throw new Error(G)}return q}getSchema(z){let W;for(;typeof(W=T.call(this,z))=="string";)z=W;if(W===void 0){const{schemaId:j}=this.opts,q=new o.SchemaEnv({schema:{},schemaId:j});if(W=o.resolveSchema.call(this,q,z),!W)return;this.refs[z]=W}return W.validate||this._compileSchemaEnv(W)}removeSchema(z){if(z instanceof RegExp)return this._removeAllSchemas(this.schemas,z),this._removeAllSchemas(this.refs,z),this;switch(typeof z){case"undefined":return this._removeAllSchemas(this.schemas),this._removeAllSchemas(this.refs),this._cache.clear(),this;case"string":{const W=T.call(this,z);return typeof W=="object"&&this._cache.delete(W.schema),delete this.schemas[z],delete this.refs[z],this}case"object":{const W=z;this._cache.delete(W);let j=z[this.opts.schemaId];return j&&(j=(0,u.normalizeId)(j),delete this.schemas[j],delete this.refs[j]),this}default:throw new Error("ajv.removeSchema: invalid parameter")}}addVocabulary(z){for(const W of z)this.addKeyword(W);return this}addKeyword(z,W){let j;if(typeof z=="string")j=z,typeof W=="object"&&(this.logger.warn("these parameters are deprecated, see docs for addKeyword"),W.keyword=j);else if(typeof z=="object"&&W===void 0){if(W=z,j=W.keyword,Array.isArray(j)&&!j.length)throw new Error("addKeywords: keyword must be string or non-empty array")}else throw new Error("invalid addKeywords parameters");if($.call(this,j,W),!W)return(0,c.eachItem)(j,G=>F.call(this,G)),this;B.call(this,W);const q={...W,type:(0,l.getJSONTypes)(W.type),schemaType:(0,l.getJSONTypes)(W.schemaType)};return(0,c.eachItem)(j,q.type.length===0?G=>F.call(this,G,q):G=>q.type.forEach(ne=>F.call(this,G,q,ne))),this}getKeyword(z){const W=this.RULES.all[z];return typeof W=="object"?W.definition:!!W}removeKeyword(z){const{RULES:W}=this;delete W.keywords[z],delete W.all[z];for(const j of W.rules){const q=j.rules.findIndex(G=>G.keyword===z);q>=0&&j.rules.splice(q,1)}return this}addFormat(z,W){return typeof W=="string"&&(W=new RegExp(W)),this.formats[z]=W,this}errorsText(z=this.errors,{separator:W=", ",dataVar:j="data"}={}){return!z||z.length===0?"No errors":z.map(q=>`${j}${q.instancePath} ${q.message}`).reduce((q,G)=>q+W+G)}$dataMetaSchema(z,W){const j=this.RULES.all;z=JSON.parse(JSON.stringify(z));for(const q of W){const G=q.split("/").slice(1);let ne=z;for(const ce of G)ne=ne[ce];for(const ce in j){const de=j[ce];if(typeof de!="object")continue;const{$data:he}=de.definition,ve=ne[ce];he&&ve&&(ne[ce]=H(ve))}}return z}_removeAllSchemas(z,W){for(const j in z){const q=z[j];(!W||W.test(j))&&(typeof q=="string"?delete z[j]:q&&!q.meta&&(this._cache.delete(q.schema),delete z[j]))}}_addSchema(z,W,j,q=this.opts.validateSchema,G=this.opts.addUsedSchema){let ne;const{schemaId:ce}=this.opts;if(typeof z=="object")ne=z[ce];else{if(this.opts.jtd)throw new Error("schema must be object");if(typeof z!="boolean")throw new Error("schema must be object or boolean")}let de=this._cache.get(z);if(de!==void 0)return de;j=(0,u.normalizeId)(ne||j);const he=u.getSchemaRefs.call(this,z,j);return de=new o.SchemaEnv({schema:z,schemaId:ce,meta:W,baseId:j,localRefs:he}),this._cache.set(de.schema,de),G&&!j.startsWith("#")&&(j&&this._checkUnique(j),this.refs[j]=de),q&&this.validateSchema(z,!0),de}_checkUnique(z){if(this.schemas[z]||this.refs[z])throw new Error(`schema with key or id "${z}" already exists`)}_compileSchemaEnv(z){if(z.meta?this._compileMetaSchema(z):o.compileSchema.call(this,z),!z.validate)throw new Error("ajv implementation error");return z.validate}_compileMetaSchema(z){const W=this.opts;this.opts=this._metaOpts;try{o.compileSchema.call(this,z)}finally{this.opts=W}}}w.ValidationError=r.default,w.MissingRefError=i.default,e.default=w;function E(P,z,W,j="error"){for(const q in P){const G=q;G in z&&this.logger[j](`${W}: option ${q}. ${P[G]}`)}}function T(P){return P=(0,u.normalizeId)(P),this.schemas[P]||this.refs[P]}function S(){const P=this.opts.schemas;if(P)if(Array.isArray(P))this.addSchema(P);else for(const z in P)this.addSchema(P[z],z)}function A(){for(const P in this.opts.formats){const z=this.opts.formats[P];z&&this.addFormat(P,z)}}function C(P){if(Array.isArray(P)){this.addVocabulary(P);return}this.logger.warn("keywords option as map is deprecated, pass array");for(const z in P){const W=P[z];W.keyword||(W.keyword=z),this.addKeyword(W)}}function k(){const P={...this.opts};for(const z of p)delete P[z];return P}const N={log(){},warn(){},error(){}};function D(P){if(P===!1)return N;if(P===void 0)return console;if(P.log&&P.warn&&P.error)return P;throw new Error("logger must implement log, warn and error methods")}const O=/^[a-z_$][a-z0-9_$:-]*$/i;function $(P,z){const{RULES:W}=this;if((0,c.eachItem)(P,j=>{if(W.keywords[j])throw new Error(`Keyword ${j} is already defined`);if(!O.test(j))throw new Error(`Keyword ${j} has invalid name`)}),!!z&&z.$data&&!("code"in z||"validate"in z))throw new Error('$data keyword must have "code" or "validate" function')}function F(P,z,W){var j;const q=z==null?void 0:z.post;if(W&&q)throw new Error('keyword with "post" flag cannot have "type"');const{RULES:G}=this;let ne=q?G.post:G.rules.find(({type:de})=>de===W);if(ne||(ne={type:W,rules:[]},G.rules.push(ne)),G.keywords[P]=!0,!z)return;const ce={keyword:P,definition:{...z,type:(0,l.getJSONTypes)(z.type),schemaType:(0,l.getJSONTypes)(z.schemaType)}};z.before?M.call(this,ne,ce,z.before):ne.rules.push(ce),G.all[P]=ce,(j=z.implements)===null||j===void 0||j.forEach(de=>this.addKeyword(de))}function M(P,z,W){const j=P.rules.findIndex(q=>q.keyword===W);j>=0?P.rules.splice(j,0,z):(P.rules.push(z),this.logger.warn(`rule ${W} is not defined`))}function B(P){let{metaSchema:z}=P;z!==void 0&&(P.$data&&this.opts.$data&&(z=H(z)),P.validateSchema=this.compile(z,!0))}const U={$ref:"https://raw.githubusercontent.com/ajv-validator/ajv/master/lib/refs/data.json#"};function H(P){return{anyOf:[P,U]}}})(ZNe);var JJ={},ZJ={},eZ={};Object.defineProperty(eZ,"__esModule",{value:!0});const BRt={keyword:"id",code(){throw new Error('NOT SUPPORTED: keyword "id", use "$id" for schema ID')}};eZ.default=BRt;var bb={};Object.defineProperty(bb,"__esModule",{value:!0});bb.callRef=bb.getValidate=void 0;const URt=XS,Ihe=Pn,Eu=Dn,X_=sp,khe=Du,CP=wt,zRt={keyword:"$ref",schemaType:"string",code(e){const{gen:t,schema:n,it:r}=e,{baseId:i,schemaEnv:s,validateName:o,opts:a,self:u}=r,{root:l}=s;if((n==="#"||n==="#/")&&i===l.baseId)return f();const c=khe.resolveRef.call(u,l,i,n);if(c===void 0)throw new URt.default(r.opts.uriResolver,i,n);if(c instanceof khe.SchemaEnv)return d(c);return h(c);function f(){if(s===l)return rD(e,o,s,s.$async);const p=t.scopeValue("root",{ref:l});return rD(e,(0,Eu._)`${p}.validate`,l,l.$async)}function d(p){const m=PPe(e,p);rD(e,m,p,p.$async)}function h(p){const m=t.scopeValue("schema",a.code.source===!0?{ref:p,code:(0,Eu.stringify)(p)}:{ref:p}),g=t.name("valid"),y=e.subschema({schema:p,dataTypes:[],schemaPath:Eu.nil,topSchemaRef:m,errSchemaPath:n},g);e.mergeEvaluated(y),e.ok(g)}}};function PPe(e,t){const{gen:n}=e;return t.validate?n.scopeValue("validate",{ref:t.validate}):(0,Eu._)`${n.scopeValue("wrapper",{ref:t})}.validate`}bb.getValidate=PPe;function rD(e,t,n,r){const{gen:i,it:s}=e,{allErrors:o,schemaEnv:a,opts:u}=s,l=u.passContext?X_.default.this:Eu.nil;r?c():f();function c(){if(!a.$async)throw new Error("async schema referenced by sync schema");const p=i.let("valid");i.try(()=>{i.code((0,Eu._)`await ${(0,Ihe.callValidateCode)(e,t,l)}`),h(t),o||i.assign(p,!0)},m=>{i.if((0,Eu._)`!(${m} instanceof ${s.ValidationError})`,()=>i.throw(m)),d(m),o||i.assign(p,!1)}),e.ok(p)}function f(){e.result((0,Ihe.callValidateCode)(e,t,l),()=>h(t),()=>d(t))}function d(p){const m=(0,Eu._)`${p}.errors`;i.assign(X_.default.vErrors,(0,Eu._)`${X_.default.vErrors} === null ? ${m} : ${X_.default.vErrors}.concat(${m})`),i.assign(X_.default.errors,(0,Eu._)`${X_.default.vErrors}.length`)}function h(p){var m;if(!s.opts.unevaluated)return;const g=(m=n==null?void 0:n.validate)===null||m===void 0?void 0:m.evaluated;if(s.props!==!0)if(g&&!g.dynamicProps)g.props!==void 0&&(s.props=CP.mergeEvaluated.props(i,g.props,s.props));else{const y=i.var("props",(0,Eu._)`${p}.evaluated.props`);s.props=CP.mergeEvaluated.props(i,y,s.props,Eu.Name)}if(s.items!==!0)if(g&&!g.dynamicItems)g.items!==void 0&&(s.items=CP.mergeEvaluated.items(i,g.items,s.items));else{const y=i.var("items",(0,Eu._)`${p}.evaluated.items`);s.items=CP.mergeEvaluated.items(i,y,s.items,Eu.Name)}}}bb.callRef=rD;bb.default=zRt;Object.defineProperty(ZJ,"__esModule",{value:!0});const VRt=eZ,HRt=bb,qRt=["$schema","$id","$defs","$vocabulary",{keyword:"$comment"},"definitions",VRt.default,HRt.default];ZJ.default=qRt;var tZ={},nZ={};Object.defineProperty(nZ,"__esModule",{value:!0});const h3=Dn,kg=h3.operators,p3={maximum:{okStr:"<=",ok:kg.LTE,fail:kg.GT},minimum:{okStr:">=",ok:kg.GTE,fail:kg.LT},exclusiveMaximum:{okStr:"<",ok:kg.LT,fail:kg.GTE},exclusiveMinimum:{okStr:">",ok:kg.GT,fail:kg.LTE}},WRt={message:({keyword:e,schemaCode:t})=>(0,h3.str)`must be ${p3[e].okStr} ${t}`,params:({keyword:e,schemaCode:t})=>(0,h3._)`{comparison: ${p3[e].okStr}, limit: ${t}}`},GRt={keyword:Object.keys(p3),type:"number",schemaType:"number",$data:!0,error:WRt,code(e){const{keyword:t,data:n,schemaCode:r}=e;e.fail$data((0,h3._)`${n} ${p3[t].fail} ${r} || isNaN(${n})`)}};nZ.default=GRt;var rZ={};Object.defineProperty(rZ,"__esModule",{value:!0});const s2=Dn,YRt={message:({schemaCode:e})=>(0,s2.str)`must be multiple of ${e}`,params:({schemaCode:e})=>(0,s2._)`{multipleOf: ${e}}`},KRt={keyword:"multipleOf",type:"number",schemaType:"number",$data:!0,error:YRt,code(e){const{gen:t,data:n,schemaCode:r,it:i}=e,s=i.opts.multipleOfPrecision,o=t.let("res"),a=s?(0,s2._)`Math.abs(Math.round(${o}) - ${o}) > 1e-${s}`:(0,s2._)`${o} !== parseInt(${o})`;e.fail$data((0,s2._)`(${r} === 0 || (${o} = ${n}/${r}, ${a}))`)}};rZ.default=KRt;var iZ={},sZ={};Object.defineProperty(sZ,"__esModule",{value:!0});function OPe(e){const t=e.length;let n=0,r=0,i;for(;r<t;)n++,i=e.charCodeAt(r++),i>=55296&&i<=56319&&r<t&&(i=e.charCodeAt(r),(i&64512)===56320&&r++);return n}sZ.default=OPe;OPe.code='require("ajv/dist/runtime/ucs2length").default';Object.defineProperty(iZ,"__esModule",{value:!0});const a1=Dn,XRt=wt,QRt=sZ,JRt={message({keyword:e,schemaCode:t}){const n=e==="maxLength"?"more":"fewer";return(0,a1.str)`must NOT have ${n} than ${t} characters`},params:({schemaCode:e})=>(0,a1._)`{limit: ${e}}`},ZRt={keyword:["maxLength","minLength"],type:"string",schemaType:"number",$data:!0,error:JRt,code(e){const{keyword:t,data:n,schemaCode:r,it:i}=e,s=t==="maxLength"?a1.operators.GT:a1.operators.LT,o=i.opts.unicode===!1?(0,a1._)`${n}.length`:(0,a1._)`${(0,XRt.useFunc)(e.gen,QRt.default)}(${n})`;e.fail$data((0,a1._)`${o} ${s} ${r}`)}};iZ.default=ZRt;var oZ={};Object.defineProperty(oZ,"__esModule",{value:!0});const eNt=Pn,m3=Dn,tNt={message:({schemaCode:e})=>(0,m3.str)`must match pattern "${e}"`,params:({schemaCode:e})=>(0,m3._)`{pattern: ${e}}`},nNt={keyword:"pattern",type:"string",schemaType:"string",$data:!0,error:tNt,code(e){const{data:t,$data:n,schema:r,schemaCode:i,it:s}=e,o=s.opts.unicodeRegExp?"u":"",a=n?(0,m3._)`(new RegExp(${i}, ${o}))`:(0,eNt.usePattern)(e,r);e.fail$data((0,m3._)`!${a}.test(${t})`)}};oZ.default=nNt;var aZ={};Object.defineProperty(aZ,"__esModule",{value:!0});const o2=Dn,rNt={message({keyword:e,schemaCode:t}){const n=e==="maxProperties"?"more":"fewer";return(0,o2.str)`must NOT have ${n} than ${t} properties`},params:({schemaCode:e})=>(0,o2._)`{limit: ${e}}`},iNt={keyword:["maxProperties","minProperties"],type:"object",schemaType:"number",$data:!0,error:rNt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxProperties"?o2.operators.GT:o2.operators.LT;e.fail$data((0,o2._)`Object.keys(${n}).length ${i} ${r}`)}};aZ.default=iNt;var uZ={};Object.defineProperty(uZ,"__esModule",{value:!0});const aA=Pn,a2=Dn,sNt=wt,oNt={message:({params:{missingProperty:e}})=>(0,a2.str)`must have required property '${e}'`,params:({params:{missingProperty:e}})=>(0,a2._)`{missingProperty: ${e}}`},aNt={keyword:"required",type:"object",schemaType:"array",$data:!0,error:oNt,code(e){const{gen:t,schema:n,schemaCode:r,data:i,$data:s,it:o}=e,{opts:a}=o;if(!s&&n.length===0)return;const u=n.length>=a.loopRequired;if(o.allErrors?l():c(),a.strictRequired){const h=e.parentSchema.properties,{definedProperties:p}=e.it;for(const m of n)if((h==null?void 0:h[m])===void 0&&!p.has(m)){const g=o.schemaEnv.baseId+o.errSchemaPath,y=`required property "${m}" is not defined at "${g}" (strictRequired)`;(0,sNt.checkStrictMode)(o,y,o.opts.strictRequired)}}function l(){if(u||s)e.block$data(a2.nil,f);else for(const h of n)(0,aA.checkReportMissingProp)(e,h)}function c(){const h=t.let("missing");if(u||s){const p=t.let("valid",!0);e.block$data(p,()=>d(h,p)),e.ok(p)}else t.if((0,aA.checkMissingProp)(e,n,h)),(0,aA.reportMissingProp)(e,h),t.else()}function f(){t.forOf("prop",r,h=>{e.setParams({missingProperty:h}),t.if((0,aA.noPropertyInData)(t,i,h,a.ownProperties),()=>e.error())})}function d(h,p){e.setParams({missingProperty:h}),t.forOf(h,r,()=>{t.assign(p,(0,aA.propertyInData)(t,i,h,a.ownProperties)),t.if((0,a2.not)(p),()=>{e.error(),t.break()})},a2.nil)}}};uZ.default=aNt;var lZ={};Object.defineProperty(lZ,"__esModule",{value:!0});const u2=Dn,uNt={message({keyword:e,schemaCode:t}){const n=e==="maxItems"?"more":"fewer";return(0,u2.str)`must NOT have ${n} than ${t} items`},params:({schemaCode:e})=>(0,u2._)`{limit: ${e}}`},lNt={keyword:["maxItems","minItems"],type:"array",schemaType:"number",$data:!0,error:uNt,code(e){const{keyword:t,data:n,schemaCode:r}=e,i=t==="maxItems"?u2.operators.GT:u2.operators.LT;e.fail$data((0,u2._)`${n}.length ${i} ${r}`)}};lZ.default=lNt;var cZ={},fR={};Object.defineProperty(fR,"__esModule",{value:!0});const DPe=oX;DPe.code='require("ajv/dist/runtime/equal").default';fR.default=DPe;Object.defineProperty(cZ,"__esModule",{value:!0});const f9=Ps,To=Dn,cNt=wt,fNt=fR,dNt={message:({params:{i:e,j:t}})=>(0,To.str)`must NOT have duplicate items (items ## ${t} and ${e} are identical)`,params:({params:{i:e,j:t}})=>(0,To._)`{i: ${e}, j: ${t}}`},hNt={keyword:"uniqueItems",type:"array",schemaType:"boolean",$data:!0,error:dNt,code(e){const{gen:t,data:n,$data:r,schema:i,parentSchema:s,schemaCode:o,it:a}=e;if(!r&&!i)return;const u=t.let("valid"),l=s.items?(0,f9.getSchemaTypes)(s.items):[];e.block$data(u,c,(0,To._)`${o} === false`),e.ok(u);function c(){const p=t.let("i",(0,To._)`${n}.length`),m=t.let("j");e.setParams({i:p,j:m}),t.assign(u,!0),t.if((0,To._)`${p} > 1`,()=>(f()?d:h)(p,m))}function f(){return l.length>0&&!l.some(p=>p==="object"||p==="array")}function d(p,m){const g=t.name("item"),y=(0,f9.checkDataTypes)(l,g,a.opts.strictNumbers,f9.DataType.Wrong),v=t.const("indices",(0,To._)`{}`);t.for((0,To._)`;${p}--;`,()=>{t.let(g,(0,To._)`${n}[${p}]`),t.if(y,(0,To._)`continue`),l.length>1&&t.if((0,To._)`typeof ${g} == "string"`,(0,To._)`${g} += "_"`),t.if((0,To._)`typeof ${v}[${g}] == "number"`,()=>{t.assign(m,(0,To._)`${v}[${g}]`),e.error(),t.assign(u,!1).break()}).code((0,To._)`${v}[${g}] = ${p}`)})}function h(p,m){const g=(0,cNt.useFunc)(t,fNt.default),y=t.name("outer");t.label(y).for((0,To._)`;${p}--;`,()=>t.for((0,To._)`${m} = ${p}; ${m}--;`,()=>t.if((0,To._)`${g}(${n}[${p}], ${n}[${m}])`,()=>{e.error(),t.assign(u,!1).break(y)})))}}};cZ.default=hNt;var fZ={};Object.defineProperty(fZ,"__esModule",{value:!0});const gH=Dn,pNt=wt,mNt=fR,gNt={message:"must be equal to constant",params:({schemaCode:e})=>(0,gH._)`{allowedValue: ${e}}`},yNt={keyword:"const",$data:!0,error:gNt,code(e){const{gen:t,data:n,$data:r,schemaCode:i,schema:s}=e;r||s&&typeof s=="object"?e.fail$data((0,gH._)`!${(0,pNt.useFunc)(t,mNt.default)}(${n}, ${i})`):e.fail((0,gH._)`${s} !== ${n}`)}};fZ.default=yNt;var dZ={};Object.defineProperty(dZ,"__esModule",{value:!0});const iC=Dn,vNt=wt,bNt=fR,_Nt={message:"must be equal to one of the allowed values",params:({schemaCode:e})=>(0,iC._)`{allowedValues: ${e}}`},wNt={keyword:"enum",schemaType:"array",$data:!0,error:_Nt,code(e){const{gen:t,data:n,$data:r,schema:i,schemaCode:s,it:o}=e;if(!r&&i.length===0)throw new Error("enum must have non-empty array");const a=i.length>=o.opts.loopEnum;let u;const l=()=>u??(u=(0,vNt.useFunc)(t,bNt.default));let c;if(a||r)c=t.let("valid"),e.block$data(c,f);else{if(!Array.isArray(i))throw new Error("ajv implementation error");const h=t.const("vSchema",s);c=(0,iC.or)(...i.map((p,m)=>d(h,m)))}e.pass(c);function f(){t.assign(c,!1),t.forOf("v",s,h=>t.if((0,iC._)`${l()}(${n}, ${h})`,()=>t.assign(c,!0).break()))}function d(h,p){const m=i[p];return typeof m=="object"&&m!==null?(0,iC._)`${l()}(${n}, ${h}[${p}])`:(0,iC._)`${n} === ${m}`}}};dZ.default=wNt;Object.defineProperty(tZ,"__esModule",{value:!0});const ENt=nZ,xNt=rZ,SNt=iZ,TNt=oZ,ANt=aZ,CNt=uZ,INt=lZ,kNt=cZ,RNt=fZ,NNt=dZ,PNt=[ENt.default,xNt.default,SNt.default,TNt.default,ANt.default,CNt.default,INt.default,kNt.default,{keyword:"type",schemaType:["string","array"]},{keyword:"nullable",schemaType:"boolean"},RNt.default,NNt.default];tZ.default=PNt;var hZ={},QS={};Object.defineProperty(QS,"__esModule",{value:!0});QS.validateAdditionalItems=void 0;const u1=Dn,yH=wt,ONt={message:({params:{len:e}})=>(0,u1.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,u1._)`{limit: ${e}}`},DNt={keyword:"additionalItems",type:"array",schemaType:["boolean","object"],before:"uniqueItems",error:ONt,code(e){const{parentSchema:t,it:n}=e,{items:r}=t;if(!Array.isArray(r)){(0,yH.checkStrictMode)(n,'"additionalItems" is ignored when "items" is not an array of schemas');return}$Pe(e,r)}};function $Pe(e,t){const{gen:n,schema:r,data:i,keyword:s,it:o}=e;o.items=!0;const a=n.const("len",(0,u1._)`${i}.length`);if(r===!1)e.setParams({len:t.length}),e.pass((0,u1._)`${a} <= ${t.length}`);else if(typeof r=="object"&&!(0,yH.alwaysValidSchema)(o,r)){const l=n.var("valid",(0,u1._)`${a} <= ${t.length}`);n.if((0,u1.not)(l),()=>u(l)),e.ok(l)}function u(l){n.forRange("i",t.length,a,c=>{e.subschema({keyword:s,dataProp:c,dataPropType:yH.Type.Num},l),o.allErrors||n.if((0,u1.not)(l),()=>n.break())})}}QS.validateAdditionalItems=$Pe;QS.default=DNt;var pZ={},JS={};Object.defineProperty(JS,"__esModule",{value:!0});JS.validateTuple=void 0;const Rhe=Dn,iD=wt,$Nt=Pn,MNt={keyword:"items",type:"array",schemaType:["object","array","boolean"],before:"uniqueItems",code(e){const{schema:t,it:n}=e;if(Array.isArray(t))return MPe(e,"additionalItems",t);n.items=!0,!(0,iD.alwaysValidSchema)(n,t)&&e.ok((0,$Nt.validateArray)(e))}};function MPe(e,t,n=e.schema){const{gen:r,parentSchema:i,data:s,keyword:o,it:a}=e;c(i),a.opts.unevaluated&&n.length&&a.items!==!0&&(a.items=iD.mergeEvaluated.items(r,n.length,a.items));const u=r.name("valid"),l=r.const("len",(0,Rhe._)`${s}.length`);n.forEach((f,d)=>{(0,iD.alwaysValidSchema)(a,f)||(r.if((0,Rhe._)`${l} > ${d}`,()=>e.subschema({keyword:o,schemaProp:d,dataProp:d},u)),e.ok(u))});function c(f){const{opts:d,errSchemaPath:h}=a,p=n.length,m=p===f.minItems&&(p===f.maxItems||f[t]===!1);if(d.strictTuples&&!m){const g=`"${o}" is ${p}-tuple, but minItems or maxItems/${t} are not specified or different at path "${h}"`;(0,iD.checkStrictMode)(a,g,d.strictTuples)}}}JS.validateTuple=MPe;JS.default=MNt;Object.defineProperty(pZ,"__esModule",{value:!0});const LNt=JS,FNt={keyword:"prefixItems",type:"array",schemaType:["array"],before:"uniqueItems",code:e=>(0,LNt.validateTuple)(e,"items")};pZ.default=FNt;var mZ={};Object.defineProperty(mZ,"__esModule",{value:!0});const Nhe=Dn,jNt=wt,BNt=Pn,UNt=QS,zNt={message:({params:{len:e}})=>(0,Nhe.str)`must NOT have more than ${e} items`,params:({params:{len:e}})=>(0,Nhe._)`{limit: ${e}}`},VNt={keyword:"items",type:"array",schemaType:["object","boolean"],before:"uniqueItems",error:zNt,code(e){const{schema:t,parentSchema:n,it:r}=e,{prefixItems:i}=n;r.items=!0,!(0,jNt.alwaysValidSchema)(r,t)&&(i?(0,UNt.validateAdditionalItems)(e,i):e.ok((0,BNt.validateArray)(e)))}};mZ.default=VNt;var gZ={};Object.defineProperty(gZ,"__esModule",{value:!0});const yc=Dn,IP=wt,HNt={message:({params:{min:e,max:t}})=>t===void 0?(0,yc.str)`must contain at least ${e} valid item(s)`:(0,yc.str)`must contain at least ${e} and no more than ${t} valid item(s)`,params:({params:{min:e,max:t}})=>t===void 0?(0,yc._)`{minContains: ${e}}`:(0,yc._)`{minContains: ${e}, maxContains: ${t}}`},qNt={keyword:"contains",type:"array",schemaType:["object","boolean"],before:"uniqueItems",trackErrors:!0,error:HNt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;let o,a;const{minContains:u,maxContains:l}=r;s.opts.next?(o=u===void 0?1:u,a=l):o=1;const c=t.const("len",(0,yc._)`${i}.length`);if(e.setParams({min:o,max:a}),a===void 0&&o===0){(0,IP.checkStrictMode)(s,'"minContains" == 0 without "maxContains": "contains" keyword ignored');return}if(a!==void 0&&o>a){(0,IP.checkStrictMode)(s,'"minContains" > "maxContains" is always invalid'),e.fail();return}if((0,IP.alwaysValidSchema)(s,n)){let m=(0,yc._)`${c} >= ${o}`;a!==void 0&&(m=(0,yc._)`${m} && ${c} <= ${a}`),e.pass(m);return}s.items=!0;const f=t.name("valid");a===void 0&&o===1?h(f,()=>t.if(f,()=>t.break())):o===0?(t.let(f,!0),a!==void 0&&t.if((0,yc._)`${i}.length > 0`,d)):(t.let(f,!1),d()),e.result(f,()=>e.reset());function d(){const m=t.name("_valid"),g=t.let("count",0);h(m,()=>t.if(m,()=>p(g)))}function h(m,g){t.forRange("i",0,c,y=>{e.subschema({keyword:"contains",dataProp:y,dataPropType:IP.Type.Num,compositeRule:!0},m),g()})}function p(m){t.code((0,yc._)`${m}++`),a===void 0?t.if((0,yc._)`${m} >= ${o}`,()=>t.assign(f,!0).break()):(t.if((0,yc._)`${m} > ${a}`,()=>t.assign(f,!1).break()),o===1?t.assign(f,!0):t.if((0,yc._)`${m} >= ${o}`,()=>t.assign(f,!0)))}}};gZ.default=qNt;var LPe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.validateSchemaDeps=e.validatePropertyDeps=e.error=void 0;const t=Dn,n=wt,r=Pn;e.error={message:({params:{property:u,depsCount:l,deps:c}})=>{const f=l===1?"property":"properties";return(0,t.str)`must have ${f} ${c} when property ${u} is present`},params:({params:{property:u,depsCount:l,deps:c,missingProperty:f}})=>(0,t._)`{property: ${u},
    missingProperty: ${f},
    depsCount: ${l},
    deps: ${c}}`};const i={keyword:"dependencies",type:"object",schemaType:"object",error:e.error,code(u){const[l,c]=s(u);o(u,l),a(u,c)}};function s({schema:u}){const l={},c={};for(const f in u){if(f==="__proto__")continue;const d=Array.isArray(u[f])?l:c;d[f]=u[f]}return[l,c]}function o(u,l=u.schema){const{gen:c,data:f,it:d}=u;if(Object.keys(l).length===0)return;const h=c.let("missing");for(const p in l){const m=l[p];if(m.length===0)continue;const g=(0,r.propertyInData)(c,f,p,d.opts.ownProperties);u.setParams({property:p,depsCount:m.length,deps:m.join(", ")}),d.allErrors?c.if(g,()=>{for(const y of m)(0,r.checkReportMissingProp)(u,y)}):(c.if((0,t._)`${g} && (${(0,r.checkMissingProp)(u,m,h)})`),(0,r.reportMissingProp)(u,h),c.else())}}e.validatePropertyDeps=o;function a(u,l=u.schema){const{gen:c,data:f,keyword:d,it:h}=u,p=c.name("valid");for(const m in l)(0,n.alwaysValidSchema)(h,l[m])||(c.if((0,r.propertyInData)(c,f,m,h.opts.ownProperties),()=>{const g=u.subschema({keyword:d,schemaProp:m},p);u.mergeValidEvaluated(g,p)},()=>c.var(p,!0)),u.ok(p))}e.validateSchemaDeps=a,e.default=i})(LPe);var yZ={};Object.defineProperty(yZ,"__esModule",{value:!0});const FPe=Dn,WNt=wt,GNt={message:"property name must be valid",params:({params:e})=>(0,FPe._)`{propertyName: ${e.propertyName}}`},YNt={keyword:"propertyNames",type:"object",schemaType:["object","boolean"],error:GNt,code(e){const{gen:t,schema:n,data:r,it:i}=e;if((0,WNt.alwaysValidSchema)(i,n))return;const s=t.name("valid");t.forIn("key",r,o=>{e.setParams({propertyName:o}),e.subschema({keyword:"propertyNames",data:o,dataTypes:["string"],propertyName:o,compositeRule:!0},s),t.if((0,FPe.not)(s),()=>{e.error(!0),i.allErrors||t.break()})}),e.ok(s)}};yZ.default=YNt;var n4={};Object.defineProperty(n4,"__esModule",{value:!0});const kP=Pn,mf=Dn,KNt=sp,RP=wt,XNt={message:"must NOT have additional properties",params:({params:e})=>(0,mf._)`{additionalProperty: ${e.additionalProperty}}`},QNt={keyword:"additionalProperties",type:["object"],schemaType:["boolean","object"],allowUndefined:!0,trackErrors:!0,error:XNt,code(e){const{gen:t,schema:n,parentSchema:r,data:i,errsCount:s,it:o}=e;if(!s)throw new Error("ajv implementation error");const{allErrors:a,opts:u}=o;if(o.props=!0,u.removeAdditional!=="all"&&(0,RP.alwaysValidSchema)(o,n))return;const l=(0,kP.allSchemaProperties)(r.properties),c=(0,kP.allSchemaProperties)(r.patternProperties);f(),e.ok((0,mf._)`${s} === ${KNt.default.errors}`);function f(){t.forIn("key",i,g=>{!l.length&&!c.length?p(g):t.if(d(g),()=>p(g))})}function d(g){let y;if(l.length>8){const v=(0,RP.schemaRefOrVal)(o,r.properties,"properties");y=(0,kP.isOwnProperty)(t,v,g)}else l.length?y=(0,mf.or)(...l.map(v=>(0,mf._)`${g} === ${v}`)):y=mf.nil;return c.length&&(y=(0,mf.or)(y,...c.map(v=>(0,mf._)`${(0,kP.usePattern)(e,v)}.test(${g})`))),(0,mf.not)(y)}function h(g){t.code((0,mf._)`delete ${i}[${g}]`)}function p(g){if(u.removeAdditional==="all"||u.removeAdditional&&n===!1){h(g);return}if(n===!1){e.setParams({additionalProperty:g}),e.error(),a||t.break();return}if(typeof n=="object"&&!(0,RP.alwaysValidSchema)(o,n)){const y=t.name("valid");u.removeAdditional==="failing"?(m(g,y,!1),t.if((0,mf.not)(y),()=>{e.reset(),h(g)})):(m(g,y),a||t.if((0,mf.not)(y),()=>t.break()))}}function m(g,y,v){const b={keyword:"additionalProperties",dataProp:g,dataPropType:RP.Type.Str};v===!1&&Object.assign(b,{compositeRule:!0,createErrors:!1,allErrors:!1}),e.subschema(b,y)}}};n4.default=QNt;var vZ={};Object.defineProperty(vZ,"__esModule",{value:!0});const JNt=Wf,Phe=Pn,d9=wt,Ohe=n4,ZNt={keyword:"properties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,parentSchema:r,data:i,it:s}=e;s.opts.removeAdditional==="all"&&r.additionalProperties===void 0&&Ohe.default.code(new JNt.KeywordCxt(s,Ohe.default,"additionalProperties"));const o=(0,Phe.allSchemaProperties)(n);for(const f of o)s.definedProperties.add(f);s.opts.unevaluated&&o.length&&s.props!==!0&&(s.props=d9.mergeEvaluated.props(t,(0,d9.toHash)(o),s.props));const a=o.filter(f=>!(0,d9.alwaysValidSchema)(s,n[f]));if(a.length===0)return;const u=t.name("valid");for(const f of a)l(f)?c(f):(t.if((0,Phe.propertyInData)(t,i,f,s.opts.ownProperties)),c(f),s.allErrors||t.else().var(u,!0),t.endIf()),e.it.definedProperties.add(f),e.ok(u);function l(f){return s.opts.useDefaults&&!s.compositeRule&&n[f].default!==void 0}function c(f){e.subschema({keyword:"properties",schemaProp:f,dataProp:f},u)}}};vZ.default=ZNt;var bZ={};Object.defineProperty(bZ,"__esModule",{value:!0});const Dhe=Pn,NP=Dn,$he=wt,Mhe=wt,ePt={keyword:"patternProperties",type:"object",schemaType:"object",code(e){const{gen:t,schema:n,data:r,parentSchema:i,it:s}=e,{opts:o}=s,a=(0,Dhe.allSchemaProperties)(n),u=a.filter(m=>(0,$he.alwaysValidSchema)(s,n[m]));if(a.length===0||u.length===a.length&&(!s.opts.unevaluated||s.props===!0))return;const l=o.strictSchema&&!o.allowMatchingProperties&&i.properties,c=t.name("valid");s.props!==!0&&!(s.props instanceof NP.Name)&&(s.props=(0,Mhe.evaluatedPropsToName)(t,s.props));const{props:f}=s;d();function d(){for(const m of a)l&&h(m),s.allErrors?p(m):(t.var(c,!0),p(m),t.if(c))}function h(m){for(const g in l)new RegExp(m).test(g)&&(0,$he.checkStrictMode)(s,`property ${g} matches pattern ${m} (use allowMatchingProperties)`)}function p(m){t.forIn("key",r,g=>{t.if((0,NP._)`${(0,Dhe.usePattern)(e,m)}.test(${g})`,()=>{const y=u.includes(m);y||e.subschema({keyword:"patternProperties",schemaProp:m,dataProp:g,dataPropType:Mhe.Type.Str},c),s.opts.unevaluated&&f!==!0?t.assign((0,NP._)`${f}[${g}]`,!0):!y&&!s.allErrors&&t.if((0,NP.not)(c),()=>t.break())})})}}};bZ.default=ePt;var _Z={};Object.defineProperty(_Z,"__esModule",{value:!0});const tPt=wt,nPt={keyword:"not",schemaType:["object","boolean"],trackErrors:!0,code(e){const{gen:t,schema:n,it:r}=e;if((0,tPt.alwaysValidSchema)(r,n)){e.fail();return}const i=t.name("valid");e.subschema({keyword:"not",compositeRule:!0,createErrors:!1,allErrors:!1},i),e.failResult(i,()=>e.reset(),()=>e.error())},error:{message:"must NOT be valid"}};_Z.default=nPt;var wZ={};Object.defineProperty(wZ,"__esModule",{value:!0});const rPt=Pn,iPt={keyword:"anyOf",schemaType:"array",trackErrors:!0,code:rPt.validateUnion,error:{message:"must match a schema in anyOf"}};wZ.default=iPt;var EZ={};Object.defineProperty(EZ,"__esModule",{value:!0});const sD=Dn,sPt=wt,oPt={message:"must match exactly one schema in oneOf",params:({params:e})=>(0,sD._)`{passingSchemas: ${e.passing}}`},aPt={keyword:"oneOf",schemaType:"array",trackErrors:!0,error:oPt,code(e){const{gen:t,schema:n,parentSchema:r,it:i}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");if(i.opts.discriminator&&r.discriminator)return;const s=n,o=t.let("valid",!1),a=t.let("passing",null),u=t.name("_valid");e.setParams({passing:a}),t.block(l),e.result(o,()=>e.reset(),()=>e.error(!0));function l(){s.forEach((c,f)=>{let d;(0,sPt.alwaysValidSchema)(i,c)?t.var(u,!0):d=e.subschema({keyword:"oneOf",schemaProp:f,compositeRule:!0},u),f>0&&t.if((0,sD._)`${u} && ${o}`).assign(o,!1).assign(a,(0,sD._)`[${a}, ${f}]`).else(),t.if(u,()=>{t.assign(o,!0),t.assign(a,f),d&&e.mergeEvaluated(d,sD.Name)})})}}};EZ.default=aPt;var xZ={};Object.defineProperty(xZ,"__esModule",{value:!0});const uPt=wt,lPt={keyword:"allOf",schemaType:"array",code(e){const{gen:t,schema:n,it:r}=e;if(!Array.isArray(n))throw new Error("ajv implementation error");const i=t.name("valid");n.forEach((s,o)=>{if((0,uPt.alwaysValidSchema)(r,s))return;const a=e.subschema({keyword:"allOf",schemaProp:o},i);e.ok(i),e.mergeEvaluated(a)})}};xZ.default=lPt;var SZ={};Object.defineProperty(SZ,"__esModule",{value:!0});const g3=Dn,jPe=wt,cPt={message:({params:e})=>(0,g3.str)`must match "${e.ifClause}" schema`,params:({params:e})=>(0,g3._)`{failingKeyword: ${e.ifClause}}`},fPt={keyword:"if",schemaType:["object","boolean"],trackErrors:!0,error:cPt,code(e){const{gen:t,parentSchema:n,it:r}=e;n.then===void 0&&n.else===void 0&&(0,jPe.checkStrictMode)(r,'"if" without "then" and "else" is ignored');const i=Lhe(r,"then"),s=Lhe(r,"else");if(!i&&!s)return;const o=t.let("valid",!0),a=t.name("_valid");if(u(),e.reset(),i&&s){const c=t.let("ifClause");e.setParams({ifClause:c}),t.if(a,l("then",c),l("else",c))}else i?t.if(a,l("then")):t.if((0,g3.not)(a),l("else"));e.pass(o,()=>e.error(!0));function u(){const c=e.subschema({keyword:"if",compositeRule:!0,createErrors:!1,allErrors:!1},a);e.mergeEvaluated(c)}function l(c,f){return()=>{const d=e.subschema({keyword:c},a);t.assign(o,a),e.mergeValidEvaluated(d,o),f?t.assign(f,(0,g3._)`${c}`):e.setParams({ifClause:c})}}}};function Lhe(e,t){const n=e.schema[t];return n!==void 0&&!(0,jPe.alwaysValidSchema)(e,n)}SZ.default=fPt;var TZ={};Object.defineProperty(TZ,"__esModule",{value:!0});const dPt=wt,hPt={keyword:["then","else"],schemaType:["object","boolean"],code({keyword:e,parentSchema:t,it:n}){t.if===void 0&&(0,dPt.checkStrictMode)(n,`"${e}" without "if" is ignored`)}};TZ.default=hPt;Object.defineProperty(hZ,"__esModule",{value:!0});const pPt=QS,mPt=pZ,gPt=JS,yPt=mZ,vPt=gZ,bPt=LPe,_Pt=yZ,wPt=n4,EPt=vZ,xPt=bZ,SPt=_Z,TPt=wZ,APt=EZ,CPt=xZ,IPt=SZ,kPt=TZ;function RPt(e=!1){const t=[SPt.default,TPt.default,APt.default,CPt.default,IPt.default,kPt.default,_Pt.default,wPt.default,bPt.default,EPt.default,xPt.default];return e?t.push(mPt.default,yPt.default):t.push(pPt.default,gPt.default),t.push(vPt.default),t}hZ.default=RPt;var AZ={},CZ={};Object.defineProperty(CZ,"__esModule",{value:!0});const ss=Dn,NPt={message:({schemaCode:e})=>(0,ss.str)`must match format "${e}"`,params:({schemaCode:e})=>(0,ss._)`{format: ${e}}`},PPt={keyword:"format",type:["number","string"],schemaType:"string",$data:!0,error:NPt,code(e,t){const{gen:n,data:r,$data:i,schema:s,schemaCode:o,it:a}=e,{opts:u,errSchemaPath:l,schemaEnv:c,self:f}=a;if(!u.validateFormats)return;i?d():h();function d(){const p=n.scopeValue("formats",{ref:f.formats,code:u.code.formats}),m=n.const("fDef",(0,ss._)`${p}[${o}]`),g=n.let("fType"),y=n.let("format");n.if((0,ss._)`typeof ${m} == "object" && !(${m} instanceof RegExp)`,()=>n.assign(g,(0,ss._)`${m}.type || "string"`).assign(y,(0,ss._)`${m}.validate`),()=>n.assign(g,(0,ss._)`"string"`).assign(y,m)),e.fail$data((0,ss.or)(v(),b()));function v(){return u.strictSchema===!1?ss.nil:(0,ss._)`${o} && !${y}`}function b(){const w=c.$async?(0,ss._)`(${m}.async ? await ${y}(${r}) : ${y}(${r}))`:(0,ss._)`${y}(${r})`,E=(0,ss._)`(typeof ${y} == "function" ? ${w} : ${y}.test(${r}))`;return(0,ss._)`${y} && ${y} !== true && ${g} === ${t} && !${E}`}}function h(){const p=f.formats[s];if(!p){v();return}if(p===!0)return;const[m,g,y]=b(p);m===t&&e.pass(w());function v(){if(u.strictSchema===!1){f.logger.warn(E());return}throw new Error(E());function E(){return`unknown format "${s}" ignored in schema at path "${l}"`}}function b(E){const T=E instanceof RegExp?(0,ss.regexpCode)(E):u.code.formats?(0,ss._)`${u.code.formats}${(0,ss.getProperty)(s)}`:void 0,S=n.scopeValue("formats",{key:s,ref:E,code:T});return typeof E=="object"&&!(E instanceof RegExp)?[E.type||"string",E.validate,(0,ss._)`${S}.validate`]:["string",E,S]}function w(){if(typeof p=="object"&&!(p instanceof RegExp)&&p.async){if(!c.$async)throw new Error("async format in sync schema");return(0,ss._)`await ${y}(${r})`}return typeof g=="function"?(0,ss._)`${y}(${r})`:(0,ss._)`${y}.test(${r})`}}}};CZ.default=PPt;Object.defineProperty(AZ,"__esModule",{value:!0});const OPt=CZ,DPt=[OPt.default];AZ.default=DPt;var Rx={};Object.defineProperty(Rx,"__esModule",{value:!0});Rx.contentVocabulary=Rx.metadataVocabulary=void 0;Rx.metadataVocabulary=["title","description","default","deprecated","readOnly","writeOnly","examples"];Rx.contentVocabulary=["contentMediaType","contentEncoding","contentSchema"];Object.defineProperty(JJ,"__esModule",{value:!0});const $Pt=ZJ,MPt=tZ,LPt=hZ,FPt=AZ,Fhe=Rx,jPt=[$Pt.default,MPt.default,(0,LPt.default)(),FPt.default,Fhe.metadataVocabulary,Fhe.contentVocabulary];JJ.default=jPt;var IZ={},r4={};Object.defineProperty(r4,"__esModule",{value:!0});r4.DiscrError=void 0;var jhe;(function(e){e.Tag="tag",e.Mapping="mapping"})(jhe||(r4.DiscrError=jhe={}));Object.defineProperty(IZ,"__esModule",{value:!0});const vw=Dn,vH=r4,Bhe=Du,BPt=XS,UPt=wt,zPt={message:({params:{discrError:e,tagName:t}})=>e===vH.DiscrError.Tag?`tag "${t}" must be string`:`value of tag "${t}" must be in oneOf`,params:({params:{discrError:e,tag:t,tagName:n}})=>(0,vw._)`{error: ${e}, tag: ${n}, tagValue: ${t}}`},VPt={keyword:"discriminator",type:"object",schemaType:"object",error:zPt,code(e){const{gen:t,data:n,schema:r,parentSchema:i,it:s}=e,{oneOf:o}=i;if(!s.opts.discriminator)throw new Error("discriminator: requires discriminator option");const a=r.propertyName;if(typeof a!="string")throw new Error("discriminator: requires propertyName");if(r.mapping)throw new Error("discriminator: mapping is not supported");if(!o)throw new Error("discriminator: requires oneOf keyword");const u=t.let("valid",!1),l=t.const("tag",(0,vw._)`${n}${(0,vw.getProperty)(a)}`);t.if((0,vw._)`typeof ${l} == "string"`,()=>c(),()=>e.error(!1,{discrError:vH.DiscrError.Tag,tag:l,tagName:a})),e.ok(u);function c(){const h=d();t.if(!1);for(const p in h)t.elseIf((0,vw._)`${l} === ${p}`),t.assign(u,f(h[p]));t.else(),e.error(!1,{discrError:vH.DiscrError.Mapping,tag:l,tagName:a}),t.endIf()}function f(h){const p=t.name("valid"),m=e.subschema({keyword:"oneOf",schemaProp:h},p);return e.mergeEvaluated(m,vw.Name),p}function d(){var h;const p={},m=y(i);let g=!0;for(let w=0;w<o.length;w++){let E=o[w];if(E!=null&&E.$ref&&!(0,UPt.schemaHasRulesButRef)(E,s.self.RULES)){const S=E.$ref;if(E=Bhe.resolveRef.call(s.self,s.schemaEnv.root,s.baseId,S),E instanceof Bhe.SchemaEnv&&(E=E.schema),E===void 0)throw new BPt.default(s.opts.uriResolver,s.baseId,S)}const T=(h=E==null?void 0:E.properties)===null||h===void 0?void 0:h[a];if(typeof T!="object")throw new Error(`discriminator: oneOf subschemas (or referenced schemas) must have "properties/${a}"`);g=g&&(m||y(E)),v(T,w)}if(!g)throw new Error(`discriminator: "${a}" must be required`);return p;function y({required:w}){return Array.isArray(w)&&w.includes(a)}function v(w,E){if(w.const)b(w.const,E);else if(w.enum)for(const T of w.enum)b(T,E);else throw new Error(`discriminator: "properties/${a}" must have "const" or "enum"`)}function b(w,E){if(typeof w!="string"||w in p)throw new Error(`discriminator: "${a}" values must be unique strings`);p[w]=E}}}};IZ.default=VPt;const HPt="http://json-schema.org/draft-07/schema#",qPt="http://json-schema.org/draft-07/schema#",WPt="Core schema meta-schema",GPt={schemaArray:{type:"array",minItems:1,items:{$ref:"#"}},nonNegativeInteger:{type:"integer",minimum:0},nonNegativeIntegerDefault0:{allOf:[{$ref:"#/definitions/nonNegativeInteger"},{default:0}]},simpleTypes:{enum:["array","boolean","integer","null","number","object","string"]},stringArray:{type:"array",items:{type:"string"},uniqueItems:!0,default:[]}},YPt=["object","boolean"],KPt={$id:{type:"string",format:"uri-reference"},$schema:{type:"string",format:"uri"},$ref:{type:"string",format:"uri-reference"},$comment:{type:"string"},title:{type:"string"},description:{type:"string"},default:!0,readOnly:{type:"boolean",default:!1},examples:{type:"array",items:!0},multipleOf:{type:"number",exclusiveMinimum:0},maximum:{type:"number"},exclusiveMaximum:{type:"number"},minimum:{type:"number"},exclusiveMinimum:{type:"number"},maxLength:{$ref:"#/definitions/nonNegativeInteger"},minLength:{$ref:"#/definitions/nonNegativeIntegerDefault0"},pattern:{type:"string",format:"regex"},additionalItems:{$ref:"#"},items:{anyOf:[{$ref:"#"},{$ref:"#/definitions/schemaArray"}],default:!0},maxItems:{$ref:"#/definitions/nonNegativeInteger"},minItems:{$ref:"#/definitions/nonNegativeIntegerDefault0"},uniqueItems:{type:"boolean",default:!1},contains:{$ref:"#"},maxProperties:{$ref:"#/definitions/nonNegativeInteger"},minProperties:{$ref:"#/definitions/nonNegativeIntegerDefault0"},required:{$ref:"#/definitions/stringArray"},additionalProperties:{$ref:"#"},definitions:{type:"object",additionalProperties:{$ref:"#"},default:{}},properties:{type:"object",additionalProperties:{$ref:"#"},default:{}},patternProperties:{type:"object",additionalProperties:{$ref:"#"},propertyNames:{format:"regex"},default:{}},dependencies:{type:"object",additionalProperties:{anyOf:[{$ref:"#"},{$ref:"#/definitions/stringArray"}]}},propertyNames:{$ref:"#"},const:!0,enum:{type:"array",items:!0,minItems:1,uniqueItems:!0},type:{anyOf:[{$ref:"#/definitions/simpleTypes"},{type:"array",items:{$ref:"#/definitions/simpleTypes"},minItems:1,uniqueItems:!0}]},format:{type:"string"},contentMediaType:{type:"string"},contentEncoding:{type:"string"},if:{$ref:"#"},then:{$ref:"#"},else:{$ref:"#"},allOf:{$ref:"#/definitions/schemaArray"},anyOf:{$ref:"#/definitions/schemaArray"},oneOf:{$ref:"#/definitions/schemaArray"},not:{$ref:"#"}},XPt={$schema:HPt,$id:qPt,title:WPt,definitions:GPt,type:YPt,properties:KPt,default:!0};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MissingRefError=t.ValidationError=t.CodeGen=t.Name=t.nil=t.stringify=t.str=t._=t.KeywordCxt=t.Ajv=void 0;const n=ZNe,r=JJ,i=IZ,s=XPt,o=["/properties"],a="http://json-schema.org/draft-07/schema";class u extends n.default{_addVocabularies(){super._addVocabularies(),r.default.forEach(p=>this.addVocabulary(p)),this.opts.discriminator&&this.addKeyword(i.default)}_addDefaultMetaSchema(){if(super._addDefaultMetaSchema(),!this.opts.meta)return;const p=this.opts.$data?this.$dataMetaSchema(s,o):s;this.addMetaSchema(p,a,!1),this.refs["http://json-schema.org/schema"]=a}defaultMeta(){return this.opts.defaultMeta=super.defaultMeta()||(this.getSchema(a)?a:void 0)}}t.Ajv=u,e.exports=t=u,e.exports.Ajv=u,Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var l=Wf;Object.defineProperty(t,"KeywordCxt",{enumerable:!0,get:function(){return l.KeywordCxt}});var c=Dn;Object.defineProperty(t,"_",{enumerable:!0,get:function(){return c._}}),Object.defineProperty(t,"str",{enumerable:!0,get:function(){return c.str}}),Object.defineProperty(t,"stringify",{enumerable:!0,get:function(){return c.stringify}}),Object.defineProperty(t,"nil",{enumerable:!0,get:function(){return c.nil}}),Object.defineProperty(t,"Name",{enumerable:!0,get:function(){return c.Name}}),Object.defineProperty(t,"CodeGen",{enumerable:!0,get:function(){return c.CodeGen}});var f=cR;Object.defineProperty(t,"ValidationError",{enumerable:!0,get:function(){return f.default}});var d=XS;Object.defineProperty(t,"MissingRefError",{enumerable:!0,get:function(){return d.default}})})(cH,cH.exports);var QPt=cH.exports;const BPe=ec(QPt),JPt="#/definitions/StudyConfig",ZPt="http://json-schema.org/draft-07/schema#",eOt={Answer:{additionalProperties:!1,description:`The Answer interface is used to define the properties of an answer. Answers are used to define the correct answer for a task. These are generally used in training tasks or if skip logic is required based on the answer.

Answers are used to defined correct answers for a task. These are generally used in training tasks or if skip logic is required based on the answer. The answer field is used to define the correct answer to the question. The acceptableLow and acceptableHigh fields are used to define a range of acceptable answers (these are currently only used for training). For example, if the correct answer is 5, and the acceptableLow is 4 and the acceptableHigh is 6, then any answer between 4 and 6 will be considered correct.

Here's an example of how to use the Answer interface to define the correct answer to a question:

\`\`\`js { "type": "markdown", "path": "<study-name>/assets/question.md", "response": [  {    "id": "response1",    "prompt": "What is 2 + 2?",    "required": true,    "location": "belowStimulus",    "type": "numerical"  } ] "correctAnswer": [{  "id": "response1",  "answer": 4 }] } \`\`\`

In this example, the correct answer to the question "What is 2 + 2?" is 4. If the participant answers 4, they will be considered correct. If they answer anything other than 4, they will be considered incorrect.`,properties:{acceptableHigh:{description:"The acceptable high value for the answer. This is used to define a range of acceptable answers.",type:"number"},acceptableLow:{description:"The acceptable low value for the answer. This is used to define a range of acceptable answers.",type:"number"},answer:{description:"The correct answer to the question."},id:{description:"The id of the answer. This is used to identify the answer in the data file.",type:"string"}},required:["id","answer"],type:"object"},BaseComponents:{additionalProperties:{additionalProperties:!1,properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},type:"object"},description:'The baseComponents is an optional set of components which can help template other components. For example, suppose you have a single HTML file that you want to display to the user several times. Instead of having the same component twice in the `components` list, you can have a single baseComponent with all the information that the two HTML components will share. A great example is showing the same HTML component but with two different questions;\n\n Using baseComponents:\n\n```js "baseComponents": { "my-image-component": { "instructionLocation": "sidebar", "nextButtonLocation": "sidebar", "path": "<study-name>/assets/my-image.jpg", "response": [   {     "id": "my-image-id",     "options": ["Europe", "Japan", "USA"],     "prompt": "Your Selected Answer:",     "type": "dropdown"   } ], "type": "image" } } ``` In the above code snippet, we have a single base component which holds the information about the type of component, the path to the image, and the response (which is a dropdown containing three choices). Any component which contains the `"baseComponent":"my-image-component"` key-value pair will inherit each of these properties. Thus, if we have three different questions which have the same choices and are concerning the same image, we can define our components like below: ```js "components": { "q1": { "baseComponent": "my-image-component", "description": "Choosing section with largest GDP", "instruction": "Which region has the largest GDP?" }, "q2": { "baseComponent": "my-image-component", "description": "Choosing section with lowest GDP", "instruction": "Which region has the lowest GDP?" }, "q3": { "baseComponent": "my-image-component", "description": "Choosing section with highest exports of Wheat", "instruction": "Which region had the most Wheat exported in 2022?" } } ```',type:"object"},CheckboxResponse:{additionalProperties:!1,description:'The CheckboxResponse interface is used to define the properties of a checkbox response. CheckboxResponses render as a checkbox input with user specified options.\n\n```js { "id": "q7", "prompt": "Checkbox example (not required)", "required": false, "location": "aboveStimulus", "type": "checkbox", "options": ["Option 1", "Option 2", "Option 3"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},maxSelections:{description:"The maximum number of selections that are required.",type:"number"},minSelections:{description:"The minimum number of selections that are required.",type:"number"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"checkbox",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},ComponentBlock:{additionalProperties:!1,description:'The ComponentBlock interface is used to define order properties within the sequence. This is used to define the order of components in a study and the skip logic. It supports random assignment of trials using a pure random assignment and a [latin square](https://en.wikipedia.org/wiki/Latin_square).\n\nThe pure random assignment is a random assignment with no guarantees. For example, one component _could_ show up in the first position 10 times in a row. However, this situation is unlikely.\n\nHere\'s a snippet that shows how to use the random order:\n\n```js { "order": "random", "components": [ "component1", "component2", "component3" ] } ``` This snippet would produce a random order of the components in the sequence array. For example, the resulting sequence array could be :\n\n```js [ ["component2", "component3", "component1"], ["component1", "component3", "component2"], ["component3", "component1", "component2"], ... ] ```\n\nThe latin square assignment is a random assignment with some guarantees. It ensures that each component is shown an equal number of times in each position. Here\'s a snippet that shows how to use the latin square order:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2", "component3"], ["component2", "component3", "component1"], ["component3", "component1", "component2"], ... ] ```\n\nThe fixed assignment is a fixed assignment of components. This is used when you want to show the components in a specific order. Here\'s a snippet that shows how to use the fixed order:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3" ] } ```\n\nThis snippet would produce a fixed order of the components in the sequence array. The resulting sequence array would be:\n\n```js [ ["component1", "component2", "component3"], ["component1", "component2", "component3"], ["component1", "component2", "component3"], ... ] ```\n\nIn addition to the order property, the ComponentBlock interface also includes the `"numSamples"` property. This is used to reduce the number of components shown to a participant. This property respects the order property and the guarantees provided by the order property. For example, if you have three components in the components array and you set `"numSamples"` to 2, you would randomize across the three components while only showing a participant two of them. Here\'s a snippet that shows how to use the numSamples property:\n\n```js { "order": "latinSquare", "components": [ "component1", "component2", "component3" ], "numSamples": 2 } ```\n\nThis snippet would produce a latin square order of the components in the sequence array. Since the latin square guarantees that each component is shown an equal number of times in each position, the resulting sequence array could be:\n\n```js [ ["component1", "component2"], ["component2", "component3"], ["component3", "component1"], ... ] ```\n\nThe interruptions property specifies an array of interruptions. These can be used for breaks or attention checks. Interruptions can be deterministic or random. Please see [InterruptionBlock](../../type-aliases/InterruptionBlock) for more specific information.\n\nThe skip property is used to define skip conditions. This is used to skip to a different component or block based on the response to a component or the number of correct or incorrect responses in a block. Please see [SkipConditions](../../type-aliases/SkipConditions) for more specific information.',properties:{components:{description:"The components that are included in the order.",items:{anyOf:[{type:"string"},{$ref:"#/definitions/ComponentBlock"}]},type:"array"},id:{description:"The id of the block. This is used to identify the block in the SkipConditions and is only required if you want to refer to the whole block in the condition.to property.",type:"string"},interruptions:{description:"The interruptions property specifies an array of interruptions. These can be used for breaks or attention checks.",items:{$ref:"#/definitions/InterruptionBlock"},type:"array"},numSamples:{description:"The number of samples to use for the random assignments. This means you can randomize across 3 components while only showing a participant 2 at a time.",type:"number"},order:{description:"The type of order. This can be random (pure random), latinSquare (random with some guarantees), or fixed.",enum:["random","latinSquare","fixed"],type:"string"},skip:{$ref:"#/definitions/SkipConditions",description:"The skip conditions for the block."}},required:["order","components"],type:"object"},ComponentBlockCondition:{additionalProperties:!1,description:`The ComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect components in a block. All answers on all components in the block are checked.

Answers are checked against the correct answers defined in the IndividualComponent's [CorrectAnswer](../Answer). If no correct answers are defined, the component is considered correct by default.

You might use this if a participant answers two questions in a block incorrectly. Here's an example of how to use the ComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "check": "block",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of components with incorrect responses in the block is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.

When the condition is met, the participant will immediately be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.`,properties:{check:{const:"block",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["check","condition","value","to"],type:"object"},DeterministicInterruption:{additionalProperties:!1,description:`The DeterministicInterruption interface is used to define an interruption that will be shown at a specific location in the block.

For example, if you want to show an interruption after the second component in the block, you would set firstLocation to 2. If you want to show an interruption after every 3 components, you would set spacing to 3. If you want to show an interruption after the second component and then every 3 components, you would set firstLocation to 2 and spacing to 3.

The components property is an array of the components that will be inserted at the location specified by firstLocation and spacing. These components should reference components in the StudyConfig.components section of the config.

Here's an example of how to use the DeterministicInterruption:

\`\`\`js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "firstLocation": 2,   "spacing": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } \`\`\`

The resulting sequence array could be:

\`\`\`js [ ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ["component1", "component2", "interruption1", "component3", "component4", "component5", "interruption2", "component6"], ... ] \`\`\``,properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},firstLocation:{description:"The Location of the first instance of the interruption. If this is set to 2, the interruption will be shown after the second component (inserted at index 2).",type:"number"},spacing:{description:"The number of components between breaks.",type:"number"}},required:["firstLocation","spacing","components"],type:"object"},DropdownResponse:{additionalProperties:!1,description:'The DropdownResponse interface is used to define the properties of a dropdown response. DropdownResponses render as a select input with user specified options.\n\nExample: ```js { "id": "q-color", "prompt": "What is your favorite color?", "required": true, "location": "aboveStimulus", "type": "dropdown", "placeholder": "Please choose your favorite color", "options": ["Red", "Blue"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed in the dropdown.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"dropdown",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},IFrameResponse:{additionalProperties:!1,description:"The IFrameResponse interface is used to define the properties of an iframe response. IFrameResponses render as a list, that is connected to a WebsiteComponent. When data is sent from the WebsiteComponent, it is displayed in the list.",properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"iframe",type:"string"}},required:["id","prompt","required","type"],type:"object"},ImageComponent:{additionalProperties:!1,description:'The ImageComponent interface is used to define the properties of an image component. This component is used to render an image with optional styling.\n\nFor example, to render an image with a path of `path/to/study/assets/image.jpg` and a max width of 50%, you would use the following snippet: ```js { "type": "image", "path": "<study-name>/assets/image.jpg", "style": { "maxWidth": "50%" } } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"image",type:"string"}},required:["path","response","type"],type:"object"},IndividualComponent:{anyOf:[{$ref:"#/definitions/MarkdownComponent"},{$ref:"#/definitions/ReactComponent"},{$ref:"#/definitions/ImageComponent"},{$ref:"#/definitions/WebsiteComponent"},{$ref:"#/definitions/QuestionnaireComponent"}]},IndividualComponentAllResponsesCondition:{additionalProperties:!1,description:`The IndividualComponentAllResponsesCondition interface is used to define a SkipCondition based on all answers to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::


Here's an example of how to use the IndividualComponentAllResponsesCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "responses",   "to": "end" } ] ... } \`\`\`

In this example, if all responses to the component with the ID "attentionCheck" are correct, the participant will be redirected to the end of the study. If any response is incorrect, the participant will continue to the next component in the sequence.`,properties:{check:{const:"responses",description:"The check we'll perform.",type:"string"},name:{description:"The name of the component to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"}},required:["name","check","to"],type:"object"},IndividualComponentSingleResponseCondition:{additionalProperties:!1,description:`The IndividualComponentSingleResponseCondition interface is used to define a SkipCondition based on a single answer to a specific component. The skip logic will be checked for every component in the block that has the specified name.

:::info

If you need to check all instances of a repeated component, you should use the RepeatedComponentBlockCondition.

:::

For example, if you want to skip to a different component based on a response to a specific component, you would use the IndividualComponentSingleResponseCondition. Here's an example of how to use the IndividualComponentSingleResponseCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "response",   "responseId": "attentionCheckResponse",   "value": "the right answer",   "comparison": "equal",   "to": "end" } ] ... } \`\`\`

In this example, we assign our skip logic to the component whose ID is "attentionCheck". If the answer given to the response "attentionCheckResponse" is equal to "the right answer", then the user will be redirected to the end of the study. If the response is _not_ equal to "the right answer", then the participant will continue to the next component in the sequence.`,properties:{check:{const:"response",description:"The check we'll perform.",type:"string"},comparison:{description:"The comparison to use.",enum:["equal","notEqual"],type:"string"},name:{description:"The name of the component to check.",type:"string"},responseId:{description:"The response id to check.",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The value to check.",type:["string","number"]}},required:["name","check","responseId","value","comparison","to"],type:"object"},InheritedComponent:{additionalProperties:!1,description:"An InheritedComponent is a component that inherits properties from a baseComponent. This is used to avoid repeating properties in components. This also means that components in the baseComponents object can be partially defined, while components in the components object can inherit from them and must be fully defined and include all properties (after potentially merging with a base component).",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},baseComponent:{type:"string"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{anyOf:[{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"}],description:"The parameters that are passed to the react component. These can be used within your react component to render different things."},path:{anyOf:[{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},{description:"The path to the image. This should be a relative path from the public folder.",type:"string"},{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"}],description:"The path to the markdown file. This should be a relative path from the public folder."},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},style:{additionalProperties:{type:"string"},description:"The style of the image. This is an object with css properties as keys and css values as values.",type:"object"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{enum:["markdown","react-component","image","website","questionnaire"],type:"string"}},required:["baseComponent"],type:"object"},InterruptionBlock:{anyOf:[{$ref:"#/definitions/DeterministicInterruption"},{$ref:"#/definitions/RandomInterruption"}],description:"The InterruptionBlock interface is used to define interruptions in a block. These can be used for breaks or attention checks. Interruptions can be deterministic or random."},LikertResponse:{additionalProperties:!1,description:`The LikertResponse interface is used to define the properties of a likert response. LikertResponses render as radio buttons with a user specified number of options, which can be controlled through the numItems. For example, numItems: 5 will render 5 radio buttons, and numItems: 7 will render 7 radio buttons. LikertResponses can also have a description, and left and right labels. The left and right labels are used to label the left and right ends of the likert scale with values such as 'Strongly Disagree' and 'Strongly Agree'.

Example for a five-point Likert Scale:

\`\`\`js { "id": "q-satisfaction", "prompt": "Rate your satisfaction from 1 (not enjoyable) to 5 (very enjoyable).", "required": true, "location": "aboveStimulus", "type": "likert", "leftLabel": "Not Enjoyable", "rightLabel": "Very Enjoyable", "numItems": 5 } \`\`\``,properties:{desc:{description:"The description of the likert scale.",type:"string"},hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the likert scale. E.g Strongly Disagree",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},numItems:{description:"The number of options to render.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the likert scale. E.g Strongly Agree",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"likert",type:"string"}},required:["id","numItems","prompt","required","type"],type:"object"},LongTextResponse:{additionalProperties:!1,description:'The LongTextResponse interface is used to define the properties of a long text response. LongTextResponses render as a text area that accepts any text and can optionally have a placeholder. ```js { "id": "q-name", "prompt": "What is your first name?", "required": true, "location": "aboveStimulus", "type": "longText", "placeholder": "Please enter your first name" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"longText",type:"string"}},required:["id","prompt","required","type"],type:"object"},MarkdownComponent:{additionalProperties:!1,description:'The MarkdownComponent interface is used to define the properties of a markdown component. The components can be used to render many different things, such as consent forms, instructions, and debriefs. Additionally, you can use the markdown component to render images, videos, and other media, with supporting text. Markdown components can have responses (e.g. in a consent form), or no responses (e.g. in a help text file). Here\'s an example with no responses for a simple help text file:\n\n```js { "type": "markdown", "path": "<study-name>/assets/help.md", "response": [] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},path:{description:"The path to the markdown file. This should be a relative path from the public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"markdown",type:"string"}},required:["path","response","type"],type:"object"},NumberOption:{additionalProperties:!1,description:"The NumberOption interface is used to define the options for a slider response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"number"}},required:["label","value"],type:"object"},NumericalResponse:{additionalProperties:!1,description:'The NumericalResponse interface is used to define the properties of a numerical response. NumericalResponses render as a text input that only accepts numbers, and can optionally have a min and max value, or a placeholder.\n\nExample: ```js { "id": "q-numerical", "prompt": "Numerical example", "required": true, "location": "aboveStimulus", "type": "numerical", "placeholder": "Enter your age, range from 0 - 120", "max": 120, "min": 0 } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},max:{description:"The maximum value that is accepted in the input.",type:"number"},min:{description:"The minimum value that is accepted in the input.",type:"number"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"numerical",type:"string"}},required:["id","prompt","required","type"],type:"object"},QuestionnaireComponent:{additionalProperties:!1,description:'A QuestionnaireComponent is used to render simple questions that require a response. The main use case of this component type is to ask participants questions when you don\'t need to render a stimulus. Please note, that even though we\'re not using a stimulus, the responses still require a `location`. For example this could be used to collect demographic information from a participant using the following snippet:\n\n```js { "type": "questionnaire", "response": [  {    "id": "gender",    "prompt": "Gender:",    "required": true,    "location": "belowStimulus",    "type": "checkbox",    "options": ["Man", "Woman", "Genderqueer", "Third-gender", ...]  } ] } ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"questionnaire",type:"string"}},required:["response","type"],type:"object"},RadioResponse:{additionalProperties:!1,description:'The RadioResponse interface is used to define the properties of a radio response. Radios have only one allowable selection. RadioResponses render as a radio input with user specified options, and optionally left and right labels.\n\nExample: ```js { "id": "q-radio", "prompt": "Radio button example", "required": true, "location": "aboveStimulus", "type": "radio", "options": ["Option 1", "Option 2"] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},leftLabel:{description:"The left label of the radio group. Used in Likert scales for example",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"The options that are displayed as checkboxes, provided as an array of objects, with label and value fields.",items:{anyOf:[{$ref:"#/definitions/StringOption"},{type:"string"}]},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},rightLabel:{description:"The right label of the radio group. Used in Likert scales for example",type:"string"},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"radio",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},RandomInterruption:{additionalProperties:!1,description:'The RandomInterruption interface is used to define an interruption that will be shown randomly in the block.\n\nFor example, if you want to show a single interruption randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 1. If you want to show 3 interruptions randomly in the block, you would set `"spacing"` to "random" and `"numInterruptions"` to 3.\n\nThe components property is an array of the components that will be inserted randomly in the block. These components should reference components in the StudyConfig.components section of the config.\n\nHere\'s an example of how to use the RandomInterruption:\n\n```js { "order": "fixed", "components": [ "component1", "component2", "component3", "component4", "component5", "component6" ], "interruptions": [ {   "spacing": "random",   "numInterruptions": 3,   "components": [     "interruption1",     "interruption2"   ] } ] } ```\n\nThe resulting sequence array could be:\n\n```js [ ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "component5", "interruption1", "interruption2", "component6], ["component1", "interruption1", "interruption2", "component2", "interruption1", "interruption2", "component3", "component4", "interruption1", "interruption2", "component5", "component6], ["component1", "component2" "interruption1", "interruption2", "component3", "interruption1", "interruption2", "component4", "component5", "interruption1", "interruption2", "component6], ... ] ```',properties:{components:{description:"The components that are included in the interruption. These reference components in the StudyConfig.components section of the config.",items:{type:"string"},type:"array"},numInterruptions:{description:"The number of times the interruption will be randomly added",type:"number"},spacing:{const:"random",description:"If spacing is set to random, reVISit will add interruptions randomly. These interruptions will not ever be displayed as the first component in the block.",type:"string"}},required:["spacing","numInterruptions","components"],type:"object"},ReactComponent:{additionalProperties:!1,description:"The ReactComponent interface is used to define the properties of a react component. This component is used to render react code with certain parameters. These parameters can be used within your react code to render different things.\n\nUnlike other types of components, the path for a React component is relative to the `src/public/` folder. Similar to our standard assets, we suggest creating a folder named `src/public/{studyName}/assets` to house all of the React component assets for a particular study. Your React component which you link to in the path must be default exported from its file.\n\nReact components created this way have a generic prop type passed to the component on render, `<StimulusParams<T>>`, which has the following types.\n\n```ts { parameters: T; setAnswer: ({ status, provenanceGraph, answers }: { status: boolean, provenanceGraph?: TrrackedProvenance, answers: Record<string, any> }) => void } ```\n\nparameters is the same object passed in from the ReactComponent type below, allowing you to pass options in from the config to your component. setAnswer is a callback function allowing the creator of the ReactComponent to programmatically set the answer, as well as the provenance graph. This can be useful if you don't use the default answer interface, and instead have something more unique.\n\nSo, for example, if I had the following ReactComponent in my config ```js { type: 'react-component'; path: 'my_study/CoolComponent.tsx'; parameters: {  name: 'Zach';  age: 26; } } ```\n\nMy react component, CoolComponent.tsx, would exist in src/public/my_study/assets, and look something like this\n\n```ts export default function CoolComponent({ parameters, setAnswer }: StimulusParams<{name: string, age: number}>) { // render something } ```\n\nFor in depth examples, see the following studies, and their associated codebases. https://revisit.dev/study/demo-click-accuracy-test (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-click-accuracy-test/assets) https://revisit.dev/study/demo-brush-interactions (https://github.com/revisit-studies/study/tree/v1.0.3/src/public/demo-brush-interactions/assets)",properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the react component. These can be used within your react component to render different things.",type:"object"},path:{description:"The path to the react component. This should be a relative path from the src/public folder.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"react-component",type:"string"}},required:["path","response","type"],type:"object"},RepeatedComponentBlockCondition:{additionalProperties:!1,description:`The RepeatedComponentBlockCondition interface is used to define a SkipCondition based on the number of correct or incorrect repeated components. You might use this if you need to check if an attention check was failed multiple times. This is similar to the [ComponentBlockCondition](../ComponentBlockCondition), but it only checks a specific repeated component.

Here's an example of how to use the RepeatedComponentBlockCondition:

\`\`\`js { ... "skip": [ {   "name": "attentionCheck",   "check": "repeatedComponent",   "condition": "numIncorrect",   "value": 2,   "to": "end" } ] ... } \`\`\`

In this example, when the number of incorrect responses to the repeated component with the name "attentionCheck" is two, the participant will be redirected to the end of the study. If the number of incorrect responses is less than two, the participant will continue to the next component in the sequence.`,properties:{check:{const:"repeatedComponent",description:"The check we'll perform.",type:"string"},condition:{description:"The condition to check.",enum:["numCorrect","numIncorrect"],type:"string"},name:{description:"The name of the repeated component to check (e.g. attentionCheck).",type:"string"},to:{description:"The id of the component or block to skip to",type:"string"},value:{description:"The number of correct or incorrect responses to check for.",type:"number"}},required:["name","check","condition","value","to"],type:"object"},Response:{anyOf:[{$ref:"#/definitions/NumericalResponse"},{$ref:"#/definitions/ShortTextResponse"},{$ref:"#/definitions/LongTextResponse"},{$ref:"#/definitions/LikertResponse"},{$ref:"#/definitions/DropdownResponse"},{$ref:"#/definitions/SliderResponse"},{$ref:"#/definitions/RadioResponse"},{$ref:"#/definitions/CheckboxResponse"},{$ref:"#/definitions/IFrameResponse"}]},ResponseBlockLocation:{enum:["sidebar","aboveStimulus","belowStimulus"],type:"string"},ShortTextResponse:{additionalProperties:!1,description:'The ShortTextResponse interface is used to define the properties of a short text response. ShortTextResponses render as a text input that accepts any text and can optionally have a placeholder.\n\n```js { "id": "q-short-text", "prompt": "Short text example", "required": true, "location": "aboveStimulus", "type": "shortText", "placeholder": "Enter your answer here" } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},placeholder:{description:"The placeholder text that is displayed in the input.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"shortText",type:"string"}},required:["id","prompt","required","type"],type:"object"},SkipConditions:{description:`The SkipConditions interface is used to define skip conditions. This is used to skip to a different component/block based on the response to a component or based on the number of correct/incorrect responses in a block. Skip conditions work recursively: if you have a nested block, the parent blocks' skip conditions will be considered when computing the skip logic.

Skip conditions are evaluated in the order they are defined in the array. If a condition is met, the participant will be redirected to the component or block specified in the \`"to"\` property. If no conditions are met, the participant will continue to the next component in the sequence.

Skip conditions allow you to jump to a different component or block. If you intend to skip to a block, you should specify a block id in the sequence. If you intend to skip to a component, you should specify a component id. Skipping backwards is not supported. Skipping to a repeated component will skip to the first instance of the component after the component that triggered the skip.

Please see the interface definitions for more specific information on the different types of skip conditions.`,items:{anyOf:[{$ref:"#/definitions/IndividualComponentSingleResponseCondition"},{$ref:"#/definitions/IndividualComponentAllResponsesCondition"},{$ref:"#/definitions/ComponentBlockCondition"},{$ref:"#/definitions/RepeatedComponentBlockCondition"}]},type:"array"},SliderResponse:{additionalProperties:!1,description:'The SliderResponse interface is used to define the properties of a slider response. SliderResponses render as a slider input with user specified steps. For example, you could have steps of 0, 50, and 100.\n\nExample: ```js { "id": "q-slider", "prompt": "How are you feeling?", "location": "aboveStimulus", "required": true, "type": "slider", "options": [  {    "label": "Bad",    "value": 0  },  {    "label": "OK",    "value": 50  },  {    "label": "Good",    "value": 100  } ] } ```',properties:{hidden:{description:"Controls whether the response is hidden.",type:"boolean"},id:{description:"The id of the response. This is used to identify the response in the data file.",type:"string"},location:{$ref:"#/definitions/ResponseBlockLocation",description:"Controls the response location. These might be the same for all responses, or differ across responses. Defaults to `belowStimulus`"},options:{description:"This defines the steps in the slider and the extent of the slider as an array of objects that have a label and a value.",items:{$ref:"#/definitions/NumberOption"},type:"array"},paramCapture:{description:"Use to capture querystring parameters in answers such as participant_name. See the examples for how this is used, but prefer uiConfig.urlParticipantIdParam if you are capturing a participant ID.",type:"string"},prompt:{description:"The prompt that is displayed to the participant. You can use markdown here to render images, links, etc.",type:"string"},required:{description:"Controls whether the response is required to be answered.",type:"boolean"},requiredLabel:{description:"You can provide a required label, which makes it so a participant has to answer with a response that matches label.",type:"string"},requiredValue:{description:"You can provide a required value, which makes it so a participant has to answer with that value."},secondaryText:{description:"The secondary text that is displayed to the participant under the prompt. This does not accept markdown.",type:"string"},type:{const:"slider",type:"string"}},required:["id","options","prompt","required","type"],type:"object"},StringOption:{additionalProperties:!1,description:"The StringOption interface is used to define the options for a dropdown, radio, or checkbox response. The label is the text that is displayed to the user, and the value is the value that is stored in the data file.",properties:{label:{description:"The label displayed to participants.",type:"string"},value:{description:"The value stored in the participant's data.",type:"string"}},required:["label","value"],type:"object"},StudyConfig:{additionalProperties:!1,description:'The StudyConfig interface is used to define the properties of a study configuration. This is a JSON object with four main components: the StudyMetadata, the UIConfig, the Components, and the Sequence. Below is the general template that should be followed when constructing a Study configuration file.\n\n```js { "$schema": "https://raw.githubusercontent.com/revisit-studies/study/v1.0.3/src/parser/StudyConfigSchema.json", "studyMetadata": {  ... }, "uiConfig": {  ... }, "components": {  ... }, "sequence": {  ... } } ```\n\n:::info For information about each of the individual pieces of the study configuration file, you can visit the documentation for each one individually. ::: <br/>\n\nThe `$schema` line is used to verify the schema. If you\'re using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration.',properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. The `$schema` line is used to verify the schema. If you're using VSCode (or other similar IDEs), including this line will allow for autocomplete and helpful suggestions when writing the study configuration. See examples for more information",type:"string"},baseComponents:{$ref:"#/definitions/BaseComponents",description:"The base components that are used in the study. These components can be used to template other components. See [BaseComponents](../../type-aliases/BaseComponents) for more information."},components:{additionalProperties:{anyOf:[{$ref:"#/definitions/IndividualComponent"},{$ref:"#/definitions/InheritedComponent"}]},description:"The components that are used in the study. They must be fully defined here with all properties. Some properties may be inherited from baseComponents.",type:"object"},sequence:{$ref:"#/definitions/ComponentBlock",description:"The order of the components in the study. This might include some randomness."},studyMetadata:{$ref:"#/definitions/StudyMetadata",description:"The metadata for the study. This is used to identify the study and version in the data file."},uiConfig:{$ref:"#/definitions/UIConfig",description:"The UI configuration for the study. This is used to configure the UI of the app."}},required:["$schema","studyMetadata","uiConfig","components","sequence"],type:"object"},StudyMetadata:{additionalProperties:!1,description:'The StudyMetadata is used to describe certain properties of a study. Some of this data is displayed on the landing page when running the app, such as the title and description. Below is an example of a StudyMetadata entry in your study configuration file:\n\n```js "studyMetadata" : { "title": "My New Study", "version": "pilot", "authors": [  "Jane Doe",  "John Doe" ], "date": "2024-04-01", "description": "This study is meant to test your ability.", "organizations": [  "The reVISit Team",  "The Other Team" ] } ```',properties:{authors:{description:"The authors of your study.",items:{type:"string"},type:"array"},date:{description:"The date of your study, may be useful for the researcher.",type:"string"},description:{description:"The description of your study, shown on the landing page.",type:"string"},organizations:{description:"The organizations that are associated with your study.",items:{type:"string"},type:"array"},title:{description:"The title of your study, shown on the landing page.",type:"string"},version:{description:"The version of your study. When you change a configuration file after a study has already been distributed to participants, you can change the version number so that the participants who see this new configuration file can be identified.",type:"string"}},required:["title","version","authors","date","description","organizations"],type:"object"},UIConfig:{additionalProperties:!1,description:'The UIConfig is used to configure the UI of the app. This includes the logo, contact email, and whether to show a progress bar. The UIConfig is also used to configure the sidebar, which can be used to display the task instructions and capture responses. Below is an example of how the UI Config would look in your study configuration (note, there are optional fields that are not shown here): ```js uiConfig:{ "contactEmail": "contact@revisit.dev", "helpTextPath": "<study-name>/assets/help.md", "logoPath": "<study-name>/assets/logo.jpg", "withProgressBar": true, "autoDownloadStudy": true "autoDownloadTime": 5000, "studyEndMsg": "Thank you for completing this study. You\'re the best!", "sidebar": true, "windowEventDebounceTime": 500, "urlParticipantIdParam": "PROLIFIC_ID", "numSequences": 500 } ``` In the above, the `path/to/assets/` path is referring to the path to your individual study assets. It is common practice to have your study directory contain an `assets` directory where all components and images relevant to your study reside. Note that this path is relative to the `public` folder of the repository - as is all other paths you define in reVISit (aside from React components whose paths are relative to `src/public`.)',properties:{autoDownloadStudy:{description:"Controls whether the study data is automatically downloaded at the end of the study.",type:"boolean"},autoDownloadTime:{description:"The time in milliseconds to wait before automatically downloading the study data.",type:"number"},contactEmail:{description:"The email address that used during the study if a participant clicks contact.",type:"string"},enumerateQuestions:{description:"Whether to prepend questions with their index (+ 1). This should only be used when all questions are in the same location, e.g. all are in the side bar.",type:"boolean"},helpTextPath:{description:"The path to the help text file. This is displayed when a participant clicks help. Markdown is supported.",type:"string"},logoPath:{description:"The path to the logo image. This is displayed on the landing page and the header.",type:"string"},numSequences:{description:"The number of sequences to generate for the study. This is used to generate the random sequences for the study. The default is 1000.",type:"number"},sidebar:{description:"Controls whether the left sidebar is rendered at all. Required to be true if your response's location is set to sidebar for any question.",type:"boolean"},sidebarWidth:{description:"The width of the left sidebar. Defaults to 300.",type:"number"},studyEndMsg:{description:"The message to display when the study ends.",type:"string"},urlParticipantIdParam:{description:"If the participant ID is passed in the URL, this is the name of the querystring parameter that is used to capture the participant ID (e.g. PROLIFIC_ID). This will allow a user to continue a study on different devices and browsers.",type:"string"},windowEventDebounceTime:{description:"Debounce time in milliseconds for automatically tracked window events. Defaults to 100. E.g 100 here means 1000ms / 100ms = 10 times a second, 200 here means 1000ms / 200ms = 5 times per second",type:"number"},withProgressBar:{description:"Controls whether the progress bar is rendered in the study.",type:"boolean"}},required:["contactEmail","logoPath","withProgressBar","sidebar"],type:"object"},WebsiteComponent:{additionalProperties:!1,description:'The WebsiteComponent interface is used to define the properties of a website component. A WebsiteComponent is used to render an iframe with a website inside of it. This can be used to display an external website or an html file that is located in the public folder.\n\n```js { "type": "website", "path": "<study-name>/assets/website.html", } ```\n\nTo pass a data from the config to the website, you can use the `parameters` field as below:\n\n```js { "type": "website", "path": "<study-name>/website.html", "parameters": {  "barData": [0.32, 0.01, 1.2, 1.3, 0.82, 0.4, 0.3] } "response": [  {    "id": "barChart",    "prompt": "Your selected answer:",    "required": true,    "location": "belowStimulus",    "type": "iframe"  } ], } ``` In the `website.html` file, by including `revisit-communicate.js`, you can use the `Revisit.onDataReceive` method to retrieve the data, and `Revisit.postAnswers` to send the user\'s responses back to the reVISit as shown in the example below:\n\n```html <script src="../../revisitUtilities/revisit-communicate.js"><\/script> <script> Revisit.onDataReceive((data) => {  const barData = data[\'barData\'];  ... });\n\n// Call out that \'barChart\' needs to match ID in \'response\' object Revisit.postAnswers({ barChart: userAnswer }); <\/script> ```\n\n If the html website implements Trrack library for provenance tracking, you can send the provenance graph back to reVISit by calling `Revisit.postProvenanceGraph` as shown in the example below. You need to call this each time the Trrack state is updated so that reVISit is kept aware of the changes in the provenance graph.\n\n```js const trrack = initializeTrrack({ initialState, registry });\n\n... Revisit.postProvenance(trrack.graph.backend); ```',properties:{allowFailedTraining:{description:"Controls whether the component should allow failed training. If not provided, the default is true.",type:"boolean"},correctAnswer:{description:"The correct answer to the component. This is used for training trials where the user is shown the correct answer after a guess.",items:{$ref:"#/definitions/Answer"},type:"array"},description:{description:"The description of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instruction:{description:"The instruction of the component. This is used to identify and provide additional information for the component in the admin panel.",type:"string"},instructionLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the instructions."},meta:{additionalProperties:{},description:"The meta data for the component. This is used to identify and provide additional information for the component in the admin panel.",type:"object"},nextButtonLocation:{$ref:"#/definitions/ResponseBlockLocation",description:"The location of the next button."},nextButtonText:{description:"The text that is displayed on the next button.",type:"string"},parameters:{additionalProperties:{},description:"The parameters that are passed to the website (iframe). These can be used within your website to render different things.",type:"object"},path:{description:"The path to the website. This should be a relative path from the public folder or could be an external website.",type:"string"},provideFeedback:{description:"Controls whether the component should provide feedback to the participant, such as in a training trial. If not provided, the default is false.",type:"boolean"},response:{description:"The responses to the component",items:{$ref:"#/definitions/Response"},type:"array"},trainingAttempts:{description:"The number of training attempts allowed for the component. The next button will be disabled until either the correct answer is given or the number of attempts is reached. When the number of attempts is reached, if the answer is incorrect still, the correct value will be shown to the participant. The default value is 2. Providing a value of -1 will allow infinite attempts and the participant must enter the correct answer to continue, and reVISit will not show the correct answer to the user.",type:"number"},type:{const:"website",type:"string"}},required:["path","response","type"],type:"object"}},tOt={$ref:JPt,$schema:ZPt,definitions:eOt},nOt="#/definitions/GlobalConfig",rOt="http://json-schema.org/draft-07/schema#",iOt={GlobalConfig:{additionalProperties:!1,description:"The GlobalConfig is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",properties:{$schema:{description:"A required json schema property. This should point to the github link for the version of the schema you would like. See examples in the public folder for more information",type:"string"},configs:{additionalProperties:{additionalProperties:!1,description:"The key is used to identify the study config file. This key is used in the configList property.",properties:{path:{description:"The path to the study config file. This should be a relative path from the public folder.",type:"string"},test:{description:"Indicates whether the study is a test study. This is used to hide the study from the landing page.",type:"boolean"}},required:["path"],type:"object"},description:"A required property that specifies the options for the configList property.",type:"object"},configsList:{description:"A required property that is used to generate the list of available studies in the UI. This list is displayed on the landing page when running the app.",items:{type:"string"},type:"array"}},required:["$schema","configs","configsList"],type:"object"}},sOt={$ref:nOt,$schema:rOt,definitions:iOt},UPe=new BPe;UPe.addSchema(sOt);const Uhe=UPe.getSchema("#/definitions/GlobalConfig"),zPe=new BPe;zPe.addSchema(tOt);const h9=zPe.getSchema("#/definitions/StudyConfig");function oOt(e){const t=[];return[e.configsList.every(r=>e.configs[r]===void 0?(t.push({message:`Config ${r} is not defined in configs object, but is present in configsList`}),!1):!0),t]}function i4(e){return e.baseComponent!==void 0}function aOt(e){const t=BJ.parse(e),n=Uhe(t),r=oOt(t);if(n&&r[0])return t;throw console.error("Global config parsing errors",[...Uhe.errors||[],...r[1]]),Error("There was an issue validating your file global.json")}function VPe(e,t,n=[]){if(e.components.length===0){n.push({message:"Sequence has an empty components array",instancePath:"/sequence/",params:{action:"remove empty components block"}});return}e.id&&t.map((i,s)=>i===e.id?s:null).forEach(i=>{i!==null&&t.splice(i,1)}),e.components.forEach(r=>{typeof r=="string"?t.includes(r)&&t.map((s,o)=>s===r?o:null).forEach(s=>{s!==null&&t.splice(s,1)}):VPe(r,t,n)}),e.skip&&t.push(...e.skip.map(r=>r.to).filter(r=>r!=="end"))}function uOt(e){const t=[],n=[];Object.entries(e.components).forEach(([s,o])=>{var a;i4(o)&&!((a=e.baseComponents)!=null&&a[o.baseComponent])&&t.push({message:`Base component \`${o.baseComponent}\` is not defined in baseComponents object`,instancePath:`/components/${s}`,params:{action:"add the base component to the baseComponents object"}})});const r=aTe(e.sequence);r.forEach(s=>{var o;e.components[s]||t.push({message:(o=e.baseComponents)!=null&&o[s]?`Component \`${s}\` is a base component and cannot be used in the sequence`:`Component \`${s}\` is not defined in components object`,instancePath:"/sequence/",params:{action:"add the component to the components object"}})}),Object.keys(e.components).filter(s=>!r.includes(s)).forEach(s=>{n.push({message:`Component \`${s}\` is defined in components object but not used in the sequence`,instancePath:"/components/",params:{action:"remove the component from the components object or add it to the sequence"}})});const i=[];return VPe(e.sequence,i),i.forEach(s=>{t.push({message:`Skip target \`${s}\` does not occur after the skip block it is used in`,instancePath:"/sequence/",params:{action:"add the target to the sequence after the skip block"}})}),{errors:t,warnings:n}}function lOt(e){let t=!1,n;try{n=BJ.parse(e),t=h9(n)}catch{t=!1}let r=[],i=[];if(t){const{errors:s,warnings:o}=uOt(n);r=[...h9.errors||[],...s],i=o}else r=h9.errors||[{message:"There was an issue validating your config file",instancePath:"root",params:{action:"fix the errors in your file or make sure the global config references the right file path"}}];return{...n,errors:r,warnings:i}}function HPe(){const e=ag(),{setAlertModal:t}=Zh(),n=ep();I.useEffect(()=>{window.history.pushState(null,"",window.location.href),window.onpopstate=()=>{window.history.pushState(null,"",window.location.href),n(t({show:!0,message:"Using the browser's back button is prohibited during the study."}))}},[e,t,n])}var zhe=Object.prototype.hasOwnProperty;function Vhe(e,t,n){for(n of e.keys())if(l2(n,t))return n}function l2(e,t){var n,r,i;if(e===t)return!0;if(e&&t&&(n=e.constructor)===t.constructor){if(n===Date)return e.getTime()===t.getTime();if(n===RegExp)return e.toString()===t.toString();if(n===Array){if((r=e.length)===t.length)for(;r--&&l2(e[r],t[r]););return r===-1}if(n===Set){if(e.size!==t.size)return!1;for(r of e)if(i=r,i&&typeof i=="object"&&(i=Vhe(t,i),!i)||!t.has(i))return!1;return!0}if(n===Map){if(e.size!==t.size)return!1;for(r of e)if(i=r[0],i&&typeof i=="object"&&(i=Vhe(t,i),!i)||!l2(r[1],t.get(i)))return!1;return!0}if(n===ArrayBuffer)e=new Uint8Array(e),t=new Uint8Array(t);else if(n===DataView){if((r=e.byteLength)===t.byteLength)for(;r--&&e.getInt8(r)===t.getInt8(r););return r===-1}if(ArrayBuffer.isView(e)){if((r=e.byteLength)===t.byteLength)for(;r--&&e[r]===t[r];);return r===-1}if(!n||typeof e=="object"){r=0;for(n in e)if(zhe.call(e,n)&&++r&&!zhe.call(t,n)||!(n in t)||!l2(e[n],t[n]))return!1;return Object.keys(t).length===r}}return e!==e&&t!==t}function cOt(e){var t=I.useRef(e),n=I.useRef(0);return l2(e,t.current)||(t.current=e,n.current+=1),I.useMemo(function(){return t.current},[n.current])}function fOt(e,t){return I.useEffect(e,cOt(t))}const dOt=(e,t=null)=>{const[n,r]=I.useState("idle"),[i,s]=I.useState(null),[o,a]=I.useState(null),u=I.useRef(),l=I.useRef(!1);I.useEffect(()=>(l.current=!0,()=>{l.current=!1}),[]);const c=I.useCallback((...f)=>{r("pending"),a(null);const d=Promise.resolve(e(...f)).then(h=>(l.current&&d===u.current&&(s(h),r("success")),h)).catch(h=>{throw l.current&&d===u.current&&(s(null),a(h),r("error")),h});return u.current=d,d},[e]);return fOt(()=>{if(t)try{c(...t)}catch{}},[c,t]),{execute:c,status:n,value:i,error:o}},Hhe=["status","percentComplete","description","instruction","responsePrompt","answer","correctAnswer","responseMin","responseMax","startTime","endTime","duration","meta","configHash"],qPe=["participantId","trialId","trialOrder","responseId"];function kZ(e,t){const n=`data:text/json;charset=utf-8,${encodeURIComponent(e)}`,r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",t),document.body.appendChild(r),r.click(),r.remove()}function hOt(e,t,n){const r=(Object.entries(e.answers).filter(([i,s])=>s.endTime!==void 0).length/(Nm(e.sequence).length-1)*100).toFixed(2);return Object.entries(e.answers).map(([i,s])=>{const o=i.split("_").slice(0,-1).join("_"),a=parseInt(`${i.split("_").at(-1)}`,10),u=n.components[o],l=i4(u)&&u.baseComponent&&n.baseComponents?iX({},n.baseComponents[u.baseComponent],u):u,c=s.endTime-s.startTime;return Object.entries(s.answer).map(([d,h])=>{var g,y;const p={participantId:e.participantId,trialId:o,trialOrder:a,responseId:d},m=l.response.find(v=>v.id===d);if(t.includes("status")&&(p.status=e.rejected?"rejected":e.completed?"completed":"in progress"),t.includes("configHash")&&(p.configHash=e.participantConfigHash),t.includes("percentComplete")&&(p.percentComplete=r),t.includes("description")&&(p.description=l.description),t.includes("instruction")&&(p.instruction=l.instruction),t.includes("responsePrompt")&&(p.responsePrompt=m==null?void 0:m.prompt),t.includes("answer")&&(p.answer=h),t.includes("correctAnswer")){const v=(y=(g=l.correctAnswer)==null?void 0:g.find(b=>b.id===d))==null?void 0:y.answer;p.correctAnswer=typeof v=="object"?JSON.stringify(v):v}return t.includes("responseMin")&&(p.responseMin=(m==null?void 0:m.type)==="numerical"?m.min:void 0),t.includes("responseMax")&&(p.responseMax=(m==null?void 0:m.type)==="numerical"?m.max:void 0),t.includes("startTime")&&(p.startTime=new Date(s.startTime).toISOString()),t.includes("endTime")&&(p.endTime=new Date(s.endTime).toISOString()),t.includes("duration")&&(p.duration=c),t.includes("meta")&&(p.meta=JSON.stringify(l.meta,null,2)),p}).flat()}).flat()}async function pOt(e,t,n,r){if(!n)return{header:[],rows:[]};const i=[...qPe,...e],s=[...new Set(t.map(c=>c.participantConfigHash))],o=await n.getAllConfigsFromHash(s,r),a=i,l=(await Promise.all(t.map(async c=>await hOt(c,i,o[c.participantConfigHash])))).flat().sort((c,f)=>c!==f?c.participantId.localeCompare(f.participantId):c.trialOrder-f.trialOrder);return{header:a,rows:l}}function mOt({opened:e,close:t,filename:n,data:r,studyId:i}){const[s,o]=I.useState([...Hhe].filter(h=>h!=="meta")),a=ks(),{value:u,status:l,error:c}=dOt(pOt,[s,r,a.storageEngine,i]),f=I.useCallback(()=>{if(!u)return;const h=[u.header.join(","),...u.rows.map(p=>u.header.map(m=>`"${`${p[m]}`.replace(/"/g,'""')}"`).join(","))].join(`
`);kZ(h,n)},[n,u]),d=I.useMemo(()=>{if(!u)return"";const h=u.rows.length>5?5:u.rows.length,p=h===1?"":"s";return`This is a preview of the first ${p?h:""} row${p} of the CSV. The full CSV contains ${u.rows.length} row${p}.`},[u]);return _.jsxs(Ji,{opened:e,size:"90%",onClose:t,title:"Tidy CSV Exporter",centered:!0,withCloseButton:!1,children:[_.jsx(tK,{searchable:!0,nothingFoundMessage:"Property not found",data:[...Hhe],value:s,onChange:h=>o(h),label:"Included optional columns:",leftSection:_.jsx(qZe,{}),variant:"filled"}),_.jsx($l,{h:"md"}),_.jsxs(me,{mih:300,style:{width:"100%",overflow:"scroll"},children:[l==="success"&&u?_.jsxs(qt,{striped:!0,captionSide:"bottom",withTableBorder:!0,children:[_.jsx(qt.Thead,{children:_.jsx(qt.Tr,{children:u.header.map(h=>_.jsx(qt.Th,{style:{whiteSpace:"nowrap",minWidth:["description","instruction","participantId"].includes(h)?200:void 0},children:_.jsxs(Nt,{direction:"row",justify:"space-between",align:"center",children:[h,!qPe.includes(h)&&_.jsx(Gb,{onClick:()=>o(s.filter(p=>p!==h)),style:{marginBottom:-3,marginLeft:8},variant:"subtle",color:"gray",children:_.jsx(RK,{size:16})})]})},h))})}),_.jsx(qt.Tbody,{children:u.rows.slice(0,5).map((h,p)=>_.jsx(qt.Tr,{children:u.header.map(m=>_.jsx(qt.Td,{style:{whiteSpace:["description","instruction","participantId"].includes(m)?"normal":"nowrap"},children:h[m]},`${p}-${m}`))},p))})]}):l==="error"&&c?_.jsx(yS,{variant:"light",children:c.message}):null,_.jsx(zl,{visible:l==="pending"||l==="idle"})]}),_.jsx($l,{h:"sm"}),_.jsx(Nt,{justify:"center",fz:"sm",c:"dimmed",children:_.jsx(et,{children:d})}),_.jsx($l,{h:"md"}),_.jsxs(Cs,{justify:"right",children:[_.jsx(cn,{onClick:t,color:"dark",variant:"subtle",children:"Close"}),_.jsx(cn,{leftSection:_.jsx(hxe,{}),onClick:()=>f(),"data-autofocus":!0,children:"Download"})]})]})}function gOt(){const e=Z0(),{storageEngine:t}=ks(),{answers:n}=ef(v=>v),[r,i]=I.useState(!1);I.useEffect(()=>{const v=setInterval(async()=>{await t.verifyCompletion(n)&&(i(!0),clearInterval(v))},1e3)},[]),HPe();const[s,o]=I.useState(),[a,u]=I.useState(""),l=e.studyMetadata.title.replace(" ","_");I.useEffect(()=>{async function v(){if(t){const b=await t.getCurrentParticipantId(),w=await t.getParticipantData();u(b),o(w)}}v()},[t]);const c=I.useCallback(async()=>{kZ(JSON.stringify(s,null,2),`${l}_${a}.json`)},[l,s,a]),f=e.uiConfig.autoDownloadStudy||!1,d=f&&e.uiConfig.autoDownloadTime||-1,[h,p]=I.useState(Math.floor(d/1e3));I.useEffect(()=>{if(r){const v=setInterval(()=>{p(b=>b-1)},1e3);return h<=0?(f&&c(),clearInterval(v),()=>clearInterval(v)):()=>clearInterval(v)}return()=>{}},[f,r,h,c]);const m=n_(),[g,y]=I.useState(!1);return I.useEffect(()=>{(async()=>{if(t){const b=await t.getModes(m);y(b.dataCollectionEnabled)}})()},[t,m]),_.jsx(Cm,{style:{height:"100%"},children:_.jsx(Nt,{direction:"column",children:r||!g?_.jsx(et,{size:"xl",display:"block",children:e.uiConfig.studyEndMsg?_.jsx(eu,{text:e.uiConfig.studyEndMsg}):"Thank you for completing the study. You may close this window now."}):_.jsxs(_.Fragment,{children:[_.jsx(et,{size:"xl",display:"block",children:"Please wait while your answers are uploaded."}),_.jsx($l,{h:"lg"}),_.jsx(Cm,{children:_.jsx(Kc,{color:"blue"})})]})})})}function yOt(){return _.jsx(et,{children:"Thank you for participating. Unfortunately you have didn't answer the training correctly, which means you are not eligible to participate in the study. You may close this window now."})}function vOt(){var d;const e=Z0(),t=ag(),n=Xy()||"Notfound",r=e.components[n],i=sX();HPe();const{storageEngine:s}=ks(),o=ep(),{setAlertModal:a}=Zh();if(I.useEffect(()=>{(s==null?void 0:s.getEngine())!=="firebase"&&o(a({show:!0,message:"There was an issue connecting to the firebase database. This could be caused by a network issue or your adblocker. If you are using an adblocker, please disable it for this website and refresh."}))},[a,s,o]),n==="end")return _.jsx(gOt,{});if(n==="__trainingFailed")return _.jsx(yOt,{});if(n==="Notfound")return _.jsx(ob,{email:e.uiConfig.contactEmail});const u=i4(r)&&e.baseComponents?iX({},(d=e.baseComponents)==null?void 0:d[r.baseComponent],r):r,l=u.instruction||"",{instructionLocation:c}=u,f=e.uiConfig.sidebar&&(c==="sidebar"||c===void 0);return _.jsxs(_.Fragment,{children:[c==="aboveStimulus"&&_.jsx(eu,{text:l}),_.jsx(L$,{status:i,config:u,location:"aboveStimulus"},`${t}-above-response-block`),_.jsxs(I.Suspense,{fallback:_.jsx("div",{children:"Loading..."}),children:[u.type==="markdown"&&_.jsx(vIt,{currentConfig:u}),u.type==="website"&&_.jsx(Jlt,{currentConfig:u}),u.type==="image"&&_.jsx(ect,{currentConfig:u}),u.type==="react-component"&&_.jsx(yIt,{currentConfig:u})]},`${t}-stimulus`),(c==="belowStimulus"||c===void 0&&!f)&&_.jsx(eu,{text:l}),_.jsx(L$,{status:i,config:u,location:"belowStimulus"},`${t}-below-response-block`)]})}function bH(e){const[t]=CK();return _.jsx(AK,{...e,to:{pathname:e.to,search:t.toString()}})}function WPe(e,t,n,r){let i=0;for(let s=0;s<e.components.length;s+=1){const o=e.components[s];if(typeof o=="string"){if(r===e.orderPath&&o===t&&s>=n)break;i+=1}else if(i+=WPe(o,t,n,r),r.includes(o.orderPath))break}return i}function GPe(e,t){let n=0;return t.components.forEach(r=>{var i;if(typeof r=="string"&&((i=e.interruptions)!=null&&i.flatMap(s=>s.components).includes(r)))n+=1;else if(typeof r!="string"){const s=e.components.find(o=>typeof o!="string"&&o.orderPath===r.orderPath);n+=GPe(s,r)}}),n}function bOt(e,t){const n=[];return t.forEach(r=>{const i=e.findIndex(s=>typeof s=="string"?s===r:typeof r!="string"&&s.orderPath===r.orderPath);i!==-1&&(n.push(e[i]),e.splice(i,1)),i===-1&&typeof r=="string"&&n.push(r)}),n.push(...e),n}function _Ot({step:e,disabled:t,fullSequence:n,startIndex:r,interruption:i,participantView:s,studyConfig:o,subSequence:a,analysisNavigation:u}){const l=n_(),c=Qh(),f=ag(),[d,{close:h,open:p}]=n6(!1),m=e in o.components&&o.components[e],g=a&&a.components.slice(r).includes(e)?WPe(n,e,r,a.orderPath):-1,{trialId:y}=Im(),v=y===e,b=s?f===g:f===`reviewer-${e}`,w=u?v:b,E=I.useCallback(()=>c(y?`./../${e}`:`./${e}`),[c,e,y]),S=u?E:()=>c(s?`/${l}/${g}`:`/${l}/reviewer-${e}`);return _.jsxs(Mo,{withinPortal:!0,position:"left",withArrow:!0,arrowSize:10,shadow:"md",opened:d,offset:20,children:[_.jsx(Mo.Target,{children:_.jsx(me,{onMouseEnter:p,onMouseLeave:h,children:_.jsx(R6,{active:w,style:{lineHeight:"32px",height:"32px"},label:_.jsxs(me,{children:[i&&_.jsx(PZe,{size:16,style:{marginRight:4,marginBottom:-2},color:"orange"}),w?_.jsx(et,{size:"sm",span:!0,fw:"700",display:"inline",children:e}):_.jsx(et,{size:"sm",display:"inline",children:e})]}),onClick:S,disabled:t})})}),m&&(m.description||m.meta)&&_.jsx(Mo.Dropdown,{onMouseLeave:h,children:_.jsx(et,{size:"sm",children:_.jsxs(me,{children:[m.description&&_.jsxs(me,{children:[_.jsx(et,{fw:900,display:"inline-block",mr:2,children:"Description:"}),_.jsx(et,{fw:400,component:"span",children:m.description})]}),m.meta&&_.jsxs(et,{children:[_.jsx(et,{fw:"900",component:"span",children:"Task Meta: "}),_.jsx(et,{component:"pre",style:{margin:0,padding:0},children:`${JSON.stringify(m.meta,null,2)}`})]})]})})})]})}function y3({configSequence:e,fullSequence:t,participantSequence:n,participantView:r,studyConfig:i,analysisNavigation:s}){var a;let o=P0(e.components);return n&&r&&(o=bOt(P0(e.components),P0(n.components))),r||(o=[...((a=e.interruptions)==null?void 0:a.flatMap(u=>u.components))||[],...o]),_.jsx(_.Fragment,{children:o.map((u,l)=>{if(typeof u=="string")return _.jsx(_Ot,{step:u,disabled:r&&(n==null?void 0:n.components[l])!==u,fullSequence:t,startIndex:l,interruption:e.interruptions&&e.interruptions.findIndex(h=>h.components.includes(u))>-1||!1,participantView:r,studyConfig:i,subSequence:n,analysisNavigation:s},l);const c=n==null?void 0:n.components.find(h=>typeof h!="string"&&h.orderPath===u.orderPath),f=c?Nm(c).length-GPe(u,c):0,d=Nm(u);return _.jsx(R6,{label:_.jsxs(me,{style:{opacity:f>0?1:.5},children:[_.jsx(et,{size:"sm",display:"inline",children:u.order}),u.order==="random"||u.order==="latinSquare"?_.jsx(RZe,{size:"15",opacity:.5,style:{marginLeft:"5px",verticalAlign:"middle"}}):null,r&&_.jsxs(k0,{ml:5,variant:"light",children:[f,"/",d.length]}),r&&u.interruptions&&_.jsx(k0,{ml:5,color:"orange",variant:"light",children:(c==null?void 0:c.components.filter(h=>{var p;return typeof h=="string"&&((p=u.interruptions)==null?void 0:p.flatMap(m=>m.components).includes(h))}).length)||0})]}),defaultOpened:!0,childrenOffset:32,style:{lineHeight:"32px",height:"32px"},children:_.jsx(me,{style:{borderLeft:"1px solid #e9ecef"},children:_.jsx(y3,{configSequence:u,participantSequence:c,fullSequence:t,participantView:r,studyConfig:i,analysisNavigation:s})})},l)})})}function YPe(e,t,n,r){e==null||e.nextParticipant().then(()=>{window.location.href=r}).catch(i=>{console.error(i)})}function qhe({text:e}){return _.jsx(Ci,{label:e,multiline:!0,w:200,style:{whiteSpace:"normal"},withinPortal:!0,position:"bottom",children:_.jsx(cxe,{size:16,style:{marginBottom:-3,marginLeft:4}})})}function wOt(){const{sequence:e,metadata:t}=ef(f=>f),{toggleStudyBrowser:n}=Zh(),r=Z0(),i=ep(),s=n_(),o=ixe(`/${s}`),{storageEngine:a}=ks(),u=I.useMemo(()=>{let f=P0(r.sequence);return f=nX(f,"root"),f.components.push("end"),f},[r.sequence]),[l,c]=I.useState("participant");return _.jsxs(pi.Aside,{p:"0",children:[_.jsx(pi.Section,{children:_.jsxs(Nt,{direction:"row",p:"sm",justify:"space-between",pb:"xs",children:[_.jsx(et,{size:"md",fw:700,pt:3,children:"Study Browser"}),_.jsx(cn,{variant:"light",leftSection:_.jsx(kK,{size:14}),onClick:()=>YPe(a,r,t,o),size:"xs",disabled:l==="allTrials",children:"Next Participant"}),_.jsx(tg,{onClick:()=>i(n()),mt:1})]})}),_.jsx(pi.Section,{grow:!0,component:Sm,p:"xs",pt:0,children:_.jsxs(os,{value:l,onChange:c,children:[_.jsx(me,{style:{position:"sticky",top:0,backgroundColor:"white",zIndex:1},children:_.jsxs(os.List,{grow:!0,children:[_.jsxs(os.Tab,{value:"participant",children:["Participant View",_.jsx(qhe,{text:"The Participants View shows items just as a participants would see them, considering randomization, omissions, etc. You can navigate between multiple participants using the next participant button."})]}),_.jsxs(os.Tab,{value:"allTrials",children:["All Trials View",_.jsx(qhe,{text:"The All Trials View shows all items in the order defined in the config."})]})]})}),_.jsx(os.Panel,{value:"participant",children:_.jsx(y3,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!0,studyConfig:r})}),_.jsx(os.Panel,{value:"allTrials",children:_.jsx(y3,{configSequence:u,participantSequence:e,fullSequence:e,participantView:!1,studyConfig:r})})]})})]})}function EOt({studyNavigatorEnabled:e,dataCollectionEnabled:t}){const{config:n,metadata:r}=ef(E=>E),i=rX(),s=ep(),{toggleShowHelpText:o,toggleStudyBrowser:a}=Zh(),{storageEngine:u}=ks(),l=ag(),c=i.length-1,f=typeof l=="number"?l/c*100:0,[d,h]=I.useState(!1),p=n==null?void 0:n.uiConfig.logoPath,m=n==null?void 0:n.uiConfig.withProgressBar,g=n_(),y=ixe(`/${g}`),v=I.useRef(null),[b,w]=I.useState(!1);return I.useEffect(()=>{const E=v.current;E&&w(E.scrollWidth>E.offsetWidth)},[n]),_.jsx(pi.Header,{p:"md",children:_.jsxs(Ga,{mt:-7,align:"center",children:[_.jsx(Ga.Col,{span:4,children:_.jsxs(Nt,{align:"center",children:[_.jsx(Wy,{w:40,src:`${Gu}${p}`,alt:"Study Logo"}),_.jsx($l,{w:"md"}),_.jsx(Ii,{ref:v,order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},title:b?n==null?void 0:n.studyMetadata.title:void 0,children:n==null?void 0:n.studyMetadata.title})]})}),_.jsx(Ga.Col,{span:4,children:m&&_.jsx(ES,{radius:"md",size:"lg",value:f})}),_.jsx(Ga.Col,{span:4,children:_.jsxs(Cs,{wrap:"nowrap",justify:"right",children:[!t&&_.jsx(Ci,{multiline:!0,withArrow:!0,arrowSize:6,w:300,label:"This is a demo version of the study, were not collecting any data.",children:_.jsx(k0,{size:"lg",color:"orange",children:"Demo Mode"})}),(n==null?void 0:n.uiConfig.helpTextPath)!==void 0&&_.jsx(cn,{variant:"outline",onClick:()=>s(o()),children:"Help"}),_.jsxs(Ru,{shadow:"md",width:200,withinPortal:!0,opened:d,onChange:h,children:[_.jsx(Ru.Target,{children:_.jsx(Gb,{size:"lg",className:"studyBrowserMenuDropdown",variant:"subtle",color:"gray",children:_.jsx(BZe,{})})}),_.jsxs(Ru.Dropdown,{children:[e&&_.jsx(Ru.Item,{leftSection:_.jsx(JZe,{size:14}),onClick:()=>s(a()),children:"Study Browser"}),_.jsx(Ru.Item,{component:"a",href:n!==null?`mailto:${n.uiConfig.contactEmail}`:void 0,leftSection:_.jsx(WZe,{size:14}),children:"Contact"}),e&&_.jsx(Ru.Item,{leftSection:_.jsx(kK,{size:14}),onClick:()=>YPe(u,n,r,y),children:"Next Participant"})]})]})]})})]})})}function KPe(e,t){var n;return i4(e)&&t.baseComponents?iX({},(n=t.baseComponents)==null?void 0:n[e.baseComponent],e):e}function xOt(){var u;const e=(u=Z0())==null?void 0:u.uiConfig.sidebar,t=Z0(),n=Xy(),r=t.components[n],i=I.useMemo(()=>r?KPe(r,t):null,[r,t]),s=sX(),o=(i==null?void 0:i.instruction)||"",a=(i==null?void 0:i.instructionLocation)==="sidebar"||(i==null?void 0:i.instructionLocation)===void 0;return e&&i?_.jsxs(pi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:[a&&o!==""&&_.jsx(pi.Section,{bg:"gray.3",p:"md",children:_.jsxs(et,{c:"gray.9",children:[_.jsx(et,{span:!0,c:"orange.8",fw:700,inherit:!0,children:"Task:"}),_.jsx(eu,{text:o})]})}),_.jsx(pi.Section,{p:"md",children:_.jsx(L$,{status:s,config:i,location:"sidebar"},`${n}-sidebar-response-block`)})]}):_.jsx(pi.Navbar,{bg:"gray.1",display:"block",style:{zIndex:0,overflowY:"scroll"},children:_.jsx(L$,{status:s,config:i,location:"sidebar",style:{display:"hidden"}},`${n}-sidebar-response-block`)})}function SOt(){const{showHelpText:e,config:t}=ef(u=>u),n=ep(),{toggleShowHelpText:r}=Zh(),[i,s]=I.useState(""),[o,a]=I.useState(!0);return I.useEffect(()=>{async function u(){const l=await aX(t.uiConfig.helpTextPath);l!==void 0&&s(l),a(!1)}u()},[t.uiConfig.helpTextPath]),_.jsx(Ji,{size:"70%",opened:e,withCloseButton:!1,onClose:()=>n(r()),children:o||i?_.jsx(eu,{text:i}):_.jsx(ob,{path:t.uiConfig.helpTextPath})})}function TOt(){const{alertModal:e}=ef(o=>o),{setAlertModal:t}=Zh(),n=ep(),[r,i]=I.useState(e.show),s=I.useCallback(()=>n(t({...e,show:!1})),[e,t,n]);return I.useEffect(()=>i(e.show),[e.show]),_.jsx(Ji,{opened:r,centered:!0,size:"lg",withCloseButton:!1,onClose:s,children:_.jsxs(yS,{color:"red",radius:"xs",title:"Alert",icon:_.jsx(kZe,{}),onClose:s,styles:{root:{backgroundColor:"unset"}},children:[_.jsx(et,{my:"md",children:e.message}),_.jsx(Cs,{w:"100%",justify:"end",children:_.jsx(cn,{onClick:s,color:"red",variant:"filled",m:"xs",children:"Continue Study"})})]})})}function AOt(){const e=I.useRef([]),t=Z0(),n=t.uiConfig.windowEventDebounceTime??100,r=ef(d=>d.showStudyBrowser);I.useEffect(()=>{const d=Rd(E=>{e.current.push([Date.now(),"focus",E.target instanceof HTMLElement?E.target.tagName:""])},n,{maxWait:n}),h=Rd(E=>{e.current.push([Date.now(),"input",E.data??""])},n,{maxWait:n}),p=Rd(E=>{e.current.push([Date.now(),"keypress",E.key])},n,{maxWait:n}),m=Rd(E=>{e.current.push([Date.now(),"mousedown",[E.clientX,E.clientY]])},n,{maxWait:n}),g=Rd(E=>{e.current.push([Date.now(),"mouseup",[E.clientX,E.clientY]])},n,{maxWait:n}),y=Rd(()=>{e.current.push([Date.now(),"resize",[window.innerWidth,window.innerHeight]])},n,{maxWait:n}),v=Rd(E=>{e.current.push([Date.now(),"mousemove",[E.clientX,E.clientY]])},n,{maxWait:n}),b=Rd(()=>{e.current.push([Date.now(),"scroll",[window.scrollX,window.scrollY]])},n,{maxWait:n}),w=Rd(()=>{e.current.push([Date.now(),"visibility",document.visibilityState])},n,{maxWait:n});return window.addEventListener("focus",d,!0),window.addEventListener("input",h),window.addEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.addEventListener("resize",y),window.addEventListener("mousemove",v),window.addEventListener("scroll",b),document.addEventListener("visibilitychange",w),()=>{window.removeEventListener("focus",d,!0),window.removeEventListener("input",h),window.removeEventListener("keypress",p),window.addEventListener("mousedown",m),window.addEventListener("mouseup",g),window.removeEventListener("resize",y),window.removeEventListener("mousemove",v),window.removeEventListener("scroll",b),document.removeEventListener("visibilitychange",w)}},[]);const i=t.uiConfig.sidebarWidth??300,{storageEngine:s}=ks(),o=n_(),[a,u]=I.useState(!1),[l,c]=I.useState(!1);I.useEffect(()=>{(async()=>{if(s){const h=await s.getModes(o);u(h.studyNavigatorEnabled),c(h.dataCollectionEnabled)}})()},[s,o]);const f=I.useMemo(()=>a&&r,[a,r]);return _.jsx(hTe.Provider,{value:e,children:_.jsxs(pi,{padding:"md",header:{height:70},navbar:{width:i,breakpoint:"xs",collapsed:{desktop:!t.uiConfig.sidebar,mobile:!t.uiConfig.sidebar}},aside:{width:360,breakpoint:"xs",collapsed:{desktop:!f,mobile:!f}},children:[_.jsx(xOt,{}),_.jsx(wOt,{}),_.jsx(EOt,{studyNavigatorEnabled:a,dataCollectionEnabled:l}),_.jsx(SOt,{}),_.jsx(TOt,{}),_.jsx(pi.Main,{children:_.jsx(pZe,{})})]})})}function COt(e,t=!1){return typeof e=="number"?Whe(e,t):Whe(e.length,t).map(r=>r.map(i=>e[i]))}function Whe(e,t){if(e<0)throw new Error("Latin square size must be > 0");if(e==0)return[];if(e==1)return[[0]];let n=new Array(e);for(let s=0;s<e;s++)s<2?n[s]=s:s%2==0?n[s]=e-s/2:n[s]=Math.floor(s/2)+1;let r=[n],i=n;for(let s=1;s<e;s+=1){let o=i.map(a=>(a+1)%e);r.push(o),i=o}if(t&&e%2>0)for(let s=0;s<e;s+=1)r.push(r[s].slice().reverse());return r}function XPe(e,t,n){let r=e.components;e.order==="random"?r=e.components.sort(()=>.5-Math.random()):e.order==="latinSquare"&&t&&(r=t[n].pop().map(i=>i.startsWith("_componentBlock")?e.components[+i.slice(15)]:i)),r=r.slice(0,e.numSamples);for(let i=0;i<r.length;i+=1){const s=r[i];if(typeof s!="string"&&!Array.isArray(s)){const o=e.components.indexOf(s);r[i]=XPe(s,t,`${n}-${o}`)}}return e.interruptions&&e.interruptions.forEach(i=>{const s=[];if(i.spacing!=="random")for(let o=0;o<r.length;o+=1)(o===i.firstLocation||o>i.firstLocation&&o%i.spacing===0)&&s.push(i.components),s.push(r[o]);if(i.spacing==="random"){const o=new Set;if(i.numInterruptions>r.length-1)throw new Error("Number of interruptions cannot be greater than the number of components");for(;o.size<i.numInterruptions;){const l=Math.floor(Math.random()*r.length-1)+1;o.add(l)}const a=Array.from(o).sort((l,c)=>l-c);let u=0;for(let l=0;l<r.length;l+=1)l===a[u]&&(s.push(i.components),u+=1),s.push(r[l])}r=s}),{id:e.id,orderPath:n,components:r.flat(),skip:e.skip}}function IOt(e,t){const n=P0(e);return XPe(n,t,"root")}function QPe(e,t,n,r=0){const i=n.length>0?`${n}-${r}`:"root";e.order==="latinSquare"&&t.push(i),e.components.forEach((s,o)=>{typeof s!="string"&&QPe(s,t,i,o)})}function kOt(e){const t=[];return QPe(e,t,"",0),t}function Ghe(e,t){const n=t.split("-");let r={};n.forEach(o=>{o==="root"?r=e.sequence:r=r.components[+o]});const i=r.components.map((o,a)=>typeof o=="string"?o:`_componentBlock${a}`);return COt(i.sort(()=>.5-Math.random()),!0)}function ROt(e){const n=kOt(e.sequence).map(s=>({[s]:Ghe(e,s)})).reduce((s,o)=>({...s,...o}),{}),r=e.uiConfig.numSequences||1e3,i=[];return Array.from({length:r}).forEach(()=>{const s=IOt(e.sequence,n);s.components.push("end"),i.push(s),Object.entries(n).forEach(([o,a])=>{a.length===0&&(n[o]=Ghe(e,o))})}),i}var NOt={VITE_BASE_PATH:"/mqp2024/",VITE_FIREBASE_CONFIG:`
{
  apiKey: "AIzaSyBx7sXanwGJ6DenasAircH1xD4Wpuyc5hY",
  authDomain: "mqp2024-belief-correlation.firebaseapp.com",
  projectId: "mqp2024-belief-correlation",
  storageBucket: "mqp2024-belief-correlation.firebasestorage.app",
  messagingSenderId: "478783527018",
  appId: "1:478783527018:web:22813a9b1dba82e2e75213",
  measurementId: "G-PMJGZTZWVS"
}
`,VITE_STORAGE_ENGINE:"firebase",VITE_RECAPTCHAV3TOKEN:"6LephJQqAAAAAKJQy2NJMECvXRO2tdejmhVX4f6H",BASE_URL:"/mqp2024/",MODE:"production",DEV:!1,PROD:!0,SSR:!1};async function POt(e){const t=await(await fetch(`${Gu}${e}`)).text();return lOt(t)}async function s4(e,t){const n=t.configsList.find(r=>mxe(r)===e);if(n){const r=t.configs[n];return await POt(`${r.path}`)}return null}async function OOt(e){const t={},n=e.configsList.filter(i=>NOt.VITE_CI==="true"?!0:!e.configs[i].test).map(async i=>s4(i,e)),r=await Promise.all(n);return e.configsList.forEach((i,s)=>{t[i]=r[s]}),t}function DOt({globalConfig:e}){const t=n_(),[n,r]=I.useState(null),i=e.configsList.includes(t);I.useEffect(()=>{s4(t,e).then(h=>{r(h)})},[e,t]);const[s,o]=I.useState([]),[a,u]=I.useState(null),{storageEngine:l}=ks(),[c]=CK();I.useEffect(()=>{async function h(){if(!l||!n||!t)return;await l.initializeStudyDb(t,n),await l.getSequenceArray()||await l.setSequenceArray(await ROt(n));const m=n.uiConfig.urlParticipantIdParam&&c.get(n.uiConfig.urlParticipantIdParam)||void 0,g=Object.fromEntries(c.entries()),y=await fetch("https://api.ipify.org?format=json").catch(T=>""),v=y instanceof Response?await y.json():{ip:""},b={language:navigator.language,userAgent:navigator.userAgent,resolution:{width:window.screen.width,height:window.screen.height,availHeight:window.screen.availHeight,availWidth:window.screen.availWidth,colorDepth:window.screen.colorDepth,orientation:window.screen.orientation.type,pixelDepth:window.screen.pixelDepth},ip:v.ip},w=await l.initializeParticipantSession(t,g,n,b,m),E=await ylt(t,n,w.sequence,b,w.answers);u(E),o([{element:_.jsx(AOt,{}),children:[{path:"/",element:_.jsx(bH,{to:"0",replace:!0})},{path:"/:index",element:n.errors.length>0?_.jsxs(_.Fragment,{children:[_.jsx(Ii,{order:2,mb:8,children:"Error loading config"}),_.jsx(yz,{issues:n.errors,type:"error"})]}):_.jsx(vOt,{})}]}])}h()},[l,n,t,c]);const f=oxe(s);let d=null;return i?s.length===0?d=_.jsx(zl,{visible:!0}):d=f&&a?_.jsx(dTe.Provider,{value:a,children:_.jsx(fut,{store:a.store,children:f})}):_.jsx(ob,{}):d=_.jsx(ob,{}),d}var Yhe={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JPe=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},$Ot=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ZPe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(JPe(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):$Ot(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new MOt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};let MOt=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};const LOt=function(e){const t=JPe(e);return ZPe.encodeByteArray(t,!0)},v3=function(e){return LOt(e).replace(/\./g,"")},eOe=function(e){try{return ZPe.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FOt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jOt=()=>FOt().__FIREBASE_DEFAULTS__,BOt=()=>{if(typeof process>"u"||typeof Yhe>"u")return;const e=Yhe.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},UOt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&eOe(e[1]);return t&&JSON.parse(t)},o4=()=>{try{return jOt()||BOt()||UOt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},tOe=e=>{var t,n;return(n=(t=o4())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},zOt=e=>{const t=tOe(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},nOe=()=>{var e;return(e=o4())===null||e===void 0?void 0:e.config},rOe=e=>{var t;return(t=o4())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let VOt=class{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HOt(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",i=e.iat||0,s=e.sub||e.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},e);return[v3(JSON.stringify(n)),v3(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sa(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function qOt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Sa())}function WOt(){var e;const t=(e=o4())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function GOt(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function YOt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function KOt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function XOt(){const e=Sa();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function QOt(){return!WOt()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function JOt(){try{return typeof indexedDB=="object"}catch{return!1}}function ZOt(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;t(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eDt="FirebaseError";let iv=class iOe extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=eDt,Object.setPrototypeOf(this,iOe.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dR.prototype.create)}},dR=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?tDt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new iv(i,a,r)}};function tDt(e,t){return e.replace(nDt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const nDt=/\{\$([^}]+)}/g;function rDt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function DI(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Khe(s)&&Khe(o)){if(!DI(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Khe(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function iDt(e,t){const n=new sDt(e,t);return n.subscribe.bind(n)}let sDt=class{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");oDt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=p9),i.error===void 0&&(i.error=p9),i.complete===void 0&&(i.complete=p9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}};function oDt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function p9(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yi(e){return e&&e._delegate?e._delegate:e}let yy=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aDt{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new VOt;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),i=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(lDt(t))try{this.getOrInitializeService({instanceIdentifier:Jv})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(t=Jv){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Jv){return this.instances.has(t)}getOptions(t=Jv){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(t,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(t),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&t(o,i),()=>{s.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:uDt(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Jv){return this.component?this.component.multipleInstances?t:Jv:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function uDt(e){return e===Jv?void 0:e}function lDt(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cDt{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new aDt(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Vn;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Vn||(Vn={}));const fDt={debug:Vn.DEBUG,verbose:Vn.VERBOSE,info:Vn.INFO,warn:Vn.WARN,error:Vn.ERROR,silent:Vn.SILENT},dDt=Vn.INFO,hDt={[Vn.DEBUG]:"log",[Vn.VERBOSE]:"log",[Vn.INFO]:"info",[Vn.WARN]:"warn",[Vn.ERROR]:"error"},pDt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=hDt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let RZ=class{constructor(t){this.name=t,this._logLevel=dDt,this._logHandler=pDt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Vn))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?fDt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Vn.DEBUG,...t),this._logHandler(this,Vn.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Vn.VERBOSE,...t),this._logHandler(this,Vn.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Vn.INFO,...t),this._logHandler(this,Vn.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Vn.WARN,...t),this._logHandler(this,Vn.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Vn.ERROR,...t),this._logHandler(this,Vn.ERROR,...t)}};const mDt=(e,t)=>t.some(n=>e instanceof n);let Xhe,Qhe;function gDt(){return Xhe||(Xhe=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yDt(){return Qhe||(Qhe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sOe=new WeakMap,_H=new WeakMap,oOe=new WeakMap,m9=new WeakMap,NZ=new WeakMap;function vDt(e){const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("success",s),e.removeEventListener("error",o)},s=()=>{n(L0(e.result)),i()},o=()=>{r(e.error),i()};e.addEventListener("success",s),e.addEventListener("error",o)});return t.then(n=>{n instanceof IDBCursor&&sOe.set(n,e)}).catch(()=>{}),NZ.set(t,e),t}function bDt(e){if(_H.has(e))return;const t=new Promise((n,r)=>{const i=()=>{e.removeEventListener("complete",s),e.removeEventListener("error",o),e.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(e.error||new DOMException("AbortError","AbortError")),i()};e.addEventListener("complete",s),e.addEventListener("error",o),e.addEventListener("abort",o)});_H.set(e,t)}let wH={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return _H.get(e);if(t==="objectStoreNames")return e.objectStoreNames||oOe.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return L0(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function _Dt(e){wH=e(wH)}function wDt(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(g9(this),t,...n);return oOe.set(r,t.sort?t.sort():[t]),L0(r)}:yDt().includes(e)?function(...t){return e.apply(g9(this),t),L0(sOe.get(this))}:function(...t){return L0(e.apply(g9(this),t))}}function EDt(e){return typeof e=="function"?wDt(e):(e instanceof IDBTransaction&&bDt(e),mDt(e,gDt())?new Proxy(e,wH):e)}function L0(e){if(e instanceof IDBRequest)return vDt(e);if(m9.has(e))return m9.get(e);const t=EDt(e);return t!==e&&(m9.set(e,t),NZ.set(t,e)),t}const g9=e=>NZ.get(e);function xDt(e,t,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(e,t),a=L0(o);return r&&o.addEventListener("upgradeneeded",u=>{r(L0(o.result),u.oldVersion,u.newVersion,L0(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",l=>i(l.oldVersion,l.newVersion,l))}).catch(()=>{}),a}const SDt=["get","getKey","getAll","getAllKeys","count"],TDt=["put","add","delete","clear"],y9=new Map;function Jhe(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(y9.get(t))return y9.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=TDt.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||SDt.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let l=u.store;return r&&(l=l.index(a.shift())),(await Promise.all([l[n](...a),i&&u.done]))[0]};return y9.set(t,s),s}_Dt(e=>({...e,get:(t,n,r)=>Jhe(t,n)||e.get(t,n,r),has:(t,n)=>!!Jhe(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ADt{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(CDt(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function CDt(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const EH="@firebase/app",Zhe="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=new RZ("@firebase/app"),IDt="@firebase/app-compat",kDt="@firebase/analytics-compat",RDt="@firebase/analytics",NDt="@firebase/app-check-compat",PDt="@firebase/app-check",ODt="@firebase/auth",DDt="@firebase/auth-compat",$Dt="@firebase/database",MDt="@firebase/data-connect",LDt="@firebase/database-compat",FDt="@firebase/functions",jDt="@firebase/functions-compat",BDt="@firebase/installations",UDt="@firebase/installations-compat",zDt="@firebase/messaging",VDt="@firebase/messaging-compat",HDt="@firebase/performance",qDt="@firebase/performance-compat",WDt="@firebase/remote-config",GDt="@firebase/remote-config-compat",YDt="@firebase/storage",KDt="@firebase/storage-compat",XDt="@firebase/firestore",QDt="@firebase/vertexai",JDt="@firebase/firestore-compat",ZDt="firebase",e$t="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xH="[DEFAULT]",t$t={[EH]:"fire-core",[IDt]:"fire-core-compat",[RDt]:"fire-analytics",[kDt]:"fire-analytics-compat",[PDt]:"fire-app-check",[NDt]:"fire-app-check-compat",[ODt]:"fire-auth",[DDt]:"fire-auth-compat",[$Dt]:"fire-rtdb",[MDt]:"fire-data-connect",[LDt]:"fire-rtdb-compat",[FDt]:"fire-fn",[jDt]:"fire-fn-compat",[BDt]:"fire-iid",[UDt]:"fire-iid-compat",[zDt]:"fire-fcm",[VDt]:"fire-fcm-compat",[HDt]:"fire-perf",[qDt]:"fire-perf-compat",[WDt]:"fire-rc",[GDt]:"fire-rc-compat",[YDt]:"fire-gcs",[KDt]:"fire-gcs-compat",[XDt]:"fire-fst",[JDt]:"fire-fst-compat",[QDt]:"fire-vertex","fire-js":"fire-js",[ZDt]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b3=new Map,n$t=new Map,SH=new Map;function epe(e,t){try{e.container.addComponent(t)}catch(n){zm.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function td(e){const t=e.name;if(SH.has(t))return zm.debug(`There were multiple attempts to register component ${t}.`),!1;SH.set(t,e);for(const n of b3.values())epe(n,e);for(const n of n$t.values())epe(n,e);return!0}function sv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function uo(e){return e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r$t={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},F0=new dR("app","Firebase",r$t);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i$t{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new yy("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw F0.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rf=e$t;function aOe(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:xH,automaticDataCollectionEnabled:!1},t),i=r.name;if(typeof i!="string"||!i)throw F0.create("bad-app-name",{appName:String(i)});if(n||(n=nOe()),!n)throw F0.create("no-options");const s=b3.get(i);if(s){if(DI(n,s.options)&&DI(r,s.config))return s;throw F0.create("duplicate-app",{appName:i})}const o=new cDt(i);for(const u of SH.values())o.addComponent(u);const a=new i$t(n,r,o);return b3.set(i,a),a}function a4(e=xH){const t=b3.get(e);if(!t&&e===xH&&nOe())return aOe();if(!t)throw F0.create("no-app",{appName:e});return t}function Ml(e,t,n){var r;let i=(r=t$t[e])!==null&&r!==void 0?r:e;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=t.match(/\s|\//);if(s||o){const a=[`Unable to register library "${i}" with version "${t}":`];s&&a.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${t}" contains illegal characters (whitespace or "/")`),zm.warn(a.join(" "));return}td(new yy(`${i}-version`,()=>({library:i,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s$t="firebase-heartbeat-database",o$t=1,$I="firebase-heartbeat-store";let v9=null;function uOe(){return v9||(v9=xDt(s$t,o$t,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore($I)}catch(n){console.warn(n)}}}}).catch(e=>{throw F0.create("idb-open",{originalErrorMessage:e.message})})),v9}async function a$t(e){try{const n=(await uOe()).transaction($I),r=await n.objectStore($I).get(lOe(e));return await n.done,r}catch(t){if(t instanceof iv)zm.warn(t.message);else{const n=F0.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});zm.warn(n.message)}}}async function tpe(e,t){try{const r=(await uOe()).transaction($I,"readwrite");await r.objectStore($I).put(t,lOe(e)),await r.done}catch(n){if(n instanceof iv)zm.warn(n.message);else{const r=F0.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});zm.warn(r.message)}}}function lOe(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$t=1024,l$t=30*24*60*60*1e3;class c$t{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new d$t(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=npe();return((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=l$t}),this._storage.overwrite(this._heartbeatsCache))}catch(r){zm.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=npe(),{heartbeatsToSend:r,unsentEntries:i}=f$t(this._heartbeatsCache.heartbeats),s=v3(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return zm.warn(n),""}}}function npe(){return new Date().toISOString().substring(0,10)}function f$t(e,t=u$t){const n=[];let r=e.slice();for(const i of e){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rpe(n)>t){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rpe(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class d$t{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return JOt()?ZOt().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await a$t(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tpe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return tpe(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...t.heartbeats]})}else return}}function rpe(e){return v3(JSON.stringify({version:2,heartbeats:e})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function h$t(e){td(new yy("platform-logger",t=>new ADt(t),"PRIVATE")),td(new yy("heartbeat",t=>new c$t(t),"PRIVATE")),Ml(EH,Zhe,e),Ml(EH,Zhe,"esm2017"),Ml("fire-js","")}h$t("");function cOe(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const p$t=cOe,fOe=new dR("auth","Firebase",cOe());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _3=new RZ("@firebase/auth");function m$t(e,...t){_3.logLevel<=Vn.WARN&&_3.warn(`Auth (${rf}): ${e}`,...t)}function oD(e,...t){_3.logLevel<=Vn.ERROR&&_3.error(`Auth (${rf}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vm(e,...t){throw PZ(e,...t)}function _h(e,...t){return PZ(e,...t)}function dOe(e,t,n){const r=Object.assign(Object.assign({},p$t()),{[t]:n});return new dR("auth","Firebase",r).create(t,{appName:e.name})}function z1(e){return dOe(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function PZ(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return fOe.create(e,...t)}function an(e,t,...n){if(!e)throw PZ(t,...n)}function em(e){const t="INTERNAL ASSERTION FAILED: "+e;throw oD(t),new Error(t)}function Hm(e,t){e||em(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function g$t(){return ipe()==="http:"||ipe()==="https:"}function ipe(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y$t(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(g$t()||YOt()||"connection"in navigator)?navigator.onLine:!0}function v$t(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let pR=class{constructor(t,n){this.shortDelay=t,this.longDelay=n,Hm(n>t,"Short delay should be less than long delay!"),this.isMobile=qOt()||KOt()}get(){return y$t()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OZ(e,t){Hm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let hOe=class{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;em("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;em("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;em("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b$t={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _$t=new pR(3e4,6e4);function DZ(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function ZS(e,t,n,r,i={}){return pOe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=hR(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:u},s);return GOt()||(l.referrerPolicy="no-referrer"),hOe.fetch()(mOe(e,e.config.apiHost,n,a),l)})}async function pOe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},b$t),t);try{const i=new E$t(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw PP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw PP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw PP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw PP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw dOe(e,c,l);Vm(e,c)}}catch(i){if(i instanceof iv)throw i;Vm(e,"network-request-failed",{message:String(i)})}}async function w$t(e,t,n,r,i={}){const s=await ZS(e,t,n,r,i);return"mfaPendingCredential"in s&&Vm(e,"multi-factor-auth-required",{_serverResponse:s}),s}function mOe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?OZ(e.config,i):`${e.config.apiScheme}://${i}`}let E$t=class{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(_h(this.auth,"network-request-failed")),_$t.get())})}};function PP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=_h(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function x$t(e,t){return ZS(e,"POST","/v1/accounts:delete",t)}async function gOe(e,t){return ZS(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function c2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function S$t(e,t=!1){const n=yi(e),r=await n.getIdToken(t),i=$Z(r);an(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:c2(b9(i.auth_time)),issuedAtTime:c2(b9(i.iat)),expirationTime:c2(b9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function b9(e){return Number(e)*1e3}function $Z(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return oD("JWT malformed, contained fewer than 3 sections"),null;try{const i=eOe(n);return i?JSON.parse(i):(oD("Failed to decode base64 JWT payload"),null)}catch(i){return oD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function spe(e){const t=$Z(e);return an(t,"internal-error"),an(typeof t.exp<"u","internal-error"),an(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof iv&&T$t(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function T$t({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A$t=class{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let AH=class{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=c2(this.lastLoginAt),this.creationTime=c2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function w3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await MI(e,gOe(n,{idToken:r}));an(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?yOe(s.providerUserInfo):[],a=I$t(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new AH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function C$t(e){const t=yi(e);await w3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function I$t(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function yOe(e){return e.map(t=>{var{providerId:n}=t,r=By(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function k$t(e,t){const n=await pOe(e,{},async()=>{const r=hR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=mOe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hOe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function R$t(e,t){return ZS(e,"POST","/v2/accounts:revokeToken",DZ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let _9=class CH{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){an(t.idToken,"internal-error"),an(typeof t.idToken<"u","internal-error"),an(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):spe(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){an(t.length!==0,"internal-error");const n=spe(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(an(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await k$t(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new CH;return r&&(an(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(an(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(an(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new CH,this.toJSON())}_performRefresh(){return em("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(e,t){an(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}let E3=class sC{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=By(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new A$t(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new AH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await MI(this,this.stsTokenManager.getToken(this.auth,t));return an(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return S$t(this,t)}reload(){return C$t(this)}_assign(t){this!==t&&(an(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new sC(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){an(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await w3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(uo(this.auth.app))return Promise.reject(z1(this.auth));const t=await this.getIdToken();return await MI(this,x$t(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:S}=n;an(b&&S,t,"internal-error");const A=_9.fromJSON(this.name,S);an(typeof b=="string",t,"internal-error"),Rg(f,t.name),Rg(d,t.name),an(typeof w=="boolean",t,"internal-error"),an(typeof E=="boolean",t,"internal-error"),Rg(h,t.name),Rg(p,t.name),Rg(m,t.name),Rg(g,t.name),Rg(y,t.name),Rg(v,t.name);const C=new sC({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(C.providerData=T.map(k=>Object.assign({},k))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new _9;i.updateFromServerResponse(n);const s=new sC({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await w3(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];an(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?yOe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new _9;a.updateFromIdToken(r);const u=new sC({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new AH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ope=new Map;function tm(e){Hm(e instanceof Function,"Expected a class definition");let t=ope.get(e);return t?(Hm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,ope.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vOe=class{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}};vOe.type="NONE";const ape=vOe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aD(e,t,n){return`firebase:${e}:${t}:${n}`}let upe=class uD{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=aD(this.userKey,i.apiKey,s),this.fullPersistenceKey=aD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?E3._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new uD(tm(ape),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||tm(ape);const o=aD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=E3._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new uD(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new uD(s,t,r))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lpe(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(EOe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(bOe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(SOe(t))return"Blackberry";if(TOe(t))return"Webos";if(_Oe(t))return"Safari";if((t.includes("chrome/")||wOe(t))&&!t.includes("edge/"))return"Chrome";if(xOe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function bOe(e=Sa()){return/firefox\//i.test(e)}function _Oe(e=Sa()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function wOe(e=Sa()){return/crios\//i.test(e)}function EOe(e=Sa()){return/iemobile/i.test(e)}function xOe(e=Sa()){return/android/i.test(e)}function SOe(e=Sa()){return/blackberry/i.test(e)}function TOe(e=Sa()){return/webos/i.test(e)}function MZ(e=Sa()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function N$t(e=Sa()){var t;return MZ(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function P$t(){return XOt()&&document.documentMode===10}function AOe(e=Sa()){return MZ(e)||xOe(e)||TOe(e)||SOe(e)||/windows phone/i.test(e)||EOe(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function COe(e,t=[]){let n;switch(e){case"Browser":n=lpe(Sa());break;case"Worker":n=`${lpe(Sa())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${rf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let O$t=class{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}};/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function D$t(e,t={}){return ZS(e,"GET","/v2/passwordPolicy",DZ(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $$t=6;let M$t=class{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:$$t,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let L$t=class{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new cpe(this),this.idTokenSubscription=new cpe(this),this.beforeStateQueue=new O$t(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=fOe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=tm(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await upe.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await gOe(this,{idToken:t}),r=await E3._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(uo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return an(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await w3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=v$t()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(uo(this.app))return Promise.reject(z1(this));const n=t?yi(t):null;return n&&an(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&an(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return uo(this.app)?Promise.reject(z1(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return uo(this.app)?Promise.reject(z1(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(tm(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await D$t(this),n=new M$t(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new dR("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await R$t(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&tm(t)||this._popupRedirectResolver;an(n,this,"argument-error"),this.redirectPersistenceManager=await upe.create(this,[tm(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(an(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return an(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=COe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&m$t(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}};function LZ(e){return yi(e)}let cpe=class{constructor(t){this.auth=t,this.observer=null,this.addObserver=iDt(n=>this.observer=n)}get next(){return an(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FZ={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function F$t(e){FZ=e}function j$t(e){return FZ.loadJS(e)}function B$t(){return FZ.gapiScript}function U$t(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function z$t(e,t){const n=sv(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(DI(s,t??{}))return i;Vm(i,"already-initialized")}return n.initialize({options:t})}function V$t(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(tm);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function H$t(e,t,n){const r=LZ(e);an(r._canInitEmulator,r,"emulator-config-failed"),an(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=IOe(t),{host:o,port:a}=q$t(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),W$t()}function IOe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function q$t(e){const t=IOe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:fpe(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:fpe(o)}}}function fpe(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function W$t(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let kOe=class{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return em("not implemented")}_getIdTokenResponse(t){return em("not implemented")}_linkToIdToken(t,n){return em("not implemented")}_getReauthenticationResolver(t){return em("not implemented")}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kE(e,t){return w$t(e,"POST","/v1/accounts:signInWithIdp",DZ(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G$t="http://localhost";let u4=class IH extends kOe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new IH(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Vm("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=By(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new IH(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return kE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,kE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,kE(t,n)}buildRequest(){const t={requestUri:G$t,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=hR(n)}return t}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ROe=class{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let mR=class extends ROe{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let NOe=class bw extends mR{constructor(){super("facebook.com")}static credential(t){return u4._fromParams({providerId:bw.PROVIDER_ID,signInMethod:bw.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return bw.credentialFromTaggedObject(t)}static credentialFromError(t){return bw.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return bw.credential(t.oauthAccessToken)}catch{return null}}};NOe.FACEBOOK_SIGN_IN_METHOD="facebook.com";NOe.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let POe=class _w extends mR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return u4._fromParams({providerId:_w.PROVIDER_ID,signInMethod:_w.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return _w.credentialFromTaggedObject(t)}static credentialFromError(t){return _w.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return _w.credential(n,r)}catch{return null}}};POe.GOOGLE_SIGN_IN_METHOD="google.com";POe.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let OOe=class ww extends mR{constructor(){super("github.com")}static credential(t){return u4._fromParams({providerId:ww.PROVIDER_ID,signInMethod:ww.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return ww.credentialFromTaggedObject(t)}static credentialFromError(t){return ww.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return ww.credential(t.oauthAccessToken)}catch{return null}}};OOe.GITHUB_SIGN_IN_METHOD="github.com";OOe.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let DOe=class Ew extends mR{constructor(){super("twitter.com")}static credential(t,n){return u4._fromParams({providerId:Ew.PROVIDER_ID,signInMethod:Ew.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return Ew.credentialFromTaggedObject(t)}static credentialFromError(t){return Ew.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return Ew.credential(n,r)}catch{return null}}};DOe.TWITTER_SIGN_IN_METHOD="twitter.com";DOe.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jZ=class kH{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await E3._fromIdTokenResponse(t,r,i),o=dpe(r);return new kH({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=dpe(r);return new kH({user:t,providerId:i,_tokenResponse:r,operationType:n})}};function dpe(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Y$t=class RH extends iv{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,RH.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new RH(t,n,r,i)}};function $Oe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Y$t._fromErrorAndOperation(e,s,t,r):s})}async function K$t(e,t,n=!1){const r=await MI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return jZ._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function X$t(e,t,n=!1){const{auth:r}=e;if(uo(r.app))return Promise.reject(z1(r));const i="reauthenticate";try{const s=await MI(e,$Oe(r,i,t,e),n);an(s.idToken,r,"internal-error");const o=$Z(s.idToken);an(o,r,"internal-error");const{sub:a}=o;return an(e.uid===a,r,"user-mismatch"),jZ._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Vm(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q$t(e,t,n=!1){if(uo(e.app))return Promise.reject(z1(e));const r="signIn",i=await $Oe(e,r,t),s=await jZ._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function J$t(e,t,n,r){return yi(e).onIdTokenChanged(t,n,r)}function Z$t(e,t,n){return yi(e).beforeAuthStateChanged(t,n)}function eMt(e,t,n,r){return yi(e).onAuthStateChanged(t,n,r)}function tMt(e){return yi(e).signOut()}const x3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let MOe=class{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(x3,"1"),this.storage.removeItem(x3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nMt=1e3,rMt=10;let LOe=class extends MOe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=AOe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);P$t()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,rMt):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},nMt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}};LOe.type="LOCAL";const iMt=LOe;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let FOe=class extends MOe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}};FOe.type="SESSION";const jOe=FOe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sMt(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let BOe=class UOe{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new UOe(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await sMt(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}};BOe.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BZ(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let oMt=class{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=BZ("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wh(){return window}function aMt(e){wh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zOe(){return typeof wh().WorkerGlobalScope<"u"&&typeof wh().importScripts=="function"}async function uMt(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function lMt(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function cMt(){return zOe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VOe="firebaseLocalStorageDb",fMt=1,S3="firebaseLocalStorage",HOe="fbase_key";let gR=class{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}};function l4(e,t){return e.transaction([S3],t?"readwrite":"readonly").objectStore(S3)}function dMt(){const e=indexedDB.deleteDatabase(VOe);return new gR(e).toPromise()}function NH(){const e=indexedDB.open(VOe,fMt);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(S3,{keyPath:HOe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(S3)?t(r):(r.close(),await dMt(),t(await NH()))})})}async function hpe(e,t,n){const r=l4(e,!0).put({[HOe]:t,value:n});return new gR(r).toPromise()}async function hMt(e,t){const n=l4(e,!1).get(t),r=await new gR(n).toPromise();return r===void 0?null:r.value}function ppe(e,t){const n=l4(e,!0).delete(t);return new gR(n).toPromise()}const pMt=800,mMt=3;let qOe=class{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await NH(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>mMt)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return zOe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=BOe._getInstance(cMt()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await uMt(),!this.activeServiceWorker)return;this.sender=new oMt(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||lMt()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await NH();return await hpe(t,x3,"1"),await ppe(t,x3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>hpe(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>hMt(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ppe(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=l4(i,!1).getAll();return new gR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),pMt)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}};qOe.type="LOCAL";const gMt=qOe;new pR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yMt(e,t){return t?tm(t):(an(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let UZ=class extends kOe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return kE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return kE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return kE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}};function vMt(e){return Q$t(e.auth,new UZ(e),e.bypassAuthState)}function bMt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),X$t(n,new UZ(e),e.bypassAuthState)}async function _Mt(e){const{auth:t,user:n}=e;return an(n,t,"internal-error"),K$t(n,new UZ(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let WOe=class{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return vMt;case"linkViaPopup":case"linkViaRedirect":return _Mt;case"reauthViaPopup":case"reauthViaRedirect":return bMt;default:Vm(this.auth,"internal-error")}}resolve(t){Hm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Hm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wMt=new pR(2e3,1e4);let EMt=class oC extends WOe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,oC.currentPopupAction&&oC.currentPopupAction.cancel(),oC.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return an(t,this.auth,"internal-error"),t}async onExecution(){Hm(this.filter.length===1,"Popup operations only handle one event");const t=BZ();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(_h(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(_h(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,oC.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(_h(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,wMt.get())};t()}};EMt.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xMt="pendingRedirect",lD=new Map;let SMt=class extends WOe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=lD.get(this.auth._key());if(!t){try{const r=await TMt(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}lD.set(this.auth._key(),t)}return this.bypassAuthState||lD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}};async function TMt(e,t){const n=IMt(t),r=CMt(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function AMt(e,t){lD.set(e._key(),t)}function CMt(e){return tm(e._redirectPersistence)}function IMt(e){return aD(xMt,e.config.apiKey,e.name)}async function kMt(e,t,n=!1){if(uo(e.app))return Promise.reject(z1(e));const r=LZ(e),i=yMt(r,t),o=await new SMt(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RMt=10*60*1e3;let NMt=class{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!PMt(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!GOe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(_h(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=RMt&&this.cachedEventUids.clear(),this.cachedEventUids.has(mpe(t))}saveEventToCache(t){this.cachedEventUids.add(mpe(t)),this.lastProcessedEventTime=Date.now()}};function mpe(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function GOe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function PMt(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return GOe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OMt(e,t={}){return ZS(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DMt=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,$Mt=/^https?/;async function MMt(e){if(e.config.emulator)return;const{authorizedDomains:t}=await OMt(e);for(const n of t)try{if(LMt(n))return}catch{}Vm(e,"unauthorized-domain")}function LMt(e){const t=TH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!$Mt.test(n))return!1;if(DMt.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const FMt=new pR(3e4,6e4);function gpe(){const e=wh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function jMt(e){return new Promise((t,n)=>{var r,i,s;function o(){gpe(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{gpe(),n(_h(e,"network-request-failed"))},timeout:FMt.get()})}if(!((i=(r=wh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=wh().gapi)===null||s===void 0)&&s.load)o();else{const a=U$t("iframefcb");return wh()[a]=()=>{gapi.load?o():n(_h(e,"network-request-failed"))},j$t(`${B$t()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw cD=null,t})}let cD=null;function BMt(e){return cD=cD||jMt(e),cD}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UMt=new pR(5e3,15e3),zMt="__/auth/iframe",VMt="emulator/auth/iframe",HMt={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},qMt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function WMt(e){const t=e.config;an(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?OZ(t,VMt):`https://${e.config.authDomain}/${zMt}`,r={apiKey:t.apiKey,appName:e.name,v:rf},i=qMt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${hR(r).slice(1)}`}async function GMt(e){const t=await BMt(e),n=wh().gapi;return an(n,e,"internal-error"),t.open({where:document.body,url:WMt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:HMt,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=_h(e,"network-request-failed"),a=wh().setTimeout(()=>{s(o)},UMt.get());function u(){wh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YMt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},KMt=500,XMt=600,QMt="_blank",JMt="http://localhost";let ype=class{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}};function ZMt(e,t,n,r=KMt,i=XMt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},YMt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Sa().toLowerCase();n&&(a=wOe(l)?QMt:n),bOe(l)&&(t=t||JMt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(N$t(l)&&a!=="_self")return e3t(t||"",a),new ype(null);const f=window.open(t||"",a,c);an(f,e,"popup-blocked");try{f.focus()}catch{}return new ype(f)}function e3t(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t3t="__/auth/handler",n3t="emulator/auth/handler",r3t=encodeURIComponent("fac");async function vpe(e,t,n,r,i,s){an(e.config.authDomain,e,"auth-domain-config-required"),an(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rf,eventId:i};if(t instanceof ROe){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",rDt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof mR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${r3t}=${encodeURIComponent(u)}`:"";return`${i3t(e)}?${hR(a).slice(1)}${l}`}function i3t({config:e}){return e.emulator?OZ(e,n3t):`https://${e.authDomain}/${t3t}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const w9="webStorageSupport";let s3t=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jOe,this._completeRedirectFn=kMt,this._overrideRedirectResult=AMt}async _openPopup(t,n,r,i){var s;Hm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await vpe(t,n,r,TH(),i);return ZMt(t,o,BZ())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await vpe(t,n,r,TH(),i);return aMt(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Hm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await GMt(t),r=new NMt(t);return n.register("authEvent",i=>(an(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send(w9,{type:w9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[w9];o!==void 0&&n(!!o),Vm(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=MMt(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return AOe()||_Oe()||MZ()}};const o3t=s3t;var bpe="@firebase/auth",_pe="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let a3t=class{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){an(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u3t(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function l3t(e){td(new yy("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;an(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:COe(e)},l=new L$t(r,i,s,u);return V$t(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),td(new yy("auth-internal",t=>{const n=LZ(t.getProvider("auth").getImmediate());return(r=>new a3t(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ml(bpe,_pe,u3t(e)),Ml(bpe,_pe,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c3t=5*60,f3t=rOe("authIdTokenMaxAge")||c3t;let wpe=null;const d3t=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>f3t)return;const i=n==null?void 0:n.token;wpe!==i&&(wpe=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function Epe(e=a4()){const t=sv(e,"auth");if(t.isInitialized())return t.getImmediate();const n=z$t(e,{popupRedirectResolver:o3t,persistence:[gMt,iMt,jOe]}),r=rOe("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=d3t(s.toString());Z$t(n,o,()=>o(n.currentUser)),J$t(n,a=>o(a))}}const i=tOe("auth");return i&&H$t(n,`http://${i}`),n}function h3t(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}F$t({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=_h("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",h3t().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});l3t("Browser");var p3t="firebase",m3t="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ml(p3t,m3t,"app");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YOe="firebasestorage.googleapis.com",KOe="storageBucket",g3t=2*60*1e3,y3t=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns extends iv{constructor(t,n,r=0){super(E9(t),`Firebase Storage: ${n} (${E9(t)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ns.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return E9(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ts;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ts||(ts={}));function E9(e){return"storage/"+e}function zZ(){const e="An unknown error occurred, please check the error payload for server response.";return new ns(ts.UNKNOWN,e)}function v3t(e){return new ns(ts.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function b3t(e){return new ns(ts.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function _3t(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ns(ts.UNAUTHENTICATED,e)}function w3t(){return new ns(ts.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function E3t(e){return new ns(ts.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function x3t(){return new ns(ts.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function S3t(){return new ns(ts.CANCELED,"User canceled the upload/download.")}function T3t(e){return new ns(ts.INVALID_URL,"Invalid URL '"+e+"'.")}function A3t(e){return new ns(ts.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function C3t(){return new ns(ts.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+KOe+"' property when initializing the app?")}function I3t(){return new ns(ts.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function k3t(){return new ns(ts.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function R3t(e){return new ns(ts.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function PH(e){return new ns(ts.INVALID_ARGUMENT,e)}function XOe(){return new ns(ts.APP_DELETED,"The Firebase app was deleted.")}function N3t(e){return new ns(ts.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function f2(e,t){return new ns(ts.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function uA(e){throw new ns(ts.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let r;try{r=Ka.makeFromUrl(t,n)}catch{return new Ka(t,"")}if(r.path==="")return r;throw A3t(t)}static makeFromUrl(t,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function l(w){w.path_=decodeURIComponent(w.path)}const c="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),d="(/([^?#]*).*)?$",h=new RegExp(`^https?://${f}/${c}/b/${i}/o${d}`,"i"),p={bucket:1,path:3},m=n===YOe?"(?:storage.googleapis.com|storage.cloud.google.com)":n,g="([^?#]*)",y=new RegExp(`^https?://${m}/${i}/${g}`,"i"),b=[{regex:a,indices:u,postModify:s},{regex:h,indices:p,postModify:l},{regex:y,indices:{bucket:1,path:2},postModify:l}];for(let w=0;w<b.length;w++){const E=b[w],T=E.regex.exec(t);if(T){const S=T[E.indices.bucket];let A=T[E.indices.path];A||(A=""),r=new Ka(S,A),E.postModify(r);break}}if(r==null)throw T3t(t);return r}}class P3t{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function O3t(e,t,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let l=!1;function c(...g){l||(l=!0,t.apply(null,g))}function f(g){i=setTimeout(()=>{i=null,e(h,u())},g)}function d(){s&&clearTimeout(s)}function h(g,...y){if(l){d();return}if(g){d(),c.call(null,g,...y);return}if(u()||o){d(),c.call(null,g,...y);return}r<64&&(r*=2);let b;a===1?(a=2,b=0):b=(r+Math.random())*1e3,f(b)}let p=!1;function m(g){p||(p=!0,d(),!l&&(i!==null?(g||(a=2),clearTimeout(i),f(0)):g||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,m(!0)},n),m}function D3t(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $3t(e){return e!==void 0}function M3t(e){return typeof e=="object"&&!Array.isArray(e)}function VZ(e){return typeof e=="string"||e instanceof String}function xpe(e){return HZ()&&e instanceof Blob}function HZ(){return typeof Blob<"u"}function OH(e,t,n,r){if(r<t)throw PH(`Invalid value for '${e}'. Expected ${t} or greater.`);if(r>n)throw PH(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yR(e,t,n){let r=t;return n==null&&(r=`https://${t}`),`${n}://${r}/v0${e}`}function QOe(e){const t=encodeURIComponent;let n="?";for(const r in e)if(e.hasOwnProperty(r)){const i=t(r)+"="+t(e[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var V1;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(V1||(V1={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function L3t(e,t){const n=e>=500&&e<600,i=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F3t{constructor(t,n,r,i,s,o,a,u,l,c,f,d=!0){this.url_=t,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=l,this.progressCallback_=c,this.connectionFactory_=f,this.retry=d,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((h,p)=>{this.resolve_=h,this.reject_=p,this.start_()})}start_(){const t=(r,i)=>{if(i){r(!1,new OP(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,l=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,l)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===V1.NO_ERROR,u=s.getStatus();if(!a||L3t(u,this.additionalRetryCodes_)&&this.retry){const c=s.getErrorCode()===V1.ABORT;r(!1,new OP(!1,null,c));return}const l=this.successCodes_.indexOf(u)!==-1;r(!0,new OP(l,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());$3t(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=zZ();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?XOe():S3t();o(u)}else{const u=x3t();o(u)}};this.canceled_?n(!1,new OP(!1,null,!0)):this.backoffId_=O3t(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&D3t(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class OP{constructor(t,n,r){this.wasSuccessCode=t,this.connection=n,this.canceled=!!r}}function j3t(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function B3t(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t??"AppManager")}function U3t(e,t){t&&(e["X-Firebase-GMPID"]=t)}function z3t(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function V3t(e,t,n,r,i,s,o=!0){const a=QOe(e.urlParams),u=e.url+a,l=Object.assign({},e.headers);return U3t(l,t),j3t(l,n),B3t(l,s),z3t(l,r),new F3t(u,e.method,l,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,i,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H3t(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function q3t(...e){const t=H3t();if(t!==void 0){const n=new t;for(let r=0;r<e.length;r++)n.append(e[r]);return n.getBlob()}else{if(HZ())return new Blob(e);throw new ns(ts.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function W3t(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G3t(e){if(typeof atob>"u")throw R3t("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class x9{constructor(t,n){this.data=t,this.contentType=n||null}}function Y3t(e,t){switch(e){case uh.RAW:return new x9(JOe(t));case uh.BASE64:case uh.BASE64URL:return new x9(ZOe(e,t));case uh.DATA_URL:return new x9(X3t(t),Q3t(t))}throw zZ()}function JOe(e){const t=[];for(let n=0;n<e.length;n++){let r=e.charCodeAt(n);if(r<=127)t.push(r);else if(r<=2047)t.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=r,o=e.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,t.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?t.push(239,191,189):t.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(t)}function K3t(e){let t;try{t=decodeURIComponent(e)}catch{throw f2(uh.DATA_URL,"Malformed data URL.")}return JOe(t)}function ZOe(e,t){switch(e){case uh.BASE64:{const i=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(i||s)throw f2(e,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case uh.BASE64URL:{const i=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(i||s)throw f2(e,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=G3t(t)}catch(i){throw i.message.includes("polyfill")?i:f2(e,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class eDe{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw f2(uh.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=J3t(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=t.substring(t.indexOf(",")+1)}}function X3t(e){const t=new eDe(e);return t.base64?ZOe(uh.BASE64,t.rest):K3t(t.rest)}function Q3t(e){return new eDe(e).contentType}function J3t(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e0{constructor(t,n){let r=0,i="";xpe(t)?(this.data_=t,r=t.size,i=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),r=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),r=t.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(t,n){if(xpe(this.data_)){const r=this.data_,i=W3t(r,t,n);return i===null?null:new e0(i)}else{const r=new Uint8Array(this.data_.buffer,t,n-t);return new e0(r,!0)}}static getBlob(...t){if(HZ()){const n=t.map(r=>r instanceof e0?r.data_:r);return new e0(q3t.apply(null,n))}else{const n=t.map(o=>VZ(o)?Y3t(uh.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new e0(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qZ(e){let t;try{t=JSON.parse(e)}catch{return null}return M3t(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z3t(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function eLt(e,t){const n=t.split("/").filter(r=>r.length>0).join("/");return e.length===0?n:e+"/"+n}function tDe(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tLt(e,t){return t}class Ma{constructor(t,n,r,i){this.server=t,this.local=n||t,this.writable=!!r,this.xform=i||tLt}}let DP=null;function nLt(e){return!VZ(e)||e.length<2?e:tDe(e)}function nDe(){if(DP)return DP;const e=[];e.push(new Ma("bucket")),e.push(new Ma("generation")),e.push(new Ma("metageneration")),e.push(new Ma("name","fullPath",!0));function t(s,o){return nLt(o)}const n=new Ma("name");n.xform=t,e.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Ma("size");return i.xform=r,e.push(i),e.push(new Ma("timeCreated")),e.push(new Ma("updated")),e.push(new Ma("md5Hash",null,!0)),e.push(new Ma("cacheControl",null,!0)),e.push(new Ma("contentDisposition",null,!0)),e.push(new Ma("contentEncoding",null,!0)),e.push(new Ma("contentLanguage",null,!0)),e.push(new Ma("contentType",null,!0)),e.push(new Ma("metadata","customMetadata",!0)),DP=e,DP}function rLt(e,t){function n(){const r=e.bucket,i=e.fullPath,s=new Ka(r,i);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function iLt(e,t,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,t[o.server])}return rLt(r,e),r}function rDe(e,t,n){const r=qZ(t);return r===null?null:iLt(e,r,n)}function sLt(e,t,n,r){const i=qZ(t);if(i===null||!VZ(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(l=>{const c=e.bucket,f=e.fullPath,d="/b/"+o(c)+"/o/"+o(f),h=yR(d,n,r),p=QOe({alt:"media",token:l});return h+p})[0]}function oLt(e,t){const n={},r=t.length;for(let i=0;i<r;i++){const s=t[i];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Spe="prefixes",Tpe="items";function aLt(e,t,n){const r={prefixes:[],items:[],nextPageToken:n.nextPageToken};if(n[Spe])for(const i of n[Spe]){const s=i.replace(/\/$/,""),o=e._makeStorageReference(new Ka(t,s));r.prefixes.push(o)}if(n[Tpe])for(const i of n[Tpe]){const s=e._makeStorageReference(new Ka(t,i.name));r.items.push(s)}return r}function uLt(e,t,n){const r=qZ(n);return r===null?null:aLt(e,t,r)}class c4{constructor(t,n,r,i){this.url=t,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WZ(e){if(!e)throw zZ()}function lLt(e,t){function n(r,i){const s=rDe(e,i,t);return WZ(s!==null),s}return n}function cLt(e,t){function n(r,i){const s=uLt(e,t,i);return WZ(s!==null),s}return n}function fLt(e,t){function n(r,i){const s=rDe(e,i,t);return WZ(s!==null),sLt(s,i,e.host,e._protocol)}return n}function GZ(e){function t(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=w3t():i=_3t():n.getStatus()===402?i=b3t(e.bucket):n.getStatus()===403?i=E3t(e.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return t}function iDe(e){const t=GZ(e);function n(r,i){let s=t(r,i);return r.getStatus()===404&&(s=v3t(e.path)),s.serverResponse=i.serverResponse,s}return n}function dLt(e,t,n,r,i){const s={};t.isRoot?s.prefix="":s.prefix=t.path+"/",n.length>0&&(s.delimiter=n),r&&(s.pageToken=r),i&&(s.maxResults=i);const o=t.bucketOnlyServerUrl(),a=yR(o,e.host,e._protocol),u="GET",l=e.maxOperationRetryTime,c=new c4(a,u,cLt(e,t.bucket),l);return c.urlParams=s,c.errorHandler=GZ(t),c}function hLt(e,t,n){const r=t.fullServerUrl(),i=yR(r,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,a=new c4(i,s,fLt(e,n),o);return a.errorHandler=iDe(t),a}function pLt(e,t){const n=t.fullServerUrl(),r=yR(n,e.host,e._protocol),i="DELETE",s=e.maxOperationRetryTime;function o(u,l){}const a=new c4(r,i,o,s);return a.successCodes=[200,204],a.errorHandler=iDe(t),a}function mLt(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function gLt(e,t,n){const r=Object.assign({},n);return r.fullPath=e.path,r.size=t.size(),r.contentType||(r.contentType=mLt(null,t)),r}function yLt(e,t,n,r,i){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let b="";for(let w=0;w<2;w++)b=b+Math.random().toString().slice(2);return b}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const l=gLt(t,r,i),c=oLt(l,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+c+`\r
--`+u+`\r
Content-Type: `+l.contentType+`\r
\r
`,d=`\r
--`+u+"--",h=e0.getBlob(f,r,d);if(h===null)throw I3t();const p={name:l.fullPath},m=yR(s,e.host,e._protocol),g="POST",y=e.maxUploadRetryTime,v=new c4(m,g,lLt(e,n),y);return v.urlParams=p,v.headers=o,v.body=h.uploadData(),v.errorHandler=GZ(t),v}class vLt{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=V1.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=V1.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=V1.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,r,i){if(this.sent_)throw uA("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),i!==void 0)for(const s in i)i.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,i[s].toString());return r!==void 0?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw uA("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw uA("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw uA("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw uA("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class bLt extends vLt{initXhr(){this.xhr_.responseType="text"}}function f4(){return new bLt}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _b{constructor(t,n){this._service=t,n instanceof Ka?this._location=n:this._location=Ka.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new _b(t,n)}get root(){const t=new Ka(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return tDe(this._location.path)}get storage(){return this._service}get parent(){const t=Z3t(this._location.path);if(t===null)return null;const n=new Ka(this._location.bucket,t);return new _b(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw N3t(t)}}function _Lt(e,t,n){e._throwIfRoot("uploadBytes");const r=yLt(e.storage,e._location,nDe(),new e0(t,!0),n);return e.storage.makeRequestWithTokens(r,f4).then(i=>({metadata:i,ref:e}))}function wLt(e){const t={prefixes:[],items:[]};return sDe(e,t).then(()=>t)}async function sDe(e,t,n){const i=await ELt(e,{pageToken:n});t.prefixes.push(...i.prefixes),t.items.push(...i.items),i.nextPageToken!=null&&await sDe(e,t,i.nextPageToken)}function ELt(e,t){t!=null&&typeof t.maxResults=="number"&&OH("options.maxResults",1,1e3,t.maxResults);const n=t||{},r=dLt(e.storage,e._location,"/",n.pageToken,n.maxResults);return e.storage.makeRequestWithTokens(r,f4)}function xLt(e){e._throwIfRoot("getDownloadURL");const t=hLt(e.storage,e._location,nDe());return e.storage.makeRequestWithTokens(t,f4).then(n=>{if(n===null)throw k3t();return n})}function SLt(e){e._throwIfRoot("deleteObject");const t=pLt(e.storage,e._location);return e.storage.makeRequestWithTokens(t,f4)}function TLt(e,t){const n=eLt(e._location.path,t),r=new Ka(e._location.bucket,n);return new _b(e.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ALt(e){return/^[A-Za-z]+:\/\//.test(e)}function CLt(e,t){return new _b(e,t)}function oDe(e,t){if(e instanceof YZ){const n=e;if(n._bucket==null)throw C3t();const r=new _b(n,n._bucket);return t!=null?oDe(r,t):r}else return t!==void 0?TLt(e,t):e}function ILt(e,t){if(t&&ALt(t)){if(e instanceof YZ)return CLt(e,t);throw PH("To use ref(service, url), the first argument must be a Storage instance.")}else return oDe(e,t)}function Ape(e,t){const n=t==null?void 0:t[KOe];return n==null?null:Ka.makeFromBucketSpec(n,e)}function kLt(e,t,n,r={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:i}=r;i&&(e._overrideAuthToken=typeof i=="string"?i:HOt(i,e.app.options.projectId))}class YZ{constructor(t,n,r,i,s){this.app=t,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._bucket=null,this._host=YOe,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=g3t,this._maxUploadRetryTime=y3t,this._requests=new Set,i!=null?this._bucket=Ka.makeFromBucketSpec(i,this._host):this._bucket=Ape(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ka.makeFromBucketSpec(this._url,t):this._bucket=Ape(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){OH("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){OH("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new _b(this,t)}_makeRequest(t,n,r,i,s=!0){if(this._deleted)return new P3t(XOe());{const o=V3t(t,this._appId,r,i,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,r,i).getPromise()}}const Cpe="@firebase/storage",Ipe="0.13.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aDe="storage";function S9(e,t,n){return e=yi(e),_Lt(e,t,n)}function lA(e){return e=yi(e),wLt(e)}function T9(e){return e=yi(e),xLt(e)}function kpe(e){return e=yi(e),SLt(e)}function fc(e,t){return e=yi(e),ILt(e,t)}function RLt(e=a4(),t){e=yi(e);const r=sv(e,aDe).getImmediate({identifier:t}),i=zOt("storage");return i&&NLt(r,...i),r}function NLt(e,t,n,r={}){kLt(e,t,n,r)}function PLt(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),r=e.getProvider("auth-internal"),i=e.getProvider("app-check-internal");return new YZ(n,r,i,t,rf)}function OLt(){td(new yy(aDe,PLt,"PUBLIC").setMultipleInstances(!0)),Ml(Cpe,Ipe,""),Ml(Cpe,Ipe,"esm2017")}OLt();var Rpe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var H1,uDe;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(S,A){function C(){}C.prototype=A.prototype,S.D=A.prototype,S.prototype=new C,S.prototype.constructor=S,S.C=function(k,N,D){for(var O=Array(arguments.length-2),$=2;$<arguments.length;$++)O[$-2]=arguments[$];return A.prototype[N].apply(k,O)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(S,A,C){C||(C=0);var k=Array(16);if(typeof A=="string")for(var N=0;16>N;++N)k[N]=A.charCodeAt(C++)|A.charCodeAt(C++)<<8|A.charCodeAt(C++)<<16|A.charCodeAt(C++)<<24;else for(N=0;16>N;++N)k[N]=A[C++]|A[C++]<<8|A[C++]<<16|A[C++]<<24;A=S.g[0],C=S.g[1],N=S.g[2];var D=S.g[3],O=A+(D^C&(N^D))+k[0]+3614090360&4294967295;A=C+(O<<7&4294967295|O>>>25),O=D+(N^A&(C^N))+k[1]+3905402710&4294967295,D=A+(O<<12&4294967295|O>>>20),O=N+(C^D&(A^C))+k[2]+606105819&4294967295,N=D+(O<<17&4294967295|O>>>15),O=C+(A^N&(D^A))+k[3]+3250441966&4294967295,C=N+(O<<22&4294967295|O>>>10),O=A+(D^C&(N^D))+k[4]+4118548399&4294967295,A=C+(O<<7&4294967295|O>>>25),O=D+(N^A&(C^N))+k[5]+1200080426&4294967295,D=A+(O<<12&4294967295|O>>>20),O=N+(C^D&(A^C))+k[6]+2821735955&4294967295,N=D+(O<<17&4294967295|O>>>15),O=C+(A^N&(D^A))+k[7]+4249261313&4294967295,C=N+(O<<22&4294967295|O>>>10),O=A+(D^C&(N^D))+k[8]+1770035416&4294967295,A=C+(O<<7&4294967295|O>>>25),O=D+(N^A&(C^N))+k[9]+2336552879&4294967295,D=A+(O<<12&4294967295|O>>>20),O=N+(C^D&(A^C))+k[10]+4294925233&4294967295,N=D+(O<<17&4294967295|O>>>15),O=C+(A^N&(D^A))+k[11]+2304563134&4294967295,C=N+(O<<22&4294967295|O>>>10),O=A+(D^C&(N^D))+k[12]+1804603682&4294967295,A=C+(O<<7&4294967295|O>>>25),O=D+(N^A&(C^N))+k[13]+4254626195&4294967295,D=A+(O<<12&4294967295|O>>>20),O=N+(C^D&(A^C))+k[14]+2792965006&4294967295,N=D+(O<<17&4294967295|O>>>15),O=C+(A^N&(D^A))+k[15]+1236535329&4294967295,C=N+(O<<22&4294967295|O>>>10),O=A+(N^D&(C^N))+k[1]+4129170786&4294967295,A=C+(O<<5&4294967295|O>>>27),O=D+(C^N&(A^C))+k[6]+3225465664&4294967295,D=A+(O<<9&4294967295|O>>>23),O=N+(A^C&(D^A))+k[11]+643717713&4294967295,N=D+(O<<14&4294967295|O>>>18),O=C+(D^A&(N^D))+k[0]+3921069994&4294967295,C=N+(O<<20&4294967295|O>>>12),O=A+(N^D&(C^N))+k[5]+3593408605&4294967295,A=C+(O<<5&4294967295|O>>>27),O=D+(C^N&(A^C))+k[10]+38016083&4294967295,D=A+(O<<9&4294967295|O>>>23),O=N+(A^C&(D^A))+k[15]+3634488961&4294967295,N=D+(O<<14&4294967295|O>>>18),O=C+(D^A&(N^D))+k[4]+3889429448&4294967295,C=N+(O<<20&4294967295|O>>>12),O=A+(N^D&(C^N))+k[9]+568446438&4294967295,A=C+(O<<5&4294967295|O>>>27),O=D+(C^N&(A^C))+k[14]+3275163606&4294967295,D=A+(O<<9&4294967295|O>>>23),O=N+(A^C&(D^A))+k[3]+4107603335&4294967295,N=D+(O<<14&4294967295|O>>>18),O=C+(D^A&(N^D))+k[8]+1163531501&4294967295,C=N+(O<<20&4294967295|O>>>12),O=A+(N^D&(C^N))+k[13]+2850285829&4294967295,A=C+(O<<5&4294967295|O>>>27),O=D+(C^N&(A^C))+k[2]+4243563512&4294967295,D=A+(O<<9&4294967295|O>>>23),O=N+(A^C&(D^A))+k[7]+1735328473&4294967295,N=D+(O<<14&4294967295|O>>>18),O=C+(D^A&(N^D))+k[12]+2368359562&4294967295,C=N+(O<<20&4294967295|O>>>12),O=A+(C^N^D)+k[5]+4294588738&4294967295,A=C+(O<<4&4294967295|O>>>28),O=D+(A^C^N)+k[8]+2272392833&4294967295,D=A+(O<<11&4294967295|O>>>21),O=N+(D^A^C)+k[11]+1839030562&4294967295,N=D+(O<<16&4294967295|O>>>16),O=C+(N^D^A)+k[14]+4259657740&4294967295,C=N+(O<<23&4294967295|O>>>9),O=A+(C^N^D)+k[1]+2763975236&4294967295,A=C+(O<<4&4294967295|O>>>28),O=D+(A^C^N)+k[4]+1272893353&4294967295,D=A+(O<<11&4294967295|O>>>21),O=N+(D^A^C)+k[7]+4139469664&4294967295,N=D+(O<<16&4294967295|O>>>16),O=C+(N^D^A)+k[10]+3200236656&4294967295,C=N+(O<<23&4294967295|O>>>9),O=A+(C^N^D)+k[13]+681279174&4294967295,A=C+(O<<4&4294967295|O>>>28),O=D+(A^C^N)+k[0]+3936430074&4294967295,D=A+(O<<11&4294967295|O>>>21),O=N+(D^A^C)+k[3]+3572445317&4294967295,N=D+(O<<16&4294967295|O>>>16),O=C+(N^D^A)+k[6]+76029189&4294967295,C=N+(O<<23&4294967295|O>>>9),O=A+(C^N^D)+k[9]+3654602809&4294967295,A=C+(O<<4&4294967295|O>>>28),O=D+(A^C^N)+k[12]+3873151461&4294967295,D=A+(O<<11&4294967295|O>>>21),O=N+(D^A^C)+k[15]+530742520&4294967295,N=D+(O<<16&4294967295|O>>>16),O=C+(N^D^A)+k[2]+3299628645&4294967295,C=N+(O<<23&4294967295|O>>>9),O=A+(N^(C|~D))+k[0]+4096336452&4294967295,A=C+(O<<6&4294967295|O>>>26),O=D+(C^(A|~N))+k[7]+1126891415&4294967295,D=A+(O<<10&4294967295|O>>>22),O=N+(A^(D|~C))+k[14]+2878612391&4294967295,N=D+(O<<15&4294967295|O>>>17),O=C+(D^(N|~A))+k[5]+4237533241&4294967295,C=N+(O<<21&4294967295|O>>>11),O=A+(N^(C|~D))+k[12]+1700485571&4294967295,A=C+(O<<6&4294967295|O>>>26),O=D+(C^(A|~N))+k[3]+2399980690&4294967295,D=A+(O<<10&4294967295|O>>>22),O=N+(A^(D|~C))+k[10]+4293915773&4294967295,N=D+(O<<15&4294967295|O>>>17),O=C+(D^(N|~A))+k[1]+2240044497&4294967295,C=N+(O<<21&4294967295|O>>>11),O=A+(N^(C|~D))+k[8]+1873313359&4294967295,A=C+(O<<6&4294967295|O>>>26),O=D+(C^(A|~N))+k[15]+4264355552&4294967295,D=A+(O<<10&4294967295|O>>>22),O=N+(A^(D|~C))+k[6]+2734768916&4294967295,N=D+(O<<15&4294967295|O>>>17),O=C+(D^(N|~A))+k[13]+1309151649&4294967295,C=N+(O<<21&4294967295|O>>>11),O=A+(N^(C|~D))+k[4]+4149444226&4294967295,A=C+(O<<6&4294967295|O>>>26),O=D+(C^(A|~N))+k[11]+3174756917&4294967295,D=A+(O<<10&4294967295|O>>>22),O=N+(A^(D|~C))+k[2]+718787259&4294967295,N=D+(O<<15&4294967295|O>>>17),O=C+(D^(N|~A))+k[9]+3951481745&4294967295,S.g[0]=S.g[0]+A&4294967295,S.g[1]=S.g[1]+(N+(O<<21&4294967295|O>>>11))&4294967295,S.g[2]=S.g[2]+N&4294967295,S.g[3]=S.g[3]+D&4294967295}r.prototype.u=function(S,A){A===void 0&&(A=S.length);for(var C=A-this.blockSize,k=this.B,N=this.h,D=0;D<A;){if(N==0)for(;D<=C;)i(this,S,D),D+=this.blockSize;if(typeof S=="string"){for(;D<A;)if(k[N++]=S.charCodeAt(D++),N==this.blockSize){i(this,k),N=0;break}}else for(;D<A;)if(k[N++]=S[D++],N==this.blockSize){i(this,k),N=0;break}}this.h=N,this.o+=A},r.prototype.v=function(){var S=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);S[0]=128;for(var A=1;A<S.length-8;++A)S[A]=0;var C=8*this.o;for(A=S.length-8;A<S.length;++A)S[A]=C&255,C/=256;for(this.u(S),S=Array(16),A=C=0;4>A;++A)for(var k=0;32>k;k+=8)S[C++]=this.g[A]>>>k&255;return S};function s(S,A){var C=a;return Object.prototype.hasOwnProperty.call(C,S)?C[S]:C[S]=A(S)}function o(S,A){this.h=A;for(var C=[],k=!0,N=S.length-1;0<=N;N--){var D=S[N]|0;k&&D==A||(C[N]=D,k=!1)}this.g=C}var a={};function u(S){return-128<=S&&128>S?s(S,function(A){return new o([A|0],0>A?-1:0)}):new o([S|0],0>S?-1:0)}function l(S){if(isNaN(S)||!isFinite(S))return f;if(0>S)return g(l(-S));for(var A=[],C=1,k=0;S>=C;k++)A[k]=S/C|0,C*=4294967296;return new o(A,0)}function c(S,A){if(S.length==0)throw Error("number format error: empty string");if(A=A||10,2>A||36<A)throw Error("radix out of range: "+A);if(S.charAt(0)=="-")return g(c(S.substring(1),A));if(0<=S.indexOf("-"))throw Error('number format error: interior "-" character');for(var C=l(Math.pow(A,8)),k=f,N=0;N<S.length;N+=8){var D=Math.min(8,S.length-N),O=parseInt(S.substring(N,N+D),A);8>D?(D=l(Math.pow(A,D)),k=k.j(D).add(l(O))):(k=k.j(C),k=k.add(l(O)))}return k}var f=u(0),d=u(1),h=u(16777216);e=o.prototype,e.m=function(){if(m(this))return-g(this).m();for(var S=0,A=1,C=0;C<this.g.length;C++){var k=this.i(C);S+=(0<=k?k:4294967296+k)*A,A*=4294967296}return S},e.toString=function(S){if(S=S||10,2>S||36<S)throw Error("radix out of range: "+S);if(p(this))return"0";if(m(this))return"-"+g(this).toString(S);for(var A=l(Math.pow(S,6)),C=this,k="";;){var N=w(C,A).g;C=y(C,N.j(A));var D=((0<C.g.length?C.g[0]:C.h)>>>0).toString(S);if(C=N,p(C))return D+k;for(;6>D.length;)D="0"+D;k=D+k}},e.i=function(S){return 0>S?0:S<this.g.length?this.g[S]:this.h};function p(S){if(S.h!=0)return!1;for(var A=0;A<S.g.length;A++)if(S.g[A]!=0)return!1;return!0}function m(S){return S.h==-1}e.l=function(S){return S=y(this,S),m(S)?-1:p(S)?0:1};function g(S){for(var A=S.g.length,C=[],k=0;k<A;k++)C[k]=~S.g[k];return new o(C,~S.h).add(d)}e.abs=function(){return m(this)?g(this):this},e.add=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0,N=0;N<=A;N++){var D=k+(this.i(N)&65535)+(S.i(N)&65535),O=(D>>>16)+(this.i(N)>>>16)+(S.i(N)>>>16);k=O>>>16,D&=65535,O&=65535,C[N]=O<<16|D}return new o(C,C[C.length-1]&-2147483648?-1:0)};function y(S,A){return S.add(g(A))}e.j=function(S){if(p(this)||p(S))return f;if(m(this))return m(S)?g(this).j(g(S)):g(g(this).j(S));if(m(S))return g(this.j(g(S)));if(0>this.l(h)&&0>S.l(h))return l(this.m()*S.m());for(var A=this.g.length+S.g.length,C=[],k=0;k<2*A;k++)C[k]=0;for(k=0;k<this.g.length;k++)for(var N=0;N<S.g.length;N++){var D=this.i(k)>>>16,O=this.i(k)&65535,$=S.i(N)>>>16,F=S.i(N)&65535;C[2*k+2*N]+=O*F,v(C,2*k+2*N),C[2*k+2*N+1]+=D*F,v(C,2*k+2*N+1),C[2*k+2*N+1]+=O*$,v(C,2*k+2*N+1),C[2*k+2*N+2]+=D*$,v(C,2*k+2*N+2)}for(k=0;k<A;k++)C[k]=C[2*k+1]<<16|C[2*k];for(k=A;k<2*A;k++)C[k]=0;return new o(C,0)};function v(S,A){for(;(S[A]&65535)!=S[A];)S[A+1]+=S[A]>>>16,S[A]&=65535,A++}function b(S,A){this.g=S,this.h=A}function w(S,A){if(p(A))throw Error("division by zero");if(p(S))return new b(f,f);if(m(S))return A=w(g(S),A),new b(g(A.g),g(A.h));if(m(A))return A=w(S,g(A)),new b(g(A.g),A.h);if(30<S.g.length){if(m(S)||m(A))throw Error("slowDivide_ only works with positive integers.");for(var C=d,k=A;0>=k.l(S);)C=E(C),k=E(k);var N=T(C,1),D=T(k,1);for(k=T(k,2),C=T(C,2);!p(k);){var O=D.add(k);0>=O.l(S)&&(N=N.add(C),D=O),k=T(k,1),C=T(C,1)}return A=y(S,N.j(A)),new b(N,A)}for(N=f;0<=S.l(A);){for(C=Math.max(1,Math.floor(S.m()/A.m())),k=Math.ceil(Math.log(C)/Math.LN2),k=48>=k?1:Math.pow(2,k-48),D=l(C),O=D.j(A);m(O)||0<O.l(S);)C-=k,D=l(C),O=D.j(A);p(D)&&(D=d),N=N.add(D),S=y(S,O)}return new b(N,S)}e.A=function(S){return w(this,S).h},e.and=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)&S.i(k);return new o(C,this.h&S.h)},e.or=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)|S.i(k);return new o(C,this.h|S.h)},e.xor=function(S){for(var A=Math.max(this.g.length,S.g.length),C=[],k=0;k<A;k++)C[k]=this.i(k)^S.i(k);return new o(C,this.h^S.h)};function E(S){for(var A=S.g.length+1,C=[],k=0;k<A;k++)C[k]=S.i(k)<<1|S.i(k-1)>>>31;return new o(C,S.h)}function T(S,A){var C=A>>5;A%=32;for(var k=S.g.length-C,N=[],D=0;D<k;D++)N[D]=0<A?S.i(D+C)>>>A|S.i(D+C+1)<<32-A:S.i(D+C);return new o(N,S.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,uDe=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=l,o.fromString=c,H1=o}).apply(typeof Rpe<"u"?Rpe:typeof self<"u"?self:typeof window<"u"?window:{});var $P=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var lDe,aC,cDe,fD,DH,fDe,dDe,hDe;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(x,L,V){return x==Array.prototype||x==Object.prototype||(x[L]=V.value),x};function n(x){x=[typeof globalThis=="object"&&globalThis,x,typeof window=="object"&&window,typeof self=="object"&&self,typeof $P=="object"&&$P];for(var L=0;L<x.length;++L){var V=x[L];if(V&&V.Math==Math)return V}throw Error("Cannot find global object")}var r=n(this);function i(x,L){if(L)e:{var V=r;x=x.split(".");for(var Q=0;Q<x.length-1;Q++){var we=x[Q];if(!(we in V))break e;V=V[we]}x=x[x.length-1],Q=V[x],L=L(Q),L!=Q&&L!=null&&t(V,x,{configurable:!0,writable:!0,value:L})}}function s(x,L){x instanceof String&&(x+="");var V=0,Q=!1,we={next:function(){if(!Q&&V<x.length){var Oe=V++;return{value:L(Oe,x[Oe]),done:!1}}return Q=!0,{done:!0,value:void 0}}};return we[Symbol.iterator]=function(){return we},we}i("Array.prototype.values",function(x){return x||function(){return s(this,function(L,V){return V})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function u(x){var L=typeof x;return L=L!="object"?L:x?Array.isArray(x)?"array":L:"null",L=="array"||L=="object"&&typeof x.length=="number"}function l(x){var L=typeof x;return L=="object"&&x!=null||L=="function"}function c(x,L,V){return x.call.apply(x.bind,arguments)}function f(x,L,V){if(!x)throw Error();if(2<arguments.length){var Q=Array.prototype.slice.call(arguments,2);return function(){var we=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(we,Q),x.apply(L,we)}}return function(){return x.apply(L,arguments)}}function d(x,L,V){return d=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?c:f,d.apply(null,arguments)}function h(x,L){var V=Array.prototype.slice.call(arguments,1);return function(){var Q=V.slice();return Q.push.apply(Q,arguments),x.apply(this,Q)}}function p(x,L){function V(){}V.prototype=L.prototype,x.aa=L.prototype,x.prototype=new V,x.prototype.constructor=x,x.Qb=function(Q,we,Oe){for(var ft=Array(arguments.length-2),Kr=2;Kr<arguments.length;Kr++)ft[Kr-2]=arguments[Kr];return L.prototype[we].apply(Q,ft)}}function m(x){const L=x.length;if(0<L){const V=Array(L);for(let Q=0;Q<L;Q++)V[Q]=x[Q];return V}return[]}function g(x,L){for(let V=1;V<arguments.length;V++){const Q=arguments[V];if(u(Q)){const we=x.length||0,Oe=Q.length||0;x.length=we+Oe;for(let ft=0;ft<Oe;ft++)x[we+ft]=Q[ft]}else x.push(Q)}}class y{constructor(L,V){this.i=L,this.j=V,this.h=0,this.g=null}get(){let L;return 0<this.h?(this.h--,L=this.g,this.g=L.next,L.next=null):L=this.i(),L}}function v(x){return/^[\s\xa0]*$/.test(x)}function b(){var x=a.navigator;return x&&(x=x.userAgent)?x:""}function w(x){return w[" "](x),x}w[" "]=function(){};var E=b().indexOf("Gecko")!=-1&&!(b().toLowerCase().indexOf("webkit")!=-1&&b().indexOf("Edge")==-1)&&!(b().indexOf("Trident")!=-1||b().indexOf("MSIE")!=-1)&&b().indexOf("Edge")==-1;function T(x,L,V){for(const Q in x)L.call(V,x[Q],Q,x)}function S(x,L){for(const V in x)L.call(void 0,x[V],V,x)}function A(x){const L={};for(const V in x)L[V]=x[V];return L}const C="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function k(x,L){let V,Q;for(let we=1;we<arguments.length;we++){Q=arguments[we];for(V in Q)x[V]=Q[V];for(let Oe=0;Oe<C.length;Oe++)V=C[Oe],Object.prototype.hasOwnProperty.call(Q,V)&&(x[V]=Q[V])}}function N(x){var L=1;x=x.split(":");const V=[];for(;0<L&&x.length;)V.push(x.shift()),L--;return x.length&&V.push(x.join(":")),V}function D(x){a.setTimeout(()=>{throw x},0)}function O(){var x=H;let L=null;return x.g&&(L=x.g,x.g=x.g.next,x.g||(x.h=null),L.next=null),L}class ${constructor(){this.h=this.g=null}add(L,V){const Q=F.get();Q.set(L,V),this.h?this.h.next=Q:this.g=Q,this.h=Q}}var F=new y(()=>new M,x=>x.reset());class M{constructor(){this.next=this.g=this.h=null}set(L,V){this.h=L,this.g=V,this.next=null}reset(){this.next=this.g=this.h=null}}let B,U=!1,H=new $,P=()=>{const x=a.Promise.resolve(void 0);B=()=>{x.then(z)}};var z=()=>{for(var x;x=O();){try{x.h.call(x.g)}catch(V){D(V)}var L=F;L.j(x),100>L.h&&(L.h++,x.next=L.g,L.g=x)}U=!1};function W(){this.s=this.s,this.C=this.C}W.prototype.s=!1,W.prototype.ma=function(){this.s||(this.s=!0,this.N())},W.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(x,L){this.type=x,this.g=this.target=L,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var q=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var x=!1,L=Object.defineProperty({},"passive",{get:function(){x=!0}});try{const V=()=>{};a.addEventListener("test",V,L),a.removeEventListener("test",V,L)}catch{}return x}();function G(x,L){if(j.call(this,x?x.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,x){var V=this.type=x.type,Q=x.changedTouches&&x.changedTouches.length?x.changedTouches[0]:null;if(this.target=x.target||x.srcElement,this.g=L,L=x.relatedTarget){if(E){e:{try{w(L.nodeName);var we=!0;break e}catch{}we=!1}we||(L=null)}}else V=="mouseover"?L=x.fromElement:V=="mouseout"&&(L=x.toElement);this.relatedTarget=L,Q?(this.clientX=Q.clientX!==void 0?Q.clientX:Q.pageX,this.clientY=Q.clientY!==void 0?Q.clientY:Q.pageY,this.screenX=Q.screenX||0,this.screenY=Q.screenY||0):(this.clientX=x.clientX!==void 0?x.clientX:x.pageX,this.clientY=x.clientY!==void 0?x.clientY:x.pageY,this.screenX=x.screenX||0,this.screenY=x.screenY||0),this.button=x.button,this.key=x.key||"",this.ctrlKey=x.ctrlKey,this.altKey=x.altKey,this.shiftKey=x.shiftKey,this.metaKey=x.metaKey,this.pointerId=x.pointerId||0,this.pointerType=typeof x.pointerType=="string"?x.pointerType:ne[x.pointerType]||"",this.state=x.state,this.i=x,x.defaultPrevented&&G.aa.h.call(this)}}p(G,j);var ne={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var x=this.i;x.preventDefault?x.preventDefault():x.returnValue=!1};var ce="closure_listenable_"+(1e6*Math.random()|0),de=0;function he(x,L,V,Q,we){this.listener=x,this.proxy=null,this.src=L,this.type=V,this.capture=!!Q,this.ha=we,this.key=++de,this.da=this.fa=!1}function ve(x){x.da=!0,x.listener=null,x.proxy=null,x.src=null,x.ha=null}function Ie(x){this.src=x,this.g={},this.h=0}Ie.prototype.add=function(x,L,V,Q,we){var Oe=x.toString();x=this.g[Oe],x||(x=this.g[Oe]=[],this.h++);var ft=Xe(x,L,Q,we);return-1<ft?(L=x[ft],V||(L.fa=!1)):(L=new he(L,this.src,Oe,!!Q,we),L.fa=V,x.push(L)),L};function be(x,L){var V=L.type;if(V in x.g){var Q=x.g[V],we=Array.prototype.indexOf.call(Q,L,void 0),Oe;(Oe=0<=we)&&Array.prototype.splice.call(Q,we,1),Oe&&(ve(L),x.g[V].length==0&&(delete x.g[V],x.h--))}}function Xe(x,L,V,Q){for(var we=0;we<x.length;++we){var Oe=x[we];if(!Oe.da&&Oe.listener==L&&Oe.capture==!!V&&Oe.ha==Q)return we}return-1}var ze="closure_lm_"+(1e6*Math.random()|0),yt={};function it(x,L,V,Q,we){if(Array.isArray(L)){for(var Oe=0;Oe<L.length;Oe++)it(x,L[Oe],V,Q,we);return null}return V=vt(V),x&&x[ce]?x.K(L,V,l(Q)?!!Q.capture:!!Q,we):_e(x,L,V,!1,Q,we)}function _e(x,L,V,Q,we,Oe){if(!L)throw Error("Invalid event type");var ft=l(we)?!!we.capture:!!we,Kr=ge(x);if(Kr||(x[ze]=Kr=new Ie(x)),V=Kr.add(L,V,Q,ft,Oe),V.proxy)return V;if(Q=ke(),V.proxy=Q,Q.src=x,Q.listener=V,x.addEventListener)q||(we=ft),we===void 0&&(we=!1),x.addEventListener(L.toString(),Q,we);else if(x.attachEvent)x.attachEvent(Dt(L.toString()),Q);else if(x.addListener&&x.removeListener)x.addListener(Q);else throw Error("addEventListener and attachEvent are unavailable.");return V}function ke(){function x(V){return L.call(x.src,x.listener,V)}const L=Ge;return x}function Ve(x,L,V,Q,we){if(Array.isArray(L))for(var Oe=0;Oe<L.length;Oe++)Ve(x,L[Oe],V,Q,we);else Q=l(Q)?!!Q.capture:!!Q,V=vt(V),x&&x[ce]?(x=x.i,L=String(L).toString(),L in x.g&&(Oe=x.g[L],V=Xe(Oe,V,Q,we),-1<V&&(ve(Oe[V]),Array.prototype.splice.call(Oe,V,1),Oe.length==0&&(delete x.g[L],x.h--)))):x&&(x=ge(x))&&(L=x.g[L.toString()],x=-1,L&&(x=Xe(L,V,Q,we)),(V=-1<x?L[x]:null)&&ct(V))}function ct(x){if(typeof x!="number"&&x&&!x.da){var L=x.src;if(L&&L[ce])be(L.i,x);else{var V=x.type,Q=x.proxy;L.removeEventListener?L.removeEventListener(V,Q,x.capture):L.detachEvent?L.detachEvent(Dt(V),Q):L.addListener&&L.removeListener&&L.removeListener(Q),(V=ge(L))?(be(V,x),V.h==0&&(V.src=null,L[ze]=null)):ve(x)}}}function Dt(x){return x in yt?yt[x]:yt[x]="on"+x}function Ge(x,L){if(x.da)x=!0;else{L=new G(L,this);var V=x.listener,Q=x.ha||x.src;x.fa&&ct(x),x=V.call(Q,L)}return x}function ge(x){return x=x[ze],x instanceof Ie?x:null}var ht="__closure_events_fn_"+(1e9*Math.random()>>>0);function vt(x){return typeof x=="function"?x:(x[ht]||(x[ht]=function(L){return x.handleEvent(L)}),x[ht])}function pe(){W.call(this),this.i=new Ie(this),this.M=this,this.F=null}p(pe,W),pe.prototype[ce]=!0,pe.prototype.removeEventListener=function(x,L,V,Q){Ve(this,x,L,V,Q)};function Ce(x,L){var V,Q=x.F;if(Q)for(V=[];Q;Q=Q.F)V.push(Q);if(x=x.M,Q=L.type||L,typeof L=="string")L=new j(L,x);else if(L instanceof j)L.target=L.target||x;else{var we=L;L=new j(Q,x),k(L,we)}if(we=!0,V)for(var Oe=V.length-1;0<=Oe;Oe--){var ft=L.g=V[Oe];we=qe(ft,Q,!0,L)&&we}if(ft=L.g=x,we=qe(ft,Q,!0,L)&&we,we=qe(ft,Q,!1,L)&&we,V)for(Oe=0;Oe<V.length;Oe++)ft=L.g=V[Oe],we=qe(ft,Q,!1,L)&&we}pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var x=this.i,L;for(L in x.g){for(var V=x.g[L],Q=0;Q<V.length;Q++)ve(V[Q]);delete x.g[L],x.h--}}this.F=null},pe.prototype.K=function(x,L,V,Q){return this.i.add(String(x),L,!1,V,Q)},pe.prototype.L=function(x,L,V,Q){return this.i.add(String(x),L,!0,V,Q)};function qe(x,L,V,Q){if(L=x.i.g[String(L)],!L)return!0;L=L.concat();for(var we=!0,Oe=0;Oe<L.length;++Oe){var ft=L[Oe];if(ft&&!ft.da&&ft.capture==V){var Kr=ft.listener,wo=ft.ha||ft.src;ft.fa&&be(x.i,ft),we=Kr.call(wo,Q)!==!1&&we}}return we&&!Q.defaultPrevented}function ut(x,L,V){if(typeof x=="function")V&&(x=d(x,V));else if(x&&typeof x.handleEvent=="function")x=d(x.handleEvent,x);else throw Error("Invalid listener argument");return 2147483647<Number(L)?-1:a.setTimeout(x,L||0)}function _t(x){x.g=ut(()=>{x.g=null,x.i&&(x.i=!1,_t(x))},x.l);const L=x.h;x.h=null,x.m.apply(null,L)}class Fn extends W{constructor(L,V){super(),this.m=L,this.l=V,this.h=null,this.i=!1,this.g=null}j(L){this.h=arguments,this.g?this.i=!0:_t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ir(x){W.call(this),this.h=x,this.g={}}p(Ir,W);var jn=[];function dr(x){T(x.g,function(L,V){this.g.hasOwnProperty(V)&&ct(L)},x),x.g={}}Ir.prototype.N=function(){Ir.aa.N.call(this),dr(this)},Ir.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var yn=a.JSON.stringify,In=a.JSON.parse,ir=class{stringify(x){return a.JSON.stringify(x,void 0)}parse(x){return a.JSON.parse(x,void 0)}};function sr(){}sr.prototype.h=null;function qo(x){return x.h||(x.h=x.i())}function ji(){}var kn={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Bi(){j.call(this,"d")}p(Bi,j);function kr(){j.call(this,"c")}p(kr,j);var bs={},gp=null;function pl(){return gp=gp||new pe}bs.La="serverreachability";function Ed(x){j.call(this,bs.La,x)}p(Ed,j);function Sr(x){const L=pl();Ce(L,new Ed(L))}bs.STAT_EVENT="statevent";function Pi(x,L){j.call(this,bs.STAT_EVENT,x),this.stat=L}p(Pi,j);function ei(x){const L=pl();Ce(L,new Pi(L,x))}bs.Ma="timingevent";function hu(x,L){j.call(this,bs.Ma,x),this.size=L}p(hu,j);function Na(x,L){if(typeof x!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){x()},L)}function Pa(){this.g=!0}Pa.prototype.xa=function(){this.g=!1};function oe(x,L,V,Q,we,Oe){x.info(function(){if(x.g)if(Oe)for(var ft="",Kr=Oe.split("&"),wo=0;wo<Kr.length;wo++){var hr=Kr[wo].split("=");if(1<hr.length){var Ko=hr[0];hr=hr[1];var Xo=Ko.split("_");ft=2<=Xo.length&&Xo[1]=="type"?ft+(Ko+"="+hr+"&"):ft+(Ko+"=redacted&")}}else ft=null;else ft=Oe;return"XMLHTTP REQ ("+Q+") [attempt "+we+"]: "+L+`
`+V+`
`+ft})}function ee(x,L,V,Q,we,Oe,ft){x.info(function(){return"XMLHTTP RESP ("+Q+") [ attempt "+we+"]: "+L+`
`+V+`
`+Oe+" "+ft})}function ae(x,L,V,Q){x.info(function(){return"XMLHTTP TEXT ("+L+"): "+Se(x,V)+(Q?" "+Q:"")})}function Ae(x,L){x.info(function(){return"TIMEOUT: "+L})}Pa.prototype.info=function(){};function Se(x,L){if(!x.g)return L;if(!L)return null;try{var V=JSON.parse(L);if(V){for(x=0;x<V.length;x++)if(Array.isArray(V[x])){var Q=V[x];if(!(2>Q.length)){var we=Q[1];if(Array.isArray(we)&&!(1>we.length)){var Oe=we[0];if(Oe!="noop"&&Oe!="stop"&&Oe!="close")for(var ft=1;ft<we.length;ft++)we[ft]=""}}}}return yn(V)}catch{return L}}var ot={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Tt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Ht;function $n(){}p($n,sr),$n.prototype.g=function(){return new XMLHttpRequest},$n.prototype.i=function(){return{}},Ht=new $n;function Bn(x,L,V,Q){this.j=x,this.i=L,this.l=V,this.R=Q||1,this.U=new Ir(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new mn}function mn(){this.i=null,this.g="",this.h=!1}var or={},Rr={};function Vt(x,L,V){x.L=1,x.v=Un(Ye(L)),x.m=V,x.P=!0,ar(x,null)}function ar(x,L){x.F=Date.now(),Oi(x),x.A=Ye(x.v);var V=x.A,Q=x.R;Array.isArray(Q)||(Q=[String(Q)]),gN(V.i,"t",Q),x.C=0,V=x.j.J,x.h=new mn,x.g=Use(x.j,V?L:null,!x.m),0<x.O&&(x.M=new Fn(d(x.Y,x,x.g),x.O)),L=x.U,V=x.g,Q=x.ca;var we="readystatechange";Array.isArray(we)||(we&&(jn[0]=we.toString()),we=jn);for(var Oe=0;Oe<we.length;Oe++){var ft=it(V,we[Oe],Q||L.handleEvent,!1,L.h||L);if(!ft)break;L.g[ft.key]=ft}L=x.H?A(x.H):{},x.m?(x.u||(x.u="POST"),L["Content-Type"]="application/x-www-form-urlencoded",x.g.ea(x.A,x.u,x.m,L)):(x.u="GET",x.g.ea(x.A,x.u,null,L)),Sr(),oe(x.i,x.u,x.A,x.l,x.R,x.m)}Bn.prototype.ca=function(x){x=x.target;const L=this.M;L&&rs(x)==3?L.j():this.Y(x)},Bn.prototype.Y=function(x){try{if(x==this.g)e:{const Xo=rs(this.g);var L=this.g.Ba();const D_=this.g.Z();if(!(3>Xo)&&(Xo!=3||this.g&&(this.h.h||this.g.oa()||Yo(this.g)))){this.J||Xo!=4||L==7||(L==8||0>=D_?Sr(3):Sr(2)),ti(this);var V=this.g.Z();this.X=V;t:if(Wr(this)){var Q=Yo(this.g);x="";var we=Q.length,Oe=rs(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ui(this),_o(this);var ft="";break t}this.h.i=new a.TextDecoder}for(L=0;L<we;L++)this.h.h=!0,x+=this.h.i.decode(Q[L],{stream:!(Oe&&L==we-1)});Q.length=0,this.h.g+=x,this.C=0,ft=this.h.g}else ft=this.g.oa();if(this.o=V==200,ee(this.i,this.u,this.A,this.l,this.R,Xo,V),this.o){if(this.T&&!this.K){t:{if(this.g){var Kr,wo=this.g;if((Kr=wo.g?wo.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!v(Kr)){var hr=Kr;break t}}hr=null}if(V=hr)ae(this.i,this.l,V,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,zi(this,V);else{this.o=!1,this.s=3,ei(12),Ui(this),_o(this);break e}}if(this.P){V=!0;let uf;for(;!this.J&&this.C<ft.length;)if(uf=er(this,ft),uf==Rr){Xo==4&&(this.s=4,ei(14),V=!1),ae(this.i,this.l,null,"[Incomplete Response]");break}else if(uf==or){this.s=4,ei(15),ae(this.i,this.l,ft,"[Invalid Chunk]"),V=!1;break}else ae(this.i,this.l,uf,null),zi(this,uf);if(Wr(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Xo!=4||ft.length!=0||this.h.h||(this.s=1,ei(16),V=!1),this.o=this.o&&V,!V)ae(this.i,this.l,ft,"[Invalid Chunked Response]"),Ui(this),_o(this);else if(0<ft.length&&!this.W){this.W=!0;var Ko=this.j;Ko.g==this&&Ko.ba&&!Ko.M&&(Ko.j.info("Great, no buffering proxy detected. Bytes received: "+ft.length),Lj(Ko),Ko.M=!0,ei(11))}}else ae(this.i,this.l,ft,null),zi(this,ft);Xo==4&&Ui(this),this.o&&!this.J&&(Xo==4?Lse(this.j,this):(this.o=!1,Oi(this)))}else Sv(this.g),V==400&&0<ft.indexOf("Unknown SID")?(this.s=3,ei(12)):(this.s=0,ei(13)),Ui(this),_o(this)}}}catch{}finally{}};function Wr(x){return x.g?x.u=="GET"&&x.L!=2&&x.j.Ca:!1}function er(x,L){var V=x.C,Q=L.indexOf(`
`,V);return Q==-1?Rr:(V=Number(L.substring(V,Q)),isNaN(V)?or:(Q+=1,Q+V>L.length?Rr:(L=L.slice(Q,Q+V),x.C=Q+V,L)))}Bn.prototype.cancel=function(){this.J=!0,Ui(this)};function Oi(x){x.S=Date.now()+x.I,Ys(x,x.I)}function Ys(x,L){if(x.B!=null)throw Error("WatchDog timer not null");x.B=Na(d(x.ba,x),L)}function ti(x){x.B&&(a.clearTimeout(x.B),x.B=null)}Bn.prototype.ba=function(){this.B=null;const x=Date.now();0<=x-this.S?(Ae(this.i,this.A),this.L!=2&&(Sr(),ei(17)),Ui(this),this.s=2,_o(this)):Ys(this,this.S-x)};function _o(x){x.j.G==0||x.J||Lse(x.j,x)}function Ui(x){ti(x);var L=x.M;L&&typeof L.ma=="function"&&L.ma(),x.M=null,dr(x.U),x.g&&(L=x.g,x.g=null,L.abort(),L.ma())}function zi(x,L){try{var V=x.j;if(V.G!=0&&(V.g==x||xd(V.h,x))){if(!x.K&&xd(V.h,x)&&V.G==3){try{var Q=V.Da.g.parse(L)}catch{Q=null}if(Array.isArray(Q)&&Q.length==3){var we=Q;if(we[0]==0){e:if(!V.u){if(V.g)if(V.g.F+3e3<x.F)xN(V),wN(V);else break e;Mj(V),ei(18)}}else V.za=we[1],0<V.za-V.T&&37500>we[2]&&V.F&&V.v==0&&!V.C&&(V.C=Na(d(V.Za,V),6e3));if(1>=oc(V.h)&&V.ca){try{V.ca()}catch{}V.ca=void 0}}else Tv(V,11)}else if((x.K||V.g==x)&&xN(V),!v(L))for(we=V.Da.g.parse(L),L=0;L<we.length;L++){let hr=we[L];if(V.T=hr[0],hr=hr[1],V.G==2)if(hr[0]=="c"){V.K=hr[1],V.ia=hr[2];const Ko=hr[3];Ko!=null&&(V.la=Ko,V.j.info("VER="+V.la));const Xo=hr[4];Xo!=null&&(V.Aa=Xo,V.j.info("SVER="+V.Aa));const D_=hr[5];D_!=null&&typeof D_=="number"&&0<D_&&(Q=1.5*D_,V.L=Q,V.j.info("backChannelRequestTimeoutMs_="+Q)),Q=V;const uf=x.g;if(uf){const TN=uf.g?uf.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(TN){var Oe=Q.h;Oe.g||TN.indexOf("spdy")==-1&&TN.indexOf("quic")==-1&&TN.indexOf("h2")==-1||(Oe.j=Oe.l,Oe.g=new Set,Oe.h&&(Y(Oe,Oe.h),Oe.h=null))}if(Q.D){const Fj=uf.g?uf.g.getResponseHeader("X-HTTP-Session-Id"):null;Fj&&(Q.ya=Fj,Pt(Q.I,Q.D,Fj))}}V.G=3,V.l&&V.l.ua(),V.ba&&(V.R=Date.now()-x.F,V.j.info("Handshake RTT: "+V.R+"ms")),Q=V;var ft=x;if(Q.qa=Bse(Q,Q.J?Q.ia:null,Q.W),ft.K){se(Q.h,ft);var Kr=ft,wo=Q.L;wo&&(Kr.I=wo),Kr.B&&(ti(Kr),Oi(Kr)),Q.g=ft}else $se(Q);0<V.i.length&&EN(V)}else hr[0]!="stop"&&hr[0]!="close"||Tv(V,7);else V.G==3&&(hr[0]=="stop"||hr[0]=="close"?hr[0]=="stop"?Tv(V,7):P_(V):hr[0]!="noop"&&V.l&&V.l.ta(hr),V.v=0)}}Sr(4)}catch{}}var Wo=class{constructor(x,L){this.g=x,this.map=L}};function Oa(x){this.l=x||10,a.PerformanceNavigationTiming?(x=a.performance.getEntriesByType("navigation"),x=0<x.length&&(x[0].nextHopProtocol=="hq"||x[0].nextHopProtocol=="h2")):x=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=x?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Ks(x){return x.h?!0:x.g?x.g.size>=x.j:!1}function oc(x){return x.h?1:x.g?x.g.size:0}function xd(x,L){return x.h?x.h==L:x.g?x.g.has(L):!1}function Y(x,L){x.g?x.g.add(L):x.h=L}function se(x,L){x.h&&x.h==L?x.h=null:x.g&&x.g.has(L)&&x.g.delete(L)}Oa.prototype.cancel=function(){if(this.i=Z(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const x of this.g.values())x.cancel();this.g.clear()}};function Z(x){if(x.h!=null)return x.i.concat(x.h.D);if(x.g!=null&&x.g.size!==0){let L=x.i;for(const V of x.g.values())L=L.concat(V.D);return L}return m(x.i)}function fe(x){if(x.V&&typeof x.V=="function")return x.V();if(typeof Map<"u"&&x instanceof Map||typeof Set<"u"&&x instanceof Set)return Array.from(x.values());if(typeof x=="string")return x.split("");if(u(x)){for(var L=[],V=x.length,Q=0;Q<V;Q++)L.push(x[Q]);return L}L=[],V=0;for(Q in x)L[V++]=x[Q];return L}function ye(x){if(x.na&&typeof x.na=="function")return x.na();if(!x.V||typeof x.V!="function"){if(typeof Map<"u"&&x instanceof Map)return Array.from(x.keys());if(!(typeof Set<"u"&&x instanceof Set)){if(u(x)||typeof x=="string"){var L=[];x=x.length;for(var V=0;V<x;V++)L.push(V);return L}L=[],V=0;for(const Q in x)L[V++]=Q;return L}}}function le(x,L){if(x.forEach&&typeof x.forEach=="function")x.forEach(L,void 0);else if(u(x)||typeof x=="string")Array.prototype.forEach.call(x,L,void 0);else for(var V=ye(x),Q=fe(x),we=Q.length,Oe=0;Oe<we;Oe++)L.call(void 0,Q[Oe],V&&V[Oe],x)}var De=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function He(x,L){if(x){x=x.split("&");for(var V=0;V<x.length;V++){var Q=x[V].indexOf("="),we=null;if(0<=Q){var Oe=x[V].substring(0,Q);we=x[V].substring(Q+1)}else Oe=x[V];L(Oe,we?decodeURIComponent(we.replace(/\+/g," ")):"")}}}function We(x){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,x instanceof We){this.h=x.h,st(this,x.j),this.o=x.o,this.g=x.g,Et(this,x.s),this.l=x.l;var L=x.i,V=new ac;V.i=L.i,L.g&&(V.g=new Map(L.g),V.h=L.h),gn(this,V),this.m=x.m}else x&&(L=String(x).match(De))?(this.h=!1,st(this,L[1]||"",!0),this.o=Nr(L[2]||""),this.g=Nr(L[3]||"",!0),Et(this,L[4]),this.l=Nr(L[5]||"",!0),gn(this,L[6]||"",!0),this.m=Nr(L[7]||"")):(this.h=!1,this.i=new ac(null,this.h))}We.prototype.toString=function(){var x=[],L=this.j;L&&x.push(Pr(L,Sd,!0),":");var V=this.g;return(V||L=="file")&&(x.push("//"),(L=this.o)&&x.push(Pr(L,Sd,!0),"@"),x.push(encodeURIComponent(String(V)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),V=this.s,V!=null&&x.push(":",String(V))),(V=this.l)&&(this.g&&V.charAt(0)!="/"&&x.push("/"),x.push(Pr(V,V.charAt(0)=="/"?kT:yp,!0))),(V=this.i.toString())&&x.push("?",V),(V=this.m)&&x.push("#",Pr(V,mN)),x.join("")};function Ye(x){return new We(x)}function st(x,L,V){x.j=V?Nr(L,!0):L,x.j&&(x.j=x.j.replace(/:$/,""))}function Et(x,L){if(L){if(L=Number(L),isNaN(L)||0>L)throw Error("Bad port number "+L);x.s=L}else x.s=null}function gn(x,L,V){L instanceof ac?(x.i=L,RT(x.i,x.h)):(V||(L=Pr(L,wv)),x.i=new ac(L,x.h))}function Pt(x,L,V){x.i.set(L,V)}function Un(x){return Pt(x,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),x}function Nr(x,L){return x?L?decodeURI(x.replace(/%25/g,"%2525")):decodeURIComponent(x):""}function Pr(x,L,V){return typeof x=="string"?(x=encodeURI(x).replace(L,Go),V&&(x=x.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),x):null}function Go(x){return x=x.charCodeAt(0),"%"+(x>>4&15).toString(16)+(x&15).toString(16)}var Sd=/[#\/\?@]/g,yp=/[#\?:]/g,kT=/[#\?]/g,wv=/[#\?@]/g,mN=/#/g;function ac(x,L){this.h=this.g=null,this.i=x||null,this.j=!!L}function pu(x){x.g||(x.g=new Map,x.h=0,x.i&&He(x.i,function(L,V){x.add(decodeURIComponent(L.replace(/\+/g," ")),V)}))}e=ac.prototype,e.add=function(x,L){pu(this),this.i=null,x=bp(this,x);var V=this.g.get(x);return V||this.g.set(x,V=[]),V.push(L),this.h+=1,this};function vp(x,L){pu(x),L=bp(x,L),x.g.has(L)&&(x.i=null,x.h-=x.g.get(L).length,x.g.delete(L))}function k_(x,L){return pu(x),L=bp(x,L),x.g.has(L)}e.forEach=function(x,L){pu(this),this.g.forEach(function(V,Q){V.forEach(function(we){x.call(L,we,Q,this)},this)},this)},e.na=function(){pu(this);const x=Array.from(this.g.values()),L=Array.from(this.g.keys()),V=[];for(let Q=0;Q<L.length;Q++){const we=x[Q];for(let Oe=0;Oe<we.length;Oe++)V.push(L[Q])}return V},e.V=function(x){pu(this);let L=[];if(typeof x=="string")k_(this,x)&&(L=L.concat(this.g.get(bp(this,x))));else{x=Array.from(this.g.values());for(let V=0;V<x.length;V++)L=L.concat(x[V])}return L},e.set=function(x,L){return pu(this),this.i=null,x=bp(this,x),k_(this,x)&&(this.h-=this.g.get(x).length),this.g.set(x,[L]),this.h+=1,this},e.get=function(x,L){return x?(x=this.V(x),0<x.length?String(x[0]):L):L};function gN(x,L,V){vp(x,L),0<V.length&&(x.i=null,x.g.set(bp(x,L),m(V)),x.h+=V.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const x=[],L=Array.from(this.g.keys());for(var V=0;V<L.length;V++){var Q=L[V];const Oe=encodeURIComponent(String(Q)),ft=this.V(Q);for(Q=0;Q<ft.length;Q++){var we=Oe;ft[Q]!==""&&(we+="="+encodeURIComponent(String(ft[Q]))),x.push(we)}}return this.i=x.join("&")};function bp(x,L){return L=String(L),x.j&&(L=L.toLowerCase()),L}function RT(x,L){L&&!x.j&&(pu(x),x.i=null,x.g.forEach(function(V,Q){var we=Q.toLowerCase();Q!=we&&(vp(this,Q),gN(this,we,V))},x)),x.j=L}function yN(x,L){const V=new Pa;if(a.Image){const Q=new Image;Q.onload=h(mu,V,"TestLoadImage: loaded",!0,L,Q),Q.onerror=h(mu,V,"TestLoadImage: error",!1,L,Q),Q.onabort=h(mu,V,"TestLoadImage: abort",!1,L,Q),Q.ontimeout=h(mu,V,"TestLoadImage: timeout",!1,L,Q),a.setTimeout(function(){Q.ontimeout&&Q.ontimeout()},1e4),Q.src=x}else L(!1)}function _p(x,L){const V=new Pa,Q=new AbortController,we=setTimeout(()=>{Q.abort(),mu(V,"TestPingServer: timeout",!1,L)},1e4);fetch(x,{signal:Q.signal}).then(Oe=>{clearTimeout(we),Oe.ok?mu(V,"TestPingServer: ok",!0,L):mu(V,"TestPingServer: server error",!1,L)}).catch(()=>{clearTimeout(we),mu(V,"TestPingServer: error",!1,L)})}function mu(x,L,V,Q,we){try{we&&(we.onload=null,we.onerror=null,we.onabort=null,we.ontimeout=null),Q(V)}catch{}}function $j(){this.g=new ir}function vN(x,L,V){const Q=V||"";try{le(x,function(we,Oe){let ft=we;l(we)&&(ft=yn(we)),L.push(Q+Oe+"="+encodeURIComponent(ft))})}catch(we){throw L.push(Q+"type="+encodeURIComponent("_badmap")),we}}function R_(x){this.l=x.Ub||null,this.j=x.eb||!1}p(R_,sr),R_.prototype.g=function(){return new Ev(this.l,this.j)},R_.prototype.i=function(x){return function(){return x}}({});function Ev(x,L){pe.call(this),this.D=x,this.o=L,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}p(Ev,pe),e=Ev.prototype,e.open=function(x,L){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=x,this.A=L,this.readyState=1,Sg(this)},e.send=function(x){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const L={headers:this.u,method:this.B,credentials:this.m,cache:void 0};x&&(L.body=x),(this.D||a).fetch(new Request(this.A,L)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,xv(this)),this.readyState=0},e.Sa=function(x){if(this.g&&(this.l=x,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=x.headers,this.readyState=2,Sg(this)),this.g&&(this.readyState=3,Sg(this),this.g)))if(this.responseType==="arraybuffer")x.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in x){if(this.j=x.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bN(this)}else x.text().then(this.Ra.bind(this),this.ga.bind(this))};function bN(x){x.j.read().then(x.Pa.bind(x)).catch(x.ga.bind(x))}e.Pa=function(x){if(this.g){if(this.o&&x.value)this.response.push(x.value);else if(!this.o){var L=x.value?x.value:new Uint8Array(0);(L=this.v.decode(L,{stream:!x.done}))&&(this.response=this.responseText+=L)}x.done?xv(this):Sg(this),this.readyState==3&&bN(this)}},e.Ra=function(x){this.g&&(this.response=this.responseText=x,xv(this))},e.Qa=function(x){this.g&&(this.response=x,xv(this))},e.ga=function(){this.g&&xv(this)};function xv(x){x.readyState=4,x.l=null,x.j=null,x.v=null,Sg(x)}e.setRequestHeader=function(x,L){this.u.append(x,L)},e.getResponseHeader=function(x){return this.h&&this.h.get(x.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const x=[],L=this.h.entries();for(var V=L.next();!V.done;)V=V.value,x.push(V[0]+": "+V[1]),V=L.next();return x.join(`\r
`)};function Sg(x){x.onreadystatechange&&x.onreadystatechange.call(x)}Object.defineProperty(Ev.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(x){this.m=x?"include":"same-origin"}});function _N(x){let L="";return T(x,function(V,Q){L+=Q,L+=":",L+=V,L+=`\r
`}),L}function te(x,L,V){e:{for(Q in V){var Q=!1;break e}Q=!0}Q||(V=_N(V),typeof x=="string"?V!=null&&encodeURIComponent(String(V)):Pt(x,L,V))}function ue(x){pe.call(this),this.headers=new Map,this.o=x||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}p(ue,pe);var Re=/^https?$/i,It=["POST","PUT"];e=ue.prototype,e.Ha=function(x){this.J=x},e.ea=function(x,L,V,Q){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+x);L=L?L.toUpperCase():"GET",this.D=x,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Ht.g(),this.v=this.o?qo(this.o):qo(Ht),this.g.onreadystatechange=d(this.Ea,this);try{this.B=!0,this.g.open(L,String(x),!0),this.B=!1}catch(Oe){Mn(this,Oe);return}if(x=V||"",V=new Map(this.headers),Q)if(Object.getPrototypeOf(Q)===Object.prototype)for(var we in Q)V.set(we,Q[we]);else if(typeof Q.keys=="function"&&typeof Q.get=="function")for(const Oe of Q.keys())V.set(Oe,Q.get(Oe));else throw Error("Unknown input type for opt_headers: "+String(Q));Q=Array.from(V.keys()).find(Oe=>Oe.toLowerCase()=="content-type"),we=a.FormData&&x instanceof a.FormData,!(0<=Array.prototype.indexOf.call(It,L,void 0))||Q||we||V.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[Oe,ft]of V)this.g.setRequestHeader(Oe,ft);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Yr(this),this.u=!0,this.g.send(x),this.u=!1}catch(Oe){Mn(this,Oe)}};function Mn(x,L){x.h=!1,x.g&&(x.j=!0,x.g.abort(),x.j=!1),x.l=L,x.m=5,Tr(x),zn(x)}function Tr(x){x.A||(x.A=!0,Ce(x,"complete"),Ce(x,"error"))}e.abort=function(x){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=x||7,Ce(this,"complete"),Ce(this,"abort"),zn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),zn(this,!0)),ue.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?Gr(this):this.bb())},e.bb=function(){Gr(this)};function Gr(x){if(x.h&&typeof o<"u"&&(!x.v[1]||rs(x)!=4||x.Z()!=2)){if(x.u&&rs(x)==4)ut(x.Ea,0,x);else if(Ce(x,"readystatechange"),rs(x)==4){x.h=!1;try{const ft=x.Z();e:switch(ft){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var L=!0;break e;default:L=!1}var V;if(!(V=L)){var Q;if(Q=ft===0){var we=String(x.D).match(De)[1]||null;!we&&a.self&&a.self.location&&(we=a.self.location.protocol.slice(0,-1)),Q=!Re.test(we?we.toLowerCase():"")}V=Q}if(V)Ce(x,"complete"),Ce(x,"success");else{x.m=6;try{var Oe=2<rs(x)?x.g.statusText:""}catch{Oe=""}x.l=Oe+" ["+x.Z()+"]",Tr(x)}}finally{zn(x)}}}}function zn(x,L){if(x.g){Yr(x);const V=x.g,Q=x.v[0]?()=>{}:null;x.g=null,x.v=null,L||Ce(x,"ready");try{V.onreadystatechange=Q}catch{}}}function Yr(x){x.I&&(a.clearTimeout(x.I),x.I=null)}e.isActive=function(){return!!this.g};function rs(x){return x.g?x.g.readyState:0}e.Z=function(){try{return 2<rs(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(x){if(this.g){var L=this.g.responseText;return x&&L.indexOf(x)==0&&(L=L.substring(x.length)),In(L)}};function Yo(x){try{if(!x.g)return null;if("response"in x.g)return x.g.response;switch(x.H){case"":case"text":return x.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in x.g)return x.g.mozResponseArrayBuffer}return null}catch{return null}}function Sv(x){const L={};x=(x.g&&2<=rs(x)&&x.g.getAllResponseHeaders()||"").split(`\r
`);for(let Q=0;Q<x.length;Q++){if(v(x[Q]))continue;var V=N(x[Q]);const we=V[0];if(V=V[1],typeof V!="string")continue;V=V.trim();const Oe=L[we]||[];L[we]=Oe,Oe.push(V)}S(L,function(Q){return Q.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function wp(x,L,V){return V&&V.internalChannelParams&&V.internalChannelParams[x]||L}function N_(x){this.Aa=0,this.i=[],this.j=new Pa,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=wp("failFast",!1,x),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=wp("baseRetryDelayMs",5e3,x),this.cb=wp("retryDelaySeedMs",1e4,x),this.Wa=wp("forwardChannelMaxRetries",2,x),this.wa=wp("forwardChannelRequestTimeoutMs",2e4,x),this.pa=x&&x.xmlHttpFactory||void 0,this.Xa=x&&x.Tb||void 0,this.Ca=x&&x.useFetchStreams||!1,this.L=void 0,this.J=x&&x.supportsCrossDomainXhr||!1,this.K="",this.h=new Oa(x&&x.concurrentRequestLimit),this.Da=new $j,this.P=x&&x.fastHandshake||!1,this.O=x&&x.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=x&&x.Rb||!1,x&&x.xa&&this.j.xa(),x&&x.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&x&&x.detectBufferingProxy||!1,this.ja=void 0,x&&x.longPollingTimeout&&0<x.longPollingTimeout&&(this.ja=x.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=N_.prototype,e.la=8,e.G=1,e.connect=function(x,L,V,Q){ei(0),this.W=x,this.H=L||{},V&&Q!==void 0&&(this.H.OSID=V,this.H.OAID=Q),this.F=this.X,this.I=Bse(this,null,this.W),EN(this)};function P_(x){if(Pse(x),x.G==3){var L=x.U++,V=Ye(x.I);if(Pt(V,"SID",x.K),Pt(V,"RID",L),Pt(V,"TYPE","terminate"),NT(x,V),L=new Bn(x,x.j,L),L.L=2,L.v=Un(Ye(V)),V=!1,a.navigator&&a.navigator.sendBeacon)try{V=a.navigator.sendBeacon(L.v.toString(),"")}catch{}!V&&a.Image&&(new Image().src=L.v,V=!0),V||(L.g=Use(L.j,null),L.g.ea(L.v)),L.F=Date.now(),Oi(L)}jse(x)}function wN(x){x.g&&(Lj(x),x.g.cancel(),x.g=null)}function Pse(x){wN(x),x.u&&(a.clearTimeout(x.u),x.u=null),xN(x),x.h.cancel(),x.s&&(typeof x.s=="number"&&a.clearTimeout(x.s),x.s=null)}function EN(x){if(!Ks(x.h)&&!x.s){x.s=!0;var L=x.Ga;B||P(),U||(B(),U=!0),H.add(L,x),x.B=0}}function b9e(x,L){return oc(x.h)>=x.h.j-(x.s?1:0)?!1:x.s?(x.i=L.D.concat(x.i),!0):x.G==1||x.G==2||x.B>=(x.Va?0:x.Wa)?!1:(x.s=Na(d(x.Ga,x,L),Fse(x,x.B)),x.B++,!0)}e.Ga=function(x){if(this.s)if(this.s=null,this.G==1){if(!x){this.U=Math.floor(1e5*Math.random()),x=this.U++;const we=new Bn(this,this.j,x);let Oe=this.o;if(this.S&&(Oe?(Oe=A(Oe),k(Oe,this.S)):Oe=this.S),this.m!==null||this.O||(we.H=Oe,Oe=null),this.P)e:{for(var L=0,V=0;V<this.i.length;V++){t:{var Q=this.i[V];if("__data__"in Q.map&&(Q=Q.map.__data__,typeof Q=="string")){Q=Q.length;break t}Q=void 0}if(Q===void 0)break;if(L+=Q,4096<L){L=V;break e}if(L===4096||V===this.i.length-1){L=V+1;break e}}L=1e3}else L=1e3;L=Dse(this,we,L),V=Ye(this.I),Pt(V,"RID",x),Pt(V,"CVER",22),this.D&&Pt(V,"X-HTTP-Session-Id",this.D),NT(this,V),Oe&&(this.O?L="headers="+encodeURIComponent(String(_N(Oe)))+"&"+L:this.m&&te(V,this.m,Oe)),Y(this.h,we),this.Ua&&Pt(V,"TYPE","init"),this.P?(Pt(V,"$req",L),Pt(V,"SID","null"),we.T=!0,Vt(we,V,null)):Vt(we,V,L),this.G=2}}else this.G==3&&(x?Ose(this,x):this.i.length==0||Ks(this.h)||Ose(this))};function Ose(x,L){var V;L?V=L.l:V=x.U++;const Q=Ye(x.I);Pt(Q,"SID",x.K),Pt(Q,"RID",V),Pt(Q,"AID",x.T),NT(x,Q),x.m&&x.o&&te(Q,x.m,x.o),V=new Bn(x,x.j,V,x.B+1),x.m===null&&(V.H=x.o),L&&(x.i=L.D.concat(x.i)),L=Dse(x,V,1e3),V.I=Math.round(.5*x.wa)+Math.round(.5*x.wa*Math.random()),Y(x.h,V),Vt(V,Q,L)}function NT(x,L){x.H&&T(x.H,function(V,Q){Pt(L,Q,V)}),x.l&&le({},function(V,Q){Pt(L,Q,V)})}function Dse(x,L,V){V=Math.min(x.i.length,V);var Q=x.l?d(x.l.Na,x.l,x):null;e:{var we=x.i;let Oe=-1;for(;;){const ft=["count="+V];Oe==-1?0<V?(Oe=we[0].g,ft.push("ofs="+Oe)):Oe=0:ft.push("ofs="+Oe);let Kr=!0;for(let wo=0;wo<V;wo++){let hr=we[wo].g;const Ko=we[wo].map;if(hr-=Oe,0>hr)Oe=Math.max(0,we[wo].g-100),Kr=!1;else try{vN(Ko,ft,"req"+hr+"_")}catch{Q&&Q(Ko)}}if(Kr){Q=ft.join("&");break e}}}return x=x.i.splice(0,V),L.D=x,Q}function $se(x){if(!x.g&&!x.u){x.Y=1;var L=x.Fa;B||P(),U||(B(),U=!0),H.add(L,x),x.v=0}}function Mj(x){return x.g||x.u||3<=x.v?!1:(x.Y++,x.u=Na(d(x.Fa,x),Fse(x,x.v)),x.v++,!0)}e.Fa=function(){if(this.u=null,Mse(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var x=2*this.R;this.j.info("BP detection timer enabled: "+x),this.A=Na(d(this.ab,this),x)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ei(10),wN(this),Mse(this))};function Lj(x){x.A!=null&&(a.clearTimeout(x.A),x.A=null)}function Mse(x){x.g=new Bn(x,x.j,"rpc",x.Y),x.m===null&&(x.g.H=x.o),x.g.O=0;var L=Ye(x.qa);Pt(L,"RID","rpc"),Pt(L,"SID",x.K),Pt(L,"AID",x.T),Pt(L,"CI",x.F?"0":"1"),!x.F&&x.ja&&Pt(L,"TO",x.ja),Pt(L,"TYPE","xmlhttp"),NT(x,L),x.m&&x.o&&te(L,x.m,x.o),x.L&&(x.g.I=x.L);var V=x.g;x=x.ia,V.L=1,V.v=Un(Ye(L)),V.m=null,V.P=!0,ar(V,x)}e.Za=function(){this.C!=null&&(this.C=null,wN(this),Mj(this),ei(19))};function xN(x){x.C!=null&&(a.clearTimeout(x.C),x.C=null)}function Lse(x,L){var V=null;if(x.g==L){xN(x),Lj(x),x.g=null;var Q=2}else if(xd(x.h,L))V=L.D,se(x.h,L),Q=1;else return;if(x.G!=0){if(L.o)if(Q==1){V=L.m?L.m.length:0,L=Date.now()-L.F;var we=x.B;Q=pl(),Ce(Q,new hu(Q,V)),EN(x)}else $se(x);else if(we=L.s,we==3||we==0&&0<L.X||!(Q==1&&b9e(x,L)||Q==2&&Mj(x)))switch(V&&0<V.length&&(L=x.h,L.i=L.i.concat(V)),we){case 1:Tv(x,5);break;case 4:Tv(x,10);break;case 3:Tv(x,6);break;default:Tv(x,2)}}}function Fse(x,L){let V=x.Ta+Math.floor(Math.random()*x.cb);return x.isActive()||(V*=2),V*L}function Tv(x,L){if(x.j.info("Error code "+L),L==2){var V=d(x.fb,x),Q=x.Xa;const we=!Q;Q=new We(Q||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||st(Q,"https"),Un(Q),we?yN(Q.toString(),V):_p(Q.toString(),V)}else ei(2);x.G=0,x.l&&x.l.sa(L),jse(x),Pse(x)}e.fb=function(x){x?(this.j.info("Successfully pinged google.com"),ei(2)):(this.j.info("Failed to ping google.com"),ei(1))};function jse(x){if(x.G=0,x.ka=[],x.l){const L=Z(x.h);(L.length!=0||x.i.length!=0)&&(g(x.ka,L),g(x.ka,x.i),x.h.i.length=0,m(x.i),x.i.length=0),x.l.ra()}}function Bse(x,L,V){var Q=V instanceof We?Ye(V):new We(V);if(Q.g!="")L&&(Q.g=L+"."+Q.g),Et(Q,Q.s);else{var we=a.location;Q=we.protocol,L=L?L+"."+we.hostname:we.hostname,we=+we.port;var Oe=new We(null);Q&&st(Oe,Q),L&&(Oe.g=L),we&&Et(Oe,we),V&&(Oe.l=V),Q=Oe}return V=x.D,L=x.ya,V&&L&&Pt(Q,V,L),Pt(Q,"VER",x.la),NT(x,Q),Q}function Use(x,L,V){if(L&&!x.J)throw Error("Can't create secondary domain capable XhrIo object.");return L=x.Ca&&!x.pa?new ue(new R_({eb:V})):new ue(x.pa),L.Ha(x.J),L}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function zse(){}e=zse.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function SN(){}SN.prototype.g=function(x,L){return new ml(x,L)};function ml(x,L){pe.call(this),this.g=new N_(L),this.l=x,this.h=L&&L.messageUrlParams||null,x=L&&L.messageHeaders||null,L&&L.clientProtocolHeaderRequired&&(x?x["X-Client-Protocol"]="webchannel":x={"X-Client-Protocol":"webchannel"}),this.g.o=x,x=L&&L.initMessageHeaders||null,L&&L.messageContentType&&(x?x["X-WebChannel-Content-Type"]=L.messageContentType:x={"X-WebChannel-Content-Type":L.messageContentType}),L&&L.va&&(x?x["X-WebChannel-Client-Profile"]=L.va:x={"X-WebChannel-Client-Profile":L.va}),this.g.S=x,(x=L&&L.Sb)&&!v(x)&&(this.g.m=x),this.v=L&&L.supportsCrossDomainXhr||!1,this.u=L&&L.sendRawJson||!1,(L=L&&L.httpSessionIdParam)&&!v(L)&&(this.g.D=L,x=this.h,x!==null&&L in x&&(x=this.h,L in x&&delete x[L])),this.j=new O_(this)}p(ml,pe),ml.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},ml.prototype.close=function(){P_(this.g)},ml.prototype.o=function(x){var L=this.g;if(typeof x=="string"){var V={};V.__data__=x,x=V}else this.u&&(V={},V.__data__=yn(x),x=V);L.i.push(new Wo(L.Ya++,x)),L.G==3&&EN(L)},ml.prototype.N=function(){this.g.l=null,delete this.j,P_(this.g),delete this.g,ml.aa.N.call(this)};function Vse(x){Bi.call(this),x.__headers__&&(this.headers=x.__headers__,this.statusCode=x.__status__,delete x.__headers__,delete x.__status__);var L=x.__sm__;if(L){e:{for(const V in L){x=V;break e}x=void 0}(this.i=x)&&(x=this.i,L=L!==null&&x in L?L[x]:void 0),this.data=L}else this.data=x}p(Vse,Bi);function Hse(){kr.call(this),this.status=1}p(Hse,kr);function O_(x){this.g=x}p(O_,zse),O_.prototype.ua=function(){Ce(this.g,"a")},O_.prototype.ta=function(x){Ce(this.g,new Vse(x))},O_.prototype.sa=function(x){Ce(this.g,new Hse)},O_.prototype.ra=function(){Ce(this.g,"b")},SN.prototype.createWebChannel=SN.prototype.g,ml.prototype.send=ml.prototype.o,ml.prototype.open=ml.prototype.m,ml.prototype.close=ml.prototype.close,hDe=function(){return new SN},dDe=function(){return pl()},fDe=bs,DH={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ot.NO_ERROR=0,ot.TIMEOUT=8,ot.HTTP_ERROR=6,fD=ot,Tt.COMPLETE="complete",cDe=Tt,ji.EventType=kn,kn.OPEN="a",kn.CLOSE="b",kn.ERROR="c",kn.MESSAGE="d",pe.prototype.listen=pe.prototype.K,aC=ji,ue.prototype.listenOnce=ue.prototype.L,ue.prototype.getLastError=ue.prototype.Ka,ue.prototype.getLastErrorCode=ue.prototype.Ba,ue.prototype.getStatus=ue.prototype.Z,ue.prototype.getResponseJson=ue.prototype.Oa,ue.prototype.getResponseText=ue.prototype.oa,ue.prototype.send=ue.prototype.ea,ue.prototype.setWithCredentials=ue.prototype.Ha,lDe=ue}).apply(typeof $P<"u"?$P:typeof self<"u"?self:typeof window<"u"?window:{});const Npe="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}xu.UNAUTHENTICATED=new xu(null),xu.GOOGLE_CREDENTIALS=new xu("google-credentials-uid"),xu.FIRST_PARTY=new xu("first-party-uid"),xu.MOCK_USER=new xu("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let eT="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wb=new RZ("@firebase/firestore");function xw(){return wb.logLevel}function xt(e,...t){if(wb.logLevel<=Vn.DEBUG){const n=t.map(KZ);wb.debug(`Firestore (${eT}): ${e}`,...n)}}function qm(e,...t){if(wb.logLevel<=Vn.ERROR){const n=t.map(KZ);wb.error(`Firestore (${eT}): ${e}`,...n)}}function LI(e,...t){if(wb.logLevel<=Vn.WARN){const n=t.map(KZ);wb.warn(`Firestore (${eT}): ${e}`,...n)}}function KZ(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(e="Unexpected state"){const t=`FIRESTORE (${eT}) INTERNAL ASSERTION FAILED: `+e;throw qm(t),new Error(t)}function Cr(e,t){e||nn()}function hn(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Be={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class bt extends iv{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DLt{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class $Lt{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(xu.UNAUTHENTICATED))}shutdown(){}}class MLt{constructor(t){this.t=t,this.currentUser=xu.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Cr(this.o===void 0);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new mm;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new mm,t.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;t.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{xt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(xt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new mm)}},0),o()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(xt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Cr(typeof r.accessToken=="string"),new DLt(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Cr(t===null||typeof t=="string"),new xu(t)}}class LLt{constructor(t,n,r){this.l=t,this.h=n,this.P=r,this.type="FirstParty",this.user=xu.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const t=this.I();return t&&this.T.set("Authorization",t),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class FLt{constructor(t,n,r){this.l=t,this.h=n,this.P=r}getToken(){return Promise.resolve(new LLt(this.l,this.h,this.P))}start(t,n){t.enqueueRetryable(()=>n(xu.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jLt{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class BLt{constructor(t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(t,n){Cr(this.o===void 0);const r=s=>{s.error!=null&&xt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,xt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{t.enqueueRetryable(()=>r(s))};const i=s=>{xt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):xt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Cr(typeof n.token=="string"),this.R=n.token,new jLt(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ULt(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pDe{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/t.length)*t.length;let r="";for(;r.length<20;){const i=ULt(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=t.charAt(i[s]%t.length))}return r}}function Xn(e,t){return e<t?-1:e>t?1:0}function Nx(e,t,n){return e.length===t.length&&e.every((r,i)=>n(r,t[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bs{static now(){return Bs.fromMillis(Date.now())}static fromDate(t){return Bs.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor(1e6*(t-1e3*n));return new Bs(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new bt(Be.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<-62135596800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new bt(Be.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(t){return this.seconds===t.seconds?Xn(this.nanoseconds,t.nanoseconds):Xn(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{static fromTimestamp(t){return new dn(t)}static min(){return new dn(new Bs(0,0))}static max(){return new dn(new Bs(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t,n,r){n===void 0?n=0:n>t.length&&nn(),r===void 0?r=t.length-n:r>t.length-n&&nn(),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return FI.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof FI?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let i=0;i<r;i++){const s=t.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return t.length<n.length?-1:t.length>n.length?1:0}}class ci extends FI{construct(t,n,r){return new ci(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new bt(Be.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ci(n)}static emptyPath(){return new ci([])}}const zLt=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Po extends FI{construct(t,n,r){return new Po(t,n,r)}static isValidIdentifier(t){return zLt.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Po.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Po(["__name__"])}static fromServerFormat(t){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<t.length;){const a=t[i];if(a==="\\"){if(i+1===t.length)throw new bt(Be.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const u=t[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new bt(Be.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new bt(Be.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Po(n)}static emptyPath(){return new Po([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(t){this.path=t}static fromPath(t){return new Ut(ci.fromString(t))}static fromName(t){return new Ut(ci.fromString(t).popFirst(5))}static empty(){return new Ut(ci.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&ci.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return ci.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new Ut(new ci(t.slice()))}}function VLt(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=dn.fromTimestamp(r===1e9?new Bs(n+1,0):new Bs(n,r));return new vy(i,Ut.empty(),t)}function HLt(e){return new vy(e.readTime,e.key,-1)}class vy{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new vy(dn.min(),Ut.empty(),-1)}static max(){return new vy(dn.max(),Ut.empty(),-1)}}function qLt(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=Ut.comparator(e.documentKey,t.documentKey),n!==0?n:Xn(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WLt="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class GLt{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tT(e){if(e.code!==Be.FAILED_PRECONDITION||e.message!==WLt)throw e;xt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&nn(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new Ue((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof Ue?n:Ue.resolve(n)}catch(n){return Ue.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):Ue.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):Ue.reject(n)}static resolve(t){return new Ue((n,r)=>{n(t)})}static reject(t){return new Ue((n,r)=>{r(t)})}static waitFor(t){return new Ue((n,r)=>{let i=0,s=0,o=!1;t.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(t){let n=Ue.resolve(!1);for(const r of t)n=n.next(i=>i?Ue.resolve(i):r());return n}static forEach(t,n){const r=[];return t.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(t,n){return new Ue((r,i)=>{const s=t.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const l=u;n(t[l]).next(c=>{o[l]=c,++a,a===s&&r(o)},c=>i(c))}})}static doWhile(t,n){return new Ue((r,i)=>{const s=()=>{t()===!0?n().next(()=>{s()},i):r()};s()})}}function YLt(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function nT(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d4{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ie(r),this.se=r=>n.writeSequenceNumber(r))}ie(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.se&&this.se(t),t}}d4.oe=-1;function h4(e){return e==null}function T3(e){return e===0&&1/e==-1/0}function KLt(e){return typeof e=="number"&&Number.isInteger(e)&&!T3(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XLt(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Ppe(t)),t=QLt(e.get(n),t);return Ppe(t)}function QLt(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const s=e.charAt(i);switch(s){case"\0":n+="";break;case"":n+="";break;default:n+=s}}return n}function Ppe(e){return e+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ope(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function ov(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function mDe(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(t,n){this.comparator=t,this.root=n||ko.EMPTY}insert(t,n){return new Fi(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,ko.BLACK,null,null))}remove(t){return new Fi(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ko.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(t,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new MP(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new MP(this.root,t,this.comparator,!1)}getReverseIterator(){return new MP(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new MP(this.root,t,this.comparator,!0)}}class MP{constructor(t,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=n?r(t.key,n):1,n&&i&&(s*=-1),s<0)t=this.isReverse?t.left:t.right;else{if(s===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class ko{constructor(t,n,r,i,s){this.key=t,this.value=n,this.color=r??ko.RED,this.left=i??ko.EMPTY,this.right=s??ko.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,i,s){return new ko(t??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let i=this;const s=r(t,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(t,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(t,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ko.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,i=this;if(n(t,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(t,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(t,i.key)===0){if(i.right.isEmpty())return ko.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(t,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,ko.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,ko.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw nn();const t=this.left.check();if(t!==this.right.check())throw nn();return t+(this.isRed()?0:1)}}ko.EMPTY=null,ko.RED=!0,ko.BLACK=!1;ko.EMPTY=new class{constructor(){this.size=0}get key(){throw nn()}get value(){throw nn()}get color(){throw nn()}get left(){throw nn()}get right(){throw nn()}copy(t,n,r,i,s){return this}insert(t,n,r){return new ko(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(t){this.comparator=t,this.data=new Fi(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,t[1])>=0)return;n(i.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Dpe(this.data.getIterator())}getIteratorFrom(t){return new Dpe(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof Us)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new Us(this.comparator);return n.data=t,n}}class Dpe{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(t){this.fields=t,t.sort(Po.comparator)}static empty(){return new Nl([])}unionWith(t){let n=new Us(Po.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Nl(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return Nx(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gDe extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new gDe("Invalid base64 string: "+s):s}}(t);return new Uo(n)}static fromUint8Array(t){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(t);return new Uo(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return Xn(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Uo.EMPTY_BYTE_STRING=new Uo("");const JLt=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function by(e){if(Cr(!!e),typeof e=="string"){let t=0;const n=JLt.exec(e);if(Cr(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),t=Number(i)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:us(e.seconds),nanos:us(e.nanos)}}function us(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function _y(e){return typeof e=="string"?Uo.fromBase64String(e):Uo.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XZ(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function p4(e){const t=e.mapValue.fields.__previous_value__;return XZ(t)?p4(t):t}function jI(e){const t=by(e.mapValue.fields.__local_write_time__.timestampValue);return new Bs(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZLt{constructor(t,n,r,i,s,o,a,u,l){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=l}}class BI{constructor(t,n){this.projectId=t,this.database=n||"(default)"}static empty(){return new BI("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(t){return t instanceof BI&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LP={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function wy(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?XZ(e)?4:t6t(e)?9007199254740991:e6t(e)?10:11:nn()}function jh(e,t){if(e===t)return!0;const n=wy(e);if(n!==wy(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return jI(e).isEqual(jI(t));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=by(i.timestampValue),a=by(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(i,s){return _y(i.bytesValue).isEqual(_y(s.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(i,s){return us(i.geoPointValue.latitude)===us(s.geoPointValue.latitude)&&us(i.geoPointValue.longitude)===us(s.geoPointValue.longitude)}(e,t);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return us(i.integerValue)===us(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=us(i.doubleValue),a=us(s.doubleValue);return o===a?T3(o)===T3(a):isNaN(o)&&isNaN(a)}return!1}(e,t);case 9:return Nx(e.arrayValue.values||[],t.arrayValue.values||[],jh);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(Ope(o)!==Ope(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!jh(o[u],a[u])))return!1;return!0}(e,t);default:return nn()}}function UI(e,t){return(e.values||[]).find(n=>jh(n,t))!==void 0}function Px(e,t){if(e===t)return 0;const n=wy(e),r=wy(t);if(n!==r)return Xn(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Xn(e.booleanValue,t.booleanValue);case 2:return function(s,o){const a=us(s.integerValue||s.doubleValue),u=us(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(e,t);case 3:return $pe(e.timestampValue,t.timestampValue);case 4:return $pe(jI(e),jI(t));case 5:return Xn(e.stringValue,t.stringValue);case 6:return function(s,o){const a=_y(s),u=_y(o);return a.compareTo(u)}(e.bytesValue,t.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let l=0;l<a.length&&l<u.length;l++){const c=Xn(a[l],u[l]);if(c!==0)return c}return Xn(a.length,u.length)}(e.referenceValue,t.referenceValue);case 8:return function(s,o){const a=Xn(us(s.latitude),us(o.latitude));return a!==0?a:Xn(us(s.longitude),us(o.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Mpe(e.arrayValue,t.arrayValue);case 10:return function(s,o){var a,u,l,c;const f=s.fields||{},d=o.fields||{},h=(a=f.value)===null||a===void 0?void 0:a.arrayValue,p=(u=d.value)===null||u===void 0?void 0:u.arrayValue,m=Xn(((l=h==null?void 0:h.values)===null||l===void 0?void 0:l.length)||0,((c=p==null?void 0:p.values)===null||c===void 0?void 0:c.length)||0);return m!==0?m:Mpe(h,p)}(e.mapValue,t.mapValue);case 11:return function(s,o){if(s===LP.mapValue&&o===LP.mapValue)return 0;if(s===LP.mapValue)return 1;if(o===LP.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),l=o.fields||{},c=Object.keys(l);u.sort(),c.sort();for(let f=0;f<u.length&&f<c.length;++f){const d=Xn(u[f],c[f]);if(d!==0)return d;const h=Px(a[u[f]],l[c[f]]);if(h!==0)return h}return Xn(u.length,c.length)}(e.mapValue,t.mapValue);default:throw nn()}}function $pe(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return Xn(e,t);const n=by(e),r=by(t),i=Xn(n.seconds,r.seconds);return i!==0?i:Xn(n.nanos,r.nanos)}function Mpe(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Px(n[i],r[i]);if(s)return s}return Xn(n.length,r.length)}function Ox(e){return $H(e)}function $H(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=by(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return _y(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return Ut.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=$H(s);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${$H(n.fields[o])}`;return i+"}"}(e.mapValue):nn()}function dD(e){switch(wy(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=p4(e);return t?16+dD(t):16;case 5:return 2*e.stringValue.length;case 6:return _y(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+dD(s),0)}(e.arrayValue);case 10:case 11:return function(r){let i=0;return ov(r.fields,(s,o)=>{i+=s.length+dD(o)}),i}(e.mapValue);default:throw nn()}}function Lpe(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function MH(e){return!!e&&"integerValue"in e}function QZ(e){return!!e&&"arrayValue"in e}function Fpe(e){return!!e&&"nullValue"in e}function jpe(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function hD(e){return!!e&&"mapValue"in e}function e6t(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="__vector__"}function d2(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return ov(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=d2(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=d2(e.arrayValue.values[n]);return t}return Object.assign({},e)}function t6t(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $u{constructor(t){this.value=t}static empty(){return new $u({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!hD(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=d2(n)}setAll(t){let n=Po.emptyPath(),r={},i=[];t.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=d2(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(t){const n=this.field(t.popLast());hD(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return jh(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let i=n.mapValue.fields[t.get(r)];hD(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(t,n,r){ov(n,(i,s)=>t[i]=s);for(const i of r)delete t[i]}clone(){return new $u(d2(this.value))}}function yDe(e){const t=[];return ov(e.fields,(n,r)=>{const i=new Po([n]);if(hD(r)){const s=yDe(r.mapValue).fields;if(s.length===0)t.push(i);else for(const o of s)t.push(i.child(o))}else t.push(i)}),new Nl(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class da{constructor(t,n,r,i,s,o,a){this.key=t,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new da(t,0,dn.min(),dn.min(),dn.min(),$u.empty(),0)}static newFoundDocument(t,n,r,i){return new da(t,1,n,dn.min(),r,i,0)}static newNoDocument(t,n){return new da(t,2,n,dn.min(),dn.min(),$u.empty(),0)}static newUnknownDocument(t,n){return new da(t,3,n,dn.min(),dn.min(),$u.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(dn.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=$u.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=$u.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=dn.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof da&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new da(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let A3=class{constructor(t,n){this.position=t,this.inclusive=n}};function Bpe(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],o=e.position[i];if(s.field.isKeyField()?r=Ut.comparator(Ut.fromName(o.referenceValue),n.key):r=Px(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function Upe(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!jh(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,n="asc"){this.field=t,this.dir=n}}function n6t(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vDe=class{};class Ss extends vDe{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new i6t(t,n,r):n==="array-contains"?new a6t(t,r):n==="in"?new u6t(t,r):n==="not-in"?new l6t(t,r):n==="array-contains-any"?new c6t(t,r):new Ss(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new s6t(t,r):new o6t(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(Px(n,this.value)):n!==null&&wy(this.value)===wy(n)&&this.matchesComparison(Px(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return nn()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class nd extends vDe{constructor(t,n){super(),this.filters=t,this.op=n,this.ae=null}static create(t,n){return new nd(t,n)}matches(t){return bDe(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bDe(e){return e.op==="and"}function _De(e){return r6t(e)&&bDe(e)}function r6t(e){for(const t of e.filters)if(t instanceof nd)return!1;return!0}function LH(e){if(e instanceof Ss)return e.field.canonicalString()+e.op.toString()+Ox(e.value);if(_De(e))return e.filters.map(t=>LH(t)).join(",");{const t=e.filters.map(n=>LH(n)).join(",");return`${e.op}(${t})`}}function wDe(e,t){return e instanceof Ss?function(r,i){return i instanceof Ss&&r.op===i.op&&r.field.isEqual(i.field)&&jh(r.value,i.value)}(e,t):e instanceof nd?function(r,i){return i instanceof nd&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&wDe(o,i.filters[a]),!0):!1}(e,t):void nn()}function EDe(e){return e instanceof Ss?function(n){return`${n.field.canonicalString()} ${n.op} ${Ox(n.value)}`}(e):e instanceof nd?function(n){return n.op.toString()+" {"+n.getFilters().map(EDe).join(" ,")+"}"}(e):"Filter"}class i6t extends Ss{constructor(t,n,r){super(t,n,r),this.key=Ut.fromName(r.referenceValue)}matches(t){const n=Ut.comparator(t.key,this.key);return this.matchesComparison(n)}}class s6t extends Ss{constructor(t,n){super(t,"in",n),this.keys=xDe("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class o6t extends Ss{constructor(t,n){super(t,"not-in",n),this.keys=xDe("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function xDe(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>Ut.fromName(r.referenceValue))}class a6t extends Ss{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return QZ(n)&&UI(n.arrayValue,this.value)}}class u6t extends Ss{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&UI(this.value.arrayValue,n)}}class l6t extends Ss{constructor(t,n){super(t,"not-in",n)}matches(t){if(UI(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&!UI(this.value.arrayValue,n)}}class c6t extends Ss{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!QZ(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>UI(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6t{constructor(t,n=null,r=[],i=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function zpe(e,t=null,n=[],r=[],i=null,s=null,o=null){return new f6t(e,t,n,r,i,s,o)}function JZ(e){const t=hn(e);if(t.ue===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>LH(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),h4(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Ox(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Ox(r)).join(",")),t.ue=n}return t.ue}function ZZ(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!n6t(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!wDe(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Upe(e.startAt,t.startAt)&&Upe(e.endAt,t.endAt)}function FH(e){return Ut.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rT{constructor(t,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function d6t(e,t,n,r,i,s,o,a){return new rT(e,t,n,r,i,s,o,a)}function eee(e){return new rT(e)}function Vpe(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function SDe(e){return e.collectionGroup!==null}function h2(e){const t=hn(e);if(t.ce===null){t.ce=[];const n=new Set;for(const s of t.explicitOrderBy)t.ce.push(s),n.add(s.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Us(Po.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(l=>{l.isInequality()&&(a=a.add(l.field))})}),a})(t).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||t.ce.push(new zI(s,r))}),n.has(Po.keyField().canonicalString())||t.ce.push(new zI(Po.keyField(),r))}return t.ce}function Eh(e){const t=hn(e);return t.le||(t.le=h6t(t,h2(e))),t.le}function h6t(e,t){if(e.limitType==="F")return zpe(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new zI(i.field,s)});const n=e.endAt?new A3(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new A3(e.startAt.position,e.startAt.inclusive):null;return zpe(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function jH(e,t){const n=e.filters.concat([t]);return new rT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function BH(e,t,n){return new rT(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function m4(e,t){return ZZ(Eh(e),Eh(t))&&e.limitType===t.limitType}function TDe(e){return`${JZ(Eh(e))}|lt:${e.limitType}`}function Sw(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>EDe(i)).join(", ")}]`),h4(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Ox(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Ox(i)).join(",")),`Target(${r})`}(Eh(e))}; limitType=${e.limitType})`}function g4(e,t){return t.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):Ut.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(e,t)&&function(r,i){for(const s of h2(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(e,t)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(e,t)&&function(r,i){return!(r.startAt&&!function(o,a,u){const l=Bpe(o,a,u);return o.inclusive?l<=0:l<0}(r.startAt,h2(r),i)||r.endAt&&!function(o,a,u){const l=Bpe(o,a,u);return o.inclusive?l>=0:l>0}(r.endAt,h2(r),i))}(e,t)}function p6t(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function ADe(e){return(t,n)=>{let r=!1;for(const i of h2(e)){const s=m6t(i,t,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function m6t(e,t,n){const r=e.field.isKeyField()?Ut.comparator(t.key,n.key):function(s,o,a){const u=o.data.field(s),l=a.data.field(s);return u!==null&&l!==null?Px(u,l):nn()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return nn()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class c_{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,t))return s}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),i=this.inner[r];if(i===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],t))return void(i[s]=[t,n]);i.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(t){ov(this.inner,(n,r)=>{for(const[i,s]of r)t(i,s)})}isEmpty(){return mDe(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g6t=new Fi(Ut.comparator);function Wm(){return g6t}const CDe=new Fi(Ut.comparator);function uC(...e){let t=CDe;for(const n of e)t=t.insert(n.key,n);return t}function IDe(e){let t=CDe;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function N1(){return p2()}function kDe(){return p2()}function p2(){return new c_(e=>e.toString(),(e,t)=>e.isEqual(t))}const y6t=new Fi(Ut.comparator),v6t=new Us(Ut.comparator);function Hn(...e){let t=v6t;for(const n of e)t=t.add(n);return t}const b6t=new Us(Xn);function _6t(){return b6t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tee(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:T3(t)?"-0":t}}function RDe(e){return{integerValue:""+e}}function w6t(e,t){return KLt(t)?RDe(t):tee(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y4{constructor(){this._=void 0}}function E6t(e,t,n){return e instanceof VI?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&XZ(s)&&(s=p4(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,t):e instanceof HI?PDe(e,t):e instanceof qI?ODe(e,t):function(i,s){const o=NDe(i,s),a=Hpe(o)+Hpe(i.Pe);return MH(o)&&MH(i.Pe)?RDe(a):tee(i.serializer,a)}(e,t)}function x6t(e,t,n){return e instanceof HI?PDe(e,t):e instanceof qI?ODe(e,t):n}function NDe(e,t){return e instanceof C3?function(r){return MH(r)||function(s){return!!s&&"doubleValue"in s}(r)}(t)?t:{integerValue:0}:null}class VI extends y4{}class HI extends y4{constructor(t){super(),this.elements=t}}function PDe(e,t){const n=DDe(t);for(const r of e.elements)n.some(i=>jh(i,r))||n.push(r);return{arrayValue:{values:n}}}class qI extends y4{constructor(t){super(),this.elements=t}}function ODe(e,t){let n=DDe(t);for(const r of e.elements)n=n.filter(i=>!jh(i,r));return{arrayValue:{values:n}}}class C3 extends y4{constructor(t,n){super(),this.serializer=t,this.Pe=n}}function Hpe(e){return us(e.integerValue||e.doubleValue)}function DDe(e){return QZ(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S6t{constructor(t,n){this.field=t,this.transform=n}}function T6t(e,t){return e.field.isEqual(t.field)&&function(r,i){return r instanceof HI&&i instanceof HI||r instanceof qI&&i instanceof qI?Nx(r.elements,i.elements,jh):r instanceof C3&&i instanceof C3?jh(r.Pe,i.Pe):r instanceof VI&&i instanceof VI}(e.transform,t.transform)}class A6t{constructor(t,n){this.version=t,this.transformResults=n}}class Xu{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Xu}static exists(t){return new Xu(void 0,t)}static updateTime(t){return new Xu(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function pD(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class v4{}function $De(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new b4(e.key,Xu.none()):new vR(e.key,e.data,Xu.none());{const n=e.data,r=$u.empty();let i=new Us(Po.comparator);for(let s of t.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new av(e.key,r,new Nl(i.toArray()),Xu.none())}}function C6t(e,t,n){e instanceof vR?function(i,s,o){const a=i.value.clone(),u=Wpe(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(e,t,n):e instanceof av?function(i,s,o){if(!pD(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=Wpe(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(MDe(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(e,t,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,t,n)}function m2(e,t,n,r){return e instanceof vR?function(s,o,a,u){if(!pD(s.precondition,o))return a;const l=s.value.clone(),c=Gpe(s.fieldTransforms,u,o);return l.setAll(c),o.convertToFoundDocument(o.version,l).setHasLocalMutations(),null}(e,t,n,r):e instanceof av?function(s,o,a,u){if(!pD(s.precondition,o))return a;const l=Gpe(s.fieldTransforms,u,o),c=o.data;return c.setAll(MDe(s)),c.setAll(l),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(e,t,n,r):function(s,o,a){return pD(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(e,t,n)}function I6t(e,t){let n=null;for(const r of e.fieldTransforms){const i=t.data.field(r.field),s=NDe(r.transform,i||null);s!=null&&(n===null&&(n=$u.empty()),n.set(r.field,s))}return n||null}function qpe(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Nx(r,i,(s,o)=>T6t(s,o))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class vR extends v4{constructor(t,n,r,i=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class av extends v4{constructor(t,n,r,i,s=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MDe(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Wpe(e,t,n){const r=new Map;Cr(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],o=s.transform,a=t.data.field(s.field);r.set(s.field,x6t(o,a,n[i]))}return r}function Gpe(e,t,n){const r=new Map;for(const i of e){const s=i.transform,o=n.data.field(i.field);r.set(i.field,E6t(s,o,t))}return r}class b4 extends v4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class k6t extends v4{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R6t{constructor(t,n,r,i){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(t.key)&&C6t(s,t,r[i])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=m2(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=m2(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=kDe();return this.mutations.forEach(i=>{const s=t.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=$De(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(dn.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),Hn())}isEqual(t){return this.batchId===t.batchId&&Nx(this.mutations,t.mutations,(n,r)=>qpe(n,r))&&Nx(this.baseMutations,t.baseMutations,(n,r)=>qpe(n,r))}}class nee{constructor(t,n,r,i){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(t,n,r){Cr(t.mutations.length===r.length);let i=function(){return y6t}();const s=t.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new nee(t,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N6t{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P6t{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ws,tr;function O6t(e){switch(e){default:return nn();case Be.CANCELLED:case Be.UNKNOWN:case Be.DEADLINE_EXCEEDED:case Be.RESOURCE_EXHAUSTED:case Be.INTERNAL:case Be.UNAVAILABLE:case Be.UNAUTHENTICATED:return!1;case Be.INVALID_ARGUMENT:case Be.NOT_FOUND:case Be.ALREADY_EXISTS:case Be.PERMISSION_DENIED:case Be.FAILED_PRECONDITION:case Be.ABORTED:case Be.OUT_OF_RANGE:case Be.UNIMPLEMENTED:case Be.DATA_LOSS:return!0}}function LDe(e){if(e===void 0)return qm("GRPC error has no .code"),Be.UNKNOWN;switch(e){case ws.OK:return Be.OK;case ws.CANCELLED:return Be.CANCELLED;case ws.UNKNOWN:return Be.UNKNOWN;case ws.DEADLINE_EXCEEDED:return Be.DEADLINE_EXCEEDED;case ws.RESOURCE_EXHAUSTED:return Be.RESOURCE_EXHAUSTED;case ws.INTERNAL:return Be.INTERNAL;case ws.UNAVAILABLE:return Be.UNAVAILABLE;case ws.UNAUTHENTICATED:return Be.UNAUTHENTICATED;case ws.INVALID_ARGUMENT:return Be.INVALID_ARGUMENT;case ws.NOT_FOUND:return Be.NOT_FOUND;case ws.ALREADY_EXISTS:return Be.ALREADY_EXISTS;case ws.PERMISSION_DENIED:return Be.PERMISSION_DENIED;case ws.FAILED_PRECONDITION:return Be.FAILED_PRECONDITION;case ws.ABORTED:return Be.ABORTED;case ws.OUT_OF_RANGE:return Be.OUT_OF_RANGE;case ws.UNIMPLEMENTED:return Be.UNIMPLEMENTED;case ws.DATA_LOSS:return Be.DATA_LOSS;default:return nn()}}(tr=ws||(ws={}))[tr.OK=0]="OK",tr[tr.CANCELLED=1]="CANCELLED",tr[tr.UNKNOWN=2]="UNKNOWN",tr[tr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",tr[tr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",tr[tr.NOT_FOUND=5]="NOT_FOUND",tr[tr.ALREADY_EXISTS=6]="ALREADY_EXISTS",tr[tr.PERMISSION_DENIED=7]="PERMISSION_DENIED",tr[tr.UNAUTHENTICATED=16]="UNAUTHENTICATED",tr[tr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",tr[tr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",tr[tr.ABORTED=10]="ABORTED",tr[tr.OUT_OF_RANGE=11]="OUT_OF_RANGE",tr[tr.UNIMPLEMENTED=12]="UNIMPLEMENTED",tr[tr.INTERNAL=13]="INTERNAL",tr[tr.UNAVAILABLE=14]="UNAVAILABLE",tr[tr.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D6t(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $6t=new H1([4294967295,4294967295],0);function Ype(e){const t=D6t().encode(e),n=new uDe;return n.update(t),new Uint8Array(n.digest())}function Kpe(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),i=t.getUint32(8,!0),s=t.getUint32(12,!0);return[new H1([n,r],0),new H1([i,s],0)]}class ree{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new lC(`Invalid padding: ${n}`);if(r<0)throw new lC(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new lC(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new lC(`Invalid padding when bitmap length is 0: ${n}`);this.Te=8*t.length-n,this.Ie=H1.fromNumber(this.Te)}Ee(t,n,r){let i=t.add(n.multiply(H1.fromNumber(r)));return i.compare($6t)===1&&(i=new H1([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(t){return(this.bitmap[Math.floor(t/8)]&1<<t%8)!=0}mightContain(t){if(this.Te===0)return!1;const n=Ype(t),[r,i]=Kpe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);if(!this.de(o))return!1}return!0}static create(t,n,r){const i=t%8==0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new ree(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(t){if(this.Te===0)return;const n=Ype(t),[r,i]=Kpe(n);for(let s=0;s<this.hashCount;s++){const o=this.Ee(r,i,s);this.Ae(o)}}Ae(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class lC extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _4{constructor(t,n,r,i,s){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const i=new Map;return i.set(t,bR.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new _4(dn.min(),i,new Fi(Xn),Wm(),Hn())}}class bR{constructor(t,n,r,i,s){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new bR(r,n,Hn(),Hn(),Hn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mD{constructor(t,n,r,i){this.Re=t,this.removedTargetIds=n,this.key=r,this.Ve=i}}class FDe{constructor(t,n){this.targetId=t,this.me=n}}class jDe{constructor(t,n,r=Uo.EMPTY_BYTE_STRING,i=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=i}}class Xpe{constructor(){this.fe=0,this.ge=Qpe(),this.pe=Uo.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(t){t.approximateByteSize()>0&&(this.we=!0,this.pe=t)}ve(){let t=Hn(),n=Hn(),r=Hn();return this.ge.forEach((i,s)=>{switch(s){case 0:t=t.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:nn()}}),new bR(this.pe,this.ye,t,n,r)}Ce(){this.we=!1,this.ge=Qpe()}Fe(t,n){this.we=!0,this.ge=this.ge.insert(t,n)}Me(t){this.we=!0,this.ge=this.ge.remove(t)}xe(){this.fe+=1}Oe(){this.fe-=1,Cr(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class M6t{constructor(t){this.Le=t,this.Be=new Map,this.ke=Wm(),this.qe=FP(),this.Qe=FP(),this.Ke=new Fi(Xn)}$e(t){for(const n of t.Re)t.Ve&&t.Ve.isFoundDocument()?this.Ue(n,t.Ve):this.We(n,t.key,t.Ve);for(const n of t.removedTargetIds)this.We(n,t.key,t.Ve)}Ge(t){this.forEachTarget(t,n=>{const r=this.ze(n);switch(t.state){case 0:this.je(n)&&r.De(t.resumeToken);break;case 1:r.Oe(),r.Se||r.Ce(),r.De(t.resumeToken);break;case 2:r.Oe(),r.Se||this.removeTarget(n);break;case 3:this.je(n)&&(r.Ne(),r.De(t.resumeToken));break;case 4:this.je(n)&&(this.He(n),r.De(t.resumeToken));break;default:nn()}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.Be.forEach((r,i)=>{this.je(i)&&n(i)})}Je(t){const n=t.targetId,r=t.me.count,i=this.Ye(n);if(i){const s=i.target;if(FH(s))if(r===0){const o=new Ut(s.path);this.We(n,o,da.newNoDocument(o,dn.min()))}else Cr(r===1);else{const o=this.Ze(n);if(o!==r){const a=this.Xe(t),u=a?this.et(a,t,o):1;if(u!==0){this.He(n);const l=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(n,l)}}}}}Xe(t){const n=t.me.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=_y(r).toUint8Array()}catch(u){if(u instanceof gDe)return LI("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new ree(o,i,s)}catch(u){return LI(u instanceof lC?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.Te===0?null:a}et(t,n,r){return n.me.count===r-this.rt(t,n.targetId)?0:2}rt(t,n){const r=this.Le.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.We(n,s,null),i++)}),i}it(t){const n=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&FH(a.target)){const u=new Ut(a.target.path);this.st(u).has(o)||this.ot(o,u)||this.We(o,u,da.newNoDocument(u,t))}s.be&&(n.set(o,s.ve()),s.Ce())}});let r=Hn();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const l=this.Ye(u);return!l||l.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(t));const i=new _4(t,n,this.Ke,this.ke,r);return this.ke=Wm(),this.qe=FP(),this.Qe=FP(),this.Ke=new Fi(Xn),i}Ue(t,n){if(!this.je(t))return;const r=this.ot(t,n.key)?2:0;this.ze(t).Fe(n.key,r),this.ke=this.ke.insert(n.key,n),this.qe=this.qe.insert(n.key,this.st(n.key).add(t)),this.Qe=this.Qe.insert(n.key,this._t(n.key).add(t))}We(t,n,r){if(!this.je(t))return;const i=this.ze(t);this.ot(t,n)?i.Fe(n,1):i.Me(n),this.Qe=this.Qe.insert(n,this._t(n).delete(t)),this.Qe=this.Qe.insert(n,this._t(n).add(t)),r&&(this.ke=this.ke.insert(n,r))}removeTarget(t){this.Be.delete(t)}Ze(t){const n=this.ze(t).ve();return this.Le.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}xe(t){this.ze(t).xe()}ze(t){let n=this.Be.get(t);return n||(n=new Xpe,this.Be.set(t,n)),n}_t(t){let n=this.Qe.get(t);return n||(n=new Us(Xn),this.Qe=this.Qe.insert(t,n)),n}st(t){let n=this.qe.get(t);return n||(n=new Us(Xn),this.qe=this.qe.insert(t,n)),n}je(t){const n=this.Ye(t)!==null;return n||xt("WatchChangeAggregator","Detected inactive target",t),n}Ye(t){const n=this.Be.get(t);return n&&n.Se?null:this.Le.ut(t)}He(t){this.Be.set(t,new Xpe),this.Le.getRemoteKeysForTarget(t).forEach(n=>{this.We(t,n,null)})}ot(t,n){return this.Le.getRemoteKeysForTarget(t).has(n)}}function FP(){return new Fi(Ut.comparator)}function Qpe(){return new Fi(Ut.comparator)}const L6t={asc:"ASCENDING",desc:"DESCENDING"},F6t={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},j6t={and:"AND",or:"OR"};class B6t{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function UH(e,t){return e.useProto3Json||h4(t)?t:{value:t}}function I3(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function BDe(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function U6t(e,t){return I3(e,t.toTimestamp())}function xh(e){return Cr(!!e),dn.fromTimestamp(function(n){const r=by(n);return new Bs(r.seconds,r.nanos)}(e))}function iee(e,t){return zH(e,t).canonicalString()}function zH(e,t){const n=function(i){return new ci(["projects",i.projectId,"databases",i.database])}(e).child("documents");return t===void 0?n:n.child(t)}function UDe(e){const t=ci.fromString(e);return Cr(WDe(t)),t}function VH(e,t){return iee(e.databaseId,t.path)}function A9(e,t){const n=UDe(t);if(n.get(1)!==e.databaseId.projectId)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new bt(Be.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new Ut(VDe(n))}function zDe(e,t){return iee(e.databaseId,t)}function z6t(e){const t=UDe(e);return t.length===4?ci.emptyPath():VDe(t)}function HH(e){return new ci(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function VDe(e){return Cr(e.length>4&&e.get(4)==="documents"),e.popFirst(5)}function Jpe(e,t,n){return{name:VH(e,t),fields:n.value.mapValue.fields}}function V6t(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(l){return l==="NO_CHANGE"?0:l==="ADD"?1:l==="REMOVE"?2:l==="CURRENT"?3:l==="RESET"?4:nn()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(l,c){return l.useProto3Json?(Cr(c===void 0||typeof c=="string"),Uo.fromBase64String(c||"")):(Cr(c===void 0||c instanceof Buffer||c instanceof Uint8Array),Uo.fromUint8Array(c||new Uint8Array))}(e,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&function(l){const c=l.code===void 0?Be.UNKNOWN:LDe(l.code);return new bt(c,l.message||"")}(o);n=new jDe(r,i,s,a||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=A9(e,r.document.name),s=xh(r.document.updateTime),o=r.document.createTime?xh(r.document.createTime):dn.min(),a=new $u({mapValue:{fields:r.document.fields}}),u=da.newFoundDocument(i,s,o,a),l=r.targetIds||[],c=r.removedTargetIds||[];n=new mD(l,c,u.key,u)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=A9(e,r.document),s=r.readTime?xh(r.readTime):dn.min(),o=da.newNoDocument(i,s),a=r.removedTargetIds||[];n=new mD([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=A9(e,r.document),s=r.removedTargetIds||[];n=new mD([],s,i,null)}else{if(!("filter"in t))return nn();{t.filter;const r=t.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new P6t(i,s),a=r.targetId;n=new FDe(a,o)}}return n}function H6t(e,t){let n;if(t instanceof vR)n={update:Jpe(e,t.key,t.value)};else if(t instanceof b4)n={delete:VH(e,t.key)};else if(t instanceof av)n={update:Jpe(e,t.key,t.data),updateMask:Z6t(t.fieldMask)};else{if(!(t instanceof k6t))return nn();n={verify:VH(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof VI)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof HI)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof qI)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof C3)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw nn()}(0,r))),t.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:U6t(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:nn()}(e,t.precondition)),n}function q6t(e,t){return e&&e.length>0?(Cr(t!==void 0),e.map(n=>function(i,s){let o=i.updateTime?xh(i.updateTime):xh(s);return o.isEqual(dn.min())&&(o=xh(s)),new A6t(o,i.transformResults||[])}(n,t))):[]}function W6t(e,t){return{documents:[zDe(e,t.path)]}}function G6t(e,t){const n={structuredQuery:{}},r=t.path;let i;t.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=zDe(e,i);const s=function(l){if(l.length!==0)return qDe(nd.create(l,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const o=function(l){if(l.length!==0)return l.map(c=>function(d){return{field:Tw(d.field),direction:X6t(d.dir)}}(c))}(t.orderBy);o&&(n.structuredQuery.orderBy=o);const a=UH(e,t.limit);return a!==null&&(n.structuredQuery.limit=a),t.startAt&&(n.structuredQuery.startAt=function(l){return{before:l.inclusive,values:l.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(l){return{before:!l.inclusive,values:l.position}}(t.endAt)),{ct:n,parent:i}}function Y6t(e){let t=z6t(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Cr(r===1);const c=n.from[0];c.allDescendants?i=c.collectionId:t=t.child(c.collectionId)}let s=[];n.where&&(s=function(f){const d=HDe(f);return d instanceof nd&&_De(d)?d.getFilters():[d]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(d=>function(p){return new zI(Aw(p.field),function(g){switch(g){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(d))}(n.orderBy));let a=null;n.limit&&(a=function(f){let d;return d=typeof f=="object"?f.value:f,h4(d)?null:d}(n.limit));let u=null;n.startAt&&(u=function(f){const d=!!f.before,h=f.values||[];return new A3(h,d)}(n.startAt));let l=null;return n.endAt&&(l=function(f){const d=!f.before,h=f.values||[];return new A3(h,d)}(n.endAt)),d6t(t,i,o,s,a,"F",u,l)}function K6t(e,t){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return nn()}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function HDe(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Aw(n.unaryFilter.field);return Ss.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Aw(n.unaryFilter.field);return Ss.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Aw(n.unaryFilter.field);return Ss.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Aw(n.unaryFilter.field);return Ss.create(o,"!=",{nullValue:"NULL_VALUE"});default:return nn()}}(e):e.fieldFilter!==void 0?function(n){return Ss.create(Aw(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return nn()}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return nd.create(n.compositeFilter.filters.map(r=>HDe(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return nn()}}(n.compositeFilter.op))}(e):nn()}function X6t(e){return L6t[e]}function Q6t(e){return F6t[e]}function J6t(e){return j6t[e]}function Tw(e){return{fieldPath:e.canonicalString()}}function Aw(e){return Po.fromServerFormat(e.fieldPath)}function qDe(e){return e instanceof Ss?function(n){if(n.op==="=="){if(jpe(n.value))return{unaryFilter:{field:Tw(n.field),op:"IS_NAN"}};if(Fpe(n.value))return{unaryFilter:{field:Tw(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jpe(n.value))return{unaryFilter:{field:Tw(n.field),op:"IS_NOT_NAN"}};if(Fpe(n.value))return{unaryFilter:{field:Tw(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Tw(n.field),op:Q6t(n.op),value:n.value}}}(e):e instanceof nd?function(n){const r=n.getFilters().map(i=>qDe(i));return r.length===1?r[0]:{compositeFilter:{op:J6t(n.op),filters:r}}}(e):nn()}function Z6t(e){const t=[];return e.fields.forEach(n=>t.push(n.canonicalString())),{fieldPaths:t}}function WDe(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d0{constructor(t,n,r,i,s=dn.min(),o=dn.min(),a=Uo.EMPTY_BYTE_STRING,u=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(t){return new d0(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new d0(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new d0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new d0(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eFt{constructor(t){this.ht=t}}function tFt(e){const t=Y6t({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?BH(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nFt{constructor(){this.ln=new rFt}addToCollectionParentIndex(t,n){return this.ln.add(n),Ue.resolve()}getCollectionParents(t,n){return Ue.resolve(this.ln.getEntries(n))}addFieldIndex(t,n){return Ue.resolve()}deleteFieldIndex(t,n){return Ue.resolve()}deleteAllFieldIndexes(t){return Ue.resolve()}createTargetIndexes(t,n){return Ue.resolve()}getDocumentsMatchingTarget(t,n){return Ue.resolve(null)}getIndexType(t,n){return Ue.resolve(0)}getFieldIndexes(t,n){return Ue.resolve([])}getNextCollectionGroupToUpdate(t){return Ue.resolve(null)}getMinOffset(t,n){return Ue.resolve(vy.min())}getMinOffsetFromCollectionGroup(t,n){return Ue.resolve(vy.min())}updateCollectionGroup(t,n,r){return Ue.resolve()}updateIndexEntries(t,n){return Ue.resolve()}}class rFt{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n]||new Us(ci.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(t){const n=t.lastSegment(),r=t.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(t){return(this.index[t]||new Us(ci.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zpe={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Su{static withCacheSize(t){return new Su(t,Su.DEFAULT_COLLECTION_PERCENTILE,Su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Su.DEFAULT_COLLECTION_PERCENTILE=10,Su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Su.DEFAULT=new Su(41943040,Su.DEFAULT_COLLECTION_PERCENTILE,Su.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Su.DISABLED=new Su(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dx{constructor(t){this.kn=t}next(){return this.kn+=2,this.kn}static qn(){return new Dx(0)}static Qn(){return new Dx(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eme([e,t],[n,r]){const i=Xn(e,n);return i===0?Xn(t,r):i}class iFt{constructor(t){this.Gn=t,this.buffer=new Us(eme),this.zn=0}jn(){return++this.zn}Hn(t){const n=[t,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();eme(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class sFt{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(t){xt("LruGarbageCollector",`Garbage collection scheduled in ${t}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){nT(n)?xt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",n):await tT(n)}await this.Yn(3e5)})}}class oFt{constructor(t,n){this.Zn=t,this.params=n}calculateTargetCount(t,n){return this.Zn.Xn(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return Ue.resolve(d4.oe);const r=new iFt(n);return this.Zn.forEachTarget(t,i=>r.Hn(i.sequenceNumber)).next(()=>this.Zn.er(t,i=>r.Hn(i))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Zn.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Zn.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(xt("LruGarbageCollector","Garbage collection skipped; disabled"),Ue.resolve(Zpe)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(xt("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Zpe):this.tr(t,n))}getCacheSize(t){return this.Zn.getCacheSize(t)}tr(t,n){let r,i,s,o,a,u,l;const c=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(xt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(t,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(t,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(t,r))).next(f=>(l=Date.now(),xw()<=Vn.DEBUG&&xt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-c}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(l-u)+`ms
Total Duration: ${l-c}ms`),Ue.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function aFt(e,t){return new oFt(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uFt{constructor(){this.changes=new c_(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,da.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?Ue.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lFt{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cFt{constructor(t,n,r,i){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(t,n))).next(i=>(r!==null&&m2(r.mutation,i,Nl.empty(),Bs.now()),i))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,Hn()).next(()=>r))}getLocalViewOfDocuments(t,n,r=Hn()){const i=N1();return this.populateOverlays(t,i,n).next(()=>this.computeViews(t,n,i,r).next(s=>{let o=uC();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(t,n){const r=N1();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,Hn()))}populateOverlays(t,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(t,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(t,n,r,i){let s=Wm();const o=p2(),a=function(){return p2()}();return n.forEach((u,l)=>{const c=r.get(l.key);i.has(l.key)&&(c===void 0||c.mutation instanceof av)?s=s.insert(l.key,l):c!==void 0?(o.set(l.key,c.mutation.getFieldMask()),m2(c.mutation,l,c.mutation.getFieldMask(),Bs.now())):o.set(l.key,Nl.empty())}),this.recalculateAndSaveOverlays(t,s).next(u=>(u.forEach((l,c)=>o.set(l,c)),n.forEach((l,c)=>{var f;return a.set(l,new lFt(c,(f=o.get(l))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(t,n){const r=p2();let i=new Fi((o,a)=>o-a),s=Hn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const l=n.get(u);if(l===null)return;let c=r.get(u)||Nl.empty();c=a.applyToLocalView(l,c),r.set(u,c);const f=(i.get(a.batchId)||Hn()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),l=u.key,c=u.value,f=kDe();c.forEach(d=>{if(!s.has(d)){const h=$De(n.get(d),r.get(d));h!==null&&f.set(d,h),s=s.add(d)}}),o.push(this.documentOverlayCache.saveOverlays(t,l,f))}return Ue.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,i){return function(o){return Ut.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):SDe(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,i):this.getDocumentsMatchingCollectionQuery(t,n,r,i)}getNextDocuments(t,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,i-s.size):Ue.resolve(N1());let a=-1,u=s;return o.next(l=>Ue.forEach(l,(c,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(c)?Ue.resolve():this.remoteDocumentCache.getEntry(t,c).next(d=>{u=u.insert(c,d)}))).next(()=>this.populateOverlays(t,l,s)).next(()=>this.computeViews(t,u,l,Hn())).next(c=>({batchId:a,changes:IDe(c)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new Ut(n)).next(r=>{let i=uC();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(t,n,r,i){const s=n.collectionGroup;let o=uC();return this.indexManager.getCollectionParents(t,s).next(a=>Ue.forEach(a,u=>{const l=function(f,d){return new rT(d,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(t,l,r,i).next(c=>{c.forEach((f,d)=>{o=o.insert(f,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,s,i))).next(o=>{s.forEach((u,l)=>{const c=l.getKey();o.get(c)===null&&(o=o.insert(c,da.newInvalidDocument(c)))});let a=uC();return o.forEach((u,l)=>{const c=s.get(u);c!==void 0&&m2(c.mutation,l,Nl.empty(),Bs.now()),g4(n,l)&&(a=a.insert(u,l))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fFt{constructor(t){this.serializer=t,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(t,n){return Ue.resolve(this.Tr.get(n))}saveBundleMetadata(t,n){return this.Tr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:xh(i.createTime)}}(n)),Ue.resolve()}getNamedQuery(t,n){return Ue.resolve(this.Ir.get(n))}saveNamedQuery(t,n){return this.Ir.set(n.name,function(i){return{name:i.name,query:tFt(i.bundledQuery),readTime:xh(i.readTime)}}(n)),Ue.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dFt{constructor(){this.overlays=new Fi(Ut.comparator),this.Er=new Map}getOverlay(t,n){return Ue.resolve(this.overlays.get(n))}getOverlays(t,n){const r=N1();return Ue.forEach(n,i=>this.getOverlay(t,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((i,s)=>{this.Tt(t,n,s)}),Ue.resolve()}removeOverlaysForBatchId(t,n,r){const i=this.Er.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(r)),Ue.resolve()}getOverlaysForCollection(t,n,r){const i=N1(),s=n.length+1,o=new Ut(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,l=u.getKey();if(!n.isPrefixOf(l.path))break;l.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return Ue.resolve(i)}getOverlaysForCollectionGroup(t,n,r,i){let s=new Fi((l,c)=>l-c);const o=this.overlays.getIterator();for(;o.hasNext();){const l=o.getNext().value;if(l.getKey().getCollectionGroup()===n&&l.largestBatchId>r){let c=s.get(l.largestBatchId);c===null&&(c=N1(),s=s.insert(l.largestBatchId,c)),c.set(l.getKey(),l)}}const a=N1(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((l,c)=>a.set(l,c)),!(a.size()>=i)););return Ue.resolve(a)}Tt(t,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Er.get(i.largestBatchId).delete(r.key);this.Er.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new N6t(n,r));let s=this.Er.get(n);s===void 0&&(s=Hn(),this.Er.set(n,s)),this.Er.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hFt{constructor(){this.sessionToken=Uo.EMPTY_BYTE_STRING}getSessionToken(t){return Ue.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,Ue.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class see{constructor(){this.dr=new Us(Zs.Ar),this.Rr=new Us(Zs.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(t,n){const r=new Zs(t,n);this.dr=this.dr.add(r),this.Rr=this.Rr.add(r)}mr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.gr(new Zs(t,n))}pr(t,n){t.forEach(r=>this.removeReference(r,n))}yr(t){const n=new Ut(new ci([])),r=new Zs(n,t),i=new Zs(n,t+1),s=[];return this.Rr.forEachInRange([r,i],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(t=>this.gr(t))}gr(t){this.dr=this.dr.delete(t),this.Rr=this.Rr.delete(t)}Sr(t){const n=new Ut(new ci([])),r=new Zs(n,t),i=new Zs(n,t+1);let s=Hn();return this.Rr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(t){const n=new Zs(t,0),r=this.dr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Zs{constructor(t,n){this.key=t,this.br=n}static Ar(t,n){return Ut.comparator(t.key,n.key)||Xn(t.br,n.br)}static Vr(t,n){return Xn(t.br,n.br)||Ut.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pFt{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Dr=1,this.vr=new Us(Zs.Ar)}checkEmpty(t){return Ue.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,i){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new R6t(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.vr=this.vr.add(new Zs(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return Ue.resolve(o)}lookupMutationBatch(t,n){return Ue.resolve(this.Cr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,i=this.Fr(r),s=i<0?0:i;return Ue.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ue.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(t){return Ue.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Zs(n,0),i=new Zs(n,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([r,i],o=>{const a=this.Cr(o.br);s.push(a)}),Ue.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new Us(Xn);return n.forEach(i=>{const s=new Zs(i,0),o=new Zs(i,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{r=r.add(a.br)})}),Ue.resolve(this.Mr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,i=r.length+1;let s=r;Ut.isDocumentKey(s)||(s=s.child(""));const o=new Zs(new Ut(s),0);let a=new Us(Xn);return this.vr.forEachWhile(u=>{const l=u.key.path;return!!r.isPrefixOf(l)&&(l.length===i&&(a=a.add(u.br)),!0)},o),Ue.resolve(this.Mr(a))}Mr(t){const n=[];return t.forEach(r=>{const i=this.Cr(r);i!==null&&n.push(i)}),n}removeMutationBatch(t,n){Cr(this.Or(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.vr;return Ue.forEach(n.mutations,i=>{const s=new Zs(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(()=>{this.vr=r})}Ln(t){}containsKey(t,n){const r=new Zs(n,0),i=this.vr.firstAfterOrEqual(r);return Ue.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(t){return this.mutationQueue.length,Ue.resolve()}Or(t,n){return this.Fr(t)}Fr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Cr(t){const n=this.Fr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mFt{constructor(t){this.Nr=t,this.docs=function(){return new Fi(Ut.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.Nr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return Ue.resolve(r?r.document.mutableCopy():da.newInvalidDocument(n))}getEntries(t,n){let r=Wm();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():da.newInvalidDocument(i))}),Ue.resolve(r)}getDocumentsMatchingQuery(t,n,r,i){let s=Wm();const o=n.path,a=new Ut(o.child("")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:l,value:{document:c}}=u.getNext();if(!o.isPrefixOf(l.path))break;l.path.length>o.length+1||qLt(HLt(c),r)<=0||(i.has(c.key)||g4(n,c))&&(s=s.insert(c.key,c.mutableCopy()))}return Ue.resolve(s)}getAllFromCollectionGroup(t,n,r,i){nn()}Lr(t,n){return Ue.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new gFt(this)}getSize(t){return Ue.resolve(this.size)}}class gFt extends uFt{constructor(t){super(),this.hr=t}applyChanges(t){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.hr.addEntry(t,i)):this.hr.removeEntry(r)}),Ue.waitFor(n)}getFromCache(t,n){return this.hr.getEntry(t,n)}getAllFromCache(t,n){return this.hr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yFt{constructor(t){this.persistence=t,this.Br=new c_(n=>JZ(n),ZZ),this.lastRemoteSnapshotVersion=dn.min(),this.highestTargetId=0,this.kr=0,this.qr=new see,this.targetCount=0,this.Qr=Dx.qn()}forEachTarget(t,n){return this.Br.forEach((r,i)=>n(i)),Ue.resolve()}getLastRemoteSnapshotVersion(t){return Ue.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return Ue.resolve(this.kr)}allocateTargetId(t){return this.highestTargetId=this.Qr.next(),Ue.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.kr&&(this.kr=n),Ue.resolve()}Un(t){this.Br.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.Qr=new Dx(n),this.highestTargetId=n),t.sequenceNumber>this.kr&&(this.kr=t.sequenceNumber)}addTargetData(t,n){return this.Un(n),this.targetCount+=1,Ue.resolve()}updateTargetData(t,n){return this.Un(n),Ue.resolve()}removeTargetData(t,n){return this.Br.delete(n.target),this.qr.yr(n.targetId),this.targetCount-=1,Ue.resolve()}removeTargets(t,n,r){let i=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),Ue.waitFor(s).next(()=>i)}getTargetCount(t){return Ue.resolve(this.targetCount)}getTargetData(t,n){const r=this.Br.get(n)||null;return Ue.resolve(r)}addMatchingKeys(t,n,r){return this.qr.mr(n,r),Ue.resolve()}removeMatchingKeys(t,n,r){this.qr.pr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(t,o))}),Ue.waitFor(s)}removeMatchingKeysForTargetId(t,n){return this.qr.yr(n),Ue.resolve()}getMatchingKeysForTargetId(t,n){const r=this.qr.Sr(n);return Ue.resolve(r)}containsKey(t,n){return Ue.resolve(this.qr.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GDe{constructor(t,n){this.Kr={},this.overlays={},this.$r=new d4(0),this.Ur=!1,this.Ur=!0,this.Wr=new hFt,this.referenceDelegate=t(this),this.Gr=new yFt(this),this.indexManager=new nFt,this.remoteDocumentCache=function(i){return new mFt(i)}(r=>this.referenceDelegate.zr(r)),this.serializer=new eFt(n),this.jr=new fFt(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new dFt,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.Kr[t.toKey()];return r||(r=new pFt(n,this.referenceDelegate),this.Kr[t.toKey()]=r),r}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(t,n,r){xt("MemoryPersistence","Starting transaction:",t);const i=new vFt(this.$r.next());return this.referenceDelegate.Hr(),r(i).next(s=>this.referenceDelegate.Jr(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Yr(t,n){return Ue.or(Object.values(this.Kr).map(r=>()=>r.containsKey(t,n)))}}class vFt extends GLt{constructor(t){super(),this.currentSequenceNumber=t}}class oee{constructor(t){this.persistence=t,this.Zr=new see,this.Xr=null}static ei(t){return new oee(t)}get ti(){if(this.Xr)return this.Xr;throw nn()}addReference(t,n,r){return this.Zr.addReference(r,n),this.ti.delete(r.toString()),Ue.resolve()}removeReference(t,n,r){return this.Zr.removeReference(r,n),this.ti.add(r.toString()),Ue.resolve()}markPotentiallyOrphaned(t,n){return this.ti.add(n.toString()),Ue.resolve()}removeTarget(t,n){this.Zr.yr(n.targetId).forEach(i=>this.ti.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(i=>{i.forEach(s=>this.ti.add(s.toString()))}).next(()=>r.removeTargetData(t,n))}Hr(){this.Xr=new Set}Jr(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ue.forEach(this.ti,r=>{const i=Ut.fromPath(r);return this.ni(t,i).next(s=>{s||n.removeEntry(i,dn.min())})}).next(()=>(this.Xr=null,n.apply(t)))}updateLimboDocument(t,n){return this.ni(t,n).next(r=>{r?this.ti.delete(n.toString()):this.ti.add(n.toString())})}zr(t){return 0}ni(t,n){return Ue.or([()=>Ue.resolve(this.Zr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Yr(t,n)])}}class k3{constructor(t,n){this.persistence=t,this.ri=new c_(r=>XLt(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=aFt(this,n)}static ei(t,n){return new k3(t,n)}Hr(){}Jr(t){return Ue.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}Xn(t){const n=this.nr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(i=>r+i))}nr(t){let n=0;return this.er(t,r=>{n++}).next(()=>n)}er(t,n){return Ue.forEach(this.ri,(r,i)=>this.ir(t,r,i).next(s=>s?Ue.resolve():n(i)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.Lr(t,o=>this.ir(t,o,n).next(a=>{a||(r++,s.removeEntry(o,dn.min()))})).next(()=>s.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.ri.set(n,t.currentSequenceNumber),Ue.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),Ue.resolve()}removeReference(t,n,r){return this.ri.set(r,t.currentSequenceNumber),Ue.resolve()}updateLimboDocument(t,n){return this.ri.set(n,t.currentSequenceNumber),Ue.resolve()}zr(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=dD(t.data.value)),n}ir(t,n,r){return Ue.or([()=>this.persistence.Yr(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const i=this.ri.get(n);return Ue.resolve(i!==void 0&&i>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aee{constructor(t,n,r,i){this.targetId=t,this.fromCache=n,this.Wi=r,this.Gi=i}static zi(t,n){let r=Hn(),i=Hn();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new aee(t,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bFt{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _Ft{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return QOt()?8:YLt(Sa())>0?6:4}()}initialize(t,n){this.Zi=t,this.indexManager=n,this.ji=!0}getDocumentsMatchingQuery(t,n,r,i){const s={result:null};return this.Xi(t,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(t,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new bFt;return this.ts(t,n,o).next(a=>{if(s.result=a,this.Hi)return this.ns(t,n,o,a.size)})}).next(()=>s.result)}ns(t,n,r,i){return r.documentReadCount<this.Ji?(xw()<=Vn.DEBUG&&xt("QueryEngine","SDK will not create cache indexes for query:",Sw(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Ue.resolve()):(xw()<=Vn.DEBUG&&xt("QueryEngine","Query:",Sw(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.Yi*i?(xw()<=Vn.DEBUG&&xt("QueryEngine","The SDK decides to create cache indexes for query:",Sw(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Eh(n))):Ue.resolve())}Xi(t,n){if(Vpe(n))return Ue.resolve(null);let r=Eh(n);return this.indexManager.getIndexType(t,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=BH(n,null,"F"),r=Eh(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(s=>{const o=Hn(...s);return this.Zi.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,r).next(u=>{const l=this.rs(n,a);return this.ss(n,l,o,u.readTime)?this.Xi(t,BH(n,null,"F")):this.os(t,l,n,u)}))})))}es(t,n,r,i){return Vpe(n)||i.isEqual(dn.min())?Ue.resolve(null):this.Zi.getDocuments(t,r).next(s=>{const o=this.rs(n,s);return this.ss(n,o,r,i)?Ue.resolve(null):(xw()<=Vn.DEBUG&&xt("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Sw(n)),this.os(t,o,n,VLt(i,-1)).next(a=>a))})}rs(t,n){let r=new Us(ADe(t));return n.forEach((i,s)=>{g4(t,s)&&(r=r.add(s))}),r}ss(t,n,r,i){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const s=t.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ts(t,n,r){return xw()<=Vn.DEBUG&&xt("QueryEngine","Using full collection scan to execute query:",Sw(n)),this.Zi.getDocumentsMatchingQuery(t,n,vy.min(),r)}os(t,n,r,i){return this.Zi.getDocumentsMatchingQuery(t,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wFt{constructor(t,n,r,i){this.persistence=t,this._s=n,this.serializer=i,this.us=new Fi(Xn),this.cs=new c_(s=>JZ(s),ZZ),this.ls=new Map,this.hs=t.getRemoteDocumentCache(),this.Gr=t.getTargetCache(),this.jr=t.getBundleCache(),this.Ps(r)}Ps(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new cFt(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.us))}}function EFt(e,t,n,r){return new wFt(e,t,n,r)}async function YDe(e,t){const n=hn(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Ps(t),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=Hn();for(const l of i){o.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}for(const l of s){a.push(l.batchId);for(const c of l.mutations)u=u.add(c.key)}return n.localDocuments.getDocuments(r,u).next(l=>({Ts:l,removedBatchIds:o,addedBatchIds:a}))})})}function xFt(e,t){const n=hn(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=t.batch.keys(),s=n.hs.newChangeBuffer({trackRemovals:!0});return function(a,u,l,c){const f=l.batch,d=f.keys();let h=Ue.resolve();return d.forEach(p=>{h=h.next(()=>c.getEntry(u,p)).next(m=>{const g=l.docVersions.get(p);Cr(g!==null),m.version.compareTo(g)<0&&(f.applyToRemoteDocument(m,l),m.isValidDocument()&&(m.setReadTime(l.commitVersion),c.addEntry(m)))})}),h.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,t,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=Hn();for(let l=0;l<a.mutationResults.length;++l)a.mutationResults[l].transformResults.length>0&&(u=u.add(a.batch.mutations[l].key));return u}(t))).next(()=>n.localDocuments.getDocuments(r,i))})}function KDe(e){const t=hn(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.Gr.getLastRemoteSnapshotVersion(n))}function SFt(e,t){const n=hn(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((c,f)=>{const d=i.get(f);if(!d)return;a.push(n.Gr.removeMatchingKeys(s,c.removedDocuments,f).next(()=>n.Gr.addMatchingKeys(s,c.addedDocuments,f)));let h=d.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(f)!==null?h=h.withResumeToken(Uo.EMPTY_BYTE_STRING,dn.min()).withLastLimboFreeSnapshotVersion(dn.min()):c.resumeToken.approximateByteSize()>0&&(h=h.withResumeToken(c.resumeToken,r)),i=i.insert(f,h),function(m,g,y){return m.resumeToken.approximateByteSize()===0||g.snapshotVersion.toMicroseconds()-m.snapshotVersion.toMicroseconds()>=3e8?!0:y.addedDocuments.size+y.modifiedDocuments.size+y.removedDocuments.size>0}(d,h,c)&&a.push(n.Gr.updateTargetData(s,h))});let u=Wm(),l=Hn();if(t.documentUpdates.forEach(c=>{t.resolvedLimboDocuments.has(c)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,c))}),a.push(TFt(s,o,t.documentUpdates).next(c=>{u=c.Is,l=c.Es})),!r.isEqual(dn.min())){const c=n.Gr.getLastRemoteSnapshotVersion(s).next(f=>n.Gr.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(c)}return Ue.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,l)).next(()=>u)}).then(s=>(n.us=i,s))}function TFt(e,t,n){let r=Hn(),i=Hn();return n.forEach(s=>r=r.add(s)),t.getEntries(e,r).next(s=>{let o=Wm();return n.forEach((a,u)=>{const l=s.get(a);u.isFoundDocument()!==l.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(dn.min())?(t.removeEntry(a,u.readTime),o=o.insert(a,u)):!l.isValidDocument()||u.version.compareTo(l.version)>0||u.version.compareTo(l.version)===0&&l.hasPendingWrites?(t.addEntry(u),o=o.insert(a,u)):xt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",l.version," Watch version:",u.version)}),{Is:o,Es:i}})}function AFt(e,t){const n=hn(e);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(t===void 0&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t)))}function CFt(e,t){const n=hn(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Gr.getTargetData(r,t).next(s=>s?(i=s,Ue.resolve(i)):n.Gr.allocateTargetId(r).next(o=>(i=new d0(t,o,"TargetPurposeListen",r.currentSequenceNumber),n.Gr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.us.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.us=n.us.insert(r.targetId,r),n.cs.set(t,r.targetId)),r})}async function qH(e,t,n){const r=hn(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!nT(o))throw o;xt("LocalStore",`Failed to update sequence numbers for target ${t}: ${o}`)}r.us=r.us.remove(t),r.cs.delete(i.target)}function tme(e,t,n){const r=hn(e);let i=dn.min(),s=Hn();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,l,c){const f=hn(u),d=f.cs.get(c);return d!==void 0?Ue.resolve(f.us.get(d)):f.Gr.getTargetData(l,c)}(r,o,Eh(t)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r._s.getDocumentsMatchingQuery(o,t,n?i:dn.min(),n?s:Hn())).next(a=>(IFt(r,p6t(t),a),{documents:a,ds:s})))}function IFt(e,t,n){let r=e.ls.get(t)||dn.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),e.ls.set(t,r)}class nme{constructor(){this.activeTargetIds=_6t()}ps(t){this.activeTargetIds=this.activeTargetIds.add(t)}ys(t){this.activeTargetIds=this.activeTargetIds.delete(t)}gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class kFt{constructor(){this._o=new nme,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this._o.ps(t),this.ao[t]||"not-current"}updateQueryState(t,n,r){this.ao[t]=n}removeLocalQueryTarget(t){this._o.ys(t)}isLocalQueryTarget(t){return this._o.activeTargetIds.has(t)}clearQueryState(t){delete this.ao[t]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(t){return this._o.activeTargetIds.has(t)}start(){return this._o=new nme,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RFt{uo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rme{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(t){this.To.push(t)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){xt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const t of this.To)t(0)}Po(){xt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const t of this.To)t(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jP=null;function C9(){return jP===null?jP=function(){return 268435456+Math.round(2147483648*Math.random())}():jP++,"0x"+jP.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NFt={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PFt{constructor(t){this.Eo=t.Eo,this.Ao=t.Ao}Ro(t){this.Vo=t}mo(t){this.fo=t}po(t){this.yo=t}onMessage(t){this.wo=t}close(){this.Ao()}send(t){this.Eo(t)}So(){this.Vo()}bo(){this.fo()}Do(t){this.yo(t)}vo(t){this.wo(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ia="WebChannelConnection";class OFt extends class{get Co(){return!1}constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=r+"://"+n.host,this.Mo=`projects/${i}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}Oo(n,r,i,s,o){const a=C9(),u=this.No(n,r.toUriEncodedString());xt("RestConnection",`Sending RPC '${n}' ${a}:`,u,i);const l={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(l,s,o),this.Bo(n,u,l,i).then(c=>(xt("RestConnection",`Received RPC '${n}' ${a}: `,c),c),c=>{throw LI("RestConnection",`RPC '${n}' ${a} failed with error: `,c,"url: ",u,"request:",i),c})}ko(n,r,i,s,o,a){return this.Oo(n,r,i,s,o)}Lo(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+eT}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}No(n,r){const i=NFt[n];return`${this.Fo}/v1/${r}:${i}`}terminate(){}}{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Bo(t,n,r,i){const s=C9();return new Promise((o,a)=>{const u=new lDe;u.setWithCredentials(!0),u.listenOnce(cDe.COMPLETE,()=>{try{switch(u.getLastErrorCode()){case fD.NO_ERROR:const c=u.getResponseJson();xt(ia,`XHR for RPC '${t}' ${s} received:`,JSON.stringify(c)),o(c);break;case fD.TIMEOUT:xt(ia,`RPC '${t}' ${s} timed out`),a(new bt(Be.DEADLINE_EXCEEDED,"Request time out"));break;case fD.HTTP_ERROR:const f=u.getStatus();if(xt(ia,`RPC '${t}' ${s} failed with status:`,f,"response text:",u.getResponseText()),f>0){let d=u.getResponseJson();Array.isArray(d)&&(d=d[0]);const h=d==null?void 0:d.error;if(h&&h.status&&h.message){const p=function(g){const y=g.toLowerCase().replace(/_/g,"-");return Object.values(Be).indexOf(y)>=0?y:Be.UNKNOWN}(h.status);a(new bt(p,h.message))}else a(new bt(Be.UNKNOWN,"Server responded with status "+u.getStatus()))}else a(new bt(Be.UNAVAILABLE,"Connection failed."));break;default:nn()}}finally{xt(ia,`RPC '${t}' ${s} completed.`)}});const l=JSON.stringify(i);xt(ia,`RPC '${t}' ${s} sending request:`,i),u.send(n,"POST",l,r,15)})}qo(t,n,r){const i=C9(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",t,"/channel"],o=hDe(),a=dDe(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;l!==void 0&&(u.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(u.useFetchStreams=!0),this.Lo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const c=s.join("");xt(ia,`Creating RPC '${t}' stream ${i}: ${c}`,u);const f=o.createWebChannel(c,u);let d=!1,h=!1;const p=new PFt({Eo:g=>{h?xt(ia,`Not sending because RPC '${t}' stream ${i} is closed:`,g):(d||(xt(ia,`Opening RPC '${t}' stream ${i} transport.`),f.open(),d=!0),xt(ia,`RPC '${t}' stream ${i} sending:`,g),f.send(g))},Ao:()=>f.close()}),m=(g,y,v)=>{g.listen(y,b=>{try{v(b)}catch(w){setTimeout(()=>{throw w},0)}})};return m(f,aC.EventType.OPEN,()=>{h||(xt(ia,`RPC '${t}' stream ${i} transport opened.`),p.So())}),m(f,aC.EventType.CLOSE,()=>{h||(h=!0,xt(ia,`RPC '${t}' stream ${i} transport closed`),p.Do())}),m(f,aC.EventType.ERROR,g=>{h||(h=!0,LI(ia,`RPC '${t}' stream ${i} transport errored:`,g),p.Do(new bt(Be.UNAVAILABLE,"The operation could not be completed")))}),m(f,aC.EventType.MESSAGE,g=>{var y;if(!h){const v=g.data[0];Cr(!!v);const b=v,w=(b==null?void 0:b.error)||((y=b[0])===null||y===void 0?void 0:y.error);if(w){xt(ia,`RPC '${t}' stream ${i} received error:`,w);const E=w.status;let T=function(C){const k=ws[C];if(k!==void 0)return LDe(k)}(E),S=w.message;T===void 0&&(T=Be.INTERNAL,S="Unknown error status: "+E+" with message "+w.message),h=!0,p.Do(new bt(T,S)),f.close()}else xt(ia,`RPC '${t}' stream ${i} received:`,v),p.vo(v)}}),m(a,fDe.STAT_EVENT,g=>{g.stat===DH.PROXY?xt(ia,`RPC '${t}' stream ${i} detected buffering proxy`):g.stat===DH.NOPROXY&&xt(ia,`RPC '${t}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.bo()},0),p}}function I9(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function w4(e){return new B6t(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XDe{constructor(t,n,r=1e3,i=1.5,s=6e4){this.li=t,this.timerId=n,this.Qo=r,this.Ko=i,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(t){this.cancel();const n=Math.floor(this.Uo+this.Ho()),r=Math.max(0,Date.now()-this.Go),i=Math.max(0,n-r);i>0&&xt("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Uo} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,i,()=>(this.Go=Date.now(),t())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QDe{constructor(t,n,r,i,s,o,a,u){this.li=t,this.Yo=r,this.Zo=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new XDe(t,n)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(t){this.l_(),this.stream.send(t)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(t,n){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,t!==4?this.r_.reset():n&&n.code===Be.RESOURCE_EXHAUSTED?(qm(n.toString()),qm("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):n&&n.code===Be.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.po(n)}P_(){}auth(){this.state=1;const t=this.T_(this.Xo),n=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Xo===n&&this.I_(r,i)},r=>{t(()=>{const i=new bt(Be.UNKNOWN,"Fetching auth token failed: "+r.message);return this.E_(i)})})}I_(t,n){const r=this.T_(this.Xo);this.stream=this.d_(t,n),this.stream.Ro(()=>{r(()=>this.listener.Ro())}),this.stream.mo(()=>{r(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(i=>{r(()=>this.E_(i))}),this.stream.onMessage(i=>{r(()=>++this.n_==1?this.A_(i):this.onNext(i))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(t){return xt("PersistentStream",`close with error: ${t}`),this.stream=null,this.close(4,t)}T_(t){return n=>{this.li.enqueueAndForget(()=>this.Xo===t?n():(xt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class DFt extends QDe{constructor(t,n,r,i,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}d_(t,n){return this.connection.qo("Listen",t,n)}A_(t){return this.onNext(t)}onNext(t){this.r_.reset();const n=V6t(this.serializer,t),r=function(s){if(!("targetChange"in s))return dn.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?dn.min():o.readTime?xh(o.readTime):dn.min()}(t);return this.listener.R_(n,r)}V_(t){const n={};n.database=HH(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=FH(u)?{documents:W6t(s,u)}:{query:G6t(s,u).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=BDe(s,o.resumeToken);const l=UH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}else if(o.snapshotVersion.compareTo(dn.min())>0){a.readTime=I3(s,o.snapshotVersion.toTimestamp());const l=UH(s,o.expectedCount);l!==null&&(a.expectedCount=l)}return a}(this.serializer,t);const r=K6t(this.serializer,t);r&&(n.labels=r),this.c_(n)}m_(t){const n={};n.database=HH(this.serializer),n.removeTarget=t,this.c_(n)}}class $Ft extends QDe{constructor(t,n,r,i,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(t,n){return this.connection.qo("Write",t,n)}A_(t){return Cr(!!t.streamToken),this.lastStreamToken=t.streamToken,Cr(!t.writeResults||t.writeResults.length===0),this.listener.p_()}onNext(t){Cr(!!t.streamToken),this.lastStreamToken=t.streamToken,this.r_.reset();const n=q6t(t.writeResults,t.commitTime),r=xh(t.commitTime);return this.listener.y_(r,n)}w_(){const t={};t.database=HH(this.serializer),this.c_(t)}g_(t){const n={streamToken:this.lastStreamToken,writes:t.map(r=>H6t(this.serializer,r))};this.c_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MFt extends class{}{constructor(t,n,r,i){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.S_=!1}b_(){if(this.S_)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(t,zH(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new bt(Be.UNKNOWN,s.toString())})}ko(t,n,r,i,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(t,zH(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Be.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new bt(Be.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class LFt{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(t){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.M_("Offline")))}set(t){this.N_(),this.D_=0,t==="Online"&&(this.C_=!1),this.M_(t)}M_(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}x_(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(qm(n),this.C_=!1):xt("OnlineStateTracker",n)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FFt{constructor(t,n,r,i,s){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{r.enqueueAndForget(async()=>{f_(this)&&(xt("RemoteStore","Restarting streams for network reachability change."),await async function(u){const l=hn(u);l.k_.add(4),await wR(l),l.K_.set("Unknown"),l.k_.delete(4),await _R(l)}(this))})}),this.K_=new LFt(r,i)}}async function _R(e){if(f_(e))for(const t of e.q_)await t(!0)}async function wR(e){for(const t of e.q_)await t(!1)}function JDe(e,t){const n=hn(e);n.B_.has(t.targetId)||(n.B_.set(t.targetId,t),fee(n)?cee(n):iT(n).s_()&&lee(n,t))}function uee(e,t){const n=hn(e),r=iT(n);n.B_.delete(t),r.s_()&&ZDe(n,t),n.B_.size===0&&(r.s_()?r.a_():f_(n)&&n.K_.set("Unknown"))}function lee(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(dn.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}iT(e).V_(t)}function ZDe(e,t){e.U_.xe(t),iT(e).m_(t)}function cee(e){e.U_=new M6t({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.B_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),iT(e).start(),e.K_.F_()}function fee(e){return f_(e)&&!iT(e).i_()&&e.B_.size>0}function f_(e){return hn(e).k_.size===0}function e$e(e){e.U_=void 0}async function jFt(e){e.K_.set("Online")}async function BFt(e){e.B_.forEach((t,n)=>{lee(e,t)})}async function UFt(e,t){e$e(e),fee(e)?(e.K_.O_(t),cee(e)):e.K_.set("Unknown")}async function zFt(e,t,n){if(e.K_.set("Online"),t instanceof jDe&&t.state===2&&t.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.B_.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.B_.delete(a),i.U_.removeTarget(a))}(e,t)}catch(r){xt("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),r),await R3(e,r)}else if(t instanceof mD?e.U_.$e(t):t instanceof FDe?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(dn.min()))try{const r=await KDe(e.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((u,l)=>{if(u.resumeToken.approximateByteSize()>0){const c=s.B_.get(l);c&&s.B_.set(l,c.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,l)=>{const c=s.B_.get(u);if(!c)return;s.B_.set(u,c.withResumeToken(Uo.EMPTY_BYTE_STRING,c.snapshotVersion)),ZDe(s,u);const f=new d0(c.target,u,l,c.sequenceNumber);lee(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(e,n)}catch(r){xt("RemoteStore","Failed to raise snapshot:",r),await R3(e,r)}}async function R3(e,t,n){if(!nT(t))throw t;e.k_.add(1),await wR(e),e.K_.set("Offline"),n||(n=()=>KDe(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{xt("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await _R(e)})}function t$e(e,t){return t().catch(n=>R3(e,n,t))}async function E4(e){const t=hn(e),n=Ey(t);let r=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;VFt(t);)try{const i=await AFt(t.localStore,r);if(i===null){t.L_.length===0&&n.a_();break}r=i.batchId,HFt(t,i)}catch(i){await R3(t,i)}n$e(t)&&r$e(t)}function VFt(e){return f_(e)&&e.L_.length<10}function HFt(e,t){e.L_.push(t);const n=Ey(e);n.s_()&&n.f_&&n.g_(t.mutations)}function n$e(e){return f_(e)&&!Ey(e).i_()&&e.L_.length>0}function r$e(e){Ey(e).start()}async function qFt(e){Ey(e).w_()}async function WFt(e){const t=Ey(e);for(const n of e.L_)t.g_(n.mutations)}async function GFt(e,t,n){const r=e.L_.shift(),i=nee.from(r,t,n);await t$e(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await E4(e)}async function YFt(e,t){t&&Ey(e).f_&&await async function(r,i){if(function(o){return O6t(o)&&o!==Be.ABORTED}(i.code)){const s=r.L_.shift();Ey(r).__(),await t$e(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await E4(r)}}(e,t),n$e(e)&&r$e(e)}async function ime(e,t){const n=hn(e);n.asyncQueue.verifyOperationInProgress(),xt("RemoteStore","RemoteStore received new credentials");const r=f_(n);n.k_.add(3),await wR(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await _R(n)}async function KFt(e,t){const n=hn(e);t?(n.k_.delete(2),await _R(n)):t||(n.k_.add(2),await wR(n),n.K_.set("Unknown"))}function iT(e){return e.W_||(e.W_=function(n,r,i){const s=hn(n);return s.b_(),new DFt(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:jFt.bind(null,e),mo:BFt.bind(null,e),po:UFt.bind(null,e),R_:zFt.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),fee(e)?cee(e):e.K_.set("Unknown")):(await e.W_.stop(),e$e(e))})),e.W_}function Ey(e){return e.G_||(e.G_=function(n,r,i){const s=hn(n);return s.b_(),new $Ft(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:qFt.bind(null,e),po:YFt.bind(null,e),p_:WFt.bind(null,e),y_:GFt.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await E4(e)):(await e.G_.stop(),e.L_.length>0&&(xt("RemoteStore",`Stopping write stream with ${e.L_.length} pending writes`),e.L_=[]))})),e.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dee{constructor(t,n,r,i,s){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new mm,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,i,s){const o=Date.now()+r,a=new dee(t,n,o,i,s);return a.start(r),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new bt(Be.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hee(e,t){if(qm("AsyncQueue",`${t}: ${e}`),nT(e))return new bt(Be.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{static emptySet(t){return new RE(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||Ut.comparator(n.key,r.key):(n,r)=>Ut.comparator(n.key,r.key),this.keyedMap=uC(),this.sortedSet=new Fi(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof RE)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new RE;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sme{constructor(){this.z_=new Fi(Ut.comparator)}track(t){const n=t.doc.key,r=this.z_.get(n);r?t.type!==0&&r.type===3?this.z_=this.z_.insert(n,t):t.type===3&&r.type!==1?this.z_=this.z_.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.z_=this.z_.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.z_=this.z_.remove(n):t.type===1&&r.type===2?this.z_=this.z_.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.z_=this.z_.insert(n,{type:2,doc:t.doc}):nn():this.z_=this.z_.insert(n,t)}j_(){const t=[];return this.z_.inorderTraversal((n,r)=>{t.push(r)}),t}}class $x{constructor(t,n,r,i,s,o,a,u,l){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=l}static fromInitialDocuments(t,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new $x(t,n,RE.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&m4(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XFt{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(t=>t.Z_())}}class QFt{constructor(){this.queries=ome(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(n,r){const i=hn(n),s=i.queries;i.queries=ome(),s.forEach((o,a)=>{for(const u of a.J_)u.onError(r)})})(this,new bt(Be.ABORTED,"Firestore shutting down"))}}function ome(){return new c_(e=>TDe(e),m4)}async function i$e(e,t){const n=hn(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new XFt,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=hee(o,`Initialization of query '${Sw(t.query)}' failed`);return void t.onError(a)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&pee(n)}async function s$e(e,t){const n=hn(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const o=s.J_.indexOf(t);o>=0&&(s.J_.splice(o,1),s.J_.length===0?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function JFt(e,t){const n=hn(e);let r=!1;for(const i of t){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.J_)a.ta(i)&&(r=!0);o.H_=i}}r&&pee(n)}function ZFt(e,t,n){const r=hn(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function pee(e){e.X_.forEach(t=>{t.next()})}var WH,ame;(ame=WH||(WH={})).na="default",ame.Cache="cache";class o$e{constructor(t,n,r){this.query=t,this.ra=n,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=r||{}}ta(t){if(!this.options.includeMetadataChanges){const r=[];for(const i of t.docChanges)i.type!==3&&r.push(i);t=new $x(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ia?this.oa(t)&&(this.ra.next(t),n=!0):this._a(t,this.onlineState)&&(this.aa(t),n=!0),this.sa=t,n}onError(t){this.ra.error(t)}ea(t){this.onlineState=t;let n=!1;return this.sa&&!this.ia&&this._a(this.sa,t)&&(this.aa(this.sa),n=!0),n}_a(t,n){if(!t.fromCache||!this.Z_())return!0;const r=n!=="Offline";return(!this.options.ua||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}oa(t){if(t.docChanges.length>0)return!0;const n=this.sa&&this.sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}aa(t){t=$x.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ia=!0,this.ra.next(t)}Z_(){return this.options.source!==WH.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a$e{constructor(t){this.key=t}}class u$e{constructor(t){this.key=t}}class e4t{constructor(t,n){this.query=t,this.da=n,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=Hn(),this.mutatedKeys=Hn(),this.Va=ADe(t),this.ma=new RE(this.Va)}get fa(){return this.da}ga(t,n){const r=n?n.pa:new sme,i=n?n.ma:this.ma;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,l=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal((c,f)=>{const d=i.get(c),h=g4(this.query,f)?f:null,p=!!d&&this.mutatedKeys.has(d.key),m=!!h&&(h.hasLocalMutations||this.mutatedKeys.has(h.key)&&h.hasCommittedMutations);let g=!1;d&&h?d.data.isEqual(h.data)?p!==m&&(r.track({type:3,doc:h}),g=!0):this.ya(d,h)||(r.track({type:2,doc:h}),g=!0,(u&&this.Va(h,u)>0||l&&this.Va(h,l)<0)&&(a=!0)):!d&&h?(r.track({type:0,doc:h}),g=!0):d&&!h&&(r.track({type:1,doc:d}),g=!0,(u||l)&&(a=!0)),g&&(h?(o=o.add(h),s=m?s.add(c):s.delete(c)):(o=o.delete(c),s=s.delete(c)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const c=this.query.limitType==="F"?o.last():o.first();o=o.delete(c.key),s=s.delete(c.key),r.track({type:1,doc:c})}return{ma:o,pa:r,ss:a,mutatedKeys:s}}ya(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,i){const s=this.ma;this.ma=t.ma,this.mutatedKeys=t.mutatedKeys;const o=t.pa.j_();o.sort((c,f)=>function(h,p){const m=g=>{switch(g){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return nn()}};return m(h)-m(p)}(c.type,f.type)||this.Va(c.doc,f.doc)),this.wa(r),i=i!=null&&i;const a=n&&!i?this.Sa():[],u=this.Ra.size===0&&this.current&&!i?1:0,l=u!==this.Aa;return this.Aa=u,o.length!==0||l?{snapshot:new $x(this.query,t.ma,s,o,t.mutatedKeys,u===0,l,!1,!!r&&r.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new sme,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(t){return!this.da.has(t)&&!!this.ma.has(t)&&!this.ma.get(t).hasLocalMutations}wa(t){t&&(t.addedDocuments.forEach(n=>this.da=this.da.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.da=this.da.delete(n)),this.current=t.current)}Sa(){if(!this.current)return[];const t=this.Ra;this.Ra=Hn(),this.ma.forEach(r=>{this.Da(r.key)&&(this.Ra=this.Ra.add(r.key))});const n=[];return t.forEach(r=>{this.Ra.has(r)||n.push(new u$e(r))}),this.Ra.forEach(r=>{t.has(r)||n.push(new a$e(r))}),n}va(t){this.da=t.ds,this.Ra=Hn();const n=this.ga(t.documents);return this.applyChanges(n,!0)}Ca(){return $x.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class t4t{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class n4t{constructor(t){this.key=t,this.Fa=!1}}class r4t{constructor(t,n,r,i,s,o){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new c_(a=>TDe(a),m4),this.Oa=new Map,this.Na=new Set,this.La=new Fi(Ut.comparator),this.Ba=new Map,this.ka=new see,this.qa={},this.Qa=new Map,this.Ka=Dx.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function i4t(e,t,n=!0){const r=p$e(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await l$e(r,t,n,!0),i}async function s4t(e,t){const n=p$e(e);await l$e(n,t,!0,!1)}async function l$e(e,t,n,r){const i=await CFt(e.localStore,Eh(t)),s=i.targetId,o=e.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await o4t(e,t,s,o==="current",i.resumeToken)),e.isPrimaryClient&&n&&JDe(e.remoteStore,i),a}async function o4t(e,t,n,r,i){e.Ua=(f,d,h)=>async function(m,g,y,v){let b=g.view.ga(y);b.ss&&(b=await tme(m.localStore,g.query,!1).then(({documents:S})=>g.view.ga(S,b)));const w=v&&v.targetChanges.get(g.targetId),E=v&&v.targetMismatches.get(g.targetId)!=null,T=g.view.applyChanges(b,m.isPrimaryClient,w,E);return lme(m,g.targetId,T.ba),T.snapshot}(e,f,d,h);const s=await tme(e.localStore,t,!0),o=new e4t(t,s.ds),a=o.ga(s.documents),u=bR.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",i),l=o.applyChanges(a,e.isPrimaryClient,u);lme(e,n,l.ba);const c=new t4t(t,n,o);return e.xa.set(t,c),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),l.snapshot}async function a4t(e,t,n){const r=hn(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(o=>!m4(o,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await qH(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&uee(r.remoteStore,i.targetId),GH(r,i.targetId)}).catch(tT)):(GH(r,i.targetId),await qH(r.localStore,i.targetId,!0))}async function u4t(e,t){const n=hn(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),uee(n.remoteStore,r.targetId))}async function l4t(e,t,n){const r=g4t(e);try{const i=await function(o,a){const u=hn(o),l=Bs.now(),c=a.reduce((h,p)=>h.add(p.key),Hn());let f,d;return u.persistence.runTransaction("Locally write mutations","readwrite",h=>{let p=Wm(),m=Hn();return u.hs.getEntries(h,c).next(g=>{p=g,p.forEach((y,v)=>{v.isValidDocument()||(m=m.add(y))})}).next(()=>u.localDocuments.getOverlayedDocuments(h,p)).next(g=>{f=g;const y=[];for(const v of a){const b=I6t(v,f.get(v.key).overlayedDocument);b!=null&&y.push(new av(v.key,b,yDe(b.value.mapValue),Xu.exists(!0)))}return u.mutationQueue.addMutationBatch(h,l,y,a)}).next(g=>{d=g;const y=g.applyToLocalDocumentSet(f,m);return u.documentOverlayCache.saveOverlays(h,g.batchId,y)})}).then(()=>({batchId:d.batchId,changes:IDe(f)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let l=o.qa[o.currentUser.toKey()];l||(l=new Fi(Xn)),l=l.insert(a,u),o.qa[o.currentUser.toKey()]=l}(r,i.batchId,n),await ER(r,i.changes),await E4(r.remoteStore)}catch(i){const s=hee(i,"Failed to persist write");n.reject(s)}}async function c$e(e,t){const n=hn(e);try{const r=await SFt(n.localStore,t);t.targetChanges.forEach((i,s)=>{const o=n.Ba.get(s);o&&(Cr(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Fa=!0:i.modifiedDocuments.size>0?Cr(o.Fa):i.removedDocuments.size>0&&(Cr(o.Fa),o.Fa=!1))}),await ER(n,r,t)}catch(r){await tT(r)}}function ume(e,t,n){const r=hn(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.xa.forEach((s,o)=>{const a=o.view.ea(t);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=hn(o);u.onlineState=a;let l=!1;u.queries.forEach((c,f)=>{for(const d of f.J_)d.ea(a)&&(l=!0)}),l&&pee(u)}(r.eventManager,t),i.length&&r.Ma.R_(i),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function c4t(e,t,n){const r=hn(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ba.get(t),s=i&&i.key;if(s){let o=new Fi(Ut.comparator);o=o.insert(s,da.newNoDocument(s,dn.min()));const a=Hn().add(s),u=new _4(dn.min(),new Map,new Fi(Xn),o,a);await c$e(r,u),r.La=r.La.remove(s),r.Ba.delete(t),mee(r)}else await qH(r.localStore,t,!1).then(()=>GH(r,t,n)).catch(tT)}async function f4t(e,t){const n=hn(e),r=t.batch.batchId;try{const i=await xFt(n.localStore,t);d$e(n,r,null),f$e(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await ER(n,i)}catch(i){await tT(i)}}async function d4t(e,t,n){const r=hn(e);try{const i=await function(o,a){const u=hn(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",l=>{let c;return u.mutationQueue.lookupMutationBatch(l,a).next(f=>(Cr(f!==null),c=f.keys(),u.mutationQueue.removeMutationBatch(l,f))).next(()=>u.mutationQueue.performConsistencyCheck(l)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(l,c,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(l,c)).next(()=>u.localDocuments.getDocuments(l,c))})}(r.localStore,t);d$e(r,t,n),f$e(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await ER(r,i)}catch(i){await tT(i)}}function f$e(e,t){(e.Qa.get(t)||[]).forEach(n=>{n.resolve()}),e.Qa.delete(t)}function d$e(e,t,n){const r=hn(e);let i=r.qa[r.currentUser.toKey()];if(i){const s=i.get(t);s&&(n?s.reject(n):s.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function GH(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(r=>{e.ka.containsKey(r)||h$e(e,r)})}function h$e(e,t){e.Na.delete(t.path.canonicalString());const n=e.La.get(t);n!==null&&(uee(e.remoteStore,n),e.La=e.La.remove(t),e.Ba.delete(n),mee(e))}function lme(e,t,n){for(const r of n)r instanceof a$e?(e.ka.addReference(r.key,t),h4t(e,r)):r instanceof u$e?(xt("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||h$e(e,r.key)):nn()}function h4t(e,t){const n=t.key,r=n.path.canonicalString();e.La.get(n)||e.Na.has(r)||(xt("SyncEngine","New document in limbo: "+n),e.Na.add(r),mee(e))}function mee(e){for(;e.Na.size>0&&e.La.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new Ut(ci.fromString(t)),r=e.Ka.next();e.Ba.set(r,new n4t(n)),e.La=e.La.insert(n,r),JDe(e.remoteStore,new d0(Eh(eee(n.path)),r,"TargetPurposeLimboResolution",d4.oe))}}async function ER(e,t,n){const r=hn(e),i=[],s=[],o=[];r.xa.isEmpty()||(r.xa.forEach((a,u)=>{o.push(r.Ua(u,t,n).then(l=>{var c;if((l||n)&&r.isPrimaryClient){const f=l?!l.fromCache:(c=n==null?void 0:n.targetChanges.get(u.targetId))===null||c===void 0?void 0:c.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(l){i.push(l);const f=aee.zi(u.targetId,l);s.push(f)}}))}),await Promise.all(o),r.Ma.R_(i),await async function(u,l){const c=hn(u);try{await c.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Ue.forEach(l,d=>Ue.forEach(d.Wi,h=>c.persistence.referenceDelegate.addReference(f,d.targetId,h)).next(()=>Ue.forEach(d.Gi,h=>c.persistence.referenceDelegate.removeReference(f,d.targetId,h)))))}catch(f){if(!nT(f))throw f;xt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of l){const d=f.targetId;if(!f.fromCache){const h=c.us.get(d),p=h.snapshotVersion,m=h.withLastLimboFreeSnapshotVersion(p);c.us=c.us.insert(d,m)}}}(r.localStore,s))}async function p4t(e,t){const n=hn(e);if(!n.currentUser.isEqual(t)){xt("SyncEngine","User change. New user:",t.toKey());const r=await YDe(n.localStore,t);n.currentUser=t,function(s,o){s.Qa.forEach(a=>{a.forEach(u=>{u.reject(new bt(Be.CANCELLED,o))})}),s.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await ER(n,r.Ts)}}function m4t(e,t){const n=hn(e),r=n.Ba.get(t);if(r&&r.Fa)return Hn().add(r.key);{let i=Hn();const s=n.Oa.get(t);if(!s)return i;for(const o of s){const a=n.xa.get(o);i=i.unionWith(a.view.fa)}return i}}function p$e(e){const t=hn(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=c$e.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=m4t.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=c4t.bind(null,t),t.Ma.R_=JFt.bind(null,t.eventManager),t.Ma.Wa=ZFt.bind(null,t.eventManager),t}function g4t(e){const t=hn(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=f4t.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=d4t.bind(null,t),t}class N3{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=w4(t.databaseInfo.databaseId),this.sharedClientState=this.za(t),this.persistence=this.ja(t),await this.persistence.start(),this.localStore=this.Ha(t),this.gcScheduler=this.Ja(t,this.localStore),this.indexBackfillerScheduler=this.Ya(t,this.localStore)}Ja(t,n){return null}Ya(t,n){return null}Ha(t){return EFt(this.persistence,new _Ft,t.initialUser,this.serializer)}ja(t){return new GDe(oee.ei,this.serializer)}za(t){return new kFt}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}N3.provider={build:()=>new N3};class y4t extends N3{constructor(t){super(),this.cacheSizeBytes=t}Ja(t,n){Cr(this.persistence.referenceDelegate instanceof k3);const r=this.persistence.referenceDelegate.garbageCollector;return new sFt(r,t.asyncQueue,n)}ja(t){const n=this.cacheSizeBytes!==void 0?Su.withCacheSize(this.cacheSizeBytes):Su.DEFAULT;return new GDe(r=>k3.ei(r,n),this.serializer)}}class YH{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>ume(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=p4t.bind(null,this.syncEngine),await KFt(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new QFt}()}createDatastore(t){const n=w4(t.databaseInfo.databaseId),r=function(s){return new OFt(s)}(t.databaseInfo);return function(s,o,a,u){return new MFt(s,o,a,u)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,i,s,o,a){return new FFt(r,i,s,o,a)}(this.localStore,this.datastore,t.asyncQueue,n=>ume(this.syncEngine,n,0),function(){return rme.p()?new rme:new RFt}())}createSyncEngine(t,n){return function(i,s,o,a,u,l,c){const f=new r4t(i,s,o,a,u,l);return c&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(i){const s=hn(i);xt("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await wR(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}YH.provider={build:()=>new YH};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m$e{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Xa(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Xa(this.observer.error,t):qm("Uncaught Error in snapshot listener:",t.toString()))}eu(){this.muted=!0}Xa(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v4t{constructor(t,n,r,i,s){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=xu.UNAUTHENTICATED,this.clientId=pDe.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{xt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(xt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new mm;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=hee(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function k9(e,t){e.asyncQueue.verifyOperationInProgress(),xt("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async i=>{r.isEqual(i)||(await YDe(t.localStore,i),r=i)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function cme(e,t){e.asyncQueue.verifyOperationInProgress();const n=await g$e(e);xt("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>ime(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,i)=>ime(t.remoteStore,i)),e._onlineComponents=t}async function g$e(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){xt("FirestoreClient","Using user provided OfflineComponentProvider");try{await k9(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(i){return i.name==="FirebaseError"?i.code===Be.FAILED_PRECONDITION||i.code===Be.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;LI("Error using user provided cache. Falling back to memory cache: "+n),await k9(e,new N3)}}else xt("FirestoreClient","Using default OfflineComponentProvider"),await k9(e,new y4t(void 0));return e._offlineComponents}async function gee(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(xt("FirestoreClient","Using user provided OnlineComponentProvider"),await cme(e,e._uninitializedComponentsProvider._online)):(xt("FirestoreClient","Using default OnlineComponentProvider"),await cme(e,new YH))),e._onlineComponents}function b4t(e){return g$e(e).then(t=>t.persistence)}function _4t(e){return gee(e).then(t=>t.remoteStore)}function w4t(e){return gee(e).then(t=>t.syncEngine)}async function y$e(e){const t=await gee(e),n=t.eventManager;return n.onListen=i4t.bind(null,t.syncEngine),n.onUnlisten=a4t.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=s4t.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=u4t.bind(null,t.syncEngine),n}function E4t(e){return e.asyncQueue.enqueue(async()=>{const t=await b4t(e),n=await _4t(e);return t.setNetworkEnabled(!0),function(i){const s=hn(i);return s.k_.delete(0),_R(s)}(n)})}function x4t(e,t,n={}){const r=new mm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new m$e({next:d=>{c.eu(),o.enqueueAndForget(()=>s$e(s,f));const h=d.docs.has(a);!h&&d.fromCache?l.reject(new bt(Be.UNAVAILABLE,"Failed to get document because the client is offline.")):h&&d.fromCache&&u&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new o$e(eee(a.path),c,{includeMetadataChanges:!0,ua:!0});return i$e(s,f)}(await y$e(e),e.asyncQueue,t,n,r)),r.promise}function S4t(e,t,n={}){const r=new mm;return e.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,l){const c=new m$e({next:d=>{c.eu(),o.enqueueAndForget(()=>s$e(s,f)),d.fromCache&&u.source==="server"?l.reject(new bt(Be.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):l.resolve(d)},error:d=>l.reject(d)}),f=new o$e(a,c,{includeMetadataChanges:!0,ua:!0});return i$e(s,f)}(await y$e(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function v$e(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fme=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b$e(e,t,n){if(!n)throw new bt(Be.INVALID_ARGUMENT,`Function ${e}() cannot be called with an empty ${t}.`)}function T4t(e,t,n,r){if(t===!0&&r===!0)throw new bt(Be.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function dme(e){if(!Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${e} has ${e.length}.`)}function hme(e){if(Ut.isDocumentKey(e))throw new bt(Be.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function x4(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":nn()}function rd(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new bt(Be.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=x4(e);throw new bt(Be.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pme{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new bt(Be.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=(n=t.ssl)===null||n===void 0||n;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}T4t("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=v$e((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new bt(Be.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class yee{constructor(t,n,r,i){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new pme({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new bt(Be.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new bt(Be.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new pme(t),t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new $Lt;switch(r.type){case"firstParty":return new FLt(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new bt(Be.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=fme.get(n);r&&(xt("ComponentProvider","Removing Datastore"),fme.delete(n),r.terminate())}(this),Promise.resolve()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d_{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new d_(this.firestore,t,this._query)}}class Ja{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new j0(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new Ja(this.firestore,t,this._key)}}class j0 extends d_{constructor(t,n,r){super(t,n,eee(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new Ja(this.firestore,null,new Ut(t))}withConverter(t){return new j0(this.firestore,t,this._path)}}function ff(e,t,...n){if(e=yi(e),b$e("collection","path",t),e instanceof yee){const r=ci.fromString(t,...n);return hme(r),new j0(e,null,r)}{if(!(e instanceof Ja||e instanceof j0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return hme(r),new j0(e.firestore,null,r)}}function _s(e,t,...n){if(e=yi(e),arguments.length===1&&(t=pDe.newId()),b$e("doc","path",t),e instanceof yee){const r=ci.fromString(t,...n);return dme(r),new Ja(e,null,new Ut(r))}{if(!(e instanceof Ja||e instanceof j0))throw new bt(Be.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(ci.fromString(t,...n));return dme(r),new Ja(e.firestore,e instanceof j0?e.converter:null,new Ut(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mme{constructor(t=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new XDe(this,"async_queue_retry"),this.fu=()=>{const r=I9();r&&xt("AsyncQueue","Visibility state changed to "+r.visibilityState),this.r_.Jo()},this.gu=t;const n=I9();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.pu(),this.yu(t)}enterRestrictedMode(t){if(!this.Eu){this.Eu=!0,this.Vu=t||!1;const n=I9();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.fu)}}enqueue(t){if(this.pu(),this.Eu)return new Promise(()=>{});const n=new mm;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Iu.push(t),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(t){if(!nT(t))throw t;xt("AsyncQueue","Operation failed with retryable error: "+t)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(t){const n=this.gu.then(()=>(this.Ru=!0,t().catch(r=>{this.Au=r,this.Ru=!1;const i=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(r);throw qm("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ru=!1,r))));return this.gu=n,n}enqueueAfterDelay(t,n,r){this.pu(),this.mu.indexOf(t)>-1&&(n=0);const i=dee.createAndSchedule(this,t,n,r,s=>this.Su(s));return this.du.push(i),i}pu(){this.Au&&nn()}verifyOperationInProgress(){}async bu(){let t;do t=this.gu,await t;while(t!==this.gu)}Du(t){for(const n of this.du)if(n.timerId===t)return!0;return!1}vu(t){return this.bu().then(()=>{this.du.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.du)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.bu()})}Cu(t){this.mu.push(t)}Su(t){const n=this.du.indexOf(t);this.du.splice(n,1)}}class uv extends yee{constructor(t,n,r,i){super(t,n,r,i),this.type="firestore",this._queue=new mme,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new mme(t),this._firestoreClient=void 0,await t}}}function A4t(e,t,n){n||(n="(default)");const r=sv(e,"firestore");if(r.isInitialized(n)){const i=r.getImmediate({identifier:n}),s=r.getOptions(n);if(DI(s,t))return i;throw new bt(Be.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(t.cacheSizeBytes!==void 0&&t.localCache!==void 0)throw new bt(Be.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(t.cacheSizeBytes!==void 0&&t.cacheSizeBytes!==-1&&t.cacheSizeBytes<1048576)throw new bt(Be.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function xR(e){if(e._terminated)throw new bt(Be.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||C4t(e),e._firestoreClient}function C4t(e){var t,n,r;const i=e._freezeSettings(),s=function(a,u,l,c){return new ZLt(a,u,l,c.host,c.ssl,c.experimentalForceLongPolling,c.experimentalAutoDetectLongPolling,v$e(c.experimentalLongPollingOptions),c.useFetchStreams)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new v4t(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(e._componentsProvider))}function I4t(e){return E4t(xR(e=rd(e,uv)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mx{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Mx(Uo.fromBase64String(t))}catch(n){throw new bt(Be.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Mx(Uo.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SR{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new bt(Be.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Po(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S4{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vee=class{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new bt(Be.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new bt(Be.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Xn(this._lat,t._lat)||Xn(this._long,t._long)}};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bee{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k4t=/^__.*__$/;class R4t{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new av(t,this.data,this.fieldMask,n,this.fieldTransforms):new vR(t,this.data,n,this.fieldTransforms)}}class _$e{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new av(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function w$e(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw nn()}}class _ee{constructor(t,n,r,i,s,o){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(t){return new _ee(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Lu(t),i}Bu(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),i=this.xu({path:r,Nu:!1});return i.Fu(),i}ku(t){return this.xu({path:void 0,Nu:!0})}qu(t){return P3(t,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}Fu(){if(this.path)for(let t=0;t<this.path.length;t++)this.Lu(this.path.get(t))}Lu(t){if(t.length===0)throw this.qu("Document fields must not be empty");if(w$e(this.Mu)&&k4t.test(t))throw this.qu('Document fields cannot begin and end with "__"')}}class N4t{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||w4(t)}$u(t,n,r,i=!1){return new _ee({Mu:t,methodName:n,Ku:r,path:Po.emptyPath(),Nu:!1,Qu:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function T4(e){const t=e._freezeSettings(),n=w4(e._databaseId);return new N4t(e._databaseId,!!t.ignoreUndefinedProperties,n)}function E$e(e,t,n,r,i,s={}){const o=e.$u(s.merge||s.mergeFields?2:0,t,n,i);Eee("Data must be an object, but it was:",o,r);const a=T$e(r,o);let u,l;if(s.merge)u=new Nl(o.fieldMask),l=o.fieldTransforms;else if(s.mergeFields){const c=[];for(const f of s.mergeFields){const d=KH(t,f,n);if(!o.contains(d))throw new bt(Be.INVALID_ARGUMENT,`Field '${d}' is specified in your field mask but missing from your input data.`);C$e(c,d)||c.push(d)}u=new Nl(c),l=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,l=o.fieldTransforms;return new R4t(new $u(a),u,l)}class A4 extends S4{_toFieldTransform(t){if(t.Mu!==2)throw t.Mu===1?t.qu(`${this._methodName}() can only appear at the top level of your update data`):t.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof A4}}class wee extends S4{_toFieldTransform(t){return new S6t(t.path,new VI)}isEqual(t){return t instanceof wee}}function x$e(e,t,n,r){const i=e.$u(1,t,n);Eee("Data must be an object, but it was:",i,r);const s=[],o=$u.empty();ov(r,(u,l)=>{const c=xee(t,u,n);l=yi(l);const f=i.Bu(c);if(l instanceof A4)s.push(c);else{const d=TR(l,f);d!=null&&(s.push(c),o.set(c,d))}});const a=new Nl(s);return new _$e(o,a,i.fieldTransforms)}function S$e(e,t,n,r,i,s){const o=e.$u(1,t,n),a=[KH(t,r,n)],u=[i];if(s.length%2!=0)throw new bt(Be.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let d=0;d<s.length;d+=2)a.push(KH(t,s[d])),u.push(s[d+1]);const l=[],c=$u.empty();for(let d=a.length-1;d>=0;--d)if(!C$e(l,a[d])){const h=a[d];let p=u[d];p=yi(p);const m=o.Bu(h);if(p instanceof A4)l.push(h);else{const g=TR(p,m);g!=null&&(l.push(h),c.set(h,g))}}const f=new Nl(l);return new _$e(c,f,o.fieldTransforms)}function P4t(e,t,n,r=!1){return TR(n,e.$u(r?4:3,t))}function TR(e,t){if(A$e(e=yi(e)))return Eee("Unsupported field value:",t,e),T$e(e,t);if(e instanceof S4)return function(r,i){if(!w$e(i.Mu))throw i.qu(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.qu(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&t.Mu!==4)throw t.qu("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=TR(a,i.ku(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(e,t)}return function(r,i){if((r=yi(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return w6t(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Bs.fromDate(r);return{timestampValue:I3(i.serializer,s)}}if(r instanceof Bs){const s=new Bs(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:I3(i.serializer,s)}}if(r instanceof vee)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Mx)return{bytesValue:BDe(i.serializer,r._byteString)};if(r instanceof Ja){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:iee(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof bee)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(u=>{if(typeof u!="number")throw a.qu("VectorValues must only contain numeric values.");return tee(a.serializer,u)})}}}}}}(r,i);throw i.qu(`Unsupported field value: ${x4(r)}`)}(e,t)}function T$e(e,t){const n={};return mDe(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):ov(e,(r,i)=>{const s=TR(i,t.Ou(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function A$e(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Bs||e instanceof vee||e instanceof Mx||e instanceof Ja||e instanceof S4||e instanceof bee)}function Eee(e,t,n){if(!A$e(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=x4(n);throw r==="an object"?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function KH(e,t,n){if((t=yi(t))instanceof SR)return t._internalPath;if(typeof t=="string")return xee(e,t);throw P3("Field path arguments must be of type string or ",e,!1,void 0,n)}const O4t=new RegExp("[~\\*/\\[\\]]");function xee(e,t,n){if(t.search(O4t)>=0)throw P3(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new SR(...t.split("."))._internalPath}catch{throw P3(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function P3(e,t,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${t}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new bt(Be.INVALID_ARGUMENT,a+e+u)}function C$e(e,t){return e.some(n=>n.isEqual(t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I$e{constructor(t,n,r,i,s){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ja(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new D4t(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(C4("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class D4t extends I$e{data(){return super.data()}}function C4(e,t){return typeof t=="string"?xee(e,t):t instanceof SR?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $4t(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new bt(Be.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class See{}class k$e extends See{}function gme(e,t,...n){let r=[];t instanceof See&&r.push(t),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Tee).length,a=s.filter(u=>u instanceof I4).length;if(o>1||o>0&&a>0)throw new bt(Be.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)e=i._apply(e);return e}class I4 extends k$e{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new I4(t,n,r)}_apply(t){const n=this._parse(t);return R$e(t._query,n),new d_(t.firestore,t.converter,jH(t._query,n))}_parse(t){const n=T4(t.firestore);return function(s,o,a,u,l,c,f){let d;if(l.isKeyField()){if(c==="array-contains"||c==="array-contains-any")throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. You can't perform '${c}' queries on documentId().`);if(c==="in"||c==="not-in"){vme(f,c);const h=[];for(const p of f)h.push(yme(u,s,p));d={arrayValue:{values:h}}}else d=yme(u,s,f)}else c!=="in"&&c!=="not-in"&&c!=="array-contains-any"||vme(f,c),d=P4t(a,o,f,c==="in"||c==="not-in");return Ss.create(l,c,d)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function M4t(e,t,n){const r=t,i=C4("where",e);return I4._create(i,r,n)}class Tee extends See{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Tee(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:nd.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)R$e(o,u),o=jH(o,u)}(t._query,n),new d_(t.firestore,t.converter,jH(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Aee extends k$e{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new Aee(t,n)}_apply(t){const n=function(i,s,o){if(i.startAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new bt(Be.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new zI(s,o)}(t._query,this._field,this._direction);return new d_(t.firestore,t.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new rT(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(t._query,n))}}function L4t(e,t="asc"){const n=t,r=C4("orderBy",e);return Aee._create(r,n)}function yme(e,t,n){if(typeof(n=yi(n))=="string"){if(n==="")throw new bt(Be.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!SDe(t)&&n.indexOf("/")!==-1)throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(ci.fromString(n));if(!Ut.isDocumentKey(r))throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Lpe(e,new Ut(r))}if(n instanceof Ja)return Lpe(e,n._key);throw new bt(Be.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${x4(n)}.`)}function vme(e,t){if(!Array.isArray(e)||e.length===0)throw new bt(Be.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function R$e(e,t){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(e.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new bt(Be.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class F4t{convertValue(t,n="none"){switch(wy(t)){case 0:return null;case 1:return t.booleanValue;case 2:return us(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(_y(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw nn()}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return ov(t,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(t){var n,r,i;const s=(i=(r=(n=t.fields)===null||n===void 0?void 0:n.value.arrayValue)===null||r===void 0?void 0:r.values)===null||i===void 0?void 0:i.map(o=>us(o.doubleValue));return new bee(s)}convertGeoPoint(t){return new vee(us(t.latitude),us(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=p4(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(jI(t));default:return null}}convertTimestamp(t){const n=by(t);return new Bs(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=ci.fromString(t);Cr(WDe(r));const i=new BI(r.get(1),r.get(3)),s=new Ut(r.popFirst(5));return i.isEqual(n)||qm(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N$e(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class P$e extends I$e{constructor(t,n,r,i,s,o){super(t,n,r,i,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new gD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(C4("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class gD extends P$e{data(t={}){return super.data(t)}}class j4t{constructor(t,n,r,i){this._firestore=t,this._userDataWriter=n,this._snapshot=i,this.metadata=new cC(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new gD(this._firestore,this._userDataWriter,r.key,r,new cC(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new bt(Be.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new gD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new gD(i._firestore,i._userDataWriter,a.doc.key,a.doc,new cC(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let l=-1,c=-1;return a.type!==0&&(l=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),c=o.indexOf(a.doc.key)),{type:B4t(a.type),doc:u,oldIndex:l,newIndex:c}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function B4t(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return nn()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R9(e){e=rd(e,Ja);const t=rd(e.firestore,uv);return x4t(xR(t),e._key).then(n=>V4t(t,e,n))}class O$e extends F4t{constructor(t){super(),this.firestore=t}convertBytes(t){return new Mx(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new Ja(this.firestore,null,n)}}function cA(e){e=rd(e,d_);const t=rd(e.firestore,uv),n=xR(t),r=new O$e(t);return $4t(e._query),S4t(n,e._query).then(i=>new j4t(t,r,e,i))}function bu(e,t,n){e=rd(e,Ja);const r=rd(e.firestore,uv),i=N$e(e.converter,t,n);return k4(r,[E$e(T4(r),"setDoc",e._key,i,e.converter!==null,n).toMutation(e._key,Xu.none())])}function U4t(e,t,n,...r){e=rd(e,Ja);const i=rd(e.firestore,uv),s=T4(i);let o;return o=typeof(t=yi(t))=="string"||t instanceof SR?S$e(s,"updateDoc",e._key,t,n,r):x$e(s,"updateDoc",e._key,t),k4(i,[o.toMutation(e._key,Xu.exists(!0))])}function z4t(e){return k4(rd(e.firestore,uv),[new b4(e._key,Xu.none())])}function k4(e,t){return function(r,i){const s=new mm;return r.asyncQueue.enqueueAndForget(async()=>l4t(await w4t(r),i,s)),s.promise}(xR(e),t)}function V4t(e,t,n){const r=n.docs.get(t._key),i=new O$e(e);return new P$e(e,i,t._key,r,new cC(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class H4t{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=T4(t)}set(t,n,r){this._verifyNotCommitted();const i=N9(t,this._firestore),s=N$e(i.converter,n,r),o=E$e(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Xu.none())),this}update(t,n,r,...i){this._verifyNotCommitted();const s=N9(t,this._firestore);let o;return o=typeof(n=yi(n))=="string"||n instanceof SR?S$e(this._dataReader,"WriteBatch.update",s._key,n,r,i):x$e(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Xu.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=N9(t,this._firestore);return this._mutations=this._mutations.concat(new b4(n._key,Xu.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new bt(Be.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function N9(e,t){if((e=yi(e)).firestore!==t)throw new bt(Be.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}function q4t(){return new wee("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bme(e){return xR(e=rd(e,uv)),new H4t(e,t=>k4(e,t))}(function(t,n=!0){(function(i){eT=i})(rf),td(new yy("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new uv(new MLt(r.getProvider("auth-internal")),new BLt(r.getProvider("app-check-internal")),function(l,c){if(!Object.prototype.hasOwnProperty.apply(l.options,["projectId"]))throw new bt(Be.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new BI(l.options.projectId,c)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Ml(Npe,"4.7.5",t),Ml(Npe,"4.7.5","esm2017")})();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W4t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},G4t=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},Y4t={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(W4t(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):G4t(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new K4t;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};let K4t=class extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function X4t(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O3{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}function D$e(){try{return typeof indexedDB=="object"}catch{return!1}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4t="FirebaseError";let J4t=class $$e extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Q4t,Object.setPrototypeOf(this,$$e.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,M$e.prototype.create)}},M$e=class{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?Z4t(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new J4t(i,a,r)}};function Z4t(e,t){return e.replace(e5t,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const e5t=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t5t=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,e=>{const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16)})};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n5t=1e3,r5t=2,i5t=4*60*60*1e3,s5t=.5;function o5t(e,t=n5t,n=r5t){const r=t*Math.pow(n,e),i=Math.round(s5t*r*(Math.random()-.5)*2);return Math.min(i5t,r+i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a5t(e){return e&&e._delegate?e._delegate:e}let _me=class{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ui;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(ui||(ui={}));const u5t={debug:ui.DEBUG,verbose:ui.VERBOSE,info:ui.INFO,warn:ui.WARN,error:ui.ERROR,silent:ui.SILENT},l5t=ui.INFO,c5t={[ui.DEBUG]:"log",[ui.VERBOSE]:"log",[ui.INFO]:"info",[ui.WARN]:"warn",[ui.ERROR]:"error"},f5t=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=c5t[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};let d5t=class{constructor(t){this.name=t,this._logLevel=l5t,this._logHandler=f5t,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in ui))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?u5t[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,ui.DEBUG,...t),this._logHandler(this,ui.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,ui.VERBOSE,...t),this._logHandler(this,ui.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,ui.INFO,...t),this._logHandler(this,ui.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,ui.WARN,...t),this._logHandler(this,ui.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,ui.ERROR,...t),this._logHandler(this,ui.ERROR,...t)}};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XH=new Map,L$e={activated:!1,tokenObservers:[]},h5t={initialized:!1,enabled:!1};function zs(e){return XH.get(e)||Object.assign({},L$e)}function p5t(e,t){return XH.set(e,t),XH.get(e)}function R4(){return h5t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F$e="https://content-firebaseappcheck.googleapis.com/v1",m5t="exchangeRecaptchaV3Token",g5t="exchangeDebugToken",wme={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},y5t=24*60*60*1e3;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class v5t{constructor(t,n,r,i,s){if(this.operation=t,this.retryPolicy=n,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}async process(t){this.stop();try{this.pending=new O3,this.pending.promise.catch(n=>{}),await b5t(this.getNextRun(t)),this.pending.resolve(),await this.pending.promise,this.pending=new O3,this.pending.promise.catch(n=>{}),await this.operation(),this.pending.resolve(),await this.pending.promise,this.process(!0).catch(()=>{})}catch(n){this.retryPolicy(n)?this.process(!1).catch(()=>{}):this.stop()}}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const n=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),n}}}function b5t(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _5t={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},zu=new M$e("appCheck","AppCheck",_5t);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eme(e=!1){var t;return e?(t=self.grecaptcha)===null||t===void 0?void 0:t.enterprise:self.grecaptcha}function Cee(e){if(!zs(e).activated)throw zu.create("use-before-activation",{appName:e.name})}function j$e(e){const t=Math.round(e/1e3),n=Math.floor(t/(3600*24)),r=Math.floor((t-n*3600*24)/3600),i=Math.floor((t-n*3600*24-r*3600)/60),s=t-n*3600*24-r*3600-i*60;let o="";return n&&(o+=BP(n)+"d:"),r&&(o+=BP(r)+"h:"),o+=BP(i)+"m:"+BP(s)+"s",o}function BP(e){return e===0?"00":e>=10?e.toString():"0"+e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iee({url:e,body:t},n){const r={"Content-Type":"application/json"},i=n.getImmediate({optional:!0});if(i){const f=await i.getHeartbeatsHeader();f&&(r["X-Firebase-Client"]=f)}const s={method:"POST",body:JSON.stringify(t),headers:r};let o;try{o=await fetch(e,s)}catch(f){throw zu.create("fetch-network-error",{originalErrorMessage:f==null?void 0:f.message})}if(o.status!==200)throw zu.create("fetch-status-error",{httpStatus:o.status});let a;try{a=await o.json()}catch(f){throw zu.create("fetch-parse-error",{originalErrorMessage:f==null?void 0:f.message})}const u=a.ttl.match(/^([\d.]+)(s)$/);if(!u||!u[2]||isNaN(Number(u[1])))throw zu.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${a.ttl}`});const l=Number(u[1])*1e3,c=Date.now();return{token:a.token,expireTimeMillis:c+l,issuedAtTimeMillis:c}}function w5t(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${F$e}/projects/${n}/apps/${r}:${m5t}?key=${i}`,body:{recaptcha_v3_token:t}}}function B$e(e,t){const{projectId:n,appId:r,apiKey:i}=e.options;return{url:`${F$e}/projects/${n}/apps/${r}:${g5t}?key=${i}`,body:{debug_token:t}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E5t="firebase-app-check-database",x5t=1,WI="firebase-app-check-store",U$e="debug-token";let UP=null;function z$e(){return UP||(UP=new Promise((e,t)=>{try{const n=indexedDB.open(E5t,x5t);n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{var i;t(zu.create("storage-open",{originalErrorMessage:(i=r.target.error)===null||i===void 0?void 0:i.message}))},n.onupgradeneeded=r=>{const i=r.target.result;switch(r.oldVersion){case 0:i.createObjectStore(WI,{keyPath:"compositeKey"})}}}catch(n){t(zu.create("storage-open",{originalErrorMessage:n==null?void 0:n.message}))}}),UP)}function S5t(e){return H$e(q$e(e))}function T5t(e,t){return V$e(q$e(e),t)}function A5t(e){return V$e(U$e,e)}function C5t(){return H$e(U$e)}async function V$e(e,t){const r=(await z$e()).transaction(WI,"readwrite"),s=r.objectStore(WI).put({compositeKey:e,value:t});return new Promise((o,a)=>{s.onsuccess=u=>{o()},r.onerror=u=>{var l;a(zu.create("storage-set",{originalErrorMessage:(l=u.target.error)===null||l===void 0?void 0:l.message}))}})}async function H$e(e){const n=(await z$e()).transaction(WI,"readonly"),i=n.objectStore(WI).get(e);return new Promise((s,o)=>{i.onsuccess=a=>{const u=a.target.result;s(u?u.value:void 0)},n.onerror=a=>{var u;o(zu.create("storage-get",{originalErrorMessage:(u=a.target.error)===null||u===void 0?void 0:u.message}))}})}function q$e(e){return`${e.options.appId}-${e.name}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GI=new d5t("@firebase/app-check");/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function I5t(e){if(D$e()){let t;try{t=await S5t(e)}catch(n){GI.warn(`Failed to read token from IndexedDB. Error: ${n}`)}return t}}function P9(e,t){return D$e()?T5t(e,t).catch(n=>{GI.warn(`Failed to write token to IndexedDB. Error: ${n}`)}):Promise.resolve()}async function k5t(){let e;try{e=await C5t()}catch{}if(e)return e;{const t=t5t();return A5t(t).catch(n=>GI.warn(`Failed to persist debug token to IndexedDB. Error: ${n}`)),t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kee(){return R4().enabled}async function Ree(){const e=R4();if(e.enabled&&e.token)return e.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)}function R5t(){const e=X4t(),t=R4();if(t.initialized=!0,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN!="string"&&e.FIREBASE_APPCHECK_DEBUG_TOKEN!==!0)return;t.enabled=!0;const n=new O3;t.token=n,typeof e.FIREBASE_APPCHECK_DEBUG_TOKEN=="string"?n.resolve(e.FIREBASE_APPCHECK_DEBUG_TOKEN):n.resolve(k5t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N5t={error:"UNKNOWN_ERROR"};function P5t(e){return Y4t.encodeString(JSON.stringify(e),!1)}async function QH(e,t=!1){const n=e.app;Cee(n);const r=zs(n);let i=r.token,s;if(i&&!Kw(i)&&(r.token=void 0,i=void 0),!i){const u=await r.cachedTokenPromise;u&&(Kw(u)?i=u:await P9(n,void 0))}if(!t&&i&&Kw(i))return{token:i.token};let o=!1;if(kee()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Iee(B$e(n,await Ree()),e.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),o=!0);const u=await r.exchangeTokenPromise;return await P9(n,u),r.token=u,{token:u.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),o=!0),i=await zs(n).exchangeTokenPromise}catch(u){u.code==="appCheck/throttled"?GI.warn(u.message):GI.error(u),s=u}let a;return i?s?Kw(i)?a={token:i.token,internalError:s}:a=Sme(s):(a={token:i.token},r.token=i,await P9(n,i)):a=Sme(s),o&&Y$e(n,a),a}async function O5t(e){const t=e.app;Cee(t);const{provider:n}=zs(t);if(kee()){const r=await Ree(),{token:i}=await Iee(B$e(t,r),e.heartbeatServiceProvider);return{token:i}}else{const{token:r}=await n.getToken();return{token:r}}}function W$e(e,t,n,r){const{app:i}=e,s=zs(i),o={next:n,error:r,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&Kw(s.token)){const a=s.token;Promise.resolve().then(()=>{n({token:a.token}),xme(e)}).catch(()=>{})}s.cachedTokenPromise.then(()=>xme(e))}function G$e(e,t){const n=zs(e),r=n.tokenObservers.filter(i=>i.next!==t);r.length===0&&n.tokenRefresher&&n.tokenRefresher.isRunning()&&n.tokenRefresher.stop(),n.tokenObservers=r}function xme(e){const{app:t}=e,n=zs(t);let r=n.tokenRefresher;r||(r=D5t(e),n.tokenRefresher=r),!r.isRunning()&&n.isTokenAutoRefreshEnabled&&r.start()}function D5t(e){const{app:t}=e;return new v5t(async()=>{const n=zs(t);let r;if(n.token?r=await QH(e,!0):r=await QH(e),r.error)throw r.error;if(r.internalError)throw r.internalError},()=>!0,()=>{const n=zs(t);if(n.token){let r=n.token.issuedAtTimeMillis+(n.token.expireTimeMillis-n.token.issuedAtTimeMillis)*.5+3e5;const i=n.token.expireTimeMillis-5*60*1e3;return r=Math.min(r,i),Math.max(0,r-Date.now())}else return 0},wme.RETRIAL_MIN_WAIT,wme.RETRIAL_MAX_WAIT)}function Y$e(e,t){const n=zs(e).tokenObservers;for(const r of n)try{r.type==="EXTERNAL"&&t.error!=null?r.error(t.error):r.next(t)}catch{}}function Kw(e){return e.expireTimeMillis-Date.now()>0}function Sme(e){return{token:P5t(N5t),error:e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $5t{constructor(t,n){this.app=t,this.heartbeatServiceProvider=n}_delete(){const{tokenObservers:t}=zs(this.app);for(const n of t)G$e(this.app,n.next);return Promise.resolve()}}function M5t(e,t){return new $5t(e,t)}function L5t(e){return{getToken:t=>QH(e,t),getLimitedUseToken:()=>O5t(e),addTokenListener:t=>W$e(e,"INTERNAL",t),removeTokenListener:t=>G$e(e.app,t)}}const F5t="@firebase/app-check",j5t="0.8.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B5t="https://www.google.com/recaptcha/api.js";function U5t(e,t){const n=new O3,r=zs(e);r.reCAPTCHAState={initialized:n};const i=z5t(e),s=Eme(!1);return s?Tme(e,t,s,i,n):q5t(()=>{const o=Eme(!1);if(!o)throw new Error("no recaptcha");Tme(e,t,o,i,n)}),n.promise}function Tme(e,t,n,r,i){n.ready(()=>{H5t(e,t,n,r),i.resolve(n)})}function z5t(e){const t=`fire_app_check_${e.name}`,n=document.createElement("div");return n.id=t,n.style.display="none",document.body.appendChild(n),t}async function V5t(e){Cee(e);const n=await zs(e).reCAPTCHAState.initialized.promise;return new Promise((r,i)=>{const s=zs(e).reCAPTCHAState;n.ready(()=>{r(n.execute(s.widgetId,{action:"fire_app_check"}))})})}function H5t(e,t,n,r){const i=n.render(r,{sitekey:t,size:"invisible",callback:()=>{zs(e).reCAPTCHAState.succeeded=!0},"error-callback":()=>{zs(e).reCAPTCHAState.succeeded=!1}}),s=zs(e);s.reCAPTCHAState=Object.assign(Object.assign({},s.reCAPTCHAState),{widgetId:i})}function q5t(e){const t=document.createElement("script");t.src=B5t,t.onload=e,document.head.appendChild(t)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nee{constructor(t){this._siteKey=t,this._throttleData=null}async getToken(){var t,n,r;G5t(this._throttleData);const i=await V5t(this._app).catch(o=>{throw zu.create("recaptcha-error")});if(!(!((t=zs(this._app).reCAPTCHAState)===null||t===void 0)&&t.succeeded))throw zu.create("recaptcha-error");let s;try{s=await Iee(w5t(this._app,i),this._heartbeatServiceProvider)}catch(o){throw!((n=o.code)===null||n===void 0)&&n.includes("fetch-status-error")?(this._throttleData=W5t(Number((r=o.customData)===null||r===void 0?void 0:r.httpStatus),this._throttleData),zu.create("throttled",{time:j$e(this._throttleData.allowRequestsAfter-Date.now()),httpStatus:this._throttleData.httpStatus})):o}return this._throttleData=null,s}initialize(t){this._app=t,this._heartbeatServiceProvider=sv(t,"heartbeat"),U5t(t,this._siteKey).catch(()=>{})}isEqual(t){return t instanceof Nee?this._siteKey===t._siteKey:!1}}function W5t(e,t){if(e===404||e===403)return{backoffCount:1,allowRequestsAfter:Date.now()+y5t,httpStatus:e};{const n=t?t.backoffCount:0,r=o5t(n,1e3,2);return{backoffCount:n+1,allowRequestsAfter:Date.now()+r,httpStatus:e}}}function G5t(e){if(e&&Date.now()-e.allowRequestsAfter<=0)throw zu.create("throttled",{time:j$e(e.allowRequestsAfter-Date.now()),httpStatus:e.httpStatus})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y5t(e=a4(),t){e=a5t(e);const n=sv(e,"app-check");if(R4().initialized||R5t(),kee()&&Ree().then(i=>console.log(`App Check debug token: ${i}. You will need to add it to your app's App Check settings in the Firebase console for it to work.`)),n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(s.isTokenAutoRefreshEnabled===t.isTokenAutoRefreshEnabled&&s.provider.isEqual(t.provider))return i;throw zu.create("already-initialized",{appName:e.name})}const r=n.initialize({options:t});return K5t(e,t.provider,t.isTokenAutoRefreshEnabled),zs(e).isTokenAutoRefreshEnabled&&W$e(r,"INTERNAL",()=>{}),r}function K5t(e,t,n){const r=p5t(e,Object.assign({},L$e));r.activated=!0,r.provider=t,r.cachedTokenPromise=I5t(e).then(i=>(i&&Kw(i)&&(r.token=i,Y$e(e,{token:i.token})),i)),r.isTokenAutoRefreshEnabled=n===void 0?e.automaticDataCollectionEnabled:n,r.provider.initialize(e)}const X5t="app-check",Ame="app-check-internal";function Q5t(){td(new _me(X5t,e=>{const t=e.getProvider("app").getImmediate(),n=e.getProvider("heartbeat");return M5t(t,n)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider(Ame).initialize()})),td(new _me(Ame,e=>{const t=e.getProvider("app-check").getImmediate();return L5t(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),Ml(F5t,j5t)}Q5t();var Cme={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J5t=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=i&63|128):(i&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=i&63|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=i&63|128)}return t},Z5t=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=e[n++],o=e[n++],a=e[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;t[r++]=String.fromCharCode(55296+(u>>10)),t[r++]=String.fromCharCode(56320+(u&1023))}else{const s=e[n++],o=e[n++];t[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return t.join("")},ejt={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const s=e[i],o=i+1<e.length,a=o?e[i+1]:0,u=i+2<e.length,l=u?e[i+2]:0,c=s>>2,f=(s&3)<<4|a>>4;let d=(a&15)<<2|l>>6,h=l&63;u||(h=64,o||(d=64)),r.push(n[c],n[f],n[d],n[h])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(J5t(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Z5t(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const s=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const l=i<e.length?n[e.charAt(i)]:64;++i;const f=i<e.length?n[e.charAt(i)]:64;if(++i,s==null||a==null||l==null||f==null)throw new tjt;const d=s<<2|a>>4;if(r.push(d),l!==64){const h=a<<4&240|l>>2;if(r.push(h),f!==64){const p=l<<6&192|f;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class tjt extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const K$e=function(e){try{return ejt.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function njt(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rjt=()=>njt().__FIREBASE_DEFAULTS__,ijt=()=>{if(typeof process>"u"||typeof Cme>"u")return;const e=Cme.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},sjt=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&K$e(e[1]);return t&&JSON.parse(t)},X$e=()=>{try{return rjt()||ijt()||sjt()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},ojt=e=>{var t,n;return(n=(t=X$e())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},Q$e=e=>{var t;return(t=X$e())===null||t===void 0?void 0:t[`_${e}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ta(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function ajt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ta())}function ujt(){const e=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof e=="object"&&e.id!==void 0}function ljt(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function cjt(){const e=Ta();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fjt="FirebaseError";class sT extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=fjt,Object.setPrototypeOf(this,sT.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,N4.prototype.create)}}class N4{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},i=`${this.service}/${t}`,s=this.errors[t],o=s?djt(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new sT(i,a,r)}}function djt(e,t){return e.replace(hjt,(n,r)=>{const i=t[r];return i!=null?String(i):`<${r}?>`})}const hjt=/\{\$([^}]+)}/g;function pjt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function J$e(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const s=e[i],o=t[i];if(Ime(s)&&Ime(o)){if(!J$e(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Ime(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function AR(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(i=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function mjt(e,t){const n=new gjt(e,t);return n.subscribe.bind(n)}class gjt{constructor(t,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{t(this)}).catch(r=>{this.error(r)})}next(t){this.forEachObserver(n=>{n.next(t)})}error(t){this.forEachObserver(n=>{n.error(t)}),this.close(t)}complete(){this.forEachObserver(t=>{t.complete()}),this.close()}subscribe(t,n,r){let i;if(t===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");yjt(t,["next","error","complete"])?i=t:i={next:t,error:n,complete:r},i.next===void 0&&(i.next=O9),i.error===void 0&&(i.error=O9),i.complete===void 0&&(i.complete=O9);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(t){this.observers===void 0||this.observers[t]===void 0||(delete this.observers[t],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(t){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,t)}sendOne(t,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[t]!==void 0)try{n(this.observers[t])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(t){this.finalized||(this.finalized=!0,t!==void 0&&(this.finalError=t),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function yjt(e,t){if(typeof e!="object"||e===null)return!1;for(const n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}function O9(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oT(e){return e&&e._delegate?e._delegate:e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Xr;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(Xr||(Xr={}));const vjt={debug:Xr.DEBUG,verbose:Xr.VERBOSE,info:Xr.INFO,warn:Xr.WARN,error:Xr.ERROR,silent:Xr.SILENT},bjt=Xr.INFO,_jt={[Xr.DEBUG]:"log",[Xr.VERBOSE]:"log",[Xr.INFO]:"info",[Xr.WARN]:"warn",[Xr.ERROR]:"error"},wjt=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),i=_jt[t];if(i)console[i](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class Ejt{constructor(t){this.name=t,this._logLevel=bjt,this._logHandler=wjt,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Xr))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?vjt[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Xr.DEBUG,...t),this._logHandler(this,Xr.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Xr.VERBOSE,...t),this._logHandler(this,Xr.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Xr.INFO,...t),this._logHandler(this,Xr.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Xr.WARN,...t),this._logHandler(this,Xr.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Xr.ERROR,...t),this._logHandler(this,Xr.ERROR,...t)}}class kme{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}function Z$e(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const xjt=Z$e,eMe=new N4("auth","Firebase",Z$e());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const D3=new Ejt("@firebase/auth");function Sjt(e,...t){D3.logLevel<=Xr.WARN&&D3.warn(`Auth (${rf}): ${e}`,...t)}function yD(e,...t){D3.logLevel<=Xr.ERROR&&D3.error(`Auth (${rf}): ${e}`,...t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bh(e,...t){throw Oee(e,...t)}function Gf(e,...t){return Oee(e,...t)}function Pee(e,t,n){const r=Object.assign(Object.assign({},xjt()),{[t]:n});return new N4("auth","Firebase",r).create(t,{appName:e.name})}function B0(e){return Pee(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Tjt(e,t,n){const r=n;if(!(t instanceof r))throw r.name!==t.constructor.name&&Bh(e,"argument-error"),Pee(e,"argument-error",`Type of ${t.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Oee(e,...t){if(typeof e!="string"){const n=t[0],r=[...t.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(n,...r)}return eMe.create(e,...t)}function un(e,t,...n){if(!e)throw Oee(t,...n)}function nm(e){const t="INTERNAL ASSERTION FAILED: "+e;throw yD(t),new Error(t)}function Gm(e,t){e||nm(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JH(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.href)||""}function Ajt(){return Rme()==="http:"||Rme()==="https:"}function Rme(){var e;return typeof self<"u"&&((e=self.location)===null||e===void 0?void 0:e.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cjt(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Ajt()||ujt()||"connection"in navigator)?navigator.onLine:!0}function Ijt(){if(typeof navigator>"u")return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CR{constructor(t,n){this.shortDelay=t,this.longDelay=n,Gm(n>t,"Short delay should be less than long delay!"),this.isMobile=ajt()||ljt()}get(){return Cjt()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dee(e,t){Gm(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?`${n}${t.startsWith("/")?t.slice(1):t}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tMe{static initialize(t,n,r){this.fetchImpl=t,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;nm("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;nm("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;nm("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kjt={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rjt=new CR(3e4,6e4);function P4(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function aT(e,t,n,r,i={}){return nMe(e,i,async()=>{let s={},o={};r&&(t==="GET"?o=r:s={body:JSON.stringify(r)});const a=AR(Object.assign({key:e.config.apiKey},o)).slice(1),u=await e._getAdditionalHeaders();return u["Content-Type"]="application/json",e.languageCode&&(u["X-Firebase-Locale"]=e.languageCode),tMe.fetch()(iMe(e,e.config.apiHost,n,a),Object.assign({method:t,headers:u,referrerPolicy:"no-referrer"},s))})}async function nMe(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},kjt),t);try{const i=new Njt(e),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw zP(e,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,l]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw zP(e,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw zP(e,"email-already-in-use",o);if(u==="USER_DISABLED")throw zP(e,"user-disabled",o);const c=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(l)throw Pee(e,c,l);Bh(e,c)}}catch(i){if(i instanceof sT)throw i;Bh(e,"network-request-failed",{message:String(i)})}}async function rMe(e,t,n,r,i={}){const s=await aT(e,t,n,r,i);return"mfaPendingCredential"in s&&Bh(e,"multi-factor-auth-required",{_serverResponse:s}),s}function iMe(e,t,n,r){const i=`${t}${n}?${r}`;return e.config.emulator?Dee(e.config,i):`${e.config.apiScheme}://${i}`}class Njt{constructor(t){this.auth=t,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Gf(this.auth,"network-request-failed")),Rjt.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function zP(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Gf(e,t,r);return i.customData._tokenResponse=n,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Pjt(e,t){return aT(e,"POST","/v1/accounts:delete",t)}async function sMe(e,t){return aT(e,"POST","/v1/accounts:lookup",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch{}}async function Ojt(e,t=!1){const n=oT(e),r=await n.getIdToken(t),i=$ee(r);un(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:g2(D9(i.auth_time)),issuedAtTime:g2(D9(i.iat)),expirationTime:g2(D9(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function D9(e){return Number(e)*1e3}function $ee(e){const[t,n,r]=e.split(".");if(t===void 0||n===void 0||r===void 0)return yD("JWT malformed, contained fewer than 3 sections"),null;try{const i=K$e(n);return i?JSON.parse(i):(yD("Failed to decode base64 JWT payload"),null)}catch(i){return yD("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Nme(e){const t=$ee(e);return un(t,"internal-error"),un(typeof t.exp<"u","internal-error"),un(typeof t.iat<"u","internal-error"),Number(t.exp)-Number(t.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YI(e,t,n=!1){if(n)return t;try{return await t}catch(r){throw r instanceof sT&&Djt(r)&&e.auth.currentUser===e&&await e.auth.signOut(),r}}function Djt({code:e}){return e==="auth/user-disabled"||e==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $jt{constructor(t){this.user=t,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(t){var n;if(t){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(t=!1){if(!this.isRunning)return;const n=this.getInterval(t);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(t){(t==null?void 0:t.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZH{constructor(t,n){this.createdAt=t,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=g2(this.lastLoginAt),this.creationTime=g2(this.createdAt)}_copy(t){this.createdAt=t.createdAt,this.lastLoginAt=t.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $3(e){var t;const n=e.auth,r=await e.getIdToken(),i=await YI(e,sMe(n,{idToken:r}));un(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const o=!((t=s.providerUserInfo)===null||t===void 0)&&t.length?oMe(s.providerUserInfo):[],a=Ljt(e.providerData,o),u=e.isAnonymous,l=!(e.email&&s.passwordHash)&&!(a!=null&&a.length),c=u?l:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new ZH(s.createdAt,s.lastLoginAt),isAnonymous:c};Object.assign(e,f)}async function Mjt(e){const t=oT(e);await $3(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}function Ljt(e,t){return[...e.filter(r=>!t.some(i=>i.providerId===r.providerId)),...t]}function oMe(e){return e.map(t=>{var{providerId:n}=t,r=By(t,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fjt(e,t){const n=await nMe(e,{},async()=>{const r=AR({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:i,apiKey:s}=e.config,o=iMe(e,i,"/v1/token",`key=${s}`),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",tMe.fetch()(o,{method:"POST",headers:a,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function jjt(e,t){return aT(e,"POST","/v2/accounts:revokeToken",P4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NE{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(t){un(t.idToken,"internal-error"),un(typeof t.idToken<"u","internal-error"),un(typeof t.refreshToken<"u","internal-error");const n="expiresIn"in t&&typeof t.expiresIn<"u"?Number(t.expiresIn):Nme(t.idToken);this.updateTokensAndExpiration(t.idToken,t.refreshToken,n)}updateFromIdToken(t){un(t.length!==0,"internal-error");const n=Nme(t);this.updateTokensAndExpiration(t,null,n)}async getToken(t,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(un(this.refreshToken,t,"user-token-expired"),this.refreshToken?(await this.refresh(t,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(t,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await Fjt(t,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(t,n,r){this.refreshToken=n||null,this.accessToken=t||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(t,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new NE;return r&&(un(typeof r=="string","internal-error",{appName:t}),o.refreshToken=r),i&&(un(typeof i=="string","internal-error",{appName:t}),o.accessToken=i),s&&(un(typeof s=="number","internal-error",{appName:t}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(t){this.accessToken=t.accessToken,this.refreshToken=t.refreshToken,this.expirationTime=t.expirationTime}_clone(){return Object.assign(new NE,this.toJSON())}_performRefresh(){return nm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(e,t){un(typeof e=="string"||typeof e>"u","internal-error",{appName:t})}class rm{constructor(t){var{uid:n,auth:r,stsTokenManager:i}=t,s=By(t,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $jt(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new ZH(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(t){const n=await YI(this,this.stsTokenManager.getToken(this.auth,t));return un(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(t){return Ojt(this,t)}reload(){return Mjt(this)}_assign(t){this!==t&&(un(this.uid===t.uid,this.auth,"internal-error"),this.displayName=t.displayName,this.photoURL=t.photoURL,this.email=t.email,this.emailVerified=t.emailVerified,this.phoneNumber=t.phoneNumber,this.isAnonymous=t.isAnonymous,this.tenantId=t.tenantId,this.providerData=t.providerData.map(n=>Object.assign({},n)),this.metadata._copy(t.metadata),this.stsTokenManager._assign(t.stsTokenManager))}_clone(t){const n=new rm(Object.assign(Object.assign({},this),{auth:t,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(t){un(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=t,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(t){this.reloadListener?this.reloadListener(t):this.reloadUserInfo=t}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(t,n=!1){let r=!1;t.idToken&&t.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(t),r=!0),n&&await $3(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(uo(this.auth.app))return Promise.reject(B0(this.auth));const t=await this.getIdToken();return await YI(this,Pjt(this.auth,{idToken:t})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(t=>Object.assign({},t)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(t,n){var r,i,s,o,a,u,l,c;const f=(r=n.displayName)!==null&&r!==void 0?r:void 0,d=(i=n.email)!==null&&i!==void 0?i:void 0,h=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,p=(o=n.photoURL)!==null&&o!==void 0?o:void 0,m=(a=n.tenantId)!==null&&a!==void 0?a:void 0,g=(u=n._redirectEventId)!==null&&u!==void 0?u:void 0,y=(l=n.createdAt)!==null&&l!==void 0?l:void 0,v=(c=n.lastLoginAt)!==null&&c!==void 0?c:void 0,{uid:b,emailVerified:w,isAnonymous:E,providerData:T,stsTokenManager:S}=n;un(b&&S,t,"internal-error");const A=NE.fromJSON(this.name,S);un(typeof b=="string",t,"internal-error"),Ng(f,t.name),Ng(d,t.name),un(typeof w=="boolean",t,"internal-error"),un(typeof E=="boolean",t,"internal-error"),Ng(h,t.name),Ng(p,t.name),Ng(m,t.name),Ng(g,t.name),Ng(y,t.name),Ng(v,t.name);const C=new rm({uid:b,auth:t,email:d,emailVerified:w,displayName:f,isAnonymous:E,photoURL:p,phoneNumber:h,tenantId:m,stsTokenManager:A,createdAt:y,lastLoginAt:v});return T&&Array.isArray(T)&&(C.providerData=T.map(k=>Object.assign({},k))),g&&(C._redirectEventId=g),C}static async _fromIdTokenResponse(t,n,r=!1){const i=new NE;i.updateFromServerResponse(n);const s=new rm({uid:n.localId,auth:t,stsTokenManager:i,isAnonymous:r});return await $3(s),s}static async _fromGetAccountInfoResponse(t,n,r){const i=n.users[0];un(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?oMe(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new NE;a.updateFromIdToken(r);const u=new rm({uid:i.localId,auth:t,stsTokenManager:a,isAnonymous:o}),l={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new ZH(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,l),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pme=new Map;function im(e){Gm(e instanceof Function,"Expected a class definition");let t=Pme.get(e);return t?(Gm(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Pme.set(e,t),t)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aMe{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(t,n){this.storage[t]=n}async _get(t){const n=this.storage[t];return n===void 0?null:n}async _remove(t){delete this.storage[t]}_addListener(t,n){}_removeListener(t,n){}}aMe.type="NONE";const Ome=aMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vD(e,t,n){return`firebase:${e}:${t}:${n}`}class PE{constructor(t,n,r){this.persistence=t,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=vD(this.userKey,i.apiKey,s),this.fullPersistenceKey=vD("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(t){return this.persistence._set(this.fullUserKey,t.toJSON())}async getCurrentUser(){const t=await this.persistence._get(this.fullUserKey);return t?rm._fromJSON(this.auth,t):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(t){if(this.persistence===t)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=t,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(t,n,r="authUser"){if(!n.length)return new PE(im(Ome),t,r);const i=(await Promise.all(n.map(async l=>{if(await l._isAvailable())return l}))).filter(l=>l);let s=i[0]||im(Ome);const o=vD(r,t.config.apiKey,t.name);let a=null;for(const l of n)try{const c=await l._get(o);if(c){const f=rm._fromJSON(t,c);l!==s&&(a=f),s=l;break}}catch{}const u=i.filter(l=>l._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new PE(s,t,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async l=>{if(l!==s)try{await l._remove(o)}catch{}})),new PE(s,t,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dme(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(cMe(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(uMe(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(dMe(t))return"Blackberry";if(hMe(t))return"Webos";if(Mee(t))return"Safari";if((t.includes("chrome/")||lMe(t))&&!t.includes("edge/"))return"Chrome";if(fMe(t))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=e.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function uMe(e=Ta()){return/firefox\//i.test(e)}function Mee(e=Ta()){const t=e.toLowerCase();return t.includes("safari/")&&!t.includes("chrome/")&&!t.includes("crios/")&&!t.includes("android")}function lMe(e=Ta()){return/crios\//i.test(e)}function cMe(e=Ta()){return/iemobile/i.test(e)}function fMe(e=Ta()){return/android/i.test(e)}function dMe(e=Ta()){return/blackberry/i.test(e)}function hMe(e=Ta()){return/webos/i.test(e)}function O4(e=Ta()){return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Bjt(e=Ta()){var t;return O4(e)&&!!(!((t=window.navigator)===null||t===void 0)&&t.standalone)}function Ujt(){return cjt()&&document.documentMode===10}function pMe(e=Ta()){return O4(e)||fMe(e)||hMe(e)||dMe(e)||/windows phone/i.test(e)||cMe(e)}function zjt(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mMe(e,t=[]){let n;switch(e){case"Browser":n=Dme(Ta());break;case"Worker":n=`${Dme(Ta())}-${e}`;break;default:n=e}const r=t.length?t.join(","):"FirebaseCore-web";return`${n}/JsCore/${rf}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vjt{constructor(t){this.auth=t,this.queue=[]}pushCallback(t,n){const r=s=>new Promise((o,a)=>{try{const u=t(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(t){if(this.auth.currentUser===t)return;const n=[];try{for(const r of this.queue)await r(t),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hjt(e,t={}){return aT(e,"GET","/v2/passwordPolicy",P4(e,t))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qjt=6;class Wjt{constructor(t){var n,r,i,s;const o=t.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:qjt,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=t.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=t.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=t.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=t.schemaVersion}validatePassword(t){var n,r,i,s,o,a;const u={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(t,u),this.validatePasswordCharacterOptions(t,u),u.isValid&&(u.isValid=(n=u.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),u.isValid&&(u.isValid=(r=u.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),u.isValid&&(u.isValid=(i=u.containsLowercaseLetter)!==null&&i!==void 0?i:!0),u.isValid&&(u.isValid=(s=u.containsUppercaseLetter)!==null&&s!==void 0?s:!0),u.isValid&&(u.isValid=(o=u.containsNumericCharacter)!==null&&o!==void 0?o:!0),u.isValid&&(u.isValid=(a=u.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),u}validatePasswordLengthOptions(t,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=t.length>=r),i&&(n.meetsMaxPasswordLength=t.length<=i)}validatePasswordCharacterOptions(t,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<t.length;i++)r=t.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(t,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(t.containsLowercaseLetter||(t.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(t.containsUppercaseLetter||(t.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(t.containsNumericCharacter||(t.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(t.containsNonAlphanumericCharacter||(t.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gjt{constructor(t,n,r,i){this.app=t,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new $me(this),this.idTokenSubscription=new $me(this),this.beforeStateQueue=new Vjt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=eMe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=t.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(t,n){return n&&(this._popupRedirectResolver=im(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await PE.create(this,t),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const t=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!t)){if(this.currentUser&&t&&this.currentUser.uid===t.uid){this._currentUser._assign(t),await this.currentUser.getIdToken();return}await this._updateCurrentUser(t,!0)}}async initializeCurrentUserFromIdToken(t){try{const n=await sMe(this,{idToken:t}),r=await rm._fromGetAccountInfoResponse(this,n,t);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(t){var n;if(uo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(t&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,a=i==null?void 0:i._redirectEventId,u=await this.tryRedirectSignIn(t);(!o||o===a)&&(u!=null&&u.user)&&(i=u.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return un(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(t){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,t,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(t){try{await $3(t)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(t)}useDeviceLanguage(){this.languageCode=Ijt()}async _delete(){this._deleted=!0}async updateCurrentUser(t){if(uo(this.app))return Promise.reject(B0(this));const n=t?oT(t):null;return n&&un(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(t,n=!1){if(!this._deleted)return t&&un(this.tenantId===t.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(t),this.queue(async()=>{await this.directlySetCurrentUser(t),this.notifyAuthListeners()})}async signOut(){return uo(this.app)?Promise.reject(B0(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(t){return uo(this.app)?Promise.reject(B0(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(im(t))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(t){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(t)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const t=await Hjt(this),n=new Wjt(t);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(t){this._errorFactory=new N4("auth","Firebase",t())}onAuthStateChanged(t,n,r){return this.registerStateListener(this.authStateSubscription,t,n,r)}beforeAuthStateChanged(t,n){return this.beforeStateQueue.pushCallback(t,n)}onIdTokenChanged(t,n,r){return this.registerStateListener(this.idTokenSubscription,t,n,r)}authStateReady(){return new Promise((t,n)=>{if(this.currentUser)t();else{const r=this.onAuthStateChanged(()=>{r(),t()},n)}})}async revokeAccessToken(t){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:t,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await jjt(this,r)}}toJSON(){var t;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(t=this._currentUser)===null||t===void 0?void 0:t.toJSON()}}async _setRedirectUser(t,n){const r=await this.getOrInitRedirectPersistenceManager(n);return t===null?r.removeCurrentUser():r.setCurrentUser(t)}async getOrInitRedirectPersistenceManager(t){if(!this.redirectPersistenceManager){const n=t&&im(t)||this._popupRedirectResolver;un(n,this,"argument-error"),this.redirectPersistenceManager=await PE.create(this,[im(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(t){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===t?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===t?this.redirectUser:null}async _persistUserIfCurrent(t){if(t===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(t))}_notifyListenersIfCurrent(t){t===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var t,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(t=this.currentUser)===null||t===void 0?void 0:t.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(t,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(un(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=t.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=t.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(t){this.currentUser&&this.currentUser!==t&&this._currentUser._stopProactiveRefresh(),t&&this.isProactiveRefreshEnabled&&t._startProactiveRefresh(),this.currentUser=t,t?await this.assertedPersistence.setCurrentUser(t):await this.assertedPersistence.removeCurrentUser()}queue(t){return this.operations=this.operations.then(t,t),this.operations}get assertedPersistence(){return un(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(t){!t||this.frameworks.includes(t)||(this.frameworks.push(t),this.frameworks.sort(),this.clientVersion=mMe(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var t;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((t=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var t;const n=await((t=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||t===void 0?void 0:t.getToken());return n!=null&&n.error&&Sjt(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function IR(e){return oT(e)}class $me{constructor(t){this.auth=t,this.observer=null,this.addObserver=mjt(n=>this.observer=n)}get next(){return un(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lee={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Yjt(e){Lee=e}function Kjt(e){return Lee.loadJS(e)}function Xjt(){return Lee.gapiScript}function Qjt(e){return`__${e}${Math.floor(Math.random()*1e6)}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jjt(e,t){const n=sv(e,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(J$e(s,t??{}))return i;Bh(i,"already-initialized")}return n.initialize({options:t})}function Zjt(e,t){const n=(t==null?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(im);t!=null&&t.errorMap&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,t==null?void 0:t.popupRedirectResolver)}function e8t(e,t,n){const r=IR(e);un(r._canInitEmulator,r,"emulator-config-failed"),un(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!1,s=gMe(t),{host:o,port:a}=t8t(t),u=a===null?"":`:${a}`;r.config.emulator={url:`${s}//${o}${u}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),n8t()}function gMe(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function t8t(e){const t=gMe(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Mme(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Mme(o)}}}function Mme(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}function n8t(){function e(){const t=document.createElement("p"),n=t.style;t.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",t.classList.add("firebase-emulator-warning"),document.body.appendChild(t)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",e):e())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yMe{constructor(t,n){this.providerId=t,this.signInMethod=n}toJSON(){return nm("not implemented")}_getIdTokenResponse(t){return nm("not implemented")}_linkToIdToken(t,n){return nm("not implemented")}_getReauthenticationResolver(t){return nm("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OE(e,t){return rMe(e,"POST","/v1/accounts:signInWithIdp",P4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r8t="http://localhost";class Eb extends yMe{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(t){const n=new Eb(t.providerId,t.signInMethod);return t.idToken||t.accessToken?(t.idToken&&(n.idToken=t.idToken),t.accessToken&&(n.accessToken=t.accessToken),t.nonce&&!t.pendingToken&&(n.nonce=t.nonce),t.pendingToken&&(n.pendingToken=t.pendingToken)):t.oauthToken&&t.oauthTokenSecret?(n.accessToken=t.oauthToken,n.secret=t.oauthTokenSecret):Bh("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(t){const n=typeof t=="string"?JSON.parse(t):t,{providerId:r,signInMethod:i}=n,s=By(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Eb(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(t){const n=this.buildRequest();return OE(t,n)}_linkToIdToken(t,n){const r=this.buildRequest();return r.idToken=n,OE(t,r)}_getReauthenticationResolver(t){const n=this.buildRequest();return n.autoCreate=!1,OE(t,n)}buildRequest(){const t={requestUri:r8t,returnSecureToken:!0};if(this.pendingToken)t.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),t.postBody=AR(n)}return t}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fee{constructor(t){this.providerId=t,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(t){this.defaultLanguageCode=t}setCustomParameters(t){return this.customParameters=t,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kR extends Fee{constructor(){super(...arguments),this.scopes=[]}addScope(t){return this.scopes.includes(t)||this.scopes.push(t),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class t0 extends kR{constructor(){super("facebook.com")}static credential(t){return Eb._fromParams({providerId:t0.PROVIDER_ID,signInMethod:t0.FACEBOOK_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return t0.credentialFromTaggedObject(t)}static credentialFromError(t){return t0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return t0.credential(t.oauthAccessToken)}catch{return null}}}t0.FACEBOOK_SIGN_IN_METHOD="facebook.com";t0.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wp extends kR{constructor(){super("google.com"),this.addScope("profile")}static credential(t,n){return Eb._fromParams({providerId:Wp.PROVIDER_ID,signInMethod:Wp.GOOGLE_SIGN_IN_METHOD,idToken:t,accessToken:n})}static credentialFromResult(t){return Wp.credentialFromTaggedObject(t)}static credentialFromError(t){return Wp.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return Wp.credential(n,r)}catch{return null}}}Wp.GOOGLE_SIGN_IN_METHOD="google.com";Wp.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n0 extends kR{constructor(){super("github.com")}static credential(t){return Eb._fromParams({providerId:n0.PROVIDER_ID,signInMethod:n0.GITHUB_SIGN_IN_METHOD,accessToken:t})}static credentialFromResult(t){return n0.credentialFromTaggedObject(t)}static credentialFromError(t){return n0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t||!("oauthAccessToken"in t)||!t.oauthAccessToken)return null;try{return n0.credential(t.oauthAccessToken)}catch{return null}}}n0.GITHUB_SIGN_IN_METHOD="github.com";n0.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r0 extends kR{constructor(){super("twitter.com")}static credential(t,n){return Eb._fromParams({providerId:r0.PROVIDER_ID,signInMethod:r0.TWITTER_SIGN_IN_METHOD,oauthToken:t,oauthTokenSecret:n})}static credentialFromResult(t){return r0.credentialFromTaggedObject(t)}static credentialFromError(t){return r0.credentialFromTaggedObject(t.customData||{})}static credentialFromTaggedObject({_tokenResponse:t}){if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return r0.credential(n,r)}catch{return null}}}r0.TWITTER_SIGN_IN_METHOD="twitter.com";r0.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function i8t(e,t){return rMe(e,"POST","/v1/accounts:signUp",P4(e,t))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xy{constructor(t){this.user=t.user,this.providerId=t.providerId,this._tokenResponse=t._tokenResponse,this.operationType=t.operationType}static async _fromIdTokenResponse(t,n,r,i=!1){const s=await rm._fromIdTokenResponse(t,r,i),o=Lme(r);return new xy({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(t,n,r){await t._updateTokensIfNecessary(r,!0);const i=Lme(r);return new xy({user:t,providerId:i,_tokenResponse:r,operationType:n})}}function Lme(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function s8t(e){var t;if(uo(e.app))return Promise.reject(B0(e));const n=IR(e);if(await n._initializationPromise,!((t=n.currentUser)===null||t===void 0)&&t.isAnonymous)return new xy({user:n.currentUser,providerId:null,operationType:"signIn"});const r=await i8t(n,{returnSecureToken:!0}),i=await xy._fromIdTokenResponse(n,"signIn",r,!0);return await n._updateCurrentUser(i.user),i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3 extends sT{constructor(t,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,M3.prototype),this.customData={appName:t.name,tenantId:(s=t.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(t,n,r,i){return new M3(t,n,r,i)}}function vMe(e,t,n,r){return(t==="reauthenticate"?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?M3._fromErrorAndOperation(e,s,t,r):s})}async function o8t(e,t,n=!1){const r=await YI(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return xy._forOperation(e,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a8t(e,t,n=!1){const{auth:r}=e;if(uo(r.app))return Promise.reject(B0(r));const i="reauthenticate";try{const s=await YI(e,vMe(r,i,t,e),n);un(s.idToken,r,"internal-error");const o=$ee(s.idToken);un(o,r,"internal-error");const{sub:a}=o;return un(e.uid===a,r,"user-mismatch"),xy._forOperation(e,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Bh(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u8t(e,t,n=!1){if(uo(e.app))return Promise.reject(B0(e));const r="signIn",i=await vMe(e,r,t),s=await xy._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}function l8t(e,t,n,r){return oT(e).onIdTokenChanged(t,n,r)}function c8t(e,t,n){return oT(e).beforeAuthStateChanged(t,n)}const L3="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bMe{constructor(t,n){this.storageRetriever=t,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(L3,"1"),this.storage.removeItem(L3),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(t,n){return this.storage.setItem(t,JSON.stringify(n)),Promise.resolve()}_get(t){const n=this.storage.getItem(t);return Promise.resolve(n?JSON.parse(n):null)}_remove(t){return this.storage.removeItem(t),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function f8t(){const e=Ta();return Mee(e)||O4(e)}const d8t=1e3,h8t=10;class _Me extends bMe{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(t,n)=>this.onStorageEvent(t,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=f8t()&&zjt(),this.fallbackToPolling=pMe(),this._shouldAllowMigration=!0}forAllChangedKeys(t){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&t(n,i,r)}}onStorageEvent(t,n=!1){if(!t.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=t.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(t.newValue!==o)t.newValue!==null?this.storage.setItem(r,t.newValue):this.storage.removeItem(r);else if(this.localCache[r]===t.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);Ujt()&&s!==t.newValue&&t.newValue!==t.oldValue?setTimeout(i,h8t):i()}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((t,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:t,oldValue:n,newValue:r}),!0)})},d8t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(t,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[t]||(this.listeners[t]=new Set,this.localCache[t]=this.storage.getItem(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(t,n){await super._set(t,n),this.localCache[t]=JSON.stringify(n)}async _get(t){const n=await super._get(t);return this.localCache[t]=JSON.stringify(n),n}async _remove(t){await super._remove(t),delete this.localCache[t]}}_Me.type="LOCAL";const p8t=_Me;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wMe extends bMe{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(t,n){}_removeListener(t,n){}}wMe.type="SESSION";const EMe=wMe;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m8t(e){return Promise.all(e.map(async t=>{try{return{fulfilled:!0,value:await t}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D4{constructor(t){this.eventTarget=t,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(t){const n=this.receivers.find(i=>i.isListeningto(t));if(n)return n;const r=new D4(t);return this.receivers.push(r),r}isListeningto(t){return this.eventTarget===t}async handleEvent(t){const n=t,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async l=>l(n.origin,s)),u=await m8t(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(t,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[t]||(this.handlersMap[t]=new Set),this.handlersMap[t].add(n)}_unsubscribe(t,n){this.handlersMap[t]&&n&&this.handlersMap[t].delete(n),(!n||this.handlersMap[t].size===0)&&delete this.handlersMap[t],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}D4.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jee(e="",t=10){let n="";for(let r=0;r<t;r++)n+=Math.floor(Math.random()*10);return e+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class g8t{constructor(t){this.target=t,this.handlers=new Set}removeMessageHandler(t){t.messageChannel&&(t.messageChannel.port1.removeEventListener("message",t.onMessage),t.messageChannel.port1.close()),this.handlers.delete(t)}async _send(t,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const l=jee("",20);i.port1.start();const c=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const d=f;if(d.data.eventId===l)switch(d.data.status){case"ack":clearTimeout(c),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(d.data.response);break;default:clearTimeout(c),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:t,eventId:l,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sh(){return window}function y8t(e){Sh().location.href=e}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xMe(){return typeof Sh().WorkerGlobalScope<"u"&&typeof Sh().importScripts=="function"}async function v8t(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function b8t(){var e;return((e=navigator==null?void 0:navigator.serviceWorker)===null||e===void 0?void 0:e.controller)||null}function _8t(){return xMe()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SMe="firebaseLocalStorageDb",w8t=1,F3="firebaseLocalStorage",TMe="fbase_key";class RR{constructor(t){this.request=t}toPromise(){return new Promise((t,n)=>{this.request.addEventListener("success",()=>{t(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function $4(e,t){return e.transaction([F3],t?"readwrite":"readonly").objectStore(F3)}function E8t(){const e=indexedDB.deleteDatabase(SMe);return new RR(e).toPromise()}function eq(){const e=indexedDB.open(SMe,w8t);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const r=e.result;try{r.createObjectStore(F3,{keyPath:TMe})}catch(i){n(i)}}),e.addEventListener("success",async()=>{const r=e.result;r.objectStoreNames.contains(F3)?t(r):(r.close(),await E8t(),t(await eq()))})})}async function Fme(e,t,n){const r=$4(e,!0).put({[TMe]:t,value:n});return new RR(r).toPromise()}async function x8t(e,t){const n=$4(e,!1).get(t),r=await new RR(n).toPromise();return r===void 0?null:r.value}function jme(e,t){const n=$4(e,!0).delete(t);return new RR(n).toPromise()}const S8t=800,T8t=3;class AMe{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await eq(),this.db)}async _withRetries(t){let n=0;for(;;)try{const r=await this._openDb();return await t(r)}catch(r){if(n++>T8t)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return xMe()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=D4._getInstance(_8t()),this.receiver._subscribe("keyChanged",async(t,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(t,n)=>["keyChanged"])}async initializeSender(){var t,n;if(this.activeServiceWorker=await v8t(),!this.activeServiceWorker)return;this.sender=new g8t(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((t=r[0])===null||t===void 0)&&t.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(t){if(!(!this.sender||!this.activeServiceWorker||b8t()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:t},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const t=await eq();return await Fme(t,L3,"1"),await jme(t,L3),!0}catch{}return!1}async _withPendingWrite(t){this.pendingWrites++;try{await t()}finally{this.pendingWrites--}}async _set(t,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>Fme(r,t,n)),this.localCache[t]=n,this.notifyServiceWorker(t)))}async _get(t){const n=await this._withRetries(r=>x8t(r,t));return this.localCache[t]=n,n}async _remove(t){return this._withPendingWrite(async()=>(await this._withRetries(n=>jme(n,t)),delete this.localCache[t],this.notifyServiceWorker(t)))}async _poll(){const t=await this._withRetries(i=>{const s=$4(i,!1).getAll();return new RR(s).toPromise()});if(!t)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(t.length!==0)for(const{fbase_key:i,value:s}of t)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(t,n){this.localCache[t]=n;const r=this.listeners[t];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),S8t)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(t,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[t]||(this.listeners[t]=new Set,this._get(t)),this.listeners[t].add(n)}_removeListener(t,n){this.listeners[t]&&(this.listeners[t].delete(n),this.listeners[t].size===0&&delete this.listeners[t]),Object.keys(this.listeners).length===0&&this.stopPolling()}}AMe.type="LOCAL";const A8t=AMe;new CR(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CMe(e,t){return t?im(t):(un(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bee extends yMe{constructor(t){super("custom","custom"),this.params=t}_getIdTokenResponse(t){return OE(t,this._buildIdpRequest())}_linkToIdToken(t,n){return OE(t,this._buildIdpRequest(n))}_getReauthenticationResolver(t){return OE(t,this._buildIdpRequest())}_buildIdpRequest(t){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return t&&(n.idToken=t),n}}function C8t(e){return u8t(e.auth,new Bee(e),e.bypassAuthState)}function I8t(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),a8t(n,new Bee(e),e.bypassAuthState)}async function k8t(e){const{auth:t,user:n}=e;return un(n,t,"internal-error"),o8t(n,new Bee(e),e.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IMe{constructor(t,n,r,i,s=!1){this.auth=t,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(t,n)=>{this.pendingPromise={resolve:t,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(t){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=t;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(l){this.reject(l)}}onError(t){this.reject(t)}getIdpTask(t){switch(t){case"signInViaPopup":case"signInViaRedirect":return C8t;case"linkViaPopup":case"linkViaRedirect":return k8t;case"reauthViaPopup":case"reauthViaRedirect":return I8t;default:Bh(this.auth,"internal-error")}}resolve(t){Gm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(t),this.unregisterAndCleanUp()}reject(t){Gm(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(t),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R8t=new CR(2e3,1e4);async function N8t(e,t,n){if(uo(e.app))return Promise.reject(Gf(e,"operation-not-supported-in-this-environment"));const r=IR(e);Tjt(e,t,Fee);const i=CMe(r,n);return new P1(r,"signInViaPopup",t,i).executeNotNull()}class P1 extends IMe{constructor(t,n,r,i,s){super(t,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,P1.currentPopupAction&&P1.currentPopupAction.cancel(),P1.currentPopupAction=this}async executeNotNull(){const t=await this.execute();return un(t,this.auth,"internal-error"),t}async onExecution(){Gm(this.filter.length===1,"Popup operations only handle one event");const t=jee();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],t),this.authWindow.associatedEvent=t,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Gf(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var t;return((t=this.authWindow)===null||t===void 0?void 0:t.associatedEvent)||null}cancel(){this.reject(Gf(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,P1.currentPopupAction=null}pollUserCancellation(){const t=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Gf(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(t,R8t.get())};t()}}P1.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P8t="pendingRedirect",bD=new Map;class O8t extends IMe{constructor(t,n,r=!1){super(t,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let t=bD.get(this.auth._key());if(!t){try{const r=await D8t(this.resolver,this.auth)?await super.execute():null;t=()=>Promise.resolve(r)}catch(n){t=()=>Promise.reject(n)}bD.set(this.auth._key(),t)}return this.bypassAuthState||bD.set(this.auth._key(),()=>Promise.resolve(null)),t()}async onAuthEvent(t){if(t.type==="signInViaRedirect")return super.onAuthEvent(t);if(t.type==="unknown"){this.resolve(null);return}if(t.eventId){const n=await this.auth._redirectUserForId(t.eventId);if(n)return this.user=n,super.onAuthEvent(t);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function D8t(e,t){const n=L8t(t),r=M8t(e);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function $8t(e,t){bD.set(e._key(),t)}function M8t(e){return im(e._redirectPersistence)}function L8t(e){return vD(P8t,e.config.apiKey,e.name)}async function F8t(e,t,n=!1){if(uo(e.app))return Promise.reject(B0(e));const r=IR(e),i=CMe(r,t),o=await new O8t(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,t)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j8t=10*60*1e3;class B8t{constructor(t){this.auth=t,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(t){this.consumers.add(t),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,t)&&(this.sendToConsumer(this.queuedRedirectEvent,t),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(t){this.consumers.delete(t)}onEvent(t){if(this.hasEventBeenHandled(t))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(t,r)&&(n=!0,this.sendToConsumer(t,r),this.saveEventToCache(t))}),this.hasHandledPotentialRedirect||!U8t(t)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=t,n=!0)),n}sendToConsumer(t,n){var r;if(t.error&&!kMe(t)){const i=((r=t.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Gf(this.auth,i))}else n.onAuthEvent(t)}isEventForConsumer(t,n){const r=n.eventId===null||!!t.eventId&&t.eventId===n.eventId;return n.filter.includes(t.type)&&r}hasEventBeenHandled(t){return Date.now()-this.lastProcessedEventTime>=j8t&&this.cachedEventUids.clear(),this.cachedEventUids.has(Bme(t))}saveEventToCache(t){this.cachedEventUids.add(Bme(t)),this.lastProcessedEventTime=Date.now()}}function Bme(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(t=>t).join("-")}function kMe({type:e,error:t}){return e==="unknown"&&(t==null?void 0:t.code)==="auth/no-auth-event"}function U8t(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return kMe(e);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z8t(e,t={}){return aT(e,"GET","/v1/projects",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V8t=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,H8t=/^https?/;async function q8t(e){if(e.config.emulator)return;const{authorizedDomains:t}=await z8t(e);for(const n of t)try{if(W8t(n))return}catch{}Bh(e,"unauthorized-domain")}function W8t(e){const t=JH(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const o=new URL(e);return o.hostname===""&&r===""?n==="chrome-extension:"&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!H8t.test(n))return!1;if(V8t.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const G8t=new CR(3e4,6e4);function Ume(){const e=Sh().___jsl;if(e!=null&&e.H){for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}}function Y8t(e){return new Promise((t,n)=>{var r,i,s;function o(){Ume(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{Ume(),n(Gf(e,"network-request-failed"))},timeout:G8t.get()})}if(!((i=(r=Sh().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)t(gapi.iframes.getContext());else if(!((s=Sh().gapi)===null||s===void 0)&&s.load)o();else{const a=Qjt("iframefcb");return Sh()[a]=()=>{gapi.load?o():n(Gf(e,"network-request-failed"))},Kjt(`${Xjt()}?onload=${a}`).catch(u=>n(u))}}).catch(t=>{throw _D=null,t})}let _D=null;function K8t(e){return _D=_D||Y8t(e),_D}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X8t=new CR(5e3,15e3),Q8t="__/auth/iframe",J8t="emulator/auth/iframe",Z8t={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},eBt=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function tBt(e){const t=e.config;un(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?Dee(t,J8t):`https://${e.config.authDomain}/${Q8t}`,r={apiKey:t.apiKey,appName:e.name,v:rf},i=eBt.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${AR(r).slice(1)}`}async function nBt(e){const t=await K8t(e),n=Sh().gapi;return un(n,e,"internal-error"),t.open({where:document.body,url:tBt(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Z8t,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Gf(e,"network-request-failed"),a=Sh().setTimeout(()=>{s(o)},X8t.get());function u(){Sh().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rBt={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},iBt=500,sBt=600,oBt="_blank",aBt="http://localhost";class zme{constructor(t){this.window=t,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function uBt(e,t,n,r=iBt,i=sBt){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u=Object.assign(Object.assign({},rBt),{width:r.toString(),height:i.toString(),top:s,left:o}),l=Ta().toLowerCase();n&&(a=lMe(l)?oBt:n),uMe(l)&&(t=t||aBt,u.scrollbars="yes");const c=Object.entries(u).reduce((d,[h,p])=>`${d}${h}=${p},`,"");if(Bjt(l)&&a!=="_self")return lBt(t||"",a),new zme(null);const f=window.open(t||"",a,c);un(f,e,"popup-blocked");try{f.focus()}catch{}return new zme(f)}function lBt(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cBt="__/auth/handler",fBt="emulator/auth/handler",dBt=encodeURIComponent("fac");async function Vme(e,t,n,r,i,s){un(e.config.authDomain,e,"auth-domain-config-required"),un(e.config.apiKey,e,"invalid-api-key");const o={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:rf,eventId:i};if(t instanceof Fee){t.setDefaultLanguage(e.languageCode),o.providerId=t.providerId||"",pjt(t.getCustomParameters())||(o.customParameters=JSON.stringify(t.getCustomParameters()));for(const[c,f]of Object.entries({}))o[c]=f}if(t instanceof kR){const c=t.getScopes().filter(f=>f!=="");c.length>0&&(o.scopes=c.join(","))}e.tenantId&&(o.tid=e.tenantId);const a=o;for(const c of Object.keys(a))a[c]===void 0&&delete a[c];const u=await e._getAppCheckToken(),l=u?`#${dBt}=${encodeURIComponent(u)}`:"";return`${hBt(e)}?${AR(a).slice(1)}${l}`}function hBt({config:e}){return e.emulator?Dee(e,fBt):`https://${e.authDomain}/${cBt}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $9="webStorageSupport";class pBt{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=EMe,this._completeRedirectFn=F8t,this._overrideRedirectResult=$8t}async _openPopup(t,n,r,i){var s;Gm((s=this.eventManagers[t._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Vme(t,n,r,JH(),i);return uBt(t,o,jee())}async _openRedirect(t,n,r,i){await this._originValidation(t);const s=await Vme(t,n,r,JH(),i);return y8t(s),new Promise(()=>{})}_initialize(t){const n=t._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(Gm(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(t);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(t){const n=await nBt(t),r=new B8t(t);return n.register("authEvent",i=>(un(i==null?void 0:i.authEvent,t,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[t._key()]={manager:r},this.iframes[t._key()]=n,r}_isIframeWebStorageSupported(t,n){this.iframes[t._key()].send($9,{type:$9},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[$9];o!==void 0&&n(!!o),Bh(t,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(t){const n=t._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=q8t(t)),this.originValidationPromises[n]}get _shouldInitProactively(){return pMe()||Mee()||O4()}}const RMe=pBt;var Hme="@firebase/auth",qme="1.7.4";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mBt{constructor(t){this.auth=t,this.internalListeners=new Map}getUid(){var t;return this.assertAuthConfigured(),((t=this.auth.currentUser)===null||t===void 0?void 0:t.uid)||null}async getToken(t){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(t)}:null}addAuthTokenListener(t){if(this.assertAuthConfigured(),this.internalListeners.has(t))return;const n=this.auth.onIdTokenChanged(r=>{t((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(t,n),this.updateProactiveRefresh()}removeAuthTokenListener(t){this.assertAuthConfigured();const n=this.internalListeners.get(t);n&&(this.internalListeners.delete(t),n(),this.updateProactiveRefresh())}assertAuthConfigured(){un(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gBt(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function yBt(e){td(new kme("auth",(t,{options:n})=>{const r=t.getProvider("app").getImmediate(),i=t.getProvider("heartbeat"),s=t.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;un(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:e,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:mMe(e)},l=new Gjt(r,i,s,u);return Zjt(l,n),l},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((t,n,r)=>{t.getProvider("auth-internal").initialize()})),td(new kme("auth-internal",t=>{const n=IR(t.getProvider("auth").getImmediate());return(r=>new mBt(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ml(Hme,qme,gBt(e)),Ml(Hme,qme,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vBt=5*60,bBt=Q$e("authIdTokenMaxAge")||vBt;let Wme=null;const _Bt=e=>async t=>{const n=t&&await t.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>bBt)return;const i=n==null?void 0:n.token;Wme!==i&&(Wme=i,await fetch(e,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function NMe(e=a4()){const t=sv(e,"auth");if(t.isInitialized())return t.getImmediate();const n=Jjt(e,{popupRedirectResolver:RMe,persistence:[A8t,p8t,EMe]}),r=Q$e("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=_Bt(s.toString());c8t(n,o,()=>o(n.currentUser)),l8t(n,a=>o(a))}}const i=ojt("auth");return i&&e8t(n,`http://${i}`),n}function wBt(){var e,t;return(t=(e=document.getElementsByTagName("head"))===null||e===void 0?void 0:e[0])!==null&&t!==void 0?t:document}Yjt({loadJS(e){return new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=i=>{const s=Gf("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",wBt().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});yBt("Browser");function VP(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var PMe={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(e,t){(function(n){e.exports=n()})(function(){return function n(r,i,s){function o(l,c){if(!i[l]){if(!r[l]){var f=typeof VP=="function"&&VP;if(!c&&f)return f(l,!0);if(a)return a(l,!0);var d=new Error("Cannot find module '"+l+"'");throw d.code="MODULE_NOT_FOUND",d}var h=i[l]={exports:{}};r[l][0].call(h.exports,function(p){var m=r[l][1][p];return o(m||p)},h,h.exports,n,r,i,s)}return i[l].exports}for(var a=typeof VP=="function"&&VP,u=0;u<s.length;u++)o(s[u]);return o}({1:[function(n,r,i){(function(s){var o=s.MutationObserver||s.WebKitMutationObserver,a;if(o){var u=0,l=new o(p),c=s.document.createTextNode("");l.observe(c,{characterData:!0}),a=function(){c.data=u=++u%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var f=new s.MessageChannel;f.port1.onmessage=p,a=function(){f.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?a=function(){var g=s.document.createElement("script");g.onreadystatechange=function(){p(),g.onreadystatechange=null,g.parentNode.removeChild(g),g=null},s.document.documentElement.appendChild(g)}:a=function(){setTimeout(p,0)};var d,h=[];function p(){d=!0;for(var g,y,v=h.length;v;){for(y=h,h=[],g=-1;++g<v;)y[g]();v=h.length}d=!1}r.exports=m;function m(g){h.push(g)===1&&!d&&a()}}).call(this,typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(n,r,i){var s=n(1);function o(){}var a={},u=["REJECTED"],l=["FULFILLED"],c=["PENDING"];r.exports=f;function f(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==o&&m(this,E)}f.prototype.catch=function(E){return this.then(null,E)},f.prototype.then=function(E,T){if(typeof E!="function"&&this.state===l||typeof T!="function"&&this.state===u)return this;var S=new this.constructor(o);if(this.state!==c){var A=this.state===l?E:T;h(S,A,this.outcome)}else this.queue.push(new d(S,E,T));return S};function d(E,T,S){this.promise=E,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof S=="function"&&(this.onRejected=S,this.callRejected=this.otherCallRejected)}d.prototype.callFulfilled=function(E){a.resolve(this.promise,E)},d.prototype.otherCallFulfilled=function(E){h(this.promise,this.onFulfilled,E)},d.prototype.callRejected=function(E){a.reject(this.promise,E)},d.prototype.otherCallRejected=function(E){h(this.promise,this.onRejected,E)};function h(E,T,S){s(function(){var A;try{A=T(S)}catch(C){return a.reject(E,C)}A===E?a.reject(E,new TypeError("Cannot resolve promise with itself")):a.resolve(E,A)})}a.resolve=function(E,T){var S=g(p,T);if(S.status==="error")return a.reject(E,S.value);var A=S.value;if(A)m(E,A);else{E.state=l,E.outcome=T;for(var C=-1,k=E.queue.length;++C<k;)E.queue[C].callFulfilled(T)}return E},a.reject=function(E,T){E.state=u,E.outcome=T;for(var S=-1,A=E.queue.length;++S<A;)E.queue[S].callRejected(T);return E};function p(E){var T=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof T=="function")return function(){T.apply(E,arguments)}}function m(E,T){var S=!1;function A(D){S||(S=!0,a.reject(E,D))}function C(D){S||(S=!0,a.resolve(E,D))}function k(){T(C,A)}var N=g(k);N.status==="error"&&A(N.value)}function g(E,T){var S={};try{S.value=E(T),S.status="success"}catch(A){S.status="error",S.value=A}return S}f.resolve=y;function y(E){return E instanceof this?E:a.resolve(new this(o),E)}f.reject=v;function v(E){var T=new this(o);return a.reject(T,E)}f.all=b;function b(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=new Array(S),k=0,N=-1,D=new this(o);++N<S;)O(E[N],N);return D;function O($,F){T.resolve($).then(M,function(B){A||(A=!0,a.reject(D,B))});function M(B){C[F]=B,++k===S&&!A&&(A=!0,a.resolve(D,C))}}}f.race=w;function w(E){var T=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var S=E.length,A=!1;if(!S)return this.resolve([]);for(var C=-1,k=new this(o);++C<S;)N(E[C]);return k;function N(D){T.resolve(D).then(function(O){A||(A=!0,a.resolve(k,O))},function(O){A||(A=!0,a.reject(k,O))})}}},{1:1}],3:[function(n,r,i){(function(s){typeof s.Promise!="function"&&(s.Promise=n(2))}).call(this,typeof so<"u"?so:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(n,r,i){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(Y){return typeof Y}:function(Y){return Y&&typeof Symbol=="function"&&Y.constructor===Symbol&&Y!==Symbol.prototype?"symbol":typeof Y};function o(Y,se){if(!(Y instanceof se))throw new TypeError("Cannot call a class as a function")}function a(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=a();function l(){try{if(!u||!u.open)return!1;var Y=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),se=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!Y||se)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(Y,se){Y=Y||[],se=se||{};try{return new Blob(Y,se)}catch(le){if(le.name!=="TypeError")throw le;for(var Z=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,fe=new Z,ye=0;ye<Y.length;ye+=1)fe.append(Y[ye]);return fe.getBlob(se.type)}}typeof Promise>"u"&&n(3);var f=Promise;function d(Y,se){se&&Y.then(function(Z){se(null,Z)},function(Z){se(Z)})}function h(Y,se,Z){typeof se=="function"&&Y.then(se),typeof Z=="function"&&Y.catch(Z)}function p(Y){return typeof Y!="string"&&(console.warn(Y+" used as a key, but it is not a string."),Y=String(Y)),Y}function m(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var g="local-forage-detect-blob-support",y=void 0,v={},b=Object.prototype.toString,w="readonly",E="readwrite";function T(Y){for(var se=Y.length,Z=new ArrayBuffer(se),fe=new Uint8Array(Z),ye=0;ye<se;ye++)fe[ye]=Y.charCodeAt(ye);return Z}function S(Y){return new f(function(se){var Z=Y.transaction(g,E),fe=c([""]);Z.objectStore(g).put(fe,"key"),Z.onabort=function(ye){ye.preventDefault(),ye.stopPropagation(),se(!1)},Z.oncomplete=function(){var ye=navigator.userAgent.match(/Chrome\/(\d+)/),le=navigator.userAgent.match(/Edge\//);se(le||!ye||parseInt(ye[1],10)>=43)}}).catch(function(){return!1})}function A(Y){return typeof y=="boolean"?f.resolve(y):S(Y).then(function(se){return y=se,y})}function C(Y){var se=v[Y.name],Z={};Z.promise=new f(function(fe,ye){Z.resolve=fe,Z.reject=ye}),se.deferredOperations.push(Z),se.dbReady?se.dbReady=se.dbReady.then(function(){return Z.promise}):se.dbReady=Z.promise}function k(Y){var se=v[Y.name],Z=se.deferredOperations.pop();if(Z)return Z.resolve(),Z.promise}function N(Y,se){var Z=v[Y.name],fe=Z.deferredOperations.pop();if(fe)return fe.reject(se),fe.promise}function D(Y,se){return new f(function(Z,fe){if(v[Y.name]=v[Y.name]||W(),Y.db)if(se)C(Y),Y.db.close();else return Z(Y.db);var ye=[Y.name];se&&ye.push(Y.version);var le=u.open.apply(u,ye);se&&(le.onupgradeneeded=function(De){var He=le.result;try{He.createObjectStore(Y.storeName),De.oldVersion<=1&&He.createObjectStore(g)}catch(We){if(We.name==="ConstraintError")console.warn('The database "'+Y.name+'" has been upgraded from version '+De.oldVersion+" to version "+De.newVersion+', but the storage "'+Y.storeName+'" already exists.');else throw We}}),le.onerror=function(De){De.preventDefault(),fe(le.error)},le.onsuccess=function(){var De=le.result;De.onversionchange=function(He){He.target.close()},Z(De),k(Y)}})}function O(Y){return D(Y,!1)}function $(Y){return D(Y,!0)}function F(Y,se){if(!Y.db)return!0;var Z=!Y.db.objectStoreNames.contains(Y.storeName),fe=Y.version<Y.db.version,ye=Y.version>Y.db.version;if(fe&&(Y.version!==se&&console.warn('The database "'+Y.name+`" can't be downgraded from version `+Y.db.version+" to version "+Y.version+"."),Y.version=Y.db.version),ye||Z){if(Z){var le=Y.db.version+1;le>Y.version&&(Y.version=le)}return!0}return!1}function M(Y){return new f(function(se,Z){var fe=new FileReader;fe.onerror=Z,fe.onloadend=function(ye){var le=btoa(ye.target.result||"");se({__local_forage_encoded_blob:!0,data:le,type:Y.type})},fe.readAsBinaryString(Y)})}function B(Y){var se=T(atob(Y.data));return c([se],{type:Y.type})}function U(Y){return Y&&Y.__local_forage_encoded_blob}function H(Y){var se=this,Z=se._initReady().then(function(){var fe=v[se._dbInfo.name];if(fe&&fe.dbReady)return fe.dbReady});return h(Z,Y,Y),Z}function P(Y){C(Y);for(var se=v[Y.name],Z=se.forages,fe=0;fe<Z.length;fe++){var ye=Z[fe];ye._dbInfo.db&&(ye._dbInfo.db.close(),ye._dbInfo.db=null)}return Y.db=null,O(Y).then(function(le){return Y.db=le,F(Y)?$(Y):le}).then(function(le){Y.db=se.db=le;for(var De=0;De<Z.length;De++)Z[De]._dbInfo.db=le}).catch(function(le){throw N(Y,le),le})}function z(Y,se,Z,fe){fe===void 0&&(fe=1);try{var ye=Y.db.transaction(Y.storeName,se);Z(null,ye)}catch(le){if(fe>0&&(!Y.db||le.name==="InvalidStateError"||le.name==="NotFoundError"))return f.resolve().then(function(){if(!Y.db||le.name==="NotFoundError"&&!Y.db.objectStoreNames.contains(Y.storeName)&&Y.version<=Y.db.version)return Y.db&&(Y.version=Y.db.version+1),$(Y)}).then(function(){return P(Y).then(function(){z(Y,se,Z,fe-1)})}).catch(Z);Z(le)}}function W(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function j(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=Y[fe];var ye=v[Z.name];ye||(ye=W(),v[Z.name]=ye),ye.forages.push(se),se._initReady||(se._initReady=se.ready,se.ready=H);var le=[];function De(){return f.resolve()}for(var He=0;He<ye.forages.length;He++){var We=ye.forages[He];We!==se&&le.push(We._initReady().catch(De))}var Ye=ye.forages.slice(0);return f.all(le).then(function(){return Z.db=ye.db,O(Z)}).then(function(st){return Z.db=st,F(Z,se._defaultConfig.version)?$(Z):st}).then(function(st){Z.db=ye.db=st,se._dbInfo=Z;for(var Et=0;Et<Ye.length;Et++){var gn=Ye[Et];gn!==se&&(gn._dbInfo.db=Z.db,gn._dbInfo.version=Z.version)}})}function q(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(De,He){if(De)return le(De);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=We.get(Y);Ye.onsuccess=function(){var st=Ye.result;st===void 0&&(st=null),U(st)&&(st=B(st)),ye(st)},Ye.onerror=function(){le(Ye.error)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function G(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,w,function(De,He){if(De)return le(De);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=We.openCursor(),st=1;Ye.onsuccess=function(){var Et=Ye.result;if(Et){var gn=Et.value;U(gn)&&(gn=B(gn));var Pt=Y(gn,Et.key,st++);Pt!==void 0?ye(Pt):Et.continue()}else ye()},Ye.onerror=function(){le(Ye.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function ne(Y,se,Z){var fe=this;Y=p(Y);var ye=new f(function(le,De){var He;fe.ready().then(function(){return He=fe._dbInfo,b.call(se)==="[object Blob]"?A(He.db).then(function(We){return We?se:M(se)}):se}).then(function(We){z(fe._dbInfo,E,function(Ye,st){if(Ye)return De(Ye);try{var Et=st.objectStore(fe._dbInfo.storeName);We===null&&(We=void 0);var gn=Et.put(We,Y);st.oncomplete=function(){We===void 0&&(We=null),le(We)},st.onabort=st.onerror=function(){var Pt=gn.error?gn.error:gn.transaction.error;De(Pt)}}catch(Pt){De(Pt)}})}).catch(De)});return d(ye,Z),ye}function ce(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){z(Z._dbInfo,E,function(De,He){if(De)return le(De);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=We.delete(Y);He.oncomplete=function(){ye()},He.onerror=function(){le(Ye.error)},He.onabort=function(){var st=Ye.error?Ye.error:Ye.transaction.error;le(st)}}catch(st){le(st)}})}).catch(le)});return d(fe,se),fe}function de(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,E,function(le,De){if(le)return ye(le);try{var He=De.objectStore(se._dbInfo.storeName),We=He.clear();De.oncomplete=function(){fe()},De.onabort=De.onerror=function(){var Ye=We.error?We.error:We.transaction.error;ye(Ye)}}catch(Ye){ye(Ye)}})}).catch(ye)});return d(Z,Y),Z}function he(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,De){if(le)return ye(le);try{var He=De.objectStore(se._dbInfo.storeName),We=He.count();We.onsuccess=function(){fe(We.result)},We.onerror=function(){ye(We.error)}}catch(Ye){ye(Ye)}})}).catch(ye)});return d(Z,Y),Z}function ve(Y,se){var Z=this,fe=new f(function(ye,le){if(Y<0){ye(null);return}Z.ready().then(function(){z(Z._dbInfo,w,function(De,He){if(De)return le(De);try{var We=He.objectStore(Z._dbInfo.storeName),Ye=!1,st=We.openKeyCursor();st.onsuccess=function(){var Et=st.result;if(!Et){ye(null);return}Y===0||Ye?ye(Et.key):(Ye=!0,Et.advance(Y))},st.onerror=function(){le(st.error)}}catch(Et){le(Et)}})}).catch(le)});return d(fe,se),fe}function Ie(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){z(se._dbInfo,w,function(le,De){if(le)return ye(le);try{var He=De.objectStore(se._dbInfo.storeName),We=He.openKeyCursor(),Ye=[];We.onsuccess=function(){var st=We.result;if(!st){fe(Ye);return}Ye.push(st.key),st.continue()},We.onerror=function(){ye(We.error)}}catch(st){ye(st)}})}).catch(ye)});return d(Z,Y),Z}function be(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;if(!Y.name)ye=f.reject("Invalid arguments");else{var le=Y.name===Z.name&&fe._dbInfo.db,De=le?f.resolve(fe._dbInfo.db):O(Y).then(function(He){var We=v[Y.name],Ye=We.forages;We.db=He;for(var st=0;st<Ye.length;st++)Ye[st]._dbInfo.db=He;return He});Y.storeName?ye=De.then(function(He){if(He.objectStoreNames.contains(Y.storeName)){var We=He.version+1;C(Y);var Ye=v[Y.name],st=Ye.forages;He.close();for(var Et=0;Et<st.length;Et++){var gn=st[Et];gn._dbInfo.db=null,gn._dbInfo.version=We}var Pt=new f(function(Un,Nr){var Pr=u.open(Y.name,We);Pr.onerror=function(Go){var Sd=Pr.result;Sd.close(),Nr(Go)},Pr.onupgradeneeded=function(){var Go=Pr.result;Go.deleteObjectStore(Y.storeName)},Pr.onsuccess=function(){var Go=Pr.result;Go.close(),Un(Go)}});return Pt.then(function(Un){Ye.db=Un;for(var Nr=0;Nr<st.length;Nr++){var Pr=st[Nr];Pr._dbInfo.db=Un,k(Pr._dbInfo)}}).catch(function(Un){throw(N(Y,Un)||f.resolve()).catch(function(){}),Un})}}):ye=De.then(function(He){C(Y);var We=v[Y.name],Ye=We.forages;He.close();for(var st=0;st<Ye.length;st++){var Et=Ye[st];Et._dbInfo.db=null}var gn=new f(function(Pt,Un){var Nr=u.deleteDatabase(Y.name);Nr.onerror=function(){var Pr=Nr.result;Pr&&Pr.close(),Un(Nr.error)},Nr.onblocked=function(){console.warn('dropInstance blocked for database "'+Y.name+'" until all open connections are closed')},Nr.onsuccess=function(){var Pr=Nr.result;Pr&&Pr.close(),Pt(Pr)}});return gn.then(function(Pt){We.db=Pt;for(var Un=0;Un<Ye.length;Un++){var Nr=Ye[Un];k(Nr._dbInfo)}}).catch(function(Pt){throw(N(Y,Pt)||f.resolve()).catch(function(){}),Pt})})}return d(ye,se),ye}var Xe={_driver:"asyncStorage",_initStorage:j,_support:l(),iterate:G,getItem:q,setItem:ne,removeItem:ce,clear:de,length:he,key:ve,keys:Ie,dropInstance:be};function ze(){return typeof openDatabase=="function"}var yt="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",it="~~local_forage_type~",_e=/^~~local_forage_type~([^~]+)~/,ke="__lfsc__:",Ve=ke.length,ct="arbf",Dt="blob",Ge="si08",ge="ui08",ht="uic8",vt="si16",pe="si32",Ce="ur16",qe="ui32",ut="fl32",_t="fl64",Fn=Ve+ct.length,Ir=Object.prototype.toString;function jn(Y){var se=Y.length*.75,Z=Y.length,fe,ye=0,le,De,He,We;Y[Y.length-1]==="="&&(se--,Y[Y.length-2]==="="&&se--);var Ye=new ArrayBuffer(se),st=new Uint8Array(Ye);for(fe=0;fe<Z;fe+=4)le=yt.indexOf(Y[fe]),De=yt.indexOf(Y[fe+1]),He=yt.indexOf(Y[fe+2]),We=yt.indexOf(Y[fe+3]),st[ye++]=le<<2|De>>4,st[ye++]=(De&15)<<4|He>>2,st[ye++]=(He&3)<<6|We&63;return Ye}function dr(Y){var se=new Uint8Array(Y),Z="",fe;for(fe=0;fe<se.length;fe+=3)Z+=yt[se[fe]>>2],Z+=yt[(se[fe]&3)<<4|se[fe+1]>>4],Z+=yt[(se[fe+1]&15)<<2|se[fe+2]>>6],Z+=yt[se[fe+2]&63];return se.length%3===2?Z=Z.substring(0,Z.length-1)+"=":se.length%3===1&&(Z=Z.substring(0,Z.length-2)+"=="),Z}function yn(Y,se){var Z="";if(Y&&(Z=Ir.call(Y)),Y&&(Z==="[object ArrayBuffer]"||Y.buffer&&Ir.call(Y.buffer)==="[object ArrayBuffer]")){var fe,ye=ke;Y instanceof ArrayBuffer?(fe=Y,ye+=ct):(fe=Y.buffer,Z==="[object Int8Array]"?ye+=Ge:Z==="[object Uint8Array]"?ye+=ge:Z==="[object Uint8ClampedArray]"?ye+=ht:Z==="[object Int16Array]"?ye+=vt:Z==="[object Uint16Array]"?ye+=Ce:Z==="[object Int32Array]"?ye+=pe:Z==="[object Uint32Array]"?ye+=qe:Z==="[object Float32Array]"?ye+=ut:Z==="[object Float64Array]"?ye+=_t:se(new Error("Failed to get type for BinaryArray"))),se(ye+dr(fe))}else if(Z==="[object Blob]"){var le=new FileReader;le.onload=function(){var De=it+Y.type+"~"+dr(this.result);se(ke+Dt+De)},le.readAsArrayBuffer(Y)}else try{se(JSON.stringify(Y))}catch(De){console.error("Couldn't convert value into a JSON string: ",Y),se(null,De)}}function In(Y){if(Y.substring(0,Ve)!==ke)return JSON.parse(Y);var se=Y.substring(Fn),Z=Y.substring(Ve,Fn),fe;if(Z===Dt&&_e.test(se)){var ye=se.match(_e);fe=ye[1],se=se.substring(ye[0].length)}var le=jn(se);switch(Z){case ct:return le;case Dt:return c([le],{type:fe});case Ge:return new Int8Array(le);case ge:return new Uint8Array(le);case ht:return new Uint8ClampedArray(le);case vt:return new Int16Array(le);case Ce:return new Uint16Array(le);case pe:return new Int32Array(le);case qe:return new Uint32Array(le);case ut:return new Float32Array(le);case _t:return new Float64Array(le);default:throw new Error("Unkown type: "+Z)}}var ir={serialize:yn,deserialize:In,stringToBuffer:jn,bufferToString:dr};function sr(Y,se,Z,fe){Y.executeSql("CREATE TABLE IF NOT EXISTS "+se.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],Z,fe)}function qo(Y){var se=this,Z={db:null};if(Y)for(var fe in Y)Z[fe]=typeof Y[fe]!="string"?Y[fe].toString():Y[fe];var ye=new f(function(le,De){try{Z.db=openDatabase(Z.name,String(Z.version),Z.description,Z.size)}catch(He){return De(He)}Z.db.transaction(function(He){sr(He,Z,function(){se._dbInfo=Z,le()},function(We,Ye){De(Ye)})},De)});return Z.serializer=ir,ye}function ji(Y,se,Z,fe,ye,le){Y.executeSql(Z,fe,ye,function(De,He){He.code===He.SYNTAX_ERR?De.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[se.storeName],function(We,Ye){Ye.rows.length?le(We,He):sr(We,se,function(){We.executeSql(Z,fe,ye,le)},le)},le):le(De,He)},le)}function kn(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(He){ji(He,De,"SELECT * FROM "+De.storeName+" WHERE key = ? LIMIT 1",[Y],function(We,Ye){var st=Ye.rows.length?Ye.rows.item(0).value:null;st&&(st=De.serializer.deserialize(st)),ye(st)},function(We,Ye){le(Ye)})})}).catch(le)});return d(fe,se),fe}function Bi(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(He){ji(He,De,"SELECT * FROM "+De.storeName,[],function(We,Ye){for(var st=Ye.rows,Et=st.length,gn=0;gn<Et;gn++){var Pt=st.item(gn),Un=Pt.value;if(Un&&(Un=De.serializer.deserialize(Un)),Un=Y(Un,Pt.key,gn+1),Un!==void 0){ye(Un);return}}ye()},function(We,Ye){le(Ye)})})}).catch(le)});return d(fe,se),fe}function kr(Y,se,Z,fe){var ye=this;Y=p(Y);var le=new f(function(De,He){ye.ready().then(function(){se===void 0&&(se=null);var We=se,Ye=ye._dbInfo;Ye.serializer.serialize(se,function(st,Et){Et?He(Et):Ye.db.transaction(function(gn){ji(gn,Ye,"INSERT OR REPLACE INTO "+Ye.storeName+" (key, value) VALUES (?, ?)",[Y,st],function(){De(We)},function(Pt,Un){He(Un)})},function(gn){if(gn.code===gn.QUOTA_ERR){if(fe>0){De(kr.apply(ye,[Y,We,Z,fe-1]));return}He(gn)}})})}).catch(He)});return d(le,Z),le}function bs(Y,se,Z){return kr.apply(this,[Y,se,Z,1])}function gp(Y,se){var Z=this;Y=p(Y);var fe=new f(function(ye,le){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(He){ji(He,De,"DELETE FROM "+De.storeName+" WHERE key = ?",[Y],function(){ye()},function(We,Ye){le(Ye)})})}).catch(le)});return d(fe,se),fe}function pl(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(De){ji(De,le,"DELETE FROM "+le.storeName,[],function(){fe()},function(He,We){ye(We)})})}).catch(ye)});return d(Z,Y),Z}function Ed(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(De){ji(De,le,"SELECT COUNT(key) as c FROM "+le.storeName,[],function(He,We){var Ye=We.rows.item(0).c;fe(Ye)},function(He,We){ye(We)})})}).catch(ye)});return d(Z,Y),Z}function Sr(Y,se){var Z=this,fe=new f(function(ye,le){Z.ready().then(function(){var De=Z._dbInfo;De.db.transaction(function(He){ji(He,De,"SELECT key FROM "+De.storeName+" WHERE id = ? LIMIT 1",[Y+1],function(We,Ye){var st=Ye.rows.length?Ye.rows.item(0).key:null;ye(st)},function(We,Ye){le(Ye)})})}).catch(le)});return d(fe,se),fe}function Pi(Y){var se=this,Z=new f(function(fe,ye){se.ready().then(function(){var le=se._dbInfo;le.db.transaction(function(De){ji(De,le,"SELECT key FROM "+le.storeName,[],function(He,We){for(var Ye=[],st=0;st<We.rows.length;st++)Ye.push(We.rows.item(st).key);fe(Ye)},function(He,We){ye(We)})})}).catch(ye)});return d(Z,Y),Z}function ei(Y){return new f(function(se,Z){Y.transaction(function(fe){fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ye,le){for(var De=[],He=0;He<le.rows.length;He++)De.push(le.rows.item(He).name);se({db:Y,storeNames:De})},function(ye,le){Z(le)})},function(fe){Z(fe)})})}function hu(Y,se){se=m.apply(this,arguments);var Z=this.config();Y=typeof Y!="function"&&Y||{},Y.name||(Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName);var fe=this,ye;return Y.name?ye=new f(function(le){var De;Y.name===Z.name?De=fe._dbInfo.db:De=openDatabase(Y.name,"","",0),Y.storeName?le({db:De,storeNames:[Y.storeName]}):le(ei(De))}).then(function(le){return new f(function(De,He){le.db.transaction(function(We){function Ye(Pt){return new f(function(Un,Nr){We.executeSql("DROP TABLE IF EXISTS "+Pt,[],function(){Un()},function(Pr,Go){Nr(Go)})})}for(var st=[],Et=0,gn=le.storeNames.length;Et<gn;Et++)st.push(Ye(le.storeNames[Et]));f.all(st).then(function(){De()}).catch(function(Pt){He(Pt)})},function(We){He(We)})})}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Na={_driver:"webSQLStorage",_initStorage:qo,_support:ze(),iterate:Bi,getItem:kn,setItem:bs,removeItem:gp,clear:pl,length:Ed,key:Sr,keys:Pi,dropInstance:hu};function Pa(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function oe(Y,se){var Z=Y.name+"/";return Y.storeName!==se.storeName&&(Z+=Y.storeName+"/"),Z}function ee(){var Y="_localforage_support_test";try{return localStorage.setItem(Y,!0),localStorage.removeItem(Y),!1}catch{return!0}}function ae(){return!ee()||localStorage.length>0}function Ae(Y){var se=this,Z={};if(Y)for(var fe in Y)Z[fe]=Y[fe];return Z.keyPrefix=oe(Y,se._defaultConfig),ae()?(se._dbInfo=Z,Z.serializer=ir,f.resolve()):f.reject()}function Se(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo.keyPrefix,ye=localStorage.length-1;ye>=0;ye--){var le=localStorage.key(ye);le.indexOf(fe)===0&&localStorage.removeItem(le)}});return d(Z,Y),Z}function ot(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo,le=localStorage.getItem(ye.keyPrefix+Y);return le&&(le=ye.serializer.deserialize(le)),le});return d(fe,se),fe}function Tt(Y,se){var Z=this,fe=Z.ready().then(function(){for(var ye=Z._dbInfo,le=ye.keyPrefix,De=le.length,He=localStorage.length,We=1,Ye=0;Ye<He;Ye++){var st=localStorage.key(Ye);if(st.indexOf(le)===0){var Et=localStorage.getItem(st);if(Et&&(Et=ye.serializer.deserialize(Et)),Et=Y(Et,st.substring(De),We++),Et!==void 0)return Et}}});return d(fe,se),fe}function Ht(Y,se){var Z=this,fe=Z.ready().then(function(){var ye=Z._dbInfo,le;try{le=localStorage.key(Y)}catch{le=null}return le&&(le=le.substring(ye.keyPrefix.length)),le});return d(fe,se),fe}function $n(Y){var se=this,Z=se.ready().then(function(){for(var fe=se._dbInfo,ye=localStorage.length,le=[],De=0;De<ye;De++){var He=localStorage.key(De);He.indexOf(fe.keyPrefix)===0&&le.push(He.substring(fe.keyPrefix.length))}return le});return d(Z,Y),Z}function Bn(Y){var se=this,Z=se.keys().then(function(fe){return fe.length});return d(Z,Y),Z}function mn(Y,se){var Z=this;Y=p(Y);var fe=Z.ready().then(function(){var ye=Z._dbInfo;localStorage.removeItem(ye.keyPrefix+Y)});return d(fe,se),fe}function or(Y,se,Z){var fe=this;Y=p(Y);var ye=fe.ready().then(function(){se===void 0&&(se=null);var le=se;return new f(function(De,He){var We=fe._dbInfo;We.serializer.serialize(se,function(Ye,st){if(st)He(st);else try{localStorage.setItem(We.keyPrefix+Y,Ye),De(le)}catch(Et){(Et.name==="QuotaExceededError"||Et.name==="NS_ERROR_DOM_QUOTA_REACHED")&&He(Et),He(Et)}})})});return d(ye,Z),ye}function Rr(Y,se){if(se=m.apply(this,arguments),Y=typeof Y!="function"&&Y||{},!Y.name){var Z=this.config();Y.name=Y.name||Z.name,Y.storeName=Y.storeName||Z.storeName}var fe=this,ye;return Y.name?ye=new f(function(le){Y.storeName?le(oe(Y,fe._defaultConfig)):le(Y.name+"/")}).then(function(le){for(var De=localStorage.length-1;De>=0;De--){var He=localStorage.key(De);He.indexOf(le)===0&&localStorage.removeItem(He)}}):ye=f.reject("Invalid arguments"),d(ye,se),ye}var Vt={_driver:"localStorageWrapper",_initStorage:Ae,_support:Pa(),iterate:Tt,getItem:ot,setItem:or,removeItem:mn,clear:Se,length:Bn,key:Ht,keys:$n,dropInstance:Rr},ar=function(se,Z){return se===Z||typeof se=="number"&&typeof Z=="number"&&isNaN(se)&&isNaN(Z)},Wr=function(se,Z){for(var fe=se.length,ye=0;ye<fe;){if(ar(se[ye],Z))return!0;ye++}return!1},er=Array.isArray||function(Y){return Object.prototype.toString.call(Y)==="[object Array]"},Oi={},Ys={},ti={INDEXEDDB:Xe,WEBSQL:Na,LOCALSTORAGE:Vt},_o=[ti.INDEXEDDB._driver,ti.WEBSQL._driver,ti.LOCALSTORAGE._driver],Ui=["dropInstance"],zi=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ui),Wo={description:"",driver:_o.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Oa(Y,se){Y[se]=function(){var Z=arguments;return Y.ready().then(function(){return Y[se].apply(Y,Z)})}}function Ks(){for(var Y=1;Y<arguments.length;Y++){var se=arguments[Y];if(se)for(var Z in se)se.hasOwnProperty(Z)&&(er(se[Z])?arguments[0][Z]=se[Z].slice():arguments[0][Z]=se[Z])}return arguments[0]}var oc=function(){function Y(se){o(this,Y);for(var Z in ti)if(ti.hasOwnProperty(Z)){var fe=ti[Z],ye=fe._driver;this[Z]=ye,Oi[ye]||this.defineDriver(fe)}this._defaultConfig=Ks({},Wo),this._config=Ks({},this._defaultConfig,se),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return Y.prototype.config=function(Z){if((typeof Z>"u"?"undefined":s(Z))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var fe in Z){if(fe==="storeName"&&(Z[fe]=Z[fe].replace(/\W/g,"_")),fe==="version"&&typeof Z[fe]!="number")return new Error("Database version must be a number.");this._config[fe]=Z[fe]}return"driver"in Z&&Z.driver?this.setDriver(this._config.driver):!0}else return typeof Z=="string"?this._config[Z]:this._config},Y.prototype.defineDriver=function(Z,fe,ye){var le=new f(function(De,He){try{var We=Z._driver,Ye=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!Z._driver){He(Ye);return}for(var st=zi.concat("_initStorage"),Et=0,gn=st.length;Et<gn;Et++){var Pt=st[Et],Un=!Wr(Ui,Pt);if((Un||Z[Pt])&&typeof Z[Pt]!="function"){He(Ye);return}}var Nr=function(){for(var Sd=function(ac){return function(){var pu=new Error("Method "+ac+" is not implemented by the current driver"),vp=f.reject(pu);return d(vp,arguments[arguments.length-1]),vp}},yp=0,kT=Ui.length;yp<kT;yp++){var wv=Ui[yp];Z[wv]||(Z[wv]=Sd(wv))}};Nr();var Pr=function(Sd){Oi[We]&&console.info("Redefining LocalForage driver: "+We),Oi[We]=Z,Ys[We]=Sd,De()};"_support"in Z?Z._support&&typeof Z._support=="function"?Z._support().then(Pr,He):Pr(!!Z._support):Pr(!0)}catch(Go){He(Go)}});return h(le,fe,ye),le},Y.prototype.driver=function(){return this._driver||null},Y.prototype.getDriver=function(Z,fe,ye){var le=Oi[Z]?f.resolve(Oi[Z]):f.reject(new Error("Driver not found."));return h(le,fe,ye),le},Y.prototype.getSerializer=function(Z){var fe=f.resolve(ir);return h(fe,Z),fe},Y.prototype.ready=function(Z){var fe=this,ye=fe._driverSet.then(function(){return fe._ready===null&&(fe._ready=fe._initDriver()),fe._ready});return h(ye,Z,Z),ye},Y.prototype.setDriver=function(Z,fe,ye){var le=this;er(Z)||(Z=[Z]);var De=this._getSupportedDrivers(Z);function He(){le._config.driver=le.driver()}function We(Et){return le._extend(Et),He(),le._ready=le._initStorage(le._config),le._ready}function Ye(Et){return function(){var gn=0;function Pt(){for(;gn<Et.length;){var Un=Et[gn];return gn++,le._dbInfo=null,le._ready=null,le.getDriver(Un).then(We).catch(Pt)}He();var Nr=new Error("No available storage method found.");return le._driverSet=f.reject(Nr),le._driverSet}return Pt()}}var st=this._driverSet!==null?this._driverSet.catch(function(){return f.resolve()}):f.resolve();return this._driverSet=st.then(function(){var Et=De[0];return le._dbInfo=null,le._ready=null,le.getDriver(Et).then(function(gn){le._driver=gn._driver,He(),le._wrapLibraryMethodsWithReady(),le._initDriver=Ye(De)})}).catch(function(){He();var Et=new Error("No available storage method found.");return le._driverSet=f.reject(Et),le._driverSet}),h(this._driverSet,fe,ye),this._driverSet},Y.prototype.supports=function(Z){return!!Ys[Z]},Y.prototype._extend=function(Z){Ks(this,Z)},Y.prototype._getSupportedDrivers=function(Z){for(var fe=[],ye=0,le=Z.length;ye<le;ye++){var De=Z[ye];this.supports(De)&&fe.push(De)}return fe},Y.prototype._wrapLibraryMethodsWithReady=function(){for(var Z=0,fe=zi.length;Z<fe;Z++)Oa(this,zi[Z])},Y.prototype.createInstance=function(Z){return new Y(Z)},Y}(),xd=new oc;r.exports=xd},{3:3}]},{},[4])(4)})})(PMe);var EBt=PMe.exports;const Cw=ec(EBt);var So=[];for(var M9=0;M9<256;++M9)So.push((M9+256).toString(16).slice(1));function xBt(e,t=0){return(So[e[t+0]]+So[e[t+1]]+So[e[t+2]]+So[e[t+3]]+"-"+So[e[t+4]]+So[e[t+5]]+"-"+So[e[t+6]]+So[e[t+7]]+"-"+So[e[t+8]]+So[e[t+9]]+"-"+So[e[t+10]]+So[e[t+11]]+So[e[t+12]]+So[e[t+13]]+So[e[t+14]]+So[e[t+15]]).toLowerCase()}var HP,SBt=new Uint8Array(16);function TBt(){if(!HP&&(HP=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!HP))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return HP(SBt)}var ABt=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);const Gme={randomUUID:ABt};function j3(e,t,n){if(Gme.randomUUID&&!t&&!e)return Gme.randomUUID();e=e||{};var r=e.random||(e.rng||TBt)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,xBt(r)}class OMe{constructor(t){gu(this,"engine");gu(this,"connected",!1);gu(this,"currentParticipantId",null);this.engine=t}isConnected(){return this.connected}getEngine(){return this.engine}}async function B3(e){const t=new TextEncoder().encode(e),n=await crypto.subtle.digest("SHA-256",t);return Array.from(new Uint8Array(n)).map(s=>s.toString(16).padStart(2,"0")).join("")}function fA(e){return e.participantId!==void 0}class xc extends OMe{constructor(){super("firebase");gu(this,"RECAPTCHAV3TOKEN","6LephJQqAAAAAKJQy2NJMECvXRO2tdejmhVX4f6H");gu(this,"firestore");gu(this,"collectionPrefix","prod-");gu(this,"studyCollection");gu(this,"storage");gu(this,"studyId","");gu(this,"localForage",Cw.createInstance({name:"currentParticipantId"}));gu(this,"participantData",null);const n=BJ.parse(`
{
  apiKey: "AIzaSyBx7sXanwGJ6DenasAircH1xD4Wpuyc5hY",
  authDomain: "mqp2024-belief-correlation.firebaseapp.com",
  projectId: "mqp2024-belief-correlation",
  storageBucket: "mqp2024-belief-correlation.firebasestorage.app",
  messagingSenderId: "478783527018",
  appId: "1:478783527018:web:22813a9b1dba82e2e75213",
  measurementId: "G-PMJGZTZWVS"
}
`),r=aOe(n);this.firestore=A4t(r,{}),this.storage=RLt();try{Y5t(r,{provider:new Nee(this.RECAPTCHAV3TOKEN),isTokenAutoRefreshEnabled:!1})}catch{console.warn("Failed to initialize Firebase App Check")}}async connect(){try{await I4t(this.firestore),this.connected=!0}catch{console.warn("Failed to connect to Firebase")}}async initializeStudyDb(n,r){try{const i=NMe();if(!i.currentUser&&(await s8t(i),!i.currentUser))throw new Error("Login failed with firebase");const s=await this.getCurrentConfigHash(),o=await B3(JSON.stringify(r));if(this.studyCollection=ff(this.firestore,`${this.collectionPrefix}${n}`),this.studyId=n,await this._pushToFirebaseStorage(`configs/${o}`,"config",r),s&&s!==o){try{await this._deleteFromFirebaseStorage("","sequenceArray")}catch{}await this.clearCurrentParticipantId()}return await this.localForage.setItem("currentConfigHash",o),Promise.resolve()}catch(i){return console.warn("Failed to connect to Firebase."),Promise.reject(i)}}async initializeParticipantSession(n,r,i,s,o){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData"),u=await this.getModes(n);if(fA(a))return this.participantData=a,a;const l=await B3(JSON.stringify(i));return this.participantData={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1},u.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),this.participantData}async getCurrentConfigHash(){return await this.localForage.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){const i=n.map(a=>{const u=fc(this.storage,`${this.collectionPrefix}${r}/configs/${a}_config`);return this._getFromFirebaseStorageByRef(u,"config")}),s=await Promise.all(i),o={};return n.forEach((a,u)=>o[a]=s[u]),o}async getCurrentParticipantId(n){const r=await this.localForage.getItem("currentParticipantId");if(n)return this.currentParticipantId=n,await this.localForage.setItem("currentParticipantId",n),n;if(r)return this.currentParticipantId=r,r;if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");return this.currentParticipantId=j3(),await this.localForage.setItem("currentParticipantId",this.currentParticipantId),this.currentParticipantId}async clearCurrentParticipantId(){return await this.localForage.removeItem("currentParticipantId")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId||this.participantData===null)throw new Error("Participant not initialized");this.participantData={...this.participantData,answers:n},await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");await this._pushToFirebaseStorage("","sequenceArray",n)}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=await this._getFromFirebaseStorage("","sequenceArray");return Array.isArray(n)?n:null}async getSequence(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const n=await this.getSequenceArray();if(!n)throw new Error("Latin square not initialized");const r=await this.getModes(this.studyId),i=_s(this.studyCollection,"sequenceAssignment");await bu(i,{});const s=ff(i,"sequenceAssignment"),o=_s(s,this.currentParticipantId),a=gme(s,M4t("participantId","==","")),u=await cA(a);if(u.docs.length>0){const m=u.docs[0],g=m.data().timestamp;r.dataCollectionEnabled&&(await z4t(m.ref),await bu(o,{participantId:this.currentParticipantId,timestamp:g}))}else r.dataCollectionEnabled&&await bu(o,{participantId:this.currentParticipantId,timestamp:q4t()});const l=gme(s,L4t("timestamp","asc")),d=(await cA(l)).docs.map(m=>m.data()).findIndex(m=>m.participantId===this.currentParticipantId)%n.length,h=d===-1?Math.floor(Math.random()*n.length-1):d,p=n[h];if(!p)throw new Error("Latin square is empty");return p}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=fc(this.storage,`${this.collectionPrefix}${this.studyId}/participants`),r=await lA(n),i=[],s=r.items.map(async o=>{const a=await this._getFromFirebaseStorageByRef(o,"participantData");fA(a)&&i.push(a)});return await Promise.all(s),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(this.currentParticipantId===null)throw new Error("Participant not initialized");const n=await this._getFromFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData");return fA(n)?n:null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");const n=j3();await this.localForage.setItem("currentParticipantId",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyCollection))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");if(await this.getParticipantData(),!this.participantData)throw new Error("Participant not initialized");const n=await this.getModes(this.studyId);return this.participantData.completed=!0,n.dataCollectionEnabled&&await this._pushToFirebaseStorage(`participants/${this.currentParticipantId}`,"participantData",this.participantData),!0}async getUserManagementData(n){const r=ff(this.firestore,"user-management"),i=await cA(r),s=Object.fromEntries(i.docs.map(o=>[o.id,o.data()]));return n in s?s[n]:null}async validateUser(n){if(n!=null&&n.user){const r=await this.getUserManagementData("authentication");if(r!=null&&r.isEnabled){const i=await this.getUserManagementData("adminUsers");if(i&&i.adminUsersList){const s=Object.fromEntries(i.adminUsersList.map(a=>[a.email,a.uid]));if(n.user.email&&(s[n.user.email]===n.user.uid||s[n.user.email]===null)){if(n.user.email&&s[n.user.email]===null){const a=i.adminUsersList.find(u=>u.email===n.user.email);a&&(a.uid=n.user.uid),await bu(_s(this.firestore,"user-management","adminUsers"),{adminUsersList:i.adminUsersList})}return!0}return!1}}return!0}return!1}async changeAuth(n){await bu(_s(this.firestore,"user-management","authentication"),{isEnabled:n})}async addAdminUser(n){const r=await this.getUserManagementData("adminUsers");if(r!=null&&r.adminUsersList){const i=r.adminUsersList;i.find(o=>o.email===n.email)||(i.push({email:n.email,uid:n.uid}),await bu(_s(this.firestore,"user-management","adminUsers"),{adminUsersList:i}))}else await bu(_s(this.firestore,"user-management","adminUsers"),{adminUsersList:[{email:n.email,uid:n.uid}]})}async removeAdminUser(n){const r=await this.getUserManagementData("adminUsers");r!=null&&r.adminUsersList&&r.adminUsersList.length>1&&r.adminUsersList.find(i=>i.email===n)&&(r.adminUsersList=r==null?void 0:r.adminUsersList.filter(i=>i.email!==n),await bu(_s(this.firestore,"user-management","adminUsers"),{adminUsersList:r==null?void 0:r.adminUsersList}))}async getAllParticipantsDataByStudy(n){const r=fc(this.storage,`${this.collectionPrefix}${n}/participants`),i=await lA(r),s=[],o=i.items.map(async a=>{const u=await this._getFromFirebaseStorageByRef(a,"participantData");fA(u)&&s.push(u)});return await Promise.all(o),s}async rejectParticipant(n,r){const i=ff(this.firestore,`${this.collectionPrefix}${n}`),s=fc(this.storage,`${this.collectionPrefix}${n}/participants/${r}_participantData`),o=await this._getFromFirebaseStorageByRef(s,"participantData");try{if(!o||!fA(o)||o.rejected)return;o.rejected=!0,await this._pushToFirebaseStorageByRef(s,"participantData",o);const a=_s(i,"sequenceAssignment"),u=ff(a,"sequenceAssignment"),l=_s(u,r);await U4t(l,{participantId:""})}catch{console.warn("Failed to reject the participant.")}}async setMode(n,r,i){const s=_s(this.firestore,"metadata",`${this.collectionPrefix}${n}`);return await bu(s,{[r]:i},{merge:!0})}async getModes(n){const r=_s(this.firestore,"metadata",`${this.collectionPrefix}${n}`),i=await R9(r);if(i.exists())return i.data();const s={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return await bu(r,s),s}async createSnapshot(n,r){const i=`${this.collectionPrefix}${n}`;if(!await this._directoryExists(i))return console.warn(`Source directory ${i} does not exist.`),{status:"FAILED",error:{message:"There is currently no data in your study. A snapshot could not be created.",title:"Failed to Create Snapshot."}};const s=new Date,o=s.getUTCFullYear(),a=(s.getUTCMonth()+1).toString().padStart(2,"0"),u=s.getUTCDate().toString().padStart(2,"0"),l=s.getUTCHours().toString().padStart(2,"0"),c=s.getUTCMinutes().toString().padStart(2,"0"),f=s.getUTCSeconds().toString().padStart(2,"0"),d=`${o}-${a}-${u}T${l}:${c}:${f}`,h=`${this.collectionPrefix}${n}-snapshot-${d}`;await this._copyDirectory(`${i}/configs`,`${h}/configs`),await this._copyDirectory(`${i}/participants`,`${h}/participants`),await this._copyDirectory(i,h),await this._copyCollection(i,h),await this._addDirectoryNameToMetadata(h);const p=[];if(r){const m=await this.removeSnapshotOrLive(i,!1);m.status==="FAILED"?p.push({title:m.error.title,message:m.error.message,color:"red"}):p.push({title:"Success!",message:"Successfully deleted live data.",color:"green"})}return p.push({message:"Successfully created snapshot",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:p}}async removeSnapshotOrLive(n,r){try{const i=n.startsWith(this.collectionPrefix)?n:`${this.collectionPrefix}${n}`;return await this._deleteDirectory(`${i}/configs`),await this._deleteDirectory(`${i}/participants`),await this._deleteDirectory(i),await this._deleteCollection(i),r&&await this._removeNameFromMetadata(i),{status:"SUCCESS",notifications:[{message:"Successfully deleted snapshot or live data.",title:"Success!",color:"green"}]}}catch{return{status:"FAILED",error:{title:"Failed to delete live data or snapshot",message:"There was an unspecified error when trying to remove a snapshot or live data."}}}}async getSnapshots(n){try{const r=_s(this.firestore,"metadata","collections"),i=await R9(r);if(i.exists()){const s=i.data();return Object.keys(s).filter(u=>u.startsWith(`${this.collectionPrefix}${n}-snapshot`)).map(u=>{const l=s[u];let c;return typeof l=="boolean"?c=u:l&&typeof l=="object"&&l.enabled===!0?c=l.name:c=null,{originalName:u,alternateName:c}}).filter(u=>u.alternateName!==null).sort((u,l)=>u.originalName.localeCompare(l.originalName)).reverse()}return[]}catch(r){throw console.error("Error listing collections with prefix:",r),r}}async restoreSnapshot(n,r){const i=`${this.collectionPrefix}${n}`,s=[];try{const o=await this.createSnapshot(n,!0);return o.status==="FAILED"?(console.warn("No live data to capture."),s.push({title:o.error.title,message:o.error.message,color:"yellow"})):s.push({title:"Success!",message:"Successfully created snapshot of live data.",color:"green"}),await this._copyDirectory(`${r}/configs`,`${i}/configs`),await this._copyDirectory(`${r}/participants`,`${i}/participants`),await this._copyDirectory(r,i),await this._copyCollection(r,i),s.push({message:"Successfully restored snapshot to live data.",title:"Success!",color:"green"}),{status:"SUCCESS",notifications:s}}catch(o){return console.error("Error trying to delete a snapshot",o),{status:"FAILED",error:{title:"Failed to restore a snapshot fully.",message:"There was an unspecified error when trying to restore this snapshot."}}}}async _addDirectoryNameToMetadata(n){try{const r=_s(this.firestore,"metadata","collections");await bu(r,{[n]:{enabled:!0,name:n}},{merge:!0})}catch(r){throw console.error("Error adding collection to metadata:",r),r}}async renameSnapshot(n,r){try{const i=_s(this.firestore,"metadata","collections");return await bu(i,{[n]:{enabled:!0,name:r}},{merge:!0}),{status:"SUCCESS",notifications:[{message:"Successfully renamed snapshot.",title:"Success!",color:"green"}]}}catch(i){return console.error("Error renaming collection in metadata",i),{status:"FAILED",error:{title:"Failed to Rename Snapshot.",message:"There was an error when trying to rename the snapshot."}}}}async _removeNameFromMetadata(n){try{const r=_s(this.firestore,"metadata","collections"),i=await R9(r);if(i.exists()){const s=i.data();s[n]?(delete s[n],await bu(r,s)):console.warn(`${n} does not exist in metadata.`)}else console.warn("No metadata found.")}catch(r){throw console.error("Error removing collection from metadata:",r),r}}async _deleteDirectory(n){try{const r=fc(this.storage,n),s=(await lA(r)).items.map(o=>kpe(o));await Promise.all(s)}catch(r){console.error("Error deleting files in directory:",r)}}async _copyDirectory(n,r){try{const i=fc(this.storage,n),o=(await lA(i)).items.map(a=>{const u=a.fullPath,l=u.replace(n,r);return this._copyFile(u,l)});await Promise.all(o)}catch(i){console.error("Error copying file:",i)}}async _copyFile(n,r){try{const i=fc(this.storage,n),s=fc(this.storage,r),o=await T9(i),u=await(await fetch(o)).blob();await S9(s,u)}catch(i){console.error("Error copying file:",i)}}async _copyCollection(n,r){const i=ff(this.firestore,n),s=_s(i,"sequenceAssignment"),o=ff(s,"sequenceAssignment"),a=ff(this.firestore,r),u=_s(a,"sequenceAssignment");await bu(u,{});const l=ff(u,"sequenceAssignment"),c=await cA(o),f=bme(this.firestore);c.docs.forEach(d=>{const h=_s(l,d.id);f.set(h,d.data())}),await f.commit()}async _deleteCollection(n){const r=ff(this.firestore,n),i=_s(r,"sequenceAssignment"),s=ff(i,"sequenceAssignment"),o=await cA(s),a=bme(this.firestore);o.forEach(u=>{const l=_s(s,u.id);a.delete(l)}),a.delete(i),await a.commit()}async _directoryExists(n){try{const r=fc(this.storage,n);return(await lA(r)).items.length>0}catch(r){if(r.code==="storage/object-not-found")return!1;throw console.error("Error checking if directory exists:",r),r}}_verifyStudyDatabase(n){return n!==void 0}async _getFromFirebaseStorage(n,r){const i=fc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);let s={};try{const o=await T9(i),u=await(await fetch(o)).text();s=JSON.parse(u)}catch{console.warn(`${n} does not have ${r} for ${this.collectionPrefix}${this.studyId}.`)}return s}async _getFromFirebaseStorageByRef(n,r){let i={};try{const s=await T9(n),a=await(await fetch(s)).text();i=JSON.parse(a)}catch{console.warn(`${n} with type ${r} not found.`)}return i}async _pushToFirebaseStorage(n,r,i){if(Object.keys(i).length>0){const s=fc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`),o=new Blob([JSON.stringify(i)],{type:"application/json"});await S9(s,o)}}async _pushToFirebaseStorageByRef(n,r,i){if(Object.keys(i).length>0){const s=new Blob([JSON.stringify(i)],{type:"application/json"});await S9(n,s)}}async _deleteFromFirebaseStorage(n,r){const i=fc(this.storage,`${this.collectionPrefix}${this.studyId}/${n}_${r}`);await kpe(i)}}const DMe=I.createContext({user:{user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1},logout:async()=>{},triggerAuth:()=>{},verifyAdminStatus:()=>Promise.resolve(!1)}),h_=()=>I.useContext(DMe);function CBt({children:e}){const t=I.useMemo(()=>({user:null,determiningStatus:!0,isAdmin:!1,adminVerification:!1}),[]),n=I.useMemo(()=>({user:null,determiningStatus:!1,isAdmin:!1,adminVerification:!1}),[]),r=I.useMemo(()=>({user:{name:"fakeName",email:"fakeEmail@fake.com",uid:"fakeUid"},determiningStatus:!1,isAdmin:!0,adminVerification:!0}),[]),[i,s]=I.useState(t),[o,a]=I.useState(!1),{storageEngine:u}=ks(),l=I.useCallback(async()=>{const h=Epe();try{await tMt(h)}catch(p){p instanceof Error?console.error(`There was an issue signing-out the user: ${p.message}`):console.error("An unknown error occurred during sign-out.")}finally{s(n)}},[n]),c=()=>{a(!0)},f=I.useCallback(async h=>u?await u.validateUser(h):!1,[u]);I.useEffect(()=>{s(t);let h;if(u instanceof xc)try{h=Epe()}catch{console.warn("No firebase store.")}const p=async y=>{if(s(v=>({user:v.user,isAdmin:v.isAdmin,determiningStatus:!0,adminVerification:!1})),y){const v={user:y,determiningStatus:!1,isAdmin:!1,adminVerification:!0},b=await f(v);v.isAdmin=!!b,s(v)}else l()},g=(async()=>{if(u instanceof xc){const y=await(u==null?void 0:u.getUserManagementData("authentication"));if(y!=null&&y.isEnabled){const v=eMt(h,async b=>await p(b));return()=>v()}s(r)}else u&&s(r);return()=>{}})();return()=>{g.then(y=>y())}},[t,l,r,f,u,o]);const d=I.useMemo(()=>({user:i,triggerAuth:c,logout:l,verifyAdminStatus:f}),[i,l,f]);return _.jsx(DMe.Provider,{value:d,children:i.determiningStatus?_.jsx(zl,{visible:!0}):e})}function y2({studyIds:e}){const t=Qh(),{studyId:n}=Im(),r=Gy(),i=e.map(d=>({value:d,label:d})),{storageEngine:s}=ks(),{user:o,logout:a}=h_(),[u,l]=I.useState(!1),c=r.pathname.includes("analysis"),f=[{name:"Studies",leftIcon:_.jsx(VZe,{}),href:"",needAdmin:!1},{name:"Analysis",leftIcon:_.jsx(DZe,{}),href:"analysis/dashboard",needAdmin:!1},{name:"Settings",leftIcon:_.jsx(dxe,{}),href:"settings",needAdmin:!0}];return _.jsx(pi.Header,{p:"md",children:_.jsxs(Ga,{mt:-7,align:"center",children:[_.jsx(Ga.Col,{span:6,children:_.jsxs(Nt,{align:"center",onClick:()=>t(c?"/analysis/dashboard":"/"),style:{cursor:"pointer"},children:[_.jsx(Wy,{w:40,src:`${Gu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsx($l,{w:"md"}),_.jsx(Ii,{order:4,style:{whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:c?"ReVISit Analytics Platform":"ReVISit Studies"})]})}),_.jsx(Ga.Col,{span:6,children:_.jsxs(Nt,{justify:"flex-end",direction:"row",children:[c&&_.jsx(Pk,{allowDeselect:!1,placeholder:"Select Study",data:i,value:n,onChange:d=>t(`/analysis/stats/${d}`),mr:16}),_.jsx(BY,{opened:!1,onClick:()=>l(!0),style:{visibility:u?"hidden":void 0}}),_.jsx(Kh,{opened:u,onClose:()=>l(!1),position:"right",withCloseButton:!1,children:_.jsxs(Nt,{direction:"column",mt:20,children:[_.jsx(et,{ml:15,mb:20,fw:700,size:"lg",children:"Navigation"}),f.map(d=>d.needAdmin?o.isAdmin?_.jsx(cn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Gu}${d.href}`,children:d.name},`menu-item-${d.name}`):null:_.jsx(cn,{leftSection:d.leftIcon,variant:"default",style:{border:"none",display:"flex",justifyContent:"flex-start"},onClick:h=>{h.preventDefault(),t(`/${d.href}`),l(!1)},component:"a",href:`${Gu}${d.href}`,children:d.name},`menu-item-${d.name}`)),_.jsxs(me,{ml:10,children:[_.jsx(ex,{my:"sm"}),(s==null?void 0:s.getEngine())==="firebase"?o.isAdmin?_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{a(),t("/login"),l(!1)},children:"Logout"}):_.jsx(et,{size:"sm",ml:10,style:{cursor:"pointer"},onClick:()=>{t("/login"),l(!1)},children:"Login"}):null]})]})})]})})]})})}function Uee({allParticipants:e,studyId:t,gap:n,fileName:r}){const[i,{open:s,close:o}]=n6(!1),[a,u]=I.useState([]),l=async()=>typeof e=="function"?await e():e,c=async()=>{const d=await l(),h=r?`${r}.json`:`${t}_all.json`;kZ(JSON.stringify(d,null,2),h)},f=async()=>{const d=await l();u(d),s()};return _.jsxs(_.Fragment,{children:[_.jsxs(Cs,{style:{gap:n},children:[_.jsx(Ci,{label:"Download all participants data as JSON",children:_.jsx(cn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:c,px:4,children:_.jsx(jZe,{})})}),_.jsx(Ci,{label:"Download all participants data as a tidy CSV",children:_.jsx(cn,{variant:"light",disabled:e.length===0&&typeof e!="function",onClick:f,px:4,children:_.jsx(hxe,{})})})]}),i&&a.length>0&&_.jsx(mOt,{opened:i,close:o,filename:r?`${r}_tidy.csv`:`${t}_all_tidy.csv`,data:a,studyId:t})]})}function IBt({cellData:e}){return _.jsx(qt.Td,{children:_.jsx(ih,{miw:100,children:Object.entries(e.answer).map(([t,n])=>_.jsxs(me,{children:[_.jsxs(et,{fw:700,span:!0,children:[" ",`${t}: `]}),_.jsx(et,{span:!0,children:`${n}`})]},`cell-${t}`))})})}function Yme({cellData:e}){const t=(e.endTime-e.startTime)/1e3;return _.jsxs(qt.Td,{children:[t.toFixed(1)," ","s"]})}function kBt(e){const{metaData:t}=e;return _.jsx(qt.Td,{children:_.jsx(pK,{w:200,hideLabel:"hide",maxHeight:50,showLabel:"more",children:_.jsxs(ih,{gap:"xs",children:[_.jsxs(me,{children:["IP:"," ",t.ip]}),_.jsxs(me,{children:["Language:"," ",t.language]}),_.jsxs(me,{children:["Resolution:"," ",JSON.stringify(t.resolution)]}),_.jsxs(me,{children:["User Agent:"," ",t.userAgent]})]})})})}function RBt({completed:e,inProgress:t,rejected:n,studyConfig:r,refresh:i}){const{storageEngine:s}=ks(),{studyId:o}=Im(),{user:a}=h_(),u=async b=>{s&&o&&(a.isAdmin?(await s.rejectParticipant(o,b),await i()):console.warn("You are not authorized to perform this action."))},[l,c]=I.useState([]),[f,d]=I.useState(!1),h=()=>nz({title:"Confirm rejecting participants",children:_.jsxs(et,{size:"sm",children:["Are you sure you want to reject the selected participants? This action is"," ",_.jsx(et,{span:!0,fw:700,td:"underline",inherit:!0,children:"irreversible"}),", and will return the participants' sequences to the beginning of the sequence array."]}),labels:{confirm:"Reject Participants",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:async()=>{d(!0);const b=l.map(async w=>await u(w));await Promise.all(b),c([]),await i(),d(!1)}}),p=I.useMemo(()=>[...e,...t,...n],[e,t,n]);function m(b){b==="all"?l.length===p.length?c([]):c(p.map(w=>w.participantId)):l.includes(b)?c(l.filter(w=>w!==b)):c([...l,b])}const g=fTe(r.sequence),y=[_.jsx(qt.Th,{children:_.jsx(Nt,{justify:"center",children:_.jsx(Il,{mb:-4,checked:l.length===p.length,onChange:()=>m("all")})})},"action"),_.jsx(qt.Th,{children:"ID"},"ID"),_.jsx(qt.Th,{children:"Status"},"status"),_.jsx(qt.Th,{children:"Meta"},"meta"),...g.flatMap(b=>[_.jsx(qt.Th,{children:b.componentName},`header-${b.componentName}-${b.timesSeenInBlock}`),_.jsxs(qt.Th,{children:[_.jsx("span",{style:{whiteSpace:"nowrap"},children:b.componentName})," ","Duration"]},`header-${b.componentName}-${b.timesSeenInBlock}-duration`)]),_.jsx(qt.Th,{children:"Total Duration"},"total-duration")],v=p.map(b=>_.jsxs(qt.Tr,{children:[_.jsx(qt.Td,{children:_.jsx(Nt,{justify:"center",children:_.jsx(Il,{mb:-4,checked:l.includes(b.participantId),onChange:()=>m(b.participantId)})})}),_.jsx(qt.Td,{style:{whiteSpace:"nowrap"},children:b.participantId}),_.jsx(qt.Td,{children:_.jsxs(Nt,{direction:"row",align:"center",children:[b.rejected?_.jsx(Ci,{label:"Rejected",children:_.jsx(RK,{size:16,color:"red",style:{marginBottom:-3}})}):b.completed?_.jsx(Ci,{label:"Completed",children:_.jsx(lxe,{size:16,color:"teal",style:{marginBottom:-3}})}):_.jsx(Ci,{label:"In Progress",children:_.jsx(fxe,{size:16,color:"orange",style:{marginBottom:-3}})}),!b.completed&&_.jsxs(et,{size:"sm",mb:-1,ml:4,children:[(Object.entries(b.answers).filter(([w,E])=>E.endTime!==void 0).length/(Nm(b.sequence).length-1)*100).toFixed(2),"%"]})]})}),b.metadata?_.jsx(kBt,{metaData:b.metadata}):_.jsx(qt.Td,{children:"N/A"}),g.map(w=>{const E=lTe(b.sequence,w.orderPath),T=E&&Object.entries(b.answers).sort((S,A)=>{const C=parseInt(S[0].slice(S[0].lastIndexOf("_")+1),10),k=parseInt(A[0].slice(A[0].lastIndexOf("_")+1),10);return C-k}).filter(([S])=>{const A=S.slice(0,S.lastIndexOf("_")),C=parseInt(S.slice(S.lastIndexOf("_")+1),10);return A===w.componentName&&C<=E[0].lastIndex&&C>=E[0].firstIndex});return T!==null&&T.length>=w.timesSeenInBlock+1?_.jsxs(wr.Fragment,{children:[_.jsx(IBt,{cellData:T[w.timesSeenInBlock][1]}),_.jsx(Yme,{cellData:T[w.timesSeenInBlock][1]})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`):_.jsxs(wr.Fragment,{children:[_.jsx(qt.Td,{children:"N/A"}),_.jsx(qt.Td,{children:"N/A"})]},`cellgroup-${b.participantId}-${w.componentName}-${w.timesSeenInBlock}`)}),_.jsx(Yme,{cellData:{startTime:Math.min(...Object.values(b.answers).map(w=>w.startTime)),endTime:Math.max(...Object.values(b.answers).map(w=>w.endTime)),answer:{},windowEvents:[]}},`cell-${b.participantId}-total-duration`)]},b.participantId));return p.length>0?_.jsxs(_.Fragment,{children:[_.jsx(zl,{visible:f,overlayProps:{blur:2}}),_.jsxs(Nt,{justify:"space-between",mb:8,p:8,children:[_.jsx(Cs,{children:_.jsx(Pk,{w:350,variant:"filled",placeholder:"Search for a participant ID",data:p.map(b=>({value:b.participantId,label:b.participantId})),searchable:!0,value:null,leftSection:_.jsx(ZZe,{size:14}),onChange:b=>b&&m(b)})}),_.jsxs(Cs,{children:[_.jsx(Uee,{allParticipants:[...e,...t],studyId:o||""}),_.jsx(cn,{disabled:l.length===0||!a.isAdmin,onClick:h,color:"red",children:"Reject Participants"})]})]}),_.jsx(Nt,{direction:"column",style:{width:"100%",overflow:"auto"},children:_.jsxs(qt,{striped:!0,withTableBorder:!0,children:[_.jsx(qt.Thead,{children:_.jsx(qt.Tr,{children:y})}),_.jsx(qt.Tbody,{children:v})]})})]}):_.jsxs(_.Fragment,{children:[_.jsx($l,{h:"xl"}),_.jsx(Nt,{justify:"center",align:"center",children:_.jsx(et,{children:"No data available"})})]})}const NBt="_root_1spq0_1",PBt="_description_1spq0_9",OBt="_title_1spq0_10",DBt="_closeButton_1spq0_14",$Bt={root:NBt,description:PBt,title:OBt,closeButton:DBt},U3=e=>{const{title:t,message:n,color:r}=e;Jb.show({title:t,message:n,position:"top-center",classNames:$Bt,color:r||"blue",autoClose:r==="red"||r==="yellow"?!1:5e3})};function MBt({studyId:e,refresh:t}){const[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1),[c,f]=I.useState(""),[d,h]=I.useState([]),[p,m]=I.useState(""),[g,y]=I.useState(""),[v,b]=I.useState(!1),[w,E]=I.useState(!1),{storageEngine:T}=ks(),S=T,A=I.useCallback(async()=>{E(!0);const P=await S.getSnapshots(e);h(P),E(!1)},[S,e]);I.useEffect(()=>{A()},[A]);const C=async(P,...z)=>{b(!0);const W=await P(...z);W.status==="SUCCESS"?(A(),b(!1),await t(),W.notifications&&W.notifications.forEach(j=>{U3(j)})):(b(!1),U3({title:W.error.title,message:W.error.message,color:"red"}))},k=async()=>{await C(S.createSnapshot.bind(S),e,!1)},N=async()=>{m(""),r(!1),await C(S.createSnapshot.bind(S),e,!0)},D=async()=>{a(!1),await C(S.renameSnapshot.bind(S),c,g)},O=async P=>{await C(S.restoreSnapshot.bind(S),e,P)},$=async()=>{m(""),s(!1),await C(S.removeSnapshotOrLive.bind(S),c,!0)},F=async()=>{m(""),l(!1),await C(S.removeSnapshotOrLive.bind(S),e,!0)},M=()=>nz({title:"Create a Snapshot",children:_.jsx(et,{mb:30,children:"This will create a snapshot of the live database without impacting the live data."}),labels:{confirm:"Create",cancel:"Cancel"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>k()}),B=P=>nz({title:"Restore Snapshot",children:_.jsx(et,{mb:30,children:"Restoring this snapshot will perform 2 actions. First, we will create a snapshot of the current live database, then we will restore the selected snapshot into the live database."}),labels:{confirm:"Restore",cancel:"Cancel"},confirmProps:{color:"red"},cancelProps:{variant:"subtle",color:"dark"},onCancel:()=>{},onConfirm:()=>O(P)}),U=P=>{const z=/-snapshot-(.+)$/,W=P.match(z);return W&&W[1]?W[1].replace("T"," "):null},H=async P=>{const z=P.slice(P.indexOf("-")+1);return await S.getAllParticipantsDataByStudy(z)};return _.jsxs(_.Fragment,{children:[_.jsx(zl,{visible:v}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(Ii,{order:5,children:"Create a Snapshot"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will"," ",_.jsx(et,{span:!0,fw:700,fs:"italic",children:"not"})," ","remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Ci,{label:"Create a snapshot",children:_.jsx(cn,{onClick:M,children:"Snapshot"})})]}),_.jsx($l,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(Ii,{order:5,children:"Archive Data"}),_.jsxs(et,{children:["This will create a snapshot of the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. It will then remove this data from the live database. The current study data can be restored from a snapshot at any time."]})]}),_.jsx(Ci,{label:"Snapshot and Delete Data",children:_.jsx(cn,{color:"red",onClick:()=>r(!0),children:"Archive"})})]}),_.jsx($l,{h:"lg"}),_.jsxs(Nt,{justify:"space-between",align:"center",children:[_.jsxs(me,{style:{width:"70%"},children:[_.jsx(Ii,{order:5,children:"Delete Data"}),_.jsxs(et,{children:["This will delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","database. Since this does not create a snapshot the data will be permanently deleted and cannot be restored."]})]}),_.jsx(Ci,{label:"Delete Data",children:_.jsx(cn,{color:"red",onClick:()=>l(!0),children:"Delete"})})]}),_.jsx($l,{h:"xl"}),_.jsxs(Nt,{direction:"column",children:[_.jsx(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:"xs",pb:"sm",children:_.jsx(Ii,{order:5,children:"Snapshots"})}),_.jsxs(me,{style:{position:"relative"},children:[_.jsx(zl,{visible:w}),d.length>0?_.jsxs(qt,{children:[_.jsx(qt.Thead,{children:_.jsxs(qt.Tr,{children:[_.jsx(qt.Th,{children:"Snapshot Name"}),_.jsx(qt.Th,{children:"Date Created"}),_.jsx(qt.Th,{children:"Actions"})]})}),_.jsx(qt.Tbody,{children:d.map(P=>_.jsxs(qt.Tr,{children:[_.jsx(qt.Td,{children:P.alternateName}),_.jsx(qt.Td,{children:U(P.originalName)}),_.jsx(qt.Td,{children:_.jsxs(Nt,{children:[_.jsx(Ci,{label:"Rename",children:_.jsx(cn,{color:"green",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{a(!0),f(P.originalName)},children:_.jsx(YZe,{})})}),_.jsx(Ci,{label:"Restore Snapshot",children:_.jsx(cn,{color:"blue",variant:"light",px:4,style:{margin:"0px 5px"},onClick:()=>{B(P.originalName)},children:_.jsx(QZe,{})})}),_.jsx(Ci,{label:"Delete Snapshot",children:_.jsx(cn,{color:"red",px:4,variant:"light",style:{margin:"0px 10px 0px 5px"},onClick:()=>{s(!0),f(P.originalName)},children:_.jsx(pxe,{})})}),_.jsx(Uee,{allParticipants:()=>H(P.originalName),studyId:e,gap:"10px",fileName:P.alternateName})]})})]},P.originalName))})]}):_.jsx(et,{children:"No snapshots."})]})]}),_.jsxs(Ji,{opened:n,onClose:()=>{r(!1),m("")},title:_.jsx(et,{children:"Archive Data"}),children:[_.jsx(et,{mb:"sm",children:"This will create a snapshot of the live database and remove the data from the live database."}),_.jsx(a0,{label:"To archive this data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(cn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{r(!1),m("")},children:"Cancel"}),_.jsx(cn,{color:"red",onClick:N,disabled:p!==e,children:"Archive"})]})]}),_.jsxs(Ji,{opened:i,onClose:()=>{s(!1),m("")},title:_.jsx(et,{children:"Delete Snapshot"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently remove this snapshot. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),"."]}),_.jsx(a0,{label:"To delete this snapshot, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(cn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{s(!1),m("")},children:"Cancel"}),_.jsx(cn,{color:"red",onClick:$,disabled:p!==e,children:"Delete"})]})]}),_.jsxs(Ji,{opened:o,onClose:()=>{a(!1),y("")},title:_.jsx(et,{children:"Rename Snapshot"}),children:[_.jsx(a0,{label:"Enter the new name of the snapshot.",placeholder:c,onChange:P=>y(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(cn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{a(!1),y("")},children:"Cancel"}),_.jsx(cn,{color:"green",onClick:D,disabled:!g||g.length===0,children:"Rename"})]})]}),_.jsxs(Ji,{opened:u,onClose:()=>{l(!1),m("")},title:_.jsx(et,{children:"Delete Live Data"}),children:[_.jsxs(et,{mb:"sm",children:["This will permanently delete the live"," ",_.jsx(et,{span:!0,fw:700,children:e})," ","data. This action is"," ",_.jsx(et,{span:!0,fw:700,children:"irreversible"}),". Please consider using archive data to create a snapshot of the live data before deleting."]}),_.jsx(a0,{label:"To delete this live data, please enter the name of the study.",placeholder:e,onChange:P=>m(P.target.value)}),_.jsxs(Nt,{mt:"sm",justify:"right",children:[_.jsx(cn,{mr:5,variant:"subtle",color:"dark",onClick:()=>{l(!1),m("")},children:"Cancel"}),_.jsx(cn,{color:"red",onClick:F,disabled:p!==e,children:"Delete"})]})]})]})}function LBt({studyId:e}){const{storageEngine:t}=ks(),[n,r]=I.useState(!1),[i,s]=I.useState(!1),[o,a]=I.useState(!1),[u,l]=I.useState(!1);I.useEffect(()=>{(async()=>{if(t){const d=await t.getModes(e);s(d.dataCollectionEnabled),a(d.studyNavigatorEnabled),l(d.analyticsInterfacePubliclyAccessible),r(!0)}})()},[t,e]);const c=async(f,d)=>{t&&(await t.setMode(e,f,d),f==="dataCollectionEnabled"?s(d):f==="studyNavigatorEnabled"?a(d):f==="analyticsInterfacePubliclyAccessible"&&l(d))};return n&&_.jsxs(ih,{children:[_.jsx(fE,{label:"Data Collection Enabled",checked:i,onChange:f=>c("dataCollectionEnabled",f.currentTarget.checked)}),_.jsx(fE,{label:"Study Navigator Enabled",checked:o,onChange:f=>c("studyNavigatorEnabled",f.currentTarget.checked)}),_.jsx(fE,{label:"Analytics Interface Publicly Accessible",checked:u,onChange:f=>c("analyticsInterfacePubliclyAccessible",f.currentTarget.checked)})]})}function FBt({studyId:e,refresh:t}){const{storageEngine:n}=ks();return _.jsx(Fc,{children:_.jsxs(Tu,{multiple:!0,variant:"contained",children:[_.jsxs(Tu.Item,{value:"ReVISit Modes",children:[_.jsx(Tu.Control,{children:_.jsx(Ii,{order:5,children:"ReVISit Modes"})}),_.jsx(Tu.Panel,{children:_.jsx(LBt,{studyId:e})})]},"modes"),_.jsxs(Tu.Item,{value:"Data Management",children:[_.jsx(Tu.Control,{disabled:(n==null?void 0:n.getEngine())==="localStorage",children:_.jsx(Ii,{order:5,children:"Data Management"})}),_.jsx(Tu.Panel,{children:(n==null?void 0:n.getEngine())!=="localStorage"&&_.jsx(MBt,{studyId:e,refresh:t})})]},"dataManagement")]})})}const Q_=14;function $Me({completed:e,inProgress:t,rejected:n,filteredCompleted:r}){return _.jsxs(Nt,{ml:4,gap:4,children:[_.jsx(Ci,{label:"Completed",children:_.jsx(k0,{variant:"light",color:"green",leftSection:_.jsx(lxe,{width:Q_,height:Q_,style:{paddingTop:1}}),pb:1,children:r&&r!==e?`${r}/${e}`:e})}),_.jsx(Ci,{label:"In Progress",children:_.jsx(k0,{variant:"light",color:"orange",leftSection:_.jsx(fxe,{width:Q_,height:Q_,style:{paddingTop:1}}),pb:1,children:t})}),_.jsx(Ci,{label:"Rejected",children:_.jsx(k0,{variant:"light",color:"red",leftSection:_.jsx(RK,{width:Q_,height:Q_,style:{paddingTop:1}}),pb:1,children:n})})]})}const Kme={};function tq(e,t){e===void 0&&(e=Kme),t===void 0&&(t=Kme);const n=Object.keys(e),r=Object.keys(t);return e===t||n.length===r.length&&n.every(i=>e[i]===t[i])}/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2022 Joachim Wester
 * MIT licensed
 */var jBt=function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)i.hasOwnProperty(s)&&(r[s]=i[s])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),BBt=Object.prototype.hasOwnProperty;function nq(e,t){return BBt.call(e,t)}function rq(e){if(Array.isArray(e)){for(var t=new Array(e.length),n=0;n<t.length;n++)t[n]=""+n;return t}if(Object.keys)return Object.keys(e);var r=[];for(var i in e)nq(e,i)&&r.push(i);return r}function Pl(e){switch(typeof e){case"object":return JSON.parse(JSON.stringify(e));case"undefined":return null;default:return e}}function iq(e){for(var t=0,n=e.length,r;t<n;){if(r=e.charCodeAt(t),r>=48&&r<=57){t++;continue}return!1}return!0}function Zv(e){return e.indexOf("/")===-1&&e.indexOf("~")===-1?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function MMe(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function sq(e){if(e===void 0)return!0;if(e){if(Array.isArray(e)){for(var t=0,n=e.length;t<n;t++)if(sq(e[t]))return!0}else if(typeof e=="object"){for(var r=rq(e),i=r.length,s=0;s<i;s++)if(sq(e[r[s]]))return!0}}return!1}function Xme(e,t){var n=[e];for(var r in t){var i=typeof t[r]=="object"?JSON.stringify(t[r],null,2):t[r];typeof i<"u"&&n.push(r+": "+i)}return n.join(`
`)}var LMe=function(e){jBt(t,e);function t(n,r,i,s,o){var a=this.constructor,u=e.call(this,Xme(n,{name:r,index:i,operation:s,tree:o}))||this;return u.name=r,u.index=i,u.operation=s,u.tree=o,Object.setPrototypeOf(u,a.prototype),u.message=Xme(n,{name:r,index:i,operation:s,tree:o}),u}return t}(Error),qi=LMe,UBt=Pl,Xw={add:function(e,t,n){return e[t]=this.value,{newDocument:n}},remove:function(e,t,n){var r=e[t];return delete e[t],{newDocument:n,removed:r}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:function(e,t,n){var r=z3(n,this.path);r&&(r=Pl(r));var i=q1(n,{op:"remove",path:this.from}).removed;return q1(n,{op:"add",path:this.path,value:i}),{newDocument:n,removed:r}},copy:function(e,t,n){var r=z3(n,this.from);return q1(n,{op:"add",path:this.path,value:Pl(r)}),{newDocument:n}},test:function(e,t,n){return{newDocument:n,test:KI(e[t],this.value)}},_get:function(e,t,n){return this.value=e[t],{newDocument:n}}},zBt={add:function(e,t,n){return iq(t)?e.splice(t,0,this.value):e[t]=this.value,{newDocument:n,index:t}},remove:function(e,t,n){var r=e.splice(t,1);return{newDocument:n,removed:r[0]}},replace:function(e,t,n){var r=e[t];return e[t]=this.value,{newDocument:n,removed:r}},move:Xw.move,copy:Xw.copy,test:Xw.test,_get:Xw._get};function z3(e,t){if(t=="")return e;var n={op:"_get",path:t};return q1(e,n),n.value}function q1(e,t,n,r,i,s){if(n===void 0&&(n=!1),r===void 0&&(r=!0),i===void 0&&(i=!0),s===void 0&&(s=0),n&&(typeof n=="function"?n(t,0,e,t.path):V3(t,0)),t.path===""){var o={newDocument:e};if(t.op==="add")return o.newDocument=t.value,o;if(t.op==="replace")return o.newDocument=t.value,o.removed=e,o;if(t.op==="move"||t.op==="copy")return o.newDocument=z3(e,t.from),t.op==="move"&&(o.removed=e),o;if(t.op==="test"){if(o.test=KI(e,t.value),o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o.newDocument=e,o}else{if(t.op==="remove")return o.removed=e,o.newDocument=null,o;if(t.op==="_get")return t.value=e,o;if(n)throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",s,t,e);return o}}else{r||(e=Pl(e));var a=t.path||"",u=a.split("/"),l=e,c=1,f=u.length,d=void 0,h=void 0,p=void 0;for(typeof n=="function"?p=n:p=V3;;){if(h=u[c],h&&h.indexOf("~")!=-1&&(h=MMe(h)),i&&(h=="__proto__"||h=="prototype"&&c>0&&u[c-1]=="constructor"))throw new TypeError("JSON-Patch: modifying `__proto__` or `constructor/prototype` prop is banned for security reasons, if this was on purpose, please set `banPrototypeModifications` flag false and pass it to this function. More info in fast-json-patch README");if(n&&d===void 0&&(l[h]===void 0?d=u.slice(0,c).join("/"):c==f-1&&(d=t.path),d!==void 0&&p(t,0,e,d)),c++,Array.isArray(l)){if(h==="-")h=l.length;else{if(n&&!iq(h))throw new qi("Expected an unsigned base-10 integer value, making the new referenced value the array element with the zero-based index","OPERATION_PATH_ILLEGAL_ARRAY_INDEX",s,t,e);iq(h)&&(h=~~h)}if(c>=f){if(n&&t.op==="add"&&h>l.length)throw new qi("The specified index MUST NOT be greater than the number of elements in the array","OPERATION_VALUE_OUT_OF_BOUNDS",s,t,e);var o=zBt[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}}else if(c>=f){var o=Xw[t.op].call(t,l,h,e);if(o.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",s,t,e);return o}if(l=l[h],n&&c<f&&(!l||typeof l!="object"))throw new qi("Cannot perform operation at the desired path","OPERATION_PATH_UNRESOLVABLE",s,t,e)}}}function M4(e,t,n,r,i){if(r===void 0&&(r=!0),i===void 0&&(i=!0),n&&!Array.isArray(t))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");r||(e=Pl(e));for(var s=new Array(t.length),o=0,a=t.length;o<a;o++)s[o]=q1(e,t[o],n,!0,i,o),e=s[o].newDocument;return s.newDocument=e,s}function VBt(e,t,n){var r=q1(e,t);if(r.test===!1)throw new qi("Test operation failed","TEST_OPERATION_FAILED",n,t,e);return r.newDocument}function V3(e,t,n,r){if(typeof e!="object"||e===null||Array.isArray(e))throw new qi("Operation is not an object","OPERATION_NOT_AN_OBJECT",t,e,n);if(Xw[e.op]){if(typeof e.path!="string")throw new qi("Operation `path` property is not a string","OPERATION_PATH_INVALID",t,e,n);if(e.path.indexOf("/")!==0&&e.path.length>0)throw new qi('Operation `path` property must start with "/"',"OPERATION_PATH_INVALID",t,e,n);if((e.op==="move"||e.op==="copy")&&typeof e.from!="string")throw new qi("Operation `from` property is not present (applicable in `move` and `copy` operations)","OPERATION_FROM_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&e.value===void 0)throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_REQUIRED",t,e,n);if((e.op==="add"||e.op==="replace"||e.op==="test")&&sq(e.value))throw new qi("Operation `value` property is not present (applicable in `add`, `replace` and `test` operations)","OPERATION_VALUE_CANNOT_CONTAIN_UNDEFINED",t,e,n);if(n){if(e.op=="add"){var i=e.path.split("/").length,s=r.split("/").length;if(i!==s+1&&i!==s)throw new qi("Cannot perform an `add` operation at the desired path","OPERATION_PATH_CANNOT_ADD",t,e,n)}else if(e.op==="replace"||e.op==="remove"||e.op==="_get"){if(e.path!==r)throw new qi("Cannot perform the operation at a path that does not exist","OPERATION_PATH_UNRESOLVABLE",t,e,n)}else if(e.op==="move"||e.op==="copy"){var o={op:"_get",path:e.from,value:void 0},a=FMe([o],n);if(a&&a.name==="OPERATION_PATH_UNRESOLVABLE")throw new qi("Cannot perform the operation from a path that does not exist","OPERATION_FROM_UNRESOLVABLE",t,e,n)}}}else throw new qi("Operation `op` property is not one of operations defined in RFC-6902","OPERATION_OP_INVALID",t,e,n)}function FMe(e,t,n){try{if(!Array.isArray(e))throw new qi("Patch sequence must be an array","SEQUENCE_NOT_AN_ARRAY");if(t)M4(Pl(t),Pl(e),n||!0);else{n=n||V3;for(var r=0;r<e.length;r++)n(e[r],r,t,void 0)}}catch(i){if(i instanceof qi)return i;throw i}}function KI(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){var n=Array.isArray(e),r=Array.isArray(t),i,s,o;if(n&&r){if(s=e.length,s!=t.length)return!1;for(i=s;i--!==0;)if(!KI(e[i],t[i]))return!1;return!0}if(n!=r)return!1;var a=Object.keys(e);if(s=a.length,s!==Object.keys(t).length)return!1;for(i=s;i--!==0;)if(!t.hasOwnProperty(a[i]))return!1;for(i=s;i--!==0;)if(o=a[i],!KI(e[o],t[o]))return!1;return!0}return e!==e&&t!==t}const HBt=Object.freeze(Object.defineProperty({__proto__:null,JsonPatchError:qi,_areEquals:KI,applyOperation:q1,applyPatch:M4,applyReducer:VBt,deepClone:UBt,getValueByPointer:z3,validate:FMe,validator:V3},Symbol.toStringTag,{value:"Module"}));/*!
 * https://github.com/Starcounter-Jack/JSON-Patch
 * (c) 2017-2021 Joachim Wester
 * MIT license
 */var zee=new WeakMap,qBt=function(){function e(t){this.observers=new Map,this.obj=t}return e}(),WBt=function(){function e(t,n){this.callback=t,this.observer=n}return e}();function GBt(e){return zee.get(e)}function YBt(e,t){return e.observers.get(t)}function KBt(e,t){e.observers.delete(t.callback)}function XBt(e,t){t.unobserve()}function QBt(e,t){var n=[],r,i=GBt(e);if(!i)i=new qBt(e),zee.set(e,i);else{var s=YBt(i,t);r=s&&s.observer}if(r)return r;if(r={},i.value=Pl(e),t){r.callback=t,r.next=null;var o=function(){oq(r)},a=function(){clearTimeout(r.next),r.next=setTimeout(o)};typeof window<"u"&&(window.addEventListener("mouseup",a),window.addEventListener("keyup",a),window.addEventListener("mousedown",a),window.addEventListener("keydown",a),window.addEventListener("change",a))}return r.patches=n,r.object=e,r.unobserve=function(){oq(r),clearTimeout(r.next),KBt(i,r),typeof window<"u"&&(window.removeEventListener("mouseup",a),window.removeEventListener("keyup",a),window.removeEventListener("mousedown",a),window.removeEventListener("keydown",a),window.removeEventListener("change",a))},i.observers.set(t,new WBt(t,r)),r}function oq(e,t){t===void 0&&(t=!1);var n=zee.get(e.object);Vee(n.value,e.object,e.patches,"",t),e.patches.length&&M4(n.value,e.patches);var r=e.patches;return r.length>0&&(e.patches=[],e.callback&&e.callback(r)),r}function Vee(e,t,n,r,i){if(t!==e){typeof t.toJSON=="function"&&(t=t.toJSON());for(var s=rq(t),o=rq(e),a=!1,u=o.length-1;u>=0;u--){var l=o[u],c=e[l];if(nq(t,l)&&!(t[l]===void 0&&c!==void 0&&Array.isArray(t)===!1)){var f=t[l];typeof c=="object"&&c!=null&&typeof f=="object"&&f!=null&&Array.isArray(c)===Array.isArray(f)?Vee(c,f,n,r+"/"+Zv(l),i):c!==f&&(i&&n.push({op:"test",path:r+"/"+Zv(l),value:Pl(c)}),n.push({op:"replace",path:r+"/"+Zv(l),value:Pl(f)}))}else Array.isArray(e)===Array.isArray(t)?(i&&n.push({op:"test",path:r+"/"+Zv(l),value:Pl(c)}),n.push({op:"remove",path:r+"/"+Zv(l)}),a=!0):(i&&n.push({op:"test",path:r,value:e}),n.push({op:"replace",path:r,value:t}))}if(!(!a&&s.length==o.length))for(var u=0;u<s.length;u++){var l=s[u];!nq(e,l)&&t[l]!==void 0&&n.push({op:"add",path:r+"/"+Zv(l),value:Pl(t[l])})}}}function JBt(e,t,n){n===void 0&&(n=!1);var r=[];return Vee(e,t,r,"",n),r}const ZBt=Object.freeze(Object.defineProperty({__proto__:null,compare:JBt,generate:oq,observe:QBt,unobserve:XBt},Symbol.toStringTag,{value:"Module"}));Object.assign({},HBt,ZBt,{JsonPatchError:LMe,deepClone:Pl,escapePathComponent:Zv,unescapePathComponent:MMe});var e9t=/("(?:[^\\"]|\\.)*")|[:,]/g,t9t=function(t,n){var r,i,s;return n=n||{},r=JSON.stringify([1],void 0,n.indent===void 0?2:n.indent).slice(2,-3),i=r===""?1/0:n.maxLength===void 0?80:n.maxLength,s=n.replacer,function o(a,u,l){var c,f,d,h,p,m,g,y,v,b,w,E;if(a&&typeof a.toJSON=="function"&&(a=a.toJSON()),w=JSON.stringify(a,s),w===void 0)return w;if(g=i-u.length-l,w.length<=g&&(v=w.replace(e9t,function(T,S){return S||T+" "}),v.length<=g))return v;if(s!=null&&(a=JSON.parse(w),s=void 0),typeof a=="object"&&a!==null){if(y=u+r,d=[],f=0,Array.isArray(a))for(b="[",c="]",g=a.length;f<g;f++)d.push(o(a[f],y,f===g-1?0:1)||"null");else for(b="{",c="}",m=Object.keys(a),g=m.length;f<g;f++)h=m[f],p=JSON.stringify(h)+": ",E=o(a[h],y,p.length+(f===g-1?0:1)),E!==void 0&&d.push(p+E);if(d.length>0)return[b,r+d.join(`,
`+y),c].join(`
`+u)}return w}(t,"",0)};const L9=ec(t9t);function dl(e,t,n){return e.fields=t||[],e.fname=n,e}function Zi(e){return e==null?null:e.fname}function va(e){return e==null?null:e.fields}function jMe(e){return e.length===1?n9t(e[0]):r9t(e)}const n9t=e=>function(t){return t[e]},r9t=e=>{const t=e.length;return function(n){for(let r=0;r<t;++r)n=n[e[r]];return n}};function Le(e){throw Error(e)}function op(e){const t=[],n=e.length;let r=null,i=0,s="",o,a,u;e=e+"";function l(){t.push(s+e.substring(o,a)),s="",o=a+1}for(o=a=0;a<n;++a)if(u=e[a],u==="\\")s+=e.substring(o,a++),o=a;else if(u===r)l(),r=null,i=-1;else{if(r)continue;o===i&&u==='"'||o===i&&u==="'"?(o=a+1,r=u):u==="."&&!i?a>o?l():o=a+1:u==="["?(a>o&&l(),i=o=a+1):u==="]"&&(i||Le("Access path missing open bracket: "+e),i>0&&l(),i=0,o=a+1)}return i&&Le("Access path missing closing bracket: "+e),r&&Le("Access path missing closing quote: "+e),a>o&&(a++,l()),t}function zc(e,t,n){const r=op(e);return e=r.length===1?r[0]:e,dl((n&&n.get||jMe)(r),[e],t||e)}const NR=zc("id"),Aa=dl(e=>e,[],"identity"),i0=dl(()=>0,[],"zero"),uT=dl(()=>1,[],"one"),Vc=dl(()=>!0,[],"true"),Mg=dl(()=>!1,[],"false");function i9t(e,t,n){const r=[t].concat([].slice.call(n));console[e].apply(console,r)}const BMe=0,Hee=1,qee=2,UMe=3,zMe=4;function Wee(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:i9t,r=e||BMe;return{level(i){return arguments.length?(r=+i,this):r},error(){return r>=Hee&&n(t||"error","ERROR",arguments),this},warn(){return r>=qee&&n(t||"warn","WARN",arguments),this},info(){return r>=UMe&&n(t||"log","INFO",arguments),this},debug(){return r>=zMe&&n(t||"log","DEBUG",arguments),this}}}var je=Array.isArray;function gt(e){return e===Object(e)}const Qme=e=>e!=="__proto__";function lT(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce((r,i)=>{for(const s in i)if(s==="signals")r.signals=s9t(r.signals,i.signals);else{const o=s==="legend"?{layout:1}:s==="style"?!0:null;cT(r,s,i[s],o)}return r},{})}function cT(e,t,n,r){if(!Qme(t))return;let i,s;if(gt(n)&&!je(n)){s=gt(e[t])?e[t]:e[t]={};for(i in n)r&&(r===!0||r[i])?cT(s,i,n[i]):Qme(i)&&(s[i]=n[i])}else e[t]=n}function s9t(e,t){if(e==null)return t;const n={},r=[];function i(s){n[s.name]||(n[s.name]=1,r.push(s))}return t.forEach(i),e.forEach(i),r}function Zn(e){return e[e.length-1]}function ma(e){return e==null||e===""?null:+e}const VMe=e=>t=>e*Math.exp(t),HMe=e=>t=>Math.log(e*t),qMe=e=>t=>Math.sign(t)*Math.log1p(Math.abs(t/e)),WMe=e=>t=>Math.sign(t)*Math.expm1(Math.abs(t))*e,H3=e=>t=>t<0?-Math.pow(-t,e):Math.pow(t,e);function L4(e,t,n,r){const i=n(e[0]),s=n(Zn(e)),o=(s-i)*t;return[r(i-o),r(s-o)]}function GMe(e,t){return L4(e,t,ma,Aa)}function YMe(e,t){var n=Math.sign(e[0]);return L4(e,t,HMe(n),VMe(n))}function KMe(e,t,n){return L4(e,t,H3(n),H3(1/n))}function XMe(e,t,n){return L4(e,t,qMe(n),WMe(n))}function F4(e,t,n,r,i){const s=r(e[0]),o=r(Zn(e)),a=t!=null?r(t):(s+o)/2;return[i(a+(s-a)*n),i(a+(o-a)*n)]}function Gee(e,t,n){return F4(e,t,n,ma,Aa)}function Yee(e,t,n){const r=Math.sign(e[0]);return F4(e,t,n,HMe(r),VMe(r))}function q3(e,t,n,r){return F4(e,t,n,H3(r),H3(1/r))}function Kee(e,t,n,r){return F4(e,t,n,qMe(r),WMe(r))}function QMe(e){return 1+~~(new Date(e).getMonth()/3)}function JMe(e){return 1+~~(new Date(e).getUTCMonth()/3)}function pt(e){return e!=null?je(e)?e:[e]:[]}function ZMe(e,t,n){let r=e[0],i=e[1],s;return i<r&&(s=i,i=r,r=s),s=i-r,s>=n-t?[t,n]:[r=Math.min(Math.max(r,t),n-s),r+s]}function wn(e){return typeof e=="function"}const o9t="descending";function Xee(e,t,n){n=n||{},t=pt(t)||[];const r=[],i=[],s={},o=n.comparator||a9t;return pt(e).forEach((a,u)=>{a!=null&&(r.push(t[u]===o9t?-1:1),i.push(a=wn(a)?a:zc(a,null,n)),(va(a)||[]).forEach(l=>s[l]=1))}),i.length===0?null:dl(o(i,r),Object.keys(s))}const j4=(e,t)=>(e<t||e==null)&&t!=null?-1:(e>t||t==null)&&e!=null?1:(t=t instanceof Date?+t:t,(e=e instanceof Date?+e:e)!==e&&t===t?-1:t!==t&&e===e?1:0),a9t=(e,t)=>e.length===1?u9t(e[0],t[0]):l9t(e,t,e.length),u9t=(e,t)=>function(n,r){return j4(e(n),e(r))*t},l9t=(e,t,n)=>(t.push(0),function(r,i){let s,o=0,a=-1;for(;o===0&&++a<n;)s=e[a],o=j4(s(r),s(i));return o*t[a]});function Ca(e){return wn(e)?e:()=>e}function Qee(e,t){let n;return r=>{n&&clearTimeout(n),n=setTimeout(()=>(t(r),n=null),e)}}function _n(e){for(let t,n,r=1,i=arguments.length;r<i;++r){t=arguments[r];for(n in t)e[n]=t[n]}return e}function Uh(e,t){let n=0,r,i,s,o;if(e&&(r=e.length))if(t==null){for(i=e[n];n<r&&(i==null||i!==i);i=e[++n]);for(s=o=i;n<r;++n)i=e[n],i!=null&&(i<s&&(s=i),i>o&&(o=i))}else{for(i=t(e[n]);n<r&&(i==null||i!==i);i=t(e[++n]));for(s=o=i;n<r;++n)i=t(e[n]),i!=null&&(i<s&&(s=i),i>o&&(o=i))}return[s,o]}function e3e(e,t){const n=e.length;let r=-1,i,s,o,a,u;if(t==null){for(;++r<n;)if(s=e[r],s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=e[r],s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}else{for(;++r<n;)if(s=t(e[r],r,e),s!=null&&s>=s){i=o=s;break}if(r===n)return[-1,-1];for(a=u=r;++r<n;)s=t(e[r],r,e),s!=null&&(i>s&&(i=s,a=r),o<s&&(o=s,u=r))}return[a,u]}const c9t=Object.prototype.hasOwnProperty;function jt(e,t){return c9t.call(e,t)}const qP={};function fT(e){let t={},n;function r(s){return jt(t,s)&&t[s]!==qP}const i={size:0,empty:0,object:t,has:r,get(s){return r(s)?t[s]:void 0},set(s,o){return r(s)||(++i.size,t[s]===qP&&--i.empty),t[s]=o,this},delete(s){return r(s)&&(--i.size,++i.empty,t[s]=qP),this},clear(){i.size=i.empty=0,i.object=t={}},test(s){return arguments.length?(n=s,i):n},clean(){const s={};let o=0;for(const a in t){const u=t[a];u!==qP&&(!n||!n(u))&&(s[a]=u,++o)}i.size=o,i.empty=0,i.object=t=s}};return e&&Object.keys(e).forEach(s=>{i.set(s,e[s])}),i}function t3e(e,t,n,r,i,s){if(!n&&n!==0)return s;const o=+n;let a=e[0],u=Zn(e),l;u<a&&(l=a,a=u,u=l),l=Math.abs(t-a);const c=Math.abs(u-t);return l<c&&l<=o?r:c<=o?i:s}function lt(e,t,n){const r=e.prototype=Object.create(t.prototype);return Object.defineProperty(r,"constructor",{value:e,writable:!0,enumerable:!0,configurable:!0}),_n(r,n)}function Qw(e,t,n,r){let i=t[0],s=t[t.length-1],o;return i>s&&(o=i,i=s,s=o),n=n===void 0||n,r=r===void 0||r,(n?i<=e:i<e)&&(r?e<=s:e<s)}function lv(e){return typeof e=="boolean"}function U0(e){return Object.prototype.toString.call(e)==="[object Date]"}function n3e(e){return e&&wn(e[Symbol.iterator])}function fr(e){return typeof e=="number"}function r3e(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function mt(e){return typeof e=="string"}function Jee(e,t,n){e&&(e=t?pt(e).map(a=>a.replace(/\\(.)/g,"$1")):pt(e));const r=e&&e.length,i=n&&n.get||jMe,s=a=>i(t?[a]:op(a));let o;if(!r)o=function(){return""};else if(r===1){const a=s(e[0]);o=function(u){return""+a(u)}}else{const a=e.map(s);o=function(u){let l=""+a[0](u),c=0;for(;++c<r;)l+="|"+a[c](u);return l}}return dl(o,e,"key")}function i3e(e,t){const n=e[0],r=Zn(e),i=+t;return i?i===1?r:n+i*(r-n):n}const f9t=1e4;function s3e(e){e=+e||f9t;let t,n,r;const i=()=>{t={},n={},r=0},s=(o,a)=>(++r>e&&(n=t,t={},r=1),t[o]=a);return i(),{clear:i,has:o=>jt(t,o)||jt(n,o),get:o=>jt(t,o)?t[o]:jt(n,o)?s(o,n[o]):void 0,set:(o,a)=>jt(t,o)?t[o]=a:s(o,a)}}function o3e(e,t,n,r){const i=t.length,s=n.length;if(!s)return t;if(!i)return n;const o=r||new t.constructor(i+s);let a=0,u=0,l=0;for(;a<i&&u<s;++l)o[l]=e(t[a],n[u])>0?n[u++]:t[a++];for(;a<i;++a,++l)o[l]=t[a];for(;u<s;++u,++l)o[l]=n[u];return o}function fC(e,t){let n="";for(;--t>=0;)n+=e;return n}function a3e(e,t,n,r){const i=n||" ",s=e+"",o=t-s.length;return o<=0?s:r==="left"?fC(i,o)+s:r==="center"?fC(i,~~(o/2))+s+fC(i,Math.ceil(o/2)):s+fC(i,o)}function PR(e){return e&&Zn(e)-e[0]||0}function rt(e){return je(e)?"["+e.map(rt)+"]":gt(e)||mt(e)?JSON.stringify(e).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):e}function Zee(e){return e==null||e===""?null:!e||e==="false"||e==="0"?!1:!!e}const d9t=e=>fr(e)||U0(e)?e:Date.parse(e);function ete(e,t){return t=t||d9t,e==null||e===""?null:t(e)}function tte(e){return e==null||e===""?null:e+""}function id(e){const t={},n=e.length;for(let r=0;r<n;++r)t[e[r]]=!0;return t}function u3e(e,t,n,r){const i=r??"",s=e+"",o=s.length,a=Math.max(0,t-i.length);return o<=t?s:n==="left"?i+s.slice(o-a):n==="center"?s.slice(0,Math.ceil(a/2))+i+s.slice(o-~~(a/2)):s.slice(0,a)+i}function qg(e,t,n){if(e)if(t){const r=e.length;for(let i=0;i<r;++i){const s=t(e[i]);s&&n(s,i,e)}}else e.forEach(n)}function h9t(e){return e}function p9t(e){if(e==null)return h9t;var t,n,r=e.scale[0],i=e.scale[1],s=e.translate[0],o=e.translate[1];return function(a,u){u||(t=n=0);var l=2,c=a.length,f=new Array(c);for(f[0]=(t+=a[0])*r+s,f[1]=(n+=a[1])*i+o;l<c;)f[l]=a[l],++l;return f}}function m9t(e,t){for(var n,r=e.length,i=r-t;i<--r;)n=e[i],e[i++]=e[r],e[r]=n}function g9t(e,t){return typeof t=="string"&&(t=e.objects[t]),t.type==="GeometryCollection"?{type:"FeatureCollection",features:t.geometries.map(function(n){return Jme(e,n)})}:Jme(e,t)}function Jme(e,t){var n=t.id,r=t.bbox,i=t.properties==null?{}:t.properties,s=l3e(e,t);return n==null&&r==null?{type:"Feature",properties:i,geometry:s}:r==null?{type:"Feature",id:n,properties:i,geometry:s}:{type:"Feature",id:n,bbox:r,properties:i,geometry:s}}function l3e(e,t){var n=p9t(e.transform),r=e.arcs;function i(c,f){f.length&&f.pop();for(var d=r[c<0?~c:c],h=0,p=d.length;h<p;++h)f.push(n(d[h],h));c<0&&m9t(f,p)}function s(c){return n(c)}function o(c){for(var f=[],d=0,h=c.length;d<h;++d)i(c[d],f);return f.length<2&&f.push(f[0]),f}function a(c){for(var f=o(c);f.length<4;)f.push(f[0]);return f}function u(c){return c.map(a)}function l(c){var f=c.type,d;switch(f){case"GeometryCollection":return{type:f,geometries:c.geometries.map(l)};case"Point":d=s(c.coordinates);break;case"MultiPoint":d=c.coordinates.map(s);break;case"LineString":d=o(c.arcs);break;case"MultiLineString":d=c.arcs.map(o);break;case"Polygon":d=u(c.arcs);break;case"MultiPolygon":d=c.arcs.map(u);break;default:return null}return{type:f,coordinates:d}}return l(t)}function y9t(e,t){var n={},r={},i={},s=[],o=-1;t.forEach(function(l,c){var f=e.arcs[l<0?~l:l],d;f.length<3&&!f[1][0]&&!f[1][1]&&(d=t[++o],t[o]=l,t[c]=d)}),t.forEach(function(l){var c=a(l),f=c[0],d=c[1],h,p;if(h=i[f])if(delete i[h.end],h.push(l),h.end=d,p=r[d]){delete r[p.start];var m=p===h?h:h.concat(p);r[m.start=h.start]=i[m.end=p.end]=m}else r[h.start]=i[h.end]=h;else if(h=r[d])if(delete r[h.start],h.unshift(l),h.start=f,p=i[f]){delete i[p.end];var g=p===h?h:p.concat(h);r[g.start=p.start]=i[g.end=h.end]=g}else r[h.start]=i[h.end]=h;else h=[l],r[h.start=f]=i[h.end=d]=h});function a(l){var c=e.arcs[l<0?~l:l],f=c[0],d;return e.transform?(d=[0,0],c.forEach(function(h){d[0]+=h[0],d[1]+=h[1]})):d=c[c.length-1],l<0?[d,f]:[f,d]}function u(l,c){for(var f in l){var d=l[f];delete c[d.start],delete d.start,delete d.end,d.forEach(function(h){n[h<0?~h:h]=1}),s.push(d)}}return u(i,r),u(r,i),t.forEach(function(l){n[l<0?~l:l]||s.push([l])}),s}function v9t(e){return l3e(e,b9t.apply(this,arguments))}function b9t(e,t,n){var r,i,s;if(arguments.length>1)r=_9t(e,t,n);else for(i=0,r=new Array(s=e.arcs.length);i<s;++i)r[i]=i;return{type:"MultiLineString",arcs:y9t(e,r)}}function _9t(e,t,n){var r=[],i=[],s;function o(f){var d=f<0?~f:f;(i[d]||(i[d]=[])).push({i:f,g:s})}function a(f){f.forEach(o)}function u(f){f.forEach(a)}function l(f){f.forEach(u)}function c(f){switch(s=f,f.type){case"GeometryCollection":f.geometries.forEach(c);break;case"LineString":a(f.arcs);break;case"MultiLineString":case"Polygon":u(f.arcs);break;case"MultiPolygon":l(f.arcs);break}}return c(t),i.forEach(n==null?function(f){r.push(f[0].i)}:function(f){n(f[0].g,f[f.length-1].g)&&r.push(f[0].i)}),r}const Fo="year",ol="quarter",ba="month",Fs="week",al="date",pa="day",zh="dayofyear",Kl="hours",Xl="minutes",Hc="seconds",sd="milliseconds",nte=[Fo,ol,ba,Fs,al,pa,zh,Kl,Xl,Hc,sd],F9=nte.reduce((e,t,n)=>(e[t]=1+n,e),{});function rte(e){const t=pt(e).slice(),n={};return t.length||Le("Missing time unit."),t.forEach(i=>{jt(F9,i)?n[i]=1:Le(`Invalid time unit: ${i}.`)}),(n[Fs]||n[pa]?1:0)+(n[ol]||n[ba]||n[al]?1:0)+(n[zh]?1:0)>1&&Le(`Incompatible time units: ${e}`),t.sort((i,s)=>F9[i]-F9[s]),t}const w9t={[Fo]:"%Y ",[ol]:"Q%q ",[ba]:"%b ",[al]:"%d ",[Fs]:"W%U ",[pa]:"%a ",[zh]:"%j ",[Kl]:"%H:00",[Xl]:"00:%M",[Hc]:":%S",[sd]:".%L",[`${Fo}-${ba}`]:"%Y-%m ",[`${Fo}-${ba}-${al}`]:"%Y-%m-%d ",[`${Kl}-${Xl}`]:"%H:%M"};function c3e(e,t){const n=_n({},w9t,t),r=rte(e),i=r.length;let s="",o=0,a,u;for(o=0;o<i;)for(a=r.length;a>o;--a)if(u=r.slice(o,a).join("-"),n[u]!=null){s+=n[u],o=a;break}return s.trim()}const l1=new Date;function ite(e){return l1.setFullYear(e),l1.setMonth(0),l1.setDate(1),l1.setHours(0,0,0,0),l1}function f3e(e){return h3e(new Date(e))}function d3e(e){return aq(new Date(e))}function h3e(e){return dm.count(ite(e.getFullYear())-1,e)}function aq(e){return $S.count(ite(e.getFullYear())-1,e)}function uq(e){return ite(e).getDay()}function E9t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(-1,t,n,r,i,s,o);return a.setFullYear(e),a}return new Date(e,t,n,r,i,s,o)}function p3e(e){return g3e(new Date(e))}function m3e(e){return lq(new Date(e))}function g3e(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return O0.count(t-1,e)}function lq(e){const t=Date.UTC(e.getUTCFullYear(),0,1);return MS.count(t-1,e)}function cq(e){return l1.setTime(Date.UTC(e,0,1)),l1.getUTCDay()}function x9t(e,t,n,r,i,s,o){if(0<=e&&e<100){const a=new Date(Date.UTC(-1,t,n,r,i,s,o));return a.setUTCFullYear(n.y),a}return new Date(Date.UTC(e,t,n,r,i,s,o))}function y3e(e,t,n,r,i){const s=t||1,o=Zn(e),a=(y,v,b)=>(b=b||y,S9t(n[b],r[b],y===o&&s,v)),u=new Date,l=id(e),c=l[Fo]?a(Fo):Ca(2012),f=l[ba]?a(ba):l[ol]?a(ol):i0,d=l[Fs]&&l[pa]?a(pa,1,Fs+pa):l[Fs]?a(Fs,1):l[pa]?a(pa,1):l[al]?a(al,1):l[zh]?a(zh,1):uT,h=l[Kl]?a(Kl):i0,p=l[Xl]?a(Xl):i0,m=l[Hc]?a(Hc):i0,g=l[sd]?a(sd):i0;return function(y){u.setTime(+y);const v=c(u);return i(v,f(u),d(u,v),h(u),p(u),m(u),g(u))}}function S9t(e,t,n,r){const i=n<=1?e:r?(s,o)=>r+n*Math.floor((e(s,o)-r)/n):(s,o)=>n*Math.floor(e(s,o)/n);return t?(s,o)=>t(i(s,o),o):i}function Lx(e,t,n){return t+e*7-(n+6)%7}const T9t={[Fo]:e=>e.getFullYear(),[ol]:e=>Math.floor(e.getMonth()/3),[ba]:e=>e.getMonth(),[al]:e=>e.getDate(),[Kl]:e=>e.getHours(),[Xl]:e=>e.getMinutes(),[Hc]:e=>e.getSeconds(),[sd]:e=>e.getMilliseconds(),[zh]:e=>h3e(e),[Fs]:e=>aq(e),[Fs+pa]:(e,t)=>Lx(aq(e),e.getDay(),uq(t)),[pa]:(e,t)=>Lx(1,e.getDay(),uq(t))},A9t={[ol]:e=>3*e,[Fs]:(e,t)=>Lx(e,0,uq(t))};function v3e(e,t){return y3e(e,t||1,T9t,A9t,E9t)}const C9t={[Fo]:e=>e.getUTCFullYear(),[ol]:e=>Math.floor(e.getUTCMonth()/3),[ba]:e=>e.getUTCMonth(),[al]:e=>e.getUTCDate(),[Kl]:e=>e.getUTCHours(),[Xl]:e=>e.getUTCMinutes(),[Hc]:e=>e.getUTCSeconds(),[sd]:e=>e.getUTCMilliseconds(),[zh]:e=>g3e(e),[Fs]:e=>lq(e),[pa]:(e,t)=>Lx(1,e.getUTCDay(),cq(t)),[Fs+pa]:(e,t)=>Lx(lq(e),e.getUTCDay(),cq(t))},I9t={[ol]:e=>3*e,[Fs]:(e,t)=>Lx(e,0,cq(t))};function b3e(e,t){return y3e(e,t||1,C9t,I9t,x9t)}const k9t={[Fo]:Nh,[ol]:mI.every(3),[ba]:mI,[Fs]:$S,[al]:dm,[pa]:dm,[zh]:dm,[Kl]:yF,[Xl]:mF,[Hc]:Zp,[sd]:dx},R9t={[Fo]:Ph,[ol]:gI.every(3),[ba]:gI,[Fs]:MS,[al]:O0,[pa]:O0,[zh]:O0,[Kl]:vF,[Xl]:gF,[Hc]:Zp,[sd]:dx};function dT(e){return k9t[e]}function hT(e){return R9t[e]}function _3e(e,t,n){return e?e.offset(t,n):void 0}function w3e(e,t,n){return _3e(dT(e),t,n)}function E3e(e,t,n){return _3e(hT(e),t,n)}function x3e(e,t,n,r){return e?e.range(t,n,r):void 0}function S3e(e,t,n,r){return x3e(dT(e),t,n,r)}function T3e(e,t,n,r){return x3e(hT(e),t,n,r)}const dC=1e3,hC=dC*60,pC=hC*60,B4=pC*24,N9t=B4*7,Zme=B4*30,fq=B4*365,A3e=[Fo,ba,al,Kl,Xl,Hc,sd],mC=A3e.slice(0,-1),gC=mC.slice(0,-1),yC=gC.slice(0,-1),P9t=yC.slice(0,-1),O9t=[Fo,Fs],ege=[Fo,ba],C3e=[Fo],dA=[[mC,1,dC],[mC,5,5*dC],[mC,15,15*dC],[mC,30,30*dC],[gC,1,hC],[gC,5,5*hC],[gC,15,15*hC],[gC,30,30*hC],[yC,1,pC],[yC,3,3*pC],[yC,6,6*pC],[yC,12,12*pC],[P9t,1,B4],[O9t,1,N9t],[ege,1,Zme],[ege,3,3*Zme],[C3e,1,fq]];function I3e(e){const t=e.extent,n=e.maxbins||40,r=Math.abs(PR(t))/n;let i=NS(a=>a[2]).right(dA,r),s,o;return i===dA.length?(s=C3e,o=ty(t[0]/fq,t[1]/fq,n)):i?(i=dA[r/dA[i-1][2]<dA[i][2]/r?i-1:i],s=i[0],o=i[1]):(s=A3e,o=Math.max(ty(t[0],t[1],n),1)),{units:s,step:o}}function vC(e){const t={};return n=>t[n]||(t[n]=e(n))}function D9t(e,t){return n=>{const r=e(n),i=r.indexOf(t);if(i<0)return r;let s=$9t(r,i);const o=s<r.length?r.slice(s):"";for(;--s>i;)if(r[s]!=="0"){++s;break}return r.slice(0,s)+o}}function $9t(e,t){let n=e.lastIndexOf("e"),r;if(n>0)return n;for(n=e.length;--n>t;)if(r=e.charCodeAt(n),r>=48&&r<=57)return n+1}function k3e(e){const t=vC(e.format),n=e.formatPrefix;return{format:t,formatPrefix:n,formatFloat(r){const i=cb(r||",");if(i.precision==null){switch(i.precision=12,i.type){case"%":i.precision-=2;break;case"e":i.precision-=1;break}return D9t(t(i),t(".1f")(1)[1])}else return t(i)},formatSpan(r,i,s,o){o=cb(o??",f");const a=ty(r,i,s),u=Math.max(Math.abs(r),Math.abs(i));let l;if(o.precision==null)switch(o.type){case"s":return isNaN(l=RAe(a,u))||(o.precision=l),n(o,u);case"":case"e":case"g":case"p":case"r":{isNaN(l=NAe(a,u))||(o.precision=l-(o.type==="e"));break}case"f":case"%":{isNaN(l=kAe(a))||(o.precision=l-(o.type==="%")*2);break}}return t(o)}}}let dq;R3e();function R3e(){return dq=k3e({format:OS,formatPrefix:CX})}function N3e(e){return k3e(IAe(e))}function W3(e){return arguments.length?dq=N3e(e):dq}function tge(e,t,n){n=n||{},gt(n)||Le(`Invalid time multi-format specifier: ${n}`);const r=t(Hc),i=t(Xl),s=t(Kl),o=t(al),a=t(Fs),u=t(ba),l=t(ol),c=t(Fo),f=e(n[sd]||".%L"),d=e(n[Hc]||":%S"),h=e(n[Xl]||"%I:%M"),p=e(n[Kl]||"%I %p"),m=e(n[al]||n[pa]||"%a %d"),g=e(n[Fs]||"%b %d"),y=e(n[ba]||"%B"),v=e(n[ol]||"%B"),b=e(n[Fo]||"%Y");return w=>(r(w)<w?f:i(w)<w?d:s(w)<w?h:o(w)<w?p:u(w)<w?a(w)<w?m:g:c(w)<w?l(w)<w?y:v:b)(w)}function P3e(e){const t=vC(e.format),n=vC(e.utcFormat);return{timeFormat:r=>mt(r)?t(r):tge(t,dT,r),utcFormat:r=>mt(r)?n(r):tge(n,hT,r),timeParse:vC(e.parse),utcParse:vC(e.utcParse)}}let hq;O3e();function O3e(){return hq=P3e({format:BX,parse:HCe,utcFormat:bF,utcParse:qCe})}function D3e(e){return P3e(jCe(e))}function XI(e){return arguments.length?hq=D3e(e):hq}const pq=(e,t)=>_n({},e,t);function $3e(e,t){const n=e?N3e(e):W3(),r=t?D3e(t):XI();return pq(n,r)}function ste(e,t){const n=arguments.length;return n&&n!==2&&Le("defaultLocale expects either zero or two arguments."),n?pq(W3(e),XI(t)):pq(W3(),XI())}function M9t(){return R3e(),O3e(),ste()}const L9t=/^(data:|([A-Za-z]+:)?\/\/)/,F9t=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp|file|data):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,j9t=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205f\u3000]/g,nge="file://";function B9t(e,t){return n=>({options:n||{},sanitize:z9t,load:U9t,fileAccess:!!t,file:V9t(t),http:q9t(e)})}async function U9t(e,t){const n=await this.sanitize(e,t),r=n.href;return n.localFile?this.file(r):this.http(r,t)}async function z9t(e,t){t=_n({},this.options,t);const n=this.fileAccess,r={href:null};let i,s,o;const a=F9t.test(e.replace(j9t,""));(e==null||typeof e!="string"||!a)&&Le("Sanitize failure, invalid URI: "+rt(e));const u=L9t.test(e);return(o=t.baseURL)&&!u&&(!e.startsWith("/")&&!o.endsWith("/")&&(e="/"+e),e=o+e),s=(i=e.startsWith(nge))||t.mode==="file"||t.mode!=="http"&&!u&&n,i?e=e.slice(nge.length):e.startsWith("//")&&(t.defaultProtocol==="file"?(e=e.slice(2),s=!0):e=(t.defaultProtocol||"http")+":"+e),Object.defineProperty(r,"localFile",{value:!!s}),r.href=e,t.target&&(r.target=t.target+""),t.rel&&(r.rel=t.rel+""),t.context==="image"&&t.crossOrigin&&(r.crossOrigin=t.crossOrigin+""),r}function V9t(e){return e?t=>new Promise((n,r)=>{e.readFile(t,(i,s)=>{i?r(i):n(s)})}):H9t}async function H9t(){Le("No file system access.")}function q9t(e){return e?async function(t,n){const r=_n({},this.options.http,n),i=n&&n.response,s=await e(t,r);return s.ok?wn(s[i])?s[i]():s.text():Le(s.status+""+s.statusText)}:W9t}async function W9t(){Le("No HTTP fetch method available.")}const G9t=e=>e!=null&&e===e,Y9t=e=>e==="true"||e==="false"||e===!0||e===!1,K9t=e=>!Number.isNaN(Date.parse(e)),M3e=e=>!Number.isNaN(+e)&&!(e instanceof Date),X9t=e=>M3e(e)&&Number.isInteger(+e),mq={boolean:Zee,integer:ma,number:ma,date:ete,string:tte,unknown:Aa},WP=[Y9t,X9t,M3e,K9t],Q9t=["boolean","integer","number","date"];function L3e(e,t){if(!e||!e.length)return"unknown";const n=e.length,r=WP.length,i=WP.map((s,o)=>o+1);for(let s=0,o=0,a,u;s<n;++s)for(u=t?e[s][t]:e[s],a=0;a<r;++a)if(i[a]&&G9t(u)&&!WP[a](u)&&(i[a]=0,++o,o===WP.length))return"string";return Q9t[i.reduce((s,o)=>s===0?o:s,0)-1]}function F3e(e,t){return t.reduce((n,r)=>(n[r]=L3e(e,r),n),{})}function rge(e){const t=function(n,r){const i={delimiter:e};return ote(n,r?_n(r,i):i)};return t.responseType="text",t}function ote(e,t){return t.header&&(e=t.header.map(rt).join(t.delimiter)+`
`+e),TAe(t.delimiter).parse(e+"")}ote.responseType="text";function J9t(e){return typeof Buffer=="function"&&wn(Buffer.isBuffer)?Buffer.isBuffer(e):!1}function ate(e,t){const n=t&&t.property?zc(t.property):Aa;return gt(e)&&!J9t(e)?Z9t(n(e),t):n(JSON.parse(e))}ate.responseType="json";function Z9t(e,t){return!je(e)&&n3e(e)&&(e=[...e]),t&&t.copy?JSON.parse(JSON.stringify(e)):e}const eUt={interior:(e,t)=>e!==t,exterior:(e,t)=>e===t};function j3e(e,t){let n,r,i,s;return e=ate(e,t),t&&t.feature?(n=g9t,i=t.feature):t&&t.mesh?(n=v9t,i=t.mesh,s=eUt[t.filter]):Le("Missing TopoJSON feature or mesh parameter."),r=(r=e.objects[i])?n(e,r,s):Le("Invalid TopoJSON object: "+i),r&&r.features||[r]}j3e.responseType="json";const wD={dsv:ote,csv:rge(","),tsv:rge("	"),json:ate,topojson:j3e};function ute(e,t){return arguments.length>1?(wD[e]=t,this):jt(wD,e)?wD[e]:null}function B3e(e){const t=ute(e);return t&&t.responseType||"text"}function U3e(e,t,n,r){t=t||{};const i=ute(t.type||"json");return i||Le("Unknown data format type: "+t.type),e=i(e,t),t.parse&&tUt(e,t.parse,n,r),jt(e,"columns")&&delete e.columns,e}function tUt(e,t,n,r){if(!e.length)return;const i=XI();n=n||i.timeParse,r=r||i.utcParse;let s=e.columns||Object.keys(e[0]),o,a,u,l,c,f;t==="auto"&&(t=F3e(e,s)),s=Object.keys(t);const d=s.map(h=>{const p=t[h];let m,g;if(p&&(p.startsWith("date:")||p.startsWith("utc:")))return m=p.split(/:(.+)?/,2),g=m[1],(g[0]==="'"&&g[g.length-1]==="'"||g[0]==='"'&&g[g.length-1]==='"')&&(g=g.slice(1,-1)),(m[0]==="utc"?r:n)(g);if(!mq[p])throw Error("Illegal format pattern: "+h+":"+p);return mq[p]});for(u=0,c=e.length,f=s.length;u<c;++u)for(o=e[u],l=0;l<f;++l)a=s[l],o[a]=d[l](o[a])}const U4=B9t(typeof fetch<"u"&&fetch,null);function z4(e){const t=e||Aa,n=[],r={};return n.add=i=>{const s=t(i);return r[s]||(r[s]=1,n.push(i)),n},n.remove=i=>{const s=t(i);if(r[s]){r[s]=0;const o=n.indexOf(i);o>=0&&n.splice(o,1)}return n},n}async function ED(e,t){try{await t(e)}catch(n){e.error(n)}}const z3e=Symbol("vega_id");let nUt=1;function V4(e){return!!(e&&Lt(e))}function Lt(e){return e[z3e]}function V3e(e,t){return e[z3e]=t,e}function xr(e){const t=e===Object(e)?e:{data:e};return Lt(t)?t:V3e(t,nUt++)}function lte(e){return H4(e,xr({}))}function H4(e,t){for(const n in e)t[n]=e[n];return t}function H3e(e,t){return V3e(t,Lt(e))}function p_(e,t){return e?t?(n,r)=>e(n,r)||Lt(t(n))-Lt(t(r)):(n,r)=>e(n,r)||Lt(n)-Lt(r):null}function q3e(e){return e&&e.constructor===m_}function m_(){const e=[],t=[],n=[],r=[],i=[];let s=null,o=!1;return{constructor:m_,insert(a){const u=pt(a),l=u.length;for(let c=0;c<l;++c)e.push(u[c]);return this},remove(a){const u=wn(a)?r:t,l=pt(a),c=l.length;for(let f=0;f<c;++f)u.push(l[f]);return this},modify(a,u,l){const c={field:u,value:Ca(l)};return wn(a)?(c.filter=a,i.push(c)):(c.tuple=a,n.push(c)),this},encode(a,u){return wn(a)?i.push({filter:a,field:u}):n.push({tuple:a,field:u}),this},clean(a){return s=a,this},reflow(){return o=!0,this},pulse(a,u){const l={},c={};let f,d,h,p,m,g;for(f=0,d=u.length;f<d;++f)l[Lt(u[f])]=1;for(f=0,d=t.length;f<d;++f)m=t[f],l[Lt(m)]=-1;for(f=0,d=r.length;f<d;++f)p=r[f],u.forEach(v=>{p(v)&&(l[Lt(v)]=-1)});for(f=0,d=e.length;f<d;++f)m=e[f],g=Lt(m),l[g]?l[g]=1:a.add.push(xr(e[f]));for(f=0,d=u.length;f<d;++f)m=u[f],l[Lt(m)]<0&&a.rem.push(m);function y(v,b,w){w?v[b]=w(v):a.encode=b,o||(c[Lt(v)]=v)}for(f=0,d=n.length;f<d;++f)h=n[f],m=h.tuple,p=h.field,g=l[Lt(m)],g>0&&(y(m,p,h.value),a.modifies(p));for(f=0,d=i.length;f<d;++f)h=i[f],p=h.filter,u.forEach(v=>{p(v)&&l[Lt(v)]>0&&y(v,h.field,h.value)}),a.modifies(h.field);if(o)a.mod=t.length||r.length?u.filter(v=>l[Lt(v)]>0):u.slice();else for(g in c)a.mod.push(c[g]);return(s||s==null&&(t.length||r.length))&&a.clean(!0),a}}}const xD="_:mod:_";function q4(){Object.defineProperty(this,xD,{writable:!0,value:{}})}q4.prototype={set(e,t,n,r){const i=this,s=i[e],o=i[xD];return t!=null&&t>=0?(s[t]!==n||r)&&(s[t]=n,o[t+":"+e]=-1,o[e]=-1):(s!==n||r)&&(i[e]=n,o[e]=je(n)?1+n.length:-1),i},modified(e,t){const n=this[xD];if(arguments.length){if(je(e)){for(let r=0;r<e.length;++r)if(n[e[r]])return!0;return!1}}else{for(const r in n)if(n[r])return!0;return!1}return t!=null&&t>=0?t+1<n[e]||!!n[t+":"+e]:!!n[e]},clear(){return this[xD]={},this}};let rUt=0;const iUt="pulse",sUt=new q4,oUt=1,aUt=2;function Jr(e,t,n,r){this.id=++rUt,this.value=e,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,t&&(this._update=t),n&&this.parameters(n,r)}function ige(e){return function(t){const n=this.flags;return arguments.length===0?!!(n&e):(this.flags=t?n|e:n&~e,this)}}Jr.prototype={targets(){return this._targets||(this._targets=z4(NR))},set(e){return this.value!==e?(this.value=e,1):0},skip:ige(oUt),modified:ige(aUt),parameters(e,t,n){t=t!==!1;const r=this._argval=this._argval||new q4,i=this._argops=this._argops||[],s=[];let o,a,u,l;const c=(f,d,h)=>{h instanceof Jr?(h!==this&&(t&&h.targets().add(this),s.push(h)),i.push({op:h,name:f,index:d})):r.set(f,d,h)};for(o in e)if(a=e[o],o===iUt)pt(a).forEach(f=>{f instanceof Jr?f!==this&&(f.targets().add(this),s.push(f)):Le("Pulse parameters must be operator instances.")}),this.source=a;else if(je(a))for(r.set(o,-1,Array(u=a.length)),l=0;l<u;++l)c(o,l,a[l]);else c(o,-1,a);return this.marshall().clear(),n&&(i.initonly=!0),s},marshall(e){const t=this._argval||sUt,n=this._argops;let r,i,s,o;if(n){const a=n.length;for(i=0;i<a;++i)r=n[i],s=r.op,o=s.modified()&&s.stamp===e,t.set(r.name,r.index,s.value,o);if(n.initonly){for(i=0;i<a;++i)r=n[i],r.op.targets().remove(this);this._argops=null,this._update=null}}return t},detach(){const e=this._argops;let t,n,r,i;if(e)for(t=0,n=e.length;t<n;++t)r=e[t],i=r.op,i._targets&&i._targets.remove(this);this.pulse=null,this.source=null},evaluate(e){const t=this._update;if(t){const n=this.marshall(e.stamp),r=t.call(this,n,e);if(n.clear(),r!==this.value)this.value=r;else if(!this.modified())return e.StopPropagation}},run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?(this.skip(!1),t=0):t=this.evaluate(e),this.pulse=t||e}};function uUt(e,t,n,r){let i=1,s;return e instanceof Jr?s=e:e&&e.prototype instanceof Jr?s=new e:wn(e)?s=new Jr(null,e):(i=0,s=new Jr(e,t)),this.rank(s),i&&(r=n,n=t),n&&this.connect(s,s.parameters(n,r)),this.touch(s),s}function lUt(e,t){const n=e.rank,r=t.length;for(let i=0;i<r;++i)if(n<t[i].rank){this.rerank(e);return}}let cUt=0;function W4(e,t,n){this.id=++cUt,this.value=null,n&&(this.receive=n),e&&(this._filter=e),t&&(this._apply=t)}function Lg(e,t,n){return new W4(e,t,n)}W4.prototype={_filter:Vc,_apply:Aa,targets(){return this._targets||(this._targets=z4(NR))},consume(e){return arguments.length?(this._consume=!!e,this):!!this._consume},receive(e){if(this._filter(e)){const t=this.value=this._apply(e),n=this._targets,r=n?n.length:0;for(let i=0;i<r;++i)n[i].receive(t);this._consume&&(e.preventDefault(),e.stopPropagation())}},filter(e){const t=Lg(e);return this.targets().add(t),t},apply(e){const t=Lg(null,e);return this.targets().add(t),t},merge(){const e=Lg();this.targets().add(e);for(let t=0,n=arguments.length;t<n;++t)arguments[t].targets().add(e);return e},throttle(e){let t=-1;return this.filter(()=>{const n=Date.now();return n-t>e?(t=n,1):0})},debounce(e){const t=Lg();return this.targets().add(Lg(null,null,Qee(e,n=>{const r=n.dataflow;t.receive(n),r&&r.run&&r.run()}))),t},between(e,t){let n=!1;return e.targets().add(Lg(null,null,()=>n=!0)),t.targets().add(Lg(null,null,()=>n=!1)),this.filter(()=>n)},detach(){this._filter=Vc,this._targets=null}};function fUt(e,t,n,r){const i=this,s=Lg(n,r),o=function(l){l.dataflow=i;try{s.receive(l)}catch(c){i.error(c)}finally{i.run()}};let a;typeof e=="string"&&typeof document<"u"?a=document.querySelectorAll(e):a=pt(e);const u=a.length;for(let l=0;l<u;++l)a[l].addEventListener(t,o);return s}function dUt(e,t){const n=this.locale();return U3e(e,t,n.timeParse,n.utcParse)}function hUt(e,t,n){return t=this.parse(t,n),this.pulse(e,this.changeset().insert(t))}async function pUt(e,t){const n=this;let r=0,i;try{i=await n.loader().load(e,{context:"dataflow",response:B3e(t&&t.type)});try{i=n.parse(i,t)}catch(s){r=-2,n.warn("Data ingestion failed",e,s)}}catch(s){r=-1,n.warn("Loading failed",e,s)}return{data:i,status:r}}async function mUt(e,t,n){const r=this,i=r._pending||gUt(r);i.requests+=1;const s=await r.request(t,n);return r.pulse(e,r.changeset().remove(Vc).insert(s.data||[])),i.done(),s}function gUt(e){let t;const n=new Promise(r=>t=r);return n.requests=0,n.done=()=>{--n.requests===0&&(e._pending=null,t(e))},e._pending=n}const yUt={skip:!0};function vUt(e,t,n,r,i){return(e instanceof Jr?_Ut:bUt)(this,e,t,n,r,i),this}function bUt(e,t,n,r,i,s){const o=_n({},s,yUt);let a,u;wn(n)||(n=Ca(n)),r===void 0?a=l=>e.touch(n(l)):wn(r)?(u=new Jr(null,r,i,!1),a=l=>{u.evaluate(l);const c=n(l),f=u.value;q3e(f)?e.pulse(c,f,s):e.update(c,f,o)}):a=l=>e.update(n(l),r,o),t.apply(a)}function _Ut(e,t,n,r,i,s){if(r===void 0)t.targets().add(n);else{const o=s||{},a=new Jr(null,wUt(n,r),i,!1);a.modified(o.force),a.rank=t.rank,t.targets().add(a),n&&(a.skip(!0),a.value=n.value,a.targets().add(n),e.connect(n,[a]))}}function wUt(e,t){return t=wn(t)?t:Ca(t),e?function(n,r){const i=t(n,r);return e.skip()||(e.skip(i!==this.value).value=i),i}:t}function EUt(e){e.rank=++this._rank}function xUt(e){const t=[e];let n,r,i;for(;t.length;)if(this.rank(n=t.pop()),r=n._targets)for(i=r.length;--i>=0;)t.push(n=r[i]),n===e&&Le("Cycle detected in dataflow graph.")}const G3={},Bd=1,Wg=2,Op=4,SUt=Bd|Wg,sge=Bd|Op,J_=Bd|Wg|Op,oge=8,hA=16,age=32,uge=64;function z0(e,t,n){this.dataflow=e,this.stamp=t??-1,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function j9(e,t){const n=[];return qg(e,t,r=>n.push(r)),n}function lge(e,t){const n={};return e.visit(t,r=>{n[Lt(r)]=1}),r=>n[Lt(r)]?null:r}function GP(e,t){return e?(n,r)=>e(n,r)&&t(n,r):t}z0.prototype={StopPropagation:G3,ADD:Bd,REM:Wg,MOD:Op,ADD_REM:SUt,ADD_MOD:sge,ALL:J_,REFLOW:oge,SOURCE:hA,NO_SOURCE:age,NO_FIELDS:uge,fork(e){return new z0(this.dataflow).init(this,e)},clone(){const e=this.fork(J_);return e.add=e.add.slice(),e.rem=e.rem.slice(),e.mod=e.mod.slice(),e.source&&(e.source=e.source.slice()),e.materialize(J_|hA)},addAll(){let e=this;return!e.source||e.add===e.rem||!e.rem.length&&e.source.length===e.add.length||(e=new z0(this.dataflow).init(this),e.add=e.source,e.rem=[]),e},init(e,t){const n=this;return n.stamp=e.stamp,n.encode=e.encode,e.fields&&!(t&uge)&&(n.fields=e.fields),t&Bd?(n.addF=e.addF,n.add=e.add):(n.addF=null,n.add=[]),t&Wg?(n.remF=e.remF,n.rem=e.rem):(n.remF=null,n.rem=[]),t&Op?(n.modF=e.modF,n.mod=e.mod):(n.modF=null,n.mod=[]),t&age?(n.srcF=null,n.source=null):(n.srcF=e.srcF,n.source=e.source,e.cleans&&(n.cleans=e.cleans)),n},runAfter(e){this.dataflow.runAfter(e)},changed(e){const t=e||J_;return t&Bd&&this.add.length||t&Wg&&this.rem.length||t&Op&&this.mod.length},reflow(e){if(e)return this.fork(J_).reflow();const t=this.add.length,n=this.source&&this.source.length;return n&&n!==t&&(this.mod=this.source,t&&this.filter(Op,lge(this,Bd))),this},clean(e){return arguments.length?(this.cleans=!!e,this):this.cleans},modifies(e){const t=this.fields||(this.fields={});return je(e)?e.forEach(n=>t[n]=!0):t[e]=!0,this},modified(e,t){const n=this.fields;return(t||this.mod.length)&&n?arguments.length?je(e)?e.some(r=>n[r]):n[e]:!!n:!1},filter(e,t){const n=this;return e&Bd&&(n.addF=GP(n.addF,t)),e&Wg&&(n.remF=GP(n.remF,t)),e&Op&&(n.modF=GP(n.modF,t)),e&hA&&(n.srcF=GP(n.srcF,t)),n},materialize(e){e=e||J_;const t=this;return e&Bd&&t.addF&&(t.add=j9(t.add,t.addF),t.addF=null),e&Wg&&t.remF&&(t.rem=j9(t.rem,t.remF),t.remF=null),e&Op&&t.modF&&(t.mod=j9(t.mod,t.modF),t.modF=null),e&hA&&t.srcF&&(t.source=t.source.filter(t.srcF),t.srcF=null),t},visit(e,t){const n=this,r=t;if(e&hA)return qg(n.source,n.srcF,r),n;e&Bd&&qg(n.add,n.addF,r),e&Wg&&qg(n.rem,n.remF,r),e&Op&&qg(n.mod,n.modF,r);const i=n.source;if(e&oge&&i){const s=n.add.length+n.mod.length;s===i.length||(s?qg(i,lge(n,sge),r):qg(i,n.srcF,r))}return n}};function cte(e,t,n,r){const i=this;let s=0;this.dataflow=e,this.stamp=t,this.fields=null,this.encode=r||null,this.pulses=n;for(const o of n)if(o.stamp===t){if(o.fields){const a=i.fields||(i.fields={});for(const u in o.fields)a[u]=1}o.changed(i.ADD)&&(s|=i.ADD),o.changed(i.REM)&&(s|=i.REM),o.changed(i.MOD)&&(s|=i.MOD)}this.changes=s}lt(cte,z0,{fork(e){const t=new z0(this.dataflow).init(this,e&this.NO_FIELDS);return e!==void 0&&(e&t.ADD&&this.visit(t.ADD,n=>t.add.push(n)),e&t.REM&&this.visit(t.REM,n=>t.rem.push(n)),e&t.MOD&&this.visit(t.MOD,n=>t.mod.push(n))),t},changed(e){return this.changes&e},modified(e){const t=this,n=t.fields;return n&&t.changes&t.MOD?je(e)?e.some(r=>n[r]):n[e]:0},filter(){Le("MultiPulse does not support filtering.")},materialize(){Le("MultiPulse does not support materialization.")},visit(e,t){const n=this,r=n.pulses,i=r.length;let s=0;if(e&n.SOURCE)for(;s<i;++s)r[s].visit(e,t);else for(;s<i;++s)r[s].stamp===n.stamp&&r[s].visit(e,t);return n}});async function TUt(e,t,n){const r=this,i=[];if(r._pulse)return W3e(r);if(r._pending&&await r._pending,t&&await ED(r,t),!r._touched.length)return r.debug("Dataflow invoked, but nothing to do."),r;const s=++r._clock;r._pulse=new z0(r,s,e),r._touched.forEach(c=>r._enqueue(c,!0)),r._touched=z4(NR);let o=0,a,u,l;try{for(;r._heap.size()>0;){if(a=r._heap.pop(),a.rank!==a.qrank){r._enqueue(a,!0);continue}u=a.run(r._getPulse(a,e)),u.then?u=await u:u.async&&(i.push(u.async),u=G3),u!==G3&&a._targets&&a._targets.forEach(c=>r._enqueue(c)),++o}}catch(c){r._heap.clear(),l=c}if(r._input={},r._pulse=null,r.debug(`Pulse ${s}: ${o} operators`),l&&(r._postrun=[],r.error(l)),r._postrun.length){const c=r._postrun.sort((f,d)=>d.priority-f.priority);r._postrun=[];for(let f=0;f<c.length;++f)await ED(r,c[f].callback)}return n&&await ED(r,n),i.length&&Promise.all(i).then(c=>r.runAsync(null,()=>{c.forEach(f=>{try{f(r)}catch(d){r.error(d)}})})),r}async function AUt(e,t,n){for(;this._running;)await this._running;const r=()=>this._running=null;return(this._running=this.evaluate(e,t,n)).then(r,r),this._running}function CUt(e,t,n){return this._pulse?W3e(this):(this.evaluate(e,t,n),this)}function IUt(e,t,n){if(this._pulse||t)this._postrun.push({priority:n||0,callback:e});else try{e(this)}catch(r){this.error(r)}}function W3e(e){return e.error("Dataflow already running. Use runAsync() to chain invocations."),e}function kUt(e,t){const n=e.stamp<this._clock;n&&(e.stamp=this._clock),(n||t)&&(e.qrank=e.rank,this._heap.push(e))}function RUt(e,t){const n=e.source,r=this._clock;return n&&je(n)?new cte(this,r,n.map(i=>i.pulse),t):this._input[e.id]||NUt(this._pulse,n&&n.pulse)}function NUt(e,t){return t&&t.stamp===e.stamp?t:(e=e.fork(),t&&t!==G3&&(e.source=t.source),e)}const fte={skip:!1,force:!1};function PUt(e,t){const n=t||fte;return this._pulse?this._enqueue(e):this._touched.add(e),n.skip&&e.skip(!0),this}function OUt(e,t,n){const r=n||fte;return(e.set(t)||r.force)&&this.touch(e,r),this}function DUt(e,t,n){this.touch(e,n||fte);const r=new z0(this,this._clock+(this._pulse?0:1)),i=e.pulse&&e.pulse.source||[];return r.target=e,this._input[e.id]=t.pulse(r,i),this}function $Ut(e){let t=[];return{clear:()=>t=[],size:()=>t.length,peek:()=>t[0],push:n=>(t.push(n),G3e(t,0,t.length-1,e)),pop:()=>{const n=t.pop();let r;return t.length?(r=t[0],t[0]=n,MUt(t,0,e)):r=n,r}}}function G3e(e,t,n,r){let i,s;const o=e[n];for(;n>t;){if(s=n-1>>1,i=e[s],r(o,i)<0){e[n]=i,n=s;continue}break}return e[n]=o}function MUt(e,t,n){const r=t,i=e.length,s=e[t];let o=(t<<1)+1,a;for(;o<i;)a=o+1,a<i&&n(e[o],e[a])>=0&&(o=a),e[t]=e[o],t=o,o=(t<<1)+1;return e[t]=s,G3e(e,r,t,n)}function DE(){this.logger(Wee()),this.logLevel(Hee),this._clock=0,this._rank=0,this._locale=ste();try{this._loader=U4()}catch{}this._touched=z4(NR),this._input={},this._pulse=null,this._heap=$Ut((e,t)=>e.qrank-t.qrank),this._postrun=[]}function pA(e){return function(){return this._log[e].apply(this,arguments)}}DE.prototype={stamp(){return this._clock},loader(e){return arguments.length?(this._loader=e,this):this._loader},locale(e){return arguments.length?(this._locale=e,this):this._locale},logger(e){return arguments.length?(this._log=e,this):this._log},error:pA("error"),warn:pA("warn"),info:pA("info"),debug:pA("debug"),logLevel:pA("level"),cleanThreshold:1e4,add:uUt,connect:lUt,rank:EUt,rerank:xUt,pulse:DUt,touch:PUt,update:OUt,changeset:m_,ingest:hUt,parse:dUt,preload:mUt,request:pUt,events:fUt,on:vUt,evaluate:TUt,run:CUt,runAsync:AUt,runAfter:IUt,_enqueue:kUt,_getPulse:RUt};function Pe(e,t){Jr.call(this,e,null,t)}lt(Pe,Jr,{run(e){if(e.stamp<this.stamp)return e.StopPropagation;let t;return this.skip()?this.skip(!1):t=this.evaluate(e),t=t||e,t.then?t=t.then(n=>this.pulse=n):t!==e.StopPropagation&&(this.pulse=t),t},evaluate(e){const t=this.marshall(e.stamp),n=this.transform(t,e);return t.clear(),n},transform(){}});const Fx={};function Y3e(e){const t=K3e(e);return t&&t.Definition||null}function K3e(e){return e=e&&e.toLowerCase(),jt(Fx,e)?Fx[e]:null}function*X3e(e,t){if(t==null)for(let n of e)n!=null&&n!==""&&(n=+n)>=n&&(yield n);else{let n=-1;for(let r of e)r=t(r,++n,e),r!=null&&r!==""&&(r=+r)>=r&&(yield r)}}function dte(e,t,n){const r=Float64Array.from(X3e(e,n));return r.sort(lm),t.map(i=>CTe(r,i))}function hte(e,t){return dte(e,[.25,.5,.75],t)}function pte(e,t){const n=e.length,r=oct(e,t),i=hte(e,t),s=(i[2]-i[0])/1.34;return 1.06*(Math.min(r,s)||r||Math.abs(i[0])||1)*Math.pow(n,-.2)}function Q3e(e){const t=e.maxbins||20,n=e.base||10,r=Math.log(n),i=e.divide||[5,2];let s=e.extent[0],o=e.extent[1],a,u,l,c,f,d;const h=e.span||o-s||Math.abs(s)||1;if(e.step)a=e.step;else if(e.steps){for(c=h/t,f=0,d=e.steps.length;f<d&&e.steps[f]<c;++f);a=e.steps[Math.max(0,f-1)]}else{for(u=Math.ceil(Math.log(t)/r),l=e.minstep||0,a=Math.max(l,Math.pow(n,Math.round(Math.log(h)/r)-u));Math.ceil(h/a)>t;)a*=n;for(f=0,d=i.length;f<d;++f)c=a/i[f],c>=l&&h/c<=t&&(a=c)}c=Math.log(a);const p=c>=0?0:~~(-c/r)+1,m=Math.pow(n,-p-1);return(e.nice||e.nice===void 0)&&(c=Math.floor(s/a+m)*a,s=s<c?c-a:c,o=Math.ceil(o/a)*a),{start:s,stop:o===s?s+a:o,step:a}}var qc=Math.random;function LUt(e){qc=e}function J3e(e,t,n,r){if(!e.length)return[void 0,void 0];const i=Float64Array.from(X3e(e,r)),s=i.length,o=t;let a,u,l,c;for(l=0,c=Array(o);l<o;++l){for(a=0,u=0;u<s;++u)a+=i[~~(qc()*s)];c[l]=a/s}return c.sort(lm),[Nz(c,n/2),Nz(c,1-n/2)]}function Z3e(e,t,n,r){r=r||(d=>d);const i=e.length,s=new Float64Array(i);let o=0,a=1,u=r(e[0]),l=u,c=u+t,f;for(;a<i;++a){if(f=r(e[a]),f>=c){for(l=(u+l)/2;o<a;++o)s[o]=l;c=f+t,u=f}l=f}for(l=(u+l)/2;o<a;++o)s[o]=l;return n?FUt(s,t+t/4):s}function FUt(e,t){const n=e.length;let r=0,i=1,s,o;for(;e[r]===e[i];)++i;for(;i<n;){for(s=i+1;e[i]===e[s];)++s;if(e[i]-e[i-1]<t){for(o=i+(r+s-i-i>>1);o<i;)e[o++]=e[i];for(;o>i;)e[o--]=e[r]}r=i,i=s}return e}function jUt(e){return function(){return e=(1103515245*e+12345)%2147483647,e/2147483647}}function BUt(e,t){t==null&&(t=e,e=0);let n,r,i;const s={min(o){return arguments.length?(n=o||0,i=r-n,s):n},max(o){return arguments.length?(r=o||0,i=r-n,s):r},sample(){return n+Math.floor(i*qc())},pdf(o){return o===Math.floor(o)&&o>=n&&o<r?1/i:0},cdf(o){const a=Math.floor(o);return a<n?0:a>=r?1:(a-n+1)/i},icdf(o){return o>=0&&o<=1?n-1+Math.floor(o*i):NaN}};return s.min(e).max(t)}const eLe=Math.sqrt(2*Math.PI),UUt=Math.SQRT2;let mA=NaN;function G4(e,t){e=e||0,t=t??1;let n=0,r=0,i,s;if(mA===mA)n=mA,mA=NaN;else{do n=qc()*2-1,r=qc()*2-1,i=n*n+r*r;while(i===0||i>1);s=Math.sqrt(-2*Math.log(i)/i),n*=s,mA=r*s}return e+n*t}function mte(e,t,n){n=n??1;const r=(e-(t||0))/n;return Math.exp(-.5*r*r)/(n*eLe)}function Y4(e,t,n){t=t||0,n=n??1;const r=(e-t)/n,i=Math.abs(r);let s;if(i>37)s=0;else{const o=Math.exp(-i*i/2);let a;i<7.07106781186547?(a=.0352624965998911*i+.700383064443688,a=a*i+6.37396220353165,a=a*i+33.912866078383,a=a*i+112.079291497871,a=a*i+221.213596169931,a=a*i+220.206867912376,s=o*a,a=.0883883476483184*i+1.75566716318264,a=a*i+16.064177579207,a=a*i+86.7807322029461,a=a*i+296.564248779674,a=a*i+637.333633378831,a=a*i+793.826512519948,a=a*i+440.413735824752,s=s/a):(a=i+.65,a=i+4/a,a=i+3/a,a=i+2/a,a=i+1/a,s=o/a/2.506628274631)}return r>0?1-s:s}function K4(e,t,n){return e<0||e>1?NaN:(t||0)+(n??1)*UUt*zUt(2*e-1)}function zUt(e){let t=-Math.log((1-e)*(1+e)),n;return t<6.25?(t-=3.125,n=-364441206401782e-35,n=-16850591381820166e-35+n*t,n=128584807152564e-32+n*t,n=11157877678025181e-33+n*t,n=-1333171662854621e-31+n*t,n=20972767875968562e-33+n*t,n=6637638134358324e-30+n*t,n=-4054566272975207e-29+n*t,n=-8151934197605472e-29+n*t,n=26335093153082323e-28+n*t,n=-12975133253453532e-27+n*t,n=-5415412054294628e-26+n*t,n=10512122733215323e-25+n*t,n=-4112633980346984e-24+n*t,n=-29070369957882005e-24+n*t,n=42347877827932404e-23+n*t,n=-13654692000834679e-22+n*t,n=-13882523362786469e-21+n*t,n=.00018673420803405714+n*t,n=-.000740702534166267+n*t,n=-.006033670871430149+n*t,n=.24015818242558962+n*t,n=1.6536545626831027+n*t):t<16?(t=Math.sqrt(t)-3.25,n=22137376921775787e-25,n=9075656193888539e-23+n*t,n=-27517406297064545e-23+n*t,n=18239629214389228e-24+n*t,n=15027403968909828e-22+n*t,n=-4013867526981546e-21+n*t,n=29234449089955446e-22+n*t,n=12475304481671779e-21+n*t,n=-47318229009055734e-21+n*t,n=6828485145957318e-20+n*t,n=24031110387097894e-21+n*t,n=-.0003550375203628475+n*t,n=.0009532893797373805+n*t,n=-.0016882755560235047+n*t,n=.002491442096107851+n*t,n=-.003751208507569241+n*t,n=.005370914553590064+n*t,n=1.0052589676941592+n*t,n=3.0838856104922208+n*t):Number.isFinite(t)?(t=Math.sqrt(t)-5,n=-27109920616438573e-27,n=-2555641816996525e-25+n*t,n=15076572693500548e-25+n*t,n=-3789465440126737e-24+n*t,n=761570120807834e-23+n*t,n=-1496002662714924e-23+n*t,n=2914795345090108e-23+n*t,n=-6771199775845234e-23+n*t,n=22900482228026655e-23+n*t,n=-99298272942317e-20+n*t,n=4526062597223154e-21+n*t,n=-1968177810553167e-20+n*t,n=7599527703001776e-20+n*t,n=-.00021503011930044477+n*t,n=-.00013871931833623122+n*t,n=1.0103004648645344+n*t,n=4.849906401408584+n*t):n=1/0,n*e}function gte(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>G4(n,r),pdf:s=>mte(s,n,r),cdf:s=>Y4(s,n,r),icdf:s=>K4(s,n,r)};return i.mean(e).stdev(t)}function yte(e,t){const n=gte();let r=0;const i={data(s){return arguments.length?(e=s,r=s?s.length:0,i.bandwidth(t)):e},bandwidth(s){return arguments.length?(t=s,!t&&e&&(t=pte(e)),i):t},sample(){return e[~~(qc()*r)]+t*n.sample()},pdf(s){let o=0,a=0;for(;a<r;++a)o+=n.pdf((s-e[a])/t);return o/t/r},cdf(s){let o=0,a=0;for(;a<r;++a)o+=n.cdf((s-e[a])/t);return o/r},icdf(){throw Error("KDE icdf not supported.")}};return i.data(e)}function vte(e,t){return e=e||0,t=t??1,Math.exp(e+G4()*t)}function bte(e,t,n){if(e<=0)return 0;t=t||0,n=n??1;const r=(Math.log(e)-t)/n;return Math.exp(-.5*r*r)/(n*eLe*e)}function _te(e,t,n){return Y4(Math.log(e),t,n)}function wte(e,t,n){return Math.exp(K4(e,t,n))}function tLe(e,t){let n,r;const i={mean(s){return arguments.length?(n=s||0,i):n},stdev(s){return arguments.length?(r=s??1,i):r},sample:()=>vte(n,r),pdf:s=>bte(s,n,r),cdf:s=>_te(s,n,r),icdf:s=>wte(s,n,r)};return i.mean(e).stdev(t)}function nLe(e,t){let n=0,r;function i(o){const a=[];let u=0,l;for(l=0;l<n;++l)u+=a[l]=o[l]==null?1:+o[l];for(l=0;l<n;++l)a[l]/=u;return a}const s={weights(o){return arguments.length?(r=i(t=o||[]),s):t},distributions(o){return arguments.length?(o?(n=o.length,e=o):(n=0,e=[]),s.weights(t)):e},sample(){const o=qc();let a=e[n-1],u=r[0],l=0;for(;l<n-1;u+=r[++l])if(o<u){a=e[l];break}return a.sample()},pdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].pdf(o);return a},cdf(o){let a=0,u=0;for(;u<n;++u)a+=r[u]*e[u].cdf(o);return a},icdf(){throw Error("Mixture icdf not supported.")}};return s.distributions(e).weights(t)}function Ete(e,t){return t==null&&(t=e??1,e=0),e+(t-e)*qc()}function xte(e,t,n){return n==null&&(n=t??1,t=0),e>=t&&e<=n?1/(n-t):0}function Ste(e,t,n){return n==null&&(n=t??1,t=0),e<t?0:e>n?1:(e-t)/(n-t)}function Tte(e,t,n){return n==null&&(n=t??1,t=0),e>=0&&e<=1?t+e*(n-t):NaN}function rLe(e,t){let n,r;const i={min(s){return arguments.length?(n=s||0,i):n},max(s){return arguments.length?(r=s??1,i):r},sample:()=>Ete(n,r),pdf:s=>xte(s,n,r),cdf:s=>Ste(s,n,r),icdf:s=>Tte(s,n,r)};return t==null&&(t=e??1,e=0),i.min(e).max(t)}function Ate(e,t,n){let r=0,i=0;for(const s of e){const o=n(s);t(s)==null||o==null||isNaN(o)||(r+=(o-r)/++i)}return{coef:[r],predict:()=>r,rSquared:0}}function OR(e,t,n,r){const i=r-e*e,s=Math.abs(i)<1e-24?0:(n-e*t)/i;return[t-s*e,s]}function X4(e,t,n,r){e=e.filter(h=>{let p=t(h),m=n(h);return p!=null&&(p=+p)>=p&&m!=null&&(m=+m)>=m}),r&&e.sort((h,p)=>t(h)-t(p));const i=e.length,s=new Float64Array(i),o=new Float64Array(i);let a=0,u=0,l=0,c,f,d;for(d of e)s[a]=c=+t(d),o[a]=f=+n(d),++a,u+=(c-u)/a,l+=(f-l)/a;for(a=0;a<i;++a)s[a]-=u,o[a]-=l;return[s,o,u,l]}function DR(e,t,n,r){let i=-1,s,o;for(const a of e)s=t(a),o=n(a),s!=null&&(s=+s)>=s&&o!=null&&(o=+o)>=o&&r(s,o,++i)}function pT(e,t,n,r,i){let s=0,o=0;return DR(e,t,n,(a,u)=>{const l=u-i(a),c=u-r;s+=l*l,o+=c*c}),1-s/o}function Cte(e,t,n){let r=0,i=0,s=0,o=0,a=0;DR(e,t,n,(c,f)=>{++a,r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=OR(r,i,s,o),l=c=>u[0]+u[1]*c;return{coef:u,predict:l,rSquared:pT(e,t,n,i,l)}}function iLe(e,t,n){let r=0,i=0,s=0,o=0,a=0;DR(e,t,n,(c,f)=>{++a,c=Math.log(c),r+=(c-r)/a,i+=(f-i)/a,s+=(c*f-s)/a,o+=(c*c-o)/a});const u=OR(r,i,s,o),l=c=>u[0]+u[1]*Math.log(c);return{coef:u,predict:l,rSquared:pT(e,t,n,i,l)}}function sLe(e,t,n){const[r,i,s,o]=X4(e,t,n);let a=0,u=0,l=0,c=0,f=0,d,h,p;DR(e,t,n,(v,b)=>{d=r[f++],h=Math.log(b),p=d*b,a+=(b*h-a)/f,u+=(p-u)/f,l+=(p*h-l)/f,c+=(d*p-c)/f});const[m,g]=OR(u/o,a/o,l/o,c/o),y=v=>Math.exp(m+g*(v-s));return{coef:[Math.exp(m-g*s),g],predict:y,rSquared:pT(e,t,n,o,y)}}function oLe(e,t,n){let r=0,i=0,s=0,o=0,a=0,u=0;DR(e,t,n,(f,d)=>{const h=Math.log(f),p=Math.log(d);++u,r+=(h-r)/u,i+=(p-i)/u,s+=(h*p-s)/u,o+=(h*h-o)/u,a+=(d-a)/u});const l=OR(r,i,s,o),c=f=>l[0]*Math.pow(f,l[1]);return l[0]=Math.exp(l[0]),{coef:l,predict:c,rSquared:pT(e,t,n,a,c)}}function Ite(e,t,n){const[r,i,s,o]=X4(e,t,n),a=r.length;let u=0,l=0,c=0,f=0,d=0,h,p,m,g;for(h=0;h<a;)p=r[h],m=i[h++],g=p*p,u+=(g-u)/h,l+=(g*p-l)/h,c+=(g*g-c)/h,f+=(p*m-f)/h,d+=(g*m-d)/h;const y=c-u*u,v=u*y-l*l,b=(d*u-f*l)/v,w=(f*y-d*l)/v,E=-b*u,T=S=>(S=S-s,b*S*S+w*S+E+o);return{coef:[E-w*s+b*s*s+o,w-2*b*s,b],predict:T,rSquared:pT(e,t,n,o,T)}}function aLe(e,t,n,r){if(r===0)return Ate(e,t,n);if(r===1)return Cte(e,t,n);if(r===2)return Ite(e,t,n);const[i,s,o,a]=X4(e,t,n),u=i.length,l=[],c=[],f=r+1;let d,h,p,m,g;for(d=0;d<f;++d){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d)*s[p];for(l.push(m),g=new Float64Array(f),h=0;h<f;++h){for(p=0,m=0;p<u;++p)m+=Math.pow(i[p],d+h);g[h]=m}c.push(g)}c.push(l);const y=HUt(c),v=b=>{b-=o;let w=a+y[0]+y[1]*b+y[2]*b*b;for(d=3;d<f;++d)w+=y[d]*Math.pow(b,d);return w};return{coef:VUt(f,y,-o,a),predict:v,rSquared:pT(e,t,n,a,v)}}function VUt(e,t,n,r){const i=Array(e);let s,o,a,u;for(s=0;s<e;++s)i[s]=0;for(s=e-1;s>=0;--s)for(a=t[s],u=1,i[s]+=a,o=1;o<=s;++o)u*=(s+1-o)/o,i[s-o]+=a*Math.pow(n,o)*u;return i[0]+=r,i}function HUt(e){const t=e.length-1,n=[];let r,i,s,o,a;for(r=0;r<t;++r){for(o=r,i=r+1;i<t;++i)Math.abs(e[r][i])>Math.abs(e[r][o])&&(o=i);for(s=r;s<t+1;++s)a=e[s][r],e[s][r]=e[s][o],e[s][o]=a;for(i=r+1;i<t;++i)for(s=t;s>=r;s--)e[s][i]-=e[s][r]*e[r][i]/e[r][r]}for(i=t-1;i>=0;--i){for(a=0,s=i+1;s<t;++s)a+=e[s][i]*n[s];n[i]=(e[t][i]-a)/e[i][i]}return n}const cge=2,fge=1e-12;function uLe(e,t,n,r){const[i,s,o,a]=X4(e,t,n,!0),u=i.length,l=Math.max(2,~~(r*u)),c=new Float64Array(u),f=new Float64Array(u),d=new Float64Array(u).fill(1);for(let h=-1;++h<=cge;){const p=[0,l-1];for(let g=0;g<u;++g){const y=i[g],v=p[0],b=p[1],w=y-i[v]>i[b]-y?v:b;let E=0,T=0,S=0,A=0,C=0;const k=1/Math.abs(i[w]-y||1);for(let O=v;O<=b;++O){const $=i[O],F=s[O],M=qUt(Math.abs(y-$)*k)*d[O],B=$*M;E+=M,T+=B,S+=F*M,A+=F*B,C+=$*B}const[N,D]=OR(T/E,S/E,A/E,C/E);c[g]=N+D*y,f[g]=Math.abs(s[g]-c[g]),WUt(i,g+1,p)}if(h===cge)break;const m=ITe(f);if(Math.abs(m)<fge)break;for(let g=0,y,v;g<u;++g)y=f[g]/(6*m),d[g]=y>=1?fge:(v=1-y*y)*v}return GUt(i,c,o,a)}function qUt(e){return(e=1-e*e*e)*e*e}function WUt(e,t,n){const r=e[t];let i=n[0],s=n[1]+1;if(!(s>=e.length))for(;t>i&&e[s]-r<=r-e[i];)n[0]=++i,n[1]=s,++s}function GUt(e,t,n,r){const i=e.length,s=[];let o=0,a=0,u=[],l;for(;o<i;++o)l=e[o]+n,u[0]===l?u[1]+=(t[o]-u[1])/++a:(a=0,u[1]+=r,u=[l,t[o]],s.push(u));return u[1]+=r,s}const YUt=.5*Math.PI/180;function Q4(e,t,n,r){n=n||25,r=Math.max(n,r||200);const i=m=>[m,e(m)],s=t[0],o=t[1],a=o-s,u=a/r,l=[i(s)],c=[];if(n===r){for(let m=1;m<r;++m)l.push(i(s+m/n*a));return l.push(i(o)),l}else{c.push(i(o));for(let m=n;--m>0;)c.push(i(s+m/n*a))}let f=l[0],d=c[c.length-1];const h=1/a,p=KUt(f[1],c);for(;d;){const m=i((f[0]+d[0])/2);m[0]-f[0]>=u&&XUt(f,m,d,h,p)>YUt?c.push(m):(f=d,l.push(d),c.pop()),d=c[c.length-1]}return l}function KUt(e,t){let n=e,r=e;const i=t.length;for(let s=0;s<i;++s){const o=t[s][1];o<n&&(n=o),o>r&&(r=o)}return 1/(r-n)}function XUt(e,t,n,r,i){const s=Math.atan2(i*(n[1]-e[1]),r*(n[0]-e[0])),o=Math.atan2(i*(t[1]-e[1]),r*(t[0]-e[0]));return Math.abs(s-o)}function QUt(e){return t=>{const n=e.length;let r=1,i=String(e[0](t));for(;r<n;++r)i+="|"+e[r](t);return i}}function gq(e){return!e||!e.length?function(){return""}:e.length===1?e[0]:QUt(e)}function lLe(e,t,n){return n||e+(t?"_"+t:"")}const B9=()=>{},JUt={init:B9,add:B9,rem:B9,idx:0},QI={values:{init:e=>e.cell.store=!0,value:e=>e.cell.data.values(),idx:-1},count:{value:e=>e.cell.num},__count__:{value:e=>e.missing+e.valid},missing:{value:e=>e.missing},valid:{value:e=>e.valid},sum:{init:e=>e.sum=0,value:e=>e.valid?e.sum:void 0,add:(e,t)=>e.sum+=+t,rem:(e,t)=>e.sum-=t},product:{init:e=>e.product=1,value:e=>e.valid?e.product:void 0,add:(e,t)=>e.product*=t,rem:(e,t)=>e.product/=t},mean:{init:e=>e.mean=0,value:e=>e.valid?e.mean:void 0,add:(e,t)=>(e.mean_d=t-e.mean,e.mean+=e.mean_d/e.valid),rem:(e,t)=>(e.mean_d=t-e.mean,e.mean-=e.valid?e.mean_d/e.valid:e.mean)},average:{value:e=>e.valid?e.mean:void 0,req:["mean"],idx:1},variance:{init:e=>e.dev=0,value:e=>e.valid>1?e.dev/(e.valid-1):void 0,add:(e,t)=>e.dev+=e.mean_d*(t-e.mean),rem:(e,t)=>e.dev-=e.mean_d*(t-e.mean),req:["mean"],idx:1},variancep:{value:e=>e.valid>1?e.dev/e.valid:void 0,req:["variance"],idx:2},stdev:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid-1)):void 0,req:["variance"],idx:2},stdevp:{value:e=>e.valid>1?Math.sqrt(e.dev/e.valid):void 0,req:["variance"],idx:2},stderr:{value:e=>e.valid>1?Math.sqrt(e.dev/(e.valid*(e.valid-1))):void 0,req:["variance"],idx:2},distinct:{value:e=>e.cell.data.distinct(e.get),req:["values"],idx:3},ci0:{value:e=>e.cell.data.ci0(e.get),req:["values"],idx:3},ci1:{value:e=>e.cell.data.ci1(e.get),req:["values"],idx:3},median:{value:e=>e.cell.data.q2(e.get),req:["values"],idx:3},q1:{value:e=>e.cell.data.q1(e.get),req:["values"],idx:3},q3:{value:e=>e.cell.data.q3(e.get),req:["values"],idx:3},min:{init:e=>e.min=void 0,value:e=>e.min=Number.isNaN(e.min)?e.cell.data.min(e.get):e.min,add:(e,t)=>{(t<e.min||e.min===void 0)&&(e.min=t)},rem:(e,t)=>{t<=e.min&&(e.min=NaN)},req:["values"],idx:4},max:{init:e=>e.max=void 0,value:e=>e.max=Number.isNaN(e.max)?e.cell.data.max(e.get):e.max,add:(e,t)=>{(t>e.max||e.max===void 0)&&(e.max=t)},rem:(e,t)=>{t>=e.max&&(e.max=NaN)},req:["values"],idx:4},argmin:{init:e=>e.argmin=void 0,value:e=>e.argmin||e.cell.data.argmin(e.get),add:(e,t,n)=>{t<e.min&&(e.argmin=n)},rem:(e,t)=>{t<=e.min&&(e.argmin=void 0)},req:["min","values"],idx:3},argmax:{init:e=>e.argmax=void 0,value:e=>e.argmax||e.cell.data.argmax(e.get),add:(e,t,n)=>{t>e.max&&(e.argmax=n)},rem:(e,t)=>{t>=e.max&&(e.argmax=void 0)},req:["max","values"],idx:3},exponential:{init:(e,t)=>{e.exp=0,e.exp_r=t},value:e=>e.valid?e.exp*(1-e.exp_r)/(1-e.exp_r**e.valid):void 0,add:(e,t)=>e.exp=e.exp_r*e.exp+t,rem:(e,t)=>e.exp=(e.exp-t/e.exp_r**(e.valid-1))/e.exp_r},exponentialb:{value:e=>e.valid?e.exp*(1-e.exp_r):void 0,req:["exponential"],idx:1}},$R=Object.keys(QI).filter(e=>e!=="__count__");function ZUt(e,t){return(n,r)=>_n({name:e,aggregate_param:r,out:n||e},JUt,t)}[...$R,"__count__"].forEach(e=>{QI[e]=ZUt(e,QI[e])});function cLe(e,t,n){return QI[e](n,t)}function fLe(e,t){return e.idx-t.idx}function e7t(e){const t={};e.forEach(r=>t[r.name]=r);const n=r=>{r.req&&r.req.forEach(i=>{t[i]||n(t[i]=QI[i]())})};return e.forEach(n),Object.values(t).sort(fLe)}function t7t(){this.valid=0,this.missing=0,this._ops.forEach(e=>e.aggregate_param==null?e.init(this):e.init(this,e.aggregate_param))}function n7t(e,t){if(e==null||e===""){++this.missing;return}e===e&&(++this.valid,this._ops.forEach(n=>n.add(this,e,t)))}function r7t(e,t){if(e==null||e===""){--this.missing;return}e===e&&(--this.valid,this._ops.forEach(n=>n.rem(this,e,t)))}function i7t(e){return this._out.forEach(t=>e[t.out]=t.value(this)),e}function dLe(e,t){const n=t||Aa,r=e7t(e),i=e.slice().sort(fLe);function s(o){this._ops=r,this._out=i,this.cell=o,this.init()}return s.prototype.init=t7t,s.prototype.add=n7t,s.prototype.rem=r7t,s.prototype.set=i7t,s.prototype.get=n,s.fields=e.map(o=>o.out),s}function kte(e){this._key=e?zc(e):Lt,this.reset()}const Ho=kte.prototype;Ho.reset=function(){this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null};Ho.add=function(e){this._add.push(e)};Ho.rem=function(e){this._rem.push(e)};Ho.values=function(){if(this._get=null,this._rem.length===0)return this._add;const e=this._add,t=this._rem,n=this._key,r=e.length,i=t.length,s=Array(r-i),o={};let a,u,l;for(a=0;a<i;++a)o[n(t[a])]=1;for(a=0,u=0;a<r;++a)o[n(l=e[a])]?o[n(l)]=0:s[u++]=l;return this._rem=[],this._add=s};Ho.distinct=function(e){const t=this.values(),n={};let r=t.length,i=0,s;for(;--r>=0;)s=e(t[r])+"",jt(n,s)||(n[s]=1,++i);return i};Ho.extent=function(e){if(this._get!==e||!this._ext){const t=this.values(),n=e3e(t,e);this._ext=[t[n[0]],t[n[1]]],this._get=e}return this._ext};Ho.argmin=function(e){return this.extent(e)[0]||{}};Ho.argmax=function(e){return this.extent(e)[1]||{}};Ho.min=function(e){const t=this.extent(e)[0];return t!=null?e(t):void 0};Ho.max=function(e){const t=this.extent(e)[1];return t!=null?e(t):void 0};Ho.quartile=function(e){return(this._get!==e||!this._q)&&(this._q=hte(this.values(),e),this._get=e),this._q};Ho.q1=function(e){return this.quartile(e)[0]};Ho.q2=function(e){return this.quartile(e)[1]};Ho.q3=function(e){return this.quartile(e)[2]};Ho.ci=function(e){return(this._get!==e||!this._ci)&&(this._ci=J3e(this.values(),1e3,.05,e),this._get=e),this._ci};Ho.ci0=function(e){return this.ci(e)[0]};Ho.ci1=function(e){return this.ci(e)[1]};function Sy(e){Pe.call(this,null,e),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}Sy.Definition={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:$R},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"drop",type:"boolean",default:!0},{name:"cross",type:"boolean",default:!1},{name:"key",type:"field"}]};lt(Sy,Pe,{transform(e,t){const n=this,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.modified();return n.stamp=r.stamp,n.value&&(i||t.modified(n._inputs,!0))?(n._prev=n.value,n.value=i?n.init(e):Object.create(null),t.visit(t.SOURCE,s=>n.add(s))):(n.value=n.value||n.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),r.modifies(n._outputs),n._drop=e.drop!==!1,e.cross&&n._dims.length>1&&(n._drop=!1,n.cross()),t.clean()&&n._drop&&r.clean(!0).runAfter(()=>this.clean()),n.changes(r)},cross(){const e=this,t=e.value,n=e._dnames,r=n.map(()=>({})),i=n.length;function s(a){let u,l,c,f;for(u in a)for(c=a[u].tuple,l=0;l<i;++l)r[l][f=c[n[l]]]=f}s(e._prev),s(t);function o(a,u,l){const c=n[l],f=r[l++];for(const d in f){const h=a?a+"|"+d:d;u[c]=f[d],l<i?o(h,u,l):t[h]||e.cell(h,u)}}o("",{},0)},init(e){const t=this._inputs=[],n=this._outputs=[],r={};function i(v){const b=pt(va(v)),w=b.length;let E=0,T;for(;E<w;++E)r[T=b[E]]||(r[T]=1,t.push(T))}this._dims=pt(e.groupby),this._dnames=this._dims.map(v=>{const b=Zi(v);return i(v),n.push(b),b}),this.cellkey=e.key?e.key:gq(this._dims),this._countOnly=!0,this._counts=[],this._measures=[];const s=e.fields||[null],o=e.ops||["count"],a=e.aggregate_params||[null],u=e.as||[],l=s.length,c={};let f,d,h,p,m,g,y;for(l!==o.length&&Le("Unmatched number of fields and aggregate ops."),y=0;y<l;++y){if(f=s[y],d=o[y],h=a[y]||null,f==null&&d!=="count"&&Le("Null aggregate field specified."),m=Zi(f),g=lLe(d,m,u[y]),n.push(g),d==="count"){this._counts.push(g);continue}p=c[m],p||(i(f),p=c[m]=[],p.field=f,this._measures.push(p)),d!=="count"&&(this._countOnly=!1),p.push(cLe(d,h,g))}return this._measures=this._measures.map(v=>dLe(v,v.field)),Object.create(null)},cellkey:gq(),cell(e,t){let n=this.value[e];return n?n.num===0&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[e]=this.newcell(e,t),this._adds[this._alen++]=n),n},newcell(e,t){const n={key:e,num:0,agg:null,tuple:this.newtuple(t,this._prev&&this._prev[e]),stamp:this.stamp,store:!1};if(!this._countOnly){const r=this._measures,i=r.length;n.agg=Array(i);for(let s=0;s<i;++s)n.agg[s]=new r[s](n)}return n.store&&(n.data=new kte),n},newtuple(e,t){const n=this._dnames,r=this._dims,i=r.length,s={};for(let o=0;o<i;++o)s[n[o]]=r[o](e);return t?H3e(t.tuple,s):xr(s)},clean(){const e=this.value;for(const t in e)e[t].num===0&&delete e[t]},add(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num+=1,this._countOnly)return;n.store&&n.data.add(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].add(r[i].get(e),e)},rem(e){const t=this.cellkey(e),n=this.cell(t,e);if(n.num-=1,this._countOnly)return;n.store&&n.data.rem(e);const r=n.agg;for(let i=0,s=r.length;i<s;++i)r[i].rem(r[i].get(e),e)},celltuple(e){const t=e.tuple,n=this._counts;e.store&&e.data.values();for(let r=0,i=n.length;r<i;++r)t[n[r]]=e.num;if(!this._countOnly){const r=e.agg;for(let i=0,s=r.length;i<s;++i)r[i].set(t)}return t},changes(e){const t=this._adds,n=this._mods,r=this._prev,i=this._drop,s=e.add,o=e.rem,a=e.mod;let u,l,c,f;if(r)for(l in r)u=r[l],(!i||u.num)&&o.push(u.tuple);for(c=0,f=this._alen;c<f;++c)s.push(this.celltuple(t[c])),t[c]=null;for(c=0,f=this._mlen;c<f;++c)u=n[c],(u.num===0&&i?o:a).push(this.celltuple(u)),n[c]=null;return this._alen=this._mlen=0,this._prev=null,e}});const s7t=1e-14;function Rte(e){Pe.call(this,null,e)}Rte.Definition={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number",default:20},{name:"base",type:"number",default:10},{name:"divide",type:"number",array:!0,default:[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"span",type:"number"},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number",default:0},{name:"nice",type:"boolean",default:!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,default:["bin0","bin1"]}]};lt(Rte,Pe,{transform(e,t){const n=e.interval!==!1,r=this._bins(e),i=r.start,s=r.step,o=e.as||["bin0","bin1"],a=o[0],u=o[1];let l;return e.modified()?(t=t.reflow(!0),l=t.SOURCE):l=t.modified(va(e.field))?t.ADD_MOD:t.ADD,t.visit(l,n?c=>{const f=r(c);c[a]=f,c[u]=f==null?null:i+s*(1+(f-i)/s)}:c=>c[a]=r(c)),t.modifies(n?o:a)},_bins(e){if(this.value&&!e.modified())return this.value;const t=e.field,n=Q3e(e),r=n.step;let i=n.start,s=i+Math.ceil((n.stop-i)/r)*r,o,a;(o=e.anchor)!=null&&(a=o-(i+r*Math.floor((o-i)/r)),i+=a,s+=a);const u=function(l){let c=ma(t(l));return c==null?null:c<i?-1/0:c>s?1/0:(c=Math.max(i,Math.min(c,s-r)),i+r*Math.floor(s7t+(c-i)/r))};return u.start=i,u.stop=n.stop,u.step=r,this.value=dl(u,va(t),e.name||"bin_"+Zi(t))}});function hLe(e,t,n){const r=e;let i=t||[],s=n||[],o={},a=0;return{add:u=>s.push(u),remove:u=>o[r(u)]=++a,size:()=>i.length,data:(u,l)=>(a&&(i=i.filter(c=>!o[r(c)]),o={},a=0),l&&u&&i.sort(u),s.length&&(i=u?o3e(u,i,s.sort(u)):i.concat(s),s=[]),i)}}function Nte(e){Pe.call(this,[],e)}Nte.Definition={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]};lt(Nte,Pe,{transform(e,t){const n=t.fork(t.ALL),r=hLe(Lt,this.value,n.materialize(n.ADD).add),i=e.sort,s=t.changed()||i&&(e.modified("sort")||t.modified(i.fields));return n.visit(n.REM,r.remove),this.modified(s),this.value=n.source=r.data(p_(i),s),t.source&&t.source.root&&(this.value.root=t.source.root),n}});function pLe(e){Jr.call(this,null,o7t,e)}lt(pLe,Jr);function o7t(e){return this.value&&!e.modified()?this.value:Xee(e.fields,e.orders)}function Pte(e){Pe.call(this,null,e)}Pte.Definition={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],default:"mixed"},{name:"pattern",type:"string",default:'[\\w"]+'},{name:"stopwords",type:"string",default:""},{name:"as",type:"string",array:!0,length:2,default:["text","count"]}]};function a7t(e,t,n){switch(t){case"upper":e=e.toUpperCase();break;case"lower":e=e.toLowerCase();break}return e.match(n)}lt(Pte,Pe,{transform(e,t){const n=f=>d=>{for(var h=a7t(a(d),e.case,s)||[],p,m=0,g=h.length;m<g;++m)o.test(p=h[m])||f(p)},r=this._parameterCheck(e,t),i=this._counts,s=this._match,o=this._stop,a=e.field,u=e.as||["text","count"],l=n(f=>i[f]=1+(i[f]||0)),c=n(f=>i[f]-=1);return r?t.visit(t.SOURCE,l):(t.visit(t.ADD,l),t.visit(t.REM,c)),this._finish(t,u)},_parameterCheck(e,t){let n=!1;return(e.modified("stopwords")||!this._stop)&&(this._stop=new RegExp("^"+(e.stopwords||"")+"$","i"),n=!0),(e.modified("pattern")||!this._match)&&(this._match=new RegExp(e.pattern||"[\\w']+","g"),n=!0),(e.modified("field")||t.modified(e.field.fields))&&(n=!0),n&&(this._counts={}),n},_finish(e,t){const n=this._counts,r=this._tuples||(this._tuples={}),i=t[0],s=t[1],o=e.fork(e.NO_SOURCE|e.NO_FIELDS);let a,u,l;for(a in n)u=r[a],l=n[a]||0,!u&&l?(r[a]=u=xr({}),u[i]=a,u[s]=l,o.add.push(u)):l===0?(u&&o.rem.push(u),n[a]=null,r[a]=null):u[s]!==l&&(u[s]=l,o.mod.push(u));return o.modifies(t)}});function Ote(e){Pe.call(this,null,e)}Ote.Definition={type:"Cross",metadata:{generates:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,default:["a","b"]}]};lt(Ote,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.as||["a","b"],i=r[0],s=r[1],o=!this.value||t.changed(t.ADD_REM)||e.modified("as")||e.modified("filter");let a=this.value;return o?(a&&(n.rem=a),a=t.materialize(t.SOURCE).source,n.add=this.value=u7t(a,i,s,e.filter||Vc)):n.mod=a,n.source=this.value,n.modifies(r)}});function u7t(e,t,n,r){for(var i=[],s={},o=e.length,a=0,u,l;a<o;++a)for(s[t]=l=e[a],u=0;u<o;++u)s[n]=e[u],r(s)&&(i.push(xr(s)),s={},s[t]=l);return i}const dge={kde:yte,mixture:nLe,normal:gte,lognormal:tLe,uniform:rLe},l7t="distributions",hge="function",c7t="field";function mLe(e,t){const n=e[hge];jt(dge,n)||Le("Unknown distribution function: "+n);const r=dge[n]();for(const i in e)i===c7t?r.data((e.from||t()).map(e[i])):i===l7t?r[i](e[i].map(s=>mLe(s,t))):typeof r[i]===hge&&r[i](e[i]);return r}function Dte(e){Pe.call(this,null,e)}const gLe=[{key:{function:"normal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"lognormal"},params:[{name:"mean",type:"number",default:0},{name:"stdev",type:"number",default:1}]},{key:{function:"uniform"},params:[{name:"min",type:"number",default:0},{name:"max",type:"number",default:1}]},{key:{function:"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number",default:0}]}],f7t={key:{function:"mixture"},params:[{name:"distributions",type:"param",array:!0,params:gLe},{name:"weights",type:"number",array:!0}]};Dte.Definition={type:"Density",metadata:{generates:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"method",type:"string",default:"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:gLe.concat(f7t)},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(Dte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=mLe(e.distribution,d7t(t)),i=e.steps||e.minsteps||25,s=e.steps||e.maxsteps||200;let o=e.method||"pdf";o!=="pdf"&&o!=="cdf"&&Le("Invalid density method: "+o),!e.extent&&!r.data&&Le("Missing density extent parameter."),o=r[o];const a=e.as||["value","density"],u=e.extent||Uh(r.data()),l=Q4(o,u,i,s).map(c=>{const f={};return f[a[0]]=c[0],f[a[1]]=c[1],xr(f)});this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function d7t(e){return()=>e.materialize(e.SOURCE).source}function yLe(e,t){return e?e.map((n,r)=>t[r]||Zi(n)):null}function $te(e,t,n){const r=[],i=f=>f(u);let s,o,a,u,l,c;if(t==null)r.push(e.map(n));else for(s={},o=0,a=e.length;o<a;++o)u=e[o],l=t.map(i),c=s[l],c||(s[l]=c=[],c.dims=l,r.push(c)),c.push(n(u));return r}const vLe="bin";function Mte(e){Pe.call(this,null,e)}Mte.Definition={type:"DotBin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"step",type:"number"},{name:"smooth",type:"boolean",default:!1},{name:"as",type:"string",default:vLe}]};const h7t=(e,t)=>PR(Uh(e,t))/30;lt(Mte,Pe,{transform(e,t){if(this.value&&!(e.modified()||t.changed()))return t;const n=t.materialize(t.SOURCE).source,r=$te(t.source,e.groupby,Aa),i=e.smooth||!1,s=e.field,o=e.step||h7t(n,s),a=p_((p,m)=>s(p)-s(m)),u=e.as||vLe,l=r.length;let c=1/0,f=-1/0,d=0,h;for(;d<l;++d){const p=r[d].sort(a);h=-1;for(const m of Z3e(p,o,i,s))m<c&&(c=m),m>f&&(f=m),p[++h][u]=m}return this.value={start:c,stop:f,step:o},t.reflow(!0).modifies(u)}});function bLe(e){Jr.call(this,null,p7t,e),this.modified(!0)}lt(bLe,Jr);function p7t(e){const t=e.expr;return this.value&&!e.modified("expr")?this.value:dl(n=>t(n,e),va(t),Zi(t))}function Lte(e){Pe.call(this,[void 0,void 0],e)}Lte.Definition={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]};lt(Lte,Pe,{transform(e,t){const n=this.value,r=e.field,i=t.changed()||t.modified(r.fields)||e.modified("field");let s=n[0],o=n[1];if((i||s==null)&&(s=1/0,o=-1/0),t.visit(i?t.SOURCE:t.ADD,a=>{const u=ma(r(a));u!=null&&(u<s&&(s=u),u>o&&(o=u))}),!Number.isFinite(s)||!Number.isFinite(o)){let a=Zi(r);a&&(a=` for field "${a}"`),t.dataflow.warn(`Infinite extent${a}: [${s}, ${o}]`),s=o=void 0}this.value=[s,o]}});function Fte(e,t){Jr.call(this,e),this.parent=t,this.count=0}lt(Fte,Jr,{connect(e){return this.detachSubflow=e.detachSubflow,this.targets().add(e),e.source=this},add(e){this.count+=1,this.value.add.push(e)},rem(e){this.count-=1,this.value.rem.push(e)},mod(e){this.value.mod.push(e)},init(e){this.value.init(e,e.NO_SOURCE)},evaluate(){return this.value}});function J4(e){Pe.call(this,{},e),this._keys=fT();const t=this._targets=[];t.active=0,t.forEach=n=>{for(let r=0,i=t.active;r<i;++r)n(t[r],r,t)}}lt(J4,Pe,{activate(e){this._targets[this._targets.active++]=e},subflow(e,t,n,r){const i=this.value;let s=jt(i,e)&&i[e],o,a;return s?s.value.stamp<n.stamp&&(s.init(n),this.activate(s)):(a=r||(a=this._group[e])&&a.tuple,o=n.dataflow,s=new Fte(n.fork(n.NO_SOURCE),this),o.add(s).connect(t(o,e,a)),i[e]=s,this.activate(s)),s},clean(){const e=this.value;let t=0;for(const n in e)if(e[n].count===0){const r=e[n].detachSubflow;r&&r(),delete e[n],++t}if(t){const n=this._targets.filter(r=>r&&r.count>0);this.initTargets(n)}},initTargets(e){const t=this._targets,n=t.length,r=e?e.length:0;let i=0;for(;i<r;++i)t[i]=e[i];for(;i<n&&t[i]!=null;++i)t[i]=null;t.active=r},transform(e,t){const n=t.dataflow,r=e.key,i=e.subflow,s=this._keys,o=e.modified("key"),a=u=>this.subflow(u,i,t);return this._group=e.group||{},this.initTargets(),t.visit(t.REM,u=>{const l=Lt(u),c=s.get(l);c!==void 0&&(s.delete(l),a(c).rem(u))}),t.visit(t.ADD,u=>{const l=r(u);s.set(Lt(u),l),a(l).add(u)}),o||t.modified(r.fields)?t.visit(t.MOD,u=>{const l=Lt(u),c=s.get(l),f=r(u);c===f?a(f).mod(u):(s.set(l,f),a(c).rem(u),a(f).add(u))}):t.changed(t.MOD)&&t.visit(t.MOD,u=>{a(s.get(Lt(u))).mod(u)}),o&&t.visit(t.REFLOW,u=>{const l=Lt(u),c=s.get(l),f=r(u);c!==f&&(s.set(l,f),a(c).rem(u),a(f).add(u))}),t.clean()?n.runAfter(()=>{this.clean(),s.clean()}):s.empty>n.cleanThreshold&&n.runAfter(s.clean),t}});function _Le(e){Jr.call(this,null,m7t,e)}lt(_Le,Jr);function m7t(e){return this.value&&!e.modified()?this.value:je(e.name)?pt(e.name).map(t=>zc(t)):zc(e.name,e.as)}function jte(e){Pe.call(this,fT(),e)}jte.Definition={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]};lt(jte,Pe,{transform(e,t){const n=t.dataflow,r=this.value,i=t.fork(),s=i.add,o=i.rem,a=i.mod,u=e.expr;let l=!0;t.visit(t.REM,f=>{const d=Lt(f);r.has(d)?r.delete(d):o.push(f)}),t.visit(t.ADD,f=>{u(f,e)?s.push(f):r.set(Lt(f),1)});function c(f){const d=Lt(f),h=u(f,e),p=r.get(d);h&&p?(r.delete(d),s.push(f)):!h&&!p?(r.set(d,1),o.push(f)):l&&h&&!p&&a.push(f)}return t.visit(t.MOD,c),e.modified()&&(l=!1,t.visit(t.REFLOW,c)),r.empty>n.cleanThreshold&&n.runAfter(r.clean),i}});function Bte(e){Pe.call(this,[],e)}Bte.Definition={type:"Flatten",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"index",type:"string"},{name:"as",type:"string",array:!0}]};lt(Bte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yLe(r,e.as||[]),s=e.index||null,o=i.length;return n.rem=this.value,t.visit(t.SOURCE,a=>{const u=r.map(p=>p(a)),l=u.reduce((p,m)=>Math.max(p,m.length),0);let c=0,f,d,h;for(;c<l;++c){for(d=lte(a),f=0;f<o;++f)d[i[f]]=(h=u[f][c])==null?null:h;s&&(d[s]=c),n.add.push(d)}}),this.value=n.source=n.add,s&&n.modifies(s),n.modifies(i)}});function Ute(e){Pe.call(this,[],e)}Ute.Definition={type:"Fold",metadata:{generates:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,default:["key","value"]}]};lt(Ute,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=r.map(Zi),s=e.as||["key","value"],o=s[0],a=s[1],u=r.length;return n.rem=this.value,t.visit(t.SOURCE,l=>{for(let c=0,f;c<u;++c)f=lte(l),f[o]=i[c],f[a]=r[c](l),n.add.push(f)}),this.value=n.source=n.add,n.modifies(s)}});function zte(e){Pe.call(this,null,e)}zte.Definition={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]};lt(zte,Pe,{transform(e,t){const n=e.expr,r=e.as,i=e.modified(),s=e.initonly?t.ADD:i?t.SOURCE:t.modified(n.fields)||t.modified(r)?t.ADD_MOD:t.ADD;return i&&(t=t.materialize().reflow(!0)),e.initonly||t.modifies(r),t.visit(s,o=>o[r]=n(o,e))}});function wLe(e){Pe.call(this,[],e)}lt(wLe,Pe,{transform(e,t){const n=t.fork(t.ALL),r=e.generator;let i=this.value,s=e.size-i.length,o,a,u;if(s>0){for(o=[];--s>=0;)o.push(u=xr(r(e))),i.push(u);n.add=n.add.length?n.materialize(n.ADD).add.concat(o):o}else a=i.slice(0,-s),n.rem=n.rem.length?n.materialize(n.REM).rem.concat(a):a,i=i.slice(-s);return n.source=this.value=i,n}});const YP={value:"value",median:ITe,mean:dct,min:Rz,max:cm},g7t=[];function Vte(e){Pe.call(this,[],e)}Vte.Definition={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"key",type:"field",required:!0},{name:"keyvals",array:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"enum",default:"value",values:["value","mean","median","max","min"]},{name:"value",default:0}]};function y7t(e){var t=e.method||YP.value,n;if(YP[t]==null)Le("Unrecognized imputation method: "+t);else return t===YP.value?(n=e.value!==void 0?e.value:0,()=>n):YP[t]}function v7t(e){const t=e.field;return n=>n?t(n):NaN}lt(Vte,Pe,{transform(e,t){var n=t.fork(t.ALL),r=y7t(e),i=v7t(e),s=Zi(e.field),o=Zi(e.key),a=(e.groupby||[]).map(Zi),u=b7t(t.source,e.groupby,e.key,e.keyvals),l=[],c=this.value,f=u.domain.length,d,h,p,m,g,y,v,b,w,E;for(g=0,b=u.length;g<b;++g)for(d=u[g],p=d.values,h=NaN,v=0;v<f;++v)if(d[v]==null){for(m=u.domain[v],E={_impute:!0},y=0,w=p.length;y<w;++y)E[a[y]]=p[y];E[o]=m,E[s]=Number.isNaN(h)?h=r(d,i):h,l.push(xr(E))}return l.length&&(n.add=n.materialize(n.ADD).add.concat(l)),c.length&&(n.rem=n.materialize(n.REM).rem.concat(c)),this.value=l,n}});function b7t(e,t,n,r){var i=y=>y(g),s=[],o=r?r.slice():[],a={},u={},l,c,f,d,h,p,m,g;for(o.forEach((y,v)=>a[y]=v+1),d=0,m=e.length;d<m;++d)g=e[d],p=n(g),h=a[p]||(a[p]=o.push(p)),c=(l=t?t.map(i):g7t)+"",(f=u[c])||(f=u[c]=[],s.push(f),f.values=l),f[h-1]=g;return s.domain=o,s}function Hte(e){Sy.call(this,e)}Hte.Definition={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"ops",type:"enum",array:!0,values:$R},{name:"as",type:"string",null:!0,array:!0},{name:"key",type:"field"}]};lt(Hte,Sy,{transform(e,t){const n=this,r=e.modified();let i;return n.value&&(r||t.modified(n._inputs,!0))?(i=n.value=r?n.init(e):{},t.visit(t.SOURCE,s=>n.add(s))):(i=n.value=n.value||this.init(e),t.visit(t.REM,s=>n.rem(s)),t.visit(t.ADD,s=>n.add(s))),n.changes(),t.visit(t.SOURCE,s=>{_n(s,i[n.cellkey(s)].tuple)}),t.reflow(r).modifies(this._outputs)},changes(){const e=this._adds,t=this._mods;let n,r;for(n=0,r=this._alen;n<r;++n)this.celltuple(e[n]),e[n]=null;for(n=0,r=this._mlen;n<r;++n)this.celltuple(t[n]),t[n]=null;this._alen=this._mlen=0}});function qte(e){Pe.call(this,null,e)}qte.Definition={type:"KDE",metadata:{generates:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"cumulative",type:"boolean",default:!1},{name:"counts",type:"boolean",default:!1},{name:"bandwidth",type:"number",default:0},{name:"extent",type:"number",array:!0,length:2},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"steps",type:"number"},{name:"minsteps",type:"number",default:25},{name:"maxsteps",type:"number",default:200},{name:"as",type:"string",array:!0,default:["value","density"]}]};lt(qte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=$te(r,e.groupby,e.field),s=(e.groupby||[]).map(Zi),o=e.bandwidth,a=e.cumulative?"cdf":"pdf",u=e.as||["value","density"],l=[];let c=e.extent,f=e.steps||e.minsteps||25,d=e.steps||e.maxsteps||200;a!=="pdf"&&a!=="cdf"&&Le("Invalid density method: "+a),e.resolve==="shared"&&(c||(c=Uh(r,e.field)),f=d=e.steps||d),i.forEach(h=>{const p=yte(h,o)[a],m=e.counts?h.length:1,g=c||Uh(h);Q4(p,g,f,d).forEach(y=>{const v={};for(let b=0;b<s.length;++b)v[s[b]]=h.dims[b];v[u[0]]=y[0],v[u[1]]=y[1]*m,l.push(xr(v))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=l}return n}});function ELe(e){Jr.call(this,null,_7t,e)}lt(ELe,Jr);function _7t(e){return this.value&&!e.modified()?this.value:Jee(e.fields,e.flat)}function xLe(e){Pe.call(this,[],e),this._pending=null}lt(xLe,Pe,{transform(e,t){const n=t.dataflow;return this._pending?U9(this,t,this._pending):w7t(e)?t.StopPropagation:e.values?U9(this,t,n.parse(e.values,e.format)):e.async?{async:n.request(e.url,e.format).then(i=>(this._pending=pt(i.data),s=>s.touch(this)))}:n.request(e.url,e.format).then(r=>U9(this,t,pt(r.data)))}});function w7t(e){return e.modified("async")&&!(e.modified("values")||e.modified("url")||e.modified("format"))}function U9(e,t,n){n.forEach(xr);const r=t.fork(t.NO_FIELDS&t.NO_SOURCE);return r.rem=e.value,e.value=r.source=r.add=n,e._pending=null,r.rem.length&&r.clean(!0),r}function Wte(e){Pe.call(this,{},e)}Wte.Definition={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default",default:null}]};lt(Wte,Pe,{transform(e,t){const n=e.fields,r=e.index,i=e.values,s=e.default==null?null:e.default,o=e.modified(),a=n.length;let u=o?t.SOURCE:t.ADD,l=t,c=e.as,f,d,h;return i?(d=i.length,a>1&&!c&&Le('Multi-field lookup requires explicit "as" parameter.'),c&&c.length!==a*d&&Le('The "as" parameter has too few output field names.'),c=c||i.map(Zi),f=function(p){for(var m=0,g=0,y,v;m<a;++m)if(v=r.get(n[m](p)),v==null)for(y=0;y<d;++y,++g)p[c[g]]=s;else for(y=0;y<d;++y,++g)p[c[g]]=i[y](v)}):(c||Le("Missing output field names."),f=function(p){for(var m=0,g;m<a;++m)g=r.get(n[m](p)),p[c[m]]=g??s}),o?l=t.reflow(!0):(h=n.some(p=>t.modified(p.fields)),u|=h?t.MOD:0),t.visit(u,f),l.modifies(c)}});function SLe(e){Jr.call(this,null,E7t,e)}lt(SLe,Jr);function E7t(e){if(this.value&&!e.modified())return this.value;const t=e.extents,n=t.length;let r=1/0,i=-1/0,s,o;for(s=0;s<n;++s)o=t[s],o[0]<r&&(r=o[0]),o[1]>i&&(i=o[1]);return[r,i]}function TLe(e){Jr.call(this,null,x7t,e)}lt(TLe,Jr);function x7t(e){return this.value&&!e.modified()?this.value:e.values.reduce((t,n)=>t.concat(n),[])}function ALe(e){Pe.call(this,null,e)}lt(ALe,Pe,{transform(e,t){return this.modified(e.modified()),this.value=e,t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Gte(e){Sy.call(this,e)}Gte.Definition={type:"Pivot",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"value",type:"field",required:!0},{name:"op",type:"enum",values:$R,default:"sum"},{name:"limit",type:"number",default:0},{name:"key",type:"field"}]};lt(Gte,Sy,{_transform:Sy.prototype.transform,transform(e,t){return this._transform(S7t(e,t),t)}});function S7t(e,t){const n=e.field,r=e.value,i=(e.op==="count"?"__count__":e.op)||"sum",s=va(n).concat(va(r)),o=A7t(n,e.limit||0,t);return t.changed()&&e.set("__pivot__",null,null,!0),{key:e.key,groupby:e.groupby,ops:o.map(()=>i),fields:o.map(a=>T7t(a,n,r,s)),as:o.map(a=>a+""),modified:e.modified.bind(e)}}function T7t(e,t,n,r){return dl(i=>t(i)===e?n(i):NaN,r,e+"")}function A7t(e,t,n){const r={},i=[];return n.visit(n.SOURCE,s=>{const o=e(s);r[o]||(r[o]=1,i.push(o))}),i.sort(j4),t?i.slice(0,t):i}function CLe(e){J4.call(this,e)}lt(CLe,J4,{transform(e,t){const n=e.subflow,r=e.field,i=s=>this.subflow(Lt(s),n,t,s);return(e.modified("field")||r&&t.modified(va(r)))&&Le("PreFacet does not support field modification."),this.initTargets(),r?(t.visit(t.MOD,s=>{const o=i(s);r(s).forEach(a=>o.mod(a))}),t.visit(t.ADD,s=>{const o=i(s);r(s).forEach(a=>o.add(xr(a)))}),t.visit(t.REM,s=>{const o=i(s);r(s).forEach(a=>o.rem(a))})):(t.visit(t.MOD,s=>i(s).mod(s)),t.visit(t.ADD,s=>i(s).add(s)),t.visit(t.REM,s=>i(s).rem(s))),t.clean()&&t.runAfter(()=>this.clean()),t}});function Yte(e){Pe.call(this,null,e)}Yte.Definition={type:"Project",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0},{name:"as",type:"string",null:!0,array:!0}]};lt(Yte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.fields,i=yLe(e.fields,e.as||[]),s=r?(a,u)=>C7t(a,u,r,i):H4;let o;return this.value?o=this.value:(t=t.addAll(),o=this.value={}),t.visit(t.REM,a=>{const u=Lt(a);n.rem.push(o[u]),o[u]=null}),t.visit(t.ADD,a=>{const u=s(a,xr({}));o[Lt(a)]=u,n.add.push(u)}),t.visit(t.MOD,a=>{n.mod.push(s(a,o[Lt(a)]))}),n}});function C7t(e,t,n,r){for(let i=0,s=n.length;i<s;++i)t[r[i]]=n[i](e);return t}function ILe(e){Pe.call(this,null,e)}lt(ILe,Pe,{transform(e,t){return this.value=e.value,e.modified("value")?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Kte(e){Pe.call(this,null,e)}Kte.Definition={type:"Quantile",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"field",type:"field",required:!0},{name:"probs",type:"number",array:!0},{name:"step",type:"number",default:.01},{name:"as",type:"string",array:!0,default:["prob","value"]}]};const I7t=1e-14;lt(Kte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=e.as||["prob","value"];if(this.value&&!e.modified()&&!t.changed())return n.source=this.value,n;const i=t.materialize(t.SOURCE).source,s=$te(i,e.groupby,e.field),o=(e.groupby||[]).map(Zi),a=[],u=e.step||.01,l=e.probs||ju(u/2,1-I7t,u),c=l.length;return s.forEach(f=>{const d=dte(f,l);for(let h=0;h<c;++h){const p={};for(let m=0;m<o.length;++m)p[o[m]]=f.dims[m];p[r[0]]=l[h],p[r[1]]=d[h],a.push(xr(p))}}),this.value&&(n.rem=this.value),this.value=n.add=n.source=a,n}});function kLe(e){Pe.call(this,null,e)}lt(kLe,Pe,{transform(e,t){let n,r;return this.value?r=this.value:(n=t=t.addAll(),r=this.value={}),e.derive&&(n=t.fork(t.NO_SOURCE),t.visit(t.REM,i=>{const s=Lt(i);n.rem.push(r[s]),r[s]=null}),t.visit(t.ADD,i=>{const s=lte(i);r[Lt(i)]=s,n.add.push(s)}),t.visit(t.MOD,i=>{const s=r[Lt(i)];for(const o in i)s[o]=i[o],n.modifies(o);n.mod.push(s)})),n}});function Xte(e){Pe.call(this,[],e),this.count=0}Xte.Definition={type:"Sample",metadata:{},params:[{name:"size",type:"number",default:1e3}]};lt(Xte,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE),r=e.modified("size"),i=e.size,s=this.value.reduce((c,f)=>(c[Lt(f)]=1,c),{});let o=this.value,a=this.count,u=0;function l(c){let f,d;o.length<i?o.push(c):(d=~~((a+1)*qc()),d<o.length&&d>=u&&(f=o[d],s[Lt(f)]&&n.rem.push(f),o[d]=c)),++a}if(t.rem.length&&(t.visit(t.REM,c=>{const f=Lt(c);s[f]&&(s[f]=-1,n.rem.push(c)),--a}),o=o.filter(c=>s[Lt(c)]!==-1)),(t.rem.length||r)&&o.length<i&&t.source&&(u=a=o.length,t.visit(t.SOURCE,c=>{s[Lt(c)]||l(c)}),u=-1),r&&o.length>i){const c=o.length-i;for(let f=0;f<c;++f)s[Lt(o[f])]=-1,n.rem.push(o[f]);o=o.slice(c)}return t.mod.length&&t.visit(t.MOD,c=>{s[Lt(c)]&&n.mod.push(c)}),t.add.length&&t.visit(t.ADD,l),(t.add.length||u<0)&&(n.add=o.filter(c=>!s[Lt(c)])),this.count=a,this.value=n.source=o,n}});function Qte(e){Pe.call(this,null,e)}Qte.Definition={type:"Sequence",metadata:{generates:!0,changes:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number",default:1},{name:"as",type:"string",default:"data"}]};lt(Qte,Pe,{transform(e,t){if(this.value&&!e.modified())return;const n=t.materialize().fork(t.MOD),r=e.as||"data";return n.rem=this.value?t.rem.concat(this.value):t.rem,this.value=ju(e.start,e.stop,e.step||1).map(i=>{const s={};return s[r]=i,xr(s)}),n.add=t.add.concat(this.value),n}});function RLe(e){Pe.call(this,null,e),this.modified(!0)}lt(RLe,Pe,{transform(e,t){return this.value=t.source,t.changed()?t.fork(t.NO_SOURCE|t.NO_FIELDS):t.StopPropagation}});function Jte(e){Pe.call(this,null,e)}const NLe=["unit0","unit1"];Jte.Definition={type:"TimeUnit",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"interval",type:"boolean",default:!0},{name:"units",type:"enum",values:nte,array:!0},{name:"step",type:"number",default:1},{name:"maxbins",type:"number",default:40},{name:"extent",type:"date",array:!0},{name:"timezone",type:"enum",default:"local",values:["local","utc"]},{name:"as",type:"string",array:!0,length:2,default:NLe}]};lt(Jte,Pe,{transform(e,t){const n=e.field,r=e.interval!==!1,i=e.timezone==="utc",s=this._floor(e,t),o=(i?hT:dT)(s.unit).offset,a=e.as||NLe,u=a[0],l=a[1],c=s.step;let f=s.start||1/0,d=s.stop||-1/0,h=t.ADD;return(e.modified()||t.changed(t.REM)||t.modified(va(n)))&&(t=t.reflow(!0),h=t.SOURCE,f=1/0,d=-1/0),t.visit(h,p=>{const m=n(p);let g,y;m==null?(p[u]=null,r&&(p[l]=null)):(p[u]=g=y=s(m),r&&(p[l]=y=o(g,c)),g<f&&(f=g),y>d&&(d=y))}),s.start=f,s.stop=d,t.modifies(r?a:u)},_floor(e,t){const n=e.timezone==="utc",{units:r,step:i}=e.units?{units:e.units,step:e.step||1}:I3e({extent:e.extent||Uh(t.materialize(t.SOURCE).source,e.field),maxbins:e.maxbins}),s=rte(r),o=this.value||{},a=(n?b3e:v3e)(s,i);return a.unit=Zn(s),a.units=s,a.step=i,a.start=o.start,a.stop=o.stop,this.value=a}});function PLe(e){Pe.call(this,fT(),e)}lt(PLe,Pe,{transform(e,t){const n=t.dataflow,r=e.field,i=this.value,s=a=>i.set(r(a),a);let o=!0;return e.modified("field")||t.modified(r.fields)?(i.clear(),t.visit(t.SOURCE,s)):t.changed()?(t.visit(t.REM,a=>i.delete(r(a))),t.visit(t.ADD,s)):o=!1,this.modified(o),i.empty>n.cleanThreshold&&n.runAfter(i.clean),t.fork()}});function OLe(e){Pe.call(this,null,e)}lt(OLe,Pe,{transform(e,t){(!this.value||e.modified("field")||e.modified("sort")||t.changed()||e.sort&&t.modified(e.sort.fields))&&(this.value=(e.sort?t.source.slice().sort(p_(e.sort)):t.source).map(e.field))}});function k7t(e,t,n,r){const i=JI[e](t,n);return{init:i.init||i0,update:function(s,o){o[r]=i.next(s)}}}const JI={row_number:function(){return{next:e=>e.index+1}},rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?e=n+1:e}}},dense_rank:function(){let e;return{init:()=>e=1,next:t=>{const n=t.index,r=t.data;return n&&t.compare(r[n-1],r[n])?++e:e}}},percent_rank:function(){const e=JI.rank(),t=e.next;return{init:e.init,next:n=>(t(n)-1)/(n.data.length-1)}},cume_dist:function(){let e;return{init:()=>e=0,next:t=>{const n=t.data,r=t.compare;let i=t.index;if(e<i){for(;i+1<n.length&&!r(n[i],n[i+1]);)++i;e=i}return(1+e)/n.length}}},ntile:function(e,t){t=+t,t>0||Le("ntile num must be greater than zero.");const n=JI.cume_dist(),r=n.next;return{init:n.init,next:i=>Math.ceil(t*r(i))}},lag:function(e,t){return t=+t||1,{next:n=>{const r=n.index-t;return r>=0?e(n.data[r]):null}}},lead:function(e,t){return t=+t||1,{next:n=>{const r=n.index+t,i=n.data;return r<i.length?e(i[r]):null}}},first_value:function(e){return{next:t=>e(t.data[t.i0])}},last_value:function(e){return{next:t=>e(t.data[t.i1-1])}},nth_value:function(e,t){return t=+t,t>0||Le("nth_value nth must be greater than zero."),{next:n=>{const r=n.i0+(t-1);return r<n.i1?e(n.data[r]):null}}},prev_value:function(e){let t;return{init:()=>t=null,next:n=>{const r=e(n.data[n.index]);return r!=null?t=r:t}}},next_value:function(e){let t,n;return{init:()=>(t=null,n=-1),next:r=>{const i=r.data;return r.index<=n?t:(n=R7t(e,i,r.index))<0?(n=i.length,t=null):t=e(i[n])}}}};function R7t(e,t,n){for(let r=t.length;n<r;++n)if(e(t[n])!=null)return n;return-1}const N7t=Object.keys(JI);function DLe(e){const t=pt(e.ops),n=pt(e.fields),r=pt(e.params),i=pt(e.aggregate_params),s=pt(e.as),o=this.outputs=[],a=this.windows=[],u={},l={},c=[],f=[];let d=!0;function h(p){pt(va(p)).forEach(m=>u[m]=1)}h(e.sort),t.forEach((p,m)=>{const g=n[m],y=r[m],v=i[m]||null,b=Zi(g),w=lLe(p,b,s[m]);if(h(g),o.push(w),jt(JI,p))a.push(k7t(p,g,y,w));else{if(g==null&&p!=="count"&&Le("Null aggregate field specified."),p==="count"){c.push(w);return}d=!1;let E=l[b];E||(E=l[b]=[],E.field=g,f.push(E)),E.push(cLe(p,v,w))}}),(c.length||f.length)&&(this.cell=P7t(f,c,d)),this.inputs=Object.keys(u)}const $Le=DLe.prototype;$Le.init=function(){this.windows.forEach(e=>e.init()),this.cell&&this.cell.init()};$Le.update=function(e,t){const n=this.cell,r=this.windows,i=e.data,s=r&&r.length;let o;if(n){for(o=e.p0;o<e.i0;++o)n.rem(i[o]);for(o=e.p1;o<e.i1;++o)n.add(i[o]);n.set(t)}for(o=0;o<s;++o)r[o].update(e,t)};function P7t(e,t,n){e=e.map(u=>dLe(u,u.field));const r={num:0,agg:null,store:!1,count:t};if(!n)for(var i=e.length,s=r.agg=Array(i),o=0;o<i;++o)s[o]=new e[o](r);if(r.store)var a=r.data=new kte;return r.add=function(u){if(r.num+=1,!n){a&&a.add(u);for(let l=0;l<i;++l)s[l].add(s[l].get(u),u)}},r.rem=function(u){if(r.num-=1,!n){a&&a.rem(u);for(let l=0;l<i;++l)s[l].rem(s[l].get(u),u)}},r.set=function(u){let l,c;for(a&&a.values(),l=0,c=t.length;l<c;++l)u[t[l]]=r.num;if(!n)for(l=0,c=s.length;l<c;++l)s[l].set(u)},r.init=function(){r.num=0,a&&a.reset();for(let u=0;u<i;++u)s[u].init()},r}function Zte(e){Pe.call(this,{},e),this._mlen=0,this._mods=[]}Zte.Definition={type:"Window",metadata:{modifies:!0},params:[{name:"sort",type:"compare"},{name:"groupby",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:N7t.concat($R)},{name:"params",type:"number",null:!0,array:!0},{name:"aggregate_params",type:"number",null:!0,array:!0},{name:"fields",type:"field",null:!0,array:!0},{name:"as",type:"string",null:!0,array:!0},{name:"frame",type:"number",null:!0,array:!0,length:2,default:[null,0]},{name:"ignorePeers",type:"boolean",default:!1}]};lt(Zte,Pe,{transform(e,t){this.stamp=t.stamp;const n=e.modified(),r=p_(e.sort),i=gq(e.groupby),s=a=>this.group(i(a));let o=this.state;(!o||n)&&(o=this.state=new DLe(e)),n||t.modified(o.inputs)?(this.value={},t.visit(t.SOURCE,a=>s(a).add(a))):(t.visit(t.REM,a=>s(a).remove(a)),t.visit(t.ADD,a=>s(a).add(a)));for(let a=0,u=this._mlen;a<u;++a)O7t(this._mods[a],o,r,e);return this._mlen=0,this._mods=[],t.reflow(n).modifies(o.outputs)},group(e){let t=this.value[e];return t||(t=this.value[e]=hLe(Lt),t.stamp=-1),t.stamp<this.stamp&&(t.stamp=this.stamp,this._mods[this._mlen++]=t),t}});function O7t(e,t,n,r){const i=r.sort,s=i&&!r.ignorePeers,o=r.frame||[null,0],a=e.data(n),u=a.length,l=s?NS(i):null,c={i0:0,i1:0,p0:0,p1:0,index:0,data:a,compare:i||Ca(-1)};t.init();for(let f=0;f<u;++f)D7t(c,o,f,u),s&&$7t(c,l),t.update(c,a[f])}function D7t(e,t,n,r){e.p0=e.i0,e.p1=e.i1,e.i0=t[0]==null?0:Math.max(0,n-Math.abs(t[0])),e.i1=t[1]==null?r:Math.min(r,n+Math.abs(t[1])+1),e.index=n}function $7t(e,t){const n=e.i0,r=e.i1-1,i=e.compare,s=e.data,o=s.length-1;n>0&&!i(s[n],s[n-1])&&(e.i0=t.left(s,s[n])),r<o&&!i(s[r],s[r+1])&&(e.i1=t.right(s,s[r]))}const M7t=Object.freeze(Object.defineProperty({__proto__:null,aggregate:Sy,bin:Rte,collect:Nte,compare:pLe,countpattern:Pte,cross:Ote,density:Dte,dotbin:Mte,expression:bLe,extent:Lte,facet:J4,field:_Le,filter:jte,flatten:Bte,fold:Ute,formula:zte,generate:wLe,impute:Vte,joinaggregate:Hte,kde:qte,key:ELe,load:xLe,lookup:Wte,multiextent:SLe,multivalues:TLe,params:ALe,pivot:Gte,prefacet:CLe,project:Yte,proxy:ILe,quantile:Kte,relay:kLe,sample:Xte,sequence:Qte,sieve:RLe,subflow:Fte,timeunit:Jte,tupleindex:PLe,values:OLe,window:Zte},Symbol.toStringTag,{value:"Module"}));function V0(e,t){if(typeof document<"u"&&document.createElement){const n=document.createElement("canvas");if(n&&n.getContext)return n.width=e,n.height=t,n}return null}const L7t=()=>typeof Image<"u"?Image:null;function ene(e,t,n){const r=e-t+n*2;return e?r>0?r:1:0}const F7t="identity",jx="linear",Ym="log",MR="pow",LR="sqrt",Z4="symlog",xb="time",Sb="utc",Th="sequential",mT="diverging",Bx="quantile",e5="quantize",t5="threshold",tne="ordinal",yq="point",MLe="band",nne="bin-ordinal",Gs="continuous",FR="discrete",jR="discretizing",sf="interpolating",rne="temporal";function j7t(e){return function(t){let n=t[0],r=t[1],i;return r<n&&(i=n,n=r,r=i),[e.invert(n),e.invert(r)]}}function B7t(e){return function(t){const n=e.range();let r=t[0],i=t[1],s=-1,o,a,u,l;for(i<r&&(a=r,r=i,i=a),u=0,l=n.length;u<l;++u)n[u]>=r&&n[u]<=i&&(s<0&&(s=u),o=u);if(!(s<0))return r=e.invertExtent(n[s]),i=e.invertExtent(n[o]),[r[0]===void 0?r[1]:r[0],i[1]===void 0?i[0]:i[1]]}}function ine(){const e=i_().unknown(void 0),t=e.domain,n=e.range;let r=[0,1],i,s,o=!1,a=0,u=0,l=.5;delete e.unknown;function c(){const f=t().length,d=r[1]<r[0],h=r[1-d],p=ene(f,a,u);let m=r[d-0];i=(h-m)/(p||1),o&&(i=Math.floor(i)),m+=(h-m-i*(f-a))*l,s=i*(1-a),o&&(m=Math.round(m),s=Math.round(s));const g=ju(f).map(y=>m+i*y);return n(d?g.reverse():g)}return e.domain=function(f){return arguments.length?(t(f),c()):t()},e.range=function(f){return arguments.length?(r=[+f[0],+f[1]],c()):r.slice()},e.rangeRound=function(f){return r=[+f[0],+f[1]],o=!0,c()},e.bandwidth=function(){return s},e.step=function(){return i},e.round=function(f){return arguments.length?(o=!!f,c()):o},e.padding=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),a=u,c()):a},e.paddingInner=function(f){return arguments.length?(a=Math.max(0,Math.min(1,f)),c()):a},e.paddingOuter=function(f){return arguments.length?(u=Math.max(0,Math.min(1,f)),c()):u},e.align=function(f){return arguments.length?(l=Math.max(0,Math.min(1,f)),c()):l},e.invertRange=function(f){if(f[0]==null||f[1]==null)return;const d=r[1]<r[0],h=d?n().reverse():n(),p=h.length-1;let m=+f[0],g=+f[1],y,v,b;if(!(m!==m||g!==g)&&(g<m&&(b=m,m=g,g=b),!(g<h[0]||m>r[1-d])))return y=Math.max(0,ey(h,m)-1),v=m===g?y:ey(h,g)-1,m-h[y]>s+1e-10&&++y,d&&(b=y,y=p-v,v=p-b),y>v?void 0:t().slice(y,v+1)},e.invert=function(f){const d=e.invertRange([f,f]);return d&&d[0]},e.copy=function(){return ine().domain(t()).range(r).round(o).paddingInner(a).paddingOuter(u).align(l)},c()}function LLe(e){const t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,e.copy=function(){return LLe(t())},e}function U7t(){return LLe(ine().paddingInner(1))}var z7t=Array.prototype.map;function V7t(e){return z7t.call(e,ma)}const H7t=Array.prototype.slice;function FLe(){let e=[],t=[];function n(r){return r==null||r!==r?void 0:t[(ey(e,r)-1)%t.length]}return n.domain=function(r){return arguments.length?(e=V7t(r),n):e.slice()},n.range=function(r){return arguments.length?(t=H7t.call(r),n):t.slice()},n.tickFormat=function(r,i){return kCe(e[0],Zn(e),r??10,i)},n.copy=function(){return FLe().domain(n.domain()).range(n.range())},n}const Y3=new Map,jLe=Symbol("vega_scale");function BLe(e){return e[jLe]=!0,e}function q7t(e){return e&&e[jLe]===!0}function W7t(e,t,n){const r=function(){const s=t();return s.invertRange||(s.invertRange=s.invert?j7t(s):s.invertExtent?B7t(s):void 0),s.type=e,BLe(s)};return r.metadata=id(pt(n)),r}function vr(e,t,n){return arguments.length>1?(Y3.set(e,W7t(e,t,n)),this):ULe(e)?Y3.get(e):void 0}vr(F7t,RCe);vr(jx,Bc,Gs);vr(Ym,PCe,[Gs,Ym]);vr(MR,FX,Gs);vr(LR,Q0t,Gs);vr(Z4,OCe,Gs);vr(xb,WCe,[Gs,rne]);vr(Sb,dvt,[Gs,rne]);vr(Th,zX,[Gs,sf]);vr(`${Th}-${jx}`,zX,[Gs,sf]);vr(`${Th}-${Ym}`,GCe,[Gs,sf,Ym]);vr(`${Th}-${MR}`,VX,[Gs,sf]);vr(`${Th}-${LR}`,hvt,[Gs,sf]);vr(`${Th}-${Z4}`,YCe,[Gs,sf]);vr(`${mT}-${jx}`,KCe,[Gs,sf]);vr(`${mT}-${Ym}`,XCe,[Gs,sf,Ym]);vr(`${mT}-${MR}`,HX,[Gs,sf]);vr(`${mT}-${LR}`,pvt,[Gs,sf]);vr(`${mT}-${Z4}`,QCe,[Gs,sf]);vr(Bx,DCe,[jR,Bx]);vr(e5,$Ce,jR);vr(t5,MCe,jR);vr(nne,FLe,[FR,jR]);vr(tne,i_,FR);vr(MLe,ine,FR);vr(yq,U7t,FR);function ULe(e){return Y3.has(e)}function g_(e,t){const n=Y3.get(e);return n&&n.metadata[t]}function sne(e){return g_(e,Gs)}function Ux(e){return g_(e,FR)}function vq(e){return g_(e,jR)}function zLe(e){return g_(e,Ym)}function G7t(e){return g_(e,rne)}function VLe(e){return g_(e,sf)}function HLe(e){return g_(e,Bx)}const Y7t=["clamp","base","constant","exponent"];function qLe(e,t){const n=t[0],r=Zn(t)-n;return function(i){return e(n+i*r)}}function n5(e,t,n){return gX(one(t||"rgb",n),e)}function WLe(e,t){const n=new Array(t),r=t+1;for(let i=0;i<t;)n[i]=e(++i/r);return n}function GLe(e,t,n){const r=n-t;let i,s,o;return!r||!Number.isFinite(r)?Ca(.5):(i=(s=e.type).indexOf("-"),s=i<0?s:s.slice(i+1),o=vr(s)().domain([t,n]).range([0,1]),Y7t.forEach(a=>e[a]?o[a](e[a]()):0),o)}function one(e,t){const n=qdt[K7t(e)];return t!=null&&n&&n.gamma?n.gamma(t):n}function K7t(e){return"interpolate"+e.toLowerCase().split("-").map(t=>t[0].toUpperCase()+t.slice(1)).join("")}const X7t={blues:"cfe1f2bed8eca8cee58fc1de74b2d75ba3cf4592c63181bd206fb2125ca40a4a90",greens:"d3eecdc0e6baabdda594d3917bc77d60ba6c46ab5e329a512089430e7735036429",greys:"e2e2e2d4d4d4c4c4c4b1b1b19d9d9d8888887575756262624d4d4d3535351e1e1e",oranges:"fdd8b3fdc998fdb87bfda55efc9244f87f2cf06b18e4580bd14904b93d029f3303",purples:"e2e1efd4d4e8c4c5e0b4b3d6a3a0cc928ec3827cb97566ae684ea25c3696501f8c",reds:"fdc9b4fcb49afc9e80fc8767fa7051f6573fec3f2fdc2a25c81b1db21218970b13",blueGreen:"d5efedc1e8e0a7ddd18bd2be70c6a958ba9144ad77319c5d2089460e7736036429",bluePurple:"ccddecbad0e4a8c2dd9ab0d4919cc98d85be8b6db28a55a6873c99822287730f71",greenBlue:"d3eecec5e8c3b1e1bb9bd8bb82cec269c2ca51b2cd3c9fc7288abd1675b10b60a1",orangeRed:"fddcaffdcf9bfdc18afdad77fb9562f67d53ee6545e24932d32d1ebf130da70403",purpleBlue:"dbdaebc8cee4b1c3de97b7d87bacd15b9fc93a90c01e7fb70b70ab056199045281",purpleBlueGreen:"dbd8eac8cee4b0c3de93b7d872acd1549fc83892bb1c88a3097f8702736b016353",purpleRed:"dcc9e2d3b3d7ce9eccd186c0da6bb2e14da0e23189d91e6fc61159ab07498f023a",redPurple:"fccfccfcbec0faa9b8f98faff571a5ec539ddb3695c41b8aa908808d0179700174",yellowGreen:"e4f4acd1eca0b9e2949ed68880c97c62bb6e47aa5e3297502083440e723b036034",yellowOrangeBrown:"feeaa1fedd84fecc63feb746fca031f68921eb7215db5e0bc54c05ab3d038f3204",yellowOrangeRed:"fee087fed16ffebd59fea849fd903efc7335f9522bee3423de1b20ca0b22af0225",blueOrange:"134b852f78b35da2cb9dcae1d2e5eff2f0ebfce0bafbbf74e8932fc5690d994a07",brownBlueGreen:"704108a0651ac79548e3c78af3e6c6eef1eac9e9e48ed1c74da79e187a72025147",purpleGreen:"5b1667834792a67fb6c9aed3e6d6e8eff0efd9efd5aedda971bb75368e490e5e29",purpleOrange:"4114696647968f83b7b9b4d6dadbebf3eeeafce0bafbbf74e8932fc5690d994a07",redBlue:"8c0d25bf363adf745ef4ae91fbdbc9f2efeed2e5ef9dcae15da2cb2f78b3134b85",redGrey:"8c0d25bf363adf745ef4ae91fcdccbfaf4f1e2e2e2c0c0c0969696646464343434",yellowGreenBlue:"eff9bddbf1b4bde5b594d5b969c5be45b4c22c9ec02182b82163aa23479c1c3185",redYellowBlue:"a50026d4322cf16e43fcac64fedd90faf8c1dcf1ecabd6e875abd04a74b4313695",redYellowGreen:"a50026d4322cf16e43fcac63fedd8df9f7aed7ee8ea4d86e64bc6122964f006837",pinkYellowGreen:"8e0152c0267edd72adf0b3d6faddedf5f3efe1f2cab6de8780bb474f9125276419",spectral:"9e0142d13c4bf0704afcac63fedd8dfbf8b0e0f3a1a9dda269bda94288b55e4fa2",viridis:"440154470e61481a6c482575472f7d443a834144873d4e8a39568c35608d31688e2d708e2a788e27818e23888e21918d1f988b1fa08822a8842ab07f35b77943bf7154c56866cc5d7ad1518fd744a5db36bcdf27d2e21be9e51afde725",magma:"0000040404130b0924150e3720114b2c11603b0f704a107957157e651a80721f817f24828c29819a2e80a8327db6377ac43c75d1426fde4968e95462f1605df76f5cfa7f5efc8f65fe9f6dfeaf78febf84fece91fddea0fcedaffcfdbf",inferno:"0000040403130c0826170c3b240c4f330a5f420a68500d6c5d126e6b176e781c6d86216b932667a12b62ae305cbb3755c73e4cd24644dd513ae65c30ed6925f3771af8850ffb9506fca50afcb519fac62df6d645f2e661f3f484fcffa4",plasma:"0d088723069033059742039d5002a25d01a66a00a87801a88405a7900da49c179ea72198b12a90ba3488c33d80cb4779d35171da5a69e16462e76e5bed7953f2834cf68f44fa9a3dfca636fdb32ffec029fcce25f9dc24f5ea27f0f921",cividis:"00205100235800265d002961012b65042e670831690d346b11366c16396d1c3c6e213f6e26426e2c456e31476e374a6e3c4d6e42506e47536d4c566d51586e555b6e5a5e6e5e616e62646f66676f6a6a706e6d717270717573727976737c79747f7c75827f758682768985778c8877908b78938e789691789a94789e9778a19b78a59e77a9a177aea575b2a874b6ab73bbaf71c0b26fc5b66dc9b96acebd68d3c065d8c462ddc85fe2cb5ce7cf58ebd355f0d652f3da4ff7de4cfae249fce647",rainbow:"6e40aa883eb1a43db3bf3cafd83fa4ee4395fe4b83ff576eff6659ff7847ff8c38f3a130e2b72fcfcc36bee044aff05b8ff4576ff65b52f6673af27828ea8d1ddfa319d0b81cbecb23abd82f96e03d82e14c6edb5a5dd0664dbf6e40aa",sinebow:"ff4040fc582af47218e78d0bd5a703bfbf00a7d5038de70b72f41858fc2a40ff402afc5818f4720be78d03d5a700bfbf03a7d50b8de71872f42a58fc4040ff582afc7218f48d0be7a703d5bf00bfd503a7e70b8df41872fc2a58ff4040",turbo:"23171b32204a3e2a71453493493eae4b49c54a53d7485ee44569ee4074f53c7ff8378af93295f72e9ff42ba9ef28b3e926bce125c5d925cdcf27d5c629dcbc2de3b232e9a738ee9d3ff39347f68950f9805afc7765fd6e70fe667cfd5e88fc5795fb51a1f84badf545b9f140c5ec3cd0e637dae034e4d931ecd12ef4c92bfac029ffb626ffad24ffa223ff9821ff8d1fff821dff771cfd6c1af76118f05616e84b14df4111d5380fcb2f0dc0260ab61f07ac1805a313029b0f00950c00910b00",browns:"eedbbdecca96e9b97ae4a865dc9856d18954c7784cc0673fb85536ad44339f3632",tealBlues:"bce4d89dd3d181c3cb65b3c245a2b9368fae347da0306a932c5985",teals:"bbdfdfa2d4d58ac9c975bcbb61b0af4da5a43799982b8b8c1e7f7f127273006667",warmGreys:"dcd4d0cec5c1c0b8b4b3aaa7a59c9998908c8b827f7e7673726866665c5a59504e",goldGreen:"f4d166d5ca60b6c35c98bb597cb25760a6564b9c533f8f4f33834a257740146c36",goldOrange:"f4d166f8be5cf8aa4cf5983bf3852aef701be2621fd65322c54923b142239e3a26",goldRed:"f4d166f6be59f9aa51fc964ef6834bee734ae56249db5247cf4244c43141b71d3e",lightGreyRed:"efe9e6e1dad7d5cbc8c8bdb9bbaea9cd967ddc7b43e15f19df4011dc000b",lightGreyTeal:"e4eaead6dcddc8ced2b7c2c7a6b4bc64b0bf22a6c32295c11f85be1876bc",lightMulti:"e0f1f2c4e9d0b0de9fd0e181f6e072f6c053f3993ef77440ef4a3c",lightOrange:"f2e7daf7d5baf9c499fab184fa9c73f68967ef7860e8645bde515bd43d5b",lightTealBlue:"e3e9e0c0dccf9aceca7abfc859afc0389fb9328dad2f7ca0276b95255988",darkBlue:"3232322d46681a5c930074af008cbf05a7ce25c0dd38daed50f3faffffff",darkGold:"3c3c3c584b37725e348c7631ae8b2bcfa424ecc31ef9de30fff184ffffff",darkGreen:"3a3a3a215748006f4d048942489e4276b340a6c63dd2d836ffeb2cffffaa",darkMulti:"3737371f5287197d8c29a86995ce3fffe800ffffff",darkRed:"3434347036339e3c38cc4037e75d1eec8620eeab29f0ce32ffeb2c"},Q7t={accent:mvt,category10:JCe,category20:"1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5",category20b:"393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6",category20c:"3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9",dark2:gvt,observable10:yvt,paired:vvt,pastel1:bvt,pastel2:_vt,set1:wvt,set2:Evt,set3:xvt,tableau10:"4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac",tableau20:"4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"};function YLe(e){if(je(e))return e;const t=e.length/6|0,n=new Array(t);for(let r=0;r<t;)n[r]="#"+e.slice(r*6,++r*6);return n}function KLe(e,t){for(const n in e)ane(n,t(e[n]))}const pge={};KLe(Q7t,YLe);KLe(X7t,e=>n5(YLe(e)));function ane(e,t){return e=e&&e.toLowerCase(),arguments.length>1?(pge[e]=t,this):pge[e]}const SD="symbol",J7t="discrete",Z7t="gradient",ezt=e=>je(e)?e.map(t=>String(t)):String(e),tzt=(e,t)=>e[1]-t[1],nzt=(e,t)=>t[1]-e[1];function une(e,t,n){let r;return fr(t)&&(e.bins&&(t=Math.max(t,e.bins.length)),n!=null&&(t=Math.min(t,Math.floor(PR(e.domain())/n||1)+1))),gt(t)&&(r=t.step,t=t.interval),mt(t)&&(t=e.type===xb?dT(t):e.type==Sb?hT(t):Le("Only time and utc scales accept interval strings."),r&&(t=t.every(r))),t}function XLe(e,t,n){let r=e.range(),i=r[0],s=Zn(r),o=tzt;if(i>s&&(r=s,s=i,i=r,o=nzt),i=Math.floor(i),s=Math.ceil(s),t=t.map(a=>[a,e(a)]).filter(a=>i<=a[1]&&a[1]<=s).sort(o).map(a=>a[0]),n>0&&t.length>1){const a=[t[0],Zn(t)];for(;t.length>n&&t.length>=3;)t=t.filter((u,l)=>!(l%2));t.length<3&&(t=a)}return t}function lne(e,t){return e.bins?XLe(e,e.bins,t):e.ticks?e.ticks(t):e.domain()}function QLe(e,t,n,r,i,s){const o=t.type;let a=ezt;if(o===xb||i===xb)a=e.timeFormat(r);else if(o===Sb||i===Sb)a=e.utcFormat(r);else if(zLe(o)){const u=e.formatFloat(r);if(s||t.bins)a=u;else{const l=JLe(t,n,!1);a=c=>l(c)?u(c):""}}else if(t.tickFormat){const u=t.domain();a=e.formatSpan(u[0],u[u.length-1],n,r)}else r&&(a=e.format(r));return a}function JLe(e,t,n){const r=lne(e,t),i=e.base(),s=Math.log(i),o=Math.max(1,i*t/r.length),a=u=>{let l=u/Math.pow(i,Math.round(Math.log(u)/s));return l*i<i-.5&&(l*=i),l<=o};return n?r.filter(a):a}const bq={[Bx]:"quantiles",[e5]:"thresholds",[t5]:"domain"},ZLe={[Bx]:"quantiles",[e5]:"domain"};function e6e(e,t){return e.bins?szt(e.bins):e.type===Ym?JLe(e,t,!0):bq[e.type]?izt(e[bq[e.type]]()):lne(e,t)}function rzt(e,t,n){const r=t[ZLe[t.type]](),i=r.length;let s=i>1?r[1]-r[0]:r[0],o;for(o=1;o<i;++o)s=Math.min(s,r[o]-r[o-1]);return e.formatSpan(0,s,3*10,n)}function izt(e){const t=[-1/0].concat(e);return t.max=1/0,t}function szt(e){const t=e.slice(0,-1);return t.max=Zn(e),t}const ozt=e=>bq[e.type]||e.bins;function t6e(e,t,n,r,i,s,o){const a=ZLe[t.type]&&s!==xb&&s!==Sb?rzt(e,t,i):QLe(e,t,n,i,s,o);return r===SD&&ozt(t)?azt(a):r===J7t?uzt(a):lzt(a)}const azt=e=>(t,n,r)=>{const i=mge(r[n+1],mge(r.max,1/0)),s=gge(t,e),o=gge(i,e);return s&&o?s+"  "+o:o?"< "+o:" "+s},mge=(e,t)=>e??t,uzt=e=>(t,n)=>n?e(t):null,lzt=e=>t=>e(t),gge=(e,t)=>Number.isFinite(e)?t(e):null;function czt(e){const t=e.domain(),n=t.length-1;let r=+t[0],i=+Zn(t),s=i-r;if(e.type===t5){const o=n?s/n:.1;r-=o,i+=o,s=i-r}return o=>(o-r)/s}function fzt(e,t,n,r){const i=r||t.type;return mt(n)&&G7t(i)&&(n=n.replace(/%a/g,"%A").replace(/%b/g,"%B")),!n&&i===xb?e.timeFormat("%A, %d %B %Y, %X"):!n&&i===Sb?e.utcFormat("%A, %d %B %Y, %X UTC"):t6e(e,t,5,null,n,r,!0)}function n6e(e,t,n){n=n||{};const r=Math.max(3,n.maxlen||7),i=fzt(e,t,n.format,n.formatType);if(vq(t.type)){const s=e6e(t).slice(1).map(i),o=s.length;return`${o} boundar${o===1?"y":"ies"}: ${s.join(", ")}`}else if(Ux(t.type)){const s=t.domain(),o=s.length,a=o>r?s.slice(0,r-2).map(i).join(", ")+", ending with "+s.slice(-1).map(i):s.map(i).join(", ");return`${o} value${o===1?"":"s"}: ${a}`}else{const s=t.domain();return`values from ${i(s[0])} to ${i(Zn(s))}`}}let r6e=0;function dzt(){r6e=0}const K3="p_";function cne(e){return e&&e.gradient}function i6e(e,t,n){const r=e.gradient;let i=e.id,s=r==="radial"?K3:"";return i||(i=e.id="gradient_"+r6e++,r==="radial"?(e.x1=Id(e.x1,.5),e.y1=Id(e.y1,.5),e.r1=Id(e.r1,0),e.x2=Id(e.x2,.5),e.y2=Id(e.y2,.5),e.r2=Id(e.r2,.5),s=K3):(e.x1=Id(e.x1,0),e.y1=Id(e.y1,0),e.x2=Id(e.x2,1),e.y2=Id(e.y2,0))),t[i]=e,"url("+(n||"")+"#"+s+i+")"}function Id(e,t){return e??t}function s6e(e,t){var n=[],r;return r={gradient:"linear",x1:e?e[0]:0,y1:e?e[1]:0,x2:t?t[0]:1,y2:t?t[1]:0,stops:n,stop:function(i,s){return n.push({offset:i,color:s}),r}}}const yge={basis:{curve:Mvt},"basis-closed":{curve:Lvt},"basis-open":{curve:Fvt},bundle:{curve:jvt,tension:"beta",value:.85},cardinal:{curve:Bvt,tension:"tension",value:0},"cardinal-open":{curve:zvt,tension:"tension",value:0},"cardinal-closed":{curve:Uvt,tension:"tension",value:0},"catmull-rom":{curve:Vvt,tension:"alpha",value:.5},"catmull-rom-closed":{curve:Hvt,tension:"alpha",value:.5},"catmull-rom-open":{curve:qvt,tension:"alpha",value:.5},linear:{curve:qX},"linear-closed":{curve:Wvt},monotone:{horizontal:Yvt,vertical:Gvt},natural:{curve:Kvt},step:{curve:Xvt},"step-after":{curve:Jvt},"step-before":{curve:Qvt}};function fne(e,t,n){var r=jt(yge,e)&&yge[e],i=null;return r&&(i=r.curve||r[t||"vertical"],r.tension&&n!=null&&(i=i[r.tension](n))),i}const hzt={m:2,l:2,h:1,v:1,z:0,c:6,s:4,q:4,t:2,a:7},pzt=/[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi,mzt=/^[+-]?(([0-9]*\.[0-9]+)|([0-9]+\.)|([0-9]+))([eE][+-]?[0-9]+)?/,gzt=/^((\s+,?\s*)|(,\s*))/,yzt=/^[01]/;function zx(e){const t=[];return(e.match(pzt)||[]).forEach(r=>{let i=r[0];const s=i.toLowerCase(),o=hzt[s],a=vzt(s,o,r.slice(1).trim()),u=a.length;if(u<o||u&&u%o!==0)throw Error("Invalid SVG path, incorrect parameter count");if(t.push([i,...a.slice(0,o)]),u!==o){s==="m"&&(i=i==="M"?"L":"l");for(let l=o;l<u;l+=o)t.push([i,...a.slice(l,l+o)])}}),t}function vzt(e,t,n){const r=[];for(let i=0;t&&i<n.length;)for(let s=0;s<t;++s){const o=e==="a"&&(s===3||s===4)?yzt:mzt,a=n.slice(i).match(o);if(a===null)throw Error("Invalid SVG path, incorrect parameter type");i+=a[0].length,r.push(+a[0]);const u=n.slice(i).match(gzt);u!==null&&(i+=u[0].length)}return r}const Ty=Math.PI/180,bzt=1e-14,c1=Math.PI/2,nh=Math.PI*2,Z_=Math.sqrt(3)/2;var z9={},V9={},o6e=[].join;function _zt(e,t,n,r,i,s,o,a,u){const l=o6e.call(arguments);if(z9[l])return z9[l];const c=o*Ty,f=Math.sin(c),d=Math.cos(c);n=Math.abs(n),r=Math.abs(r);const h=d*(a-e)*.5+f*(u-t)*.5,p=d*(u-t)*.5-f*(a-e)*.5;let m=h*h/(n*n)+p*p/(r*r);m>1&&(m=Math.sqrt(m),n*=m,r*=m);const g=d/n,y=f/n,v=-f/r,b=d/r,w=g*a+y*u,E=v*a+b*u,T=g*e+y*t,S=v*e+b*t;let C=1/((T-w)*(T-w)+(S-E)*(S-E))-.25;C<0&&(C=0);let k=Math.sqrt(C);s==i&&(k=-k);const N=.5*(w+T)-k*(S-E),D=.5*(E+S)+k*(T-w),O=Math.atan2(E-D,w-N);let F=Math.atan2(S-D,T-N)-O;F<0&&s===1?F+=nh:F>0&&s===0&&(F-=nh);const M=Math.ceil(Math.abs(F/(c1+.001))),B=[];for(let U=0;U<M;++U){const H=O+U*F/M,P=O+(U+1)*F/M;B[U]=[N,D,H,P,n,r,f,d]}return z9[l]=B}function wzt(e){const t=o6e.call(e);if(V9[t])return V9[t];var n=e[0],r=e[1],i=e[2],s=e[3],o=e[4],a=e[5],u=e[6],l=e[7];const c=l*o,f=-u*a,d=u*o,h=l*a,p=Math.cos(i),m=Math.sin(i),g=Math.cos(s),y=Math.sin(s),v=.5*(s-i),b=Math.sin(v*.5),w=8/3*b*b/Math.sin(v),E=n+p-w*m,T=r+m+w*p,S=n+g,A=r+y,C=S+w*y,k=A-w*g;return V9[t]=[c*E+f*T,d*E+h*T,c*C+f*k,d*C+h*k,c*S+f*A,d*S+h*A]}const dc=["l",0,0,0,0,0,0,0];function Ezt(e,t,n){const r=dc[0]=e[0];if(r==="a"||r==="A")dc[1]=t*e[1],dc[2]=n*e[2],dc[3]=e[3],dc[4]=e[4],dc[5]=e[5],dc[6]=t*e[6],dc[7]=n*e[7];else if(r==="h"||r==="H")dc[1]=t*e[1];else if(r==="v"||r==="V")dc[1]=n*e[1];else for(var i=1,s=e.length;i<s;++i)dc[i]=(i%2==1?t:n)*e[i];return dc}function ZI(e,t,n,r,i,s){var o,a=null,u=0,l=0,c=0,f=0,d,h,p,m,g=0,y=0;n==null&&(n=0),r==null&&(r=0),i==null&&(i=1),s==null&&(s=i),e.beginPath&&e.beginPath();for(var v=0,b=t.length;v<b;++v){switch(o=t[v],(i!==1||s!==1)&&(o=Ezt(o,i,s)),o[0]){case"l":u+=o[1],l+=o[2],e.lineTo(u+n,l+r);break;case"L":u=o[1],l=o[2],e.lineTo(u+n,l+r);break;case"h":u+=o[1],e.lineTo(u+n,l+r);break;case"H":u=o[1],e.lineTo(u+n,l+r);break;case"v":l+=o[1],e.lineTo(u+n,l+r);break;case"V":l=o[1],e.lineTo(u+n,l+r);break;case"m":u+=o[1],l+=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"M":u=o[1],l=o[2],g=u,y=l,e.moveTo(u+n,l+r);break;case"c":d=u+o[5],h=l+o[6],c=u+o[3],f=l+o[4],e.bezierCurveTo(u+o[1]+n,l+o[2]+r,c+n,f+r,d+n,h+r),u=d,l=h;break;case"C":u=o[5],l=o[6],c=o[3],f=o[4],e.bezierCurveTo(o[1]+n,o[2]+r,c+n,f+r,u+n,l+r);break;case"s":d=u+o[3],h=l+o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,u+o[1]+n,l+o[2]+r,d+n,h+r),c=u+o[1],f=l+o[2],u=d,l=h;break;case"S":d=o[3],h=o[4],c=2*u-c,f=2*l-f,e.bezierCurveTo(c+n,f+r,o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"q":d=u+o[3],h=l+o[4],c=u+o[1],f=l+o[2],e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"Q":d=o[3],h=o[4],e.quadraticCurveTo(o[1]+n,o[2]+r,d+n,h+r),u=d,l=h,c=o[1],f=o[2];break;case"t":d=u+o[1],h=l+o[2],a[0].match(/[QqTt]/)===null?(c=u,f=l):a[0]==="t"?(c=2*u-p,f=2*l-m):a[0]==="q"&&(c=2*u-c,f=2*l-f),p=c,m=f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h,c=u+o[1],f=l+o[2];break;case"T":d=o[1],h=o[2],c=2*u-c,f=2*l-f,e.quadraticCurveTo(c+n,f+r,d+n,h+r),u=d,l=h;break;case"a":vge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+u+n,o[7]+l+r]),u+=o[6],l+=o[7];break;case"A":vge(e,u+n,l+r,[o[1],o[2],o[3],o[4],o[5],o[6]+n,o[7]+r]),u=o[6],l=o[7];break;case"z":case"Z":u=g,l=y,e.closePath();break}a=o}}function vge(e,t,n,r){const i=_zt(r[5],r[6],r[0],r[1],r[3],r[4],r[2],t,n);for(let s=0;s<i.length;++s){const o=wzt(i[s]);e.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}const bge=.5773502691896257,_ge={circle:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(n,0),e.arc(0,0,n,0,nh)}},cross:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/2.5;e.moveTo(-n,-r),e.lineTo(-n,r),e.lineTo(-r,r),e.lineTo(-r,n),e.lineTo(r,n),e.lineTo(r,r),e.lineTo(n,r),e.lineTo(n,-r),e.lineTo(r,-r),e.lineTo(r,-n),e.lineTo(-r,-n),e.lineTo(-r,-r),e.closePath()}},diamond:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(0,-n),e.lineTo(n,0),e.lineTo(0,n),e.closePath()}},square:{draw:function(e,t){var n=Math.sqrt(t),r=-n/2;e.rect(r,r,n,n)}},arrow:{draw:function(e,t){var n=Math.sqrt(t)/2,r=n/7,i=n/2.5,s=n/8;e.moveTo(-r,n),e.lineTo(r,n),e.lineTo(r,-s),e.lineTo(i,-s),e.lineTo(0,-n),e.lineTo(-i,-s),e.lineTo(-r,-s),e.closePath()}},wedge:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Z_*n,i=r-n*bge,s=n/4;e.moveTo(0,-r-i),e.lineTo(-s,r-i),e.lineTo(s,r-i),e.closePath()}},triangle:{draw:function(e,t){var n=Math.sqrt(t)/2,r=Z_*n,i=r-n*bge;e.moveTo(0,-r-i),e.lineTo(-n,r-i),e.lineTo(n,r-i),e.closePath()}},"triangle-up":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Z_*n;e.moveTo(0,-r),e.lineTo(-n,r),e.lineTo(n,r),e.closePath()}},"triangle-down":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Z_*n;e.moveTo(0,r),e.lineTo(-n,-r),e.lineTo(n,-r),e.closePath()}},"triangle-right":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Z_*n;e.moveTo(r,0),e.lineTo(-r,-n),e.lineTo(-r,n),e.closePath()}},"triangle-left":{draw:function(e,t){var n=Math.sqrt(t)/2,r=Z_*n;e.moveTo(-r,0),e.lineTo(r,-n),e.lineTo(r,n),e.closePath()}},stroke:{draw:function(e,t){const n=Math.sqrt(t)/2;e.moveTo(-n,0),e.lineTo(n,0)}}};function a6e(e){return jt(_ge,e)?_ge[e]:xzt(e)}var H9={};function xzt(e){if(!jt(H9,e)){const t=zx(e);H9[e]={draw:function(n,r){ZI(n,t,0,0,Math.sqrt(r)/2)}}}return H9[e]}const Pg=.448084975506;function Szt(e){return e.x}function Tzt(e){return e.y}function Azt(e){return e.width}function Czt(e){return e.height}function Sp(e){return typeof e=="function"?e:()=>+e}function KP(e,t,n){return Math.max(t,Math.min(e,n))}function u6e(){var e=Szt,t=Tzt,n=Azt,r=Czt,i=Sp(0),s=i,o=i,a=i,u=null;function l(c,f,d){var h,p=f??+e.call(this,c),m=d??+t.call(this,c),g=+n.call(this,c),y=+r.call(this,c),v=Math.min(g,y)/2,b=KP(+i.call(this,c),0,v),w=KP(+s.call(this,c),0,v),E=KP(+o.call(this,c),0,v),T=KP(+a.call(this,c),0,v);if(u||(u=h=uF()),b<=0&&w<=0&&E<=0&&T<=0)u.rect(p,m,g,y);else{var S=p+g,A=m+y;u.moveTo(p+b,m),u.lineTo(S-w,m),u.bezierCurveTo(S-Pg*w,m,S,m+Pg*w,S,m+w),u.lineTo(S,A-T),u.bezierCurveTo(S,A-Pg*T,S-Pg*T,A,S-T,A),u.lineTo(p+E,A),u.bezierCurveTo(p+Pg*E,A,p,A-Pg*E,p,A-E),u.lineTo(p,m+b),u.bezierCurveTo(p,m+Pg*b,p+Pg*b,m,p+b,m),u.closePath()}if(h)return u=null,h+""||null}return l.x=function(c){return arguments.length?(e=Sp(c),l):e},l.y=function(c){return arguments.length?(t=Sp(c),l):t},l.width=function(c){return arguments.length?(n=Sp(c),l):n},l.height=function(c){return arguments.length?(r=Sp(c),l):r},l.cornerRadius=function(c,f,d,h){return arguments.length?(i=Sp(c),s=f!=null?Sp(f):i,a=d!=null?Sp(d):i,o=h!=null?Sp(h):s,l):i},l.context=function(c){return arguments.length?(u=c??null,l):u},l}function l6e(){var e,t,n,r,i=null,s,o,a,u;function l(f,d,h){const p=h/2;if(s){var m=a-d,g=f-o;if(m||g){var y=Math.hypot(m,g),v=(m/=y)*u,b=(g/=y)*u,w=Math.atan2(g,m);i.moveTo(o-v,a-b),i.lineTo(f-m*p,d-g*p),i.arc(f,d,p,w-Math.PI,w),i.lineTo(o+v,a+b),i.arc(o,a,u,w,w+Math.PI)}else i.arc(f,d,p,0,nh);i.closePath()}else s=1;o=f,a=d,u=p}function c(f){var d,h=f.length,p,m=!1,g;for(i==null&&(i=g=uF()),d=0;d<=h;++d)!(d<h&&r(p=f[d],d,f))===m&&(m=!m)&&(s=0),m&&l(+e(p,d,f),+t(p,d,f),+n(p,d,f));if(g)return i=null,g+""||null}return c.x=function(f){return arguments.length?(e=f,c):e},c.y=function(f){return arguments.length?(t=f,c):t},c.size=function(f){return arguments.length?(n=f,c):n},c.defined=function(f){return arguments.length?(r=f,c):r},c.context=function(f){return arguments.length?(f==null?i=null:i=f,c):i},c}function BR(e,t){return e??t}const UR=e=>e.x||0,zR=e=>e.y||0,Izt=e=>e.width||0,kzt=e=>e.height||0,Rzt=e=>(e.x||0)+(e.width||0),Nzt=e=>(e.y||0)+(e.height||0),Pzt=e=>e.startAngle||0,Ozt=e=>e.endAngle||0,Dzt=e=>e.padAngle||0,$zt=e=>e.innerRadius||0,Mzt=e=>e.outerRadius||0,Lzt=e=>e.cornerRadius||0,Fzt=e=>BR(e.cornerRadiusTopLeft,e.cornerRadius)||0,jzt=e=>BR(e.cornerRadiusTopRight,e.cornerRadius)||0,Bzt=e=>BR(e.cornerRadiusBottomRight,e.cornerRadius)||0,Uzt=e=>BR(e.cornerRadiusBottomLeft,e.cornerRadius)||0,zzt=e=>BR(e.size,64),Vzt=e=>e.size||1,r5=e=>e.defined!==!1,Hzt=e=>a6e(e.shape||"circle"),qzt=xM().startAngle(Pzt).endAngle(Ozt).padAngle(Dzt).innerRadius($zt).outerRadius(Mzt).cornerRadius(Lzt),Wzt=i2e().x(UR).y1(zR).y0(Nzt).defined(r5),Gzt=i2e().y(zR).x1(UR).x0(Rzt).defined(r5),Yzt=r2e().x(UR).y(zR).defined(r5),Kzt=u6e().x(UR).y(zR).width(Izt).height(kzt).cornerRadius(Fzt,jzt,Bzt,Uzt),Xzt=$vt().type(Hzt).size(zzt),Qzt=l6e().x(UR).y(zR).defined(r5).size(Vzt);function dne(e){return e.cornerRadius||e.cornerRadiusTopLeft||e.cornerRadiusTopRight||e.cornerRadiusBottomRight||e.cornerRadiusBottomLeft}function Jzt(e,t){return qzt.context(e)(t)}function Zzt(e,t){const n=t[0],r=n.interpolate||"linear";return(n.orient==="horizontal"?Gzt:Wzt).curve(fne(r,n.orient,n.tension)).context(e)(t)}function eVt(e,t){const n=t[0],r=n.interpolate||"linear";return Yzt.curve(fne(r,n.orient,n.tension)).context(e)(t)}function gT(e,t,n,r){return Kzt.context(e)(t,n,r)}function tVt(e,t){return(t.mark.shape||t.shape).context(e)(t)}function nVt(e,t){return Xzt.context(e)(t)}function rVt(e,t){return Qzt.context(e)(t)}var c6e=1;function f6e(){c6e=1}function hne(e,t,n){var r=t.clip,i=e._defs,s=t.clip_id||(t.clip_id="clip"+c6e++),o=i.clipping[s]||(i.clipping[s]={id:s});return wn(r)?o.path=r(null):dne(n)?o.path=gT(null,n,0,0):(o.width=n.width||0,o.height=n.height||0),"url(#"+s+")"}function Is(e){this.clear(),e&&this.union(e)}Is.prototype={clone(){return new Is(this)},clear(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},empty(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},equals(e){return this.x1===e.x1&&this.y1===e.y1&&this.x2===e.x2&&this.y2===e.y2},set(e,t,n,r){return n<e?(this.x2=e,this.x1=n):(this.x1=e,this.x2=n),r<t?(this.y2=t,this.y1=r):(this.y1=t,this.y2=r),this},add(e,t){return e<this.x1&&(this.x1=e),t<this.y1&&(this.y1=t),e>this.x2&&(this.x2=e),t>this.y2&&(this.y2=t),this},expand(e){return this.x1-=e,this.y1-=e,this.x2+=e,this.y2+=e,this},round(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},scale(e){return this.x1*=e,this.y1*=e,this.x2*=e,this.y2*=e,this},translate(e,t){return this.x1+=e,this.x2+=e,this.y1+=t,this.y2+=t,this},rotate(e,t,n){const r=this.rotatedPoints(e,t,n);return this.clear().add(r[0],r[1]).add(r[2],r[3]).add(r[4],r[5]).add(r[6],r[7])},rotatedPoints(e,t,n){var{x1:r,y1:i,x2:s,y2:o}=this,a=Math.cos(e),u=Math.sin(e),l=t-t*a+n*u,c=n-t*u-n*a;return[a*r-u*i+l,u*r+a*i+c,a*r-u*o+l,u*r+a*o+c,a*s-u*i+l,u*s+a*i+c,a*s-u*o+l,u*s+a*o+c]},union(e){return e.x1<this.x1&&(this.x1=e.x1),e.y1<this.y1&&(this.y1=e.y1),e.x2>this.x2&&(this.x2=e.x2),e.y2>this.y2&&(this.y2=e.y2),this},intersect(e){return e.x1>this.x1&&(this.x1=e.x1),e.y1>this.y1&&(this.y1=e.y1),e.x2<this.x2&&(this.x2=e.x2),e.y2<this.y2&&(this.y2=e.y2),this},encloses(e){return e&&this.x1<=e.x1&&this.x2>=e.x2&&this.y1<=e.y1&&this.y2>=e.y2},alignsWith(e){return e&&(this.x1==e.x1||this.x2==e.x2||this.y1==e.y1||this.y2==e.y2)},intersects(e){return e&&!(this.x2<e.x1||this.x1>e.x2||this.y2<e.y1||this.y1>e.y2)},contains(e,t){return!(e<this.x1||e>this.x2||t<this.y1||t>this.y2)},width(){return this.x2-this.x1},height(){return this.y2-this.y1}};function i5(e){this.mark=e,this.bounds=this.bounds||new Is}function s5(e){i5.call(this,e),this.items=this.items||[]}lt(s5,i5);class d6e{constructor(t){this._pending=0,this._loader=t||U4()}pending(){return this._pending}sanitizeURL(t){const n=this;return wge(n),n._loader.sanitize(t,{context:"href"}).then(r=>(gA(n),r)).catch(()=>(gA(n),null))}loadImage(t){const n=this,r=L7t();return wge(n),n._loader.sanitize(t,{context:"image"}).then(i=>{const s=i.href;if(!s||!r)throw{url:s};const o=new r,a=jt(i,"crossOrigin")?i.crossOrigin:"anonymous";return a!=null&&(o.crossOrigin=a),o.onload=()=>gA(n),o.onerror=()=>gA(n),o.src=s,o}).catch(i=>(gA(n),{complete:!1,width:0,height:0,src:i&&i.url||""}))}ready(){const t=this;return new Promise(n=>{function r(i){t.pending()?setTimeout(()=>{r(!0)},10):n(i)}r(!1)})}}function wge(e){e._pending+=1}function gA(e){e._pending-=1}function mg(e,t,n){if(t.stroke&&t.opacity!==0&&t.strokeOpacity!==0){const r=t.strokeWidth!=null?+t.strokeWidth:1;e.expand(r+(n?iVt(t,r):0))}return e}function iVt(e,t){return e.strokeJoin&&e.strokeJoin!=="miter"?0:t}const sVt=nh-1e-8;let o5,TD,AD,O1,_q,CD,wq,Eq;const h0=(e,t)=>o5.add(e,t),ID=(e,t)=>h0(TD=e,AD=t),Ege=e=>h0(e,o5.y1),xge=e=>h0(o5.x1,e),f1=(e,t)=>_q*e+wq*t,d1=(e,t)=>CD*e+Eq*t,q9=(e,t)=>h0(f1(e,t),d1(e,t)),W9=(e,t)=>ID(f1(e,t),d1(e,t));function VR(e,t){return o5=e,t?(O1=t*Ty,_q=Eq=Math.cos(O1),CD=Math.sin(O1),wq=-CD):(_q=Eq=1,O1=CD=wq=0),oVt}const oVt={beginPath(){},closePath(){},moveTo:W9,lineTo:W9,rect(e,t,n,r){O1?(q9(e+n,t),q9(e+n,t+r),q9(e,t+r),W9(e,t)):(h0(e+n,t+r),ID(e,t))},quadraticCurveTo(e,t,n,r){const i=f1(e,t),s=d1(e,t),o=f1(n,r),a=d1(n,r);Sge(TD,i,o,Ege),Sge(AD,s,a,xge),ID(o,a)},bezierCurveTo(e,t,n,r,i,s){const o=f1(e,t),a=d1(e,t),u=f1(n,r),l=d1(n,r),c=f1(i,s),f=d1(i,s);Tge(TD,o,u,c,Ege),Tge(AD,a,l,f,xge),ID(c,f)},arc(e,t,n,r,i,s){if(r+=O1,i+=O1,TD=n*Math.cos(i)+e,AD=n*Math.sin(i)+t,Math.abs(i-r)>sVt)h0(e-n,t-n),h0(e+n,t+n);else{const o=l=>h0(n*Math.cos(l)+e,n*Math.sin(l)+t);let a,u;if(o(r),o(i),i!==r)if(r=r%nh,r<0&&(r+=nh),i=i%nh,i<0&&(i+=nh),i<r&&(s=!s,a=r,r=i,i=a),s)for(i-=nh,a=r-r%c1,u=0;u<4&&a>i;++u,a-=c1)o(a);else for(a=r-r%c1+c1,u=0;u<4&&a<i;++u,a=a+c1)o(a)}}};function Sge(e,t,n,r){const i=(e-t)/(e+n-2*t);0<i&&i<1&&r(e+(t-e)*i)}function Tge(e,t,n,r,i){const s=r-e+3*t-3*n,o=e+n-2*t,a=e-t;let u=0,l=0,c;Math.abs(s)>bzt?(c=o*o+a*s,c>=0&&(c=Math.sqrt(c),u=(-o+c)/s,l=(-o-c)/s)):u=.5*a/o,0<u&&u<1&&i(Age(u,e,t,n,r)),0<l&&l<1&&i(Age(l,e,t,n,r))}function Age(e,t,n,r,i){const s=1-e,o=s*s,a=e*e;return o*s*t+3*o*e*n+3*s*a*r+a*e*i}var H0=(H0=V0(1,1))?H0.getContext("2d"):null;const xq=new Is;function pne(e){return function(t,n){if(!H0)return!0;e(H0,t),xq.clear().union(t.bounds).intersect(n).round();const{x1:r,y1:i,x2:s,y2:o}=xq;for(let a=i;a<=o;++a)for(let u=r;u<=s;++u)if(H0.isPointInPath(u,a))return!0;return!1}}function mne(e,t){return t.contains(e.x||0,e.y||0)}function h6e(e,t){const n=e.x||0,r=e.y||0,i=e.width||0,s=e.height||0;return t.intersects(xq.set(n,r,n+i,r+s))}function p6e(e,t){const n=e.x||0,r=e.y||0,i=e.x2!=null?e.x2:n,s=e.y2!=null?e.y2:r;return Jw(t,n,r,i,s)}function Jw(e,t,n,r,i){const{x1:s,y1:o,x2:a,y2:u}=e,l=r-t,c=i-n;let f=0,d=1,h,p,m,g;for(g=0;g<4;++g){if(g===0&&(h=-l,p=-(s-t)),g===1&&(h=l,p=a-t),g===2&&(h=-c,p=-(o-n)),g===3&&(h=c,p=u-n),Math.abs(h)<1e-10&&p<0)return!1;if(m=p/h,h<0){if(m>d)return!1;m>f&&(f=m)}else if(h>0){if(m<f)return!1;m<d&&(d=m)}}return!0}function Vx(e,t){e.globalCompositeOperation=t.blend||"source-over"}function gf(e,t){return e??t}function Cge(e,t){const n=t.length;for(let r=0;r<n;++r)e.addColorStop(t[r].offset,t[r].color);return e}function aVt(e,t,n){const r=n.width(),i=n.height();let s;if(t.gradient==="radial")s=e.createRadialGradient(n.x1+gf(t.x1,.5)*r,n.y1+gf(t.y1,.5)*i,Math.max(r,i)*gf(t.r1,0),n.x1+gf(t.x2,.5)*r,n.y1+gf(t.y2,.5)*i,Math.max(r,i)*gf(t.r2,.5));else{const o=gf(t.x1,0),a=gf(t.y1,0),u=gf(t.x2,1),l=gf(t.y2,0);if(o===u||a===l||r===i)s=e.createLinearGradient(n.x1+o*r,n.y1+a*i,n.x1+u*r,n.y1+l*i);else{const c=V0(Math.ceil(r),Math.ceil(i)),f=c.getContext("2d");return f.scale(r,i),f.fillStyle=Cge(f.createLinearGradient(o,a,u,l),t.stops),f.fillRect(0,0,r,i),e.createPattern(c,"no-repeat")}}return Cge(s,t.stops)}function m6e(e,t,n){return cne(n)?aVt(e,n,t.bounds):n}function X3(e,t,n){return n*=t.fillOpacity==null?1:t.fillOpacity,n>0?(e.globalAlpha=n,e.fillStyle=m6e(e,t,t.fill),!0):!1}var uVt=[];function Hx(e,t,n){var r=(r=t.strokeWidth)!=null?r:1;return r<=0?!1:(n*=t.strokeOpacity==null?1:t.strokeOpacity,n>0?(e.globalAlpha=n,e.strokeStyle=m6e(e,t,t.stroke),e.lineWidth=r,e.lineCap=t.strokeCap||"butt",e.lineJoin=t.strokeJoin||"miter",e.miterLimit=t.strokeMiterLimit||10,e.setLineDash&&(e.setLineDash(t.strokeDash||uVt),e.lineDashOffset=t.strokeDashOffset||0),!0):!1)}function lVt(e,t){return e.zindex-t.zindex||e.index-t.index}function gne(e){if(!e.zdirty)return e.zitems;var t=e.items,n=[],r,i,s;for(i=0,s=t.length;i<s;++i)r=t[i],r.index=i,r.zindex&&n.push(r);return e.zdirty=!1,e.zitems=n.sort(lVt)}function od(e,t){var n=e.items,r,i;if(!n||!n.length)return;const s=gne(e);if(s&&s.length){for(r=0,i=n.length;r<i;++r)n[r].zindex||t(n[r]);n=s}for(r=0,i=n.length;r<i;++r)t(n[r])}function Q3(e,t){var n=e.items,r,i;if(!n||!n.length)return null;const s=gne(e);for(s&&s.length&&(n=s),i=n.length;--i>=0;)if(r=t(n[i]))return r;if(n===s){for(n=e.items,i=n.length;--i>=0;)if(!n[i].zindex&&(r=t(n[i])))return r}return null}function yne(e){return function(t,n,r){od(n,i=>{(!r||r.intersects(i.bounds))&&g6e(e,t,i,i)})}}function cVt(e){return function(t,n,r){n.items.length&&(!r||r.intersects(n.bounds))&&g6e(e,t,n.items[0],n.items)}}function g6e(e,t,n,r){var i=n.opacity==null?1:n.opacity;i!==0&&(e(t,r)||(Vx(t,n),n.fill&&X3(t,n,i)&&t.fill(),n.stroke&&Hx(t,n,i)&&t.stroke()))}function a5(e){return e=e||Vc,function(t,n,r,i,s,o){return r*=t.pixelRatio,i*=t.pixelRatio,Q3(n,a=>{const u=a.bounds;if(!(u&&!u.contains(s,o)||!u)&&e(t,a,r,i,s,o))return a})}}function HR(e,t){return function(n,r,i,s){var o=Array.isArray(r)?r[0]:r,a=t??o.fill,u=o.stroke&&n.isPointInStroke,l,c;return u&&(l=o.strokeWidth,c=o.strokeCap,n.lineWidth=l??1,n.lineCap=c??"butt"),e(n,r)?!1:a&&n.isPointInPath(i,s)||u&&n.isPointInStroke(i,s)}}function vne(e){return a5(HR(e))}function W1(e,t){return"translate("+e+","+t+")"}function bne(e){return"rotate("+e+")"}function fVt(e,t){return"scale("+e+","+t+")"}function y6e(e){return W1(e.x||0,e.y||0)}function dVt(e){return W1(e.x||0,e.y||0)+(e.angle?" "+bne(e.angle):"")}function hVt(e){return W1(e.x||0,e.y||0)+(e.angle?" "+bne(e.angle):"")+(e.scaleX||e.scaleY?" "+fVt(e.scaleX||1,e.scaleY||1):"")}function _ne(e,t,n){function r(o,a){o("transform",dVt(a)),o("d",t(null,a))}function i(o,a){return t(VR(o,a.angle),a),mg(o,a).translate(a.x||0,a.y||0)}function s(o,a){var u=a.x||0,l=a.y||0,c=a.angle||0;o.translate(u,l),c&&o.rotate(c*=Ty),o.beginPath(),t(o,a),c&&o.rotate(-c),o.translate(-u,-l)}return{type:e,tag:"path",nested:!1,attr:r,bound:i,draw:yne(s),pick:vne(s),isect:n||pne(s)}}var pVt=_ne("arc",Jzt);function mVt(e,t){for(var n=e[0].orient==="horizontal"?t[1]:t[0],r=e[0].orient==="horizontal"?"y":"x",i=e.length,s=1/0,o,a;--i>=0;)e[i].defined!==!1&&(a=Math.abs(e[i][r]-n),a<s&&(s=a,o=e[i]));return o}function gVt(e,t){for(var n=Math.pow(e[0].strokeWidth||1,2),r=e.length,i,s,o;--r>=0;)if(e[r].defined!==!1&&(i=e[r].x-t[0],s=e[r].y-t[1],o=i*i+s*s,o<n))return e[r];return null}function yVt(e,t){for(var n=e.length,r,i,s;--n>=0;)if(e[n].defined!==!1&&(r=e[n].x-t[0],i=e[n].y-t[1],s=r*r+i*i,r=e[n].size||1,s<r*r))return e[n];return null}function wne(e,t,n){function r(u,l){var c=l.mark.items;c.length&&u("d",t(null,c))}function i(u,l){var c=l.items;return c.length===0?u:(t(VR(u),c),mg(u,c[0]))}function s(u,l){u.beginPath(),t(u,l)}const o=HR(s);function a(u,l,c,f,d,h){var p=l.items,m=l.bounds;return!p||!p.length||m&&!m.contains(d,h)?null:(c*=u.pixelRatio,f*=u.pixelRatio,o(u,p,c,f)?p[0]:null)}return{type:e,tag:"path",nested:!0,attr:r,bound:i,draw:cVt(s),pick:a,isect:mne,tip:n}}var vVt=wne("area",Zzt,mVt);function bVt(e,t){var n=t.clip;e.save(),wn(n)?(e.beginPath(),n(e),e.clip()):v6e(e,t.group)}function v6e(e,t){e.beginPath(),dne(t)?gT(e,t,0,0):e.rect(0,0,t.width||0,t.height||0),e.clip()}function b6e(e){const t=gf(e.strokeWidth,1);return e.strokeOffset!=null?e.strokeOffset:e.stroke&&t>.5&&t<1.5?.5-Math.abs(t-1):0}function _Vt(e,t){e("transform",y6e(t))}function _6e(e,t){const n=b6e(t);e("d",gT(null,t,n,n))}function wVt(e,t){e("class","background"),e("aria-hidden",!0),_6e(e,t)}function EVt(e,t){e("class","foreground"),e("aria-hidden",!0),t.strokeForeground?_6e(e,t):e("d","")}function xVt(e,t,n){const r=t.clip?hne(n,t,t):null;e("clip-path",r)}function SVt(e,t){if(!t.clip&&t.items){const n=t.items,r=n.length;for(let i=0;i<r;++i)e.union(n[i].bounds)}return(t.clip||t.width||t.height)&&!t.noBound&&e.add(0,0).add(t.width||0,t.height||0),mg(e,t),e.translate(t.x||0,t.y||0)}function ek(e,t,n,r){const i=b6e(t);e.beginPath(),gT(e,t,(n||0)+i,(r||0)+i)}const TVt=HR(ek),AVt=HR(ek,!1),CVt=HR(ek,!0);function IVt(e,t,n,r){od(t,i=>{const s=i.x||0,o=i.y||0,a=i.strokeForeground,u=i.opacity==null?1:i.opacity;(i.stroke||i.fill)&&u&&(ek(e,i,s,o),Vx(e,i),i.fill&&X3(e,i,u)&&e.fill(),i.stroke&&!a&&Hx(e,i,u)&&e.stroke()),e.save(),e.translate(s,o),i.clip&&v6e(e,i),n&&n.translate(-s,-o),od(i,l=>{(l.marktype==="group"||r==null||r.includes(l.marktype))&&this.draw(e,l,n,r)}),n&&n.translate(s,o),e.restore(),a&&i.stroke&&u&&(ek(e,i,s,o),Vx(e,i),Hx(e,i,u)&&e.stroke())})}function kVt(e,t,n,r,i,s){if(t.bounds&&!t.bounds.contains(i,s)||!t.items)return null;const o=n*e.pixelRatio,a=r*e.pixelRatio;return Q3(t,u=>{let l,c,f;const d=u.bounds;if(d&&!d.contains(i,s))return;c=u.x||0,f=u.y||0;const h=c+(u.width||0),p=f+(u.height||0),m=u.clip;if(m&&(i<c||i>h||s<f||s>p))return;if(e.save(),e.translate(c,f),c=i-c,f=s-f,m&&dne(u)&&!CVt(e,u,o,a))return e.restore(),null;const g=u.strokeForeground,y=t.interactive!==!1;return y&&g&&u.stroke&&AVt(e,u,o,a)?(e.restore(),u):(l=Q3(u,v=>RVt(v,c,f)?this.pick(v,n,r,c,f):null),!l&&y&&(u.fill||!g&&u.stroke)&&TVt(e,u,o,a)&&(l=u),e.restore(),l||null)})}function RVt(e,t,n){return(e.interactive!==!1||e.marktype==="group")&&e.bounds&&e.bounds.contains(t,n)}var NVt={type:"group",tag:"g",nested:!1,attr:_Vt,bound:SVt,draw:IVt,pick:kVt,isect:h6e,content:xVt,background:wVt,foreground:EVt},tk={xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",version:"1.1"};function Ene(e,t){var n=e.image;return(!n||e.url&&e.url!==n.url)&&(n={complete:!1,width:0,height:0},t.loadImage(e.url).then(r=>{e.image=r,e.image.url=e.url})),n}function xne(e,t){return e.width!=null?e.width:!t||!t.width?0:e.aspect!==!1&&e.height?e.height*t.width/t.height:t.width}function Sne(e,t){return e.height!=null?e.height:!t||!t.height?0:e.aspect!==!1&&e.width?e.width*t.height/t.width:t.height}function u5(e,t){return e==="center"?t/2:e==="right"?t:0}function l5(e,t){return e==="middle"?t/2:e==="bottom"?t:0}function PVt(e,t,n){const r=Ene(t,n),i=xne(t,r),s=Sne(t,r),o=(t.x||0)-u5(t.align,i),a=(t.y||0)-l5(t.baseline,s),u=!r.src&&r.toDataURL?r.toDataURL():r.src||"";e("href",u,tk["xmlns:xlink"],"xlink:href"),e("transform",W1(o,a)),e("width",i),e("height",s),e("preserveAspectRatio",t.aspect===!1?"none":"xMidYMid")}function OVt(e,t){const n=t.image,r=xne(t,n),i=Sne(t,n),s=(t.x||0)-u5(t.align,r),o=(t.y||0)-l5(t.baseline,i);return e.set(s,o,s+r,o+i)}function DVt(e,t,n){od(t,r=>{if(n&&!n.intersects(r.bounds))return;const i=Ene(r,this);let s=xne(r,i),o=Sne(r,i);if(s===0||o===0)return;let a=(r.x||0)-u5(r.align,s),u=(r.y||0)-l5(r.baseline,o),l,c,f,d;r.aspect!==!1&&(c=i.width/i.height,f=r.width/r.height,c===c&&f===f&&c!==f&&(f<c?(d=s/c,u+=(o-d)/2,o=d):(d=o*c,a+=(s-d)/2,s=d))),(i.complete||i.toDataURL)&&(Vx(e,r),e.globalAlpha=(l=r.opacity)!=null?l:1,e.imageSmoothingEnabled=r.smooth!==!1,e.drawImage(i,a,u,s,o))})}var $Vt={type:"image",tag:"image",nested:!1,attr:PVt,bound:OVt,draw:DVt,pick:a5(),isect:Vc,get:Ene,xOffset:u5,yOffset:l5},MVt=wne("line",eVt,gVt);function LVt(e,t){var n=t.scaleX||1,r=t.scaleY||1;(n!==1||r!==1)&&e("vector-effect","non-scaling-stroke"),e("transform",hVt(t)),e("d",t.path)}function kD(e,t){var n=t.path;if(n==null)return!0;var r=t.x||0,i=t.y||0,s=t.scaleX||1,o=t.scaleY||1,a=(t.angle||0)*Ty,u=t.pathCache;(!u||u.path!==n)&&((t.pathCache=u=zx(n)).path=n),a&&e.rotate&&e.translate?(e.translate(r,i),e.rotate(a),ZI(e,u,0,0,s,o),e.rotate(-a),e.translate(-r,-i)):ZI(e,u,r,i,s,o)}function FVt(e,t){return kD(VR(e,t.angle),t)?e.set(0,0,0,0):mg(e,t,!0)}var jVt={type:"path",tag:"path",nested:!1,attr:LVt,bound:FVt,draw:yne(kD),pick:vne(kD),isect:pne(kD)};function BVt(e,t){e("d",gT(null,t))}function UVt(e,t){var n,r;return mg(e.set(n=t.x||0,r=t.y||0,n+t.width||0,r+t.height||0),t)}function Ige(e,t){e.beginPath(),gT(e,t)}var zVt={type:"rect",tag:"path",nested:!1,attr:BVt,bound:UVt,draw:yne(Ige),pick:vne(Ige),isect:h6e};function VVt(e,t){e("transform",y6e(t)),e("x2",t.x2!=null?t.x2-(t.x||0):0),e("y2",t.y2!=null?t.y2-(t.y||0):0)}function HVt(e,t){var n,r;return mg(e.set(n=t.x||0,r=t.y||0,t.x2!=null?t.x2:n,t.y2!=null?t.y2:r),t)}function w6e(e,t,n){var r,i,s,o;return t.stroke&&Hx(e,t,n)?(r=t.x||0,i=t.y||0,s=t.x2!=null?t.x2:r,o=t.y2!=null?t.y2:i,e.beginPath(),e.moveTo(r,i),e.lineTo(s,o),!0):!1}function qVt(e,t,n){od(t,r=>{if(!(n&&!n.intersects(r.bounds))){var i=r.opacity==null?1:r.opacity;i&&w6e(e,r,i)&&(Vx(e,r),e.stroke())}})}function WVt(e,t,n,r){return e.isPointInStroke?w6e(e,t,1)&&e.isPointInStroke(n,r):!1}var GVt={type:"rule",tag:"line",nested:!1,attr:VVt,bound:HVt,draw:qVt,pick:a5(WVt),isect:p6e},YVt=_ne("shape",tVt),KVt=_ne("symbol",nVt,mne);const kge=s3e();var Ll={height:ap,measureWidth:Tne,estimateWidth:J3,width:J3,canvas:E6e};E6e(!0);function E6e(e){Ll.width=e&&H0?Tne:J3}function J3(e,t){return x6e(Cy(e,t),ap(e))}function x6e(e,t){return~~(.8*e.length*t)}function Tne(e,t){return ap(e)<=0||!(t=Cy(e,t))?0:S6e(t,c5(e))}function S6e(e,t){const n=`(${t}) ${e}`;let r=kge.get(n);return r===void 0&&(H0.font=t,r=H0.measureText(e).width,kge.set(n,r)),r}function ap(e){return e.fontSize!=null?+e.fontSize||0:11}function Ay(e){return e.lineHeight!=null?e.lineHeight:ap(e)+2}function XVt(e){return je(e)?e.length>1?e:e[0]:e}function qR(e){return XVt(e.lineBreak&&e.text&&!je(e.text)?e.text.split(e.lineBreak):e.text)}function Ane(e){const t=qR(e);return(je(t)?t.length-1:0)*Ay(e)}function Cy(e,t){const n=t==null?"":(t+"").trim();return e.limit>0&&n.length?JVt(e,n):n}function QVt(e){if(Ll.width===Tne){const t=c5(e);return n=>S6e(n,t)}else if(Ll.width===J3){const t=ap(e);return n=>x6e(n,t)}else return t=>Ll.width(e,t)}function JVt(e,t){var n=+e.limit,r=QVt(e);if(r(t)<n)return t;var i=e.ellipsis||"",s=e.dir==="rtl",o=0,a=t.length,u;if(n-=r(i),s){for(;o<a;)u=o+a>>>1,r(t.slice(u))>n?o=u+1:a=u;return i+t.slice(o)}else{for(;o<a;)u=1+(o+a>>>1),r(t.slice(0,u))<n?o=u:a=u-1;return t.slice(0,o)+i}}function WR(e,t){var n=e.font;return(t&&n?String(n).replace(/"/g,"'"):n)||"sans-serif"}function c5(e,t){return(e.fontStyle?e.fontStyle+" ":"")+(e.fontVariant?e.fontVariant+" ":"")+(e.fontWeight?e.fontWeight+" ":"")+ap(e)+"px "+WR(e,t)}function Cne(e){var t=e.baseline,n=ap(e);return Math.round(t==="top"?.79*n:t==="middle"?.3*n:t==="bottom"?-.21*n:t==="line-top"?.29*n+.5*Ay(e):t==="line-bottom"?.29*n-.5*Ay(e):0)}const ZVt={left:"start",center:"middle",right:"end"},v2=new Is;function f5(e){var t=e.x||0,n=e.y||0,r=e.radius||0,i;return r&&(i=(e.theta||0)-c1,t+=r*Math.cos(i),n+=r*Math.sin(i)),v2.x1=t,v2.y1=n,v2}function eHt(e,t){var n=t.dx||0,r=(t.dy||0)+Cne(t),i=f5(t),s=i.x1,o=i.y1,a=t.angle||0,u;e("text-anchor",ZVt[t.align]||"start"),a?(u=W1(s,o)+" "+bne(a),(n||r)&&(u+=" "+W1(n,r))):u=W1(s+n,o+r),e("transform",u)}function Ine(e,t,n){var r=Ll.height(t),i=t.align,s=f5(t),o=s.x1,a=s.y1,u=t.dx||0,l=(t.dy||0)+Cne(t)-Math.round(.8*r),c=qR(t),f;if(je(c)?(r+=Ay(t)*(c.length-1),f=c.reduce((d,h)=>Math.max(d,Ll.width(t,h)),0)):f=Ll.width(t,c),i==="center"?u-=f/2:i==="right"&&(u-=f),e.set(u+=o,l+=a,u+f,l+r),t.angle&&!n)e.rotate(t.angle*Ty,o,a);else if(n===2)return e.rotatedPoints(t.angle*Ty,o,a);return e}function tHt(e,t,n){od(t,r=>{var i=r.opacity==null?1:r.opacity,s,o,a,u,l,c,f;if(!(n&&!n.intersects(r.bounds)||i===0||r.fontSize<=0||r.text==null||r.text.length===0)){if(e.font=c5(r),e.textAlign=r.align||"left",s=f5(r),o=s.x1,a=s.y1,r.angle&&(e.save(),e.translate(o,a),e.rotate(r.angle*Ty),o=a=0),o+=r.dx||0,a+=(r.dy||0)+Cne(r),c=qR(r),Vx(e,r),je(c))for(l=Ay(r),u=0;u<c.length;++u)f=Cy(r,c[u]),r.fill&&X3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Hx(e,r,i)&&e.strokeText(f,o,a),a+=l;else f=Cy(r,c),r.fill&&X3(e,r,i)&&e.fillText(f,o,a),r.stroke&&Hx(e,r,i)&&e.strokeText(f,o,a);r.angle&&e.restore()}})}function nHt(e,t,n,r,i,s){if(t.fontSize<=0)return!1;if(!t.angle)return!0;var o=f5(t),a=o.x1,u=o.y1,l=Ine(v2,t,1),c=-t.angle*Ty,f=Math.cos(c),d=Math.sin(c),h=f*i-d*s+(a-f*a+d*u),p=d*i+f*s+(u-d*a-f*u);return l.contains(h,p)}function rHt(e,t){const n=Ine(v2,e,2);return Jw(t,n[0],n[1],n[2],n[3])||Jw(t,n[0],n[1],n[4],n[5])||Jw(t,n[4],n[5],n[6],n[7])||Jw(t,n[2],n[3],n[6],n[7])}var iHt={type:"text",tag:"text",nested:!1,attr:eHt,bound:Ine,draw:tHt,pick:a5(nHt),isect:rHt},sHt=wne("trail",rVt,yVt),Ql={arc:pVt,area:vVt,group:NVt,image:$Vt,line:MVt,path:jVt,rect:zVt,rule:GVt,shape:YVt,symbol:KVt,text:iHt,trail:sHt};function Sq(e,t,n){var r=Ql[e.mark.marktype],i=t||r.bound;return r.nested&&(e=e.mark),i(e.bounds||(e.bounds=new Is),e,n)}var Rge={mark:null};function T6e(e,t,n){var r=Ql[e.marktype],i=r.bound,s=e.items,o=s&&s.length,a,u,l,c;if(r.nested)return o?l=s[0]:(Rge.mark=e,l=Rge),c=Sq(l,i,n),t=t&&t.union(c)||c,t;if(t=t||e.bounds&&e.bounds.clear()||new Is,o)for(a=0,u=s.length;a<u;++a)t.union(Sq(s[a],i,n));return e.bounds=t}const oHt=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","blend","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","strokeForeground","strokeOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight","interpolate","tension","orient","defined","url","aspect","smooth","path","scaleX","scaleY","x2","y2","size","shape","text","angle","theta","radius","dir","dx","dy","ellipsis","limit","lineBreak","lineHeight","font","fontSize","fontWeight","fontStyle","fontVariant","description","aria","ariaRole","ariaRoleDescription"];function A6e(e,t){return JSON.stringify(e,oHt,t)}function C6e(e){const t=typeof e=="string"?JSON.parse(e):e;return I6e(t)}function I6e(e){var t=e.marktype,n=e.items,r,i,s;if(n)for(i=0,s=n.length;i<s;++i)r=t?"mark":"group",n[i][r]=e,n[i].zindex&&(n[i][r].zdirty=!0),(t||r)==="group"&&I6e(n[i]);return t&&T6e(e),e}class k6e{constructor(t){arguments.length?this.root=C6e(t):(this.root=Nge({marktype:"group",name:"root",role:"frame"}),this.root.items=[new s5(this.root)])}toJSON(t){return A6e(this.root,t||0)}mark(t,n,r){n=n||this.root.items[0];const i=Nge(t,n);return n.items[r]=i,i.zindex&&(i.group.zdirty=!0),i}}function Nge(e,t){const n={bounds:new Is,clip:!!e.clip,group:t,interactive:e.interactive!==!1,items:[],marktype:e.marktype,name:e.name||void 0,role:e.role||void 0,zindex:e.zindex||0};return e.aria!=null&&(n.aria=e.aria),e.description&&(n.description=e.description),n}function p0(e,t,n){return!e&&typeof document<"u"&&document.createElement&&(e=document),e?n?e.createElementNS(n,t):e.createElement(t):null}function kne(e,t){t=t.toLowerCase();for(var n=e.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===t)return n[r]}function Ms(e,t,n,r){var i=e.childNodes[t],s;return(!i||i.tagName.toLowerCase()!==n.toLowerCase())&&(s=i||null,i=p0(e.ownerDocument,n,r),e.insertBefore(i,s)),i}function Sc(e,t){for(var n=e.childNodes,r=n.length;r>t;)e.removeChild(n[--r]);return e}function R6e(e){return"mark-"+e.marktype+(e.role?" role-"+e.role:"")+(e.name?" "+e.name:"")}function d5(e,t){const n=t.getBoundingClientRect();return[e.clientX-n.left-(t.clientLeft||0),e.clientY-n.top-(t.clientTop||0)]}function aHt(e,t,n,r){var i=e&&e.mark,s,o;if(i&&(s=Ql[i.marktype]).tip){for(o=d5(t,n),o[0]-=r[0],o[1]-=r[1];e=e.mark.group;)o[0]-=e.x||0,o[1]-=e.y||0;e=s.tip(i.items,o)}return e}let Rne=class{constructor(t,n){this._active=null,this._handlers={},this._loader=t||U4(),this._tooltip=n||uHt}initialize(t,n,r){return this._el=t,this._obj=r||null,this.origin(n)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}origin(t){return arguments.length?(this._origin=t||[0,0],this):this._origin.slice()}scene(t){return arguments.length?(this._scene=t,this):this._scene}on(){}off(){}_handlerIndex(t,n,r){for(let i=t?t.length:0;--i>=0;)if(t[i].type===n&&(!r||t[i].handler===r))return i;return-1}handlers(t){const n=this._handlers,r=[];if(t)r.push(...n[this.eventName(t)]);else for(const i in n)r.push(...n[i]);return r}eventName(t){const n=t.indexOf(".");return n<0?t:t.slice(0,n)}handleHref(t,n,r){this._loader.sanitize(r,{context:"href"}).then(i=>{const s=new MouseEvent(t.type,t),o=p0(null,"a");for(const a in i)o.setAttribute(a,i[a]);o.dispatchEvent(s)}).catch(()=>{})}handleTooltip(t,n,r){if(n&&n.tooltip!=null){n=aHt(n,t,this.canvas(),this._origin);const i=r&&n&&n.tooltip||null;this._tooltip.call(this._obj,this,t,n,i)}}getItemBoundingClientRect(t){const n=this.canvas();if(!n)return;const r=n.getBoundingClientRect(),i=this._origin,s=t.bounds,o=s.width(),a=s.height();let u=s.x1+i[0]+r.left,l=s.y1+i[1]+r.top;for(;t.mark&&(t=t.mark.group);)u+=t.x||0,l+=t.y||0;return{x:u,y:l,width:o,height:a,left:u,top:l,right:u+o,bottom:l+a}}};function uHt(e,t,n,r){e.element().setAttribute("title",r||"")}class GR{constructor(t){this._el=null,this._bgcolor=null,this._loader=new d6e(t)}initialize(t,n,r,i,s){return this._el=t,this.resize(n,r,i,s)}element(){return this._el}canvas(){return this._el&&this._el.firstChild}background(t){return arguments.length===0?this._bgcolor:(this._bgcolor=t,this)}resize(t,n,r,i){return this._width=t,this._height=n,this._origin=r||[0,0],this._scale=i||1,this}dirty(){}render(t,n){const r=this;return r._call=function(){r._render(t,n)},r._call(),r._call=null,r}_render(){}renderAsync(t,n){const r=this.render(t,n);return this._ready?this._ready.then(()=>r):Promise.resolve(r)}_load(t,n){var r=this,i=r._loader[t](n);if(!r._ready){const s=r._call;r._ready=r._loader.ready().then(o=>{o&&s(),r._ready=null})}return i}sanitizeURL(t){return this._load("sanitizeURL",t)}loadImage(t){return this._load("loadImage",t)}}const lHt="keydown",cHt="keypress",fHt="keyup",N6e="dragenter",RD="dragleave",P6e="dragover",Tq="pointerdown",dHt="pointerup",Z3="pointermove",ND="pointerout",O6e="pointerover",Aq="mousedown",hHt="mouseup",D6e="mousemove",eL="mouseout",$6e="mouseover",tL="click",pHt="dblclick",mHt="wheel",M6e="mousewheel",nL="touchstart",rL="touchmove",iL="touchend",gHt=[lHt,cHt,fHt,N6e,RD,P6e,Tq,dHt,Z3,ND,O6e,Aq,hHt,D6e,eL,$6e,tL,pHt,mHt,M6e,nL,rL,iL],Cq=Z3,b2=eL,Iq=tL;class YR extends Rne{constructor(t,n){super(t,n),this._down=null,this._touch=null,this._first=!0,this._events={},this.events=gHt,this.pointermove=Oge([Z3,D6e],[O6e,$6e],[ND,eL]),this.dragover=Oge([P6e],[N6e],[RD]),this.pointerout=Dge([ND,eL]),this.dragleave=Dge([RD])}initialize(t,n,r){return this._canvas=t&&kne(t,"canvas"),[tL,Aq,Tq,Z3,ND,RD].forEach(i=>Pge(this,i)),super.initialize(t,n,r)}canvas(){return this._canvas}context(){return this._canvas.getContext("2d")}DOMMouseScroll(t){this.fire(M6e,t)}pointerdown(t){this._down=this._active,this.fire(Tq,t)}mousedown(t){this._down=this._active,this.fire(Aq,t)}click(t){this._down===this._active&&(this.fire(tL,t),this._down=null)}touchstart(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire(nL,t,!0)}touchmove(t){this.fire(rL,t,!0)}touchend(t){this.fire(iL,t,!0),this._touch=null}fire(t,n,r){const i=r?this._touch:this._active,s=this._handlers[t];if(n.vegaType=t,t===Iq&&i&&i.href?this.handleHref(n,i,i.href):(t===Cq||t===b2)&&this.handleTooltip(n,i,t!==b2),s)for(let o=0,a=s.length;o<a;++o)s[o].handler.call(this._obj,n,i)}on(t,n){const r=this.eventName(t),i=this._handlers;return this._handlerIndex(i[r],t,n)<0&&(Pge(this,t),(i[r]||(i[r]=[])).push({type:t,handler:n})),this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&i.splice(s,1),this}pickEvent(t){const n=d5(t,this._canvas),r=this._origin;return this.pick(this._scene,n[0],n[1],n[0]-r[0],n[1]-r[1])}pick(t,n,r,i,s){const o=this.context();return Ql[t.marktype].pick.call(this,o,t,n,r,i,s)}}const yHt=e=>e===nL||e===rL||e===iL?[nL,rL,iL]:[e];function Pge(e,t){yHt(t).forEach(n=>vHt(e,n))}function vHt(e,t){const n=e.canvas();n&&!e._events[t]&&(e._events[t]=1,n.addEventListener(t,e[t]?r=>e[t](r):r=>e.fire(t,r)))}function bC(e,t,n){t.forEach(r=>e.fire(r,n))}function Oge(e,t,n){return function(r){const i=this._active,s=this.pickEvent(r);s===i?bC(this,e,r):((!i||!i.exit)&&bC(this,n,r),this._active=s,bC(this,t,r),bC(this,e,r))}}function Dge(e){return function(t){bC(this,e,t),this._active=null}}function bHt(){return typeof window<"u"&&window.devicePixelRatio||1}function _Ht(e,t,n,r,i,s){const o=typeof HTMLElement<"u"&&e instanceof HTMLElement&&e.parentNode!=null,a=e.getContext("2d"),u=o?bHt():i;e.width=t*u,e.height=n*u;for(const l in s)a[l]=s[l];return o&&u!==1&&(e.style.width=t+"px",e.style.height=n+"px"),a.pixelRatio=u,a.setTransform(u,0,0,u,u*r[0],u*r[1]),e}class sL extends GR{constructor(t){super(t),this._options={},this._redraw=!1,this._dirty=new Is,this._tempb=new Is}initialize(t,n,r,i,s,o){return this._options=o||{},this._canvas=this._options.externalContext?null:V0(1,1,this._options.type),t&&this._canvas&&(Sc(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),super.initialize(t,n,r,i,s)}resize(t,n,r,i){if(super.resize(t,n,r,i),this._canvas)_Ht(this._canvas,this._width,this._height,this._origin,this._scale,this._options.context);else{const s=this._options.externalContext;s||Le("CanvasRenderer is missing a valid canvas or context"),s.scale(this._scale,this._scale),s.translate(this._origin[0],this._origin[1])}return this._redraw=!0,this}canvas(){return this._canvas}context(){return this._options.externalContext||(this._canvas?this._canvas.getContext("2d"):null)}dirty(t){const n=this._tempb.clear().union(t.bounds);let r=t.mark.group;for(;r;)n.translate(r.x||0,r.y||0),r=r.mark.group;this._dirty.union(n)}_render(t,n){const r=this.context(),i=this._origin,s=this._width,o=this._height,a=this._dirty,u=wHt(i,s,o);r.save();const l=this._redraw||a.empty()?(this._redraw=!1,u.expand(1)):EHt(r,u.intersect(a),i);return this.clear(-i[0],-i[1],s,o),this.draw(r,t,l,n),r.restore(),a.clear(),this}draw(t,n,r,i){if(n.marktype!=="group"&&i!=null&&!i.includes(n.marktype))return;const s=Ql[n.marktype];n.clip&&bVt(t,n),s.draw.call(this,t,n,r,i),n.clip&&t.restore()}clear(t,n,r,i){const s=this._options,o=this.context();s.type!=="pdf"&&!s.externalContext&&o.clearRect(t,n,r,i),this._bgcolor!=null&&(o.fillStyle=this._bgcolor,o.fillRect(t,n,r,i))}}const wHt=(e,t,n)=>new Is().set(0,0,t,n).translate(-e[0],-e[1]);function EHt(e,t,n){return t.expand(1).round(),e.pixelRatio%1&&t.scale(e.pixelRatio).round().scale(1/e.pixelRatio),t.translate(-(n[0]%1),-(n[1]%1)),e.beginPath(),e.rect(t.x1,t.y1,t.width(),t.height()),e.clip(),t}class L6e extends Rne{constructor(t,n){super(t,n);const r=this;r._hrefHandler=G9(r,(i,s)=>{s&&s.href&&r.handleHref(i,s,s.href)}),r._tooltipHandler=G9(r,(i,s)=>{r.handleTooltip(i,s,i.type!==b2)})}initialize(t,n,r){let i=this._svg;return i&&(i.removeEventListener(Iq,this._hrefHandler),i.removeEventListener(Cq,this._tooltipHandler),i.removeEventListener(b2,this._tooltipHandler)),this._svg=i=t&&kne(t,"svg"),i&&(i.addEventListener(Iq,this._hrefHandler),i.addEventListener(Cq,this._tooltipHandler),i.addEventListener(b2,this._tooltipHandler)),super.initialize(t,n,r)}canvas(){return this._svg}on(t,n){const r=this.eventName(t),i=this._handlers;if(this._handlerIndex(i[r],t,n)<0){const o={type:t,handler:n,listener:G9(this,n)};(i[r]||(i[r]=[])).push(o),this._svg&&this._svg.addEventListener(r,o.listener)}return this}off(t,n){const r=this.eventName(t),i=this._handlers[r],s=this._handlerIndex(i,t,n);return s>=0&&(this._svg&&this._svg.removeEventListener(r,i[s].listener),i.splice(s,1)),this}}const G9=(e,t)=>n=>{let r=n.target.__data__;r=Array.isArray(r)?r[0]:r,n.vegaType=n.type,t.call(e._obj,n,r)},F6e="aria-hidden",Nne="aria-label",Pne="role",One="aria-roledescription",j6e="graphics-object",Dne="graphics-symbol",B6e=(e,t,n)=>({[Pne]:e,[One]:t,[Nne]:n||void 0}),xHt=id(["axis-domain","axis-grid","axis-label","axis-tick","axis-title","legend-band","legend-entry","legend-gradient","legend-label","legend-title","legend-symbol","title"]),$ge={axis:{desc:"axis",caption:AHt},legend:{desc:"legend",caption:CHt},"title-text":{desc:"title",caption:e=>`Title text '${Lge(e)}'`},"title-subtitle":{desc:"subtitle",caption:e=>`Subtitle text '${Lge(e)}'`}},Mge={ariaRole:Pne,ariaRoleDescription:One,description:Nne};function U6e(e,t){const n=t.aria===!1;if(e(F6e,n||void 0),n||t.description==null)for(const r in Mge)e(Mge[r],void 0);else{const r=t.mark.marktype;e(Nne,t.description),e(Pne,t.ariaRole||(r==="group"?j6e:Dne)),e(One,t.ariaRoleDescription||`${r} mark`)}}function z6e(e){return e.aria===!1?{[F6e]:!0}:xHt[e.role]?null:$ge[e.role]?THt(e,$ge[e.role]):SHt(e)}function SHt(e){const t=e.marktype,n=t==="group"||t==="text"||e.items.some(r=>r.description!=null&&r.aria!==!1);return B6e(n?j6e:Dne,`${t} mark container`,e.description)}function THt(e,t){try{const n=e.items[0],r=t.caption||(()=>"");return B6e(t.role||Dne,t.desc,n.description||r(n))}catch{return null}}function Lge(e){return pt(e.text).join(" ")}function AHt(e){const t=e.datum,n=e.orient,r=t.title?V6e(e):null,i=e.context,s=i.scales[t.scale].value,o=i.dataflow.locale(),a=s.type;return`${n==="left"||n==="right"?"Y":"X"}-axis`+(r?` titled '${r}'`:"")+` for a ${Ux(a)?"discrete":a} scale with ${n6e(o,s,e)}`}function CHt(e){const t=e.datum,n=t.title?V6e(e):null,r=`${t.type||""} legend`.trim(),i=t.scales,s=Object.keys(i),o=e.context,a=o.scales[i[s[0]]].value,u=o.dataflow.locale();return kHt(r)+(n?` titled '${n}'`:"")+` for ${IHt(s)} with ${n6e(u,a,e)}`}function V6e(e){try{return pt(Zn(e.items).items[0].text).join(" ")}catch{return null}}function IHt(e){return e=e.map(t=>t+(t==="fill"||t==="stroke"?" color":"")),e.length<2?e[0]:e.slice(0,-1).join(", ")+" and "+Zn(e)}function kHt(e){return e.length?e[0].toUpperCase()+e.slice(1):e}const H6e=e=>(e+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),RHt=e=>H6e(e).replace(/"/g,"&quot;").replace(/\t/g,"&#x9;").replace(/\n/g,"&#xA;").replace(/\r/g,"&#xD;");function $ne(){let e="",t="",n="";const r=[],i=()=>t=n="",s=u=>{t&&(e+=`${t}>${n}`,i()),r.push(u)},o=(u,l)=>(l!=null&&(t+=` ${u}="${RHt(l)}"`),a),a={open(u){s(u),t="<"+u;for(var l=arguments.length,c=new Array(l>1?l-1:0),f=1;f<l;f++)c[f-1]=arguments[f];for(const d of c)for(const h in d)o(h,d[h]);return a},close(){const u=r.pop();return t?e+=t+(n?`>${n}</${u}>`:"/>"):e+=`</${u}>`,i(),a},attr:o,text:u=>(n+=H6e(u),a),toString:()=>e};return a}const q6e=e=>W6e($ne(),e)+"";function W6e(e,t){if(e.open(t.tagName),t.hasAttributes()){const n=t.attributes,r=n.length;for(let i=0;i<r;++i)e.attr(n[i].name,n[i].value)}if(t.hasChildNodes()){const n=t.childNodes;for(const r of n)r.nodeType===3?e.text(r.nodeValue):W6e(e,r)}return e.close()}const oL={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},aL={blend:"mix-blend-mode"},G6e={fill:"none","stroke-miterlimit":10},yA=0,Fge="http://www.w3.org/2000/xmlns/",Ds=tk.xmlns;class Mne extends GR{constructor(t){super(t),this._dirtyID=0,this._dirty=[],this._svg=null,this._root=null,this._defs=null}initialize(t,n,r,i,s){return this._defs={},this._clearDefs(),t&&(this._svg=Ms(t,0,"svg",Ds),this._svg.setAttributeNS(Fge,"xmlns",Ds),this._svg.setAttributeNS(Fge,"xmlns:xlink",tk["xmlns:xlink"]),this._svg.setAttribute("version",tk.version),this._svg.setAttribute("class","marks"),Sc(t,1),this._root=Ms(this._svg,yA,"g",Ds),m0(this._root,G6e),Sc(this._svg,yA+1)),this.background(this._bgcolor),super.initialize(t,n,r,i,s)}background(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),super.background(...arguments)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svg&&(m0(this._svg,{width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}),this._root.setAttribute("transform",`translate(${this._origin})`)),this._dirty=[],this}canvas(){return this._svg}svg(){const t=this._svg,n=this._bgcolor;if(!t)return null;let r;n&&(t.removeAttribute("style"),r=Ms(t,yA,"rect",Ds),m0(r,{width:this._width,height:this._height,fill:n}));const i=q6e(t);return n&&(t.removeChild(r),this._svg.style.setProperty("background-color",n)),i}_render(t,n){return this._dirtyCheck()&&(this._dirtyAll&&this._clearDefs(),this.mark(this._root,t,void 0,n),Sc(this._root,1)),this.defs(),this._dirty=[],++this._dirtyID,this}dirty(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))}isDirty(t){return this._dirtyAll||!t._svg||!t._svg.ownerSVGElement||t.dirty===this._dirtyID}_dirtyCheck(){this._dirtyAll=!0;const t=this._dirty;if(!t.length||!this._dirtyID)return!0;const n=++this._dirtyID;let r,i,s,o,a,u,l;for(a=0,u=t.length;a<u;++a)if(r=t[a],i=r.mark,i.marktype!==s&&(s=i.marktype,o=Ql[s]),i.zdirty&&i.dirty!==n&&(this._dirtyAll=!1,jge(r,n),i.items.forEach(c=>{c.dirty=n})),!i.zdirty){if(r.exit){o.nested&&i.items.length?(l=i.items[0],l._svg&&this._update(o,l._svg,l)):r._svg&&(l=r._svg.parentNode,l&&l.removeChild(r._svg)),r._svg=null;continue}r=o.nested?i.items[0]:r,r._update!==n&&(!r._svg||!r._svg.ownerSVGElement?(this._dirtyAll=!1,jge(r,n)):this._update(o,r._svg,r),r._update=n)}return!this._dirtyAll}mark(t,n,r,i){if(!this.isDirty(n))return n._svg;const s=this._svg,o=n.marktype,a=Ql[o],u=n.interactive===!1?"none":null,l=a.tag==="g",c=Bge(n,t,r,"g",s);if(o!=="group"&&i!=null&&!i.includes(o))return Sc(c,0),n._svg;c.setAttribute("class",R6e(n));const f=z6e(n);for(const m in f)Fa(c,m,f[m]);l||Fa(c,"pointer-events",u),Fa(c,"clip-path",n.clip?hne(this,n,n.group):null);let d=null,h=0;const p=m=>{const g=this.isDirty(m),y=Bge(m,c,d,a.tag,s);g&&(this._update(a,y,m),l&&OHt(this,y,m,i)),d=y,++h};return a.nested?n.items.length&&p(n.items[0]):od(n,p),Sc(c,h),c}_update(t,n,r){sm=n,ua=n.__values__,U6e(_2,r),t.attr(_2,r,this);const i=$Ht[t.type];i&&i.call(this,t,n,r),sm&&this.style(sm,r)}style(t,n){if(n!=null){for(const r in oL){let i=r==="font"?WR(n):n[r];if(i===ua[r])continue;const s=oL[r];i==null?t.removeAttribute(s):(cne(i)&&(i=i6e(i,this._defs.gradient,Y6e())),t.setAttribute(s,i+"")),ua[r]=i}for(const r in aL)PD(t,aL[r],n[r])}}defs(){const t=this._svg,n=this._defs;let r=n.el,i=0;for(const s in n.gradient)r||(n.el=r=Ms(t,yA+1,"defs",Ds)),i=NHt(r,n.gradient[s],i);for(const s in n.clipping)r||(n.el=r=Ms(t,yA+1,"defs",Ds)),i=PHt(r,n.clipping[s],i);r&&(i===0?(t.removeChild(r),n.el=null):Sc(r,i))}_clearDefs(){const t=this._defs;t.gradient={},t.clipping={}}}function jge(e,t){for(;e&&e.dirty!==t;e=e.mark.group)if(e.dirty=t,e.mark&&e.mark.dirty!==t)e.mark.dirty=t;else return}function NHt(e,t,n){let r,i,s;if(t.gradient==="radial"){let o=Ms(e,n++,"pattern",Ds);m0(o,{id:K3+t.id,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),o=Ms(o,0,"rect",Ds),m0(o,{width:1,height:1,fill:`url(${Y6e()}#${t.id})`}),e=Ms(e,n++,"radialGradient",Ds),m0(e,{id:t.id,fx:t.x1,fy:t.y1,fr:t.r1,cx:t.x2,cy:t.y2,r:t.r2})}else e=Ms(e,n++,"linearGradient",Ds),m0(e,{id:t.id,x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2});for(r=0,i=t.stops.length;r<i;++r)s=Ms(e,r,"stop",Ds),s.setAttribute("offset",t.stops[r].offset),s.setAttribute("stop-color",t.stops[r].color);return Sc(e,r),n}function PHt(e,t,n){let r;return e=Ms(e,n,"clipPath",Ds),e.setAttribute("id",t.id),t.path?(r=Ms(e,0,"path",Ds),r.setAttribute("d",t.path)):(r=Ms(e,0,"rect",Ds),m0(r,{x:0,y:0,width:t.width,height:t.height})),Sc(e,1),n+1}function OHt(e,t,n,r){t=t.lastChild.previousSibling;let i,s=0;od(n,o=>{i=e.mark(t,o,i,r),++s}),Sc(t,1+s)}function Bge(e,t,n,r,i){let s=e._svg,o;if(!s&&(o=t.ownerDocument,s=p0(o,r,Ds),e._svg=s,e.mark&&(s.__data__=e,s.__values__={fill:"default"},r==="g"))){const a=p0(o,"path",Ds);s.appendChild(a),a.__data__=e;const u=p0(o,"g",Ds);s.appendChild(u),u.__data__=e;const l=p0(o,"path",Ds);s.appendChild(l),l.__data__=e,l.__values__={fill:"default"}}return(s.ownerSVGElement!==i||DHt(s,n))&&t.insertBefore(s,n?n.nextSibling:t.firstChild),s}function DHt(e,t){return e.parentNode&&e.parentNode.childNodes.length>1&&e.previousSibling!=t}let sm=null,ua=null;const $Ht={group(e,t,n){const r=sm=t.childNodes[2];ua=r.__values__,e.foreground(_2,n,this),ua=t.__values__,sm=t.childNodes[1],e.content(_2,n,this);const i=sm=t.childNodes[0];e.background(_2,n,this);const s=n.mark.interactive===!1?"none":null;if(s!==ua.events&&(Fa(r,"pointer-events",s),Fa(i,"pointer-events",s),ua.events=s),n.strokeForeground&&n.stroke){const o=n.fill;Fa(r,"display",null),this.style(i,n),Fa(i,"stroke",null),o&&(n.fill=null),ua=r.__values__,this.style(r,n),o&&(n.fill=o),sm=null}else Fa(r,"display","none")},image(e,t,n){n.smooth===!1?(PD(t,"image-rendering","optimizeSpeed"),PD(t,"image-rendering","pixelated")):PD(t,"image-rendering",null)},text(e,t,n){const r=qR(n);let i,s,o,a;je(r)?(s=r.map(u=>Cy(n,u)),i=s.join(`
`),i!==ua.text&&(Sc(t,0),o=t.ownerDocument,a=Ay(n),s.forEach((u,l)=>{const c=p0(o,"tspan",Ds);c.__data__=n,c.textContent=u,l&&(c.setAttribute("x",0),c.setAttribute("dy",a)),t.appendChild(c)}),ua.text=i)):(s=Cy(n,r),s!==ua.text&&(t.textContent=s,ua.text=s)),Fa(t,"font-family",WR(n)),Fa(t,"font-size",ap(n)+"px"),Fa(t,"font-style",n.fontStyle),Fa(t,"font-variant",n.fontVariant),Fa(t,"font-weight",n.fontWeight)}};function _2(e,t,n){t!==ua[e]&&(n?MHt(sm,e,t,n):Fa(sm,e,t),ua[e]=t)}function PD(e,t,n){n!==ua[t]&&(n==null?e.style.removeProperty(t):e.style.setProperty(t,n+""),ua[t]=n)}function m0(e,t){for(const n in t)Fa(e,n,t[n])}function Fa(e,t,n){n!=null?e.setAttribute(t,n):e.removeAttribute(t)}function MHt(e,t,n,r){n!=null?e.setAttributeNS(r,t,n):e.removeAttributeNS(r,t)}function Y6e(){let e;return typeof window>"u"?"":(e=window.location).hash?e.href.slice(0,-e.hash.length):e.href}class K6e extends GR{constructor(t){super(t),this._text=null,this._defs={gradient:{},clipping:{}}}svg(){return this._text}_render(t){const n=$ne();n.open("svg",_n({},tk,{class:"marks",width:this._width*this._scale,height:this._height*this._scale,viewBox:`0 0 ${this._width} ${this._height}`}));const r=this._bgcolor;return r&&r!=="transparent"&&r!=="none"&&n.open("rect",{width:this._width,height:this._height,fill:r}).close(),n.open("g",G6e,{transform:"translate("+this._origin+")"}),this.mark(n,t),n.close(),this.defs(n),this._text=n.close()+"",this}mark(t,n){const r=Ql[n.marktype],i=r.tag,s=[U6e,r.attr];t.open("g",{class:R6e(n),"clip-path":n.clip?hne(this,n,n.group):null},z6e(n),{"pointer-events":i!=="g"&&n.interactive===!1?"none":null});const o=a=>{const u=this.href(a);if(u&&t.open("a",u),t.open(i,this.attr(n,a,s,i!=="g"?i:null)),i==="text"){const l=qR(a);if(je(l)){const c={x:0,dy:Ay(a)};for(let f=0;f<l.length;++f)t.open("tspan",f?c:null).text(Cy(a,l[f])).close()}else t.text(Cy(a,l))}else if(i==="g"){const l=a.strokeForeground,c=a.fill,f=a.stroke;l&&f&&(a.stroke=null),t.open("path",this.attr(n,a,r.background,"bgrect")).close(),t.open("g",this.attr(n,a,r.content)),od(a,d=>this.mark(t,d)),t.close(),l&&f?(c&&(a.fill=null),a.stroke=f,t.open("path",this.attr(n,a,r.foreground,"bgrect")).close(),c&&(a.fill=c)):t.open("path",this.attr(n,a,r.foreground,"bgfore")).close()}t.close(),u&&t.close()};return r.nested?n.items&&n.items.length&&o(n.items[0]):od(n,o),t.close()}href(t){const n=t.href;let r;if(n){if(r=this._hrefs&&this._hrefs[n])return r;this.sanitizeURL(n).then(i=>{i["xlink:href"]=i.href,i.href=null,(this._hrefs||(this._hrefs={}))[n]=i})}return null}attr(t,n,r,i){const s={},o=(a,u,l,c)=>{s[c||a]=u};return Array.isArray(r)?r.forEach(a=>a(o,n,this)):r(o,n,this),i&&LHt(s,n,t,i,this._defs),s}defs(t){const n=this._defs.gradient,r=this._defs.clipping;if(Object.keys(n).length+Object.keys(r).length!==0){t.open("defs");for(const s in n){const o=n[s],a=o.stops;o.gradient==="radial"?(t.open("pattern",{id:K3+s,viewBox:"0,0,1,1",width:"100%",height:"100%",preserveAspectRatio:"xMidYMid slice"}),t.open("rect",{width:"1",height:"1",fill:"url(#"+s+")"}).close(),t.close(),t.open("radialGradient",{id:s,fx:o.x1,fy:o.y1,fr:o.r1,cx:o.x2,cy:o.y2,r:o.r2})):t.open("linearGradient",{id:s,x1:o.x1,x2:o.x2,y1:o.y1,y2:o.y2});for(let u=0;u<a.length;++u)t.open("stop",{offset:a[u].offset,"stop-color":a[u].color}).close();t.close()}for(const s in r){const o=r[s];t.open("clipPath",{id:s}),o.path?t.open("path",{d:o.path}).close():t.open("rect",{x:0,y:0,width:o.width,height:o.height}).close(),t.close()}t.close()}}}function LHt(e,t,n,r,i){let s;if(t==null||(r==="bgrect"&&n.interactive===!1&&(e["pointer-events"]="none"),r==="bgfore"&&(n.interactive===!1&&(e["pointer-events"]="none"),e.display="none",t.fill!==null)))return e;r==="image"&&t.smooth===!1&&(s=["image-rendering: optimizeSpeed;","image-rendering: pixelated;"]),r==="text"&&(e["font-family"]=WR(t),e["font-size"]=ap(t)+"px",e["font-style"]=t.fontStyle,e["font-variant"]=t.fontVariant,e["font-weight"]=t.fontWeight);for(const o in oL){let a=t[o];const u=oL[o];a==="transparent"&&(u==="fill"||u==="stroke")||a!=null&&(cne(a)&&(a=i6e(a,i.gradient,"")),e[u]=a)}for(const o in aL){const a=t[o];a!=null&&(s=s||[],s.push(`${aL[o]}: ${a};`))}return s&&(e.style=s.join(" ")),e}const xf={svgMarkTypes:["text"],svgOnTop:!0,debug:!1};function FHt(e){xf.svgMarkTypes=e.svgMarkTypes??["text"],xf.svgOnTop=e.svgOnTop??!0,xf.debug=e.debug??!1}class kq extends GR{constructor(t){super(t),this._svgRenderer=new Mne(t),this._canvasRenderer=new sL(t)}initialize(t,n,r,i,s){this._root_el=Ms(t,0,"div");const o=Ms(this._root_el,0,"div"),a=Ms(this._root_el,1,"div");return this._root_el.style.position="relative",xf.debug||(o.style.height="100%",a.style.position="absolute",a.style.top="0",a.style.left="0",a.style.height="100%",a.style.width="100%"),this._svgEl=xf.svgOnTop?a:o,this._canvasEl=xf.svgOnTop?o:a,this._svgEl.style.pointerEvents="none",this._canvasRenderer.initialize(this._canvasEl,n,r,i,s),this._svgRenderer.initialize(this._svgEl,n,r,i,s),super.initialize(t,n,r,i,s)}dirty(t){return xf.svgMarkTypes.includes(t.mark.marktype)?this._svgRenderer.dirty(t):this._canvasRenderer.dirty(t),this}_render(t,n){const i=(n??["arc","area","image","line","path","rect","rule","shape","symbol","text","trail"]).filter(s=>!xf.svgMarkTypes.includes(s));this._svgRenderer.render(t,xf.svgMarkTypes),this._canvasRenderer.render(t,i)}resize(t,n,r,i){return super.resize(t,n,r,i),this._svgRenderer.resize(t,n,r,i),this._canvasRenderer.resize(t,n,r,i),this}background(t){return xf.svgOnTop?this._canvasRenderer.background(t):this._svgRenderer.background(t),this}}class X6e extends YR{constructor(t,n){super(t,n)}initialize(t,n,r){const i=Ms(Ms(t,0,"div"),xf.svgOnTop?0:1,"div");return super.initialize(i,n,r)}}const Q6e="canvas",J6e="hybrid",Z6e="png",eFe="svg",tFe="none",g0={Canvas:Q6e,PNG:Z6e,SVG:eFe,Hybrid:J6e,None:tFe},Tb={};Tb[Q6e]=Tb[Z6e]={renderer:sL,headless:sL,handler:YR};Tb[eFe]={renderer:Mne,headless:K6e,handler:L6e};Tb[J6e]={renderer:kq,headless:kq,handler:X6e};Tb[tFe]={};function h5(e,t){return e=String(e||"").toLowerCase(),arguments.length>1?(Tb[e]=t,this):Tb[e]}function nFe(e,t,n){const r=[],i=new Is().union(t),s=e.marktype;return s?rFe(e,i,n,r):s==="group"?iFe(e,i,n,r):Le("Intersect scene must be mark node or group item.")}function rFe(e,t,n,r){if(jHt(e,t,n)){const i=e.items,s=e.marktype,o=i.length;let a=0;if(s==="group")for(;a<o;++a)iFe(i[a],t,n,r);else for(const u=Ql[s].isect;a<o;++a){const l=i[a];sFe(l,t,u)&&r.push(l)}}return r}function jHt(e,t,n){return e.bounds&&t.intersects(e.bounds)&&(e.marktype==="group"||e.interactive!==!1&&(!n||n(e)))}function iFe(e,t,n,r){n&&n(e.mark)&&sFe(e,t,Ql.group.isect)&&r.push(e);const i=e.items,s=i&&i.length;if(s){const o=e.x||0,a=e.y||0;t.translate(-o,-a);for(let u=0;u<s;++u)rFe(i[u],t,n,r);t.translate(o,a)}return r}function sFe(e,t,n){const r=e.bounds;return t.encloses(r)||t.intersects(r)&&n(e,t)}const Y9=new Is;function oFe(e){const t=e.clip;if(wn(t))t(VR(Y9.clear()));else if(t)Y9.set(0,0,e.group.width,e.group.height);else return;e.bounds.intersect(Y9)}const BHt=1e-9;function Lne(e,t,n){return e===t?!0:n==="path"?aFe(e,t):e instanceof Date&&t instanceof Date?+e==+t:fr(e)&&fr(t)?Math.abs(e-t)<=BHt:!e||!t||!gt(e)&&!gt(t)?e==t:UHt(e,t)}function aFe(e,t){return Lne(zx(e),zx(t))}function UHt(e,t){var n=Object.keys(e),r=Object.keys(t),i,s;if(n.length!==r.length)return!1;for(n.sort(),r.sort(),s=n.length-1;s>=0;s--)if(n[s]!=r[s])return!1;for(s=n.length-1;s>=0;s--)if(i=n[s],!Lne(e[i],t[i],i))return!1;return typeof e==typeof t}function zHt(){f6e(),dzt()}const qx="top",Of="left",Ff="right",Iy="bottom",VHt="top-left",HHt="top-right",qHt="bottom-left",WHt="bottom-right",Fne="start",Rq="middle",Ua="end",GHt="x",YHt="y",p5="group",jne="axis",Bne="title",KHt="frame",XHt="scope",Une="legend",uFe="row-header",lFe="row-footer",cFe="row-title",fFe="column-header",dFe="column-footer",hFe="column-title",QHt="padding",JHt="symbol",pFe="fit",mFe="fit-x",gFe="fit-y",ZHt="pad",zne="none",XP="all",Nq="each",Vne="flush",y0="column",v0="row";function yFe(e){Pe.call(this,null,e)}lt(yFe,Pe,{transform(e,t){const n=t.dataflow,r=e.mark,i=r.marktype,s=Ql[i],o=s.bound;let a=r.bounds,u;if(s.nested)r.items.length&&n.dirty(r.items[0]),a=QP(r,o),r.items.forEach(l=>{l.bounds.clear().union(a)});else if(i===p5||e.modified())switch(t.visit(t.MOD,l=>n.dirty(l)),a.clear(),r.items.forEach(l=>a.union(QP(l,o))),r.role){case jne:case Une:case Bne:t.reflow()}else u=t.changed(t.REM),t.visit(t.ADD,l=>{a.union(QP(l,o))}),t.visit(t.MOD,l=>{u=u||a.alignsWith(l.bounds),n.dirty(l),a.union(QP(l,o))}),u&&(a.clear(),r.items.forEach(l=>a.union(l.bounds)));return oFe(r),t.modifies("bounds")}});function QP(e,t,n){return t(e.bounds.clear(),e,n)}const Uge=":vega_identifier:";function Hne(e){Pe.call(this,0,e)}Hne.Definition={type:"Identifier",metadata:{modifies:!0},params:[{name:"as",type:"string",required:!0}]};lt(Hne,Pe,{transform(e,t){const n=eqt(t.dataflow),r=e.as;let i=n.value;return t.visit(t.ADD,s=>s[r]=s[r]||++i),n.set(this.value=i),t}});function eqt(e){return e._signals[Uge]||(e._signals[Uge]=e.add(0))}function vFe(e){Pe.call(this,null,e)}lt(vFe,Pe,{transform(e,t){let n=this.value;n||(n=t.dataflow.scenegraph().mark(e.markdef,tqt(e),e.index),n.group.context=e.context,e.context.group||(e.context.group=n.group),n.source=this.source,n.clip=e.clip,n.interactive=e.interactive,this.value=n);const r=n.marktype===p5?s5:i5;return t.visit(t.ADD,i=>r.call(i,n)),(e.modified("clip")||e.modified("interactive"))&&(n.clip=e.clip,n.interactive=!!e.interactive,n.zdirty=!0,t.reflow()),n.items=t.source,t}});function tqt(e){const t=e.groups,n=e.parent;return t&&t.size===1?t.get(Object.keys(t.object)[0]):t&&n?t.lookup(n):null}function bFe(e){Pe.call(this,null,e)}const zge={parity:e=>e.filter((t,n)=>n%2?t.opacity=0:1),greedy:(e,t)=>{let n;return e.filter((r,i)=>!i||!_Fe(n.bounds,r.bounds,t)?(n=r,1):r.opacity=0)}},_Fe=(e,t,n)=>n>Math.max(t.x1-e.x2,e.x1-t.x2,t.y1-e.y2,e.y1-t.y2),Vge=(e,t)=>{for(var n=1,r=e.length,i=e[0].bounds,s;n<r;i=s,++n)if(_Fe(i,s=e[n].bounds,t))return!0},nqt=e=>{const t=e.bounds;return t.width()>1&&t.height()>1},rqt=(e,t,n)=>{var r=e.range(),i=new Is;return t===qx||t===Iy?i.set(r[0],-1/0,r[1],1/0):i.set(-1/0,r[0],1/0,r[1]),i.expand(n||1),s=>i.encloses(s.bounds)},Hge=e=>(e.forEach(t=>t.opacity=1),e),qge=(e,t)=>e.reflow(t.modified()).modifies("opacity");lt(bFe,Pe,{transform(e,t){const n=zge[e.method]||zge.parity,r=e.separation||0;let i=t.materialize(t.SOURCE).source,s,o;if(!i||!i.length)return;if(!e.method)return e.modified("method")&&(Hge(i),t=qge(t,e)),t;if(i=i.filter(nqt),!i.length)return;if(e.sort&&(i=i.slice().sort(e.sort)),s=Hge(i),t=qge(t,e),s.length>=3&&Vge(s,r)){do s=n(s,r);while(s.length>=3&&Vge(s,r));s.length<3&&!Zn(i).opacity&&(s.length>1&&(Zn(s).opacity=0),Zn(i).opacity=1)}e.boundScale&&e.boundTolerance>=0&&(o=rqt(e.boundScale,e.boundOrient,+e.boundTolerance),i.forEach(u=>{o(u)||(u.opacity=0)}));const a=s[0].mark.bounds.clear();return i.forEach(u=>{u.opacity&&a.union(u.bounds)}),t}});function wFe(e){Pe.call(this,null,e)}lt(wFe,Pe,{transform(e,t){const n=t.dataflow;if(t.visit(t.ALL,r=>n.dirty(r)),t.fields&&t.fields.zindex){const r=t.source&&t.source[0];r&&(r.mark.zdirty=!0)}}});const oa=new Is;function Zw(e,t,n){return e[t]===n?0:(e[t]=n,1)}function iqt(e){var t=e.items[0].orient;return t===Of||t===Ff}function sqt(e){let t=+e.grid;return[e.ticks?t++:-1,e.labels?t++:-1,t+ +e.domain]}function oqt(e,t,n,r){var i=t.items[0],s=i.datum,o=i.translate!=null?i.translate:.5,a=i.orient,u=sqt(s),l=i.range,c=i.offset,f=i.position,d=i.minExtent,h=i.maxExtent,p=s.title&&i.items[u[2]].items[0],m=i.titlePadding,g=i.bounds,y=p&&Ane(p),v=0,b=0,w,E;switch(oa.clear().union(g),g.clear(),(w=u[0])>-1&&g.union(i.items[w].bounds),(w=u[1])>-1&&g.union(i.items[w].bounds),a){case qx:v=f||0,b=-c,E=Math.max(d,Math.min(h,-g.y1)),g.add(0,-E).add(l,0),p&&JP(e,p,E,m,y,0,-1,g);break;case Of:v=-c,b=f||0,E=Math.max(d,Math.min(h,-g.x1)),g.add(-E,0).add(0,l),p&&JP(e,p,E,m,y,1,-1,g);break;case Ff:v=n+c,b=f||0,E=Math.max(d,Math.min(h,g.x2)),g.add(0,0).add(E,l),p&&JP(e,p,E,m,y,1,1,g);break;case Iy:v=f||0,b=r+c,E=Math.max(d,Math.min(h,g.y2)),g.add(0,0).add(l,E),p&&JP(e,p,E,m,0,0,1,g);break;default:v=i.x,b=i.y}return mg(g.translate(v,b),i),Zw(i,"x",v+o)|Zw(i,"y",b+o)&&(i.bounds=oa,e.dirty(i),i.bounds=g,e.dirty(i)),i.mark.bounds.clear().union(g)}function JP(e,t,n,r,i,s,o,a){const u=t.bounds;if(t.auto){const l=o*(n+i+r);let c=0,f=0;e.dirty(t),s?c=(t.x||0)-(t.x=l):f=(t.y||0)-(t.y=l),t.mark.bounds.clear().union(u.translate(-c,-f)),e.dirty(t)}a.union(u)}const Wge=(e,t)=>Math.floor(Math.min(e,t)),Gge=(e,t)=>Math.ceil(Math.max(e,t));function aqt(e){var t=e.items,n=t.length,r=0,i,s;const o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};for(;r<n;++r)if(i=t[r],s=i.items,i.marktype===p5)switch(i.role){case jne:case Une:case Bne:break;case uFe:o.rowheaders.push(...s);break;case lFe:o.rowfooters.push(...s);break;case fFe:o.colheaders.push(...s);break;case dFe:o.colfooters.push(...s);break;case cFe:o.rowtitle=s[0];break;case hFe:o.coltitle=s[0];break;default:o.marks.push(...s)}return o}function uqt(e){return new Is().set(0,0,e.width||0,e.height||0)}function lqt(e){const t=e.bounds.clone();return t.empty()?t.set(0,0,0,0):t.translate(-(e.x||0),-(e.y||0))}function wi(e,t,n){const r=gt(e)?e[t]:e;return r??(n!==void 0?n:0)}function Yge(e){return e<0?Math.ceil(-e):0}function EFe(e,t,n){var r=!n.nodirty,i=n.bounds===Vne?uqt:lqt,s=oa.set(0,0,0,0),o=wi(n.align,y0),a=wi(n.align,v0),u=wi(n.padding,y0),l=wi(n.padding,v0),c=n.columns||t.length,f=c<=0?1:Math.ceil(t.length/c),d=t.length,h=Array(d),p=Array(c),m=0,g=Array(d),y=Array(f),v=0,b=Array(d),w=Array(d),E=Array(d),T,S,A,C,k,N,D,O,$,F,M;for(S=0;S<c;++S)p[S]=0;for(S=0;S<f;++S)y[S]=0;for(S=0;S<d;++S)N=t[S],k=E[S]=i(N),N.x=N.x||0,b[S]=0,N.y=N.y||0,w[S]=0,A=S%c,C=~~(S/c),m=Math.max(m,D=Math.ceil(k.x2)),v=Math.max(v,O=Math.ceil(k.y2)),p[A]=Math.max(p[A],D),y[C]=Math.max(y[C],O),h[S]=u+Yge(k.x1),g[S]=l+Yge(k.y1),r&&e.dirty(t[S]);for(S=0;S<d;++S)S%c===0&&(h[S]=0),S<c&&(g[S]=0);if(o===Nq)for(A=1;A<c;++A){for(M=0,S=A;S<d;S+=c)M<h[S]&&(M=h[S]);for(S=A;S<d;S+=c)h[S]=M+p[A-1]}else if(o===XP){for(M=0,S=0;S<d;++S)S%c&&M<h[S]&&(M=h[S]);for(S=0;S<d;++S)S%c&&(h[S]=M+m)}else for(o=!1,A=1;A<c;++A)for(S=A;S<d;S+=c)h[S]+=p[A-1];if(a===Nq)for(C=1;C<f;++C){for(M=0,S=C*c,T=S+c;S<T;++S)M<g[S]&&(M=g[S]);for(S=C*c;S<T;++S)g[S]=M+y[C-1]}else if(a===XP){for(M=0,S=c;S<d;++S)M<g[S]&&(M=g[S]);for(S=c;S<d;++S)g[S]=M+v}else for(a=!1,C=1;C<f;++C)for(S=C*c,T=S+c;S<T;++S)g[S]+=y[C-1];for($=0,S=0;S<d;++S)$=h[S]+(S%c?$:0),b[S]+=$-t[S].x;for(A=0;A<c;++A)for(F=0,S=A;S<d;S+=c)F+=g[S],w[S]+=F-t[S].y;if(o&&wi(n.center,y0)&&f>1)for(S=0;S<d;++S)k=o===XP?m:p[S%c],$=k-E[S].x2-t[S].x-b[S],$>0&&(b[S]+=$/2);if(a&&wi(n.center,v0)&&c!==1)for(S=0;S<d;++S)k=a===XP?v:y[~~(S/c)],F=k-E[S].y2-t[S].y-w[S],F>0&&(w[S]+=F/2);for(S=0;S<d;++S)s.union(E[S].translate(b[S],w[S]));switch($=wi(n.anchor,GHt),F=wi(n.anchor,YHt),wi(n.anchor,y0)){case Ua:$-=s.width();break;case Rq:$-=s.width()/2}switch(wi(n.anchor,v0)){case Ua:F-=s.height();break;case Rq:F-=s.height()/2}for($=Math.round($),F=Math.round(F),s.clear(),S=0;S<d;++S)t[S].mark.bounds.clear();for(S=0;S<d;++S)N=t[S],N.x+=b[S]+=$,N.y+=w[S]+=F,s.union(N.mark.bounds.union(N.bounds.translate(b[S],w[S]))),r&&e.dirty(N);return s}function cqt(e,t,n){var r=aqt(t),i=r.marks,s=n.bounds===Vne?fqt:dqt,o=n.offset,a=n.columns||i.length,u=a<=0?1:Math.ceil(i.length/a),l=u*a,c,f,d,h,p,m,g;const y=EFe(e,i,n);y.empty()&&y.set(0,0,0,0),r.rowheaders&&(m=wi(n.headerBand,v0,null),c=ZP(e,r.rowheaders,i,a,u,-wi(o,"rowHeader"),Wge,0,s,"x1",0,a,1,m)),r.colheaders&&(m=wi(n.headerBand,y0,null),f=ZP(e,r.colheaders,i,a,a,-wi(o,"columnHeader"),Wge,1,s,"y1",0,1,a,m)),r.rowfooters&&(m=wi(n.footerBand,v0,null),d=ZP(e,r.rowfooters,i,a,u,wi(o,"rowFooter"),Gge,0,s,"x2",a-1,a,1,m)),r.colfooters&&(m=wi(n.footerBand,y0,null),h=ZP(e,r.colfooters,i,a,a,wi(o,"columnFooter"),Gge,1,s,"y2",l-a,1,a,m)),r.rowtitle&&(p=wi(n.titleAnchor,v0),g=wi(o,"rowTitle"),g=p===Ua?d+g:c-g,m=wi(n.titleBand,v0,.5),Kge(e,r.rowtitle,g,0,y,m)),r.coltitle&&(p=wi(n.titleAnchor,y0),g=wi(o,"columnTitle"),g=p===Ua?h+g:f-g,m=wi(n.titleBand,y0,.5),Kge(e,r.coltitle,g,1,y,m))}function fqt(e,t){return t==="x1"?e.x||0:t==="y1"?e.y||0:t==="x2"?(e.x||0)+(e.width||0):t==="y2"?(e.y||0)+(e.height||0):void 0}function dqt(e,t){return e.bounds[t]}function ZP(e,t,n,r,i,s,o,a,u,l,c,f,d,h){var p=n.length,m=0,g=0,y,v,b,w,E,T,S,A,C;if(!p)return m;for(y=c;y<p;y+=f)n[y]&&(m=o(m,u(n[y],l)));if(!t.length)return m;for(t.length>i&&(e.warn("Grid headers exceed limit: "+i),t=t.slice(0,i)),m+=s,v=0,w=t.length;v<w;++v)e.dirty(t[v]),t[v].mark.bounds.clear();for(y=c,v=0,w=t.length;v<w;++v,y+=f){for(T=t[v],E=T.mark.bounds,b=y;b>=0&&(S=n[b])==null;b-=d);a?(A=h==null?S.x:Math.round(S.bounds.x1+h*S.bounds.width()),C=m):(A=m,C=h==null?S.y:Math.round(S.bounds.y1+h*S.bounds.height())),E.union(T.bounds.translate(A-(T.x||0),C-(T.y||0))),T.x=A,T.y=C,e.dirty(T),g=o(g,E[l])}return g}function Kge(e,t,n,r,i,s){if(t){e.dirty(t);var o=n,a=n;r?o=Math.round(i.x1+s*i.width()):a=Math.round(i.y1+s*i.height()),t.bounds.translate(o-(t.x||0),a-(t.y||0)),t.mark.bounds.clear().union(t.bounds),t.x=o,t.y=a,e.dirty(t)}}function hqt(e,t){const n=e[t]||{};return(r,i)=>n[r]!=null?n[r]:e[r]!=null?e[r]:i}function pqt(e,t){let n=-1/0;return e.forEach(r=>{r.offset!=null&&(n=Math.max(n,r.offset))}),n>-1/0?n:t}function mqt(e,t,n,r,i,s,o){const a=hqt(n,t),u=pqt(e,a("offset",0)),l=a("anchor",Fne),c=l===Ua?1:l===Rq?.5:0,f={align:Nq,bounds:a("bounds",Vne),columns:a("direction")==="vertical"?1:e.length,padding:a("margin",8),center:a("center"),nodirty:!0};switch(t){case Of:f.anchor={x:Math.floor(r.x1)-u,column:Ua,y:c*(o||r.height()+2*r.y1),row:l};break;case Ff:f.anchor={x:Math.ceil(r.x2)+u,y:c*(o||r.height()+2*r.y1),row:l};break;case qx:f.anchor={y:Math.floor(i.y1)-u,row:Ua,x:c*(s||i.width()+2*i.x1),column:l};break;case Iy:f.anchor={y:Math.ceil(i.y2)+u,x:c*(s||i.width()+2*i.x1),column:l};break;case VHt:f.anchor={x:u,y:u};break;case HHt:f.anchor={x:s-u,y:u,column:Ua};break;case qHt:f.anchor={x:u,y:o-u,row:Ua};break;case WHt:f.anchor={x:s-u,y:o-u,column:Ua,row:Ua};break}return f}function gqt(e,t){var n=t.items[0],r=n.datum,i=n.orient,s=n.bounds,o=n.x,a=n.y,u,l;return n._bounds?n._bounds.clear().union(s):n._bounds=s.clone(),s.clear(),vqt(e,n,n.items[0].items[0]),s=yqt(n,s),u=2*n.padding,l=2*n.padding,s.empty()||(u=Math.ceil(s.width()+u),l=Math.ceil(s.height()+l)),r.type===JHt&&bqt(n.items[0].items[0].items[0].items),i!==zne&&(n.x=o=0,n.y=a=0),n.width=u,n.height=l,mg(s.set(o,a,o+u,a+l),n),n.mark.bounds.clear().union(s),n}function yqt(e,t){return e.items.forEach(n=>t.union(n.bounds)),t.x1=e.padding,t.y1=e.padding,t}function vqt(e,t,n){var r=t.padding,i=r-n.x,s=r-n.y;if(!t.datum.title)(i||s)&&vA(e,n,i,s);else{var o=t.items[1].items[0],a=o.anchor,u=t.titlePadding||0,l=r-o.x,c=r-o.y;switch(o.orient){case Of:i+=Math.ceil(o.bounds.width())+u;break;case Ff:case Iy:break;default:s+=o.bounds.height()+u}switch((i||s)&&vA(e,n,i,s),o.orient){case Of:c+=ew(t,n,o,a,1,1);break;case Ff:l+=ew(t,n,o,Ua,0,0)+u,c+=ew(t,n,o,a,1,1);break;case Iy:l+=ew(t,n,o,a,0,0),c+=ew(t,n,o,Ua,-1,0,1)+u;break;default:l+=ew(t,n,o,a,0,0)}(l||c)&&vA(e,o,l,c),(l=Math.round(o.bounds.x1-r))<0&&(vA(e,n,-l,0),vA(e,o,-l,0))}}function ew(e,t,n,r,i,s,o){const a=e.datum.type!=="symbol",u=n.datum.vgrad,l=a&&(s||!u)&&!o?t.items[0]:t,c=l.bounds[i?"y2":"x2"]-e.padding,f=u&&s?c:0,d=u&&s?0:c,h=i<=0?0:Ane(n);return Math.round(r===Fne?f:r===Ua?d-h:.5*(c-h))}function vA(e,t,n,r){t.x+=n,t.y+=r,t.bounds.translate(n,r),t.mark.bounds.translate(n,r),e.dirty(t)}function bqt(e){const t=e.reduce((n,r)=>(n[r.column]=Math.max(r.bounds.x2-r.x,n[r.column]||0),n),{});e.forEach(n=>{n.width=t[n.column],n.height=n.bounds.y2-n.y})}function _qt(e,t,n,r,i){var s=t.items[0],o=s.frame,a=s.orient,u=s.anchor,l=s.offset,c=s.padding,f=s.items[0].items[0],d=s.items[1]&&s.items[1].items[0],h=a===Of||a===Ff?r:n,p=0,m=0,g=0,y=0,v=0,b;if(o!==p5?a===Of?(p=i.y2,h=i.y1):a===Ff?(p=i.y1,h=i.y2):(p=i.x1,h=i.x2):a===Of&&(p=r,h=0),b=u===Fne?p:u===Ua?h:(p+h)/2,d&&d.text){switch(a){case qx:case Iy:v=f.bounds.height()+c;break;case Of:y=f.bounds.width()+c;break;case Ff:y=-f.bounds.width()-c;break}oa.clear().union(d.bounds),oa.translate(y-(d.x||0),v-(d.y||0)),Zw(d,"x",y)|Zw(d,"y",v)&&(e.dirty(d),d.bounds.clear().union(oa),d.mark.bounds.clear().union(oa),e.dirty(d)),oa.clear().union(d.bounds)}else oa.clear();switch(oa.union(f.bounds),a){case qx:m=b,g=i.y1-oa.height()-l;break;case Of:m=i.x1-oa.width()-l,g=b;break;case Ff:m=i.x2+oa.width()+l,g=b;break;case Iy:m=b,g=i.y2+l;break;default:m=s.x,g=s.y}return Zw(s,"x",m)|Zw(s,"y",g)&&(oa.translate(m,g),e.dirty(s),s.bounds.clear().union(oa),t.bounds.clear().union(oa),e.dirty(s)),s.bounds}function xFe(e){Pe.call(this,null,e)}lt(xFe,Pe,{transform(e,t){const n=t.dataflow;return e.mark.items.forEach(r=>{e.layout&&cqt(n,r,e.layout),Eqt(n,r,e)}),wqt(e.mark.group)?t.reflow():t}});function wqt(e){return e&&e.mark.role!=="legend-entry"}function Eqt(e,t,n){var r=t.items,i=Math.max(0,t.width||0),s=Math.max(0,t.height||0),o=new Is().set(0,0,i,s),a=o.clone(),u=o.clone(),l=[],c,f,d,h,p,m;for(p=0,m=r.length;p<m;++p)switch(f=r[p],f.role){case jne:h=iqt(f)?a:u,h.union(oqt(e,f,i,s));break;case Bne:c=f;break;case Une:l.push(gqt(e,f));break;case KHt:case XHt:case uFe:case lFe:case cFe:case fFe:case dFe:case hFe:a.union(f.bounds),u.union(f.bounds);break;default:o.union(f.bounds)}if(l.length){const g={};l.forEach(y=>{d=y.orient||Ff,d!==zne&&(g[d]||(g[d]=[])).push(y)});for(const y in g){const v=g[y];EFe(e,v,mqt(v,y,n.legends,a,u,i,s))}l.forEach(y=>{const v=y.bounds;if(v.equals(y._bounds)||(y.bounds=y._bounds,e.dirty(y),y.bounds=v,e.dirty(y)),n.autosize&&(n.autosize.type===pFe||n.autosize.type===mFe||n.autosize.type===gFe))switch(y.orient){case Of:case Ff:o.add(v.x1,0).add(v.x2,0);break;case qx:case Iy:o.add(0,v.y1).add(0,v.y2)}else o.union(v)})}o.union(a).union(u),c&&o.union(_qt(e,c,i,s,o)),t.clip&&o.set(0,0,t.width||0,t.height||0),xqt(e,t,o,n)}function xqt(e,t,n,r){const i=r.autosize||{},s=i.type;if(e._autosize<1||!s)return;let o=e._width,a=e._height,u=Math.max(0,t.width||0),l=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,t.height||0),f=Math.max(0,Math.ceil(-n.y1));const d=Math.max(0,Math.ceil(n.x2-u)),h=Math.max(0,Math.ceil(n.y2-c));if(i.contains===QHt){const p=e.padding();o-=p.left+p.right,a-=p.top+p.bottom}s===zne?(l=0,f=0,u=o,c=a):s===pFe?(u=Math.max(0,o-l-d),c=Math.max(0,a-f-h)):s===mFe?(u=Math.max(0,o-l-d),a=c+f+h):s===gFe?(o=u+l+d,c=Math.max(0,a-f-h)):s===ZHt&&(o=u+l+d,a=c+f+h),e._resizeView(o,a,u,c,[l,f],i.resize)}const Sqt=Object.freeze(Object.defineProperty({__proto__:null,bound:yFe,identifier:Hne,mark:vFe,overlap:bFe,render:wFe,viewlayout:xFe},Symbol.toStringTag,{value:"Module"}));function SFe(e){Pe.call(this,null,e)}lt(SFe,Pe,{transform(e,t){if(this.value&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.scale,o=e.count==null?e.values?e.values.length:10:e.count,a=une(s,o,e.minstep),u=e.format||QLe(n,s,a,e.formatSpecifier,e.formatType,!!e.values),l=e.values?XLe(s,e.values,a):lne(s,a);return i&&(r.rem=i),i=l.map((c,f)=>xr({index:f/(l.length-1||1),value:c,label:u(c)})),e.extra&&i.length&&i.push(xr({index:-1,extra:{value:i[0].value},label:""})),r.source=i,r.add=i,this.value=i,r}});function TFe(e){Pe.call(this,null,e)}function Tqt(){return xr({})}function Aqt(e){const t=fT().test(n=>n.exit);return t.lookup=n=>t.get(e(n)),t}lt(TFe,Pe,{transform(e,t){var n=t.dataflow,r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=e.item||Tqt,s=e.key||Lt,o=this.value;return je(r.encode)&&(r.encode=null),o&&(e.modified("key")||t.modified(s))&&Le("DataJoin does not support modified key function or fields."),o||(t=t.addAll(),this.value=o=Aqt(s)),t.visit(t.ADD,a=>{const u=s(a);let l=o.get(u);l?l.exit?(o.empty--,r.add.push(l)):r.mod.push(l):(l=i(a),o.set(u,l),r.add.push(l)),l.datum=a,l.exit=!1}),t.visit(t.MOD,a=>{const u=s(a),l=o.get(u);l&&(l.datum=a,r.mod.push(l))}),t.visit(t.REM,a=>{const u=s(a),l=o.get(u);a===l.datum&&!l.exit&&(r.rem.push(l),l.exit=!0,++o.empty)}),t.changed(t.ADD_MOD)&&r.modifies("datum"),(t.clean()||e.clean&&o.empty>n.cleanThreshold)&&n.runAfter(o.clean),r}});function AFe(e){Pe.call(this,null,e)}lt(AFe,Pe,{transform(e,t){var n=t.fork(t.ADD_REM),r=e.mod||!1,i=e.encoders,s=t.encode;if(je(s))if(n.changed()||s.every(f=>i[f]))s=s[0],n.encode=null;else return t.StopPropagation;var o=s==="enter",a=i.update||Mg,u=i.enter||Mg,l=i.exit||Mg,c=(s&&!o?i[s]:a)||Mg;if(t.changed(t.ADD)&&(t.visit(t.ADD,f=>{u(f,e),a(f,e)}),n.modifies(u.output),n.modifies(a.output),c!==Mg&&c!==a&&(t.visit(t.ADD,f=>{c(f,e)}),n.modifies(c.output))),t.changed(t.REM)&&l!==Mg&&(t.visit(t.REM,f=>{l(f,e)}),n.modifies(l.output)),o||c!==Mg){const f=t.MOD|(e.modified()?t.REFLOW:0);o?(t.visit(f,d=>{const h=u(d,e)||r;(c(d,e)||h)&&n.mod.push(d)}),n.mod.length&&n.modifies(u.output)):t.visit(f,d=>{(c(d,e)||r)&&n.mod.push(d)}),n.mod.length&&n.modifies(c.output)}return n.changed()?n:t.StopPropagation}});function CFe(e){Pe.call(this,[],e)}lt(CFe,Pe,{transform(e,t){if(this.value!=null&&!e.modified())return t.StopPropagation;var n=t.dataflow.locale(),r=t.fork(t.NO_SOURCE|t.NO_FIELDS),i=this.value,s=e.type||SD,o=e.scale,a=+e.limit,u=une(o,e.count==null?5:e.count,e.minstep),l=!!e.values||s===SD,c=e.format||t6e(n,o,u,s,e.formatSpecifier,e.formatType,l),f=e.values||e6e(o,u),d,h,p,m,g;return i&&(r.rem=i),s===SD?(a&&f.length>a?(t.dataflow.warn("Symbol legend count exceeds limit, filtering items."),i=f.slice(0,a-1),g=!0):i=f,wn(p=e.size)?(!e.values&&o(i[0])===0&&(i=i.slice(1)),m=i.reduce((y,v)=>Math.max(y,p(v,e)),0)):p=Ca(m=p||8),i=i.map((y,v)=>xr({index:v,label:c(y,v,i),value:y,offset:m,size:p(y,e)})),g&&(g=f[i.length],i.push(xr({index:i.length,label:`${f.length-i.length} entries`,value:g,offset:m,size:p(g,e)})))):s===Z7t?(d=o.domain(),h=GLe(o,d[0],Zn(d)),f.length<3&&!e.values&&d[0]!==Zn(d)&&(f=[d[0],Zn(d)]),i=f.map((y,v)=>xr({index:v,label:c(y,v,f),value:y,perc:h(y)}))):(p=f.length-1,h=czt(o),i=f.map((y,v)=>xr({index:v,label:c(y,v,f),value:y,perc:v?h(y):0,perc2:v===p?1:h(f[v+1])}))),r.source=i,r.add=i,this.value=i,r}});const Cqt=e=>e.source.x,Iqt=e=>e.source.y,kqt=e=>e.target.x,Rqt=e=>e.target.y;function qne(e){Pe.call(this,{},e)}qne.Definition={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field",default:"source.x"},{name:"sourceY",type:"field",default:"source.y"},{name:"targetX",type:"field",default:"target.x"},{name:"targetY",type:"field",default:"target.y"},{name:"orient",type:"enum",default:"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum",default:"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"require",type:"signal"},{name:"as",type:"string",default:"path"}]};lt(qne,Pe,{transform(e,t){var n=e.sourceX||Cqt,r=e.sourceY||Iqt,i=e.targetX||kqt,s=e.targetY||Rqt,o=e.as||"path",a=e.orient||"vertical",u=e.shape||"line",l=Xge.get(u+"-"+a)||Xge.get(u);return l||Le("LinkPath unsupported type: "+e.shape+(e.orient?"-"+e.orient:"")),t.visit(t.SOURCE,c=>{c[o]=l(n(c),r(c),i(c),s(c))}),t.reflow(e.modified()).modifies(o)}});const IFe=(e,t,n,r)=>"M"+e+","+t+"L"+n+","+r,Nqt=(e,t,n,r)=>IFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),kFe=(e,t,n,r)=>{var i=n-e,s=r-t,o=Math.hypot(i,s)/2,a=180*Math.atan2(s,i)/Math.PI;return"M"+e+","+t+"A"+o+","+o+" "+a+" 0 1 "+n+","+r},Pqt=(e,t,n,r)=>kFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),RFe=(e,t,n,r)=>{const i=n-e,s=r-t,o=.2*(i+s),a=.2*(s-i);return"M"+e+","+t+"C"+(e+o)+","+(t+a)+" "+(n+a)+","+(r-o)+" "+n+","+r},Oqt=(e,t,n,r)=>RFe(t*Math.cos(e),t*Math.sin(e),r*Math.cos(n),r*Math.sin(n)),Dqt=(e,t,n,r)=>"M"+e+","+t+"V"+r+"H"+n,$qt=(e,t,n,r)=>"M"+e+","+t+"H"+n+"V"+r,Mqt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=Math.abs(n-e)>Math.PI?n<=e:n>e;return"M"+t*i+","+t*s+"A"+t+","+t+" 0 0,"+(u?1:0)+" "+t*o+","+t*a+"L"+r*o+","+r*a},Lqt=(e,t,n,r)=>{const i=(e+n)/2;return"M"+e+","+t+"C"+i+","+t+" "+i+","+r+" "+n+","+r},Fqt=(e,t,n,r)=>{const i=(t+r)/2;return"M"+e+","+t+"C"+e+","+i+" "+n+","+i+" "+n+","+r},jqt=(e,t,n,r)=>{const i=Math.cos(e),s=Math.sin(e),o=Math.cos(n),a=Math.sin(n),u=(t+r)/2;return"M"+t*i+","+t*s+"C"+u*i+","+u*s+" "+u*o+","+u*a+" "+r*o+","+r*a},Xge=fT({line:IFe,"line-radial":Nqt,arc:kFe,"arc-radial":Pqt,curve:RFe,"curve-radial":Oqt,"orthogonal-horizontal":Dqt,"orthogonal-vertical":$qt,"orthogonal-radial":Mqt,"diagonal-horizontal":Lqt,"diagonal-vertical":Fqt,"diagonal-radial":jqt});function Wne(e){Pe.call(this,null,e)}Wne.Definition={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number",default:0},{name:"endAngle",type:"number",default:6.283185307179586},{name:"sort",type:"boolean",default:!1},{name:"as",type:"string",array:!0,length:2,default:["startAngle","endAngle"]}]};lt(Wne,Pe,{transform(e,t){var n=e.as||["startAngle","endAngle"],r=n[0],i=n[1],s=e.field||uT,o=e.startAngle||0,a=e.endAngle!=null?e.endAngle:2*Math.PI,u=t.source,l=u.map(s),c=l.length,f=o,d=(a-o)/RTe(l),h=ju(c),p,m,g;for(e.sort&&h.sort((y,v)=>l[y]-l[v]),p=0;p<c;++p)g=l[h[p]],m=u[h[p]],m[r]=f,m[i]=f+=g*d;return this.value=l,t.reflow(e.modified()).modifies(n)}});const Bqt=5;function Uqt(e){const t=e.type;return!e.bins&&(t===jx||t===MR||t===LR)}function NFe(e){return sne(e)&&e!==Th}const zqt=id(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","domainImplicit","nice","zero","bins","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);function PFe(e){Pe.call(this,null,e),this.modified(!0)}lt(PFe,Pe,{transform(e,t){var n=t.dataflow,r=this.value,i=Vqt(e);(!r||i!==r.type)&&(this.value=r=vr(i)());for(i in e)if(!zqt[i]){if(i==="padding"&&NFe(r.type))continue;wn(r[i])?r[i](e[i]):n.warn("Unsupported scale property: "+i)}return Kqt(r,e,Yqt(r,e,qqt(r,e,n))),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function Vqt(e){var t=e.type,n="",r;return t===Th?Th+"-"+jx:(Hqt(e)&&(r=e.rawDomain?e.rawDomain.length:e.domain?e.domain.length+ +(e.domainMid!=null):0,n=r===2?Th+"-":r===3?mT+"-":""),(n+t||jx).toLowerCase())}function Hqt(e){const t=e.type;return sne(t)&&t!==xb&&t!==Sb&&(e.scheme||e.range&&e.range.length&&e.range.every(mt))}function qqt(e,t,n){const r=Wqt(e,t.domainRaw,n);if(r>-1)return r;var i=t.domain,s=e.type,o=t.zero||t.zero===void 0&&Uqt(e),a,u;if(!i)return 0;if((o||t.domainMin!=null||t.domainMax!=null||t.domainMid!=null)&&(a=(i=i.slice()).length-1||1,o&&(i[0]>0&&(i[0]=0),i[a]<0&&(i[a]=0)),t.domainMin!=null&&(i[0]=t.domainMin),t.domainMax!=null&&(i[a]=t.domainMax),t.domainMid!=null)){u=t.domainMid;const l=u>i[a]?a+1:u<i[0]?0:a;l!==a&&n.warn("Scale domainMid exceeds domain min or max.",u),i.splice(l,0,u)}return NFe(s)&&t.padding&&i[0]!==Zn(i)&&(i=Gqt(s,i,t.range,t.padding,t.exponent,t.constant)),e.domain(OFe(s,i,n)),s===tne&&e.unknown(t.domainImplicit?mV:void 0),t.nice&&e.nice&&e.nice(t.nice!==!0&&une(e,t.nice)||null),i.length}function Wqt(e,t,n){return t?(e.domain(OFe(e.type,t,n)),t.length):-1}function Gqt(e,t,n,r,i,s){var o=Math.abs(Zn(n)-n[0]),a=o/(o-2*r),u=e===Ym?Yee(t,null,a):e===LR?q3(t,null,a,.5):e===MR?q3(t,null,a,i||1):e===Z4?Kee(t,null,a,s||1):Gee(t,null,a);return t=t.slice(),t[0]=u[0],t[t.length-1]=u[1],t}function OFe(e,t,n){if(zLe(e)){var r=Math.abs(t.reduce((i,s)=>i+(s<0?-1:s>0?1:0),0));r!==t.length&&n.warn("Log scale domain includes zero: "+rt(t))}return t}function Yqt(e,t,n){let r=t.bins;if(r&&!je(r)){const i=e.domain(),s=i[0],o=Zn(i),a=r.step;let u=r.start==null?s:r.start,l=r.stop==null?o:r.stop;a||Le("Scale bins parameter missing step property."),u<s&&(u=a*Math.ceil(s/a)),l>o&&(l=a*Math.floor(o/a)),r=ju(u,l+a/2,a)}return r?e.bins=r:e.bins&&delete e.bins,e.type===nne&&(r?!t.domain&&!t.domainRaw&&(e.domain(r),n=r.length):e.bins=e.domain()),n}function Kqt(e,t,n){var r=e.type,i=t.round||!1,s=t.range;if(t.rangeStep!=null)s=Xqt(r,t,n);else if(t.scheme&&(s=Qqt(r,t,n),wn(s))){if(e.interpolator)return e.interpolator(s);Le(`Scale type ${r} does not support interpolating color schemes.`)}if(s&&VLe(r))return e.interpolator(n5(Pq(s,t.reverse),t.interpolate,t.interpolateGamma));s&&t.interpolate&&e.interpolate?e.interpolate(one(t.interpolate,t.interpolateGamma)):wn(e.round)?e.round(i):wn(e.rangeRound)&&e.interpolate(i?Vk:ug),s&&e.range(Pq(s,t.reverse))}function Xqt(e,t,n){e!==MLe&&e!==yq&&Le("Only band and point scales support rangeStep.");var r=(t.paddingOuter!=null?t.paddingOuter:t.padding)||0,i=e===yq?1:(t.paddingInner!=null?t.paddingInner:t.padding)||0;return[0,t.rangeStep*ene(n,i,r)]}function Qqt(e,t,n){var r=t.schemeExtent,i,s;return je(t.scheme)?s=n5(t.scheme,t.interpolate,t.interpolateGamma):(i=t.scheme.toLowerCase(),s=ane(i),s||Le(`Unrecognized scheme name: ${t.scheme}`)),n=e===t5?n+1:e===nne?n-1:e===Bx||e===e5?+t.schemeCount||Bqt:n,VLe(e)?Qge(s,r,t.reverse):wn(s)?WLe(Qge(s,r),n):e===tne?s:s.slice(0,n)}function Qge(e,t,n){return wn(e)&&(t||n)?qLe(e,Pq(t||[0,1],n)):e}function Pq(e,t){return t?e.slice().reverse():e}function DFe(e){Pe.call(this,null,e)}lt(DFe,Pe,{transform(e,t){const n=e.modified("sort")||t.changed(t.ADD)||t.modified(e.sort.fields)||t.modified("datum");return n&&t.source.sort(p_(e.sort)),this.modified(n),t}});const Jge="zero",$Fe="center",MFe="normalize",LFe=["y0","y1"];function Gne(e){Pe.call(this,null,e)}Gne.Definition={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum",default:Jge,values:[Jge,$Fe,MFe]},{name:"as",type:"string",array:!0,length:2,default:LFe}]};lt(Gne,Pe,{transform(e,t){var n=e.as||LFe,r=n[0],i=n[1],s=p_(e.sort),o=e.field||uT,a=e.offset===$Fe?Jqt:e.offset===MFe?Zqt:eWt,u,l,c,f;for(u=tWt(t.source,e.groupby,s,o),l=0,c=u.length,f=u.max;l<c;++l)a(u[l],f,o,r,i);return t.reflow(e.modified()).modifies(n)}});function Jqt(e,t,n,r,i){for(var s=(t-e.sum)/2,o=e.length,a=0,u;a<o;++a)u=e[a],u[r]=s,u[i]=s+=Math.abs(n(u))}function Zqt(e,t,n,r,i){for(var s=1/e.sum,o=0,a=e.length,u=0,l=0,c;u<a;++u)c=e[u],c[r]=o,c[i]=o=s*(l+=Math.abs(n(c)))}function eWt(e,t,n,r,i){for(var s=0,o=0,a=e.length,u=0,l,c;u<a;++u)c=e[u],l=+n(c),l<0?(c[r]=o,c[i]=o+=l):(c[r]=s,c[i]=s+=l)}function tWt(e,t,n,r){var i=[],s=m=>m(c),o,a,u,l,c,f,d,h,p;if(t==null)i.push(e.slice());else for(o={},a=0,u=e.length;a<u;++a)c=e[a],f=t.map(s),d=o[f],d||(o[f]=d=[],i.push(d)),d.push(c);for(f=0,p=0,l=i.length;f<l;++f){for(d=i[f],a=0,h=0,u=d.length;a<u;++a)h+=Math.abs(r(d[a]));d.sum=h,h>p&&(p=h),n&&d.sort(n)}return i.max=p,i}const nWt=Object.freeze(Object.defineProperty({__proto__:null,axisticks:SFe,datajoin:TFe,encode:AFe,legendentries:CFe,linkpath:qne,pie:Wne,scale:PFe,sortitems:DFe,stack:Gne},Symbol.toStringTag,{value:"Module"}));var rWt=Math.abs,Oq=Math.cos,uL=Math.sin,iWt=1e-6,FFe=Math.PI,Dq=FFe/2,Zge=sWt(2);function e0e(e){return e>1?Dq:e<-1?-Dq:Math.asin(e)}function sWt(e){return e>0?Math.sqrt(e):0}function oWt(e,t){var n=e*uL(t),r=30,i;do t-=i=(t+uL(t)-n)/(1+Oq(t));while(rWt(i)>iWt&&--r>0);return t/2}function aWt(e,t,n){function r(i,s){return[e*i*Oq(s=oWt(n,s)),t*uL(s)]}return r.invert=function(i,s){return s=e0e(s/t),[i/(e*Oq(s)),e0e((2*s+uL(2*s))/n)]},r}var uWt=aWt(Zge/Dq,Zge,FFe);function lWt(){return np(uWt).scale(169.529)}const cWt=oCe(),$q=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];function fWt(e,t){return function n(){const r=t();return r.type=e,r.path=oCe().projection(r),r.copy=r.copy||function(){const i=n();return $q.forEach(s=>{r[s]&&i[s](r[s]())}),i.path.pointRadius(r.path.pointRadius()),i},BLe(r)}}function Yne(e,t){if(!e||typeof e!="string")throw new Error("Projection type must be a name string.");return e=e.toLowerCase(),arguments.length>1?(lL[e]=fWt(e,t),this):lL[e]||null}function jFe(e){return e&&e.path||cWt}const lL={albers:uCe,albersusa:Sgt,azimuthalequalarea:Tgt,azimuthalequidistant:Agt,conicconformal:kgt,conicequalarea:yM,conicequidistant:Pgt,equalEarth:Dgt,equirectangular:Rgt,gnomonic:$gt,identity:Mgt,mercator:Cgt,mollweide:lWt,naturalEarth1:Lgt,orthographic:Fgt,stereographic:jgt,transversemercator:Bgt};for(const e in lL)Yne(e,lL[e]);function dWt(){}const Tp=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,1.5],[.5,1]],[[1,.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,.5]],[[1.5,1],[1,1.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]];function BFe(){var e=1,t=1,n=a;function r(u,l){return l.map(c=>i(u,c))}function i(u,l){var c=[],f=[];return s(u,l,d=>{n(d,u,l),hWt(d)>0?c.push([d]):f.push(d)}),f.forEach(d=>{for(var h=0,p=c.length,m;h<p;++h)if(pWt((m=c[h])[0],d)!==-1){m.push(d);return}}),{type:"MultiPolygon",value:l,coordinates:c}}function s(u,l,c){var f=new Array,d=new Array,h,p,m,g,y,v;for(h=p=-1,g=u[0]>=l,Tp[g<<1].forEach(b);++h<e-1;)m=g,g=u[h+1]>=l,Tp[m|g<<1].forEach(b);for(Tp[g<<0].forEach(b);++p<t-1;){for(h=-1,g=u[p*e+e]>=l,y=u[p*e]>=l,Tp[g<<1|y<<2].forEach(b);++h<e-1;)m=g,g=u[p*e+e+h+1]>=l,v=y,y=u[p*e+h+1]>=l,Tp[m|g<<1|y<<2|v<<3].forEach(b);Tp[g|y<<3].forEach(b)}for(h=-1,y=u[p*e]>=l,Tp[y<<2].forEach(b);++h<e-1;)v=y,y=u[p*e+h+1]>=l,Tp[y<<2|v<<3].forEach(b);Tp[y<<3].forEach(b);function b(w){var E=[w[0][0]+h,w[0][1]+p],T=[w[1][0]+h,w[1][1]+p],S=o(E),A=o(T),C,k;(C=d[S])?(k=f[A])?(delete d[C.end],delete f[k.start],C===k?(C.ring.push(T),c(C.ring)):f[C.start]=d[k.end]={start:C.start,end:k.end,ring:C.ring.concat(k.ring)}):(delete d[C.end],C.ring.push(T),d[C.end=A]=C):(C=f[A])?(k=d[S])?(delete f[C.start],delete d[k.end],C===k?(C.ring.push(T),c(C.ring)):f[k.start]=d[C.end]={start:k.start,end:C.end,ring:k.ring.concat(C.ring)}):(delete f[C.start],C.ring.unshift(E),f[C.start=S]=C):f[S]=d[A]={start:S,end:A,ring:[E,T]}}}function o(u){return u[0]*2+u[1]*(e+1)*4}function a(u,l,c){u.forEach(f=>{var d=f[0],h=f[1],p=d|0,m=h|0,g,y=l[m*e+p];d>0&&d<e&&p===d&&(g=l[m*e+p-1],f[0]=d+(c-g)/(y-g)-.5),h>0&&h<t&&m===h&&(g=l[(m-1)*e+p],f[1]=h+(c-g)/(y-g)-.5)})}return r.contour=i,r.size=function(u){if(!arguments.length)return[e,t];var l=Math.floor(u[0]),c=Math.floor(u[1]);return l>=0&&c>=0||Le("invalid size"),e=l,t=c,r},r.smooth=function(u){return arguments.length?(n=u?a:dWt,r):n===a},r}function hWt(e){for(var t=0,n=e.length,r=e[n-1][1]*e[0][0]-e[n-1][0]*e[0][1];++t<n;)r+=e[t-1][1]*e[t][0]-e[t-1][0]*e[t][1];return r}function pWt(e,t){for(var n=-1,r=t.length,i;++n<r;)if(i=mWt(e,t[n]))return i;return 0}function mWt(e,t){for(var n=t[0],r=t[1],i=-1,s=0,o=e.length,a=o-1;s<o;a=s++){var u=e[s],l=u[0],c=u[1],f=e[a],d=f[0],h=f[1];if(gWt(u,f,t))return 0;c>r!=h>r&&n<(d-l)*(r-c)/(h-c)+l&&(i=-i)}return i}function gWt(e,t,n){var r;return yWt(e,t,n)&&vWt(e[r=+(e[0]===t[0])],n[r],t[r])}function yWt(e,t,n){return(t[0]-e[0])*(n[1]-e[1])===(n[0]-e[0])*(t[1]-e[1])}function vWt(e,t,n){return e<=t&&t<=n||n<=t&&t<=e}function UFe(e,t,n){return function(r){var i=Uh(r),s=n?Math.min(i[0],0):i[0],o=i[1],a=o-s,u=t?ty(s,o,e):a/(e+1);return ju(s+u,o,u)}}function Kne(e){Pe.call(this,null,e)}Kne.Definition={type:"Isocontour",metadata:{generates:!0},params:[{name:"field",type:"field"},{name:"thresholds",type:"number",array:!0},{name:"levels",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"zero",type:"boolean",default:!0},{name:"smooth",type:"boolean",default:!0},{name:"scale",type:"number",expr:!0},{name:"translate",type:"number",array:!0,expr:!0},{name:"as",type:"string",null:!0,default:"contour"}]};lt(Kne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=e.field||Aa,s=BFe().smooth(e.smooth!==!1),o=e.thresholds||bWt(r,i,e),a=e.as===null?null:e.as||"contour",u=[];return r.forEach(l=>{const c=i(l),f=s.size([c.width,c.height])(c.values,je(o)?o:o(c.values));_Wt(f,c,l,e),f.forEach(d=>{u.push(H4(l,xr(a!=null?{[a]:d}:d)))})}),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function bWt(e,t,n){const r=UFe(n.levels||10,n.nice,n.zero!==!1);return n.resolve!=="shared"?r:r(e.map(i=>cm(t(i).values)))}function _Wt(e,t,n,r){let i=r.scale||t.scale,s=r.translate||t.translate;if(wn(i)&&(i=i(n,r)),wn(s)&&(s=s(n,r)),(i===1||i==null)&&!s)return;const o=(fr(i)?i:i[0])||1,a=(fr(i)?i:i[1])||1,u=s&&s[0]||0,l=s&&s[1]||0;e.forEach(zFe(t,o,a,u,l))}function zFe(e,t,n,r,i){const s=e.x1||0,o=e.y1||0,a=t*n<0;function u(f){f.forEach(l)}function l(f){a&&f.reverse(),f.forEach(c)}function c(f){f[0]=(f[0]-s)*t+r,f[1]=(f[1]-o)*n+i}return function(f){return f.coordinates.forEach(u),f}}function t0e(e,t,n){const r=e>=0?e:pte(t,n);return Math.round((Math.sqrt(4*r*r+1)-1)/2)}function K9(e){return wn(e)?e:Ca(+e)}function VFe(){var e=u=>u[0],t=u=>u[1],n=uT,r=[-1,-1],i=960,s=500,o=2;function a(u,l){const c=t0e(r[0],u,e)>>o,f=t0e(r[1],u,t)>>o,d=c?c+2:0,h=f?f+2:0,p=2*d+(i>>o),m=2*h+(s>>o),g=new Float32Array(p*m),y=new Float32Array(p*m);let v=g;u.forEach(w=>{const E=d+(+e(w)>>o),T=h+(+t(w)>>o);E>=0&&E<p&&T>=0&&T<m&&(g[E+T*p]+=+n(w))}),c>0&&f>0?(tw(p,m,g,y,c),nw(p,m,y,g,f),tw(p,m,g,y,c),nw(p,m,y,g,f),tw(p,m,g,y,c),nw(p,m,y,g,f)):c>0?(tw(p,m,g,y,c),tw(p,m,y,g,c),tw(p,m,g,y,c),v=y):f>0&&(nw(p,m,g,y,f),nw(p,m,y,g,f),nw(p,m,g,y,f),v=y);const b=l?Math.pow(2,-2*o):1/RTe(v);for(let w=0,E=p*m;w<E;++w)v[w]*=b;return{values:v,scale:1<<o,width:p,height:m,x1:d,y1:h,x2:d+(i>>o),y2:h+(s>>o)}}return a.x=function(u){return arguments.length?(e=K9(u),a):e},a.y=function(u){return arguments.length?(t=K9(u),a):t},a.weight=function(u){return arguments.length?(n=K9(u),a):n},a.size=function(u){if(!arguments.length)return[i,s];var l=+u[0],c=+u[1];return l>=0&&c>=0||Le("invalid size"),i=l,s=c,a},a.cellSize=function(u){return arguments.length?((u=+u)>=1||Le("invalid cell size"),o=Math.floor(Math.log(u)/Math.LN2),a):1<<o},a.bandwidth=function(u){return arguments.length?(u=pt(u),u.length===1&&(u=[+u[0],+u[0]]),u.length!==2&&Le("invalid bandwidth"),r=u,a):r},a}function tw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<t;++o)for(let a=0,u=0;a<e+i;++a)a<e&&(u+=n[a+o*e]),a>=i&&(a>=s&&(u-=n[a-s+o*e]),r[a-i+o*e]=u/Math.min(a+1,e-1+s-a,s))}function nw(e,t,n,r,i){const s=(i<<1)+1;for(let o=0;o<e;++o)for(let a=0,u=0;a<t+i;++a)a<t&&(u+=n[o+a*e]),a>=i&&(a>=s&&(u-=n[o+(a-s)*e]),r[o+(a-i)*e]=u/Math.min(a+1,t-1+s-a,s))}function Xne(e){Pe.call(this,null,e)}Xne.Definition={type:"KDE2D",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"weight",type:"field"},{name:"groupby",type:"field",array:!0},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number",array:!0,length:2},{name:"counts",type:"boolean",default:!1},{name:"as",type:"string",default:"grid"}]};const wWt=["x","y","weight","size","cellSize","bandwidth"];function HFe(e,t){return wWt.forEach(n=>t[n]!=null?e[n](t[n]):0),e}lt(Xne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=t.materialize(t.SOURCE).source,i=EWt(r,e.groupby),s=(e.groupby||[]).map(Zi),o=HFe(VFe(),e),a=e.as||"grid",u=[];function l(c,f){for(let d=0;d<s.length;++d)c[s[d]]=f[d];return c}return u=i.map(c=>xr(l({[a]:o(c,e.counts)},c.dims))),this.value&&(n.rem=this.value),this.value=n.source=n.add=u,n}});function EWt(e,t){var n=[],r=c=>c(a),i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function Qne(e){Pe.call(this,null,e)}Qne.Definition={type:"Contour",metadata:{generates:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"weight",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"count",type:"number"},{name:"nice",type:"boolean",default:!1},{name:"thresholds",type:"number",array:!0},{name:"smooth",type:"boolean",default:!0}]};lt(Qne,Pe,{transform(e,t){if(this.value&&!t.changed()&&!e.modified())return t.StopPropagation;var n=t.fork(t.NO_SOURCE|t.NO_FIELDS),r=BFe().smooth(e.smooth!==!1),i=e.values,s=e.thresholds||UFe(e.count||10,e.nice,!!i),o=e.size,a,u;return i||(i=t.materialize(t.SOURCE).source,a=HFe(VFe(),e)(i,!0),u=zFe(a,a.scale||1,a.scale||1,0,0),o=[a.width,a.height],i=a.values),s=je(s)?s:s(i),i=r.size(o)(i,s),u&&i.forEach(u),this.value&&(n.rem=this.value),this.value=n.source=n.add=(i||[]).map(xr),n}});const Mq="Feature",Jne="FeatureCollection",xWt="MultiPoint";function Zne(e){Pe.call(this,null,e)}Zne.Definition={type:"GeoJSON",metadata:{},params:[{name:"fields",type:"field",array:!0,length:2},{name:"geojson",type:"field"}]};lt(Zne,Pe,{transform(e,t){var n=this._features,r=this._points,i=e.fields,s=i&&i[0],o=i&&i[1],a=e.geojson||!i&&Aa,u=t.ADD,l;l=e.modified()||t.changed(t.REM)||t.modified(va(a))||s&&t.modified(va(s))||o&&t.modified(va(o)),(!this.value||l)&&(u=t.SOURCE,this._features=n=[],this._points=r=[]),a&&t.visit(u,c=>n.push(a(c))),s&&o&&(t.visit(u,c=>{var f=s(c),d=o(c);f!=null&&d!=null&&(f=+f)===f&&(d=+d)===d&&r.push([f,d])}),n=n.concat({type:Mq,geometry:{type:xWt,coordinates:r}})),this.value={type:Jne,features:n}}});function ere(e){Pe.call(this,null,e)}ere.Definition={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"path"}]};lt(ere,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.field||Aa,s=e.as||"path",o=n.SOURCE;!r||e.modified()?(this.value=r=jFe(e.projection),n.materialize().reflow()):o=i===Aa||t.modified(i.fields)?n.ADD_MOD:n.ADD;const a=SWt(r,e.pointRadius);return n.visit(o,u=>u[s]=r(i(u))),r.pointRadius(a),n.modifies(s)}});function SWt(e,t){const n=e.pointRadius();return e.context(null),t!=null&&e.pointRadius(t),n}function tre(e){Pe.call(this,null,e)}tre.Definition={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,default:["x","y"]}]};lt(tre,Pe,{transform(e,t){var n=e.projection,r=e.fields[0],i=e.fields[1],s=e.as||["x","y"],o=s[0],a=s[1],u;function l(c){const f=n([r(c),i(c)]);f?(c[o]=f[0],c[a]=f[1]):(c[o]=void 0,c[a]=void 0)}return e.modified()?t=t.materialize().reflow(!0).visit(t.SOURCE,l):(u=t.modified(r.fields)||t.modified(i.fields),t.visit(u?t.ADD_MOD:t.ADD,l)),t.modifies(s)}});function nre(e){Pe.call(this,null,e)}nre.Definition={type:"GeoShape",metadata:{modifies:!0,nomod:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field",default:"datum"},{name:"pointRadius",type:"number",expr:!0},{name:"as",type:"string",default:"shape"}]};lt(nre,Pe,{transform(e,t){var n=t.fork(t.ALL),r=this.value,i=e.as||"shape",s=n.ADD;return(!r||e.modified())&&(this.value=r=TWt(jFe(e.projection),e.field||zc("datum"),e.pointRadius),n.materialize().reflow(),s=n.SOURCE),n.visit(s,o=>o[i]=r),n.modifies(i)}});function TWt(e,t,n){const r=n==null?i=>e(t(i)):i=>{var s=e.pointRadius(),o=e.pointRadius(n)(t(i));return e.pointRadius(s),o};return r.context=i=>(e.context(i),r),r}function rre(e){Pe.call(this,[],e),this.generator=rgt()}rre.Definition={type:"Graticule",metadata:{changes:!0,generates:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,default:[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,default:[10,10]},{name:"precision",type:"number",default:2.5}]};lt(rre,Pe,{transform(e,t){var n=this.value,r=this.generator,i;if(!n.length||e.modified())for(const s in e)wn(r[s])&&r[s](e[s]);return i=r(),n.length?t.mod.push(H3e(n[0],i)):t.add.push(xr(i)),n[0]=i,t}});function ire(e){Pe.call(this,null,e)}ire.Definition={type:"heatmap",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"color",type:"string",expr:!0},{name:"opacity",type:"number",expr:!0},{name:"resolve",type:"enum",values:["shared","independent"],default:"independent"},{name:"as",type:"string",default:"image"}]};lt(ire,Pe,{transform(e,t){if(!t.changed()&&!e.modified())return t.StopPropagation;var n=t.materialize(t.SOURCE).source,r=e.resolve==="shared",i=e.field||Aa,s=CWt(e.opacity,e),o=AWt(e.color,e),a=e.as||"image",u={$x:0,$y:0,$value:0,$max:r?cm(n.map(l=>cm(i(l).values))):0};return n.forEach(l=>{const c=i(l),f=_n({},l,u);r||(f.$max=cm(c.values||[])),l[a]=IWt(c,f,o.dep?o:Ca(o(f)),s.dep?s:Ca(s(f)))}),t.reflow(!0).modifies(a)}});function AWt(e,t){let n;return wn(e)?(n=r=>ny(e(r,t)),n.dep=qFe(e)):n=Ca(ny(e||"#888")),n}function CWt(e,t){let n;return wn(e)?(n=r=>e(r,t),n.dep=qFe(e)):e?n=Ca(e):(n=r=>r.$value/r.$max||0,n.dep=!0),n}function qFe(e){if(!wn(e))return!1;const t=id(va(e));return t.$x||t.$y||t.$value||t.$max}function IWt(e,t,n,r){const i=e.width,s=e.height,o=e.x1||0,a=e.y1||0,u=e.x2||i,l=e.y2||s,c=e.values,f=c?g=>c[g]:i0,d=V0(u-o,l-a),h=d.getContext("2d"),p=h.getImageData(0,0,u-o,l-a),m=p.data;for(let g=a,y=0;g<l;++g){t.$y=g-a;for(let v=o,b=g*i;v<u;++v,y+=4){t.$x=v-o,t.$value=f(v+b);const w=n(t);m[y+0]=w.r,m[y+1]=w.g,m[y+2]=w.b,m[y+3]=~~(255*r(t))}}return h.putImageData(p,0,0),d}function WFe(e){Pe.call(this,null,e),this.modified(!0)}lt(WFe,Pe,{transform(e,t){let n=this.value;return!n||e.modified("type")?(this.value=n=RWt(e.type),$q.forEach(r=>{e[r]!=null&&n0e(n,r,e[r])})):$q.forEach(r=>{e.modified(r)&&n0e(n,r,e[r])}),e.pointRadius!=null&&n.path.pointRadius(e.pointRadius),e.fit&&kWt(n,e),t.fork(t.NO_SOURCE|t.NO_FIELDS)}});function kWt(e,t){const n=NWt(t.fit);t.extent?e.fitExtent(t.extent,n):t.size&&e.fitSize(t.size,n)}function RWt(e){const t=Yne((e||"mercator").toLowerCase());return t||Le("Unrecognized projection type: "+e),t()}function n0e(e,t,n){wn(e[t])&&e[t](n)}function NWt(e){return e=pt(e),e.length===1?e[0]:{type:Jne,features:e.reduce((t,n)=>t.concat(PWt(n)),[])}}function PWt(e){return e.type===Jne?e.features:pt(e).filter(t=>t!=null).map(t=>t.type===Mq?t:{type:Mq,geometry:t})}const OWt=Object.freeze(Object.defineProperty({__proto__:null,contour:Qne,geojson:Zne,geopath:ere,geopoint:tre,geoshape:nre,graticule:rre,heatmap:ire,isocontour:Kne,kde2d:Xne,projection:WFe},Symbol.toStringTag,{value:"Module"})),r0e={center:Gpt,collide:dmt,nbody:xmt,link:pmt,x:Smt,y:Tmt},_C="forces",Lq=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],DWt=["static","iterations"],GFe=["x","y","vx","vy"];function sre(e){Pe.call(this,null,e)}sre.Definition={type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean",default:!1},{name:"restart",type:"boolean",default:!1},{name:"iterations",type:"number",default:300},{name:"alpha",type:"number",default:1},{name:"alphaMin",type:"number",default:.001},{name:"alphaTarget",type:"number",default:0},{name:"velocityDecay",type:"number",default:.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number",default:0},{name:"y",type:"number",default:0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number",default:.7},{name:"iterations",type:"number",default:1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number",default:-30,expr:!0},{name:"theta",type:"number",default:.9},{name:"distanceMin",type:"number",default:1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number",default:30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number",default:1}]},{key:{force:"x"},params:[{name:"strength",type:"number",default:.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number",default:.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,default:GFe}]};lt(sre,Pe,{transform(e,t){var n=this.value,r=t.changed(t.ADD_REM),i=e.modified(Lq),s=e.iterations||300;if(n?(r&&(t.modifies("index"),n.nodes(t.source)),(i||t.changed(t.MOD))&&YFe(n,e,0,t)):(this.value=n=MWt(t.source,e),n.on("tick",$Wt(t.dataflow,this)),e.static||(r=!0,n.tick()),t.modifies("index")),i||r||e.modified(DWt)||t.changed()&&e.restart){if(n.alpha(Math.max(n.alpha(),e.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/s)),e.static)for(n.stop();--s>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return t.StopPropagation}return this.finish(e,t)},finish(e,t){const n=t.dataflow;for(let a=this._argops,u=0,l=a.length,c;u<l;++u)if(c=a[u],!(c.name!==_C||c.op._argval.force!=="link")){for(var r=c.op._argops,i=0,s=r.length,o;i<s;++i)if(r[i].name==="links"&&(o=r[i].op.source)){n.pulse(o,n.changeset().reflow());break}}return t.reflow(e.modified()).modifies(GFe)}});function $Wt(e,t){return()=>e.touch(t).run()}function MWt(e,t){const n=Emt(e),r=n.stop,i=n.restart;let s=!1;return n.stopped=()=>s,n.restart=()=>(s=!1,i()),n.stop=()=>(s=!0,r()),YFe(n,t,!0).on("end",()=>s=!0)}function YFe(e,t,n,r){var i=pt(t.forces),s,o,a,u;for(s=0,o=Lq.length;s<o;++s)a=Lq[s],a!==_C&&t.modified(a)&&e[a](t[a]);for(s=0,o=i.length;s<o;++s)u=_C+s,a=n||t.modified(_C,s)?FWt(i[s]):r&&LWt(i[s],r)?e.force(u):null,a&&e.force(u,a);for(o=e.numForces||0;s<o;++s)e.force(_C+s,null);return e.numForces=i.length,e}function LWt(e,t){var n,r;for(n in e)if(wn(r=e[n])&&t.modified(va(r)))return 1;return 0}function FWt(e){var t,n;jt(r0e,e.force)||Le("Unrecognized force: "+e.force),t=r0e[e.force]();for(n in e)wn(t[n])&&jWt(t[n],e[n],e);return t}function jWt(e,t,n){e(wn(t)?r=>t(r,n):t)}const BWt=Object.freeze(Object.defineProperty({__proto__:null,force:sre},Symbol.toStringTag,{value:"Module"}));function Fq(e,t,n){const r={};return e.each(i=>{const s=i.data;n(s)&&(r[t(s)]=i)}),e.lookup=r,e}function ore(e){Pe.call(this,null,e)}ore.Definition={type:"Nest",metadata:{treesource:!0,changes:!0},params:[{name:"keys",type:"field",array:!0},{name:"generate",type:"boolean"}]};const UWt=e=>e.values;lt(ore,Pe,{transform(e,t){t.source||Le("Nest transform requires an upstream data source.");var n=e.generate,r=e.modified(),i=t.clone(),s=this.value;return(!s||r||t.changed())&&(s&&s.each(o=>{o.children&&V4(o.data)&&i.rem.push(o.data)}),this.value=s=dF({values:pt(e.keys).reduce((o,a)=>(o.key(a),o),zWt()).entries(i.source)},UWt),n&&s.each(o=>{o.children&&(o=xr(o.data),i.add.push(o),i.source.push(o))}),Fq(s,Lt,Lt)),i.source.root=s,i}});function zWt(){const e=[],t={entries:i=>r(n(i,0),0),key:i=>(e.push(i),t)};function n(i,s){if(s>=e.length)return i;const o=i.length,a=e[s++],u={},l={};let c=-1,f,d,h;for(;++c<o;)f=a(d=i[c])+"",(h=u[f])?h.push(d):u[f]=[d];for(f in u)l[f]=n(u[f],s);return l}function r(i,s){if(++s>e.length)return i;const o=[];for(const a in i)o.push({key:a,values:r(i[a],s)});return o}return t}function gg(e){Pe.call(this,null,e)}const VWt=(e,t)=>e.parent===t.parent?1:2;lt(gg,Pe,{transform(e,t){(!t.source||!t.source.root)&&Le(this.constructor.name+" transform requires a backing tree data source.");const n=this.layout(e.method),r=this.fields,i=t.source.root,s=e.as||r;e.field?i.sum(e.field):i.count(),e.sort&&i.sort(p_(e.sort,o=>o.data)),HWt(n,this.params,e),n.separation&&n.separation(e.separation!==!1?VWt:uT);try{this.value=n(i)}catch(o){Le(o)}return i.each(o=>qWt(o,r,s)),t.reflow(e.modified()).modifies(s).modifies("leaf")}});function HWt(e,t,n){for(let r,i=0,s=t.length;i<s;++i)r=t[i],r in n&&e[r](n[r])}function qWt(e,t,n){const r=e.data,i=t.length-1;for(let s=0;s<i;++s)r[n[s]]=e[t[s]];r[n[i]]=e.children?e.children.length:0}const jq=["x","y","r","depth","children"];function are(e){gg.call(this,e)}are.Definition={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"radius",type:"field",default:null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:jq.length,default:jq}]};lt(are,gg,{layout:xCe,params:["radius","size","padding"],fields:jq});const Bq=["x0","y0","x1","y1","depth","children"];function ure(e){gg.call(this,e)}ure.Definition={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number",default:0},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:Bq.length,default:Bq}]};lt(ure,gg,{layout:T0t,params:["size","round","padding"],fields:Bq});function lre(e){Pe.call(this,null,e)}lre.Definition={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]};lt(lre,Pe,{transform(e,t){t.source||Le("Stratify transform requires an upstream data source.");let n=this.value;const r=e.modified(),i=t.fork(t.ALL).materialize(t.SOURCE),s=!n||r||t.changed(t.ADD_REM)||t.modified(e.key.fields)||t.modified(e.parentKey.fields);return i.source=i.source.slice(),s&&(n=i.source.length?Fq(ffe().id(e.key).parentId(e.parentKey)(i.source),e.key,Vc):Fq(ffe()([{}]),e.key,e.key)),i.source.root=this.value=n,i}});const i0e={tidy:$0t,cluster:Ygt},Uq=["x","y","depth","children"];function cre(e){gg.call(this,e)}cre.Definition={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"separation",type:"boolean",default:!0},{name:"as",type:"string",array:!0,length:Uq.length,default:Uq}]};lt(cre,gg,{layout(e){const t=e||"tidy";if(jt(i0e,t))return i0e[t]();Le("Unrecognized Tree layout method: "+t)},params:["size","nodeSize"],fields:Uq});function fre(e){Pe.call(this,[],e)}fre.Definition={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[]};lt(fre,Pe,{transform(e,t){const n=this.value,r=t.source&&t.source.root,i=t.fork(t.NO_SOURCE),s={};return r||Le("TreeLinks transform requires a tree data source."),t.changed(t.ADD_REM)?(i.rem=n,t.visit(t.SOURCE,o=>s[Lt(o)]=1),r.each(o=>{const a=o.data,u=o.parent&&o.parent.data;u&&s[Lt(a)]&&s[Lt(u)]&&i.add.push(xr({source:u,target:a}))}),this.value=i.add):t.changed(t.MOD)&&(t.visit(t.MOD,o=>s[Lt(o)]=1),n.forEach(o=>{(s[Lt(o.source)]||s[Lt(o.target)])&&i.mod.push(o)})),i}});const s0e={binary:L0t,dice:Gk,slice:hF,slicedice:F0t,squarify:CCe,resquarify:j0t},zq=["x0","y0","x1","y1","depth","children"];function dre(e){gg.call(this,e)}dre.Definition={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum",default:"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number",default:0},{name:"paddingInner",type:"number",default:0},{name:"paddingOuter",type:"number",default:0},{name:"paddingTop",type:"number",default:0},{name:"paddingRight",type:"number",default:0},{name:"paddingBottom",type:"number",default:0},{name:"paddingLeft",type:"number",default:0},{name:"ratio",type:"number",default:1.618033988749895},{name:"round",type:"boolean",default:!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:zq.length,default:zq}]};lt(dre,gg,{layout(){const e=M0t();return e.ratio=t=>{const n=e.tile();n.ratio&&e.tile(n.ratio(t))},e.method=t=>{jt(s0e,t)?e.tile(s0e[t]):Le("Unrecognized Treemap layout method: "+t)},e},params:["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],fields:zq});const WWt=Object.freeze(Object.defineProperty({__proto__:null,nest:ore,pack:are,partition:ure,stratify:lre,tree:cre,treelinks:fre,treemap:dre},Symbol.toStringTag,{value:"Module"})),X9=4278190080;function GWt(e,t){const n=e.bitmap();return(t||[]).forEach(r=>n.set(e(r.boundary[0]),e(r.boundary[3]))),[n,void 0]}function YWt(e,t,n,r,i){const s=e.width,o=e.height,a=r||i,u=V0(s,o).getContext("2d"),l=V0(s,o).getContext("2d"),c=a&&V0(s,o).getContext("2d");n.forEach(A=>OD(u,A,!1)),OD(l,t,!1),a&&OD(c,t,!0);const f=Q9(u,s,o),d=Q9(l,s,o),h=a&&Q9(c,s,o),p=e.bitmap(),m=a&&e.bitmap();let g,y,v,b,w,E,T,S;for(y=0;y<o;++y)for(g=0;g<s;++g)w=y*s+g,E=f[w]&X9,S=d[w]&X9,T=a&&h[w]&X9,(E||T||S)&&(v=e(g),b=e(y),!i&&(E||S)&&p.set(v,b),a&&(E||T)&&m.set(v,b));return[p,m]}function Q9(e,t,n){return new Uint32Array(e.getImageData(0,0,t,n).data.buffer)}function OD(e,t,n){if(!t.length)return;const r=t[0].mark.marktype;r==="group"?t.forEach(i=>{i.items.forEach(s=>OD(e,s.items,n))}):Ql[r].draw(e,{items:n?t.map(KWt):t})}function KWt(e){const t=H4(e,{});return t.stroke&&t.strokeOpacity!==0||t.fill&&t.fillOpacity!==0?{...t,strokeOpacity:1,stroke:"#000",fillOpacity:0}:t}const Ap=5,La=31,nk=32,Gg=new Uint32Array(nk+1),Cf=new Uint32Array(nk+1);Cf[0]=0;Gg[0]=~Cf[0];for(let e=1;e<=nk;++e)Cf[e]=Cf[e-1]<<1|1,Gg[e]=~Cf[e];function XWt(e,t){const n=new Uint32Array(~~((e*t+nk)/nk));function r(s,o){n[s]|=o}function i(s,o){n[s]&=o}return{array:n,get:(s,o)=>{const a=o*e+s;return n[a>>>Ap]&1<<(a&La)},set:(s,o)=>{const a=o*e+s;r(a>>>Ap,1<<(a&La))},clear:(s,o)=>{const a=o*e+s;i(a>>>Ap,~(1<<(a&La)))},getRange:(s,o,a,u)=>{let l=u,c,f,d,h;for(;l>=o;--l)if(c=l*e+s,f=l*e+a,d=c>>>Ap,h=f>>>Ap,d===h){if(n[d]&Gg[c&La]&Cf[(f&La)+1])return!0}else{if(n[d]&Gg[c&La]||n[h]&Cf[(f&La)+1])return!0;for(let p=d+1;p<h;++p)if(n[p])return!0}return!1},setRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ap,d=c>>>Ap,f===d)r(f,Gg[l&La]&Cf[(c&La)+1]);else for(r(f,Gg[l&La]),r(d,Cf[(c&La)+1]),h=f+1;h<d;++h)r(h,4294967295)},clearRange:(s,o,a,u)=>{let l,c,f,d,h;for(;o<=u;++o)if(l=o*e+s,c=o*e+a,f=l>>>Ap,d=c>>>Ap,f===d)i(f,Cf[l&La]|Gg[(c&La)+1]);else for(i(f,Cf[l&La]),i(d,Gg[(c&La)+1]),h=f+1;h<d;++h)i(h,0)},outOfBounds:(s,o,a,u)=>s<0||o<0||u>=t||a>=e}}function QWt(e,t,n){const r=Math.max(1,Math.sqrt(e*t/1e6)),i=~~((e+2*n+r)/r),s=~~((t+2*n+r)/r),o=a=>~~((a+n)/r);return o.invert=a=>a*r-n,o.bitmap=()=>XWt(i,s),o.ratio=r,o.padding=n,o.width=e,o.height=t,o}function JWt(e,t,n,r){const i=e.width,s=e.height;return function(o){const a=o.datum.datum.items[r].items,u=a.length,l=o.datum.fontSize,c=Ll.width(o.datum,o.datum.text);let f=0,d,h,p,m,g,y,v;for(let b=0;b<u;++b)d=a[b].x,p=a[b].y,h=a[b].x2===void 0?d:a[b].x2,m=a[b].y2===void 0?p:a[b].y2,g=(d+h)/2,y=(p+m)/2,v=Math.abs(h-d+m-p),v>=f&&(f=v,o.x=g,o.y=y);return g=c/2,y=l/2,d=o.x-g,h=o.x+g,p=o.y-y,m=o.y+y,o.align="center",d<0&&h<=i?o.align="left":0<=d&&i<h&&(o.align="right"),o.baseline="middle",p<0&&m<=s?o.baseline="top":0<=p&&s<m&&(o.baseline="bottom"),!0}}function cL(e,t,n,r,i,s){let o=n/2;return e-o<0||e+o>i||t-(o=r/2)<0||t+o>s}function b0(e,t,n,r,i,s,o,a){const u=i*s/(r*2),l=e(t-u),c=e(t+u),f=e(n-(s=s/2)),d=e(n+s);return o.outOfBounds(l,f,c,d)||o.getRange(l,f,c,d)||a&&a.getRange(l,f,c,d)}function ZWt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1];function u(l,c,f,d,h){const p=e.invert(l),m=e.invert(c);let g=f,y=s,v;if(!cL(p,m,d,h,i,s)&&!b0(e,p,m,h,d,g,o,a)&&!b0(e,p,m,h,d,h,o,null)){for(;y-g>=1;)v=(g+y)/2,b0(e,p,m,h,d,v,o,a)?y=v:g=v;if(g>f)return[p,m,g,!0]}}return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Ll.width(l.datum,l.datum.text);let p=n?d:0,m=!1,g=!1,y=0,v,b,w,E,T,S,A,C,k,N,D,O,$,F,M,B,U;for(let H=0;H<f;++H){for(v=c[H].x,w=c[H].y,b=c[H].x2===void 0?v:c[H].x2,E=c[H].y2===void 0?w:c[H].y2,v>b&&(U=v,v=b,b=U),w>E&&(U=w,w=E,E=U),k=e(v),D=e(b),N=~~((k+D)/2),O=e(w),F=e(E),$=~~((O+F)/2),A=N;A>=k;--A)for(C=$;C>=O;--C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);for(A=N;A<=D;++A)for(C=$;C<=F;++C)B=u(A,C,p,h,d),B&&([l.x,l.y,p,m]=B);!m&&!n&&(M=Math.abs(b-v+E-w),T=(v+b)/2,S=(w+E)/2,M>=y&&!cL(T,S,h,d,i,s)&&!b0(e,T,S,d,h,d,o,null)&&(y=M,l.x=T,l.y=S,g=!0))}return m||g?(T=h/2,S=d/2,o.setRange(e(l.x-T),e(l.y-S),e(l.x+T),e(l.y+S)),l.align="center",l.baseline="middle",!0):!1}}const eGt=[-1,-1,1,1],tGt=[-1,1,-1,1];function nGt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=e.bitmap();return function(l){const c=l.datum.datum.items[r].items,f=c.length,d=l.datum.fontSize,h=Ll.width(l.datum,l.datum.text),p=[];let m=n?d:0,g=!1,y=!1,v=0,b,w,E,T,S,A,C,k,N,D,O,$;for(let F=0;F<f;++F){for(b=c[F].x,E=c[F].y,w=c[F].x2===void 0?b:c[F].x2,T=c[F].y2===void 0?E:c[F].y2,p.push([e((b+w)/2),e((E+T)/2)]);p.length;)if([C,k]=p.pop(),!(o.get(C,k)||a.get(C,k)||u.get(C,k))){u.set(C,k);for(let M=0;M<4;++M)S=C+eGt[M],A=k+tGt[M],u.outOfBounds(S,A,S,A)||p.push([S,A]);if(S=e.invert(C),A=e.invert(k),N=m,D=s,!cL(S,A,h,d,i,s)&&!b0(e,S,A,d,h,N,o,a)&&!b0(e,S,A,d,h,d,o,null)){for(;D-N>=1;)O=(N+D)/2,b0(e,S,A,d,h,O,o,a)?D=O:N=O;N>m&&(l.x=S,l.y=A,m=N,g=!0)}}!g&&!n&&($=Math.abs(w-b+T-E),S=(b+w)/2,A=(E+T)/2,$>=v&&!cL(S,A,h,d,i,s)&&!b0(e,S,A,d,h,d,o,null)&&(v=$,l.x=S,l.y=A,y=!0))}return g||y?(S=h/2,A=d/2,o.setRange(e(l.x-S),e(l.y-A),e(l.x+S),e(l.y+A)),l.align="center",l.baseline="middle",!0):!1}}const rGt=["right","center","left"],iGt=["bottom","middle","top"];function sGt(e,t,n,r){const i=e.width,s=e.height,o=t[0],a=t[1],u=r.length;return function(l){const c=l.boundary,f=l.datum.fontSize;if(c[2]<0||c[5]<0||c[0]>i||c[3]>s)return!1;let d=l.textWidth??0,h,p,m,g,y,v,b,w,E,T,S,A,C,k,N;for(let D=0;D<u;++D){if(h=(n[D]&3)-1,p=(n[D]>>>2&3)-1,m=h===0&&p===0||r[D]<0,g=h&&p?Math.SQRT1_2:1,y=r[D]<0?-1:1,v=c[1+h]+r[D]*h*g,S=c[4+p]+y*f*p/2+r[D]*p*g,w=S-f/2,E=S+f/2,A=e(v),k=e(w),N=e(E),!d)if(o0e(A,A,k,N,o,a,v,v,w,E,c,m))d=Ll.width(l.datum,l.datum.text);else continue;if(T=v+y*d*h/2,v=T-d/2,b=T+d/2,A=e(v),C=e(b),o0e(A,C,k,N,o,a,v,b,w,E,c,m))return l.x=h?h*y<0?b:v:T,l.y=p?p*y<0?E:w:S,l.align=rGt[h*y+1],l.baseline=iGt[p*y+1],o.setRange(A,k,C,N),!0}return!1}}function o0e(e,t,n,r,i,s,o,a,u,l,c,f){return!(i.outOfBounds(e,n,t,r)||(f&&s||i).getRange(e,n,t,r))}const J9=0,Z9=4,eU=8,tU=0,nU=1,rU=2,oGt={"top-left":J9+tU,top:J9+nU,"top-right":J9+rU,left:Z9+tU,middle:Z9+nU,right:Z9+rU,"bottom-left":eU+tU,bottom:eU+nU,"bottom-right":eU+rU},aGt={naive:JWt,"reduced-search":ZWt,floodfill:nGt};function uGt(e,t,n,r,i,s,o,a,u,l,c){if(!e.length)return e;const f=Math.max(r.length,i.length),d=lGt(r,f),h=cGt(i,f),p=fGt(e[0].datum),m=p==="group"&&e[0].datum.items[u].marktype,g=m==="area",y=dGt(p,m,a,u),v=l===null||l===1/0,b=g&&c==="naive";let w=-1,E=-1;const T=e.map(k=>{const N=v?Ll.width(k,k.text):void 0;return w=Math.max(w,N),E=Math.max(E,k.fontSize),{datum:k,opacity:0,x:void 0,y:void 0,align:void 0,baseline:void 0,boundary:y(k),textWidth:N}});l=l===null||l===1/0?Math.max(w,E)+Math.max(...r):l;const S=QWt(t[0],t[1],l);let A;if(!b){n&&T.sort((D,O)=>n(D.datum,O.datum));let k=!1;for(let D=0;D<h.length&&!k;++D)k=h[D]===5||d[D]<0;const N=(p&&o||g)&&e.map(D=>D.datum);A=s.length||N?YWt(S,N||[],s,k,g):GWt(S,o&&T)}const C=g?aGt[c](S,A,o,u):sGt(S,A,h,d);return T.forEach(k=>k.opacity=+C(k)),T}function lGt(e,t){const n=new Float64Array(t),r=e.length;for(let i=0;i<r;++i)n[i]=e[i]||0;for(let i=r;i<t;++i)n[i]=n[r-1];return n}function cGt(e,t){const n=new Int8Array(t),r=e.length;for(let i=0;i<r;++i)n[i]|=oGt[e[i]];for(let i=r;i<t;++i)n[i]=n[r-1];return n}function fGt(e){return e&&e.mark&&e.mark.marktype}function dGt(e,t,n,r){const i=s=>[s.x,s.x,s.x,s.y,s.y,s.y];return e?e==="line"||e==="area"?s=>i(s.datum):t==="line"?s=>{const o=s.datum.items[r].items;return i(o.length?o[n==="start"?0:o.length-1]:{x:NaN,y:NaN})}:s=>{const o=s.datum.bounds;return[o.x1,(o.x1+o.x2)/2,o.x2,o.y1,(o.y1+o.y2)/2,o.y2]}:i}const Vq=["x","y","opacity","align","baseline"],KFe=["top-left","left","bottom-left","top","bottom","top-right","right","bottom-right"];function hre(e){Pe.call(this,null,e)}hre.Definition={type:"Label",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"sort",type:"compare"},{name:"anchor",type:"string",array:!0,default:KFe},{name:"offset",type:"number",array:!0,default:[1]},{name:"padding",type:"number",default:0,null:!0},{name:"lineAnchor",type:"string",values:["start","end"],default:"end"},{name:"markIndex",type:"number",default:0},{name:"avoidBaseMark",type:"boolean",default:!0},{name:"avoidMarks",type:"data",array:!0},{name:"method",type:"string",default:"naive"},{name:"as",type:"string",array:!0,length:Vq.length,default:Vq}]};lt(hre,Pe,{transform(e,t){function n(s){const o=e[s];return wn(o)&&t.modified(o.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||n("sort")))return;(!e.size||e.size.length!==2)&&Le("Size parameter should be specified as a [width, height] array.");const i=e.as||Vq;return uGt(t.materialize(t.SOURCE).source||[],e.size,e.sort,pt(e.offset==null?1:e.offset),pt(e.anchor||KFe),e.avoidMarks||[],e.avoidBaseMark!==!1,e.lineAnchor||"end",e.markIndex||0,e.padding===void 0?0:e.padding,e.method||"naive").forEach(s=>{const o=s.datum;o[i[0]]=s.x,o[i[1]]=s.y,o[i[2]]=s.opacity,o[i[3]]=s.align,o[i[4]]=s.baseline}),t.reflow(r).modifies(i)}});const hGt=Object.freeze(Object.defineProperty({__proto__:null,label:hre},Symbol.toStringTag,{value:"Module"}));function XFe(e,t){var n=[],r=function(c){return c(a)},i,s,o,a,u,l;if(t==null)n.push(e);else for(i={},s=0,o=e.length;s<o;++s)a=e[s],u=t.map(r),l=i[u],l||(i[u]=l=[],l.dims=u,n.push(l)),l.push(a);return n}function pre(e){Pe.call(this,null,e)}pre.Definition={type:"Loess",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"bandwidth",type:"number",default:.3},{name:"as",type:"string",array:!0}]};lt(pre,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=XFe(r,e.groupby),s=(e.groupby||[]).map(Zi),o=s.length,a=e.as||[Zi(e.x),Zi(e.y)],u=[];i.forEach(l=>{uLe(l,e.x,e.y,e.bandwidth||.3).forEach(c=>{const f={};for(let d=0;d<o;++d)f[s[d]]=l.dims[d];f[a[0]]=c[0],f[a[1]]=c[1],u.push(xr(f))})}),this.value&&(n.rem=this.value),this.value=n.add=n.source=u}return n}});const Hq={constant:Ate,linear:Cte,log:iLe,exp:sLe,pow:oLe,quad:Ite,poly:aLe},pGt=(e,t)=>e==="poly"?t:e==="quad"?2:1;function mre(e){Pe.call(this,null,e)}mre.Definition={type:"Regression",metadata:{generates:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"method",type:"string",default:"linear",values:Object.keys(Hq)},{name:"order",type:"number",default:3},{name:"extent",type:"number",array:!0,length:2},{name:"params",type:"boolean",default:!1},{name:"as",type:"string",array:!0}]};lt(mre,Pe,{transform(e,t){const n=t.fork(t.NO_SOURCE|t.NO_FIELDS);if(!this.value||t.changed()||e.modified()){const r=t.materialize(t.SOURCE).source,i=XFe(r,e.groupby),s=(e.groupby||[]).map(Zi),o=e.method||"linear",a=e.order==null?3:e.order,u=pGt(o,a),l=e.as||[Zi(e.x),Zi(e.y)],c=Hq[o],f=[];let d=e.extent;jt(Hq,o)||Le("Invalid regression method: "+o),d!=null&&o==="log"&&d[0]<=0&&(t.dataflow.warn("Ignoring extent with values <= 0 for log regression."),d=null),i.forEach(h=>{if(h.length<=u){t.dataflow.warn("Skipping regression with more parameters than data points.");return}const m=c(h,e.x,e.y,a);if(e.params){f.push(xr({keys:h.dims,coef:m.coef,rSquared:m.rSquared}));return}const g=d||Uh(h,e.x),y=v=>{const b={};for(let w=0;w<s.length;++w)b[s[w]]=h.dims[w];b[l[0]]=v[0],b[l[1]]=v[1],f.push(xr(b))};o==="linear"||o==="constant"?g.forEach(v=>y([v,m.predict(v)])):Q4(m.predict,g,25,200).forEach(y)}),this.value&&(n.rem=this.value),this.value=n.add=n.source=f}return n}});const mGt=Object.freeze(Object.defineProperty({__proto__:null,loess:pre,regression:mre},Symbol.toStringTag,{value:"Module"}));function gre(e){Pe.call(this,null,e)}gre.Definition={type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,default:[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string",default:"path"}]};const gGt=[-1e5,-1e5,1e5,1e5];lt(gre,Pe,{transform(e,t){const n=e.as||"path",r=t.source;if(!r||!r.length)return t;let i=e.size;i=i?[0,0,i[0],i[1]]:(i=e.extent)?[i[0][0],i[0][1],i[1][0],i[1][1]]:gGt;const s=this.value=EX.from(r,e.x,e.y).voronoi(i);for(let o=0,a=r.length;o<a;++o){const u=s.cellPolygon(o);r[o][n]=u&&!vGt(u)?yGt(u):null}return t.reflow(e.modified()).modifies(n)}});function yGt(e){const t=e[0][0],n=e[0][1];let r=e.length-1;for(;e[r][0]===t&&e[r][1]===n;--r);return"M"+e.slice(0,r+1).join("L")+"Z"}function vGt(e){return e.length===2&&e[0][0]===e[1][0]&&e[0][1]===e[1][1]}const bGt=Object.freeze(Object.defineProperty({__proto__:null,voronoi:gre},Symbol.toStringTag,{value:"Module"}));var iU=Math.PI/180,wC=64,DD=2048;function _Gt(){var e=[256,256],t,n,r,i,s,o,a,u=QFe,l=[],c=Math.random,f={};f.layout=function(){for(var p=d(V0()),m=AGt((e[0]>>5)*e[1]),g=null,y=l.length,v=-1,b=[],w=l.map(T=>({text:t(T),font:n(T),style:i(T),weight:s(T),rotate:o(T),size:~~(r(T)+1e-14),padding:a(T),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:T})).sort((T,S)=>S.size-T.size);++v<y;){var E=w[v];E.x=e[0]*(c()+.5)>>1,E.y=e[1]*(c()+.5)>>1,wGt(p,E,w,v),E.hasText&&h(m,E,g)&&(b.push(E),g?xGt(g,E):g=[{x:E.x+E.x0,y:E.y+E.y0},{x:E.x+E.x1,y:E.y+E.y1}],E.x-=e[0]>>1,E.y-=e[1]>>1)}return b};function d(p){p.width=p.height=1;var m=Math.sqrt(p.getContext("2d").getImageData(0,0,1,1).data.length>>2);p.width=(wC<<5)/m,p.height=DD/m;var g=p.getContext("2d");return g.fillStyle=g.strokeStyle="red",g.textAlign="center",{context:g,ratio:m}}function h(p,m,g){for(var y=m.x,v=m.y,b=Math.sqrt(e[0]*e[0]+e[1]*e[1]),w=u(e),E=c()<.5?1:-1,T=-E,S,A,C;(S=w(T+=E))&&(A=~~S[0],C=~~S[1],!(Math.min(Math.abs(A),Math.abs(C))>=b));)if(m.x=y+A,m.y=v+C,!(m.x+m.x0<0||m.y+m.y0<0||m.x+m.x1>e[0]||m.y+m.y1>e[1])&&(!g||!EGt(m,p,e[0]))&&(!g||SGt(m,g))){for(var k=m.sprite,N=m.width>>5,D=e[0]>>5,O=m.x-(N<<4),$=O&127,F=32-$,M=m.y1-m.y0,B=(m.y+m.y0)*D+(O>>5),U,H=0;H<M;H++){U=0;for(var P=0;P<=N;P++)p[B+P]|=U<<F|(P<N?(U=k[H*N+P])>>>$:0);B+=D}return m.sprite=null,!0}return!1}return f.words=function(p){return arguments.length?(l=p,f):l},f.size=function(p){return arguments.length?(e=[+p[0],+p[1]],f):e},f.font=function(p){return arguments.length?(n=Iv(p),f):n},f.fontStyle=function(p){return arguments.length?(i=Iv(p),f):i},f.fontWeight=function(p){return arguments.length?(s=Iv(p),f):s},f.rotate=function(p){return arguments.length?(o=Iv(p),f):o},f.text=function(p){return arguments.length?(t=Iv(p),f):t},f.spiral=function(p){return arguments.length?(u=CGt[p]||p,f):u},f.fontSize=function(p){return arguments.length?(r=Iv(p),f):r},f.padding=function(p){return arguments.length?(a=Iv(p),f):a},f.random=function(p){return arguments.length?(c=p,f):c},f}function wGt(e,t,n,r){if(!t.sprite){var i=e.context,s=e.ratio;i.clearRect(0,0,(wC<<5)/s,DD/s);var o=0,a=0,u=0,l=n.length,c,f,d,h,p;for(--r;++r<l;){if(t=n[r],i.save(),i.font=t.style+" "+t.weight+" "+~~((t.size+1)/s)+"px "+t.font,c=i.measureText(t.text+"m").width*s,d=t.size<<1,t.rotate){var m=Math.sin(t.rotate*iU),g=Math.cos(t.rotate*iU),y=c*g,v=c*m,b=d*g,w=d*m;c=Math.max(Math.abs(y+w),Math.abs(y-w))+31>>5<<5,d=~~Math.max(Math.abs(v+b),Math.abs(v-b))}else c=c+31>>5<<5;if(d>u&&(u=d),o+c>=wC<<5&&(o=0,a+=u,u=0),a+d>=DD)break;i.translate((o+(c>>1))/s,(a+(d>>1))/s),t.rotate&&i.rotate(t.rotate*iU),i.fillText(t.text,0,0),t.padding&&(i.lineWidth=2*t.padding,i.strokeText(t.text,0,0)),i.restore(),t.width=c,t.height=d,t.xoff=o,t.yoff=a,t.x1=c>>1,t.y1=d>>1,t.x0=-t.x1,t.y0=-t.y1,t.hasText=!0,o+=c}for(var E=i.getImageData(0,0,(wC<<5)/s,DD/s).data,T=[];--r>=0;)if(t=n[r],!!t.hasText){for(c=t.width,f=c>>5,d=t.y1-t.y0,h=0;h<d*f;h++)T[h]=0;if(o=t.xoff,o==null)return;a=t.yoff;var S=0,A=-1;for(p=0;p<d;p++){for(h=0;h<c;h++){var C=f*p+(h>>5),k=E[(a+p)*(wC<<5)+(o+h)<<2]?1<<31-h%32:0;T[C]|=k,S|=k}S?A=p:(t.y0++,d--,p--,a++)}t.y1=t.y0+A,t.sprite=T.slice(0,(t.y1-t.y0)*f)}}}function EGt(e,t,n){n>>=5;for(var r=e.sprite,i=e.width>>5,s=e.x-(i<<4),o=s&127,a=32-o,u=e.y1-e.y0,l=(e.y+e.y0)*n+(s>>5),c,f=0;f<u;f++){c=0;for(var d=0;d<=i;d++)if((c<<a|(d<i?(c=r[f*i+d])>>>o:0))&t[l+d])return!0;l+=n}return!1}function xGt(e,t){var n=e[0],r=e[1];t.x+t.x0<n.x&&(n.x=t.x+t.x0),t.y+t.y0<n.y&&(n.y=t.y+t.y0),t.x+t.x1>r.x&&(r.x=t.x+t.x1),t.y+t.y1>r.y&&(r.y=t.y+t.y1)}function SGt(e,t){return e.x+e.x1>t[0].x&&e.x+e.x0<t[1].x&&e.y+e.y1>t[0].y&&e.y+e.y0<t[1].y}function QFe(e){var t=e[0]/e[1];return function(n){return[t*(n*=.1)*Math.cos(n),n*Math.sin(n)]}}function TGt(e){var t=4,n=t*e[0]/e[1],r=0,i=0;return function(s){var o=s<0?-1:1;switch(Math.sqrt(1+4*o*s)-o&3){case 0:r+=n;break;case 1:i+=t;break;case 2:r-=n;break;default:i-=t;break}return[r,i]}}function AGt(e){for(var t=[],n=-1;++n<e;)t[n]=0;return t}function Iv(e){return typeof e=="function"?e:function(){return e}}var CGt={archimedean:QFe,rectangular:TGt};const JFe=["x","y","font","fontSize","fontStyle","fontWeight","angle"],IGt=["text","font","rotate","fontSize","fontStyle","fontWeight"];function yre(e){Pe.call(this,_Gt(),e)}yre.Definition={type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,default:"sans-serif"},{name:"fontStyle",type:"string",expr:!0,default:"normal"},{name:"fontWeight",type:"string",expr:!0,default:"normal"},{name:"fontSize",type:"number",expr:!0,default:14},{name:"fontSizeRange",type:"number",array:"nullable",default:[10,50]},{name:"rotate",type:"number",expr:!0,default:0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,default:JFe}]};lt(yre,Pe,{transform(e,t){e.size&&!(e.size[0]&&e.size[1])&&Le("Wordcloud size dimensions must be non-zero.");function n(p){const m=e[p];return wn(m)&&t.modified(m.fields)}const r=e.modified();if(!(r||t.changed(t.ADD_REM)||IGt.some(n)))return;const i=t.materialize(t.SOURCE).source,s=this.value,o=e.as||JFe;let a=e.fontSize||14,u;if(wn(a)?u=e.fontSizeRange:a=Ca(a),u){const p=a,m=vr("sqrt")().domain(Uh(i,p)).range(u);a=g=>m(p(g))}i.forEach(p=>{p[o[0]]=NaN,p[o[1]]=NaN,p[o[3]]=0});const l=s.words(i).text(e.text).size(e.size||[500,500]).padding(e.padding||1).spiral(e.spiral||"archimedean").rotate(e.rotate||0).font(e.font||"sans-serif").fontStyle(e.fontStyle||"normal").fontWeight(e.fontWeight||"normal").fontSize(a).random(qc).layout(),c=s.size(),f=c[0]>>1,d=c[1]>>1,h=l.length;for(let p=0,m,g;p<h;++p)m=l[p],g=m.datum,g[o[0]]=m.x+f,g[o[1]]=m.y+d,g[o[2]]=m.font,g[o[3]]=m.size,g[o[4]]=m.style,g[o[5]]=m.weight,g[o[6]]=m.rotate;return t.reflow(r).modifies(o)}});const kGt=Object.freeze(Object.defineProperty({__proto__:null,wordcloud:yre},Symbol.toStringTag,{value:"Module"})),RGt=e=>new Uint8Array(e),NGt=e=>new Uint16Array(e),w2=e=>new Uint32Array(e);function PGt(){let e=8,t=[],n=w2(0),r=eO(0,e),i=eO(0,e);return{data:()=>t,seen:()=>n=OGt(n,t.length),add(s){for(let o=0,a=t.length,u=s.length,l;o<u;++o)l=s[o],l._index=a++,t.push(l)},remove(s,o){const a=t.length,u=Array(a-s),l=t;let c,f,d;for(f=0;!o[f]&&f<a;++f)u[f]=t[f],l[f]=f;for(d=f;f<a;++f)c=t[f],o[f]?l[f]=-1:(l[f]=d,r[d]=r[f],i[d]=i[f],u[d]=c,c._index=d++),r[f]=0;return t=u,l},size:()=>t.length,curr:()=>r,prev:()=>i,reset:s=>i[s]=r[s],all:()=>e<257?255:e<65537?65535:4294967295,set(s,o){r[s]|=o},clear(s,o){r[s]&=~o},resize(s,o){const a=r.length;(s>a||o>e)&&(e=Math.max(o,e),r=eO(s,e,r),i=eO(s,e))}}}function OGt(e,t,n){return e.length>=t?e:(n=n||new e.constructor(t),n.set(e),n)}function eO(e,t,n){const r=(t<257?RGt:t<65537?NGt:w2)(e);return n&&r.set(n),r}function a0e(e,t,n){const r=1<<t;return{one:r,zero:~r,range:n.slice(),bisect:e.bisect,index:e.index,size:e.size,onAdd(i,s){const o=this,a=o.bisect(o.range,i.value),u=i.index,l=a[0],c=a[1],f=u.length;let d;for(d=0;d<l;++d)s[u[d]]|=r;for(d=c;d<f;++d)s[u[d]]|=r;return o}}}function u0e(){let e=w2(0),t=[],n=0;function r(a,u,l){if(!u.length)return[];const c=n,f=u.length,d=w2(f);let h=Array(f),p,m,g;for(g=0;g<f;++g)h[g]=a(u[g]),d[g]=g;if(h=DGt(h,d),c)p=t,m=e,t=Array(c+f),e=w2(c+f),$Gt(l,p,m,c,h,d,f,t,e);else{if(l>0)for(g=0;g<f;++g)d[g]+=l;t=h,e=d}return n=c+f,{index:d,value:h}}function i(a,u){const l=n;let c,f,d;for(f=0;!u[e[f]]&&f<l;++f);for(d=f;f<l;++f)u[c=e[f]]||(e[d]=c,t[d]=t[f],++d);n=l-a}function s(a){for(let u=0,l=n;u<l;++u)e[u]=a[e[u]]}function o(a,u){let l;return u?l=u.length:(u=t,l=n),[ict(u,a[0],0,l),ey(u,a[1],0,l)]}return{insert:r,remove:i,bisect:o,reindex:s,index:()=>e,size:()=>n}}function DGt(e,t){return e.sort.call(t,(n,r)=>{const i=e[n],s=e[r];return i<s?-1:i>s?1:0}),act(e,t)}function $Gt(e,t,n,r,i,s,o,a,u){let l=0,c=0,f;for(f=0;l<r&&c<o;++f)t[l]<i[c]?(a[f]=t[l],u[f]=n[l++]):(a[f]=i[c],u[f]=s[c++]+e);for(;l<r;++l,++f)a[f]=t[l],u[f]=n[l];for(;c<o;++c,++f)a[f]=i[c],u[f]=s[c]+e}function vre(e){Pe.call(this,PGt(),e),this._indices=null,this._dims=null}vre.Definition={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};lt(vre,Pe,{transform(e,t){if(this._dims){var n=e.modified("fields")||e.fields.some(r=>t.modified(r.fields));return n?this.reinit(e,t):this.eval(e,t)}else return this.init(e,t)},init(e,t){const n=e.fields,r=e.query,i=this._indices={},s=this._dims=[],o=r.length;let a=0,u,l;for(;a<o;++a)u=n[a].fname,l=i[u]||(i[u]=u0e()),s.push(a0e(l,a,r[a]));return this.eval(e,t)},reinit(e,t){const n=t.materialize().fork(),r=e.fields,i=e.query,s=this._indices,o=this._dims,a=this.value,u=a.curr(),l=a.prev(),c=a.all(),f=n.rem=n.add,d=n.mod,h=i.length,p={};let m,g,y,v,b,w,E,T,S;if(l.set(u),t.rem.length&&(b=this.remove(e,t,n)),t.add.length&&a.add(t.add),t.mod.length)for(w={},v=t.mod,E=0,T=v.length;E<T;++E)w[v[E]._index]=1;for(E=0;E<h;++E)S=r[E],(!o[E]||e.modified("fields",E)||t.modified(S.fields))&&(y=S.fname,(m=p[y])||(s[y]=g=u0e(),p[y]=m=g.insert(S,t.source,0)),o[E]=a0e(g,E,i[E]).onAdd(m,u));for(E=0,T=a.data().length;E<T;++E)b[E]||(l[E]!==u[E]?f.push(E):w[E]&&u[E]!==c&&d.push(E));return a.mask=(1<<h)-1,n},eval(e,t){const n=t.materialize().fork(),r=this._dims.length;let i=0;return t.rem.length&&(this.remove(e,t,n),i|=(1<<r)-1),e.modified("query")&&!e.modified("fields")&&(i|=this.update(e,t,n)),t.add.length&&(this.insert(e,t,n),i|=(1<<r)-1),t.mod.length&&(this.modify(t,n),i|=(1<<r)-1),this.value.mask=i,n},insert(e,t,n){const r=t.add,i=this.value,s=this._dims,o=this._indices,a=e.fields,u={},l=n.add,c=i.size()+r.length,f=s.length;let d=i.size(),h,p,m;i.resize(c,f),i.add(r);const g=i.curr(),y=i.prev(),v=i.all();for(h=0;h<f;++h)p=a[h].fname,m=u[p]||(u[p]=o[p].insert(a[h],r,d)),s[h].onAdd(m,g);for(;d<c;++d)y[d]=v,g[d]!==v&&l.push(d)},modify(e,t){const n=t.mod,r=this.value,i=r.curr(),s=r.all(),o=e.mod;let a,u,l;for(a=0,u=o.length;a<u;++a)l=o[a]._index,i[l]!==s&&n.push(l)},remove(e,t,n){const r=this._indices,i=this.value,s=i.curr(),o=i.prev(),a=i.all(),u={},l=n.rem,c=t.rem;let f,d,h,p;for(f=0,d=c.length;f<d;++f)h=c[f]._index,u[h]=1,o[h]=p=s[h],s[h]=a,p!==a&&l.push(h);for(h in r)r[h].remove(d,u);return this.reindex(t,d,u),u},reindex(e,t,n){const r=this._indices,i=this.value;e.runAfter(()=>{const s=i.remove(t,n);for(const o in r)r[o].reindex(s)})},update(e,t,n){const r=this._dims,i=e.query,s=t.stamp,o=r.length;let a=0,u,l;for(n.filters=0,l=0;l<o;++l)e.modified("query",l)&&(u=l,++a);if(a===1)a=r[u].one,this.incrementOne(r[u],i[u],n.add,n.rem);else for(l=0,a=0;l<o;++l)e.modified("query",l)&&(a|=r[l].one,this.incrementAll(r[l],i[l],s,n.add),n.rem=n.add);return a},incrementAll(e,t,n,r){const i=this.value,s=i.seen(),o=i.curr(),a=i.prev(),u=e.index(),l=e.bisect(e.range),c=e.bisect(t),f=c[0],d=c[1],h=l[0],p=l[1],m=e.one;let g,y,v;if(f<h)for(g=f,y=Math.min(h,d);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(f>h)for(g=h,y=Math.min(f,p);g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;if(d>p)for(g=Math.max(f,p),y=d;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;else if(d<p)for(g=Math.max(h,d),y=p;g<y;++g)v=u[g],s[v]!==n&&(a[v]=o[v],s[v]=n,r.push(v)),o[v]^=m;e.range=t.slice()},incrementOne(e,t,n,r){const i=this.value,s=i.curr(),o=e.index(),a=e.bisect(e.range),u=e.bisect(t),l=u[0],c=u[1],f=a[0],d=a[1],h=e.one;let p,m,g;if(l<f)for(p=l,m=Math.min(f,c);p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(l>f)for(p=f,m=Math.min(l,d);p<m;++p)g=o[p],s[g]^=h,r.push(g);if(c>d)for(p=Math.max(l,d),m=c;p<m;++p)g=o[p],s[g]^=h,n.push(g);else if(c<d)for(p=Math.max(f,c),m=d;p<m;++p)g=o[p],s[g]^=h,r.push(g);e.range=t.slice()}});function bre(e){Pe.call(this,null,e)}bre.Definition={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};lt(bre,Pe,{transform(e,t){const n=~(e.ignore||0),r=e.filter,i=r.mask;if(!(i&n))return t.StopPropagation;const s=t.fork(t.ALL),o=r.data(),a=r.curr(),u=r.prev(),l=c=>a[c]&n?null:o[c];return s.filter(s.MOD,l),i&i-1?(s.filter(s.ADD,c=>{const f=a[c]&n;return!f&&f^u[c]&n?o[c]:null}),s.filter(s.REM,c=>{const f=a[c]&n;return f&&!(f^(f^u[c]&n))?o[c]:null})):(s.filter(s.ADD,l),s.filter(s.REM,c=>(a[c]&n)===i?o[c]:null)),s.filter(s.SOURCE,c=>l(c._index))}});const MGt=Object.freeze(Object.defineProperty({__proto__:null,crossfilter:vre,resolvefilter:bre},Symbol.toStringTag,{value:"Module"})),LGt="RawCode",Ab="Literal",FGt="Property",jGt="Identifier",BGt="ArrayExpression",UGt="BinaryExpression",ZFe="CallExpression",zGt="ConditionalExpression",VGt="LogicalExpression",HGt="MemberExpression",qGt="ObjectExpression",WGt="UnaryExpression";function pd(e){this.type=e}pd.prototype.visit=function(e){let t,n,r;if(e(this))return 1;for(t=GGt(this),n=0,r=t.length;n<r;++n)if(t[n].visit(e))return 1};function GGt(e){switch(e.type){case BGt:return e.elements;case UGt:case VGt:return[e.left,e.right];case ZFe:return[e.callee].concat(e.arguments);case zGt:return[e.test,e.consequent,e.alternate];case HGt:return[e.object,e.property];case qGt:return e.properties;case FGt:return[e.key,e.value];case WGt:return[e.argument];case jGt:case Ab:case LGt:default:return[]}}var up,kt,$e,_a,$r,m5=1,KR=2,Cb=3,cv=4,g5=5,y_=6,Iu=7,XR=8,YGt=9;up={};up[m5]="Boolean";up[KR]="<end>";up[Cb]="Identifier";up[cv]="Keyword";up[g5]="Null";up[y_]="Numeric";up[Iu]="Punctuator";up[XR]="String";up[YGt]="RegularExpression";var KGt="ArrayExpression",XGt="BinaryExpression",QGt="CallExpression",JGt="ConditionalExpression",e4e="Identifier",ZGt="Literal",eYt="LogicalExpression",tYt="MemberExpression",nYt="ObjectExpression",rYt="Property",iYt="UnaryExpression",lo="Unexpected token %0",sYt="Unexpected number",oYt="Unexpected string",aYt="Unexpected identifier",uYt="Unexpected reserved word",lYt="Unexpected end of input",qq="Invalid regular expression",sU="Invalid regular expression: missing /",t4e="Octal literals are not allowed in strict mode.",cYt="Duplicate data property in object literal not allowed in strict mode",Do="ILLEGAL",rk="Disabled.",fYt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0370-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0620-\\u064A\\u066E\\u066F\\u0671-\\u06D3\\u06D5\\u06E5\\u06E6\\u06EE\\u06EF\\u06FA-\\u06FC\\u06FF\\u0710\\u0712-\\u072F\\u074D-\\u07A5\\u07B1\\u07CA-\\u07EA\\u07F4\\u07F5\\u07FA\\u0800-\\u0815\\u081A\\u0824\\u0828\\u0840-\\u0858\\u08A0-\\u08B2\\u0904-\\u0939\\u093D\\u0950\\u0958-\\u0961\\u0971-\\u0980\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BD\\u09CE\\u09DC\\u09DD\\u09DF-\\u09E1\\u09F0\\u09F1\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A59-\\u0A5C\\u0A5E\\u0A72-\\u0A74\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABD\\u0AD0\\u0AE0\\u0AE1\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3D\\u0B5C\\u0B5D\\u0B5F-\\u0B61\\u0B71\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BD0\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D\\u0C58\\u0C59\\u0C60\\u0C61\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBD\\u0CDE\\u0CE0\\u0CE1\\u0CF1\\u0CF2\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D\\u0D4E\\u0D60\\u0D61\\u0D7A-\\u0D7F\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0E01-\\u0E30\\u0E32\\u0E33\\u0E40-\\u0E46\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB0\\u0EB2\\u0EB3\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EDC-\\u0EDF\\u0F00\\u0F40-\\u0F47\\u0F49-\\u0F6C\\u0F88-\\u0F8C\\u1000-\\u102A\\u103F\\u1050-\\u1055\\u105A-\\u105D\\u1061\\u1065\\u1066\\u106E-\\u1070\\u1075-\\u1081\\u108E\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1711\\u1720-\\u1731\\u1740-\\u1751\\u1760-\\u176C\\u176E-\\u1770\\u1780-\\u17B3\\u17D7\\u17DC\\u1820-\\u1877\\u1880-\\u18A8\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1950-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19C1-\\u19C7\\u1A00-\\u1A16\\u1A20-\\u1A54\\u1AA7\\u1B05-\\u1B33\\u1B45-\\u1B4B\\u1B83-\\u1BA0\\u1BAE\\u1BAF\\u1BBA-\\u1BE5\\u1C00-\\u1C23\\u1C4D-\\u1C4F\\u1C5A-\\u1C7D\\u1CE9-\\u1CEC\\u1CEE-\\u1CF1\\u1CF5\\u1CF6\\u1D00-\\u1DBF\\u1E00-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u2071\\u207F\\u2090-\\u209C\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CEE\\u2CF2\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D80-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2E2F\\u3005-\\u3007\\u3021-\\u3029\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA61F\\uA62A\\uA62B\\uA640-\\uA66E\\uA67F-\\uA69D\\uA6A0-\\uA6EF\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA801\\uA803-\\uA805\\uA807-\\uA80A\\uA80C-\\uA822\\uA840-\\uA873\\uA882-\\uA8B3\\uA8F2-\\uA8F7\\uA8FB\\uA90A-\\uA925\\uA930-\\uA946\\uA960-\\uA97C\\uA984-\\uA9B2\\uA9CF\\uA9E0-\\uA9E4\\uA9E6-\\uA9EF\\uA9FA-\\uA9FE\\uAA00-\\uAA28\\uAA40-\\uAA42\\uAA44-\\uAA4B\\uAA60-\\uAA76\\uAA7A\\uAA7E-\\uAAAF\\uAAB1\\uAAB5\\uAAB6\\uAAB9-\\uAABD\\uAAC0\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEA\\uAAF2-\\uAAF4\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABE2\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D\\uFB1F-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF21-\\uFF3A\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]"),dYt=new RegExp("[\\xAA\\xB5\\xBA\\xC0-\\xD6\\xD8-\\xF6\\xF8-\\u02C1\\u02C6-\\u02D1\\u02E0-\\u02E4\\u02EC\\u02EE\\u0300-\\u0374\\u0376\\u0377\\u037A-\\u037D\\u037F\\u0386\\u0388-\\u038A\\u038C\\u038E-\\u03A1\\u03A3-\\u03F5\\u03F7-\\u0481\\u0483-\\u0487\\u048A-\\u052F\\u0531-\\u0556\\u0559\\u0561-\\u0587\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u05D0-\\u05EA\\u05F0-\\u05F2\\u0610-\\u061A\\u0620-\\u0669\\u066E-\\u06D3\\u06D5-\\u06DC\\u06DF-\\u06E8\\u06EA-\\u06FC\\u06FF\\u0710-\\u074A\\u074D-\\u07B1\\u07C0-\\u07F5\\u07FA\\u0800-\\u082D\\u0840-\\u085B\\u08A0-\\u08B2\\u08E4-\\u0963\\u0966-\\u096F\\u0971-\\u0983\\u0985-\\u098C\\u098F\\u0990\\u0993-\\u09A8\\u09AA-\\u09B0\\u09B2\\u09B6-\\u09B9\\u09BC-\\u09C4\\u09C7\\u09C8\\u09CB-\\u09CE\\u09D7\\u09DC\\u09DD\\u09DF-\\u09E3\\u09E6-\\u09F1\\u0A01-\\u0A03\\u0A05-\\u0A0A\\u0A0F\\u0A10\\u0A13-\\u0A28\\u0A2A-\\u0A30\\u0A32\\u0A33\\u0A35\\u0A36\\u0A38\\u0A39\\u0A3C\\u0A3E-\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A59-\\u0A5C\\u0A5E\\u0A66-\\u0A75\\u0A81-\\u0A83\\u0A85-\\u0A8D\\u0A8F-\\u0A91\\u0A93-\\u0AA8\\u0AAA-\\u0AB0\\u0AB2\\u0AB3\\u0AB5-\\u0AB9\\u0ABC-\\u0AC5\\u0AC7-\\u0AC9\\u0ACB-\\u0ACD\\u0AD0\\u0AE0-\\u0AE3\\u0AE6-\\u0AEF\\u0B01-\\u0B03\\u0B05-\\u0B0C\\u0B0F\\u0B10\\u0B13-\\u0B28\\u0B2A-\\u0B30\\u0B32\\u0B33\\u0B35-\\u0B39\\u0B3C-\\u0B44\\u0B47\\u0B48\\u0B4B-\\u0B4D\\u0B56\\u0B57\\u0B5C\\u0B5D\\u0B5F-\\u0B63\\u0B66-\\u0B6F\\u0B71\\u0B82\\u0B83\\u0B85-\\u0B8A\\u0B8E-\\u0B90\\u0B92-\\u0B95\\u0B99\\u0B9A\\u0B9C\\u0B9E\\u0B9F\\u0BA3\\u0BA4\\u0BA8-\\u0BAA\\u0BAE-\\u0BB9\\u0BBE-\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCD\\u0BD0\\u0BD7\\u0BE6-\\u0BEF\\u0C00-\\u0C03\\u0C05-\\u0C0C\\u0C0E-\\u0C10\\u0C12-\\u0C28\\u0C2A-\\u0C39\\u0C3D-\\u0C44\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C58\\u0C59\\u0C60-\\u0C63\\u0C66-\\u0C6F\\u0C81-\\u0C83\\u0C85-\\u0C8C\\u0C8E-\\u0C90\\u0C92-\\u0CA8\\u0CAA-\\u0CB3\\u0CB5-\\u0CB9\\u0CBC-\\u0CC4\\u0CC6-\\u0CC8\\u0CCA-\\u0CCD\\u0CD5\\u0CD6\\u0CDE\\u0CE0-\\u0CE3\\u0CE6-\\u0CEF\\u0CF1\\u0CF2\\u0D01-\\u0D03\\u0D05-\\u0D0C\\u0D0E-\\u0D10\\u0D12-\\u0D3A\\u0D3D-\\u0D44\\u0D46-\\u0D48\\u0D4A-\\u0D4E\\u0D57\\u0D60-\\u0D63\\u0D66-\\u0D6F\\u0D7A-\\u0D7F\\u0D82\\u0D83\\u0D85-\\u0D96\\u0D9A-\\u0DB1\\u0DB3-\\u0DBB\\u0DBD\\u0DC0-\\u0DC6\\u0DCA\\u0DCF-\\u0DD4\\u0DD6\\u0DD8-\\u0DDF\\u0DE6-\\u0DEF\\u0DF2\\u0DF3\\u0E01-\\u0E3A\\u0E40-\\u0E4E\\u0E50-\\u0E59\\u0E81\\u0E82\\u0E84\\u0E87\\u0E88\\u0E8A\\u0E8D\\u0E94-\\u0E97\\u0E99-\\u0E9F\\u0EA1-\\u0EA3\\u0EA5\\u0EA7\\u0EAA\\u0EAB\\u0EAD-\\u0EB9\\u0EBB-\\u0EBD\\u0EC0-\\u0EC4\\u0EC6\\u0EC8-\\u0ECD\\u0ED0-\\u0ED9\\u0EDC-\\u0EDF\\u0F00\\u0F18\\u0F19\\u0F20-\\u0F29\\u0F35\\u0F37\\u0F39\\u0F3E-\\u0F47\\u0F49-\\u0F6C\\u0F71-\\u0F84\\u0F86-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u1000-\\u1049\\u1050-\\u109D\\u10A0-\\u10C5\\u10C7\\u10CD\\u10D0-\\u10FA\\u10FC-\\u1248\\u124A-\\u124D\\u1250-\\u1256\\u1258\\u125A-\\u125D\\u1260-\\u1288\\u128A-\\u128D\\u1290-\\u12B0\\u12B2-\\u12B5\\u12B8-\\u12BE\\u12C0\\u12C2-\\u12C5\\u12C8-\\u12D6\\u12D8-\\u1310\\u1312-\\u1315\\u1318-\\u135A\\u135D-\\u135F\\u1380-\\u138F\\u13A0-\\u13F4\\u1401-\\u166C\\u166F-\\u167F\\u1681-\\u169A\\u16A0-\\u16EA\\u16EE-\\u16F8\\u1700-\\u170C\\u170E-\\u1714\\u1720-\\u1734\\u1740-\\u1753\\u1760-\\u176C\\u176E-\\u1770\\u1772\\u1773\\u1780-\\u17D3\\u17D7\\u17DC\\u17DD\\u17E0-\\u17E9\\u180B-\\u180D\\u1810-\\u1819\\u1820-\\u1877\\u1880-\\u18AA\\u18B0-\\u18F5\\u1900-\\u191E\\u1920-\\u192B\\u1930-\\u193B\\u1946-\\u196D\\u1970-\\u1974\\u1980-\\u19AB\\u19B0-\\u19C9\\u19D0-\\u19D9\\u1A00-\\u1A1B\\u1A20-\\u1A5E\\u1A60-\\u1A7C\\u1A7F-\\u1A89\\u1A90-\\u1A99\\u1AA7\\u1AB0-\\u1ABD\\u1B00-\\u1B4B\\u1B50-\\u1B59\\u1B6B-\\u1B73\\u1B80-\\u1BF3\\u1C00-\\u1C37\\u1C40-\\u1C49\\u1C4D-\\u1C7D\\u1CD0-\\u1CD2\\u1CD4-\\u1CF6\\u1CF8\\u1CF9\\u1D00-\\u1DF5\\u1DFC-\\u1F15\\u1F18-\\u1F1D\\u1F20-\\u1F45\\u1F48-\\u1F4D\\u1F50-\\u1F57\\u1F59\\u1F5B\\u1F5D\\u1F5F-\\u1F7D\\u1F80-\\u1FB4\\u1FB6-\\u1FBC\\u1FBE\\u1FC2-\\u1FC4\\u1FC6-\\u1FCC\\u1FD0-\\u1FD3\\u1FD6-\\u1FDB\\u1FE0-\\u1FEC\\u1FF2-\\u1FF4\\u1FF6-\\u1FFC\\u200C\\u200D\\u203F\\u2040\\u2054\\u2071\\u207F\\u2090-\\u209C\\u20D0-\\u20DC\\u20E1\\u20E5-\\u20F0\\u2102\\u2107\\u210A-\\u2113\\u2115\\u2119-\\u211D\\u2124\\u2126\\u2128\\u212A-\\u212D\\u212F-\\u2139\\u213C-\\u213F\\u2145-\\u2149\\u214E\\u2160-\\u2188\\u2C00-\\u2C2E\\u2C30-\\u2C5E\\u2C60-\\u2CE4\\u2CEB-\\u2CF3\\u2D00-\\u2D25\\u2D27\\u2D2D\\u2D30-\\u2D67\\u2D6F\\u2D7F-\\u2D96\\u2DA0-\\u2DA6\\u2DA8-\\u2DAE\\u2DB0-\\u2DB6\\u2DB8-\\u2DBE\\u2DC0-\\u2DC6\\u2DC8-\\u2DCE\\u2DD0-\\u2DD6\\u2DD8-\\u2DDE\\u2DE0-\\u2DFF\\u2E2F\\u3005-\\u3007\\u3021-\\u302F\\u3031-\\u3035\\u3038-\\u303C\\u3041-\\u3096\\u3099\\u309A\\u309D-\\u309F\\u30A1-\\u30FA\\u30FC-\\u30FF\\u3105-\\u312D\\u3131-\\u318E\\u31A0-\\u31BA\\u31F0-\\u31FF\\u3400-\\u4DB5\\u4E00-\\u9FCC\\uA000-\\uA48C\\uA4D0-\\uA4FD\\uA500-\\uA60C\\uA610-\\uA62B\\uA640-\\uA66F\\uA674-\\uA67D\\uA67F-\\uA69D\\uA69F-\\uA6F1\\uA717-\\uA71F\\uA722-\\uA788\\uA78B-\\uA78E\\uA790-\\uA7AD\\uA7B0\\uA7B1\\uA7F7-\\uA827\\uA840-\\uA873\\uA880-\\uA8C4\\uA8D0-\\uA8D9\\uA8E0-\\uA8F7\\uA8FB\\uA900-\\uA92D\\uA930-\\uA953\\uA960-\\uA97C\\uA980-\\uA9C0\\uA9CF-\\uA9D9\\uA9E0-\\uA9FE\\uAA00-\\uAA36\\uAA40-\\uAA4D\\uAA50-\\uAA59\\uAA60-\\uAA76\\uAA7A-\\uAAC2\\uAADB-\\uAADD\\uAAE0-\\uAAEF\\uAAF2-\\uAAF6\\uAB01-\\uAB06\\uAB09-\\uAB0E\\uAB11-\\uAB16\\uAB20-\\uAB26\\uAB28-\\uAB2E\\uAB30-\\uAB5A\\uAB5C-\\uAB5F\\uAB64\\uAB65\\uABC0-\\uABEA\\uABEC\\uABED\\uABF0-\\uABF9\\uAC00-\\uD7A3\\uD7B0-\\uD7C6\\uD7CB-\\uD7FB\\uF900-\\uFA6D\\uFA70-\\uFAD9\\uFB00-\\uFB06\\uFB13-\\uFB17\\uFB1D-\\uFB28\\uFB2A-\\uFB36\\uFB38-\\uFB3C\\uFB3E\\uFB40\\uFB41\\uFB43\\uFB44\\uFB46-\\uFBB1\\uFBD3-\\uFD3D\\uFD50-\\uFD8F\\uFD92-\\uFDC7\\uFDF0-\\uFDFB\\uFE00-\\uFE0F\\uFE20-\\uFE2D\\uFE33\\uFE34\\uFE4D-\\uFE4F\\uFE70-\\uFE74\\uFE76-\\uFEFC\\uFF10-\\uFF19\\uFF21-\\uFF3A\\uFF3F\\uFF41-\\uFF5A\\uFF66-\\uFFBE\\uFFC2-\\uFFC7\\uFFCA-\\uFFCF\\uFFD2-\\uFFD7\\uFFDA-\\uFFDC]");function y5(e,t){if(!e)throw new Error("ASSERT: "+t)}function Fp(e){return e>=48&&e<=57}function _re(e){return"0123456789abcdefABCDEF".indexOf(e)>=0}function E2(e){return"01234567".indexOf(e)>=0}function hYt(e){return e===32||e===9||e===11||e===12||e===160||e>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(e)>=0}function ik(e){return e===10||e===13||e===8232||e===8233}function QR(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e===92||e>=128&&fYt.test(String.fromCharCode(e))}function fL(e){return e===36||e===95||e>=65&&e<=90||e>=97&&e<=122||e>=48&&e<=57||e===92||e>=128&&dYt.test(String.fromCharCode(e))}const pYt={if:1,in:1,do:1,var:1,for:1,new:1,try:1,let:1,this:1,else:1,case:1,void:1,with:1,enum:1,while:1,break:1,catch:1,throw:1,const:1,yield:1,class:1,super:1,return:1,typeof:1,delete:1,switch:1,export:1,import:1,public:1,static:1,default:1,finally:1,extends:1,package:1,private:1,function:1,continue:1,debugger:1,interface:1,protected:1,instanceof:1,implements:1};function n4e(){for(;$e<_a;){const e=kt.charCodeAt($e);if(hYt(e)||ik(e))++$e;else break}}function Wq(e){var t,n,r,i=0;for(n=e==="u"?4:2,t=0;t<n;++t)$e<_a&&_re(kt[$e])?(r=kt[$e++],i=i*16+"0123456789abcdef".indexOf(r.toLowerCase())):gr({},lo,Do);return String.fromCharCode(i)}function mYt(){var e,t,n,r;for(e=kt[$e],t=0,e==="}"&&gr({},lo,Do);$e<_a&&(e=kt[$e++],!!_re(e));)t=t*16+"0123456789abcdef".indexOf(e.toLowerCase());return(t>1114111||e!=="}")&&gr({},lo,Do),t<=65535?String.fromCharCode(t):(n=(t-65536>>10)+55296,r=(t-65536&1023)+56320,String.fromCharCode(n,r))}function r4e(){var e,t;for(e=kt.charCodeAt($e++),t=String.fromCharCode(e),e===92&&(kt.charCodeAt($e)!==117&&gr({},lo,Do),++$e,e=Wq("u"),(!e||e==="\\"||!QR(e.charCodeAt(0)))&&gr({},lo,Do),t=e);$e<_a&&(e=kt.charCodeAt($e),!!fL(e));)++$e,t+=String.fromCharCode(e),e===92&&(t=t.substr(0,t.length-1),kt.charCodeAt($e)!==117&&gr({},lo,Do),++$e,e=Wq("u"),(!e||e==="\\"||!fL(e.charCodeAt(0)))&&gr({},lo,Do),t+=e);return t}function gYt(){var e,t;for(e=$e++;$e<_a;){if(t=kt.charCodeAt($e),t===92)return $e=e,r4e();if(fL(t))++$e;else break}return kt.slice(e,$e)}function yYt(){var e,t,n;return e=$e,t=kt.charCodeAt($e)===92?r4e():gYt(),t.length===1?n=Cb:pYt.hasOwnProperty(t)?n=cv:t==="null"?n=g5:t==="true"||t==="false"?n=m5:n=Cb,{type:n,value:t,start:e,end:$e}}function oU(){var e=$e,t=kt.charCodeAt($e),n,r=kt[$e],i,s,o;switch(t){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++$e,{type:Iu,value:String.fromCharCode(t),start:e,end:$e};default:if(n=kt.charCodeAt($e+1),n===61)switch(t){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return $e+=2,{type:Iu,value:String.fromCharCode(t)+String.fromCharCode(n),start:e,end:$e};case 33:case 61:return $e+=2,kt.charCodeAt($e)===61&&++$e,{type:Iu,value:kt.slice(e,$e),start:e,end:$e}}}if(o=kt.substr($e,4),o===">>>=")return $e+=4,{type:Iu,value:o,start:e,end:$e};if(s=o.substr(0,3),s===">>>"||s==="<<="||s===">>=")return $e+=3,{type:Iu,value:s,start:e,end:$e};if(i=s.substr(0,2),r===i[1]&&"+-<>&|".indexOf(r)>=0||i==="=>")return $e+=2,{type:Iu,value:i,start:e,end:$e};if(i==="//"&&gr({},lo,Do),"<>=!+-*%&|^/".indexOf(r)>=0)return++$e,{type:Iu,value:r,start:e,end:$e};gr({},lo,Do)}function vYt(e){let t="";for(;$e<_a&&_re(kt[$e]);)t+=kt[$e++];return t.length===0&&gr({},lo,Do),QR(kt.charCodeAt($e))&&gr({},lo,Do),{type:y_,value:parseInt("0x"+t,16),start:e,end:$e}}function bYt(e){let t="0"+kt[$e++];for(;$e<_a&&E2(kt[$e]);)t+=kt[$e++];return(QR(kt.charCodeAt($e))||Fp(kt.charCodeAt($e)))&&gr({},lo,Do),{type:y_,value:parseInt(t,8),octal:!0,start:e,end:$e}}function l0e(){var e,t,n;if(n=kt[$e],y5(Fp(n.charCodeAt(0))||n===".","Numeric literal must start with a decimal digit or a decimal point"),t=$e,e="",n!=="."){if(e=kt[$e++],n=kt[$e],e==="0"){if(n==="x"||n==="X")return++$e,vYt(t);if(E2(n))return bYt(t);n&&Fp(n.charCodeAt(0))&&gr({},lo,Do)}for(;Fp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="."){for(e+=kt[$e++];Fp(kt.charCodeAt($e));)e+=kt[$e++];n=kt[$e]}if(n==="e"||n==="E")if(e+=kt[$e++],n=kt[$e],(n==="+"||n==="-")&&(e+=kt[$e++]),Fp(kt.charCodeAt($e)))for(;Fp(kt.charCodeAt($e));)e+=kt[$e++];else gr({},lo,Do);return QR(kt.charCodeAt($e))&&gr({},lo,Do),{type:y_,value:parseFloat(e),start:t,end:$e}}function _Yt(){var e="",t,n,r,i,s=!1;for(t=kt[$e],y5(t==="'"||t==='"',"String literal must starts with a quote"),n=$e,++$e;$e<_a;)if(r=kt[$e++],r===t){t="";break}else if(r==="\\")if(r=kt[$e++],!r||!ik(r.charCodeAt(0)))switch(r){case"u":case"x":kt[$e]==="{"?(++$e,e+=mYt()):e+=Wq(r);break;case"n":e+=`
`;break;case"r":e+="\r";break;case"t":e+="	";break;case"b":e+="\b";break;case"f":e+="\f";break;case"v":e+="\v";break;default:E2(r)?(i="01234567".indexOf(r),i!==0&&(s=!0),$e<_a&&E2(kt[$e])&&(s=!0,i=i*8+"01234567".indexOf(kt[$e++]),"0123".indexOf(r)>=0&&$e<_a&&E2(kt[$e])&&(i=i*8+"01234567".indexOf(kt[$e++]))),e+=String.fromCharCode(i)):e+=r;break}else r==="\r"&&kt[$e]===`
`&&++$e;else{if(ik(r.charCodeAt(0)))break;e+=r}return t!==""&&gr({},lo,Do),{type:XR,value:e,octal:s,start:n,end:$e}}function wYt(e,t){let n=e;t.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,(r,i)=>{if(parseInt(i,16)<=1114111)return"x";gr({},qq)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch{gr({},qq)}try{return new RegExp(e,t)}catch{return null}}function EYt(){var e,t,n,r,i;for(e=kt[$e],y5(e==="/","Regular expression literal must start with a slash"),t=kt[$e++],n=!1,r=!1;$e<_a;)if(e=kt[$e++],t+=e,e==="\\")e=kt[$e++],ik(e.charCodeAt(0))&&gr({},sU),t+=e;else if(ik(e.charCodeAt(0)))gr({},sU);else if(n)e==="]"&&(n=!1);else if(e==="/"){r=!0;break}else e==="["&&(n=!0);return r||gr({},sU),i=t.substr(1,t.length-2),{value:i,literal:t}}function xYt(){var e,t,n;for(t="",n="";$e<_a&&(e=kt[$e],!!fL(e.charCodeAt(0)));)++$e,e==="\\"&&$e<_a?gr({},lo,Do):(n+=e,t+=e);return n.search(/[^gimuy]/g)>=0&&gr({},qq,n),{value:n,literal:t}}function SYt(){var e,t,n,r;return $r=null,n4e(),e=$e,t=EYt(),n=xYt(),r=wYt(t.value,n.value),{literal:t.literal+n.literal,value:r,regex:{pattern:t.value,flags:n.value},start:e,end:$e}}function TYt(e){return e.type===Cb||e.type===cv||e.type===m5||e.type===g5}function i4e(){if(n4e(),$e>=_a)return{type:KR,start:$e,end:$e};const e=kt.charCodeAt($e);return QR(e)?yYt():e===40||e===41||e===59?oU():e===39||e===34?_Yt():e===46?Fp(kt.charCodeAt($e+1))?l0e():oU():Fp(e)?l0e():oU()}function Mu(){const e=$r;return $e=e.end,$r=i4e(),$e=e.end,e}function s4e(){const e=$e;$r=i4e(),$e=e}function AYt(e){const t=new pd(KGt);return t.elements=e,t}function c0e(e,t,n){const r=new pd(e==="||"||e==="&&"?eYt:XGt);return r.operator=e,r.left=t,r.right=n,r}function CYt(e,t){const n=new pd(QGt);return n.callee=e,n.arguments=t,n}function IYt(e,t,n){const r=new pd(JGt);return r.test=e,r.consequent=t,r.alternate=n,r}function wre(e){const t=new pd(e4e);return t.name=e,t}function EC(e){const t=new pd(ZGt);return t.value=e.value,t.raw=kt.slice(e.start,e.end),e.regex&&(t.raw==="//"&&(t.raw="/(?:)/"),t.regex=e.regex),t}function f0e(e,t,n){const r=new pd(tYt);return r.computed=e==="[",r.object=t,r.property=n,r.computed||(n.member=!0),r}function kYt(e){const t=new pd(nYt);return t.properties=e,t}function d0e(e,t,n){const r=new pd(rYt);return r.key=t,r.value=n,r.kind=e,r}function RYt(e,t){const n=new pd(iYt);return n.operator=e,n.argument=t,n.prefix=!0,n}function gr(e,t){var n,r=Array.prototype.slice.call(arguments,2),i=t.replace(/%(\d)/g,(s,o)=>(y5(o<r.length,"Message reference must be in range"),r[o]));throw n=new Error(i),n.index=$e,n.description=i,n}function v5(e){e.type===KR&&gr(e,lYt),e.type===y_&&gr(e,sYt),e.type===XR&&gr(e,oYt),e.type===Cb&&gr(e,aYt),e.type===cv&&gr(e,uYt),gr(e,lo,e.value)}function wa(e){const t=Mu();(t.type!==Iu||t.value!==e)&&v5(t)}function fi(e){return $r.type===Iu&&$r.value===e}function aU(e){return $r.type===cv&&$r.value===e}function NYt(){const e=[];for($e=$r.start,wa("[");!fi("]");)fi(",")?(Mu(),e.push(null)):(e.push(Ib()),fi("]")||wa(","));return Mu(),AYt(e)}function h0e(){$e=$r.start;const e=Mu();return e.type===XR||e.type===y_?(e.octal&&gr(e,t4e),EC(e)):wre(e.value)}function PYt(){var e,t,n,r;if($e=$r.start,e=$r,e.type===Cb)return n=h0e(),wa(":"),r=Ib(),d0e("init",n,r);if(e.type===KR||e.type===Iu)v5(e);else return t=h0e(),wa(":"),r=Ib(),d0e("init",t,r)}function OYt(){var e=[],t,n,r,i={},s=String;for($e=$r.start,wa("{");!fi("}");)t=PYt(),t.key.type===e4e?n=t.key.name:n=s(t.key.value),r="$"+n,Object.prototype.hasOwnProperty.call(i,r)?gr({},cYt):i[r]=!0,e.push(t),fi("}")||wa(",");return wa("}"),kYt(e)}function DYt(){wa("(");const e=Ere();return wa(")"),e}const $Yt={if:1};function MYt(){var e,t,n;if(fi("("))return DYt();if(fi("["))return NYt();if(fi("{"))return OYt();if(e=$r.type,$e=$r.start,e===Cb||$Yt[$r.value])n=wre(Mu().value);else if(e===XR||e===y_)$r.octal&&gr($r,t4e),n=EC(Mu());else{if(e===cv)throw new Error(rk);e===m5?(t=Mu(),t.value=t.value==="true",n=EC(t)):e===g5?(t=Mu(),t.value=null,n=EC(t)):fi("/")||fi("/=")?(n=EC(SYt()),s4e()):v5(Mu())}return n}function LYt(){const e=[];if(wa("("),!fi(")"))for(;$e<_a&&(e.push(Ib()),!fi(")"));)wa(",");return wa(")"),e}function FYt(){$e=$r.start;const e=Mu();return TYt(e)||v5(e),wre(e.value)}function jYt(){return wa("."),FYt()}function BYt(){wa("[");const e=Ere();return wa("]"),e}function UYt(){var e,t,n;for(e=MYt();;)if(fi("."))n=jYt(),e=f0e(".",e,n);else if(fi("("))t=LYt(),e=CYt(e,t);else if(fi("["))n=BYt(),e=f0e("[",e,n);else break;return e}function p0e(){const e=UYt();if($r.type===Iu&&(fi("++")||fi("--")))throw new Error(rk);return e}function $D(){var e,t;if($r.type!==Iu&&$r.type!==cv)t=p0e();else{if(fi("++")||fi("--"))throw new Error(rk);if(fi("+")||fi("-")||fi("~")||fi("!"))e=Mu(),t=$D(),t=RYt(e.value,t);else{if(aU("delete")||aU("void")||aU("typeof"))throw new Error(rk);t=p0e()}}return t}function m0e(e){let t=0;if(e.type!==Iu&&e.type!==cv)return 0;switch(e.value){case"||":t=1;break;case"&&":t=2;break;case"|":t=3;break;case"^":t=4;break;case"&":t=5;break;case"==":case"!=":case"===":case"!==":t=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":t=7;break;case"<<":case">>":case">>>":t=8;break;case"+":case"-":t=9;break;case"*":case"/":case"%":t=11;break}return t}function zYt(){var e,t,n,r,i,s,o,a,u,l;if(e=$r,u=$D(),r=$r,i=m0e(r),i===0)return u;for(r.prec=i,Mu(),t=[e,$r],o=$D(),s=[u,r,o];(i=m0e($r))>0;){for(;s.length>2&&i<=s[s.length-2].prec;)o=s.pop(),a=s.pop().value,u=s.pop(),t.pop(),n=c0e(a,u,o),s.push(n);r=Mu(),r.prec=i,s.push(r),t.push($r),n=$D(),s.push(n)}for(l=s.length-1,n=s[l],t.pop();l>1;)t.pop(),n=c0e(s[l-1].value,s[l-2],n),l-=2;return n}function Ib(){var e,t,n;return e=zYt(),fi("?")&&(Mu(),t=Ib(),wa(":"),n=Ib(),e=IYt(e,t,n)),e}function Ere(){const e=Ib();if(fi(","))throw new Error(rk);return e}function xre(e){kt=e,$e=0,_a=kt.length,$r=null,s4e();const t=Ere();if($r.type!==KR)throw new Error("Unexpect token after expression.");return t}var o4e={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"};function a4e(e){function t(o,a,u,l){let c=e(a[0]);return u&&(c=u+"("+c+")",u.lastIndexOf("new ",0)===0&&(c="("+c+")")),c+"."+o+(l<0?"":l===0?"()":"("+a.slice(1).map(e).join(",")+")")}function n(o,a,u){return l=>t(o,l,a,u)}const r="new Date",i="String",s="RegExp";return{isNaN:"Number.isNaN",isFinite:"Number.isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",hypot:"Math.hypot",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(o){o.length<3&&Le("Missing arguments to clamp function."),o.length>3&&Le("Too many arguments to clamp function.");const a=o.map(e);return"Math.max("+a[1]+", Math.min("+a[2]+","+a[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase",i,0),lower:n("toLowerCase",i,0),substring:n("substring",i),split:n("split",i),trim:n("trim",i,0),regexp:s,test:n("test",s),if:function(o){o.length<3&&Le("Missing arguments to if function."),o.length>3&&Le("Too many arguments to if function.");const a=o.map(e);return"("+a[0]+"?"+a[1]+":"+a[2]+")"}}}function VYt(e){const t=e&&e.length-1;return t&&(e[0]==='"'&&e[t]==='"'||e[0]==="'"&&e[t]==="'")?e.slice(1,-1):e}function u4e(e){e=e||{};const t=e.allowed?id(e.allowed):{},n=e.forbidden?id(e.forbidden):{},r=e.constants||o4e,i=(e.functions||a4e)(f),s=e.globalvar,o=e.fieldvar,a=wn(s)?s:p=>`${s}["${p}"]`;let u={},l={},c=0;function f(p){if(mt(p))return p;const m=d[p.type];return m==null&&Le("Unsupported type: "+p.type),m(p)}const d={Literal:p=>p.raw,Identifier:p=>{const m=p.name;return c>0?m:jt(n,m)?Le("Illegal identifier: "+m):jt(r,m)?r[m]:jt(t,m)?m:(u[m]=1,a(m))},MemberExpression:p=>{const m=!p.computed,g=f(p.object);m&&(c+=1);const y=f(p.property);return g===o&&(l[VYt(y)]=1),m&&(c-=1),g+(m?"."+y:"["+y+"]")},CallExpression:p=>{p.callee.type!=="Identifier"&&Le("Illegal callee type: "+p.callee.type);const m=p.callee.name,g=p.arguments,y=jt(i,m)&&i[m];return y||Le("Unrecognized function: "+m),wn(y)?y(g):y+"("+g.map(f).join(",")+")"},ArrayExpression:p=>"["+p.elements.map(f).join(",")+"]",BinaryExpression:p=>"("+f(p.left)+" "+p.operator+" "+f(p.right)+")",UnaryExpression:p=>"("+p.operator+f(p.argument)+")",ConditionalExpression:p=>"("+f(p.test)+"?"+f(p.consequent)+":"+f(p.alternate)+")",LogicalExpression:p=>"("+f(p.left)+p.operator+f(p.right)+")",ObjectExpression:p=>"{"+p.properties.map(f).join(",")+"}",Property:p=>{c+=1;const m=f(p.key);return c-=1,m+":"+f(p.value)}};function h(p){const m={code:f(p),globals:Object.keys(u),fields:Object.keys(l)};return u={},l={},m}return h.functions=i,h.constants=r,h}const g0e=Symbol("vega_selection_getter");function l4e(e){return(!e.getter||!e.getter[g0e])&&(e.getter=zc(e.field),e.getter[g0e]=!0),e.getter}const Sre="intersect",y0e="union",HYt="vlMulti",qYt="vlPoint",v0e="or",WYt="and",zd="_vgsid_",sk=zc(zd),GYt="E",YYt="R",KYt="R-E",XYt="R-LE",QYt="R-RE",dL="index:unit";function b0e(e,t){for(var n=t.fields,r=t.values,i=n.length,s=0,o,a;s<i;++s)if(a=n[s],o=l4e(a)(e),U0(o)&&(o=ma(o)),U0(r[s])&&(r[s]=ma(r[s])),je(r[s])&&U0(r[s][0])&&(r[s]=r[s].map(ma)),a.type===GYt){if(je(r[s])?r[s].indexOf(o)<0:o!==r[s])return!1}else if(a.type===YYt){if(!Qw(o,r[s]))return!1}else if(a.type===QYt){if(!Qw(o,r[s],!0,!1))return!1}else if(a.type===KYt){if(!Qw(o,r[s],!1,!1))return!1}else if(a.type===XYt&&!Qw(o,r[s],!1,!0))return!1;return!0}function JYt(e,t,n){for(var r=this.context.data[e],i=r?r.values.value:[],s=r?r[dL]&&r[dL].value:void 0,o=n===Sre,a=i.length,u=0,l,c,f,d,h;u<a;++u)if(l=i[u],s&&o){if(c=c||{},f=c[d=l.unit]||0,f===-1)continue;if(h=b0e(t,l),c[d]=h?-1:++f,h&&s.size===1)return!0;if(!h&&f===s.get(d).count)return!1}else if(h=b0e(t,l),o^h)return h;return a&&o}const c4e=NS(sk),ZYt=c4e.left,eKt=c4e.right;function tKt(e,t,n){const r=this.context.data[e],i=r?r.values.value:[],s=r?r[dL]&&r[dL].value:void 0,o=n===Sre,a=sk(t),u=ZYt(i,a);if(u===i.length||sk(i[u])!==a)return!1;if(s&&o){if(s.size===1)return!0;if(eKt(i,a)-u<s.size)return!1}return!0}function nKt(e,t){return e.map(n=>_n(t.fields?{values:t.fields.map(r=>l4e(r)(n.datum))}:{[zd]:sk(n.datum)},t))}function rKt(e,t,n,r){for(var i=this.context.data[e],s=i?i.values.value:[],o={},a={},u={},l,c,f,d,h,p,m,g,y,v,b=s.length,w=0,E,T;w<b;++w)if(l=s[w],d=l.unit,c=l.fields,f=l.values,c&&f){for(E=0,T=c.length;E<T;++E)h=c[E],m=o[h.field]||(o[h.field]={}),g=m[d]||(m[d]=[]),u[h.field]=y=h.type.charAt(0),v=uU[`${y}_union`],m[d]=v(g,pt(f[E]));n&&(g=a[d]||(a[d]=[]),g.push(pt(f).reduce((S,A,C)=>(S[c[C].field]=A,S),{})))}else h=zd,p=sk(l),m=o[h]||(o[h]={}),g=m[d]||(m[d]=[]),g.push(p),n&&(g=a[d]||(a[d]=[]),g.push({[zd]:p}));if(t=t||y0e,o[zd]?o[zd]=uU[`${zd}_${t}`](...Object.values(o[zd])):Object.keys(o).forEach(S=>{o[S]=Object.keys(o[S]).map(A=>o[S][A]).reduce((A,C)=>A===void 0?C:uU[`${u[S]}_${t}`](A,C))}),s=Object.keys(a),n&&s.length){const S=r?qYt:HYt;o[S]=t===y0e?{[v0e]:s.reduce((A,C)=>(A.push(...a[C]),A),[])}:{[WYt]:s.map(A=>({[v0e]:a[A]}))}}return o}var uU={[`${zd}_union`]:gct,[`${zd}_intersect`]:pct,E_union:function(e,t){if(!e.length)return t;for(var n=0,r=t.length;n<r;++n)e.indexOf(t[n])<0&&e.push(t[n]);return e},E_intersect:function(e,t){return e.length?e.filter(n=>t.indexOf(n)>=0):t},R_union:function(e,t){var n=ma(t[0]),r=ma(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?(e[0]>n&&(e[0]=n),e[1]<r&&(e[1]=r),e):[n,r]},R_intersect:function(e,t){var n=ma(t[0]),r=ma(t[1]);return n>r&&(n=t[1],r=t[0]),e.length?r<e[0]||e[1]<n?[]:(e[0]<n&&(e[0]=n),e[1]>r&&(e[1]=r),e):[n,r]}};const iKt=":",sKt="@";function Tre(e,t,n,r){t[0].type!==Ab&&Le("First argument to selection functions must be a string literal.");const i=t[0].value,s=t.length>=2&&Zn(t).value,o="unit",a=sKt+o,u=iKt+i;s===Sre&&!jt(r,a)&&(r[a]=n.getData(i).indataRef(n,o)),jt(r,u)||(r[u]=n.getData(i).tuplesRef())}function f4e(e){const t=this.context.data[e];return t?t.values.value:[]}function oKt(e,t,n){const r=this.context.data[e]["index:"+t],i=r?r.value.get(n):void 0;return i&&i.count}function aKt(e,t){const n=this.context.dataflow,r=this.context.data[e],i=r.input;return n.pulse(i,n.changeset().remove(Vc).insert(t)),1}function uKt(e,t,n){if(e){const r=this.context.dataflow,i=e.mark.source;r.pulse(i,r.changeset().encode(e,t))}return n!==void 0?n:e}const JR=e=>function(t,n){return this.context.dataflow.locale()[e](n)(t)},lKt=JR("format"),d4e=JR("timeFormat"),cKt=JR("utcFormat"),fKt=JR("timeParse"),dKt=JR("utcParse"),tO=new Date(2e3,0,1);function b5(e,t,n){return!Number.isInteger(e)||!Number.isInteger(t)?"":(tO.setYear(2e3),tO.setMonth(e),tO.setDate(t),d4e.call(this,tO,n))}function hKt(e){return b5.call(this,e,1,"%B")}function pKt(e){return b5.call(this,e,1,"%b")}function mKt(e){return b5.call(this,0,2+e,"%A")}function gKt(e){return b5.call(this,0,2+e,"%a")}const yKt=":",vKt="@",Gq="%",h4e="$";function Are(e,t,n,r){t[0].type!==Ab&&Le("First argument to data functions must be a string literal.");const i=t[0].value,s=yKt+i;if(!jt(s,r))try{r[s]=n.getData(i).tuplesRef()}catch{}}function bKt(e,t,n,r){t[0].type!==Ab&&Le("First argument to indata must be a string literal."),t[1].type!==Ab&&Le("Second argument to indata must be a string literal.");const i=t[0].value,s=t[1].value,o=vKt+s;jt(o,r)||(r[o]=n.getData(i).indataRef(n,s))}function Za(e,t,n,r){if(t[0].type===Ab)_0e(n,r,t[0].value);else for(e in n.scales)_0e(n,r,e)}function _0e(e,t,n){const r=Gq+n;if(!jt(t,r))try{t[r]=e.scaleRef(n)}catch{}}function lp(e,t){if(wn(e))return e;if(mt(e)){const n=t.scales[e];return n&&q7t(n.value)?n.value:void 0}}function _Kt(e,t,n){t.__bandwidth=i=>i&&i.bandwidth?i.bandwidth():0,n._bandwidth=Za,n._range=Za,n._scale=Za;const r=i=>"_["+(i.type===Ab?rt(Gq+i.value):rt(Gq)+"+"+e(i))+"]";return{_bandwidth:i=>`this.__bandwidth(${r(i[0])})`,_range:i=>`${r(i[0])}.range()`,_scale:i=>`${r(i[0])}(${e(i[1])})`}}function Cre(e,t){return function(n,r,i){if(n){const s=lp(n,(i||this).context);return s&&s.path[e](r)}else return t(r)}}const wKt=Cre("area",Mmt),EKt=Cre("bounds",Bmt),xKt=Cre("centroid",Wmt);function SKt(e,t){const n=lp(e,(t||this).context);return n&&n.scale()}function TKt(e){const t=this.context.group;let n=!1;if(t)for(;e;){if(e===t){n=!0;break}e=e.mark.group}return n}function Ire(e,t,n){try{e[t].apply(e,["EXPRESSION"].concat([].slice.call(n)))}catch(r){e.warn(r)}return n[n.length-1]}function AKt(){return Ire(this.context.dataflow,"warn",arguments)}function CKt(){return Ire(this.context.dataflow,"info",arguments)}function IKt(){return Ire(this.context.dataflow,"debug",arguments)}function lU(e){const t=e/255;return t<=.03928?t/12.92:Math.pow((t+.055)/1.055,2.4)}function Yq(e){const t=ny(e),n=lU(t.r),r=lU(t.g),i=lU(t.b);return .2126*n+.7152*r+.0722*i}function kKt(e,t){const n=Yq(e),r=Yq(t),i=Math.max(n,r),s=Math.min(n,r);return(i+.05)/(s+.05)}function RKt(){const e=[].slice.call(arguments);return e.unshift({}),_n(...e)}function p4e(e,t){return e===t||e!==e&&t!==t?!0:je(e)?je(t)&&e.length===t.length?NKt(e,t):!1:gt(e)&&gt(t)?m4e(e,t):!1}function NKt(e,t){for(let n=0,r=e.length;n<r;++n)if(!p4e(e[n],t[n]))return!1;return!0}function m4e(e,t){for(const n in e)if(!p4e(e[n],t[n]))return!1;return!0}function w0e(e){return t=>m4e(e,t)}function PKt(e,t,n,r,i,s){const o=this.context.dataflow,a=this.context.data[e],u=a.input,l=o.stamp();let c=a.changes,f,d;if(o._trigger===!1||!(u.value.length||t||r))return 0;if((!c||c.stamp<l)&&(a.changes=c=o.changeset(),c.stamp=l,o.runAfter(()=>{a.modified=!0,o.pulse(u,c).run()},!0,1)),n&&(f=n===!0?Vc:je(n)||V4(n)?n:w0e(n),c.remove(f)),t&&c.insert(t),r&&(f=w0e(r),u.value.some(f)?c.remove(f):c.insert(r)),i)for(d in s)c.modify(i,d,s[d]);return 1}function OKt(e){const t=e.touches,n=t[0].clientX-t[1].clientX,r=t[0].clientY-t[1].clientY;return Math.hypot(n,r)}function DKt(e){const t=e.touches;return Math.atan2(t[0].clientY-t[1].clientY,t[0].clientX-t[1].clientX)}const E0e={};function $Kt(e,t){const n=E0e[t]||(E0e[t]=zc(t));return je(e)?e.map(n):n(e)}function kre(e){return je(e)||ArrayBuffer.isView(e)?e:null}function Rre(e){return kre(e)||(mt(e)?e:null)}function MKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return kre(e).join(...n)}function LKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rre(e).indexOf(...n)}function FKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rre(e).lastIndexOf(...n)}function jKt(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Rre(e).slice(...n)}function BKt(e,t,n){return wn(n)&&Le("Function argument passed to replace."),String(e).replace(t,n)}function UKt(e){return kre(e).slice().reverse()}function zKt(e,t,n){return ene(e||0,t||0,n||0)}function VKt(e,t){const n=lp(e,(t||this).context);return n&&n.bandwidth?n.bandwidth():0}function HKt(e,t){const n=lp(e,(t||this).context);return n?n.copy():void 0}function qKt(e,t){const n=lp(e,(t||this).context);return n?n.domain():[]}function WKt(e,t,n){const r=lp(e,(n||this).context);return r?je(t)?(r.invertRange||r.invert)(t):(r.invert||r.invertExtent)(t):void 0}function GKt(e,t){const n=lp(e,(t||this).context);return n&&n.range?n.range():[]}function YKt(e,t,n){const r=lp(e,(n||this).context);return r?r(t):void 0}function KKt(e,t,n,r,i){e=lp(e,(i||this).context);const s=s6e(t,n);let o=e.domain(),a=o[0],u=Zn(o),l=Aa;return u-a?l=GLe(e,a,u):e=(e.interpolator?vr("sequential")().interpolator(e.interpolator()):vr("linear")().interpolate(e.interpolate()).range(e.range())).domain([a=0,u=1]),e.ticks&&(o=e.ticks(+r||15),a!==o[0]&&o.unshift(a),u!==Zn(o)&&o.push(u)),o.forEach(c=>s.stop(l(c),e(c))),s}function XKt(e,t,n){const r=lp(e,(n||this).context);return function(i){return r?r.path.context(i)(t):""}}function QKt(e){let t=null;return function(n){return n?ZI(n,t=t||zx(e)):e}}const g4e=e=>e.data;function y4e(e,t){const n=f4e.call(t,e);return n.root&&n.root.lookup||{}}function JKt(e,t,n){const r=y4e(e,this),i=r[t],s=r[n];return i&&s?i.path(s).map(g4e):void 0}function ZKt(e,t){const n=y4e(e,this)[t];return n?n.ancestors().map(g4e):void 0}const v4e=()=>typeof window<"u"&&window||null;function eXt(){const e=v4e();return e?e.screen:{}}function tXt(){const e=v4e();return e?[e.innerWidth,e.innerHeight]:[void 0,void 0]}function nXt(){const e=this.context.dataflow,t=e.container&&e.container();return t?[t.clientWidth,t.clientHeight]:[void 0,void 0]}function b4e(e,t,n){if(!e)return[];const[r,i]=e,s=new Is().set(r[0],r[1],i[0],i[1]),o=n||this.context.dataflow.scenegraph().root;return nFe(o,s,rXt(t))}function rXt(e){let t=null;if(e){const n=pt(e.marktype),r=pt(e.markname);t=i=>(!n.length||n.some(s=>i.marktype===s))&&(!r.length||r.some(s=>i.name===s))}return t}function iXt(e,t,n){let r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:5;e=pt(e);const i=e[e.length-1];return i===void 0||Math.hypot(i[0]-t,i[1]-n)>r?[...e,[t,n]]:e}function sXt(e){return pt(e).reduce((t,n,r)=>{let[i,s]=n;return t+=r==0?`M ${i},${s} `:r===e.length-1?" Z":`L ${i},${s} `},"")}function oXt(e,t,n){const{x:r,y:i,mark:s}=n,o=new Is().set(Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER,Number.MIN_SAFE_INTEGER,Number.MIN_SAFE_INTEGER);for(const[u,l]of t)u<o.x1&&(o.x1=u),u>o.x2&&(o.x2=u),l<o.y1&&(o.y1=l),l>o.y2&&(o.y2=l);return o.translate(r,i),b4e([[o.x1,o.y1],[o.x2,o.y2]],e,s).filter(u=>aXt(u.x,u.y,t))}function aXt(e,t,n){let r=0;for(let i=0,s=n.length-1;i<n.length;s=i++){const[o,a]=n[s],[u,l]=n[i];l>t!=a>t&&e<(o-u)*(t-l)/(a-l)+u&&r++}return r&1}const ok={random(){return qc()},cumulativeNormal:Y4,cumulativeLogNormal:_te,cumulativeUniform:Ste,densityNormal:mte,densityLogNormal:bte,densityUniform:xte,quantileNormal:K4,quantileLogNormal:wte,quantileUniform:Tte,sampleNormal:G4,sampleLogNormal:vte,sampleUniform:Ete,isArray:je,isBoolean:lv,isDate:U0,isDefined(e){return e!==void 0},isNumber:fr,isObject:gt,isRegExp:r3e,isString:mt,isTuple:V4,isValid(e){return e!=null&&e===e},toBoolean:Zee,toDate(e){return ete(e)},toNumber:ma,toString:tte,indexof:LKt,join:MKt,lastindexof:FKt,replace:BKt,reverse:UKt,slice:jKt,flush:t3e,lerp:i3e,merge:RKt,pad:a3e,peek:Zn,pluck:$Kt,span:PR,inrange:Qw,truncate:u3e,rgb:ny,lab:H$,hcl:q$,hsl:z$,luminance:Yq,contrast:kKt,sequence:ju,format:lKt,utcFormat:cKt,utcParse:dKt,utcOffset:E3e,utcSequence:T3e,timeFormat:d4e,timeParse:fKt,timeOffset:w3e,timeSequence:S3e,timeUnitSpecifier:c3e,monthFormat:hKt,monthAbbrevFormat:pKt,dayFormat:mKt,dayAbbrevFormat:gKt,quarter:QMe,utcquarter:JMe,week:d3e,utcweek:m3e,dayofyear:f3e,utcdayofyear:p3e,warn:AKt,info:CKt,debug:IKt,extent(e){return Uh(e)},inScope:TKt,intersect:b4e,clampRange:ZMe,pinchDistance:OKt,pinchAngle:DKt,screen:eXt,containerSize:nXt,windowSize:tXt,bandspace:zKt,setdata:aKt,pathShape:QKt,panLinear:GMe,panLog:YMe,panPow:KMe,panSymlog:XMe,zoomLinear:Gee,zoomLog:Yee,zoomPow:q3,zoomSymlog:Kee,encode:uKt,modify:PKt,lassoAppend:iXt,lassoPath:sXt,intersectLasso:oXt},uXt=["view","item","group","xy","x","y"],lXt="event.vega.",_4e="this.",Nre={},w4e={forbidden:["_"],allowed:["datum","event","item"],fieldvar:"datum",globalvar:e=>`_[${rt(h4e+e)}]`,functions:cXt,constants:o4e,visitors:Nre},Kq=u4e(w4e);function cXt(e){const t=a4e(e);uXt.forEach(n=>t[n]=lXt+n);for(const n in ok)t[n]=_4e+n;return _n(t,_Kt(e,ok,Nre)),t}function vs(e,t,n){return arguments.length===1?ok[e]:(ok[e]=t,n&&(Nre[e]=n),Kq&&(Kq.functions[e]=_4e+e),this)}vs("bandwidth",VKt,Za);vs("copy",HKt,Za);vs("domain",qKt,Za);vs("range",GKt,Za);vs("invert",WKt,Za);vs("scale",YKt,Za);vs("gradient",KKt,Za);vs("geoArea",wKt,Za);vs("geoBounds",EKt,Za);vs("geoCentroid",xKt,Za);vs("geoShape",XKt,Za);vs("geoScale",SKt,Za);vs("indata",oKt,bKt);vs("data",f4e,Are);vs("treePath",JKt,Are);vs("treeAncestors",ZKt,Are);vs("vlSelectionTest",JYt,Tre);vs("vlSelectionIdTest",tKt,Tre);vs("vlSelectionResolve",rKt,Tre);vs("vlSelectionTuples",nKt);function Vh(e,t){const n={};let r;try{e=mt(e)?e:rt(e)+"",r=xre(e)}catch{Le("Expression parse error: "+e)}r.visit(s=>{if(s.type!==ZFe)return;const o=s.callee.name,a=w4e.visitors[o];a&&a(o,s.arguments,t,n)});const i=Kq(r);return i.globals.forEach(s=>{const o=h4e+s;!jt(n,o)&&t.getSignal(s)&&(n[o]=t.signalRef(s))}),{$expr:_n({code:i.code},t.options.ast?{ast:r}:null),$fields:i.fields,$params:n}}function fXt(e){const t=this,n=e.operators||[];return e.background&&(t.background=e.background),e.eventConfig&&(t.eventConfig=e.eventConfig),e.locale&&(t.locale=e.locale),n.forEach(r=>t.parseOperator(r)),n.forEach(r=>t.parseOperatorParameters(r)),(e.streams||[]).forEach(r=>t.parseStream(r)),(e.updates||[]).forEach(r=>t.parseUpdate(r)),t.resolve()}const dXt=id(["rule"]),x0e=id(["group","image","rect"]);function hXt(e,t){let n="";return dXt[t]||(e.x2&&(e.x?(x0e[t]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):n+="o.x=o.x2-(o.width||0);"),e.xc&&(n+="o.x=o.xc-(o.width||0)/2;"),e.y2&&(e.y?(x0e[t]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):n+="o.y=o.y2-(o.height||0);"),e.yc&&(n+="o.y=o.yc-(o.height||0)/2;")),n}function Pre(e){return(e+"").toLowerCase()}function pXt(e){return Pre(e)==="operator"}function mXt(e){return Pre(e)==="collect"}function bA(e,t,n){n.endsWith(";")||(n="return("+n+");");const r=Function(...t.concat(n));return e&&e.functions?r.bind(e.functions):r}function gXt(e,t,n,r){return`((u = ${e}) < (v = ${t}) || u == null) && v != null ? ${n}
  : (u > v || v == null) && u != null ? ${r}
  : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}
  : v !== v && u === u ? ${r} : `}var yXt={operator:(e,t)=>bA(e,["_"],t.code),parameter:(e,t)=>bA(e,["datum","_"],t.code),event:(e,t)=>bA(e,["event"],t.code),handler:(e,t)=>{const n=`var datum=event.item&&event.item.datum;return ${t.code};`;return bA(e,["_","event"],n)},encode:(e,t)=>{const{marktype:n,channels:r}=t;let i="var o=item,datum=o.datum,m=0,$;";for(const s in r){const o="o["+rt(s)+"]";i+=`$=${r[s].code};if(${o}!==$)${o}=$,m=1;`}return i+=hXt(r,n),i+="return m;",bA(e,["item","_"],i)},codegen:{get(e){const t=`[${e.map(rt).join("][")}]`,n=Function("_",`return _${t};`);return n.path=t,n},comparator(e,t){let n;const r=(s,o)=>{const a=t[o];let u,l;return s.path?(u=`a${s.path}`,l=`b${s.path}`):((n=n||{})["f"+o]=s,u=`this.f${o}(a)`,l=`this.f${o}(b)`),gXt(u,l,-a,a)},i=Function("a","b","var u, v; return "+e.map(r).join("")+"0;");return n?i.bind(n):i}}};function vXt(e){const t=this;pXt(e.type)||!e.type?t.operator(e,e.update?t.operatorExpression(e.update):null):t.transform(e,e.type)}function bXt(e){const t=this;if(e.params){const n=t.get(e.id);n||Le("Invalid operator id: "+e.id),t.dataflow.connect(n,n.parameters(t.parseParameters(e.params),e.react,e.initonly))}}function _Xt(e,t){t=t||{};const n=this;for(const r in e){const i=e[r];t[r]=je(i)?i.map(s=>S0e(s,n,t)):S0e(i,n,t)}return t}function S0e(e,t,n){if(!e||!gt(e))return e;for(let r=0,i=T0e.length,s;r<i;++r)if(s=T0e[r],jt(e,s.key))return s.parse(e,t,n);return e}var T0e=[{key:"$ref",parse:wXt},{key:"$key",parse:xXt},{key:"$expr",parse:EXt},{key:"$field",parse:SXt},{key:"$encode",parse:AXt},{key:"$compare",parse:TXt},{key:"$context",parse:CXt},{key:"$subflow",parse:IXt},{key:"$tupleid",parse:kXt}];function wXt(e,t){return t.get(e.$ref)||Le("Operator not defined: "+e.$ref)}function EXt(e,t,n){e.$params&&t.parseParameters(e.$params,n);const r="e:"+e.$expr.code;return t.fn[r]||(t.fn[r]=dl(t.parameterExpression(e.$expr),e.$fields))}function xXt(e,t){const n="k:"+e.$key+"_"+!!e.$flat;return t.fn[n]||(t.fn[n]=Jee(e.$key,e.$flat,t.expr.codegen))}function SXt(e,t){if(!e.$field)return null;const n="f:"+e.$field+"_"+e.$name;return t.fn[n]||(t.fn[n]=zc(e.$field,e.$name,t.expr.codegen))}function TXt(e,t){const n="c:"+e.$compare+"_"+e.$order,r=pt(e.$compare).map(i=>i&&i.$tupleid?Lt:i);return t.fn[n]||(t.fn[n]=Xee(r,e.$order,t.expr.codegen))}function AXt(e,t){const n=e.$encode,r={};for(const i in n){const s=n[i];r[i]=dl(t.encodeExpression(s.$expr),s.$fields),r[i].output=s.$output}return r}function CXt(e,t){return t}function IXt(e,t){const n=e.$subflow;return function(r,i,s){const o=t.fork().parse(n),a=o.get(n.operators[0].id),u=o.signals.parent;return u&&u.set(s),a.detachSubflow=()=>t.detach(o),a}}function kXt(){return Lt}function RXt(e){var t=this,n=e.filter!=null?t.eventExpression(e.filter):void 0,r=e.stream!=null?t.get(e.stream):void 0,i;e.source?r=t.events(e.source,e.type,n):e.merge&&(i=e.merge.map(s=>t.get(s)),r=i[0].merge.apply(i[0],i.slice(1))),e.between&&(i=e.between.map(s=>t.get(s)),r=r.between(i[0],i[1])),e.filter&&(r=r.filter(n)),e.throttle!=null&&(r=r.throttle(+e.throttle)),e.debounce!=null&&(r=r.debounce(+e.debounce)),r==null&&Le("Invalid stream definition: "+JSON.stringify(e)),e.consume&&r.consume(!0),t.stream(e,r)}function NXt(e){var t=this,n=gt(n=e.source)?n.$ref:n,r=t.get(n),i=null,s=e.update,o=void 0;r||Le("Source not defined: "+e.source),i=e.target&&e.target.$expr?t.eventExpression(e.target.$expr):t.get(e.target),s&&s.$expr&&(s.$params&&(o=t.parseParameters(s.$params)),s=t.handlerExpression(s.$expr)),t.update(e,r,i,s,o)}const PXt={skip:!0};function OXt(e){var t=this,n={};if(e.signals){var r=n.signals={};Object.keys(t.signals).forEach(s=>{const o=t.signals[s];e.signals(s,o)&&(r[s]=o.value)})}if(e.data){var i=n.data={};Object.keys(t.data).forEach(s=>{const o=t.data[s];e.data(s,o)&&(i[s]=o.input.value)})}return t.subcontext&&e.recurse!==!1&&(n.subcontext=t.subcontext.map(s=>s.getState(e))),n}function DXt(e){var t=this,n=t.dataflow,r=e.data,i=e.signals;Object.keys(i||{}).forEach(s=>{n.update(t.signals[s],i[s],PXt)}),Object.keys(r||{}).forEach(s=>{n.pulse(t.data[s].input,n.changeset().remove(Vc).insert(r[s]))}),(e.subcontext||[]).forEach((s,o)=>{const a=t.subcontext[o];a&&a.setState(s)})}function E4e(e,t,n,r){return new x4e(e,t,n,r)}function x4e(e,t,n,r){this.dataflow=e,this.transforms=t,this.events=e.events.bind(e),this.expr=r||yXt,this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function A0e(e){this.dataflow=e.dataflow,this.transforms=e.transforms,this.events=e.events,this.expr=e.expr,this.signals=Object.create(e.signals),this.scales=Object.create(e.scales),this.nodes=Object.create(e.nodes),this.data=Object.create(e.data),this.fn=Object.create(e.fn),e.functions&&(this.functions=Object.create(e.functions),this.functions.context=this)}x4e.prototype=A0e.prototype={fork(){const e=new A0e(this);return(this.subcontext||(this.subcontext=[])).push(e),e},detach(e){this.subcontext=this.subcontext.filter(n=>n!==e);const t=Object.keys(e.nodes);for(const n of t)e.nodes[n]._targets=null;for(const n of t)e.nodes[n].detach();e.nodes=null},get(e){return this.nodes[e]},set(e,t){return this.nodes[e]=t},add(e,t){const n=this,r=n.dataflow,i=e.value;if(n.set(e.id,t),mXt(e.type)&&i&&(i.$ingest?r.ingest(t,i.$ingest,i.$format):i.$request?r.preload(t,i.$request,i.$format):r.pulse(t,r.changeset().insert(i))),e.root&&(n.root=t),e.parent){let s=n.get(e.parent.$ref);s?(r.connect(s,[t]),t.targets().add(s)):(n.unresolved=n.unresolved||[]).push(()=>{s=n.get(e.parent.$ref),r.connect(s,[t]),t.targets().add(s)})}if(e.signal&&(n.signals[e.signal]=t),e.scale&&(n.scales[e.scale]=t),e.data)for(const s in e.data){const o=n.data[s]||(n.data[s]={});e.data[s].forEach(a=>o[a]=t)}},resolve(){return(this.unresolved||[]).forEach(e=>e()),delete this.unresolved,this},operator(e,t){this.add(e,this.dataflow.add(e.value,t))},transform(e,t){this.add(e,this.dataflow.add(this.transforms[Pre(t)]))},stream(e,t){this.set(e.id,t)},update(e,t,n,r,i){this.dataflow.on(t,n,r,i,e.options)},operatorExpression(e){return this.expr.operator(this,e)},parameterExpression(e){return this.expr.parameter(this,e)},eventExpression(e){return this.expr.event(this,e)},handlerExpression(e){return this.expr.handler(this,e)},encodeExpression(e){return this.expr.encode(this,e)},parse:fXt,parseOperator:vXt,parseOperatorParameters:bXt,parseParameters:_Xt,parseStream:RXt,parseUpdate:NXt,getState:OXt,setState:DXt};function $Xt(e){const t=e.container();t&&(t.setAttribute("role","graphics-document"),t.setAttribute("aria-roleDescription","visualization"),S4e(t,e.description()))}function S4e(e,t){e&&(t==null?e.removeAttribute("aria-label"):e.setAttribute("aria-label",t))}function MXt(e){e.add(null,t=>(e._background=t.bg,e._resize=1,t.bg),{bg:e._signals.background})}const cU="default";function LXt(e){const t=e._signals.cursor||(e._signals.cursor=e.add({user:cU,item:null}));e.on(e.events("view","pointermove"),t,(n,r)=>{const i=t.value,s=i?mt(i)?i:i.user:cU,o=r.item&&r.item.cursor||null;return i&&s===i.user&&o==i.item?i:{user:s,item:o}}),e.add(null,function(n){let r=n.cursor,i=this.value;return mt(r)||(i=r.item,r=r.user),Xq(e,r&&r!==cU?r:i||r),i},{cursor:t})}function Xq(e,t){const n=e.globalCursor()?typeof document<"u"&&document.body:e.container();if(n)return t==null?n.style.removeProperty("cursor"):n.style.cursor=t}function hL(e,t){var n=e._runtime.data;return jt(n,t)||Le("Unrecognized data set: "+t),n[t]}function FXt(e,t){return arguments.length<2?hL(this,e).values.value:_5.call(this,e,m_().remove(Vc).insert(t))}function _5(e,t){q3e(t)||Le("Second argument to changes must be a changeset.");const n=hL(this,e);return n.modified=!0,this.pulse(n.input,t)}function jXt(e,t){return _5.call(this,e,m_().insert(t))}function BXt(e,t){return _5.call(this,e,m_().remove(t))}function T4e(e){var t=e.padding();return Math.max(0,e._viewWidth+t.left+t.right)}function A4e(e){var t=e.padding();return Math.max(0,e._viewHeight+t.top+t.bottom)}function w5(e){var t=e.padding(),n=e._origin;return[t.left+n[0],t.top+n[1]]}function UXt(e){var t=w5(e),n=T4e(e),r=A4e(e);e._renderer.background(e.background()),e._renderer.resize(n,r,t),e._handler.origin(t),e._resizeListeners.forEach(i=>{try{i(n,r)}catch(s){e.error(s)}})}function zXt(e,t,n){var r=e._renderer,i=r&&r.canvas(),s,o,a;return i&&(a=w5(e),o=t.changedTouches?t.changedTouches[0]:t,s=d5(o,i),s[0]-=a[0],s[1]-=a[1]),t.dataflow=e,t.item=n,t.vega=VXt(e,n,s),t}function VXt(e,t,n){const r=t?t.mark.marktype==="group"?t:t.mark.group:null;function i(o){var a=r,u;if(o){for(u=t;u;u=u.mark.group)if(u.mark.name===o){a=u;break}}return a&&a.mark&&a.mark.interactive?a:{}}function s(o){if(!o)return n;mt(o)&&(o=i(o));const a=n.slice();for(;o;)a[0]-=o.x||0,a[1]-=o.y||0,o=o.mark&&o.mark.group;return a}return{view:Ca(e),item:Ca(t||{}),group:i,xy:s,x:o=>s(o)[0],y:o=>s(o)[1]}}const C0e="view",HXt="timer",qXt="window",WXt={trap:!1};function GXt(e){const t=_n({defaults:{}},e),n=(r,i)=>{i.forEach(s=>{je(r[s])&&(r[s]=id(r[s]))})};return n(t.defaults,["prevent","allow"]),n(t,["view","window","selector"]),t}function C4e(e,t,n,r){e._eventListeners.push({type:n,sources:pt(t),handler:r})}function YXt(e,t){var n=e._eventConfig.defaults,r=n.prevent,i=n.allow;return r===!1||i===!0?!1:r===!0||i===!1?!0:r?r[t]:i?!i[t]:e.preventDefault()}function nO(e,t,n){const r=e._eventConfig&&e._eventConfig[t];return r===!1||gt(r)&&!r[n]?(e.warn(`Blocked ${t} ${n} event listener.`),!1):!0}function KXt(e,t,n){var r=this,i=new W4(n),s=function(l,c){r.runAsync(null,()=>{e===C0e&&YXt(r,t)&&l.preventDefault(),i.receive(zXt(r,l,c))})},o;if(e===HXt)nO(r,"timer",t)&&r.timer(s,t);else if(e===C0e)nO(r,"view",t)&&r.addEventListener(t,s,WXt);else if(e===qXt?nO(r,"window",t)&&typeof window<"u"&&(o=[window]):typeof document<"u"&&nO(r,"selector",t)&&(o=Array.from(document.querySelectorAll(e))),!o)r.warn("Can not resolve event source: "+e);else{for(var a=0,u=o.length;a<u;++a)o[a].addEventListener(t,s);C4e(r,o,t,s)}return i}function I0e(e){return e.item}function k0e(e){return e.item.mark.source}function R0e(e){return function(t,n){return n.vega.view().changeset().encode(n.item,e)}}function XXt(e,t){return e=[e||"hover"],t=[t||"update",e[0]],this.on(this.events("view","pointerover",I0e),k0e,R0e(e)),this.on(this.events("view","pointerout",I0e),k0e,R0e(t)),this}function QXt(){var e=this._tooltip,t=this._timers,n=this._handler.handlers(),r=this._eventListeners,i,s,o,a,u;for(i=t.length;--i>=0;)t[i].stop();for(i=r.length;--i>=0;)for(o=r[i],s=o.sources.length;--s>=0;)o.sources[s].removeEventListener(o.type,o.handler);for(e&&e.call(this,this._handler,null,null,null),i=n.length;--i>=0;)u=n[i].type,a=n[i].handler,this._handler.off(u,a);return this}function Fl(e,t,n){const r=document.createElement(e);for(const i in t)r.setAttribute(i,t[i]);return n!=null&&(r.textContent=n),r}const JXt="vega-bind",ZXt="vega-bind-name",eQt="vega-bind-radio";function tQt(e,t,n){if(!t)return;const r=n.param;let i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:o=>{o!=e.signal(r.signal)&&e.runAsync(null,()=>{i.source=!0,e.signal(r.signal,o)})}},r.debounce&&(i.update=Qee(r.debounce,i.update))),(r.input==null&&r.element?nQt:iQt)(i,t,r,e),i.active||(e.on(e._signals[r.signal],null,()=>{i.source?i.source=!1:i.set(e.signal(r.signal))}),i.active=!0),i}function nQt(e,t,n,r){const i=n.event||"input",s=()=>e.update(t.value);r.signal(n.signal,t.value),t.addEventListener(i,s),C4e(r,t,i,s),e.set=o=>{t.value=o,t.dispatchEvent(rQt(i))}}function rQt(e){return typeof Event<"u"?new Event(e):{type:e}}function iQt(e,t,n,r){const i=r.signal(n.signal),s=Fl("div",{class:JXt}),o=n.input==="radio"?s:s.appendChild(Fl("label"));o.appendChild(Fl("span",{class:ZXt},n.name||n.signal)),t.appendChild(s);let a=sQt;switch(n.input){case"checkbox":a=oQt;break;case"select":a=aQt;break;case"radio":a=uQt;break;case"range":a=lQt;break}a(e,o,n,i)}function sQt(e,t,n,r){const i=Fl("input");for(const s in n)s!=="signal"&&s!=="element"&&i.setAttribute(s==="input"?"type":s,n[s]);i.setAttribute("name",n.signal),i.value=r,t.appendChild(i),i.addEventListener("input",()=>e.update(i.value)),e.elements=[i],e.set=s=>i.value=s}function oQt(e,t,n,r){const i={type:"checkbox",name:n.signal};r&&(i.checked=!0);const s=Fl("input",i);t.appendChild(s),s.addEventListener("change",()=>e.update(s.checked)),e.elements=[s],e.set=o=>s.checked=!!o||null}function aQt(e,t,n,r){const i=Fl("select",{name:n.signal}),s=n.labels||[];n.options.forEach((o,a)=>{const u={value:o};pL(o,r)&&(u.selected=!0),i.appendChild(Fl("option",u,(s[a]||o)+""))}),t.appendChild(i),i.addEventListener("change",()=>{e.update(n.options[i.selectedIndex])}),e.elements=[i],e.set=o=>{for(let a=0,u=n.options.length;a<u;++a)if(pL(n.options[a],o)){i.selectedIndex=a;return}}}function uQt(e,t,n,r){const i=Fl("span",{class:eQt}),s=n.labels||[];t.appendChild(i),e.elements=n.options.map((o,a)=>{const u={type:"radio",name:n.signal,value:o};pL(o,r)&&(u.checked=!0);const l=Fl("input",u);l.addEventListener("change",()=>e.update(o));const c=Fl("label",{},(s[a]||o)+"");return c.prepend(l),i.appendChild(c),l}),e.set=o=>{const a=e.elements,u=a.length;for(let l=0;l<u;++l)pL(a[l].value,o)&&(a[l].checked=!0)}}function lQt(e,t,n,r){r=r!==void 0?r:(+n.max+ +n.min)/2;const i=n.max!=null?n.max:Math.max(100,+r)||100,s=n.min||Math.min(0,i,+r)||0,o=n.step||ty(s,i,100),a=Fl("input",{type:"range",name:n.signal,min:s,max:i,step:o});a.value=r;const u=Fl("span",{},+r);t.appendChild(a),t.appendChild(u);const l=()=>{u.textContent=a.value,e.update(+a.value)};a.addEventListener("input",l),a.addEventListener("change",l),e.elements=[a],e.set=c=>{a.value=c,u.textContent=c}}function pL(e,t){return e===t||e+""==t+""}function I4e(e,t,n,r,i,s){return t=t||new r(e.loader()),t.initialize(n,T4e(e),A4e(e),w5(e),i,s).background(e.background())}function Ore(e,t){return t?function(){try{t.apply(this,arguments)}catch(n){e.error(n)}}:null}function cQt(e,t,n,r){const i=new r(e.loader(),Ore(e,e.tooltip())).scene(e.scenegraph().root).initialize(n,w5(e),e);return t&&t.handlers().forEach(s=>{i.on(s.type,s.handler)}),i}function fQt(e,t){const n=this,r=n._renderType,i=n._eventConfig.bind,s=h5(r);e=n._el=e?fU(n,e,!0):null,$Xt(n),s||n.error("Unrecognized renderer type: "+r);const o=s.handler||YR,a=e?s.renderer:s.headless;return n._renderer=a?I4e(n,n._renderer,e,a):null,n._handler=cQt(n,n._handler,e,o),n._redraw=!0,e&&i!=="none"&&(t=t?n._elBind=fU(n,t,!0):e.appendChild(Fl("form",{class:"vega-bindings"})),n._bind.forEach(u=>{u.param.element&&i!=="container"&&(u.element=fU(n,u.param.element,!!u.param.input))}),n._bind.forEach(u=>{tQt(n,u.element||t,u)})),n}function fU(e,t,n){if(typeof t=="string")if(typeof document<"u"){if(t=document.querySelector(t),!t)return e.error("Signal bind element not found: "+t),null}else return e.error("DOM document instance not found."),null;if(t&&n)try{t.textContent=""}catch(r){t=null,e.error(r)}return t}const _A=e=>+e||0,dQt=e=>({top:e,bottom:e,left:e,right:e});function N0e(e){return gt(e)?{top:_A(e.top),bottom:_A(e.bottom),left:_A(e.left),right:_A(e.right)}:dQt(_A(e))}async function Dre(e,t,n,r){const i=h5(t),s=i&&i.headless;return s||Le("Unrecognized renderer type: "+t),await e.runAsync(),I4e(e,null,null,s,n,r).renderAsync(e._scenegraph.root)}async function hQt(e,t){e!==g0.Canvas&&e!==g0.SVG&&e!==g0.PNG&&Le("Unrecognized image type: "+e);const n=await Dre(this,e,t);return e===g0.SVG?pQt(n.svg(),"image/svg+xml"):n.canvas().toDataURL("image/png")}function pQt(e,t){const n=new Blob([e],{type:t});return window.URL.createObjectURL(n)}async function mQt(e,t){return(await Dre(this,g0.Canvas,e,t)).canvas()}async function gQt(e){return(await Dre(this,g0.SVG,e)).svg()}function yQt(e,t,n){return E4e(e,Fx,ok,n).parse(t)}function vQt(e){var t=this._runtime.scales;return jt(t,e)||Le("Unrecognized scale or projection: "+e),t[e].value}var k4e="width",R4e="height",$re="padding",P0e={skip:!0};function N4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$re?r.left+r.right:0)}function P4e(e,t){var n=e.autosize(),r=e.padding();return t-(n&&n.contains===$re?r.top+r.bottom:0)}function bQt(e){var t=e._signals,n=t[k4e],r=t[R4e],i=t[$re];function s(){e._autosize=e._resize=1}e._resizeWidth=e.add(null,a=>{e._width=a.size,e._viewWidth=N4e(e,a.size),s()},{size:n}),e._resizeHeight=e.add(null,a=>{e._height=a.size,e._viewHeight=P4e(e,a.size),s()},{size:r});const o=e.add(null,s,{pad:i});e._resizeWidth.rank=n.rank+1,e._resizeHeight.rank=r.rank+1,o.rank=i.rank+1}function _Qt(e,t,n,r,i,s){this.runAfter(o=>{let a=0;o._autosize=0,o.width()!==n&&(a=1,o.signal(k4e,n,P0e),o._resizeWidth.skip(!0)),o.height()!==r&&(a=1,o.signal(R4e,r,P0e),o._resizeHeight.skip(!0)),o._viewWidth!==e&&(o._resize=1,o._viewWidth=e),o._viewHeight!==t&&(o._resize=1,o._viewHeight=t),(o._origin[0]!==i[0]||o._origin[1]!==i[1])&&(o._resize=1,o._origin=i),a&&o.run("enter"),s&&o.runAfter(u=>u.resize())},!1,1)}function wQt(e){return this._runtime.getState(e||{data:EQt,signals:xQt,recurse:!0})}function EQt(e,t){return t.modified&&je(t.input.value)&&!e.startsWith("_:vega:_")}function xQt(e,t){return!(e==="parent"||t instanceof Fx.proxy)}function SQt(e){return this.runAsync(null,t=>{t._trigger=!1,t._runtime.setState(e)},t=>{t._trigger=!0}),this}function TQt(e,t){function n(r){e({timestamp:Date.now(),elapsed:r})}this._timers.push(Xdt(n,t))}function AQt(e,t,n,r){const i=e.element();i&&i.setAttribute("title",CQt(r))}function CQt(e){return e==null?"":je(e)?O4e(e):gt(e)&&!U0(e)?IQt(e):e+""}function IQt(e){return Object.keys(e).map(t=>{const n=e[t];return t+": "+(je(n)?O4e(n):D4e(n))}).join(`
`)}function O4e(e){return"["+e.map(D4e).join(", ")+"]"}function D4e(e){return je(e)?"[]":gt(e)&&!U0(e)?"{}":e}function kQt(){if(this.renderer()==="canvas"&&this._renderer._canvas){let e=null;const t=()=>{e!=null&&e();const n=matchMedia(`(resolution: ${window.devicePixelRatio}dppx)`);n.addEventListener("change",t),e=()=>{n.removeEventListener("change",t)},this._renderer._canvas.getContext("2d").pixelRatio=window.devicePixelRatio||1,this._redraw=!0,this._resize=1,this.resize().runAsync()};t()}}function $4e(e,t){const n=this;if(t=t||{},DE.call(n),t.loader&&n.loader(t.loader),t.logger&&n.logger(t.logger),t.logLevel!=null&&n.logLevel(t.logLevel),t.locale||e.locale){const s=_n({},e.locale,t.locale);n.locale($3e(s.number,s.time))}n._el=null,n._elBind=null,n._renderType=t.renderer||g0.Canvas,n._scenegraph=new k6e;const r=n._scenegraph.root;n._renderer=null,n._tooltip=t.tooltip||AQt,n._redraw=!0,n._handler=new YR().scene(r),n._globalCursor=!1,n._preventDefault=!1,n._timers=[],n._eventListeners=[],n._resizeListeners=[],n._eventConfig=GXt(e.eventConfig),n.globalCursor(n._eventConfig.globalCursor);const i=yQt(n,e,t.expr);n._runtime=i,n._signals=i.signals,n._bind=(e.bindings||[]).map(s=>({state:null,param:_n({},s)})),i.root&&i.root.set(r),r.source=i.data.root.input,n.pulse(i.data.root.input,n.changeset().insert(r.items)),n._width=n.width(),n._height=n.height(),n._viewWidth=N4e(n,n._width),n._viewHeight=P4e(n,n._height),n._origin=[0,0],n._resize=0,n._autosize=1,bQt(n),MXt(n),LXt(n),n.description(e.description),t.hover&&n.hover(),t.container&&n.initialize(t.container,t.bind),t.watchPixelRatio&&n._watchPixelRatio()}function rO(e,t){return jt(e._signals,t)?e._signals[t]:Le("Unrecognized signal name: "+rt(t))}function M4e(e,t){const n=(e._targets||[]).filter(r=>r._update&&r._update.handler===t);return n.length?n[0]:null}function O0e(e,t,n,r){let i=M4e(n,r);return i||(i=Ore(e,()=>r(t,n.value)),i.handler=r,e.on(n,null,i)),e}function D0e(e,t,n){const r=M4e(t,n);return r&&t._targets.remove(r),e}lt($4e,DE,{async evaluate(e,t,n){if(await DE.prototype.evaluate.call(this,e,t),this._redraw||this._resize)try{this._renderer&&(this._resize&&(this._resize=0,UXt(this)),await this._renderer.renderAsync(this._scenegraph.root)),this._redraw=!1}catch(r){this.error(r)}return n&&ED(this,n),this},dirty(e){this._redraw=!0,this._renderer&&this._renderer.dirty(e)},description(e){if(arguments.length){const t=e!=null?e+"":null;return t!==this._desc&&S4e(this._el,this._desc=t),this}return this._desc},container(){return this._el},scenegraph(){return this._scenegraph},origin(){return this._origin.slice()},signal(e,t,n){const r=rO(this,e);return arguments.length===1?r.value:this.update(r,t,n)},width(e){return arguments.length?this.signal("width",e):this.signal("width")},height(e){return arguments.length?this.signal("height",e):this.signal("height")},padding(e){return arguments.length?this.signal("padding",N0e(e)):N0e(this.signal("padding"))},autosize(e){return arguments.length?this.signal("autosize",e):this.signal("autosize")},background(e){return arguments.length?this.signal("background",e):this.signal("background")},renderer(e){return arguments.length?(h5(e)||Le("Unrecognized renderer type: "+e),e!==this._renderType&&(this._renderType=e,this._resetRenderer()),this):this._renderType},tooltip(e){return arguments.length?(e!==this._tooltip&&(this._tooltip=e,this._resetRenderer()),this):this._tooltip},loader(e){return arguments.length?(e!==this._loader&&(DE.prototype.loader.call(this,e),this._resetRenderer()),this):this._loader},resize(){return this._autosize=1,this.touch(rO(this,"autosize"))},_resetRenderer(){this._renderer&&(this._renderer=null,this.initialize(this._el,this._elBind))},_resizeView:_Qt,addEventListener(e,t,n){let r=t;return n&&n.trap===!1||(r=Ore(this,t),r.raw=t),this._handler.on(e,r),this},removeEventListener(e,t){for(var n=this._handler.handlers(e),r=n.length,i,s;--r>=0;)if(s=n[r].type,i=n[r].handler,e===s&&(t===i||t===i.raw)){this._handler.off(s,i);break}return this},addResizeListener(e){const t=this._resizeListeners;return t.includes(e)||t.push(e),this},removeResizeListener(e){var t=this._resizeListeners,n=t.indexOf(e);return n>=0&&t.splice(n,1),this},addSignalListener(e,t){return O0e(this,e,rO(this,e),t)},removeSignalListener(e,t){return D0e(this,rO(this,e),t)},addDataListener(e,t){return O0e(this,e,hL(this,e).values,t)},removeDataListener(e,t){return D0e(this,hL(this,e).values,t)},globalCursor(e){if(arguments.length){if(this._globalCursor!==!!e){const t=Xq(this,null);this._globalCursor=!!e,t&&Xq(this,t)}return this}else return this._globalCursor},preventDefault(e){return arguments.length?(this._preventDefault=e,this):this._preventDefault},timer:TQt,events:KXt,finalize:QXt,hover:XXt,data:FXt,change:_5,insert:jXt,remove:BXt,scale:vQt,initialize:fQt,toImageURL:hQt,toCanvas:mQt,toSVG:gQt,getState:wQt,setState:SQt,_watchPixelRatio:kQt});const RQt="view",mL="[",gL="]",L4e="{",F4e="}",NQt=":",j4e=",",PQt="@",OQt=">",DQt=/[[\]{}]/,$Qt={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1};let B4e,U4e;function fv(e,t,n){return B4e=t||RQt,U4e=n||$Qt,z4e(e.trim()).map(Qq)}function MQt(e){return U4e[e]}function x2(e,t,n,r,i){const s=e.length;let o=0,a;for(;t<s;++t){if(a=e[t],!o&&a===n)return t;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return t}function z4e(e){const t=[],n=e.length;let r=0,i=0;for(;i<n;)i=x2(e,i,j4e,mL+L4e,gL+F4e),t.push(e.substring(r,i).trim()),r=++i;if(t.length===0)throw"Empty event selector: "+e;return t}function Qq(e){return e[0]==="["?LQt(e):FQt(e)}function LQt(e){const t=e.length;let n=1,r;if(n=x2(e,n,gL,mL,gL),n===t)throw"Empty between selector: "+e;if(r=z4e(e.substring(1,n)),r.length!==2)throw"Between selector must have two elements: "+e;if(e=e.slice(n+1).trim(),e[0]!==OQt)throw"Expected '>' after between selector: "+e;r=r.map(Qq);const i=Qq(e.slice(1).trim());return i.between?{between:r,stream:i}:(i.between=r,i)}function FQt(e){const t={source:B4e},n=[];let r=[0,0],i=0,s=0,o=e.length,a=0,u,l;if(e[o-1]===F4e){if(a=e.lastIndexOf(L4e),a>=0){try{r=jQt(e.substring(a+1,o-1))}catch{throw"Invalid throttle specification: "+e}e=e.slice(0,a).trim(),o=e.length}else throw"Unmatched right brace: "+e;a=0}if(!o)throw e;if(e[0]===PQt&&(i=++a),u=x2(e,a,NQt),u<o&&(n.push(e.substring(s,u).trim()),s=a=++u),a=x2(e,a,mL),a===o)n.push(e.substring(s,o).trim());else if(n.push(e.substring(s,a).trim()),l=[],s=++a,s===o)throw"Unmatched left bracket: "+e;for(;a<o;){if(a=x2(e,a,gL),a===o)throw"Unmatched left bracket: "+e;if(l.push(e.substring(s,a).trim()),a<o-1&&e[++a]!==mL)throw"Expected left bracket: "+e;s=++a}if(!(o=n.length)||DQt.test(n[o-1]))throw"Invalid event selector: "+e;return o>1?(t.type=n[1],i?t.markname=n[0].slice(1):MQt(n[0])?t.marktype=n[0]:t.source=n[0]):t.type=n[0],t.type.slice(-1)==="!"&&(t.consume=!0,t.type=t.type.slice(0,-1)),l!=null&&(t.filter=l),r[0]&&(t.throttle=r[0]),r[1]&&(t.debounce=r[1]),t}function jQt(e){const t=e.split(j4e);if(!e.length||t.length>2)throw e;return t.map(n=>{const r=+n;if(r!==r)throw e;return r})}function BQt(e){return gt(e)?e:{type:e||"pad"}}const wA=e=>+e||0,UQt=e=>({top:e,bottom:e,left:e,right:e});function zQt(e){return gt(e)?e.signal?e:{top:wA(e.top),bottom:wA(e.bottom),left:wA(e.left),right:wA(e.right)}:UQt(wA(e))}const co=e=>gt(e)&&!je(e)?_n({},e):{value:e};function $0e(e,t,n,r){return n!=null?(gt(n)&&!je(n)||je(n)&&n.length&&gt(n[0])?e.update[t]=n:e[r||"enter"][t]={value:n},1):0}function zo(e,t,n){for(const r in t)$0e(e,r,t[r]);for(const r in n)$0e(e,r,n[r],"update")}function yT(e,t,n){for(const r in t)n&&jt(n,r)||(e[r]=_n(e[r]||{},t[r]));return e}function Iw(e,t){return t&&(t.enter&&t.enter[e]||t.update&&t.update[e])}const Mre="mark",Lre="frame",Fre="scope",VQt="axis",HQt="axis-domain",qQt="axis-grid",WQt="axis-label",GQt="axis-tick",YQt="axis-title",KQt="legend",XQt="legend-band",QQt="legend-entry",JQt="legend-gradient",V4e="legend-label",ZQt="legend-symbol",eJt="legend-title",tJt="title",nJt="title-text",rJt="title-subtitle";function iJt(e,t,n,r,i){const s={},o={};let a,u,l,c;u="lineBreak",t==="text"&&i[u]!=null&&!Iw(u,e)&&dU(s,u,i[u]),(n=="legend"||String(n).startsWith("axis"))&&(n=null),c=n===Lre?i.group:n===Mre?_n({},i.mark,i[t]):null;for(u in c)l=Iw(u,e)||(u==="fill"||u==="stroke")&&(Iw("fill",e)||Iw("stroke",e)),l||dU(s,u,c[u]);pt(r).forEach(f=>{const d=i.style&&i.style[f];for(const h in d)Iw(h,e)||dU(s,h,d[h])}),e=_n({},e);for(u in s)c=s[u],c.signal?(a=a||{})[u]=c:o[u]=c;return e.enter=_n(o,e.enter),a&&(e.update=_n(a,e.update)),e}function dU(e,t,n){e[t]=n&&n.signal?{signal:n.signal}:{value:n}}const H4e=e=>mt(e)?rt(e):e.signal?`(${e.signal})`:q4e(e);function E5(e){if(e.gradient!=null)return oJt(e);let t=e.signal?`(${e.signal})`:e.color?sJt(e.color):e.field!=null?q4e(e.field):e.value!==void 0?rt(e.value):void 0;return e.scale!=null&&(t=aJt(e,t)),t===void 0&&(t=null),e.exponent!=null&&(t=`pow(${t},${MD(e.exponent)})`),e.mult!=null&&(t+=`*${MD(e.mult)}`),e.offset!=null&&(t+=`+${MD(e.offset)}`),e.round&&(t=`round(${t})`),t}const iO=(e,t,n,r)=>`(${e}(${[t,n,r].map(E5).join(",")})+'')`;function sJt(e){return e.c?iO("hcl",e.h,e.c,e.l):e.h||e.s?iO("hsl",e.h,e.s,e.l):e.l||e.a?iO("lab",e.l,e.a,e.b):e.r||e.g||e.b?iO("rgb",e.r,e.g,e.b):null}function oJt(e){const t=[e.start,e.stop,e.count].map(n=>n==null?null:rt(n));for(;t.length&&Zn(t)==null;)t.pop();return t.unshift(H4e(e.gradient)),`gradient(${t.join(",")})`}function MD(e){return gt(e)?"("+E5(e)+")":e}function q4e(e){return W4e(gt(e)?e:{datum:e})}function W4e(e){let t,n,r;if(e.signal)t="datum",r=e.signal;else if(e.group||e.parent){for(n=Math.max(1,e.level||1),t="item";n-- >0;)t+=".mark.group";e.parent?(r=e.parent,t+=".datum"):r=e.group}else e.datum?(t="datum",r=e.datum):Le("Invalid field reference: "+rt(e));return e.signal||(r=mt(r)?op(r).map(rt).join("]["):W4e(r)),t+"["+r+"]"}function aJt(e,t){const n=H4e(e.scale);return e.range!=null?t=`lerp(_range(${n}), ${+e.range})`:(t!==void 0&&(t=`_scale(${n}, ${t})`),e.band&&(t=(t?t+"+":"")+`_bandwidth(${n})`+(+e.band==1?"":"*"+MD(e.band)),e.extra&&(t=`(datum.extra ? _scale(${n}, datum.extra.value) : ${t})`)),t==null&&(t="0")),t}function uJt(e){let t="";return e.forEach(n=>{const r=E5(n);t+=n.test?`(${n.test})?${r}:`:r}),Zn(t)===":"&&(t+="null"),t}function G4e(e,t,n,r,i,s){const o={};s=s||{},s.encoders={$encode:o},e=iJt(e,t,n,r,i.config);for(const a in e)o[a]=lJt(e[a],t,s,i);return s}function lJt(e,t,n,r){const i={},s={};for(const o in e)e[o]!=null&&(i[o]=fJt(cJt(e[o]),r,n,s));return{$expr:{marktype:t,channels:i},$fields:Object.keys(s),$output:Object.keys(e)}}function cJt(e){return je(e)?uJt(e):E5(e)}function fJt(e,t,n,r){const i=Vh(e,t);return i.$fields.forEach(s=>r[s]=1),_n(n,i.$params),i.$expr}const dJt="outer",hJt=["value","update","init","react","bind"];function M0e(e,t){Le(e+' for "outer" push: '+rt(t))}function Y4e(e,t){const n=e.name;if(e.push===dJt)t.signals[n]||M0e("No prior signal definition",n),hJt.forEach(r=>{e[r]!==void 0&&M0e("Invalid property ",r)});else{const r=t.addSignal(n,e.value);e.react===!1&&(r.react=!1),e.bind&&t.addBinding(n,e.bind)}}function Jq(e,t,n,r){this.id=-1,this.type=e,this.value=t,this.params=n,r&&(this.parent=r)}function x5(e,t,n,r){return new Jq(e,t,n,r)}function yL(e,t){return x5("operator",e,t)}function Mt(e){const t={$ref:e.id};return e.id<0&&(e.refs=e.refs||[]).push(t),t}function ak(e,t){return t?{$field:e,$name:t}:{$field:e}}const Zq=ak("key");function L0e(e,t){return{$compare:e,$order:t}}function pJt(e,t){const n={$key:e};return t&&(n.$flat=!0),n}const mJt="ascending",gJt="descending";function yJt(e){return gt(e)?(e.order===gJt?"-":"+")+S5(e.op,e.field):""}function S5(e,t){return(e&&e.signal?"$"+e.signal:e||"")+(e&&t?"_":"")+(t&&t.signal?"$"+t.signal:t||"")}const jre="scope",eW="view";function Vs(e){return e&&e.signal}function vJt(e){return e&&e.expr}function LD(e){if(Vs(e))return!0;if(gt(e)){for(const t in e)if(LD(e[t]))return!0}return!1}function Sf(e,t){return e??t}function G1(e){return e&&e.signal||e}const F0e="timer";function uk(e,t){return(e.merge?_Jt:e.stream?wJt:e.type?EJt:Le("Invalid stream specification: "+rt(e)))(e,t)}function bJt(e){return e===jre?eW:e||eW}function _Jt(e,t){const n=e.merge.map(i=>uk(i,t)),r=Bre({merge:n},e,t);return t.addStream(r).id}function wJt(e,t){const n=uk(e.stream,t),r=Bre({stream:n},e,t);return t.addStream(r).id}function EJt(e,t){let n;e.type===F0e?(n=t.event(F0e,e.throttle),e={between:e.between,filter:e.filter}):n=t.event(bJt(e.source),e.type);const r=Bre({stream:n},e,t);return Object.keys(r).length===1?n:t.addStream(r).id}function Bre(e,t,n){let r=t.between;return r&&(r.length!==2&&Le('Stream "between" parameter must have 2 entries: '+rt(t)),e.between=[uk(r[0],n),uk(r[1],n)]),r=t.filter?[].concat(t.filter):[],(t.marktype||t.markname||t.markrole)&&r.push(xJt(t.marktype,t.markname,t.markrole)),t.source===jre&&r.push("inScope(event.item)"),r.length&&(e.filter=Vh("("+r.join(")&&(")+")",n).$expr),(r=t.throttle)!=null&&(e.throttle=+r),(r=t.debounce)!=null&&(e.debounce=+r),t.consume&&(e.consume=!0),e}function xJt(e,t,n){const r="event.item";return r+(e&&e!=="*"?"&&"+r+".mark.marktype==='"+e+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(t?"&&"+r+".mark.name==='"+t+"'":"")}const SJt={code:"_.$value",ast:{type:"Identifier",value:"value"}};function TJt(e,t,n){const r=e.encode,i={target:n};let s=e.events,o=e.update,a=[];s||Le("Signal update missing events specification."),mt(s)&&(s=fv(s,t.isSubscope()?jre:eW)),s=pt(s).filter(u=>u.signal||u.scale?(a.push(u),0):1),a.length>1&&(a=[CJt(a)]),s.length&&a.push(s.length>1?{merge:s}:s[0]),r!=null&&(o&&Le("Signal encode and update are mutually exclusive."),o="encode(item(),"+rt(r)+")"),i.update=mt(o)?Vh(o,t):o.expr!=null?Vh(o.expr,t):o.value!=null?o.value:o.signal!=null?{$expr:SJt,$params:{$value:t.signalRef(o.signal)}}:Le("Invalid signal update specification."),e.force&&(i.options={force:!0}),a.forEach(u=>t.addUpdate(_n(AJt(u,t),i)))}function AJt(e,t){return{source:e.signal?t.signalRef(e.signal):e.scale?t.scaleRef(e.scale):uk(e,t)}}function CJt(e){return{signal:"["+e.map(t=>t.scale?'scale("'+t.scale+'")':t.signal)+"]"}}function IJt(e,t){const n=t.getSignal(e.name);let r=e.update;e.init&&(r?Le("Signals can not include both init and update expressions."):(r=e.init,n.initonly=!0)),r&&(r=Vh(r,t),n.update=r.$expr,n.params=r.$params),e.on&&e.on.forEach(i=>TJt(i,t,n.id))}const qr=e=>(t,n,r)=>x5(e,n,t||void 0,r),K4e=qr("aggregate"),kJt=qr("axisticks"),X4e=qr("bound"),md=qr("collect"),j0e=qr("compare"),RJt=qr("datajoin"),Q4e=qr("encode"),NJt=qr("expression"),PJt=qr("facet"),OJt=qr("field"),DJt=qr("key"),$Jt=qr("legendentries"),MJt=qr("load"),LJt=qr("mark"),FJt=qr("multiextent"),jJt=qr("multivalues"),BJt=qr("overlap"),UJt=qr("params"),J4e=qr("prefacet"),zJt=qr("projection"),VJt=qr("proxy"),HJt=qr("relay"),Z4e=qr("render"),qJt=qr("scale"),v_=qr("sieve"),WJt=qr("sortitems"),e5e=qr("viewlayout"),GJt=qr("values");let YJt=0;const t5e={min:"min",max:"max",count:"sum"};function KJt(e,t){const n=e.type||"linear";ULe(n)||Le("Unrecognized scale type: "+rt(n)),t.addScale(e.name,{type:n,domain:void 0})}function XJt(e,t){const n=t.getScale(e.name).params;let r;n.domain=n5e(e.domain,e,t),e.range!=null&&(n.range=i5e(e,t,n)),e.interpolate!=null&&oZt(e.interpolate,n),e.nice!=null&&(n.nice=sZt(e.nice,t)),e.bins!=null&&(n.bins=iZt(e.bins,t));for(r in e)jt(n,r)||r==="name"||(n[r]=Rc(e[r],t))}function Rc(e,t){return gt(e)?e.signal?t.signalRef(e.signal):Le("Unsupported object: "+rt(e)):e}function FD(e,t){return e.signal?t.signalRef(e.signal):e.map(n=>Rc(n,t))}function T5(e){Le("Can not find data set: "+rt(e))}function n5e(e,t,n){if(!e){(t.domainMin!=null||t.domainMax!=null)&&Le("No scale domain defined for domainMin/domainMax to override.");return}return e.signal?n.signalRef(e.signal):(je(e)?QJt:e.fields?ZJt:JJt)(e,t,n)}function QJt(e,t,n){return e.map(r=>Rc(r,n))}function JJt(e,t,n){const r=n.getData(e.data);return r||T5(e.data),Ux(t.type)?r.valuesRef(n,e.field,r5e(e.sort,!1)):HLe(t.type)?r.domainRef(n,e.field):r.extentRef(n,e.field)}function ZJt(e,t,n){const r=e.data,i=e.fields.reduce((s,o)=>(o=mt(o)?{data:r,field:o}:je(o)||o.signal?eZt(o,n):o,s.push(o),s),[]);return(Ux(t.type)?tZt:HLe(t.type)?nZt:rZt)(e,n,i)}function eZt(e,t){const n="_:vega:_"+YJt++,r=md({});if(je(e))r.value={$ingest:e};else if(e.signal){const i="setdata("+rt(n)+","+e.signal+")";r.params.input=t.signalRef(i)}return t.addDataPipeline(n,[r,v_({})]),{data:n,field:"data"}}function tZt(e,t,n){const r=r5e(e.sort,!0);let i,s;const o=n.map(l=>{const c=t.getData(l.data);return c||T5(l.data),c.countsRef(t,l.field,r)}),a={groupby:Zq,pulse:o};r&&(i=r.op||"count",s=r.field?S5(i,r.field):"count",a.ops=[t5e[i]],a.fields=[t.fieldRef(s)],a.as=[s]),i=t.add(K4e(a));const u=t.add(md({pulse:Mt(i)}));return s=t.add(GJt({field:Zq,sort:t.sortRef(r),pulse:Mt(u)})),Mt(s)}function r5e(e,t){return e&&(!e.field&&!e.op?gt(e)?e.field="key":e={field:"key"}:!e.field&&e.op!=="count"?Le("No field provided for sort aggregate op: "+e.op):t&&e.field&&e.op&&!t5e[e.op]&&Le("Multiple domain scales can not be sorted using "+e.op)),e}function nZt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||T5(i.data),s.domainRef(t,i.field)});return Mt(t.add(jJt({values:r})))}function rZt(e,t,n){const r=n.map(i=>{const s=t.getData(i.data);return s||T5(i.data),s.extentRef(t,i.field)});return Mt(t.add(FJt({extents:r})))}function iZt(e,t){return e.signal||je(e)?FD(e,t):t.objectProperty(e)}function sZt(e,t){return e.signal?t.signalRef(e.signal):gt(e)?{interval:Rc(e.interval),step:Rc(e.step)}:Rc(e)}function oZt(e,t){t.interpolate=Rc(e.type||e),e.gamma!=null&&(t.interpolateGamma=Rc(e.gamma))}function i5e(e,t,n){const r=t.config.range;let i=e.range;if(i.signal)return t.signalRef(i.signal);if(mt(i)){if(r&&jt(r,i))return e=_n({},e,{range:r[i]}),i5e(e,t,n);i==="width"?i=[0,{signal:"width"}]:i==="height"?i=Ux(e.type)?[0,{signal:"height"}]:[{signal:"height"},0]:Le("Unrecognized scale range value: "+rt(i))}else if(i.scheme){n.scheme=je(i.scheme)?FD(i.scheme,t):Rc(i.scheme,t),i.extent&&(n.schemeExtent=FD(i.extent,t)),i.count&&(n.schemeCount=Rc(i.count,t));return}else if(i.step){n.rangeStep=Rc(i.step,t);return}else{if(Ux(e.type)&&!je(i))return n5e(i,e,t);je(i)||Le("Unsupported range type: "+rt(i))}return i.map(s=>(je(s)?FD:Rc)(s,t))}function aZt(e,t){const n=t.config.projection||{},r={};for(const i in e)i!=="name"&&(r[i]=tW(e[i],i,t));for(const i in n)r[i]==null&&(r[i]=tW(n[i],i,t));t.addProjection(e.name,r)}function tW(e,t,n){return je(e)?e.map(r=>tW(r,t,n)):gt(e)?e.signal?n.signalRef(e.signal):t==="fit"?e:Le("Unsupported parameter object: "+rt(e)):e}const gd="top",vT="left",bT="right",ky="bottom",s5e="center",uZt="vertical",lZt="start",cZt="middle",fZt="end",nW="index",Ure="label",dZt="offset",Wx="perc",hZt="perc2",Oc="value",ZR="guide-label",zre="guide-title",pZt="group-title",mZt="group-subtitle",B0e="symbol",jD="gradient",rW="discrete",iW="size",gZt="shape",yZt="fill",vZt="stroke",bZt="strokeWidth",_Zt="strokeDash",wZt="opacity",Vre=[iW,gZt,yZt,vZt,bZt,_Zt,wZt],eN={name:1,style:1,interactive:1},rr={value:0},Dc={value:1},A5="group",o5e="rect",Hre="rule",EZt="symbol",b_="text";function lk(e){return e.type=A5,e.interactive=e.interactive||!1,e}function hl(e,t){const n=(r,i)=>Sf(e[r],Sf(t[r],i));return n.isVertical=r=>uZt===Sf(e.direction,t.direction||(r?t.symbolDirection:t.gradientDirection)),n.gradientLength=()=>Sf(e.gradientLength,t.gradientLength||t.gradientWidth),n.gradientThickness=()=>Sf(e.gradientThickness,t.gradientThickness||t.gradientHeight),n.entryColumns=()=>Sf(e.columns,Sf(t.columns,+n.isVertical(!0))),n}function a5e(e,t){const n=t&&(t.update&&t.update[e]||t.enter&&t.enter[e]);return n&&n.signal?n:n?n.value:null}function xZt(e,t,n){const r=t.config.style[n];return r&&r[e]}function C5(e,t,n){return`item.anchor === '${lZt}' ? ${e} : item.anchor === '${fZt}' ? ${t} : ${n}`}const qre=C5(rt(vT),rt(bT),rt(s5e));function SZt(e){const t=e("tickBand");let n=e("tickOffset"),r,i;return t?t.signal?(r={signal:`(${t.signal}) === 'extent' ? 1 : 0.5`},i={signal:`(${t.signal}) === 'extent'`},gt(n)||(n={signal:`(${t.signal}) === 'extent' ? 0 : ${n}`})):t==="extent"?(r=1,i=!0,n=0):(r=.5,i=!1):(r=e("bandPosition"),i=e("tickExtra")),{extra:i,band:r,offset:n}}function u5e(e,t){return t?e?gt(e)?Object.assign({},e,{offset:u5e(e.offset,t)}):{value:e,offset:t}:t:e}function Jl(e,t){return t?(e.name=t.name,e.style=t.style||e.style,e.interactive=!!t.interactive,e.encode=yT(e.encode,t,eN)):e.interactive=!1,e}function TZt(e,t,n,r){const i=hl(e,n),s=i.isVertical(),o=i.gradientThickness(),a=i.gradientLength();let u,l,c,f,d;s?(l=[0,1],c=[0,0],f=o,d=a):(l=[0,0],c=[1,0],f=a,d=o);const h={enter:u={opacity:rr,x:rr,y:rr,width:co(f),height:co(d)},update:_n({},u,{opacity:Dc,fill:{gradient:t,start:l,stop:c}}),exit:{opacity:rr}};return zo(h,{stroke:i("gradientStrokeColor"),strokeWidth:i("gradientStrokeWidth")},{opacity:i("gradientOpacity")}),Jl({type:o5e,role:JQt,encode:h},r)}function AZt(e,t,n,r,i){const s=hl(e,n),o=s.isVertical(),a=s.gradientThickness(),u=s.gradientLength();let l,c,f,d,h="";o?(l="y",f="y2",c="x",d="width",h="1-"):(l="x",f="x2",c="y",d="height");const p={opacity:rr,fill:{scale:t,field:Oc}};p[l]={signal:h+"datum."+Wx,mult:u},p[c]=rr,p[f]={signal:h+"datum."+hZt,mult:u},p[d]=co(a);const m={enter:p,update:_n({},p,{opacity:Dc}),exit:{opacity:rr}};return zo(m,{stroke:s("gradientStrokeColor"),strokeWidth:s("gradientStrokeWidth")},{opacity:s("gradientOpacity")}),Jl({type:o5e,role:XQt,key:Oc,from:i,encode:m},r)}const CZt=`datum.${Wx}<=0?"${vT}":datum.${Wx}>=1?"${bT}":"${s5e}"`,IZt=`datum.${Wx}<=0?"${ky}":datum.${Wx}>=1?"${gd}":"${cZt}"`;function U0e(e,t,n,r){const i=hl(e,t),s=i.isVertical(),o=co(i.gradientThickness()),a=i.gradientLength();let u=i("labelOverlap"),l,c,f,d,h="";const p={enter:l={opacity:rr},update:c={opacity:Dc,text:{field:Ure}},exit:{opacity:rr}};return zo(p,{fill:i("labelColor"),fillOpacity:i("labelOpacity"),font:i("labelFont"),fontSize:i("labelFontSize"),fontStyle:i("labelFontStyle"),fontWeight:i("labelFontWeight"),limit:Sf(e.labelLimit,t.gradientLabelLimit)}),s?(l.align={value:"left"},l.baseline=c.baseline={signal:IZt},f="y",d="x",h="1-"):(l.align=c.align={signal:CZt},l.baseline={value:"top"},f="x",d="y"),l[f]=c[f]={signal:h+"datum."+Wx,mult:a},l[d]=c[d]=o,o.offset=Sf(e.labelOffset,t.gradientLabelOffset)||0,u=u?{separation:i("labelSeparation"),method:u,order:"datum."+nW}:void 0,Jl({type:b_,role:V4e,style:ZR,key:Oc,from:r,encode:p,overlap:u},n)}function kZt(e,t,n,r,i){const s=hl(e,t),o=n.entries,a=!!(o&&o.interactive),u=o?o.name:void 0,l=s("clipHeight"),c=s("symbolOffset"),f={data:"value"},d=`(${i}) ? datum.${dZt} : datum.${iW}`,h=l?co(l):{field:iW},p=`datum.${nW}`,m=`max(1, ${i})`;let g,y,v,b,w;h.mult=.5,g={enter:y={opacity:rr,x:{signal:d,mult:.5,offset:c},y:h},update:v={opacity:Dc,x:y.x,y:y.y},exit:{opacity:rr}};let E=null,T=null;e.fill||(E=t.symbolBaseFillColor,T=t.symbolBaseStrokeColor),zo(g,{fill:s("symbolFillColor",E),shape:s("symbolType"),size:s("symbolSize"),stroke:s("symbolStrokeColor",T),strokeDash:s("symbolDash"),strokeDashOffset:s("symbolDashOffset"),strokeWidth:s("symbolStrokeWidth")},{opacity:s("symbolOpacity")}),Vre.forEach(k=>{e[k]&&(v[k]=y[k]={scale:e[k],field:Oc})});const S=Jl({type:EZt,role:ZQt,key:Oc,from:f,clip:l?!0:void 0,encode:g},n.symbols),A=co(c);A.offset=s("labelOffset"),g={enter:y={opacity:rr,x:{signal:d,offset:A},y:h},update:v={opacity:Dc,text:{field:Ure},x:y.x,y:y.y},exit:{opacity:rr}},zo(g,{align:s("labelAlign"),baseline:s("labelBaseline"),fill:s("labelColor"),fillOpacity:s("labelOpacity"),font:s("labelFont"),fontSize:s("labelFontSize"),fontStyle:s("labelFontStyle"),fontWeight:s("labelFontWeight"),limit:s("labelLimit")});const C=Jl({type:b_,role:V4e,style:ZR,key:Oc,from:f,encode:g},n.labels);return g={enter:{noBound:{value:!l},width:rr,height:l?co(l):rr,opacity:rr},exit:{opacity:rr},update:v={opacity:Dc,row:{signal:null},column:{signal:null}}},s.isVertical(!0)?(b=`ceil(item.mark.items.length / ${m})`,v.row.signal=`${p}%${b}`,v.column.signal=`floor(${p} / ${b})`,w={field:["row",p]}):(v.row.signal=`floor(${p} / ${m})`,v.column.signal=`${p} % ${m}`,w={field:p}),v.column.signal=`(${i})?${v.column.signal}:${p}`,r={facet:{data:r,name:"value",groupby:nW}},lk({role:Fre,from:r,encode:yT(g,o,eN),marks:[S,C],name:u,interactive:a,sort:w})}function RZt(e,t){const n=hl(e,t);return{align:n("gridAlign"),columns:n.entryColumns(),center:{row:!0,column:!1},padding:{row:n("rowPadding"),column:n("columnPadding")}}}const Wre='item.orient === "left"',Gre='item.orient === "right"',I5=`(${Wre} || ${Gre})`,NZt=`datum.vgrad && ${I5}`,PZt=C5('"top"','"bottom"','"middle"'),OZt=C5('"right"','"left"','"center"'),DZt=`datum.vgrad && ${Gre} ? (${OZt}) : (${I5} && !(datum.vgrad && ${Wre})) ? "left" : ${qre}`,$Zt=`item._anchor || (${I5} ? "middle" : "start")`,MZt=`${NZt} ? (${Wre} ? -90 : 90) : 0`,LZt=`${I5} ? (datum.vgrad ? (${Gre} ? "bottom" : "top") : ${PZt}) : "top"`;function FZt(e,t,n,r){const i=hl(e,t),s={enter:{opacity:rr},update:{opacity:Dc,x:{field:{group:"padding"}},y:{field:{group:"padding"}}},exit:{opacity:rr}};return zo(s,{orient:i("titleOrient"),_anchor:i("titleAnchor"),anchor:{signal:$Zt},angle:{signal:MZt},align:{signal:DZt},baseline:{signal:LZt},text:e.title,fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),baseline:i("titleBaseline")}),Jl({type:b_,role:eJt,style:zre,from:r,encode:s},n)}function jZt(e,t){let n;return gt(e)&&(e.signal?n=e.signal:e.path?n="pathShape("+z0e(e.path)+")":e.sphere&&(n="geoShape("+z0e(e.sphere)+', {type: "Sphere"})')),n?t.signalRef(n):!!e}function z0e(e){return gt(e)&&e.signal?e.signal:rt(e)}function l5e(e){const t=e.role||"";return t.startsWith("axis")||t.startsWith("legend")||t.startsWith("title")?t:e.type===A5?Fre:t||Mre}function BZt(e){return{marktype:e.type,name:e.name||void 0,role:e.role||l5e(e),zindex:+e.zindex||void 0,aria:e.aria,description:e.description}}function UZt(e,t){return e&&e.signal?t.signalRef(e.signal):e!==!1}function Yre(e,t){const n=Y3e(e.type);n||Le("Unrecognized transform type: "+rt(e.type));const r=x5(n.type.toLowerCase(),null,c5e(n,e,t));return e.signal&&t.addSignal(e.signal,t.proxy(r)),r.metadata=n.metadata||{},r}function c5e(e,t,n){const r={},i=e.params.length;for(let s=0;s<i;++s){const o=e.params[s];r[o.name]=zZt(o,t,n)}return r}function zZt(e,t,n){const r=e.type,i=t[e.name];if(r==="index")return VZt(e,t,n);if(i===void 0){e.required&&Le("Missing required "+rt(t.type)+" parameter: "+rt(e.name));return}else{if(r==="param")return HZt(e,t,n);if(r==="projection")return n.projectionRef(t[e.name])}return e.array&&!Vs(i)?i.map(s=>V0e(e,s,n)):V0e(e,i,n)}function V0e(e,t,n){const r=e.type;if(Vs(t))return q0e(r)?Le("Expression references can not be signals."):hU(r)?n.fieldRef(t):W0e(r)?n.compareRef(t):n.signalRef(t.signal);{const i=e.expr||hU(r);return i&&qZt(t)?n.exprRef(t.expr,t.as):i&&WZt(t)?ak(t.field,t.as):q0e(r)?Vh(t,n):GZt(r)?Mt(n.getData(t).values):hU(r)?ak(t):W0e(r)?n.compareRef(t):t}}function VZt(e,t,n){return mt(t.from)||Le('Lookup "from" parameter must be a string literal.'),n.getData(t.from).lookupRef(n,t.key)}function HZt(e,t,n){const r=t[e.name];return e.array?(je(r)||Le("Expected an array of sub-parameters. Instead: "+rt(r)),r.map(i=>H0e(e,i,n))):H0e(e,r,n)}function H0e(e,t,n){const r=e.params.length;let i;for(let o=0;o<r;++o){i=e.params[o];for(const a in i.key)if(i.key[a]!==t[a]){i=null;break}if(i)break}i||Le("Unsupported parameter: "+rt(t));const s=_n(c5e(i,t,n),i.key);return Mt(n.add(UJt(s)))}const qZt=e=>e&&e.expr,WZt=e=>e&&e.field,GZt=e=>e==="data",q0e=e=>e==="expr",hU=e=>e==="field",W0e=e=>e==="compare";function YZt(e,t,n){let r,i,s,o,a;return e?(r=e.facet)&&(t||Le("Only group marks can be faceted."),r.field!=null?o=a=BD(r,n):(e.data?a=Mt(n.getData(e.data).aggregate):(s=Yre(_n({type:"aggregate",groupby:pt(r.groupby)},r.aggregate),n),s.params.key=n.keyRef(r.groupby),s.params.pulse=BD(r,n),o=a=Mt(n.add(s))),i=n.keyRef(r.groupby,!0))):o=Mt(n.add(md(null,[{}]))),o||(o=BD(e,n)),{key:i,pulse:o,parent:a}}function BD(e,t){return e.$ref?e:e.data&&e.data.$ref?e.data:Mt(t.getData(e.data).output)}function kb(e,t,n,r,i){this.scope=e,this.input=t,this.output=n,this.values=r,this.aggregate=i,this.index={}}kb.fromEntries=function(e,t){const n=t.length,r=t[n-1],i=t[n-2];let s=t[0],o=null,a=1;for(s&&s.type==="load"&&(s=t[1]),e.add(t[0]);a<n;++a)t[a].params.pulse=Mt(t[a-1]),e.add(t[a]),t[a].type==="aggregate"&&(o=t[a]);return new kb(e,s,i,r,o)};function f5e(e){return mt(e)?e:null}function G0e(e,t,n){const r=S5(n.op,n.field);let i;if(t.ops){for(let s=0,o=t.as.length;s<o;++s)if(t.as[s]===r)return}else t.ops=["count"],t.fields=[null],t.as=["count"];n.op&&(t.ops.push((i=n.op.signal)?e.signalRef(i):n.op),t.fields.push(e.fieldRef(n.field)),t.as.push(r))}function EA(e,t,n,r,i,s,o){const a=t[n]||(t[n]={}),u=yJt(s);let l=f5e(i),c,f;if(l!=null&&(e=t.scope,l=l+(u?"|"+u:""),c=a[l]),!c){const d=s?{field:Zq,pulse:t.countsRef(e,i,s)}:{field:e.fieldRef(i),pulse:Mt(t.output)};u&&(d.sort=e.sortRef(s)),f=e.add(x5(r,void 0,d)),o&&(t.index[i]=f),c=Mt(f),l!=null&&(a[l]=c)}return c}kb.prototype={countsRef(e,t,n){const r=this,i=r.counts||(r.counts={}),s=f5e(t);let o,a,u;return s!=null&&(e=r.scope,o=i[s]),o?n&&n.field&&G0e(e,o.agg.params,n):(u={groupby:e.fieldRef(t,"key"),pulse:Mt(r.output)},n&&n.field&&G0e(e,u,n),a=e.add(K4e(u)),o=e.add(md({pulse:Mt(a)})),o={agg:a,ref:Mt(o)},s!=null&&(i[s]=o)),o.ref},tuplesRef(){return Mt(this.values)},extentRef(e,t){return EA(e,this,"extent","extent",t,!1)},domainRef(e,t){return EA(e,this,"domain","values",t,!1)},valuesRef(e,t,n){return EA(e,this,"vals","values",t,n||!0)},lookupRef(e,t){return EA(e,this,"lookup","tupleindex",t,!1)},indataRef(e,t){return EA(e,this,"indata","tupleindex",t,!0,!0)}};function KZt(e,t,n){const r=e.from.facet,i=r.name,s=BD(r,t);let o;r.name||Le("Facet must have a name: "+rt(r)),r.data||Le("Facet must reference a data set: "+rt(r)),r.field?o=t.add(J4e({field:t.fieldRef(r.field),pulse:s})):r.groupby?o=t.add(PJt({key:t.keyRef(r.groupby),group:Mt(t.proxy(n.parent)),pulse:s})):Le("Facet must specify groupby or field: "+rt(r));const a=t.fork(),u=a.add(md()),l=a.add(v_({pulse:Mt(u)}));a.addData(i,new kb(a,u,u,l)),a.addSignal("parent",null),o.params.subflow={$subflow:a.parse(e).toRuntime()}}function XZt(e,t,n){const r=t.add(J4e({pulse:n.pulse})),i=t.fork();i.add(v_()),i.addSignal("parent",null),r.params.subflow={$subflow:i.parse(e).toRuntime()}}function d5e(e,t,n){const r=e.remove,i=e.insert,s=e.toggle,o=e.modify,a=e.values,u=t.add(yL()),l="if("+e.trigger+',modify("'+n+'",'+[i,r,s,o,a].map(f=>f??"null").join(",")+"),0)",c=Vh(l,t);u.update=c.$expr,u.params=c.$params}function k5(e,t){const n=l5e(e),r=e.type===A5,i=e.from&&e.from.facet,s=e.overlap;let o=e.layout||n===Fre||n===Lre,a,u,l,c,f,d,h;const p=n===Mre||o||i,m=YZt(e.from,r,t);u=t.add(RJt({key:m.key||(e.key?ak(e.key):void 0),pulse:m.pulse,clean:!r}));const g=Mt(u);u=l=t.add(md({pulse:g})),u=t.add(LJt({markdef:BZt(e),interactive:UZt(e.interactive,t),clip:jZt(e.clip,t),context:{$context:!0},groups:t.lookup(),parent:t.signals.parent?t.signalRef("parent"):null,index:t.markpath(),pulse:Mt(u)}));const y=Mt(u);u=c=t.add(Q4e(G4e(e.encode,e.type,n,e.style,t,{mod:!1,pulse:y}))),u.params.parent=t.encode(),e.transform&&e.transform.forEach(T=>{const S=Yre(T,t),A=S.metadata;(A.generates||A.changes)&&Le("Mark transforms should not generate new data."),A.nomod||(c.params.mod=!0),S.params.pulse=Mt(u),t.add(u=S)}),e.sort&&(u=t.add(WJt({sort:t.compareRef(e.sort),pulse:Mt(u)})));const v=Mt(u);(i||o)&&(o=t.add(e5e({layout:t.objectProperty(e.layout),legends:t.legends,mark:y,pulse:v})),d=Mt(o));const b=t.add(X4e({mark:y,pulse:d||v}));h=Mt(b),r&&(p&&(a=t.operators,a.pop(),o&&a.pop()),t.pushState(v,d||h,g),i?KZt(e,t,m):p?XZt(e,t,m):t.parse(e),t.popState(),p&&(o&&a.push(o),a.push(b))),s&&(h=QZt(s,h,t));const w=t.add(Z4e({pulse:h})),E=t.add(v_({pulse:Mt(w)},void 0,t.parent()));e.name!=null&&(f=e.name,t.addData(f,new kb(t,l,w,E)),e.on&&e.on.forEach(T=>{(T.insert||T.remove||T.toggle)&&Le("Marks only support modify triggers."),d5e(T,t,f)}))}function QZt(e,t,n){const r=e.method,i=e.bound,s=e.separation,o={separation:Vs(s)?n.signalRef(s.signal):s,method:Vs(r)?n.signalRef(r.signal):r,pulse:t};if(e.order&&(o.sort=n.compareRef({field:e.order})),i){const a=i.tolerance;o.boundTolerance=Vs(a)?n.signalRef(a.signal):+a,o.boundScale=n.scaleRef(i.scale),o.boundOrient=i.orient}return Mt(n.add(BJt(o)))}function JZt(e,t){const n=t.config.legend,r=e.encode||{},i=hl(e,n),s=r.legend||{},o=s.name||void 0,a=s.interactive,u=s.style,l={};let c=0,f,d,h;Vre.forEach(b=>e[b]?(l[b]=e[b],c=c||e[b]):0),c||Le("Missing valid scale for legend.");const p=ZZt(e,t.scaleType(c)),m={title:e.title!=null,scales:l,type:p,vgrad:p!=="symbol"&&i.isVertical()},g=Mt(t.add(md(null,[m]))),y={enter:{x:{value:0},y:{value:0}}},v=Mt(t.add($Jt(d={type:p,scale:t.scaleRef(c),count:t.objectProperty(i("tickCount")),limit:t.property(i("symbolLimit")),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)})));return p===jD?(h=[TZt(e,c,n,r.gradient),U0e(e,n,r.labels,v)],d.count=d.count||t.signalRef(`max(2,2*floor((${G1(i.gradientLength())})/100))`)):p===rW?h=[AZt(e,c,n,r.gradient,v),U0e(e,n,r.labels,v)]:(f=RZt(e,n),h=[kZt(e,n,r,v,G1(f.columns))],d.size=nen(e,t,h[0].marks)),h=[lk({role:QQt,from:g,encode:y,marks:h,layout:f,interactive:a})],m.title&&h.push(FZt(e,n,r.title,g)),k5(lk({role:KQt,from:g,encode:yT(ten(i,e,n),s,eN),marks:h,aria:i("aria"),description:i("description"),zindex:i("zindex"),name:o,interactive:a,style:u}),t)}function ZZt(e,t){let n=e.type||B0e;return!e.type&&een(e)===1&&(e.fill||e.stroke)&&(n=sne(t)?jD:vq(t)?rW:B0e),n!==jD?n:vq(t)?rW:jD}function een(e){return Vre.reduce((t,n)=>t+(e[n]?1:0),0)}function ten(e,t,n){const r={enter:{},update:{}};return zo(r,{orient:e("orient"),offset:e("offset"),padding:e("padding"),titlePadding:e("titlePadding"),cornerRadius:e("cornerRadius"),fill:e("fillColor"),stroke:e("strokeColor"),strokeWidth:n.strokeWidth,strokeDash:n.strokeDash,x:e("legendX"),y:e("legendY"),format:t.format,formatType:t.formatType}),r}function nen(e,t,n){const r=G1(Y0e("size",e,n)),i=G1(Y0e("strokeWidth",e,n)),s=G1(ren(n[1].encode,t,ZR));return Vh(`max(ceil(sqrt(${r})+${i}),${s})`,t)}function Y0e(e,t,n){return t[e]?`scale("${t[e]}",datum)`:a5e(e,n[0].encode)}function ren(e,t,n){return a5e("fontSize",e)||xZt("fontSize",t,n)}const ien=`item.orient==="${vT}"?-90:item.orient==="${bT}"?90:0`;function sen(e,t){e=mt(e)?{text:e}:e;const n=hl(e,t.config.title),r=e.encode||{},i=r.group||{},s=i.name||void 0,o=i.interactive,a=i.style,u=[],l={},c=Mt(t.add(md(null,[l])));return u.push(uen(e,n,oen(e),c)),e.subtitle&&u.push(len(e,n,r.subtitle,c)),k5(lk({role:tJt,from:c,encode:aen(n,i),marks:u,aria:n("aria"),description:n("description"),zindex:n("zindex"),name:s,interactive:o,style:a}),t)}function oen(e){const t=e.encode;return t&&t.title||_n({name:e.name,interactive:e.interactive,style:e.style},t)}function aen(e,t){const n={enter:{},update:{}};return zo(n,{orient:e("orient"),anchor:e("anchor"),align:{signal:qre},angle:{signal:ien},limit:e("limit"),frame:e("frame"),offset:e("offset")||0,padding:e("subtitlePadding")}),yT(n,t,eN)}function uen(e,t,n,r){const i={value:0},s=e.text,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("color"),font:t("font"),fontSize:t("fontSize"),fontStyle:t("fontStyle"),fontWeight:t("fontWeight"),lineHeight:t("lineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Jl({type:b_,role:nJt,style:pZt,from:r,encode:o},n)}function len(e,t,n,r){const i={value:0},s=e.subtitle,o={enter:{opacity:i},update:{opacity:{value:1}},exit:{opacity:i}};return zo(o,{text:s,align:{signal:"item.mark.group.align"},angle:{signal:"item.mark.group.angle"},limit:{signal:"item.mark.group.limit"},baseline:"top",dx:t("dx"),dy:t("dy"),fill:t("subtitleColor"),font:t("subtitleFont"),fontSize:t("subtitleFontSize"),fontStyle:t("subtitleFontStyle"),fontWeight:t("subtitleFontWeight"),lineHeight:t("subtitleLineHeight")},{align:t("align"),angle:t("angle"),baseline:t("baseline")}),Jl({type:b_,role:rJt,style:mZt,from:r,encode:o},n)}function cen(e,t){const n=[];e.transform&&e.transform.forEach(r=>{n.push(Yre(r,t))}),e.on&&e.on.forEach(r=>{d5e(r,t,e.name)}),t.addDataPipeline(e.name,fen(e,t,n))}function fen(e,t,n){const r=[];let i=null,s=!1,o=!1,a,u,l,c,f;for(e.values?Vs(e.values)||LD(e.format)?(r.push(K0e(t,e)),r.push(i=kv())):r.push(i=kv({$ingest:e.values,$format:e.format})):e.url?LD(e.url)||LD(e.format)?(r.push(K0e(t,e)),r.push(i=kv())):r.push(i=kv({$request:e.url,$format:e.format})):e.source&&(i=a=pt(e.source).map(d=>Mt(t.getData(d).output)),r.push(null)),u=0,l=n.length;u<l;++u)c=n[u],f=c.metadata,!i&&!f.source&&r.push(i=kv()),r.push(c),f.generates&&(o=!0),f.modifies&&!o&&(s=!0),f.source?i=c:f.changes&&(i=null);return a&&(l=a.length-1,r[0]=HJt({derive:s,pulse:l?a:a[0]}),(s||l)&&r.splice(1,0,kv())),i||r.push(kv()),r.push(v_({})),r}function kv(e){const t=md({},e);return t.metadata={source:!0},t}function K0e(e,t){return MJt({url:t.url?e.property(t.url):void 0,async:t.async?e.property(t.async):void 0,values:t.values?e.property(t.values):void 0,format:e.objectProperty(t.format)})}const h5e=e=>e===ky||e===gd,R5=(e,t,n)=>Vs(e)?men(e.signal,t,n):e===vT||e===gd?t:n,fo=(e,t,n)=>Vs(e)?hen(e.signal,t,n):h5e(e)?t:n,Yf=(e,t,n)=>Vs(e)?pen(e.signal,t,n):h5e(e)?n:t,p5e=(e,t,n)=>Vs(e)?gen(e.signal,t,n):e===gd?{value:t}:{value:n},den=(e,t,n)=>Vs(e)?yen(e.signal,t,n):e===bT?{value:t}:{value:n},hen=(e,t,n)=>m5e(`${e} === '${gd}' || ${e} === '${ky}'`,t,n),pen=(e,t,n)=>m5e(`${e} !== '${gd}' && ${e} !== '${ky}'`,t,n),men=(e,t,n)=>Kre(`${e} === '${vT}' || ${e} === '${gd}'`,t,n),gen=(e,t,n)=>Kre(`${e} === '${gd}'`,t,n),yen=(e,t,n)=>Kre(`${e} === '${bT}'`,t,n),m5e=(e,t,n)=>(t=t!=null?co(t):t,n=n!=null?co(n):n,X0e(t)&&X0e(n)?(t=t?t.signal||rt(t.value):null,n=n?n.signal||rt(n.value):null,{signal:`${e} ? (${t}) : (${n})`}):[_n({test:e},t)].concat(n||[])),X0e=e=>e==null||Object.keys(e).length===1,Kre=(e,t,n)=>({signal:`${e} ? (${eE(t)}) : (${eE(n)})`}),ven=(e,t,n,r,i)=>({signal:(r!=null?`${e} === '${vT}' ? (${eE(r)}) : `:"")+(n!=null?`${e} === '${ky}' ? (${eE(n)}) : `:"")+(i!=null?`${e} === '${bT}' ? (${eE(i)}) : `:"")+(t!=null?`${e} === '${gd}' ? (${eE(t)}) : `:"")+"(null)"}),eE=e=>Vs(e)?e.signal:e==null?null:rt(e),ben=(e,t)=>t===0?0:Vs(e)?{signal:`(${e.signal}) * ${t}`}:{value:e*t},$E=(e,t)=>{const n=e.signal;return n&&n.endsWith("(null)")?{signal:n.slice(0,-6)+t.signal}:e};function rw(e,t,n,r){let i;if(t&&jt(t,e))return t[e];if(jt(n,e))return n[e];if(e.startsWith("title")){switch(e){case"titleColor":i="fill";break;case"titleFont":case"titleFontSize":case"titleFontWeight":i=e[5].toLowerCase()+e.slice(6)}return r[zre][i]}else if(e.startsWith("label")){switch(e){case"labelColor":i="fill";break;case"labelFont":case"labelFontSize":i=e[5].toLowerCase()+e.slice(6)}return r[ZR][i]}return null}function Q0e(e){const t={};for(const n of e)if(n)for(const r in n)t[r]=1;return Object.keys(t)}function _en(e,t){var n=t.config,r=n.style,i=n.axis,s=t.scaleType(e.scale)==="band"&&n.axisBand,o=e.orient,a,u,l;if(Vs(o)){const f=Q0e([n.axisX,n.axisY]),d=Q0e([n.axisTop,n.axisBottom,n.axisLeft,n.axisRight]);a={};for(l of f)a[l]=fo(o,rw(l,n.axisX,i,r),rw(l,n.axisY,i,r));u={};for(l of d)u[l]=ven(o.signal,rw(l,n.axisTop,i,r),rw(l,n.axisBottom,i,r),rw(l,n.axisLeft,i,r),rw(l,n.axisRight,i,r))}else a=o===gd||o===ky?n.axisX:n.axisY,u=n["axis"+o[0].toUpperCase()+o.slice(1)];return a||u||s?_n({},i,a,u,s):i}function wen(e,t,n,r){const i=hl(e,t),s=e.orient;let o,a;const u={enter:o={opacity:rr},update:a={opacity:Dc},exit:{opacity:rr}};zo(u,{stroke:i("domainColor"),strokeCap:i("domainCap"),strokeDash:i("domainDash"),strokeDashOffset:i("domainDashOffset"),strokeWidth:i("domainWidth"),strokeOpacity:i("domainOpacity")});const l=J0e(e,0),c=J0e(e,1);return o.x=a.x=fo(s,l,rr),o.x2=a.x2=fo(s,c),o.y=a.y=Yf(s,l,rr),o.y2=a.y2=Yf(s,c),Jl({type:Hre,role:HQt,from:r,encode:u},n)}function J0e(e,t){return{scale:e.scale,range:t}}function Een(e,t,n,r,i){const s=hl(e,t),o=e.orient,a=e.gridScale,u=R5(o,1,-1),l=xen(e.offset,u);let c,f,d;const h={enter:c={opacity:rr},update:d={opacity:Dc},exit:f={opacity:rr}};zo(h,{stroke:s("gridColor"),strokeCap:s("gridCap"),strokeDash:s("gridDash"),strokeDashOffset:s("gridDashOffset"),strokeOpacity:s("gridOpacity"),strokeWidth:s("gridWidth")});const p={scale:e.scale,field:Oc,band:i.band,extra:i.extra,offset:i.offset,round:s("tickRound")},m=fo(o,{signal:"height"},{signal:"width"}),g=a?{scale:a,range:0,mult:u,offset:l}:{value:0,offset:l},y=a?{scale:a,range:1,mult:u,offset:l}:_n(m,{mult:u,offset:l});return c.x=d.x=fo(o,p,g),c.y=d.y=Yf(o,p,g),c.x2=d.x2=Yf(o,y),c.y2=d.y2=fo(o,y),f.x=fo(o,p),f.y=Yf(o,p),Jl({type:Hre,role:qQt,key:Oc,from:r,encode:h},n)}function xen(e,t){if(t!==1)if(!gt(e))e=Vs(t)?{signal:`(${t.signal}) * (${e||0})`}:t*(e||0);else{let n=e=_n({},e);for(;n.mult!=null;)if(gt(n.mult))n=n.mult=_n({},n.mult);else return n.mult=Vs(t)?{signal:`(${n.mult}) * (${t.signal})`}:n.mult*t,e;n.mult=t}return e}function Sen(e,t,n,r,i,s){const o=hl(e,t),a=e.orient,u=R5(a,-1,1);let l,c,f;const d={enter:l={opacity:rr},update:f={opacity:Dc},exit:c={opacity:rr}};zo(d,{stroke:o("tickColor"),strokeCap:o("tickCap"),strokeDash:o("tickDash"),strokeDashOffset:o("tickDashOffset"),strokeOpacity:o("tickOpacity"),strokeWidth:o("tickWidth")});const h=co(i);h.mult=u;const p={scale:e.scale,field:Oc,band:s.band,extra:s.extra,offset:s.offset,round:o("tickRound")};return f.y=l.y=fo(a,rr,p),f.y2=l.y2=fo(a,h),c.x=fo(a,p),f.x=l.x=Yf(a,rr,p),f.x2=l.x2=Yf(a,h),c.y=Yf(a,p),Jl({type:Hre,role:GQt,key:Oc,from:r,encode:d},n)}function pU(e,t,n,r,i){return{signal:'flush(range("'+e+'"), scale("'+e+'", datum.value), '+t+","+n+","+r+","+i+")"}}function Ten(e,t,n,r,i,s){const o=hl(e,t),a=e.orient,u=e.scale,l=R5(a,-1,1),c=G1(o("labelFlush")),f=G1(o("labelFlushOffset")),d=o("labelAlign"),h=o("labelBaseline");let p=c===0||!!c,m;const g=co(i);g.mult=l,g.offset=co(o("labelPadding")||0),g.offset.mult=l;const y={scale:u,field:Oc,band:.5,offset:u5e(s.offset,o("labelOffset"))},v=fo(a,p?pU(u,c,'"left"','"right"','"center"'):{value:"center"},den(a,"left","right")),b=fo(a,p5e(a,"bottom","top"),p?pU(u,c,'"top"','"bottom"','"middle"'):{value:"middle"}),w=pU(u,c,`-(${f})`,f,0);p=p&&f;const E={opacity:rr,x:fo(a,y,g),y:Yf(a,y,g)},T={enter:E,update:m={opacity:Dc,text:{field:Ure},x:E.x,y:E.y,align:v,baseline:b},exit:{opacity:rr,x:E.x,y:E.y}};zo(T,{dx:!d&&p?fo(a,w):null,dy:!h&&p?Yf(a,w):null}),zo(T,{angle:o("labelAngle"),fill:o("labelColor"),fillOpacity:o("labelOpacity"),font:o("labelFont"),fontSize:o("labelFontSize"),fontWeight:o("labelFontWeight"),fontStyle:o("labelFontStyle"),limit:o("labelLimit"),lineHeight:o("labelLineHeight")},{align:d,baseline:h});const S=o("labelBound");let A=o("labelOverlap");return A=A||S?{separation:o("labelSeparation"),method:A,order:"datum.index",bound:S?{scale:u,orient:a,tolerance:S}:null}:void 0,m.align!==v&&(m.align=$E(m.align,v)),m.baseline!==b&&(m.baseline=$E(m.baseline,b)),Jl({type:b_,role:WQt,style:ZR,key:Oc,from:r,encode:T,overlap:A},n)}function Aen(e,t,n,r){const i=hl(e,t),s=e.orient,o=R5(s,-1,1);let a,u;const l={enter:a={opacity:rr,anchor:co(i("titleAnchor",null)),align:{signal:qre}},update:u=_n({},a,{opacity:Dc,text:co(e.title)}),exit:{opacity:rr}},c={signal:`lerp(range("${e.scale}"), ${C5(0,1,.5)})`};return u.x=fo(s,c),u.y=Yf(s,c),a.angle=fo(s,rr,ben(o,90)),a.baseline=fo(s,p5e(s,ky,gd),{value:ky}),u.angle=a.angle,u.baseline=a.baseline,zo(l,{fill:i("titleColor"),fillOpacity:i("titleOpacity"),font:i("titleFont"),fontSize:i("titleFontSize"),fontStyle:i("titleFontStyle"),fontWeight:i("titleFontWeight"),limit:i("titleLimit"),lineHeight:i("titleLineHeight")},{align:i("titleAlign"),angle:i("titleAngle"),baseline:i("titleBaseline")}),Cen(i,s,l,n),l.update.align=$E(l.update.align,a.align),l.update.angle=$E(l.update.angle,a.angle),l.update.baseline=$E(l.update.baseline,a.baseline),Jl({type:b_,role:YQt,style:zre,from:r,encode:l},n)}function Cen(e,t,n,r){const i=(a,u)=>a!=null?(n.update[u]=$E(co(a),n.update[u]),!1):!Iw(u,r),s=i(e("titleX"),"x"),o=i(e("titleY"),"y");n.enter.auto=o===s?co(o):fo(t,co(o),co(s))}function Ien(e,t){const n=_en(e,t),r=e.encode||{},i=r.axis||{},s=i.name||void 0,o=i.interactive,a=i.style,u=hl(e,n),l=SZt(u),c={scale:e.scale,ticks:!!u("ticks"),labels:!!u("labels"),grid:!!u("grid"),domain:!!u("domain"),title:e.title!=null},f=Mt(t.add(md({},[c]))),d=Mt(t.add(kJt({scale:t.scaleRef(e.scale),extra:t.property(l.extra),count:t.objectProperty(e.tickCount),values:t.objectProperty(e.values),minstep:t.property(e.tickMinStep),formatType:t.property(e.formatType),formatSpecifier:t.property(e.format)}))),h=[];let p;return c.grid&&h.push(Een(e,n,r.grid,d,l)),c.ticks&&(p=u("tickSize"),h.push(Sen(e,n,r.ticks,d,p,l))),c.labels&&(p=c.ticks?p:0,h.push(Ten(e,n,r.labels,d,p,l))),c.domain&&h.push(wen(e,n,r.domain,f)),c.title&&h.push(Aen(e,n,r.title,f)),k5(lk({role:VQt,from:f,encode:yT(ken(u,e),i,eN),marks:h,aria:u("aria"),description:u("description"),zindex:u("zindex"),name:s,interactive:o,style:a}),t)}function ken(e,t){const n={enter:{},update:{}};return zo(n,{orient:e("orient"),offset:e("offset")||0,position:Sf(t.position,0),titlePadding:e("titlePadding"),minExtent:e("minExtent"),maxExtent:e("maxExtent"),range:{signal:`abs(span(range("${t.scale}")))`},translate:e("translate"),format:t.format,formatType:t.formatType}),n}function g5e(e,t,n){const r=pt(e.signals),i=pt(e.scales);return n||r.forEach(s=>Y4e(s,t)),pt(e.projections).forEach(s=>aZt(s,t)),i.forEach(s=>KJt(s,t)),pt(e.data).forEach(s=>cen(s,t)),i.forEach(s=>XJt(s,t)),(n||r).forEach(s=>IJt(s,t)),pt(e.axes).forEach(s=>Ien(s,t)),pt(e.marks).forEach(s=>k5(s,t)),pt(e.legends).forEach(s=>JZt(s,t)),e.title&&sen(e.title,t),t.parseLambdas(),t}const Ren=e=>yT({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},e);function Nen(e,t){const n=t.config,r=Mt(t.root=t.add(yL())),i=Pen(e,n);i.forEach(l=>Y4e(l,t)),t.description=e.description||n.description,t.eventConfig=n.events,t.legends=t.objectProperty(n.legend&&n.legend.layout),t.locale=n.locale;const s=t.add(md()),o=t.add(Q4e(G4e(Ren(e.encode),A5,Lre,e.style,t,{pulse:Mt(s)}))),a=t.add(e5e({layout:t.objectProperty(e.layout),legends:t.legends,autosize:t.signalRef("autosize"),mark:r,pulse:Mt(o)}));t.operators.pop(),t.pushState(Mt(o),Mt(a),null),g5e(e,t,i),t.operators.push(a);let u=t.add(X4e({mark:r,pulse:Mt(a)}));return u=t.add(Z4e({pulse:Mt(u)})),u=t.add(v_({pulse:Mt(u)})),t.addData("root",new kb(t,s,s,u)),t}function xA(e,t){return t&&t.signal?{name:e,update:t.signal}:{name:e,value:t}}function Pen(e,t){const n=o=>Sf(e[o],t[o]),r=[xA("background",n("background")),xA("autosize",BQt(n("autosize"))),xA("padding",zQt(n("padding"))),xA("width",n("width")||0),xA("height",n("height")||0)],i=r.reduce((o,a)=>(o[a.name]=a,o),{}),s={};return pt(e.signals).forEach(o=>{jt(i,o.name)?o=_n(i[o.name],o):r.push(o),s[o.name]=o}),pt(t.signals).forEach(o=>{!jt(s,o.name)&&!jt(i,o.name)&&r.push(o)}),r}function y5e(e,t){this.config=e||{},this.options=t||{},this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.eventConfig=null,this.locale=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function Z0e(e){this.config=e.config,this.options=e.options,this.legends=e.legends,this.field=Object.create(e.field),this.signals=Object.create(e.signals),this.lambdas=Object.create(e.lambdas),this.scales=Object.create(e.scales),this.events=Object.create(e.events),this.data=Object.create(e.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++e._nextsub[0],this._nextsub=e._nextsub,this._parent=e._parent.slice(),this._encode=e._encode.slice(),this._lookup=e._lookup.slice(),this._markpath=e._markpath}y5e.prototype=Z0e.prototype={parse(e){return g5e(e,this)},fork(){return new Z0e(this)},isSubscope(){return this._subid>0},toRuntime(){return this.finish(),{description:this.description,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings,eventConfig:this.eventConfig,locale:this.locale}},id(){return(this._subid?this._subid+":":0)+this._id++},add(e){return this.operators.push(e),e.id=this.id(),e.refs&&(e.refs.forEach(t=>{t.$ref=e.id}),e.refs=null),e},proxy(e){const t=e instanceof Jq?Mt(e):e;return this.add(VJt({value:t}))},addStream(e){return this.streams.push(e),e.id=this.id(),e},addUpdate(e){return this.updates.push(e),e},finish(){let e,t;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;function n(r,i,s){let o,a;r&&(o=r.data||(r.data={}),a=o[i]||(o[i]=[]),a.push(s))}for(e in this.data){t=this.data[e],n(t.input,e,"input"),n(t.output,e,"output"),n(t.values,e,"values");for(const r in t.index)n(t.index[r],e,"index:"+r)}return this},pushState(e,t,n){this._encode.push(Mt(this.add(v_({pulse:e})))),this._parent.push(t),this._lookup.push(n?Mt(this.proxy(n)):null),this._markpath.push(-1)},popState(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},parent(){return Zn(this._parent)},encode(){return Zn(this._encode)},lookup(){return Zn(this._lookup)},markpath(){const e=this._markpath;return++e[e.length-1]},fieldRef(e,t){if(mt(e))return ak(e,t);e.signal||Le("Unsupported field reference: "+rt(e));const n=e.signal;let r=this.field[n];if(!r){const i={name:this.signalRef(n)};t&&(i.as=t),this.field[n]=r=Mt(this.add(OJt(i)))}return r},compareRef(e){let t=!1;const n=s=>Vs(s)?(t=!0,this.signalRef(s.signal)):vJt(s)?(t=!0,this.exprRef(s.expr)):s,r=pt(e.field).map(n),i=pt(e.order).map(n);return t?Mt(this.add(j0e({fields:r,orders:i}))):L0e(r,i)},keyRef(e,t){let n=!1;const r=s=>Vs(s)?(n=!0,Mt(i[s.signal])):s,i=this.signals;return e=pt(e).map(r),n?Mt(this.add(DJt({fields:e,flat:t}))):pJt(e,t)},sortRef(e){if(!e)return e;const t=S5(e.op,e.field),n=e.order||mJt;return n.signal?Mt(this.add(j0e({fields:t,orders:this.signalRef(n.signal)}))):L0e(t,n)},event(e,t){const n=e+":"+t;if(!this.events[n]){const r=this.id();this.streams.push({id:r,source:e,type:t}),this.events[n]=r}return this.events[n]},hasOwnSignal(e){return jt(this.signals,e)},addSignal(e,t){this.hasOwnSignal(e)&&Le("Duplicate signal name: "+rt(e));const n=t instanceof Jq?t:this.add(yL(t));return this.signals[e]=n},getSignal(e){return this.signals[e]||Le("Unrecognized signal name: "+rt(e)),this.signals[e]},signalRef(e){return this.signals[e]?Mt(this.signals[e]):(jt(this.lambdas,e)||(this.lambdas[e]=this.add(yL(null))),Mt(this.lambdas[e]))},parseLambdas(){const e=Object.keys(this.lambdas);for(let t=0,n=e.length;t<n;++t){const r=e[t],i=Vh(r,this),s=this.lambdas[r];s.params=i.$params,s.update=i.$expr}},property(e){return e&&e.signal?this.signalRef(e.signal):e},objectProperty(e){return!e||!gt(e)?e:this.signalRef(e.signal||Xre(e))},exprRef(e,t){const n={expr:Vh(e,this)};return t&&(n.expr.$name=t),Mt(this.add(NJt(n)))},addBinding(e,t){this.bindings||Le("Nested signals do not support binding: "+rt(e)),this.bindings.push(_n({signal:e},t))},addScaleProj(e,t){jt(this.scales,e)&&Le("Duplicate scale or projection name: "+rt(e)),this.scales[e]=this.add(t)},addScale(e,t){this.addScaleProj(e,qJt(t))},addProjection(e,t){this.addScaleProj(e,zJt(t))},getScale(e){return this.scales[e]||Le("Unrecognized scale name: "+rt(e)),this.scales[e]},scaleRef(e){return Mt(this.getScale(e))},scaleType(e){return this.getScale(e).params.type},projectionRef(e){return this.scaleRef(e)},projectionType(e){return this.scaleType(e)},addData(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.data[e]=t},getData(e){return this.data[e]||Le("Undefined data set name: "+rt(e)),this.data[e]},addDataPipeline(e,t){return jt(this.data,e)&&Le("Duplicate data set name: "+rt(e)),this.addData(e,kb.fromEntries(this,t))}};function Xre(e){return(je(e)?Oen:Den)(e)}function Oen(e){const t=e.length;let n="[";for(let r=0;r<t;++r){const i=e[r];n+=(r>0?",":"")+(gt(i)?i.signal||Xre(i):rt(i))}return n+"]"}function Den(e){let t="{",n=0,r,i;for(r in e)i=e[r],t+=(++n>1?",":"")+rt(r)+":"+(gt(i)?i.signal||Xre(i):rt(i));return t+"}"}function $en(){const e="sans-serif",r="#4c78a8",i="#000",s="#888",o="#ddd";return{description:"Vega visualization",padding:0,autosize:"pad",background:null,events:{defaults:{allow:["wheel"]}},group:null,mark:null,arc:{fill:r},area:{fill:r},image:null,line:{stroke:r,strokeWidth:2},path:{stroke:r},rect:{fill:r},rule:{stroke:i},shape:{stroke:r},symbol:{fill:r,size:64},text:{fill:i,font:e,fontSize:11},trail:{fill:r,size:2},style:{"guide-label":{fill:i,font:e,fontSize:10},"guide-title":{fill:i,font:e,fontSize:11,fontWeight:"bold"},"group-title":{fill:i,font:e,fontSize:13,fontWeight:"bold"},"group-subtitle":{fill:i,font:e,fontSize:12},point:{size:30,strokeWidth:2,shape:"circle"},circle:{size:30,strokeWidth:2},square:{size:30,strokeWidth:2,shape:"square"},cell:{fill:"transparent",stroke:o},view:{fill:"transparent"}},title:{orient:"top",anchor:"middle",offset:4,subtitlePadding:3},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:s,grid:!1,gridWidth:1,gridColor:o,labels:!0,labelAngle:0,labelLimit:180,labelOffset:0,labelPadding:2,ticks:!0,tickColor:s,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titlePadding:4},axisBand:{tickOffset:-.5},projection:{type:"mercator"},legend:{orient:"right",padding:0,gridAlign:"each",columnPadding:10,rowPadding:2,symbolDirection:"vertical",gradientDirection:"vertical",gradientLength:200,gradientThickness:16,gradientStrokeColor:o,gradientStrokeWidth:0,gradientLabelOffset:2,labelAlign:"left",labelBaseline:"middle",labelLimit:160,labelOffset:4,labelOverlap:!0,symbolLimit:30,symbolType:"circle",symbolSize:100,symbolOffset:0,symbolStrokeWidth:1.5,symbolBaseFillColor:"transparent",symbolBaseStrokeColor:s,titleLimit:180,titleOrient:"top",titlePadding:5,layout:{offset:18,direction:"horizontal",left:{direction:"vertical"},right:{direction:"vertical"}}},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues"},heatmap:{scheme:"yellowgreenblue"},ramp:{scheme:"blues"},diverging:{scheme:"blueorange",extent:[1,0]},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function Men(e,t,n){return gt(e)||Le("Input Vega specification must be an object."),t=lT($en(),t,e.config),Nen(e,new y5e(t,n)).toRuntime()}var Len="5.29.0";_n(Fx,M7t,Sqt,nWt,OWt,BWt,hGt,WWt,mGt,bGt,kGt,MGt);const Fen=Object.freeze(Object.defineProperty({__proto__:null,Bounds:Is,CanvasHandler:YR,CanvasRenderer:sL,DATE:al,DAY:pa,DAYOFYEAR:zh,Dataflow:DE,Debug:zMe,Error:Hee,EventStream:W4,Gradient:s6e,GroupItem:s5,HOURS:Kl,Handler:Rne,HybridHandler:X6e,HybridRenderer:kq,Info:UMe,Item:i5,MILLISECONDS:sd,MINUTES:Xl,MONTH:ba,Marks:Ql,MultiPulse:cte,None:BMe,Operator:Jr,Parameters:q4,Pulse:z0,QUARTER:ol,RenderType:g0,Renderer:GR,ResourceLoader:d6e,SECONDS:Hc,SVGHandler:L6e,SVGRenderer:Mne,SVGStringRenderer:K6e,Scenegraph:k6e,TIME_UNITS:nte,Transform:Pe,View:$4e,WEEK:Fs,Warn:qee,YEAR:Fo,accessor:dl,accessorFields:va,accessorName:Zi,array:pt,ascending:j4,bandwidthNRD:pte,bin:Q3e,bootstrapCI:J3e,boundClip:oFe,boundContext:VR,boundItem:Sq,boundMark:T6e,boundStroke:mg,changeset:m_,clampRange:ZMe,codegenExpression:u4e,compare:Xee,constant:Ca,cumulativeLogNormal:_te,cumulativeNormal:Y4,cumulativeUniform:Ste,dayofyear:f3e,debounce:Qee,defaultLocale:ste,definition:Y3e,densityLogNormal:bte,densityNormal:mte,densityUniform:xte,domChild:Ms,domClear:Sc,domCreate:p0,domFind:kne,dotbin:Z3e,error:Le,expressionFunction:vs,extend:_n,extent:Uh,extentIndex:e3e,falsy:Mg,fastmap:fT,field:zc,flush:t3e,font:c5,fontFamily:WR,fontSize:ap,format:wD,formatLocale:W3,formats:ute,hasOwnProperty:jt,id:NR,identity:Aa,inferType:L3e,inferTypes:F3e,ingest:xr,inherits:lt,inrange:Qw,interpolate:one,interpolateColors:n5,interpolateRange:qLe,intersect:nFe,intersectBoxLine:Jw,intersectPath:pne,intersectPoint:mne,intersectRule:p6e,isArray:je,isBoolean:lv,isDate:U0,isFunction:wn,isIterable:n3e,isNumber:fr,isObject:gt,isRegExp:r3e,isString:mt,isTuple:V4,key:Jee,lerp:i3e,lineHeight:Ay,loader:U4,locale:$3e,logger:Wee,lruCache:s3e,markup:$ne,merge:o3e,mergeConfig:lT,multiLineOffset:Ane,one:uT,pad:a3e,panLinear:GMe,panLog:YMe,panPow:KMe,panSymlog:XMe,parse:Men,parseExpression:xre,parseSelector:fv,path:uF,pathCurves:fne,pathEqual:aFe,pathParse:zx,pathRectangle:u6e,pathRender:ZI,pathSymbols:a6e,pathTrail:l6e,peek:Zn,point:d5,projection:Yne,quantileLogNormal:wte,quantileNormal:K4,quantileUniform:Tte,quantiles:dte,quantizeInterpolator:WLe,quarter:QMe,quartiles:hte,get random(){return qc},randomInteger:BUt,randomKDE:yte,randomLCG:jUt,randomLogNormal:tLe,randomMixture:nLe,randomNormal:gte,randomUniform:rLe,read:U3e,regressionConstant:Ate,regressionExp:sLe,regressionLinear:Cte,regressionLoess:uLe,regressionLog:iLe,regressionPoly:aLe,regressionPow:oLe,regressionQuad:Ite,renderModule:h5,repeat:fC,resetDefaultLocale:M9t,resetSVGClipId:f6e,resetSVGDefIds:zHt,responseType:B3e,runtimeContext:E4e,sampleCurve:Q4,sampleLogNormal:vte,sampleNormal:G4,sampleUniform:Ete,scale:vr,sceneEqual:Lne,sceneFromJSON:C6e,scenePickVisit:Q3,sceneToJSON:A6e,sceneVisit:od,sceneZOrder:gne,scheme:ane,serializeXML:q6e,setHybridRendererOptions:FHt,setRandom:LUt,span:PR,splitAccessPath:op,stringValue:rt,textMetrics:Ll,timeBin:I3e,timeFloor:v3e,timeFormatLocale:XI,timeInterval:dT,timeOffset:w3e,timeSequence:S3e,timeUnitSpecifier:c3e,timeUnits:rte,toBoolean:Zee,toDate:ete,toNumber:ma,toSet:id,toString:tte,transform:K3e,transforms:Fx,truncate:u3e,truthy:Vc,tupleid:Lt,typeParsers:mq,utcFloor:b3e,utcInterval:hT,utcOffset:E3e,utcSequence:T3e,utcdayofyear:p3e,utcquarter:JMe,utcweek:m3e,version:Len,visitArray:qg,week:d3e,writeConfig:cT,zero:i0,zoomLinear:Gee,zoomLog:Yee,zoomPow:q3,zoomSymlog:Kee},Symbol.toStringTag,{value:"Module"}));function jen(e,t,n){let r;t.x2&&(t.x?(n&&e.x>e.x2&&(r=e.x,e.x=e.x2,e.x2=r),e.width=e.x2-e.x):e.x=e.x2-(e.width||0)),t.xc&&(e.x=e.xc-(e.width||0)/2),t.y2&&(t.y?(n&&e.y>e.y2&&(r=e.y,e.y=e.y2,e.y2=r),e.height=e.y2-e.y):e.y=e.y2-(e.height||0)),t.yc&&(e.y=e.yc-(e.height||0)/2)}var Ben={NaN:NaN,E:Math.E,LN2:Math.LN2,LN10:Math.LN10,LOG2E:Math.LOG2E,LOG10E:Math.LOG10E,PI:Math.PI,SQRT1_2:Math.SQRT1_2,SQRT2:Math.SQRT2,MIN_VALUE:Number.MIN_VALUE,MAX_VALUE:Number.MAX_VALUE},Uen={"*":(e,t)=>e*t,"+":(e,t)=>e+t,"-":(e,t)=>e-t,"/":(e,t)=>e/t,"%":(e,t)=>e%t,">":(e,t)=>e>t,"<":(e,t)=>e<t,"<=":(e,t)=>e<=t,">=":(e,t)=>e>=t,"==":(e,t)=>e==t,"!=":(e,t)=>e!=t,"===":(e,t)=>e===t,"!==":(e,t)=>e!==t,"&":(e,t)=>e&t,"|":(e,t)=>e|t,"^":(e,t)=>e^t,"<<":(e,t)=>e<<t,">>":(e,t)=>e>>t,">>>":(e,t)=>e>>>t},zen={"+":e=>+e,"-":e=>-e,"~":e=>~e,"!":e=>!e};const Ven=Array.prototype.slice,Rv=(e,t,n)=>{const r=n?n(t[0]):t[0];return r[e].apply(r,Ven.call(t,1))},Hen=(e,t,n,r,i,s,o)=>new Date(e,t||0,n??1,r||0,i||0,s||0,o||0);var qen={isNaN:Number.isNaN,isFinite:Number.isFinite,abs:Math.abs,acos:Math.acos,asin:Math.asin,atan:Math.atan,atan2:Math.atan2,ceil:Math.ceil,cos:Math.cos,exp:Math.exp,floor:Math.floor,log:Math.log,max:Math.max,min:Math.min,pow:Math.pow,random:Math.random,round:Math.round,sin:Math.sin,sqrt:Math.sqrt,tan:Math.tan,clamp:(e,t,n)=>Math.max(t,Math.min(n,e)),now:Date.now,utc:Date.UTC,datetime:Hen,date:e=>new Date(e).getDate(),day:e=>new Date(e).getDay(),year:e=>new Date(e).getFullYear(),month:e=>new Date(e).getMonth(),hours:e=>new Date(e).getHours(),minutes:e=>new Date(e).getMinutes(),seconds:e=>new Date(e).getSeconds(),milliseconds:e=>new Date(e).getMilliseconds(),time:e=>new Date(e).getTime(),timezoneoffset:e=>new Date(e).getTimezoneOffset(),utcdate:e=>new Date(e).getUTCDate(),utcday:e=>new Date(e).getUTCDay(),utcyear:e=>new Date(e).getUTCFullYear(),utcmonth:e=>new Date(e).getUTCMonth(),utchours:e=>new Date(e).getUTCHours(),utcminutes:e=>new Date(e).getUTCMinutes(),utcseconds:e=>new Date(e).getUTCSeconds(),utcmilliseconds:e=>new Date(e).getUTCMilliseconds(),length:e=>e.length,join:function(){return Rv("join",arguments)},indexof:function(){return Rv("indexOf",arguments)},lastindexof:function(){return Rv("lastIndexOf",arguments)},slice:function(){return Rv("slice",arguments)},reverse:e=>e.slice().reverse(),parseFloat,parseInt,upper:e=>String(e).toUpperCase(),lower:e=>String(e).toLowerCase(),substring:function(){return Rv("substring",arguments,String)},split:function(){return Rv("split",arguments,String)},replace:function(){return Rv("replace",arguments,String)},trim:e=>String(e).trim(),regexp:RegExp,test:(e,t)=>RegExp(e).test(t)};const Wen=["view","item","group","xy","x","y"],sW=new Set([Function,eval,setTimeout,setInterval]);typeof setImmediate=="function"&&sW.add(setImmediate);const Gen={Literal:(e,t)=>t.value,Identifier:(e,t)=>{const n=t.name;return e.memberDepth>0?n:n==="datum"?e.datum:n==="event"?e.event:n==="item"?e.item:Ben[n]||e.params["$"+n]},MemberExpression:(e,t)=>{const n=!t.computed,r=e(t.object);n&&(e.memberDepth+=1);const i=e(t.property);if(n&&(e.memberDepth-=1),sW.has(r[i])){console.error(`Prevented interpretation of member "${i}" which could lead to insecure code execution`);return}return r[i]},CallExpression:(e,t)=>{const n=t.arguments;let r=t.callee.name;return r.startsWith("_")&&(r=r.slice(1)),r==="if"?e(n[0])?e(n[1]):e(n[2]):(e.fn[r]||qen[r]).apply(e.fn,n.map(e))},ArrayExpression:(e,t)=>t.elements.map(e),BinaryExpression:(e,t)=>Uen[t.operator](e(t.left),e(t.right)),UnaryExpression:(e,t)=>zen[t.operator](e(t.argument)),ConditionalExpression:(e,t)=>e(t.test)?e(t.consequent):e(t.alternate),LogicalExpression:(e,t)=>t.operator==="&&"?e(t.left)&&e(t.right):e(t.left)||e(t.right),ObjectExpression:(e,t)=>t.properties.reduce((n,r)=>{e.memberDepth+=1;const i=e(r.key);return e.memberDepth-=1,sW.has(e(r.value))?console.error(`Prevented interpretation of property "${i}" which could lead to insecure code execution`):n[i]=e(r.value),n},{})};function SA(e,t,n,r,i,s){const o=a=>Gen[a.type](o,a);return o.memberDepth=0,o.fn=Object.create(t),o.params=n,o.datum=r,o.event=i,o.item=s,Wen.forEach(a=>o.fn[a]=function(){return i.vega[a](...arguments)}),o(e)}var Yen={operator(e,t){const n=t.ast,r=e.functions;return i=>SA(n,r,i)},parameter(e,t){const n=t.ast,r=e.functions;return(i,s)=>SA(n,r,s,i)},event(e,t){const n=t.ast,r=e.functions;return i=>SA(n,r,void 0,void 0,i)},handler(e,t){const n=t.ast,r=e.functions;return(i,s)=>{const o=s.item&&s.item.datum;return SA(n,r,i,o,s)}},encode(e,t){const{marktype:n,channels:r}=t,i=e.functions,s=n==="group"||n==="image"||n==="rect";return(o,a)=>{const u=o.datum;let l=0,c;for(const f in r)c=SA(r[f].ast,i,a,u,void 0,o),o[f]!==c&&(o[f]=c,l=1);return n!=="rule"&&jen(o,r,s),l}}};const Ken="vega-lite",Xen='Dominik Moritz, Kanit "Ham" Wongsuphasawat, Arvind Satyanarayan, Jeffrey Heer',Qen="5.18.1",Jen=["Kanit Wongsuphasawat (http://kanitw.yellowpigz.com)","Dominik Moritz (https://www.domoritz.de)","Arvind Satyanarayan (https://arvindsatya.com)","Jeffrey Heer (https://jheer.org)"],Zen="https://vega.github.io/vega-lite/",etn="Vega-Lite is a concise high-level language for interactive visualization.",ttn=["vega","chart","visualization"],ntn="build/vega-lite.js",rtn="build/vega-lite.min.js",itn="build/vega-lite.min.js",stn="build/src/index",otn="build/src/index.d.ts",atn={vl2pdf:"./bin/vl2pdf",vl2png:"./bin/vl2png",vl2svg:"./bin/vl2svg",vl2vg:"./bin/vl2vg"},utn=["bin","build","src","vega-lite*","tsconfig.json"],ltn={changelog:"conventional-changelog -p angular -r 2",prebuild:"yarn clean:build",build:"yarn build:only","build:only":"tsc -p tsconfig.build.json && rollup -c","prebuild:examples":"yarn build:only","build:examples":"yarn data && TZ=America/Los_Angeles scripts/build-examples.sh","prebuild:examples-full":"yarn build:only","build:examples-full":"TZ=America/Los_Angeles scripts/build-examples.sh 1","build:example":"TZ=America/Los_Angeles scripts/build-example.sh","build:toc":"yarn build:jekyll && scripts/generate-toc","build:site":"rollup -c site/rollup.config.mjs","build:jekyll":"pushd site && bundle exec jekyll build -q && popd","build:versions":"scripts/update-version.sh",clean:"yarn clean:build && del-cli 'site/data/*' 'examples/compiled/*.png' && find site/examples ! -name 'index.md' ! -name 'data' -type f -delete","clean:build":"del-cli 'build/*' !build/vega-lite-schema.json",data:"rsync -r node_modules/vega-datasets/data/* site/data","build-editor-preview":"scripts/build-editor-preview.sh",schema:"mkdir -p build && ts-json-schema-generator -f tsconfig.json -p src/index.ts -t TopLevelSpec --no-type-check --no-ref-encode > build/vega-lite-schema.json && yarn renameschema && cp build/vega-lite-schema.json site/_data/",renameschema:"scripts/rename-schema.sh",presite:"yarn data && yarn schema && yarn build:site && yarn build:versions && scripts/create-example-pages.sh",site:"yarn site:only","site:only":"pushd site && bundle exec jekyll serve -I -l && popd",prettierbase:"prettier '**/*.{md,css,yml}'",format:"eslint . --fix && yarn prettierbase --write",lint:"eslint . && yarn prettierbase --check",test:"yarn jest test/ && yarn lint && yarn schema && yarn jest examples/ && yarn test:runtime","test:cover":"yarn jest --collectCoverage test/","test:inspect":"node --inspect-brk ./node_modules/.bin/jest --runInBand test","test:runtime":"TZ=America/Los_Angeles npx jest test-runtime/ --config test-runtime/jest-config.json","test:runtime:generate":"yarn build:only && del-cli test-runtime/resources && VL_GENERATE_TESTS=true yarn test:runtime",watch:"tsc -p tsconfig.build.json -w","watch:site":"yarn build:site -w","watch:test":"yarn jest --watch test/","watch:test:runtime":"TZ=America/Los_Angeles npx jest --watch test-runtime/ --config test-runtime/jest-config.json",release:"release-it"},ctn={type:"git",url:"https://github.com/vega/vega-lite.git"},ftn="BSD-3-Clause",dtn={url:"https://github.com/vega/vega-lite/issues"},htn={"@babel/core":"^7.24.5","@babel/preset-env":"^7.24.5","@babel/preset-typescript":"^7.24.1","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-alias":"^5.1.0","@rollup/plugin-babel":"^6.0.4","@rollup/plugin-commonjs":"^25.0.7","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@types/d3":"^7.4.3","@types/jest":"^29.5.12","@types/pako":"^2.0.3","@typescript-eslint/eslint-plugin":"^7.8.0","@typescript-eslint/parser":"^7.8.0",ajv:"^8.13.0","ajv-formats":"^2.1.1",cheerio:"^1.0.0-rc.12","conventional-changelog-cli":"^4.1.0",d3:"^7.9.0","del-cli":"^5.1.0",eslint:"^8.57.0","eslint-config-prettier":"^9.1.0","eslint-plugin-jest":"^27.9.0","eslint-plugin-prettier":"^5.1.3","fast-json-stable-stringify":"~2.1.0","highlight.js":"^11.9.0",jest:"^29.7.0","jest-dev-server":"^10.0.0",mkdirp:"^3.0.1",pako:"^2.1.0",prettier:"^3.2.5",puppeteer:"^15.0.0","release-it":"^17.2.1",rollup:"^4.17.2","rollup-plugin-bundle-size":"^1.0.3",serve:"^14.2.3",terser:"^5.31.0","ts-jest":"^29.1.2","ts-json-schema-generator":"^1.5.0",typescript:"~5.4.5","vega-cli":"^5.28.0","vega-datasets":"^2.8.1","vega-embed":"^6.25.0","vega-tooltip":"^0.34.0","yaml-front-matter":"^4.1.1"},ptn={"json-stringify-pretty-compact":"~3.0.0",tslib:"~2.6.2","vega-event-selector":"~3.0.1","vega-expression":"~5.1.0","vega-util":"~1.17.2",yargs:"~17.7.2"},mtn={vega:"^5.24.0"},gtn={node:">=18"},ytn="yarn@1.22.19",vtn={name:Ken,author:Xen,version:Qen,collaborators:Jen,homepage:Zen,description:etn,keywords:ttn,main:ntn,unpkg:rtn,jsdelivr:itn,module:stn,types:otn,bin:atn,files:utn,scripts:ltn,repository:ctn,license:ftn,bugs:dtn,devDependencies:htn,dependencies:ptn,peerDependencies:mtn,engines:gtn,packageManager:ytn};function Qre(e){return!!e.or}function Jre(e){return!!e.and}function Zre(e){return!!e.not}function UD(e,t){if(Zre(e))UD(e.not,t);else if(Jre(e))for(const n of e.and)UD(n,t);else if(Qre(e))for(const n of e.or)UD(n,t);else t(e)}function ME(e,t){return Zre(e)?{not:ME(e.not,t)}:Jre(e)?{and:e.and.map(n=>ME(n,t))}:Qre(e)?{or:e.or.map(n=>ME(n,t))}:t(e)}const rn=structuredClone;function v5e(e){throw new Error(e)}function Gx(e,t){const n={};for(const r of t)jt(e,r)&&(n[r]=e[r]);return n}function Qu(e,t){const n={...e};for(const r of t)delete n[r];return n}Set.prototype.toJSON=function(){return`Set(${[...this].map(e=>zr(e)).join(",")})`};function qn(e){if(fr(e))return e;const t=mt(e)?e:zr(e);if(t.length<250)return t;let n=0;for(let r=0;r<t.length;r++){const i=t.charCodeAt(r);n=(n<<5)-n+i,n=n&n}return n}function oW(e){return e===!1||e===null}function Wn(e,t){return e.includes(t)}function Rb(e,t){let n=0;for(const[r,i]of e.entries())if(t(i,r,n++))return!0;return!1}function eie(e,t){let n=0;for(const[r,i]of e.entries())if(!t(i,r,n++))return!1;return!0}function b5e(e,...t){for(const n of t)btn(e,n??{});return e}function btn(e,t){for(const n of Ke(t))cT(e,n,t[n],!0)}function lh(e,t){const n=[],r={};let i;for(const s of e)i=t(s),!(i in r)&&(r[i]=1,n.push(s));return n}function _tn(e,t){const n=Ke(e),r=Ke(t);if(n.length!==r.length)return!1;for(const i of n)if(e[i]!==t[i])return!1;return!0}function _5e(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function tie(e,t){for(const n of e)if(t.has(n))return!0;return!1}function aW(e){const t=new Set;for(const n of e){const i=op(n).map((o,a)=>a===0?o:`[${o}]`),s=i.map((o,a)=>i.slice(0,a+1).join(""));for(const o of s)t.add(o)}return t}function nie(e,t){return e===void 0||t===void 0?!0:tie(aW(e),aW(t))}function Ur(e){return Ke(e).length===0}const Ke=Object.keys,jo=Object.values,Ry=Object.entries;function ck(e){return e===!0||e===!1}function Ri(e){const t=e.replace(/\W/g,"_");return(e.match(/^\d+/)?"_":"")+t}function S2(e,t){return Zre(e)?`!(${S2(e.not,t)})`:Jre(e)?`(${e.and.map(n=>S2(n,t)).join(") && (")})`:Qre(e)?`(${e.or.map(n=>S2(n,t)).join(") || (")})`:t(e)}function vL(e,t){if(t.length===0)return!0;const n=t.shift();return n in e&&vL(e[n],t)&&delete e[n],Ur(e)}function tN(e){return e.charAt(0).toUpperCase()+e.substr(1)}function rie(e,t="datum"){const n=op(e),r=[];for(let i=1;i<=n.length;i++){const s=`[${n.slice(0,i).map(rt).join("][")}]`;r.push(`${t}${s}`)}return r.join(" && ")}function w5e(e,t="datum"){return`${t}[${rt(op(e).join("."))}]`}function wtn(e){return e.replace(/(\[|\]|\.|'|")/g,"\\$1")}function Wc(e){return`${op(e).map(wtn).join("\\.")}`}function Nb(e,t,n){return e.replace(new RegExp(t.replace(/[-/\\^$*+?.()|[\]{}]/g,"\\$&"),"g"),n)}function _T(e){return`${op(e).join(".")}`}function Yx(e){return e?op(e).length:0}function ps(...e){for(const t of e)if(t!==void 0)return t}let E5e=42;function x5e(e){const t=++E5e;return e?String(e)+t:t}function Etn(){E5e=42}function S5e(e){return T5e(e)?e:`__${e}`}function T5e(e){return e.startsWith("__")}function fk(e){if(e!==void 0)return(e%360+360)%360}function N5(e){return fr(e)?!0:!isNaN(e)&&!isNaN(parseFloat(e))}const eye=Object.getPrototypeOf(structuredClone({}));function Ol(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor.name!==t.constructor.name)return!1;let n,r;if(Array.isArray(e)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(!Ol(e[r],t[r]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;for(r of e.entries())if(!Ol(r[1],t.get(r[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(r of e.entries())if(!t.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(n=e.length,n!=t.length)return!1;for(r=n;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&e.valueOf!==eye.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&e.toString!==eye.toString)return e.toString()===t.toString();const i=Object.keys(e);if(n=i.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[r]))return!1;for(r=n;r--!==0;){const s=i[r];if(!Ol(e[s],t[s]))return!1}return!0}return e!==e&&t!==t}function zr(e){const t=[];return function n(r){if(r&&r.toJSON&&typeof r.toJSON=="function"&&(r=r.toJSON()),r===void 0)return;if(typeof r=="number")return isFinite(r)?""+r:"null";if(typeof r!="object")return JSON.stringify(r);let i,s;if(Array.isArray(r)){for(s="[",i=0;i<r.length;i++)i&&(s+=","),s+=n(r[i])||"null";return s+"]"}if(r===null)return"null";if(t.includes(r))throw new TypeError("Converting circular structure to JSON");const o=t.push(r)-1,a=Object.keys(r).sort();for(s="",i=0;i<a.length;i++){const u=a[i],l=n(r[u]);l&&(s&&(s+=","),s+=JSON.stringify(u)+":"+l)}return t.splice(o,1),`{${s}}`}(e)}const gm="row",ym="column",P5="facet",Ni="x",bo="y",yd="x2",cp="y2",dv="xOffset",wT="yOffset",vd="radius",yg="radius2",of="theta",vg="theta2",bd="latitude",_d="longitude",wd="latitude2",Gc="longitude2",ul="color",fp="fill",dp="stroke",ll="shape",bg="size",__="angle",_g="opacity",hv="fillOpacity",pv="strokeOpacity",mv="strokeWidth",gv="strokeDash",nN="text",Kx="order",rN="detail",O5="key",Pb="tooltip",D5="href",$5="url",M5="description",xtn={x:1,y:1,x2:1,y2:1},A5e={theta:1,theta2:1,radius:1,radius2:1};function C5e(e){return e in A5e}const iie={longitude:1,longitude2:1,latitude:1,latitude2:1};function I5e(e){switch(e){case bd:return"y";case wd:return"y2";case _d:return"x";case Gc:return"x2"}}function k5e(e){return e in iie}const Stn=Ke(iie),sie={...xtn,...A5e,...iie,xOffset:1,yOffset:1,color:1,fill:1,stroke:1,opacity:1,fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeDash:1,size:1,angle:1,shape:1,order:1,text:1,detail:1,key:1,tooltip:1,href:1,url:1,description:1};function LE(e){return e===ul||e===fp||e===dp}const R5e={row:1,column:1,facet:1},Nc=Ke(R5e),oie={...sie,...R5e},Ttn=Ke(oie),{order:Fpn,detail:jpn,tooltip:Bpn,...Atn}=oie,{row:Upn,column:zpn,facet:Vpn,...Ctn}=Atn;function Itn(e){return!!Ctn[e]}function N5e(e){return!!oie[e]}const ktn=[yd,cp,wd,Gc,vg,yg];function P5e(e){return w_(e)!==e}function w_(e){switch(e){case yd:return Ni;case cp:return bo;case wd:return bd;case Gc:return _d;case vg:return of;case yg:return vd}return e}function Ny(e){if(C5e(e))switch(e){case of:return"startAngle";case vg:return"endAngle";case vd:return"outerRadius";case yg:return"innerRadius"}return e}function hp(e){switch(e){case Ni:return yd;case bo:return cp;case bd:return wd;case _d:return Gc;case of:return vg;case vd:return yg}}function cl(e){switch(e){case Ni:case yd:return"width";case bo:case cp:return"height"}}function O5e(e){switch(e){case Ni:return"xOffset";case bo:return"yOffset";case yd:return"x2Offset";case cp:return"y2Offset";case of:return"thetaOffset";case vd:return"radiusOffset";case vg:return"theta2Offset";case yg:return"radius2Offset"}}function aie(e){switch(e){case Ni:return"xOffset";case bo:return"yOffset"}}function Rtn(e){switch(e){case"xOffset":return"x";case"yOffset":return"y"}}const Ntn=Ke(sie),{x:Hpn,y:qpn,x2:Wpn,y2:Gpn,xOffset:Ypn,yOffset:Kpn,latitude:Xpn,longitude:Qpn,latitude2:Jpn,longitude2:Zpn,theta:emn,theta2:tmn,radius:nmn,radius2:rmn,...uie}=sie,Ptn=Ke(uie),lie={x:1,y:1},pp=Ke(lie);function ms(e){return e in lie}const cie={theta:1,radius:1},Otn=Ke(cie);function L5(e){return e==="width"?Ni:bo}const D5e={xOffset:1,yOffset:1};function iN(e){return e in D5e}const{text:imn,tooltip:smn,href:omn,url:amn,description:umn,detail:lmn,key:cmn,order:fmn,...$5e}=uie,Dtn=Ke($5e);function $tn(e){return!!uie[e]}function Mtn(e){switch(e){case ul:case fp:case dp:case bg:case ll:case _g:case mv:case gv:return!0;case hv:case pv:case __:return!1}}const M5e={...lie,...cie,...D5e,...$5e},F5=Ke(M5e);function wg(e){return!!M5e[e]}function Ltn(e,t){return jtn(e)[t]}const L5e={arc:"always",area:"always",bar:"always",circle:"always",geoshape:"always",image:"always",line:"always",rule:"always",point:"always",rect:"always",square:"always",trail:"always",text:"always",tick:"always"},{geoshape:dmn,...Ftn}=L5e;function jtn(e){switch(e){case ul:case fp:case dp:case M5:case rN:case O5:case Pb:case D5:case Kx:case _g:case hv:case pv:case mv:case P5:case gm:case ym:return L5e;case Ni:case bo:case dv:case wT:case bd:case _d:return Ftn;case yd:case cp:case wd:case Gc:return{area:"always",bar:"always",image:"always",rect:"always",rule:"always",circle:"binned",point:"binned",square:"binned",tick:"binned",line:"binned",trail:"binned"};case bg:return{point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",text:"always",line:"always",trail:"always"};case gv:return{line:"always",point:"always",tick:"always",rule:"always",circle:"always",square:"always",bar:"always",geoshape:"always"};case ll:return{point:"always",geoshape:"always"};case nN:return{text:"always"};case __:return{point:"always",square:"always",text:"always"};case $5:return{image:"always"};case of:return{text:"always",arc:"always"};case vd:return{text:"always",arc:"always"};case vg:case yg:return{arc:"always"}}}function mU(e){switch(e){case Ni:case bo:case of:case vd:case dv:case wT:case bg:case __:case mv:case _g:case hv:case pv:case yd:case cp:case vg:case yg:return;case P5:case gm:case ym:case ll:case gv:case nN:case Pb:case D5:case $5:case M5:return"discrete";case ul:case fp:case dp:return"flexible";case bd:case _d:case wd:case Gc:case rN:case O5:case Kx:return}}const Btn={argmax:1,argmin:1,average:1,count:1,distinct:1,exponential:1,exponentialb:1,product:1,max:1,mean:1,median:1,min:1,missing:1,q1:1,q3:1,ci0:1,ci1:1,stderr:1,stdev:1,stdevp:1,sum:1,valid:1,values:1,variance:1,variancep:1},Utn={count:1,min:1,max:1};function Km(e){return!!e&&!!e.argmin}function yv(e){return!!e&&!!e.argmax}function fie(e){return mt(e)&&!!Btn[e]}const ztn=new Set(["count","valid","missing","distinct"]);function F5e(e){return mt(e)&&ztn.has(e)}function Vtn(e){return mt(e)&&Wn(["min","max"],e)}const Htn=new Set(["count","sum","distinct","valid","missing"]),qtn=new Set(["mean","average","median","q1","q3","min","max"]);function j5e(e){return lv(e)&&(e=X5(e,void 0)),"bin"+Ke(e).map(t=>j5(e[t])?Ri(`_${t}_${Ry(e[t])}`):Ri(`_${t}_${e[t]}`)).join("")}function oi(e){return e===!0||E_(e)&&!e.binned}function Ro(e){return e==="binned"||E_(e)&&e.binned===!0}function E_(e){return gt(e)}function j5(e){return e==null?void 0:e.param}function tye(e){switch(e){case gm:case ym:case bg:case ul:case fp:case dp:case mv:case _g:case hv:case pv:case ll:return 6;case gv:return 4;default:return 10}}function sN(e){return!!(e!=null&&e.expr)}function Ou(e){const t=Ke(e||{}),n={};for(const r of t)n[r]=Tl(e[r]);return n}function B5e(e){const{anchor:t,frame:n,offset:r,orient:i,angle:s,limit:o,color:a,subtitleColor:u,subtitleFont:l,subtitleFontSize:c,subtitleFontStyle:f,subtitleFontWeight:d,subtitleLineHeight:h,subtitlePadding:p,...m}=e,g={...m,...a?{fill:a}:{}},y={...t?{anchor:t}:{},...n?{frame:n}:{},...r?{offset:r}:{},...i?{orient:i}:{},...s!==void 0?{angle:s}:{},...o!==void 0?{limit:o}:{}},v={...u?{subtitleColor:u}:{},...l?{subtitleFont:l}:{},...c?{subtitleFontSize:c}:{},...f?{subtitleFontStyle:f}:{},...d?{subtitleFontWeight:d}:{},...h?{subtitleLineHeight:h}:{},...p?{subtitlePadding:p}:{}},b=Gx(e,["align","baseline","dx","dy","limit"]);return{titleMarkConfig:g,subtitleMarkConfig:b,nonMarkTitleProperties:y,subtitle:v}}function Yg(e){return mt(e)||je(e)&&mt(e[0])}function Rt(e){return!!(e!=null&&e.signal)}function vv(e){return!!e.step}function Wtn(e){return je(e)?!1:"fields"in e&&!("data"in e)}function Gtn(e){return je(e)?!1:"fields"in e&&"data"in e}function om(e){return je(e)?!1:"field"in e&&"data"in e}const Ytn={aria:1,description:1,ariaRole:1,ariaRoleDescription:1,blend:1,opacity:1,fill:1,fillOpacity:1,stroke:1,strokeCap:1,strokeWidth:1,strokeOpacity:1,strokeDash:1,strokeDashOffset:1,strokeJoin:1,strokeOffset:1,strokeMiterLimit:1,startAngle:1,endAngle:1,padAngle:1,innerRadius:1,outerRadius:1,size:1,shape:1,interpolate:1,tension:1,orient:1,align:1,baseline:1,text:1,dir:1,dx:1,dy:1,ellipsis:1,limit:1,radius:1,theta:1,angle:1,font:1,fontSize:1,fontWeight:1,fontStyle:1,lineBreak:1,lineHeight:1,cursor:1,href:1,tooltip:1,cornerRadius:1,cornerRadiusTopLeft:1,cornerRadiusTopRight:1,cornerRadiusBottomLeft:1,cornerRadiusBottomRight:1,aspect:1,width:1,height:1,url:1,smooth:1},Ktn=Ke(Ytn),Xtn={arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},uW=["cornerRadius","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomLeft","cornerRadiusBottomRight"];function U5e(e){const t=je(e.condition)?e.condition.map(nye):nye(e.condition);return{...Tl(e),condition:t}}function Tl(e){if(sN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function nye(e){if(sN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return e}function di(e){if(sN(e)){const{expr:t,...n}=e;return{signal:t,...n}}return Rt(e)?e:e!==void 0?{value:e}:void 0}function Qtn(e){return Rt(e)?e.signal:rt(e)}function rye(e){return Rt(e)?e.signal:rt(e.value)}function jf(e){return Rt(e)?e.signal:e==null?null:rt(e)}function Jtn(e,t,n){for(const r of n){const i=Xm(r,t.markDef,t.config);i!==void 0&&(e[r]=di(i))}return e}function z5e(e){return[].concat(e.type,e.style??[])}function Er(e,t,n,r={}){const{vgChannel:i,ignoreVgConfig:s}=r;return i&&t[i]!==void 0?t[i]:t[e]!==void 0?t[e]:s&&(!i||i===e)?void 0:Xm(e,t,n,r)}function Xm(e,t,n,{vgChannel:r}={}){return ps(r?bL(e,t,n.style):void 0,bL(e,t,n.style),r?n[t.type][r]:void 0,n[t.type][e],r?n.mark[r]:n.mark[e])}function bL(e,t,n){return V5e(e,z5e(t),n)}function V5e(e,t,n){t=pt(t);let r;for(const i of t){const s=n[i];s&&s[e]!==void 0&&(r=s[e])}return r}function H5e(e,t){return pt(e).reduce((n,r)=>(n.field.push(at(r,t)),n.order.push(r.sort??"ascending"),n),{field:[],order:[]})}function q5e(e,t){const n=[...e];return t.forEach(r=>{for(const i of n)if(Ol(i,r))return;n.push(r)}),n}function W5e(e,t){return Ol(e,t)||!t?e:e?[...pt(e),...pt(t)].join(", "):t}function G5e(e,t){const n=e.value,r=t.value;if(n==null||r===null)return{explicit:e.explicit,value:null};if((Yg(n)||Rt(n))&&(Yg(r)||Rt(r)))return{explicit:e.explicit,value:W5e(n,r)};if(Yg(n)||Rt(n))return{explicit:e.explicit,value:n};if(Yg(r)||Rt(r))return{explicit:e.explicit,value:r};if(!Yg(n)&&!Rt(n)&&!Yg(r)&&!Rt(r))return{explicit:e.explicit,value:q5e(n,r)};throw new Error("It should never reach here")}function die(e){return`Invalid specification ${zr(e)}. Make sure the specification includes at least one of the following properties: "mark", "layer", "facet", "hconcat", "vconcat", "concat", or "repeat".`}const Ztn='Autosize "fit" only works for single views and layered views.';function iye(e){return`${e=="width"?"Width":"Height"} "container" only works for single views and layered views.`}function sye(e){const t=e=="width"?"Width":"Height",n=e=="width"?"x":"y";return`${t} "container" only works well with autosize "fit" or "fit-${n}".`}function oye(e){return e?`Dropping "fit-${e}" because spec has discrete ${cl(e)}.`:'Dropping "fit" because spec has discrete size.'}function hie(e){return`Unknown field for ${e}. Cannot calculate view size.`}function aye(e){return`Cannot project a selection on encoding channel "${e}", which has no field.`}function enn(e,t){return`Cannot project a selection on encoding channel "${e}" as it uses an aggregate function ("${t}").`}function tnn(e){return`The "nearest" transform is not supported for ${e} marks.`}function Y5e(e){return`Selection not supported for ${e} yet.`}function nnn(e){return`Cannot find a selection named "${e}".`}const rnn="Scale bindings are currently only supported for scales with unbinned, continuous domains.",inn="Sequntial scales are deprecated. The available quantitative scale type values are linear, log, pow, sqrt, symlog, time and utc",snn="Legend bindings are only supported for selections over an individual field or encoding channel.";function onn(e){return`Lookups can only be performed on selection parameters. "${e}" is a variable parameter.`}function ann(e){return`Cannot define and lookup the "${e}" selection in the same view. Try moving the lookup into a second, layered view?`}const unn="The same selection must be used to override scale domains in a layered view.",lnn='Interval selections should be initialized using "x", "y", "longitude", or "latitude" keys.';function cnn(e){return`Unknown repeated value "${e}".`}function uye(e){return`The "columns" property cannot be used when "${e}" has nested row/column.`}const fnn="Axes cannot be shared in concatenated or repeated views yet (https://github.com/vega/vega-lite/issues/2415).";function dnn(e){return`Unrecognized parse "${e}".`}function lye(e,t,n){return`An ancestor parsed field "${e}" as ${n} but a child wants to parse the field as ${t}.`}const hnn="Attempt to add the same child twice.";function pnn(e){return`Ignoring an invalid transform: ${zr(e)}.`}const mnn='If "from.fields" is not specified, "as" has to be a string that specifies the key to be used for the data from the secondary source.';function cye(e){return`Config.customFormatTypes is not true, thus custom format type and format for channel ${e} are dropped.`}function gnn(e){const{parentProjection:t,projection:n}=e;return`Layer's shared projection ${zr(t)} is overridden by a child projection ${zr(n)}.`}const ynn="Arc marks uses theta channel rather than angle, replacing angle with theta.";function vnn(e){return`${e}Offset dropped because ${e} is continuous`}function bnn(e,t,n){return`Channel ${e} is a ${t}. Converted to {value: ${zr(n)}}.`}function K5e(e){return`Invalid field type "${e}".`}function _nn(e,t){return`Invalid field type "${e}" for aggregate: "${t}", using "quantitative" instead.`}function wnn(e){return`Invalid aggregation operator "${e}".`}function X5e(e,t){const{fill:n,stroke:r}=t;return`Dropping color ${e} as the plot also has ${n&&r?"fill and stroke":n?"fill":"stroke"}.`}function Enn(e){return`Position range does not support relative band size for ${e}.`}function lW(e,t){return`Dropping ${zr(e)} from channel "${t}" since it does not contain any data field, datum, value, or signal.`}const xnn="Line marks cannot encode size with a non-groupby field. You may want to use trail marks instead.";function B5(e,t,n){return`${e} dropped as it is incompatible with "${t}".`}function Snn(e){return`${e}-encoding is dropped as ${e} is not a valid encoding channel.`}function Tnn(e){return`${e} encoding should be discrete (ordinal / nominal / binned).`}function Ann(e){return`${e} encoding should be discrete (ordinal / nominal / binned) or use a discretizing scale (e.g. threshold).`}function Cnn(e){return`Facet encoding dropped as ${e.join(" and ")} ${e.length>1?"are":"is"} also specified.`}function gU(e,t){return`Using discrete channel "${e}" to encode "${t}" field can be misleading as it does not encode ${t==="ordinal"?"order":"magnitude"}.`}function Inn(e){return`The ${e} for range marks cannot be an expression`}function knn(e,t){return`Line mark is for continuous lines and thus cannot be used with ${e&&t?"x2 and y2":e?"x2":"y2"}. We will use the rule mark (line segments) instead.`}function Rnn(e,t){return`Specified orient "${e}" overridden with "${t}".`}function Nnn(e){return`Cannot use the scale property "${e}" with non-color channel.`}function Pnn(e){return`Cannot use the relative band size with ${e} scale.`}function Onn(e){return`Using unaggregated domain with raw field has no effect (${zr(e)}).`}function Dnn(e){return`Unaggregated domain not applicable for "${e}" since it produces values outside the origin domain of the source data.`}function $nn(e){return`Unaggregated domain is currently unsupported for log scale (${zr(e)}).`}function Mnn(e){return`Cannot apply size to non-oriented mark "${e}".`}function Lnn(e,t,n){return`Channel "${e}" does not work with "${t}" scale. We are using "${n}" scale instead.`}function Fnn(e,t){return`FieldDef does not work with "${e}" scale. We are using "${t}" scale instead.`}function Q5e(e,t,n){return`${n}-scale's "${t}" is dropped as it does not work with ${e} scale.`}function J5e(e){return`The step for "${e}" is dropped because the ${e==="width"?"x":"y"} is continuous.`}function jnn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${zr(n)} and ${zr(r)}). Using ${zr(n)}.`}function Bnn(e,t,n,r){return`Conflicting ${t.toString()} property "${e.toString()}" (${zr(n)} and ${zr(r)}). Using the union of the two domains.`}function Unn(e){return`Setting the scale to be independent for "${e}" means we also have to set the guide (axis or legend) to be independent.`}function znn(e){return`Dropping sort property ${zr(e)} as unioned domains only support boolean or op "count", "min", and "max".`}const fye="Domains that should be unioned has conflicting sort properties. Sort will be set to true.",Vnn="Detected faceted independent scales that union domain of multiple fields from different data sources. We will use the first field. The result view size may be incorrect.",Hnn="Detected faceted independent scales that union domain of the same fields from different source. We will assume that this is the same field from a different fork of the same data source. However, if this is not the case, the result view size may be incorrect.",qnn="Detected faceted independent scales that union domain of multiple fields from the same data source. We will use the first field. The result view size may be incorrect.";function Wnn(e){return`Cannot stack "${e}" if there is already "${e}2".`}function Gnn(e){return`Stack is applied to a non-linear scale (${e}).`}function Ynn(e){return`Stacking is applied even though the aggregate function is non-summative ("${e}").`}function _L(e,t){return`Invalid ${e}: ${zr(t)}.`}function Knn(e){return`Dropping day from datetime ${zr(e)} as day cannot be combined with other units.`}function Xnn(e,t){return`${t?"extent ":""}${t&&e?"and ":""}${e?"center ":""}${t&&e?"are ":"is "}not needed when data are aggregated.`}function Qnn(e,t,n){return`${e} is not usually used with ${t} for ${n}.`}function Jnn(e,t){return`Continuous axis should not have customized aggregation function ${e}; ${t} already agregates the axis.`}function dye(e){return`1D error band does not support ${e}.`}function Z5e(e){return`Channel ${e} is required for "binned" bin.`}function Znn(e){return`Channel ${e} should not be used with "binned" bin.`}function ern(e){return`Domain for ${e} is required for threshold scale.`}const eje=Wee(qee);let Xx=eje;function trn(e){return Xx=e,Xx}function nrn(){return Xx=eje,Xx}function Je(...e){Xx.warn(...e)}function rrn(...e){Xx.debug(...e)}function x_(e){if(e&&gt(e)){for(const t of mie)if(t in e)return!0}return!1}const tje=["january","february","march","april","may","june","july","august","september","october","november","december"],irn=tje.map(e=>e.substr(0,3)),nje=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"],srn=nje.map(e=>e.substr(0,3));function orn(e){if(N5(e)&&(e=+e),fr(e))return e>4&&Je(_L("quarter",e)),e-1;throw new Error(_L("quarter",e))}function arn(e){if(N5(e)&&(e=+e),fr(e))return e-1;{const t=e.toLowerCase(),n=tje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=irn.indexOf(r);if(i!==-1)return i;throw new Error(_L("month",e))}}function urn(e){if(N5(e)&&(e=+e),fr(e))return e%7;{const t=e.toLowerCase(),n=nje.indexOf(t);if(n!==-1)return n;const r=t.substr(0,3),i=srn.indexOf(r);if(i!==-1)return i;throw new Error(_L("day",e))}}function pie(e,t){const n=[];if(t&&e.day!==void 0&&Ke(e).length>1&&(Je(Knn(e)),e=rn(e),delete e.day),e.year!==void 0?n.push(e.year):n.push(2012),e.month!==void 0){const r=t?arn(e.month):e.month;n.push(r)}else if(e.quarter!==void 0){const r=t?orn(e.quarter):e.quarter;n.push(fr(r)?r*3:`${r}*3`)}else n.push(0);if(e.date!==void 0)n.push(e.date);else if(e.day!==void 0){const r=t?urn(e.day):e.day;n.push(fr(r)?r+1:`${r}+1`)}else n.push(1);for(const r of["hours","minutes","seconds","milliseconds"]){const i=e[r];n.push(typeof i>"u"?0:i)}return n}function Ob(e){const n=pie(e,!0).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function lrn(e){const n=pie(e,!1).join(", ");return e.utc?`utc(${n})`:`datetime(${n})`}function crn(e){const t=pie(e,!0);return e.utc?+new Date(Date.UTC(...t)):+new Date(...t)}const rje={year:1,quarter:1,month:1,week:1,day:1,dayofyear:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1},mie=Ke(rje);function frn(e){return!!rje[e]}function S_(e){return gt(e)?e.binned:ije(e)}function ije(e){return e&&e.startsWith("binned")}function gie(e){return e.startsWith("utc")}function drn(e){return e.substring(3)}const hrn={"year-month":"%b %Y ","year-month-date":"%b %d, %Y "};function U5(e){return mie.filter(t=>oje(e,t))}function sje(e){const t=U5(e);return t[t.length-1]}function oje(e,t){const n=e.indexOf(t);return!(n<0||n>0&&t==="seconds"&&e.charAt(n-1)==="i"||e.length>n+3&&t==="day"&&e.charAt(n+3)==="o"||n>0&&t==="year"&&e.charAt(n-1)==="f")}function prn(e,t,{end:n}={end:!1}){const r=rie(t),i=gie(e)?"utc":"";function s(u){return u==="quarter"?`(${i}quarter(${r})-1)`:`${i}${u}(${r})`}let o;const a={};for(const u of mie)oje(e,u)&&(a[u]=s(u),o=u);return n&&(a[o]+="+1"),lrn(a)}function aje(e){if(!e)return;const t=U5(e);return`timeUnitSpecifier(${zr(t)}, ${zr(hrn)})`}function mrn(e,t,n){if(!e)return;const r=aje(e);return`${n||gie(e)?"utc":"time"}Format(${t}, ${r})`}function mo(e){if(!e)return;let t;return mt(e)?ije(e)?t={unit:e.substring(6),binned:!0}:t={unit:e}:gt(e)&&(t={...e,...e.unit?{unit:e.unit}:{}}),gie(t.unit)&&(t.utc=!0,t.unit=drn(t.unit)),t}function grn(e){const{utc:t,...n}=mo(e);return n.unit?(t?"utc":"")+Ke(n).map(r=>Ri(`${r==="unit"?"":`_${r}_`}${n[r]}`)).join(""):(t?"utc":"")+"timeunit"+Ke(n).map(r=>Ri(`_${r}_${n[r]}`)).join("")}function uje(e,t=n=>n){const n=mo(e),r=sje(n.unit);if(r&&r!=="day"){const i={year:2001,month:1,date:1,hours:0,minutes:0,seconds:0,milliseconds:0},{step:s,part:o}=lje(r,n.step),a={...i,[o]:+i[o]+s};return`${t(Ob(a))} - ${t(Ob(i))}`}}const yrn={year:1,month:1,date:1,hours:1,minutes:1,seconds:1,milliseconds:1};function vrn(e){return!!yrn[e]}function lje(e,t=1){if(vrn(e))return{part:e,step:t};switch(e){case"day":case"dayofyear":return{part:"date",step:t};case"quarter":return{part:"month",step:t*3};case"week":return{part:"date",step:t*7}}}function brn(e){return e==null?void 0:e.param}function yie(e){return!!(e!=null&&e.field)&&e.equal!==void 0}function vie(e){return!!(e!=null&&e.field)&&e.lt!==void 0}function bie(e){return!!(e!=null&&e.field)&&e.lte!==void 0}function _ie(e){return!!(e!=null&&e.field)&&e.gt!==void 0}function wie(e){return!!(e!=null&&e.field)&&e.gte!==void 0}function Eie(e){if(e!=null&&e.field){if(je(e.range)&&e.range.length===2)return!0;if(Rt(e.range))return!0}return!1}function xie(e){return!!(e!=null&&e.field)&&(je(e.oneOf)||je(e.in))}function _rn(e){return!!(e!=null&&e.field)&&e.valid!==void 0}function cje(e){return xie(e)||yie(e)||Eie(e)||vie(e)||_ie(e)||bie(e)||wie(e)}function Nd(e,t){return Q5(e,{timeUnit:t,wrapTime:!0})}function wrn(e,t){return e.map(n=>Nd(n,t))}function fje(e,t=!0){const{field:n}=e,r=mo(e.timeUnit),{unit:i,binned:s}=r||{},o=at(e,{expr:"datum"}),a=i?`time(${s?o:prn(i,n)})`:o;if(yie(e))return`${a}===${Nd(e.equal,i)}`;if(vie(e)){const u=e.lt;return`${a}<${Nd(u,i)}`}else if(_ie(e)){const u=e.gt;return`${a}>${Nd(u,i)}`}else if(bie(e)){const u=e.lte;return`${a}<=${Nd(u,i)}`}else if(wie(e)){const u=e.gte;return`${a}>=${Nd(u,i)}`}else{if(xie(e))return`indexof([${wrn(e.oneOf,i).join(",")}], ${a}) !== -1`;if(_rn(e))return Sie(a,e.valid);if(Eie(e)){const{range:u}=e,l=Rt(u)?{signal:`${u.signal}[0]`}:u[0],c=Rt(u)?{signal:`${u.signal}[1]`}:u[1];if(l!==null&&c!==null&&t)return"inrange("+a+", ["+Nd(l,i)+", "+Nd(c,i)+"])";const f=[];return l!==null&&f.push(`${a} >= ${Nd(l,i)}`),c!==null&&f.push(`${a} <= ${Nd(c,i)}`),f.length>0?f.join(" && "):"true"}}throw new Error(`Invalid field predicate: ${zr(e)}`)}function Sie(e,t=!0){return t?`isValid(${e}) && isFinite(+${e})`:`!isValid(${e}) || !isFinite(+${e})`}function Ern(e){return cje(e)&&e.timeUnit?{...e,timeUnit:mo(e.timeUnit)}:e}const oN={quantitative:"quantitative",ordinal:"ordinal",temporal:"temporal",nominal:"nominal",geojson:"geojson"};function xrn(e){return e==="quantitative"||e==="temporal"}function dje(e){return e==="ordinal"||e==="nominal"}const Db=oN.quantitative,Tie=oN.ordinal,Qx=oN.temporal,Aie=oN.nominal,ET=oN.geojson;function Srn(e){if(e)switch(e=e.toLowerCase(),e){case"q":case Db:return"quantitative";case"t":case Qx:return"temporal";case"o":case Tie:return"ordinal";case"n":case Aie:return"nominal";case ET:return"geojson"}}const Ju={LINEAR:"linear",LOG:"log",POW:"pow",SQRT:"sqrt",SYMLOG:"symlog",IDENTITY:"identity",SEQUENTIAL:"sequential",TIME:"time",UTC:"utc",QUANTILE:"quantile",QUANTIZE:"quantize",THRESHOLD:"threshold",BIN_ORDINAL:"bin-ordinal",ORDINAL:"ordinal",POINT:"point",BAND:"band"},cW={linear:"numeric",log:"numeric",pow:"numeric",sqrt:"numeric",symlog:"numeric",identity:"numeric",sequential:"numeric",time:"time",utc:"time",ordinal:"ordinal","bin-ordinal":"bin-ordinal",point:"ordinal-position",band:"ordinal-position",quantile:"discretizing",quantize:"discretizing",threshold:"discretizing"};function Trn(e,t){const n=cW[e],r=cW[t];return n===r||n==="ordinal-position"&&r==="time"||r==="ordinal-position"&&n==="time"}const Arn={linear:0,log:1,pow:1,sqrt:1,symlog:1,identity:1,sequential:1,time:0,utc:0,point:10,band:11,ordinal:0,"bin-ordinal":0,quantile:0,quantize:0,threshold:0};function hye(e){return Arn[e]}const hje=new Set(["linear","log","pow","sqrt","symlog"]),pje=new Set([...hje,"time","utc"]);function mje(e){return hje.has(e)}const gje=new Set(["quantile","quantize","threshold"]),Crn=new Set([...pje,...gje,"sequential","identity"]),Irn=new Set(["ordinal","bin-ordinal","point","band"]);function go(e){return Irn.has(e)}function Zl(e){return Crn.has(e)}function Bf(e){return pje.has(e)}function Jx(e){return gje.has(e)}const krn={pointPadding:.5,barBandPaddingInner:.1,rectBandPaddingInner:0,bandWithNestedOffsetPaddingInner:.2,bandWithNestedOffsetPaddingOuter:.2,minBandSize:2,minFontSize:8,maxFontSize:40,minOpacity:.3,maxOpacity:.8,minSize:9,minStrokeWidth:1,maxStrokeWidth:4,quantileCount:4,quantizeCount:4,zero:!0};function Rrn(e){return!mt(e)&&!!e.name}function yje(e){return e==null?void 0:e.param}function Nrn(e){return e==null?void 0:e.unionWith}function Prn(e){return gt(e)&&"field"in e}const Orn={type:1,domain:1,domainMax:1,domainMin:1,domainMid:1,domainRaw:1,align:1,range:1,rangeMax:1,rangeMin:1,scheme:1,bins:1,reverse:1,round:1,clamp:1,nice:1,base:1,exponent:1,constant:1,interpolate:1,zero:1,padding:1,paddingInner:1,paddingOuter:1},{type:hmn,domain:pmn,range:mmn,rangeMax:gmn,rangeMin:ymn,scheme:vmn,...Drn}=Orn,$rn=Ke(Drn);function fW(e,t){switch(t){case"type":case"domain":case"reverse":case"range":return!0;case"scheme":case"interpolate":return!["point","band","identity"].includes(e);case"bins":return!["point","band","identity","ordinal"].includes(e);case"round":return Bf(e)||e==="band"||e==="point";case"padding":case"rangeMin":case"rangeMax":return Bf(e)||["point","band"].includes(e);case"paddingOuter":case"align":return["point","band"].includes(e);case"paddingInner":return e==="band";case"domainMax":case"domainMid":case"domainMin":case"domainRaw":case"clamp":return Bf(e);case"nice":return Bf(e)||e==="quantize"||e==="threshold";case"exponent":return e==="pow";case"base":return e==="log";case"constant":return e==="symlog";case"zero":return Zl(e)&&!Wn(["log","time","utc","threshold","quantile"],e)}}function vje(e,t){switch(t){case"interpolate":case"scheme":case"domainMid":return LE(e)?void 0:Nnn(t);case"align":case"type":case"bins":case"domain":case"domainMax":case"domainMin":case"domainRaw":case"range":case"base":case"exponent":case"constant":case"nice":case"padding":case"paddingInner":case"paddingOuter":case"rangeMax":case"rangeMin":case"reverse":case"round":case"clamp":case"zero":return}}function Mrn(e,t){return Wn([Tie,Aie],t)?e===void 0||go(e):t===Qx?Wn([Ju.TIME,Ju.UTC,void 0],e):t===Db?mje(e)||Jx(e)||e===void 0:!0}function Lrn(e,t,n=!1){if(!wg(e))return!1;switch(e){case Ni:case bo:case dv:case wT:case of:case vd:return Bf(t)||t==="band"?!0:t==="point"?!n:!1;case bg:case mv:case _g:case hv:case pv:case __:return Bf(t)||Jx(t)||Wn(["band","point","ordinal"],t);case ul:case fp:case dp:return t!=="band";case gv:case ll:return t==="ordinal"||Jx(t)}}function Cie(e){const{channel:t,channelDef:n,markDef:r,scale:i,config:s}=e,o=kie(e);return Ze(n)&&!F5e(n.aggregate)&&i&&Bf(i.get("type"))?Frn({fieldDef:n,channel:t,markDef:r,ref:o,config:s}):o}function Frn({fieldDef:e,channel:t,markDef:n,ref:r,config:i}){return Er("invalid",n,i)===null?[jrn(e,t),r]:r}function jrn(e,t){const n=Iie(e,!0),i=w_(t)==="y"?{field:{group:"height"}}:{value:0};return{test:n,...i}}function Iie(e,t=!0){return Sie(mt(e)?e:at(e,{expr:"datum"}),!t)}function Brn(e){const{datum:t}=e;return x_(t)?Ob(t):`${zr(t)}`}function Y1(e,t,n,r){const i={};if(t&&(i.scale=t),mp(e)){const{datum:s}=e;x_(s)?i.signal=Ob(s):Rt(s)?i.signal=s.signal:sN(s)?i.signal=s.expr:i.value=s}else i.field=at(e,n);if(r){const{offset:s,band:o}=r;s&&(i.offset=s),o&&(i.band=o)}return i}function wL({scaleName:e,fieldOrDatumDef:t,fieldOrDatumDef2:n,offset:r,startSuffix:i,endSuffix:s="end",bandPosition:o=.5}){const a=!Rt(o)&&0<o&&o<1?"datum":void 0,u=at(t,{expr:a,suffix:i}),l=n!==void 0?at(n,{expr:a}):at(t,{suffix:s,expr:a}),c={};if(o===0||o===1){c.scale=e;const f=o===0?u:l;c.field=f}else{const f=Rt(o)?`(1-${o.signal}) * ${u} + ${o.signal} * ${l}`:`${1-o} * ${u} + ${o} * ${l}`;c.signal=`scale("${e}", ${f})`}return r&&(c.offset=r),c}function Urn({scaleName:e,fieldDef:t}){const n=at(t,{expr:"datum"}),r=at(t,{expr:"datum",suffix:"end"});return`abs(scale("${e}", ${r}) - scale("${e}", ${n}))`}function kie({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l,bandPosition:c}){if(t){if(fn(t)){const f=o==null?void 0:o.get("type");if(ou(t)){c??(c=Py({fieldDef:t,fieldDef2:n,markDef:r,config:i}));const{bin:d,timeUnit:h,type:p}=t;if(oi(d)||c&&h&&p===Qx)return a!=null&&a.impute?Y1(t,s,{binSuffix:"mid"},{offset:u}):c&&!go(f)?wL({scaleName:s,fieldOrDatumDef:t,bandPosition:c,offset:u}):Y1(t,s,cN(t,e)?{binSuffix:"range"}:{},{offset:u});if(Ro(d)){if(Ze(n))return wL({scaleName:s,fieldOrDatumDef:t,fieldOrDatumDef2:n,bandPosition:c,offset:u});Je(Z5e(e===Ni?yd:cp))}}return Y1(t,s,go(f)?{binSuffix:"range"}:{},{offset:u,band:f==="band"?c??t.bandPosition??.5:void 0})}else if(ad(t)){const f=t.value,d=u?{offset:u}:{};return{...T2(e,f),...d}}}return wn(l)&&(l=l()),l&&{...l,...u?{offset:u}:{}}}function T2(e,t){return Wn(["x","x2"],e)&&t==="width"?{field:{group:"width"}}:Wn(["y","y2"],e)&&t==="height"?{field:{group:"height"}}:di(t)}function $b(e){return e&&e!=="number"&&e!=="time"}function bje(e,t,n){return`${e}(${t}${n?`, ${zr(n)}`:""})`}const zrn="  ";function Rie({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s}){var u,l;if($b(n))return Uf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,config:s});const o=_je(e,r,i),a=Zx(e);if(t===void 0&&n===void 0&&s.customFormatTypes){if(a==="quantitative"){if(i&&s.normalizedNumberFormatType)return Uf({fieldOrDatumDef:e,format:s.normalizedNumberFormat,formatType:s.normalizedNumberFormatType,expr:r,config:s});if(s.numberFormatType)return Uf({fieldOrDatumDef:e,format:s.numberFormat,formatType:s.numberFormatType,expr:r,config:s})}if(a==="temporal"&&s.timeFormatType&&Ze(e)&&e.timeUnit===void 0)return Uf({fieldOrDatumDef:e,format:s.timeFormat,formatType:s.timeFormatType,expr:r,config:s})}if(tS(e)){const c=Hrn({field:o,timeUnit:Ze(e)?(u=mo(e.timeUnit))==null?void 0:u.unit:void 0,format:t,formatType:s.timeFormatType,rawTimeFormat:s.timeFormat,isUTCScale:A_(e)&&((l=e.scale)==null?void 0:l.type)===Ju.UTC});return c?{signal:c}:void 0}if(t=dW({type:a,specifiedFormat:t,config:s,normalizeStack:i}),Ze(e)&&oi(e.bin)){const c=at(e,{expr:r,binSuffix:"end"});return{signal:aN(o,c,t,n,s)}}else return t||Zx(e)==="quantitative"?{signal:`${xje(o,t)}`}:{signal:`isValid(${o}) ? ${o} : ""+${o}`}}function _je(e,t,n){return Ze(e)?n?`${at(e,{expr:t,suffix:"end"})}-${at(e,{expr:t,suffix:"start"})}`:at(e,{expr:t}):Brn(e)}function Uf({fieldOrDatumDef:e,format:t,formatType:n,expr:r,normalizeStack:i,config:s,field:o}){if(o??(o=_je(e,r,i)),o!=="datum.value"&&Ze(e)&&oi(e.bin)){const a=at(e,{expr:r,binSuffix:"end"});return{signal:aN(o,a,t,n,s)}}return{signal:bje(n,o,t)}}function wje(e,t,n,r,i,s){var o;if(!(mt(r)&&$b(r))&&!(n===void 0&&r===void 0&&i.customFormatTypes&&Zx(e)==="quantitative"&&(i.normalizedNumberFormatType&&eS(e)&&e.stack==="normalize"||i.numberFormatType))){if(eS(e)&&e.stack==="normalize"&&i.normalizedNumberFormat)return dW({type:"quantitative",config:i,normalizeStack:!0});if(tS(e)){const a=Ze(e)?(o=mo(e.timeUnit))==null?void 0:o.unit:void 0;return a===void 0&&i.customFormatTypes&&i.timeFormatType?void 0:Vrn({specifiedFormat:n,timeUnit:a,config:i,omitTimeFormatConfig:s})}return dW({type:t,specifiedFormat:n,config:i})}}function Eje(e,t,n){var r;if(e&&(Rt(e)||e==="number"||e==="time"))return e;if(tS(t)&&n!=="time"&&n!=="utc")return Ze(t)&&((r=mo(t==null?void 0:t.timeUnit))!=null&&r.utc)?"utc":"time"}function dW({type:e,specifiedFormat:t,config:n,normalizeStack:r}){if(mt(t))return t;if(e===Db)return r?n.normalizedNumberFormat:n.numberFormat}function Vrn({specifiedFormat:e,timeUnit:t,config:n,omitTimeFormatConfig:r}){return e||(t?{signal:aje(t)}:r?void 0:n.timeFormat)}function xje(e,t){return`format(${e}, "${t||""}")`}function pye(e,t,n,r){return $b(n)?bje(n,e,t):xje(e,(mt(t)?t:void 0)??r.numberFormat)}function aN(e,t,n,r,i){if(n===void 0&&r===void 0&&i.customFormatTypes&&i.numberFormatType)return aN(e,t,i.numberFormat,i.numberFormatType,i);const s=pye(e,n,r,i),o=pye(t,n,r,i);return`${Sie(e,!1)} ? "null" : ${s} + "${zrn}" + ${o}`}function Hrn({field:e,timeUnit:t,format:n,formatType:r,rawTimeFormat:i,isUTCScale:s}){return!t||n?!t&&r?`${r}(${e}, '${n}')`:(n=mt(n)?n:i,`${s?"utc":"time"}Format(${e}, '${n}')`):mrn(t,e,s)}const du={arc:"arc",area:"area",bar:"bar",image:"image",line:"line",point:"point",rect:"rect",rule:"rule",text:"text",tick:"tick",trail:"trail",circle:"circle",square:"square",geoshape:"geoshape"},Sje=du.arc,z5=du.area,V5=du.bar,qrn=du.image,H5=du.line,q5=du.point,Wrn=du.rect,EL=du.rule,Tje=du.text,Nie=du.tick,Grn=du.trail,Pie=du.circle,Oie=du.square,Aje=du.geoshape;function T_(e){return["line","area","trail"].includes(e)}function dk(e){return["rect","bar","image","arc"].includes(e)}const Yrn=new Set(Ke(du));function Hh(e){return e.type}const Krn=["stroke","strokeWidth","strokeDash","strokeDashOffset","strokeOpacity","strokeJoin","strokeMiterLimit"],Xrn=["fill","fillOpacity"],Qrn=[...Krn,...Xrn],Jrn={color:1,filled:1,invalid:1,order:1,radius2:1,theta2:1,timeUnitBandSize:1,timeUnitBandPosition:1},mye=Ke(Jrn),Zrn={area:["line","point"],bar:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],rect:["binSpacing","continuousBandSize","discreteBandSize","minBandSize"],line:["point"],tick:["bandSize","thickness"]},ein={color:"#4c78a8",invalid:"filter",timeUnitBandSize:1},tin={mark:1,arc:1,area:1,bar:1,circle:1,image:1,line:1,point:1,rect:1,rule:1,square:1,text:1,tick:1,trail:1,geoshape:1},Cje=Ke(tin);function Mb(e){return e&&e.band!=null}const nin={horizontal:["cornerRadiusTopRight","cornerRadiusBottomRight"],vertical:["cornerRadiusTopLeft","cornerRadiusTopRight"]},Ije=5,rin={binSpacing:1,continuousBandSize:Ije,minBandSize:.25,timeUnitBandPosition:.5},iin={binSpacing:0,continuousBandSize:Ije,minBandSize:.25,timeUnitBandPosition:.5},sin={thickness:1};function oin(e){return Hh(e)?e.type:e}const W5="min",ain={x:1,y:1,color:1,fill:1,stroke:1,strokeWidth:1,size:1,shape:1,fillOpacity:1,strokeOpacity:1,opacity:1,text:1};function gye(e){return e in ain}function kje(e){return!!(e!=null&&e.encoding)}function Ah(e){return e&&(e.op==="count"||!!e.field)}function Rje(e){return e&&je(e)}function uN(e){return"row"in e||"column"in e}function Die(e){return!!e&&"header"in e}function G5(e){return"facet"in e}function uin(e){return e.param}function lin(e){return e&&!mt(e)&&"repeat"in e}function yye(e){const{field:t,timeUnit:n,bin:r,aggregate:i}=e;return{...n?{timeUnit:n}:{},...r?{bin:r}:{},...i?{aggregate:i}:{},field:t}}function $ie(e){return"sort"in e}function Py({fieldDef:e,fieldDef2:t,markDef:n,config:r}){if(fn(e)&&e.bandPosition!==void 0)return e.bandPosition;if(Ze(e)){const{timeUnit:i,bin:s}=e;if(i&&!t)return Xm("timeUnitBandPosition",n,r);if(oi(s))return .5}}function Nje({channel:e,fieldDef:t,fieldDef2:n,markDef:r,config:i,scaleType:s,useVlSizeChannel:o}){var l,c,f;const a=cl(e),u=Er(o?"size":a,r,i,{vgChannel:a});if(u!==void 0)return u;if(Ze(t)){const{timeUnit:d,bin:h}=t;if(d&&!n)return{band:Xm("timeUnitBandSize",r,i)};if(oi(h)&&!go(s))return{band:1}}if(dk(r.type))return s?go(s)?((l=i[r.type])==null?void 0:l.discreteBandSize)||{band:1}:(c=i[r.type])==null?void 0:c.continuousBandSize:(f=i[r.type])==null?void 0:f.discreteBandSize}function Pje(e,t,n,r){return oi(e.bin)||e.timeUnit&&ou(e)&&e.type==="temporal"?Py({fieldDef:e,fieldDef2:t,markDef:n,config:r})!==void 0:!1}function Oje(e){return e&&!!e.sort&&!e.field}function Y5(e){return e&&"condition"in e}function K5(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&Ze(t)}function lN(e){const t=e==null?void 0:e.condition;return!!t&&!je(t)&&fn(t)}function cin(e){const t=e==null?void 0:e.condition;return!!t&&(je(t)||ad(t))}function Ze(e){return e&&(!!e.field||e.aggregate==="count")}function Zx(e){return e==null?void 0:e.type}function mp(e){return e&&"datum"in e}function _0(e){return ou(e)&&!SL(e)||xL(e)}function vye(e){return ou(e)&&e.type==="quantitative"&&!e.bin||xL(e)}function xL(e){return mp(e)&&fr(e.datum)}function fn(e){return Ze(e)||mp(e)}function ou(e){return e&&("field"in e||e.aggregate==="count")&&"type"in e}function ad(e){return e&&"value"in e&&"value"in e}function A_(e){return e&&("scale"in e||"sort"in e)}function eS(e){return e&&("axis"in e||"stack"in e||"impute"in e)}function Dje(e){return e&&"legend"in e}function $je(e){return e&&("format"in e||"formatType"in e)}function fin(e){return Qu(e,["legend","axis","header","scale"])}function din(e){return"op"in e}function at(e,t={}){let n=e.field;const r=t.prefix;let i=t.suffix,s="";if(pin(e))n=S5e("count");else{let o;if(!t.nofn)if(din(e))o=e.op;else{const{bin:a,aggregate:u,timeUnit:l}=e;oi(a)?(o=j5e(a),i=(t.binSuffix??"")+(t.suffix??"")):u?yv(u)?(s=`["${n}"]`,n=`argmax_${u.argmax}`):Km(u)?(s=`["${n}"]`,n=`argmin_${u.argmin}`):o=String(u):l&&!S_(l)&&(o=grn(l),i=(!["range","mid"].includes(t.binSuffix)&&t.binSuffix||"")+(t.suffix??""))}o&&(n=n?`${o}_${n}`:o)}return i&&(n=`${n}_${i}`),r&&(n=`${r}_${n}`),t.forAs?_T(n):t.expr?w5e(n,t.expr)+s:Wc(n)+s}function SL(e){switch(e.type){case"nominal":case"ordinal":case"geojson":return!0;case"quantitative":return Ze(e)&&!!e.bin;case"temporal":return!1}throw new Error(K5e(e.type))}function hin(e){var t;return A_(e)&&Jx((t=e.scale)==null?void 0:t.type)}function pin(e){return e.aggregate==="count"}function min(e,t){var o;const{field:n,bin:r,timeUnit:i,aggregate:s}=e;if(s==="count")return t.countTitle;if(oi(r))return`${n} (binned)`;if(i&&!S_(i)){const a=(o=mo(i))==null?void 0:o.unit;if(a)return`${n} (${U5(a).join("-")})`}else if(s)return yv(s)?`${n} for max ${s.argmax}`:Km(s)?`${n} for min ${s.argmin}`:`${tN(s)} of ${n}`;return n}function gin(e){const{aggregate:t,bin:n,timeUnit:r,field:i}=e;if(yv(t))return`${i} for argmax(${t.argmax})`;if(Km(t))return`${i} for argmin(${t.argmin})`;const s=r&&!S_(r)?mo(r):void 0,o=t||(s==null?void 0:s.unit)||(s==null?void 0:s.maxbins)&&"timeunit"||oi(n)&&"bin";return o?`${o.toUpperCase()}(${i})`:i}const Mje=(e,t)=>{switch(t.fieldTitle){case"plain":return e.field;case"functional":return gin(e);default:return min(e,t)}};let Lje=Mje;function Fje(e){Lje=e}function yin(){Fje(Mje)}function FE(e,t,{allowDisabling:n,includeDefault:r=!0}){var a;const i=(a=Mie(e))==null?void 0:a.title;if(!Ze(e))return i??e.title;const s=e,o=r?Lie(s,t):void 0;return n?ps(i,s.title,o):i??s.title??o}function Mie(e){if(eS(e)&&e.axis)return e.axis;if(Dje(e)&&e.legend)return e.legend;if(Die(e)&&e.header)return e.header}function Lie(e,t){return Lje(e,t)}function TL(e){if($je(e)){const{format:t,formatType:n}=e;return{format:t,formatType:n}}else{const t=Mie(e)??{},{format:n,formatType:r}=t;return{format:n,formatType:r}}}function vin(e,t){var s;switch(t){case"latitude":case"longitude":return"quantitative";case"row":case"column":case"facet":case"shape":case"strokeDash":return"nominal";case"order":return"ordinal"}if($ie(e)&&je(e.sort))return"ordinal";const{aggregate:n,bin:r,timeUnit:i}=e;if(i)return"temporal";if(r||n&&!yv(n)&&!Km(n))return"quantitative";if(A_(e)&&((s=e.scale)!=null&&s.type))switch(cW[e.scale.type]){case"numeric":case"discretizing":return"quantitative";case"time":return"temporal"}return"nominal"}function qh(e){if(Ze(e))return e;if(K5(e))return e.condition}function js(e){if(fn(e))return e;if(lN(e))return e.condition}function jje(e,t,n,r={}){if(mt(e)||fr(e)||lv(e)){const i=mt(e)?"string":fr(e)?"number":"boolean";return Je(bnn(t,i,e)),{value:e}}return fn(e)?AL(e,t,n,r):lN(e)?{...e,condition:AL(e.condition,t,n,r)}:e}function AL(e,t,n,r){if($je(e)){const{format:i,formatType:s,...o}=e;if($b(s)&&!n.customFormatTypes)return Je(cye(t)),AL(o,t,n,r)}else{const i=eS(e)?"axis":Dje(e)?"legend":Die(e)?"header":null;if(i&&e[i]){const{format:s,formatType:o,...a}=e[i];if($b(o)&&!n.customFormatTypes)return Je(cye(t)),AL({...e,[i]:a},t,n,r)}}return Ze(e)?Fie(e,t,r):bin(e)}function bin(e){let t=e.type;if(t)return e;const{datum:n}=e;return t=fr(n)?"quantitative":mt(n)?"nominal":x_(n)?"temporal":void 0,{...e,type:t}}function Fie(e,t,{compositeMark:n=!1}={}){const{aggregate:r,timeUnit:i,bin:s,field:o}=e,a={...e};if(!n&&r&&!fie(r)&&!yv(r)&&!Km(r)&&(Je(wnn(r)),delete a.aggregate),i&&(a.timeUnit=mo(i)),o&&(a.field=`${o}`),oi(s)&&(a.bin=X5(s,t)),Ro(s)&&!ms(t)&&Je(Znn(t)),ou(a)){const{type:u}=a,l=Srn(u);u!==l&&(a.type=l),u!=="quantitative"&&F5e(r)&&(Je(_nn(u,r)),a.type="quantitative")}else if(!P5e(t)){const u=vin(a,t);a.type=u}if(ou(a)){const{compatible:u,warning:l}=_in(a,t)||{};u===!1&&Je(l)}if($ie(a)&&mt(a.sort)){const{sort:u}=a;if(gye(u))return{...a,sort:{encoding:u}};const l=u.substr(1);if(u.charAt(0)==="-"&&gye(l))return{...a,sort:{encoding:l,order:"descending"}}}if(Die(a)){const{header:u}=a;if(u){const{orient:l,...c}=u;if(l)return{...a,header:{...c,labelOrient:u.labelOrient||l,titleOrient:u.titleOrient||l}}}}return a}function X5(e,t){return lv(e)?{maxbins:tye(t)}:e==="binned"?{binned:!0}:!e.maxbins&&!e.step?{...e,maxbins:tye(t)}:e}const iw={compatible:!0};function _in(e,t){const n=e.type;if(n==="geojson"&&t!=="shape")return{compatible:!1,warning:`Channel ${t} should not be used with a geojson data.`};switch(t){case gm:case ym:case P5:return SL(e)?iw:{compatible:!1,warning:Tnn(t)};case Ni:case bo:case dv:case wT:case ul:case fp:case dp:case nN:case rN:case O5:case Pb:case D5:case $5:case __:case of:case vd:case M5:return iw;case _d:case Gc:case bd:case wd:return n!==Db?{compatible:!1,warning:`Channel ${t} should be used with a quantitative field only, not ${e.type} field.`}:iw;case _g:case hv:case pv:case mv:case bg:case vg:case yg:case yd:case cp:return n==="nominal"&&!e.sort?{compatible:!1,warning:`Channel ${t} should not be used with an unsorted discrete field.`}:iw;case ll:case gv:return!SL(e)&&!hin(e)?{compatible:!1,warning:Ann(t)}:iw;case Kx:return e.type==="nominal"&&!("sort"in e)?{compatible:!1,warning:"Channel order is inappropriate for nominal field, which has no inherent order."}:iw}}function tS(e){const{formatType:t}=TL(e);return t==="time"||!t&&win(e)}function win(e){return e&&(e.type==="temporal"||Ze(e)&&!!e.timeUnit)}function Q5(e,{timeUnit:t,type:n,wrapTime:r,undefinedIfExprNotRequired:i}){var u;const s=t&&((u=mo(t))==null?void 0:u.unit);let o=s||n==="temporal",a;return sN(e)?a=e.expr:Rt(e)?a=e.signal:x_(e)?(o=!0,a=Ob(e)):(mt(e)||fr(e))&&o&&(a=`datetime(${zr(e)})`,frn(s)&&(fr(e)&&e<1e4||mt(e)&&isNaN(Date.parse(e)))&&(a=Ob({[s]:e}))),a?r&&o?`time(${a})`:a:i?void 0:zr(e)}function Bje(e,t){const{type:n}=e;return t.map(r=>{const i=Ze(e)&&!S_(e.timeUnit)?e.timeUnit:void 0,s=Q5(r,{timeUnit:i,type:n,undefinedIfExprNotRequired:!0});return s!==void 0?{signal:s}:r})}function cN(e,t){return oi(e.bin)?wg(t)&&["ordinal","nominal"].includes(e.type):(console.warn("Only call this method for binned field defs."),!1)}const bye={labelAlign:{part:"labels",vgProp:"align"},labelBaseline:{part:"labels",vgProp:"baseline"},labelColor:{part:"labels",vgProp:"fill"},labelFont:{part:"labels",vgProp:"font"},labelFontSize:{part:"labels",vgProp:"fontSize"},labelFontStyle:{part:"labels",vgProp:"fontStyle"},labelFontWeight:{part:"labels",vgProp:"fontWeight"},labelOpacity:{part:"labels",vgProp:"opacity"},labelOffset:null,labelPadding:null,gridColor:{part:"grid",vgProp:"stroke"},gridDash:{part:"grid",vgProp:"strokeDash"},gridDashOffset:{part:"grid",vgProp:"strokeDashOffset"},gridOpacity:{part:"grid",vgProp:"opacity"},gridWidth:{part:"grid",vgProp:"strokeWidth"},tickColor:{part:"ticks",vgProp:"stroke"},tickDash:{part:"ticks",vgProp:"strokeDash"},tickDashOffset:{part:"ticks",vgProp:"strokeDashOffset"},tickOpacity:{part:"ticks",vgProp:"opacity"},tickSize:null,tickWidth:{part:"ticks",vgProp:"strokeWidth"}};function fN(e){return e==null?void 0:e.condition}const Uje=["domain","grid","labels","ticks","title"],Ein={grid:"grid",gridCap:"grid",gridColor:"grid",gridDash:"grid",gridDashOffset:"grid",gridOpacity:"grid",gridScale:"grid",gridWidth:"grid",orient:"main",bandPosition:"both",aria:"main",description:"main",domain:"main",domainCap:"main",domainColor:"main",domainDash:"main",domainDashOffset:"main",domainOpacity:"main",domainWidth:"main",format:"main",formatType:"main",labelAlign:"main",labelAngle:"main",labelBaseline:"main",labelBound:"main",labelColor:"main",labelFlush:"main",labelFlushOffset:"main",labelFont:"main",labelFontSize:"main",labelFontStyle:"main",labelFontWeight:"main",labelLimit:"main",labelLineHeight:"main",labelOffset:"main",labelOpacity:"main",labelOverlap:"main",labelPadding:"main",labels:"main",labelSeparation:"main",maxExtent:"main",minExtent:"main",offset:"both",position:"main",tickCap:"main",tickColor:"main",tickDash:"main",tickDashOffset:"main",tickMinStep:"both",tickOffset:"both",tickOpacity:"main",tickRound:"both",ticks:"main",tickSize:"main",tickWidth:"both",title:"main",titleAlign:"main",titleAnchor:"main",titleAngle:"main",titleBaseline:"main",titleColor:"main",titleFont:"main",titleFontSize:"main",titleFontStyle:"main",titleFontWeight:"main",titleLimit:"main",titleLineHeight:"main",titleOpacity:"main",titlePadding:"main",titleX:"main",titleY:"main",encode:"both",scale:"both",tickBand:"both",tickCount:"both",tickExtra:"both",translate:"both",values:"both",zindex:"both"},zje={orient:1,aria:1,bandPosition:1,description:1,domain:1,domainCap:1,domainColor:1,domainDash:1,domainDashOffset:1,domainOpacity:1,domainWidth:1,format:1,formatType:1,grid:1,gridCap:1,gridColor:1,gridDash:1,gridDashOffset:1,gridOpacity:1,gridWidth:1,labelAlign:1,labelAngle:1,labelBaseline:1,labelBound:1,labelColor:1,labelFlush:1,labelFlushOffset:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelLineHeight:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labels:1,labelSeparation:1,maxExtent:1,minExtent:1,offset:1,position:1,tickBand:1,tickCap:1,tickColor:1,tickCount:1,tickDash:1,tickDashOffset:1,tickExtra:1,tickMinStep:1,tickOffset:1,tickOpacity:1,tickRound:1,ticks:1,tickSize:1,tickWidth:1,title:1,titleAlign:1,titleAnchor:1,titleAngle:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titlePadding:1,titleX:1,titleY:1,translate:1,values:1,zindex:1},xin={...zje,style:1,labelExpr:1,encoding:1};function _ye(e){return!!xin[e]}const Sin={axis:1,axisBand:1,axisBottom:1,axisDiscrete:1,axisLeft:1,axisPoint:1,axisQuantitative:1,axisRight:1,axisTemporal:1,axisTop:1,axisX:1,axisXBand:1,axisXDiscrete:1,axisXPoint:1,axisXQuantitative:1,axisXTemporal:1,axisY:1,axisYBand:1,axisYDiscrete:1,axisYPoint:1,axisYQuantitative:1,axisYTemporal:1},Vje=Ke(Sin);function Eg(e){return"mark"in e}class J5{constructor(t,n){this.name=t,this.run=n}hasMatchingType(t){return Eg(t)?oin(t.mark)===this.name:!1}}function K1(e,t){const n=e&&e[t];return n?je(n)?Rb(n,r=>!!r.field):Ze(n)||K5(n):!1}function Hje(e,t){const n=e&&e[t];return n?je(n)?Rb(n,r=>!!r.field):Ze(n)||mp(n)||lN(n):!1}function qje(e,t){if(ms(t)){const n=e[t];if((Ze(n)||mp(n))&&(dje(n.type)||Ze(n)&&n.timeUnit)){const r=aie(t);return Hje(e,r)}}return!1}function jie(e){return Rb(Ttn,t=>{if(K1(e,t)){const n=e[t];if(je(n))return Rb(n,r=>!!r.aggregate);{const r=qh(n);return r&&!!r.aggregate}}return!1})}function Wje(e,t){const n=[],r=[],i=[],s=[],o={};return Bie(e,(a,u)=>{if(Ze(a)){const{field:l,aggregate:c,bin:f,timeUnit:d,...h}=a;if(c||d||f){const p=Mie(a),m=p==null?void 0:p.title;let g=at(a,{forAs:!0});const y={...m?[]:{title:FE(a,t,{allowDisabling:!0})},...h,field:g};if(c){let v;if(yv(c)?(v="argmax",g=at({op:"argmax",field:c.argmax},{forAs:!0}),y.field=`${g}.${l}`):Km(c)?(v="argmin",g=at({op:"argmin",field:c.argmin},{forAs:!0}),y.field=`${g}.${l}`):c!=="boxplot"&&c!=="errorbar"&&c!=="errorband"&&(v=c),v){const b={op:v,as:g};l&&(b.field=l),s.push(b)}}else if(n.push(g),ou(a)&&oi(f)){if(r.push({bin:f,field:l,as:g}),n.push(at(a,{binSuffix:"end"})),cN(a,u)&&n.push(at(a,{binSuffix:"range"})),ms(u)){const v={field:`${g}_end`};o[`${u}2`]=v}y.bin="binned",P5e(u)||(y.type=Db)}else if(d&&!S_(d)){i.push({timeUnit:d,field:l,as:g});const v=ou(a)&&a.type!==Qx&&"time";v&&(u===nN||u===Pb?y.formatType=v:$tn(u)?y.legend={formatType:v,...y.legend}:ms(u)&&(y.axis={formatType:v,...y.axis}))}o[u]=y}else n.push(l),o[u]=e[u]}else o[u]=e[u]}),{bins:r,timeUnits:i,aggregate:s,groupby:n,encoding:o}}function Tin(e,t,n){const r=Ltn(t,n);if(r){if(r==="binned"){const i=e[t===yd?Ni:bo];return!!(Ze(i)&&Ze(e[t])&&Ro(i.bin))}}else return!1;return!0}function Ain(e,t,n,r){const i={};for(const s of Ke(e))N5e(s)||Je(Snn(s));for(let s of Ntn){if(!e[s])continue;const o=e[s];if(iN(s)){const a=Rtn(s),u=i[a];if(Ze(u)&&xrn(u.type)&&Ze(o)&&!u.timeUnit){Je(vnn(a));continue}}if(s==="angle"&&t==="arc"&&!e.theta&&(Je(ynn),s=of),!Tin(e,s,t)){Je(B5(s,t));continue}if(s===bg&&t==="line"){const a=qh(e[s]);if(a!=null&&a.aggregate){Je(xnn);continue}}if(s===ul&&(n?"fill"in e:"stroke"in e)){Je(X5e("encoding",{fill:"fill"in e,stroke:"stroke"in e}));continue}if(s===rN||s===Kx&&!je(o)&&!ad(o)||s===Pb&&je(o)){if(o){if(s===Kx){const a=e[s];if(Oje(a)){i[s]=a;continue}}i[s]=pt(o).reduce((a,u)=>(Ze(u)?a.push(Fie(u,s)):Je(lW(u,s)),a),[])}}else{if(s===Pb&&o===null)i[s]=null;else if(!Ze(o)&&!mp(o)&&!ad(o)&&!Y5(o)&&!Rt(o)){Je(lW(o,s));continue}i[s]=jje(o,s,r)}}return i}function Z5(e,t){const n={};for(const r of Ke(e)){const i=jje(e[r],r,t,{compositeMark:!0});n[r]=i}return n}function Cin(e){const t=[];for(const n of Ke(e))if(K1(e,n)){const r=e[n],i=pt(r);for(const s of i)Ze(s)?t.push(s):K5(s)&&t.push(s.condition)}return t}function Bie(e,t,n){if(e)for(const r of Ke(e)){const i=e[r];if(je(i))for(const s of i)t.call(n,s,r);else t.call(n,i,r)}}function Iin(e,t,n,r){return e?Ke(e).reduce((i,s)=>{const o=e[s];return je(o)?o.reduce((a,u)=>t.call(r,a,u,s),i):t.call(r,i,o,s)},n):n}function Gje(e,t){return Ke(t).reduce((n,r)=>{switch(r){case Ni:case bo:case D5:case M5:case $5:case yd:case cp:case dv:case wT:case of:case vg:case vd:case yg:case bd:case _d:case wd:case Gc:case nN:case ll:case __:case Pb:return n;case Kx:if(e==="line"||e==="trail")return n;case rN:case O5:{const i=t[r];if(je(i)||Ze(i))for(const s of pt(i))s.aggregate||n.push(at(s,{}));return n}case bg:if(e==="trail")return n;case ul:case fp:case dp:case _g:case hv:case pv:case gv:case mv:{const i=qh(t[r]);return i&&!i.aggregate&&n.push(at(i,{})),n}}},[])}function kin(e){const{tooltip:t,...n}=e;if(!t)return{filteredEncoding:n};let r,i;if(je(t)){for(const s of t)s.aggregate?(r||(r=[]),r.push(s)):(i||(i=[]),i.push(s));r&&(n.tooltip=r)}else t.aggregate?n.tooltip=t:i=t;return je(i)&&i.length===1&&(i=i[0]),{customTooltipWithoutAggregatedField:i,filteredEncoding:n}}function hW(e,t,n,r=!0){if("tooltip"in n)return{tooltip:n.tooltip};const i=e.map(({fieldPrefix:o,titlePrefix:a})=>{const u=r?` of ${Uie(t)}`:"";return{field:o+t.field,type:t.type,title:Rt(a)?{signal:`${a}"${escape(u)}"`}:a+u}}),s=Cin(n).map(fin);return{tooltip:[...i,...lh(s,qn)]}}function Uie(e){const{title:t,field:n}=e;return ps(t,n)}function zie(e,t,n,r,i){const{scale:s,axis:o}=n;return({partName:a,mark:u,positionPrefix:l,endPositionPrefix:c=void 0,extraEncoding:f={}})=>{const d=Uie(n);return Yje(e,a,i,{mark:u,encoding:{[t]:{field:`${l}_${n.field}`,type:n.type,...d!==void 0?{title:d}:{},...s!==void 0?{scale:s}:{},...o!==void 0?{axis:o}:{}},...mt(c)?{[`${t}2`]:{field:`${c}_${n.field}`}}:{},...r,...f}})}}function Yje(e,t,n,r){const{clip:i,color:s,opacity:o}=e,a=e.type;return e[t]||e[t]===void 0&&n[t]?[{...r,mark:{...n[t],...i?{clip:i}:{},...s?{color:s}:{},...o?{opacity:o}:{},...Hh(r.mark)?r.mark:{type:r.mark},style:`${a}-${String(t)}`,...lv(e[t])?{}:e[t]}}]:[]}function Kje(e,t,n){const{encoding:r}=e,i=t==="vertical"?"y":"x",s=r[i],o=r[`${i}2`],a=r[`${i}Error`],u=r[`${i}Error2`];return{continuousAxisChannelDef:sO(s,n),continuousAxisChannelDef2:sO(o,n),continuousAxisChannelDefError:sO(a,n),continuousAxisChannelDefError2:sO(u,n),continuousAxis:i}}function sO(e,t){if(e!=null&&e.aggregate){const{aggregate:n,...r}=e;return n!==t&&Je(Jnn(n,t)),r}else return e}function Xje(e,t){const{mark:n,encoding:r}=e,{x:i,y:s}=r;if(Hh(n)&&n.orient)return n.orient;if(_0(i)){if(_0(s)){const o=Ze(i)&&i.aggregate,a=Ze(s)&&s.aggregate;if(!o&&a===t)return"vertical";if(!a&&o===t)return"horizontal";if(o===t&&a===t)throw new Error("Both x and y cannot have aggregate");return tS(s)&&!tS(i)?"horizontal":"vertical"}return"horizontal"}else{if(_0(s))return"vertical";throw new Error(`Need a valid continuous axis for ${t}s`)}}const CL="boxplot",Rin=["box","median","outliers","rule","ticks"],Nin=new J5(CL,Jje);function Qje(e){return fr(e)?"tukey":e}function Jje(e,{config:t}){e={...e,encoding:Z5(e.encoding,t)};const{mark:n,encoding:r,params:i,projection:s,...o}=e,a=Hh(n)?n:{type:n};i&&Je(Y5e("boxplot"));const u=a.extent??t.boxplot.extent,l=Er("size",a,t),c=a.invalid,f=Qje(u),{bins:d,timeUnits:h,transform:p,continuousAxisChannelDef:m,continuousAxis:g,groupby:y,aggregate:v,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:T}=Pin(e,u,t),S=_T(m.field),{color:A,size:C,...k}=b,N=ke=>zie(a,g,m,ke,t.boxplot),D=N(k),O=N(b),$=(gt(t.boxplot.box)?t.boxplot.box.color:t.mark.color)||"#4c78a8",F=N({...k,...C?{size:C}:{},color:{condition:{test:`datum['lower_box_${m.field}'] >= datum['upper_box_${m.field}']`,...A||{value:$}}}}),M=hW([{fieldPrefix:f==="min-max"?"upper_whisker_":"max_",titlePrefix:"Max"},{fieldPrefix:"upper_box_",titlePrefix:"Q3"},{fieldPrefix:"mid_box_",titlePrefix:"Median"},{fieldPrefix:"lower_box_",titlePrefix:"Q1"},{fieldPrefix:f==="min-max"?"lower_whisker_":"min_",titlePrefix:"Min"}],m,b),B={type:"tick",color:"black",opacity:1,orient:w,invalid:c,aria:!1},U=f==="min-max"?M:hW([{fieldPrefix:"upper_whisker_",titlePrefix:"Upper Whisker"},{fieldPrefix:"lower_whisker_",titlePrefix:"Lower Whisker"}],m,b),H=[...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"lower_whisker",endPositionPrefix:"lower_box",extraEncoding:U}),...D({partName:"rule",mark:{type:"rule",invalid:c,aria:!1},positionPrefix:"upper_box",endPositionPrefix:"upper_whisker",extraEncoding:U}),...D({partName:"ticks",mark:B,positionPrefix:"lower_whisker",extraEncoding:U}),...D({partName:"ticks",mark:B,positionPrefix:"upper_whisker",extraEncoding:U})],P=[...f!=="tukey"?H:[],...O({partName:"box",mark:{type:"bar",...l?{size:l}:{},orient:E,invalid:c,ariaRoleDescription:"box"},positionPrefix:"lower_box",endPositionPrefix:"upper_box",extraEncoding:M}),...F({partName:"median",mark:{type:"tick",invalid:c,...gt(t.boxplot.median)&&t.boxplot.median.color?{color:t.boxplot.median.color}:{},...l?{size:l}:{},orient:w,aria:!1},positionPrefix:"mid_box",extraEncoding:M})];if(f==="min-max")return{...o,transform:(o.transform??[]).concat(p),layer:P};const z=`datum["lower_box_${m.field}"]`,W=`datum["upper_box_${m.field}"]`,j=`(${W} - ${z})`,q=`${z} - ${u} * ${j}`,G=`${W} + ${u} * ${j}`,ne=`datum["${m.field}"]`,ce={joinaggregate:Zje(m.field),groupby:y},de={transform:[{filter:`(${q} <= ${ne}) && (${ne} <= ${G})`},{aggregate:[{op:"min",field:m.field,as:`lower_whisker_${S}`},{op:"max",field:m.field,as:`upper_whisker_${S}`},{op:"min",field:`lower_box_${m.field}`,as:`lower_box_${S}`},{op:"max",field:`upper_box_${m.field}`,as:`upper_box_${S}`},...v],groupby:y}],layer:H},{tooltip:he,...ve}=k,{scale:Ie,axis:be}=m,Xe=Uie(m),ze=Qu(be,["title"]),yt=Yje(a,"outliers",t.boxplot,{transform:[{filter:`(${ne} < ${q}) || (${ne} > ${G})`}],mark:"point",encoding:{[g]:{field:m.field,type:m.type,...Xe!==void 0?{title:Xe}:{},...Ie!==void 0?{scale:Ie}:{},...Ur(ze)?{}:{axis:ze}},...ve,...A?{color:A}:{},...T?{tooltip:T}:{}}})[0];let it;const _e=[...d,...h,ce];return yt?it={transform:_e,layer:[yt,de]}:(it=de,it.transform.unshift(..._e)),{...o,layer:[it,{transform:p,layer:P}]}}function Zje(e){const t=_T(e);return[{op:"q1",field:e,as:`lower_box_${t}`},{op:"q3",field:e,as:`upper_box_${t}`}]}function Pin(e,t,n){const r=Xje(e,CL),{continuousAxisChannelDef:i,continuousAxis:s}=Kje(e,r,CL),o=i.field,a=_T(o),u=Qje(t),l=[...Zje(o),{op:"median",field:o,as:`mid_box_${a}`},{op:"min",field:o,as:(u==="min-max"?"lower_whisker_":"min_")+a},{op:"max",field:o,as:(u==="min-max"?"upper_whisker_":"max_")+a}],c=u==="min-max"||u==="tukey"?[]:[{calculate:`datum["upper_box_${a}"] - datum["lower_box_${a}"]`,as:`iqr_${a}`},{calculate:`min(datum["upper_box_${a}"] + datum["iqr_${a}"] * ${t}, datum["max_${a}"])`,as:`upper_whisker_${a}`},{calculate:`max(datum["lower_box_${a}"] - datum["iqr_${a}"] * ${t}, datum["min_${a}"])`,as:`lower_whisker_${a}`}],{[s]:f,...d}=e.encoding,{customTooltipWithoutAggregatedField:h,filteredEncoding:p}=kin(d),{bins:m,timeUnits:g,aggregate:y,groupby:v,encoding:b}=Wje(p,n),w=r==="vertical"?"horizontal":"vertical",E=r,T=[...m,...g,{aggregate:[...y,...l],groupby:v},...c];return{bins:m,timeUnits:g,transform:T,groupby:v,aggregate:y,continuousAxisChannelDef:i,continuousAxis:s,encodingWithoutContinuousAxis:b,ticksOrient:w,boxOrient:E,customTooltipWithoutAggregatedField:h}}const Vie="errorbar",Oin=["ticks","rule"],Din=new J5(Vie,e8e);function e8e(e,{config:t}){e={...e,encoding:Z5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,ticksOrient:o,markDef:a,outerSpec:u,tooltipEncoding:l}=t8e(e,Vie,t);delete s.size;const c=zie(a,i,r,s,t.errorbar),f=a.thickness,d=a.size,h={type:"tick",orient:o,aria:!1,...f!==void 0?{thickness:f}:{},...d!==void 0?{size:d}:{}},p=[...c({partName:"ticks",mark:h,positionPrefix:"lower",extraEncoding:l}),...c({partName:"ticks",mark:h,positionPrefix:"upper",extraEncoding:l}),...c({partName:"rule",mark:{type:"rule",ariaRoleDescription:"errorbar",...f!==void 0?{size:f}:{}},positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:l})];return{...u,transform:n,...p.length>1?{layer:p}:{...p[0]}}}function $in(e,t){const{encoding:n}=e;if(Min(n))return{orient:Xje(e,t),inputType:"raw"};const r=Lin(n),i=Fin(n),s=n.x,o=n.y;if(r){if(i)throw new Error(`${t} cannot be both type aggregated-upper-lower and aggregated-error`);const a=n.x2,u=n.y2;if(fn(a)&&fn(u))throw new Error(`${t} cannot have both x2 and y2`);if(fn(a)){if(_0(s))return{orient:"horizontal",inputType:"aggregated-upper-lower"};throw new Error(`Both x and x2 have to be quantitative in ${t}`)}else if(fn(u)){if(_0(o))return{orient:"vertical",inputType:"aggregated-upper-lower"};throw new Error(`Both y and y2 have to be quantitative in ${t}`)}throw new Error("No ranged axis")}else{const a=n.xError,u=n.xError2,l=n.yError,c=n.yError2;if(fn(u)&&!fn(a))throw new Error(`${t} cannot have xError2 without xError`);if(fn(c)&&!fn(l))throw new Error(`${t} cannot have yError2 without yError`);if(fn(a)&&fn(l))throw new Error(`${t} cannot have both xError and yError with both are quantiative`);if(fn(a)){if(_0(s))return{orient:"horizontal",inputType:"aggregated-error"};throw new Error("All x, xError, and xError2 (if exist) have to be quantitative")}else if(fn(l)){if(_0(o))return{orient:"vertical",inputType:"aggregated-error"};throw new Error("All y, yError, and yError2 (if exist) have to be quantitative")}throw new Error("No ranged axis")}}function Min(e){return(fn(e.x)||fn(e.y))&&!fn(e.x2)&&!fn(e.y2)&&!fn(e.xError)&&!fn(e.xError2)&&!fn(e.yError)&&!fn(e.yError2)}function Lin(e){return fn(e.x2)||fn(e.y2)}function Fin(e){return fn(e.xError)||fn(e.xError2)||fn(e.yError)||fn(e.yError2)}function t8e(e,t,n){const{mark:r,encoding:i,params:s,projection:o,...a}=e,u=Hh(r)?r:{type:r};s&&Je(Y5e(t));const{orient:l,inputType:c}=$in(e,t),{continuousAxisChannelDef:f,continuousAxisChannelDef2:d,continuousAxisChannelDefError:h,continuousAxisChannelDefError2:p,continuousAxis:m}=Kje(e,l,t),{errorBarSpecificAggregate:g,postAggregateCalculates:y,tooltipSummary:v,tooltipTitleWithFieldName:b}=jin(u,f,d,h,p,c,t,n),{[m]:w,[m==="x"?"x2":"y2"]:E,[m==="x"?"xError":"yError"]:T,[m==="x"?"xError2":"yError2"]:S,...A}=i,{bins:C,timeUnits:k,aggregate:N,groupby:D,encoding:O}=Wje(A,n),$=[...N,...g],F=c!=="raw"?[]:D,M=hW(v,f,O,b);return{transform:[...a.transform??[],...C,...k,...$.length===0?[]:[{aggregate:$,groupby:F}],...y],groupby:F,continuousAxisChannelDef:f,continuousAxis:m,encodingWithoutContinuousAxis:O,ticksOrient:l==="vertical"?"horizontal":"vertical",markDef:u,outerSpec:a,tooltipEncoding:M}}function jin(e,t,n,r,i,s,o,a){let u=[],l=[];const c=t.field;let f,d=!1;if(s==="raw"){const h=e.center?e.center:e.extent?e.extent==="iqr"?"median":"mean":a.errorbar.center,p=e.extent?e.extent:h==="mean"?"stderr":"iqr";if(h==="median"!=(p==="iqr")&&Je(Qnn(h,p,o)),p==="stderr"||p==="stdev")u=[{op:p,field:c,as:`extent_${c}`},{op:h,field:c,as:`center_${c}`}],l=[{calculate:`datum["center_${c}"] + datum["extent_${c}"]`,as:`upper_${c}`},{calculate:`datum["center_${c}"] - datum["extent_${c}"]`,as:`lower_${c}`}],f=[{fieldPrefix:"center_",titlePrefix:tN(h)},{fieldPrefix:"upper_",titlePrefix:wye(h,p,"+")},{fieldPrefix:"lower_",titlePrefix:wye(h,p,"-")}],d=!0;else{let m,g,y;p==="ci"?(m="mean",g="ci0",y="ci1"):(m="median",g="q1",y="q3"),u=[{op:g,field:c,as:`lower_${c}`},{op:y,field:c,as:`upper_${c}`},{op:m,field:c,as:`center_${c}`}],f=[{fieldPrefix:"upper_",titlePrefix:FE({field:c,aggregate:y,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"lower_",titlePrefix:FE({field:c,aggregate:g,type:"quantitative"},a,{allowDisabling:!1})},{fieldPrefix:"center_",titlePrefix:FE({field:c,aggregate:m,type:"quantitative"},a,{allowDisabling:!1})}]}}else{(e.center||e.extent)&&Je(Xnn(e.center,e.extent)),s==="aggregated-upper-lower"?(f=[],l=[{calculate:`datum["${n.field}"]`,as:`upper_${c}`},{calculate:`datum["${c}"]`,as:`lower_${c}`}]):s==="aggregated-error"&&(f=[{fieldPrefix:"",titlePrefix:c}],l=[{calculate:`datum["${c}"] + datum["${r.field}"]`,as:`upper_${c}`}],i?l.push({calculate:`datum["${c}"] + datum["${i.field}"]`,as:`lower_${c}`}):l.push({calculate:`datum["${c}"] - datum["${r.field}"]`,as:`lower_${c}`}));for(const h of l)f.push({fieldPrefix:h.as.substring(0,6),titlePrefix:Nb(Nb(h.calculate,'datum["',""),'"]',"")})}return{postAggregateCalculates:l,errorBarSpecificAggregate:u,tooltipSummary:f,tooltipTitleWithFieldName:d}}function wye(e,t,n){return`${tN(e)} ${n} ${t}`}const Hie="errorband",Bin=["band","borders"],Uin=new J5(Hie,n8e);function n8e(e,{config:t}){e={...e,encoding:Z5(e.encoding,t)};const{transform:n,continuousAxisChannelDef:r,continuousAxis:i,encodingWithoutContinuousAxis:s,markDef:o,outerSpec:a,tooltipEncoding:u}=t8e(e,Hie,t),l=o,c=zie(l,i,r,s,t.errorband),f=e.encoding.x!==void 0&&e.encoding.y!==void 0;let d={type:f?"area":"rect"},h={type:f?"line":"rule"};const p={...l.interpolate?{interpolate:l.interpolate}:{},...l.tension&&l.interpolate?{tension:l.tension}:{}};return f?(d={...d,...p,ariaRoleDescription:"errorband"},h={...h,...p,aria:!1}):l.interpolate?Je(dye("interpolate")):l.tension&&Je(dye("tension")),{...a,transform:n,layer:[...c({partName:"band",mark:d,positionPrefix:"lower",endPositionPrefix:"upper",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"lower",extraEncoding:u}),...c({partName:"borders",mark:h,positionPrefix:"upper",extraEncoding:u})]}}const r8e={};function qie(e,t,n){const r=new J5(e,t);r8e[e]={normalizer:r,parts:n}}function zin(){return Ke(r8e)}qie(CL,Jje,Rin);qie(Vie,e8e,Oin);qie(Hie,n8e,Bin);const Vin=["gradientHorizontalMaxLength","gradientHorizontalMinLength","gradientVerticalMaxLength","gradientVerticalMinLength","unselectedOpacity"],i8e={titleAlign:"align",titleAnchor:"anchor",titleAngle:"angle",titleBaseline:"baseline",titleColor:"color",titleFont:"font",titleFontSize:"fontSize",titleFontStyle:"fontStyle",titleFontWeight:"fontWeight",titleLimit:"limit",titleLineHeight:"lineHeight",titleOrient:"orient",titlePadding:"offset"},s8e={labelAlign:"align",labelAnchor:"anchor",labelAngle:"angle",labelBaseline:"baseline",labelColor:"color",labelFont:"font",labelFontSize:"fontSize",labelFontStyle:"fontStyle",labelFontWeight:"fontWeight",labelLimit:"limit",labelLineHeight:"lineHeight",labelOrient:"orient",labelPadding:"offset"},Hin=Ke(i8e),qin=Ke(s8e),Win={header:1,headerRow:1,headerColumn:1,headerFacet:1},o8e=Ke(Win),a8e=["size","shape","fill","stroke","strokeDash","strokeWidth","opacity"],Gin={gradientHorizontalMaxLength:200,gradientHorizontalMinLength:100,gradientVerticalMaxLength:200,gradientVerticalMinLength:64,unselectedOpacity:.35},Yin={aria:1,clipHeight:1,columnPadding:1,columns:1,cornerRadius:1,description:1,direction:1,fillColor:1,format:1,formatType:1,gradientLength:1,gradientOpacity:1,gradientStrokeColor:1,gradientStrokeWidth:1,gradientThickness:1,gridAlign:1,labelAlign:1,labelBaseline:1,labelColor:1,labelFont:1,labelFontSize:1,labelFontStyle:1,labelFontWeight:1,labelLimit:1,labelOffset:1,labelOpacity:1,labelOverlap:1,labelPadding:1,labelSeparation:1,legendX:1,legendY:1,offset:1,orient:1,padding:1,rowPadding:1,strokeColor:1,symbolDash:1,symbolDashOffset:1,symbolFillColor:1,symbolLimit:1,symbolOffset:1,symbolOpacity:1,symbolSize:1,symbolStrokeColor:1,symbolStrokeWidth:1,symbolType:1,tickCount:1,tickMinStep:1,title:1,titleAlign:1,titleAnchor:1,titleBaseline:1,titleColor:1,titleFont:1,titleFontSize:1,titleFontStyle:1,titleFontWeight:1,titleLimit:1,titleLineHeight:1,titleOpacity:1,titleOrient:1,titlePadding:1,type:1,values:1,zindex:1},ud="_vgsid_",Kin={point:{on:"click",fields:[ud],toggle:"event.shiftKey",resolve:"global",clear:"dblclick"},interval:{on:"[pointerdown, window:pointerup] > window:pointermove!",encodings:["x","y"],translate:"[pointerdown, window:pointerup] > window:pointermove!",zoom:"wheel!",mark:{fill:"#333",fillOpacity:.125,stroke:"white"},resolve:"global",clear:"dblclick"}};function Wie(e){return e==="legend"||!!(e!=null&&e.legend)}function yU(e){return Wie(e)&&gt(e)}function Gie(e){return!!(e!=null&&e.select)}function u8e(e){const t=[];for(const n of e||[]){if(Gie(n))continue;const{expr:r,bind:i,...s}=n;if(i&&r){const o={...s,bind:i,init:r};t.push(o)}else{const o={...s,...r?{update:r}:{},...i?{bind:i}:{}};t.push(o)}}return t}function Xin(e){return ej(e)||Kie(e)||Yie(e)}function Yie(e){return"concat"in e}function ej(e){return"vconcat"in e}function Kie(e){return"hconcat"in e}function l8e({step:e,offsetIsDiscrete:t}){return t?e.for??"offset":"position"}function Wh(e){return gt(e)&&e.step!==void 0}function Eye(e){return e.view||e.width||e.height}const xye=20,Qin={align:1,bounds:1,center:1,columns:1,spacing:1},Jin=Ke(Qin);function Zin(e,t,n){const r=n[t],i={},{spacing:s,columns:o}=r;s!==void 0&&(i.spacing=s),o!==void 0&&(G5(e)&&!uN(e.facet)||Yie(e))&&(i.columns=o),ej(e)&&(i.columns=1);for(const a of Jin)if(e[a]!==void 0)if(a==="spacing"){const u=e[a];i[a]=fr(u)?u:{row:u.row??s,column:u.column??s}}else i[a]=e[a];return i}function pW(e,t){return e[t]??e[t==="width"?"continuousWidth":"continuousHeight"]}function IL(e,t){const n=kL(e,t);return Wh(n)?n.step:c8e}function kL(e,t){const n=e[t]??e[t==="width"?"discreteWidth":"discreteHeight"];return ps(n,{step:e.step})}const c8e=20,esn={continuousWidth:200,continuousHeight:200,step:c8e},tsn={background:"white",padding:5,timeFormat:"%b %d, %Y",countTitle:"Count of Records",view:esn,mark:ein,arc:{},area:{},bar:rin,circle:{},geoshape:{},image:{},line:{},point:{},rect:iin,rule:{color:"black"},square:{},text:{color:"black"},tick:sin,trail:{},boxplot:{size:14,extent:1.5,box:{},median:{color:"white"},outliers:{},rule:{},ticks:null},errorbar:{center:"mean",rule:!0,ticks:!1},errorband:{band:{opacity:.3},borders:!1},scale:krn,projection:{},legend:Gin,header:{titlePadding:10,labelPadding:10},headerColumn:{},headerRow:{},headerFacet:{},selection:Kin,style:{},title:{},facet:{spacing:xye},concat:{spacing:xye},normalizedNumberFormat:".0%"},Cp=["#4c78a8","#f58518","#e45756","#72b7b2","#54a24b","#eeca3b","#b279a2","#ff9da6","#9d755d","#bab0ac"],Sye={text:11,guideLabel:10,guideTitle:11,groupTitle:13,groupSubtitle:12},Tye={blue:Cp[0],orange:Cp[1],red:Cp[2],teal:Cp[3],green:Cp[4],yellow:Cp[5],purple:Cp[6],pink:Cp[7],brown:Cp[8],gray0:"#000",gray1:"#111",gray2:"#222",gray3:"#333",gray4:"#444",gray5:"#555",gray6:"#666",gray7:"#777",gray8:"#888",gray9:"#999",gray10:"#aaa",gray11:"#bbb",gray12:"#ccc",gray13:"#ddd",gray14:"#eee",gray15:"#fff"};function nsn(e={}){return{signals:[{name:"color",value:gt(e)?{...Tye,...e}:Tye}],mark:{color:{signal:"color.blue"}},rule:{color:{signal:"color.gray0"}},text:{color:{signal:"color.gray0"}},style:{"guide-label":{fill:{signal:"color.gray0"}},"guide-title":{fill:{signal:"color.gray0"}},"group-title":{fill:{signal:"color.gray0"}},"group-subtitle":{fill:{signal:"color.gray0"}},cell:{stroke:{signal:"color.gray8"}}},axis:{domainColor:{signal:"color.gray13"},gridColor:{signal:"color.gray8"},tickColor:{signal:"color.gray13"}},range:{category:[{signal:"color.blue"},{signal:"color.orange"},{signal:"color.red"},{signal:"color.teal"},{signal:"color.green"},{signal:"color.yellow"},{signal:"color.purple"},{signal:"color.pink"},{signal:"color.brown"},{signal:"color.grey8"}]}}}function rsn(e){return{signals:[{name:"fontSize",value:gt(e)?{...Sye,...e}:Sye}],text:{fontSize:{signal:"fontSize.text"}},style:{"guide-label":{fontSize:{signal:"fontSize.guideLabel"}},"guide-title":{fontSize:{signal:"fontSize.guideTitle"}},"group-title":{fontSize:{signal:"fontSize.groupTitle"}},"group-subtitle":{fontSize:{signal:"fontSize.groupSubtitle"}}}}}function isn(e){return{text:{font:e},style:{"guide-label":{font:e},"guide-title":{font:e},"group-title":{font:e},"group-subtitle":{font:e}}}}function f8e(e){const t=Ke(e||{}),n={};for(const r of t){const i=e[r];n[r]=fN(i)?U5e(i):Tl(i)}return n}function ssn(e){const t=Ke(e),n={};for(const r of t)n[r]=f8e(e[r]);return n}const osn=[...Cje,...Vje,...o8e,"background","padding","legend","lineBreak","scale","style","title","view"];function d8e(e={}){const{color:t,font:n,fontSize:r,selection:i,...s}=e,o=lT({},rn(tsn),n?isn(n):{},t?nsn(t):{},r?rsn(r):{},s||{});i&&cT(o,"selection",i,!0);const a=Qu(o,osn);for(const u of["background","lineBreak","padding"])o[u]&&(a[u]=Tl(o[u]));for(const u of Cje)o[u]&&(a[u]=Ou(o[u]));for(const u of Vje)o[u]&&(a[u]=f8e(o[u]));for(const u of o8e)o[u]&&(a[u]=Ou(o[u]));return o.legend&&(a.legend=Ou(o.legend)),o.scale&&(a.scale=Ou(o.scale)),o.style&&(a.style=ssn(o.style)),o.title&&(a.title=Ou(o.title)),o.view&&(a.view=Ou(o.view)),a}const asn=new Set(["view",...Yrn]),usn=["color","fontSize","background","padding","facet","concat","numberFormat","numberFormatType","normalizedNumberFormat","normalizedNumberFormatType","timeFormat","countTitle","header","axisQuantitative","axisTemporal","axisDiscrete","axisPoint","axisXBand","axisXPoint","axisXDiscrete","axisXQuantitative","axisXTemporal","axisYBand","axisYPoint","axisYDiscrete","axisYQuantitative","axisYTemporal","scale","selection","overlay"],lsn={view:["continuousWidth","continuousHeight","discreteWidth","discreteHeight","step"],...Zrn};function csn(e){e=rn(e);for(const t of usn)delete e[t];if(e.axis)for(const t in e.axis)fN(e.axis[t])&&delete e.axis[t];if(e.legend)for(const t of Vin)delete e.legend[t];if(e.mark){for(const t of mye)delete e.mark[t];e.mark.tooltip&&gt(e.mark.tooltip)&&delete e.mark.tooltip}e.params&&(e.signals=(e.signals||[]).concat(u8e(e.params)),delete e.params);for(const t of asn){for(const r of mye)delete e[t][r];const n=lsn[t];if(n)for(const r of n)delete e[t][r];dsn(e,t)}for(const t of zin())delete e[t];fsn(e);for(const t in e)gt(e[t])&&Ur(e[t])&&delete e[t];return Ur(e)?void 0:e}function fsn(e){const{titleMarkConfig:t,subtitleMarkConfig:n,subtitle:r}=B5e(e.title);Ur(t)||(e.style["group-title"]={...e.style["group-title"],...t}),Ur(n)||(e.style["group-subtitle"]={...e.style["group-subtitle"],...n}),Ur(r)?delete e.title:e.title=r}function dsn(e,t,n,r){const i=e[t];t==="view"&&(n="cell");const s={...i,...e.style[n??t]};Ur(s)||(e.style[n??t]=s),delete e[t]}function tj(e){return"layer"in e}function hsn(e){return"repeat"in e}function psn(e){return!je(e.repeat)&&e.repeat.layer}class Xie{map(t,n){return G5(t)?this.mapFacet(t,n):hsn(t)?this.mapRepeat(t,n):Kie(t)?this.mapHConcat(t,n):ej(t)?this.mapVConcat(t,n):Yie(t)?this.mapConcat(t,n):this.mapLayerOrUnit(t,n)}mapLayerOrUnit(t,n){if(tj(t))return this.mapLayer(t,n);if(Eg(t))return this.mapUnit(t,n);throw new Error(die(t))}mapLayer(t,n){return{...t,layer:t.layer.map(r=>this.mapLayerOrUnit(r,n))}}mapHConcat(t,n){return{...t,hconcat:t.hconcat.map(r=>this.map(r,n))}}mapVConcat(t,n){return{...t,vconcat:t.vconcat.map(r=>this.map(r,n))}}mapConcat(t,n){const{concat:r,...i}=t;return{...i,concat:r.map(s=>this.map(s,n))}}mapFacet(t,n){return{...t,spec:this.map(t.spec,n)}}mapRepeat(t,n){return{...t,spec:this.map(t.spec,n)}}}const msn={zero:1,center:1,normalize:1};function gsn(e){return e in msn}const ysn=new Set([Sje,V5,z5,EL,q5,Pie,Oie,H5,Tje,Nie]),vsn=new Set([V5,z5,Sje]);function sw(e){return Ze(e)&&Zx(e)==="quantitative"&&!e.bin}function Aye(e,t,{orient:n,type:r}){const i=t==="x"?"y":"radius",s=t==="x"&&["bar","area"].includes(r),o=e[t],a=e[i];if(Ze(o)&&Ze(a))if(sw(o)&&sw(a)){if(o.stack)return t;if(a.stack)return i;const u=Ze(o)&&!!o.aggregate,l=Ze(a)&&!!a.aggregate;if(u!==l)return u?t:i;if(s){if(n==="vertical")return i;if(n==="horizontal")return t}}else{if(sw(o))return t;if(sw(a))return i}else{if(sw(o))return s&&n==="vertical"?void 0:t;if(sw(a))return s&&n==="horizontal"?void 0:i}}function bsn(e){switch(e){case"x":return"y";case"y":return"x";case"theta":return"radius";case"radius":return"theta"}}function h8e(e,t){var m,g;const n=Hh(e)?e:{type:e},r=n.type;if(!ysn.has(r))return null;const i=Aye(t,"x",n)||Aye(t,"theta",n);if(!i)return null;const s=t[i],o=Ze(s)?at(s,{}):void 0,a=bsn(i),u=[],l=new Set;if(t[a]){const y=t[a],v=Ze(y)?at(y,{}):void 0;v&&v!==o&&(u.push(a),l.add(v))}const c=a==="x"?"xOffset":"yOffset",f=t[c],d=Ze(f)?at(f,{}):void 0;d&&d!==o&&(u.push(c),l.add(d));const h=Ptn.reduce((y,v)=>{if(v!=="tooltip"&&K1(t,v)){const b=t[v];for(const w of pt(b)){const E=qh(w);if(E.aggregate)continue;const T=at(E,{});(!T||!l.has(T))&&y.push({channel:v,fieldDef:E})}}return y},[]);let p;return s.stack!==void 0?lv(s.stack)?p=s.stack?"zero":null:p=s.stack:vsn.has(r)&&(p="zero"),!p||!gsn(p)||jie(t)&&h.length===0?null:((m=s==null?void 0:s.scale)!=null&&m.type&&((g=s==null?void 0:s.scale)==null?void 0:g.type)!==Ju.LINEAR&&s!=null&&s.stack&&Je(Gnn(s.scale.type)),fn(t[hp(i)])?(s.stack!==void 0&&Je(Wnn(i)),null):(Ze(s)&&s.aggregate&&!Htn.has(s.aggregate)&&Je(Ynn(s.aggregate)),{groupbyChannels:u,groupbyFields:l,fieldChannel:i,impute:s.impute===null?!1:T_(r),stackBy:h,offset:p}))}function p8e(e,t,n){const r=Ou(e),i=Er("orient",r,n);if(r.orient=xsn(r.type,t,i),i!==void 0&&i!==r.orient&&Je(Rnn(r.orient,i)),r.type==="bar"&&r.orient){const u=Er("cornerRadiusEnd",r,n);if(u!==void 0){const l=r.orient==="horizontal"&&t.x2||r.orient==="vertical"&&t.y2?["cornerRadius"]:nin[r.orient];for(const c of l)r[c]=u;r.cornerRadiusEnd!==void 0&&delete r.cornerRadiusEnd}}const s=Er("opacity",r,n),o=Er("fillOpacity",r,n);return s===void 0&&o===void 0&&(r.opacity=wsn(r.type,t)),Er("cursor",r,n)===void 0&&(r.cursor=_sn(r,t,n)),r}function _sn(e,t,n){return t.href||e.href||Er("href",e,n)?"pointer":e.cursor}function wsn(e,t){if(Wn([q5,Nie,Pie,Oie],e)&&!jie(t))return .7}function Esn(e,t,{graticule:n}){if(n)return!1;const r=Xm("filled",e,t),i=e.type;return ps(r,i!==q5&&i!==H5&&i!==EL)}function xsn(e,t,n){switch(e){case q5:case Pie:case Oie:case Tje:case Wrn:case qrn:return}const{x:r,y:i,x2:s,y2:o}=t;switch(e){case V5:if(Ze(r)&&(Ro(r.bin)||Ze(i)&&i.aggregate&&!r.aggregate))return"vertical";if(Ze(i)&&(Ro(i.bin)||Ze(r)&&r.aggregate&&!i.aggregate))return"horizontal";if(o||s){if(n)return n;if(!s)return(Ze(r)&&r.type===Db&&!oi(r.bin)||xL(r))&&Ze(i)&&Ro(i.bin)?"horizontal":"vertical";if(!o)return(Ze(i)&&i.type===Db&&!oi(i.bin)||xL(i))&&Ze(r)&&Ro(r.bin)?"vertical":"horizontal"}case EL:if(s&&!(Ze(r)&&Ro(r.bin))&&o&&!(Ze(i)&&Ro(i.bin)))return;case z5:if(o)return Ze(i)&&Ro(i.bin)?"horizontal":"vertical";if(s)return Ze(r)&&Ro(r.bin)?"vertical":"horizontal";if(e===EL){if(r&&!i)return"vertical";if(i&&!r)return"horizontal"}case H5:case Nie:{const a=vye(r),u=vye(i);if(n)return n;if(a&&!u)return e!=="tick"?"horizontal":"vertical";if(!a&&u)return e!=="tick"?"vertical":"horizontal";if(a&&u)return"vertical";{const l=ou(r)&&r.type===Qx,c=ou(i)&&i.type===Qx;if(l&&!c)return"vertical";if(!l&&c)return"horizontal"}return}}return"vertical"}function Ssn(e){const{point:t,line:n,...r}=e;return Ke(r).length>1?r:r.type}function Tsn(e){for(const t of["line","area","rule","trail"])e[t]&&(e={...e,[t]:Qu(e[t],["point","line"])});return e}function vU(e,t={},n){return e.point==="transparent"?{opacity:0}:e.point?gt(e.point)?e.point:{}:e.point!==void 0?null:t.point||n.shape?gt(t.point)?t.point:{}:void 0}function Cye(e,t={}){return e.line?e.line===!0?{}:e.line:e.line!==void 0?null:t.line?t.line===!0?{}:t.line:void 0}class Asn{constructor(){this.name="path-overlay"}hasMatchingType(t,n){if(Eg(t)){const{mark:r,encoding:i}=t,s=Hh(r)?r:{type:r};switch(s.type){case"line":case"rule":case"trail":return!!vU(s,n[s.type],i);case"area":return!!vU(s,n[s.type],i)||!!Cye(s,n[s.type])}}return!1}run(t,n,r){const{config:i}=n,{params:s,projection:o,mark:a,name:u,encoding:l,...c}=t,f=Z5(l,i),d=Hh(a)?a:{type:a},h=vU(d,i[d.type],f),p=d.type==="area"&&Cye(d,i[d.type]),m=[{name:u,...s?{params:s}:{},mark:Ssn({...d.type==="area"&&d.opacity===void 0&&d.fillOpacity===void 0?{opacity:.7}:{},...d}),encoding:Qu(f,["shape"])}],g=h8e(p8e(d,f,i),f);let y=f;if(g){const{fieldChannel:v,offset:b}=g;y={...f,[v]:{...f[v],...b?{stack:b}:{}}}}return y=Qu(y,["y2","x2"]),p&&m.push({...o?{projection:o}:{},mark:{type:"line",...Gx(d,["clip","interpolate","tension","tooltip"]),...p},encoding:y}),h&&m.push({...o?{projection:o}:{},mark:{type:"point",opacity:1,filled:!0,...Gx(d,["clip","tooltip"]),...h},encoding:y}),r({...c,layer:m},{...n,config:Tsn(i)})}}function Csn(e,t){return t?uN(e)?g8e(e,t):m8e(e,t):e}function bU(e,t){return t?g8e(e,t):e}function mW(e,t,n){const r=t[e];if(lin(r)){if(r.repeat in n)return{...t,[e]:n[r.repeat]};Je(cnn(r.repeat));return}return t}function m8e(e,t){if(e=mW("field",e,t),e!==void 0){if(e===null)return null;if($ie(e)&&Ah(e.sort)){const n=mW("field",e.sort,t);e={...e,...n?{sort:n}:{}}}return e}}function Iye(e,t){if(Ze(e))return m8e(e,t);{const n=mW("datum",e,t);return n!==e&&!n.type&&(n.type="nominal"),n}}function kye(e,t){if(fn(e)){const n=Iye(e,t);if(n)return n;if(Y5(e))return{condition:e.condition}}else{if(lN(e)){const n=Iye(e.condition,t);if(n)return{...e,condition:n};{const{condition:r,...i}=e;return i}}return e}}function g8e(e,t){const n={};for(const r in e)if(jt(e,r)){const i=e[r];if(je(i))n[r]=i.map(s=>kye(s,t)).filter(s=>s);else{const s=kye(i,t);s!==void 0&&(n[r]=s)}}return n}class Isn{constructor(){this.name="RuleForRangedLine"}hasMatchingType(t){if(Eg(t)){const{encoding:n,mark:r}=t;if(r==="line"||Hh(r)&&r.type==="line")for(const i of ktn){const s=w_(i),o=n[s];if(n[i]&&(Ze(o)&&!Ro(o.bin)||mp(o)))return!0}}return!1}run(t,n,r){const{encoding:i,mark:s}=t;return Je(knn(!!i.x2,!!i.y2)),r({...t,mark:gt(s)?{...s,type:"rule"}:"rule"},n)}}class ksn extends Xie{constructor(){super(...arguments),this.nonFacetUnitNormalizers=[Nin,Din,Uin,new Asn,new Isn]}map(t,n){if(Eg(t)){const r=K1(t.encoding,gm),i=K1(t.encoding,ym),s=K1(t.encoding,P5);if(r||i||s)return this.mapFacetedUnit(t,n)}return super.map(t,n)}mapUnit(t,n){const{parentEncoding:r,parentProjection:i}=n,s=bU(t.encoding,n.repeater),o={...t,...t.name?{name:[n.repeaterPrefix,t.name].filter(u=>u).join("_")}:{},...s?{encoding:s}:{}};if(r||i)return this.mapUnitWithParentEncodingOrProjection(o,n);const a=this.mapLayerOrUnit.bind(this);for(const u of this.nonFacetUnitNormalizers)if(u.hasMatchingType(o,n.config))return u.run(o,n,a);return o}mapRepeat(t,n){return psn(t)?this.mapLayerRepeat(t,n):this.mapNonLayerRepeat(t,n)}mapLayerRepeat(t,n){const{repeat:r,spec:i,...s}=t,{row:o,column:a,layer:u}=r,{repeater:l={},repeaterPrefix:c=""}=n;return o||a?this.mapRepeat({...t,repeat:{...o?{row:o}:{},...a?{column:a}:{}},spec:{repeat:{layer:u},spec:i}},n):{...s,layer:u.map(f=>{const d={...l,layer:f},h=`${(i.name?`${i.name}_`:"")+c}child__layer_${Ri(f)}`,p=this.mapLayerOrUnit(i,{...n,repeater:d,repeaterPrefix:h});return p.name=h,p})}}mapNonLayerRepeat(t,n){const{repeat:r,spec:i,data:s,...o}=t;!je(r)&&t.columns&&(t=Qu(t,["columns"]),Je(uye("repeat")));const a=[],{repeater:u={},repeaterPrefix:l=""}=n,c=!je(r)&&r.row||[u?u.row:null],f=!je(r)&&r.column||[u?u.column:null],d=je(r)&&r||[u?u.repeat:null];for(const p of d)for(const m of c)for(const g of f){const y={repeat:p,row:m,column:g,layer:u.layer},v=(i.name?`${i.name}_`:"")+l+"child__"+(je(r)?`${Ri(p)}`:(r.row?`row_${Ri(m)}`:"")+(r.column?`column_${Ri(g)}`:"")),b=this.map(i,{...n,repeater:y,repeaterPrefix:v});b.name=v,a.push(Qu(b,["data"]))}const h=je(r)?t.columns:r.column?r.column.length:1;return{data:i.data??s,align:"all",...o,columns:h,concat:a}}mapFacet(t,n){const{facet:r}=t;return uN(r)&&t.columns&&(t=Qu(t,["columns"]),Je(uye("facet"))),super.mapFacet(t,n)}mapUnitWithParentEncodingOrProjection(t,n){const{encoding:r,projection:i}=t,{parentEncoding:s,parentProjection:o,config:a}=n,u=Nye({parentProjection:o,projection:i}),l=Rye({parentEncoding:s,encoding:bU(r,n.repeater)});return this.mapUnit({...t,...u?{projection:u}:{},...l?{encoding:l}:{}},{config:a})}mapFacetedUnit(t,n){const{row:r,column:i,facet:s,...o}=t.encoding,{mark:a,width:u,projection:l,height:c,view:f,params:d,encoding:h,...p}=t,{facetMapping:m,layout:g}=this.getFacetMappingAndLayout({row:r,column:i,facet:s},n),y=bU(o,n.repeater);return this.mapFacet({...p,...g,facet:m,spec:{...u?{width:u}:{},...c?{height:c}:{},...f?{view:f}:{},...l?{projection:l}:{},mark:a,encoding:y,...d?{params:d}:{}}},n)}getFacetMappingAndLayout(t,n){const{row:r,column:i,facet:s}=t;if(r||i){s&&Je(Cnn([...r?[gm]:[],...i?[ym]:[]]));const o={},a={};for(const u of[gm,ym]){const l=t[u];if(l){const{align:c,center:f,spacing:d,columns:h,...p}=l;o[u]=p;for(const m of["align","center","spacing"])l[m]!==void 0&&(a[m]??(a[m]={}),a[m][u]=l[m])}}return{facetMapping:o,layout:a}}else{const{align:o,center:a,spacing:u,columns:l,...c}=s;return{facetMapping:Csn(c,n.repeater),layout:{...o?{align:o}:{},...a?{center:a}:{},...u?{spacing:u}:{},...l?{columns:l}:{}}}}}mapLayer(t,{parentEncoding:n,parentProjection:r,...i}){const{encoding:s,projection:o,...a}=t,u={...i,parentEncoding:Rye({parentEncoding:n,encoding:s,layer:!0}),parentProjection:Nye({parentProjection:r,projection:o})};return super.mapLayer({...a,...t.name?{name:[u.repeaterPrefix,t.name].filter(l=>l).join("_")}:{}},u)}}function Rye({parentEncoding:e,encoding:t={},layer:n}){let r={};if(e){const i=new Set([...Ke(e),...Ke(t)]);for(const s of i){const o=t[s],a=e[s];if(fn(o)){const u={...a,...o};r[s]=u}else lN(o)?r[s]={...o,condition:{...a,...o.condition}}:o||o===null?r[s]=o:(n||ad(a)||Rt(a)||fn(a)||je(a))&&(r[s]=a)}}else r=t;return!r||Ur(r)?void 0:r}function Nye(e){const{parentProjection:t,projection:n}=e;return t&&n&&Je(gnn({parentProjection:t,projection:n})),n??t}function Qie(e){return"filter"in e}function Rsn(e){return(e==null?void 0:e.stop)!==void 0}function y8e(e){return"lookup"in e}function Nsn(e){return"data"in e}function Psn(e){return"param"in e}function Osn(e){return"pivot"in e}function Dsn(e){return"density"in e}function $sn(e){return"quantile"in e}function Msn(e){return"regression"in e}function Lsn(e){return"loess"in e}function Fsn(e){return"sample"in e}function jsn(e){return"window"in e}function Bsn(e){return"joinaggregate"in e}function Usn(e){return"flatten"in e}function zsn(e){return"calculate"in e}function v8e(e){return"bin"in e}function Vsn(e){return"impute"in e}function Hsn(e){return"timeUnit"in e}function qsn(e){return"aggregate"in e}function Wsn(e){return"stack"in e}function Gsn(e){return"fold"in e}function Ysn(e){return"extent"in e&&!("density"in e)&&!("regression"in e)}function Ksn(e){return e.map(t=>Qie(t)?{filter:ME(t.filter,Ern)}:t)}class Xsn extends Xie{map(t,n){return n.emptySelections??(n.emptySelections={}),n.selectionPredicates??(n.selectionPredicates={}),t=Pye(t,n),super.map(t,n)}mapLayerOrUnit(t,n){if(t=Pye(t,n),t.encoding){const r={};for(const[i,s]of Ry(t.encoding))r[i]=b8e(s,n);t={...t,encoding:r}}return super.mapLayerOrUnit(t,n)}mapUnit(t,n){const{selection:r,...i}=t;return r?{...i,params:Ry(r).map(([s,o])=>{const{init:a,bind:u,empty:l,...c}=o;c.type==="single"?(c.type="point",c.toggle=!1):c.type==="multi"&&(c.type="point"),n.emptySelections[s]=l!=="none";for(const f of jo(n.selectionPredicates[s]??{}))f.empty=l!=="none";return{name:s,value:a,select:c,bind:u}})}:t}}function Pye(e,t){const{transform:n,...r}=e;if(n){const i=n.map(s=>{if(Qie(s))return{filter:gW(s,t)};if(v8e(s)&&E_(s.bin))return{...s,bin:_8e(s.bin)};if(y8e(s)){const{selection:o,...a}=s.from;return o?{...s,from:{param:o,...a}}:s}return s});return{...r,transform:i}}return e}function b8e(e,t){var r,i;const n=rn(e);if(Ze(n)&&E_(n.bin)&&(n.bin=_8e(n.bin)),A_(n)&&((i=(r=n.scale)==null?void 0:r.domain)!=null&&i.selection)){const{selection:s,...o}=n.scale.domain;n.scale.domain={...o,...s?{param:s}:{}}}if(Y5(n))if(je(n.condition))n.condition=n.condition.map(s=>{const{selection:o,param:a,test:u,...l}=s;return a?s:{...l,test:gW(s,t)}});else{const{selection:s,param:o,test:a,...u}=b8e(n.condition,t);n.condition=o?n.condition:{...u,test:gW(n.condition,t)}}return n}function _8e(e){const t=e.extent;if(t!=null&&t.selection){const{selection:n,...r}=t;return{...e,extent:{...r,param:n}}}return e}function gW(e,t){const n=r=>ME(r,i=>{var s;const o=t.emptySelections[i]??!0,a={param:i,empty:o};return(s=t.selectionPredicates)[i]??(s[i]=[]),t.selectionPredicates[i].push(a),a});return e.selection?n(e.selection):ME(e.test||e.filter,r=>r.selection?n(r.selection):r)}class yW extends Xie{map(t,n){const r=n.selections??[];if(t.params&&!Eg(t)){const i=[];for(const s of t.params)Gie(s)?r.push(s):i.push(s);t.params=i}return n.selections=r,super.map(t,n)}mapUnit(t,n){const r=n.selections;if(!r||!r.length)return t;const i=(n.path??[]).concat(t.name),s=[];for(const o of r)if(!o.views||!o.views.length)s.push(o);else for(const a of o.views)(mt(a)&&(a===t.name||i.includes(a))||je(a)&&a.map(u=>i.indexOf(u)).every((u,l,c)=>u!==-1&&(l===0||u>c[l-1])))&&s.push(o);return s.length&&(t.params=s),t}}for(const e of["mapFacet","mapRepeat","mapHConcat","mapVConcat","mapLayer"]){const t=yW.prototype[e];yW.prototype[e]=function(n,r){return t.call(this,n,Qsn(n,r))}}function Qsn(e,t){return e.name?{...t,path:(t.path??[]).concat(e.name)}:t}function w8e(e,t){t===void 0&&(t=d8e(e.config));const n=ton(e,t),{width:r,height:i}=e,s=non(n,{width:r,height:i,autosize:e.autosize},t);return{...n,...s?{autosize:s}:{}}}const Jsn=new ksn,Zsn=new Xsn,eon=new yW;function ton(e,t={}){const n={config:t};return eon.map(Jsn.map(Zsn.map(e,n),n),n)}function Oye(e){return mt(e)?{type:e}:e??{}}function non(e,t,n){let{width:r,height:i}=t;const s=Eg(e)||tj(e),o={};s?r=="container"&&i=="container"?(o.type="fit",o.contains="padding"):r=="container"?(o.type="fit-x",o.contains="padding"):i=="container"&&(o.type="fit-y",o.contains="padding"):(r=="container"&&(Je(iye("width")),r=void 0),i=="container"&&(Je(iye("height")),i=void 0));const a={type:"pad",...o,...n?Oye(n.autosize):{},...Oye(e.autosize)};if(a.type==="fit"&&!s&&(Je(Ztn),a.type="pad"),r=="container"&&!(a.type=="fit"||a.type=="fit-x")&&Je(sye("width")),i=="container"&&!(a.type=="fit"||a.type=="fit-y")&&Je(sye("height")),!Ol(a,{type:"pad"}))return a}function ron(e){return e==="fit"||e==="fit-x"||e==="fit-y"}function ion(e){return e?`fit-${L5(e)}`:"fit"}const son=["background","padding"];function Dye(e,t){const n={};for(const r of son)e&&e[r]!==void 0&&(n[r]=Tl(e[r]));return t&&(n.params=e.params),n}class xg{constructor(t={},n={}){this.explicit=t,this.implicit=n}clone(){return new xg(rn(this.explicit),rn(this.implicit))}combine(){return{...this.explicit,...this.implicit}}get(t){return ps(this.explicit[t],this.implicit[t])}getWithExplicit(t){return this.explicit[t]!==void 0?{explicit:!0,value:this.explicit[t]}:this.implicit[t]!==void 0?{explicit:!1,value:this.implicit[t]}:{explicit:!1,value:void 0}}setWithExplicit(t,{value:n,explicit:r}){n!==void 0&&this.set(t,n,r)}set(t,n,r){return delete this[r?"implicit":"explicit"][t],this[r?"explicit":"implicit"][t]=n,this}copyKeyFromSplit(t,{explicit:n,implicit:r}){n[t]!==void 0?this.set(t,n[t],!0):r[t]!==void 0&&this.set(t,r[t],!1)}copyKeyFromObject(t,n){n[t]!==void 0&&this.set(t,n[t],!0)}copyAll(t){for(const n of Ke(t.combine())){const r=t.getWithExplicit(n);this.setWithExplicit(n,r)}}}function Ud(e){return{explicit:!0,value:e}}function yl(e){return{explicit:!1,value:e}}function E8e(e){return(t,n,r,i)=>{const s=e(t.value,n.value);return s>0?t:s<0?n:nj(t,n,r,i)}}function nj(e,t,n,r){return e.explicit&&t.explicit&&Je(jnn(n,r,e.value,t.value)),e}function Oy(e,t,n,r,i=nj){return e===void 0||e.value===void 0?t:e.explicit&&!t.explicit?e:t.explicit&&!e.explicit?t:Ol(e.value,t.value)?e:i(e,t,n,r)}class oon extends xg{constructor(t={},n={},r=!1){super(t,n),this.explicit=t,this.implicit=n,this.parseNothing=r}clone(){const t=super.clone();return t.parseNothing=this.parseNothing,t}}function nS(e){return"url"in e}function hk(e){return"values"in e}function x8e(e){return"name"in e&&!nS(e)&&!hk(e)&&!q0(e)}function q0(e){return e&&(S8e(e)||T8e(e)||Jie(e))}function S8e(e){return"sequence"in e}function T8e(e){return"sphere"in e}function Jie(e){return"graticule"in e}var Si;(function(e){e[e.Raw=0]="Raw",e[e.Main=1]="Main",e[e.Row=2]="Row",e[e.Column=3]="Column",e[e.Lookup=4]="Lookup"})(Si||(Si={}));function A8e(e){const{signals:t,hasLegend:n,index:r,...i}=e;return i.field=Wc(i.field),i}function Lb(e,t=!0,n=Aa){if(je(e)){const r=e.map(i=>Lb(i,t,n));return t?`[${r.join(", ")}]`:r}else if(x_(e))return n(t?Ob(e):crn(e));return t?n(zr(e)):e}function aon(e,t){for(const n of jo(e.component.selection??{})){const r=n.name;let i=`${r}${$y}, ${n.resolve==="global"?"true":`{unit: ${X1(e)}}`}`;for(const s of oj)s.defined(n)&&(s.signals&&(t=s.signals(e,n,t)),s.modifyExpr&&(i=s.modifyExpr(e,n,i)));t.push({name:r+jon,on:[{events:{signal:n.name+$y},update:`modify(${rt(n.name+Fb)}, ${i})`}]})}return Zie(t)}function uon(e,t){if(e.component.selection&&Ke(e.component.selection).length){const n=rt(e.getName("cell"));t.unshift({name:"facet",value:{},on:[{events:fv("pointermove","scope"),update:`isTuple(facet) ? facet : group(${n}).datum`}]})}return Zie(t)}function lon(e,t){let n=!1;for(const r of jo(e.component.selection??{})){const i=r.name,s=rt(i+Fb);if(t.filter(a=>a.name===i).length===0){const a=r.resolve==="global"?"union":r.resolve,u=r.type==="point"?", true, true)":")";t.push({name:r.name,update:`${H8e}(${s}, ${rt(a)}${u}`})}n=!0;for(const a of oj)a.defined(r)&&a.topLevelSignals&&(t=a.topLevelSignals(e,r,t))}return n&&t.filter(i=>i.name==="unit").length===0&&t.unshift({name:"unit",value:{},on:[{events:"pointermove",update:"isTuple(group()) ? group() : unit"}]}),Zie(t)}function con(e,t){const n=[...t],r=X1(e,{escape:!1});for(const i of jo(e.component.selection??{})){const s={name:i.name+Fb};if(i.project.hasSelectionId&&(s.transform=[{type:"collect",sort:{field:ud}}]),i.init){const a=i.project.items.map(A8e);s.values=i.project.hasSelectionId?i.init.map(u=>({unit:r,[ud]:Lb(u,!1)[0]})):i.init.map(u=>({unit:r,fields:a,values:Lb(u,!1)}))}n.filter(a=>a.name===i.name+Fb).length||n.push(s)}return n}function C8e(e,t){for(const n of jo(e.component.selection??{}))for(const r of oj)r.defined(n)&&r.marks&&(t=r.marks(e,n,t));return t}function fon(e,t){for(const n of e.children)Xi(n)&&(t=C8e(n,t));return t}function don(e,t,n,r){const i=K8e(e,t.param,t);return{signal:Zl(n.get("type"))&&je(r)&&r[0]>r[1]?`isValid(${i}) && reverse(${i})`:i}}function Zie(e){return e.map(t=>(t.on&&!t.on.length&&delete t.on,t))}class Fr{constructor(t,n){this.debugName=n,this._children=[],this._parent=null,t&&(this.parent=t)}clone(){throw new Error("Cannot clone node")}get parent(){return this._parent}set parent(t){this._parent=t,t&&t.addChild(this)}get children(){return this._children}numChildren(){return this._children.length}addChild(t,n){if(this._children.includes(t)){Je(hnn);return}n!==void 0?this._children.splice(n,0,t):this._children.push(t)}removeChild(t){const n=this._children.indexOf(t);return this._children.splice(n,1),n}remove(){let t=this._parent.removeChild(this);for(const n of this._children)n._parent=this._parent,this._parent.addChild(n,t++)}insertAsParentOf(t){const n=t.parent;n.removeChild(this),this.parent=n,t.parent=this}swapWithParent(){const t=this._parent,n=t.parent;for(const i of this._children)i.parent=t;this._children=[],t.removeChild(this);const r=t.parent.removeChild(t);this._parent=n,n.addChild(this,r),t.parent=this}}class Zu extends Fr{clone(){const t=new this.constructor;return t.debugName=`clone_${this.debugName}`,t._source=this._source,t._name=`clone_${this._name}`,t.type=this.type,t.refCounts=this.refCounts,t.refCounts[t._name]=0,t}constructor(t,n,r,i){super(t,n),this.type=r,this.refCounts=i,this._source=this._name=n,this.refCounts&&!(this._name in this.refCounts)&&(this.refCounts[this._name]=0)}dependentFields(){return new Set}producedFields(){return new Set}hash(){return this._hash===void 0&&(this._hash=`Output ${x5e()}`),this._hash}getSource(){return this.refCounts[this._name]++,this._source}isRequired(){return!!this.refCounts[this._name]}setSource(t){this._source=t}}function _U(e){return e.as!==void 0}function $ye(e){return`${e}_end`}class Ch extends Fr{clone(){return new Ch(null,rn(this.timeUnits))}constructor(t,n){super(t),this.timeUnits=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{const{field:a,timeUnit:u}=s;if(u){let l;if(S_(u)){if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=Py({fieldDef:s,markDef:f,config:d});(dk(c)||h)&&(l={timeUnit:mo(u),field:a})}}else l={as:at(s,{forAs:!0}),field:a,timeUnit:u};if(Xi(n)){const{mark:c,markDef:f,config:d}=n,h=Py({fieldDef:s,markDef:f,config:d});dk(c)&&ms(o)&&h!==.5&&(l.rectBandPosition=h)}l&&(i[qn(l)]=l)}return i},{});return Ur(r)?null:new Ch(t,r)}static makeFromTransform(t,n){const{timeUnit:r,...i}={...n},s=mo(r),o={...i,timeUnit:s};return new Ch(t,{[qn(o)]:o})}merge(t){this.timeUnits={...this.timeUnits};for(const n in t.timeUnits)this.timeUnits[n]||(this.timeUnits[n]=t.timeUnits[n]);for(const n of t.children)t.removeChild(n),n.parent=this;t.remove()}removeFormulas(t){const n={};for(const[r,i]of Ry(this.timeUnits)){const s=_U(i)?i.as:`${i.field}_end`;t.has(s)||(n[r]=i)}this.timeUnits=n}producedFields(){return new Set(jo(this.timeUnits).map(t=>_U(t)?t.as:$ye(t.field)))}dependentFields(){return new Set(jo(this.timeUnits).map(t=>t.field))}hash(){return`TimeUnit ${qn(this.timeUnits)}`}assemble(){const t=[];for(const n of jo(this.timeUnits)){const{rectBandPosition:r}=n,i=mo(n.timeUnit);if(_U(n)){const{field:s,as:o}=n,{unit:a,utc:u,...l}=i,c=[o,`${o}_end`];t.push({field:Wc(s),type:"timeunit",...a?{units:U5(a)}:{},...u?{timezone:"utc"}:{},...l,as:c}),t.push(...Mye(c,r,i))}else if(n){const{field:s}=n,o=s.replaceAll("\\.","."),a=I8e({timeUnit:i,field:o}),u=$ye(o);t.push({type:"formula",expr:a,as:u}),t.push(...Mye([o,u],r,i))}}return t}}const rj="offsetted_rect_start",ij="offsetted_rect_end";function I8e({timeUnit:e,field:t,reverse:n}){const{unit:r,utc:i}=e,s=sje(r),{part:o,step:a}=lje(s,e.step);return`${i?"utcOffset":"timeOffset"}('${o}', datum['${t}'], ${n?-a:a})`}function Mye([e,t],n,r){if(n!==void 0&&n!==.5){const i=`datum['${e}']`,s=`datum['${t}']`;return[{type:"formula",expr:Lye([I8e({timeUnit:r,field:e,reverse:!0}),i],n+.5),as:`${e}_${rj}`},{type:"formula",expr:Lye([i,s],n+.5),as:`${e}_${ij}`}]}return[]}function Lye([e,t],n){return`${1-n} * ${e} + ${n} * ${t}`}const dN="_tuple_fields";class hon{constructor(...t){this.items=t,this.hasChannel={},this.hasField={},this.hasSelectionId=!1}}const pon={defined:()=>!0,parse:(e,t,n)=>{const r=t.name,i=t.project??(t.project=new hon),s={},o={},a=new Set,u=(p,m)=>{const g=m==="visual"?p.channel:p.field;let y=Ri(`${r}_${g}`);for(let v=1;a.has(y);v++)y=Ri(`${r}_${g}_${v}`);return a.add(y),{[m]:y}},l=t.type,c=e.config.selection[l],f=n.value!==void 0?pt(n.value):null;let{fields:d,encodings:h}=gt(n.select)?n.select:{};if(!d&&!h&&f){for(const p of f)if(gt(p))for(const m of Ke(p))Itn(m)?(h||(h=[])).push(m):l==="interval"?(Je(lnn),h=c.encodings):(d??(d=[])).push(m)}!d&&!h&&(h=c.encodings,"fields"in c&&(d=c.fields));for(const p of h??[]){const m=e.fieldDef(p);if(m){let g=m.field;if(m.aggregate){Je(enn(p,m.aggregate));continue}else if(!g){Je(aye(p));continue}if(m.timeUnit&&!S_(m.timeUnit)){g=e.vgField(p);const y={timeUnit:m.timeUnit,as:g,field:m.field};o[qn(y)]=y}if(!s[g]){const y=l==="interval"&&wg(p)&&Zl(e.getScaleComponent(p).get("type"))?"R":m.bin?"R-RE":"E",v={field:g,channel:p,type:y,index:i.items.length};v.signals={...u(v,"data"),...u(v,"visual")},i.items.push(s[g]=v),i.hasField[g]=s[g],i.hasSelectionId=i.hasSelectionId||g===ud,k5e(p)?(v.geoChannel=p,v.channel=I5e(p),i.hasChannel[v.channel]=s[g]):i.hasChannel[p]=s[g]}}else Je(aye(p))}for(const p of d??[]){if(i.hasField[p])continue;const m={type:"E",field:p,index:i.items.length};m.signals={...u(m,"data")},i.items.push(m),i.hasField[p]=m,i.hasSelectionId=i.hasSelectionId||p===ud}f&&(t.init=f.map(p=>i.items.map(m=>gt(p)?p[m.geoChannel||m.channel]!==void 0?p[m.geoChannel||m.channel]:p[m.field]:p))),Ur(o)||(i.timeUnit=new Ch(null,o))},signals:(e,t,n)=>{const r=t.name+dN;return n.filter(s=>s.name===r).length>0||t.project.hasSelectionId?n:n.concat({name:r,value:t.project.items.map(A8e)})}},vm={defined:e=>e.type==="interval"&&e.resolve==="global"&&e.bind&&e.bind==="scales",parse:(e,t)=>{const n=t.scales=[];for(const r of t.project.items){const i=r.channel;if(!wg(i))continue;const s=e.getScaleComponent(i),o=s?s.get("type"):void 0;if(o=="sequential"&&Je(inn),!s||!Zl(o)){Je(rnn);continue}s.set("selectionExtent",{param:t.name,field:r.field},!0),n.push(r)}},topLevelSignals:(e,t,n)=>{const r=t.scales.filter(o=>n.filter(a=>a.name===o.signals.data).length===0);if(!e.parent||Fye(e)||r.length===0)return n;const i=n.filter(o=>o.name===t.name)[0];let s=i.update;if(s.indexOf(H8e)>=0)i.update=`{${r.map(o=>`${rt(Wc(o.field))}: ${o.signals.data}`).join(", ")}}`;else{for(const o of r){const a=`${rt(Wc(o.field))}: ${o.signals.data}`;s.includes(a)||(s=`${s.substring(0,s.length-1)}, ${a}}`)}i.update=s}return n.concat(r.map(o=>({name:o.signals.data})))},signals:(e,t,n)=>{if(e.parent&&!Fye(e))for(const r of t.scales){const i=n.find(s=>s.name===r.signals.data);i.push="outer",delete i.value,delete i.update}return n}};function vW(e,t){return`domain(${rt(e.scaleName(t))})`}function Fye(e){return e.parent&&CT(e.parent)&&!e.parent.parent}const jE="_brush",k8e="_scale_trigger",TA="geo_interval_init_tick",R8e="_init",mon="_center",gon={defined:e=>e.type==="interval",parse:(e,t,n)=>{var r;if(e.hasProjection){const i={...gt(n.select)?n.select:{}};i.fields=[ud],i.encodings||(i.encodings=n.value?Ke(n.value):[_d,bd]),n.select={type:"interval",...i}}if(t.translate&&!vm.defined(t)){const i=`!event.item || event.item.mark.name !== ${rt(t.name+jE)}`;for(const s of t.events){if(!s.between){Je(`${s} is not an ordered event stream for interval selections.`);continue}const o=pt((r=s.between[0]).filter??(r.filter=[]));o.indexOf(i)<0&&o.push(i)}}},signals:(e,t,n)=>{const r=t.name,i=r+$y,s=jo(t.project.hasChannel).filter(a=>a.channel===Ni||a.channel===bo),o=t.init?t.init[0]:null;if(n.push(...s.reduce((a,u)=>a.concat(yon(e,t,u,o&&o[u.index])),[])),e.hasProjection){const a=rt(e.projectionName()),u=e.projectionName()+mon,{x:l,y:c}=t.project.hasChannel,f=l&&l.signals.visual,d=c&&c.signals.visual,h=l?o&&o[l.index]:`${u}[0]`,p=c?o&&o[c.index]:`${u}[1]`,m=E=>e.getSizeSignalRef(E).signal,g=`[[${f?f+"[0]":"0"}, ${d?d+"[0]":"0"}],[${f?f+"[1]":m("width")}, ${d?d+"[1]":m("height")}]]`;o&&(n.unshift({name:r+R8e,init:`[scale(${a}, [${l?h[0]:h}, ${c?p[0]:p}]), scale(${a}, [${l?h[1]:h}, ${c?p[1]:p}])]`}),(!l||!c)&&(n.find(T=>T.name===u)||n.unshift({name:u,update:`invert(${a}, [${m("width")}/2, ${m("height")}/2])`})));const y=`intersect(${g}, {markname: ${rt(e.getName("marks"))}}, unit.mark)`,v=`{unit: ${X1(e)}}`,b=`vlSelectionTuples(${y}, ${v})`,w=s.map(E=>E.signals.visual);return n.concat({name:i,on:[{events:[...w.length?[{signal:w.join(" || ")}]:[],...o?[{signal:TA}]:[]],update:b}]})}else{if(!vm.defined(t)){const l=r+k8e,c=s.map(f=>{const d=f.channel,{data:h,visual:p}=f.signals,m=rt(e.scaleName(d)),g=e.getScaleComponent(d).get("type"),y=Zl(g)?"+":"";return`(!isArray(${h}) || (${y}invert(${m}, ${p})[0] === ${y}${h}[0] && ${y}invert(${m}, ${p})[1] === ${y}${h}[1]))`});c.length&&n.push({name:l,value:{},on:[{events:s.map(f=>({scale:e.scaleName(f.channel)})),update:c.join(" && ")+` ? ${l} : {}`}]})}const a=s.map(l=>l.signals.data),u=`unit: ${X1(e)}, fields: ${r+dN}, values`;return n.concat({name:i,...o?{init:`{${u}: ${Lb(o)}}`}:{},...a.length?{on:[{events:[{signal:a.join(" || ")}],update:`${a.join(" && ")} ? {${u}: [${a}]} : null`}]}:{}})}},topLevelSignals:(e,t,n)=>(Xi(e)&&e.hasProjection&&t.init&&(n.filter(i=>i.name===TA).length||n.unshift({name:TA,value:null,on:[{events:"timer{1}",update:`${TA} === null ? {} : ${TA}`}]})),n),marks:(e,t,n)=>{const r=t.name,{x:i,y:s}=t.project.hasChannel,o=i==null?void 0:i.signals.visual,a=s==null?void 0:s.signals.visual,u=`data(${rt(t.name+Fb)})`;if(vm.defined(t)||!i&&!s)return n;const l={x:i!==void 0?{signal:`${o}[0]`}:{value:0},y:s!==void 0?{signal:`${a}[0]`}:{value:0},x2:i!==void 0?{signal:`${o}[1]`}:{field:{group:"width"}},y2:s!==void 0?{signal:`${a}[1]`}:{field:{group:"height"}}};if(t.resolve==="global")for(const g of Ke(l))l[g]=[{test:`${u}.length && ${u}[0].unit === ${X1(e)}`,...l[g]},{value:0}];const{fill:c,fillOpacity:f,cursor:d,...h}=t.mark,p=Ke(h).reduce((g,y)=>(g[y]=[{test:[i!==void 0&&`${o}[0] !== ${o}[1]`,s!==void 0&&`${a}[0] !== ${a}[1]`].filter(v=>v).join(" && "),value:h[y]},{value:null}],g),{}),m=d??(t.translate?"move":null);return[{name:`${r+jE}_bg`,type:"rect",clip:!0,encode:{enter:{fill:{value:c},fillOpacity:{value:f}},update:l}},...n,{name:r+jE,type:"rect",clip:!0,encode:{enter:{...m?{cursor:{value:m}}:{},fill:{value:"transparent"}},update:{...l,...p}}}]}};function yon(e,t,n,r){const i=!e.hasProjection,s=n.channel,o=n.signals.visual,a=rt(i?e.scaleName(s):e.projectionName()),u=d=>`scale(${a}, ${d})`,l=e.getSizeSignalRef(s===Ni?"width":"height").signal,c=`${s}(unit)`,f=t.events.reduce((d,h)=>[...d,{events:h.between[0],update:`[${c}, ${c}]`},{events:h,update:`[${o}[0], clamp(${c}, 0, ${l})]`}],[]);if(i){const d=n.signals.data,h=vm.defined(t),p=e.getScaleComponent(s),m=p?p.get("type"):void 0,g=r?{init:Lb(r,!0,u)}:{value:[]};return f.push({events:{signal:t.name+k8e},update:Zl(m)?`[${u(`${d}[0]`)}, ${u(`${d}[1]`)}]`:"[0, 0]"}),h?[{name:d,on:[]}]:[{name:o,...g,on:f},{name:d,...r?{init:Lb(r)}:{},on:[{events:{signal:o},update:`${o}[0] === ${o}[1] ? null : invert(${a}, ${o})`}]}]}else{const d=s===Ni?0:1,h=t.name+R8e,p=r?{init:`[${h}[0][${d}], ${h}[1][${d}]]`}:{value:[]};return[{name:o,...p,on:f}]}}const von={defined:e=>e.type==="point",signals:(e,t,n)=>{const r=t.name,i=r+dN,s=t.project,o="(item().isVoronoi ? datum.datum : datum)",a=jo(e.component.selection??{}).reduce((f,d)=>d.type==="interval"?f.concat(d.name+jE):f,[]).map(f=>`indexof(item().mark.name, '${f}') < 0`).join(" && "),u=`datum && item().mark.marktype !== 'group' && indexof(item().mark.role, 'legend') < 0${a?` && ${a}`:""}`;let l=`unit: ${X1(e)}, `;if(t.project.hasSelectionId)l+=`${ud}: ${o}[${rt(ud)}]`;else{const f=s.items.map(d=>{const h=e.fieldDef(d.channel);return h!=null&&h.bin?`[${o}[${rt(e.vgField(d.channel,{}))}], ${o}[${rt(e.vgField(d.channel,{binSuffix:"end"}))}]]`:`${o}[${rt(d.field)}]`}).join(", ");l+=`fields: ${i}, values: [${f}]`}const c=t.events;return n.concat([{name:r+$y,on:c?[{events:c,update:`${u} ? {${l}} : null`,force:!0}]:[]}])}};function xT(e,t,n,r){const i=Y5(t)&&t.condition,s=r(t);if(i){const a=pt(i).map(u=>{const l=r(u);if(uin(u)){const{param:c,empty:f}=u;return{test:Y8e(e,{param:c,empty:f}),...l}}else return{test:PL(e,u.test),...l}});return{[n]:[...a,...s!==void 0?[s]:[]]}}else return s!==void 0?{[n]:s}:{}}function ese(e,t="text"){const n=e.encoding[t];return xT(e,n,t,r=>sj(r,e.config))}function sj(e,t,n="datum"){if(e){if(ad(e))return di(e.value);if(fn(e)){const{format:r,formatType:i}=TL(e);return Rie({fieldOrDatumDef:e,format:r,formatType:i,expr:n,config:t})}}}function N8e(e,t={}){const{encoding:n,markDef:r,config:i,stack:s}=e,o=n.tooltip;if(je(o))return{tooltip:jye({tooltip:o},s,i,t)};{const a=t.reactiveGeom?"datum.datum":"datum";return xT(e,o,"tooltip",u=>{const l=sj(u,i,a);if(l)return l;if(u===null)return;let c=Er("tooltip",r,i);if(c===!0&&(c={content:"encoding"}),mt(c))return{value:c};if(gt(c))return Rt(c)?c:c.content==="encoding"?jye(n,s,i,t):{signal:a}})}}function P8e(e,t,n,{reactiveGeom:r}={}){const i={...n,...n.tooltipFormat},s={},o=r?"datum.datum":"datum",a=[];function u(c,f){const d=w_(f),h=ou(c)?c:{...c,type:e[d].type},p=h.title||Lie(h,i),m=pt(p).join(", ").replaceAll(/"/g,'\\"');let g;if(ms(f)){const y=f==="x"?"x2":"y2",v=qh(e[y]);if(Ro(h.bin)&&v){const b=at(h,{expr:o}),w=at(v,{expr:o}),{format:E,formatType:T}=TL(h);g=aN(b,w,E,T,i),s[y]=!0}}if((ms(f)||f===of||f===vd)&&t&&t.fieldChannel===f&&t.offset==="normalize"){const{format:y,formatType:v}=TL(h);g=Rie({fieldOrDatumDef:h,format:y,formatType:v,expr:o,config:i,normalizeStack:!0}).signal}g??(g=sj(h,i,o).signal),a.push({channel:f,key:m,value:g})}Bie(e,(c,f)=>{Ze(c)?u(c,f):K5(c)&&u(c.condition,f)});const l={};for(const{channel:c,key:f,value:d}of a)!s[c]&&!l[f]&&(l[f]=d);return l}function jye(e,t,n,{reactiveGeom:r}={}){const i=P8e(e,t,n,{reactiveGeom:r}),s=Ry(i).map(([o,a])=>`"${o}": ${a}`);return s.length>0?{signal:`{${s.join(", ")}}`}:void 0}function bon(e){const{markDef:t,config:n}=e,r=Er("aria",t,n);return r===!1?{}:{...r?{aria:r}:{},..._on(e),...won(e)}}function _on(e){const{mark:t,markDef:n,config:r}=e;if(r.aria===!1)return{};const i=Er("ariaRoleDescription",n,r);return i!=null?{ariaRoleDescription:{value:i}}:t in Xtn?{}:{ariaRoleDescription:{value:t}}}function won(e){const{encoding:t,markDef:n,config:r,stack:i}=e,s=t.description;if(s)return xT(e,s,"description",u=>sj(u,e.config));const o=Er("description",n,r);if(o!=null)return{description:di(o)};if(r.aria===!1)return{};const a=P8e(t,i,r);if(!Ur(a))return{description:{signal:Ry(a).map(([u,l],c)=>`"${c>0?"; ":""}${u}: " + (${l})`).join(" + ")}}}function io(e,t,n={}){const{markDef:r,encoding:i,config:s}=t,{vgChannel:o}=n;let{defaultRef:a,defaultValue:u}=n;a===void 0&&(u??(u=Er(e,r,s,{vgChannel:o,ignoreVgConfig:!0})),u!==void 0&&(a=di(u)));const l=i[e];return xT(t,l,o??e,c=>kie({channel:e,channelDef:c,markDef:r,config:s,scaleName:t.scaleName(e),scale:t.getScaleComponent(e),stack:null,defaultRef:a}))}function O8e(e,t={filled:void 0}){const{markDef:n,encoding:r,config:i}=e,{type:s}=n,o=t.filled??Er("filled",n,i),a=Wn(["bar","point","circle","square","geoshape"],s)?"transparent":void 0,u=Er(o===!0?"color":void 0,n,i,{vgChannel:"fill"})??i.mark[o===!0&&"color"]??a,l=Er(o===!1?"color":void 0,n,i,{vgChannel:"stroke"})??i.mark[o===!1&&"color"],c=o?"fill":"stroke",f={...u?{fill:di(u)}:{},...l?{stroke:di(l)}:{}};return n.color&&(o?n.fill:n.stroke)&&Je(X5e("property",{fill:"fill"in n,stroke:"stroke"in n})),{...f,...io("color",e,{vgChannel:c,defaultValue:o?u:l}),...io("fill",e,{defaultValue:r.fill?u:void 0}),...io("stroke",e,{defaultValue:r.stroke?l:void 0})}}function Eon(e){const{encoding:t,mark:n}=e,r=t.order;return!T_(n)&&ad(r)?xT(e,r,"zindex",i=>di(i.value)):{}}function rS({channel:e,markDef:t,encoding:n={},model:r,bandPosition:i}){const s=`${e}Offset`,o=t[s],a=n[s];if((s==="xOffset"||s==="yOffset")&&a)return{offsetType:"encoding",offset:kie({channel:s,channelDef:a,markDef:t,config:r==null?void 0:r.config,scaleName:r.scaleName(s),scale:r.getScaleComponent(s),stack:null,defaultRef:di(o),bandPosition:i})};const u=t[s];return u?{offsetType:"visual",offset:u}:{}}function ga(e,t,{defaultPos:n,vgChannel:r}){const{encoding:i,markDef:s,config:o,stack:a}=t,u=i[e],l=i[hp(e)],c=t.scaleName(e),f=t.getScaleComponent(e),{offset:d,offsetType:h}=rS({channel:e,markDef:s,encoding:i,model:t,bandPosition:.5}),p=tse({model:t,defaultPos:n,channel:e,scaleName:c,scale:f}),m=!u&&ms(e)&&(i.latitude||i.longitude)?{field:t.getName(e)}:xon({channel:e,channelDef:u,channel2Def:l,markDef:s,config:o,scaleName:c,scale:f,stack:a,offset:d,defaultRef:p,bandPosition:h==="encoding"?0:void 0});return m?{[r||e]:m}:void 0}function xon(e){const{channel:t,channelDef:n,scaleName:r,stack:i,offset:s,markDef:o}=e;if(fn(n)&&i&&t===i.fieldChannel){if(Ze(n)){let a=n.bandPosition;if(a===void 0&&o.type==="text"&&(t==="radius"||t==="theta")&&(a=.5),a!==void 0)return wL({scaleName:r,fieldOrDatumDef:n,startSuffix:"start",bandPosition:a,offset:s})}return Y1(n,r,{suffix:"end"},{offset:s})}return Cie(e)}function tse({model:e,defaultPos:t,channel:n,scaleName:r,scale:i}){const{markDef:s,config:o}=e;return()=>{const a=w_(n),u=Ny(n),l=Er(n,s,o,{vgChannel:u});if(l!==void 0)return T2(n,l);switch(t){case"zeroOrMin":case"zeroOrMax":if(r){const c=i.get("type");if(!Wn([Ju.LOG,Ju.TIME,Ju.UTC],c)){if(i.domainDefinitelyIncludesZero())return{scale:r,value:0}}}if(t==="zeroOrMin")return a==="y"?{field:{group:"height"}}:{value:0};switch(a){case"radius":return{signal:`min(${e.width.signal},${e.height.signal})/2`};case"theta":return{signal:"2*PI"};case"x":return{field:{group:"width"}};case"y":return{value:0}}break;case"mid":return{...e[cl(n)],mult:.5}}}}const Son={left:"x",center:"xc",right:"x2"},Ton={top:"y",middle:"yc",bottom:"y2"};function D8e(e,t,n,r="middle"){if(e==="radius"||e==="theta")return Ny(e);const i=e==="x"?"align":"baseline",s=Er(i,t,n);let o;return Rt(s)?(Je(Inn(i)),o=void 0):o=s,e==="x"?Son[o||(r==="top"?"left":"center")]:Ton[o||r]}function RL(e,t,{defaultPos:n,defaultPos2:r,range:i}){return i?$8e(e,t,{defaultPos:n,defaultPos2:r}):ga(e,t,{defaultPos:n})}function $8e(e,t,{defaultPos:n,defaultPos2:r}){const{markDef:i,config:s}=t,o=hp(e),a=cl(e),u=Aon(t,r,o),l=u[a]?D8e(e,i,s):Ny(e);return{...ga(e,t,{defaultPos:n,vgChannel:l}),...u}}function Aon(e,t,n){const{encoding:r,mark:i,markDef:s,stack:o,config:a}=e,u=w_(n),l=cl(n),c=Ny(n),f=r[u],d=e.scaleName(u),h=e.getScaleComponent(u),{offset:p}=n in r||n in s?rS({channel:n,markDef:s,encoding:r,model:e}):rS({channel:u,markDef:s,encoding:r,model:e});if(!f&&(n==="x2"||n==="y2")&&(r.latitude||r.longitude)){const g=cl(n),y=e.markDef[g];return y!=null?{[g]:{value:y}}:{[c]:{field:e.getName(n)}}}const m=Con({channel:n,channelDef:f,channel2Def:r[n],markDef:s,config:a,scaleName:d,scale:h,stack:o,offset:p,defaultRef:void 0});return m!==void 0?{[c]:m}:oO(n,s)||oO(n,{[n]:bL(n,s,a.style),[l]:bL(l,s,a.style)})||oO(n,a[i])||oO(n,a.mark)||{[c]:tse({model:e,defaultPos:t,channel:n,scaleName:d,scale:h})()}}function Con({channel:e,channelDef:t,channel2Def:n,markDef:r,config:i,scaleName:s,scale:o,stack:a,offset:u,defaultRef:l}){return fn(t)&&a&&e.charAt(0)===a.fieldChannel.charAt(0)?Y1(t,s,{suffix:"start"},{offset:u}):Cie({channel:e,channelDef:n,scaleName:s,scale:o,stack:a,markDef:r,config:i,offset:u,defaultRef:l})}function oO(e,t){const n=cl(e),r=Ny(e);if(t[r]!==void 0)return{[r]:T2(e,t[r])};if(t[e]!==void 0)return{[r]:T2(e,t[e])};if(t[n]){const i=t[n];if(Mb(i))Je(Enn(n));else return{[n]:T2(e,i)}}}function Dy(e,t){const{config:n,encoding:r,markDef:i}=e,s=i.type,o=hp(t),a=cl(t),u=r[t],l=r[o],c=e.getScaleComponent(t),f=c?c.get("type"):void 0,d=i.orient,h=r[a]??r.size??Er("size",i,n,{vgChannel:a}),p=O5e(t),m=s==="bar"&&(t==="x"?d==="vertical":d==="horizontal");return Ze(u)&&(oi(u.bin)||Ro(u.bin)||u.timeUnit&&!l)&&!(h&&!Mb(h))&&!r[p]&&!go(f)?Ron({fieldDef:u,fieldDef2:l,channel:t,model:e}):(fn(u)&&go(f)||m)&&!l?kon(u,t,e):$8e(t,e,{defaultPos:"zeroOrMax",defaultPos2:"zeroOrMin"})}function Ion(e,t,n,r,i,s,o){if(Mb(i))if(n){const u=n.get("type");if(u==="band"){let l=`bandwidth('${t}')`;i.band!==1&&(l=`${i.band} * ${l}`);const c=Xm("minBandSize",{type:o},r);return{signal:c?`max(${jf(c)}, ${l})`:l}}else i.band!==1&&(Je(Pnn(u)),i=void 0)}else return{mult:i.band,field:{group:e}};else{if(Rt(i))return i;if(i)return{value:i}}if(n){const u=n.get("range");if(vv(u)&&fr(u.step))return{value:u.step-2}}if(!s){const{bandPaddingInner:u,barBandPaddingInner:l,rectBandPaddingInner:c}=r.scale,f=ps(u,o==="bar"?l:c);if(Rt(f))return{signal:`(1 - (${f.signal})) * ${e}`};if(fr(f))return{signal:`${1-f} * ${e}`}}return{value:IL(r.view,e)-2}}function kon(e,t,n){var C,k;const{markDef:r,encoding:i,config:s,stack:o}=n,a=r.orient,u=n.scaleName(t),l=n.getScaleComponent(t),c=cl(t),f=hp(t),d=O5e(t),h=n.scaleName(d),p=n.getScaleComponent(aie(t)),m=a==="horizontal"&&t==="y"||a==="vertical"&&t==="x";let g;(i.size||r.size)&&(m?g=io("size",n,{vgChannel:c,defaultRef:di(r.size)}):Je(Mnn(r.type)));const y=!!g,v=Nje({channel:t,fieldDef:e,markDef:r,config:s,scaleType:(C=l||p)==null?void 0:C.get("type"),useVlSizeChannel:m});g=g||{[c]:Ion(c,h||u,p||l,s,v,!!e,r.type)};const b=((k=l||p)==null?void 0:k.get("type"))==="band"&&Mb(v)&&!y?"top":"middle",w=D8e(t,r,s,b),E=w==="xc"||w==="yc",{offset:T,offsetType:S}=rS({channel:t,markDef:r,encoding:i,model:n,bandPosition:E?.5:0}),A=Cie({channel:t,channelDef:e,markDef:r,config:s,scaleName:u,scale:l,stack:o,offset:T,defaultRef:tse({model:n,defaultPos:"mid",channel:t,scaleName:u,scale:l}),bandPosition:E?S==="encoding"?0:.5:Rt(v)?{signal:`(1-${v})/2`}:Mb(v)?(1-v.band)/2:0});if(c)return{[w]:A,...g};{const N=Ny(f),D=g[c],O=T?{...D,offset:T}:D;return{[w]:A,[N]:je(A)?[A[0],{...A[1],offset:O}]:{...A,offset:O}}}}function Bye(e,t,n,r,i,s,o){if(C5e(e))return 0;const a=e==="x"||e==="y2",u=a?-t/2:t/2;if(Rt(n)||Rt(i)||Rt(r)||s){const l=jf(n),c=jf(i),f=jf(r),d=jf(s),p=s?`(${o} < ${d} ? ${a?"":"-"}0.5 * (${d} - (${o})) : ${u})`:u,m=f?`${f} + `:"",g=l?`(${l} ? -1 : 1) * `:"",y=c?`(${c} + ${p})`:p;return{signal:m+g+y}}else return i=i||0,r+(n?-i-u:+i+u)}function Ron({fieldDef:e,fieldDef2:t,channel:n,model:r}){var k;const{config:i,markDef:s,encoding:o}=r,a=r.getScaleComponent(n),u=r.scaleName(n),l=a?a.get("type"):void 0,c=a.get("reverse"),f=Nje({channel:n,fieldDef:e,markDef:s,config:i,scaleType:l}),d=(k=r.component.axes[n])==null?void 0:k[0],h=(d==null?void 0:d.get("translate"))??.5,p=ms(n)?Er("binSpacing",s,i)??0:0,m=hp(n),g=Ny(n),y=Ny(m),v=Xm("minBandSize",s,i),{offset:b}=rS({channel:n,markDef:s,encoding:o,model:r,bandPosition:0}),{offset:w}=rS({channel:m,markDef:s,encoding:o,model:r,bandPosition:0}),E=Urn({fieldDef:e,scaleName:u}),T=Bye(n,p,c,h,b,v,E),S=Bye(m,p,c,h,w??b,v,E),A=Rt(f)?{signal:`(1-${f.signal})/2`}:Mb(f)?(1-f.band)/2:.5,C=Py({fieldDef:e,fieldDef2:t,markDef:s,config:i});if(oi(e.bin)||e.timeUnit){const N=e.timeUnit&&C!==.5;return{[y]:Uye({fieldDef:e,scaleName:u,bandPosition:A,offset:S,useRectOffsetField:N}),[g]:Uye({fieldDef:e,scaleName:u,bandPosition:Rt(A)?{signal:`1-${A.signal}`}:1-A,offset:T,useRectOffsetField:N})}}else if(Ro(e.bin)){const N=Y1(e,u,{},{offset:S});if(Ze(t))return{[y]:N,[g]:Y1(t,u,{},{offset:T})};if(E_(e.bin)&&e.bin.step)return{[y]:N,[g]:{signal:`scale("${u}", ${at(e,{expr:"datum"})} + ${e.bin.step})`,offset:T}}}Je(Z5e(m))}function Uye({fieldDef:e,scaleName:t,bandPosition:n,offset:r,useRectOffsetField:i}){return wL({scaleName:t,fieldOrDatumDef:e,bandPosition:n,offset:r,...i?{startSuffix:rj,endSuffix:ij}:{}})}const Non=new Set(["aria","width","height"]);function af(e,t){const{fill:n=void 0,stroke:r=void 0}=t.color==="include"?O8e(e):{};return{...Pon(e.markDef,t),...zye(e,"fill",n),...zye(e,"stroke",r),...io("opacity",e),...io("fillOpacity",e),...io("strokeOpacity",e),...io("strokeWidth",e),...io("strokeDash",e),...Eon(e),...N8e(e),...ese(e,"href"),...bon(e)}}function zye(e,t,n){const{config:r,mark:i,markDef:s}=e;if(Er("invalid",s,r)==="hide"&&n&&!T_(i)){const a=Oon(e,{invalid:!0,channels:F5});if(a)return{[t]:[{test:a,value:null},...pt(n)]}}return n?{[t]:n}:{}}function Pon(e,t){return Ktn.reduce((n,r)=>(!Non.has(r)&&e[r]!==void 0&&t[r]!=="ignore"&&(n[r]=di(e[r])),n),{})}function Oon(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{const a=e.getScaleComponent(o);if(a){const u=a.get("type"),l=e.vgField(o,{expr:"datum"});l&&Zl(u)&&(s[l]=!0)}return s},{}),i=Ke(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Iie(o,t)).join(` ${s} `)}}function nse(e){const{config:t,markDef:n}=e;if(Er("invalid",n,t)){const i=Don(e,{channels:pp});if(i)return{defined:{signal:i}}}return{}}function Don(e,{invalid:t=!1,channels:n}){const r=n.reduce((s,o)=>{var u;const a=e.getScaleComponent(o);if(a){const l=a.get("type"),c=e.vgField(o,{expr:"datum",binSuffix:(u=e.stack)!=null&&u.impute?"mid":void 0});c&&Zl(l)&&(s[c]=!0)}return s},{}),i=Ke(r);if(i.length>0){const s=t?"||":"&&";return i.map(o=>Iie(o,t)).join(` ${s} `)}}function Vye(e,t){if(t!==void 0)return{[e]:di(t)}}const wU="voronoi",M8e={defined:e=>e.type==="point"&&e.nearest,parse:(e,t)=>{if(t.events)for(const n of t.events)n.markname=e.getName(wU)},marks:(e,t,n)=>{const{x:r,y:i}=t.project.hasChannel,s=e.mark;if(T_(s))return Je(tnn(s)),n;const o={name:e.getName(wU),type:"path",interactive:!0,from:{data:e.getName("marks")},encode:{update:{fill:{value:"transparent"},strokeWidth:{value:.35},stroke:{value:"transparent"},isVoronoi:{value:!0},...N8e(e,{reactiveGeom:!0})}},transform:[{type:"voronoi",x:{expr:r||!i?"datum.datum.x || 0":"0"},y:{expr:i||!r?"datum.datum.y || 0":"0"},size:[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]}]};let a=0,u=!1;return n.forEach((l,c)=>{const f=l.name??"";f===e.component.mark[0].name?a=c:f.indexOf(wU)>=0&&(u=!0)}),u||n.splice(a+1,0,o),n}},L8e={defined:e=>e.type==="point"&&e.resolve==="global"&&e.bind&&e.bind!=="scales"&&!Wie(e.bind),parse:(e,t,n)=>q8e(t,n),topLevelSignals:(e,t,n)=>{const r=t.name,i=t.project,s=t.bind,o=t.init&&t.init[0],a=M8e.defined(t)?"(item().isVoronoi ? datum.datum : datum)":"datum";return i.items.forEach((u,l)=>{const c=Ri(`${r}_${u.field}`);n.filter(d=>d.name===c).length||n.unshift({name:c,...o?{init:Lb(o[l])}:{value:null},on:t.events?[{events:t.events,update:`datum && item().mark.marktype !== 'group' ? ${a}[${rt(u.field)}] : null`}]:[],bind:s[u.field]??s[u.channel]??s})}),n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.filter(l=>l.name===r+$y)[0],o=r+dN,a=i.items.map(l=>Ri(`${r}_${l.field}`)),u=a.map(l=>`${l} !== null`).join(" && ");return a.length&&(s.update=`${u} ? {fields: ${o}, values: [${a.join(", ")}]} : null`),delete s.value,delete s.on,n}},NL="_toggle",F8e={defined:e=>e.type==="point"&&!!e.toggle,signals:(e,t,n)=>n.concat({name:t.name+NL,value:!1,on:[{events:t.events,update:t.toggle}]}),modifyExpr:(e,t)=>{const n=t.name+$y,r=t.name+NL;return`${r} ? null : ${n}, `+(t.resolve==="global"?`${r} ? null : true, `:`${r} ? null : {unit: ${X1(e)}}, `)+`${r} ? ${n} : null`}},$on={defined:e=>e.clear!==void 0&&e.clear!==!1,parse:(e,t)=>{t.clear&&(t.clear=mt(t.clear)?fv(t.clear,"view"):t.clear)},topLevelSignals:(e,t,n)=>{if(L8e.defined(t))for(const r of t.project.items){const i=n.findIndex(s=>s.name===Ri(`${t.name}_${r.field}`));i!==-1&&n[i].on.push({events:t.clear,update:"null"})}return n},signals:(e,t,n)=>{function r(i,s){i!==-1&&n[i].on&&n[i].on.push({events:t.clear,update:s})}if(t.type==="interval")for(const i of t.project.items){const s=n.findIndex(o=>o.name===i.signals.visual);if(r(s,"[0, 0]"),s===-1){const o=n.findIndex(a=>a.name===i.signals.data);r(o,"null")}}else{let i=n.findIndex(s=>s.name===t.name+$y);r(i,"null"),F8e.defined(t)&&(i=n.findIndex(s=>s.name===t.name+NL),r(i,"false"))}return n}},j8e={defined:e=>{const t=e.resolve==="global"&&e.bind&&Wie(e.bind),n=e.project.items.length===1&&e.project.items[0].field!==ud;return t&&!n&&Je(snn),t&&n},parse:(e,t,n)=>{const r=rn(n);if(r.select=mt(r.select)?{type:r.select,toggle:t.toggle}:{...r.select,toggle:t.toggle},q8e(t,r),gt(n.select)&&(n.select.on||n.select.clear)){const o='event.item && indexof(event.item.mark.role, "legend") < 0';for(const a of t.events)a.filter=pt(a.filter??[]),a.filter.includes(o)||a.filter.push(o)}const i=yU(t.bind)?t.bind.legend:"click",s=mt(i)?fv(i,"view"):pt(i);t.bind={legend:{merge:s}}},topLevelSignals:(e,t,n)=>{const r=t.name,i=yU(t.bind)&&t.bind.legend,s=o=>a=>{const u=rn(a);return u.markname=o,u};for(const o of t.project.items){if(!o.hasLegend)continue;const a=`${Ri(o.field)}_legend`,u=`${r}_${a}`;if(n.filter(c=>c.name===u).length===0){const c=i.merge.map(s(`${a}_symbols`)).concat(i.merge.map(s(`${a}_labels`))).concat(i.merge.map(s(`${a}_entries`)));n.unshift({name:u,...t.init?{}:{value:null},on:[{events:c,update:"isDefined(datum.value) ? datum.value : item().items[0].items[0].datum.value",force:!0},{events:i.merge,update:`!event.item || !datum ? null : ${u}`,force:!0}]})}}return n},signals:(e,t,n)=>{const r=t.name,i=t.project,s=n.find(d=>d.name===r+$y),o=r+dN,a=i.items.filter(d=>d.hasLegend).map(d=>Ri(`${r}_${Ri(d.field)}_legend`)),l=`${a.map(d=>`${d} !== null`).join(" && ")} ? {fields: ${o}, values: [${a.join(", ")}]} : null`;t.events&&a.length>0?s.on.push({events:a.map(d=>({signal:d})),update:l}):a.length>0&&(s.update=l,delete s.value,delete s.on);const c=n.find(d=>d.name===r+NL),f=yU(t.bind)&&t.bind.legend;return c&&(t.events?c.on.push({...c.on[0],events:f}):c.on[0].events=f),n}};function Mon(e,t,n){var i;const r=(i=e.fieldDef(t))==null?void 0:i.field;for(const s of jo(e.component.selection??{})){const o=s.project.hasField[r]??s.project.hasChannel[t];if(o&&j8e.defined(s)){const a=n.get("selections")??[];a.push(s.name),n.set("selections",a,!1),o.hasLegend=!0}}}const B8e="_translate_anchor",U8e="_translate_delta",Lon={defined:e=>e.type==="interval"&&e.translate,signals:(e,t,n)=>{const r=t.name,i=vm.defined(t),s=r+B8e,{x:o,y:a}=t.project.hasChannel;let u=fv(t.translate,"scope");return i||(u=u.map(l=>(l.between[0].markname=r+jE,l))),n.push({name:s,value:{},on:[{events:u.map(l=>l.between[0]),update:"{x: x(unit), y: y(unit)"+(o!==void 0?`, extent_x: ${i?vW(e,Ni):`slice(${o.signals.visual})`}`:"")+(a!==void 0?`, extent_y: ${i?vW(e,bo):`slice(${a.signals.visual})`}`:"")+"}"}]},{name:r+U8e,value:{},on:[{events:u,update:`{x: ${s}.x - x(unit), y: ${s}.y - y(unit)}`}]}),o!==void 0&&Hye(e,t,o,"width",n),a!==void 0&&Hye(e,t,a,"height",n),n}};function Hye(e,t,n,r,i){const s=t.name,o=s+B8e,a=s+U8e,u=n.channel,l=vm.defined(t),c=i.filter(E=>E.name===n.signals[l?"data":"visual"])[0],f=e.getSizeSignalRef(r).signal,d=e.getScaleComponent(u),h=d&&d.get("type"),p=d&&d.get("reverse"),m=l?u===Ni?p?"":"-":p?"-":"":"",g=`${o}.extent_${u}`,y=`${m}${a}.${u} / ${l?`${f}`:`span(${g})`}`,v=!l||!d?"panLinear":h==="log"?"panLog":h==="symlog"?"panSymlog":h==="pow"?"panPow":"panLinear",b=l?h==="pow"?`, ${d.get("exponent")??1}`:h==="symlog"?`, ${d.get("constant")??1}`:"":"",w=`${v}(${g}, ${y}${b})`;c.on.push({events:{signal:a},update:l?w:`clampRange(${w}, 0, ${f})`})}const z8e="_zoom_anchor",V8e="_zoom_delta",Fon={defined:e=>e.type==="interval"&&e.zoom,signals:(e,t,n)=>{const r=t.name,i=vm.defined(t),s=r+V8e,{x:o,y:a}=t.project.hasChannel,u=rt(e.scaleName(Ni)),l=rt(e.scaleName(bo));let c=fv(t.zoom,"scope");return i||(c=c.map(f=>(f.markname=r+jE,f))),n.push({name:r+z8e,on:[{events:c,update:i?"{"+[u?`x: invert(${u}, x(unit))`:"",l?`y: invert(${l}, y(unit))`:""].filter(f=>f).join(", ")+"}":"{x: x(unit), y: y(unit)}"}]},{name:s,on:[{events:c,force:!0,update:"pow(1.001, event.deltaY * pow(16, event.deltaMode))"}]}),o!==void 0&&qye(e,t,o,"width",n),a!==void 0&&qye(e,t,a,"height",n),n}};function qye(e,t,n,r,i){const s=t.name,o=n.channel,a=vm.defined(t),u=i.filter(v=>v.name===n.signals[a?"data":"visual"])[0],l=e.getSizeSignalRef(r).signal,c=e.getScaleComponent(o),f=c&&c.get("type"),d=a?vW(e,o):u.name,h=s+V8e,p=`${s}${z8e}.${o}`,m=!a||!c?"zoomLinear":f==="log"?"zoomLog":f==="symlog"?"zoomSymlog":f==="pow"?"zoomPow":"zoomLinear",g=a?f==="pow"?`, ${c.get("exponent")??1}`:f==="symlog"?`, ${c.get("constant")??1}`:"":"",y=`${m}(${d}, ${p}, ${h}${g})`;u.on.push({events:{signal:h},update:a?y:`clampRange(${y}, 0, ${l})`})}const Fb="_store",$y="_tuple",jon="_modify",H8e="vlSelectionResolve",oj=[von,gon,pon,F8e,L8e,vm,j8e,$on,Lon,Fon,M8e];function Bon(e){let t=e.parent;for(;t&&!jl(t);)t=t.parent;return t}function X1(e,{escape:t}={escape:!0}){let n=t?rt(e.name):e.name;const r=Bon(e);if(r){const{facet:i}=r;for(const s of Nc)i[s]&&(n+=` + '__facet_${s}_' + (facet[${rt(r.vgField(s))}])`)}return n}function rse(e){return jo(e.component.selection??{}).reduce((t,n)=>t||n.project.hasSelectionId,!1)}function q8e(e,t){(mt(t.select)||!t.select.on)&&delete e.events,(mt(t.select)||!t.select.clear)&&delete e.clear,(mt(t.select)||!t.select.toggle)&&delete e.toggle}function bW(e){const t=[];return e.type==="Identifier"?[e.name]:e.type==="Literal"?[e.value]:(e.type==="MemberExpression"&&(t.push(...bW(e.object)),t.push(...bW(e.property))),t)}function W8e(e){return e.object.type==="MemberExpression"?W8e(e.object):e.object.name==="datum"}function G8e(e){const t=xre(e),n=new Set;return t.visit(r=>{r.type==="MemberExpression"&&W8e(r)&&n.add(bW(r).slice(1).join("."))}),n}class ST extends Fr{clone(){return new ST(null,this.model,rn(this.filter))}constructor(t,n,r){super(t),this.model=n,this.filter=r,this.expr=PL(this.model,this.filter,this),this._dependentFields=G8e(this.expr)}dependentFields(){return this._dependentFields}producedFields(){return new Set}assemble(){return{type:"filter",expr:this.expr}}hash(){return`Filter ${this.expr}`}}function Uon(e,t){const n={},r=e.config.selection;if(!t||!t.length)return n;for(const i of t){const s=Ri(i.name),o=i.select,a=mt(o)?o:o.type,u=gt(o)?rn(o):{type:a},l=r[a];for(const d in l)d==="fields"||d==="encodings"||(d==="mark"&&(u[d]={...l[d],...u[d]}),(u[d]===void 0||u[d]===!0)&&(u[d]=rn(l[d]??u[d])));const c=n[s]={...u,name:s,type:a,init:i.value,bind:i.bind,events:mt(u.on)?fv(u.on,"scope"):pt(rn(u.on))},f=rn(i);for(const d of oj)d.defined(c)&&d.parse&&d.parse(e,c,f)}return n}function Y8e(e,t,n,r="datum"){const i=mt(t)?t:t.param,s=Ri(i),o=rt(s+Fb);let a;try{a=e.getSelectionComponent(s,i)}catch{return`!!${s}`}if(a.project.timeUnit){const d=n??e.component.data.raw,h=a.project.timeUnit.clone();d.parent?h.insertAsParentOf(d):d.parent=h}const u=a.project.hasSelectionId?"vlSelectionIdTest(":"vlSelectionTest(",l=a.resolve==="global"?")":`, ${rt(a.resolve)})`,c=`${u}${o}, ${r}${l}`,f=`length(data(${o}))`;return t.empty===!1?`${f} && ${c}`:`!${f} || ${c}`}function K8e(e,t,n){const r=Ri(t),i=n.encoding;let s=n.field,o;try{o=e.getSelectionComponent(r,t)}catch{return r}if(!i&&!s)s=o.project.items[0].field,o.project.items.length>1&&Je(`A "field" or "encoding" must be specified when using a selection as a scale domain. Using "field": ${rt(s)}.`);else if(i&&!s){const a=o.project.items.filter(u=>u.channel===i);!a.length||a.length>1?(s=o.project.items[0].field,Je((a.length?"Multiple ":"No ")+`matching ${rt(i)} encoding found for selection ${rt(n.param)}. Using "field": ${rt(s)}.`)):s=a[0].field}return`${o.name}[${rt(Wc(s))}]`}function zon(e,t){for(const[n,r]of Ry(e.component.selection??{})){const i=e.getName(`lookup_${n}`);e.component.data.outputNodes[i]=r.materialized=new Zu(new ST(t,e,{param:n}),i,Si.Lookup,e.component.data.outputNodeRefCounts)}}function PL(e,t,n){return S2(t,r=>mt(r)?r:brn(r)?Y8e(e,r,n):fje(r))}function Von(e,t){if(e)return je(e)&&!Yg(e)?e.map(n=>Lie(n,t)).join(", "):e}function EU(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function xC(e,t,n,r={header:!1}){var f,d;const{disable:i,orient:s,scale:o,labelExpr:a,title:u,zindex:l,...c}=e.combine();if(!i){for(const h in c){const p=Ein[h],m=c[h];if(p&&p!==t&&p!=="both")delete c[h];else if(fN(m)){const{condition:g,...y}=m,v=pt(g),b=bye[h];if(b){const{vgProp:w,part:E}=b,T=[...v.map(S=>{const{test:A,...C}=S;return{test:PL(null,A),...C}}),y];EU(c,E,w,T),delete c[h]}else if(b===null){const w={signal:v.map(E=>{const{test:T,...S}=E;return`${PL(null,T)} ? ${rye(S)} : `}).join("")+rye(y)};c[h]=w}}else if(Rt(m)){const g=bye[h];if(g){const{vgProp:y,part:v}=g;EU(c,v,y,m),delete c[h]}}Wn(["labelAlign","labelBaseline"],h)&&c[h]===null&&delete c[h]}if(t==="grid"){if(!c.grid)return;if(c.encode){const{grid:h}=c.encode;c.encode={...h?{grid:h}:{}},Ur(c.encode)&&delete c.encode}return{scale:o,orient:s,...c,domain:!1,labels:!1,aria:!1,maxExtent:0,minExtent:0,ticks:!1,zindex:ps(l,0)}}else{if(!r.header&&e.mainExtracted)return;if(a!==void 0){let p=a;(d=(f=c.encode)==null?void 0:f.labels)!=null&&d.update&&Rt(c.encode.labels.update.text)&&(p=Nb(a,"datum.label",c.encode.labels.update.text.signal)),EU(c,"labels","text",{signal:p})}if(c.labelAlign===null&&delete c.labelAlign,c.encode){for(const p of Uje)e.hasAxisPart(p)||delete c.encode[p];Ur(c.encode)&&delete c.encode}const h=Von(u,n);return{scale:o,orient:s,grid:!1,...h?{title:h}:{},...c,...n.aria===!1?{aria:!1}:{},zindex:ps(l,0)}}}}function X8e(e){const{axes:t}=e.component,n=[];for(const r of pp)if(t[r]){for(const i of t[r])if(!i.get("disable")&&!i.get("gridScale")){const s=r==="x"?"height":"width",o=e.getSizeSignalRef(s).signal;s!==o&&n.push({name:s,update:o})}}return n}function Hon(e,t){const{x:n=[],y:r=[]}=e;return[...n.map(i=>xC(i,"grid",t)),...r.map(i=>xC(i,"grid",t)),...n.map(i=>xC(i,"main",t)),...r.map(i=>xC(i,"main",t))].filter(i=>i)}function Wye(e,t,n,r){return Object.assign.apply(null,[{},...e.map(i=>{if(i==="axisOrient"){const s=n==="x"?"bottom":"left",o=t[n==="x"?"axisBottom":"axisLeft"]||{},a=t[n==="x"?"axisTop":"axisRight"]||{},u=new Set([...Ke(o),...Ke(a)]),l={};for(const c of u.values())l[c]={signal:`${r.signal} === "${s}" ? ${jf(o[c])} : ${jf(a[c])}`};return l}return t[i]})])}function qon(e,t,n,r){const i=t==="band"?["axisDiscrete","axisBand"]:t==="point"?["axisDiscrete","axisPoint"]:mje(t)?["axisQuantitative"]:t==="time"||t==="utc"?["axisTemporal"]:[],s=e==="x"?"axisX":"axisY",o=Rt(n)?"axisOrient":`axis${tN(n)}`,a=[...i,...i.map(l=>s+l.substr(4))],u=["axis",o,s];return{vlOnlyAxisConfig:Wye(a,r,e,n),vgAxisConfig:Wye(u,r,e,n),axisConfigStyle:Won([...u,...a],r)}}function Won(e,t){var r;const n=[{}];for(const i of e){let s=(r=t[i])==null?void 0:r.style;if(s){s=pt(s);for(const o of s)n.push(t.style[o])}}return Object.assign.apply(null,n)}function _W(e,t,n,r={}){var s;const i=V5e(e,n,t);if(i!==void 0)return{configFrom:"style",configValue:i};for(const o of["vlOnlyAxisConfig","vgAxisConfig","axisConfigStyle"])if(((s=r[o])==null?void 0:s[e])!==void 0)return{configFrom:o,configValue:r[o][e]};return{}}const Gye={scale:({model:e,channel:t})=>e.scaleName(t),format:({format:e})=>e,formatType:({formatType:e})=>e,grid:({fieldOrDatumDef:e,axis:t,scaleType:n})=>t.grid??Gon(n,e),gridScale:({model:e,channel:t})=>Yon(e,t),labelAlign:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelAlign||J8e(t,n,r),labelAngle:({labelAngle:e})=>e,labelBaseline:({axis:e,labelAngle:t,orient:n,channel:r})=>e.labelBaseline||Q8e(t,n,r),labelFlush:({axis:e,fieldOrDatumDef:t,channel:n})=>e.labelFlush??Xon(t.type,n),labelOverlap:({axis:e,fieldOrDatumDef:t,scaleType:n})=>e.labelOverlap??Qon(t.type,n,Ze(t)&&!!t.timeUnit,Ze(t)?t.sort:void 0),orient:({orient:e})=>e,tickCount:({channel:e,model:t,axis:n,fieldOrDatumDef:r,scaleType:i})=>{const s=e==="x"?"width":e==="y"?"height":void 0,o=s?t.getSizeSignalRef(s):void 0;return n.tickCount??Zon({fieldOrDatumDef:r,scaleType:i,size:o,values:n.values})},tickMinStep:ean,title:({axis:e,model:t,channel:n})=>{if(e.title!==void 0)return e.title;const r=Z8e(t,n);if(r!==void 0)return r;const i=t.typedFieldDef(n),s=n==="x"?"x2":"y2",o=t.fieldDef(s);return q5e(i?[yye(i)]:[],Ze(o)?[yye(o)]:[])},values:({axis:e,fieldOrDatumDef:t})=>tan(e,t),zindex:({axis:e,fieldOrDatumDef:t,mark:n})=>e.zindex??nan(n,t)};function Gon(e,t){return!go(e)&&Ze(t)&&!oi(t==null?void 0:t.bin)&&!Ro(t==null?void 0:t.bin)}function Yon(e,t){const n=t==="x"?"y":"x";if(e.getScaleComponent(n))return e.scaleName(n)}function Kon(e,t,n,r,i){const s=t==null?void 0:t.labelAngle;if(s!==void 0)return Rt(s)?s:fk(s);{const{configValue:o}=_W("labelAngle",r,t==null?void 0:t.style,i);return o!==void 0?fk(o):n===Ni&&Wn([Aie,Tie],e.type)&&!(Ze(e)&&e.timeUnit)?270:void 0}}function wW(e){return`(((${e.signal} % 360) + 360) % 360)`}function Q8e(e,t,n,r){if(e!==void 0)if(n==="x"){if(Rt(e)){const i=wW(e),s=Rt(t)?`(${t.signal} === "top")`:t==="top";return{signal:`(45 < ${i} && ${i} < 135) || (225 < ${i} && ${i} < 315) ? "middle" :(${i} <= 45 || 315 <= ${i}) === ${s} ? "bottom" : "top"`}}if(45<e&&e<135||225<e&&e<315)return"middle";if(Rt(t)){const i=e<=45||315<=e?"===":"!==";return{signal:`${t.signal} ${i} "top" ? "bottom" : "top"`}}return(e<=45||315<=e)==(t==="top")?"bottom":"top"}else{if(Rt(e)){const i=wW(e),s=Rt(t)?`(${t.signal} === "left")`:t==="left";return{signal:`${i} <= 45 || 315 <= ${i} || (135 <= ${i} && ${i} <= 225) ? ${r?'"middle"':"null"} : (45 <= ${i} && ${i} <= 135) === ${s} ? "top" : "bottom"`}}if(e<=45||315<=e||135<=e&&e<=225)return r?"middle":null;if(Rt(t)){const i=45<=e&&e<=135?"===":"!==";return{signal:`${t.signal} ${i} "left" ? "top" : "bottom"`}}return(45<=e&&e<=135)==(t==="left")?"top":"bottom"}}function J8e(e,t,n){if(e===void 0)return;const r=n==="x",i=r?0:90,s=r?"bottom":"left";if(Rt(e)){const o=wW(e),a=Rt(t)?`(${t.signal} === "${s}")`:t===s;return{signal:`(${i?`(${o} + 90)`:o} % 180 === 0) ? ${r?null:'"center"'} :(${i} < ${o} && ${o} < ${180+i}) === ${a} ? "left" : "right"`}}if((e+i)%180===0)return r?null:"center";if(Rt(t)){const o=i<e&&e<180+i?"===":"!==";return{signal:`${`${t.signal} ${o} "${s}"`} ? "left" : "right"`}}return(i<e&&e<180+i)==(t===s)?"left":"right"}function Xon(e,t){if(t==="x"&&Wn(["quantitative","temporal"],e))return!0}function Qon(e,t,n,r){if(n&&!gt(r)||e!=="nominal"&&e!=="ordinal")return t==="log"||t==="symlog"?"greedy":!0}function Jon(e){return e==="x"?"bottom":"left"}function Zon({fieldOrDatumDef:e,scaleType:t,size:n,values:r}){var i;if(!r&&!go(t)&&t!=="log"){if(Ze(e)){if(oi(e.bin))return{signal:`ceil(${n.signal}/10)`};if(e.timeUnit&&Wn(["month","hours","day","quarter"],(i=mo(e.timeUnit))==null?void 0:i.unit))return}return{signal:`ceil(${n.signal}/40)`}}}function ean({format:e,fieldOrDatumDef:t}){if(e==="d")return 1;if(Ze(t)){const{timeUnit:n}=t;if(n){const r=uje(n);if(r)return{signal:r}}}}function Z8e(e,t){const n=t==="x"?"x2":"y2",r=e.fieldDef(t),i=e.fieldDef(n),s=r?r.title:void 0,o=i?i.title:void 0;if(s&&o)return W5e(s,o);if(s)return s;if(o)return o;if(s!==void 0)return s;if(o!==void 0)return o}function tan(e,t){const n=e.values;if(je(n))return Bje(t,n);if(Rt(n))return n}function nan(e,t){return e==="rect"&&SL(t)?1:0}class iS extends Fr{clone(){return new iS(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this._dependentFields=G8e(this.transform.calculate)}static parseAllForSortIndex(t,n){return n.forEachFieldDef((r,i)=>{if(A_(r)&&Rje(r.sort)){const{field:s,timeUnit:o}=r,a=r.sort,u=a.map((l,c)=>`${fje({field:s,timeUnit:o,equal:l})} ? ${c} : `).join("")+a.length;t=new iS(t,{calculate:u,as:sS(r,i,{forAs:!0})})}}),t}producedFields(){return new Set([this.transform.as])}dependentFields(){return this._dependentFields}assemble(){return{type:"formula",expr:this.transform.calculate,as:this.transform.as}}hash(){return`Calculate ${qn(this.transform)}`}}function sS(e,t,n){return at(e,{prefix:t,suffix:"sort_index",...n})}function aj(e,t){return Wn(["top","bottom"],t)?"column":Wn(["left","right"],t)||e==="row"?"row":"column"}function oS(e,t,n,r){const i=r==="row"?n.headerRow:r==="column"?n.headerColumn:n.headerFacet;return ps((t||{})[e],i[e],n.header[e])}function uj(e,t,n,r){const i={};for(const s of e){const o=oS(s,t||{},n,r);o!==void 0&&(i[s]=o)}return i}const ise=["row","column"],sse=["header","footer"];function ran(e,t){const n=e.component.layoutHeaders[t].title,r=e.config?e.config:void 0,i=e.component.layoutHeaders[t].facetFieldDef?e.component.layoutHeaders[t].facetFieldDef:void 0,{titleAnchor:s,titleAngle:o,titleOrient:a}=uj(["titleAnchor","titleAngle","titleOrient"],i.header,r,t),u=aj(t,a),l=fk(o);return{name:`${t}-title`,type:"group",role:`${u}-title`,title:{text:n,...t==="row"?{orient:"left"}:{},style:"guide-title",...tBe(l,u),...eBe(u,l,s),...nBe(r,i,t,Hin,i8e)}}}function eBe(e,t,n="middle"){switch(n){case"start":return{align:"left"};case"end":return{align:"right"}}const r=J8e(t,e==="row"?"left":"top",e==="row"?"y":"x");return r?{align:r}:{}}function tBe(e,t){const n=Q8e(e,t==="row"?"left":"top",t==="row"?"y":"x",!0);return n?{baseline:n}:{}}function ian(e,t){const n=e.component.layoutHeaders[t],r=[];for(const i of sse)if(n[i])for(const s of n[i]){const o=oan(e,t,i,n,s);o!=null&&r.push(o)}return r}function san(e,t){const{sort:n}=e;return Ah(n)?{field:at(n,{expr:"datum"}),order:n.order??"ascending"}:je(n)?{field:sS(e,t,{expr:"datum"}),order:"ascending"}:{field:at(e,{expr:"datum"}),order:n??"ascending"}}function EW(e,t,n){const{format:r,formatType:i,labelAngle:s,labelAnchor:o,labelOrient:a,labelExpr:u}=uj(["format","formatType","labelAngle","labelAnchor","labelOrient","labelExpr"],e.header,n,t),l=Rie({fieldOrDatumDef:e,format:r,formatType:i,expr:"parent",config:n}).signal,c=aj(t,a);return{text:{signal:u?Nb(Nb(u,"datum.label",l),"datum.value",at(e,{expr:"parent"})):l},...t==="row"?{orient:"left"}:{},style:"guide-label",frame:"group",...tBe(s,c),...eBe(c,s,o),...nBe(n,e,t,qin,s8e)}}function oan(e,t,n,r,i){if(i){let s=null;const{facetFieldDef:o}=r,a=e.config?e.config:void 0;if(o&&i.labels){const{labelOrient:f}=uj(["labelOrient"],o.header,a,t);(t==="row"&&!Wn(["top","bottom"],f)||t==="column"&&!Wn(["left","right"],f))&&(s=EW(o,t,a))}const u=jl(e)&&!uN(e.facet),l=i.axes,c=(l==null?void 0:l.length)>0;if(s||c){const f=t==="row"?"height":"width";return{name:e.getName(`${t}_${n}`),type:"group",role:`${t}-${n}`,...r.facetFieldDef?{from:{data:e.getName(`${t}_domain`)},sort:san(o,t)}:{},...c&&u?{from:{data:e.getName(`facet_domain_${t}`)}}:{},...s?{title:s}:{},...i.sizeSignal?{encode:{update:{[f]:i.sizeSignal}}}:{},...c?{axes:l}:{}}}}return null}const aan={column:{start:0,end:1},row:{start:1,end:0}};function uan(e,t){return aan[t][e]}function lan(e,t){const n={};for(const r of Nc){const i=e[r];if(i!=null&&i.facetFieldDef){const{titleAnchor:s,titleOrient:o}=uj(["titleAnchor","titleOrient"],i.facetFieldDef.header,t,r),a=aj(r,o),u=uan(s,a);u!==void 0&&(n[a]=u)}}return Ur(n)?void 0:n}function nBe(e,t,n,r,i){const s={};for(const o of r){if(!i[o])continue;const a=oS(o,t==null?void 0:t.header,e,n);a!==void 0&&(s[i[o]]=a)}return s}function ose(e){return[...aO(e,"width"),...aO(e,"height"),...aO(e,"childWidth"),...aO(e,"childHeight")]}function aO(e,t){const n=t==="width"?"x":"y",r=e.component.layoutSize.get(t);if(!r||r==="merged")return[];const i=e.getSizeSignalRef(t).signal;if(r==="step"){const s=e.getScaleComponent(n);if(s){const o=s.get("type"),a=s.get("range");if(go(o)&&vv(a)){const u=e.scaleName(n);return jl(e.parent)&&e.parent.component.resolve.scale[n]==="independent"?[Yye(u,a)]:[Yye(u,a),{name:i,update:rBe(u,s,`domain('${u}').length`)}]}}throw new Error("layout size is step although width/height is not step.")}else if(r=="container"){const s=i.endsWith("width"),o=s?"containerSize()[0]":"containerSize()[1]",a=pW(e.config.view,s?"width":"height"),u=`isFinite(${o}) ? ${o} : ${a}`;return[{name:i,init:u,on:[{update:u,events:"window:resize"}]}]}else return[{name:i,value:r}]}function Yye(e,t){const n=`${e}_step`;return Rt(t.step)?{name:n,update:t.step.signal}:{name:n,value:t.step}}function rBe(e,t,n){const r=t.get("type"),i=t.get("padding"),s=ps(t.get("paddingOuter"),i);let o=t.get("paddingInner");return o=r==="band"?o!==void 0?o:i:1,`bandspace(${n}, ${jf(o)}, ${jf(s)}) * ${e}_step`}function iBe(e){return e==="childWidth"?"width":e==="childHeight"?"height":e}function sBe(e,t){return Ke(e).reduce((n,r)=>{const i=e[r];return{...n,...xT(t,i,r,s=>di(s.value))}},{})}function oBe(e,t){if(jl(t))return e==="theta"?"independent":"shared";if(CT(t))return"shared";if(hse(t))return ms(e)||e==="theta"||e==="radius"?"independent":"shared";throw new Error("invalid model type for resolve")}function ase(e,t){const n=e.scale[t],r=ms(t)?"axis":"legend";return n==="independent"?(e[r][t]==="shared"&&Je(Unn(t)),"independent"):e[r][t]||"shared"}const can={...Yin,disable:1,labelExpr:1,selections:1,opacity:1,shape:1,stroke:1,fill:1,size:1,strokeWidth:1,strokeDash:1,encode:1},aBe=Ke(can);class fan extends xg{}const Kye={symbols:dan,gradient:han,labels:pan,entries:man};function dan(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i,legendType:s}){if(s!=="symbol")return;const{markDef:o,encoding:a,config:u,mark:l}=n,c=o.filled&&l!=="trail";let f={...Jtn({},n,Qrn),...O8e(n,{filled:c})};const d=i.get("symbolOpacity")??u.legend.symbolOpacity,h=i.get("symbolFillColor")??u.legend.symbolFillColor,p=i.get("symbolStrokeColor")??u.legend.symbolStrokeColor,m=d===void 0?uBe(a.opacity)??o.opacity:void 0;if(f.fill){if(r==="fill"||c&&r===ul)delete f.fill;else if(f.fill.field)h?delete f.fill:(f.fill=di(u.legend.symbolBaseFillColor??"black"),f.fillOpacity=di(m??1));else if(je(f.fill)){const g=xW(a.fill??a.color)??o.fill??(c&&o.color);g&&(f.fill=di(g))}}if(f.stroke){if(r==="stroke"||!c&&r===ul)delete f.stroke;else if(f.stroke.field||p)delete f.stroke;else if(je(f.stroke)){const g=ps(xW(a.stroke||a.color),o.stroke,c?o.color:void 0);g&&(f.stroke={value:g})}}if(r!==_g){const g=Ze(t)&&cBe(n,i,t);g?f.opacity=[{test:g,...di(m??1)},di(u.legend.unselectedOpacity)]:m&&(f.opacity=di(m))}return f={...f,...e},Ur(f)?void 0:f}function han(e,{model:t,legendType:n,legendCmpt:r}){if(n!=="gradient")return;const{config:i,markDef:s,encoding:o}=t;let a={};const l=(r.get("gradientOpacity")??i.legend.gradientOpacity)===void 0?uBe(o.opacity)||s.opacity:void 0;return l&&(a.opacity=di(l)),a={...a,...e},Ur(a)?void 0:a}function pan(e,{fieldOrDatumDef:t,model:n,channel:r,legendCmpt:i}){const s=n.legend(r)||{},o=n.config,a=Ze(t)?cBe(n,i,t):void 0,u=a?[{test:a,value:1},{value:o.legend.unselectedOpacity}]:void 0,{format:l,formatType:c}=s;let f;$b(c)?f=Uf({fieldOrDatumDef:t,field:"datum.value",format:l,formatType:c,config:o}):l===void 0&&c===void 0&&o.customFormatTypes&&(t.type==="quantitative"&&o.numberFormatType?f=Uf({fieldOrDatumDef:t,field:"datum.value",format:o.numberFormat,formatType:o.numberFormatType,config:o}):t.type==="temporal"&&o.timeFormatType&&Ze(t)&&t.timeUnit===void 0&&(f=Uf({fieldOrDatumDef:t,field:"datum.value",format:o.timeFormat,formatType:o.timeFormatType,config:o})));const d={...u?{opacity:u}:{},...f?{text:f}:{},...e};return Ur(d)?void 0:d}function man(e,{legendCmpt:t}){const n=t.get("selections");return n!=null&&n.length?{...e,fill:{value:"transparent"}}:e}function uBe(e){return lBe(e,(t,n)=>Math.max(t,n.value))}function xW(e){return lBe(e,(t,n)=>ps(t,n.value))}function lBe(e,t){if(cin(e))return pt(e.condition).reduce(t,e.value);if(ad(e))return e.value}function cBe(e,t,n){const r=t.get("selections");if(!(r!=null&&r.length))return;const i=rt(n.field);return r.map(s=>`(!length(data(${rt(Ri(s)+Fb)})) || (${s}[${i}] && indexof(${s}[${i}], datum.value) >= 0))`).join(" || ")}const Xye={direction:({direction:e})=>e,format:({fieldOrDatumDef:e,legend:t,config:n})=>{const{format:r,formatType:i}=t;return wje(e,e.type,r,i,n,!1)},formatType:({legend:e,fieldOrDatumDef:t,scaleType:n})=>{const{formatType:r}=e;return Eje(r,t,n)},gradientLength:e=>{const{legend:t,legendConfig:n}=e;return t.gradientLength??n.gradientLength??Ean(e)},labelOverlap:({legend:e,legendConfig:t,scaleType:n})=>e.labelOverlap??t.labelOverlap??xan(n),symbolType:({legend:e,markDef:t,channel:n,encoding:r})=>e.symbolType??yan(t.type,n,r.shape,t.shape),title:({fieldOrDatumDef:e,config:t})=>FE(e,t,{allowDisabling:!0}),type:({legendType:e,scaleType:t,channel:n})=>{if(LE(n)&&Bf(t)){if(e==="gradient")return}else if(e==="symbol")return;return e},values:({fieldOrDatumDef:e,legend:t})=>gan(t,e)};function gan(e,t){const n=e.values;if(je(n))return Bje(t,n);if(Rt(n))return n}function yan(e,t,n,r){if(t!=="shape"){const i=xW(n)??r;if(i)return i}switch(e){case"bar":case"rect":case"image":case"square":return"square";case"line":case"trail":case"rule":return"stroke";case"arc":case"point":case"circle":case"tick":case"geoshape":case"area":case"text":return"circle"}}function van(e){const{legend:t}=e;return ps(t.type,ban(e))}function ban({channel:e,timeUnit:t,scaleType:n}){if(LE(e)){if(Wn(["quarter","month","day"],t))return"symbol";if(Bf(n))return"gradient"}return"symbol"}function _an({legendConfig:e,legendType:t,orient:n,legend:r}){return r.direction??e[t?"gradientDirection":"symbolDirection"]??wan(n,t)}function wan(e,t){switch(e){case"top":case"bottom":return"horizontal";case"left":case"right":case"none":case void 0:return;default:return t==="gradient"?"horizontal":void 0}}function Ean({legendConfig:e,model:t,direction:n,orient:r,scaleType:i}){const{gradientHorizontalMaxLength:s,gradientHorizontalMinLength:o,gradientVerticalMaxLength:a,gradientVerticalMinLength:u}=e;if(Bf(i))return n==="horizontal"?r==="top"||r==="bottom"?Qye(t,"width",o,s):o:Qye(t,"height",u,a)}function Qye(e,t,n,r){return{signal:`clamp(${e.getSizeSignalRef(t).signal}, ${n}, ${r})`}}function xan(e){if(Wn(["quantile","threshold","log","symlog"],e))return"greedy"}function fBe(e){const t=Xi(e)?San(e):Ian(e);return e.component.legends=t,t}function San(e){const{encoding:t}=e,n={};for(const r of[ul,...a8e]){const i=js(t[r]);!i||!e.getScaleComponent(r)||r===ll&&Ze(i)&&i.type===ET||(n[r]=Can(e,r))}return n}function Tan(e,t){const n=e.scaleName(t);if(e.mark==="trail"){if(t==="color")return{stroke:n};if(t==="size")return{strokeWidth:n}}return t==="color"?e.markDef.filled?{fill:n}:{stroke:n}:{[t]:n}}function Aan(e,t,n,r){switch(t){case"disable":return n!==void 0;case"values":return!!(n!=null&&n.values);case"title":if(t==="title"&&e===(r==null?void 0:r.title))return!0}return e===(n||{})[t]}function Can(e,t){var w;let n=e.legend(t);const{markDef:r,encoding:i,config:s}=e,o=s.legend,a=new fan({},Tan(e,t));Mon(e,t,a);const u=n!==void 0?!n:o.disable;if(a.set("disable",u,n!==void 0),u)return a;n=n||{};const l=e.getScaleComponent(t).get("type"),c=js(i[t]),f=Ze(c)?(w=mo(c.timeUnit))==null?void 0:w.unit:void 0,d=n.orient||s.legend.orient||"right",h=van({legend:n,channel:t,timeUnit:f,scaleType:l}),p=_an({legend:n,legendType:h,orient:d,legendConfig:o}),m={legend:n,channel:t,model:e,markDef:r,encoding:i,fieldOrDatumDef:c,legendConfig:o,config:s,scaleType:l,orient:d,legendType:h,direction:p};for(const E of aBe){if(h==="gradient"&&E.startsWith("symbol")||h==="symbol"&&E.startsWith("gradient"))continue;const T=E in Xye?Xye[E](m):n[E];if(T!==void 0){const S=Aan(T,E,n,e.fieldDef(t));(S||s.legend[E]===void 0)&&a.set(E,T,S)}}const g=(n==null?void 0:n.encoding)??{},y=a.get("selections"),v={},b={fieldOrDatumDef:c,model:e,channel:t,legendCmpt:a,legendType:h};for(const E of["labels","legend","title","symbols","gradient","entries"]){const T=sBe(g[E]??{},e),S=E in Kye?Kye[E](T,b):T;S!==void 0&&!Ur(S)&&(v[E]={...y!=null&&y.length&&Ze(c)?{name:`${Ri(c.field)}_legend_${E}`}:{},...y!=null&&y.length?{interactive:!!y}:{},update:S})}return Ur(v)||a.set("encode",v,!!(n!=null&&n.encoding)),a}function Ian(e){const{legends:t,resolve:n}=e.component;for(const r of e.children){fBe(r);for(const i of Ke(r.component.legends))n.legend[i]=ase(e.component.resolve,i),n.legend[i]==="shared"&&(t[i]=dBe(t[i],r.component.legends[i]),t[i]||(n.legend[i]="independent",delete t[i]))}for(const r of Ke(t))for(const i of e.children)i.component.legends[r]&&n.legend[r]==="shared"&&delete i.component.legends[r];return t}function dBe(e,t){var s,o,a,u;if(!e)return t.clone();const n=e.getWithExplicit("orient"),r=t.getWithExplicit("orient");if(n.explicit&&r.explicit&&n.value!==r.value)return;let i=!1;for(const l of aBe){const c=Oy(e.getWithExplicit(l),t.getWithExplicit(l),l,"legend",(f,d)=>{switch(l){case"symbolType":return kan(f,d);case"title":return G5e(f,d);case"type":return i=!0,yl("symbol")}return nj(f,d,l,"legend")});e.setWithExplicit(l,c)}return i&&((o=(s=e.implicit)==null?void 0:s.encode)!=null&&o.gradient&&vL(e.implicit,["encode","gradient"]),(u=(a=e.explicit)==null?void 0:a.encode)!=null&&u.gradient&&vL(e.explicit,["encode","gradient"])),e}function kan(e,t){return t.value==="circle"?t:e}function Ran(e,t,n,r){var i,s;e.encode??(e.encode={}),(i=e.encode)[t]??(i[t]={}),(s=e.encode[t]).update??(s.update={}),e.encode[t].update[n]=r}function hBe(e){const t=e.component.legends,n={};for(const i of Ke(t)){const s=e.getScaleComponent(i),o=zr(s.get("domains"));if(n[o])for(const a of n[o])dBe(a,t[i])||n[o].push(t[i]);else n[o]=[t[i].clone()]}return jo(n).flat().map(i=>Nan(i,e.config)).filter(i=>i!==void 0)}function Nan(e,t){var o,a,u;const{disable:n,labelExpr:r,selections:i,...s}=e.combine();if(!n){if(t.aria===!1&&s.aria==null&&(s.aria=!1),(o=s.encode)!=null&&o.symbols){const l=s.encode.symbols.update;l.fill&&l.fill.value!=="transparent"&&!l.stroke&&!s.stroke&&(l.stroke={value:"transparent"});for(const c of a8e)s[c]&&delete l[c]}if(s.title||delete s.title,r!==void 0){let l=r;(u=(a=s.encode)==null?void 0:a.labels)!=null&&u.update&&Rt(s.encode.labels.update.text)&&(l=Nb(r,"datum.label",s.encode.labels.update.text.signal)),Ran(s,"labels","text",{signal:l})}return s}}function Pan(e){return CT(e)||hse(e)?Oan(e):pBe(e)}function Oan(e){return e.children.reduce((t,n)=>t.concat(n.assembleProjections()),pBe(e))}function pBe(e){const t=e.component.projection;if(!t||t.merged)return[];const n=t.combine(),{name:r}=n;if(t.data){const i={signal:`[${t.size.map(o=>o.signal).join(", ")}]`},s=t.data.reduce((o,a)=>{const u=Rt(a)?a.signal:`data('${e.lookupDataSource(a)}')`;return Wn(o,u)||o.push(u),o},[]);if(s.length<=0)throw new Error("Projection's fit didn't find any data sources");return[{name:r,size:i,fit:{signal:s.length>1?`[${s.join(", ")}]`:s[0]},...n}]}else return[{name:r,translate:{signal:"[width / 2, height / 2]"},...n}]}const Dan=["type","clipAngle","clipExtent","center","rotate","precision","reflectX","reflectY","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"];class mBe extends xg{constructor(t,n,r,i){super({...n},{name:t}),this.specifiedProjection=n,this.size=r,this.data=i,this.merged=!1}get isFit(){return!!this.data}}function gBe(e){e.component.projection=Xi(e)?$an(e):Fan(e)}function $an(e){if(e.hasProjection){const t=Ou(e.specifiedProjection),n=!(t&&(t.scale!=null||t.translate!=null)),r=n?[e.getSizeSignalRef("width"),e.getSizeSignalRef("height")]:void 0,i=n?Man(e):void 0,s=new mBe(e.projectionName(!0),{...Ou(e.config.projection),...t},r,i);return s.get("type")||s.set("type","equalEarth",!1),s}}function Man(e){const t=[],{encoding:n}=e;for(const r of[[_d,bd],[Gc,wd]])(js(n[r[0]])||js(n[r[1]]))&&t.push({signal:e.getName(`geojson_${t.length}`)});return e.channelHasField(ll)&&e.typedFieldDef(ll).type===ET&&t.push({signal:e.getName(`geojson_${t.length}`)}),t.length===0&&t.push(e.requestDataName(Si.Main)),t}function Lan(e,t){const n=eie(Dan,i=>!!(!jt(e.explicit,i)&&!jt(t.explicit,i)||jt(e.explicit,i)&&jt(t.explicit,i)&&Ol(e.get(i),t.get(i))));if(Ol(e.size,t.size)){if(n)return e;if(Ol(e.explicit,{}))return t;if(Ol(t.explicit,{}))return e}return null}function Fan(e){if(e.children.length===0)return;let t;for(const r of e.children)gBe(r);const n=eie(e.children,r=>{const i=r.component.projection;if(i)if(t){const s=Lan(t,i);return s&&(t=s),!!s}else return t=i,!0;else return!0});if(t&&n){const r=e.projectionName(!0),i=new mBe(r,t.specifiedProjection,t.size,rn(t.data));for(const s of e.children){const o=s.component.projection;o&&(o.isFit&&i.data.push(...s.component.projection.data),s.renameProjection(o.get("name"),r),o.merged=!0)}return i}}function jan(e,t,n,r){if(cN(t,n)){const i=Xi(e)?e.axis(n)??e.legend(n)??{}:{},s=at(t,{expr:"datum"}),o=at(t,{expr:"datum",binSuffix:"end"});return{formulaAs:at(t,{binSuffix:"range",forAs:!0}),formula:aN(s,o,i.format,i.formatType,r)}}return{}}function yBe(e,t){return`${j5e(e)}_${t}`}function Ban(e,t){return{signal:e.getName(`${t}_bins`),extentSignal:e.getName(`${t}_extent`)}}function use(e,t,n){const r=X5(n,void 0)??{},i=yBe(r,t);return e.getName(`${i}_bins`)}function Uan(e){return"as"in e}function Jye(e,t,n){let r,i;Uan(e)?r=mt(e.as)?[e.as,`${e.as}_end`]:[e.as[0],e.as[1]]:r=[at(e,{forAs:!0}),at(e,{binSuffix:"end",forAs:!0})];const s={...X5(t,void 0)},o=yBe(s,e.field),{signal:a,extentSignal:u}=Ban(n,o);if(j5(s.extent)){const c=s.extent;i=K8e(n,c.param,c),delete s.extent}const l={bin:s,field:e.field,as:[r],...a?{signal:a}:{},...u?{extentSignal:u}:{},...i?{span:i}:{}};return{key:o,binComponent:l}}class Ih extends Fr{clone(){return new Ih(null,rn(this.bins))}constructor(t,n){super(t),this.bins=n}static makeFromEncoding(t,n){const r=n.reduceFieldDef((i,s,o)=>{if(ou(s)&&oi(s.bin)){const{key:a,binComponent:u}=Jye(s,s.bin,n);i[a]={...u,...i[a],...jan(n,s,o,n.config)}}return i},{});return Ur(r)?null:new Ih(t,r)}static makeFromTransform(t,n,r){const{key:i,binComponent:s}=Jye(n,n.bin,r);return new Ih(t,{[i]:s})}merge(t,n){for(const r of Ke(t.bins))r in this.bins?(n(t.bins[r].signal,this.bins[r].signal),this.bins[r].as=lh([...this.bins[r].as,...t.bins[r].as],qn)):this.bins[r]=t.bins[r];for(const r of t.children)t.removeChild(r),r.parent=this;t.remove()}producedFields(){return new Set(jo(this.bins).map(t=>t.as).flat(2))}dependentFields(){return new Set(jo(this.bins).map(t=>t.field))}hash(){return`Bin ${qn(this.bins)}`}assemble(){return jo(this.bins).flatMap(t=>{const n=[],[r,...i]=t.as,{extent:s,...o}=t.bin,a={type:"bin",field:Wc(t.field),as:r,signal:t.signal,...j5(s)?{extent:null}:{extent:s},...t.span?{span:{signal:`span(${t.span})`}}:{},...o};!s&&t.extentSignal&&(n.push({type:"extent",field:Wc(t.field),signal:t.extentSignal}),a.extent={signal:t.extentSignal}),n.push(a);for(const u of i)for(let l=0;l<2;l++)n.push({type:"formula",expr:at({field:r[l]},{expr:"datum"}),as:u[l]});return t.formula&&n.push({type:"formula",expr:t.formula,as:t.formulaAs}),n})}}function zan(e,t,n,r){var s;const i=Xi(r)?r.encoding[hp(t)]:void 0;if(ou(n)&&Xi(r)&&Pje(n,i,r.markDef,r.config)){e.add(at(n,{})),e.add(at(n,{suffix:"end"}));const{mark:o,markDef:a,config:u}=r,l=Py({fieldDef:n,markDef:a,config:u});dk(o)&&l!==.5&&ms(t)&&(e.add(at(n,{suffix:rj})),e.add(at(n,{suffix:ij}))),n.bin&&cN(n,t)&&e.add(at(n,{binSuffix:"range"}))}else if(k5e(t)){const o=I5e(t);e.add(r.getName(o))}else e.add(at(n));return A_(n)&&Prn((s=n.scale)==null?void 0:s.range)&&e.add(n.scale.range.field),e}function Van(e,t){for(const n of Ke(t)){const r=t[n];for(const i of Ke(r))n in e?e[n][i]=new Set([...e[n][i]??[],...r[i]]):e[n]={[i]:r[i]}}}class Kf extends Fr{clone(){return new Kf(null,new Set(this.dimensions),rn(this.measures))}constructor(t,n,r){super(t),this.dimensions=n,this.measures=r}get groupBy(){return this.dimensions}static makeFromEncoding(t,n){let r=!1;n.forEachFieldDef(o=>{o.aggregate&&(r=!0)});const i={},s=new Set;return!r||(n.forEachFieldDef((o,a)=>{const{aggregate:u,field:l}=o;if(u)if(u==="count")i["*"]??(i["*"]={}),i["*"].count=new Set([at(o,{forAs:!0})]);else{if(Km(u)||yv(u)){const c=Km(u)?"argmin":"argmax",f=u[c];i[f]??(i[f]={}),i[f][c]=new Set([at({op:c,field:f},{forAs:!0})])}else i[l]??(i[l]={}),i[l][u]=new Set([at(o,{forAs:!0})]);wg(a)&&n.scaleDomain(a)==="unaggregated"&&(i[l]??(i[l]={}),i[l].min=new Set([at({field:l,aggregate:"min"},{forAs:!0})]),i[l].max=new Set([at({field:l,aggregate:"max"},{forAs:!0})]))}else zan(s,a,o,n)}),s.size+Ke(i).length===0)?null:new Kf(t,s,i)}static makeFromTransform(t,n){const r=new Set,i={};for(const s of n.aggregate){const{op:o,field:a,as:u}=s;o&&(o==="count"?(i["*"]??(i["*"]={}),i["*"].count=new Set([u||at(s,{forAs:!0})])):(i[a]??(i[a]={}),i[a][o]=new Set([u||at(s,{forAs:!0})])))}for(const s of n.groupby??[])r.add(s);return r.size+Ke(i).length===0?null:new Kf(t,r,i)}merge(t){return _5e(this.dimensions,t.dimensions)?(Van(this.measures,t.measures),!0):(rrn("different dimensions, cannot merge"),!1)}addDimensions(t){t.forEach(this.dimensions.add,this.dimensions)}dependentFields(){return new Set([...this.dimensions,...Ke(this.measures)])}producedFields(){const t=new Set;for(const n of Ke(this.measures))for(const r of Ke(this.measures[n])){const i=this.measures[n][r];i.size===0?t.add(`${r}_${n}`):i.forEach(t.add,t)}return t}hash(){return`Aggregate ${qn({dimensions:this.dimensions,measures:this.measures})}`}assemble(){const t=[],n=[],r=[];for(const s of Ke(this.measures))for(const o of Ke(this.measures[s]))for(const a of this.measures[s][o])r.push(a),t.push(o),n.push(s==="*"?null:Wc(s));return{type:"aggregate",groupby:[...this.dimensions].map(Wc),ops:t,fields:n,as:r}}}class TT extends Fr{constructor(t,n,r,i){super(t),this.model=n,this.name=r,this.data=i;for(const s of Nc){const o=n.facet[s];if(o){const{bin:a,sort:u}=o;this[s]={name:n.getName(`${s}_domain`),fields:[at(o),...oi(a)?[at(o,{binSuffix:"end"})]:[]],...Ah(u)?{sortField:u}:je(u)?{sortIndexField:sS(o,s)}:{}}}}this.childModel=n.child}hash(){let t="Facet";for(const n of Nc)this[n]&&(t+=` ${n.charAt(0)}:${qn(this[n])}`);return t}get fields(){var n;const t=[];for(const r of Nc)(n=this[r])!=null&&n.fields&&t.push(...this[r].fields);return t}dependentFields(){const t=new Set(this.fields);for(const n of Nc)this[n]&&(this[n].sortField&&t.add(this[n].sortField.field),this[n].sortIndexField&&t.add(this[n].sortIndexField));return t}producedFields(){return new Set}getSource(){return this.name}getChildIndependentFieldsWithStep(){const t={};for(const n of pp){const r=this.childModel.component.scales[n];if(r&&!r.merged){const i=r.get("type"),s=r.get("range");if(go(i)&&vv(s)){const o=lj(this.childModel,n),a=dse(o);a?t[n]=a:Je(hie(n))}}}return t}assembleRowColumnHeaderData(t,n,r){const i={row:"y",column:"x",facet:void 0}[t],s=[],o=[],a=[];i&&r&&r[i]&&(n?(s.push(`distinct_${r[i]}`),o.push("max")):(s.push(r[i]),o.push("distinct")),a.push(`distinct_${r[i]}`));const{sortField:u,sortIndexField:l}=this[t];if(u){const{op:c=W5,field:f}=u;s.push(f),o.push(c),a.push(at(u,{forAs:!0}))}else l&&(s.push(l),o.push("max"),a.push(l));return{name:this[t].name,source:n??this.data,transform:[{type:"aggregate",groupby:this[t].fields,...s.length?{fields:s,ops:o,as:a}:{}}]}}assembleFacetHeaderData(t){var u;const{columns:n}=this.model.layout,{layoutHeaders:r}=this.model.component,i=[],s={};for(const l of ise){for(const c of sse){const f=(r[l]&&r[l][c])??[];for(const d of f)if(((u=d.axes)==null?void 0:u.length)>0){s[l]=!0;break}}if(s[l]){const c=`length(data("${this.facet.name}"))`,f=l==="row"?n?{signal:`ceil(${c} / ${n})`}:1:n?{signal:`min(${c}, ${n})`}:{signal:c};i.push({name:`${this.facet.name}_${l}`,transform:[{type:"sequence",start:0,stop:f}]})}}const{row:o,column:a}=s;return(o||a)&&i.unshift(this.assembleRowColumnHeaderData("facet",null,t)),i}assemble(){const t=[];let n=null;const r=this.getChildIndependentFieldsWithStep(),{column:i,row:s,facet:o}=this;if(i&&s&&(r.x||r.y)){n=`cross_${this.column.name}_${this.row.name}`;const a=[].concat(r.x??[],r.y??[]),u=a.map(()=>"distinct");t.push({name:n,source:this.data,transform:[{type:"aggregate",groupby:this.fields,fields:a,ops:u}]})}for(const a of[ym,gm])this[a]&&t.push(this.assembleRowColumnHeaderData(a,n,r));if(o){const a=this.assembleFacetHeaderData(r);a&&t.push(...a)}return t}}function Zye(e){return e.startsWith("'")&&e.endsWith("'")||e.startsWith('"')&&e.endsWith('"')?e.slice(1,-1):e}function Han(e,t){const n=rie(e);if(t==="number")return`toNumber(${n})`;if(t==="boolean")return`toBoolean(${n})`;if(t==="string")return`toString(${n})`;if(t==="date")return`toDate(${n})`;if(t==="flatten")return n;if(t.startsWith("date:")){const r=Zye(t.slice(5,t.length));return`timeParse(${n},'${r}')`}else if(t.startsWith("utc:")){const r=Zye(t.slice(4,t.length));return`utcParse(${n},'${r}')`}else return Je(dnn(t)),null}function qan(e){const t={};return UD(e.filter,n=>{if(cje(n)){let r=null;yie(n)?r=Tl(n.equal):bie(n)?r=Tl(n.lte):vie(n)?r=Tl(n.lt):_ie(n)?r=Tl(n.gt):wie(n)?r=Tl(n.gte):Eie(n)?r=n.range[0]:xie(n)&&(r=(n.oneOf??n.in)[0]),r&&(x_(r)?t[n.field]="date":fr(r)?t[n.field]="number":mt(r)&&(t[n.field]="string")),n.timeUnit&&(t[n.field]="date")}}),t}function Wan(e){const t={};function n(r){tS(r)?t[r.field]="date":r.type==="quantitative"&&Vtn(r.aggregate)?t[r.field]="number":Yx(r.field)>1?r.field in t||(t[r.field]="flatten"):A_(r)&&Ah(r.sort)&&Yx(r.sort.field)>1&&(r.sort.field in t||(t[r.sort.field]="flatten"))}if((Xi(e)||jl(e))&&e.forEachFieldDef((r,i)=>{if(ou(r))n(r);else{const s=w_(i),o=e.fieldDef(s);n({...r,type:o.type})}}),Xi(e)){const{mark:r,markDef:i,encoding:s}=e;if(T_(r)&&!e.encoding.order){const o=i.orient==="horizontal"?"y":"x",a=s[o];Ze(a)&&a.type==="quantitative"&&!(a.field in t)&&(t[a.field]="number")}}return t}function Gan(e){const t={};if(Xi(e)&&e.component.selection)for(const n of Ke(e.component.selection)){const r=e.component.selection[n];for(const i of r.project.items)!i.channel&&Yx(i.field)>1&&(t[i.field]="flatten")}return t}class ya extends Fr{clone(){return new ya(null,rn(this._parse))}constructor(t,n){super(t),this._parse=n}hash(){return`Parse ${qn(this._parse)}`}static makeExplicit(t,n,r){var o;let i={};const s=n.data;return!q0(s)&&((o=s==null?void 0:s.format)!=null&&o.parse)&&(i=s.format.parse),this.makeWithAncestors(t,i,{},r)}static makeWithAncestors(t,n,r,i){for(const a of Ke(r)){const u=i.getWithExplicit(a);u.value!==void 0&&(u.explicit||u.value===r[a]||u.value==="derived"||r[a]==="flatten"?delete r[a]:Je(lye(a,r[a],u.value)))}for(const a of Ke(n)){const u=i.get(a);u!==void 0&&(u===n[a]?delete n[a]:Je(lye(a,n[a],u)))}const s=new xg(n,r);i.copyAll(s);const o={};for(const a of Ke(s.combine())){const u=s.get(a);u!==null&&(o[a]=u)}return Ke(o).length===0||i.parseNothing?null:new ya(t,o)}get parse(){return this._parse}merge(t){this._parse={...this._parse,...t.parse},t.remove()}assembleFormatParse(){const t={};for(const n of Ke(this._parse)){const r=this._parse[n];Yx(n)===1&&(t[n]=r)}return t}producedFields(){return new Set(Ke(this._parse))}dependentFields(){return new Set(Ke(this._parse))}assembleTransforms(t=!1){return Ke(this._parse).filter(n=>t?Yx(n)>1:!0).map(n=>{const r=Han(n,this._parse[n]);return r?{type:"formula",expr:r,as:_T(n)}:null}).filter(n=>n!==null)}}class My extends Fr{clone(){return new My(null)}constructor(t){super(t)}dependentFields(){return new Set}producedFields(){return new Set([ud])}hash(){return"Identifier"}assemble(){return{type:"identifier",as:ud}}}class hN extends Fr{clone(){return new hN(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){}hash(){return`Graticule ${qn(this.params)}`}assemble(){return{type:"graticule",...this.params===!0?{}:this.params}}}class pN extends Fr{clone(){return new pN(null,this.params)}constructor(t,n){super(t),this.params=n}dependentFields(){return new Set}producedFields(){return new Set([this.params.as??"data"])}hash(){return`Hash ${qn(this.params)}`}assemble(){return{type:"sequence",...this.params}}}class jb extends Fr{constructor(t){super(null),t??(t={name:"source"});let n;if(q0(t)||(n=t.format?{...Qu(t.format,["parse"])}:{}),hk(t))this._data={values:t.values};else if(nS(t)){if(this._data={url:t.url},!n.type){let r=/(?:\.([^.]+))?$/.exec(t.url)[1];Wn(["json","csv","tsv","dsv","topojson"],r)||(r="json"),n.type=r}}else T8e(t)?this._data={values:[{type:"Sphere"}]}:(x8e(t)||q0(t))&&(this._data={});this._generator=q0(t),t.name&&(this._name=t.name),n&&!Ur(n)&&(this._data.format=n)}dependentFields(){return new Set}producedFields(){}get data(){return this._data}hasName(){return!!this._name}get isGenerator(){return this._generator}get dataName(){return this._name}set dataName(t){this._name=t}set parent(t){throw new Error("Source nodes have to be roots.")}remove(){throw new Error("Source nodes are roots and cannot be removed.")}hash(){throw new Error("Cannot hash sources")}assemble(){return{name:this._name,...this._data,transform:[]}}}var eve=function(e,t,n,r,i){if(r==="m")throw new TypeError("Private method is not writable");if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?e!==t||!i:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return r==="a"?i.call(e,n):i?i.value=n:t.set(e,n),n},Yan=function(e,t,n,r){if(n==="a"&&!r)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return n==="m"?r:n==="a"?r.call(e):r?r.value:t.get(e)},SC;function lse(e){return e instanceof jb||e instanceof hN||e instanceof pN}class cse{constructor(){SC.set(this,void 0),eve(this,SC,!1,"f")}setModified(){eve(this,SC,!0,"f")}get modifiedFlag(){return Yan(this,SC,"f")}}SC=new WeakMap;class C_ extends cse{getNodeDepths(t,n,r){r.set(t,n);for(const i of t.children)this.getNodeDepths(i,n+1,r);return r}optimize(t){const r=[...this.getNodeDepths(t,0,new Map).entries()].sort((i,s)=>s[1]-i[1]);for(const i of r)this.run(i[0]);return this.modifiedFlag}}class fse extends cse{optimize(t){this.run(t);for(const n of t.children)this.optimize(n);return this.modifiedFlag}}class Kan extends fse{mergeNodes(t,n){const r=n.shift();for(const i of n)t.removeChild(i),i.parent=r,i.remove()}run(t){const n=t.children.map(i=>i.hash()),r={};for(let i=0;i<n.length;i++)r[n[i]]===void 0?r[n[i]]=[t.children[i]]:r[n[i]].push(t.children[i]);for(const i of Ke(r))r[i].length>1&&(this.setModified(),this.mergeNodes(t,r[i]))}}class Xan extends fse{constructor(t){super(),this.requiresSelectionId=t&&rse(t)}run(t){t instanceof My&&(this.requiresSelectionId&&(lse(t.parent)||t.parent instanceof Kf||t.parent instanceof ya)||(this.setModified(),t.remove()))}}class Qan extends cse{optimize(t){return this.run(t,new Set),this.modifiedFlag}run(t,n){let r=new Set;t instanceof Ch&&(r=t.producedFields(),tie(r,n)&&(this.setModified(),t.removeFormulas(n),t.producedFields.length===0&&t.remove()));for(const i of t.children)this.run(i,new Set([...n,...r]))}}class Jan extends fse{constructor(){super()}run(t){t instanceof Zu&&!t.isRequired()&&(this.setModified(),t.remove())}}class Zan extends C_{run(t){if(!lse(t)&&!(t.numChildren()>1)){for(const n of t.children)if(n instanceof ya)if(t instanceof ya)this.setModified(),t.merge(n);else{if(nie(t.producedFields(),n.dependentFields()))continue;this.setModified(),n.swapWithParent()}}}}class eun extends C_{run(t){const n=[...t.children],r=t.children.filter(i=>i instanceof ya);if(t.numChildren()>1&&r.length>=1){const i={},s=new Set;for(const o of r){const a=o.parse;for(const u of Ke(a))u in i?i[u]!==a[u]&&s.add(u):i[u]=a[u]}for(const o of s)delete i[o];if(!Ur(i)){this.setModified();const o=new ya(t,i);for(const a of n){if(a instanceof ya)for(const u of Ke(i))delete a.parse[u];t.removeChild(a),a.parent=o,a instanceof ya&&Ke(a.parse).length===0&&a.remove()}}}}}class tun extends C_{run(t){t instanceof Zu||t.numChildren()>0||t instanceof TT||t instanceof jb||(this.setModified(),t.remove())}}class nun extends C_{run(t){const n=t.children.filter(i=>i instanceof Ch),r=n.pop();for(const i of n)this.setModified(),r.merge(i)}}class run extends C_{run(t){const n=t.children.filter(i=>i instanceof Kf),r={};for(const i of n){const s=qn(i.groupBy);s in r||(r[s]=[]),r[s].push(i)}for(const i of Ke(r)){const s=r[i];if(s.length>1){const o=s.pop();for(const a of s)o.merge(a)&&(t.removeChild(a),a.parent=o,a.remove(),this.setModified())}}}}class iun extends C_{constructor(t){super(),this.model=t}run(t){const n=!(lse(t)||t instanceof ST||t instanceof ya||t instanceof My),r=[],i=[];for(const s of t.children)s instanceof Ih&&(n&&!nie(t.producedFields(),s.dependentFields())?r.push(s):i.push(s));if(r.length>0){const s=r.pop();for(const o of r)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified(),t instanceof Ih?t.merge(s,this.model.renameSignal.bind(this.model)):s.swapWithParent()}if(i.length>1){const s=i.pop();for(const o of i)s.merge(o,this.model.renameSignal.bind(this.model));this.setModified()}}}class sun extends C_{run(t){const n=[...t.children];if(!Rb(n,o=>o instanceof Zu)||t.numChildren()<=1)return;const i=[];let s;for(const o of n)if(o instanceof Zu){let a=o;for(;a.numChildren()===1;){const[u]=a.children;if(u instanceof Zu)a=u;else break}i.push(...a.children),s?(t.removeChild(o),o.parent=s.parent,s.parent.removeChild(s),s.parent=a,this.setModified()):s=a}else i.push(o);if(i.length){this.setModified();for(const o of i)o.parent.removeChild(o),o.parent=s}}}class I_ extends Fr{clone(){return new I_(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return this.transform.groupby&&this.transform.groupby.forEach(t.add,t),this.transform.joinaggregate.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.joinaggregate.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`JoinAggregateTransform ${qn(this.transform)}`}assemble(){const t=[],n=[],r=[];for(const s of this.transform.joinaggregate)n.push(s.op),r.push(this.getDefaultName(s)),t.push(s.field===void 0?null:s.field);const i=this.transform.groupby;return{type:"joinaggregate",as:r,ops:n,fields:t,...i!==void 0?{groupby:i}:{}}}}function oun(e){return e.stack.stackBy.reduce((t,n)=>{const r=n.fieldDef,i=at(r);return i&&t.push(i),t},[])}function aun(e){return je(e)&&e.every(t=>mt(t))&&e.length>1}class bm extends Fr{clone(){return new bm(null,rn(this._stack))}constructor(t,n){super(t),this._stack=n}static makeFromTransform(t,n){const{stack:r,groupby:i,as:s,offset:o="zero"}=n,a=[],u=[];if(n.sort!==void 0)for(const f of n.sort)a.push(f.field),u.push(ps(f.order,"ascending"));const l={field:a,order:u};let c;return aun(s)?c=s:mt(s)?c=[s,`${s}_end`]:c=[`${n.stack}_start`,`${n.stack}_end`],new bm(t,{dimensionFieldDefs:[],stackField:r,groupby:i,offset:o,sort:l,facetby:[],as:c})}static makeFromEncoding(t,n){const r=n.stack,{encoding:i}=n;if(!r)return null;const{groupbyChannels:s,fieldChannel:o,offset:a,impute:u}=r,l=s.map(h=>{const p=i[h];return qh(p)}).filter(h=>!!h),c=oun(n),f=n.encoding.order;let d;if(je(f)||Ze(f))d=H5e(f);else{const h=Oje(f)?f.sort:o==="y"?"descending":"ascending";d=c.reduce((p,m)=>(p.field.includes(m)||(p.field.push(m),p.order.push(h)),p),{field:[],order:[]})}return new bm(t,{dimensionFieldDefs:l,stackField:n.vgField(o),facetby:[],stackby:c,sort:d,offset:a,impute:u,as:[n.vgField(o,{suffix:"start",forAs:!0}),n.vgField(o,{suffix:"end",forAs:!0})]})}get stack(){return this._stack}addDimensions(t){this._stack.facetby.push(...t)}dependentFields(){const t=new Set;return t.add(this._stack.stackField),this.getGroupbyFields().forEach(t.add,t),this._stack.facetby.forEach(t.add,t),this._stack.sort.field.forEach(t.add,t),t}producedFields(){return new Set(this._stack.as)}hash(){return`Stack ${qn(this._stack)}`}getGroupbyFields(){const{dimensionFieldDefs:t,impute:n,groupby:r}=this._stack;return t.length>0?t.map(i=>i.bin?n?[at(i,{binSuffix:"mid"})]:[at(i,{}),at(i,{binSuffix:"end"})]:[at(i)]).flat():r??[]}assemble(){const t=[],{facetby:n,dimensionFieldDefs:r,stackField:i,stackby:s,sort:o,offset:a,impute:u,as:l}=this._stack;if(u)for(const c of r){const{bandPosition:f=.5,bin:d}=c;if(d){const h=at(c,{expr:"datum"}),p=at(c,{expr:"datum",binSuffix:"end"});t.push({type:"formula",expr:`${f}*${h}+${1-f}*${p}`,as:at(c,{binSuffix:"mid",forAs:!0})})}t.push({type:"impute",field:i,groupby:[...s,...n],key:at(c,{binSuffix:"mid"}),method:"value",value:0})}return t.push({type:"stack",groupby:[...this.getGroupbyFields(),...n],field:i,sort:o,as:l,offset:a}),t}}class AT extends Fr{clone(){return new AT(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lh(this.transform.groupby.concat(t),n=>n)}dependentFields(){const t=new Set;return(this.transform.groupby??[]).forEach(t.add,t),(this.transform.sort??[]).forEach(n=>t.add(n.field)),this.transform.window.map(n=>n.field).filter(n=>n!==void 0).forEach(t.add,t),t}producedFields(){return new Set(this.transform.window.map(this.getDefaultName))}getDefaultName(t){return t.as??at(t)}hash(){return`WindowTransform ${qn(this.transform)}`}assemble(){const t=[],n=[],r=[],i=[];for(const f of this.transform.window)n.push(f.op),r.push(this.getDefaultName(f)),i.push(f.param===void 0?null:f.param),t.push(f.field===void 0?null:f.field);const s=this.transform.frame,o=this.transform.groupby;if(s&&s[0]===null&&s[1]===null&&n.every(f=>fie(f)))return{type:"joinaggregate",as:r,ops:n,fields:t,...o!==void 0?{groupby:o}:{}};const a=[],u=[];if(this.transform.sort!==void 0)for(const f of this.transform.sort)a.push(f.field),u.push(f.order??"ascending");const l={field:a,order:u},c=this.transform.ignorePeers;return{type:"window",params:i,as:r,ops:n,fields:t,sort:l,...c!==void 0?{ignorePeers:c}:{},...o!==void 0?{groupby:o}:{},...s!==void 0?{frame:s}:{}}}}function uun(e){function t(n){if(!(n instanceof TT)){const r=n.clone();if(r instanceof Zu){const i=TW+r.getSource();r.setSource(i),e.model.component.data.outputNodes[i]=r}else(r instanceof Kf||r instanceof bm||r instanceof AT||r instanceof I_)&&r.addDimensions(e.fields);for(const i of n.children.flatMap(t))i.parent=r;return[r]}return n.children.flatMap(t)}return t}function SW(e){if(e instanceof TT)if(e.numChildren()===1&&!(e.children[0]instanceof Zu)){const t=e.children[0];(t instanceof Kf||t instanceof bm||t instanceof AT||t instanceof I_)&&t.addDimensions(e.fields),t.swapWithParent(),SW(e)}else{const t=e.model.component.data.main;vBe(t);const n=uun(e),r=e.children.map(n).flat();for(const i of r)i.parent=t}else e.children.map(SW)}function vBe(e){if(e instanceof Zu&&e.type===Si.Main&&e.numChildren()===1){const t=e.children[0];t instanceof TT||(t.swapWithParent(),vBe(e))}}const TW="scale_",uO=5;function AW(e){for(const t of e){for(const n of t.children)if(n.parent!==t)return!1;if(!AW(t.children))return!1}return!0}function df(e,t){let n=!1;for(const r of t)n=e.optimize(r)||n;return n}function tve(e,t,n){let r=e.sources,i=!1;return i=df(new Jan,r)||i,i=df(new Xan(t),r)||i,r=r.filter(s=>s.numChildren()>0),i=df(new tun,r)||i,r=r.filter(s=>s.numChildren()>0),n||(i=df(new Zan,r)||i,i=df(new iun(t),r)||i,i=df(new Qan,r)||i,i=df(new eun,r)||i,i=df(new run,r)||i,i=df(new nun,r)||i,i=df(new Kan,r)||i,i=df(new sun,r)||i),e.sources=r,i}function lun(e,t){AW(e.sources);let n=0,r=0;for(let i=0;i<uO&&tve(e,t,!0);i++)n++;e.sources.map(SW);for(let i=0;i<uO&&tve(e,t,!1);i++)r++;AW(e.sources),Math.max(n,r)===uO&&Je(`Maximum optimization runs(${uO}) reached.`)}class no{constructor(t){Object.defineProperty(this,"signal",{enumerable:!0,get:t})}static fromName(t,n){return new no(()=>t(n))}}function bBe(e){Xi(e)?cun(e):fun(e)}function cun(e){const t=e.component.scales;for(const n of Ke(t)){const r=hun(e,n);if(t[n].setWithExplicit("domains",r),mun(e,n),e.component.data.isFaceted){let s=e;for(;!jl(s)&&s.parent;)s=s.parent;if(s.component.resolve.scale[n]==="shared")for(const a of r.value)om(a)&&(a.data=TW+a.data.replace(TW,""))}}}function fun(e){for(const n of e.children)bBe(n);const t=e.component.scales;for(const n of Ke(t)){let r,i=null;for(const s of e.children){const o=s.component.scales[n];if(o){r===void 0?r=o.getWithExplicit("domains"):r=Oy(r,o.getWithExplicit("domains"),"domains","scale",CW);const a=o.get("selectionExtent");i&&a&&i.param!==a.param&&Je(unn),i=a}}t[n].setWithExplicit("domains",r),i&&t[n].set("selectionExtent",i,!0)}}function dun(e,t,n,r){if(e==="unaggregated"){const{valid:i,reason:s}=nve(t,n);if(!i){Je(s);return}}else if(e===void 0&&r.useUnaggregatedDomain){const{valid:i}=nve(t,n);if(i)return"unaggregated"}return e}function hun(e,t){const n=e.getScaleComponent(t).get("type"),{encoding:r}=e,i=dun(e.scaleDomain(t),e.typedFieldDef(t),n,e.config.scale);return i!==e.scaleDomain(t)&&(e.specifiedScales[t]={...e.specifiedScales[t],domain:i}),t==="x"&&js(r.x2)?js(r.x)?Oy(Fg(n,i,e,"x"),Fg(n,i,e,"x2"),"domain","scale",CW):Fg(n,i,e,"x2"):t==="y"&&js(r.y2)?js(r.y)?Oy(Fg(n,i,e,"y"),Fg(n,i,e,"y2"),"domain","scale",CW):Fg(n,i,e,"y2"):Fg(n,i,e,t)}function pun(e,t,n){return e.map(r=>({signal:`{data: ${Q5(r,{timeUnit:n,type:t})}}`}))}function xU(e,t,n){var i;const r=(i=mo(n))==null?void 0:i.unit;return t==="temporal"||r?pun(e,t,r):[e]}function Fg(e,t,n,r){const{encoding:i,markDef:s,mark:o,config:a,stack:u}=n,l=js(i[r]),{type:c}=l,f=l.timeUnit;if(Nrn(t)){const p=Fg(e,void 0,n,r),m=xU(t.unionWith,c,f);return Ud([...m,...p.value])}else{if(Rt(t))return Ud([t]);if(t&&t!=="unaggregated"&&!yje(t))return Ud(xU(t,c,f))}if(u&&r===u.fieldChannel){if(u.offset==="normalize")return yl([[0,1]]);const p=n.requestDataName(Si.Main);return yl([{data:p,field:n.vgField(r,{suffix:"start"})},{data:p,field:n.vgField(r,{suffix:"end"})}])}const d=wg(r)&&Ze(l)?gun(n,r,e):void 0;if(mp(l)){const p=xU([l.datum],c,f);return yl(p)}const h=l;if(t==="unaggregated"){const p=n.requestDataName(Si.Main),{field:m}=l;return yl([{data:p,field:at({field:m,aggregate:"min"})},{data:p,field:at({field:m,aggregate:"max"})}])}else if(oi(h.bin)){if(go(e))return yl(e==="bin-ordinal"?[]:[{data:ck(d)?n.requestDataName(Si.Main):n.requestDataName(Si.Raw),field:n.vgField(r,cN(h,r)?{binSuffix:"range"}:{}),sort:d===!0||!gt(d)?{field:n.vgField(r,{}),op:"min"}:d}]);{const{bin:p}=h;if(oi(p)){const m=use(n,h.field,p);return yl([new no(()=>{const g=n.getSignalName(m);return`[${g}.start, ${g}.stop]`})])}else return yl([{data:n.requestDataName(Si.Main),field:n.vgField(r,{})}])}}else if(h.timeUnit&&Wn(["time","utc"],e)){const p=i[hp(r)];if(Pje(h,p,s,a)){const m=n.requestDataName(Si.Main),g=Py({fieldDef:h,fieldDef2:p,markDef:s,config:a}),y=dk(o)&&g!==.5&&ms(r);return yl([{data:m,field:n.vgField(r,y?{suffix:rj}:{})},{data:m,field:n.vgField(r,{suffix:y?ij:"end"})}])}}return yl(d?[{data:ck(d)?n.requestDataName(Si.Main):n.requestDataName(Si.Raw),field:n.vgField(r),sort:d}]:[{data:n.requestDataName(Si.Main),field:n.vgField(r)}])}function SU(e,t){const{op:n,field:r,order:i}=e;return{op:n??(t?"sum":W5),...r?{field:Wc(r)}:{},...i?{order:i}:{}}}function mun(e,t){var a;const n=e.component.scales[t],r=e.specifiedScales[t].domain,i=(a=e.fieldDef(t))==null?void 0:a.bin,s=yje(r)&&r,o=E_(i)&&j5(i.extent)&&i.extent;(s||o)&&n.set("selectionExtent",s??o,!0)}function gun(e,t,n){if(!go(n))return;const r=e.fieldDef(t),i=r.sort;if(Rje(i))return{op:"min",field:sS(r,t),order:"ascending"};const{stack:s}=e,o=s?new Set([...s.groupbyFields,...s.stackBy.map(a=>a.fieldDef.field)]):void 0;if(Ah(i)){const a=s&&!o.has(i.field);return SU(i,a)}else if(kje(i)){const{encoding:a,order:u}=i,l=e.fieldDef(a),{aggregate:c,field:f}=l,d=s&&!o.has(f);if(Km(c)||yv(c))return SU({field:at(l),order:u},d);if(fie(c)||!c)return SU({op:c,field:f,order:u},d)}else{if(i==="descending")return{op:"min",field:e.vgField(t),order:"descending"};if(Wn(["ascending",void 0],i))return!0}}function nve(e,t){const{aggregate:n,type:r}=e;return n?mt(n)&&!qtn.has(n)?{valid:!1,reason:Dnn(n)}:r==="quantitative"&&t==="log"?{valid:!1,reason:$nn(e)}:{valid:!0}:{valid:!1,reason:Onn(e)}}function CW(e,t,n,r){return e.explicit&&t.explicit&&Je(Bnn(n,r,e.value,t.value)),{explicit:e.explicit,value:[...e.value,...t.value]}}function yun(e){const t=lh(e.map(o=>{if(om(o)){const{sort:a,...u}=o;return u}return o}),qn),n=lh(e.map(o=>{if(om(o)){const a=o.sort;return a!==void 0&&!ck(a)&&("op"in a&&a.op==="count"&&delete a.field,a.order==="ascending"&&delete a.order),a}}).filter(o=>o!==void 0),qn);if(t.length===0)return;if(t.length===1){const o=e[0];if(om(o)&&n.length>0){let a=n[0];if(n.length>1){Je(fye);const u=n.filter(l=>gt(l)&&"op"in l&&l.op!=="min");n.every(l=>gt(l)&&"op"in l)&&u.length===1?a=u[0]:a=!0}else if(gt(a)&&"field"in a){const u=a.field;o.field===u&&(a=a.order?{order:a.order}:!0)}return{...o,sort:a}}return o}const r=lh(n.map(o=>ck(o)||!("op"in o)||mt(o.op)&&o.op in Utn?o:(Je(znn(o)),!0)),qn);let i;r.length===1?i=r[0]:r.length>1&&(Je(fye),i=!0);const s=lh(e.map(o=>om(o)?o.data:null),o=>o);return s.length===1&&s[0]!==null?{data:s[0],fields:t.map(a=>a.field),...i?{sort:i}:{}}:{fields:t,...i?{sort:i}:{}}}function dse(e){if(om(e)&&mt(e.field))return e.field;if(Wtn(e)){let t;for(const n of e.fields)if(om(n)&&mt(n.field)){if(!t)t=n.field;else if(t!==n.field)return Je(Vnn),t}return Je(Hnn),t}else if(Gtn(e)){Je(qnn);const t=e.fields[0];return mt(t)?t:void 0}}function lj(e,t){const r=e.component.scales[t].get("domains").map(i=>(om(i)&&(i.data=e.lookupDataSource(i.data)),i));return yun(r)}function _Be(e){return CT(e)||hse(e)?e.children.reduce((t,n)=>t.concat(_Be(n)),rve(e)):rve(e)}function rve(e){return Ke(e.component.scales).reduce((t,n)=>{const r=e.component.scales[n];if(r.merged)return t;const i=r.combine(),{name:s,type:o,selectionExtent:a,domains:u,range:l,reverse:c,...f}=i,d=vun(i.range,s,n,e),h=lj(e,n),p=a?don(e,a,r,h):null;return t.push({name:s,type:o,...h?{domain:h}:{},...p?{domainRaw:p}:{},range:d,...c!==void 0?{reverse:c}:{},...f}),t},[])}function vun(e,t,n,r){if(ms(n)){if(vv(e))return{step:{signal:`${t}_step`}}}else if(gt(e)&&om(e))return{...e,data:r.lookupDataSource(e.data)};return e}class wBe extends xg{constructor(t,n){super({},{name:t}),this.merged=!1,this.setWithExplicit("type",n)}domainDefinitelyIncludesZero(){return this.get("zero")!==!1?!0:Rb(this.get("domains"),t=>je(t)&&t.length===2&&fr(t[0])&&t[0]<=0&&fr(t[1])&&t[1]>=0)}}const bun=["range","scheme"];function _un(e){const t=e.component.scales;for(const n of F5){const r=t[n];if(!r)continue;const i=wun(n,e);r.setWithExplicit("range",i)}}function ive(e,t){const n=e.fieldDef(t);if(n!=null&&n.bin){const{bin:r,field:i}=n,s=cl(t),o=e.getName(s);if(gt(r)&&r.binned&&r.step!==void 0)return new no(()=>{const a=e.scaleName(t),u=`(domain("${a}")[1] - domain("${a}")[0]) / ${r.step}`;return`${e.getSignalName(o)} / (${u})`});if(oi(r)){const a=use(e,i,r);return new no(()=>{const u=e.getSignalName(a),l=`(${u}.stop - ${u}.start) / ${u}.step`;return`${e.getSignalName(o)} / (${l})`})}}}function wun(e,t){const n=t.specifiedScales[e],{size:r}=t,s=t.getScaleComponent(e).get("type");for(const f of bun)if(n[f]!==void 0){const d=fW(s,f),h=vje(e,f);if(!d)Je(Q5e(s,f,e));else if(h)Je(h);else switch(f){case"range":{const p=n.range;if(je(p)){if(ms(e))return Ud(p.map(m=>{if(m==="width"||m==="height"){const g=t.getName(m),y=t.getSignalName.bind(t);return no.fromName(y,g)}return m}))}else if(gt(p))return Ud({data:t.requestDataName(Si.Main),field:p.field,sort:{op:"min",field:t.vgField(e)}});return Ud(p)}case"scheme":return Ud(Eun(n[f]))}}const o=e===Ni||e==="xOffset"?"width":"height",a=r[o];if(Wh(a)){if(ms(e))if(go(s)){const f=xBe(a,t,e);if(f)return Ud({step:f})}else Je(J5e(o));else if(iN(e)){const f=e===dv?"x":"y";if(t.getScaleComponent(f).get("type")==="band"){const p=SBe(a,s);if(p)return Ud(p)}}}const{rangeMin:u,rangeMax:l}=n,c=xun(e,t);return(u!==void 0||l!==void 0)&&fW(s,"rangeMin")&&je(c)&&c.length===2?Ud([u??c[0],l??c[1]]):yl(c)}function Eun(e){return Rrn(e)?{scheme:e.name,...Qu(e,["name"])}:{scheme:e}}function EBe(e,t,n,{center:r}={}){const i=cl(e),s=t.getName(i),o=t.getSignalName.bind(t);return e===bo&&Zl(n)?r?[no.fromName(a=>`${o(a)}/2`,s),no.fromName(a=>`-${o(a)}/2`,s)]:[no.fromName(o,s),0]:r?[no.fromName(a=>`-${o(a)}/2`,s),no.fromName(a=>`${o(a)}/2`,s)]:[0,no.fromName(o,s)]}function xun(e,t){const{size:n,config:r,mark:i,encoding:s}=t,{type:o}=js(s[e]),u=t.getScaleComponent(e).get("type"),{domain:l,domainMid:c}=t.specifiedScales[e];switch(e){case Ni:case bo:{if(Wn(["point","band"],u)){const f=TBe(e,n,r.view);if(Wh(f))return{step:xBe(f,t,e)}}return EBe(e,t,u)}case dv:case wT:return Sun(e,t,u);case bg:{const f=t.component.scales[e].get("zero"),d=ABe(i,f,r),h=Cun(i,n,t,r);return Jx(u)?Aun(d,h,Tun(u,r,l,e)):[d,h]}case of:return[0,Math.PI*2];case __:return[0,360];case vd:return[0,new no(()=>{const f=t.getSignalName(jl(t.parent)?"child_width":"width"),d=t.getSignalName(jl(t.parent)?"child_height":"height");return`min(${f},${d})/2`})];case mv:return[r.scale.minStrokeWidth,r.scale.maxStrokeWidth];case gv:return[[1,0],[4,2],[2,1],[1,1],[1,2,4,2]];case ll:return"symbol";case ul:case fp:case dp:return u==="ordinal"?o==="nominal"?"category":"ordinal":c!==void 0?"diverging":i==="rect"||i==="geoshape"?"heatmap":"ramp";case _g:case hv:case pv:return[r.scale.minOpacity,r.scale.maxOpacity]}}function xBe(e,t,n){const{encoding:r}=t,i=t.getScaleComponent(n),s=aie(n),o=r[s];if(l8e({step:e,offsetIsDiscrete:fn(o)&&dje(o.type)})==="offset"&&Hje(r,s)){const u=t.getScaleComponent(s);let c=`domain('${t.scaleName(s)}').length`;if(u.get("type")==="band"){const d=u.get("paddingInner")??u.get("padding")??0,h=u.get("paddingOuter")??u.get("padding")??0;c=`bandspace(${c}, ${d}, ${h})`}const f=i.get("paddingInner")??i.get("padding");return{signal:`${e.step} * ${c} / (1-${Qtn(f)})`}}else return e.step}function SBe(e,t){if(l8e({step:e,offsetIsDiscrete:go(t)})==="offset")return{step:e.step}}function Sun(e,t,n){const r=e===dv?"x":"y",i=t.getScaleComponent(r);if(!i)return EBe(r,t,n,{center:!0});const s=i.get("type"),o=t.scaleName(r),{markDef:a,config:u}=t;if(s==="band"){const l=TBe(r,t.size,t.config.view);if(Wh(l)){const c=SBe(l,n);if(c)return c}return[0,{signal:`bandwidth('${o}')`}]}else{const l=t.encoding[r];if(Ze(l)&&l.timeUnit){const c=uje(l.timeUnit,p=>`scale('${o}', ${p})`),f=t.config.scale.bandWithNestedOffsetPaddingInner,d=Py({fieldDef:l,markDef:a,config:u})-.5,h=d!==0?` + ${d}`:"";if(f){const p=Rt(f)?`${f.signal}/2`+h:`${f/2+d}`,m=Rt(f)?`(1 - ${f.signal}/2)`+h:`${1-f/2+d}`;return[{signal:`${p} * (${c})`},{signal:`${m} * (${c})`}]}return[0,{signal:c}]}return v5e(`Cannot use ${e} scale if ${r} scale is not discrete.`)}}function TBe(e,t,n){const r=e===Ni?"width":"height",i=t[r];return i||kL(n,r)}function Tun(e,t,n,r){switch(e){case"quantile":return t.scale.quantileCount;case"quantize":return t.scale.quantizeCount;case"threshold":return n!==void 0&&je(n)?n.length+1:(Je(ern(r)),3)}}function Aun(e,t,n){const r=()=>{const i=jf(t),s=jf(e),o=`(${i} - ${s}) / (${n} - 1)`;return`sequence(${s}, ${i} + ${o}, ${o})`};return Rt(t)?new no(r):{signal:r()}}function ABe(e,t,n){if(t)return Rt(t)?{signal:`${t.signal} ? 0 : ${ABe(e,!1,n)}`}:0;switch(e){case"bar":case"tick":return n.scale.minBandSize;case"line":case"trail":case"rule":return n.scale.minStrokeWidth;case"text":return n.scale.minFontSize;case"point":case"square":case"circle":return n.scale.minSize}throw new Error(B5("size",e))}const sve=.95;function Cun(e,t,n,r){const i={x:ive(n,"x"),y:ive(n,"y")};switch(e){case"bar":case"tick":{if(r.scale.maxBandSize!==void 0)return r.scale.maxBandSize;const s=ove(t,i,r.view);return fr(s)?s-1:new no(()=>`${s.signal} - 1`)}case"line":case"trail":case"rule":return r.scale.maxStrokeWidth;case"text":return r.scale.maxFontSize;case"point":case"square":case"circle":{if(r.scale.maxSize)return r.scale.maxSize;const s=ove(t,i,r.view);return fr(s)?Math.pow(sve*s,2):new no(()=>`pow(${sve} * ${s.signal}, 2)`)}}throw new Error(B5("size",e))}function ove(e,t,n){const r=Wh(e.width)?e.width.step:IL(n,"width"),i=Wh(e.height)?e.height.step:IL(n,"height");return t.x||t.y?new no(()=>`min(${[t.x?t.x.signal:r,t.y?t.y.signal:i].join(", ")})`):Math.min(r,i)}function CBe(e,t){Xi(e)?Iun(e,t):kBe(e,t)}function Iun(e,t){const n=e.component.scales,{config:r,encoding:i,markDef:s,specifiedScales:o}=e;for(const a of Ke(n)){const u=o[a],l=n[a],c=e.getScaleComponent(a),f=js(i[a]),d=u[t],h=c.get("type"),p=c.get("padding"),m=c.get("paddingInner"),g=fW(h,t),y=vje(a,t);if(d!==void 0&&(g?y&&Je(y):Je(Q5e(h,t,a))),g&&y===void 0)if(d!==void 0){const v=f.timeUnit,b=f.type;switch(t){case"domainMax":case"domainMin":x_(u[t])||b==="temporal"||v?l.set(t,{signal:Q5(u[t],{type:b,timeUnit:v})},!0):l.set(t,u[t],!0);break;default:l.copyKeyFromObject(t,u)}}else{const v=t in ave?ave[t]({model:e,channel:a,fieldOrDatumDef:f,scaleType:h,scalePadding:p,scalePaddingInner:m,domain:u.domain,domainMin:u.domainMin,domainMax:u.domainMax,markDef:s,config:r,hasNestedOffsetScale:qje(i,a),hasSecondaryRangeChannel:!!i[hp(a)]}):r.scale[t];v!==void 0&&l.set(t,v,!1)}}}const ave={bins:({model:e,fieldOrDatumDef:t})=>Ze(t)?kun(e,t):void 0,interpolate:({channel:e,fieldOrDatumDef:t})=>Run(e,t.type),nice:({scaleType:e,channel:t,domain:n,domainMin:r,domainMax:i,fieldOrDatumDef:s})=>Nun(e,t,n,r,i,s),padding:({channel:e,scaleType:t,fieldOrDatumDef:n,markDef:r,config:i})=>Pun(e,t,i.scale,n,r,i.bar),paddingInner:({scalePadding:e,channel:t,markDef:n,scaleType:r,config:i,hasNestedOffsetScale:s})=>Oun(e,t,n.type,r,i.scale,s),paddingOuter:({scalePadding:e,channel:t,scaleType:n,scalePaddingInner:r,config:i,hasNestedOffsetScale:s})=>Dun(e,t,n,r,i.scale,s),reverse:({fieldOrDatumDef:e,scaleType:t,channel:n,config:r})=>{const i=Ze(e)?e.sort:void 0;return $un(t,i,n,r.scale)},zero:({channel:e,fieldOrDatumDef:t,domain:n,markDef:r,scaleType:i,config:s,hasSecondaryRangeChannel:o})=>Mun(e,t,n,r,i,s.scale,o)};function IBe(e){Xi(e)?_un(e):kBe(e,"range")}function kBe(e,t){const n=e.component.scales;for(const r of e.children)t==="range"?IBe(r):CBe(r,t);for(const r of Ke(n)){let i;for(const s of e.children){const o=s.component.scales[r];if(o){const a=o.getWithExplicit(t);i=Oy(i,a,t,"scale",E8e((u,l)=>{switch(t){case"range":return u.step&&l.step?u.step-l.step:0}return 0}))}}n[r].setWithExplicit(t,i)}}function kun(e,t){const n=t.bin;if(oi(n)){const r=use(e,t.field,n);return new no(()=>e.getSignalName(r))}else if(Ro(n)&&E_(n)&&n.step!==void 0)return{step:n.step}}function Run(e,t){if(Wn([ul,fp,dp],e)&&t!=="nominal")return"hcl"}function Nun(e,t,n,r,i,s){var o;if(!((o=qh(s))!=null&&o.bin||je(n)||i!=null||r!=null||Wn([Ju.TIME,Ju.UTC],e)))return ms(t)?!0:void 0}function Pun(e,t,n,r,i,s){if(ms(e)){if(Bf(t)){if(n.continuousPadding!==void 0)return n.continuousPadding;const{type:o,orient:a}=i;if(o==="bar"&&!(Ze(r)&&(r.bin||r.timeUnit))&&(a==="vertical"&&e==="x"||a==="horizontal"&&e==="y"))return s.continuousBandSize}if(t===Ju.POINT)return n.pointPadding}}function Oun(e,t,n,r,i,s=!1){if(e===void 0){if(ms(t)){const{bandPaddingInner:o,barBandPaddingInner:a,rectBandPaddingInner:u,bandWithNestedOffsetPaddingInner:l}=i;return s?l:ps(o,n==="bar"?a:u)}else if(iN(t)&&r===Ju.BAND)return i.offsetBandPaddingInner}}function Dun(e,t,n,r,i,s=!1){if(e===void 0){if(ms(t)){const{bandPaddingOuter:o,bandWithNestedOffsetPaddingOuter:a}=i;if(s)return a;if(n===Ju.BAND)return ps(o,Rt(r)?{signal:`${r.signal}/2`}:r/2)}else if(iN(t)){if(n===Ju.POINT)return .5;if(n===Ju.BAND)return i.offsetBandPaddingOuter}}}function $un(e,t,n,r){if(n==="x"&&r.xReverse!==void 0)return Zl(e)&&t==="descending"?Rt(r.xReverse)?{signal:`!${r.xReverse.signal}`}:!r.xReverse:r.xReverse;if(Zl(e)&&t==="descending")return!0}function Mun(e,t,n,r,i,s,o){if(!!n&&n!=="unaggregated"&&Zl(i)){if(je(n)){const u=n[0],l=n[n.length-1];if(fr(u)&&u<=0&&fr(l)&&l>=0)return!0}return!1}if(e==="size"&&t.type==="quantitative"&&!Jx(i))return!0;if(!(Ze(t)&&t.bin)&&Wn([...pp,...Otn],e)){const{orient:u,type:l}=r;return Wn(["bar","area","line","trail"],l)&&(u==="horizontal"&&e==="y"||u==="vertical"&&e==="x")?!1:Wn(["bar","area"],l)&&!o?!0:s==null?void 0:s.zero}return!1}function Lun(e,t,n,r,i=!1){const s=Fun(t,n,r,i),{type:o}=e;return wg(t)?o!==void 0?Lrn(t,o)?Ze(n)&&!Mrn(o,n.type)?(Je(Fnn(o,s)),s):o:(Je(Lnn(t,o,s)),s):s:null}function Fun(e,t,n,r){var i;switch(t.type){case"nominal":case"ordinal":{if(LE(e)||mU(e)==="discrete")return e==="shape"&&t.type==="ordinal"&&Je(gU(e,"ordinal")),"ordinal";if(ms(e)||iN(e)){if(Wn(["rect","bar","image","rule"],n.type)||r)return"band"}else if(n.type==="arc"&&e in cie)return"band";const s=n[cl(e)];return Mb(s)||eS(t)&&((i=t.axis)!=null&&i.tickBand)?"band":"point"}case"temporal":return LE(e)?"time":mU(e)==="discrete"?(Je(gU(e,"temporal")),"ordinal"):Ze(t)&&t.timeUnit&&mo(t.timeUnit).utc?"utc":"time";case"quantitative":return LE(e)?Ze(t)&&oi(t.bin)?"bin-ordinal":"linear":mU(e)==="discrete"?(Je(gU(e,"quantitative")),"ordinal"):"linear";case"geojson":return}throw new Error(K5e(t.type))}function jun(e,{ignoreRange:t}={}){RBe(e),bBe(e);for(const n of $rn)CBe(e,n);t||IBe(e)}function RBe(e){Xi(e)?e.component.scales=Bun(e):e.component.scales=zun(e)}function Bun(e){const{encoding:t,mark:n,markDef:r}=e,i={};for(const s of F5){const o=js(t[s]);if(o&&n===Aje&&s===ll&&o.type===ET)continue;let a=o&&o.scale;if(o&&a!==null&&a!==!1){a??(a={});const u=qje(t,s),l=Lun(a,s,o,r,u);i[s]=new wBe(e.scaleName(`${s}`,!0),{value:l,explicit:a.type===l})}}return i}const Uun=E8e((e,t)=>hye(e)-hye(t));function zun(e){var t;const n=e.component.scales={},r={},i=e.component.resolve;for(const s of e.children){RBe(s);for(const o of Ke(s.component.scales))if((t=i.scale)[o]??(t[o]=oBe(o,e)),i.scale[o]==="shared"){const a=r[o],u=s.component.scales[o].getWithExplicit("type");a?Trn(a.value,u.value)?r[o]=Oy(a,u,"type","scale",Uun):(i.scale[o]="independent",delete r[o]):r[o]=u}}for(const s of Ke(r)){const o=e.scaleName(s,!0),a=r[s];n[s]=new wBe(o,a);for(const u of e.children){const l=u.component.scales[s];l&&(u.renameScale(l.get("name"),o),l.merged=!0)}}return n}class TU{constructor(){this.nameMap={}}rename(t,n){this.nameMap[t]=n}has(t){return this.nameMap[t]!==void 0}get(t){for(;this.nameMap[t]&&t!==this.nameMap[t];)t=this.nameMap[t];return t}}function Xi(e){return(e==null?void 0:e.type)==="unit"}function jl(e){return(e==null?void 0:e.type)==="facet"}function hse(e){return(e==null?void 0:e.type)==="concat"}function CT(e){return(e==null?void 0:e.type)==="layer"}class pse{constructor(t,n,r,i,s,o,a){this.type=n,this.parent=r,this.config=s,this.correctDataNames=u=>{var l,c,f;return(l=u.from)!=null&&l.data&&(u.from.data=this.lookupDataSource(u.from.data)),(f=(c=u.from)==null?void 0:c.facet)!=null&&f.data&&(u.from.facet.data=this.lookupDataSource(u.from.facet.data)),u},this.parent=r,this.config=s,this.view=Ou(a),this.name=t.name??i,this.title=Yg(t.title)?{text:t.title}:t.title?Ou(t.title):void 0,this.scaleNameMap=r?r.scaleNameMap:new TU,this.projectionNameMap=r?r.projectionNameMap:new TU,this.signalNameMap=r?r.signalNameMap:new TU,this.data=t.data,this.description=t.description,this.transforms=Ksn(t.transform??[]),this.layout=n==="layer"||n==="unit"?{}:Zin(t,n,s),this.component={data:{sources:r?r.component.data.sources:[],outputNodes:r?r.component.data.outputNodes:{},outputNodeRefCounts:r?r.component.data.outputNodeRefCounts:{},isFaceted:G5(t)||(r==null?void 0:r.component.data.isFaceted)&&t.data===void 0},layoutSize:new xg,layoutHeaders:{row:{},column:{},facet:{}},mark:null,resolve:{scale:{},axis:{},legend:{},...o?rn(o):{}},selection:null,scales:null,projection:null,axes:{},legends:{}}}get width(){return this.getSizeSignalRef("width")}get height(){return this.getSizeSignalRef("height")}parse(){this.parseScale(),this.parseLayoutSize(),this.renameTopLevelLayoutSizeSignal(),this.parseSelections(),this.parseProjection(),this.parseData(),this.parseAxesAndHeaders(),this.parseLegends(),this.parseMarkGroup()}parseScale(){jun(this)}parseProjection(){gBe(this)}renameTopLevelLayoutSizeSignal(){this.getName("width")!=="width"&&this.renameSignal(this.getName("width"),"width"),this.getName("height")!=="height"&&this.renameSignal(this.getName("height"),"height")}parseLegends(){fBe(this)}assembleEncodeFromView(t){const{style:n,...r}=t,i={};for(const s of Ke(r)){const o=r[s];o!==void 0&&(i[s]=di(o))}return i}assembleGroupEncodeEntry(t){let n={};return this.view&&(n=this.assembleEncodeFromView(this.view)),!t&&(this.description&&(n.description=di(this.description)),this.type==="unit"||this.type==="layer")?{width:this.getSizeSignalRef("width"),height:this.getSizeSignalRef("height"),...n}:Ur(n)?void 0:n}assembleLayout(){if(!this.layout)return;const{spacing:t,...n}=this.layout,{component:r,config:i}=this,s=lan(r.layoutHeaders,i);return{padding:t,...this.assembleDefaultLayout(),...n,...s?{titleBand:s}:{}}}assembleDefaultLayout(){return{}}assembleHeaderMarks(){const{layoutHeaders:t}=this.component;let n=[];for(const r of Nc)t[r].title&&n.push(ran(this,r));for(const r of ise)n=n.concat(ian(this,r));return n}assembleAxes(){return Hon(this.component.axes,this.config)}assembleLegends(){return hBe(this)}assembleProjections(){return Pan(this)}assembleTitle(){const{encoding:t,...n}=this.title??{},r={...B5e(this.config.title).nonMarkTitleProperties,...n,...t?{encode:{update:t}}:{}};if(r.text)return Wn(["unit","layer"],this.type)?Wn(["middle",void 0],r.anchor)&&(r.frame??(r.frame="group")):r.anchor??(r.anchor="start"),Ur(r)?void 0:r}assembleGroup(t=[]){const n={};t=t.concat(this.assembleSignals()),t.length>0&&(n.signals=t);const r=this.assembleLayout();r&&(n.layout=r),n.marks=[].concat(this.assembleHeaderMarks(),this.assembleMarks());const i=!this.parent||jl(this.parent)?_Be(this):[];i.length>0&&(n.scales=i);const s=this.assembleAxes();s.length>0&&(n.axes=s);const o=this.assembleLegends();return o.length>0&&(n.legends=o),n}getName(t){return Ri((this.name?`${this.name}_`:"")+t)}getDataName(t){return this.getName(Si[t].toLowerCase())}requestDataName(t){const n=this.getDataName(t),r=this.component.data.outputNodeRefCounts;return r[n]=(r[n]||0)+1,n}getSizeSignalRef(t){if(jl(this.parent)){const n=iBe(t),r=L5(n),i=this.component.scales[r];if(i&&!i.merged){const s=i.get("type"),o=i.get("range");if(go(s)&&vv(o)){const a=i.get("name"),u=lj(this,r),l=dse(u);if(l){const c=at({aggregate:"distinct",field:l},{expr:"datum"});return{signal:rBe(a,i,c)}}else return Je(hie(r)),null}}}return{signal:this.signalNameMap.get(this.getName(t))}}lookupDataSource(t){const n=this.component.data.outputNodes[t];return n?n.getSource():t}getSignalName(t){return this.signalNameMap.get(t)}renameSignal(t,n){this.signalNameMap.rename(t,n)}renameScale(t,n){this.scaleNameMap.rename(t,n)}renameProjection(t,n){this.projectionNameMap.rename(t,n)}scaleName(t,n){if(n)return this.getName(t);if(N5e(t)&&wg(t)&&this.component.scales[t]||this.scaleNameMap.has(this.getName(t)))return this.scaleNameMap.get(this.getName(t))}projectionName(t){if(t)return this.getName("projection");if(this.component.projection&&!this.component.projection.merged||this.projectionNameMap.has(this.getName("projection")))return this.projectionNameMap.get(this.getName("projection"))}getScaleComponent(t){if(!this.component.scales)throw new Error("getScaleComponent cannot be called before parseScale(). Make sure you have called parseScale or use parseUnitModelWithScale().");const n=this.component.scales[t];return n&&!n.merged?n:this.parent?this.parent.getScaleComponent(t):void 0}getSelectionComponent(t,n){let r=this.component.selection[t];if(!r&&this.parent&&(r=this.parent.getSelectionComponent(t,n)),!r)throw new Error(nnn(n));return r}hasAxisOrientSignalRef(){var t,n;return((t=this.component.axes.x)==null?void 0:t.some(r=>r.hasOrientSignalRef()))||((n=this.component.axes.y)==null?void 0:n.some(r=>r.hasOrientSignalRef()))}}class NBe extends pse{vgField(t,n={}){const r=this.fieldDef(t);if(r)return at(r,n)}reduceFieldDef(t,n){return Iin(this.getMapping(),(r,i,s)=>{const o=qh(i);return o?t(r,o,s):r},n)}forEachFieldDef(t,n){Bie(this.getMapping(),(r,i)=>{const s=qh(r);s&&t(s,i)},n)}}class cj extends Fr{clone(){return new cj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"value",r[1]??"density"];const i=this.transform.resolve??"shared";this.transform.resolve=i}dependentFields(){return new Set([this.transform.density,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`DensityTransform ${qn(this.transform)}`}assemble(){const{density:t,...n}=this.transform,r={type:"kde",field:t,...n};return r.resolve=this.transform.resolve,r}}class fj extends Fr{clone(){return new fj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n)}dependentFields(){return new Set([this.transform.extent])}producedFields(){return new Set([])}hash(){return`ExtentTransform ${qn(this.transform)}`}assemble(){const{extent:t,param:n}=this.transform;return{type:"extent",field:t,signal:n}}}class pk extends Fr{clone(){return new pk(null,{...this.filter})}constructor(t,n){super(t),this.filter=n}static make(t,n){const{config:r,mark:i,markDef:s}=n;if(Er("invalid",s,r)!=="filter")return null;const a=n.reduceFieldDef((u,l,c)=>{const f=wg(c)&&n.getScaleComponent(c);if(f){const d=f.get("type");Zl(d)&&l.aggregate!=="count"&&!T_(i)&&(u[l.field]=l)}return u},{});return Ke(a).length?new pk(t,a):null}dependentFields(){return new Set(Ke(this.filter))}producedFields(){return new Set}hash(){return`FilterInvalid ${qn(this.filter)}`}assemble(){const t=Ke(this.filter).reduce((n,r)=>{const i=this.filter[r],s=at(i,{expr:"datum"});return i!==null&&(i.type==="temporal"?n.push(`(isDate(${s}) || (isValid(${s}) && isFinite(+${s})))`):i.type==="quantitative"&&(n.push(`isValid(${s})`),n.push(`isFinite(+${s})`))),n},[]);return t.length>0?{type:"filter",expr:t.join(" && ")}:null}}class dj extends Fr{clone(){return new dj(this.parent,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const{flatten:r,as:i=[]}=this.transform;this.transform.as=r.map((s,o)=>i[o]??s)}dependentFields(){return new Set(this.transform.flatten)}producedFields(){return new Set(this.transform.as)}hash(){return`FlattenTransform ${qn(this.transform)}`}assemble(){const{flatten:t,as:n}=this.transform;return{type:"flatten",fields:t,as:n}}}class hj extends Fr{clone(){return new hj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"key",r[1]??"value"]}dependentFields(){return new Set(this.transform.fold)}producedFields(){return new Set(this.transform.as)}hash(){return`FoldTransform ${qn(this.transform)}`}assemble(){const{fold:t,as:n}=this.transform;return{type:"fold",fields:t,as:n}}}class BE extends Fr{clone(){return new BE(null,rn(this.fields),this.geojson,this.signal)}static parseAll(t,n){if(n.component.projection&&!n.component.projection.isFit)return t;let r=0;for(const i of[[_d,bd],[Gc,wd]]){const s=i.map(o=>{const a=js(n.encoding[o]);return Ze(a)?a.field:mp(a)?{expr:`${a.datum}`}:ad(a)?{expr:`${a.value}`}:void 0});(s[0]||s[1])&&(t=new BE(t,s,null,n.getName(`geojson_${r++}`)))}if(n.channelHasField(ll)){const i=n.typedFieldDef(ll);i.type===ET&&(t=new BE(t,null,i.field,n.getName(`geojson_${r++}`)))}return t}constructor(t,n,r,i){super(t),this.fields=n,this.geojson=r,this.signal=i}dependentFields(){const t=(this.fields??[]).filter(mt);return new Set([...this.geojson?[this.geojson]:[],...t])}producedFields(){return new Set}hash(){return`GeoJSON ${this.geojson} ${this.signal} ${qn(this.fields)}`}assemble(){return[...this.geojson?[{type:"filter",expr:`isValid(datum["${this.geojson}"])`}]:[],{type:"geojson",...this.fields?{fields:this.fields}:{},...this.geojson?{geojson:this.geojson}:{},signal:this.signal}]}}class mk extends Fr{clone(){return new mk(null,this.projection,rn(this.fields),rn(this.as))}constructor(t,n,r,i){super(t),this.projection=n,this.fields=r,this.as=i}static parseAll(t,n){if(!n.projectionName())return t;for(const r of[[_d,bd],[Gc,wd]]){const i=r.map(o=>{const a=js(n.encoding[o]);return Ze(a)?a.field:mp(a)?{expr:`${a.datum}`}:ad(a)?{expr:`${a.value}`}:void 0}),s=r[0]===Gc?"2":"";(i[0]||i[1])&&(t=new mk(t,n.projectionName(),i,[n.getName(`x${s}`),n.getName(`y${s}`)]))}return t}dependentFields(){return new Set(this.fields.filter(mt))}producedFields(){return new Set(this.as)}hash(){return`Geopoint ${this.projection} ${qn(this.fields)} ${qn(this.as)}`}assemble(){return{type:"geopoint",projection:this.projection,fields:this.fields,as:this.as}}}class Q1 extends Fr{clone(){return new Q1(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set([this.transform.impute,this.transform.key,...this.transform.groupby??[]])}producedFields(){return new Set([this.transform.impute])}processSequence(t){const{start:n=0,stop:r,step:i}=t;return{signal:`sequence(${[n,r,...i?[i]:[]].join(",")})`}}static makeFromTransform(t,n){return new Q1(t,n)}static makeFromEncoding(t,n){const r=n.encoding,i=r.x,s=r.y;if(Ze(i)&&Ze(s)){const o=i.impute?i:s.impute?s:void 0;if(o===void 0)return;const a=i.impute?s:s.impute?i:void 0,{method:u,value:l,frame:c,keyvals:f}=o.impute,d=Gje(n.mark,r);return new Q1(t,{impute:o.field,key:a.field,...u?{method:u}:{},...l!==void 0?{value:l}:{},...c?{frame:c}:{},...f!==void 0?{keyvals:f}:{},...d.length?{groupby:d}:{}})}return null}hash(){return`Impute ${qn(this.transform)}`}assemble(){const{impute:t,key:n,keyvals:r,method:i,groupby:s,value:o,frame:a=[null,null]}=this.transform,u={type:"impute",field:t,key:n,...r?{keyvals:Rsn(r)?this.processSequence(r):r}:{},method:"value",...s?{groupby:s}:{},value:!i||i==="value"?o:null};if(i&&i!=="value"){const l={type:"window",as:[`imputed_${t}_value`],ops:[i],fields:[t],frame:a,ignorePeers:!1,...s?{groupby:s}:{}},c={type:"formula",expr:`datum.${t} === null ? datum.imputed_${t}_value : datum.${t}`,as:t};return[u,l,c]}else return[u]}}class pj extends Fr{clone(){return new pj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.loess]}dependentFields(){return new Set([this.transform.loess,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`LoessTransform ${qn(this.transform)}`}assemble(){const{loess:t,on:n,...r}=this.transform;return{type:"loess",x:n,y:t,...r}}}class gk extends Fr{clone(){return new gk(null,rn(this.transform),this.secondary)}constructor(t,n,r){super(t),this.transform=n,this.secondary=r}static make(t,n,r,i){const s=n.component.data.sources,{from:o}=r;let a=null;if(Nsn(o)){let u=DBe(o.data,s);u||(u=new jb(o.data),s.push(u));const l=n.getName(`lookup_${i}`);a=new Zu(u,l,Si.Lookup,n.component.data.outputNodeRefCounts),n.component.data.outputNodes[l]=a}else if(Psn(o)){const u=o.param;r={as:u,...r};let l;try{l=n.getSelectionComponent(Ri(u),u)}catch{throw new Error(onn(u))}if(a=l.materialized,!a)throw new Error(ann(u))}return new gk(t,r,a.getSource())}dependentFields(){return new Set([this.transform.lookup])}producedFields(){return new Set(this.transform.as?pt(this.transform.as):this.transform.from.fields)}hash(){return`Lookup ${qn({transform:this.transform,secondary:this.secondary})}`}assemble(){let t;if(this.transform.from.fields)t={values:this.transform.from.fields,...this.transform.as?{as:pt(this.transform.as)}:{}};else{let n=this.transform.as;mt(n)||(Je(mnn),n="_lookup"),t={as:[n]}}return{type:"lookup",from:this.secondary,key:this.transform.from.key,fields:[this.transform.lookup],...t,...this.transform.default?{default:this.transform.default}:{}}}}class mj extends Fr{clone(){return new mj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??"prob",r[1]??"value"]}dependentFields(){return new Set([this.transform.quantile,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`QuantileTransform ${qn(this.transform)}`}assemble(){const{quantile:t,...n}=this.transform;return{type:"quantile",field:t,...n}}}class gj extends Fr{clone(){return new gj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n,this.transform=rn(n);const r=this.transform.as??[void 0,void 0];this.transform.as=[r[0]??n.on,r[1]??n.regression]}dependentFields(){return new Set([this.transform.regression,this.transform.on,...this.transform.groupby??[]])}producedFields(){return new Set(this.transform.as)}hash(){return`RegressionTransform ${qn(this.transform)}`}assemble(){const{regression:t,on:n,...r}=this.transform;return{type:"regression",x:n,y:t,...r}}}class yj extends Fr{clone(){return new yj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}addDimensions(t){this.transform.groupby=lh((this.transform.groupby??[]).concat(t),n=>n)}producedFields(){}dependentFields(){return new Set([this.transform.pivot,this.transform.value,...this.transform.groupby??[]])}hash(){return`PivotTransform ${qn(this.transform)}`}assemble(){const{pivot:t,value:n,groupby:r,limit:i,op:s}=this.transform;return{type:"pivot",field:t,value:n,...i!==void 0?{limit:i}:{},...s!==void 0?{op:s}:{},...r!==void 0?{groupby:r}:{}}}}class vj extends Fr{clone(){return new vj(null,rn(this.transform))}constructor(t,n){super(t),this.transform=n}dependentFields(){return new Set}producedFields(){return new Set}hash(){return`SampleTransform ${qn(this.transform)}`}assemble(){return{type:"sample",size:this.transform.sample}}}function PBe(e){let t=0;function n(r,i){if(r instanceof jb&&!r.isGenerator&&!nS(r.data)&&(e.push(i),i={name:null,source:i.name,transform:[]}),r instanceof ya&&(r.parent instanceof jb&&!i.source?(i.format={...i.format,parse:r.assembleFormatParse()},i.transform.push(...r.assembleTransforms(!0))):i.transform.push(...r.assembleTransforms())),r instanceof TT){i.name||(i.name=`data_${t++}`),!i.source||i.transform.length>0?(e.push(i),r.data=i.name):r.data=i.source,e.push(...r.assemble());return}switch((r instanceof hN||r instanceof pN||r instanceof pk||r instanceof ST||r instanceof iS||r instanceof mk||r instanceof Kf||r instanceof gk||r instanceof AT||r instanceof I_||r instanceof hj||r instanceof dj||r instanceof cj||r instanceof pj||r instanceof mj||r instanceof gj||r instanceof My||r instanceof vj||r instanceof yj||r instanceof fj)&&i.transform.push(r.assemble()),(r instanceof Ih||r instanceof Ch||r instanceof Q1||r instanceof bm||r instanceof BE)&&i.transform.push(...r.assemble()),r instanceof Zu&&(i.source&&i.transform.length===0?r.setSource(i.source):r.parent instanceof Zu?r.setSource(i.name):(i.name||(i.name=`data_${t++}`),r.setSource(i.name),r.numChildren()===1&&(e.push(i),i={name:null,source:i.name,transform:[]}))),r.numChildren()){case 0:r instanceof Zu&&(!i.source||i.transform.length>0)&&e.push(i);break;case 1:n(r.children[0],i);break;default:{i.name||(i.name=`data_${t++}`);let s=i.name;!i.source||i.transform.length>0?e.push(i):s=i.source;for(const o of r.children)n(o,{name:null,source:s,transform:[]});break}}}return n}function Vun(e){const t=[],n=PBe(t);for(const r of e.children)n(r,{source:e.name,name:null,transform:[]});return t}function Hun(e,t){const n=[],r=PBe(n);let i=0;for(const o of e.sources){o.hasName()||(o.dataName=`source_${i++}`);const a=o.assemble();r(o,a)}for(const o of n)o.transform.length===0&&delete o.transform;let s=0;for(const[o,a]of n.entries())(a.transform??[]).length===0&&!a.source&&n.splice(s++,0,n.splice(o,1)[0]);for(const o of n)for(const a of o.transform??[])a.type==="lookup"&&(a.from=e.outputNodes[a.from].getSource());for(const o of n)o.name in t&&(o.values=t[o.name]);return n}function qun(e){return e==="top"||e==="left"||Rt(e)?"header":"footer"}function Wun(e){for(const t of Nc)Gun(e,t);uve(e,"x"),uve(e,"y")}function Gun(e,t){var o;const{facet:n,config:r,child:i,component:s}=e;if(e.channelHasField(t)){const a=n[t],u=oS("title",null,r,t);let l=FE(a,r,{allowDisabling:!0,includeDefault:u===void 0||!!u});i.component.layoutHeaders[t].title&&(l=je(l)?l.join(", "):l,l+=` / ${i.component.layoutHeaders[t].title}`,i.component.layoutHeaders[t].title=null);const c=oS("labelOrient",a.header,r,t),f=a.header!==null?ps((o=a.header)==null?void 0:o.labels,r.header.labels,!0):!1,d=Wn(["bottom","right"],c)?"footer":"header";s.layoutHeaders[t]={title:a.header!==null?l:null,facetFieldDef:a,[d]:t==="facet"?[]:[OBe(e,t,f)]}}}function OBe(e,t,n){const r=t==="row"?"height":"width";return{labels:n,sizeSignal:e.child.component.layoutSize.get(r)?e.child.getSizeSignalRef(r):void 0,axes:[]}}function uve(e,t){const{child:n}=e;if(n.component.axes[t]){const{layoutHeaders:r,resolve:i}=e.component;if(i.axis[t]=ase(i,t),i.axis[t]==="shared"){const s=t==="x"?"column":"row",o=r[s];for(const a of n.component.axes[t]){const u=qun(a.get("orient"));o[u]??(o[u]=[OBe(e,s,!1)]);const l=xC(a,"main",e.config,{header:!0});l&&o[u][0].axes.push(l),a.mainExtracted=!0}}}}function Yun(e){mse(e),OL(e,"width"),OL(e,"height")}function Kun(e){mse(e);const t=e.layout.columns===1?"width":"childWidth",n=e.layout.columns===void 0?"height":"childHeight";OL(e,t),OL(e,n)}function mse(e){for(const t of e.children)t.parseLayoutSize()}function OL(e,t){const n=iBe(t),r=L5(n),i=e.component.resolve,s=e.component.layoutSize;let o;for(const a of e.children){const u=a.component.layoutSize.getWithExplicit(n),l=i.scale[r]??oBe(r,e);if(l==="independent"&&u.value==="step"){o=void 0;break}if(o){if(l==="independent"&&o.value!==u.value){o=void 0;break}o=Oy(o,u,n,"")}else o=u}if(o){for(const a of e.children)e.renameSignal(a.getName(n),e.getName(t)),a.component.layoutSize.set(n,"merged",!1);s.setWithExplicit(t,o)}else s.setWithExplicit(t,{explicit:!1,value:void 0})}function Xun(e){const{size:t,component:n}=e;for(const r of pp){const i=cl(r);if(t[i]){const s=t[i];n.layoutSize.set(i,Wh(s)?"step":s,!0)}else{const s=Qun(e,i);n.layoutSize.set(i,s,!1)}}}function Qun(e,t){const n=t==="width"?"x":"y",r=e.config,i=e.getScaleComponent(n);if(i){const s=i.get("type"),o=i.get("range");if(go(s)){const a=kL(r.view,t);return vv(o)||Wh(a)?"step":a}else return pW(r.view,t)}else{if(e.hasProjection||e.mark==="arc")return pW(r.view,t);{const s=kL(r.view,t);return Wh(s)?s.step:s}}}function IW(e,t,n){return at(t,{suffix:`by_${at(e)}`,...n})}class A2 extends NBe{constructor(t,n,r,i){super(t,"facet",n,r,i,t.resolve),this.child=_se(t.spec,this,this.getName("child"),void 0,i),this.children=[this.child],this.facet=this.initFacet(t.facet)}initFacet(t){if(!uN(t))return{facet:this.initFacetFieldDef(t,"facet")};const n=Ke(t),r={};for(const i of n){if(![gm,ym].includes(i)){Je(B5(i,"facet"));break}const s=t[i];if(s.field===void 0){Je(lW(s,i));break}r[i]=this.initFacetFieldDef(s,i)}return r}initFacetFieldDef(t,n){const r=Fie(t,n);return r.header?r.header=Ou(r.header):r.header===null&&(r.header=null),r}channelHasField(t){return!!this.facet[t]}fieldDef(t){return this.facet[t]}parseData(){this.component.data=bj(this),this.child.parseData()}parseLayoutSize(){mse(this)}parseSelections(){this.child.parseSelections(),this.component.selection=this.child.component.selection}parseMarkGroup(){this.child.parseMarkGroup()}parseAxesAndHeaders(){this.child.parseAxesAndHeaders(),Wun(this)}assembleSelectionTopLevelSignals(t){return this.child.assembleSelectionTopLevelSignals(t)}assembleSignals(){return this.child.assembleSignals(),[]}assembleSelectionData(t){return this.child.assembleSelectionData(t)}getHeaderLayoutMixins(){const t={};for(const n of Nc)for(const r of sse){const i=this.component.layoutHeaders[n],s=i[r],{facetFieldDef:o}=i;if(o){const a=oS("titleOrient",o.header,this.config,n);if(["right","bottom"].includes(a)){const u=aj(n,a);t.titleAnchor??(t.titleAnchor={}),t.titleAnchor[u]="end"}}if(s!=null&&s[0]){const a=n==="row"?"height":"width",u=r==="header"?"headerBand":"footerBand";n!=="facet"&&!this.child.component.layoutSize.get(a)&&(t[u]??(t[u]={}),t[u][n]=.5),i.title&&(t.offset??(t.offset={}),t.offset[n==="row"?"rowTitle":"columnTitle"]=10)}}return t}assembleDefaultLayout(){const{column:t,row:n}=this.facet,r=t?this.columnDistinctSignal():n?1:void 0;let i="all";return(!n&&this.component.resolve.scale.x==="independent"||!t&&this.component.resolve.scale.y==="independent")&&(i="none"),{...this.getHeaderLayoutMixins(),...r?{columns:r}:{},bounds:"full",align:i}}assembleLayoutSignals(){return this.child.assembleLayoutSignals()}columnDistinctSignal(){if(!(this.parent&&this.parent instanceof A2))return{signal:`length(data('${this.getName("column_domain")}'))`}}assembleGroupStyle(){}assembleGroup(t){return this.parent&&this.parent instanceof A2?{...this.channelHasField("column")?{encode:{update:{columns:{field:at(this.facet.column,{prefix:"distinct"})}}}}:{},...super.assembleGroup(t)}:super.assembleGroup(t)}getCardinalityAggregateForChild(){const t=[],n=[],r=[];if(this.child instanceof A2){if(this.child.channelHasField("column")){const i=at(this.child.facet.column);t.push(i),n.push("distinct"),r.push(`distinct_${i}`)}}else for(const i of pp){const s=this.child.component.scales[i];if(s&&!s.merged){const o=s.get("type"),a=s.get("range");if(go(o)&&vv(a)){const u=lj(this.child,i),l=dse(u);l?(t.push(l),n.push("distinct"),r.push(`distinct_${l}`)):Je(hie(i))}}}return{fields:t,ops:n,as:r}}assembleFacet(){const{name:t,data:n}=this.component.data.facetRoot,{row:r,column:i}=this.facet,{fields:s,ops:o,as:a}=this.getCardinalityAggregateForChild(),u=[];for(const c of Nc){const f=this.facet[c];if(f){u.push(at(f));const{bin:d,sort:h}=f;if(oi(d)&&u.push(at(f,{binSuffix:"end"})),Ah(h)){const{field:p,op:m=W5}=h,g=IW(f,h);r&&i?(s.push(g),o.push("max"),a.push(g)):(s.push(p),o.push(m),a.push(g))}else if(je(h)){const p=sS(f,c);s.push(p),o.push("max"),a.push(p)}}}const l=!!r&&!!i;return{name:t,data:n,groupby:u,...l||s.length>0?{aggregate:{...l?{cross:l}:{},...s.length?{fields:s,ops:o,as:a}:{}}}:{}}}facetSortFields(t){const{facet:n}=this,r=n[t];return r?Ah(r.sort)?[IW(r,r.sort,{expr:"datum"})]:je(r.sort)?[sS(r,t,{expr:"datum"})]:[at(r,{expr:"datum"})]:[]}facetSortOrder(t){const{facet:n}=this,r=n[t];if(r){const{sort:i}=r;return[(Ah(i)?i.order:!je(i)&&i)||"ascending"]}return[]}assembleLabelTitle(){var i;const{facet:t,config:n}=this;if(t.facet)return EW(t.facet,"facet",n);const r={row:["top","bottom"],column:["left","right"]};for(const s of ise)if(t[s]){const o=oS("labelOrient",(i=t[s])==null?void 0:i.header,n,s);if(r[s].includes(o))return EW(t[s],s,n)}}assembleMarks(){const{child:t}=this,n=this.component.data.facetRoot,r=Vun(n),i=t.assembleGroupEncodeEntry(!1),s=this.assembleLabelTitle()||t.assembleTitle(),o=t.assembleGroupStyle();return[{name:this.getName("cell"),type:"group",...s?{title:s}:{},...o?{style:o}:{},from:{facet:this.assembleFacet()},sort:{field:Nc.map(u=>this.facetSortFields(u)).flat(),order:Nc.map(u=>this.facetSortOrder(u)).flat()},...r.length>0?{data:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup(uon(this,[]))}]}getMapping(){return this.facet}}function Jun(e,t){const{row:n,column:r}=t;if(n&&r){let i=null;for(const s of[n,r])if(Ah(s.sort)){const{field:o,op:a=W5}=s.sort;e=i=new I_(e,{joinaggregate:[{op:a,field:o,as:IW(s,s.sort,{forAs:!0})}],groupby:[at(s)]})}return i}return null}function DBe(e,t){var n,r,i,s;for(const o of t){const a=o.data;if(e.name&&o.hasName()&&e.name!==o.dataName)continue;const u=(n=e.format)==null?void 0:n.mesh,l=(r=a.format)==null?void 0:r.feature;if(u&&l)continue;const c=(i=e.format)==null?void 0:i.feature;if((c||l)&&c!==l)continue;const f=(s=a.format)==null?void 0:s.mesh;if(!((u||f)&&u!==f)){if(hk(e)&&hk(a)){if(Ol(e.values,a.values))return o}else if(nS(e)&&nS(a)){if(e.url===a.url)return o}else if(x8e(e)&&e.name===o.dataName)return o}}return null}function Zun(e,t){if(e.data||!e.parent){if(e.data===null){const r=new jb({values:[]});return t.push(r),r}const n=DBe(e.data,t);if(n)return q0(e.data)||(n.data.format=b5e({},e.data.format,n.data.format)),!n.hasName()&&e.data.name&&(n.dataName=e.data.name),n;{const r=new jb(e.data);return t.push(r),r}}else return e.parent.component.data.facetRoot?e.parent.component.data.facetRoot:e.parent.component.data.main}function eln(e,t,n){let r=0;for(const i of t.transforms){let s,o;if(zsn(i))o=e=new iS(e,i),s="derived";else if(Qie(i)){const a=qan(i);o=e=ya.makeWithAncestors(e,{},a,n)??e,e=new ST(e,t,i.filter)}else if(v8e(i))o=e=Ih.makeFromTransform(e,i,t),s="number";else if(Hsn(i))s="date",n.getWithExplicit(i.field).value===void 0&&(e=new ya(e,{[i.field]:s}),n.set(i.field,s,!1)),o=e=Ch.makeFromTransform(e,i);else if(qsn(i))o=e=Kf.makeFromTransform(e,i),s="number",rse(t)&&(e=new My(e));else if(y8e(i))o=e=gk.make(e,t,i,r++),s="derived";else if(jsn(i))o=e=new AT(e,i),s="number";else if(Bsn(i))o=e=new I_(e,i),s="number";else if(Wsn(i))o=e=bm.makeFromTransform(e,i),s="derived";else if(Gsn(i))o=e=new hj(e,i),s="derived";else if(Ysn(i))o=e=new fj(e,i),s="derived";else if(Usn(i))o=e=new dj(e,i),s="derived";else if(Osn(i))o=e=new yj(e,i),s="derived";else if(Fsn(i))e=new vj(e,i);else if(Vsn(i))o=e=Q1.makeFromTransform(e,i),s="derived";else if(Dsn(i))o=e=new cj(e,i),s="derived";else if($sn(i))o=e=new mj(e,i),s="derived";else if(Msn(i))o=e=new gj(e,i),s="derived";else if(Lsn(i))o=e=new pj(e,i),s="derived";else{Je(pnn(i));continue}if(o&&s!==void 0)for(const a of o.producedFields()??[])n.set(a,s,!1)}return e}function bj(e){var h;let t=Zun(e,e.component.data.sources);const{outputNodes:n,outputNodeRefCounts:r}=e.component.data,i=e.data,o=!(i&&(q0(i)||nS(i)||hk(i)))&&e.parent?e.parent.component.data.ancestorParse.clone():new oon;q0(i)?(S8e(i)?t=new pN(t,i.sequence):Jie(i)&&(t=new hN(t,i.graticule)),o.parseNothing=!0):((h=i==null?void 0:i.format)==null?void 0:h.parse)===null&&(o.parseNothing=!0),t=ya.makeExplicit(t,e,o)??t,t=new My(t);const a=e.parent&&CT(e.parent);(Xi(e)||jl(e))&&a&&(t=Ih.makeFromEncoding(t,e)??t),e.transforms.length>0&&(t=eln(t,e,o));const u=Gan(e),l=Wan(e);t=ya.makeWithAncestors(t,{},{...u,...l},o)??t,Xi(e)&&(t=BE.parseAll(t,e),t=mk.parseAll(t,e)),(Xi(e)||jl(e))&&(a||(t=Ih.makeFromEncoding(t,e)??t),t=Ch.makeFromEncoding(t,e)??t,t=iS.parseAllForSortIndex(t,e));const c=t=lve(Si.Raw,e,t);if(Xi(e)){const p=Kf.makeFromEncoding(t,e);p&&(t=p,rse(e)&&(t=new My(t))),t=Q1.makeFromEncoding(t,e)??t,t=bm.makeFromEncoding(t,e)??t}Xi(e)&&(t=pk.make(t,e)??t);const f=t=lve(Si.Main,e,t);Xi(e)&&zon(e,f);let d=null;if(jl(e)){const p=e.getName("facet");t=Jun(t,e.facet)??t,d=new TT(t,e,p,f.getSource()),n[p]=d}return{...e.component.data,outputNodes:n,outputNodeRefCounts:r,raw:c,main:f,facetRoot:d,ancestorParse:o}}function lve(e,t,n){const{outputNodes:r,outputNodeRefCounts:i}=t.component.data,s=t.getDataName(e),o=new Zu(n,s,e,i);return r[s]=o,o}class tln extends pse{constructor(t,n,r,i){var s,o,a,u;super(t,"concat",n,r,i,t.resolve),(((o=(s=t.resolve)==null?void 0:s.axis)==null?void 0:o.x)==="shared"||((u=(a=t.resolve)==null?void 0:a.axis)==null?void 0:u.y)==="shared")&&Je(fnn),this.children=this.getChildren(t).map((l,c)=>_se(l,this,this.getName(`concat_${c}`),void 0,i))}parseData(){this.component.data=bj(this);for(const t of this.children)t.parseData()}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){for(const t of this.children)t.parseAxesAndHeaders()}getChildren(t){return ej(t)?t.vconcat:Kie(t)?t.hconcat:t.concat}parseLayoutSize(){Kun(this)}parseAxisGroup(){return null}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.forEach(t=>t.assembleSignals()),[]}assembleLayoutSignals(){const t=ose(this);for(const n of this.children)t.push(...n.assembleLayoutSignals());return t}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleMarks(){return this.children.map(t=>{const n=t.assembleTitle(),r=t.assembleGroupStyle(),i=t.assembleGroupEncodeEntry(!1);return{type:"group",name:t.getName("group"),...n?{title:n}:{},...r?{style:r}:{},...i?{encode:{update:i}}:{},...t.assembleGroup()}})}assembleGroupStyle(){}assembleDefaultLayout(){const t=this.layout.columns;return{...t!=null?{columns:t}:{},bounds:"full",align:"each"}}}function nln(e){return e===!1||e===null}const rln={disable:1,gridScale:1,scale:1,...zje,labelExpr:1,encode:1},$Be=Ke(rln);class gse extends xg{constructor(t={},n={},r=!1){super(),this.explicit=t,this.implicit=n,this.mainExtracted=r}clone(){return new gse(rn(this.explicit),rn(this.implicit),this.mainExtracted)}hasAxisPart(t){return t==="axis"?!0:t==="grid"||t==="title"?!!this.get(t):!nln(this.get(t))}hasOrientSignalRef(){return Rt(this.explicit.orient)}}function iln(e,t,n){const{encoding:r,config:i}=e,s=js(r[t])??js(r[hp(t)]),o=e.axis(t)||{},{format:a,formatType:u}=o;if($b(u))return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:a,formatType:u,config:i}),...n};if(a===void 0&&u===void 0&&i.customFormatTypes){if(Zx(s)==="quantitative"){if(eS(s)&&s.stack==="normalize"&&i.normalizedNumberFormatType)return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:i.normalizedNumberFormat,formatType:i.normalizedNumberFormatType,config:i}),...n};if(i.numberFormatType)return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:i.numberFormat,formatType:i.numberFormatType,config:i}),...n}}if(Zx(s)==="temporal"&&i.timeFormatType&&Ze(s)&&!s.timeUnit)return{text:Uf({fieldOrDatumDef:s,field:"datum.value",format:i.timeFormat,formatType:i.timeFormatType,config:i}),...n}}return n}function sln(e){return pp.reduce((t,n)=>(e.component.scales[n]&&(t[n]=[dln(n,e)]),t),{})}const oln={bottom:"top",top:"bottom",left:"right",right:"left"};function aln(e){const{axes:t,resolve:n}=e.component,r={top:0,bottom:0,right:0,left:0};for(const i of e.children){i.parseAxesAndHeaders();for(const s of Ke(i.component.axes))n.axis[s]=ase(e.component.resolve,s),n.axis[s]==="shared"&&(t[s]=uln(t[s],i.component.axes[s]),t[s]||(n.axis[s]="independent",delete t[s]))}for(const i of pp){for(const s of e.children)if(s.component.axes[i]){if(n.axis[i]==="independent"){t[i]=(t[i]??[]).concat(s.component.axes[i]);for(const o of s.component.axes[i]){const{value:a,explicit:u}=o.getWithExplicit("orient");if(!Rt(a)){if(r[a]>0&&!u){const l=oln[a];r[a]>r[l]&&o.set("orient",l,!1)}r[a]++}}}delete s.component.axes[i]}if(n.axis[i]==="independent"&&t[i]&&t[i].length>1)for(const[s,o]of(t[i]||[]).entries())s>0&&o.get("grid")&&!o.explicit.grid&&(o.implicit.grid=!1)}}function uln(e,t){if(e){if(e.length!==t.length)return;const n=e.length;for(let r=0;r<n;r++){const i=e[r],s=t[r];if(!!i!=!!s)return;if(i&&s){const o=i.getWithExplicit("orient"),a=s.getWithExplicit("orient");if(o.explicit&&a.explicit&&o.value!==a.value)return;e[r]=lln(i,s)}}}else return t.map(n=>n.clone());return e}function lln(e,t){for(const n of $Be){const r=Oy(e.getWithExplicit(n),t.getWithExplicit(n),n,"axis",(i,s)=>{switch(n){case"title":return G5e(i,s);case"gridScale":return{explicit:i.explicit,value:ps(i.value,s.value)}}return nj(i,s,n,"axis")});e.setWithExplicit(n,r)}return e}function cln(e,t,n,r,i){if(t==="disable")return n!==void 0;switch(n=n||{},t){case"titleAngle":case"labelAngle":return e===(Rt(n.labelAngle)?n.labelAngle:fk(n.labelAngle));case"values":return!!n.values;case"encode":return!!n.encoding||!!n.labelAngle;case"title":if(e===Z8e(r,i))return!0}return e===n[t]}const fln=new Set(["grid","translate","format","formatType","orient","labelExpr","tickCount","position","tickMinStep"]);function dln(e,t){var y,v;let n=t.axis(e);const r=new gse,i=js(t.encoding[e]),{mark:s,config:o}=t,a=(n==null?void 0:n.orient)||((y=o[e==="x"?"axisX":"axisY"])==null?void 0:y.orient)||((v=o.axis)==null?void 0:v.orient)||Jon(e),u=t.getScaleComponent(e).get("type"),l=qon(e,u,a,t.config),c=n!==void 0?!n:_W("disable",o.style,n==null?void 0:n.style,l).configValue;if(r.set("disable",c,n!==void 0),c)return r;n=n||{};const f=Kon(i,n,e,o.style,l),d=Eje(n.formatType,i,u),h=wje(i,i.type,n.format,n.formatType,o,!0),p={fieldOrDatumDef:i,axis:n,channel:e,model:t,scaleType:u,orient:a,labelAngle:f,format:h,formatType:d,mark:s,config:o};for(const b of $Be){const w=b in Gye?Gye[b](p):_ye(b)?n[b]:void 0,E=w!==void 0,T=cln(w,b,n,t,e);if(E&&T)r.set(b,w,T);else{const{configValue:S=void 0,configFrom:A=void 0}=_ye(b)&&b!=="values"?_W(b,o.style,n.style,l):{},C=S!==void 0;E&&!C?r.set(b,w,T):(A!=="vgAxisConfig"||fln.has(b)&&C||fN(S)||Rt(S))&&r.set(b,S,!1)}}const m=n.encoding??{},g=Uje.reduce((b,w)=>{if(!r.hasAxisPart(w))return b;const E=sBe(m[w]??{},t),T=w==="labels"?iln(t,e,E):E;return T!==void 0&&!Ur(T)&&(b[w]={update:T}),b},{});return Ur(g)||r.set("encode",g,!!n.encoding||n.labelAngle!==void 0),r}function hln({encoding:e,size:t}){for(const n of pp){const r=cl(n);Wh(t[r])&&_0(e[n])&&(delete t[r],Je(J5e(r)))}return t}const pln={vgMark:"arc",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...Dy(e,"radius"),...Dy(e,"theta")})},mln={vgMark:"area",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"include",size:"ignore",theta:"ignore"}),...RL("x",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="horizontal"}),...RL("y",e,{defaultPos:"zeroOrMin",defaultPos2:"zeroOrMin",range:e.markDef.orient==="vertical"}),...nse(e)})},gln={vgMark:"rect",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dy(e,"x"),...Dy(e,"y")})},yln={vgMark:"shape",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"})}),postEncodingTransform:e=>{const{encoding:t}=e,n=t.shape;return[{type:"geoshape",projection:e.projectionName(),...n&&Ze(n)&&n.type===ET?{field:at(n,{expr:"datum"})}:{}}]}},vln={vgMark:"image",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"ignore",orient:"ignore",size:"ignore",theta:"ignore"}),...Dy(e,"x"),...Dy(e,"y"),...ese(e,"url")})},bln={vgMark:"line",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"ignore",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...io("size",e,{vgChannel:"strokeWidth"}),...nse(e)})},_ln={vgMark:"trail",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...io("size",e),...nse(e)})};function yse(e,t){const{config:n}=e;return{...af(e,{align:"ignore",baseline:"ignore",color:"include",size:"include",orient:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...io("size",e),...io("angle",e),...wln(e,n,t)}}function wln(e,t,n){return n?{shape:{value:n}}:io("shape",e)}const Eln={vgMark:"symbol",encodeEntry:e=>yse(e)},xln={vgMark:"symbol",encodeEntry:e=>yse(e,"circle")},Sln={vgMark:"symbol",encodeEntry:e=>yse(e,"square")},Tln={vgMark:"rect",encodeEntry:e=>({...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...Dy(e,"x"),...Dy(e,"y")})},Aln={vgMark:"rule",encodeEntry:e=>{const{markDef:t}=e,n=t.orient;return!e.encoding.x&&!e.encoding.y&&!e.encoding.latitude&&!e.encoding.longitude?{}:{...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...RL("x",e,{defaultPos:n==="horizontal"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="vertical"}),...RL("y",e,{defaultPos:n==="vertical"?"zeroOrMax":"mid",defaultPos2:"zeroOrMin",range:n!=="horizontal"}),...io("size",e,{vgChannel:"strokeWidth"})}}},Cln={vgMark:"text",encodeEntry:e=>{const{config:t,encoding:n}=e;return{...af(e,{align:"include",baseline:"include",color:"include",size:"ignore",orient:"ignore",theta:"include"}),...ga("x",e,{defaultPos:"mid"}),...ga("y",e,{defaultPos:"mid"}),...ese(e),...io("size",e,{vgChannel:"fontSize"}),...io("angle",e),...Vye("align",Iln(e.markDef,n,t)),...Vye("baseline",kln(e.markDef,n,t)),...ga("radius",e,{defaultPos:null}),...ga("theta",e,{defaultPos:null})}}};function Iln(e,t,n){if(Er("align",e,n)===void 0)return"center"}function kln(e,t,n){if(Er("baseline",e,n)===void 0)return"middle"}const Rln={vgMark:"rect",encodeEntry:e=>{const{config:t,markDef:n}=e,r=n.orient,i=r==="horizontal"?"width":"height",s=r==="horizontal"?"height":"width";return{...af(e,{align:"ignore",baseline:"ignore",color:"include",orient:"ignore",size:"ignore",theta:"ignore"}),...ga("x",e,{defaultPos:"mid",vgChannel:"xc"}),...ga("y",e,{defaultPos:"mid",vgChannel:"yc"}),...io("size",e,{defaultValue:Nln(e),vgChannel:i}),[s]:di(Er("thickness",n,t))}}};function Nln(e){const{config:t,markDef:n}=e,{orient:r}=n,i=r==="horizontal"?"width":"height",s=e.getScaleComponent(r==="horizontal"?"x":"y"),o=Er("size",n,t,{vgChannel:i})??t.tick.bandSize;if(o!==void 0)return o;{const a=s?s.get("range"):void 0;return a&&vv(a)&&fr(a.step)?a.step*3/4:IL(t.view,i)*3/4}}const lO={arc:pln,area:mln,bar:gln,circle:xln,geoshape:yln,image:vln,line:bln,point:Eln,rect:Tln,rule:Aln,square:Sln,text:Cln,tick:Rln,trail:_ln};function Pln(e){if(Wn([H5,z5,Grn],e.mark)){const t=Gje(e.mark,e.encoding);if(t.length>0)return Oln(e,t)}else if(e.mark===V5){const t=uW.some(n=>Er(n,e.markDef,e.config));if(e.stack&&!e.fieldDef("size")&&t)return Dln(e)}return vse(e)}const cve="faceted_path_";function Oln(e,t){return[{name:e.getName("pathgroup"),type:"group",from:{facet:{name:cve+e.requestDataName(Si.Main),data:e.requestDataName(Si.Main),groupby:t}},encode:{update:{width:{field:{group:"width"}},height:{field:{group:"height"}}}},marks:vse(e,{fromPrefix:cve})}]}const fve="stack_group_";function Dln(e){var l;const[t]=vse(e,{fromPrefix:fve}),n=e.scaleName(e.stack.fieldChannel),r=(c={})=>e.vgField(e.stack.fieldChannel,c),i=(c,f)=>{const d=[r({prefix:"min",suffix:"start",expr:f}),r({prefix:"max",suffix:"start",expr:f}),r({prefix:"min",suffix:"end",expr:f}),r({prefix:"max",suffix:"end",expr:f})];return`${c}(${d.map(h=>`scale('${n}',${h})`).join(",")})`};let s,o;e.stack.fieldChannel==="x"?(s={...Gx(t.encode.update,["y","yc","y2","height",...uW]),x:{signal:i("min","datum")},x2:{signal:i("max","datum")},clip:{value:!0}},o={x:{field:{group:"x"},mult:-1},height:{field:{group:"height"}}},t.encode.update={...Qu(t.encode.update,["y","yc","y2"]),height:{field:{group:"height"}}}):(s={...Gx(t.encode.update,["x","xc","x2","width"]),y:{signal:i("min","datum")},y2:{signal:i("max","datum")},clip:{value:!0}},o={y:{field:{group:"y"},mult:-1},width:{field:{group:"width"}}},t.encode.update={...Qu(t.encode.update,["x","xc","x2"]),width:{field:{group:"width"}}});for(const c of uW){const f=Xm(c,e.markDef,e.config);t.encode.update[c]?(s[c]=t.encode.update[c],delete t.encode.update[c]):f&&(s[c]=di(f)),f&&(t.encode.update[c]={value:0})}const a=[];if(((l=e.stack.groupbyChannels)==null?void 0:l.length)>0)for(const c of e.stack.groupbyChannels){const f=e.fieldDef(c),d=at(f);d&&a.push(d),(f!=null&&f.bin||f!=null&&f.timeUnit)&&a.push(at(f,{binSuffix:"end"}))}return s=["stroke","strokeWidth","strokeJoin","strokeCap","strokeDash","strokeDashOffset","strokeMiterLimit","strokeOpacity"].reduce((c,f)=>{if(t.encode.update[f])return{...c,[f]:t.encode.update[f]};{const d=Xm(f,e.markDef,e.config);return d!==void 0?{...c,[f]:di(d)}:c}},s),s.stroke&&(s.strokeForeground={value:!0},s.strokeOffset={value:0}),[{type:"group",from:{facet:{data:e.requestDataName(Si.Main),name:fve+e.requestDataName(Si.Main),groupby:a,aggregate:{fields:[r({suffix:"start"}),r({suffix:"start"}),r({suffix:"end"}),r({suffix:"end"})],ops:["min","max","min","max"]}}},encode:{update:s},marks:[{type:"group",encode:{update:o},marks:[t]}]}]}function $ln(e){var a;const{encoding:t,stack:n,mark:r,markDef:i,config:s}=e,o=t.order;if(!(!je(o)&&ad(o)&&oW(o.value)||!o&&oW(Er("order",i,s)))){if((je(o)||Ze(o))&&!n)return H5e(o,{expr:"datum"});if(T_(r)){const u=i.orient==="horizontal"?"y":"x",l=t[u];if(Ze(l)){const c=l.sort;if(je(c))return{field:at(l,{prefix:u,suffix:"sort_index",expr:"datum"})};if(Ah(c))return{field:at({aggregate:jie(e.encoding)?c.op:void 0,field:c.field},{expr:"datum"})};if(kje(c)){const f=e.fieldDef(c.encoding);return{field:at(f,{expr:"datum"}),order:c.order}}else return c===null?void 0:{field:at(l,{binSuffix:(a=e.stack)!=null&&a.impute?"mid":void 0,expr:"datum"})}}return}}}function vse(e,t={fromPrefix:""}){const{mark:n,markDef:r,encoding:i,config:s}=e,o=ps(r.clip,Mln(e),Lln(e)),a=z5e(r),u=i.key,l=$ln(e),c=Fln(e),f=Er("aria",r,s),d=lO[n].postEncodingTransform?lO[n].postEncodingTransform(e):null;return[{name:e.getName("marks"),type:lO[n].vgMark,...o?{clip:o}:{},...a?{style:a}:{},...u?{key:u.field}:{},...l?{sort:l}:{},...c||{},...f===!1?{aria:f}:{},from:{data:t.fromPrefix+e.requestDataName(Si.Main)},encode:{update:lO[n].encodeEntry(e)},...d?{transform:d}:{}}]}function Mln(e){const t=e.getScaleComponent("x"),n=e.getScaleComponent("y");return t!=null&&t.get("selectionExtent")||n!=null&&n.get("selectionExtent")?!0:void 0}function Lln(e){const t=e.component.projection;return t&&!t.isFit?!0:void 0}function Fln(e){if(!e.component.selection)return null;const t=Ke(e.component.selection).length;let n=t,r=e.parent;for(;r&&n===0;)n=Ke(r.component.selection).length,r=r.parent;return n?{interactive:t>0||e.mark==="geoshape"||!!e.encoding.tooltip||!!e.markDef.tooltip}:null}class MBe extends NBe{constructor(t,n,r,i={},s){super(t,"unit",n,r,s,void 0,Eye(t)?t.view:void 0),this.specifiedScales={},this.specifiedAxes={},this.specifiedLegends={},this.specifiedProjection={},this.selection=[],this.children=[];const o=Hh(t.mark)?{...t.mark}:{type:t.mark},a=o.type;o.filled===void 0&&(o.filled=Esn(o,s,{graticule:t.data&&Jie(t.data)}));const u=this.encoding=Ain(t.encoding||{},a,o.filled,s);this.markDef=p8e(o,u,s),this.size=hln({encoding:u,size:Eye(t)?{...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}}:i}),this.stack=h8e(this.markDef,u),this.specifiedScales=this.initScales(a,u),this.specifiedAxes=this.initAxes(u),this.specifiedLegends=this.initLegends(u),this.specifiedProjection=t.projection,this.selection=(t.params??[]).filter(l=>Gie(l))}get hasProjection(){const{encoding:t}=this,n=this.mark===Aje,r=t&&Stn.some(i=>fn(t[i]));return n||r}scaleDomain(t){const n=this.specifiedScales[t];return n?n.domain:void 0}axis(t){return this.specifiedAxes[t]}legend(t){return this.specifiedLegends[t]}initScales(t,n){return F5.reduce((r,i)=>{const s=js(n[i]);return s&&(r[i]=this.initScale(s.scale??{})),r},{})}initScale(t){const{domain:n,range:r}=t,i=Ou(t);return je(n)&&(i.domain=n.map(Tl)),je(r)&&(i.range=r.map(Tl)),i}initAxes(t){return pp.reduce((n,r)=>{const i=t[r];if(fn(i)||r===Ni&&fn(t.x2)||r===bo&&fn(t.y2)){const s=fn(i)?i.axis:void 0;n[r]=s&&this.initAxis({...s})}return n},{})}initAxis(t){const n=Ke(t),r={};for(const i of n){const s=t[i];r[i]=fN(s)?U5e(s):Tl(s)}return r}initLegends(t){return Dtn.reduce((n,r)=>{const i=js(t[r]);if(i&&Mtn(r)){const s=i.legend;n[r]=s&&Ou(s)}return n},{})}parseData(){this.component.data=bj(this)}parseLayoutSize(){Xun(this)}parseSelections(){this.component.selection=Uon(this,this.selection)}parseMarkGroup(){this.component.mark=Pln(this)}parseAxesAndHeaders(){this.component.axes=sln(this)}assembleSelectionTopLevelSignals(t){return lon(this,t)}assembleSignals(){return[...X8e(this),...aon(this,[])]}assembleSelectionData(t){return con(this,t)}assembleLayout(){return null}assembleLayoutSignals(){return ose(this)}assembleMarks(){let t=this.component.mark??[];return(!this.parent||!CT(this.parent))&&(t=C8e(this,t)),t.map(this.correctDataNames)}assembleGroupStyle(){const{style:t}=this.view||{};return t!==void 0?t:this.encoding.x||this.encoding.y?"cell":"view"}getMapping(){return this.encoding}get mark(){return this.markDef.type}channelHasField(t){return K1(this.encoding,t)}fieldDef(t){const n=this.encoding[t];return qh(n)}typedFieldDef(t){const n=this.fieldDef(t);return ou(n)?n:null}}class bse extends pse{constructor(t,n,r,i,s){super(t,"layer",n,r,s,t.resolve,t.view);const o={...i,...t.width?{width:t.width}:{},...t.height?{height:t.height}:{}};this.children=t.layer.map((a,u)=>{if(tj(a))return new bse(a,this,this.getName(`layer_${u}`),o,s);if(Eg(a))return new MBe(a,this,this.getName(`layer_${u}`),o,s);throw new Error(die(a))})}parseData(){this.component.data=bj(this);for(const t of this.children)t.parseData()}parseLayoutSize(){Yun(this)}parseSelections(){this.component.selection={};for(const t of this.children){t.parseSelections();for(const n of Ke(t.component.selection))this.component.selection[n]=t.component.selection[n]}}parseMarkGroup(){for(const t of this.children)t.parseMarkGroup()}parseAxesAndHeaders(){aln(this)}assembleSelectionTopLevelSignals(t){return this.children.reduce((n,r)=>r.assembleSelectionTopLevelSignals(n),t)}assembleSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleSignals()),X8e(this))}assembleLayoutSignals(){return this.children.reduce((t,n)=>t.concat(n.assembleLayoutSignals()),ose(this))}assembleSelectionData(t){return this.children.reduce((n,r)=>r.assembleSelectionData(n),t)}assembleGroupStyle(){const t=new Set;for(const r of this.children)for(const i of pt(r.assembleGroupStyle()))t.add(i);const n=Array.from(t);return n.length>1?n:n.length===1?n[0]:void 0}assembleTitle(){let t=super.assembleTitle();if(t)return t;for(const n of this.children)if(t=n.assembleTitle(),t)return t}assembleLayout(){return null}assembleMarks(){return fon(this,this.children.flatMap(t=>t.assembleMarks()))}assembleLegends(){return this.children.reduce((t,n)=>t.concat(n.assembleLegends()),hBe(this))}}function _se(e,t,n,r,i){if(G5(e))return new A2(e,t,n,i);if(tj(e))return new bse(e,t,n,r,i);if(Eg(e))return new MBe(e,t,n,r,i);if(Xin(e))return new tln(e,t,n,i);throw new Error(die(e))}function jln(e,t={}){t.logger&&trn(t.logger),t.fieldTitle&&Fje(t.fieldTitle);try{const n=d8e(lT(t.config,e.config)),r=w8e(e,n),i=_se(r,null,"",void 0,n);return i.parse(),lun(i.component.data,i),{spec:Uln(i,Bln(e,r.autosize,n,i),e.datasets,e.usermeta),normalized:r}}finally{t.logger&&nrn(),t.fieldTitle&&yin()}}function Bln(e,t,n,r){const i=r.component.layoutSize.get("width"),s=r.component.layoutSize.get("height");if(t===void 0?(t={type:"pad"},r.hasAxisOrientSignalRef()&&(t.resize=!0)):mt(t)&&(t={type:t}),i&&s&&ron(t.type)){if(i==="step"&&s==="step")Je(oye()),t.type="pad";else if(i==="step"||s==="step"){const o=i==="step"?"width":"height";Je(oye(L5(o)));const a=o==="width"?"height":"width";t.type=ion(a)}}return{...Ke(t).length===1&&t.type?t.type==="pad"?{}:{autosize:t.type}:{autosize:t},...Dye(n,!1),...Dye(e,!0)}}function Uln(e,t,n={},r){const i=e.config?csn(e.config):void 0,s=[].concat(e.assembleSelectionData([]),Hun(e.component.data,n)),o=e.assembleProjections(),a=e.assembleTitle(),u=e.assembleGroupStyle(),l=e.assembleGroupEncodeEntry(!0);let c=e.assembleLayoutSignals();c=c.filter(h=>(h.name==="width"||h.name==="height")&&h.value!==void 0?(t[h.name]=+h.value,!1):!0);const{params:f,...d}=t;return{$schema:"https://vega.github.io/schema/vega/v5.json",...e.description?{description:e.description}:{},...d,...a?{title:a}:{},...u?{style:u}:{},...l?{encode:{update:l}}:{},data:s,...o.length>0?{projections:o}:{},...e.assembleGroup([...c,...e.assembleSelectionTopLevelSignals([]),...u8e(f)]),...i?{config:i}:{},...r?{usermeta:r}:{}}}const zln=vtn.version,Vln=Object.freeze(Object.defineProperty({__proto__:null,accessPathDepth:Yx,accessPathWithDatum:rie,compile:jln,contains:Wn,deepEqual:Ol,deleteNestedProperty:vL,duplicate:rn,entries:Ry,every:eie,fieldIntersection:nie,flatAccessWithDatum:w5e,getFirstDefined:ps,hasIntersection:tie,hash:qn,internalField:S5e,isBoolean:ck,isEmpty:Ur,isEqual:_tn,isInternalField:T5e,isNullOrFalse:oW,isNumeric:N5,keys:Ke,logicalExpr:S2,mergeDeep:b5e,never:v5e,normalize:w8e,normalizeAngle:fk,omit:Qu,pick:Gx,prefixGenerator:aW,removePathFromField:_T,replaceAll:Nb,replacePathInField:Wc,resetIdCounter:Etn,setEqual:_5e,some:Rb,stringify:zr,titleCase:tN,unique:lh,uniqueId:x5e,vals:jo,varName:Ri,version:zln},Symbol.toStringTag,{value:"Module"}));function LBe(e){const[t,n]=/schema\/([\w-]+)\/([\w\.\-]+)\.json$/g.exec(e).slice(1,3);return{library:t,version:n}}var Hln="vega-themes",qln="2.15.0",Wln="Themes for stylized Vega and Vega-Lite visualizations.",Gln=["vega","vega-lite","themes","style"],Yln="BSD-3-Clause",Kln={name:"UW Interactive Data Lab",url:"https://idl.cs.washington.edu"},Xln=[{name:"Emily Gu",url:"https://github.com/emilygu"},{name:"Arvind Satyanarayan",url:"http://arvindsatya.com"},{name:"Jeffrey Heer",url:"https://idl.cs.washington.edu"},{name:"Dominik Moritz",url:"https://www.domoritz.de"}],Qln="build/vega-themes.js",wse="build/vega-themes.module.js",Jln="build/vega-themes.min.js",Zln="build/vega-themes.min.js",ecn="build/vega-themes.module.d.ts",tcn={type:"git",url:"https://github.com/vega/vega-themes.git"},ncn=["src","build"],rcn={prebuild:"yarn clean",build:"rollup -c",clean:"rimraf build && rimraf examples/build","copy:data":"rsync -r node_modules/vega-datasets/data/* examples/data","copy:build":"rsync -r build/* examples/build","deploy:gh":"yarn build && mkdir -p examples/build && rsync -r build/* examples/build && gh-pages -d examples",preversion:"yarn lint",serve:"browser-sync start -s -f build examples --serveStatic examples",start:"yarn build && concurrently --kill-others -n Server,Rollup 'yarn serve' 'rollup -c -w'",format:"eslint . --fix",lint:"eslint .",release:"release-it"},icn={"@babel/core":"^7.24.6","@babel/plugin-transform-runtime":"^7.24.6","@babel/preset-env":"^7.24.6","@babel/preset-typescript":"^7.24.6","@release-it/conventional-changelog":"^8.0.1","@rollup/plugin-json":"^6.1.0","@rollup/plugin-node-resolve":"^15.2.3","@rollup/plugin-terser":"^0.4.4","@typescript-eslint/eslint-plugin":"^7.11.0","@typescript-eslint/parser":"^7.11.0","browser-sync":"^3.0.2",concurrently:"^8.2.2",eslint:"^8.45.0","eslint-config-prettier":"^9.1.0","eslint-plugin-prettier":"^5.1.3","gh-pages":"^6.1.1",prettier:"^3.2.5","release-it":"^17.3.0",rollup:"^4.18.0","rollup-plugin-bundle-size":"^1.0.3","rollup-plugin-ts":"^3.4.5",typescript:"^5.4.5",vega:"^5.25.0","vega-lite":"^5.9.3"},scn={vega:"*","vega-lite":"*"},ocn={},acn={name:Hln,version:qln,description:Wln,keywords:Gln,license:Yln,author:Kln,contributors:Xln,main:Qln,module:wse,unpkg:Jln,jsdelivr:Zln,types:ecn,repository:tcn,files:ncn,scripts:rcn,devDependencies:icn,peerDependencies:scn,dependencies:ocn};const ow="#fff",dve="#888",ucn={background:"#333",view:{stroke:dve},title:{color:ow,subtitleColor:ow},style:{"guide-label":{fill:ow},"guide-title":{fill:ow}},axis:{domainColor:ow,gridColor:dve,tickColor:ow}},Nv="#4572a7",lcn={background:"#fff",arc:{fill:Nv},area:{fill:Nv},line:{stroke:Nv,strokeWidth:2},path:{stroke:Nv},rect:{fill:Nv},shape:{stroke:Nv},symbol:{fill:Nv,strokeWidth:1.5,size:50},axis:{bandPosition:.5,grid:!0,gridColor:"#000000",gridOpacity:1,gridWidth:.5,labelPadding:10,tickSize:5,tickWidth:.5},axisBand:{grid:!1,tickExtra:!0},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:50,symbolType:"square"},range:{category:["#4572a7","#aa4643","#8aa453","#71598e","#4598ae","#d98445","#94aace","#d09393","#b9cc98","#a99cbc"]}},Pv="#30a2da",AU="#cbcbcb",ccn="#999",fcn="#333",hve="#f0f0f0",pve="#333",dcn={arc:{fill:Pv},area:{fill:Pv},axis:{domainColor:AU,grid:!0,gridColor:AU,gridWidth:1,labelColor:ccn,labelFontSize:10,titleColor:fcn,tickColor:AU,tickSize:10,titleFontSize:14,titlePadding:10,labelPadding:4},axisBand:{grid:!1},background:hve,group:{fill:hve},legend:{labelColor:pve,labelFontSize:11,padding:1,symbolSize:30,symbolType:"square",titleColor:pve,titleFontSize:14,titlePadding:10},line:{stroke:Pv,strokeWidth:2},path:{stroke:Pv,strokeWidth:.5},rect:{fill:Pv},range:{category:["#30a2da","#fc4f30","#e5ae38","#6d904f","#8b8b8b","#b96db8","#ff9e27","#56cc60","#52d2ca","#52689e","#545454","#9fe4f8"],diverging:["#cc0020","#e77866","#f6e7e1","#d6e8ed","#91bfd9","#1d78b5"],heatmap:["#d6e8ed","#cee0e5","#91bfd9","#549cc6","#1d78b5"]},point:{filled:!0,shape:"circle"},shape:{stroke:Pv},bar:{binSpacing:2,fill:Pv,stroke:null},title:{anchor:"start",fontSize:24,fontWeight:600,offset:20}},Ov="#000",hcn={group:{fill:"#e5e5e5"},arc:{fill:Ov},area:{fill:Ov},line:{stroke:Ov},path:{stroke:Ov},rect:{fill:Ov},shape:{stroke:Ov},symbol:{fill:Ov,size:40},axis:{domain:!1,grid:!0,gridColor:"#FFFFFF",gridOpacity:1,labelColor:"#7F7F7F",labelPadding:4,tickColor:"#7F7F7F",tickSize:5.67,titleFontSize:16,titleFontWeight:"normal"},legend:{labelBaseline:"middle",labelFontSize:11,symbolSize:40},range:{category:["#000000","#7F7F7F","#1A1A1A","#999999","#333333","#B0B0B0","#4D4D4D","#C9C9C9","#666666","#DCDCDC"]}},pcn=22,mcn="normal",mve="Benton Gothic, sans-serif",gve=11.5,gcn="normal",Dv="#82c6df",CU="Benton Gothic Bold, sans-serif",yve="normal",vve=13,AA={"category-6":["#ec8431","#829eb1","#c89d29","#3580b1","#adc839","#ab7fb4"],"fire-7":["#fbf2c7","#f9e39c","#f8d36e","#f4bb6a","#e68a4f","#d15a40","#ab4232"],"fireandice-6":["#e68a4f","#f4bb6a","#f9e39c","#dadfe2","#a6b7c6","#849eae"],"ice-7":["#edefee","#dadfe2","#c4ccd2","#a6b7c6","#849eae","#607785","#47525d"]},ycn={background:"#ffffff",title:{anchor:"start",color:"#000000",font:CU,fontSize:pcn,fontWeight:mcn},arc:{fill:Dv},area:{fill:Dv},line:{stroke:Dv,strokeWidth:2},path:{stroke:Dv},rect:{fill:Dv},shape:{stroke:Dv},symbol:{fill:Dv,size:30},axis:{labelFont:mve,labelFontSize:gve,labelFontWeight:gcn,titleFont:CU,titleFontSize:vve,titleFontWeight:yve},axisX:{labelAngle:0,labelPadding:4,tickSize:3},axisY:{labelBaseline:"middle",maxExtent:45,minExtent:45,tickSize:2,titleAlign:"left",titleAngle:0,titleX:-45,titleY:-11},legend:{labelFont:mve,labelFontSize:gve,symbolType:"square",titleFont:CU,titleFontSize:vve,titleFontWeight:yve},range:{category:AA["category-6"],diverging:AA["fireandice-6"],heatmap:AA["fire-7"],ordinal:AA["fire-7"],ramp:AA["fire-7"]}},$v="#ab5787",cO="#979797",vcn={background:"#f9f9f9",arc:{fill:$v},area:{fill:$v},line:{stroke:$v},path:{stroke:$v},rect:{fill:$v},shape:{stroke:$v},symbol:{fill:$v,size:30},axis:{domainColor:cO,domainWidth:.5,gridWidth:.2,labelColor:cO,tickColor:cO,tickWidth:.2,titleColor:cO},axisBand:{grid:!1},axisX:{grid:!0,tickSize:10},axisY:{domain:!1,grid:!0,tickSize:0},legend:{labelFontSize:11,padding:1,symbolSize:30,symbolType:"square"},range:{category:["#ab5787","#51b2e5","#703c5c","#168dd9","#d190b6","#00609f","#d365ba","#154866","#666666","#c4c4c4"]}},Mv="#3e5c69",bcn={background:"#fff",arc:{fill:Mv},area:{fill:Mv},line:{stroke:Mv},path:{stroke:Mv},rect:{fill:Mv},shape:{stroke:Mv},symbol:{fill:Mv},axis:{domainWidth:.5,grid:!0,labelPadding:2,tickSize:5,tickWidth:.5,titleFontWeight:"normal"},axisBand:{grid:!1},axisX:{gridWidth:.2},axisY:{gridDash:[3],gridWidth:.4},legend:{labelFontSize:11,padding:1,symbolType:"square"},range:{category:["#3e5c69","#6793a6","#182429","#0570b0","#3690c0","#74a9cf","#a6bddb","#e2ddf2"]}},hc="#1696d2",bve="#000000",_cn="#FFFFFF",fO="Lato",IU="Lato",wcn="Lato",Ecn="#DEDDDD",xcn=18,CA={"main-colors":["#1696d2","#d2d2d2","#000000","#fdbf11","#ec008b","#55b748","#5c5859","#db2b27"],"shades-blue":["#CFE8F3","#A2D4EC","#73BFE2","#46ABDB","#1696D2","#12719E","#0A4C6A","#062635"],"shades-gray":["#F5F5F5","#ECECEC","#E3E3E3","#DCDBDB","#D2D2D2","#9D9D9D","#696969","#353535"],"shades-yellow":["#FFF2CF","#FCE39E","#FDD870","#FCCB41","#FDBF11","#E88E2D","#CA5800","#843215"],"shades-magenta":["#F5CBDF","#EB99C2","#E46AA7","#E54096","#EC008B","#AF1F6B","#761548","#351123"],"shades-green":["#DCEDD9","#BCDEB4","#98CF90","#78C26D","#55B748","#408941","#2C5C2D","#1A2E19"],"shades-black":["#D5D5D4","#ADABAC","#848081","#5C5859","#332D2F","#262223","#1A1717","#0E0C0D"],"shades-red":["#F8D5D4","#F1AAA9","#E9807D","#E25552","#DB2B27","#A4201D","#6E1614","#370B0A"],"one-group":["#1696d2","#000000"],"two-groups-cat-1":["#1696d2","#000000"],"two-groups-cat-2":["#1696d2","#fdbf11"],"two-groups-cat-3":["#1696d2","#db2b27"],"two-groups-seq":["#a2d4ec","#1696d2"],"three-groups-cat":["#1696d2","#fdbf11","#000000"],"three-groups-seq":["#a2d4ec","#1696d2","#0a4c6a"],"four-groups-cat-1":["#000000","#d2d2d2","#fdbf11","#1696d2"],"four-groups-cat-2":["#1696d2","#ec0008b","#fdbf11","#5c5859"],"four-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a"],"five-groups-cat-1":["#1696d2","#fdbf11","#d2d2d2","#ec008b","#000000"],"five-groups-cat-2":["#1696d2","#0a4c6a","#d2d2d2","#fdbf11","#332d2f"],"five-groups-seq":["#cfe8f3","#73bf42","#1696d2","#0a4c6a","#000000"],"six-groups-cat-1":["#1696d2","#ec008b","#fdbf11","#000000","#d2d2d2","#55b748"],"six-groups-cat-2":["#1696d2","#d2d2d2","#ec008b","#fdbf11","#332d2f","#0a4c6a"],"six-groups-seq":["#cfe8f3","#a2d4ec","#73bfe2","#46abdb","#1696d2","#12719e"],"diverging-colors":["#ca5800","#fdbf11","#fdd870","#fff2cf","#cfe8f3","#73bfe2","#1696d2","#0a4c6a"]},Scn={background:_cn,title:{anchor:"start",fontSize:xcn,font:fO},axisX:{domain:!0,domainColor:bve,domainWidth:1,grid:!1,labelFontSize:12,labelFont:IU,labelAngle:0,tickColor:bve,tickSize:5,titleFontSize:12,titlePadding:10,titleFont:fO},axisY:{domain:!1,domainWidth:1,grid:!0,gridColor:Ecn,gridWidth:1,labelFontSize:12,labelFont:IU,labelPadding:8,ticks:!1,titleFontSize:12,titlePadding:10,titleFont:fO,titleAngle:0,titleY:-10,titleX:18},legend:{labelFontSize:12,labelFont:IU,symbolSize:100,titleFontSize:12,titlePadding:10,titleFont:fO,orient:"right",offset:10},view:{stroke:"transparent"},range:{category:CA["six-groups-cat-1"],diverging:CA["diverging-colors"],heatmap:CA["diverging-colors"],ordinal:CA["six-groups-seq"],ramp:CA["shades-blue"]},area:{fill:hc},rect:{fill:hc},line:{color:hc,stroke:hc,strokeWidth:5},trail:{color:hc,stroke:hc,strokeWidth:0,size:1},path:{stroke:hc,strokeWidth:.5},point:{filled:!0},text:{font:wcn,color:hc,fontSize:11,align:"center",fontWeight:400,size:11},style:{bar:{fill:hc,stroke:null}},arc:{fill:hc},shape:{stroke:hc},symbol:{fill:hc,size:30}},Lv="#3366CC",_ve="#ccc",dO="Arial, sans-serif",Tcn={arc:{fill:Lv},area:{fill:Lv},path:{stroke:Lv},rect:{fill:Lv},shape:{stroke:Lv},symbol:{stroke:Lv},circle:{fill:Lv},background:"#fff",padding:{top:10,right:10,bottom:10,left:10},style:{"guide-label":{font:dO,fontSize:12},"guide-title":{font:dO,fontSize:12},"group-title":{font:dO,fontSize:12}},title:{font:dO,fontSize:14,fontWeight:"bold",dy:-3,anchor:"start"},axis:{gridColor:_ve,tickColor:_ve,domain:!1,grid:!0},range:{category:["#4285F4","#DB4437","#F4B400","#0F9D58","#AB47BC","#00ACC1","#FF7043","#9E9D24","#5C6BC0","#F06292","#00796B","#C2185B"],heatmap:["#c6dafc","#5e97f6","#2a56c6"]}},Ese=e=>e*(1/3+1),wve=Ese(9),Eve=Ese(10),xve=Ese(12),IA="Segoe UI",Sve="wf_standard-font, helvetica, arial, sans-serif",Tve="#252423",kA="#605E5C",Ave="transparent",Acn="#C8C6C4",yf="#118DFF",Ccn="#12239E",Icn="#E66C37",kcn="#6B007B",Rcn="#E044A7",Ncn="#744EC2",Pcn="#D9B300",Ocn="#D64550",FBe=yf,jBe="#DEEFFF",Cve=[jBe,FBe],Dcn=[jBe,"#c7e4ff","#b0d9ff","#9aceff","#83c3ff","#6cb9ff","#55aeff","#3fa3ff","#2898ff",FBe],$cn={view:{stroke:Ave},background:Ave,font:IA,header:{titleFont:Sve,titleFontSize:xve,titleColor:Tve,labelFont:IA,labelFontSize:Eve,labelColor:kA},axis:{ticks:!1,grid:!1,domain:!1,labelColor:kA,labelFontSize:wve,titleFont:Sve,titleColor:Tve,titleFontSize:xve,titleFontWeight:"normal"},axisQuantitative:{tickCount:3,grid:!0,gridColor:Acn,gridDash:[1,5],labelFlush:!1},axisBand:{tickExtra:!0},axisX:{labelPadding:5},axisY:{labelPadding:10},bar:{fill:yf},line:{stroke:yf,strokeWidth:3,strokeCap:"round",strokeJoin:"round"},text:{font:IA,fontSize:wve,fill:kA},arc:{fill:yf},area:{fill:yf,line:!0,opacity:.6},path:{stroke:yf},rect:{fill:yf},point:{fill:yf,filled:!0,size:75},shape:{stroke:yf},symbol:{fill:yf,strokeWidth:1.5,size:50},legend:{titleFont:IA,titleFontWeight:"bold",titleColor:kA,labelFont:IA,labelFontSize:Eve,labelColor:kA,symbolType:"circle",symbolSize:75},range:{category:[yf,Ccn,Icn,kcn,Rcn,Ncn,Pcn,Ocn],diverging:Cve,heatmap:Cve,ordinal:Dcn}},kU='IBM Plex Sans,system-ui,-apple-system,BlinkMacSystemFont,".sfnstext-regular",sans-serif',Mcn='IBM Plex Sans Condensed, system-ui, -apple-system, BlinkMacSystemFont, ".SFNSText-Regular", sans-serif',RU=400,hO={textPrimary:{g90:"#f4f4f4",g100:"#f4f4f4",white:"#161616",g10:"#161616"},textSecondary:{g90:"#c6c6c6",g100:"#c6c6c6",white:"#525252",g10:"#525252"},layerAccent01:{white:"#e0e0e0",g10:"#e0e0e0",g90:"#525252",g100:"#393939"},gridBg:{white:"#ffffff",g10:"#ffffff",g90:"#161616",g100:"#161616"}},Lcn=["#8a3ffc","#33b1ff","#007d79","#ff7eb6","#fa4d56","#fff1f1","#6fdc8c","#4589ff","#d12771","#d2a106","#08bdba","#bae6ff","#ba4e00","#d4bbff"],Fcn=["#6929c4","#1192e8","#005d5d","#9f1853","#fa4d56","#570408","#198038","#002d9c","#ee538b","#b28600","#009d9a","#012749","#8a3800","#a56eff"];function _j({theme:e,background:t}){const n=["white","g10"].includes(e)?"light":"dark",r=hO.gridBg[e],i=hO.textPrimary[e],s=hO.textSecondary[e],o=n==="dark"?Lcn:Fcn,a=n==="dark"?"#d4bbff":"#6929c4";return{background:t,arc:{fill:a},area:{fill:a},path:{stroke:a},rect:{fill:a},shape:{stroke:a},symbol:{stroke:a},circle:{fill:a},view:{fill:r,stroke:r},group:{fill:r},title:{color:i,anchor:"start",dy:-15,fontSize:16,font:kU,fontWeight:600},axis:{labelColor:s,labelFontSize:12,labelFont:Mcn,labelFontWeight:RU,titleColor:i,titleFontWeight:600,titleFontSize:12,grid:!0,gridColor:hO.layerAccent01[e],labelAngle:0},axisX:{titlePadding:10},axisY:{titlePadding:2.5},style:{"guide-label":{font:kU,fill:s,fontWeight:RU},"guide-title":{font:kU,fill:s,fontWeight:RU}},range:{category:o,diverging:["#750e13","#a2191f","#da1e28","#fa4d56","#ff8389","#ffb3b8","#ffd7d9","#fff1f1","#e5f6ff","#bae6ff","#82cfff","#33b1ff","#1192e8","#0072c3","#00539a","#003a6d"],heatmap:["#f6f2ff","#e8daff","#d4bbff","#be95ff","#a56eff","#8a3ffc","#6929c4","#491d8b","#31135e","#1c0f30"]}}}const jcn=_j({theme:"white",background:"#ffffff"}),Bcn=_j({theme:"g10",background:"#f4f4f4"}),Ucn=_j({theme:"g90",background:"#262626"}),zcn=_j({theme:"g100",background:"#161616"}),Vcn=acn.version,Hcn=Object.freeze(Object.defineProperty({__proto__:null,carbong10:Bcn,carbong100:zcn,carbong90:Ucn,carbonwhite:jcn,dark:ucn,excel:lcn,fivethirtyeight:dcn,ggplot2:hcn,googlecharts:Tcn,latimes:ycn,powerbi:$cn,quartz:vcn,urbaninstitute:Scn,version:Vcn,vox:bcn},Symbol.toStringTag,{value:"Module"}));function qcn(e,t,n,r){if(je(e))return`[${e.map(i=>t(mt(i)?i:Ive(i,n))).join(", ")}]`;if(gt(e)){let i="";const{title:s,image:o,...a}=e;s&&(i+=`<h2>${t(s)}</h2>`),o&&(i+=`<img src="${new URL(t(o),r||location.href).href}">`);const u=Object.keys(a);if(u.length>0){i+="<table>";for(const l of u){let c=a[l];c!==void 0&&(gt(c)&&(c=Ive(c,n)),i+=`<tr><td class="key">${t(l)}</td><td class="value">${t(c)}</td></tr>`)}i+="</table>"}return i||"{}"}return t(e)}function Wcn(e){const t=[];return function(n,r){if(typeof r!="object"||r===null)return r;const i=t.indexOf(this)+1;return t.length=i,t.length>e?"[Object]":t.indexOf(r)>=0?"[Circular]":(t.push(r),r)}}function Ive(e,t){return JSON.stringify(e,Wcn(t))}var Gcn=`#vg-tooltip-element {
  visibility: hidden;
  padding: 8px;
  position: fixed;
  z-index: 1000;
  font-family: sans-serif;
  font-size: 11px;
  border-radius: 3px;
  box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.1);
  /* The default theme is the light theme. */
  background-color: rgba(255, 255, 255, 0.95);
  border: 1px solid #d9d9d9;
  color: black;
}
#vg-tooltip-element.visible {
  visibility: visible;
}
#vg-tooltip-element h2 {
  margin-top: 0;
  margin-bottom: 10px;
  font-size: 13px;
}
#vg-tooltip-element table {
  border-spacing: 0;
}
#vg-tooltip-element table tr {
  border: none;
}
#vg-tooltip-element table tr td {
  overflow: hidden;
  text-overflow: ellipsis;
  padding-top: 2px;
  padding-bottom: 2px;
}
#vg-tooltip-element table tr td.key {
  color: #808080;
  max-width: 150px;
  text-align: right;
  padding-right: 4px;
}
#vg-tooltip-element table tr td.value {
  display: block;
  max-width: 300px;
  max-height: 7em;
  text-align: left;
}
#vg-tooltip-element.dark-theme {
  background-color: rgba(32, 32, 32, 0.9);
  border: 1px solid #f5f5f5;
  color: white;
}
#vg-tooltip-element.dark-theme td.key {
  color: #bfbfbf;
}
`;const BBe="vg-tooltip-element",Ycn={offsetX:10,offsetY:10,id:BBe,styleId:"vega-tooltip-style",theme:"light",disableDefaultStyle:!1,sanitize:Kcn,maxDepth:2,formatTooltip:qcn,baseURL:""};function Kcn(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;")}function Xcn(e){if(!/^[A-Za-z]+[-:.\w]*$/.test(e))throw new Error("Invalid HTML ID");return Gcn.toString().replace(BBe,e)}function Qcn(e,t,n,r){let i=e.clientX+n;i+t.width>window.innerWidth&&(i=+e.clientX-n-t.width);let s=e.clientY+r;return s+t.height>window.innerHeight&&(s=+e.clientY-r-t.height),{x:i,y:s}}class Jcn{constructor(t){this.options={...Ycn,...t};const n=this.options.id;if(this.el=null,this.call=this.tooltipHandler.bind(this),!this.options.disableDefaultStyle&&!document.getElementById(this.options.styleId)){const r=document.createElement("style");r.setAttribute("id",this.options.styleId),r.innerHTML=Xcn(n);const i=document.head;i.childNodes.length>0?i.insertBefore(r,i.childNodes[0]):i.appendChild(r)}}tooltipHandler(t,n,r,i){if(this.el=document.getElementById(this.options.id),this.el||(this.el=document.createElement("div"),this.el.setAttribute("id",this.options.id),this.el.classList.add("vg-tooltip"),(document.fullscreenElement??document.body).appendChild(this.el)),i==null||i===""){this.el.classList.remove("visible",`${this.options.theme}-theme`);return}this.el.innerHTML=this.options.formatTooltip(i,this.options.sanitize,this.options.maxDepth,this.options.baseURL),this.el.classList.add("visible",`${this.options.theme}-theme`);const{x:s,y:o}=Qcn(n,this.el.getBoundingClientRect(),this.options.offsetX,this.options.offsetY);this.el.style.top=`${o}px`,this.el.style.left=`${s}px`}}var NU={};function Zcn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var PU,kve;function efn(){return kve||(kve=1,PU=function(e){e.prototype[Symbol.iterator]=function*(){for(let t=this.head;t;t=t.next)yield t.value}}),PU}var tfn=br;br.Node=Bb;br.create=br;function br(e){var t=this;if(t instanceof br||(t=new br),t.tail=null,t.head=null,t.length=0,e&&typeof e.forEach=="function")e.forEach(function(i){t.push(i)});else if(arguments.length>0)for(var n=0,r=arguments.length;n<r;n++)t.push(arguments[n]);return t}br.prototype.removeNode=function(e){if(e.list!==this)throw new Error("removing node which does not belong to this list");var t=e.next,n=e.prev;return t&&(t.prev=n),n&&(n.next=t),e===this.head&&(this.head=t),e===this.tail&&(this.tail=n),e.list.length--,e.next=null,e.prev=null,e.list=null,t};br.prototype.unshiftNode=function(e){if(e!==this.head){e.list&&e.list.removeNode(e);var t=this.head;e.list=this,e.next=t,t&&(t.prev=e),this.head=e,this.tail||(this.tail=e),this.length++}};br.prototype.pushNode=function(e){if(e!==this.tail){e.list&&e.list.removeNode(e);var t=this.tail;e.list=this,e.prev=t,t&&(t.next=e),this.tail=e,this.head||(this.head=e),this.length++}};br.prototype.push=function(){for(var e=0,t=arguments.length;e<t;e++)rfn(this,arguments[e]);return this.length};br.prototype.unshift=function(){for(var e=0,t=arguments.length;e<t;e++)ifn(this,arguments[e]);return this.length};br.prototype.pop=function(){if(this.tail){var e=this.tail.value;return this.tail=this.tail.prev,this.tail?this.tail.next=null:this.head=null,this.length--,e}};br.prototype.shift=function(){if(this.head){var e=this.head.value;return this.head=this.head.next,this.head?this.head.prev=null:this.tail=null,this.length--,e}};br.prototype.forEach=function(e,t){t=t||this;for(var n=this.head,r=0;n!==null;r++)e.call(t,n.value,r,this),n=n.next};br.prototype.forEachReverse=function(e,t){t=t||this;for(var n=this.tail,r=this.length-1;n!==null;r--)e.call(t,n.value,r,this),n=n.prev};br.prototype.get=function(e){for(var t=0,n=this.head;n!==null&&t<e;t++)n=n.next;if(t===e&&n!==null)return n.value};br.prototype.getReverse=function(e){for(var t=0,n=this.tail;n!==null&&t<e;t++)n=n.prev;if(t===e&&n!==null)return n.value};br.prototype.map=function(e,t){t=t||this;for(var n=new br,r=this.head;r!==null;)n.push(e.call(t,r.value,this)),r=r.next;return n};br.prototype.mapReverse=function(e,t){t=t||this;for(var n=new br,r=this.tail;r!==null;)n.push(e.call(t,r.value,this)),r=r.prev;return n};br.prototype.reduce=function(e,t){var n,r=this.head;if(arguments.length>1)n=t;else if(this.head)r=this.head.next,n=this.head.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=0;r!==null;i++)n=e(n,r.value,i),r=r.next;return n};br.prototype.reduceReverse=function(e,t){var n,r=this.tail;if(arguments.length>1)n=t;else if(this.tail)r=this.tail.prev,n=this.tail.value;else throw new TypeError("Reduce of empty list with no initial value");for(var i=this.length-1;r!==null;i--)n=e(n,r.value,i),r=r.prev;return n};br.prototype.toArray=function(){for(var e=new Array(this.length),t=0,n=this.head;n!==null;t++)e[t]=n.value,n=n.next;return e};br.prototype.toArrayReverse=function(){for(var e=new Array(this.length),t=0,n=this.tail;n!==null;t++)e[t]=n.value,n=n.prev;return e};br.prototype.slice=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new br;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(;i!==null&&r<t;r++,i=i.next)n.push(i.value);return n};br.prototype.sliceReverse=function(e,t){t=t||this.length,t<0&&(t+=this.length),e=e||0,e<0&&(e+=this.length);var n=new br;if(t<e||t<0)return n;e<0&&(e=0),t>this.length&&(t=this.length);for(var r=this.length,i=this.tail;i!==null&&r>t;r--)i=i.prev;for(;i!==null&&r>e;r--,i=i.prev)n.push(i.value);return n};br.prototype.splice=function(e,t,...n){e>this.length&&(e=this.length-1),e<0&&(e=this.length+e);for(var r=0,i=this.head;i!==null&&r<e;r++)i=i.next;for(var s=[],r=0;i&&r<t;r++)s.push(i.value),i=this.removeNode(i);i===null&&(i=this.tail),i!==this.head&&i!==this.tail&&(i=i.prev);for(var r=0;r<n.length;r++)i=nfn(this,i,n[r]);return s};br.prototype.reverse=function(){for(var e=this.head,t=this.tail,n=e;n!==null;n=n.prev){var r=n.prev;n.prev=n.next,n.next=r}return this.head=t,this.tail=e,this};function nfn(e,t,n){var r=t===e.head?new Bb(n,null,t,e):new Bb(n,t,t.next,e);return r.next===null&&(e.tail=r),r.prev===null&&(e.head=r),e.length++,r}function rfn(e,t){e.tail=new Bb(t,e.tail,null,e),e.head||(e.head=e.tail),e.length++}function ifn(e,t){e.head=new Bb(t,null,e.head,e),e.tail||(e.tail=e.head),e.length++}function Bb(e,t,n,r){if(!(this instanceof Bb))return new Bb(e,t,n,r);this.list=r,this.value=e,t?(t.next=this,this.prev=t):this.prev=null,n?(n.prev=this,this.next=n):this.next=null}try{efn()(br)}catch{}const sfn=tfn,h1=Symbol("max"),jp=Symbol("length"),aw=Symbol("lengthCalculator"),C2=Symbol("allowStale"),D1=Symbol("maxAge"),Dp=Symbol("dispose"),Rve=Symbol("noDisposeOnSet"),Qs=Symbol("lruList"),vf=Symbol("cache"),UBe=Symbol("updateAgeOnGet"),OU=()=>1;class ofn{constructor(t){if(typeof t=="number"&&(t={max:t}),t||(t={}),t.max&&(typeof t.max!="number"||t.max<0))throw new TypeError("max must be a non-negative number");this[h1]=t.max||1/0;const n=t.length||OU;if(this[aw]=typeof n!="function"?OU:n,this[C2]=t.stale||!1,t.maxAge&&typeof t.maxAge!="number")throw new TypeError("maxAge must be a number");this[D1]=t.maxAge||0,this[Dp]=t.dispose,this[Rve]=t.noDisposeOnSet||!1,this[UBe]=t.updateAgeOnGet||!1,this.reset()}set max(t){if(typeof t!="number"||t<0)throw new TypeError("max must be a non-negative number");this[h1]=t||1/0,RA(this)}get max(){return this[h1]}set allowStale(t){this[C2]=!!t}get allowStale(){return this[C2]}set maxAge(t){if(typeof t!="number")throw new TypeError("maxAge must be a non-negative number");this[D1]=t,RA(this)}get maxAge(){return this[D1]}set lengthCalculator(t){typeof t!="function"&&(t=OU),t!==this[aw]&&(this[aw]=t,this[jp]=0,this[Qs].forEach(n=>{n.length=this[aw](n.value,n.key),this[jp]+=n.length})),RA(this)}get lengthCalculator(){return this[aw]}get length(){return this[jp]}get itemCount(){return this[Qs].length}rforEach(t,n){n=n||this;for(let r=this[Qs].tail;r!==null;){const i=r.prev;Nve(this,t,r,n),r=i}}forEach(t,n){n=n||this;for(let r=this[Qs].head;r!==null;){const i=r.next;Nve(this,t,r,n),r=i}}keys(){return this[Qs].toArray().map(t=>t.key)}values(){return this[Qs].toArray().map(t=>t.value)}reset(){this[Dp]&&this[Qs]&&this[Qs].length&&this[Qs].forEach(t=>this[Dp](t.key,t.value)),this[vf]=new Map,this[Qs]=new sfn,this[jp]=0}dump(){return this[Qs].map(t=>DL(this,t)?!1:{k:t.key,v:t.value,e:t.now+(t.maxAge||0)}).toArray().filter(t=>t)}dumpLru(){return this[Qs]}set(t,n,r){if(r=r||this[D1],r&&typeof r!="number")throw new TypeError("maxAge must be a number");const i=r?Date.now():0,s=this[aw](n,t);if(this[vf].has(t)){if(s>this[h1])return UE(this,this[vf].get(t)),!1;const u=this[vf].get(t).value;return this[Dp]&&(this[Rve]||this[Dp](t,u.value)),u.now=i,u.maxAge=r,u.value=n,this[jp]+=s-u.length,u.length=s,this.get(t),RA(this),!0}const o=new afn(t,n,s,i,r);return o.length>this[h1]?(this[Dp]&&this[Dp](t,n),!1):(this[jp]+=o.length,this[Qs].unshift(o),this[vf].set(t,this[Qs].head),RA(this),!0)}has(t){if(!this[vf].has(t))return!1;const n=this[vf].get(t).value;return!DL(this,n)}get(t){return DU(this,t,!0)}peek(t){return DU(this,t,!1)}pop(){const t=this[Qs].tail;return t?(UE(this,t),t.value):null}del(t){UE(this,this[vf].get(t))}load(t){this.reset();const n=Date.now();for(let r=t.length-1;r>=0;r--){const i=t[r],s=i.e||0;if(s===0)this.set(i.k,i.v);else{const o=s-n;o>0&&this.set(i.k,i.v,o)}}}prune(){this[vf].forEach((t,n)=>DU(this,n,!1))}}const DU=(e,t,n)=>{const r=e[vf].get(t);if(r){const i=r.value;if(DL(e,i)){if(UE(e,r),!e[C2])return}else n&&(e[UBe]&&(r.value.now=Date.now()),e[Qs].unshiftNode(r));return i.value}},DL=(e,t)=>{if(!t||!t.maxAge&&!e[D1])return!1;const n=Date.now()-t.now;return t.maxAge?n>t.maxAge:e[D1]&&n>e[D1]},RA=e=>{if(e[jp]>e[h1])for(let t=e[Qs].tail;e[jp]>e[h1]&&t!==null;){const n=t.prev;UE(e,t),t=n}},UE=(e,t)=>{if(t){const n=t.value;e[Dp]&&e[Dp](n.key,n.value),e[jp]-=n.length,e[vf].delete(n.key),e[Qs].removeNode(t)}};class afn{constructor(t,n,r,i,s){this.key=t,this.value=n,this.length=r,this.now=i,this.maxAge=s||0}}const Nve=(e,t,n,r)=>{let i=n.value;DL(e,i)&&(UE(e,n),e[C2]||(i=void 0)),i&&t.call(r,i.value,i.key,e)};var ufn=ofn;const lfn=Object.freeze({loose:!0}),cfn=Object.freeze({}),ffn=e=>e?typeof e!="object"?lfn:e:cfn;var xse=ffn,kW={exports:{}};const dfn="2.0.0",zBe=256,hfn=Number.MAX_SAFE_INTEGER||9007199254740991,pfn=16,mfn=zBe-6,gfn=["major","premajor","minor","preminor","patch","prepatch","prerelease"];var Sse={MAX_LENGTH:zBe,MAX_SAFE_COMPONENT_LENGTH:pfn,MAX_SAFE_BUILD_LENGTH:mfn,MAX_SAFE_INTEGER:hfn,RELEASE_TYPES:gfn,SEMVER_SPEC_VERSION:dfn,FLAG_INCLUDE_PRERELEASE:1,FLAG_LOOSE:2};const yfn=typeof process=="object"&&NU&&NU.NODE_DEBUG&&/\bsemver\b/i.test(NU.NODE_DEBUG)?(...e)=>console.error("SEMVER",...e):()=>{};var wj=yfn;(function(e,t){const{MAX_SAFE_COMPONENT_LENGTH:n,MAX_SAFE_BUILD_LENGTH:r,MAX_LENGTH:i}=Sse,s=wj;t=e.exports={};const o=t.re=[],a=t.safeRe=[],u=t.src=[],l=t.t={};let c=0;const f="[a-zA-Z0-9-]",d=[["\\s",1],["\\d",i],[f,r]],h=m=>{for(const[g,y]of d)m=m.split(`${g}*`).join(`${g}{0,${y}}`).split(`${g}+`).join(`${g}{1,${y}}`);return m},p=(m,g,y)=>{const v=h(g),b=c++;s(m,b,g),l[m]=b,u[b]=g,o[b]=new RegExp(g,y?"g":void 0),a[b]=new RegExp(v,y?"g":void 0)};p("NUMERICIDENTIFIER","0|[1-9]\\d*"),p("NUMERICIDENTIFIERLOOSE","\\d+"),p("NONNUMERICIDENTIFIER",`\\d*[a-zA-Z-]${f}*`),p("MAINVERSION",`(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})\\.(${u[l.NUMERICIDENTIFIER]})`),p("MAINVERSIONLOOSE",`(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})\\.(${u[l.NUMERICIDENTIFIERLOOSE]})`),p("PRERELEASEIDENTIFIER",`(?:${u[l.NUMERICIDENTIFIER]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASEIDENTIFIERLOOSE",`(?:${u[l.NUMERICIDENTIFIERLOOSE]}|${u[l.NONNUMERICIDENTIFIER]})`),p("PRERELEASE",`(?:-(${u[l.PRERELEASEIDENTIFIER]}(?:\\.${u[l.PRERELEASEIDENTIFIER]})*))`),p("PRERELEASELOOSE",`(?:-?(${u[l.PRERELEASEIDENTIFIERLOOSE]}(?:\\.${u[l.PRERELEASEIDENTIFIERLOOSE]})*))`),p("BUILDIDENTIFIER",`${f}+`),p("BUILD",`(?:\\+(${u[l.BUILDIDENTIFIER]}(?:\\.${u[l.BUILDIDENTIFIER]})*))`),p("FULLPLAIN",`v?${u[l.MAINVERSION]}${u[l.PRERELEASE]}?${u[l.BUILD]}?`),p("FULL",`^${u[l.FULLPLAIN]}$`),p("LOOSEPLAIN",`[v=\\s]*${u[l.MAINVERSIONLOOSE]}${u[l.PRERELEASELOOSE]}?${u[l.BUILD]}?`),p("LOOSE",`^${u[l.LOOSEPLAIN]}$`),p("GTLT","((?:<|>)?=?)"),p("XRANGEIDENTIFIERLOOSE",`${u[l.NUMERICIDENTIFIERLOOSE]}|x|X|\\*`),p("XRANGEIDENTIFIER",`${u[l.NUMERICIDENTIFIER]}|x|X|\\*`),p("XRANGEPLAIN",`[v=\\s]*(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:\\.(${u[l.XRANGEIDENTIFIER]})(?:${u[l.PRERELEASE]})?${u[l.BUILD]}?)?)?`),p("XRANGEPLAINLOOSE",`[v=\\s]*(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:\\.(${u[l.XRANGEIDENTIFIERLOOSE]})(?:${u[l.PRERELEASELOOSE]})?${u[l.BUILD]}?)?)?`),p("XRANGE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAIN]}$`),p("XRANGELOOSE",`^${u[l.GTLT]}\\s*${u[l.XRANGEPLAINLOOSE]}$`),p("COERCEPLAIN",`(^|[^\\d])(\\d{1,${n}})(?:\\.(\\d{1,${n}}))?(?:\\.(\\d{1,${n}}))?`),p("COERCE",`${u[l.COERCEPLAIN]}(?:$|[^\\d])`),p("COERCEFULL",u[l.COERCEPLAIN]+`(?:${u[l.PRERELEASE]})?(?:${u[l.BUILD]})?(?:$|[^\\d])`),p("COERCERTL",u[l.COERCE],!0),p("COERCERTLFULL",u[l.COERCEFULL],!0),p("LONETILDE","(?:~>?)"),p("TILDETRIM",`(\\s*)${u[l.LONETILDE]}\\s+`,!0),t.tildeTrimReplace="$1~",p("TILDE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAIN]}$`),p("TILDELOOSE",`^${u[l.LONETILDE]}${u[l.XRANGEPLAINLOOSE]}$`),p("LONECARET","(?:\\^)"),p("CARETTRIM",`(\\s*)${u[l.LONECARET]}\\s+`,!0),t.caretTrimReplace="$1^",p("CARET",`^${u[l.LONECARET]}${u[l.XRANGEPLAIN]}$`),p("CARETLOOSE",`^${u[l.LONECARET]}${u[l.XRANGEPLAINLOOSE]}$`),p("COMPARATORLOOSE",`^${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]})$|^$`),p("COMPARATOR",`^${u[l.GTLT]}\\s*(${u[l.FULLPLAIN]})$|^$`),p("COMPARATORTRIM",`(\\s*)${u[l.GTLT]}\\s*(${u[l.LOOSEPLAIN]}|${u[l.XRANGEPLAIN]})`,!0),t.comparatorTrimReplace="$1$2$3",p("HYPHENRANGE",`^\\s*(${u[l.XRANGEPLAIN]})\\s+-\\s+(${u[l.XRANGEPLAIN]})\\s*$`),p("HYPHENRANGELOOSE",`^\\s*(${u[l.XRANGEPLAINLOOSE]})\\s+-\\s+(${u[l.XRANGEPLAINLOOSE]})\\s*$`),p("STAR","(<|>)?=?\\s*\\*"),p("GTE0","^\\s*>=\\s*0\\.0\\.0\\s*$"),p("GTE0PRE","^\\s*>=\\s*0\\.0\\.0-0\\s*$")})(kW,kW.exports);var Tse=kW.exports;const Pve=/^[0-9]+$/,VBe=(e,t)=>{const n=Pve.test(e),r=Pve.test(t);return n&&r&&(e=+e,t=+t),e===t?0:n&&!r?-1:r&&!n?1:e<t?-1:1},vfn=(e,t)=>VBe(t,e);var bfn={compareIdentifiers:VBe,rcompareIdentifiers:vfn};const pO=wj,{MAX_LENGTH:Ove,MAX_SAFE_INTEGER:mO}=Sse,{safeRe:Dve,t:$ve}=Tse,_fn=xse,{compareIdentifiers:uw}=bfn;let wfn=class Pd{constructor(t,n){if(n=_fn(n),t instanceof Pd){if(t.loose===!!n.loose&&t.includePrerelease===!!n.includePrerelease)return t;t=t.version}else if(typeof t!="string")throw new TypeError(`Invalid version. Must be a string. Got type "${typeof t}".`);if(t.length>Ove)throw new TypeError(`version is longer than ${Ove} characters`);pO("SemVer",t,n),this.options=n,this.loose=!!n.loose,this.includePrerelease=!!n.includePrerelease;const r=t.trim().match(n.loose?Dve[$ve.LOOSE]:Dve[$ve.FULL]);if(!r)throw new TypeError(`Invalid Version: ${t}`);if(this.raw=t,this.major=+r[1],this.minor=+r[2],this.patch=+r[3],this.major>mO||this.major<0)throw new TypeError("Invalid major version");if(this.minor>mO||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>mO||this.patch<0)throw new TypeError("Invalid patch version");r[4]?this.prerelease=r[4].split(".").map(i=>{if(/^[0-9]+$/.test(i)){const s=+i;if(s>=0&&s<mO)return s}return i}):this.prerelease=[],this.build=r[5]?r[5].split("."):[],this.format()}format(){return this.version=`${this.major}.${this.minor}.${this.patch}`,this.prerelease.length&&(this.version+=`-${this.prerelease.join(".")}`),this.version}toString(){return this.version}compare(t){if(pO("SemVer.compare",this.version,this.options,t),!(t instanceof Pd)){if(typeof t=="string"&&t===this.version)return 0;t=new Pd(t,this.options)}return t.version===this.version?0:this.compareMain(t)||this.comparePre(t)}compareMain(t){return t instanceof Pd||(t=new Pd(t,this.options)),uw(this.major,t.major)||uw(this.minor,t.minor)||uw(this.patch,t.patch)}comparePre(t){if(t instanceof Pd||(t=new Pd(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;let n=0;do{const r=this.prerelease[n],i=t.prerelease[n];if(pO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return uw(r,i)}while(++n)}compareBuild(t){t instanceof Pd||(t=new Pd(t,this.options));let n=0;do{const r=this.build[n],i=t.build[n];if(pO("prerelease compare",n,r,i),r===void 0&&i===void 0)return 0;if(i===void 0)return 1;if(r===void 0)return-1;if(r===i)continue;return uw(r,i)}while(++n)}inc(t,n,r){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",n,r);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",n,r);break;case"prepatch":this.prerelease.length=0,this.inc("patch",n,r),this.inc("pre",n,r);break;case"prerelease":this.prerelease.length===0&&this.inc("patch",n,r),this.inc("pre",n,r);break;case"major":(this.minor!==0||this.patch!==0||this.prerelease.length===0)&&this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":(this.patch!==0||this.prerelease.length===0)&&this.minor++,this.patch=0,this.prerelease=[];break;case"patch":this.prerelease.length===0&&this.patch++,this.prerelease=[];break;case"pre":{const i=Number(r)?1:0;if(!n&&r===!1)throw new Error("invalid increment argument: identifier is empty");if(this.prerelease.length===0)this.prerelease=[i];else{let s=this.prerelease.length;for(;--s>=0;)typeof this.prerelease[s]=="number"&&(this.prerelease[s]++,s=-2);if(s===-1){if(n===this.prerelease.join(".")&&r===!1)throw new Error("invalid increment argument: identifier already exists");this.prerelease.push(i)}}if(n){let s=[n,i];r===!1&&(s=[n]),uw(this.prerelease[0],n)===0?isNaN(this.prerelease[1])&&(this.prerelease=s):this.prerelease=s}break}default:throw new Error(`invalid increment argument: ${t}`)}return this.raw=this.format(),this.build.length&&(this.raw+=`+${this.build.join(".")}`),this}};var Ase=wfn;const Mve=Ase,Efn=(e,t,n)=>new Mve(e,n).compare(new Mve(t,n));var IT=Efn;const xfn=IT,Sfn=(e,t,n)=>xfn(e,t,n)===0;var Tfn=Sfn;const Afn=IT,Cfn=(e,t,n)=>Afn(e,t,n)!==0;var Ifn=Cfn;const kfn=IT,Rfn=(e,t,n)=>kfn(e,t,n)>0;var Nfn=Rfn;const Pfn=IT,Ofn=(e,t,n)=>Pfn(e,t,n)>=0;var Dfn=Ofn;const $fn=IT,Mfn=(e,t,n)=>$fn(e,t,n)<0;var Lfn=Mfn;const Ffn=IT,jfn=(e,t,n)=>Ffn(e,t,n)<=0;var Bfn=jfn;const Ufn=Tfn,zfn=Ifn,Vfn=Nfn,Hfn=Dfn,qfn=Lfn,Wfn=Bfn,Gfn=(e,t,n,r)=>{switch(t){case"===":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e===n;case"!==":return typeof e=="object"&&(e=e.version),typeof n=="object"&&(n=n.version),e!==n;case"":case"=":case"==":return Ufn(e,n,r);case"!=":return zfn(e,n,r);case">":return Vfn(e,n,r);case">=":return Hfn(e,n,r);case"<":return qfn(e,n,r);case"<=":return Wfn(e,n,r);default:throw new TypeError(`Invalid operator: ${t}`)}};var Yfn=Gfn,$U,Lve;function Kfn(){if(Lve)return $U;Lve=1;const e=Symbol("SemVer ANY");class t{static get ANY(){return e}constructor(c,f){if(f=n(f),c instanceof t){if(c.loose===!!f.loose)return c;c=c.value}c=c.trim().split(/\s+/).join(" "),o("comparator",c,f),this.options=f,this.loose=!!f.loose,this.parse(c),this.semver===e?this.value="":this.value=this.operator+this.semver.version,o("comp",this)}parse(c){const f=this.options.loose?r[i.COMPARATORLOOSE]:r[i.COMPARATOR],d=c.match(f);if(!d)throw new TypeError(`Invalid comparator: ${c}`);this.operator=d[1]!==void 0?d[1]:"",this.operator==="="&&(this.operator=""),d[2]?this.semver=new a(d[2],this.options.loose):this.semver=e}toString(){return this.value}test(c){if(o("Comparator.test",c,this.options.loose),this.semver===e||c===e)return!0;if(typeof c=="string")try{c=new a(c,this.options)}catch{return!1}return s(c,this.operator,this.semver,this.options)}intersects(c,f){if(!(c instanceof t))throw new TypeError("a Comparator is required");return this.operator===""?this.value===""?!0:new u(c.value,f).test(this.value):c.operator===""?c.value===""?!0:new u(this.value,f).test(c.semver):(f=n(f),f.includePrerelease&&(this.value==="<0.0.0-0"||c.value==="<0.0.0-0")||!f.includePrerelease&&(this.value.startsWith("<0.0.0")||c.value.startsWith("<0.0.0"))?!1:!!(this.operator.startsWith(">")&&c.operator.startsWith(">")||this.operator.startsWith("<")&&c.operator.startsWith("<")||this.semver.version===c.semver.version&&this.operator.includes("=")&&c.operator.includes("=")||s(this.semver,"<",c.semver,f)&&this.operator.startsWith(">")&&c.operator.startsWith("<")||s(this.semver,">",c.semver,f)&&this.operator.startsWith("<")&&c.operator.startsWith(">")))}}$U=t;const n=xse,{safeRe:r,t:i}=Tse,s=Yfn,o=wj,a=Ase,u=HBe();return $U}var MU,Fve;function HBe(){if(Fve)return MU;Fve=1;class e{constructor($,F){if(F=r(F),$ instanceof e)return $.loose===!!F.loose&&$.includePrerelease===!!F.includePrerelease?$:new e($.raw,F);if($ instanceof i)return this.raw=$.value,this.set=[[$]],this.format(),this;if(this.options=F,this.loose=!!F.loose,this.includePrerelease=!!F.includePrerelease,this.raw=$.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(M=>this.parseRange(M.trim())).filter(M=>M.length),!this.set.length)throw new TypeError(`Invalid SemVer Range: ${this.raw}`);if(this.set.length>1){const M=this.set[0];if(this.set=this.set.filter(B=>!p(B[0])),this.set.length===0)this.set=[M];else if(this.set.length>1){for(const B of this.set)if(B.length===1&&m(B[0])){this.set=[B];break}}}this.format()}format(){return this.range=this.set.map($=>$.join(" ").trim()).join("||").trim(),this.range}toString(){return this.range}parseRange($){const M=((this.options.includePrerelease&&d)|(this.options.loose&&h))+":"+$,B=n.get(M);if(B)return B;const U=this.options.loose,H=U?a[u.HYPHENRANGELOOSE]:a[u.HYPHENRANGE];$=$.replace(H,N(this.options.includePrerelease)),s("hyphen replace",$),$=$.replace(a[u.COMPARATORTRIM],l),s("comparator trim",$),$=$.replace(a[u.TILDETRIM],c),s("tilde trim",$),$=$.replace(a[u.CARETTRIM],f),s("caret trim",$);let P=$.split(" ").map(q=>y(q,this.options)).join(" ").split(/\s+/).map(q=>k(q,this.options));U&&(P=P.filter(q=>(s("loose invalid filter",q,this.options),!!q.match(a[u.COMPARATORLOOSE])))),s("range list",P);const z=new Map,W=P.map(q=>new i(q,this.options));for(const q of W){if(p(q))return[q];z.set(q.value,q)}z.size>1&&z.has("")&&z.delete("");const j=[...z.values()];return n.set(M,j),j}intersects($,F){if(!($ instanceof e))throw new TypeError("a Range is required");return this.set.some(M=>g(M,F)&&$.set.some(B=>g(B,F)&&M.every(U=>B.every(H=>U.intersects(H,F)))))}test($){if(!$)return!1;if(typeof $=="string")try{$=new o($,this.options)}catch{return!1}for(let F=0;F<this.set.length;F++)if(D(this.set[F],$,this.options))return!0;return!1}}MU=e;const t=ufn,n=new t({max:1e3}),r=xse,i=Kfn(),s=wj,o=Ase,{safeRe:a,t:u,comparatorTrimReplace:l,tildeTrimReplace:c,caretTrimReplace:f}=Tse,{FLAG_INCLUDE_PRERELEASE:d,FLAG_LOOSE:h}=Sse,p=O=>O.value==="<0.0.0-0",m=O=>O.value==="",g=(O,$)=>{let F=!0;const M=O.slice();let B=M.pop();for(;F&&M.length;)F=M.every(U=>B.intersects(U,$)),B=M.pop();return F},y=(O,$)=>(s("comp",O,$),O=E(O,$),s("caret",O),O=b(O,$),s("tildes",O),O=S(O,$),s("xrange",O),O=C(O,$),s("stars",O),O),v=O=>!O||O.toLowerCase()==="x"||O==="*",b=(O,$)=>O.trim().split(/\s+/).map(F=>w(F,$)).join(" "),w=(O,$)=>{const F=$.loose?a[u.TILDELOOSE]:a[u.TILDE];return O.replace(F,(M,B,U,H,P)=>{s("tilde",O,M,B,U,H,P);let z;return v(B)?z="":v(U)?z=`>=${B}.0.0 <${+B+1}.0.0-0`:v(H)?z=`>=${B}.${U}.0 <${B}.${+U+1}.0-0`:P?(s("replaceTilde pr",P),z=`>=${B}.${U}.${H}-${P} <${B}.${+U+1}.0-0`):z=`>=${B}.${U}.${H} <${B}.${+U+1}.0-0`,s("tilde return",z),z})},E=(O,$)=>O.trim().split(/\s+/).map(F=>T(F,$)).join(" "),T=(O,$)=>{s("caret",O,$);const F=$.loose?a[u.CARETLOOSE]:a[u.CARET],M=$.includePrerelease?"-0":"";return O.replace(F,(B,U,H,P,z)=>{s("caret",O,B,U,H,P,z);let W;return v(U)?W="":v(H)?W=`>=${U}.0.0${M} <${+U+1}.0.0-0`:v(P)?U==="0"?W=`>=${U}.${H}.0${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.0${M} <${+U+1}.0.0-0`:z?(s("replaceCaret pr",z),U==="0"?H==="0"?W=`>=${U}.${H}.${P}-${z} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}-${z} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P}-${z} <${+U+1}.0.0-0`):(s("no pr"),U==="0"?H==="0"?W=`>=${U}.${H}.${P}${M} <${U}.${H}.${+P+1}-0`:W=`>=${U}.${H}.${P}${M} <${U}.${+H+1}.0-0`:W=`>=${U}.${H}.${P} <${+U+1}.0.0-0`),s("caret return",W),W})},S=(O,$)=>(s("replaceXRanges",O,$),O.split(/\s+/).map(F=>A(F,$)).join(" ")),A=(O,$)=>{O=O.trim();const F=$.loose?a[u.XRANGELOOSE]:a[u.XRANGE];return O.replace(F,(M,B,U,H,P,z)=>{s("xRange",O,M,B,U,H,P,z);const W=v(U),j=W||v(H),q=j||v(P),G=q;return B==="="&&G&&(B=""),z=$.includePrerelease?"-0":"",W?B===">"||B==="<"?M="<0.0.0-0":M="*":B&&G?(j&&(H=0),P=0,B===">"?(B=">=",j?(U=+U+1,H=0,P=0):(H=+H+1,P=0)):B==="<="&&(B="<",j?U=+U+1:H=+H+1),B==="<"&&(z="-0"),M=`${B+U}.${H}.${P}${z}`):j?M=`>=${U}.0.0${z} <${+U+1}.0.0-0`:q&&(M=`>=${U}.${H}.0${z} <${U}.${+H+1}.0-0`),s("xRange return",M),M})},C=(O,$)=>(s("replaceStars",O,$),O.trim().replace(a[u.STAR],"")),k=(O,$)=>(s("replaceGTE0",O,$),O.trim().replace(a[$.includePrerelease?u.GTE0PRE:u.GTE0],"")),N=O=>($,F,M,B,U,H,P,z,W,j,q,G,ne)=>(v(M)?F="":v(B)?F=`>=${M}.0.0${O?"-0":""}`:v(U)?F=`>=${M}.${B}.0${O?"-0":""}`:H?F=`>=${F}`:F=`>=${F}${O?"-0":""}`,v(W)?z="":v(j)?z=`<${+W+1}.0.0-0`:v(q)?z=`<${W}.${+j+1}.0-0`:G?z=`<=${W}.${j}.${q}-${G}`:O?z=`<${W}.${j}.${+q+1}-0`:z=`<=${z}`,`${F} ${z}`.trim()),D=(O,$,F)=>{for(let M=0;M<O.length;M++)if(!O[M].test($))return!1;if($.prerelease.length&&!F.includePrerelease){for(let M=0;M<O.length;M++)if(s(O[M].semver),O[M].semver!==i.ANY&&O[M].semver.prerelease.length>0){const B=O[M].semver;if(B.major===$.major&&B.minor===$.minor&&B.patch===$.patch)return!0}return!1}return!0};return MU}const Xfn=HBe(),Qfn=(e,t,n)=>{try{t=new Xfn(t,n)}catch{return!1}return t.test(e)};var Jfn=Qfn,qBe=Zcn(Jfn);function Zfn(e,t,n){const r=e.open(t),i=1e4,s=250,{origin:o}=new URL(t);let a=~~(i/s);function u(c){c.source===r&&(a=0,e.removeEventListener("message",u,!1))}e.addEventListener("message",u,!1);function l(){a<=0||(r.postMessage(n,o),setTimeout(l,s),a-=1)}setTimeout(l,s)}var edn=`.vega-embed {
  position: relative;
  display: inline-block;
  box-sizing: border-box;
}
.vega-embed.has-actions {
  padding-right: 38px;
}
.vega-embed details:not([open]) > :not(summary) {
  display: none !important;
}
.vega-embed summary {
  list-style: none;
  position: absolute;
  top: 0;
  right: 0;
  padding: 6px;
  z-index: 1000;
  background: white;
  box-shadow: 1px 1px 3px rgba(0, 0, 0, 0.1);
  color: #1b1e23;
  border: 1px solid #aaa;
  border-radius: 999px;
  opacity: 0.2;
  transition: opacity 0.4s ease-in;
  cursor: pointer;
  line-height: 0px;
}
.vega-embed summary::-webkit-details-marker {
  display: none;
}
.vega-embed summary:active {
  box-shadow: #aaa 0px 0px 0px 1px inset;
}
.vega-embed summary svg {
  width: 14px;
  height: 14px;
}
.vega-embed details[open] summary {
  opacity: 0.7;
}
.vega-embed:hover summary, .vega-embed:focus-within summary {
  opacity: 1 !important;
  transition: opacity 0.2s ease;
}
.vega-embed .vega-actions {
  position: absolute;
  z-index: 1001;
  top: 35px;
  right: -9px;
  display: flex;
  flex-direction: column;
  padding-bottom: 8px;
  padding-top: 8px;
  border-radius: 4px;
  box-shadow: 0 2px 8px 0 rgba(0, 0, 0, 0.2);
  border: 1px solid #d9d9d9;
  background: white;
  animation-duration: 0.15s;
  animation-name: scale-in;
  animation-timing-function: cubic-bezier(0.2, 0, 0.13, 1.5);
  text-align: left;
}
.vega-embed .vega-actions a {
  padding: 8px 16px;
  font-family: sans-serif;
  font-size: 14px;
  font-weight: 600;
  white-space: nowrap;
  color: #434a56;
  text-decoration: none;
}
.vega-embed .vega-actions a:hover, .vega-embed .vega-actions a:focus {
  background-color: #f7f7f9;
  color: black;
}
.vega-embed .vega-actions::before, .vega-embed .vega-actions::after {
  content: "";
  display: inline-block;
  position: absolute;
}
.vega-embed .vega-actions::before {
  left: auto;
  right: 14px;
  top: -16px;
  border: 8px solid rgba(0, 0, 0, 0);
  border-bottom-color: #d9d9d9;
}
.vega-embed .vega-actions::after {
  left: auto;
  right: 15px;
  top: -14px;
  border: 7px solid rgba(0, 0, 0, 0);
  border-bottom-color: #fff;
}
.vega-embed .chart-wrapper.fit-x {
  width: 100%;
}
.vega-embed .chart-wrapper.fit-y {
  height: 100%;
}

.vega-embed-wrapper {
  max-width: 100%;
  overflow: auto;
  padding-right: 14px;
}

@keyframes scale-in {
  from {
    opacity: 0;
    transform: scale(0.6);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}
`;function WBe(e,...t){for(const n of t)tdn(e,n);return e}function tdn(e,t){for(const n of Object.keys(t))cT(e,n,t[n],!0)}const _f=Fen;let yk=Vln;const gO=typeof window<"u"?window:void 0;var Gve;yk===void 0&&((Gve=gO==null?void 0:gO.vl)!=null&&Gve.compile)&&(yk=gO.vl);const ndn={export:{svg:!0,png:!0},source:!0,compiled:!0,editor:!0},rdn={CLICK_TO_VIEW_ACTIONS:"Click to view actions",COMPILED_ACTION:"View Compiled Vega",EDITOR_ACTION:"Open in Vega Editor",PNG_ACTION:"Save as PNG",SOURCE_ACTION:"View Source",SVG_ACTION:"Save as SVG"},TC={vega:"Vega","vega-lite":"Vega-Lite"},$L={vega:_f.version,"vega-lite":yk?yk.version:"not available"},idn={vega:e=>e,"vega-lite":(e,t)=>yk.compile(e,{config:t}).spec},sdn=`
<svg viewBox="0 0 16 16" fill="currentColor" stroke="none" stroke-width="1" stroke-linecap="round" stroke-linejoin="round">
  <circle r="2" cy="8" cx="2"></circle>
  <circle r="2" cy="8" cx="8"></circle>
  <circle r="2" cy="8" cx="14"></circle>
</svg>`,odn="chart-wrapper";function adn(e){return typeof e=="function"}function jve(e,t,n,r){const i=`<html><head>${t}</head><body><pre><code class="json">`,s=`</code></pre>${n}</body></html>`,o=window.open("");o.document.write(i+e+s),o.document.title=`${TC[r]} JSON Source`}function udn(e,t){if(e.$schema){const n=LBe(e.$schema);t&&t!==n.library&&console.warn(`The given visualization spec is written in ${TC[n.library]}, but mode argument sets ${TC[t]??t}.`);const r=n.library;return qBe($L[r],`^${n.version.slice(1)}`)||console.warn(`The input spec uses ${TC[r]} ${n.version}, but the current version of ${TC[r]} is v${$L[r]}.`),r}return"mark"in e||"encoding"in e||"layer"in e||"hconcat"in e||"vconcat"in e||"facet"in e||"repeat"in e?"vega-lite":"marks"in e||"signals"in e||"scales"in e||"axes"in e?"vega":t??"vega"}function GBe(e){return!!(e&&"load"in e)}function Bve(e){return GBe(e)?e:_f.loader(e)}function ldn(e){var n;const t=((n=e.usermeta)==null?void 0:n.embedOptions)??{};return mt(t.defaultStyle)&&(t.defaultStyle=!1),t}async function cdn(e,t,n={}){let r,i;mt(t)?(i=Bve(n.loader),r=JSON.parse(await i.load(t))):r=t;const s=ldn(r),o=s.loader;(!i||o)&&(i=Bve(n.loader??o));const a=await Uve(s,i),u=await Uve(n,i),l={...WBe(u,a),config:lT(u.config??{},a.config??{})};return await ddn(e,r,l,i)}async function Uve(e,t){const n=mt(e.config)?JSON.parse(await t.load(e.config)):e.config??{},r=mt(e.patch)?JSON.parse(await t.load(e.patch)):e.patch;return{...e,...r?{patch:r}:{},...n?{config:n}:{}}}function fdn(e){const t=e.getRootNode?e.getRootNode():document;return t instanceof ShadowRoot?{root:t,rootContainer:t}:{root:document,rootContainer:document.head??document.body}}async function ddn(e,t,n={},r){const i=n.theme?lT(Hcn[n.theme],n.config??{}):n.config,s=lv(n.actions)?n.actions:WBe({},ndn,n.actions??{}),o={...rdn,...n.i18n},a=n.renderer??"canvas",u=n.logLevel??_f.Warn,l=n.downloadFileName??"visualization",c=typeof e=="string"?document.querySelector(e):e;if(!c)throw new Error(`${e} does not exist`);if(n.defaultStyle!==!1){const E="vega-embed-style",{root:T,rootContainer:S}=fdn(c);if(!T.getElementById(E)){const A=document.createElement("style");A.id=E,A.innerHTML=n.defaultStyle===void 0||n.defaultStyle===!0?edn.toString():n.defaultStyle,S.appendChild(A)}}const f=udn(t,n.mode);let d=idn[f](t,i);if(f==="vega-lite"&&d.$schema){const E=LBe(d.$schema);qBe($L.vega,`^${E.version.slice(1)}`)||console.warn(`The compiled spec uses Vega ${E.version}, but current version is v${$L.vega}.`)}c.classList.add("vega-embed"),s&&c.classList.add("has-actions"),c.innerHTML="";let h=c;if(s){const E=document.createElement("div");E.classList.add(odn),c.appendChild(E),h=E}const p=n.patch;if(p&&(d=p instanceof Function?p(d):M4(d,p,!0,!1).newDocument),n.formatLocale&&_f.formatLocale(n.formatLocale),n.timeFormatLocale&&_f.timeFormatLocale(n.timeFormatLocale),n.expressionFunctions)for(const E in n.expressionFunctions){const T=n.expressionFunctions[E];"fn"in T?_f.expressionFunction(E,T.fn,T.visitor):T instanceof Function&&_f.expressionFunction(E,T)}const{ast:m}=n,g=_f.parse(d,f==="vega-lite"?{}:i,{ast:m}),y=new(n.viewClass||_f.View)(g,{loader:r,logLevel:u,renderer:a,...m?{expr:_f.expressionInterpreter??n.expr??Yen}:{}});if(y.addSignalListener("autosize",(E,T)=>{const{type:S}=T;S=="fit-x"?(h.classList.add("fit-x"),h.classList.remove("fit-y")):S=="fit-y"?(h.classList.remove("fit-x"),h.classList.add("fit-y")):S=="fit"?h.classList.add("fit-x","fit-y"):h.classList.remove("fit-x","fit-y")}),n.tooltip!==!1){const{loader:E,tooltip:T}=n,S=E&&!GBe(E)?E==null?void 0:E.baseURL:void 0,A=adn(T)?T:new Jcn({baseURL:S,...T===!0?{}:T}).call;y.tooltip(A)}let{hover:v}=n;if(v===void 0&&(v=f==="vega"),v){const{hoverSet:E,updateSet:T}=typeof v=="boolean"?{}:v;y.hover(E,T)}n&&(n.width!=null&&y.width(n.width),n.height!=null&&y.height(n.height),n.padding!=null&&y.padding(n.padding)),await y.initialize(h,n.bind).runAsync();let b;if(s!==!1){let E=c;if(n.defaultStyle!==!1||n.forceActionsMenu){const S=document.createElement("details");S.title=o.CLICK_TO_VIEW_ACTIONS,c.append(S),E=S;const A=document.createElement("summary");A.innerHTML=sdn,S.append(A),b=C=>{S.contains(C.target)||S.removeAttribute("open")},document.addEventListener("click",b)}const T=document.createElement("div");if(E.append(T),T.classList.add("vega-actions"),s===!0||s.export!==!1){for(const S of["svg","png"])if(s===!0||s.export===!0||s.export[S]){const A=o[`${S.toUpperCase()}_ACTION`],C=document.createElement("a"),k=gt(n.scaleFactor)?n.scaleFactor[S]:n.scaleFactor;C.text=A,C.href="#",C.target="_blank",C.download=`${l}.${S}`,C.addEventListener("mousedown",async function(N){N.preventDefault();const D=await y.toImageURL(S,k);this.href=D}),T.append(C)}}if(s===!0||s.source!==!1){const S=document.createElement("a");S.text=o.SOURCE_ACTION,S.href="#",S.addEventListener("click",function(A){jve(L9(t),n.sourceHeader??"",n.sourceFooter??"",f),A.preventDefault()}),T.append(S)}if(f==="vega-lite"&&(s===!0||s.compiled!==!1)){const S=document.createElement("a");S.text=o.COMPILED_ACTION,S.href="#",S.addEventListener("click",function(A){jve(L9(d),n.sourceHeader??"",n.sourceFooter??"","vega"),A.preventDefault()}),T.append(S)}if(s===!0||s.editor!==!1){const S=n.editorUrl??"https://vega.github.io/editor/",A=document.createElement("a");A.text=o.EDITOR_ACTION,A.href="#",A.addEventListener("click",function(C){Zfn(window,S,{config:i,mode:f,renderer:a,spec:L9(t)}),C.preventDefault()}),T.append(A)}}function w(){b&&document.removeEventListener("click",b),y.finalize()}return{view:y,spec:t,vgSpec:d,finalize:w,embedOptions:n}}function hdn(e){return!!e&&{}.toString.call(e)==="[object Function]"}function pdn(e,t,n){n&&(hdn(n)?n(e.data(t)):e.change(t,_f.changeset().remove(()=>!0).insert(n)))}function mdn(e,t){Object.keys(t).forEach(n=>{pdn(e,n,t[n])})}function YBe(e){const t=new Set;return e.forEach(n=>{Object.keys(n).forEach(r=>{t.add(r)})}),t}const KBe=()=>{};function LU(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.addSignalListener(r,t[r])}catch(i){console.warn("Cannot add invalid signal listener.",i)}}),n.length>0}function gdn(e,t){if(e===t)return!1;const n={width:!1,height:!1,isExpensive:!1},r=YBe([e,t]);return r.has("width")&&(!("width"in e)||!("width"in t)||e.width!==t.width)&&("width"in e&&typeof e.width=="number"?n.width=e.width:n.isExpensive=!0),r.has("height")&&(!("height"in e)||!("height"in t)||e.height!==t.height)&&("height"in e&&typeof e.height=="number"?n.height=e.height:n.isExpensive=!0),r.delete("width"),r.delete("height"),[...r].some(i=>!(i in e)||!(i in t)||!FO(e[i],t[i]))&&(n.isExpensive=!0),n.width!==!1||n.height!==!1||n.isExpensive?n:!1}function zve(e,t){const n=Object.keys(t);return n.forEach(r=>{try{e.removeSignalListener(r,t[r])}catch(i){console.warn("Cannot remove invalid signal listener.",i)}}),n.length>0}function FU(e){const{spec:t,width:n,height:r}=e;return typeof n<"u"&&typeof r<"u"?{...t,width:n,height:r}:typeof n<"u"?{...t,width:n}:typeof r<"u"?{...t,height:r}:t}function AC(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class XBe extends wr.PureComponent{constructor(){super(...arguments),AC(this,"containerRef",wr.createRef()),AC(this,"resultPromise",void 0),AC(this,"handleError",t=>{const{onError:n=KBe}=this.props;n(t,this.containerRef.current),console.warn(t)}),AC(this,"modifyView",t=>{this.resultPromise&&this.resultPromise.then(n=>(n&&t(n.view),!0)).catch(this.handleError)})}componentDidMount(){this.createView()}componentDidUpdate(t){const n=YBe([this.props,t]);if(n.delete("className"),n.delete("signalListeners"),n.delete("spec"),n.delete("style"),n.delete("width"),n.delete("height"),Array.from(n).some(r=>this.props[r]!==t[r]))this.clearView(),this.createView();else{const r=gdn(FU(this.props),FU(t)),{signalListeners:i}=this.props,{signalListeners:s}=t;if(r)if(r.isExpensive)this.clearView(),this.createView();else{const o=!tq(i,s);this.modifyView(a=>{r.width!==!1&&a.width(r.width),r.height!==!1&&a.height(r.height),o&&(s&&zve(a,s),i&&LU(a,i)),a.run()})}else tq(i,s)||this.modifyView(o=>{s&&zve(o,s),i&&LU(o,i),o.run()})}}componentWillUnmount(){this.clearView()}createView(){const{spec:t,onNewView:n,signalListeners:r={},width:i,height:s,...o}=this.props;if(this.containerRef.current){const a=FU(this.props);this.resultPromise=cdn(this.containerRef.current,a,o).then(u=>{if(u){const{view:l}=u;LU(l,r)&&l.run()}return u}).catch(this.handleError),n&&this.modifyView(n)}}clearView(){return this.resultPromise&&this.resultPromise.then(t=>{t&&t.finalize()}).catch(this.handleError),this.resultPromise=void 0,this}render(){const{className:t,style:n}=this.props;return wr.createElement("div",{ref:this.containerRef,className:t,style:n})}}AC(XBe,"propTypes",{className:sue.string,onError:sue.func});function RW(){return RW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RW.apply(this,arguments)}function NW(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ydn={};class QBe extends wr.PureComponent{constructor(){super(...arguments),NW(this,"vegaEmbed",wr.createRef()),NW(this,"handleNewView",t=>{this.update();const{onNewView:n=KBe}=this.props;n(t)})}componentDidMount(){this.update()}componentDidUpdate(t){tq(this.props.data,t.data)||this.update()}update(){const{data:t}=this.props;this.vegaEmbed.current&&t&&Object.keys(t).length>0&&this.vegaEmbed.current.modifyView(n=>{mdn(n,t),n.resize().run()})}render(){const{data:t,...n}=this.props;return wr.createElement(XBe,RW({ref:this.vegaEmbed},n,{onNewView:this.handleNewView}))}}NW(QBe,"defaultProps",{data:ydn});function PW(){return PW=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},PW.apply(this,arguments)}function OW(e){return wr.createElement(QBe,PW({},e,{mode:"vega-lite"}))}function vdn({response:e,participantData:t,trialId:n,trialConfig:r}){const[i,{toggle:s}]=n6(!0),[o,a]=L1(),u=I.useMemo(()=>e.type==="metadata"?[]:t.map(d=>Object.entries(d.answers).filter(([h])=>h.slice(0,h.lastIndexOf("_"))===n)).map(d=>d.map(([,h])=>h.answer)).flat(),[t,e.type,n]),l=I.useMemo(()=>{var d;return e.type==="metadata"||(d=r.correctAnswer)==null?void 0:d.find(h=>h.id===e.id)},[e.id,e.type,r.correctAnswer]),c=I.useMemo(()=>{const f={height:"container",width:"container"};if(e.type==="shortText"||e.type==="longText")return{};if(e.type==="metadata"){const h=t.map(m=>Object.entries(m.answers).filter(([g])=>g.slice(0,g.lastIndexOf("_"))===n)).map(m=>m.map(([g,y])=>(y.endTime-y.startTime)/1e3)).flat();return{...f,data:{values:h},mark:"bar",encoding:{x:{field:"data",bin:!0,type:"quantitative",title:"Time (s)"},y:{aggregate:"count",type:"quantitative",title:"Count"}}}}const d={params:[{name:"correctAnswer",value:l==null?void 0:l.answer},{name:"variable",value:e.id}],transform:[{calculate:"datum[variable] === correctAnswer ? 'correct' : 'incorrect'",as:"result"},{calculate:"if(datum.result === 'correct', 0, if(datum.result === 'incorrect', 1, 2))",as:"order"}],color:{field:"result",type:"nominal",scale:{domain:["correct","incorrect"],range:["#69DB7C","#ADB5BD"]}},order:{field:"order"}};if(e.type==="numerical"||e.type==="slider"||e.type==="likert"){let h,p;return e.type==="numerical"&&(h=e.min,p=e.max),e.type==="slider"&&(h=Math.min(...e.options.map(g=>g.value)),p=Math.max(...e.options.map(g=>g.value))),e.type==="likert"&&(h=1,p=e.numItems),{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:[{bin:e.type==="likert"?{step:1}:{maxbins:10},field:e.id,as:"bins"},...l!==void 0?d.transform:[]],encoding:{x:{field:"bins",scale:h!==void 0&&p!==void 0?{domain:[h,p]}:void 0,type:"quantitative",title:"Answer"},x2:{field:"bins_end"},y:{aggregate:"count",type:"quantitative",title:"Count",stack:!0},color:l!==void 0?d.color:void 0,order:l!==void 0?d.order:void 0}}}if(e.type==="radio"||e.type==="dropdown"||e.type==="checkbox")return{...f,data:{values:u},mark:"bar",params:l!==void 0?d.params:void 0,transform:l!==void 0?d.transform:void 0,encoding:{x:{field:e.id,type:"ordinal",title:"Answer"},y:{aggregate:"count",type:"quantitative",title:"Count"},color:l!==void 0?d.color:void 0}}},[t,u,e.id,e.max,e.min,e.numItems,e.options,e.type,n,l]);return _.jsxs(dS,{p:"lg",withBorder:!0,ref:o,children:[_.jsxs(Nt,{direction:"row",justify:"space-between",onClick:s,children:[_.jsxs(Nt,{align:"center",children:[e.type==="metadata"&&_.jsx(FZe,{size:20}),e.type==="numerical"&&_.jsx(GZe,{size:20}),(e.type==="shortText"||e.type==="longText")&&_.jsx(OZe,{size:20}),e.type==="likert"&&_.jsx(UZe,{size:20}),e.type==="dropdown"&&_.jsx(eet,{size:20}),e.type==="slider"&&_.jsx(IZe,{size:20}),e.type==="radio"&&_.jsx(XZe,{size:20}),e.type==="checkbox"&&_.jsx(tet,{size:20}),e.type==="iframe"&&_.jsx(HZe,{size:20}),_.jsx(Ii,{order:5,ml:4,children:e.id})]}),_.jsx(LZe,{style:{rotate:i?"180deg":"none",transition:"rotate 200ms"}})]}),_.jsxs(i6,{in:i,mah:400,children:[_.jsx(me,{style:{top:0,position:"sticky",backgroundColor:"white",zIndex:2},py:"md",children:_.jsx(ex,{})}),_.jsxs(fK,{cols:2,h:360,children:[_.jsx(Sm,{mih:200,children:e.type!=="metadata"&&e.type!=="shortText"&&e.type!=="longText"&&e.type!=="iframe"?_.jsx(OW,{spec:c,actions:!1,height:270,width:a.width/2-60-(l===void 0?0:60),padding:0,style:{justifySelf:"center"},renderer:"svg"}):_.jsxs(Nt,{direction:"column",gap:"xs",style:{overflowX:"clip"},children:[e.type==="metadata"&&_.jsx(LC,{block:!0,children:`${JSON.stringify(r,null,2)}`}),e.type!=="metadata"&&_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Response Values: "}),u.map((f,d)=>_.jsx(Nt,{align:"center",gap:"xs",children:_.jsx(et,{children:f[e.id]})},d))]})]})}),_.jsx(Sm,{mih:200,children:e.type==="metadata"?_.jsx(OW,{spec:c,actions:!1,width:a.width/2-60,height:270,padding:0,style:{justifySelf:"center"}}):_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Response Specification: "}),_.jsx(LC,{block:!0,children:JSON.stringify(e,null,2)}),_.jsx("br",{}),l&&_.jsxs(_.Fragment,{children:[_.jsx(et,{fw:700,children:"Correct Answer: "}),_.jsx(LC,{block:!0,children:JSON.stringify(l,null,2)})]})]})})]})]})]})}function bdn({participantData:e,studyConfig:t,trialId:n}){const r=n&&n!=="end"&&KPe(t.components[n],t),i=I.useMemo(()=>[{id:"Config and Timing",type:"metadata"},...r?r.response:[]],[r]);return r?_.jsx(Nt,{w:"100%",direction:"column",gap:"xs",children:i.map(s=>_.jsx(vdn,{response:s,participantData:e,trialId:n,trialConfig:r},s.id))}):_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",w:"100%",children:_.jsx(et,{children:n!=="end"?"No trial selected":"The end component has no data."})})}function _dn({studyConfig:e,inprogress:t,completed:n,rejected:r}){const[i,s]=I.useState([...n]),o=I.useCallback(l=>{const c=[];l.includes("completed")&&c.push(...n),l.includes("inprogress")&&c.push(...t),l.includes("rejected")&&c.push(...r),s(c)},[n,t,r]),a=I.useMemo(()=>{let l=P0(e.sequence);return l=nX(l,"root"),l.components.push("end"),l},[e.sequence]),{trialId:u}=Im();return _.jsxs(dS,{shadow:"sm",p:"md",withBorder:!0,children:[_.jsx(Nt,{direction:"row",justify:"space-between",children:_.jsx(Il.Group,{defaultValue:["completed"],onChange:o,mb:"xs",mt:8,ml:"xs",children:_.jsxs(Cs,{children:[_.jsx(Il,{value:"completed",label:"Completed"}),_.jsx(Il,{value:"inprogress",label:"In Progress"}),_.jsx(Il,{value:"rejected",label:"Rejected"})]})})}),_.jsx(ex,{my:"xs"}),i.length===0?_.jsx(Nt,{justify:"center",align:"center",pt:"lg",pb:"md",children:_.jsx(et,{children:"No data available."})}):_.jsxs(Nt,{direction:"row",children:[_.jsx(me,{w:340,children:_.jsx(y3,{configSequence:a,participantSequence:a,fullSequence:a,participantView:!1,studyConfig:e,analysisNavigation:!0})}),_.jsx(ex,{orientation:"vertical",mx:"md"}),_.jsx(bdn,{participantData:i,studyConfig:e,trialId:u})]})]})}function wdn({globalConfig:e}){const{studyId:t}=Im(),[n,r]=I.useState([]),[i,s]=I.useState(void 0),[o,a]=I.useState(!1),{storageEngine:u}=ks(),l=Qh(),{tab:c}=Im(),{user:f}=h_(),d=I.useCallback(async()=>{if(a(!0),t){const g=await s4(t,e);if(!g||!u)return;await u.initializeStudyDb(t,g);const y=await u.getAllParticipantsData();r(y),s(g),a(!1)}},[e,u,t]);I.useEffect(()=>{d()},[e,u,t,d]);const[h,p,m]=I.useMemo(()=>{const g=n.filter(b=>!b.rejected&&b.completed),y=n.filter(b=>!b.rejected&&!b.completed),v=n.filter(b=>b.rejected);return[g,y,v]},[n]);return _.jsxs(_.Fragment,{children:[_.jsx(y2,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsxs(Fc,{fluid:!0,style:{height:"100%",position:"relative"},children:[_.jsx(zl,{visible:o}),_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(Ii,{order:5,children:t}),_.jsx($Me,{completed:h.length,inProgress:p.length,rejected:m.length})]}),_.jsx($l,{h:"xs"}),_.jsxs(os,{variant:"outline",value:c,onChange:g=>l(`/analysis/stats/${t}/${g}`),style:{height:"100%"},children:[_.jsxs(os.List,{children:[_.jsx(os.Tab,{value:"table",leftSection:_.jsx(net,{size:16}),children:"Table View"}),_.jsx(os.Tab,{value:"stats",leftSection:_.jsx($Ze,{size:16}),children:"Trial Stats"}),_.jsx(Ci,{label:"Coming soon",position:"bottom",children:_.jsx(os.Tab,{value:"replay",leftSection:_.jsx(KZe,{size:16}),disabled:!0,children:"Participant Replay"})}),_.jsx(os.Tab,{value:"manage",leftSection:_.jsx(dxe,{size:16}),disabled:!f.isAdmin,children:"Manage"})]}),_.jsx(os.Panel,{value:"table",pt:"xs",children:i&&_.jsx(RBt,{completed:h,inProgress:p,rejected:m,studyConfig:i,refresh:d})}),_.jsx(os.Panel,{value:"stats",pt:"xs",children:i&&_.jsx(_dn,{studyConfig:i,completed:h,inprogress:p,rejected:m})}),_.jsx(os.Panel,{value:"replay",pt:"xs",children:"Replay Tab Content"}),_.jsx(os.Panel,{value:"manage",pt:"xs",children:t&&f.isAdmin?_.jsx(FBt,{studyId:t,refresh:d}):_.jsx(Fc,{mt:20,children:_.jsx(yS,{title:"Unauthorized Access",variant:"light",color:"red",icon:_.jsx(cxe,{}),children:"You are not authorized to manage the data for this study."})})})]})]})})]})}function Vve({children:e,paramToCheck:t,paramCallback:n}){const{user:r,verifyAdminStatus:i,logout:s}=h_(),{storageEngine:o}=ks(),[a,u]=I.useState(!1),l=Im();return I.useEffect(()=>{(async()=>{if(a===!1)if(t&&n&&l[t]){const f=await n(l[t]);f&&u(f)}else u(!0);if(a)try{r&&await i(r)||s()}catch(f){s(),console.warn(f)}})()},[s,n,t,l,r,i,a]),r.determiningStatus||!o?_.jsx(zl,{visible:r.determiningStatus||!(o!=null&&o.getEngine())}):a&&!r.isAdmin&&!r.determiningStatus?_.jsx(AK,{to:"/login"}):_.jsx(_.Fragment,{children:e})}async function JBe(e,t){if(e instanceof xc){t(!0);const n=new Wp,r=NMe();try{await N8t(r,n,RMe)}catch(i){U3({title:"Error",message:i.message,color:"red"})}finally{t(!1)}return r.currentUser}return null}function Edn(){const{user:e}=h_(),[t,n]=I.useState(!1),{storageEngine:r}=ks();return I.useEffect(()=>{!e.determiningStatus&&!e.isAdmin&&e.adminVerification&&U3({title:"Unauthorized",message:"You are not authorized to use this application.",color:"red"})},[e.determiningStatus,e.isAdmin,e.adminVerification]),!e.determiningStatus&&e.isAdmin?_.jsx(AK,{to:"/"}):_.jsx(Fc,{children:_.jsx(Kb,{padding:"lg",children:_.jsxs(Nt,{align:"center",direction:"column",justify:"center",children:[_.jsx(Wy,{maw:200,mt:50,mb:100,src:`${Gu}revisitAssets/revisitLogoSquare.svg`,alt:"Revisit Logo"}),_.jsxs(_.Fragment,{children:[_.jsx(et,{mb:20,children:"To access admin settings, please sign in using your Google account."}),_.jsx(cn,{onClick:()=>JBe(r,n),leftSection:_.jsx(ret,{}),variant:"filled",children:"Sign In With Google"})]}),_.jsx(zl,{visible:t})]})})})}var ZBe={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(so,function(){var n=1e3,r=6e4,i=36e5,s="millisecond",o="second",a="minute",u="hour",l="day",c="week",f="month",d="quarter",h="year",p="date",m="Invalid Date",g=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,y=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,v={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function($){var F=["th","st","nd","rd"],M=$%100;return"["+$+(F[(M-20)%10]||F[M]||F[0])+"]"}},b=function($,F,M){var B=String($);return!B||B.length>=F?$:""+Array(F+1-B.length).join(M)+$},w={s:b,z:function($){var F=-$.utcOffset(),M=Math.abs(F),B=Math.floor(M/60),U=M%60;return(F<=0?"+":"-")+b(B,2,"0")+":"+b(U,2,"0")},m:function $(F,M){if(F.date()<M.date())return-$(M,F);var B=12*(M.year()-F.year())+(M.month()-F.month()),U=F.clone().add(B,f),H=M-U<0,P=F.clone().add(B+(H?-1:1),f);return+(-(B+(M-U)/(H?U-P:P-U))||0)},a:function($){return $<0?Math.ceil($)||0:Math.floor($)},p:function($){return{M:f,y:h,w:c,d:l,D:p,h:u,m:a,s:o,ms:s,Q:d}[$]||String($||"").toLowerCase().replace(/s$/,"")},u:function($){return $===void 0}},E="en",T={};T[E]=v;var S="$isDayjsObject",A=function($){return $ instanceof D||!(!$||!$[S])},C=function $(F,M,B){var U;if(!F)return E;if(typeof F=="string"){var H=F.toLowerCase();T[H]&&(U=H),M&&(T[H]=M,U=H);var P=F.split("-");if(!U&&P.length>1)return $(P[0])}else{var z=F.name;T[z]=F,U=z}return!B&&U&&(E=U),U||!B&&E},k=function($,F){if(A($))return $.clone();var M=typeof F=="object"?F:{};return M.date=$,M.args=arguments,new D(M)},N=w;N.l=C,N.i=A,N.w=function($,F){return k($,{locale:F.$L,utc:F.$u,x:F.$x,$offset:F.$offset})};var D=function(){function $(M){this.$L=C(M.locale,null,!0),this.parse(M),this.$x=this.$x||M.x||{},this[S]=!0}var F=$.prototype;return F.parse=function(M){this.$d=function(B){var U=B.date,H=B.utc;if(U===null)return new Date(NaN);if(N.u(U))return new Date;if(U instanceof Date)return new Date(U);if(typeof U=="string"&&!/Z$/i.test(U)){var P=U.match(g);if(P){var z=P[2]-1||0,W=(P[7]||"0").substring(0,3);return H?new Date(Date.UTC(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)):new Date(P[1],z,P[3]||1,P[4]||0,P[5]||0,P[6]||0,W)}}return new Date(U)}(M),this.init()},F.init=function(){var M=this.$d;this.$y=M.getFullYear(),this.$M=M.getMonth(),this.$D=M.getDate(),this.$W=M.getDay(),this.$H=M.getHours(),this.$m=M.getMinutes(),this.$s=M.getSeconds(),this.$ms=M.getMilliseconds()},F.$utils=function(){return N},F.isValid=function(){return this.$d.toString()!==m},F.isSame=function(M,B){var U=k(M);return this.startOf(B)<=U&&U<=this.endOf(B)},F.isAfter=function(M,B){return k(M)<this.startOf(B)},F.isBefore=function(M,B){return this.endOf(B)<k(M)},F.$g=function(M,B,U){return N.u(M)?this[B]:this.set(U,M)},F.unix=function(){return Math.floor(this.valueOf()/1e3)},F.valueOf=function(){return this.$d.getTime()},F.startOf=function(M,B){var U=this,H=!!N.u(B)||B,P=N.p(M),z=function(he,ve){var Ie=N.w(U.$u?Date.UTC(U.$y,ve,he):new Date(U.$y,ve,he),U);return H?Ie:Ie.endOf(l)},W=function(he,ve){return N.w(U.toDate()[he].apply(U.toDate("s"),(H?[0,0,0,0]:[23,59,59,999]).slice(ve)),U)},j=this.$W,q=this.$M,G=this.$D,ne="set"+(this.$u?"UTC":"");switch(P){case h:return H?z(1,0):z(31,11);case f:return H?z(1,q):z(0,q+1);case c:var ce=this.$locale().weekStart||0,de=(j<ce?j+7:j)-ce;return z(H?G-de:G+(6-de),q);case l:case p:return W(ne+"Hours",0);case u:return W(ne+"Minutes",1);case a:return W(ne+"Seconds",2);case o:return W(ne+"Milliseconds",3);default:return this.clone()}},F.endOf=function(M){return this.startOf(M,!1)},F.$set=function(M,B){var U,H=N.p(M),P="set"+(this.$u?"UTC":""),z=(U={},U[l]=P+"Date",U[p]=P+"Date",U[f]=P+"Month",U[h]=P+"FullYear",U[u]=P+"Hours",U[a]=P+"Minutes",U[o]=P+"Seconds",U[s]=P+"Milliseconds",U)[H],W=H===l?this.$D+(B-this.$W):B;if(H===f||H===h){var j=this.clone().set(p,1);j.$d[z](W),j.init(),this.$d=j.set(p,Math.min(this.$D,j.daysInMonth())).$d}else z&&this.$d[z](W);return this.init(),this},F.set=function(M,B){return this.clone().$set(M,B)},F.get=function(M){return this[N.p(M)]()},F.add=function(M,B){var U,H=this;M=Number(M);var P=N.p(B),z=function(q){var G=k(H);return N.w(G.date(G.date()+Math.round(q*M)),H)};if(P===f)return this.set(f,this.$M+M);if(P===h)return this.set(h,this.$y+M);if(P===l)return z(1);if(P===c)return z(7);var W=(U={},U[a]=r,U[u]=i,U[o]=n,U)[P]||1,j=this.$d.getTime()+M*W;return N.w(j,this)},F.subtract=function(M,B){return this.add(-1*M,B)},F.format=function(M){var B=this,U=this.$locale();if(!this.isValid())return U.invalidDate||m;var H=M||"YYYY-MM-DDTHH:mm:ssZ",P=N.z(this),z=this.$H,W=this.$m,j=this.$M,q=U.weekdays,G=U.months,ne=U.meridiem,ce=function(ve,Ie,be,Xe){return ve&&(ve[Ie]||ve(B,H))||be[Ie].slice(0,Xe)},de=function(ve){return N.s(z%12||12,ve,"0")},he=ne||function(ve,Ie,be){var Xe=ve<12?"AM":"PM";return be?Xe.toLowerCase():Xe};return H.replace(y,function(ve,Ie){return Ie||function(be){switch(be){case"YY":return String(B.$y).slice(-2);case"YYYY":return N.s(B.$y,4,"0");case"M":return j+1;case"MM":return N.s(j+1,2,"0");case"MMM":return ce(U.monthsShort,j,G,3);case"MMMM":return ce(G,j);case"D":return B.$D;case"DD":return N.s(B.$D,2,"0");case"d":return String(B.$W);case"dd":return ce(U.weekdaysMin,B.$W,q,2);case"ddd":return ce(U.weekdaysShort,B.$W,q,3);case"dddd":return q[B.$W];case"H":return String(z);case"HH":return N.s(z,2,"0");case"h":return de(1);case"hh":return de(2);case"a":return he(z,W,!0);case"A":return he(z,W,!1);case"m":return String(W);case"mm":return N.s(W,2,"0");case"s":return String(B.$s);case"ss":return N.s(B.$s,2,"0");case"SSS":return N.s(B.$ms,3,"0");case"Z":return P}return null}(ve)||P.replace(":","")})},F.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},F.diff=function(M,B,U){var H,P=this,z=N.p(B),W=k(M),j=(W.utcOffset()-this.utcOffset())*r,q=this-W,G=function(){return N.m(P,W)};switch(z){case h:H=G()/12;break;case f:H=G();break;case d:H=G()/3;break;case c:H=(q-j)/6048e5;break;case l:H=(q-j)/864e5;break;case u:H=q/i;break;case a:H=q/r;break;case o:H=q/n;break;default:H=q}return U?H:N.a(H)},F.daysInMonth=function(){return this.endOf(f).$D},F.$locale=function(){return T[this.$L]},F.locale=function(M,B){if(!M)return this.$L;var U=this.clone(),H=C(M,B,!0);return H&&(U.$L=H),U},F.clone=function(){return N.w(this.$d,this)},F.toDate=function(){return new Date(this.valueOf())},F.toJSON=function(){return this.isValid()?this.toISOString():null},F.toISOString=function(){return this.$d.toISOString()},F.toString=function(){return this.$d.toUTCString()},$}(),O=D.prototype;return k.prototype=O,[["$ms",s],["$s",o],["$m",a],["$H",u],["$W",l],["$M",f],["$y",h],["$D",p]].forEach(function($){O[$[1]]=function(F){return this.$g(F,$[0],$[1])}}),k.extend=function($,F){return $.$i||($(F,D,k),$.$i=!0),k},k.locale=C,k.isDayjs=A,k.unix=function($){return k(1e3*$)},k.en=T[E],k.Ls=T,k.p={},k})})(ZBe);var xdn=ZBe.exports;const At=ec(xdn);function Sdn({type:e,date:t,locale:n,format:r,labelSeparator:i}){const s=o=>At(o).locale(n).format(r);return e==="default"?t===null?"":s(t):e==="multiple"?t.map(s).join(", "):e==="range"&&Array.isArray(t)?t[0]&&t[1]?`${s(t[0])} ${i} ${s(t[1])}`:t[0]?`${s(t[0])} ${i} `:"":""}function Tdn({formatter:e,...t}){return(e||Sdn)(t)}function Adn({direction:e,levelIndex:t,rowIndex:n,cellIndex:r,size:i}){switch(e){case"up":return t===0&&n===0?null:n===0?{levelIndex:t-1,rowIndex:r<=i[t-1][i[t-1].length-1]-1?i[t-1].length-1:i[t-1].length-2,cellIndex:r}:{levelIndex:t,rowIndex:n-1,cellIndex:r};case"down":return n===i[t].length-1?{levelIndex:t+1,rowIndex:0,cellIndex:r}:n===i[t].length-2&&r>=i[t][i[t].length-1]?{levelIndex:t+1,rowIndex:0,cellIndex:r}:{levelIndex:t,rowIndex:n+1,cellIndex:r};case"left":return t===0&&n===0&&r===0?null:n===0&&r===0?{levelIndex:t-1,rowIndex:i[t-1].length-1,cellIndex:i[t-1][i[t-1].length-1]-1}:r===0?{levelIndex:t,rowIndex:n-1,cellIndex:i[t][n-1]-1}:{levelIndex:t,rowIndex:n,cellIndex:r-1};case"right":return n===i[t].length-1&&r===i[t][n]-1?{levelIndex:t+1,rowIndex:0,cellIndex:0}:r===i[t][n]-1?{levelIndex:t,rowIndex:n+1,cellIndex:0}:{levelIndex:t,rowIndex:n,cellIndex:r+1};default:return{levelIndex:t,rowIndex:n,cellIndex:r}}}function e9e({controlsRef:e,direction:t,levelIndex:n,rowIndex:r,cellIndex:i,size:s}){var u,l,c;const o=Adn({direction:t,size:s,rowIndex:r,cellIndex:i,levelIndex:n});if(!o)return;const a=(c=(l=(u=e.current)==null?void 0:u[o.levelIndex])==null?void 0:l[o.rowIndex])==null?void 0:c[o.cellIndex];a&&(a.disabled||a.getAttribute("data-hidden")||a.getAttribute("data-outside")?e9e({controlsRef:e,direction:t,levelIndex:o.levelIndex,cellIndex:o.cellIndex,rowIndex:o.rowIndex,size:s}):a.focus())}function Cdn(e){switch(e){case"ArrowDown":return"down";case"ArrowUp":return"up";case"ArrowRight":return"right";case"ArrowLeft":return"left";default:return null}}function Idn(e){var t;return(t=e.current)==null?void 0:t.map(n=>n.map(r=>r.length))}function Cse({controlsRef:e,levelIndex:t,rowIndex:n,cellIndex:r,event:i}){const s=Cdn(i.key);if(s){i.preventDefault();const o=Idn(e);e9e({controlsRef:e,direction:s,levelIndex:t,rowIndex:n,cellIndex:r,size:o})}}var t9e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(so,function(){var n={year:0,month:1,day:2,hour:3,minute:4,second:5},r={};return function(i,s,o){var a,u=function(d,h,p){p===void 0&&(p={});var m=new Date(d),g=function(y,v){v===void 0&&(v={});var b=v.timeZoneName||"short",w=y+"|"+b,E=r[w];return E||(E=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:y,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",timeZoneName:b}),r[w]=E),E}(h,p);return g.formatToParts(m)},l=function(d,h){for(var p=u(d,h),m=[],g=0;g<p.length;g+=1){var y=p[g],v=y.type,b=y.value,w=n[v];w>=0&&(m[w]=parseInt(b,10))}var E=m[3],T=E===24?0:E,S=m[0]+"-"+m[1]+"-"+m[2]+" "+T+":"+m[4]+":"+m[5]+":000",A=+d;return(o.utc(S).valueOf()-(A-=A%1e3))/6e4},c=s.prototype;c.tz=function(d,h){d===void 0&&(d=a);var p=this.utcOffset(),m=this.toDate(),g=m.toLocaleString("en-US",{timeZone:d}),y=Math.round((m-new Date(g))/1e3/60),v=o(g,{locale:this.$L}).$set("millisecond",this.$ms).utcOffset(15*-Math.round(m.getTimezoneOffset()/15)-y,!0);if(h){var b=v.utcOffset();v=v.add(p-b,"minute")}return v.$x.$timezone=d,v},c.offsetName=function(d){var h=this.$x.$timezone||o.tz.guess(),p=u(this.valueOf(),h,{timeZoneName:d}).find(function(m){return m.type.toLowerCase()==="timezonename"});return p&&p.value};var f=c.startOf;c.startOf=function(d,h){if(!this.$x||!this.$x.$timezone)return f.call(this,d,h);var p=o(this.format("YYYY-MM-DD HH:mm:ss:SSS"),{locale:this.$L});return f.call(p,d,h).tz(this.$x.$timezone,!0)},o.tz=function(d,h,p){var m=p&&h,g=p||h||a,y=l(+o(),g);if(typeof d!="string")return o(d).tz(g);var v=function(T,S,A){var C=T-60*S*1e3,k=l(C,A);if(S===k)return[C,S];var N=l(C-=60*(k-S)*1e3,A);return k===N?[C,k]:[T-60*Math.min(k,N)*1e3,Math.max(k,N)]}(o.utc(d,m).valueOf(),y,g),b=v[0],w=v[1],E=o(b).utcOffset(w);return E.$x.$timezone=g,E},o.tz.guess=function(){return Intl.DateTimeFormat().resolvedOptions().timeZone},o.tz.setDefault=function(d){a=d}}})})(t9e);var kdn=t9e.exports;const Rdn=ec(kdn);var n9e={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(so,function(){var n="minute",r=/[+-]\d\d(?::?\d\d)?/g,i=/([+-]|\d\d)/g;return function(s,o,a){var u=o.prototype;a.utc=function(m){var g={date:m,utc:!0,args:arguments};return new o(g)},u.utc=function(m){var g=a(this.toDate(),{locale:this.$L,utc:!0});return m?g.add(this.utcOffset(),n):g},u.local=function(){return a(this.toDate(),{locale:this.$L,utc:!1})};var l=u.parse;u.parse=function(m){m.utc&&(this.$u=!0),this.$utils().u(m.$offset)||(this.$offset=m.$offset),l.call(this,m)};var c=u.init;u.init=function(){if(this.$u){var m=this.$d;this.$y=m.getUTCFullYear(),this.$M=m.getUTCMonth(),this.$D=m.getUTCDate(),this.$W=m.getUTCDay(),this.$H=m.getUTCHours(),this.$m=m.getUTCMinutes(),this.$s=m.getUTCSeconds(),this.$ms=m.getUTCMilliseconds()}else c.call(this)};var f=u.utcOffset;u.utcOffset=function(m,g){var y=this.$utils().u;if(y(m))return this.$u?0:y(this.$offset)?f.call(this):this.$offset;if(typeof m=="string"&&(m=function(E){E===void 0&&(E="");var T=E.match(r);if(!T)return null;var S=(""+T[0]).match(i)||["-",0,0],A=S[0],C=60*+S[1]+ +S[2];return C===0?0:A==="+"?C:-C}(m),m===null))return this;var v=Math.abs(m)<=16?60*m:m,b=this;if(g)return b.$offset=v,b.$u=m===0,b;if(m!==0){var w=this.$u?this.toDate().getTimezoneOffset():-1*this.utcOffset();(b=this.local().add(v+w,n)).$offset=v,b.$x.$localOffset=w}else b=this.utc();return b};var d=u.format;u.format=function(m){var g=m||(this.$u?"YYYY-MM-DDTHH:mm:ss[Z]":"");return d.call(this,g)},u.valueOf=function(){var m=this.$utils().u(this.$offset)?0:this.$offset+(this.$x.$localOffset||this.$d.getTimezoneOffset());return this.$d.valueOf()-6e4*m},u.isUTC=function(){return!!this.$u},u.toISOString=function(){return this.toDate().toISOString()},u.toString=function(){return this.toDate().toUTCString()};var h=u.toDate;u.toDate=function(m){return m==="s"&&this.$offset?a(this.format("YYYY-MM-DD HH:mm:ss:SSS")).toDate():h.call(this)};var p=u.diff;u.diff=function(m,g,y){if(m&&this.$u===m.$u)return p.call(this,m,g,y);var v=this.local(),b=a(m).local();return p.call(v,b,g,y)}}})})(n9e);var Ndn=n9e.exports;const Pdn=ec(Ndn);At.extend(Pdn);At.extend(Rdn);function Odn(e,t){return t?At(e).tz(t).utcOffset()+e.getTimezoneOffset():0}const Hve=(e,t,n)=>{if(!e)return null;if(!t)return e;let r=Odn(e,t);return n==="remove"&&(r*=-1),At(e).add(r,"minutes").toDate()};function W0(e,t,n,r){return r||!t?t:Array.isArray(t)?t.map(i=>Hve(i,n,e)):Hve(t,n,e)}function Ddn({minDate:e,maxDate:t,timezone:n}){const r=W0("add",new Date,n);return!e&&!t?r:e&&At(r).isBefore(e)?e:t&&At(r).isAfter(t)?t:r}const $dn={locale:"en",timezone:null,firstDayOfWeek:1,weekendDays:[0,6],labelSeparator:"",consistentWeeks:!1},Mdn=I.createContext($dn);function sc(){const e=I.useContext(Mdn),t=I.useCallback(o=>o||e.locale,[e.locale]),n=I.useCallback(o=>o||e.timezone||void 0,[e.timezone]),r=I.useCallback(o=>typeof o=="number"?o:e.firstDayOfWeek,[e.firstDayOfWeek]),i=I.useCallback(o=>Array.isArray(o)?o:e.weekendDays,[e.weekendDays]),s=I.useCallback(o=>typeof o=="string"?o:e.labelSeparator,[e.labelSeparator]);return{...e,getLocale:t,getTimezone:n,getFirstDayOfWeek:r,getWeekendDays:i,getLabelSeparator:s}}function Ldn(e,t){if(t==="range"&&Array.isArray(e)){const[n,r]=e;return n?r?`${n.toISOString()}  ${r.toISOString()}`:`${n.toISOString()} `:""}return t==="multiple"&&Array.isArray(e)?e.map(n=>n==null?void 0:n.toISOString()).filter(Boolean).join(", "):!Array.isArray(e)&&e?e.toISOString():""}function r9e({value:e,type:t,name:n,form:r}){return _.jsx("input",{type:"hidden",value:Ldn(e,t),name:n,form:r})}r9e.displayName="@mantine/dates/HiddenDatesInput";var i9e={day:"m_396ce5cb"};const Fdn={},jdn=(e,{size:t})=>({day:{"--day-size":tn(t,"day-size")}}),Ise=Me((e,t)=>{const n=xe("Day",Fdn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,date:l,disabled:c,__staticSelector:f,weekend:d,outside:h,selected:p,renderDay:m,inRange:g,firstInRange:y,lastInRange:v,hidden:b,static:w,...E}=n,T=dt({name:f||"Day",classes:i9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:jdn,rootSelector:"day"}),S=sc();return _.jsx(Ts,{...T("day",{style:b?{display:"none"}:void 0}),component:w?"div":"button",ref:t,disabled:c,"data-today":At(l).isSame(W0("add",new Date,S.getTimezone()),"day")||void 0,"data-hidden":b||void 0,"data-disabled":c||void 0,"data-weekend":!c&&!h&&d||void 0,"data-outside":!c&&h||void 0,"data-selected":!c&&p||void 0,"data-in-range":g&&!c||void 0,"data-first-in-range":y&&!c||void 0,"data-last-in-range":v&&!c||void 0,"data-static":w||void 0,unstyled:a,...E,children:(m==null?void 0:m(l))||l.getDate()})});Ise.classes=i9e;Ise.displayName="@mantine/dates/Day";function Bdn({locale:e,format:t="dd",firstDayOfWeek:n=1}){const r=At().day(n),i=[];for(let s=0;s<7;s+=1)typeof t=="string"?i.push(At(r).add(s,"days").locale(e).format(t)):i.push(t(At(r).add(s,"days").toDate()));return i}var s9e={weekday:"m_18a3eca"};const Udn={},zdn=(e,{size:t})=>({weekdaysRow:{"--wr-fz":po(t),"--wr-spacing":fs(t)}}),kse=Me((e,t)=>{const n=xe("WeekdaysRow",Udn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,locale:l,firstDayOfWeek:c,weekdayFormat:f,cellComponent:d="th",__staticSelector:h,...p}=n,m=dt({name:h||"WeekdaysRow",classes:s9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:zdn,rootSelector:"weekdaysRow"}),g=sc(),y=Bdn({locale:g.getLocale(l),format:f,firstDayOfWeek:g.getFirstDayOfWeek(c)}).map((v,b)=>_.jsx(d,{...m("weekday"),children:v},b));return _.jsx(me,{component:"tr",ref:t,...m("weekdaysRow"),...p,children:y})});kse.classes=s9e;kse.displayName="@mantine/dates/WeekdaysRow";function Vdn(e,t=1){const n=new Date(e),r=t===0?6:t-1;for(;n.getDay()!==r;)n.setDate(n.getDate()+1);return n}function Hdn(e,t=1){const n=new Date(e);for(;n.getDay()!==t;)n.setDate(n.getDate()-1);return n}function qdn({month:e,firstDayOfWeek:t=1,consistentWeeks:n}){const r=e.getMonth(),i=new Date(e.getFullYear(),r,1),s=new Date(e.getFullYear(),e.getMonth()+1,0),o=Vdn(s,t),a=Hdn(i,t),u=[];for(;a<=o;){const l=[];for(let c=0;c<7;c+=1)l.push(new Date(a)),a.setDate(a.getDate()+1);u.push(l)}if(n&&u.length<6){const l=u[u.length-1],c=l[l.length-1],f=new Date(c);for(f.setDate(f.getDate()+1);u.length<6;){const d=[];for(let h=0;h<7;h+=1)d.push(new Date(f)),f.setDate(f.getDate()+1);u.push(d)}}return u}function o9e(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()}function a9e(e,t){return t instanceof Date?At(e).isAfter(At(t).subtract(1,"day"),"day"):!0}function u9e(e,t){return t instanceof Date?At(e).isBefore(At(t).add(1,"day"),"day"):!0}function Wdn(e,t,n,r,i,s,o){const a=e.flat().filter(c=>{var f;return u9e(c,n)&&a9e(c,t)&&!(i!=null&&i(c))&&!((f=r==null?void 0:r(c))!=null&&f.disabled)&&(!s||o9e(c,o))}),u=a.find(c=>{var f;return(f=r==null?void 0:r(c))==null?void 0:f.selected});if(u)return u;const l=a.find(c=>At().isSame(c,"date"));return l||a[0]}var l9e={month:"m_cc9820d3",monthCell:"m_8f457cd5"};const Gdn={withCellSpacing:!0},Ej=Me((e,t)=>{const n=xe("Month",Gdn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,locale:c,firstDayOfWeek:f,weekdayFormat:d,month:h,weekendDays:p,getDayProps:m,excludeDate:g,minDate:y,maxDate:v,renderDay:b,hideOutsideDates:w,hideWeekdays:E,getDayAriaLabel:T,static:S,__getDayRef:A,__onDayKeyDown:C,__onDayClick:k,__onDayMouseEnter:N,__preventFocus:D,__stopPropagation:O,withCellSpacing:$,size:F,...M}=n,B=dt({name:l||"Month",classes:l9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"month"}),U=sc(),H=qdn({month:h,firstDayOfWeek:U.getFirstDayOfWeek(f),consistentWeeks:U.consistentWeeks}),P=Wdn(H,y,v,m,g,w,h),{resolvedClassNames:z,resolvedStyles:W}=Jm({classNames:r,styles:o,props:n}),j=H.map((q,G)=>{const ne=q.map((ce,de)=>{const he=!o9e(ce,h),ve=(T==null?void 0:T(ce))||At(ce).locale(c||U.locale).format("D MMMM YYYY"),Ie=m==null?void 0:m(ce),be=At(ce).isSame(P,"date");return _.jsx("td",{...B("monthCell"),"data-with-spacing":$||void 0,children:_.jsx(Ise,{__staticSelector:l||"Month",classNames:z,styles:W,unstyled:a,"data-mantine-stop-propagation":O||void 0,renderDay:b,date:ce,size:F,weekend:U.getWeekendDays(p).includes(ce.getDay()),outside:he,hidden:w?he:!1,"aria-label":ve,static:S,disabled:(g==null?void 0:g(ce))||!u9e(ce,v)||!a9e(ce,y),ref:Xe=>A==null?void 0:A(G,de,Xe),...Ie,onKeyDown:Xe=>{var ze;(ze=Ie==null?void 0:Ie.onKeyDown)==null||ze.call(Ie,Xe),C==null||C(Xe,{rowIndex:G,cellIndex:de,date:ce})},onMouseEnter:Xe=>{var ze;(ze=Ie==null?void 0:Ie.onMouseEnter)==null||ze.call(Ie,Xe),N==null||N(Xe,ce)},onClick:Xe=>{var ze;(ze=Ie==null?void 0:Ie.onClick)==null||ze.call(Ie,Xe),k==null||k(Xe,ce)},onMouseDown:Xe=>{var ze;(ze=Ie==null?void 0:Ie.onMouseDown)==null||ze.call(Ie,Xe),D&&Xe.preventDefault()},tabIndex:D||!be?-1:0})},ce.toString())});return _.jsx("tr",{...B("monthRow"),children:ne},G)});return _.jsxs(me,{component:"table",...B("month"),size:F,ref:t,...M,children:[!E&&_.jsx("thead",{...B("monthThead"),children:_.jsx(kse,{__staticSelector:l||"Month",locale:c,firstDayOfWeek:f,weekdayFormat:d,size:F,classNames:z,styles:W,unstyled:a})}),_.jsx("tbody",{...B("monthTbody"),children:j})]})});Ej.classes=l9e;Ej.displayName="@mantine/dates/Month";var c9e={pickerControl:"m_dc6a3c71"};const Ydn={},Kdn=(e,{size:t})=>({pickerControl:{"--dpc-fz":po(t),"--dpc-size":tn(t,"dpc-size")}}),xj=Me((e,t)=>{const n=xe("PickerControl",Ydn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,firstInRange:l,lastInRange:c,inRange:f,__staticSelector:d,selected:h,disabled:p,...m}=n,g=dt({name:d||"PickerControl",classes:c9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:Kdn,rootSelector:"pickerControl"});return _.jsx(Ts,{...g("pickerControl"),ref:t,unstyled:a,"data-picker-control":!0,"data-selected":h&&!p||void 0,"data-disabled":p||void 0,"data-in-range":f&&!p&&!h||void 0,"data-first-in-range":l&&!p||void 0,"data-last-in-range":c&&!p||void 0,disabled:p,...m})});xj.classes=c9e;xj.displayName="@mantine/dates/PickerControl";function f9e(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"year")||n&&At(e).isAfter(n,"year"))}function Xdn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!f9e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"year"));return o||i[0]}function d9e(e){const t=e.getFullYear(),n=t-t%10;let r=0;const i=[[],[],[],[]];for(let s=0;s<4;s+=1){const o=s===3?1:3;for(let a=0;a<o;a+=1)i[s].push(new Date(n+r,0)),r+=1}return i}var h9e={yearsList:"m_9206547b",yearsListCell:"m_c5a19c7d"};const Qdn={yearsListFormat:"YYYY",withCellSpacing:!0},Sj=Me((e,t)=>{const n=xe("YearsList",Qdn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,decade:l,yearsListFormat:c,locale:f,minDate:d,maxDate:h,getYearControlProps:p,__staticSelector:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=dt({name:m||"YearsList",classes:h9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"yearsList"}),k=sc(),N=d9e(l),D=Xdn(N,d,h,p),O=N.map(($,F)=>{const M=$.map((B,U)=>{const H=p==null?void 0:p(B),P=At(B).isSame(D,"year");return _.jsx("td",{...C("yearsListCell"),"data-with-spacing":T||void 0,children:_.jsx(xj,{...C("yearsListControl"),size:S,unstyled:a,"data-mantine-stop-propagation":E||void 0,disabled:f9e(B,d,h),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:At(B).locale(k.getLocale(f)).format(c)})},U)});return _.jsx("tr",{...C("yearsListRow"),children:M},F)});return _.jsx(me,{component:"table",ref:t,size:S,...C("yearsList"),...A,children:_.jsx("tbody",{children:O})})});Sj.classes=h9e;Sj.displayName="@mantine/dates/YearsList";function p9e(e,t,n){return!t&&!n?!1:!!(t&&At(e).isBefore(t,"month")||n&&At(e).isAfter(n,"month"))}function Jdn(e,t,n,r){const i=e.flat().filter(a=>{var u;return!p9e(a,t,n)&&!((u=r==null?void 0:r(a))!=null&&u.disabled)}),s=i.find(a=>{var u;return(u=r==null?void 0:r(a))==null?void 0:u.selected});if(s)return s;const o=i.find(a=>At().isSame(a,"month"));return o||i[0]}function Zdn(e){const t=At(e).startOf("year").toDate(),n=[[],[],[],[]];let r=0;for(let i=0;i<4;i+=1)for(let s=0;s<3;s+=1)n[i].push(At(t).add(r,"months").toDate()),r+=1;return n}var m9e={monthsList:"m_2a6c32d",monthsListCell:"m_fe27622f"};const ehn={monthsListFormat:"MMM",withCellSpacing:!0},Tj=Me((e,t)=>{const n=xe("MonthsList",ehn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,year:c,monthsListFormat:f,locale:d,minDate:h,maxDate:p,getMonthControlProps:m,__getControlRef:g,__onControlKeyDown:y,__onControlClick:v,__onControlMouseEnter:b,__preventFocus:w,__stopPropagation:E,withCellSpacing:T,size:S,...A}=n,C=dt({name:l||"MonthsList",classes:m9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"monthsList"}),k=sc(),N=Zdn(c),D=Jdn(N,h,p,m),O=N.map(($,F)=>{const M=$.map((B,U)=>{const H=m==null?void 0:m(B),P=At(B).isSame(D,"month");return _.jsx("td",{...C("monthsListCell"),"data-with-spacing":T||void 0,children:_.jsx(xj,{...C("monthsListControl"),size:S,unstyled:a,__staticSelector:l||"MonthsList","data-mantine-stop-propagation":E||void 0,disabled:p9e(B,h,p),ref:z=>g==null?void 0:g(F,U,z),...H,onKeyDown:z=>{var W;(W=H==null?void 0:H.onKeyDown)==null||W.call(H,z),y==null||y(z,{rowIndex:F,cellIndex:U,date:B})},onClick:z=>{var W;(W=H==null?void 0:H.onClick)==null||W.call(H,z),v==null||v(z,B)},onMouseEnter:z=>{var W;(W=H==null?void 0:H.onMouseEnter)==null||W.call(H,z),b==null||b(z,B)},onMouseDown:z=>{var W;(W=H==null?void 0:H.onMouseDown)==null||W.call(H,z),w&&z.preventDefault()},tabIndex:w||!P?-1:0,children:At(B).locale(k.getLocale(d)).format(f)})},U)});return _.jsx("tr",{...C("monthsListRow"),children:M},F)});return _.jsx(me,{component:"table",ref:t,size:S,...C("monthsList"),...A,children:_.jsx("tbody",{children:O})})});Tj.classes=m9e;Tj.displayName="@mantine/dates/MonthsList";var g9e={calendarHeader:"m_730a79ed",calendarHeaderLevel:"m_f6645d97",calendarHeaderControl:"m_2351eeb0",calendarHeaderControlIcon:"m_367dc749"};const thn={nextDisabled:!1,previousDisabled:!1,hasNextLevel:!0,withNext:!0,withPrevious:!0},nhn=(e,{size:t})=>({calendarHeader:{"--dch-control-size":tn(t,"dch-control-size"),"--dch-fz":po(t)}}),bv=Me((e,t)=>{const n=xe("CalendarHeader",thn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,nextIcon:l,previousIcon:c,nextLabel:f,previousLabel:d,onNext:h,onPrevious:p,onLevelClick:m,label:g,nextDisabled:y,previousDisabled:v,hasNextLevel:b,levelControlAriaLabel:w,withNext:E,withPrevious:T,__staticSelector:S,__preventFocus:A,__stopPropagation:C,...k}=n,N=dt({name:S||"CalendarHeader",classes:g9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,varsResolver:nhn,rootSelector:"calendarHeader"}),D=A?O=>O.preventDefault():void 0;return _.jsxs(me,{...N("calendarHeader"),ref:t,...k,children:[T&&_.jsx(Ts,{...N("calendarHeaderControl"),"data-direction":"previous","aria-label":d,onClick:p,unstyled:a,onMouseDown:D,disabled:v,"data-disabled":v||void 0,tabIndex:A||v?-1:0,"data-mantine-stop-propagation":C||void 0,children:c||_.jsx(JE,{...N("calendarHeaderControlIcon"),"data-direction":"previous",size:"45%"})}),_.jsx(Ts,{component:b?"button":"div",...N("calendarHeaderLevel"),onClick:b?m:void 0,unstyled:a,onMouseDown:b?D:void 0,disabled:!b,"data-static":!b||void 0,"aria-label":w,tabIndex:A||!b?-1:0,"data-mantine-stop-propagation":C||void 0,children:g}),E&&_.jsx(Ts,{...N("calendarHeaderControl"),"data-direction":"next","aria-label":f,onClick:h,unstyled:a,onMouseDown:D,disabled:y,"data-disabled":y||void 0,tabIndex:A||y?-1:0,"data-mantine-stop-propagation":C||void 0,children:l||_.jsx(JE,{...N("calendarHeaderControlIcon"),"data-direction":"next",size:"45%"})})]})});bv.classes=g9e;bv.displayName="@mantine/dates/CalendarHeader";function rhn(e){const t=d9e(e);return[t[0][0],t[3][0]]}const ihn={decadeLabelFormat:"YYYY"},Aj=Me((e,t)=>{const n=xe("DecadeLevel",ihn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:E,previousDisabled:T,levelControlAriaLabel:S,withNext:A,withPrevious:C,decadeLabelFormat:k,classNames:N,styles:D,unstyled:O,__staticSelector:$,__stopPropagation:F,size:M,...B}=n,U=sc(),[H,P]=rhn(r),z={__staticSelector:$||"DecadeLevel",classNames:N,styles:D,unstyled:O,size:M},W=typeof E=="boolean"?E:o?!At(P).endOf("year").isBefore(o):!1,j=typeof T=="boolean"?T:s?!At(H).startOf("year").isAfter(s):!1,q=(G,ne)=>At(G).locale(i||U.locale).format(ne);return _.jsxs(me,{"data-decade-level":!0,size:M,ref:t,...B,children:[_.jsx(bv,{label:typeof k=="function"?k(H,P):`${q(H,k)}  ${q(P,k)}`,__preventFocus:p,__stopPropagation:F,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,nextDisabled:W,previousDisabled:j,hasNextLevel:!1,levelControlAriaLabel:S,withNext:A,withPrevious:C,...z}),_.jsx(Sj,{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:F,withCellSpacing:h,...z})]})});Aj.classes={...Sj.classes,...bv.classes};Aj.displayName="@mantine/dates/DecadeLevel";const shn={yearLabelFormat:"YYYY"},Cj=Me((e,t)=>{const n=xe("YearLevel",shn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,withCellSpacing:h,__preventFocus:p,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:T,previousDisabled:S,hasNextLevel:A,levelControlAriaLabel:C,withNext:k,withPrevious:N,yearLabelFormat:D,__staticSelector:O,__stopPropagation:$,size:F,classNames:M,styles:B,unstyled:U,...H}=n,P=sc(),z={__staticSelector:O||"YearLevel",classNames:M,styles:B,unstyled:U,size:F},W=typeof T=="boolean"?T:o?!At(r).endOf("year").isBefore(o):!1,j=typeof S=="boolean"?S:s?!At(r).startOf("year").isAfter(s):!1;return _.jsxs(me,{"data-year-level":!0,size:F,ref:t,...H,children:[_.jsx(bv,{label:typeof D=="function"?D(r):At(r).locale(i||P.locale).format(D),__preventFocus:p,__stopPropagation:$,nextIcon:m,previousIcon:g,nextLabel:y,previousLabel:v,onNext:b,onPrevious:w,onLevelClick:E,nextDisabled:W,previousDisabled:j,hasNextLevel:A,levelControlAriaLabel:C,withNext:k,withPrevious:N,...z}),_.jsx(Tj,{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__getControlRef:l,__onControlKeyDown:c,__onControlClick:f,__onControlMouseEnter:d,__preventFocus:p,__stopPropagation:$,withCellSpacing:h,...z})]})});Cj.classes={...bv.classes,...Tj.classes};Cj.displayName="@mantine/dates/YearLevel";const ohn={monthLabelFormat:"MMMM YYYY"},Ij=Me((e,t)=>{const n=xe("MonthLevel",ohn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,withCellSpacing:w,__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:k,onNext:N,onPrevious:D,onLevelClick:O,nextDisabled:$,previousDisabled:F,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,monthLabelFormat:P,classNames:z,styles:W,unstyled:j,__staticSelector:q,size:G,static:ne,...ce}=n,de=sc(),he={__staticSelector:q||"MonthLevel",classNames:z,styles:W,unstyled:j,size:G},ve=typeof $=="boolean"?$:f?!At(r).endOf("month").isBefore(f):!1,Ie=typeof F=="boolean"?F:c?!At(r).startOf("month").isAfter(c):!1;return _.jsxs(me,{"data-month-level":!0,size:G,ref:t,...ce,children:[_.jsx(bv,{label:typeof P=="function"?P(r):At(r).locale(i||de.locale).format(P),__preventFocus:E,__stopPropagation:T,nextIcon:S,previousIcon:A,nextLabel:C,previousLabel:k,onNext:N,onPrevious:D,onLevelClick:O,nextDisabled:ve,previousDisabled:Ie,hasNextLevel:M,levelControlAriaLabel:B,withNext:U,withPrevious:H,...he}),_.jsx(Ej,{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__getDayRef:g,__onDayKeyDown:y,__onDayClick:v,__onDayMouseEnter:b,__preventFocus:E,__stopPropagation:T,static:ne,withCellSpacing:w,...he})]})});Ij.classes={...Ej.classes,...bv.classes};Ij.displayName="@mantine/dates/MonthLevel";var y9e={levelsGroup:"m_30b26e33"};const ahn={},_v=Me((e,t)=>{const n=xe("LevelsGroup",ahn,e),{classNames:r,className:i,style:s,styles:o,unstyled:a,vars:u,__staticSelector:l,...c}=n,f=dt({name:l||"LevelsGroup",classes:y9e,props:n,className:i,style:s,classNames:r,styles:o,unstyled:a,vars:u,rootSelector:"levelsGroup"});return _.jsx(me,{ref:t,...f("levelsGroup"),...c})});_v.classes=y9e;_v.displayName="@mantine/dates/LevelsGroup";const uhn={numberOfColumns:1},kj=Me((e,t)=>{const n=xe("DecadeLevelGroup",uhn,e),{decade:r,locale:i,minDate:s,maxDate:o,yearsListFormat:a,getYearControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,classNames:E,styles:T,unstyled:S,__staticSelector:A,__stopPropagation:C,numberOfColumns:k,levelControlAriaLabel:N,decadeLabelFormat:D,size:O,vars:$,...F}=n,M=I.useRef([]),B=Array(k).fill(0).map((U,H)=>{const P=At(r).add(H*10,"years").toDate();return _.jsx(Aj,{size:O,yearsListFormat:a,decade:P,withNext:H===k-1,withPrevious:H===0,decadeLabelFormat:D,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(z,W)=>Cse({levelIndex:H,rowIndex:W.rowIndex,cellIndex:W.cellIndex,event:z,controlsRef:M}),__getControlRef:(z,W,j)=>{Array.isArray(M.current[H])||(M.current[H]=[]),Array.isArray(M.current[H][z])||(M.current[H][z]=[]),M.current[H][z][W]=j},levelControlAriaLabel:typeof N=="function"?N(P):N,locale:i,minDate:s,maxDate:o,__preventFocus:d,__stopPropagation:C,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,nextDisabled:b,previousDisabled:w,getYearControlProps:u,__staticSelector:A||"DecadeLevelGroup",classNames:E,styles:T,unstyled:S,withCellSpacing:f},H)});return _.jsx(_v,{classNames:E,styles:T,__staticSelector:A||"DecadeLevelGroup",ref:t,size:O,unstyled:S,...F,children:B})});kj.classes={..._v.classes,...Aj.classes};kj.displayName="@mantine/dates/DecadeLevelGroup";const lhn={numberOfColumns:1},Rj=Me((e,t)=>{const n=xe("YearLevelGroup",lhn,e),{year:r,locale:i,minDate:s,maxDate:o,monthsListFormat:a,getMonthControlProps:u,__onControlClick:l,__onControlMouseEnter:c,withCellSpacing:f,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,classNames:S,styles:A,unstyled:C,__staticSelector:k,__stopPropagation:N,numberOfColumns:D,levelControlAriaLabel:O,yearLabelFormat:$,size:F,vars:M,...B}=n,U=I.useRef([]),H=Array(D).fill(0).map((P,z)=>{const W=At(r).add(z,"years").toDate();return _.jsx(Cj,{size:F,monthsListFormat:a,year:W,withNext:z===D-1,withPrevious:z===0,yearLabelFormat:$,__stopPropagation:N,__onControlClick:l,__onControlMouseEnter:c,__onControlKeyDown:(j,q)=>Cse({levelIndex:z,rowIndex:q.rowIndex,cellIndex:q.cellIndex,event:j,controlsRef:U}),__getControlRef:(j,q,G)=>{Array.isArray(U.current[z])||(U.current[z]=[]),Array.isArray(U.current[z][j])||(U.current[z][j]=[]),U.current[z][j][q]=G},levelControlAriaLabel:typeof O=="function"?O(W):O,locale:i,minDate:s,maxDate:o,__preventFocus:d,nextIcon:h,previousIcon:p,nextLabel:m,previousLabel:g,onNext:y,onPrevious:v,onLevelClick:b,nextDisabled:w,previousDisabled:E,hasNextLevel:T,getMonthControlProps:u,classNames:S,styles:A,unstyled:C,__staticSelector:k||"YearLevelGroup",withCellSpacing:f},z)});return _.jsx(_v,{classNames:S,styles:A,__staticSelector:k||"YearLevelGroup",ref:t,size:F,unstyled:C,...B,children:H})});Rj.classes={...Cj.classes,..._v.classes};Rj.displayName="@mantine/dates/YearLevelGroup";const chn={numberOfColumns:1},Nj=Me((e,t)=>{const n=xe("MonthLevelGroup",chn,e),{month:r,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__onDayClick:g,__onDayMouseEnter:y,withCellSpacing:v,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:k,nextDisabled:N,previousDisabled:D,hasNextLevel:O,classNames:$,styles:F,unstyled:M,numberOfColumns:B,levelControlAriaLabel:U,monthLabelFormat:H,__staticSelector:P,__stopPropagation:z,size:W,static:j,vars:q,...G}=n,ne=I.useRef([]),ce=Array(B).fill(0).map((de,he)=>{const ve=At(r).add(he,"months").toDate();return _.jsx(Ij,{month:ve,withNext:he===B-1,withPrevious:he===0,monthLabelFormat:H,__stopPropagation:z,__onDayClick:g,__onDayMouseEnter:y,__onDayKeyDown:(Ie,be)=>Cse({levelIndex:he,rowIndex:be.rowIndex,cellIndex:be.cellIndex,event:Ie,controlsRef:ne}),__getDayRef:(Ie,be,Xe)=>{Array.isArray(ne.current[he])||(ne.current[he]=[]),Array.isArray(ne.current[he][Ie])||(ne.current[he][Ie]=[]),ne.current[he][Ie][be]=Xe},levelControlAriaLabel:typeof U=="function"?U(ve):U,locale:i,firstDayOfWeek:s,weekdayFormat:o,weekendDays:a,getDayProps:u,excludeDate:l,minDate:c,maxDate:f,renderDay:d,hideOutsideDates:h,hideWeekdays:p,getDayAriaLabel:m,__preventFocus:b,nextIcon:w,previousIcon:E,nextLabel:T,previousLabel:S,onNext:A,onPrevious:C,onLevelClick:k,nextDisabled:N,previousDisabled:D,hasNextLevel:O,classNames:$,styles:F,unstyled:M,__staticSelector:P||"MonthLevelGroup",size:W,static:j,withCellSpacing:v},he)});return _.jsx(_v,{classNames:$,styles:F,__staticSelector:P||"MonthLevelGroup",ref:t,size:W,...G,children:ce})});Nj.classes={..._v.classes,...Ij.classes};Nj.displayName="@mantine/dates/MonthLevelGroup";var v9e={input:"m_6fa5e2aa"};const fhn={},Pj=Me((e,t)=>{const{inputProps:n,wrapperProps:r,placeholder:i,classNames:s,styles:o,unstyled:a,popoverProps:u,modalProps:l,dropdownType:c,children:f,formattedValue:d,dropdownHandlers:h,dropdownOpened:p,onClick:m,clearable:g,onClear:y,clearButtonProps:v,rightSection:b,shouldClear:w,readOnly:E,disabled:T,value:S,name:A,form:C,type:k,...N}=Swe("PickerInputBase",fhn,e),D=b||(g&&w&&!E&&!T?_.jsx(tg,{variant:"transparent",onClick:y,unstyled:a,size:n.size||"sm",...v}):null),O=()=>{k==="range"&&Array.isArray(S)&&S[0]&&!S[1]&&y(),h.close()};return _.jsxs(_.Fragment,{children:[c==="modal"&&!E&&_.jsx(Ji,{opened:p,onClose:O,withCloseButton:!1,size:"auto","data-dates-modal":!0,unstyled:a,...l,children:f}),_.jsx(mi.Wrapper,{...r,children:_.jsxs(Mo,{position:"bottom-start",opened:p,trapFocus:!0,returnFocus:!0,unstyled:a,...u,disabled:(u==null?void 0:u.disabled)||c==="modal"||E,onClose:()=>{var $;($=u==null?void 0:u.onClose)==null||$.call(u),O()},children:[_.jsx(Mo.Target,{children:_.jsx(mi,{"aria-label":d||i,"data-dates-input":!0,"data-read-only":E||void 0,disabled:T,component:"button",type:"button",multiline:!0,onClick:$=>{m==null||m($),h.toggle()},rightSection:D,...n,ref:t,classNames:{...s,input:es(v9e.input,s==null?void 0:s.input)},...N,children:d||_.jsx(mi.Placeholder,{error:n.error,unstyled:a,className:s==null?void 0:s.placeholder,style:o==null?void 0:o.placeholder,children:i})})}),_.jsx(Mo.Dropdown,{"data-dates-dropdown":!0,children:f})]})}),_.jsx(r9e,{value:S,name:A,form:C,type:k})]})});Pj.classes=v9e;Pj.displayName="@mantine/dates/PickerInputBase";const qve=e=>e==="range"?[null,null]:e==="multiple"?[]:null;function Rse({type:e,value:t,defaultValue:n,onChange:r,applyTimezone:i=!0}){const s=I.useRef(e),o=sc(),[a,u,l]=As({value:W0("add",t,o.getTimezone(),!i),defaultValue:W0("add",n,o.getTimezone(),!i),finalValue:qve(e),onChange:f=>{r==null||r(W0("remove",f,o.getTimezone(),!i))}});let c=a;return s.current!==e&&(s.current=e,t===void 0&&(c=n!==void 0?n:qve(e),u(c))),[c,u,l]}function jU(e,t){return e?e==="month"?0:e==="year"?1:2:t||0}function dhn(e){return e===0?"month":e===1?"year":"decade"}function NA(e,t,n){return dhn(rh(jU(e,0),jU(t,0),jU(n,2)))}const hhn={maxLevel:"decade",minLevel:"month",__updateDateOnYearSelect:!0,__updateDateOnMonthSelect:!0},Oj=Me((e,t)=>{const n=xe("Calendar",hhn,e),{vars:r,maxLevel:i,minLevel:s,defaultLevel:o,level:a,onLevelChange:u,date:l,defaultDate:c,onDateChange:f,numberOfColumns:d,columnsToScroll:h,ariaLabels:p,onYearSelect:m,onMonthSelect:g,onYearMouseEnter:y,onMonthMouseEnter:v,__updateDateOnYearSelect:b,__updateDateOnMonthSelect:w,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:k,hideOutsideDates:N,hideWeekdays:D,getDayAriaLabel:O,monthLabelFormat:$,nextIcon:F,previousIcon:M,__onDayClick:B,__onDayMouseEnter:U,withCellSpacing:H,monthsListFormat:P,getMonthControlProps:z,yearLabelFormat:W,yearsListFormat:j,getYearControlProps:q,decadeLabelFormat:G,classNames:ne,styles:ce,unstyled:de,minDate:he,maxDate:ve,locale:Ie,__staticSelector:be,size:Xe,__preventFocus:ze,__stopPropagation:yt,onNextDecade:it,onPreviousDecade:_e,onNextYear:ke,onPreviousYear:Ve,onNextMonth:ct,onPreviousMonth:Dt,static:Ge,__timezoneApplied:ge,...ht}=n,{resolvedClassNames:vt,resolvedStyles:pe}=Jm({classNames:ne,styles:ce,props:n}),[Ce,qe]=As({value:a?NA(a,s,i):void 0,defaultValue:o?NA(o,s,i):void 0,finalValue:NA(void 0,s,i),onChange:u}),[ut,_t]=Rse({type:"default",value:l,defaultValue:c,onChange:f,applyTimezone:!ge}),Fn={__staticSelector:be||"Calendar",styles:pe,classNames:vt,unstyled:de,size:Xe},Ir=sc(),jn=h||d||1,dr=ut||W0("add",new Date,Ir.getTimezone()),yn=()=>{const kn=At(dr).add(jn,"month").toDate();ct==null||ct(kn),_t(kn)},In=()=>{const kn=At(dr).subtract(jn,"month").toDate();Dt==null||Dt(kn),_t(kn)},ir=()=>{const kn=At(dr).add(jn,"year").toDate();ke==null||ke(kn),_t(kn)},sr=()=>{const kn=At(dr).subtract(jn,"year").toDate();Ve==null||Ve(kn),_t(kn)},qo=()=>{const kn=At(dr).add(10*jn,"year").toDate();it==null||it(kn),_t(kn)},ji=()=>{const kn=At(dr).subtract(10*jn,"year").toDate();_e==null||_e(kn),_t(kn)};return _.jsxs(me,{ref:t,size:Xe,"data-calendar":!0,...ht,children:[Ce==="month"&&_.jsx(Nj,{month:dr,minDate:he,maxDate:ve,firstDayOfWeek:E,weekdayFormat:T,weekendDays:S,getDayProps:A,excludeDate:C,renderDay:k,hideOutsideDates:N,hideWeekdays:D,getDayAriaLabel:O,onNext:yn,onPrevious:In,hasNextLevel:i!=="month",onLevelClick:()=>qe("year"),numberOfColumns:d,locale:Ie,levelControlAriaLabel:p==null?void 0:p.monthLevelControl,nextLabel:p==null?void 0:p.nextMonth,nextIcon:F,previousLabel:p==null?void 0:p.previousMonth,previousIcon:M,monthLabelFormat:$,__onDayClick:B,__onDayMouseEnter:U,__preventFocus:ze,__stopPropagation:yt,static:Ge,withCellSpacing:H,...Fn}),Ce==="year"&&_.jsx(Rj,{year:dr,numberOfColumns:d,minDate:he,maxDate:ve,monthsListFormat:P,getMonthControlProps:z,locale:Ie,onNext:ir,onPrevious:sr,hasNextLevel:i!=="month"&&i!=="year",onLevelClick:()=>qe("decade"),levelControlAriaLabel:p==null?void 0:p.yearLevelControl,nextLabel:p==null?void 0:p.nextYear,nextIcon:F,previousLabel:p==null?void 0:p.previousYear,previousIcon:M,yearLabelFormat:W,__onControlMouseEnter:v,__onControlClick:(kn,Bi)=>{w&&_t(Bi),qe(NA("month",s,i)),g==null||g(Bi)},__preventFocus:ze,__stopPropagation:yt,withCellSpacing:H,...Fn}),Ce==="decade"&&_.jsx(kj,{decade:dr,minDate:he,maxDate:ve,yearsListFormat:j,getYearControlProps:q,locale:Ie,onNext:qo,onPrevious:ji,numberOfColumns:d,nextLabel:p==null?void 0:p.nextDecade,nextIcon:F,previousLabel:p==null?void 0:p.previousDecade,previousIcon:M,decadeLabelFormat:G,__onControlMouseEnter:y,__onControlClick:(kn,Bi)=>{b&&_t(Bi),qe(NA("year",s,i)),m==null||m(Bi)},__preventFocus:ze,__stopPropagation:yt,withCellSpacing:H,...Fn})]})});Oj.classes={...kj.classes,...Rj.classes,...Nj.classes};Oj.displayName="@mantine/dates/Calendar";function phn(e){const{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:D,weekendDays:O,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie,...be}=e;return{calendarProps:{maxLevel:t,minLevel:n,defaultLevel:r,level:i,onLevelChange:s,nextIcon:o,previousIcon:a,date:u,defaultDate:l,onDateChange:c,numberOfColumns:f,columnsToScroll:d,ariaLabels:h,onYearSelect:p,onMonthSelect:m,onYearMouseEnter:g,onMonthMouseEnter:y,onNextMonth:v,onPreviousMonth:b,onNextYear:w,onPreviousYear:E,onNextDecade:T,onPreviousDecade:S,withCellSpacing:A,__updateDateOnYearSelect:C,__updateDateOnMonthSelect:k,firstDayOfWeek:N,weekdayFormat:D,weekendDays:O,getDayProps:$,excludeDate:F,renderDay:M,hideOutsideDates:B,hideWeekdays:U,getDayAriaLabel:H,monthLabelFormat:P,monthsListFormat:z,getMonthControlProps:W,yearLabelFormat:j,yearsListFormat:q,getYearControlProps:G,decadeLabelFormat:ne,allowSingleDateInRange:ce,allowDeselect:de,minDate:he,maxDate:ve,locale:Ie},others:be}}function Wve(e,t){const n=[...t].sort((r,i)=>r.getTime()-i.getTime());return At(n[0]).startOf("day").subtract(1,"ms").isBefore(e)&&At(n[1]).endOf("day").add(1,"ms").isAfter(e)}function mhn({type:e,level:t,value:n,defaultValue:r,onChange:i,allowSingleDateInRange:s,allowDeselect:o,onMouseLeave:a,applyTimezone:u=!0}){const[l,c]=Rse({type:e,value:n,defaultValue:r,onChange:i,applyTimezone:u}),[f,d]=I.useState(e==="range"&&l[0]&&!l[1]?l[0]:null),[h,p]=I.useState(null),m=T=>{if(e==="range"){if(f instanceof Date&&!l[1]){if(At(T).isSame(f,t)&&!s){d(null),p(null),c([null,null]);return}const S=[T,f];S.sort((A,C)=>A.getTime()-C.getTime()),c(S),p(null),d(null);return}if(l[0]&&!l[1]&&At(T).isSame(l[0],t)&&!s){d(null),p(null),c([null,null]);return}c([T,null]),p(null),d(T);return}if(e==="multiple"){l.some(S=>At(S).isSame(T,t))?c(l.filter(S=>!At(S).isSame(T,t))):c([...l,T]);return}l&&o&&At(T).isSame(l,t)?c(null):c(T)},g=T=>f instanceof Date&&h instanceof Date?Wve(T,[h,f]):l[0]instanceof Date&&l[1]instanceof Date?Wve(T,l):!1,y=e==="range"?T=>{a==null||a(T),p(null)}:a,v=T=>l[0]instanceof Date&&At(T).isSame(l[0],t)?!(h&&At(h).isBefore(l[0])):!1,b=T=>l[1]instanceof Date?At(T).isSame(l[1],t):!(l[0]instanceof Date)||!h?!1:At(h).isBefore(l[0])&&At(T).isSame(l[0],t),w=T=>{if(e==="range")return{selected:l.some(A=>A&&At(A).isSame(T,t)),inRange:g(T),firstInRange:v(T),lastInRange:b(T),"data-autofocus":!!l[0]&&At(l[0]).isSame(T,t)||void 0};if(e==="multiple")return{selected:l.some(A=>A&&At(A).isSame(T,t)),"data-autofocus":!!l[0]&&At(l[0]).isSame(T,t)||void 0};const S=At(l).isSame(T,t);return{selected:S,"data-autofocus":S||void 0}},E=e==="range"&&f?p:()=>{};return I.useEffect(()=>{e==="range"&&!l[0]&&!l[1]&&d(null)},[n]),{onDateChange:m,onRootMouseLeave:y,onHoveredDateChange:E,getControlProps:w,_value:l,setValue:c}}const ghn={type:"default",defaultLevel:"month",numberOfColumns:1},Dj=Me((e,t)=>{const n=xe("DatePicker",ghn,e),{classNames:r,styles:i,vars:s,type:o,defaultValue:a,value:u,onChange:l,__staticSelector:c,getDayProps:f,allowSingleDateInRange:d,allowDeselect:h,onMouseLeave:p,numberOfColumns:m,hideOutsideDates:g,__onDayMouseEnter:y,__onDayClick:v,__timezoneApplied:b,...w}=n,{onDateChange:E,onRootMouseLeave:T,onHoveredDateChange:S,getControlProps:A}=mhn({type:o,level:"day",allowDeselect:h,allowSingleDateInRange:d,value:u,defaultValue:a,onChange:l,onMouseLeave:p,applyTimezone:!b}),{resolvedClassNames:C,resolvedStyles:k}=Jm({classNames:r,styles:i,props:n}),N=sc();return _.jsx(Oj,{ref:t,minLevel:"month",classNames:C,styles:k,__staticSelector:c||"DatePicker",onMouseLeave:T,numberOfColumns:m,hideOutsideDates:g??m!==1,__onDayMouseEnter:(D,O)=>{S(O),y==null||y(D,O)},__onDayClick:(D,O)=>{E(O),v==null||v(D,O)},getDayProps:D=>({...A(D),...f==null?void 0:f(D)}),...w,date:W0("add",w.date,N.getTimezone(),b),__timezoneApplied:!0})});Dj.classes=Oj.classes;Dj.displayName="@mantine/dates/DatePicker";function yhn({type:e,value:t,defaultValue:n,onChange:r,locale:i,format:s,closeOnChange:o,sortDates:a,labelSeparator:u,valueFormatter:l}){const c=sc(),[f,d]=n6(!1),[h,p]=Rse({type:e,value:t,defaultValue:n,onChange:r}),m=Tdn({type:e,date:h,locale:c.getLocale(i),format:s,labelSeparator:c.getLabelSeparator(u),formatter:l}),g=b=>{o&&(e==="default"&&d.close(),e==="range"&&b[0]&&b[1]&&d.close()),p(a&&e==="multiple"?[...b].sort((w,E)=>w.getTime()-E.getTime()):b)},y=()=>g(e==="range"?[null,null]:e==="multiple"?[]:null),v=e==="range"?!!h[0]:e==="multiple"?h.length>0:h!==null;return{_value:h,setValue:g,onClear:y,shouldClear:v,formattedValue:m,dropdownOpened:f,dropdownHandlers:d}}const vhn={type:"default",valueFormat:"MMMM D, YYYY",closeOnChange:!0,sortDates:!0,dropdownType:"popover"},Nse=Me((e,t)=>{const n=xe("DatePickerInput",vhn,e),{type:r,value:i,defaultValue:s,onChange:o,valueFormat:a,labelSeparator:u,locale:l,classNames:c,styles:f,unstyled:d,closeOnChange:h,size:p,variant:m,dropdownType:g,sortDates:y,minDate:v,maxDate:b,vars:w,defaultDate:E,valueFormatter:T,...S}=n,{resolvedClassNames:A,resolvedStyles:C}=Jm({classNames:c,styles:f,props:n}),{calendarProps:k,others:N}=phn(S),{_value:D,setValue:O,formattedValue:$,dropdownHandlers:F,dropdownOpened:M,onClear:B,shouldClear:U}=yhn({type:r,value:i,defaultValue:s,onChange:o,locale:l,format:a,labelSeparator:u,closeOnChange:h,sortDates:y,valueFormatter:T}),H=Array.isArray(D)?D[0]||E:D||E,P=sc();return _.jsx(Pj,{formattedValue:$,dropdownOpened:M,dropdownHandlers:F,classNames:A,styles:C,unstyled:d,ref:t,onClear:B,shouldClear:U,value:D,size:p,variant:m,dropdownType:g,...N,type:r,__staticSelector:"DatePickerInput",children:_.jsx(Dj,{...k,size:p,variant:m,type:r,value:D,defaultDate:H||Ddn({maxDate:b,minDate:v,timezone:P.getTimezone()}),onChange:O,locale:l,classNames:A,styles:C,unstyled:d,__staticSelector:"DatePickerInput",__stopPropagation:g==="popover",minDate:v,maxDate:b,date:W0("add",k.date,P.getTimezone()),__timezoneApplied:!0})})});Nse.classes={...Pj.classes,...Dj.classes};Nse.displayName="@mantine/dates/DatePickerInput";function bhn(e,t){const n=Object.values(e).map(r=>[r.startTime,r.endTime]).flat();return t[0]===null||t[1]===null?!1:Math.min(...n)>=t[0].getTime()&&Math.max(...n)<=t[1].getTime()}function _hn({studyId:e,allParticipants:t}){const n=Qh(),[r,i]=L1(),s=t.filter(p=>p.completed).map(p=>Math.max(...Object.values(p.answers).map(m=>m.endTime).filter(m=>m!==void 0))).filter(p=>Number.isFinite(p)),[o,a]=I.useState([new Date(new Date(Math.min(...s.length>0?s:[new Date().getTime()])).setHours(0,0,0,0)),new Date(new Date(Math.max(...s.length>0?s:[new Date().getTime()])).setHours(24,0,0,0))]),[u,l,c,f]=I.useMemo(()=>{const p=t.filter(y=>!y.rejected&&y.completed),m=t.filter(y=>!y.rejected&&!y.completed),g=t.filter(y=>y.rejected);return[p,m,g,p.filter(y=>bhn(y.answers,o))]},[t,o]),d=I.useMemo(()=>{var p,m;return f.length>0?[{Date:(p=o[0])==null?void 0:p.getTime(),Participants:0},...f.map(g=>Math.max(...Object.values(g.answers).map(y=>y.endTime).flat())).sort((g,y)=>g-y).map((g,y)=>({Date:g,Participants:y})),{Date:(m=o[1])==null?void 0:m.getTime(),Participants:f.length}]:[]},[f,o]),h=I.useMemo(()=>{var p,m;return{width:i.width-40-8,height:200,mark:{type:"line",interpolate:"step-before"},encoding:{x:{field:"Date",type:"temporal",scale:{domain:[(p=o[0])==null?void 0:p.getTime(),(m=o[1])==null?void 0:m.getTime()]}},y:{field:"Participants",type:"quantitative"}},data:{values:d}}},[i.width,o,d]);return _.jsx(Fc,{children:_.jsxs(Kb,{ref:r,padding:"lg",shadow:"md",withBorder:!0,children:[_.jsxs(Nt,{align:"center",mb:"xs",justify:"space-between",children:[_.jsxs(Nt,{direction:"row",align:"center",children:[_.jsx(Ii,{order:5,children:e}),_.jsx($Me,{completed:u.length,inProgress:l.length,rejected:c.length,filteredCompleted:f.length})]}),_.jsxs(Cs,{children:[_.jsx(Uee,{allParticipants:t,studyId:e}),_.jsx(Ci,{label:"Analyze and manage study data",children:_.jsx(cn,{onClick:p=>{!p.ctrlKey&&!p.metaKey&&(p.preventDefault(),n(`/analysis/stats/${e}`))},px:4,component:"a",href:`${Gu}analysis/stats/${e}`,children:_.jsx(MZe,{})})})]})]}),_.jsx(Nse,{type:"range",label:"Time Filter",placeholder:"Select a date range",value:o,onChange:a}),d.length>0?_.jsxs(_.Fragment,{children:[_.jsx(et,{mt:16,children:"Finished Participants"}),_.jsx(OW,{spec:h,actions:!1})]}):_.jsx(me,{h:293.4,children:_.jsx(Cm,{style:{height:"100%"},children:_.jsx(et,{children:"Not enough participants for chart"})})})]})})}function whn({globalConfig:e}){const[t,n]=I.useState(!1),[r,i]=I.useState({}),[s,o]=I.useState({}),{storageEngine:a}=ks(),{user:u}=h_();I.useEffect(()=>{(async()=>{n(!0);const f={},d={},h=async m=>{const g=await s4(m,e);if(a){if(f[m]=await a.getAllParticipantsDataByStudy(m),g===null)return;if(a instanceof xc){const y=await a.getModes(m);d[m]=y.analyticsInterfacePubliclyAccessible}}};await(async()=>{const m=e.configsList.map(g=>h(g));try{await Promise.all(m),i(f),o(d)}catch(g){console.error("Error fetching data:",g)}finally{n(!1)}})()})()},[e,a]);const l=e.configsList.map(c=>r[c]&&((s[c]||u.isAdmin)&&!e.configs[c].test?_.jsx(Ga.Col,{span:{md:12,xl:6},children:_.jsx(_hn,{studyId:c,allParticipants:r[c]})},`${c}-panel`):null));return _.jsxs(_.Fragment,{children:[_.jsx(y2,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsx(Fc,{fluid:!0,children:_.jsxs(me,{children:[_.jsx(Ii,{mb:20,order:4,children:"Your Studies:"}),_.jsxs(Ga,{children:[l.length>0?l:_.jsx(Fc,{mt:100,children:_.jsx(et,{children:"No studies to show. If you believe that this is in error, make sure that you are logged in."})}),_.jsx(zl,{visible:t})]})]})})})]})}function Ehn(){const{user:e,triggerAuth:t}=h_(),{storageEngine:n}=ks(),[r,i]=I.useState(!1),[s,o]=I.useState([]),[a,u]=I.useState(!1),[l,c]=I.useState(!1),[f,d]=I.useState(!1),[h,p]=I.useState(!1),[m,g]=I.useState(!1),[y,v]=I.useState(""),[b,w]=I.useState(null),E=yTe({initialValues:{email:""},validate:{email:Llt("Invalid email")}});I.useEffect(()=>{(async()=>{if(u(!0),n instanceof xc){const O=await(n==null?void 0:n.getUserManagementData("authentication"));i(O==null?void 0:O.isEnabled);const $=await(n==null?void 0:n.getUserManagementData("adminUsers"));$&&$.adminUsersList&&o($==null?void 0:$.adminUsersList.map(F=>F.email))}else i(!1);u(!1)})()},[n]);const T=async()=>{if(u(!0),n instanceof xc){const D=await JBe(n,u);D&&D.email?(w({email:D.email,uid:D.uid}),p(!0)):g(!0)}u(!1)},S=async D=>{u(!0),n instanceof xc&&D&&(await n.changeAuth(!0),await n.addAdminUser(D),o([D.email]),i(!0),t()),p(!1),u(!1)},A=async()=>{if(u(!0),n instanceof xc){await n.addAdminUser({email:E.values.email,uid:null});const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(O=>O.email))}u(!1),c(!1),E.setValues({email:""})},C=D=>{d(!0),v(D)},k=async()=>{if(u(!0),n instanceof xc){await n.removeAdminUser(y);const D=await n.getUserManagementData("adminUsers");o(D==null?void 0:D.adminUsersList.map(O=>O.email))}d(!1),u(!1)},N=I.useMemo(()=>n instanceof xc,[n]);return _.jsxs(_.Fragment,{children:[_.jsx(Fc,{children:_.jsxs(Kb,{withBorder:!0,style:{backgroundColor:"#FAFAFA"},children:[_.jsx(Ii,{mb:20,order:3,children:"Authentication"}),r?_.jsx(Nt,{children:_.jsx(et,{children:"Authentication is enabled."})}):_.jsxs(Nt,{justify:"space-between",children:[_.jsx(me,{children:_.jsx(et,{children:"Authentication is currently disabled."})}),_.jsx(Ci,{label:"You can only enable auth when using Firebase",disabled:N,children:_.jsx(cn,{onClick:D=>N?T():D.preventDefault(),color:"green","data-disabled":N?void 0:!0,style:{"&[dataDisabled]":{pointerEvents:"all"}},children:"Enable Authentication"})})]}),r?_.jsxs(Nt,{mt:40,direction:"column",children:[_.jsxs(Nt,{style:{borderBottom:"1px solid #dedede"},direction:"row",justify:"space-between",mb:15,pb:15,children:[_.jsx(Ii,{order:6,children:"Enabled Users"}),_.jsx(kK,{style:{cursor:"pointer"},onClick:()=>c(!0)})]}),s.length>0?s.map(D=>{var O;return _.jsxs(Nt,{justify:"space-between",mb:10,children:[_.jsx(et,{children:D}),D===((O=e.user)==null?void 0:O.email)?_.jsx(et,{color:"blue",size:"xs",children:"You"}):_.jsx(Gb,{variant:"subtle",onClick:()=>C(D),children:_.jsx(pxe,{color:"red"})})]},D)}):null]}):null]})}),_.jsx(Ji,{opened:l,onClose:()=>c(!1),title:"Add Admin User",children:_.jsxs(me,{component:"form",onSubmit:E.onSubmit(()=>A()),children:[_.jsx(a0,{leftSection:_.jsx(NZe,{}),placeholder:"User Gmail Account",...E.getInputProps("email")}),_.jsxs(Nt,{mt:30,justify:"right",children:[_.jsx(cn,{mr:5,variant:"subtle",color:"red",onClick:()=>c(!1),children:"Cancel"}),_.jsx(cn,{type:"submit",children:"Save"})]})]})}),_.jsxs(Ji,{opened:f,size:"large",onClose:()=>d(!1),title:_.jsxs(et,{fw:700,children:["Remove",y,"?"]}),children:[_.jsxs(et,{mt:40,children:["Are you sure you want to remove",_.jsx("b",{children:y})," ","as an administrator?"]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(cn,{mr:5,variant:"subtle",color:"red",onClick:()=>d(!1),children:"Cancel"}),_.jsx(cn,{onClick:()=>k(),children:"Yes, I'm sure."})]})]}),_.jsxs(Ji,{opened:h,size:"md",onClose:()=>p(!1),title:_.jsx(et,{fw:700,children:"Enable Authentication?"}),children:[_.jsxs(et,{mt:40,children:["User"," ",_.jsx("b",{children:b==null?void 0:b.email})," ","will be added as an administrator to this application. After enabling authentication, you'll be able to add additional users below. This action cannot be undone."]}),_.jsxs(Nt,{mt:40,justify:"right",children:[_.jsx(cn,{mr:5,variant:"subtle",color:"red",onClick:()=>p(!1),children:"Cancel"}),_.jsx(cn,{onClick:()=>S(b),children:"Yes, I'm sure."})]})]}),_.jsxs(Ji,{opened:m,size:"md",onClose:()=>g(!1),title:_.jsx(et,{fw:700,children:"An Error Occurred."}),children:[_.jsxs(et,{mt:40,children:["An error has occurred when trying to enable authentication. Please consult the"," ",_.jsx("a",{href:"https://revisit.dev/docs/data-and-deployment/authentication-authorization/adding-removing-ui/",target:"_blank",rel:"noreferrer",children:"documentation"})," ","for more information."]}),_.jsx(Nt,{mt:40,justify:"right",children:_.jsx(cn,{mr:5,onClick:()=>g(!1),children:"Okay"})})]}),_.jsx(zl,{visible:a})]})}class xhn extends OMe{constructor(){super("localStorage");gu(this,"studyDatabase");gu(this,"studyId")}async connect(){this.connected=!0}async initializeStudyDb(n,r){this.studyId=n,this.studyDatabase=await Cw.createInstance({name:n});const i=await this.getCurrentConfigHash(),s=await B3(JSON.stringify(r));i&&i!==s&&(await this.studyDatabase.removeItem("sequenceArray"),await this.clearCurrentParticipantId()),this.studyDatabase.setItem("currentConfigHash",s);const o=await this.studyDatabase.getItem("configs");await this.studyDatabase.setItem("configs",{...o,[s]:r})}async initializeParticipantSession(n,r,i,s,o){var f;if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(await this.getCurrentParticipantId(o),!this.currentParticipantId)throw new Error("Participant not initialized");const a=await this.studyDatabase.getItem(this.currentParticipantId);if(a)return a;const u=await this.getModes(n),l=await B3(JSON.stringify(i)),c={participantId:this.currentParticipantId,participantConfigHash:l,sequence:await this.getSequence(),answers:{},searchParams:r,metadata:s,completed:!1,rejected:!1};return u.dataCollectionEnabled&&await((f=this.studyDatabase)==null?void 0:f.setItem(this.currentParticipantId,c)),c}async getCurrentConfigHash(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("currentConfigHash")}async getAllConfigsFromHash(n,r){return await Cw.createInstance({name:r}).getItem("configs")||{}}async getCurrentParticipantId(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const r=await this.studyDatabase.getItem("currentParticipant");if(n)return this.currentParticipantId=n,await this.studyDatabase.setItem("currentParticipant",n),n;if(r)return this.currentParticipantId=r,r;const i=j3();return await this.studyDatabase.setItem("currentParticipant",i),this.currentParticipantId=i,i}async clearCurrentParticipantId(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");await this.studyDatabase.removeItem("currentParticipant")}async saveAnswers(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");if(!this.currentParticipantId)throw new Error("Participant not initialized");const r=await this.studyDatabase.getItem(this.currentParticipantId);if(!r)throw new Error("Participant not initialized");r.answers=n,await this.studyDatabase.setItem(this.currentParticipantId,r)}async setSequenceArray(n){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");this.studyDatabase.setItem("sequenceArray",n)}async getSequence(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("sequenceArray");if(!n)throw new Error("Latin square not initialized");if(!this.studyId)throw new Error("Study ID not initialized");const r=await this.getModes(this.studyId),i=r.dataCollectionEnabled?n.pop():n[Math.floor(Math.random()*n.length-1)];if(!i)throw new Error("Latin square is empty");return r.dataCollectionEnabled&&await this.studyDatabase.setItem("sequenceArray",n),i}async getSequenceArray(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");return await this.studyDatabase.getItem("sequenceArray")}async getAllParticipantsData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=[];return await this.studyDatabase.iterate((r,i)=>{i!=="config"&&i!=="currentParticipant"&&i!=="sequenceArray"&&i!=="configs"&&i!=="currentConfigHash"&&i!=="modes"&&n.push(r)}),n}async getAllParticipantsDataByStudy(n){const r=Cw.createInstance({name:n}),i=[];return await r.iterate((s,o)=>{o!=="config"&&o!=="currentParticipant"&&o!=="sequenceArray"&&o!=="configs"&&o!=="currentConfigHash"&&o!=="modes"&&i.push(s)}),i}async getParticipantData(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.studyDatabase.getItem("currentParticipant");return n?await this.studyDatabase.getItem(n):null}async nextParticipant(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=j3();this.studyDatabase.setItem("currentParticipant",n)}async verifyCompletion(){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const n=await this.getParticipantData();if(!n)throw new Error("Participant not initialized");return n.completed=!0,await this.studyDatabase.setItem(this.currentParticipantId,n),!0}async validateUser(n){return!0}async rejectParticipant(n,r){if(!this._verifyStudyDatabase(this.studyDatabase))throw new Error("Study database not initialized");const i=await this.studyDatabase.getItem(r);if(!i)throw new Error("Participant not found");if(i.rejected)return;i.rejected=!0;const s=await this.studyDatabase.getItem("sequenceArray");s&&(s.unshift(i.sequence),this.setSequenceArray(s)),await this.studyDatabase.setItem(r,i)}async setMode(n,r,i){this.studyDatabase=await Cw.createInstance({name:n});const s=await this.studyDatabase.getItem("modes");if(!s)throw new Error("Modes not initialized");s[r]=i,this.studyDatabase.setItem("modes",s)}async getModes(n){this.studyDatabase=await Cw.createInstance({name:n});const r=await this.studyDatabase.getItem("modes");if(r)return r;const i={dataCollectionEnabled:!0,studyNavigatorEnabled:!0,analyticsInterfacePubliclyAccessible:!0};return this.studyDatabase.setItem("modes",i),i}_verifyStudyDatabase(n){return n!==void 0}}async function Shn(){let e,t=!1;{const n=new xc;await n.connect(),n.isConnected()?e=n:t=!0}if(t){const n=new xhn;await n.connect(),e=n}return e}function lw({title:e}){const t=Gy();return I.useEffect(()=>{document.title=e},[t,e]),null}async function Thn(){const t=await(await fetch(`${Gu}global.json`)).text();return aOt(t)}function Ahn(){const[e,t]=I.useState(null),[n,r]=I.useState({});I.useEffect(()=>{async function a(){e&&r(await OOt(e))}a()},[e]),I.useEffect(()=>{e||Thn().then(a=>{t(a)})},[e]);const{storageEngine:i,setStorageEngine:s}=ks();I.useEffect(()=>{if(i!==void 0)return;async function a(){const u=await Shn();s(u)}a()},[s,i]);const o=async a=>i instanceof xc?!(await i.getModes(a)).analyticsInterfacePubliclyAccessible:!1;return e?_.jsx(_Ze,{basename:Gu,children:_.jsx(CBt,{children:_.jsx(AZe,{children:_.jsx(pi,{padding:"md",header:{height:70},children:_.jsxs(gZe,{children:[_.jsx(Ip,{path:"/",element:_.jsxs(_.Fragment,{children:[_.jsx(lw,{title:"ReVISit | Home"}),_.jsx(y2,{studyIds:e.configsList}),_.jsx(Vat,{globalConfig:e,studyConfigs:n})]})}),_.jsx(Ip,{path:"/:studyId/*",element:_.jsxs(_.Fragment,{children:[_.jsx(lw,{title:"ReVISit | Study"}),_.jsx(DOt,{globalConfig:e})]})}),_.jsx(Ip,{path:"/analysis/dashboard",element:_.jsxs(_.Fragment,{children:[_.jsx(lw,{title:"ReVISit | Analysis"}),_.jsx(whn,{globalConfig:e})]})}),_.jsx(Ip,{path:"/analysis",element:_.jsx(bH,{to:"/analysis/dashboard"})}),_.jsx(Ip,{path:"/analysis/stats/:studyId/:tab/:trialId?",element:_.jsxs(_.Fragment,{children:[_.jsx(lw,{title:"ReVISit | Analysis"}),_.jsx(Vve,{paramToCheck:"studyId",paramCallback:o,children:_.jsx(wdn,{globalConfig:e})})]})}),_.jsx(Ip,{path:"/analysis/stats/:studyId",element:_.jsx(bH,{to:"./table",replace:!0})}),_.jsx(Ip,{path:"/settings",element:_.jsxs(Vve,{children:[_.jsx(lw,{title:"ReVISit | Settings"}),_.jsx(y2,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsx(Ehn,{})})]})}),_.jsx(Ip,{path:"/login",element:_.jsxs(_.Fragment,{children:[_.jsx(lw,{title:"ReVISit | Login"}),_.jsx(y2,{studyIds:e.configsList}),_.jsx(pi.Main,{children:_.jsx(Edn,{})})]})})]})})})})}):null}BU.createRoot(document.getElementById("root")).render(_.jsx(wr.StrictMode,{children:_.jsx(AJe,{children:_.jsxs(I_e,{children:[_.jsx(og,{}),_.jsx(Ahn,{})]})})}))});export default Chn();
